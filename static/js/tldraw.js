(function(){
shadow$provide[610]=function(za,ca,ab,K){function x(w,A,C){var G,Q={},g=null,h=null;void 0!==C&&(g=""+C);void 0!==A.key&&(g=""+A.key);void 0!==A.ref&&(h=A.ref);for(G in A)r.call(A,G)&&!c.hasOwnProperty(G)&&(Q[G]=A[G]);if(w&&w.defaultProps)for(G in A=w.defaultProps,A)void 0===Q[G]&&(Q[G]=A[G]);return{$$typeof:X,type:w,key:g,ref:h,props:Q,_owner:B.current}}ca(22);za=ca(25);var X=60103;K.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(ca=Symbol.for,X=ca("react.element"),K.Fragment=ca("react.fragment"));
var B=za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};K.jsx=x;K.jsxs=x};
shadow$provide[612]=function(za,ca,ab,K){ab.exports=ca(610)};
shadow$provide[613]=function(za,ca,ab,K){function x(Ya){for(var Db="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+Ya,vb=1;vb<arguments.length;vb++)Db+="\x26args[]\x3d"+encodeURIComponent(arguments[vb]);return"Minified React error #"+Ya+"; visit "+Db+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function X(Ya){if(null==Ya)return null;if("function"===typeof Ya)return Ya.displayName||Ya.name||null;if("string"===typeof Ya)return Ya;
switch(Ya){case u:return"Fragment";case T:return"Portal";case H:return"Profiler";case F:return"StrictMode";case ja:return"Suspense";case W:return"SuspenseList"}if("object"===typeof Ya)switch(Ya.$$typeof){case O:return(Ya.displayName||"Context")+".Consumer";case N:return(Ya._context.displayName||"Context")+".Provider";case L:var Db=Ya.render;Db=Db.displayName||Db.name||"";return Ya.displayName||(""!==Db?"ForwardRef("+Db+")":"ForwardRef");case aa:return X(Ya.type);case Y:return X(Ya._render);case ba:Db=
Ya._payload;Ya=Ya._init;try{return X(Ya(Db))}catch(vb){}}return null}function B(Ya,Db){for(var vb=Ya._threadCount|0;vb<=Db;vb++)Ya[vb]=Ya._currentValue2,Ya._threadCount=vb+1}function r(Ya,Db,vb,fc){if(fc&&(fc=Ya.contextType,"object"===typeof fc&&null!==fc))return B(fc,vb),fc[vb];if(Ya=Ya.contextTypes){vb={};for(var kc in Ya)vb[kc]=Db[kc];Db=vb}else Db=ya;return Db}function c(Ya){if(Ja.call(hb,Ya))return!0;if(Ja.call(Ma,Ya))return!1;if(Aa.test(Ya))return hb[Ya]=!0;Ma[Ya]=!0;return!1}function w(Ya,
Db,vb,fc){if(null!==vb&&0===vb.type)return!1;switch(typeof Db){case "function":case "symbol":return!0;case "boolean":if(fc)return!1;if(null!==vb)return!vb.acceptsBooleans;Ya=Ya.toLowerCase().slice(0,5);return"data-"!==Ya&&"aria-"!==Ya;default:return!1}}function A(Ya,Db,vb,fc){if(null===Db||"undefined"===typeof Db||w(Ya,Db,vb,fc))return!0;if(fc)return!1;if(null!==vb)switch(vb.type){case 3:return!Db;case 4:return!1===Db;case 5:return isNaN(Db);case 6:return isNaN(Db)||1>Db}return!1}function C(Ya,Db,
vb,fc,kc,Fb,Tb){this.acceptsBooleans=2===Db||3===Db||4===Db;this.attributeName=fc;this.attributeNamespace=kc;this.mustUseProperty=vb;this.propertyName=Ya;this.type=Db;this.sanitizeURL=Fb;this.removeEmptyString=Tb}function G(Ya){return Ya[1].toUpperCase()}function Q(Ya){if("boolean"===typeof Ya||"number"===typeof Ya)return""+Ya;Ya=""+Ya;var Db=Da.exec(Ya);if(Db){var vb="",fc,kc=0;for(fc=Db.index;fc<Ya.length;fc++){switch(Ya.charCodeAt(fc)){case 34:Db="\x26quot;";break;case 38:Db="\x26amp;";break;case 39:Db=
"\x26#x27;";break;case 60:Db="\x26lt;";break;case 62:Db="\x26gt;";break;default:continue}kc!==fc&&(vb+=Ya.substring(kc,fc));kc=fc+1;vb+=Db}Ya=kc!==fc?vb+Ya.substring(kc,fc):vb}return Ya}function g(Ya,Db){var vb=Ha.hasOwnProperty(Ya)?Ha[Ya]:null,fc;if(fc="style"!==Ya)fc=null!==vb?0===vb.type:!(2<Ya.length)||"o"!==Ya[0]&&"O"!==Ya[0]||"n"!==Ya[1]&&"N"!==Ya[1]?!1:!0;if(fc||A(Ya,Db,vb,!1))return"";if(null!==vb){Ya=vb.attributeName;fc=vb.type;if(3===fc||4===fc&&!0===Db)return Ya+'\x3d""';vb.sanitizeURL&&
(Db=""+Db);return Ya+'\x3d"'+(Q(Db)+'"')}return c(Ya)?Ya+'\x3d"'+(Q(Db)+'"'):""}function h(Ya,Db){return Ya===Db&&(0!==Ya||1/Ya===1/Db)||Ya!==Ya&&Db!==Db}function b(){if(null===ma)throw Error(x(321));return ma}function k(){if(0<Xa)throw Error(x(312));return{memoizedState:null,queue:null,next:null}}function l(){null===qa?null===xa?(ra=!1,xa=qa=k()):(ra=!0,qa=xa):null===qa.next?(ra=!1,qa=qa.next=k()):(ra=!0,qa=qa.next);return qa}function m(Ya,Db,vb,fc){for(;Ra;)Ra=!1,Xa+=1,qa=null,vb=Ya(Db,fc);E();
return vb}function E(){ma=null;Ra=!1;xa=null;Xa=0;qa=Va=null}function y(Ya,Db){return"function"===typeof Db?Db(Ya):Db}function t(Ya,Db,vb){ma=b();qa=l();if(ra){var fc=qa.queue;Db=fc.dispatch;if(null!==Va&&(vb=Va.get(fc),void 0!==vb)){Va.delete(fc);fc=qa.memoizedState;do fc=Ya(fc,vb.action),vb=vb.next;while(null!==vb);qa.memoizedState=fc;return[fc,Db]}return[qa.memoizedState,Db]}Ya=Ya===y?"function"===typeof Db?Db():Db:void 0!==vb?vb(Db):Db;qa.memoizedState=Ya;Ya=qa.queue={last:null,dispatch:null};
Ya=Ya.dispatch=e.bind(null,ma,Ya);return[qa.memoizedState,Ya]}function p(Ya,Db){ma=b();qa=l();Db=void 0===Db?null:Db;if(null!==qa){var vb=qa.memoizedState;if(null!==vb&&null!==Db){var fc=vb[1];a:if(null===fc)fc=!1;else{for(var kc=0;kc<fc.length&&kc<Db.length;kc++)if(!na(Db[kc],fc[kc])){fc=!1;break a}fc=!0}if(fc)return vb[0]}}Ya=Ya();qa.memoizedState=[Ya,Db];return Ya}function e(Ya,Db,vb){if(!(25>Xa))throw Error(x(301));if(Ya===ma)if(Ra=!0,Ya={action:vb,next:null},null===Va&&(Va=new Map),vb=Va.get(Db),
void 0===vb)Va.set(Db,Ya);else{for(Db=vb;null!==Db.next;)Db=Db.next;Db.next=Ya}}function I(){}function z(Ya){switch(Ya){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M(Ya){if(void 0===Ya||null===Ya)return Ya;var Db="";P.Children.forEach(Ya,function(vb){null!=vb&&(Db+=vb)});return Db}function V(Ya,Db){if(void 0===Ya)throw Error(x(152,X(Db)||"Component"));}function J(Ya,Db,vb){function fc(Tb,
Ib){var mb=Ib.prototype&&Ib.prototype.isReactComponent,zb=r(Ib,Db,vb,mb),Cb=[],jb=!1,tb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Cb)return null},enqueueReplaceState:function(Wc,zd){jb=!0;Cb=[zd]},enqueueSetState:function(Wc,zd){if(null===Cb)return null;Cb.push(zd)}};if(mb){if(mb=new Ib(Tb.props,zb,tb),"function"===typeof Ib.getDerivedStateFromProps){var Mb=Ib.getDerivedStateFromProps.call(null,Tb.props,mb.state);null!=Mb&&(mb.state=R({},mb.state,Mb))}}else if(ma={},
mb=Ib(Tb.props,zb,tb),mb=m(Ib,Tb.props,mb,zb),null==mb||null==mb.render){Ya=mb;V(Ya,Ib);return}mb.props=Tb.props;mb.context=zb;mb.updater=tb;tb=mb.state;void 0===tb&&(mb.state=tb=null);if("function"===typeof mb.UNSAFE_componentWillMount||"function"===typeof mb.componentWillMount)if("function"===typeof mb.componentWillMount&&"function"!==typeof Ib.getDerivedStateFromProps&&mb.componentWillMount(),"function"===typeof mb.UNSAFE_componentWillMount&&"function"!==typeof Ib.getDerivedStateFromProps&&mb.UNSAFE_componentWillMount(),
Cb.length){tb=Cb;var nc=jb;Cb=null;jb=!1;if(nc&&1===tb.length)mb.state=tb[0];else{Mb=nc?tb[0]:mb.state;var Gc=!0;for(nc=nc?1:0;nc<tb.length;nc++){var Lc=tb[nc];Lc="function"===typeof Lc?Lc.call(mb,Mb,Tb.props,zb):Lc;null!=Lc&&(Gc?(Gc=!1,Mb=R({},Mb,Lc)):R(Mb,Lc))}mb.state=Mb}}else Cb=null;Ya=mb.render();V(Ya,Ib);if("function"===typeof mb.getChildContext&&(Tb=Ib.childContextTypes,"object"===typeof Tb)){var rc=mb.getChildContext(),Yc;for(Yc in rc)if(!(Yc in Tb))throw Error(x(108,X(Ib)||"Unknown",Yc));
}rc&&(Db=R({},Db,rc))}for(;P.isValidElement(Ya);){var kc=Ya,Fb=kc.type;if("function"!==typeof Fb)break;fc(kc,Fb)}return{child:Ya,context:Db}}var R=ca(22),P=ca(25),T=60106,u=60107,F=60108,H=60114,N=60109,O=60110,L=60112,ja=60113,W=60120,aa=60115,ba=60116,Y=60121,ia=60117,Z=60119,ha=60129,sa=60131;"function"===typeof Symbol&&Symbol.for&&(za=Symbol.for,T=za("react.portal"),u=za("react.fragment"),F=za("react.strict_mode"),H=za("react.profiler"),N=za("react.provider"),O=za("react.context"),L=za("react.forward_ref"),
ja=za("react.suspense"),W=za("react.suspense_list"),aa=za("react.memo"),ba=za("react.lazy"),Y=za("react.block"),ia=za("react.fundamental"),Z=za("react.scope"),ha=za("react.debug_trace_mode"),sa=za("react.legacy_hidden"));za=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var ya={},ua=new Uint16Array(16);for(ca=0;15>ca;ca++)ua[ca]=ca+1;ua[15]=0;var Aa=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ja=Object.prototype.hasOwnProperty,Ma={},hb={},Ha={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Ya){Ha[Ya]=new C(Ya,0,!1,Ya,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Ya){var Db=Ya[0];Ha[Db]=new C(Db,1,!1,Ya[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Ya){Ha[Ya]=
new C(Ya,2,!1,Ya.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Ya){Ha[Ya]=new C(Ya,2,!1,Ya,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Ya){Ha[Ya]=new C(Ya,3,!1,Ya.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(Ya){Ha[Ya]=new C(Ya,3,!0,Ya,null,!1,!1)});["capture","download"].forEach(function(Ya){Ha[Ya]=new C(Ya,4,!1,Ya,null,!1,!1)});["cols","rows","size","span"].forEach(function(Ya){Ha[Ya]=new C(Ya,6,!1,Ya,null,!1,!1)});["rowSpan","start"].forEach(function(Ya){Ha[Ya]=new C(Ya,5,!1,Ya.toLowerCase(),null,!1,!1)});var Pa=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Ya){var Db=
Ya.replace(Pa,G);Ha[Db]=new C(Db,1,!1,Ya,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Ya){var Db=Ya.replace(Pa,G);Ha[Db]=new C(Db,1,!1,Ya,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Ya){var Db=Ya.replace(Pa,G);Ha[Db]=new C(Db,1,!1,Ya,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Ya){Ha[Ya]=new C(Ya,1,!1,Ya.toLowerCase(),null,!1,!1)});
Ha.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Ya){Ha[Ya]=new C(Ya,1,!1,Ya.toLowerCase(),null,!0,!0)});var Da=/["'&<>]/,na="function"===typeof Object.is?Object.is:h,ma=null,xa=null,qa=null,ra=!1,Ra=!1,Va=null,Xa=0,Qa=null,bb={readContext:function(Ya){var Db=Qa.threadID;B(Ya,Db);return Ya[Db]},useContext:function(Ya){b();var Db=Qa.threadID;B(Ya,Db);return Ya[Db]},useMemo:p,useReducer:t,useRef:function(Ya){ma=
b();qa=l();var Db=qa.memoizedState;return null===Db?(Ya={current:Ya},qa.memoizedState=Ya):Db},useState:function(Ya){return t(y,Ya)},useLayoutEffect:function(){},useCallback:function(Ya,Db){return p(function(){return Ya},Db)},useImperativeHandle:I,useEffect:I,useDebugValue:I,useDeferredValue:function(Ya){b();return Ya},useTransition:function(){b();return[function(Ya){Ya()},!1]},useOpaqueIdentifier:function(){return(Qa.identifierPrefix||"")+"R:"+(Qa.uniqueID++).toString(36)},useMutableSource:function(Ya,
Db){b();return Db(Ya._source)}},nb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Rb=R({menuitem:!0},nb),Lb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ea=["Webkit","ms","Moz","O"];Object.keys(Lb).forEach(function(Ya){Ea.forEach(function(Db){Db=Db+Ya.charAt(0).toUpperCase()+Ya.substring(1);Lb[Db]=Lb[Ya]})});var sb=/([A-Z])/g,kb=/^ms-/,Za=P.Children.toArray,
lb=za.ReactCurrentDispatcher,$a={listing:!0,pre:!0,textarea:!0},ec=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ed={},bd={},Oc=Object.prototype.hasOwnProperty,Qc={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Wa=function(){function Ya(vb,fc,kc){P.isValidElement(vb)?vb.type!==u?vb=[vb]:(vb=vb.props.children,vb=P.isValidElement(vb)?[vb]:Za(vb)):vb=Za(vb);vb={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:vb,childIndex:0,context:ya,footer:""};
var Fb=ua[0];if(0===Fb){var Tb=ua;Fb=Tb.length;var Ib=2*Fb;if(!(65536>=Ib))throw Error(x(304));var mb=new Uint16Array(Ib);mb.set(Tb);ua=mb;ua[0]=Fb+1;for(Tb=Fb;Tb<Ib-1;Tb++)ua[Tb]=Tb+1;ua[Ib-1]=0}else ua[0]=ua[Fb];this.threadID=Fb;this.stack=[vb];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=fc;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=kc&&kc.identifierPrefix||""}
var Db=Ya.prototype;Db.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var vb=this.threadID;ua[vb]=ua[0];ua[0]=vb}};Db.pushProvider=function(vb){var fc=++this.contextIndex,kc=vb.type._context,Fb=this.threadID;B(kc,Fb);var Tb=kc[Fb];this.contextStack[fc]=kc;this.contextValueStack[fc]=Tb;kc[Fb]=vb.props.value};Db.popProvider=function(){var vb=this.contextIndex,fc=this.contextStack[vb],kc=this.contextValueStack[vb];this.contextStack[vb]=null;this.contextValueStack[vb]=
null;this.contextIndex--;fc[this.threadID]=kc};Db.clearProviders=function(){for(var vb=this.contextIndex;0<=vb;vb--)this.contextStack[vb][this.threadID]=this.contextValueStack[vb]};Db.read=function(vb){if(this.exhausted)return null;var fc=Qa;Qa=this;var kc=lb.current;lb.current=bb;try{for(var Fb=[""],Tb=!1;Fb[0].length<vb;){if(0===this.stack.length){this.exhausted=!0;var Ib=this.threadID;ua[Ib]=ua[0];ua[0]=Ib;break}var mb=this.stack[this.stack.length-1];if(Tb||mb.childIndex>=mb.children.length){var zb=
mb.footer;""!==zb&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===mb.type)this.currentSelectValue=null;else if(null!=mb.type&&null!=mb.type.type&&mb.type.type.$$typeof===N)this.popProvider(mb.type);else if(mb.type===ja){this.suspenseDepth--;var Cb=Fb.pop();if(Tb){Tb=!1;var jb=mb.fallbackFrame;if(!jb)throw Error(x(303));this.stack.push(jb);Fb[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Fb[this.suspenseDepth]+=Cb}Fb[this.suspenseDepth]+=zb}else{var tb=mb.children[mb.childIndex++],
Mb="";try{Mb+=this.render(tb,mb.context,mb.domNamespace)}catch(nc){if(null!=nc&&"function"===typeof nc.then)throw Error(x(294));throw nc;}finally{}Fb.length<=this.suspenseDepth&&Fb.push("");Fb[this.suspenseDepth]+=Mb}}return Fb[0]}finally{lb.current=kc,Qa=fc,E()}};Db.render=function(vb,fc,kc){if("string"===typeof vb||"number"===typeof vb){kc=""+vb;if(""===kc)return"";if(this.makeStaticMarkup)return Q(kc);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+Q(kc);this.previousWasTextNode=!0;return Q(kc)}fc=
J(vb,fc,this.threadID);vb=fc.child;fc=fc.context;if(null===vb||!1===vb)return"";if(!P.isValidElement(vb)){if(null!=vb&&null!=vb.$$typeof){kc=vb.$$typeof;if(kc===T)throw Error(x(257));throw Error(x(258,kc.toString()));}vb=Za(vb);this.stack.push({type:null,domNamespace:kc,children:vb,childIndex:0,context:fc,footer:""});return""}var Fb=vb.type;if("string"===typeof Fb)return this.renderDOM(vb,fc,kc);switch(Fb){case sa:case ha:case F:case H:case W:case u:return vb=Za(vb.props.children),this.stack.push({type:null,
domNamespace:kc,children:vb,childIndex:0,context:fc,footer:""}),"";case ja:throw Error(x(294));case Z:throw Error(x(343));}if("object"===typeof Fb&&null!==Fb)switch(Fb.$$typeof){case L:ma={};var Tb=Fb.render(vb.props,vb.ref);Tb=m(Fb.render,vb.props,Tb,vb.ref);Tb=Za(Tb);this.stack.push({type:null,domNamespace:kc,children:Tb,childIndex:0,context:fc,footer:""});return"";case aa:return vb=[P.createElement(Fb.type,R({ref:vb.ref},vb.props))],this.stack.push({type:null,domNamespace:kc,children:vb,childIndex:0,
context:fc,footer:""}),"";case N:return Fb=Za(vb.props.children),kc={type:vb,domNamespace:kc,children:Fb,childIndex:0,context:fc,footer:""},this.pushProvider(vb),this.stack.push(kc),"";case O:Fb=vb.type;Tb=vb.props;var Ib=this.threadID;B(Fb,Ib);Fb=Za(Tb.children(Fb[Ib]));this.stack.push({type:vb,domNamespace:kc,children:Fb,childIndex:0,context:fc,footer:""});return"";case ia:throw Error(x(338));case ba:return Fb=vb.type,Tb=Fb._init,Fb=Tb(Fb._payload),vb=[P.createElement(Fb,R({ref:vb.ref},vb.props))],
this.stack.push({type:null,domNamespace:kc,children:vb,childIndex:0,context:fc,footer:""}),""}throw Error(x(130,null==Fb?Fb:typeof Fb,""));};Db.renderDOM=function(vb,fc,kc){var Fb=vb.type.toLowerCase();"http://www.w3.org/1999/xhtml"===kc&&z(Fb);if(!ed.hasOwnProperty(Fb)){if(!ec.test(Fb))throw Error(x(65,Fb));ed[Fb]=!0}var Tb=vb.props;if("input"===Fb)Tb=R({type:void 0},Tb,{defaultChecked:void 0,defaultValue:void 0,value:null!=Tb.value?Tb.value:Tb.defaultValue,checked:null!=Tb.checked?Tb.checked:Tb.defaultChecked});
else if("textarea"===Fb){var Ib=Tb.value;if(null==Ib){Ib=Tb.defaultValue;var mb=Tb.children;if(null!=mb){if(null!=Ib)throw Error(x(92));if(Array.isArray(mb)){if(!(1>=mb.length))throw Error(x(93));mb=mb[0]}Ib=""+mb}null==Ib&&(Ib="")}Tb=R({},Tb,{value:void 0,children:""+Ib})}else if("select"===Fb)this.currentSelectValue=null!=Tb.value?Tb.value:Tb.defaultValue,Tb=R({},Tb,{value:void 0});else if("option"===Fb){mb=this.currentSelectValue;var zb=M(Tb.children);if(null!=mb){var Cb=null!=Tb.value?Tb.value+
"":zb;Ib=!1;if(Array.isArray(mb))for(var jb=0;jb<mb.length;jb++){if(""+mb[jb]===Cb){Ib=!0;break}}else Ib=""+mb===Cb;Tb=R({selected:void 0,children:void 0},Tb,{selected:Ib,children:zb})}}if(Ib=Tb){if(Rb[Fb]&&(null!=Ib.children||null!=Ib.dangerouslySetInnerHTML))throw Error(x(137,Fb));if(null!=Ib.dangerouslySetInnerHTML){if(null!=Ib.children)throw Error(x(60));if(!("object"===typeof Ib.dangerouslySetInnerHTML&&"__html"in Ib.dangerouslySetInnerHTML))throw Error(x(61));}if(null!=Ib.style&&"object"!==
typeof Ib.style)throw Error(x(62));}Ib=Tb;mb=this.makeStaticMarkup;zb=1===this.stack.length;Cb="\x3c"+vb.type;a:if(-1===Fb.indexOf("-"))jb="string"===typeof Ib.is;else switch(Fb){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":jb=!1;break a;default:jb=!0}for(zd in Ib)if(Oc.call(Ib,zd)){var tb=Ib[zd];if(null!=tb){if("style"===zd){var Mb=void 0,nc="",Gc="";for(Mb in tb)if(tb.hasOwnProperty(Mb)){var Lc=
0===Mb.indexOf("--"),rc=tb[Mb];if(null!=rc){if(Lc)var Yc=Mb;else if(Yc=Mb,bd.hasOwnProperty(Yc))Yc=bd[Yc];else{var Wc=Yc.replace(sb,"-$1").toLowerCase().replace(kb,"-ms-");Yc=bd[Yc]=Wc}nc+=Gc+Yc+":";Gc=Mb;Lc=null==rc||"boolean"===typeof rc||""===rc?"":Lc||"number"!==typeof rc||0===rc||Lb.hasOwnProperty(Gc)&&Lb[Gc]?(""+rc).trim():rc+"px";nc+=Lc;Gc=";"}}tb=nc||null}Mb=null;jb?Qc.hasOwnProperty(zd)||(Mb=zd,Mb=c(Mb)&&null!=tb?Mb+'\x3d"'+(Q(tb)+'"'):""):Mb=g(zd,tb);Mb&&(Cb+=" "+Mb)}}mb||zb&&(Cb+=' data-reactroot\x3d""');
var zd=Cb;Ib="";nb.hasOwnProperty(Fb)?zd+="/\x3e":(zd+="\x3e",Ib="\x3c/"+vb.type+"\x3e");a:{mb=Tb.dangerouslySetInnerHTML;if(null!=mb){if(null!=mb.__html){mb=mb.__html;break a}}else if(mb=Tb.children,"string"===typeof mb||"number"===typeof mb){mb=Q(mb);break a}mb=null}null!=mb?(Tb=[],$a.hasOwnProperty(Fb)&&"\n"===mb.charAt(0)&&(zd+="\n"),zd+=mb):Tb=Za(Tb.children);vb=vb.type;kc=null==kc||"http://www.w3.org/1999/xhtml"===kc?z(vb):"http://www.w3.org/2000/svg"===kc&&"foreignObject"===vb?"http://www.w3.org/1999/xhtml":
kc;this.stack.push({domNamespace:kc,type:Fb,children:Tb,childIndex:0,context:fc,footer:Ib});this.previousWasTextNode=!1;return zd};return Ya}();K.renderToNodeStream=function(){throw Error(x(207));};K.renderToStaticMarkup=function(Ya,Db){Ya=new Wa(Ya,!0,Db);try{return Ya.read(Infinity)}finally{Ya.destroy()}};K.renderToStaticNodeStream=function(){throw Error(x(208));};K.renderToString=function(Ya,Db){Ya=new Wa(Ya,!1,Db);try{return Ya.read(Infinity)}finally{Ya.destroy()}};K.version="17.0.2"};
shadow$provide[615]=function(za,ca,ab,K){ab.exports=ca(613)};
shadow$provide[616]=function(za,ca,ab,K){function x(){if(!Hr&&(Hr="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Hr))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hr(Mu)}function X(a,d=0){return(Fl[a[d+0]]+Fl[a[d+1]]+Fl[a[d+2]]+Fl[a[d+3]]+"-"+Fl[a[d+4]]+Fl[a[d+5]]+"-"+Fl[a[d+6]]+Fl[a[d+7]]+"-"+Fl[a[d+8]]+Fl[a[d+9]]+"-"+Fl[a[d+10]]+Fl[a[d+11]]+Fl[a[d+12]]+Fl[a[d+13]]+Fl[a[d+14]]+
Fl[a[d+15]]).toLowerCase()}function B(a){let d=0;var n=0;for(var S of a)d+=S.w*S.h,n=Math.max(n,S.w);a.sort((va,Na)=>Na.h-va.h);n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),n),h:Infinity}];let fa=S=0;for(const va of a)for(a=n.length-1;0<=a;a--){var la=n[a];if(!(va.w>la.w||va.h>la.h)){va.x=la.x;va.y=la.y;fa=Math.max(fa,va.y+va.h);S=Math.max(S,va.x+va.w);va.w===la.w&&va.h===la.h?(la=n.pop(),a<n.length&&(n[a]=la)):va.h===la.h?(la.x+=va.w,la.w-=va.w):(va.w!==la.w&&n.push({x:la.x+va.w,y:la.y,w:la.w-
va.w,h:va.h}),la.y+=va.h,la.h-=va.h);break}}return{w:S,h:fa,fill:d/(S*fa)||0}}function r(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function c(a,d,n=0){const S=[a[0]+d[0]/2,a[1]+d[1]/2],fa=ee.rotWith(a,S,n),la=ee.rotWith(ee.add(a,[d[0],0]),S,n),va=ee.rotWith(ee.add(a,d),S,n);a=ee.rotWith(ee.add(a,[0,d[1]]),S,n);return[["top",[fa,la]],["right",[la,va]],["bottom",[va,a]],["left",[a,fa]]]}function w(a,d,n,S){const [fa,la]=a,[va,Na]=d,[cb,qb]=n,[xb,Eb]=S;return Na/va!==(Eb-qb)/(xb-cb)&&
(d=va*(Eb-qb)-Na*(xb-cb),0!==d&&(a=((la-qb)*(xb-cb)-(fa-cb)*(Eb-qb))/d,d=((la-qb)*va-(fa-cb)*Na)/d,0<=a&&0<=d&&1>=d))?r("intersection",[fa+a*va,la+a*Na]):r("no intersection")}function A(a,d,n,S,fa=0){return b(n,S,fa,a,d)}function C(a,d,n,S=0){const {minX:fa,minY:la,width:va,height:Na}=n;return A(a,d,[fa,la],[va,Na],S)}function G(a,d,n,S){var fa=ee.sub(a,n);n=ee.sub(S,n);d=ee.sub(d,a);S=n[0]*fa[1]-n[1]*fa[0];fa=d[0]*fa[1]-d[1]*fa[0];n=n[1]*d[0]-n[0]*d[1];return 0===S||0===fa?r("coincident"):0===n?
r("parallel"):0!==n&&(S/=n,fa/=n,0<=S&&1>=S&&0<=fa&&1>=fa)?r("intersection",ee.add(a,ee.mul(d,S))):r("no intersection")}function Q(a,d,n,S){var fa=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),la=2*((d[0]-a[0])*(a[0]-n[0])+(d[1]-a[1])*(a[1]-n[1]));n=la*la-4*fa*(n[0]*n[0]+n[1]*n[1]+a[0]*a[0]+a[1]*a[1]-2*(n[0]*a[0]+n[1]*a[1])-S*S);if(0>n)return r("outside");if(0===n)return r("tangent");S=Math.sqrt(n);n=(-la+S)/(2*fa);fa=(-la-S)/(2*fa);if((0>n||1<n)&&(0>fa||1<fa))return 0>n&&0>fa||1<n&&1<fa?r("outside"):
r("inside");la=[];0<=n&&1>=n&&la.push(ee.lrp(a,d,n));0<=fa&&1>=fa&&la.push(ee.lrp(a,d,fa));return r("intersection",...la)}function g(a,d,n,S,fa,la=0){if(0===S||0===fa||ee.isEqual(a,d))return r("no intersection");S=0>S?S:-S;fa=0>fa?fa:-fa;a=ee.sub(ee.rotWith(a,n,-la),n);d=ee.sub(ee.rotWith(d,n,-la),n);var va=ee.sub(d,a),Na=va[0]*va[0]/S/S+va[1]*va[1]/fa/fa;va=2*a[0]*va[0]/S/S+2*a[1]*va[1]/fa/fa;const cb=[];S=va*va-4*Na*(a[0]*a[0]/S/S+a[1]*a[1]/fa/fa-1);0===S?cb.push(-va/2/Na):0<S&&(S=Math.sqrt(S),
cb.push((-va+S)/2/Na),cb.push((-va-S)/2/Na));Na=cb.filter(qb=>0<=qb&&1>=qb).map(qb=>ee.add(n,ee.add(a,ee.mul(ee.sub(d,a),qb)))).map(qb=>ee.rotWith(qb,n,la));return r("intersection",...Na)}function h(a,d,n){const S=[];for(let fa=1;fa<n.length;fa++){const la=G(a,d,n[fa-1],n[fa]);la&&S.push(...la.points)}return 0===S.length?r("no intersection"):r("intersection",...n)}function b(a,d,n,S,fa){return c(a,d,n).reduce((la,[va,[Na,cb]])=>{(Na=w(S,fa,Na,cb))&&la.push(r(va,...Na.points));return la},[]).filter(la=>
la.didIntersect)}function k(a,d,n,S){return c(a,d).reduce((fa,[la,[va,Na]])=>{(va=G(n,S,va,Na))&&fa.push(r(la,...va.points));return fa},[]).filter(fa=>fa.didIntersect)}function l(a,d,n,S){return c(a,d).reduce((fa,[la,[va,Na]])=>{(va=Q(va,Na,n,S))&&fa.push(ag(Ke({},va),{message:la}));return fa},[]).filter(fa=>fa.didIntersect)}function m(a,d,n,S,fa,la=0){return c(a,d).reduce((va,[Na,[cb,qb]])=>{(cb=g(cb,qb,n,S,fa,la))&&va.push(ag(Ke({},cb),{message:Na}));return va},[]).filter(va=>va.didIntersect)}function E(a,
d,n){return c(a,d).reduce((S,[fa,[la,va]])=>{la=h(la,va,n);la.didIntersect&&S.push(r(fa,...la.points));return S},[]).filter(S=>S.didIntersect)}function y(a,d,n){return c(a,d).reduce((S,[fa,[la,va]])=>{{const Na=[];for(let cb=1;cb<n.length+1;cb++){const qb=G(la,va,n[cb-1],n[cb%n.length]);qb&&Na.push(...qb.points)}la=0===Na.length?r("no intersection"):r("intersection",...n)}la.didIntersect&&S.push(r(fa,...la.points));return S},[]).filter(S=>S.didIntersect)}function t(a,d,n,S=0,fa,la){return d===n?l(fa,
la,a,d):m(fa,la,a,d,n,S)}function p(a,d,n){const {minX:S,minY:fa,width:la,height:va}=a;return k([S,fa],[la,va],d,n)}function e(a){for(var d=arguments.length,n=Array(1<d?d-1:0),S=1;S<d;S++)n[S-1]=arguments[S];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function I(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?
window:"undefined"!==typeof za?za:"undefined"!==typeof self?self:ox}function z(){La||e("Proxy not available")}function M(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function V(a){return"function"===typeof a}function J(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function R(a){return null!==a&&"object"===typeof a}function P(a){if(!R(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&
a.constructor;return"function"===typeof a&&a.toString()===Ab}function T(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function u(a,d,n){zp(a,d,{enumerable:!1,writable:!0,configurable:!0,value:n})}function F(a,d,n){zp(a,d,{enumerable:!1,writable:!1,configurable:!0,value:n})}function H(a,d){var n="isMobX"+a;d.prototype[n]=!0;return function(S){return R(S)&&!0===S[n]}}function N(a){return a instanceof Map}function O(a){return a instanceof
Set}function L(a){var d=Object.keys(a);if(!Xc)return d;var n=Object.getOwnPropertySymbols(a);return n.length?[].concat(d,n.filter(function(S){return jq.propertyIsEnumerable.call(a,S)})):d}function ja(a){return null===a?null:"object"===typeof a?""+a:a}function W(a,d){return jq.hasOwnProperty.call(a,d)}function aa(a,d){for(var n=0;n<d.length;n++){var S=d[n];S.enumerable=S.enumerable||!1;S.configurable=!0;"value"in S&&(S.writable=!0);Object.defineProperty(a,S.key,S)}}function ba(a,d,n){d&&aa(a.prototype,
d);n&&aa(a,n);Object.defineProperty(a,"prototype",{writable:!1});return a}function Y(){Y=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var n=arguments[d],S;for(S in n)Object.prototype.hasOwnProperty.call(n,S)&&(a[S]=n[S])}return a};return Y.apply(this,arguments)}function ia(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;Z(a,d)}function Z(a,d){Z=Object.setPrototypeOf||function(n,S){n.__proto__=S;return n};return Z(a,d)}function ha(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function sa(a,d){if(a){if("string"===typeof a)return ya(a,d);var n=Object.prototype.toString.call(a).slice(8,-1);"Object"===n&&a.constructor&&(n=a.constructor.name);if("Map"===n||"Set"===n)return Array.from(a);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ya(a,d)}}function ya(a,d){if(null==d||d>a.length)d=a.length;for(var n=0,S=Array(d);n<d;n++)S[n]=a[n];return S}function ua(a,d){var n="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(n)return(n=
n.call(a)).next.bind(n);if(Array.isArray(a)||(n=sa(a))||d&&a&&"number"===typeof a.length){n&&(a=n);var S=0;return function(){return S>=a.length?{done:!0}:{done:!1,value:a[S++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Aa(a){return Object.assign(function(d,n){Ja(d,n,a)},a)}function Ja(a,d,n){W(a,ie)||u(a,ie,Y({},a[ie]));n.annotationType_!==Ph&&(a[ie][d]=n)}function Ma(a){W(a,
ie)||u(a,ie,Y({},a[ie]));return a[ie]}function hb(a,d,n){void 0===d&&(d=dc);void 0===n&&(n=dc);a=new jh(a);d!==dc&&Zc(pE,a,d,void 0);n!==dc&&Bd(a,n);return a}function Ha(a,d,n){return Ec(a)?a:Array.isArray(a)?Ff.array(a,{name:n}):P(a)?Ff.object(a,void 0,{name:n}):N(a)?Ff.map(a,{name:n}):O(a)?Ff.set(a,{name:n}):"function"!==typeof a||Lc(a)||Sc(a)?a:T(a)?Ru(a):Qu(n,a)}function Pa(a){return a}function Da(a,d){return{annotationType_:a,options_:d,make_:na,extend_:ma}}function na(a,d,n,S){var fa;if(null!=
(fa=this.options_)&&fa.bound)return null===this.extend_(a,d,n,!1)?0:1;if(S===a.target_)return null===this.extend_(a,d,n,!1)?0:2;if(Lc(n.value))return 1;a=xa(a,this,d,n,!1);zp(S,d,a);return 2}function ma(a,d,n,S){n=xa(a,this,d,n);return a.defineProperty_(d,n,S)}function xa(a,d,n,S,fa){var la,va,Na,cb,qb,xb,Eb;void 0===fa&&(fa=Cg.safeDescriptors);S=S.value;if(null!=(la=d.options_)&&la.bound){var jc;S=S.bind(null!=(jc=a.proxy_)?jc:a.target_)}return{value:$a(null!=(va=null==(Na=d.options_)?void 0:Na.name)?
va:n.toString(),S,null!=(cb=null==(qb=d.options_)?void 0:qb.autoAction)?cb:!1,null!=(xb=d.options_)&&xb.bound?null!=(Eb=a.proxy_)?Eb:a.target_:void 0),configurable:fa?a.isPlainObject_:!0,enumerable:!1,writable:fa?!1:!0}}function qa(a,d){return{annotationType_:a,options_:d,make_:ra,extend_:Ra}}function ra(a,d,n,S){var fa;if(S===a.target_)return null===this.extend_(a,d,n,!1)?0:2;if(null!=(fa=this.options_)&&fa.bound&&(!W(a.target_,d)||!Sc(a.target_[d]))&&null===this.extend_(a,d,n,!1))return 0;if(Sc(n.value))return 1;
a=Va(a,this,d,n,!1,!1);zp(S,d,a);return 2}function Ra(a,d,n,S){var fa;n=Va(a,this,d,n,null==(fa=this.options_)?void 0:fa.bound);return a.defineProperty_(d,n,S)}function Va(a,d,n,S,fa,la){void 0===la&&(la=Cg.safeDescriptors);d=S.value;Sc(d)||(d=Ru(d));if(fa){var va;d=d.bind(null!=(va=a.proxy_)?va:a.target_);d.isMobXFlow=!0}return{value:d,configurable:la?a.isPlainObject_:!0,enumerable:!1,writable:la?!1:!0}}function Xa(a,d){return{annotationType_:a,options_:d,make_:Qa,extend_:bb}}function Qa(a,d,n){return null===
this.extend_(a,d,n,!1)?0:1}function bb(a,d,n,S){return a.defineComputedProperty_(d,Y({},this.options_,{get:n.get,set:n.set}),S)}function nb(a,d){return{annotationType_:a,options_:d,make_:Rb,extend_:Lb}}function Rb(a,d,n){return null===this.extend_(a,d,n,!1)?0:1}function Lb(a,d,n,S){var fa,la;return a.defineObservableProperty_(d,n.value,null!=(fa=null==(la=this.options_)?void 0:la.enhancer)?fa:Ha,S)}function Ea(a){return{annotationType_:"true",options_:a,make_:sb,extend_:kb}}function sb(a,d,n,S){var fa,
la;if(n.get)return sg.make_(a,d,n,S);if(n.set){n=$a(d.toString(),n.set);if(S===a.target_)return null===a.defineProperty_(d,{configurable:Cg.safeDescriptors?a.isPlainObject_:!0,set:n})?0:2;zp(S,d,{configurable:!0,set:n});return 2}if(S!==a.target_&&"function"===typeof n.value){var va;if(T(n.value)){var Na;return(null!=(Na=this.options_)&&Na.autoBind?Ru.bound:Ru).make_(a,d,n,S)}return(null!=(va=this.options_)&&va.autoBind?Qu.bound:Qu).make_(a,d,n,S)}va=!1===(null==(fa=this.options_)?void 0:fa.deep)?
Ff.ref:Ff;if("function"===typeof n.value&&null!=(la=this.options_)&&la.autoBind){var cb;n.value=n.value.bind(null!=(cb=a.proxy_)?cb:a.target_)}return va.make_(a,d,n,S)}function kb(a,d,n,S){var fa,la;if(n.get)return sg.extend_(a,d,n,S);if(n.set)return a.defineProperty_(d,{configurable:Cg.safeDescriptors?a.isPlainObject_:!0,set:$a(d.toString(),n.set)},S);if("function"===typeof n.value&&null!=(fa=this.options_)&&fa.autoBind){var va;n.value=n.value.bind(null!=(va=a.proxy_)?va:a.target_)}return(!1===(null==
(la=this.options_)?void 0:la.deep)?Ff.ref:Ff).extend_(a,d,n,S)}function Za(a){if(!0===a.deep)var d=Ha;else{if(!1===a.deep)a=Pa;else{a=a.defaultDecorator;var n;a=a?null!=(d=null==(n=a.options_)?void 0:n.enhancer)?d:Ha:Ha}d=a}return d}function lb(a,d,n){if(J(d))Ja(a,d,Re);else return Ec(a)?a:P(a)?Ff.object(a,d,n):Array.isArray(a)?Ff.array(a,d):N(a)?Ff.map(a,d):O(a)?Ff.set(a,d):"object"===typeof a&&null!==a?a:Ff.box(a,d)}function $a(a,d,n,S){function fa(){a:{var la=S||this,va=arguments,Na=Cg.trackingDerivation,
cb=!n||!Na;Tb();var qb=Cg.allowStateChanges;cb&&(Ya(),qb=ed(!0));var xb=Db(!0),Eb=gE++,jc=Rv;Rv=Eb;try{var oc=d.apply(la,va);break a}catch(Rc){var hc=Rc;throw Rc;}finally{Rv!==Eb&&e(30),Rv=jc,void 0!==hc&&(Cg.suppressReactionErrors=!0),Cg.allowStateChanges=qb,Cg.allowStateReads=xb,Ib(),cb&&(Cg.trackingDerivation=Na),Cg.suppressReactionErrors=!1}oc=void 0}return oc}void 0===n&&(n=!1);fa.isMobxAction=!0;hE&&(Iz.value=a,Object.defineProperty(fa,"name",Iz));return fa}function ec(a,d){a=ed(a);try{return d()}finally{Cg.allowStateChanges=
a}}function ed(a){var d=Cg.allowStateChanges;Cg.allowStateChanges=a;return d}function bd(a){switch(a.dependenciesState_){case dk.UP_TO_DATE_:return!1;case dk.NOT_TRACKING_:case dk.STALE_:return!0;case dk.POSSIBLY_STALE_:for(var d=Db(!0),n=Ya(),S=a.observing_,fa=S.length,la=0;la<fa;la++){var va=S[la];if(Pu(va)){if(Cg.disableErrorBoundaries)va.get();else try{va.get()}catch(Na){return Cg.trackingDerivation=n,Cg.allowStateReads=d,!0}if(a.dependenciesState_===dk.STALE_)return Cg.trackingDerivation=n,Cg.allowStateReads=
d,!0}}vb(a);Cg.trackingDerivation=n;Cg.allowStateReads=d;return!1}}function Oc(a,d,n){var S=Db(!0);vb(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++Cg.runId;var fa=Cg.trackingDerivation;Cg.trackingDerivation=a;Cg.inBatch++;if(!0===Cg.disableErrorBoundaries)var la=d.call(n);else try{la=d.call(n)}catch(xb){la=new Ps(xb)}Cg.inBatch--;Cg.trackingDerivation=fa;var va=a.observing_;d=a.observing_=a.newObserving_;n=dk.UP_TO_DATE_;fa=0;for(var Na=a.unboundDepsCount_,cb=
0;cb<Na;cb++){var qb=d[cb];0===qb.diffValue_&&(qb.diffValue_=1,fa!==cb&&(d[fa]=qb),fa++);qb.dependenciesState_>n&&(n=qb.dependenciesState_)}d.length=fa;a.newObserving_=null;for(Na=va.length;Na--;)cb=va[Na],0===cb.diffValue_&&kc(cb,a),cb.diffValue_=0;for(;fa--;)va=d[fa],1===va.diffValue_&&(va.diffValue_=0,Na=a,va.observers_.add(Na),va.lowestObserverState_>Na.dependenciesState_&&(va.lowestObserverState_=Na.dependenciesState_));n!==dk.UP_TO_DATE_&&(a.dependenciesState_=n,a.onBecomeStale_());Cg.allowStateReads=
S;return la}function Qc(a){var d=a.observing_;a.observing_=[];for(var n=d.length;n--;)kc(d[n],a);a.dependenciesState_=dk.NOT_TRACKING_}function Wa(a){var d=Ya();try{return a()}finally{Cg.trackingDerivation=d}}function Ya(){var a=Cg.trackingDerivation;Cg.trackingDerivation=null;return a}function Db(a){var d=Cg.allowStateReads;Cg.allowStateReads=a;return d}function vb(a){if(a.dependenciesState_!==dk.UP_TO_DATE_){a.dependenciesState_=dk.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
dk.UP_TO_DATE_}}function fc(){(Cg.pendingReactions.length||Cg.inBatch||Cg.isRunningReactions)&&e(36);Jz=!0;if(Tv){var a=I();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);Cg=new Sv}}function kc(a,d){a.observers_["delete"](d);0===a.observers_.size&&Fb(a)}function Fb(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,Cg.pendingUnobservations.push(a))}function Tb(){Cg.inBatch++}function Ib(){if(0===--Cg.inBatch){0<Cg.inBatch||Cg.isRunningReactions||Uv(tb);for(var a=Cg.pendingUnobservations,
d=0;d<a.length;d++){var n=a[d];n.isPendingUnobservation_=!1;0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Ou&&n.suspend_())}Cg.pendingUnobservations=[]}}function mb(a){var d=Cg.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&Cg.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<Cg.inBatch&&Fb(a);return!1}
function zb(a){a.lowestObserverState_!==dk.STALE_&&(a.lowestObserverState_=dk.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===dk.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=dk.STALE_}))}function Cb(a){a.lowestObserverState_!==dk.STALE_&&(a.lowestObserverState_=dk.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===dk.POSSIBLY_STALE_?d.dependenciesState_=dk.STALE_:d.dependenciesState_===dk.UP_TO_DATE_&&(a.lowestObserverState_=dk.UP_TO_DATE_)}))}function jb(a){a.lowestObserverState_===
dk.UP_TO_DATE_&&(a.lowestObserverState_=dk.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===dk.UP_TO_DATE_&&(d.dependenciesState_=dk.POSSIBLY_STALE_,d.onBecomeStale_())}))}function tb(){Cg.isRunningReactions=!0;for(var a=Cg.pendingReactions,d=0;0<a.length;){++d===lE&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var n=a.splice(0),S=0,fa=n.length;S<fa;S++)n[S].runReaction_()}Cg.isRunningReactions=!1}function Mb(a){var d=Uv;Uv=function(n){return a(function(){return d(n)})}}
function nc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Gc(a){return function(d,n){if(V(d))return $a(d.name||"\x3cunnamed action\x3e",d,a);if(V(n))return $a(d,n,a);if(J(n))return Ja(d,n,a?Mz:Lz);if(J(d))return Aa(Da(a?"autoAction":Kz,{name:d,autoAction:a}))}}function Lc(a){return V(a)&&!0===a.isMobxAction}function rc(a,d){function n(){a(cb)}var S,fa;void 0===d&&(d=oa);var la=null!=(S=null==(fa=d)?void 0:fa.name)?S:"Autorun";if(d.scheduler||d.delay){var va=
Yc(d),Na=!1;var cb=new Lt(la,function(){Na||(Na=!0,va(function(){Na=!1;cb.isDisposed_||cb.track(n)}))},d.onError,d.requiresObservable)}else cb=new Lt(la,function(){this.track(n)},d.onError,d.requiresObservable);cb.schedule_();return cb.getDisposer_()}function Yc(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:oE}function Wc(a,d,n){function S(){xb=!1;if(!hc.isDisposed_){var Rc=!1;hc.track(function(){var hd=ec(!1,function(){return a(hc)});Rc=qb||!oc(Eb,hd);jc=Eb;
Eb=hd});qb&&n.fireImmediately?va(Eb,jc,hc):!qb&&Rc&&va(Eb,jc,hc);qb=!1}}var fa;void 0===n&&(n=oa);var la=null!=(fa=n.name)?fa:"Reaction",va=qh(la,n.onError?zd(n.onError,d):d),Na=!n.scheduler&&!n.delay,cb=Yc(n),qb=!0,xb=!1,Eb,jc,oc=n.compareStructural?dg.structural:n.equals||dg["default"],hc=new Lt(la,function(){qb||Na?S():xb||(xb=!0,cb(S))},n.onError,n.requiresObservable);hc.schedule_();return hc.getDisposer_()}function zd(a,d){return function(){try{return d.apply(this,arguments)}catch(n){a.call(this,
n)}}}function Bd(a,d,n){return Zc(qE,a,d,n)}function Zc(a,d,n,S){var fa="function"===typeof S?wc(d,n):wc(d),la=V(S)?S:n,va=a+"L";fa[va]?fa[va].add(la):fa[va]=new Set([la]);return function(){var Na=fa[va];Na&&(Na["delete"](la),0===Na.size&&delete fa[va])}}function ub(a){!0===a.isolateGlobalState&&fc();var d=a.useProxies,n=a.enforceActions;void 0!==d&&(Cg.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(Cg.verifyProxies=!0);void 0!==n&&(d="always"===n?"always":
"observed"===n,Cg.enforceActions=d,Cg.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(S){S in a&&(Cg[S]=!!a[S])});Cg.allowStateReads=!Cg.observableRequiresReaction;a.reactionScheduler&&Mb(a.reactionScheduler)}function Ac(a,d,n,S){var fa=Hd(d),la=wd(a,S)[De];Tb();try{sd(fa).forEach(function(va){la.extend_(va,fa[va],n?va in n?n[va]:!0:!0)})}finally{Ib()}return a}
function bc(a){var d={name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(bc));return d}function Kc(){this.message="FLOW_CANCELLED"}function Sc(a){return!0===(null==a?void 0:a.isMobXFlow)}function Ec(a,d){return a?void 0!==d?de(a)?a[De].values_.has(d):!1:de(a)||!!a[De]||Ai(a)||Vv(a)||Pu(a):!1}function mc(a){if(de(a))return a[De].ownKeys_();e(38)}function pc(a,d,n){a.set(d,n);return n}function uc(a,d){if(null==a||"object"!==typeof a||a instanceof
Date||!Ec(a))return a;if(jE(a)||Pu(a))return uc(a.get(),d);if(d.has(a))return d.get(a);if(Tc(a)){var n=pc(d,a,Array(a.length));a.forEach(function(va,Na){n[Na]=uc(va,d)});return n}if(Qs(a)){var S=pc(d,a,new Set);a.forEach(function(va){S.add(uc(va,d))});return S}if(Ir(a)){var fa=pc(d,a,new Map);a.forEach(function(va,Na){fa.set(Na,uc(va,d))});return fa}var la=pc(d,a,{});mc(a).forEach(function(va){jq.propertyIsEnumerable.call(a,va)&&(la[va]=uc(a[va],d))});return la}function Kb(a,d){return uc(a,new Map)}
function Cc(){e("trace() is not available in production builds");for(var a=!1,d=arguments.length,n=Array(d),S=0;S<d;S++)n[S]=arguments[S];"boolean"===typeof n[n.length-1]&&(a=n.pop());a:{switch(n.length){case 0:d=Cg.trackingDerivation;break a;case 1:d=wc(n[0]);break a;case 2:d=wc(n[0],n[1]);break a}d=void 0}if(!d)return e("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===Kt.NONE&&console.log("[mobx.trace] '"+
d.name_+"' tracing enabled");d.isTracing_=a?Kt.BREAK:Kt.LOG}function $b(a,d){void 0===d&&(d=void 0);Tb();try{return a.apply(d)}finally{Ib()}}function ob(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function wb(a,d){var n=a.interceptors_||(a.interceptors_=[]);n.push(d);return M(function(){var S=n.indexOf(d);-1!==S&&n.splice(S,1)})}function Sa(a,d){var n=Ya();try{var S=[].concat(a.interceptors_||[]);a=0;for(var fa=S.length;a<fa&&((d=S[a](d))&&!d.type&&e(14),d);a++);return d}finally{Cg.trackingDerivation=
n}}function Hb(a){return void 0!==a.changeListeners_&&0<a.changeListeners_.length}function Jb(a,d){var n=a.changeListeners_||(a.changeListeners_=[]);n.push(d);return M(function(){var S=n.indexOf(d);-1!==S&&n.splice(S,1)})}function Yb(a,d){var n=Ya();if(a=a.changeListeners_){a=a.slice();for(var S=0,fa=a.length;S<fa;S++)a[S](d);Cg.trackingDerivation=n}}function Ic(a,d,n){var S=wd(a,n)[De];Tb();try{var fa;null!=(fa=d)?fa:d=Ma(a);sd(d).forEach(function(la){return S.make_(la,d[la])})}finally{Ib()}return a}
function db(a,d,n,S){void 0===n&&(n="ObservableArray");void 0===S&&(S=!1);z();d=new qx(n,d,S,!1);F(d.values_,De,d);n=new Proxy(d.values_,uE);d.proxy_=n;a&&a.length&&(S=ed(!0),d.spliceWithArray_(0,0,a),Cg.allowStateChanges=S);return n}function fb(a,d){"function"===typeof Array.prototype[a]&&(Wv[a]=d(a))}function Ua(a){return function(){var d=this[De];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function pb(a){return function(d,n){var S=this,fa=this[De];fa.atom_.reportObserved();
return fa.dehanceValues_(fa.values_)[a](function(la,va){return d.call(n,la,va,S)})}}function Gb(a){return function(){var d=this,n=this[De];n.atom_.reportObserved();n=n.dehanceValues_(n.values_);var S=arguments[0];arguments[0]=function(fa,la,va){return S(fa,la,va,d)};return n[a].apply(n,arguments)}}function Tc(a){return R(a)&&vE(a[De])}function nd(a){if(N(a)||Ir(a))return a;if(Array.isArray(a))return new Map(a);if(P(a)){var d=new Map,n;for(n in a)d.set(n,a[n]);return d}return e(21,a)}function wd(a,
d){var n;if(W(a,De))return a;var S=null!=(n=null==d?void 0:d.name)?n:"ObservableObject";n=Rz;var fa=new Map;S=String(S);var la;var va=d?null!=(la=d.defaultDecorator)?la:Ea(d):void 0;d=new n(a,fa,S,va);u(a,De,d);return a}function Rd(a){return Qz[a]||(Qz[a]={get:function(){return this[De].getObservablePropValue_(a)},set:function(d){return this[De].setObservablePropValue_(a,d)}})}function de(a){return R(a)?CE(a[De]):!1}function be(a){return{enumerable:!1,configurable:!0,get:function(){return this[De].get_(a)},
set:function(d){this[De].set_(a,d)}}}function Ed(a){if(a>rx){for(var d=rx;d<a+100;d++)zp(sx.prototype,""+d,be(d));rx=a}}function Ub(a,d,n){return new sx(a,d,n)}function wc(a,d){if("object"===typeof a&&null!==a){if(Tc(a))return void 0!==d&&e(23),a[De].atom_;if(Qs(a))return a[De];if(Ir(a)){if(void 0===d)return a.keysAtom_;var n=a.data_.get(d)||a.hasMap_.get(d);n||e(25,d,gb(a));return n}if(de(a)){if(!d)return e(26);(n=a[De].values_.get(d))||e(27,d,gb(a));return n}if(Ai(a)||Pu(a)||Vv(a))return a}else if(V(a)&&
Vv(a[De]))return a[De];e(28)}function Vc(a,d){a||e(29);if(void 0!==d)return Vc(wc(a,d));if(Ai(a)||Pu(a)||Vv(a)||Ir(a)||Qs(a))return a;if(a[De])return a[De];e(24,a)}function gb(a,d){if(void 0!==d)a=wc(a,d);else{if(Lc(a))return a.name;a=de(a)||Ir(a)||Qs(a)?Vc(a):wc(a)}return a.name_}function wa(a,d,n){void 0===n&&(n=-1);return ta(a,d,n)}function ta(a,d,n,S,fa){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var la=typeof a;if("function"!==la&&"object"!==la&&"object"!=
typeof d)return!1;la=Tz.call(a);if(la!==Tz.call(d))return!1;switch(la){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=n&&n++}a=Ia(a);d=Ia(d);la="[object Array]"===la;if(!la){if("object"!=typeof a||"object"!=
typeof d)return!1;var va=a.constructor,Na=d.constructor;if(va!==Na&&!(V(va)&&va instanceof va&&V(Na)&&Na instanceof Na)&&"constructor"in a&&"constructor"in d)return!1}if(0===n)return!1;0>n&&(n=-1);S=S||[];fa=fa||[];for(va=S.length;va--;)if(S[va]===a)return fa[va]===d;S.push(a);fa.push(d);if(la){va=a.length;if(va!==d.length)return!1;for(;va--;)if(!ta(a[va],d[va],n-1,S,fa))return!1}else{la=Object.keys(a);va=la.length;if(Object.keys(d).length!==va)return!1;for(;va--;)if(Na=la[va],!W(d,Na)||!ta(a[Na],
d[Na],n-1,S,fa))return!1}S.pop();fa.pop();return!0}function Ia(a){return Tc(a)?a.slice():N(a)||Ir(a)||O(a)||Qs(a)?Array.from(a.entries()):a}function eb(a){a[Symbol.iterator]=Pb;return a}function Pb(){return this}function xc(a,d){const n=new Set(d),S=Object.values(a),fa=new Set(S.filter(la=>n.has(la.toId)||n.has(la.fromId)));a=fa.size;for(d=-1;0!==d;)fa.forEach(la=>{la=la.fromId;for(const va of S)va.fromId===la&&fa.add(va),va.toId===la&&fa.add(va)}),d=fa.size-a,a=fa.size;return Array.from(fa.values())}
function kd(a,d,n,S,fa,la,va,Na){if(fa=d.getBindingPoint(fa,la,va,Na))return{id:S,type:"line",fromId:a.id,toId:d.id,handleId:n,point:Fe.toFixed(fa.point),distance:fa.distance}}function xd(a,d){const n=a.getCenter(),S=d.getCenter();var fa=xk();fa=ag(Ke({},Su.defaultProps),{id:fa,type:Su.id,parentId:a.props.parentId,point:n});a=kd(fa,a,"start",xk(),n,n,Fe.uni(Fe.sub(S,n)),!1);d=kd(fa,d,"end",xk(),S,S,Fe.uni(Fe.sub(n,S)),!1);return a&&d?(fa.handles.start.point=[0,0],fa.handles.end.point=Fe.sub(S,n),
fa.handles.start.bindingId=a.id,fa.handles.end.bindingId=d.id,[fa,[a,d]]):null}function te(){return new LE}function Ee(){return new WeakMap}function Oe(a){if(!a)return Ax(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:Ax(a);if(~JE.call(d).indexOf("[native code]"))try{return new d}catch(n){}return Ax(a)}function Tf(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function Af(a){return a.flags}function Vf(a){a=
KE.call(a);return a.substring(8,a.length-1)}function Cf(a){return a[Symbol.toStringTag]||Vf(a)}function og(a){return FA(a).concat(Bx(a))}function oh(a,d,n){for(var S=SE(a),fa=0,la=S.length,va,Na;fa<la;++fa)if(va=S[fa],"callee"!==va&&"caller"!==va)if(Na=QE(a,va)){Na.get||Na.set||(Na.value=n.copier(Na.value,n));try{PE(d,va,Na)}catch(cb){d[va]=Na.value}}else d[va]=n.copier(a[va],n);return d}function Yg(a,d){var n=new d.Constructor;d.cache.set(a,n);a.forEach(function(S,fa){n.set(fa,d.copier(S,d))});return n}
function wg(a,d){var n=Oe(d.prototype);d.cache.set(a,n);for(var S in a)HA.call(a,S)&&(n[S]=d.copier(a[S],d));return n}function Xg(a,d){var n=Oe(d.prototype);d.cache.set(a,n);for(var S in a)HA.call(a,S)&&(n[S]=d.copier(a[S],d));S=Bx(a);for(var fa=0,la=S.length,va;fa<la;++fa)va=S[fa],RE.call(a,va)&&(n[va]=d.copier(a[va],d));return n}function ki(a,d){return new d.Constructor(a.valueOf())}function Uh(a,d){return a}function Bi(a,d){var n=new d.Constructor;d.cache.set(a,n);a.forEach(function(S){n.add(d.copier(S,
d))});return n}function vi(a){function d(la,va){va.prototype=va.Constructor=void 0;if(!la||"object"!==typeof la)return la;if(va.cache.has(la))return va.cache.get(la);va.prototype=la.__proto__||UE(la);va.Constructor=va.prototype&&va.prototype.constructor;if(!va.Constructor||va.Constructor===Object)return fa(la,va);if(TE(la))return S(la,va);var Na=n[OE(la)];return Na?Na(la,va):"function"===typeof la.then?la:fa(la,va)}a=Cx({},JA,a);var n={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,
Boolean:ki,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,Int32Array:a.arrayBuffer,Map:a.map,Number:ki,Object:a.object,Promise:Uh,RegExp:a.regExp,Set:a.set,String:ki,WeakMap:Uh,WeakSet:Uh,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},S=n.Array,fa=n.Object;return function(la){return d(la,{Constructor:void 0,cache:ME(),
copier:d,prototype:void 0})}}function Kj(a,d){return(0,YE.default)(a,d,{arrayMerge:(n,S,fa)=>S})}function oj(a,d,n,S=!1){const [fa,la]=d,[va,Na]=n;a=va+(a-fa)/(la-fa)*(Na-va);return S?va<Na?Math.max(Math.min(a,Na),va):Math.max(Math.min(a,va),Na):a}function Hi(a,d){return new Promise((n,S)=>{if("video"===d){const fa=document.createElement("video");fa.addEventListener("loadedmetadata",function(){n([this.videoWidth,this.videoHeight])},!1);fa.src=a}else if("image"===d){const fa=new Image;fa.onload=()=>
n([fa.width,fa.height]);fa.src=a;fa.onerror=la=>S(la)}else"pdf"===d&&n([595,842])})}function Gf(a){return Object.values(Ns).includes(a)}function Uf(a,d){return Gf(a)||null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:a}function Fg(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",
padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);return a}function ah(a,d,n=0){var S,fa,la;if(!a)return[16,32];let va;va="string"===typeof d?d:`${null!=(S=d.fontStyle)?S:"normal"} ${null!=(fa=d.fontVariant)?fa:"normal"} ${null!=(la=d.fontWeight)?la:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!Dx.has(`${a}-${va}-${n}`)){if(!Mr)return[10,
10];Mr.parentNode||document.body.appendChild(Mr);Mr.innerHTML=`${a}&#8203;`;Mr.style.font=va;Mr.style.padding=n+"px";d=Mr.getBoundingClientRect();Dx.set(`${a}-${va}-${n}`,[Math.ceil(d.width||1),Math.ceil(d.height||1)])}return Dx.get(`${a}-${va}-${n}`)}function Vg(a){try{if("string"!==typeof a||!wh.test(a))throw TypeError("Invalid UUID");let d;const n=new Uint8Array(16);n[0]=(d=parseInt(a.slice(0,8),16))>>>24;n[1]=d>>>16&255;n[2]=d>>>8&255;n[3]=d&255;n[4]=(d=parseInt(a.slice(9,13),16))>>>8;n[5]=d&
255;n[6]=(d=parseInt(a.slice(14,18),16))>>>8;n[7]=d&255;n[8]=(d=parseInt(a.slice(19,23),16))>>>8;n[9]=d&255;n[10]=(d=parseInt(a.slice(24,36),16))/1099511627776&255;n[11]=d/4294967296&255;n[12]=d>>>24&255;n[13]=d>>>16&255;n[14]=d>>>8&255;n[15]=d&255;return!0}catch(d){return!1}}function Pg(a,d=0,n){let S;return function(...fa){null==n?void 0:n(...fa);clearTimeout(S);S=setTimeout(()=>a.apply(fa),d)}}function Xb(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function ic(){var a,d,n;return(null==
(n=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:n.call(d,"ui/developer-mode?"))||!1}function Nc(a){return!!a}function Jc(a=0){return new Promise(d=>setTimeout(d,a))}function jd(a="noid"){Ex[a]||(Ex[a]=MA.createContext({}));return Ex[a]}function yd(a="noid"){return MA.useContext(jd(a))}function Xd(a){const {callbacks:d}=yd(),n=LA.useRef(-1);return LA.useMemo(()=>{const S=fa=>{var la,va;const {order:Na=0}=fa;if(!Na){var cb=fa.target;cb.removeEventListener("pointerup",
S);cb.releasePointerCapture(fa.pointerId);null==(la=d.onPointerUp)?void 0:la.call(d,{type:"selection",handle:a,order:Na},fa);la=Date.now();cb=la-n.current;300<cb?n.current=la:300>=cb&&(null==(va=d.onDoubleClick)?void 0:va.call(d,{type:"selection",handle:a,order:Na},fa),n.current=-1);fa.order=Na+1}};return{onPointerDown:fa=>{var la;const {order:va=0}=fa;if(!va){var Na=le(fa.currentTarget);Na.setPointerCapture(fa.pointerId);Na.addEventListener("pointerup",S);null==(la=d.onPointerDown)?void 0:la.call(d,
{type:"selection",handle:a,order:va},fa);fa.order=va+1}},onPointerMove:fa=>{var la;const {order:va=0}=fa;va||(null==(la=d.onPointerMove)?void 0:la.call(d,{type:"selection",handle:a,order:va},fa),fa.order=va+1)},onPointerEnter:fa=>{var la;const {order:va=0}=fa;va||(null==(la=d.onPointerEnter)?void 0:la.call(d,{type:"selection",handle:a,order:va},fa),fa.order=va+1)},onPointerLeave:fa=>{var la;const {order:va=0}=fa;va||(null==(la=d.onPointerLeave)?void 0:la.call(d,{type:"selection",handle:a,order:va},
fa),fa.order=va+1)},onKeyDown:fa=>{var la;null==(la=d.onKeyDown)?void 0:la.call(d,{type:"selection",handle:a,order:-1},fa)},onKeyUp:fa=>{var la;null==(la=d.onKeyUp)?void 0:la.call(d,{type:"selection",handle:a,order:-1},fa)}}},[d])}function le(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return le(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function ve(a,d,n){const S=Uu.useRef(!1),fa=Uu.useCallback(()=>{var la;if(S.current){const va=
null==(la=a.current)?void 0:la.getBoundingClientRect();va&&(la={minX:va.left,maxX:va.left+va.width,minY:va.top,maxY:va.top+va.height,width:va.width,height:va.height},d.updateBounds(la),null==n?void 0:n(la))}else S.current=!0},[a,n]);Uu.useEffect(()=>{const la=a.current?aF(a.current):document,va=Pg(fa,100);la.addEventListener("scroll",va);window.addEventListener("resize",va);return()=>{la.removeEventListener("scroll",va);window.removeEventListener("resize",va)}},[]);Uu.useLayoutEffect(()=>{const la=
new ResizeObserver(va=>{va[0].contentRect&&fa()});a.current&&la.observe(a.current);return()=>{la.disconnect()}},[a]);Uu.useEffect(()=>{fa();setTimeout(()=>{var la,va;null==(va=null==(la=a.current)?void 0:la.querySelector(".tl-canvas"))?void 0:va.focus()})},[a])}function cf(a,d){return Object.keys(d).reduce((n,S)=>{const fa=d[S];return fa?n+`${`--${a}-${S}`}: ${fa};
`:n},"")}function Td(a,d,n=".logseq-tldraw"){Fx.useLayoutEffect(()=>{const S=document.createElement("style"),fa=cf(a,d);S.setAttribute("id",`${a}-theme`);S.setAttribute("data-selector",n);S.innerHTML=`
        ${n} {
          ${fa}
        }
      `;document.head.appendChild(S);return()=>{S&&document.head.contains(S)&&document.head.removeChild(S)}},[a,d,n])}function gf(a,d){Fx.useLayoutEffect(()=>{if(Gx.get(a))return()=>{};const n=document.createElement("style");n.innerHTML=d;n.setAttribute("id",a);document.head.appendChild(n);Gx.set(a,n);return()=>{n&&document.head.contains(n)&&(document.head.removeChild(n),Gx.delete(a))}},[a,d])}function Ue(a,d){const n=Fx.useMemo(()=>Ke(Ke({},bF),a),[a]);Td("tl",n,d);gf("tl-canvas",cF)}function We(a=
"noid"){Hx[a]||(Hx[a]=OA.createContext({}));return Hx[a]}function df(a="noid"){return OA.useContext(We(a))}function kf(){const a=df(),{callbacks:d}=yd(),n=NA.useRef(-1);return NA.useMemo(()=>({onPointerDown:S=>{var fa,la,va;if(!a.settings.penMode||"pen"===S.pointerType&&S.isPrimary){var {order:Na=0}=S;Na||(null==(fa=S.currentTarget)?void 0:fa.setPointerCapture(S.pointerId));S.isPrimary&&(null==(la=d.onPointerDown)?void 0:la.call(d,{type:"canvas",order:Na},S),fa=Date.now(),la=fa-n.current,300<la?n.current=
fa:300>=la&&(null==(va=d.onDoubleClick)?void 0:va.call(d,{type:"canvas",order:Na},S),n.current=-1))}},onPointerMove:S=>{var fa;if(!a.settings.penMode||"pen"===S.pointerType&&S.isPrimary){var {order:la=0}=S;null==(fa=d.onPointerMove)?void 0:fa.call(d,{type:"canvas",order:la},S)}},onPointerUp:S=>{var fa,la;if(!a.settings.penMode||"pen"===S.pointerType&&S.isPrimary){var {order:va=0}=S;va||(null==(fa=S.currentTarget)?void 0:fa.releasePointerCapture(S.pointerId));null==(la=d.onPointerUp)?void 0:la.call(d,
{type:"canvas",order:va},S)}},onPointerEnter:S=>{var fa;if(!a.settings.penMode||"pen"===S.pointerType&&S.isPrimary){var {order:la=0}=S;null==(fa=d.onPointerEnter)?void 0:fa.call(d,{type:"canvas",order:la},S)}},onPointerLeave:S=>{var fa;if(!a.settings.penMode||"pen"===S.pointerType&&S.isPrimary){var {order:la=0}=S;null==(fa=d.onPointerLeave)?void 0:fa.call(d,{type:"canvas",order:la},S)}},onDrop:S=>Mi(this,null,function*(){S.preventDefault();"clientX"in S&&a.drop(S.dataTransfer,[S.clientX,S.clientY])}),
onDragOver:S=>{S.preventDefault()},onTouchEnd:S=>{let fa=a.selectedTool.id;"pencil"!==fa&&"highlighter"!==fa||S.preventDefault()}}),[d])}function Be(a,d,n){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*n):a*d*n/(d+n*a)}function qg(a,d,n,S=.15){return 0===S?Math.max(d,Math.min(a,n)):a<d?-Be(d-a,n-d,S)+d:a>n?+Be(a-n,n-d,S)+n:a}function Mf(a,[d,n],[S,fa]){const [[la,va],[Na,cb]]=a;return[qg(d,la,va,S),qg(n,Na,cb,fa)]}function ug(a,d,n){d in a?Object.defineProperty(a,d,{value:n,enumerable:!0,configurable:!0,
writable:!0}):a[d]=n;return a}function rh(a,d){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(a);d&&(S=S.filter(function(fa){return Object.getOwnPropertyDescriptor(a,fa).enumerable}));n.push.apply(n,S)}return n}function Nf(a){for(var d=1;d<arguments.length;d++){var n=null!=arguments[d]?arguments[d]:{};d%2?rh(Object(n),!0).forEach(function(S){ug(a,S,n[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):rh(Object(n)).forEach(function(S){Object.defineProperty(a,
S,Object.getOwnPropertyDescriptor(n,S))})}return a}function Tg(a){return a?a[0].toUpperCase()+a.slice(1):""}function Xh(a=!1,d){return a&&!dF.includes(d)}function Zg(a,d="",n=!1){const S=PA[a];d=S?S[d]||d:d;return"on"+Tg(a)+Tg(d)+(Xh(n,d)?"Capture":"")}function gg(a){a=a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var n=eF.includes(a)?"capturecapture":"capture";(n=!!~a.indexOf(n))&&(a=a.replace("capture",""));return{device:a,capture:n,passive:d}}function qi(a,
d=""){const n=PA[a];return a+(n?n[d]||d:d)}function sh(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function Vi(a){return Array.from(a.touches).filter(d=>{var n,S;return d.target===a.currentTarget||(null===(n=a.currentTarget)||void 0===n?void 0:null===(S=n.contains)||void 0===S?void 0:S.call(n,d.target))})}function Ih(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function Hf(a,d){const n=d.clientX-a.clientX,S=d.clientY-
a.clientY;return{angle:-(180*Math.atan2(n,S))/Math.PI,distance:Math.hypot(n,S),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function rf(a){return Vi(a).map(d=>d.identifier)}function Jf(a,d){const [n,S]=Array.from(a.touches).filter(fa=>d.includes(fa.identifier));return Hf(n,S)}function kh(a){const d=Ih(a);return"touches"in a?d.identifier:d.pointerId}function Bg(a){a=Ih(a);return[a.clientX,a.clientY]}function Wi(a){let {deltaX:d,deltaY:n,deltaMode:S}=a;1===S?(d*=40,n*=40):2===S&&(d*=800,
n*=800);return[d,n]}function ih(a,...d){return"function"===typeof a?a(...d):a}function ai(){}function bi(...a){return 0===a.length?ai:1===a.length?a[0]:function(){let d;for(const n of a)d=n.apply(this,arguments)||d;return d}}function pj([a,d],n){a=Math.abs(a);d=Math.abs(d);if(a>d&&a>n)return"x";if(d>a&&d>n)return"y"}function Bk(a){const [d,n]=a.overflow,[S,fa]=a._delta,[la,va]=a._direction;if(0>d&&0<S&&0>la||0<d&&0>S&&0<la)a._movement[0]=a._movementBound[0];if(0>n&&0<fa&&0>va||0<n&&0>fa&&0<va)a._movement[1]=
a._movementBound[1]}function Qi(a){Ix.set(a.key,a.engine);Jx.set(a.key,a.resolver)}function Sk(a={},d){const n={};for(const [S,fa]of Object.entries(d))switch(typeof fa){case "function":n[S]=fa.call(n,a[S],S,a);break;case "object":n[S]=Sk(a[S],fa);break;case "boolean":fa&&(n[S]=a[S])}return n}function qj(a,d,n={}){const {target:S,eventOptions:fa,window:la,enabled:va,transform:Na}=a;var cb=BF;if(null==a)a={};else{if(null==a)var qb={};else{qb={};var xb=Object.keys(a),Eb;for(Eb=0;Eb<xb.length;Eb++){var jc=
xb[Eb];0<=cb.indexOf(jc)||(qb[jc]=a[jc])}}if(Object.getOwnPropertySymbols)for(Eb=Object.getOwnPropertySymbols(a),jc=0;jc<Eb.length;jc++)xb=Eb[jc],0<=cb.indexOf(xb)||Object.prototype.propertyIsEnumerable.call(a,xb)&&(qb[xb]=a[xb]);a=qb}n.shared=Sk({target:S,eventOptions:fa,window:la,enabled:va,transform:Na},AF);if(d){var oc=Jx.get(d);n[d]=Sk(Nf({shared:n.shared},a),oc)}else for(oc in a)(d=Jx.get(oc))&&(n[oc]=Sk(Nf({shared:n.shared},a[oc]),d));return n}function Xi(a,d){a.gestures.add(d);a.gestureEventStores[d]=
new XA(a,d);a.gestureTimeoutStores[d]=new CF}function gj(a,d,n,S,fa,la){if(a.has(n)&&Ix.has(S)){var va=n+"Start",Na=n+"End";fa[S]=cb=>{let qb=void 0;if(cb.first&&va in d)d[va](cb);n in d&&(qb=d[n](cb));if(cb.last&&Na in d)d[Na](cb);return qb};la[S]=la[S]||{}}}function bf(a,d={},n,S){const fa=Kx.default.useMemo(()=>new DF(a),[]);fa.applyHandlers(a,S);fa.applyConfig(d,n);Kx.default.useEffect(fa.effect.bind(fa));Kx.default.useEffect(()=>fa.clean.bind(fa),[]);if(void 0===d.target)return fa.bind.bind(fa)}
function Jh(a){a.forEach(Qi);return function(d,n){n=n||{};const S={},fa={},la=new Set;for(let jc in d)EF.test(jc)?(la.add(RegExp.lastMatch),fa[jc]=d[jc]):S[jc]=d[jc];const [va,Na,cb]=[fa,S,la];d={};gj(cb,va,"onDrag","drag",d,n);gj(cb,va,"onWheel","wheel",d,n);gj(cb,va,"onScroll","scroll",d,n);gj(cb,va,"onPinch","pinch",d,n);gj(cb,va,"onMove","move",d,n);gj(cb,va,"onHover","hover",d,n);const {handlers:qb,nativeHandlers:xb,config:Eb}={handlers:d,config:n,nativeHandlers:Na};return bf(qb,Eb,void 0,xb)}}
function Ii(a,d){return Jh([uF,xF,yF,zF,wF,vF])(a,d||{})}function Fj(a){const {viewport:d,inputs:n,callbacks:S}=yd(),fa=aw.useRef(void 0),la=aw.useRef([0,0]),va=aw.useRef(0),Na=aw.useMemo(()=>({onWheel:cb=>{var qb;({event:cb}=cb);cb.preventDefault();const {deltaY:xb,deltaX:Eb}=cb;var jc=0;if(cb.ctrlKey||cb.metaKey){jc=Math.sign(cb.deltaY);let hd=xb;10<Math.abs(cb.deltaY)&&(hd=10*jc);jc=hd}const [oc,hc,Rc]=[Eb,xb,jc];"pinching"===n.state||va.current>=cb.timeStamp||(va.current=cb.timeStamp,(cb.altKey||
cb.ctrlKey||cb.metaKey)&&0===cb.buttons?(jc=d.bounds,cb=null!=(qb=n.currentScreenPoint)?qb:[jc.width/2,jc.height/2],qb=d.camera.zoom,d.onZoom(cb,qb-Rc/100*qb)):(qb=Fe.mul(cb.shiftKey&&!Xb()?[hc,0]:[oc,hc],.8),Fe.isEqual(qb,[0,0])||d.panCamera(qb)))},onPinchStart:({event:cb,delta:qb,offset:xb,origin:Eb})=>{var jc;const oc=a.current;cb instanceof WheelEvent||!(cb.target===oc||null!=oc&&oc.contains(cb.target))||(null==(jc=S.onPinchStart)?void 0:jc.call(S,{type:"canvas",order:0,delta:[...qb,xb[0]],offset:xb,
point:Fe.sub(Eb,n.containerOffset)},cb),fa.current=Eb,la.current=[0,0])},onPinchEnd:({event:cb,offset:qb,origin:xb})=>{var Eb;const jc=a.current;cb instanceof WheelEvent||!(cb.target===jc||null!=jc&&jc.contains(cb.target))||"pinching"!==n.state||(null==(Eb=S.onPinchEnd)?void 0:Eb.call(S,{type:"canvas",order:0,delta:[0,0,qb[0]],offset:qb,point:Fe.sub(xb,n.containerOffset)},cb),la.current=[0,0])},onPinch:({event:cb,offset:qb,origin:xb})=>{var Eb,jc=a.current;if(!(cb instanceof WheelEvent)&&(cb.target===
jc||null!=jc&&jc.contains(cb.target))){fa.current||(fa.current=xb);jc=Fe.sub(fa.current,xb);var oc=Fe.sub(jc,la.current);null==(Eb=S.onPinch)?void 0:Eb.call(S,{type:"canvas",order:0,delta:[...oc,qb[0]],offset:qb,point:Fe.sub(xb,n.containerOffset)},cb);la.current=jc}}}),[S]);Ii(Na,{target:a,eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:hp.maxZoom,min:hp.minZoom})}})}function Qb(a,d,n,S){Lx.useLayoutEffect(()=>{a.current.style.transform=
`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,n,d.rotation]);Lx.useLayoutEffect(()=>{const fa=a.current;fa.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;fa.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);Lx.useLayoutEffect(()=>{const fa=a.current;void 0!==S&&(fa.style.zIndex=S.toString())},[S])}function dd(a,d){const {onPersist:n,onError:S,onMount:fa,onCreateAssets:la,onCreateShapes:va,onDeleteAssets:Na,onDeleteShapes:cb,onDrop:qb,
onPaste:xb,onCopy:Eb,onCanvasDBClick:jc}=d;ZA.useLayoutEffect(()=>{const oc=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,fa&&fa(a,null),()=>{oc.forEach(hc=>hc());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);ZA.useLayoutEffect(()=>{const oc=[];n&&oc.push(a.subscribe("persist",n));S&&oc.push(a.subscribe("error",S));va&&oc.push(a.subscribe("create-shapes",va));la&&oc.push(a.subscribe("create-assets",la));cb&&oc.push(a.subscribe("delete-shapes",cb));Na&&oc.push(a.subscribe("delete-assets",
Na));qb&&oc.push(a.subscribe("drop",qb));xb&&oc.push(a.subscribe("paste",xb));Eb&&oc.push(a.subscribe("copy",Eb));jc&&oc.push(a.subscribe("canvas-dbclick",jc));return()=>oc.forEach(hc=>hc())},[a,n,S])}function md(a){if("app"in a)return a.app;const [d]=$A.useState(()=>new ZE(a.model,a.Shapes,a.Tools,a.readOnly));$A.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function Cd(a,d){FF.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function Id(a){const d=yd(),{viewport:{bounds:n}}=
d;GF.useEffect(()=>{const S=va=>{va.preventDefault()},fa=va=>{if(0!==va.touches.length){var Na=va.touches[0].pageX,cb=va.touches[0].radiusX||0;(10>Na-cb||Na+cb>n.width-10)&&va.preventDefault()}},la=a.current;if(!la)return()=>{};la.addEventListener("touchstart",S,{passive:!0});la.addEventListener("gestureend",S,{passive:!0});la.addEventListener("gesturechange",S,{passive:!0});la.addEventListener("gesturestart",S,{passive:!0});la.addEventListener("touchstart",fa,{passive:!0});return()=>{la&&(la.removeEventListener("touchstart",
S),la.removeEventListener("gestureend",S),la.removeEventListener("gesturechange",S),la.removeEventListener("gesturestart",S),la.removeEventListener("touchstart",fa))}},[a,n.width])}function Sd(a,d){const {inputs:n,callbacks:S}=yd();return HF.useMemo(()=>({onPointerDown:fa=>{var la,va;const {order:Na=0}=fa;Na||(null==(la=fa.currentTarget)?void 0:la.setPointerCapture(fa.pointerId));la=a.props.handles[d];null==(va=S.onPointerDown)?void 0:va.call(S,{type:"handle",shape:a,handle:la,id:d,order:Na},fa);
fa.order=Na+1},onPointerMove:fa=>{var la;const {order:va=0}=fa,Na=a.props.handles[d];null==(la=S.onPointerMove)?void 0:la.call(S,{type:"handle",shape:a,handle:Na,id:d,order:va},fa);fa.order=va+1},onPointerUp:fa=>{var la,va;const {order:Na=0}=fa;Na||(null==(la=fa.currentTarget)?void 0:la.releasePointerCapture(fa.pointerId));la=a.props.handles[d];null==(va=S.onPointerUp)?void 0:va.call(S,{type:"handle",shape:a,handle:la,id:d,order:Na},fa);fa.order=Na+1},onPointerEnter:fa=>{var la;const {order:va=0}=
fa,Na=a.props.handles[d];null==(la=S.onPointerEnter)?void 0:la.call(S,{type:"handle",shape:a,handle:Na,id:d,order:va},fa);fa.order=va+1},onPointerLeave:fa=>{var la;const {order:va=0}=fa,Na=a.props.handles[d];null==(la=S.onPointerLeave)?void 0:la.call(S,{type:"handle",shape:a,handle:Na,id:d,order:va},fa);fa.order=va+1},onKeyUp:fa=>{var la;const va=a.props.handles[d];null==(la=S.onKeyUp)?void 0:la.call(S,{type:"handle",shape:a,handle:va,id:d,order:-1},fa)},onKeyDown:fa=>{var la;const va=a.props.handles[d];
null==(la=S.onKeyDown)?void 0:la.call(S,{type:"handle",shape:a,handle:va,id:d,order:-1},fa)}}),[a.id,n,S])}function je(a,d,n=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${n?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function He(a,d,n=0){IF.useEffect(()=>{const S=a.current;S&&(S.style.cursor=
JF[d](Dm.radiansToDegrees(n)))},[d,n])}function Ye(a){const {viewport:d}=yd(),n=df();KF.useLayoutEffect(()=>rc(()=>{const S=Pg(()=>{var fa;null==(fa=a.current)?void 0:fa.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==n.inputs.state&&null!=d.camera.zoom&&S()}),[])}function ef(a,d=0){const [n,S]=(0,aB.useState)(a);(0,aB.useEffect)(()=>{let fa=!1;const la=setTimeout(()=>{fa||S(a)},d);return()=>{fa=!0;clearTimeout(la)}},[a,d]);return n}function Se(){const a=df();bB.useEffect(()=>
{Wc(()=>Ke({},a.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);bB.useEffect(()=>{var d;const n=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");n?a.viewport.update(n):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function $e(a){a()}function lf(a){return bc(wc(a,void 0))}function zf(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,
cleanAt:Date.now()+MF}}function we(a){var d=new Map,n=1,S=new a(function(fa){var la=d.get(fa);la&&(la.reaction.dispose(),d.delete(fa))});return{addReactionToTrack:function(fa,la,va){var Na=n++;S.register(va,Na,fa);fa.current=zf(la);fa.current.finalizationRegistryCleanupToken=Na;d.set(Na,fa.current);return fa.current},recordReactionAsCommitted:function(fa){S.unregister(fa);fa.current&&fa.current.finalizationRegistryCleanupToken&&d.delete(fa.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function uf(){function a(){void 0===S&&(S=setTimeout(d,1E4))}function d(){S=void 0;var fa=Date.now();n.forEach(function(la){var va=la.current;va&&fa>=va.cleanAt&&(va.reaction.dispose(),la.current=null,n.delete(la))});0<n.size&&a()}var n=new Set,S;return{addReactionToTrack:function(fa,la,va){fa.current=zf(la);n.add(fa);a();return fa.current},recordReactionAsCommitted:function(fa){n.delete(fa)},forceCleanupTimerToRunNowForTests:function(){S&&(clearTimeout(S),
d())},resetCleanupScheduleForTests:function(){var fa;if(0<n.size){try{for(var la=NF(n),va=la.next();!va.done;va=la.next()){var Na=va.value,cb=Na.current;cb&&(cb.reaction.dispose(),Na.current=null)}}catch(xb){var qb={error:xb}}finally{try{va&&!va.done&&(fa=la.return)&&fa.call(la)}finally{if(qb)throw qb.error;}}n.clear()}S&&(clearTimeout(S),S=void 0)}}}function Ve(){return new QF}function Jg(a,d){void 0===d&&(d="observed");var n=eB(Xu.default.useState(Ve),1)[0],S=eB(Xu.default.useState(),2)[1],fa=Xu.default.useRef(null);
if(!fa.current)var la=new Lt("observer".concat(d),function(){va.mounted?S([]):va.changedBeforeMount=!0}),va=OF(fa,la,n);n=fa.current.reaction;Xu.default.useDebugValue(n,lf);Xu.default.useEffect(function(){PF(fa);fa.current?(fa.current.mounted=!0,fa.current.changedBeforeMount&&(fa.current.changedBeforeMount=!1,S([]))):(fa.current={reaction:new Lt("observer".concat(d),function(){S([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},S([]));return function(){fa.current.reaction.dispose();fa.current=
null}},[]);var Na,cb;n.track(function(){try{Na=a()}catch(qb){cb=qb}});if(cb)throw cb;return Na}function Ne(a,d){var n;if(hB&&a.$$typeof===hB)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(n=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==n?n:!1;var S=a,fa=a.displayName||a.name;if(gB&&a.$$typeof===gB&&(d=!0,S=a.render,"function"!==typeof S))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
n=function(la,va){return Jg(function(){return S(la,va)},fa)};""!==fa&&(n.displayName=fa);a.contextTypes&&(n.contextTypes=a.contextTypes);d&&(n=(0,Ut.forwardRef)(n));n=(0,Ut.memo)(n);Bf(a,n);return n}function Bf(a,d){Object.keys(a).forEach(function(n){RF[n]||Object.defineProperty(d,n,Object.getOwnPropertyDescriptor(a,n))})}function rg(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:Jg(a)}function vh(a){const d=df(),{callbacks:n}=yd(),S=iB.useRef(!1);iB.useEffect(()=>{const fa=cb=>
{var qb,xb;if(null==(qb=a.current)?0:qb.contains(document.activeElement))null==(xb=n.onKeyDown)?void 0:xb.call(n,{type:"canvas",order:-1},cb),S.current=cb.shiftKey},la=cb=>{var qb,xb;if(null==(qb=a.current)?0:qb.contains(document.activeElement))null==(xb=n.onKeyUp)?void 0:xb.call(n,{type:"canvas",order:-1},cb),S.current=cb.shiftKey},va=cb=>{var qb,xb,Eb;!d.editingShape&&(null==(qb=a.current)?0:qb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(Eb=null==(xb=document.activeElement)?
void 0:xb.tagName)?Eb:"")&&(cb.preventDefault(),d.paste(cb,S.current))},Na=cb=>{var qb,xb,Eb;!d.editingShape&&0<d.selectedShapes.size&&(null==(qb=a.current)?0:qb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(Eb=null==(xb=document.activeElement)?void 0:xb.tagName)?Eb:"")&&(cb.preventDefault(),d.copy())};window.addEventListener("keydown",fa);window.addEventListener("keyup",la);document.addEventListener("paste",va);document.addEventListener("copy",Na);return()=>{window.removeEventListener("keydown",
fa);window.removeEventListener("keyup",la);document.removeEventListener("paste",va);document.removeEventListener("copy",Na)}},[])}function Mh(a){const d=df(),{inputs:n,callbacks:S}=yd(),fa=nB.useRef(-1);return nB.useMemo(()=>({onPointerDown:la=>{var va,Na;if(!d.settings.penMode||"pen"===la.pointerType&&la.isPrimary){var {order:cb=0}=la;cb||(null==(va=la.currentTarget)?void 0:va.setPointerCapture(la.pointerId));null==(Na=S.onPointerDown)?void 0:Na.call(S,{type:"shape",shape:a,order:cb},la);la.order=
cb+1}},onPointerMove:la=>{var va;if(!d.settings.penMode||"pen"===la.pointerType&&la.isPrimary){var {order:Na=0}=la;null==(va=S.onPointerMove)?void 0:va.call(S,{type:"shape",shape:a,order:Na},la);la.order=Na+1}},onPointerUp:la=>{var va,Na,cb;if(!d.settings.penMode||"pen"===la.pointerType&&la.isPrimary){var {order:qb=0}=la;qb||(null==(va=la.currentTarget)?void 0:va.releasePointerCapture(la.pointerId));null==(Na=S.onPointerUp)?void 0:Na.call(S,{type:"shape",shape:a,order:qb},la);va=Date.now();Na=va-
fa.current;300<Na?fa.current=va:300>=Na&&(null==(cb=S.onDoubleClick)?void 0:cb.call(S,{type:"shape",shape:a,order:qb},la),fa.current=-1);la.order=qb+1}},onPointerEnter:la=>{var va;if(!d.settings.penMode||"pen"===la.pointerType&&la.isPrimary){var {order:Na=0}=la;null==(va=S.onPointerEnter)?void 0:va.call(S,{type:"shape",shape:a,order:Na},la);la.order=Na+1}},onPointerLeave:la=>{var va;if(!d.settings.penMode||"pen"===la.pointerType&&la.isPrimary){var {order:Na=0}=la;null==(va=S.onPointerLeave)?void 0:
va.call(S,{type:"shape",shape:a,order:Na},la);la.order=Na+1}},onKeyUp:la=>{var va;null==(va=S.onKeyUp)?void 0:va.call(S,{type:"shape",shape:a,order:-1},la)},onKeyDown:la=>{var va;null==(va=S.onKeyDown)?void 0:va.call(S,{type:"shape",shape:a,order:-1},la)}}),[a.id,n,S])}function Nh(a){var {viewport:d,inputs:n,callbacks:S,components:fa}=a;a=yg(a,["viewport","inputs","callbacks","components"]);return(0,FB.jsx)(kG,{id:a.id,viewport:d,inputs:n,callbacks:S,components:fa,meta:a.meta,children:(0,FB.jsx)(gG,
Ke({},a))})}function pf(){pf=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var n=arguments[d],S;for(S in n)Object.prototype.hasOwnProperty.call(n,S)&&(a[S]=n[S])}return a};return pf.apply(this,arguments)}function Ng(a,d,{checkForDefaultPrevented:n=!0}={}){return function(S){null===a||void 0===a||a(S);if(!1===n||!S.defaultPrevented)return null===d||void 0===d?void 0:d(S)}}function zh(...a){return d=>a.forEach(n=>{"function"===typeof n?n(d):null!==n&&void 0!==n&&
(n.current=d)})}function $h(...a){return(0,pG.useCallback)(zh(...a),a)}function Ci(a,d=[]){let n=[];const S=()=>{const fa=n.map(la=>(0,Vs.createContext)(la));return function(la){const va=(null===la||void 0===la?void 0:la[a])||fa;return(0,Vs.useMemo)(()=>({[`__scope${a}`]:ag(Ke({},la),{[a]:va})}),[la,va])}};S.scopeName=a;return[function(fa,la){function va(qb){const {scope:xb,children:Eb}=qb,jc=yg(qb,["scope","children"]);qb=(null===xb||void 0===xb?void 0:xb[a][cb])||Na;const oc=(0,Vs.useMemo)(()=>
jc,Object.values(jc));return(0,Vs.createElement)(qb.Provider,{value:oc},Eb)}const Na=(0,Vs.createContext)(la),cb=n.length;n=[...n,la];va.displayName=fa+"Provider";return[va,function(qb,xb){if(xb=(0,Vs.useContext)((null===xb||void 0===xb?void 0:xb[a][cb])||Na))return xb;if(void 0!==la)return la;throw Error(`\`${qb}\` must be used within \`${fa}\``);}]},gl(S,...d)]}function gl(...a){const d=a[0];if(1===a.length)return d;const n=()=>{const S=a.map(fa=>({useScope:fa(),scopeName:fa.scopeName}));return function(fa){const la=
S.reduce((va,{useScope:Na,scopeName:cb})=>{Na=Na(fa)[`__scope${cb}`];return Ke(Ke({},va),Na)},{});return(0,Vs.useMemo)(()=>({[`__scope${d.scopeName}`]:la}),[la])}};n.scopeName=d.scopeName;return n}function xh(a){return(0,mn.isValidElement)(a)&&a.type===GB}function im(a,d){const n=Ke({},d);for(const S in d){const fa=a[S],la=d[S];/^on[A-Z]/.test(S)?fa&&la?n[S]=(...va)=>{la(...va);fa(...va)}:fa&&(n[S]=fa):"style"===S?n[S]=Ke(Ke({},fa),la):"className"===S&&(n[S]=[fa,la].filter(Boolean).join(" "))}return Ke(Ke({},
a),n)}function Sl(a,d){a&&(0,qG.flushSync)(()=>a.dispatchEvent(d))}function Mj(a){const d=(0,Xx.useRef)(a);(0,Xx.useEffect)(()=>{d.current=a});return(0,Xx.useMemo)(()=>(...n)=>{var S;return null===(S=d.current)||void 0===S?void 0:S.call(d,...n)},[])}function Vk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Mj(a);(0,rG.useEffect)(()=>{const S=fa=>{"Escape"===fa.key&&n(fa)};d.addEventListener("keydown",S);return()=>d.removeEventListener("keydown",S)},[n,d])}function ck(a,
d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Mj(a),S=(0,ko.useRef)(!1),fa=(0,ko.useRef)(()=>{});(0,ko.useEffect)(()=>{const la=Na=>{if(Na.target&&!S.current){let cb=function(){lk("dismissableLayer.pointerDownOutside",n,qb,{discrete:!0})};const qb={originalEvent:Na};"touch"===Na.pointerType?(d.removeEventListener("click",fa.current),fa.current=cb,d.addEventListener("click",fa.current,{once:!0})):cb()}S.current=!1},va=window.setTimeout(()=>{d.addEventListener("pointerdown",
la)},0);return()=>{window.clearTimeout(va);d.removeEventListener("pointerdown",la);d.removeEventListener("click",fa.current)}},[d,n]);return{onPointerDownCapture:()=>S.current=!0}}function Dk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Mj(a),S=(0,ko.useRef)(!1);(0,ko.useEffect)(()=>{const fa=la=>{la.target&&!S.current&&lk("dismissableLayer.focusOutside",n,{originalEvent:la},{discrete:!1})};d.addEventListener("focusin",fa);return()=>d.removeEventListener("focusin",
fa)},[d,n]);return{onFocusCapture:()=>S.current=!0,onBlurCapture:()=>S.current=!1}}function Tl(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function lk(a,d,n,{discrete:S}){const fa=n.originalEvent.target;n=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:n});d&&fa.addEventListener(a,d,{once:!0});S?Sl(fa,n):fa.dispatchEvent(n)}function Ki(a){const [d,n]=IB.useState(uG());Vm(()=>{a||n(S=>null!==S&&void 0!==S?S:String(vG++))},[a]);return a||(d?`radix-${d}`:"")}function Si(a){return a.split("-")[0]}
function Jk(a){return["top","bottom"].includes(Si(a))?"x":"y"}function jm(a){return"y"===a?"height":"width"}function rl(a,d,n){let {reference:S,floating:fa}=a;var la=S.x+S.width/2-fa.width/2;const va=S.y+S.height/2-fa.height/2;a=Jk(d);var Na=jm(a);Na=S[Na]/2-fa[Na]/2;const cb="x"===a;switch(Si(d)){case "top":la={x:la,y:S.y-fa.height};break;case "bottom":la={x:la,y:S.y+S.height};break;case "right":la={x:S.x+S.width,y:va};break;case "left":la={x:S.x-fa.width,y:va};break;default:la={x:S.x,y:S.y}}switch(d.split("-")[1]){case "start":la[a]-=
Na*(n&&cb?-1:1);break;case "end":la[a]+=Na*(n&&cb?-1:1)}return la}function Om(a){return"number"!=typeof a?Ke({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function zm(a){return ag(Ke({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function zl(a,d){return Mi(this,null,function*(){var n;void 0===d&&(d={});const {x:S,y:fa,platform:la,rects:va,elements:Na,strategy:cb}=a,{boundary:qb="clippingAncestors",rootBoundary:xb="viewport",elementContext:Eb="floating",altBoundary:jc=
!1,padding:oc=0}=d,hc=Om(oc),Rc=Na[jc?"floating"===Eb?"reference":"floating":Eb],hd=zm(yield la.getClippingRect({element:null==(n=yield null==la.isElement?void 0:la.isElement(Rc))||n?Rc:Rc.contextElement||(yield null==la.getDocumentElement?void 0:la.getDocumentElement(Na.floating)),boundary:qb,rootBoundary:xb,strategy:cb}));n=zm(la.convertOffsetParentRelativeRectToViewportRelativeRect?yield la.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===Eb?ag(Ke({},va.floating),{x:S,y:fa}):
va.reference,offsetParent:yield null==la.getOffsetParent?void 0:la.getOffsetParent(Na.floating),strategy:cb}):va[Eb]);return{top:hd.top-n.top+hc.top,bottom:n.bottom-hd.bottom+hc.bottom,left:hd.left-n.left+hc.left,right:n.right-hd.right+hc.right}})}function sl(a){return a.replace(/left|right|bottom|top/g,d=>xG[d])}function Wk(a,d,n){void 0===n&&(n=!1);const S=a.split("-")[1],fa=Jk(a);a=jm(fa);n="x"===fa?S===(n?"end":"start")?"right":"left":"start"===S?"bottom":"top";return d.reference[a]>d.floating[a]&&
(n=sl(n)),{main:n,cross:sl(n)}}function zj(a){return a.replace(/start|end/g,d=>yG[d])}function Kk(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function nk(a){return KB.some(d=>0<=a[d])}function Xk(a){return null==a?window:a&&a.document&&a.location&&a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function Nj(a){return Xk(a).getComputedStyle(a)}function fj(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||
"").toLowerCase():""}function Rj(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function tk(a){return a instanceof Xk(a).HTMLElement}function ek(a){return a instanceof Xk(a).Element}function rk(a){return"undefined"==typeof ShadowRoot?!1:a instanceof Xk(a).ShadowRoot||a instanceof ShadowRoot}function Gj(a){const {overflow:d,overflowX:n,overflowY:S}=Nj(a);return/auto|scroll|overlay|hidden/.test(d+S+n)}function ul(a){const d=
/firefox/i.test(Rj());a=Nj(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function ml(){return!/^((?!chrome|android).)*safari/i.test(Rj())}function Zj(a,d,n){var S,fa,la,va;void 0===d&&(d=!1);void 0===n&&(n=!1);var Na=a.getBoundingClientRect();let cb=1,qb=1;d&&tk(a)&&(cb=0<a.offsetWidth&&jw(Na.width)/a.offsetWidth||1,qb=0<a.offsetHeight&&jw(Na.height)/a.offsetHeight||
1);a=ek(a)?Xk(a):window;d=!ml()&&n;n=(Na.left+(d&&null!=(S=null==(fa=a.visualViewport)?void 0:fa.offsetLeft)?S:0))/cb;S=(Na.top+(d&&null!=(la=null==(va=a.visualViewport)?void 0:va.offsetTop)?la:0))/qb;la=Na.width/cb;Na=Na.height/qb;return{width:la,height:Na,top:S,right:n+la,bottom:S+Na,left:n,x:n,y:S}}function Ak(a){return(d=a,(d instanceof Xk(d).Node?a.ownerDocument:a.document)||window.document).documentElement;var d}function Pm(a){return ek(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,
scrollTop:a.pageYOffset}}function fo(a){return Zj(Ak(a)).left+Pm(a).scrollLeft}function Jj(a){return"html"===fj(a)?a:a.assignedSlot||a.parentNode||(rk(a)?a.host:null)||Ak(a)}function Xj(a){return tk(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}function fk(a){for(var d=Xk(a),n=Xj(a);n&&["table","td","th"].includes(fj(n))&&"static"===getComputedStyle(n).position;)n=Xj(n);if(!n||"html"!==fj(n)&&("body"!==fj(n)||"static"!==getComputedStyle(n).position||ul(n))){if(!n)a:{a=Jj(a);for(rk(a)&&
(a=a.host);tk(a)&&!["html","body"].includes(fj(a));){if(ul(a)){n=a;break a}a=a.parentNode}n=null}d=n||d}return d}function Rk(a){if(tk(a))return{width:a.offsetWidth,height:a.offsetHeight};a=Zj(a);return{width:a.width,height:a.height}}function km(a){const d=Jj(a);return["html","body","#document"].includes(fj(d))?a.ownerDocument.body:tk(d)&&Gj(d)?d:km(d)}function Ul(a,d){var n;void 0===d&&(d=[]);var S=km(a);a=S===(null==(n=a.ownerDocument)?void 0:n.body);n=Xk(S);S=a?[n].concat(n.visualViewport||[],Gj(S)?
S:[]):S;d=d.concat(S);return a?d:d.concat(Ul(S))}function Nn(a,d,n){return"viewport"===d?zm(function(S,fa){var la=Xk(S),va=Ak(S);la=la.visualViewport;S=va.clientWidth;va=va.clientHeight;let Na=0,cb=0;if(la){S=la.width;va=la.height;const qb=ml();(qb||!qb&&"fixed"===fa)&&(Na=la.offsetLeft,cb=la.offsetTop)}return{width:S,height:va,x:Na,y:cb}}(a,n)):ek(d)?function(S,fa){var la=Zj(S,!1,"fixed"===fa);fa=la.top+S.clientTop;la=la.left+S.clientLeft;return{top:fa,left:la,x:la,y:fa,right:la+S.clientWidth,bottom:fa+
S.clientHeight,width:S.clientWidth,height:S.clientHeight}}(d,n):zm(function(S){var fa;const la=Ak(S);var va=Pm(S);const Na=null==(fa=S.ownerDocument)?void 0:fa.body;fa=Zu(la.scrollWidth,la.clientWidth,Na?Na.scrollWidth:0,Na?Na.clientWidth:0);const cb=Zu(la.scrollHeight,la.clientHeight,Na?Na.scrollHeight:0,Na?Na.clientHeight:0);S=-va.scrollLeft+fo(S);va=-va.scrollTop;return"rtl"===Nj(Na||la).direction&&(S+=Zu(la.clientWidth,Na?Na.clientWidth:0)-fa),{width:fa,height:cb,x:S,y:va}}(Ak(a)))}function Co(a){const d=
Ul(a),n=["absolute","fixed"].includes(Nj(a).position)&&tk(a)?fk(a):a;return ek(n)?d.filter(S=>{var fa;if(fa=ek(S))a:if(fa=null==n.getRootNode?void 0:n.getRootNode(),S.contains(n))fa=!0;else{if(fa&&rk(fa)){fa=n;do{if(fa&&S===fa){fa=!0;break a}fa=fa.parentNode||fa.host}while(fa)}fa=!1}return fa&&"body"!==fj(S)}):[]}function vc(a,d,n,S){void 0===S&&(S={});const {ancestorScroll:fa=!0,ancestorResize:la=!0,elementResize:va=!0,animationFrame:Na=!1}=S,cb=fa&&!Na,qb=la&&!Na,xb=cb||qb?[...(ek(a)?Ul(a):[]),
...Ul(d)]:[];xb.forEach(hc=>{cb&&hc.addEventListener("scroll",n,{passive:!0});qb&&hc.addEventListener("resize",n)});let Eb,jc=null;if(va){let hc=!0;jc=new ResizeObserver(()=>{hc||n();hc=!1});ek(a)&&!Na&&jc.observe(a);jc.observe(d)}let oc=Na?Zj(a):null;return Na&&function Rc(){const hd=Zj(a);!oc||hd.x===oc.x&&hd.y===oc.y&&hd.width===oc.width&&hd.height===oc.height||n();oc=hd;Eb=requestAnimationFrame(Rc)}(),n(),()=>{var Rc;xb.forEach(hd=>{cb&&hd.removeEventListener("scroll",n);qb&&hd.removeEventListener("resize",
n)});null==(Rc=jc)||Rc.disconnect();jc=null;Na&&cancelAnimationFrame(Eb)}}function Ka(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let n,S;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var fa=a.length;if(fa!=d.length)return!1;for(n=fa;0!==n--;)if(!Ka(a[n],d[n]))return!1;return!0}S=Object.keys(a);fa=S.length;if(fa!==Object.keys(d).length)return!1;for(n=fa;0!==n--;)if(!Object.prototype.hasOwnProperty.call(d,S[n]))return!1;
for(n=fa;0!==n--;)if(fa=S[n],!("_owner"===fa&&a.$$typeof||Ka(a[fa],d[fa])))return!1;return!0}return a!==a&&d!==d}function Fc(a){const d=No.useRef(a);$x(()=>{d.current=a});return d}function Bc(a){let {middleware:d,placement:n="bottom",strategy:S="absolute",whileElementsMounted:fa}=void 0===a?{}:a;const la=No.useRef(null),va=No.useRef(null),Na=Fc(fa),cb=No.useRef(null),[qb,xb]=No.useState({x:null,y:null,strategy:S,placement:n,middlewareData:{}}),[Eb,jc]=No.useState(d);Ka(null==Eb?void 0:Eb.map(Uc=>
{({options:Uc}=Uc);return Uc}),null==d?void 0:d.map(Uc=>{({options:Uc}=Uc);return Uc}))||jc(d);const oc=No.useCallback(()=>{la.current&&va.current&&BG(la.current,va.current,{middleware:Eb,placement:n,strategy:S}).then(Uc=>{hc.current&&CG.flushSync(()=>{xb(Uc)})})},[Eb,n,S]);$x(()=>{hc.current&&oc()},[oc]);const hc=No.useRef(!1);$x(()=>{hc.current=!0;return()=>{hc.current=!1}},[]);const Rc=No.useCallback(()=>{"function"===typeof cb.current&&(cb.current(),cb.current=null);if(la.current&&va.current)if(Na.current){const Uc=
Na.current(la.current,va.current,oc);cb.current=Uc}else oc()},[oc,Na]),hd=No.useCallback(Uc=>{la.current=Uc;Rc()},[Rc]),zc=No.useCallback(Uc=>{va.current=Uc;Rc()},[Rc]),$c=No.useMemo(()=>({reference:la,floating:va}),[]);return No.useMemo(()=>ag(Ke({},qb),{update:oc,refs:$c,reference:hd,floating:zc}),[qb,oc,$c,hd,zc])}function Vb(a){const [d,n]=(0,EG.useState)(void 0);Vm(()=>{if(a){n({width:a.offsetWidth,height:a.offsetHeight});const S=new ResizeObserver(fa=>{if(Array.isArray(fa)&&fa.length){fa=fa[0];
if("borderBoxSize"in fa){fa=fa.borderBoxSize;var la=Array.isArray(fa)?fa[0]:fa;fa=la.inlineSize;la=la.blockSize}else fa=a.offsetWidth,la=a.offsetHeight;n({width:fa,height:la})}});S.observe(a,{box:"border-box"});return()=>S.unobserve(a)}n(void 0)},[a]);return d}function Pc(a){return void 0!==a}function sc(a){return null!==a}function Zb(a){const [d,n="center"]=a.split("-");return[d,n]}function Wb(a,d){return(0,Qq.useReducer)((n,S)=>{S=d[n][S];return null!==S&&void 0!==S?S:n},a)}function Dc(a){const [d,
n]=(0,Qq.useState)(),S=(0,Qq.useRef)({}),fa=(0,Qq.useRef)(a),la=(0,Qq.useRef)("none"),[va,Na]=Wb(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Qq.useEffect)(()=>{const cb=gd(S.current);la.current="mounted"===va?cb:"none"},[va]);Vm(()=>{const cb=S.current,qb=fa.current;if(qb!==a){const xb=la.current,Eb=gd(cb);a?Na("MOUNT"):"none"===Eb||"none"===(null===cb||void 0===
cb?void 0:cb.display)?Na("UNMOUNT"):qb&&xb!==Eb?Na("ANIMATION_OUT"):Na("UNMOUNT");fa.current=a}},[a,Na]);Vm(()=>{if(d){const cb=xb=>{const Eb=gd(S.current).includes(xb.animationName);xb.target===d&&Eb&&(0,OG.flushSync)(()=>Na("ANIMATION_END"))},qb=xb=>{xb.target===d&&(la.current=gd(S.current))};d.addEventListener("animationstart",qb);d.addEventListener("animationcancel",cb);d.addEventListener("animationend",cb);return()=>{d.removeEventListener("animationstart",qb);d.removeEventListener("animationcancel",
cb);d.removeEventListener("animationend",cb)}}Na("ANIMATION_END")},[d,Na]);return{isPresent:["mounted","unmountSuspended"].includes(va),ref:(0,Qq.useCallback)(cb=>{cb&&(S.current=getComputedStyle(cb));n(cb)},[])}}function gd(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}function pd({prop:a,defaultProp:d,onChange:n=()=>{}}){const [S,fa]=Gd({defaultProp:d,onChange:n}),la=void 0!==a;d=la?a:S;const va=Mj(n);n=(0,kw.useCallback)(Na=>{la?(Na="function"===typeof Na?Na(a):Na,Na!==a&&va(Na)):
fa(Na)},[la,a,fa,va]);return[d,n]}function Gd({defaultProp:a,onChange:d}){a=(0,kw.useState)(a);const [n]=a,S=(0,kw.useRef)(n),fa=Mj(d);(0,kw.useEffect)(()=>{S.current!==n&&(fa(n),S.current=n)},[n,S,fa]);return a}function Md(a,d){const n=Math.abs(d.top-a.y),S=Math.abs(d.bottom-a.y),fa=Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(n,S,fa,a)){case a:return"left";case fa:return"right";case n:return"top";case S:return"bottom";default:return null}}function Ld(a){a=a.slice();a.sort((d,n)=>
d.x<n.x?-1:d.x>n.x?1:d.y<n.y?-1:d.y>n.y?1:0);return pe(a)}function pe(a){if(1>=a.length)return a.slice();const d=[];for(var n=0;n<a.length;n++){for(var S=a[n];2<=d.length;){var fa=d[d.length-1],la=d[d.length-2];if((fa.x-la.x)*(S.y-la.y)>=(fa.y-la.y)*(S.x-la.x))d.pop();else break}d.push(S)}d.pop();n=[];for(S=a.length-1;0<=S;S--){for(fa=a[S];2<=n.length;){la=n[n.length-1];const va=n[n.length-2];if((la.x-va.x)*(fa.y-va.y)>=(la.y-va.y)*(fa.x-va.x))n.pop();else break}n.push(fa)}n.pop();return 1===d.length&&
1===n.length&&d[0].x===n[0].x&&d[0].y===n[0].y?d:d.concat(n)}function Le(a){var {side:d,content:n,sideOffset:S=10}=a;a=yg(a,["side","content","sideOffset"]);return n?(0,Pr.jsx)($G,{delayDuration:300,children:(0,Pr.jsxs)(aH,{children:[(0,Pr.jsx)(bH,{asChild:!0,children:a.children}),(0,Pr.jsx)(cH,{children:(0,Pr.jsxs)(dH,ag(Ke({className:"tl-tooltip-content",sideOffset:S,side:d},a),{children:[n,(0,Pr.jsx)(eH,{className:"tl-tooltip-arrow"})]}))})]})}):(0,Pr.jsx)(Pr.Fragment,{children:a.children})}function Ge(a){var {className:d,
tooltip:n,tooltipSide:S}=a;a=yg(a,["className","tooltip","tooltipSide"]);return(0,YB.jsx)(Le,{content:n,side:S,children:(0,YB.jsx)("button",Ke({className:"tl-button "+(null!=d?d:"")},a))})}function nf(a){var {toggle:d=!0,pressed:n,onPressedChange:S,className:fa,tooltip:la}=a;a=yg(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,hy.jsx)(Le,{content:la,children:(0,hy.jsx)("div",{className:"inline-block",children:(0,hy.jsx)(gH,ag(Ke({},a),{"data-toggle":d,className:"tl-toggle-input"+
(fa?" "+fa:""),pressed:n,onPressedChange:S}))})})}function bh(a){var d=a+"CollectionProvider";const [n,S]=Ci(d),[fa,la]=n(d,{collectionRef:{current:null},itemMap:new Map}),va=xb=>{const {scope:Eb,children:jc}=xb;xb=mq.default.useRef(null);const oc=mq.default.useRef(new Map).current;return mq.default.createElement(fa,{scope:Eb,itemMap:oc,collectionRef:xb},jc)};Object.assign(va,{displayName:d});const Na=a+"CollectionSlot";d=mq.default.forwardRef((xb,Eb)=>{const {scope:jc,children:oc}=xb;xb=la(Na,jc);
Eb=$h(Eb,xb.collectionRef);return mq.default.createElement(lq,{ref:Eb},oc)});Object.assign(d,{displayName:Na});const cb=a+"CollectionItemSlot",qb=mq.default.forwardRef((xb,Eb)=>{const {scope:jc,children:oc}=xb,hc=yg(xb,["scope","children"]),Rc=mq.default.useRef(null);xb=$h(Eb,Rc);const hd=la(cb,jc);mq.default.useEffect(()=>{hd.itemMap.set(Rc,Ke({ref:Rc},hc));return()=>void hd.itemMap.delete(Rc)});return mq.default.createElement(lq,{["data-radix-collection-item"]:"",ref:xb},oc)});Object.assign(qb,
{displayName:cb});return[{Provider:va,Slot:d,ItemSlot:qb},function(xb){const Eb=la(a+"CollectionConsumer",xb);return mq.default.useCallback(()=>{const jc=Eb.collectionRef.current;if(!jc)return[];const oc=Array.from(jc.querySelectorAll("[data-radix-collection-item]"));return Array.from(Eb.itemMap.values()).sort((hc,Rc)=>oc.indexOf(hc.ref.current)-oc.indexOf(Rc.ref.current))},[Eb.collectionRef,Eb.itemMap])},S]}function ph(a){const d=(0,aC.useContext)(hH);return a||d||"ltr"}function Eg(){(0,iH.useEffect)(()=>
{var a,d;const n=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=n[0])&&void 0!==a?a:Sg());document.body.insertAdjacentElement("beforeend",null!==(d=n[1])&&void 0!==d?d:Sg());iy++;return()=>{1===iy&&document.querySelectorAll("[data-radix-focus-guard]").forEach(S=>S.remove());iy--}},[])}function Sg(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";
return a}function Sf(a,{select:d=!1}={}){const n=document.activeElement;for(const S of a)if($f(S,{select:d}),document.activeElement!==n)break}function Wf(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const S="INPUT"===n.tagName&&"hidden"===n.type;return n.disabled||n.hidden||S?NodeFilter.FILTER_SKIP:0<=n.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function th(a,d){for(const n of a)if(!fh(n,{upTo:d}))return n}
function fh(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function $f(a,{select:d=!1}={}){if(a&&a.focus){const n=document.activeElement;a.focus({preventScroll:!0});a!==n&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function ci(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function wi(a){return a.filter(d=>"A"!==d.tagName)}function Pi(a,d,n){a=
a.key;n="rtl"!==n?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(n))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(n))return pH[n]}function Fh(a){const d=document.activeElement;for(const n of a){if(n===d)break;n.focus();if(document.activeElement!==d)break}}function uh(a,d){return a.map((n,S)=>a[(d+S)%a.length])}function Ei(a,d){var n=(0,sH.useState)(function(){return{value:a,callback:d,facade:{get current(){return n.value},
set current(S){var fa=n.value;fa!==S&&(n.value=S,n.callback(S,fa))}}}})[0];n.callback=d;return n.facade}function ak(a,d){return Ei(d||null,function(n){return a.forEach(function(S){"function"===typeof S?S(n):S&&(S.current=n);return S})})}function an(a){return a}function Nl(a,d){void 0===d&&(d=an);var n=[],S=!1;return{read:function(){if(S)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:a},useMedium:function(fa){var la=
d(fa,S);n.push(la);return function(){n=n.filter(function(va){return va!==la})}},assignSyncMedium:function(fa){for(S=!0;n.length;){var la=n;n=[];la.forEach(fa)}n={push:function(va){return fa(va)},filter:function(){return n}}},assignMedium:function(fa){S=!0;var la=[];if(n.length){var va=n;n=[];va.forEach(fa);la=n}var Na=function(){var cb=la;la=[];cb.forEach(fa)};Promise.resolve().then(Na);n={push:function(cb){la.push(cb);Promise.resolve().then(Na)},filter:function(cb){la=la.filter(cb);return n}}}}}
function go(a){const d=document.activeElement;for(const n of a){if(n===d)break;n.focus();if(document.activeElement!==d)break}}function Ol(a,d){return a.map((n,S)=>a[(d+S)%a.length])}function gk(a,d,n){const S=1<d.length&&Array.from(d).every(la=>la===d[0])?d[0]:d,fa=n?a.indexOf(n):-1;a=Ol(a,Math.max(fa,0));1===S.length&&(a=a.filter(la=>la!==n));a=a.find(la=>la.toLowerCase().startsWith(S.toLowerCase()));return a!==n?a:void 0}function uo(a){return d=>"mouse"===d.pointerType?a(d):void 0}function to(a,
[d,n]){return Math.min(n,Math.max(d,a))}function Ln(a){const d=(0,Ay.useRef)({value:a,previous:a});return(0,Ay.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function Uj(a=[],d,n){a=[...a];a[n]=d;return a.sort((S,fa)=>S-fa)}function wj(a,d,n){return 100/(n-d)*(a-d)}function vl(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function Aq(a,d){if(1===a.length)return 0;a=a.map(S=>Math.abs(S-d));
const n=Math.min(...a);return a.indexOf(n)}function cm(a,d,n){a/=2;const S=wn([0,50],[0,a]);return(a-S(d)*n)*n}function Qm(a){return a.slice(0,-1).map((d,n)=>a[n+1]-d)}function wn(a,d){return n=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(n-a[0])}function xn(a,d){d=Math.pow(10,d);return Math.round(a*d)/d}function en(a){function d(qb){return qb?(0,sm.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:qb},children:(0,sm.jsx)("div",{className:`w-full h-full bg-${qb}-500`})}):
(0,sm.jsx)("div",{className:"tl-color-bg",children:(0,sm.jsx)(pi,{name:"color-swatch"})})}var {color:n,opacity:S,popoverSide:fa,setColor:la,setOpacity:va}=a;a=yg(a,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:Na}}=Ur.default.useContext(Qj),cb=Ur.default.useMemo(()=>{let qb="";return Pg(xb=>{la(qb)},100,xb=>{qb=xb.target.value})},[]);return(0,sm.jsx)(vf,ag(Ke({},a),{border:!0,arrow:!0,side:fa,label:(0,sm.jsx)(Le,{content:Na("whiteboard/color"),side:fa,sideOffset:14,
children:d(n)}),children:(0,sm.jsxs)("div",{className:"p-1",children:[(0,sm.jsx)("div",{className:"tl-color-palette",children:Object.values(Ns).map(qb=>(0,sm.jsx)("button",{className:`tl-color-drip m-1${qb===n?" active":""}`,onClick:()=>la(qb),children:d(qb)},qb))}),(0,sm.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,sm.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${Gf(n)?"":"active"}`,children:(0,sm.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,sm.jsx)("input",
Ke({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(n)?n:"#000000",onChange:cb,style:{opacity:Gf(n)?0:1}},a))})}),(0,sm.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:Na("whiteboard/select-custom-color")})]}),va&&(0,sm.jsx)("div",{className:"mx-1 my-2",children:(0,sm.jsxs)(lv,{defaultValue:[null!=S?S:0],onValueCommit:qb=>va(qb[0]),max:1,step:.1,"aria-label":Na("whiteboard/opacity"),className:"tl-slider-root",
children:[(0,sm.jsx)(Nk,{className:"tl-slider-track",children:(0,sm.jsx)(rq,{className:"tl-slider-range"})}),(0,sm.jsx)(Ef,{className:"tl-slider-thumb"})]})})]})}))}function sj(a,d){a&&(0,Vr.flushSync)(()=>a.dispatchEvent(d))}function zo(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Mj(a),S=(0,Gn.useRef)(!1),fa=(0,Gn.useRef)(()=>{});(0,Gn.useEffect)(()=>{const la=Na=>{if(Na.target&&!S.current){let cb=function(){Mm("dismissableLayer.pointerDownOutside",n,qb,{discrete:!0})};
const qb={originalEvent:Na};"touch"===Na.pointerType?(d.removeEventListener("click",fa.current),fa.current=cb,d.addEventListener("click",fa.current,{once:!0})):cb()}S.current=!1},va=window.setTimeout(()=>{d.addEventListener("pointerdown",la)},0);return()=>{window.clearTimeout(va);d.removeEventListener("pointerdown",la);d.removeEventListener("click",fa.current)}},[d,n]);return{onPointerDownCapture:()=>S.current=!0}}function em(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=
Mj(a),S=(0,Gn.useRef)(!1);(0,Gn.useEffect)(()=>{const fa=la=>{la.target&&!S.current&&Mm("dismissableLayer.focusOutside",n,{originalEvent:la},{discrete:!1})};d.addEventListener("focusin",fa);return()=>d.removeEventListener("focusin",fa)},[d,n]);return{onFocusCapture:()=>S.current=!0,onBlurCapture:()=>S.current=!1}}function ym(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function Mm(a,d,n,{discrete:S}){const fa=n.originalEvent.target;n=new CustomEvent(a,{bubbles:!1,
cancelable:!0,detail:n});d&&fa.addEventListener(a,d,{once:!0});S?sj(fa,n):fa.dispatchEvent(n)}function Mn(a,{select:d=!1}={}){const n=document.activeElement;for(const S of a)if(dm(S,{select:d}),document.activeElement!==n)break}function ho(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const S="INPUT"===n.tagName&&"hidden"===n.type;return n.disabled||n.hidden||S?NodeFilter.FILTER_SKIP:0<=n.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);
return d}function vn(a,d){for(const n of a)if(!Km(n,{upTo:d}))return n}function Km(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function dm(a,{select:d=!1}={}){if(a&&a.focus){const n=document.activeElement;a.focus({preventScroll:!0});a!==n&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function un(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function wo(a){return a.filter(d=>
"A"!==d.tagName)}function xo(a){return void 0!==a}function Rh(a){return null!==a}function Ao(a){const [d,n="center"]=a.split("-");return[d,n]}function hm(a){const d=Mj(a),n=(0,lg.useRef)(""),S=(0,lg.useRef)(0);a=(0,lg.useCallback)(la=>{la=n.current+la;d(la);(function cb(Na){n.current=Na;window.clearTimeout(S.current);""!==Na&&(S.current=window.setTimeout(()=>cb(""),1E3))})(la)},[d]);const fa=(0,lg.useCallback)(()=>{n.current="";window.clearTimeout(S.current)},[]);(0,lg.useEffect)(()=>()=>window.clearTimeout(S.current),
[]);return[n,a,fa]}function Rl(a,d,n){const S=1<d.length&&Array.from(d).every(la=>la===d[0])?d[0]:d,fa=n?a.indexOf(n):-1;a=wl(a,Math.max(fa,0));1===S.length&&(a=a.filter(la=>la!==n));a=a.find(la=>la.textValue.toLowerCase().startsWith(S.toLowerCase()));return a!==n?a:void 0}function wl(a,d){return a.map((n,S)=>a[(d+S)%a.length])}function gn(a){var {options:d,tooltip:n,popoverSide:S,chevron:fa=!0,value:la,onValueChange:va}=a;a=yg(a,"options tooltip popoverSide chevron value onValueChange".split(" "));
const [Na,cb]=Fy.useState(!1);return(0,In.jsx)("div",ag(Ke({},a),{className:"tl-select-input",children:(0,In.jsxs)(OC,{open:Na,onOpenChange:cb,value:la,onValueChange:va,children:[(0,In.jsx)(Le,{content:n,side:S,children:(0,In.jsxs)(QC,{className:"tl-select-input-trigger",children:[(0,In.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,In.jsx)(RC,{})}),fa&&(0,In.jsx)(Wm,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,In.jsx)(pi,{name:Na?"chevron-up":"chevron-down"})})]})}),
(0,In.jsx)(My,{className:"tl-select-input-portal",children:(0,In.jsxs)(PC,{className:"tl-select-input-content",side:S,position:"popper",sideOffset:14,align:"center",onKeyDown:qb=>qb.stopPropagation(),children:[(0,In.jsx)(Ui,{}),(0,In.jsx)(oo,{className:"tl-select-input-viewport",children:d.map(qb=>(0,In.jsx)(ge,{className:"tl-select-input-select-item",value:qb.value,children:(0,In.jsx)(SC,{children:qb.label})},qb.value))}),(0,In.jsx)($i,{})]})})]})}))}function $o(a){var {scaleLevel:d,compact:n,popoverSide:S}=
a;yg(a,["scaleLevel","compact","popoverSide"]);const fa=df();({handlers:{t:a}}=rv.default.useContext(Qj));const la=[{label:n?"XS":a("whiteboard/extra-small"),value:"xs"},{label:n?"SM":a("whiteboard/small"),value:"sm"},{label:n?"MD":a("whiteboard/medium"),value:"md"},{label:n?"LG":a("whiteboard/large"),value:"lg"},{label:n?"XL":a("whiteboard/extra-large"),value:"xl"},{label:n?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,Cw.jsx)(gn,{tooltip:a("whiteboard/scale-level"),options:la,value:d,popoverSide:S,
chevron:!n,onValueChange:va=>{fa.api.setScaleLevel(va)}})}function fn(a,d){return function(n){return a(d(n))}}function vo(a,d){return d(a)}function bn(a,d){return function(n){return a(d,n)}}function Pl(a,d){return function(){return a(d)}}function Lj(a,d){d(a);return a}function Oj(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];return d}function Nm(a){a()}function Vp(a){return function(){return a}}function Dq(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];
return function(){d.map(Nm)}}function lj(){}function li(a,d){return a(1,d)}function Up(a,d){a(0,d)}function Es(a){a(2)}function Bo(a){return a(4)}function Rg(a,d){return li(a,bn(d,0))}function ql(a,d){var n=a(1,function(S){n();d(S)});return n}function Gh(){var a=[];return function(d,n){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(n),function(){var S=a.indexOf(n);-1<S&&a.splice(S,1)};case 0:a.slice().forEach(function(S){S(n)});break;default:throw Error("unrecognized action "+d);
}}}function Og(a){var d=a,n=Gh();return function(S,fa){switch(S){case 1:fa(d);break;case 0:d=fa;break;case 4:return d}return n(S,fa)}}function yn(a){var d,n;return function(S,fa){switch(S){case 1:if(fa){if(n===fa)break;d&&d();n=fa;return d=a(1,fa)}d&&d();return lj;case 2:d&&d();n=null;break;default:throw Error("unrecognized action "+S);}}}function hl(a){return Lj(Gh(),function(d){return Rg(a,d)})}function mk(a,d){return Lj(Og(d),function(n){return Rg(a,n)})}function lm(){for(var a=arguments.length,
d=Array(a),n=0;n<a;n++)d[n]=arguments[n];return function(S){return d.reduceRight(vo,S)}}function vg(a){for(var d=arguments.length,n=Array(1<d?d-1:0),S=1;S<d;S++)n[S-1]=arguments[S];var fa=lm.apply(void 0,n);return function(la,va){switch(la){case 1:return li(a,fa(va));case 2:a(2);break;default:throw Error("unrecognized action "+la);}}}function Am(a,d){return a===d}function Li(a){void 0===a&&(a=Am);var d;return function(n){return function(S){a(d,S)||(d=S,n(S))}}}function gh(a){return function(d){return function(n){a(n)&&
d(n)}}}function hh(a){return function(d){return fn(d,a)}}function On(a){return function(d){return function(){return d(a)}}}function Ek(a,d){return function(n){return function(S){return n(d=a(d,S))}}}function mm(a){return function(d){return function(n){0<a?a--:d(n)}}}function hn(a){var d,n;return function(S){return function(fa){d=fa;n||=setTimeout(function(){n=void 0;S(d)},a)}}}function hk(a){var d,n;return function(S){return function(fa){d=fa;n&&clearTimeout(n);n=setTimeout(function(){S(d)},a)}}}
function xi(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];var S=Array(d.length),fa=0,la=null,va=Math.pow(2,d.length)-1;d.forEach(function(Na,cb){var qb=Math.pow(2,cb);li(Na,function(xb){var Eb=fa;fa|=qb;S[cb]=xb;Eb!==va&&fa===va&&la&&(la(),la=null)})});return function(Na){return function(cb){var qb=function(){return Na([cb].concat(S))};fa===va?qb():la=qb}}}function Wp(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];return function(S,fa){switch(S){case 1:return Dq.apply(void 0,
d.map(function(la){return la(1,fa)}));case 2:break;default:throw Error("unrecognized action "+S);}}}function ui(a,d){void 0===d&&(d=Am);return vg(a,Li(d))}function uk(){for(var a=Gh(),d=arguments.length,n=Array(d),S=0;S<d;S++)n[S]=arguments[S];var fa=Array(n.length),la=0,va=Math.pow(2,n.length)-1;n.forEach(function(Na,cb){var qb=Math.pow(2,cb);li(Na,function(xb){fa[cb]=xb;la|=qb;la===va&&a(0,fa)})});return function(Na,cb){switch(Na){case 1:return la===va&&cb(fa),a(1,cb);case 2:a(2);break;default:throw Error("unrecognized action "+
Na);}}}function bj(a,d,n){void 0===d&&(d=[]);n=(void 0===n?{singleton:!0}:n).singleton;return{id:Symbol(),constructor:a,dependencies:d,singleton:n}}function vp(a){var d=new Map;return function fa(S){var la=S.id,va=S.constructor,Na=S.dependencies;if((S=S.singleton)&&d.has(la))return d.get(la);va=va(Na.map(function(cb){return fa(cb)}));S&&d.set(la,va);return va}(a)}function cp(a,d){if(null==a)return{};var n={},S=Object.keys(a),fa;for(fa=0;fa<S.length;fa++){var la=S[fa];0<=d.indexOf(la)||(n[la]=a[la])}return n}
function wp(a,d){if(a){if("string"===typeof a)return Xp(a,d);var n=Object.prototype.toString.call(a).slice(8,-1);"Object"===n&&a.constructor&&(n=a.constructor.name);if("Map"===n||"Set"===n)return Array.from(a);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xp(a,d)}}function Xp(a,d){if(null==d||d>a.length)d=a.length;for(var n=0,S=Array(d);n<d;n++)S[n]=a[n];return S}function Do(a,d){var n="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(n)return(n=n.call(a)).next.bind(n);
if(Array.isArray(a)||(n=wp(a))||d&&a&&"number"===typeof a.length){n&&(a=n);var S=0;return function(){return S>=a.length?{done:!0}:{done:!1,value:a[S++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function xp(a,d){for(var n={},S={},fa=0,la=a.length;fa<la;)S[a[fa]]=1,fa+=1;for(var va in d)S.hasOwnProperty(va)||(n[va]=d[va]);return n}function vk(a,d,n){function S(Eb,jc){Eb.propsReady&&
(0,Eb.propsReady)(0,!1);for(var oc=Do(va),hc;!(hc=oc()).done;)hc=hc.value,(0,Eb[d.required[hc]])(0,jc[hc]);for(oc=Do(Na);!(hc=oc()).done;)if(hc=hc.value,hc in jc)(0,Eb[d.optional[hc]])(0,jc[hc]);Eb.propsReady&&(0,Eb.propsReady)(0,!0)}function fa(Eb){return cb.reduce(function(jc,oc){jc[oc]=function(hc){(0,Eb[d.methods[oc]])(0,hc)};return jc},{})}function la(Eb){return qb.reduce(function(jc,oc){jc[oc]=yn(Eb[d.events[oc]]);return jc},{})}var va=Object.keys(d.required||{}),Na=Object.keys(d.optional||
{}),cb=Object.keys(d.methods||{}),qb=Object.keys(d.events||{}),xb=(0,Vn.createContext)({});return{Component:(0,Vn.forwardRef)(function(Eb,jc){var oc=Eb.children,hc=cp(Eb,Oy),Rc=(0,Vn.useState)(function(){return Lj(vp(a),function(zc){return S(zc,hc)})})[0],hd=(0,Vn.useState)(Pl(la,Rc))[0];Dw(function(){for(var zc=Do(qb),$c;!($c=zc()).done;)if($c=$c.value,$c in hc)(0,hd[$c])(1,hc[$c]);return function(){Object.values(hd).map(Es)}},[hc,hd,Rc]);Dw(function(){S(Rc,hc)});(0,Vn.useImperativeHandle)(jc,Vp(fa(Rc)));
return(0,Vn.createElement)(xb.Provider,{value:Rc},n?(0,Vn.createElement)(n,xp([].concat(va,Na,qb),hc),oc):oc)}),usePublisher:function(Eb){return(0,Vn.useCallback)(bn(Up,(0,Vn.useContext)(xb)[Eb]),[Eb])},useEmitterValue:function(Eb){var jc=(0,Vn.useContext)(xb)[Eb];Eb=(0,Vn.useState)(Pl(Bo,jc));var oc=Eb[0],hc=Eb[1];Dw(function(){return li(jc,function(Rc){Rc!==oc&&hc(Vp(Rc))})},[jc,oc]);return oc},useEmitter:function(Eb,jc){var oc=(0,Vn.useContext)(xb)[Eb];Dw(function(){return oc(1,jc)},[jc,oc])}}}
function hi(){return hi=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var n=arguments[d],S;for(S in n)Object.prototype.hasOwnProperty.call(n,S)&&(a[S]=n[S])}return a},hi.apply(this,arguments)}function Rm(a,d){if(null==a)return{};var n,S,fa={},la=Object.keys(a);for(S=0;S<la.length;S++)0<=d.indexOf(n=la[S])||(fa[n]=a[n]);return fa}function Eo(a,d){(null==d||d>a.length)&&(d=a.length);for(var n=0,S=Array(d);n<d;n++)S[n]=a[n];return S}function Sm(a,d){var n="undefined"!=typeof Symbol&&
a[Symbol.iterator]||a["@@iterator"];if(n)return(n=n.call(a)).next.bind(n);if(Array.isArray(a)||(n=function(fa,la){if(fa){if("string"==typeof fa)return Eo(fa,la);var va=Object.prototype.toString.call(fa).slice(8,-1);return"Object"===va&&fa.constructor&&(va=fa.constructor.name),"Map"===va||"Set"===va?Array.from(fa):"Arguments"===va||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(va)?Eo(fa,la):void 0}}(a))||d&&a&&"number"==typeof a.length){n&&(a=n);var S=0;return function(){return S>=a.length?{done:!0}:
{done:!1,value:a[S++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function dp(a,d){void 0===d&&(d=!0);var n=(0,aj.useRef)(null),S=function(la){};if("undefined"!=typeof ResizeObserver){var fa=new ResizeObserver(function(la){la=la[0].target;null!==la.offsetParent&&a(la)});S=function(la){la&&d?(fa.observe(la),n.current=la):(n.current&&fa.unobserve(n.current),n.current=null)}}return{ref:n,
callbackRef:S}}function ik(a,d){return void 0===d&&(d=!0),dp(a,d).callbackRef}function Aj(a,d,n,S,fa,la,va){return dp(function(Na){for(var cb=function(Eb,jc,oc,hc){oc=Eb.length;if(0===oc)return null;for(var Rc=[],hd=0;hd<oc;hd++){var zc=Eb.item(hd);if(zc&&void 0!==zc.dataset.index){var $c=parseInt(zc.dataset.index),Uc=parseFloat(zc.dataset.knownSize),td=jc(zc,"offsetHeight");if(0===td&&hc("Zero-sized element, this should not happen",{child:zc},Im.ERROR),td!==Uc)zc=Rc[Rc.length-1],0===Rc.length||zc.size!==
td||zc.endIndex!==$c-1?Rc.push({startIndex:$c,endIndex:$c,size:td}):Rc[Rc.length-1].endIndex++}}return Rc}(Na.children,d,0,fa),qb=Na.parentElement;!qb.dataset.virtuosoScroller;)qb=qb.parentElement;var xb="window"===qb.firstElementChild.dataset.viewportType;S({scrollTop:Math.max(va?va.scrollTop:xb?window.pageYOffset||document.documentElement.scrollTop:qb.scrollTop,0),scrollHeight:va?va.scrollHeight:xb?document.documentElement.scrollHeight:qb.scrollHeight,viewportHeight:va?va.offsetHeight:xb?window.innerHeight:
qb.offsetHeight});null==la||la(function(Eb,jc,oc){return"normal"===jc||null!=jc&&jc.endsWith("px")||oc("row-gap was not resolved to pixel value correctly",jc,Im.WARN),"normal"===jc?0:parseInt(null!=jc?jc:"0",10)}(0,getComputedStyle(Na).rowGap,fa));null!==cb&&a(cb)},n)}function tj(a,d){return Math.round(a.getBoundingClientRect()[d])}function Cr(a,d,n,S,fa){void 0===S&&(S=lj);var la=(0,aj.useRef)(null),va=(0,aj.useRef)(null),Na=(0,aj.useRef)(null),cb=(0,aj.useRef)(!1),qb=(0,aj.useCallback)(function(xb){xb=
xb.target;var Eb=xb===window||xb===document,jc=Eb?window.pageYOffset||document.documentElement.scrollTop:xb.scrollTop,oc=Eb?document.documentElement.scrollHeight:xb.scrollHeight,hc=Eb?window.innerHeight:xb.offsetHeight;xb=function(){a({scrollTop:Math.max(jc,0),scrollHeight:oc,viewportHeight:hc})};cb.current?(0,AH.flushSync)(xb):xb();cb.current=!1;null!==va.current&&(jc===va.current||0>=jc||jc===oc-hc)&&(va.current=null,d(!0),Na.current&&(clearTimeout(Na.current),Na.current=null))},[a,d]);return(0,aj.useEffect)(function(){var xb=
fa||la.current;return S(fa||la.current),qb({target:xb}),xb.addEventListener("scroll",qb,{passive:!0}),function(){S(null);xb.removeEventListener("scroll",qb)}},[la,qb,n,S,fa]),{scrollerRef:la,scrollByCallback:function(xb){cb.current=!0;la.current.scrollBy(xb)},scrollToCallback:function(xb){var Eb=la.current;if(Eb&&!("offsetHeight"in Eb&&0===Eb.offsetHeight)){var jc,oc,hc,Rc="smooth"===xb.behavior;if(Eb===window?(oc=Math.max(tj(document.documentElement,"height"),document.documentElement.scrollHeight),
jc=window.innerHeight,hc=document.documentElement.scrollTop):(oc=Eb.scrollHeight,jc=tj(Eb,"height"),hc=Eb.scrollTop),xb.top=Math.ceil(Math.max(Math.min(oc-jc,xb.top),0)),1.01>Math.abs(jc-oc)||xb.top===hc)return a({scrollTop:hc,scrollHeight:oc,viewportHeight:jc}),void(Rc&&d(!0));Rc?(va.current=xb.top,Na.current&&clearTimeout(Na.current),Na.current=setTimeout(function(){Na.current=null;va.current=null;d(!0)},1E3)):va.current=null;Eb.scrollTo(xb)}}}}function ep(a,d,n,S,fa){return void 0===S&&(S=Ej),
void 0===fa&&(fa=Ej),{k:a,v:d,lvl:n,l:S,r:fa}}function D(a,d){if(a===Ej)return Ej;var n=a.k,S=a.l,fa=a.r;if(d===n){if(S===Ej)return fa;if(fa===Ej)return S;d=rb(S);return ld(Sb(a,{k:d[0],v:d[1],l:Nb(S)}))}return ld(Sb(a,d<n?{l:D(S,d)}:{r:D(fa,d)}))}function da(a,d,n){return(void 0===n&&(n="k"),a===Ej)?[-Infinity,void 0]:a[n]===d?[a.k,a.v]:a[n]<d?(d=da(a.r,d,n),-Infinity===d[0]?[a.k,a.v]:d):da(a.l,d,n)}function Ca(a,d,n){return a===Ej?ep(d,n,1):d===a.k?Sb(a,{k:d,v:n}):fe(ne(Sb(a,d<a.k?{l:Ca(a.l,d,n)}:
{r:Ca(a.r,d,n)})))}function Ba(a,d,n){if(a===Ej)return[];var S=a.k,fa=a.v,la=a.r,va=[];return S>d&&(va=va.concat(Ba(a.l,d,n))),S>=d&&S<=n&&va.push({k:S,v:fa}),S<=n&&(va=va.concat(Ba(la,d,n))),va}function Oa(a){return a===Ej?[]:[].concat(Oa(a.l),[{k:a.k,v:a.v}],Oa(a.r))}function rb(a){return a.r===Ej?[a.k,a.v]:rb(a.r)}function Nb(a){return a.r===Ej?a.l:ld(Sb(a,{r:Nb(a.r)}))}function Sb(a,d){return ep(void 0!==d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==
d.r?d.r:a.r)}function yc(a){return a===Ej||a.lvl>a.r.lvl}function ld(a){var d=a.l,n=a.r,S=a.lvl;if(n.lvl>=S-1&&d.lvl>=S-1)return a;if(S>n.lvl+1){if(yc(d))return ne(Sb(a,{lvl:S-1}));if(d===Ej||d.r===Ej)throw Error("Unexpected empty nodes");return Sb(d.r,{l:Sb(d,{r:d.r.l}),r:Sb(a,{l:d.r.r,lvl:S-1}),lvl:S})}if(yc(a))return fe(Sb(a,{lvl:S-1}));if(n===Ej||n.l===Ej)throw Error("Unexpected empty nodes");d=n.l;var fa=yc(d)?n.lvl-1:n.lvl;return Sb(d,{l:Sb(a,{r:d.l,lvl:S-1}),r:fe(Sb(n,{l:d.r,lvl:fa})),lvl:d.lvl+
1})}function Ad(a,d,n){return a===Ej?[]:$d(Ba(a,da(a,d)[0],n),function(S){return{index:S.k,value:S.v}})}function $d(a,d){var n=a.length;if(0===n)return[];var S=d(a[0]),fa=S.index;S=S.value;for(var la=[],va=1;va<n;va++){var Na=d(a[va]),cb=Na.index;Na=Na.value;la.push({start:fa,end:cb-1,value:S});fa=cb;S=Na}return la.push({start:fa,end:Infinity,value:S}),la}function fe(a){var d=a.r,n=a.lvl;return d===Ej||d.r===Ej||d.lvl!==n||d.r.lvl!==n?a:Sb(d,{l:Sb(a,{r:d.l}),lvl:n+1})}function ne(a){var d=a.l;return d===
Ej||d.lvl!==a.lvl?a:Sb(d,{r:Sb(a,{l:d.r})})}function jf(a,d,n,S){void 0===S&&(S=0);for(var fa=a.length-1;S<=fa;){var la=Math.floor((S+fa)/2),va=n(a[la],d);if(0===va)return la;if(-1===va){if(2>fa-S)return la-1;fa=la-1}else{if(fa===S)return la;S=la+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);}function Ig(a){var d=a.size,n=a.startIndex,S=a.endIndex;return function(fa){return fa.start===n&&(fa.end===S||Infinity===fa.end)&&fa.value===d}}function Oh(a,d){a=
a.index;return d===a?0:d<a?-1:1}function Bj(a,d){a=a.offset;return d===a?0:d<a?-1:1}function Ch(a){return{index:a.index,value:a}}function Dj(a,d,n,S){var fa=0,la=0,va=0,Na;0!==d?(va=a[Na=jf(a,d-1,Oh)].offset,la=da(n,d-1),fa=la[0],la=la[1],a.length&&a[Na].size===da(n,d)[1]&&--Na,a=a.slice(0,Na+1)):a=[];for(d=Sm(Ad(n,d,Infinity));!(n=d()).done;)Na=n.value,n=Na.start,Na=Na.value,fa=n-fa,va=fa*la+va+fa*S,a.push({offset:va,size:Na,index:n}),fa=n,la=Na;return{offsetTree:a,lastIndex:fa,lastOffset:va,lastSize:la}}
function cj(a,d){var n=d[0],S=d[1],fa=d[3];0<n.length&&(0,d[2])("received item sizes",n,Im.DEBUG);var la=a.sizeTree;d=la;var va=0;if(0<S.length&&la===Ej&&2===n.length){var Na=n[0].size,cb=n[1].size;d=S.reduce(function(xb,Eb){return Ca(Ca(xb,Eb,Na),Eb+1,cb)},d)}else n=function(xb,Eb){var jc,oc=xb===Ej?0:Infinity;for(Eb=Sm(Eb);!(jc=Eb()).done;){var hc=jc.value;jc=hc.size;var Rc=hc.startIndex,hd=hc.endIndex;if(oc=Math.min(oc,Rc),xb===Ej)xb=Ca(xb,0,jc);else{var zc=Ad(xb,Rc-1,hd+1);if(!zc.some(Ig(hc))){var $c,
Uc=hc=!1;for(zc=Sm(zc);!($c=zc()).done;){var td=$c.value;$c=td.start;var vd=td.end;td=td.value;hc?(hd>=$c||jc===td)&&(xb=D(xb,$c)):(Uc=td!==jc,hc=!0);vd>hd&&hd>=$c&&td!==jc&&(xb=Ca(xb,hd+1,td))}Uc&&(xb=Ca(xb,Rc,jc))}}}return[xb,oc]}(d,n),d=n[0],va=n[1];if(d===la)return a;a=Dj(a.offsetTree,va,d,fa);var qb=a.offsetTree;return{sizeTree:d,offsetTree:qb,lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:S.reduce(function(xb,Eb){return Ca(xb,Eb,Zi(Eb,qb,fa))},Ej),groupIndices:S}}
function Zi(a,d,n){if(0===d.length)return 0;d=d[jf(d,a,Oh)];a-=d.index;a=d.size*a+(a-1)*n+d.offset;return 0<a?a+n:a}function mj(a,d,n){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+1;a=yi("LAST"===a.index?n:a.index,d);return Math.max(0,a,Math.min(n,a))}function yi(a,d){if(d.groupOffsetTree===Ej)return a;for(var n=0;d.groupIndices[n]<=a+n;)n++;return a+n}function dj(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&CH||(a.behavior="auto"),a.offset||(a.offset=
0),a}function ej(a){return!!a&&("smooth"===a?"smooth":"auto")}function hj(a){return a.reduce(function(d,n){return d.groupIndices.push(d.totalCount),d.totalCount+=n+1,d},{totalCount:0,groupIndices:[]})}function ok(a,d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function il(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function Al(a,d,n){return"number"==typeof a?"up"===n&&"top"===d||"down"===n&&"bottom"===d?a:0:"up"===n?"top"===d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function zn(a,
d,n){if(0===a.length)return[];if(d.groupOffsetTree===Ej)return a.map(function(cb){return hi({},cb,{index:cb.index+n,originalIndex:cb.index})});var S,fa=[],la=Ad(d.groupOffsetTree,a[0].index,a[a.length-1].index),va=void 0,Na=0;for(a=Sm(a);!(S=a()).done;)S=S.value,(!va||va.end<S.index)&&(va=la.shift(),Na=d.groupIndices.indexOf(va.start)),fa.push(hi({},S.index===va.start?{type:"group",index:Na}:{index:S.index-(Na+1)+n,groupIndex:Na},{size:S.size,offset:S.offset,originalIndex:S.index,data:S.data}));return fa}
function jn(a,d,n,S,fa,la){var va=0,Na=0;0<a.length&&(va=a[0].offset,Na=a[a.length-1],Na=Na.offset+Na.size);var cb=n-fa.lastIndex,qb=va;S=fa.lastOffset+cb*fa.lastSize+(cb-1)*S-Na;return{items:zn(a,fa,la),topItems:zn(d,fa,la),topListHeight:d.reduce(function(xb,Eb){return Eb.size+xb},0),offsetTop:va,offsetBottom:S,top:qb,bottom:Na,totalCount:n,firstItemIndex:la}}function An(a){var d,n=!1;return function(){return n||(n=!0,d=a()),d}}function si(a,d){var n=(0,aj.useRef)(null),S=(0,aj.useCallback)(function(cb){if(null!==
cb&&cb.offsetParent){var qb=cb.getBoundingClientRect();cb=qb.width;if(d){var xb=d.getBoundingClientRect();qb=qb.top-xb.top;xb=xb.height-Math.max(0,qb);qb+=d.scrollTop}else xb=window.innerHeight-Math.max(0,qb.top),qb=qb.top+window.pageYOffset;n.current={offsetTop:qb,visibleHeight:xb,visibleWidth:cb};a(n.current)}},[a,d]),fa=dp(S),la=fa.callbackRef,va=fa.ref,Na=(0,aj.useCallback)(function(){S(va.current)},[S,va]);return(0,aj.useEffect)(function(){if(d){d.addEventListener("scroll",Na);var cb=new ResizeObserver(Na);
return cb.observe(d),function(){d.removeEventListener("scroll",Na);cb.unobserve(d)}}return window.addEventListener("scroll",Na),window.addEventListener("resize",Na),function(){window.removeEventListener("scroll",Na);window.removeEventListener("resize",Na)}},[Na,d]),la}function Yp(a){return a}function jl(a,d){var n=Gh();return li(n,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),Rg(n,a),n}function wk(a,d){if("string"!=
typeof a)return{context:d}}function Fo(a){var d=a.usePublisher,n=a.useEmitter,S=a.useEmitterValue;return Th.memo(function(fa){var la=fa.style,va=fa.children;fa=Rm(fa,cD);var Na=d("scrollContainerState"),cb=S("ScrollerComponent"),qb=d("smoothScrollTargetReached"),xb=S("scrollerRef"),Eb=S("context");Na=Cr(Na,qb,cb,xb);qb=Na.scrollerRef;xb=Na.scrollByCallback;return n("scrollTo",Na.scrollToCallback),n("scrollBy",xb),(0,aj.createElement)(cb,hi({ref:qb,style:hi({},FH,la),"data-test-id":"virtuoso-scroller",
"data-virtuoso-scroller":!0,tabIndex:0},fa,wk(cb,Eb)),va)})}function Zp(a){var d=a.usePublisher,n=a.useEmitter,S=a.useEmitterValue;return Th.memo(function(fa){var la=fa.style,va=fa.children;fa=Rm(fa,dD);var Na=d("windowScrollContainerState"),cb=S("ScrollerComponent"),qb=d("smoothScrollTargetReached"),xb=S("totalListHeight"),Eb=S("deviation"),jc=S("customScrollParent"),oc=S("context");qb=Cr(Na,qb,cb,lj,jc);var hc=qb.scrollerRef;Na=qb.scrollByCallback;qb=qb.scrollToCallback;return VC(function(){return hc.current=
jc||window,function(){hc.current=null}},[hc,jc]),n("windowScrollTo",qb),n("scrollBy",Na),(0,aj.createElement)(cb,hi({style:hi({position:"relative"},la,0!==xb?{height:xb+Eb}:{}),"data-virtuoso-scroller":!0},fa,wk(cb,oc)),va)})}function $p(a,d,n){return Array.from({length:d-a+1}).map(function(S,fa){return{index:fa+a,data:null==n?void 0:n[fa+a]}})}function Pn(a,d){return a&&a.column===d.column&&a.row===d.row}function Go(a,d,n,S){var fa=n.height;return void 0===fa||0===S.length?{top:0,bottom:0}:{top:Bl(a,
d,n,S[0].index),bottom:Bl(a,d,n,S[S.length-1].index)+fa}}function Bl(a,d,n,S){var fa=d.column;a=Gp(1,Mw((a.width+fa)/(n.width+fa)));S=Mw(S/a);n=S*n.height+Gp(0,S-1)*d.row;return 0<n?n+d.row:n}function Bm(a,d,n){return"normal"===d||null!=d&&d.endsWith("px")||n(a+" was not resolved to pixel value correctly",d,Im.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function Bn(a,d){Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,S){n.__proto__=S;return n};return Bn(a,d)}function aq(a,d){a.prototype=
Object.create(d.prototype);a.prototype.constructor=a;Bn(a,d)}function Ho(a){Ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return Ho(a)}function Ku(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function Eq(a,d,n){Eq=Ku()?Reflect.construct.bind():function(S,
fa,la){var va=[null];va.push.apply(va,fa);S=new (Function.bind.apply(S,va));la&&Bn(S,la.prototype);return S};return Eq.apply(null,arguments)}function Fq(a){var d="function"===typeof Map?new Map:void 0;Fq=function(n){function S(){return Eq(n,arguments,Ho(this).constructor)}if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!==typeof n)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof d){if(d.has(n))return d.get(n);
d.set(n,S)}S.prototype=Object.create(n.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}});return Bn(S,n)};return Fq(a)}function Lu(a,d,n){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*n)}function bq(a,d,n,S){void 0===S&&(S=Lu);if(0===d)return S(n,n,n);a=(a%360+360)%360/60;var fa=(1-Math.abs(2*n-1))*d,la=fa*(1-Math.abs(a%2-1)),va=d=0,Na=0;0<=a&&1>a?(d=fa,va=la):1<=a&&2>a?(d=la,va=fa):2<=a&&3>a?(va=fa,Na=la):3<=a&&4>a?(va=la,Na=fa):4<=a&&5>a?(d=la,Na=fa):
5<=a&&6>a&&(d=fa,Na=la);n-=fa/2;return S(d+n,va+n,Na+n)}function Hs(a){if("string"!==typeof a)throw new op(3);if("string"===typeof a){var d=a.toLowerCase();a=dz[d]?"#"+dz[d]:a}if(a.match(pD))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(ez))return d=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};if(a.match(Ro))return{red:parseInt(""+
a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(zv))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d};if(d=Yl.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)};if(d=Rw.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:1<parseFloat(""+
d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var n=Av.exec(a);if(n){d=parseInt(""+n[1],10);var S=parseInt(""+n[2],10)/100;n=parseInt(""+n[3],10)/100;d="rgb("+bq(d,S,n)+")";S=Yl.exec(d);if(!S)throw new op(4,a,d);return{red:parseInt(""+S[1],10),green:parseInt(""+S[2],10),blue:parseInt(""+S[3],10)}}if(d=pp.exec(a.substring(0,50))){S=parseInt(""+d[1],10);n=parseInt(""+d[2],10)/100;var fa=parseInt(""+d[3],10)/100;S="rgb("+bq(S,n,fa)+")";n=Yl.exec(S);if(!n)throw new op(4,a,S);return{red:parseInt(""+
n[1],10),green:parseInt(""+n[2],10),blue:parseInt(""+n[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new op(5);}function Io(a){a=a.toString(16);return 1===a.length?"0"+a:a}function cq(a,d,n){return Tj("#"+Io(Math.round(255*a))+Io(Math.round(255*d))+Io(Math.round(255*n)))}function Is(a,d,n){if("number"===typeof a&&"number"===typeof d&&"number"===typeof n)return Tj("#"+Io(a)+Io(d)+Io(n));if("object"===typeof a&&void 0===d&&void 0===n)return Tj("#"+Io(a.red)+Io(a.green)+
Io(a.blue));throw new op(6);}function Ft(a){if("object"!==typeof a)throw new op(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?Is(a.red,a.green,a.blue):"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new op(7);return a}if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return Is(a);if("number"===
typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?bq(a.hue,a.saturation,a.lightness,cq):"rgba("+bq(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new op(2);return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=bq(a.hue,a.saturation,a.lightness,cq);else throw new op(1);
return a}throw new op(8);}function Dr(a,d,n){return function(){var S=n.concat(Array.prototype.slice.call(arguments));return S.length>=d?a.apply(this,S):Dr(a,d,S)}}function Er(a,d){if("transparent"===d)return d;d=Hs(d);var n=d.red/255,S=d.green/255,fa=d.blue/255,la=Math.max(n,S,fa),va=Math.min(n,S,fa),Na=(la+va)/2;if(la===va)d=void 0!==d.alpha?{hue:0,saturation:0,lightness:Na,alpha:d.alpha}:{hue:0,saturation:0,lightness:Na};else{var cb=la-va;va=.5<Na?cb/(2-la-va):cb/(la+va);switch(la){case n:n=(S-
fa)/cb+(S<fa?6:0);break;case S:n=(fa-n)/cb+2;break;default:n=(n-S)/cb+4}n*=60;d=void 0!==d.alpha?{hue:n,saturation:va,lightness:Na,alpha:d.alpha}:{hue:n,saturation:va,lightness:Na}}Na=pf;a=d.lightness-parseFloat(a);return Ft(Na({},d,{lightness:Math.max(0,Math.min(1,a))}))}function kn(a,d){var n;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let S=null!=(n=d.fill)?n:a.props.fill;void 0===S||Gf(S)||"var(--ls-secondary-background-color)"===
S||d.noFill||!OH.includes(a.props.type)||(a=Bv(.3,S),d.stroke=a);return d}function Js({strokeWidth:a,size:d,mode:n}){return"svg"===n?(0,hr.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,d[1]-2*a),strokeWidth:4*a}):(0,hr.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function Cn(){const a=df();return"panning"===a.inputs.state||
"pinching"===a.inputs.state}function Gq({left:a,middle:d,right:n,stroke:S,strokeWidth:fa}){return(0,uu.jsxs)("g",{children:[(0,uu.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${n}`}),(0,uu.jsx)("path",{d:`M ${a} L ${d} ${n}`,fill:"none",stroke:S,strokeWidth:fa,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Hq(a,d,n){d=Q(a,d,a,n).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(n=d[0])?Fe.rotWith(n,
a,Math.PI/6):a;a=n?Fe.rotWith(n,a,-Math.PI/6):a;return{left:d,right:a}}function Ks(a,d,n){const {left:S,right:fa}=Hq(a,d,n);return`M ${S} L ${a} ${fa}`}function nm(a,d,n,S,fa){a=a.strokeWidth;var la=Fe.dist(d,n);a=Math.min(la/3,16*a);la=[];la.push(`M ${d} L ${n}`);S&&la.push(Ks(d,n,a));fa&&la.push(Ks(n,d,a));return la.join(" ")}function Ls({id:a,bounds:d,labelSize:n,offset:S,scale:fa=1}){return(0,Dv.jsx)("defs",{children:(0,Dv.jsxs)("mask",{id:a+"_clip",children:[(0,Dv.jsx)("rect",{x:-100,y:-100,
width:d.width+200,height:d.height+200,fill:"white"}),(0,Dv.jsx)("rect",{x:d.width/2-n[0]/2*fa+((null==S?void 0:S[0])||0),y:d.height/2-n[1]/2*fa+((null==S?void 0:S[1])||0),width:n[0]*fa,height:n[1]*fa,rx:4*fa,ry:4*fa,fill:"black"})]})})}function dq(a,d,n,S=fa=>fa){return a*S(.5-d*(.5-n))}function eq(a){return[-a[0],-a[1]]}function Cl(a,d){return[a[0]+d[0],a[1]+d[1]]}function Dl(a,d){return[a[0]-d[0],a[1]-d[1]]}function El(a,d){return[a[0]*d,a[1]*d]}function fq(a){return[a[1],-a[0]]}function Fr(a,d){return a[0]===
d[0]&&a[1]===d[1]}function Iq(a){return a[0]*a[0]+a[1]*a[1]}function Jq(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function Gt(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function Jo(a,d,n){let S=Math.sin(n);n=Math.cos(n);let fa=a[0]-d[0];a=a[1]-d[1];return[fa*n-a*S+d[0],fa*S+a*n+d[1]]}function Dn(a,d,n){return Cl(a,El(Dl(d,a),n))}function gq(a,d,n){return Cl(a,El(d,n))}function Kq(a,d={}){let {size:n=16,smoothing:S=.5,thinning:fa=.5,simulatePressure:la=!0,easing:va=he=>he,start:Na={},end:cb=
{},last:qb=!1}=d,{cap:xb=!0,easing:Eb=he=>he*(2-he)}=Na,{cap:jc=!0,easing:oc=he=>--he*he*he+1}=cb;if(0===a.length||0>=n)return[];var hc=a[a.length-1].runningLength;let Rc=!1===Na.taper?0:!0===Na.taper?Math.max(n,hc):Na.taper,hd=!1===cb.taper?0:!0===cb.taper?Math.max(n,hc):cb.taper;var zc=Math.pow(n*S,2);d=[];let $c=[];var Uc=a.slice(0,10).reduce((he,Pd)=>{var ke=Pd.pressure;la&&(Pd=kt(1,Pd.distance/n),ke=kt(1,1-Pd),ke=kt(1,he+.275*(ke-he)*Pd));return(he+ke)/2},a[0].pressure),td=dq(n,fa,a[a.length-
1].pressure,va),vd;let ae=a[0].vector;var qe=a[0].point;let Lf=qe;var Qe=qe;let of=Lf;var ng=!1;for(var xf=0;xf<a.length;xf++){var {pressure:cg}=a[xf];let {point:he,vector:Pd,distance:ke,runningLength:yf}=a[xf];if(xf<a.length-1&&3>hc-yf)continue;fa?(la&&(td=kt(1,ke/n),cg=kt(1,1-td),cg=kt(1,Uc+.275*(cg-Uc)*td)),td=dq(n,fa,cg,va)):td=n/2;void 0===vd&&(vd=td);var oe=yf<Rc?Eb(yf/Rc):1,Vd=hc-yf<hd?oc((hc-yf)/hd):1;td=Math.max(.01,td*Math.min(oe,Vd));Vd=(xf<a.length-1?a[xf+1]:a[xf]).vector;let Pf=xf<a.length-
1?Pd[0]*Vd[0]+Pd[1]*Vd[1]:1;oe=null!==Pf&&0>Pf;if(0>Pd[0]*ae[0]+Pd[1]*ae[1]&&!ng||oe){qe=El(fq(ae),td);for(let Lg=1/13,yh=0;1>=yh;yh+=Lg)Qe=Jo(Dl(he,qe),he,lt*yh),d.push(Qe),of=Jo(Cl(he,qe),he,lt*-yh),$c.push(of);qe=Qe;Lf=of;oe&&(ng=!0)}else(ng=!1,xf===a.length-1)?(cg=El(fq(Pd),td),d.push(Dl(he,cg)),$c.push(Cl(he,cg))):(Uc=El(fq(Dn(Vd,Pd,Pf)),td),Qe=Dl(he,Uc),(1>=xf||Iq(Dl(qe,Qe))>zc)&&(d.push(Qe),qe=Qe),of=Cl(he,Uc),(1>=xf||Iq(Dl(Lf,of))>zc)&&($c.push(of),Lf=of),Uc=cg,ae=Pd)}hc=a[0].point.slice(0,
2);zc=1<a.length?a[a.length-1].point.slice(0,2):Cl(a[0].point,[1,1]);Qe=[];ng=[];if(1===a.length){if(!Rc&&!hd||qb){a=gq(hc,Jq(fq(Dl(hc,zc))),-(vd||td));d=[];for(let he=1/13,Pd=he;1>=Pd;Pd+=he)d.push(Jo(a,hc,2*lt*Pd));return d}}else{if(!(Rc||hd&&1===a.length))if(xb)for(let he=1/13,Pd=he;1>=Pd;Pd+=he)vd=Jo($c[0],hc,lt*Pd),Qe.push(vd);else xf=Dl(d[0],$c[0]),vd=El(xf,.5),xf=El(xf,.51),Qe.push(Dl(hc,vd),Dl(hc,xf),Cl(hc,xf),Cl(hc,vd));vd=fq(eq(a[a.length-1].vector));if(hd||Rc&&1===a.length)ng.push(zc);
else if(jc){a=gq(zc,vd,td);for(let he=1/29,Pd=he;1>Pd;Pd+=he)ng.push(Jo(a,zc,3*lt*Pd))}else ng.push(Cl(zc,El(vd,td)),Cl(zc,El(vd,.99*td)),Dl(zc,El(vd,.99*td)),Dl(zc,El(vd,td)))}return d.concat(ng,$c.reverse(),Qe)}function Lk(a,d={}){var n;let {streamline:S=.5,size:fa=16,last:la=!1}=d;if(0===a.length)return[];d=.15+.85*(1-S);a=Array.isArray(a[0])?a:a.map(({x:Eb,y:jc,pressure:oc=.5})=>[Eb,jc,oc]);if(2===a.length){var va=a[1];a=a.slice(0,-1);for(var Na=1;5>Na;Na++)a.push(Dn(a[0],va,Na/4))}1===a.length&&
(a=[...a,[...Cl(a[0],[1,1]),...a[0].slice(2)]]);va=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Na=!1;let cb=0,qb=va[0],xb=a.length-1;for(let Eb=1;Eb<a.length;Eb++){let jc=la&&Eb===xb?a[Eb].slice(0,2):Dn(qb.point,a[Eb],d);if(Fr(qb.point,jc))continue;let oc=Gt(jc,qb.point);if(cb+=oc,Eb<xb&&!Na){if(cb<fa)continue;Na=!0}qb={point:jc,pressure:0<=a[Eb][2]?a[Eb][2]:.5,vector:Jq(Dl(qb.point,jc)),distance:oc,runningLength:cb};va.push(qb)}return va[0].vector=
(null==(n=va[1])?void 0:n.vector)||[0,0],va}function Qn(a,d=4/3){return(new fs(a)).exportAsSVG(d)}function io(a,d=4/3){return(new fs(a)).generatePreviewJsx(void 0,d)}function ln({id:a,type:d,onRemove:n,showContent:S}){const fa=df(),{handlers:la}=Ny.default.useContext(Qj),va=la.t;return(0,pk.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,pk.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,pk.jsx)(br,{id:a,showReferenceContent:S})}),
(0,pk.jsx)("div",{className:"flex-1"}),la.getBlockPageName(a)!==fa.currentPage.name&&(0,pk.jsx)(Ge,{tooltip:va("whiteboard/open-page"),type:"button",onClick:()=>null==la?void 0:la.redirectToPage(a),children:(0,pk.jsx)(pi,{name:"open-as-page"})}),(0,pk.jsx)(Ge,{tooltip:va("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==la?void 0:la.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,pk.jsx)(pi,{name:"move-to-sidebar-right"})}),n&&(0,pk.jsx)(Ge,{className:"tl-shape-links-panel-item-remove-button",
tooltip:va("whiteboard/remove-link"),type:"button",onClick:n,children:(0,pk.jsx)(pi,{name:"x",className:"!translate-y-0"})})]})}function ka({options:a,value:d,onValueChange:n}){return(0,tn.jsx)(CD,{className:"tl-toggle-group-input",type:"single",value:d,onValueChange:n,children:a.map(S=>(0,tn.jsx)(Le,{content:S.tooltip,children:(0,tn.jsx)("div",{className:"inline-block",children:(0,tn.jsx)(oz,{className:"tl-toggle-group-input-button",value:S.value,disabled:S.value===d,children:(0,tn.jsx)(pi,{name:S.icon})})})},
S.value))})}function Fa({options:a,value:d,onValueChange:n}){return(0,tn.jsx)(CD,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:n,children:a.map(S=>(0,tn.jsx)(oz,{className:"tl-toggle-group-input-button",value:S.value,children:(0,tn.jsx)(pi,{name:S.icon})},S.value))})}function ib(a){return df().selectedShapesArray.filter(d=>!d.props.isLocked).filter(d=>{var n;return null==(n=qz[d.props.type])?void 0:n.includes(a)})}function tc(a){return d=>"mouse"!==d.pointerType?a(d):void 0}
function cd(a){var d;a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";const n=a[0].toLowerCase();[a]=null!=(d=Object.entries(HD).find(([,S])=>S.includes(n)))?d:["unknown",null];return a}function qd(...a){return(...d)=>Mi(this,null,function*(){for(const n of a){const S=yield n(...d);if(S&&0<S.length)return S}return null})}function Wd(a,d){return Mi(this,null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():null})}function se(){const {handlers:a}=
wq.useContext(Qj);return wq.useCallback((d,n)=>Mi(this,null,function*(){if(n.shiftKey&&1===d.selectedShapesArray.length){var S=yield navigator.clipboard.read();let fa;0<S.length&&(S=(yield(yield S[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(S)&&40===S.length?(S=S.slice(2,-2),Vg(S)&&(fa=S)):/^\[\[.*\]\]$/.test(S)&&(fa=S.slice(2,-2)));if(fa){d.selectedShapesArray[0].update({refs:[fa]});d.persist();return}}wz(d,n,a)}),[])}function Je(){const a=se();return cI.useCallback((d,n)=>Mi(this,
[d,n],function*(S,{dataTransfer:fa,point:la}){a(S,{point:la,shiftKey:!1,dataTransfer:fa,fromDrop:!0})}),[])}function ff(){const {handlers:a}=Jv.useContext(Qj);return Jv.useCallback((d,{text:n,html:S})=>{a.copyToClipboard(n,S)},[])}function Rf(){return xz.default.useCallback(a=>Mi(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var Kg=Object.create,Wg=Object.defineProperty,zi=Object.defineProperties,ii=Object.getOwnPropertyDescriptor,
Yk=Object.getOwnPropertyDescriptors,Ko=Object.getOwnPropertyNames,om=Object.getOwnPropertySymbols,ij=Object.getPrototypeOf,Zk=Object.prototype.hasOwnProperty,Tm=Object.prototype.propertyIsEnumerable,fp=(a,d,n)=>d in a?Wg(a,d,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[d]=n,Ke=(a,d)=>{for(var n in d||={})Zk.call(d,n)&&fp(a,n,d[n]);if(om)for(n of om(d))Tm.call(d,n)&&fp(a,n,d[n]);return a},ag=(a,d)=>zi(a,Yk(d)),yg=(a,d)=>{var n={},S;for(S in a)Zk.call(a,S)&&0>d.indexOf(S)&&(n[S]=a[S]);if(null!=
a&&om)for(S of om(a))0>d.indexOf(S)&&Tm.call(a,S)&&(n[S]=a[S]);return n},ti=(a,d)=>function(){return d||(0,a[Ko(a)[0]])((d={exports:{}}).exports,d),d.exports},Um=(a,d,n,S)=>{if(d&&"object"===typeof d||"function"===typeof d)for(let fa of Ko(d))Zk.call(a,fa)||fa===n||Wg(a,fa,{get:()=>d[fa],enumerable:!(S=ii(d,fa))||S.enumerable});return a},ig=(a,d,n)=>(n=null!=a?Kg(ij(a)):{},Um(!d&&a&&a.__esModule?n:Wg(n,"default",{value:a,enumerable:!0}),a)),Ce=(a,d,n,S)=>{for(var fa=1<S?void 0:S?ii(d,n):d,la=a.length-
1,va;0<=la;la--)if(va=a[la])fa=(S?va(d,n,fa):va(fa))||fa;S&&fa&&Wg(d,n,fa);return fa},Bb=(a,d,n)=>{fp(a,"symbol"!==typeof d?d+"":d,n);return n},Mi=(a,d,n)=>new Promise((S,fa)=>{var la=cb=>{try{Na(n.next(cb))}catch(qb){fa(qb)}},va=cb=>{try{Na(n.throw(cb))}catch(qb){fa(qb)}},Na=cb=>cb.done?S(cb.value):Promise.resolve(cb.value).then(la,va);Na((n=n.apply(a,d)).next())}),Cm=ti({["../../node_modules/rbush/rbush.min.js"](a,d){!function(n,S){"object"==typeof a&&"undefined"!=typeof d?d.exports=S():"function"==
typeof define&&define.amd?define(S):(n=n||self).RBush=S()}(a,function(){function n(zc,$c,Uc,td,vd){!function xf(qe,Lf,Qe,of,ng){for(;of>Qe;){if(600<of-Qe){var cg=of-Qe+1,oe=Lf-Qe+1,Vd=Math.log(cg),he=.5*Math.exp(2*Vd/3);Vd=.5*Math.sqrt(Vd*he*(cg-he)/cg)*(0>oe-cg/2?-1:1);xf(qe,Lf,Math.max(Qe,Math.floor(Lf-oe*he/cg+Vd)),Math.min(of,Math.floor(Lf+(cg-oe)*he/cg+Vd)),ng)}cg=qe[Lf];oe=Qe;he=of;S(qe,Qe,Lf);for(0<ng(qe[of],cg)&&S(qe,Qe,of);oe<he;){S(qe,oe,he);oe++;for(he--;0>ng(qe[oe],cg);)oe++;for(;0<ng(qe[he],
cg);)he--}0===ng(qe[Qe],cg)?S(qe,Qe,he):S(qe,++he,of);he<=Lf&&(Qe=he+1);Lf<=he&&(of=he-1)}}(zc,$c,Uc||0,td||zc.length-1,vd||fa)}function S(zc,$c,Uc){var td=zc[$c];zc[$c]=zc[Uc];zc[Uc]=td}function fa(zc,$c){return zc<$c?-1:zc>$c?1:0}function la(zc,$c){va(zc,0,zc.children.length,$c,zc)}function va(zc,$c,Uc,td,vd){vd||=hc(null);vd.minX=1/0;vd.minY=1/0;vd.maxX=-1/0;for(vd.maxY=-1/0;$c<Uc;$c++){var ae=zc.children[$c];Na(vd,zc.leaf?td(ae):ae)}return vd}function Na(zc,$c){return zc.minX=Math.min(zc.minX,
$c.minX),zc.minY=Math.min(zc.minY,$c.minY),zc.maxX=Math.max(zc.maxX,$c.maxX),zc.maxY=Math.max(zc.maxY,$c.maxY),zc}function cb(zc,$c){return zc.minX-$c.minX}function qb(zc,$c){return zc.minY-$c.minY}function xb(zc){return(zc.maxX-zc.minX)*(zc.maxY-zc.minY)}function Eb(zc){return zc.maxX-zc.minX+(zc.maxY-zc.minY)}function jc(zc,$c){return zc.minX<=$c.minX&&zc.minY<=$c.minY&&$c.maxX<=zc.maxX&&$c.maxY<=zc.maxY}function oc(zc,$c){return $c.minX<=zc.maxX&&$c.minY<=zc.maxY&&$c.maxX>=zc.minX&&$c.maxY>=zc.minY}
function hc(zc){return{children:zc,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Rc(zc,$c,Uc,td,vd){for(var ae=[$c,Uc];ae.length;)if(!((Uc=ae.pop())-($c=ae.pop())<=td)){var qe=$c+Math.ceil((Uc-$c)/td/2)*td;n(zc,qe,$c,Uc,vd);ae.push($c,qe,qe,Uc)}}var hd=function(zc){void 0===zc&&(zc=9);this._maxEntries=Math.max(4,zc);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return hd.prototype.all=function(){return this._all(this.data,[])},hd.prototype.search=function(zc){var $c=
this.data,Uc=[];if(!oc(zc,$c))return Uc;for(var td=this.toBBox,vd=[];$c;){for(var ae=0;ae<$c.children.length;ae++){var qe=$c.children[ae],Lf=$c.leaf?td(qe):qe;oc(zc,Lf)&&($c.leaf?Uc.push(qe):jc(zc,Lf)?this._all(qe,Uc):vd.push(qe))}$c=vd.pop()}return Uc},hd.prototype.collides=function(zc){var $c=this.data;if(!oc(zc,$c))return!1;for(var Uc=[];$c;){for(var td=0;td<$c.children.length;td++){var vd=$c.children[td],ae=$c.leaf?this.toBBox(vd):vd;if(oc(zc,ae)){if($c.leaf||jc(zc,ae))return!0;Uc.push(vd)}}$c=
Uc.pop()}return!1},hd.prototype.load=function(zc){if(!zc||!zc.length)return this;if(zc.length<this._minEntries){for(var $c=0;$c<zc.length;$c++)this.insert(zc[$c]);return this}zc=this._build(zc.slice(),0,zc.length-1,0);this.data.children.length?this.data.height===zc.height?this._splitRoot(this.data,zc):(this.data.height<zc.height&&($c=this.data,this.data=zc,zc=$c),this._insert(zc,this.data.height-zc.height-1,!0)):this.data=zc;return this},hd.prototype.insert=function(zc){return zc&&this._insert(zc,
this.data.height-1),this},hd.prototype.clear=function(){return this.data=hc([]),this},hd.prototype.remove=function(zc,$c){if(!zc)return this;for(var Uc,td,vd,ae=this.data,qe=this.toBBox(zc),Lf=[],Qe=[];ae||Lf.length;){if(ae||(ae=Lf.pop(),td=Lf[Lf.length-1],Uc=Qe.pop(),vd=!0),ae.leaf){a:{var of=zc;var ng=ae.children,xf=$c;if(xf){for(var cg=0;cg<ng.length;cg++)if(xf(of,ng[cg])){of=cg;break a}of=-1}else of=ng.indexOf(of)}if(-1!==of)return ae.children.splice(of,1),Lf.push(ae),this._condense(Lf),this}vd||
ae.leaf||!jc(ae,qe)?td?(Uc++,ae=td.children[Uc],vd=!1):ae=null:(Lf.push(ae),Qe.push(Uc),Uc=0,td=ae,ae=ae.children[0])}return this},hd.prototype.toBBox=function(zc){return zc},hd.prototype.compareMinX=function(zc,$c){return zc.minX-$c.minX},hd.prototype.compareMinY=function(zc,$c){return zc.minY-$c.minY},hd.prototype.toJSON=function(){return this.data},hd.prototype.fromJSON=function(zc){return this.data=zc,this},hd.prototype._all=function(zc,$c){for(var Uc=[];zc;)zc.leaf?$c.push.apply($c,zc.children):
Uc.push.apply(Uc,zc.children),zc=Uc.pop();return $c},hd.prototype._build=function(zc,$c,Uc,td){var vd,ae=Uc-$c+1,qe=this._maxEntries;if(ae<=qe)return la(vd=hc(zc.slice($c,Uc+1)),this.toBBox),vd;td||(td=Math.ceil(Math.log(ae)/Math.log(qe)),qe=Math.ceil(ae/Math.pow(qe,td-1)));(vd=hc([])).leaf=!1;vd.height=td;ae=Math.ceil(ae/qe);qe=ae*Math.ceil(Math.sqrt(qe));for(Rc(zc,$c,Uc,qe,this.compareMinX);$c<=Uc;$c+=qe){var Lf=Math.min($c+qe-1,Uc);Rc(zc,$c,Lf,ae,this.compareMinY);for(var Qe=$c;Qe<=Lf;Qe+=ae)vd.children.push(this._build(zc,
Qe,Math.min(Qe+ae-1,Lf),td-1))}return la(vd,this.toBBox),vd},hd.prototype._chooseSubtree=function(zc,$c,Uc,td){for(;td.push($c),!$c.leaf&&td.length-1!==Uc;){for(var vd=1/0,ae=1/0,qe=void 0,Lf=0;Lf<$c.children.length;Lf++){var Qe=$c.children[Lf],of=xb(Qe),ng=(xf=zc,cg=Qe,(Math.max(cg.maxX,xf.maxX)-Math.min(cg.minX,xf.minX))*(Math.max(cg.maxY,xf.maxY)-Math.min(cg.minY,xf.minY))-of);ng<ae?(ae=ng,vd=of<vd?of:vd,qe=Qe):ng===ae&&of<vd&&(vd=of,qe=Qe)}$c=qe||$c.children[0]}var xf,cg;return $c},hd.prototype._insert=
function(zc,$c,Uc){Uc=Uc?zc:this.toBBox(zc);var td=[],vd=this._chooseSubtree(Uc,this.data,$c,td);vd.children.push(zc);for(Na(vd,Uc);0<=$c&&td[$c].children.length>this._maxEntries;)this._split(td,$c),$c--;this._adjustParentBBoxes(Uc,td,$c)},hd.prototype._split=function(zc,$c){var Uc=zc[$c],td=Uc.children.length,vd=this._minEntries;this._chooseSplitAxis(Uc,vd,td);td=this._chooseSplitIndex(Uc,vd,td);td=hc(Uc.children.splice(td,Uc.children.length-td));td.height=Uc.height;td.leaf=Uc.leaf;la(Uc,this.toBBox);
la(td,this.toBBox);$c?zc[$c-1].children.push(td):this._splitRoot(Uc,td)},hd.prototype._splitRoot=function(zc,$c){this.data=hc([zc,$c]);this.data.height=zc.height+1;this.data.leaf=!1;la(this.data,this.toBBox)},hd.prototype._chooseSplitIndex=function(zc,$c,Uc){for(var td,vd,ae,qe,Lf,Qe,of,ng=1/0,xf=1/0,cg=$c;cg<=Uc-$c;cg++){var oe=va(zc,0,cg,this.toBBox),Vd=va(zc,cg,Uc,this.toBBox),he=(vd=oe,ae=Vd,qe=void 0,Lf=void 0,Qe=void 0,of=void 0,qe=Math.max(vd.minX,ae.minX),Lf=Math.max(vd.minY,ae.minY),Qe=Math.min(vd.maxX,
ae.maxX),of=Math.min(vd.maxY,ae.maxY),Math.max(0,Qe-qe)*Math.max(0,of-Lf));oe=xb(oe)+xb(Vd);he<ng?(ng=he,td=cg,xf=oe<xf?oe:xf):he===ng&&oe<xf&&(xf=oe,td=cg)}return td||Uc-$c},hd.prototype._chooseSplitAxis=function(zc,$c,Uc){var td=zc.leaf?this.compareMinX:cb,vd=zc.leaf?this.compareMinY:qb;this._allDistMargin(zc,$c,Uc,td)<this._allDistMargin(zc,$c,Uc,vd)&&zc.children.sort(td)},hd.prototype._allDistMargin=function(zc,$c,Uc,td){zc.children.sort(td);td=this.toBBox;for(var vd=va(zc,0,$c,td),ae=va(zc,Uc-
$c,Uc,td),qe=Eb(vd)+Eb(ae),Lf=$c;Lf<Uc-$c;Lf++){var Qe=zc.children[Lf];Na(vd,zc.leaf?td(Qe):Qe);qe+=Eb(vd)}for(Uc=Uc-$c-1;Uc>=$c;Uc--)vd=zc.children[Uc],Na(ae,zc.leaf?td(vd):vd),qe+=Eb(ae);return qe},hd.prototype._adjustParentBBoxes=function(zc,$c,Uc){for(;0<=Uc;Uc--)Na($c[Uc],zc)},hd.prototype._condense=function(zc){for(var $c=zc.length-1,Uc=void 0;0<=$c;$c--)0===zc[$c].children.length?0<$c?(Uc=zc[$c-1].children).splice(Uc.indexOf(zc[$c]),1):this.clear():la(zc[$c],this.toBBox)},hd})}}),Ht=ti({["../../node_modules/fast-deep-equal/index.js"](a,
d){d.exports=function la(S,fa){if(S===fa)return!0;if(S&&fa&&"object"==typeof S&&"object"==typeof fa){if(S.constructor!==fa.constructor)return!1;var va;if(Array.isArray(S)){var Na=S.length;if(Na!=fa.length)return!1;for(va=Na;0!==va--;)if(!la(S[va],fa[va]))return!1;return!0}if(S.constructor===RegExp)return S.source===fa.source&&S.flags===fa.flags;if(S.valueOf!==Object.prototype.valueOf)return S.valueOf()===fa.valueOf();if(S.toString!==Object.prototype.toString)return S.toString()===fa.toString();var cb=
Object.keys(S);Na=cb.length;if(Na!==Object.keys(fa).length)return!1;for(va=Na;0!==va--;)if(!Object.prototype.hasOwnProperty.call(fa,cb[va]))return!1;for(va=Na;0!==va--;)if(Na=cb[va],!la(S[Na],fa[Na]))return!1;return!0}return S!==S&&fa!==fa}}}),Gr=ti({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function n(Eb,jc){return!1!==jc.clone&&jc.isMergeableObject(Eb)?cb(Array.isArray(Eb)?[]:{},Eb,jc):Eb}function S(Eb,jc,oc){return Eb.concat(jc).map(function(hc){return n(hc,oc)})}function fa(Eb){return Object.getOwnPropertySymbols?
Object.getOwnPropertySymbols(Eb).filter(function(jc){return Object.propertyIsEnumerable.call(Eb,jc)}):[]}function la(Eb){return Object.keys(Eb).concat(fa(Eb))}function va(Eb,jc){try{return jc in Eb}catch(oc){return!1}}function Na(Eb,jc,oc){var hc={};oc.isMergeableObject(Eb)&&la(Eb).forEach(function(Rc){hc[Rc]=n(Eb[Rc],oc)});la(jc).forEach(function(Rc){if(!va(Eb,Rc)||Object.hasOwnProperty.call(Eb,Rc)&&Object.propertyIsEnumerable.call(Eb,Rc))if(va(Eb,Rc)&&oc.isMergeableObject(jc[Rc])){if(oc.customMerge){var hd=
oc.customMerge(Rc);hd="function"===typeof hd?hd:cb}else hd=cb;hc[Rc]=hd(Eb[Rc],jc[Rc],oc)}else hc[Rc]=n(jc[Rc],oc)});return hc}function cb(Eb,jc,oc){oc=oc||{};oc.arrayMerge=oc.arrayMerge||S;oc.isMergeableObject=oc.isMergeableObject||qb;oc.cloneUnlessOtherwiseSpecified=n;var hc=Array.isArray(jc),Rc=Array.isArray(Eb);return hc!==Rc?n(jc,oc):hc?oc.arrayMerge(Eb,jc,oc):Na(Eb,jc,oc)}var qb=function(Eb){var jc;if(jc=!!Eb&&"object"===typeof Eb)jc=Object.prototype.toString.call(Eb),jc=!("[object RegExp]"===
jc||"[object Date]"===jc||Eb.$$typeof===xb);return jc},xb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;cb.all=function(Eb,jc){if(!Array.isArray(Eb))throw Error("first argument should be an array");return Eb.reduce(function(oc,hc){return cb(oc,hc,jc)},{})};d.exports=cb}}),Ms=ti({["../../node_modules/tslib/tslib.js"](a,d){var n,S,fa,la,va,Na,cb,qb,xb,Eb,jc,oc,hc,Rc,hd,zc,$c,Uc,td,vd,ae,qe,Lf,Qe,of;(function(ng){function xf(oe,Vd){oe!==cg&&("function"===typeof Object.create?
Object.defineProperty(oe,"__esModule",{value:!0}):oe.__esModule=!0);return function(he,Pd){return oe[he]=Vd?Vd(he,Pd):Pd}}var cg="object"===typeof za?za:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(oe){ng(xf(cg,xf(oe)))}):"object"===typeof d&&"object"===typeof d.exports?ng(xf(cg,xf(d.exports))):ng(xf(cg))})(function(ng){var xf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,Vd){oe.__proto__=
Vd}||function(oe,Vd){for(var he in Vd)Object.prototype.hasOwnProperty.call(Vd,he)&&(oe[he]=Vd[he])};n=function(oe,Vd){function he(){this.constructor=oe}if("function"!==typeof Vd&&null!==Vd)throw new TypeError("Class extends value "+String(Vd)+" is not a constructor or null");xf(oe,Vd);oe.prototype=null===Vd?Object.create(Vd):(he.prototype=Vd.prototype,new he)};S=Object.assign||function(oe){for(var Vd,he=1,Pd=arguments.length;he<Pd;he++){Vd=arguments[he];for(var ke in Vd)Object.prototype.hasOwnProperty.call(Vd,
ke)&&(oe[ke]=Vd[ke])}return oe};fa=function(oe,Vd){var he={},Pd;for(Pd in oe)Object.prototype.hasOwnProperty.call(oe,Pd)&&0>Vd.indexOf(Pd)&&(he[Pd]=oe[Pd]);if(null!=oe&&"function"===typeof Object.getOwnPropertySymbols){var ke=0;for(Pd=Object.getOwnPropertySymbols(oe);ke<Pd.length;ke++)0>Vd.indexOf(Pd[ke])&&Object.prototype.propertyIsEnumerable.call(oe,Pd[ke])&&(he[Pd[ke]]=oe[Pd[ke]])}return he};la=function(oe,Vd,he,Pd){var ke=arguments.length,yf=3>ke?Vd:null===Pd?Pd=Object.getOwnPropertyDescriptor(Vd,
he):Pd,Pf;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)yf=Reflect.decorate(oe,Vd,he,Pd);else for(var Lg=oe.length-1;0<=Lg;Lg--)if(Pf=oe[Lg])yf=(3>ke?Pf(yf):3<ke?Pf(Vd,he,yf):Pf(Vd,he))||yf;return 3<ke&&yf&&Object.defineProperty(Vd,he,yf),yf};va=function(oe,Vd){return function(he,Pd){Vd(he,Pd,oe)}};Na=function(oe,Vd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(oe,Vd)};cb=function(oe,Vd,he,Pd){function ke(yf){return yf instanceof he?
yf:new he(function(Pf){Pf(yf)})}return new (he||=Promise)(function(yf,Pf){function Lg(Kh){try{Zf(Pd.next(Kh))}catch(zg){Pf(zg)}}function yh(Kh){try{Zf(Pd["throw"](Kh))}catch(zg){Pf(zg)}}function Zf(Kh){Kh.done?yf(Kh.value):ke(Kh.value).then(Lg,yh)}Zf((Pd=Pd.apply(oe,Vd||[])).next())})};qb=function(oe,Vd){function he(Zf){return function(Kh){return Pd([Zf,Kh])}}function Pd(Zf){if(yf)throw new TypeError("Generator is already executing.");for(;ke;)try{if(yf=1,Pf&&(Lg=Zf[0]&2?Pf["return"]:Zf[0]?Pf["throw"]||
((Lg=Pf["return"])&&Lg.call(Pf),0):Pf.next)&&!(Lg=Lg.call(Pf,Zf[1])).done)return Lg;if(Pf=0,Lg)Zf=[Zf[0]&2,Lg.value];switch(Zf[0]){case 0:case 1:Lg=Zf;break;case 4:return ke.label++,{value:Zf[1],done:!1};case 5:ke.label++;Pf=Zf[1];Zf=[0];continue;case 7:Zf=ke.ops.pop();ke.trys.pop();continue;default:if(!(Lg=ke.trys,Lg=0<Lg.length&&Lg[Lg.length-1])&&(6===Zf[0]||2===Zf[0])){ke=0;continue}if(3===Zf[0]&&(!Lg||Zf[1]>Lg[0]&&Zf[1]<Lg[3]))ke.label=Zf[1];else if(6===Zf[0]&&ke.label<Lg[1])ke.label=Lg[1],Lg=
Zf;else if(Lg&&ke.label<Lg[2])ke.label=Lg[2],ke.ops.push(Zf);else{Lg[2]&&ke.ops.pop();ke.trys.pop();continue}}Zf=Vd.call(oe,ke)}catch(Kh){Zf=[6,Kh],Pf=0}finally{yf=Lg=0}if(Zf[0]&5)throw Zf[1];return{value:Zf[0]?Zf[1]:void 0,done:!0}}var ke={label:0,sent:function(){if(Lg[0]&1)throw Lg[1];return Lg[1]},trys:[],ops:[]},yf,Pf,Lg,yh;return yh={next:he(0),"throw":he(1),"return":he(2)},"function"===typeof Symbol&&(yh[Symbol.iterator]=function(){return this}),yh};xb=function(oe,Vd){for(var he in oe)"default"===
he||Object.prototype.hasOwnProperty.call(Vd,he)||of(Vd,oe,he)};of=Object.create?function(oe,Vd,he,Pd){void 0===Pd&&(Pd=he);var ke=Object.getOwnPropertyDescriptor(Vd,he);if(!ke||("get"in ke?!Vd.__esModule:ke.writable||ke.configurable))ke={enumerable:!0,get:function(){return Vd[he]}};Object.defineProperty(oe,Pd,ke)}:function(oe,Vd,he,Pd){void 0===Pd&&(Pd=he);oe[Pd]=Vd[he]};Eb=function(oe){var Vd="function"===typeof Symbol&&Symbol.iterator,he=Vd&&oe[Vd],Pd=0;if(he)return he.call(oe);if(oe&&"number"===
typeof oe.length)return{next:function(){oe&&Pd>=oe.length&&(oe=void 0);return{value:oe&&oe[Pd++],done:!oe}}};throw new TypeError(Vd?"Object is not iterable.":"Symbol.iterator is not defined.");};jc=function(oe,Vd){var he="function"===typeof Symbol&&oe[Symbol.iterator];if(!he)return oe;oe=he.call(oe);var Pd,ke=[];try{for(;(void 0===Vd||0<Vd--)&&!(Pd=oe.next()).done;)ke.push(Pd.value)}catch(Pf){var yf={error:Pf}}finally{try{Pd&&!Pd.done&&(he=oe["return"])&&he.call(oe)}finally{if(yf)throw yf.error;}}return ke};
oc=function(){for(var oe=[],Vd=0;Vd<arguments.length;Vd++)oe=oe.concat(jc(arguments[Vd]));return oe};hc=function(){for(var oe=0,Vd=0,he=arguments.length;Vd<he;Vd++)oe+=arguments[Vd].length;oe=Array(oe);var Pd=0;for(Vd=0;Vd<he;Vd++)for(var ke=arguments[Vd],yf=0,Pf=ke.length;yf<Pf;yf++,Pd++)oe[Pd]=ke[yf];return oe};Rc=function(oe,Vd,he){if(he||2===arguments.length)for(var Pd=0,ke=Vd.length,yf;Pd<ke;Pd++)!yf&&Pd in Vd||(yf||=Array.prototype.slice.call(Vd,0,Pd),yf[Pd]=Vd[Pd]);return oe.concat(yf||Array.prototype.slice.call(Vd))};
hd=function(oe){return this instanceof hd?(this.v=oe,this):new hd(oe)};zc=function(oe,Vd,he){function Pd(zg){yh[zg]&&(Zf[zg]=function(Wh){return new Promise(function(mi,Ij){1<Kh.push([zg,Wh,mi,Ij])||ke(zg,Wh)})})}function ke(zg,Wh){try{var mi=yh[zg](Wh);mi.value instanceof hd?Promise.resolve(mi.value.v).then(yf,Pf):Lg(Kh[0][2],mi)}catch(Ij){Lg(Kh[0][3],Ij)}}function yf(zg){ke("next",zg)}function Pf(zg){ke("throw",zg)}function Lg(zg,Wh){(zg(Wh),Kh.shift(),Kh.length)&&ke(Kh[0][0],Kh[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var yh=he.apply(oe,Vd||[]),Zf,Kh=[];return Zf={},Pd("next"),Pd("throw"),Pd("return"),Zf[Symbol.asyncIterator]=function(){return this},Zf};$c=function(oe){function Vd(ke,yf){he[ke]=oe[ke]?function(Pf){return(Pd=!Pd)?{value:hd(oe[ke](Pf)),done:"return"===ke}:yf?yf(Pf):Pf}:yf}var he,Pd;return he={},Vd("next"),Vd("throw",function(ke){throw ke;}),Vd("return"),he[Symbol.iterator]=function(){return this},he};Uc=function(oe){function Vd(yf){ke[yf]=oe[yf]&&function(Pf){return new Promise(function(Lg,yh){Pf=
oe[yf](Pf);he(Lg,yh,Pf.done,Pf.value)})}}function he(yf,Pf,Lg,yh){Promise.resolve(yh).then(function(Zf){yf({value:Zf,done:Lg})},Pf)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pd=oe[Symbol.asyncIterator],ke;return Pd?Pd.call(oe):(oe="function"===typeof Eb?Eb(oe):oe[Symbol.iterator](),ke={},Vd("next"),Vd("throw"),Vd("return"),ke[Symbol.asyncIterator]=function(){return this},ke)};td=function(oe,Vd){Object.defineProperty?Object.defineProperty(oe,"raw",{value:Vd}):
oe.raw=Vd;return oe};var cg=Object.create?function(oe,Vd){Object.defineProperty(oe,"default",{enumerable:!0,value:Vd})}:function(oe,Vd){oe["default"]=Vd};vd=function(oe){if(oe&&oe.__esModule)return oe;var Vd={};if(null!=oe)for(var he in oe)"default"!==he&&Object.prototype.hasOwnProperty.call(oe,he)&&of(Vd,oe,he);cg(Vd,oe);return Vd};ae=function(oe){return oe&&oe.__esModule?oe:{"default":oe}};qe=function(oe,Vd,he,Pd){if("a"===he&&!Pd)throw new TypeError("Private accessor was defined without a getter");
if("function"===typeof Vd?oe!==Vd||!Pd:!Vd.has(oe))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===he?Pd:"a"===he?Pd.call(oe):Pd?Pd.value:Vd.get(oe)};Lf=function(oe,Vd,he,Pd,ke){if("m"===Pd)throw new TypeError("Private method is not writable");if("a"===Pd&&!ke)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof Vd?oe!==Vd||!ke:!Vd.has(oe))throw new TypeError("Cannot write private member to an object whose class did not declare it");
return"a"===Pd?ke.call(oe,he):ke?ke.value=he:Vd.set(oe,he),he};Qe=function(oe,Vd){if(null===Vd||"object"!==typeof Vd&&"function"!==typeof Vd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof oe?Vd===oe:oe.has(Vd)};ng("__extends",n);ng("__assign",S);ng("__rest",fa);ng("__decorate",la);ng("__param",va);ng("__metadata",Na);ng("__awaiter",cb);ng("__generator",qb);ng("__exportStar",xb);ng("__createBinding",of);ng("__values",Eb);ng("__read",jc);ng("__spread",oc);ng("__spreadArrays",
hc);ng("__spreadArray",Rc);ng("__await",hd);ng("__asyncGenerator",zc);ng("__asyncDelegator",$c);ng("__asyncValues",Uc);ng("__makeTemplateObject",td);ng("__importStar",vd);ng("__importDefault",ae);ng("__classPrivateFieldGet",qe);ng("__classPrivateFieldSet",Lf);ng("__classPrivateFieldIn",Qe)})}}),Lq={};((a,d)=>{for(var n in d)Wg(a,n,{get:d[n],enumerable:!0})})(Lq,{App:()=>MD,PreviewManager:()=>fs,generateJSXFromModel:()=>io,generateSVGFromModel:()=>Qn});ab.exports=(a=>Um(Wg({},"__esModule",{value:!0}),
a))(Lq);var Ns=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";a.Gray="gray";a.Default="";return a})(Ns||{}),hq=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(hq||{}),Hr,Mu=new Uint8Array(16),wh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Fl=[];for(let a=0;256>a;++a)Fl.push((a+256).toString(16).slice(1));var It,jo,gp=0,Mq=0,xk=function(a,d,n){n=d&&n||0;const S=
d||Array(16);a=a||{};let fa=a.node||It;var la=void 0!==a.clockseq?a.clockseq:jo;if(null==fa||null==la){var va=a.random||(a.rng||x)();null==fa&&(fa=It=[va[0]|1,va[1],va[2],va[3],va[4],va[5]]);null==la&&(la=jo=(va[6]<<8|va[7])&16383)}va=void 0!==a.msecs?a.msecs:Date.now();let Na=void 0!==a.nsecs?a.nsecs:Mq+1;const cb=va-gp+(Na-Mq)/1E4;0>cb&&void 0===a.clockseq&&(la=la+1&16383);(0>cb||va>gp)&&void 0===a.nsecs&&(Na=0);if(1E4<=Na)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");gp=va;Mq=
Na;jo=la;va+=122192928E5;a=(1E4*(va&268435455)+Na)%4294967296;S[n++]=a>>>24&255;S[n++]=a>>>16&255;S[n++]=a>>>8&255;S[n++]=a&255;a=va/4294967296*1E4&268435455;S[n++]=a>>>8&255;S[n++]=a&255;S[n++]=a>>>24&15|16;S[n++]=a>>>16&255;S[n++]=la>>>8|128;S[n++]=la&255;for(la=0;6>la;++la)S[n+la]=fa[la];return d||X(S)},oi=class{static clamp(a,d,n){return Math.max(d,"undefined"!==typeof n?Math.min(a,n):a)}static clampV(a,d,n){return a.map(S=>n?oi.clamp(S,d,n):oi.clamp(S,d))}static cross(a,d,n){return(d[0]-a[0])*
(n[1]-a[1])-(n[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},ee=oi;ee.neg=a=>[-a[0],-a[1]];ee.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];ee.addScalar=(a,d)=>[a[0]+d,a[1]+d];ee.sub=(a,d)=>[a[0]-d[0],a[1]-d[1]];ee.subScalar=(a,d)=>[a[0]-d,a[1]-d];ee.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];ee.mul=(a,d)=>[a[0]*d,a[1]*d];ee.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];ee.div=(a,d)=>[a[0]/d,a[1]/d];ee.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];ee.per=a=>[a[1],-a[0]];ee.dpr=(a,d)=>a[0]*d[0]+a[1]*
d[1];ee.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];ee.len2=a=>a[0]*a[0]+a[1]*a[1];ee.len=a=>Math.hypot(a[0],a[1]);ee.pry=(a,d)=>oi.dpr(a,d)/oi.len(d);ee.uni=a=>oi.div(a,oi.len(a));ee.normalize=a=>oi.uni(a);ee.tangent=(a,d)=>oi.uni(oi.sub(a,d));ee.dist2=(a,d)=>oi.len2(oi.sub(a,d));ee.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);ee.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let n=1/Math.max(d[0],d[1]);n*=1.29289-(d[0]+d[1])*n*.29289;return[a[0]*n,a[1]*n]};ee.ang=(a,d)=>Math.atan2(oi.cpr(a,
d),oi.dpr(a,d));ee.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);ee.med=(a,d)=>oi.mul(oi.add(a,d),.5);ee.rot=(a,d=0)=>[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];ee.rotWith=(a,d,n=0)=>{if(0===n)return a;const S=Math.sin(n);n=Math.cos(n);const fa=a[0]-d[0];a=a[1]-d[1];return[fa*n-a*S+d[0],fa*S+a*n+d[1]]};ee.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];ee.lrp=(a,d,n)=>oi.add(a,oi.mul(oi.sub(d,a),n));ee.int=(a,d,n,S,fa=1)=>{n=(oi.clamp(n,S)-n)/(S-n);return oi.add(oi.mul(a,1-n),oi.mul(d,
fa))};ee.ang3=(a,d,n)=>{a=oi.vec(d,a);d=oi.vec(d,n);return oi.ang(a,d)};ee.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];ee.rescale=(a,d)=>{const n=oi.len(a);return[d*a[0]/n,d*a[1]/n]};ee.isLeft=(a,d,n)=>(d[0]-a[0])*(n[1]-a[1])-(n[0]-a[0])*(d[1]-a[1]);ee.clockwise=(a,d,n)=>0<oi.isLeft(a,d,n);ee.toFixed=a=>a.map(d=>Math.round(100*d)/100);ee.nearestPointOnLineThroughPoint=(a,d,n)=>oi.add(a,oi.mul(d,oi.pry(oi.sub(n,a),d)));ee.distanceToLineThroughPoint=(a,d,n)=>oi.dist(n,oi.nearestPointOnLineThroughPoint(a,
d,n));ee.nearestPointOnLineSegment=(a,d,n,S=!0)=>{const fa=oi.uni(oi.sub(d,a));n=oi.add(a,oi.mul(fa,oi.pry(oi.sub(n,a),fa)));if(S){if(n[0]<Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(n[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(n[1]<Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(n[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return n};ee.distanceToLineSegment=(a,d,n,S=!0)=>oi.dist(n,oi.nearestPointOnLineSegment(a,d,n,S));ee.nudge=(a,d,n)=>oi.isEqual(a,d)?a:oi.add(a,oi.mul(oi.uni(oi.sub(d,a)),n));
ee.nudgeAtAngle=(a,d,n)=>[Math.cos(d)*n+a[0],Math.sin(d)*n+a[1]];ee.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];ee.pointsBetween=(a,d,n=6)=>Array.from(Array(n)).map((S,fa)=>{S=fa/(n-1);fa=Math.min(1,.5+Math.abs(.5-S));return[...oi.lrp(a,d,S),fa]});ee.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);ee.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};ee.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];ee.min=(...a)=>[Math.min(...a.map(d=>d[0])),
Math.min(...a.map(d=>d[1]))];var Fe=ee,kg=class{static getRectangleSides(a,d,n=0){const S=[a[0]+d[0]/2,a[1]+d[1]/2],fa=ee.rotWith(a,S,n),la=ee.rotWith(ee.add(a,[d[0],0]),S,n),va=ee.rotWith(ee.add(a,d),S,n);a=ee.rotWith(ee.add(a,[0,d[1]]),S,n);return[["top",[fa,la]],["right",[la,va]],["bottom",[va,a]],["left",[a,fa]]]}static getBoundsSides(a){return kg.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+
2*d,height:a.height+2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return kg.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let n=Infinity,S=Infinity,fa=
-Infinity,la=-Infinity;if(2>a.length)S=n=0,la=fa=1;else for(const va of a)n=Math.min(va[0],n),S=Math.min(va[1],S),fa=Math.max(va[0],fa),la=Math.max(va[1],la);return 0!==d?kg.getBoundsFromPoints(a.map(va=>ee.rotWith(va,[(n+fa)/2,(S+la)/2],d))):{minX:n,minY:S,maxX:fa,maxY:la,width:Math.max(1,fa-n),height:Math.max(1,la-S)}}static centerBounds(a,d){const n=kg.getBoundsCenter(a);return kg.translateBounds(a,[d[0]-n[0],d[1]-n[1]])}static snapBoundsToGrid(a,d){const n=Math.round(a.minX/d)*d,S=Math.round(a.minY/
d)*d,fa=Math.round(a.maxX/d)*d;a=Math.round(a.maxY/d)*d;return{minX:n,minY:S,maxX:fa,maxY:a,width:Math.max(1,fa-n),height:Math.max(1,a-S)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+d[1],maxX:a.maxX+d[0],maxY:a.maxY+d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const n=kg.getBoundsCenter(a);return kg.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[n[0]*d,n[1]*d])}static divideBounds(a,d){const n=kg.getBoundsCenter(a);
return kg.centerBounds({minX:a.minX/d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[n[0]/d,n[1]/d])}static getRotatedBounds(a,d=0){a=kg.getRotatedCorners(a,d);let n=d=Infinity,S=-Infinity,fa=-Infinity;for(const la of a)d=Math.min(la[0],d),n=Math.min(la[1],n),S=Math.max(la[0],S),fa=Math.max(la[1],fa);return{minX:d,minY:n,maxX:S,maxY:fa,width:Math.max(1,S-d),height:Math.max(1,fa-n),rotation:0}}static getRotatedEllipseBounds(a,d,n,S,fa=0){var la=Math.cos(fa);const va=
Math.sin(fa);fa=Math.hypot(n*la,S*va);la=Math.hypot(n*va,S*la);return{minX:a+n-fa,minY:d+S-la,maxX:a+n+fa,maxY:d+S+la,width:2*fa,height:2*la}}static getExpandedBounds(a,d){const n=Math.min(a.minX,d.minX),S=Math.min(a.minY,d.minY),fa=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:n,minY:S,maxX:fa,maxY:a,width:Math.abs(fa-n),height:Math.abs(a-S)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let n=1;n<a.length;n++)d=kg.getExpandedBounds(d,a[n]);return d}static getRotatedCorners(a,
d=0){const n=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(S=>ee.rotWith(S,n,d)):a}static getTransformedBoundingBox(a,d,n,S=0,fa=!1){const [la,va]=[a.minX,a.minY],[Na,cb]=[a.maxX,a.maxY];let [qb,xb]=[a.minX,a.minY],[Eb,jc]=[a.maxX,a.maxY];if("center"===d)return{minX:qb+n[0],minY:xb+n[1],maxX:Eb+n[0],maxY:jc+n[1],width:Eb-qb,height:jc-xb,scaleX:1,scaleY:1};const [oc,hc]=ee.rot(n,-S);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":xb+=
hc;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":jc+=hc}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":qb+=oc;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":Eb+=oc}var Rc=Na-la;const hd=cb-va;var zc=(Eb-qb)/Rc,$c=(jc-xb)/hd;a=0>zc;n=0>$c;var Uc=Math.abs(Eb-qb),td=Math.abs(jc-xb);if(fa)switch(fa=Rc/hd,Rc=fa<Uc/td,$c=1/fa*(0>$c?1:-1)*Uc,zc=td*(0>zc?1:-1)*fa,d){case "top_left_corner":Rc?xb=jc+$c:qb=Eb+zc;break;case "top_right_corner":Rc?
xb=jc+$c:Eb=qb-zc;break;case "bottom_right_corner":Rc?jc=xb-$c:Eb=qb-zc;break;case "bottom_left_corner":Rc?jc=xb-$c:qb=Eb+zc;break;case "bottom_edge":case "top_edge":Uc=(qb+Eb)/2;td*=fa;qb=Uc-td/2;Eb=Uc+td/2;break;case "left_edge":case "right_edge":td=(xb+jc)/2,Uc/=fa,xb=td-Uc/2,jc=td+Uc/2}if(0!==S%(2*Math.PI)){Uc=[0,0];td=ee.med([la,va],[Na,cb]);zc=ee.med([qb,xb],[Eb,jc]);switch(d){case "top_left_corner":Uc=ee.sub(ee.rotWith([Eb,jc],zc,S),ee.rotWith([Na,cb],td,S));break;case "top_right_corner":Uc=
ee.sub(ee.rotWith([qb,jc],zc,S),ee.rotWith([la,cb],td,S));break;case "bottom_right_corner":Uc=ee.sub(ee.rotWith([qb,xb],zc,S),ee.rotWith([la,va],td,S));break;case "bottom_left_corner":Uc=ee.sub(ee.rotWith([Eb,xb],zc,S),ee.rotWith([Na,va],td,S));break;case "top_edge":Uc=ee.sub(ee.rotWith(ee.med([qb,jc],[Eb,jc]),zc,S),ee.rotWith(ee.med([la,cb],[Na,cb]),td,S));break;case "left_edge":Uc=ee.sub(ee.rotWith(ee.med([Eb,xb],[Eb,jc]),zc,S),ee.rotWith(ee.med([Na,va],[Na,cb]),td,S));break;case "bottom_edge":Uc=
ee.sub(ee.rotWith(ee.med([qb,xb],[Eb,xb]),zc,S),ee.rotWith(ee.med([la,va],[Na,va]),td,S));break;case "right_edge":Uc=ee.sub(ee.rotWith(ee.med([qb,xb],[qb,jc]),zc,S),ee.rotWith(ee.med([la,va],[la,cb]),td,S))}[qb,xb]=ee.sub([qb,xb],Uc);[Eb,jc]=ee.sub([Eb,jc],Uc)}Eb<qb&&([Eb,qb]=[qb,Eb]);jc<xb&&([jc,xb]=[xb,jc]);return{minX:qb,minY:xb,maxX:Eb,maxY:jc,width:Eb-qb,height:jc-xb,scaleX:(Eb-qb)/(Na-la||1)*(a?-1:1),scaleY:(jc-xb)/(cb-va||1)*(n?-1:1)}}static getTransformAnchor(a,d,n){let S=a;switch(a){case "top_left_corner":S=
d&&n?"bottom_right_corner":d?"top_right_corner":n?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":S=d&&n?"bottom_left_corner":d?"top_left_corner":n?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":S=d&&n?"top_left_corner":d?"bottom_left_corner":n?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":S=d&&n?"top_right_corner":d?"bottom_right_corner":n?"top_left_corner":"top_right_corner"}return S}static getRelativeTransformedBoundingBox(a,
d,n,S,fa){S=a.minX+(S?d.maxX-n.maxX:n.minX-d.minX)/d.width*a.width;fa=a.minY+(fa?d.maxY-n.maxY:n.minY-d.minY)/d.height*a.height;const la=n.width/d.width*a.width;a=n.height/d.height*a.height;return{minX:S,minY:fa,maxX:S+la,maxY:fa+a,width:la,height:a}}static getRotatedSize(a,d){const n=ee.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(S=>ee.rotWith(S,n,d));a=kg.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=
kg.getBoundsCenter(a);return ag(Ke({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=[Infinity,Infinity];a.forEach(n=>{d[0]=Math.min(d[0],n[0]);d[1]=Math.min(d[1],n[1])});return d}static getTLSnapPoints(a,d,n){const S=Ke({},a);a=[0,0];const fa=[],la={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},va=["midX","minX","maxX"],Na=["midY","minY","maxY"];d=d.map(jc=>
{const oc=va.flatMap((Rc,hd)=>va.map((zc,$c)=>{const Uc=S[Rc]-jc[zc];return{f:Rc,t:zc,gap:Uc,distance:Math.abs(Uc),isCareful:0===hd||3===hd+$c}})),hc=Na.flatMap((Rc,hd)=>Na.map((zc,$c)=>{const Uc=S[Rc]-jc[zc];return{f:Rc,t:zc,gap:Uc,distance:Math.abs(Uc),isCareful:0===hd||3===hd+$c}}));return[jc,oc,hc]});let cb=Infinity,qb=Infinity,xb=Infinity,Eb=Infinity;d.forEach(([,jc,oc])=>{jc.forEach(hc=>{hc.distance<n&&hc.distance<xb&&(xb=hc.distance,cb=hc.gap)});oc.forEach(hc=>{hc.distance<n&&hc.distance<Eb&&
(Eb=hc.distance,qb=hc.gap)})});d.forEach(([jc,oc,hc])=>{Infinity!==cb&&oc.forEach(Rc=>{2>Math.abs(Rc.gap-cb)&&(la[Rc.f]=ag(Ke({},la[Rc.f]),{isSnapped:!0,to:jc[Rc.t],B:jc,distance:Rc.distance}))});Infinity!==qb&&hc.forEach(Rc=>{2>Math.abs(Rc.gap-qb)&&(la[Rc.f]=ag(Ke({},la[Rc.f]),{isSnapped:!0,to:jc[Rc.t],B:jc,distance:Rc.distance}))})});a[0]=Infinity===cb?0:cb;a[1]=Infinity===qb?0:qb;S.minX-=a[0];S.midX-=a[0];S.maxX-=a[0];S.minY-=a[1];S.midY-=a[1];S.maxY-=a[1];va.forEach(jc=>{jc=la[jc];if(jc.isSnapped){var {id:oc,
B:hc}=jc;jc=S[oc];fa.push("minX"===oc?[[jc,S.midY],[jc,hc.minY],[jc,hc.maxY]]:[[jc,S.minY],[jc,S.maxY],[jc,hc.minY],[jc,hc.maxY]])}});Na.forEach(jc=>{jc=la[jc];if(jc.isSnapped){var {id:oc,B:hc}=jc;jc=S[oc];fa.push("midY"===oc?[[S.midX,jc],[hc.minX,jc],[hc.maxX,jc]]:[[S.minX,jc],[S.maxX,jc],[hc.minX,jc],[hc.maxX,jc]])}});return{offset:a,snapLines:fa}}static ensureRatio(a,d){const {width:n,height:S}=a,fa=Ke({},a);n/S<d?(fa.width=S*d,fa.maxX+=n-a.width):(fa.height=n/d,fa.maxY+=S-a.height);return fa}static getDistributions(a,
d){var n=a.map(la=>{const va=la.getBounds();return{id:la.id,point:[va.minX,va.minY],bounds:va,center:la.getCenter()}});a=n.length;var S=kg.getCommonBounds(n.map(({bounds:la})=>la));const fa=[];switch(d){case "horizontal":d=n.reduce((la,va)=>la+va.bounds.width,0);if(d>S.width){const la=n.sort((qb,xb)=>qb.bounds.minX-xb.bounds.minX)[0],va=n.sort((qb,xb)=>xb.bounds.maxX-qb.bounds.maxX)[0];S=n.filter(qb=>qb!==la&&qb!==va).sort((qb,xb)=>qb.center[0]-xb.center[0]);const Na=(va.center[0]-la.center[0])/(a-
1),cb=la.center[0]+Na;S.forEach(({id:qb,point:xb,bounds:Eb},jc)=>{fa.push({id:qb,prev:xb,next:[cb+Na*jc-Eb.width/2,Eb.minY]})})}else{n=n.sort((Na,cb)=>Na.center[0]-cb.center[0]);let la=S.minX;const va=(S.width-d)/(a-1);n.forEach(({id:Na,point:cb,bounds:qb})=>{fa.push({id:Na,prev:cb,next:[la,qb.minY]});la+=qb.width+va})}break;case "vertical":if(d=n.reduce((la,va)=>la+va.bounds.height,0),d>S.height){const la=n.sort((qb,xb)=>qb.bounds.minY-xb.bounds.minY)[0],va=n.sort((qb,xb)=>xb.bounds.maxY-qb.bounds.maxY)[0];
S=n.filter(qb=>qb!==la&&qb!==va).sort((qb,xb)=>qb.center[1]-xb.center[1]);const Na=(va.center[1]-la.center[1])/(a-1),cb=la.center[1]+Na;S.forEach(({id:qb,point:xb,bounds:Eb},jc)=>{fa.push({id:qb,prev:xb,next:[Eb.minX,cb+Na*jc-Eb.height/2]})})}else{n=n.sort((Na,cb)=>Na.center[1]-cb.center[1]);let la=S.minY;const va=(S.height-d)/(a-1);n.forEach(({id:Na,point:cb,bounds:qb})=>{fa.push({id:Na,prev:cb,next:[qb.minX,la]});la+=qb.height+va})}}return fa}static getPackedDistributions(a){const d=kg.getCommonBounds(a.map(({bounds:fa})=>
fa)),n=[d.minX,d.minY],S=Object.fromEntries(a.map(fa=>[fa.id,[fa.bounds.minX,fa.bounds.minY]]));a=a.filter(fa=>{var la,va,Na,cb;return!((null==(va=null==(la=fa.props.handles)?void 0:la.start)?0:va.bindingId)||(null==(cb=null==(Na=fa.props.handles)?void 0:Na.end)?0:cb.bindingId))}).map(fa=>{const la=fa.getBounds();return{id:fa.id,w:la.width+16,h:la.height+16,x:la.minX,y:la.minY}});B(a);return a.map(({id:fa,x:la,y:va})=>({id:fa,prev:S[fa],next:[la+n[0],va+n[1]]}))}},yp=class{static pointInCircle(a,
d,n){return ee.dist(a,d)<=n}static pointInEllipse(a,d,n,S,fa=0){fa=fa||0;var la=Math.cos(fa);fa=Math.sin(fa);d=ee.sub(a,d);a=la*d[0]+fa*d[1];la=fa*d[0]-la*d[1];return 1>=a*a/(n*n)+la*la/(S*S)}static pointInRect(a,d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let n=0;d.forEach((S,fa)=>{fa=d[(fa+1)%d.length];S[1]<=a[1]?fa[1]>a[1]&&0<ee.cross(S,fa,a)&&(n+=1):fa[1]<=a[1]&&0>ee.cross(S,fa,a)&&--n});return 0!==n}static pointInBounds(a,d){return!(a[0]<d.minX||
a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,n=3){for(let S=1;S<d.length;S++)if(ee.distanceToLineSegment(d[S-1],d[S],a)<n)return!0;return!1}static _getSqSegDist(a,d,n){let S=d[0];d=d[1];let fa=n[0]-S,la=n[1]-d;if(0!==fa||0!==la){const va=((a[0]-S)*fa+(a[1]-d)*la)/(fa*fa+la*la);1<va?(S=n[0],d=n[1]):0<va&&(S+=fa*va,d+=la*va)}fa=a[0]-S;la=a[1]-d;return fa*fa+la*la}static _simplifyStep(a,d,n,S,fa){let la=S,va=-1;for(let Na=d+1;Na<n;Na++){const cb=yp._getSqSegDist(a[Na],a[d],a[n]);
cb>la&&(va=Na,la=cb)}-1<va&&la>S&&(1<va-d&&yp._simplifyStep(a,d,va,S,fa),fa.push(a[va]),1<n-va&&yp._simplifyStep(a,va,n,S,fa))}static simplify2(a,d=1){if(2>=a.length)return a;d*=d;var n=a[0],S=a[1];const fa=[n];for(let la=1,va=a.length;la<va;la++)S=a[la],(S[0]-n[0])*(S[0]-n[0])+(S[1]-n[1])*(S[1]-n[1])>d&&(fa.push(S),n=S);n!==S&&fa.push(S);n=fa.length-1;S=[fa[0]];yp._simplifyStep(fa,0,n,d,S);S.push(fa[n],a[a.length-1]);return S}static pointNearToPolyline(a,d,n=8){const S=d.length;for(let fa=1;fa<S;fa++)if(ee.distanceToLineSegment(d[fa-
1],d[fa],a)<n)return!0;return!1}},Mk=yp;Bb(Mk,"simplify",(a,d=1)=>{var n=a.length;const S=a[0],fa=a[n-1],[la,va]=S,[Na,cb]=fa;if(2<n){let qb=0,xb=0;const Eb=ee.len2([cb-va,Na-la]);for(let jc=1;jc<n-1;jc++){const [oc,hc]=a[jc],Rc=Math.pow(oc*(cb-va)+la*(hc-cb)+Na*(va-hc),2)/Eb;qb>Rc||(qb=Rc,xb=jc)}if(qb>d)return n=yp.simplify(a.slice(0,xb+1),d),a=yp.simplify(a.slice(xb+1),d),n.concat(a.slice(1))}return[S,fa]});var Gl=Math.PI,Rn=Gl/2,$k=2*Gl,Nq={},Jt={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",
right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Dm=class{static circleFromThreePoints(a,d,n){const [S,fa]=a,[la,va]=d,[Na,cb]=n;d=S*(va-cb)-fa*(la-Na)+la*cb-Na*va;a=-((S*S+fa*fa)*(cb-va)+(la*la+
va*va)*(fa-cb)+(Na*Na+cb*cb)*(va-fa))/(2*d);d=-((S*S+fa*fa)*(la-Na)+(la*la+va*va)*(Na-S)+(Na*Na+cb*cb)*(S-la))/(2*d);return[a,d,Math.hypot(a-S,d-fa)]}static perimeterOfEllipse(a,d){const n=Math.pow(a-d,2)/Math.pow(a+d,2);return Gl*(a+d)*(1+3*n/(10+Math.sqrt(4-3*n)))}static shortAngleDist(a,d){a=(d-a)%$k;return 2*a%$k-a}static longAngleDist(a,d){return $k-Dm.shortAngleDist(a,d)}static lerpAngles(a,d,n){return a+Dm.shortAngleDist(a,d)*n}static angleDelta(a,d){return Dm.shortAngleDist(a,d)}static getSweep(a,
d,n){return Dm.angleDelta(Fe.angle(a,d),Fe.angle(a,n))}static clampRadians(a){return($k+a)%$k}static snapAngleToSegments(a,d){d=$k/d;a=Math.floor((Dm.clampRadians(a)+d/2)/d)*d%$k;a<Gl&&(a+=$k);a>Gl&&(a-=$k);return a}static isAngleBetween(a,d,n){if(n===a||n===d)return!0;d=(d-a+Rn)%Rn;return d<=Gl!==(n-a+Rn)%Rn>d}static degreesToRadians(a){return a*Gl/180}static radiansToDegrees(a){return 180*a/Gl}static getArcLength(a,d,n,S){a=Dm.getSweep(a,n,S);return a/$k*$k*d}static getSweepFlag(a,d,n){n=Fe.angle(a,
n);return 0<(Fe.angle(a,d)-n+3*Gl)%$k-Gl?0:1}static getLargeArcFlag(a,d,n){a=Fe.angle(n,a);d=(Fe.angle(n,d)-a+3*Gl)%$k-Gl;return Math.abs(d)>Rn?0:1}static getArcDashOffset(a,d,n,S,fa){const la=Dm.getSweepFlag(a,n,S);d=Dm.getArcLength(a,d,n,S);return-(0>la?d:$k*a[2]-d)/2+fa}static getEllipseDashOffset(a,d){return-($k*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},tl=class{static getPolygonCentroid(a){var d=
a.map(n=>n[0]);a=a.map(n=>n[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+Math.max(...a);return[d?d/2:0,a?a/2:0]}};Bb(tl,"getEdges",a=>{const d=a.length;return a.map((n,S)=>[n,a[(S+1)%d]])});Bb(tl,"getEdgeOutwardNormal",(a,d)=>Fe.per(Fe.uni(Fe.sub(d,a))));Bb(tl,"getEdgeInwardNormal",(a,d)=>Fe.neg(tl.getEdgeOutwardNormal(a,d)));Bb(tl,"getOffsetEdge",(a,d,n)=>{n=Fe.mul(Fe.per(Fe.uni(Fe.sub(d,a))),n);return[Fe.add(a,n),Fe.add(d,n)]});Bb(tl,"getOffsetEdges",(a,d)=>a.map(([n,S])=>tl.getOffsetEdge(n,
S,d)));Bb(tl,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[Fe.add(a,[-d,-d]),Fe.add(a,[d,-d]),Fe.add(a,[d,d]),Fe.add(a,[-d,d])];if(2===a.length){const [n,S]=a;return[...tl.getOffsetEdge(n,S,d),...tl.getOffsetEdge(S,n,d)]}return tl.getOffsetEdges(tl.getEdges(a),d).flatMap((n,S,fa)=>{{S=fa[(S+1)%fa.length];const la=ee.slope(n[0],n[1]);fa=ee.slope(S[0],S[1]);la!==fa?Number.isNaN(la)&&!Number.isNaN(fa)?n=[n[0][0],(n[0][0]-S[0][0])*
fa+S[0][1]]:Number.isNaN(fa)&&!Number.isNaN(la)?n=[S[0][0],(S[0][0]-n[0][0])*la+n[0][1]]:(n=(la*n[0][0]-fa*S[0][0]+S[0][1]-n[0][1])/(la-fa),n=[n,fa*(n-S[0][0])+S[0][1]]):n=void 0}if(void 0===n)throw Error("Expected an intersection");return n})});Bb(tl,"getPolygonVertices",(a,d,n=0,S=1)=>{a=Fe.div(a,2);const [fa,la]=[Math.max(1,a[0]-n),Math.max(1,a[1]-n)];n=[];for(let qb=0,xb=$k/d;qb<d;qb++){var va=(-Rn+qb*xb)%$k,Na=(-Rn+(qb+1)*xb)%$k;va=Fe.add(a,[fa*Math.cos(va),la*Math.sin(va)]);Na=Fe.add(a,[fa*
Math.cos(Na),la*Math.sin(Na)]);var cb=Fe.med(va,Na);cb=Fe.nudge(cb,a,Fe.dist(a,cb)*(1-S));n.push(va,cb,Na)}return n});Bb(tl,"getTriangleVertices",(a,d=0,n=1)=>{const [S,fa]=a;var la=1-n;a=[S/2,d/2];n=[S-d,fa-d];d=[d/2,fa-d];const va=tl.getPolygonCentroid([a,n,d]),Na=Fe.med(a,n),cb=Fe.med(n,d),qb=Fe.med(d,a),xb=Fe.dist(Na,va)*la,Eb=Fe.dist(cb,va)*la;la*=Fe.dist(qb,va);return[a,xb?Fe.nudge(Na,va,xb):Na,n,Eb?Fe.nudge(cb,va,Eb):cb,d,la?Fe.nudge(qb,va,la):qb]});Bb(tl,"getStarVertices",(a,d,n,S=1)=>{const fa=
Fe.div(d,2),la=Fe.mul(fa,S/2),va=$k/n/2;return Array.from(Array(2*n)).map((Na,cb)=>{Na=-Rn+cb*va;const [qb,xb]=cb%2?la:fa;return Fe.add(a,[qb*Math.cos(Na),xb*Math.sin(Na)])})});var Nu=class{static getCurvedPathForPolygon(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],n=a.length;for(let S=1;S<n;S++){const [fa,la]=a[S],[va,Na]=a[(S+1)%n];d.push(fa,la,(fa+va)/2,(la+Na)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>
a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],n=a.length;for(let S=1;S<n-1;S++){const [fa,la]=a[S],[va,Na]=a[S+1];d.push(fa,la,(fa+va)/2,(la+Na)/2)}return d.join(" ")}static getSvgPathFromStroke(a,d=!0){const n=a.length;if(4>n)return"";let S=a[0],fa=a[1];var la=a[2];la=`M${S[0].toFixed(2)},${S[1].toFixed(2)} Q${fa[0].toFixed(2)},${fa[1].toFixed(2)} ${((fa[0]+la[0])/2).toFixed(2)},${((fa[1]+la[1])/2).toFixed(2)} T`;for(let va=2,Na=n-1;va<
Na;va++)S=a[va],fa=a[va+1],la+=`${((S[0]+fa[0])/2).toFixed(2)},${((S[1]+fa[1])/2).toFixed(2)} `;d&&(la+="Z");return la}static getSvgPathFromStrokePoints(a,d=!1){const n=a.length;if(4>n)return"";let S=a[0].point,fa=a[1].point;var la=a[2].point;la=`M${S[0].toFixed(2)},${S[1].toFixed(2)} Q${fa[0].toFixed(2)},${fa[1].toFixed(2)} ${((fa[0]+la[0])/2).toFixed(2)},${((fa[1]+la[1])/2).toFixed(2)} T`;for(let va=2,Na=n-1;va<Na;va++)S=a[va].point,fa=a[va+1].point,la+=`${((S[0]+fa[0])/2).toFixed(2)},${((S[1]+
fa[1])/2).toFixed(2)} `;d&&(la+="Z");return la}};Bb(Nu,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var ox={},px=Object.assign,iq=Object.getOwnPropertyDescriptor,zp=Object.defineProperty,jq=Object.prototype,ea=[];Object.freeze(ea);var oa={};Object.freeze(oa);var La="undefined"!==typeof Proxy,Ab=Object.toString(),dc=function(){},Xc="undefined"!==typeof Object.getOwnPropertySymbols,sd="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Xc?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:
Object.getOwnPropertyNames,Hd=Object.getOwnPropertyDescriptors||function(a){var d={};sd(a).forEach(function(n){d[n]=iq(a,n)});return d},ie=Symbol("mobx-stored-annotations"),De=Symbol("mobx administration"),jh=function(){function a(n){void 0===n&&(n="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=dk.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=n}var d=a.prototype;d.onBO=
function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};d.reportObserved=function(){return mb(this)};d.reportChanged=function(){Tb();zb(this);Ib()};d.toString=function(){return this.name_};return a}(),Ai=H("Atom",jh),dg={identity:function(a,d){return a===d},structural:function(a,d){return wa(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,
d){return wa(a,d,1)}},Ph="override",Di=Ea(),ei={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(ei);var Re=nb("observable"),xe=nb("observable.ref",{enhancer:Pa}),Pe=nb("observable.shallow",{enhancer:function(a,d,n){if(void 0===a||null===a||de(a)||Tc(a)||Ir(a)||Qs(a))return a;if(Array.isArray(a))return Ff.array(a,{name:n,deep:!1});if(P(a))return Ff.object(a,void 0,{name:n,deep:!1});if(N(a))return Ff.map(a,{name:n,deep:!1});if(O(a))return Ff.set(a,{name:n,deep:!1})}}),Xf=nb("observable.struct",
{enhancer:function(a,d){return wa(a,d)?d:a}}),fg=Aa(Re);Object.assign(lb,fg);var Ti={box:function(a,d){d=d||ei;return new Os(a,Za(d),d.name,!0,d.equals)},array:function(a,d){d=d||ei;return(!1===Cg.useProxies||!1===d.proxy?Ub:db)(a,Za(d),d.name)},map:function(a,d){d=d||ei;return new Oz(a,Za(d),d.name)},set:function(a,d){d=d||ei;return new Pz(a,Za(d),d.name)},object:function(a,d,n){if(!1===Cg.useProxies||!1===(null==n?void 0:n.proxy))n=wd({},n);else{var S={},fa,la;z();S=wd(S,n);n=null!=(la=(fa=S[De]).proxy_)?
la:fa.proxy_=new Proxy(S,tE)}return Ac(n,a,d)},ref:Aa(xe),shallow:Aa(Pe),deep:fg,struct:Aa(Xf)},Ff=px(lb,Ti),Fi=Xa("computed"),nj=Xa("computed.struct",{equals:dg.structural}),sg=function(a,d){if(J(d))return Ja(a,d,Fi);if(P(a))return Aa(Xa("computed",a));d=P(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new Ou(d)};Object.assign(sg,Fi);sg.struct=Aa(nj);var Ap,Qv,Rv=0,gE=1,hE=null!=(Ap=null==(Qv=iq(function(){},"name"))?void 0:Qv.configurable)?Ap:!1,Iz={value:"action",configurable:!0,writable:!1,
enumerable:!1};var iE=Symbol.toPrimitive;var Os=function(a){function d(S,fa,la,va,Na){void 0===la&&(la="ObservableValue");void 0===Na&&(Na=dg["default"]);va=a.call(this,la)||this;va.enhancer=void 0;va.hasUnreportedChange_=!1;va.interceptors_=void 0;va.changeListeners_=void 0;va.value_=void 0;va.dehancer=void 0;va.enhancer=fa;va.name_=la;va.equals=Na;va.value_=fa(S,void 0,la);return va}ia(d,a);var n=d.prototype;n.dehanceValue=function(S){return void 0!==this.dehancer?this.dehancer(S):S};n.set=function(S){S=
this.prepareNewValue_(S);S!==Cg.UNCHANGED&&this.setNewValue_(S)};n.prepareNewValue_=function(S){if(ob(this)){S=Sa(this,{object:this,type:kq,newValue:S});if(!S)return Cg.UNCHANGED;S=S.newValue}S=this.enhancer(S,this.value_,this.name_);return this.equals(this.value_,S)?Cg.UNCHANGED:S};n.setNewValue_=function(S){var fa=this.value_;this.value_=S;this.reportChanged();Hb(this)&&Yb(this,{type:kq,object:this,newValue:S,oldValue:fa})};n.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};
n.intercept_=function(S){return wb(this,S)};n.observe_=function(S,fa){fa&&S({observableKind:"value",debugObjectName:this.name_,object:this,type:kq,newValue:this.value_,oldValue:void 0});return Jb(this,S)};n.raw=function(){return this.value_};n.toJSON=function(){return this.get()};n.toString=function(){return this.name_+"["+this.value_+"]"};n.valueOf=function(){return ja(this.get())};n[iE]=function(){return this.valueOf()};return d}(jh),jE=H("ObservableValue",Os);var kE=Symbol.toPrimitive;var Ou=function(){function a(n){this.dependenciesState_=
dk.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=dk.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Ps(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=Kt.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=
void 0;n.get||e(31);this.derivation=n.get;this.name_=n.name||"ComputedValue";n.set&&(this.setter_=$a("ComputedValue-setter",n.set));this.equals_=n.equals||(n.compareStructural||n.struct?dg.structural:dg["default"]);this.scope_=n.context;this.requiresReaction_=n.requiresReaction;this.keepAlive_=!!n.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){jb(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};
d.get=function(){this.isComputing_&&e(32,this.name_,this.derivation);if(0!==Cg.inBatch||0!==this.observers_.size||this.keepAlive_){if(mb(this),bd(this)){var n=Cg.trackingContext;this.keepAlive_&&!n&&(Cg.trackingContext=this);this.trackAndCompute()&&Cb(this);Cg.trackingContext=n}}else bd(this)&&(this.warnAboutUntrackedRead_(),Tb(),this.value_=this.computeValue_(!1),Ib());n=this.value_;if(n instanceof Ps)throw n.cause;return n};d.set=function(n){if(this.setter_){this.isRunningSetter_&&e(33,this.name_);
this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else e(34,this.name_)};d.trackAndCompute=function(){var n=this.value_,S=this.dependenciesState_===dk.NOT_TRACKING_,fa=this.computeValue_(!0);if(n=S||n instanceof Ps||fa instanceof Ps||!this.equals_(n,fa))this.value_=fa;return n};d.computeValue_=function(n){this.isComputing_=!0;var S=ed(!1);if(n)var fa=Oc(this,this.derivation,this.scope_);else if(!0===Cg.disableErrorBoundaries)fa=this.derivation.call(this.scope_);
else try{fa=this.derivation.call(this.scope_)}catch(la){fa=new Ps(la)}Cg.allowStateChanges=S;this.isComputing_=!1;return fa};d.suspend_=function(){this.keepAlive_||(Qc(this),this.value_=void 0)};d.observe_=function(n,S){var fa=this,la=!0,va=void 0;return rc(function(){var Na=fa.get();if(!la||S){var cb=Ya();n({observableKind:"computed",debugObjectName:fa.name_,type:kq,object:fa,newValue:Na,oldValue:va});Cg.trackingDerivation=cb}la=!1;va=Na})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+
"["+this.derivation.toString()+"]"};d.valueOf=function(){return ja(this.get())};d[kE]=function(){return this.valueOf()};return a}(),Pu=H("ComputedValue",Ou),dk;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(dk||={});var Kt;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(Kt||={});var Ps=function(a){this.cause=void 0;this.cause=a},Sv=function(){this.version=6;this.UNCHANGED=
{};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=
!0},Tv=!0,Jz=!1,Cg=function(){var a=I();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&(Tv=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new Sv).version&&(Tv=!1);if(Tv){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED={}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new Sv}setTimeout(function(){Jz||e(35)},1);return new Sv}(),Lt=function(){function a(n,S,fa,la){void 0===n&&(n="Reaction");this.requiresObservable_=this.errorHandler_=
this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=dk.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=Kt.NONE;this.name_=n;this.onInvalidate_=S;this.errorHandler_=fa;this.requiresObservable_=la}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Cg.pendingReactions.push(this),
0<Cg.inBatch||Cg.isRunningReactions||Uv(tb))};d.isScheduled=function(){return this.isScheduled_};d.runReaction_=function(){if(!this.isDisposed_){Tb();this.isScheduled_=!1;var n=Cg.trackingContext;Cg.trackingContext=this;if(bd(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(S){this.reportExceptionInDerivation_(S)}}Cg.trackingContext=n;Ib()}};d.track=function(n){if(!this.isDisposed_){Tb();this.isRunning_=!0;var S=Cg.trackingContext;Cg.trackingContext=this;n=Oc(this,n,void 0);Cg.trackingContext=
S;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Qc(this);n instanceof Ps&&this.reportExceptionInDerivation_(n.cause);Ib()}};d.reportExceptionInDerivation_=function(n){var S=this;if(this.errorHandler_)this.errorHandler_(n,this);else{if(Cg.disableErrorBoundaries)throw n;Cg.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",n);Cg.globalReactionErrorHandlers.forEach(function(fa){return fa(n,S)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||
(Tb(),Qc(this),Ib()))};d.getDisposer_=function(){var n=this.dispose.bind(this);n[De]=this;return n};d.toString=function(){return"Reaction["+this.name_+"]"};d.trace=function(n){void 0===n&&(n=!1);Cc(this,n)};return a}(),lE=100,Uv=function(a){return a()},Vv=H("Reaction",Lt),Kz="action",Lz=Da(Kz),mE=Da("action.bound",{bound:!0}),Mz=Da("autoAction",{autoAction:!0}),nE=Da("autoAction.bound",{autoAction:!0,bound:!0}),qh=Gc(!1);Object.assign(qh,Lz);var Qu=Gc(!0);Object.assign(Qu,Mz);qh.bound=Aa(mE);Qu.bound=
Aa(nE);var oE=function(a){return a()},pE="onBO",qE="onBUO",rE=0;Kc.prototype=Object.create(Error.prototype);var Nz=qa("flow"),sE=qa("flow.bound",{bound:!0}),Ru=Object.assign(function(a,d){if(J(d))return Ja(a,d,Nz);var n=a.name||"\x3cunnamed flow\x3e";d=function(){var S=arguments,fa=++rE,la=qh(n+" - runid: "+fa+" - init",a).apply(this,S),va,Na=void 0;S=new Promise(function(cb,qb){function xb(hc){Na=void 0;try{var Rc=qh(n+" - runid: "+fa+" - yield "+oc++,la.next).call(la,hc)}catch(hd){return qb(hd)}jc(Rc)}
function Eb(hc){Na=void 0;try{var Rc=qh(n+" - runid: "+fa+" - yield "+oc++,la["throw"]).call(la,hc)}catch(hd){return qb(hd)}jc(Rc)}function jc(hc){if(V(null==hc?void 0:hc.then))hc.then(jc,qb);else{if(hc.done)return cb(hc.value);Na=Promise.resolve(hc.value);return Na.then(xb,Eb)}}var oc=0;va=qb;xb(void 0)});S.cancel=qh(n+" - runid: "+fa+" - cancel",function(){try{if(Na){var cb=Na;V(cb.cancel)&&cb.cancel()}var qb=la["return"](void 0),xb=Promise.resolve(qb.value);xb.then(dc,dc);V(xb.cancel)&&xb.cancel();
va(new Kc)}catch(Eb){va(Eb)}});return S};d.isMobXFlow=!0;return d},Nz);Ru.bound=Aa(sE);var tE={has:function(a,d){return a[De].has_(d)},get:function(a,d){return a[De].get_(d)},set:function(a,d,n){var S;return J(d)?null!=(S=a[De].set_(d,n,!0))?S:!0:!1},deleteProperty:function(a,d){var n;return J(d)?null!=(n=a[De].delete_(d,!0))?n:!0:!1},defineProperty:function(a,d,n){var S;return null!=(S=a[De].defineProperty_(d,n))?S:!0},ownKeys:function(a){return a[De].ownKeys_()},preventExtensions:function(a){e(13)}},
kq="update",uE={get:function(a,d){var n=a[De];return d===De?n:"length"===d?n.getArrayLength_():"string"!==typeof d||isNaN(d)?W(Wv,d)?Wv[d]:a[d]:n.get_(parseInt(d))},set:function(a,d,n){var S=a[De];"length"===d&&S.setArrayLength_(n);"symbol"===typeof d||isNaN(d)?a[d]=n:S.set_(parseInt(d),n);return!0},preventExtensions:function(){e(15)}},qx=function(){function a(n,S,fa,la){void 0===n&&(n="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=
this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=fa;this.legacyMode_=la;this.atom_=new jh(n);this.enhancer_=function(va,Na){return S(va,Na,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};d.dehanceValues_=function(n){return void 0!==this.dehancer&&0<n.length?n.map(this.dehancer):n};d.intercept_=function(n){return wb(this,n)};d.observe_=function(n,S){void 0===S&&(S=!1);S&&n({observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Jb(this,n)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(n){("number"!==typeof n||isNaN(n)||0>n)&&e("Out of range: "+n);var S=this.values_.length;if(n!==S)if(n>S){for(var fa=Array(n-S),la=0;la<n-S;la++)fa[la]=void 0;this.spliceWithArray_(S,0,fa)}else this.spliceWithArray_(n,
S-n)};d.updateArrayLength_=function(n,S){n!==this.lastKnownLength_&&e(16);this.lastKnownLength_+=S;this.legacyMode_&&0<S&&Ed(n+S+1)};d.spliceWithArray_=function(n,S,fa){var la=this,va=this.values_.length;void 0===n?n=0:n>va?n=va:0>n&&(n=Math.max(0,va+n));S=1===arguments.length?va-n:void 0===S||null===S?0:Math.max(0,Math.min(S,va-n));void 0===fa&&(fa=ea);if(ob(this)){var Na=Sa(this,{object:this.proxy_,type:"splice",index:n,removedCount:S,added:fa});if(!Na)return ea;S=Na.removedCount;fa=Na.added}fa=
0===fa.length?fa:fa.map(function(cb){return la.enhancer_(cb,void 0)});this.legacyMode_&&this.updateArrayLength_(va,fa.length-S);va=this.spliceItemsIntoValues_(n,S,fa);0===S&&0===fa.length||this.notifyArraySplice_(n,fa,va);return this.dehanceValues_(va)};d.spliceItemsIntoValues_=function(n,S,fa){if(1E4>fa.length){var la;return(la=this.values_).splice.apply(la,[n,S].concat(fa))}la=this.values_.slice(n,n+S);var va=this.values_.slice(n+S);this.values_.length+=fa.length-S;for(S=0;S<fa.length;S++)this.values_[n+
S]=fa[S];for(S=0;S<va.length;S++)this.values_[n+fa.length+S]=va[S];return la};d.notifyArrayChildUpdate_=function(n,S,fa){var la=!this.owned_&&!1,va=Hb(this);n=va||la?{observableKind:"array",object:this.proxy_,type:kq,debugObjectName:this.atom_.name_,index:n,newValue:S,oldValue:fa}:null;this.atom_.reportChanged();va&&Yb(this,n)};d.notifyArraySplice_=function(n,S,fa){var la=!this.owned_&&!1,va=Hb(this);n=va||la?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",
index:n,removed:fa,added:S,removedCount:fa.length,addedCount:S.length}:null;this.atom_.reportChanged();va&&Yb(this,n)};d.get_=function(n){if(this.legacyMode_&&n>=this.values_.length)console.warn("[mobx] Out of bounds read: "+n);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])};d.set_=function(n,S){var fa=this.values_;this.legacyMode_&&n>fa.length&&e(17,n,fa.length);if(n<fa.length){var la=fa[n];if(ob(this)){S=Sa(this,{type:kq,object:this.proxy_,index:n,newValue:S});if(!S)return;
S=S.newValue}S=this.enhancer_(S,la);S!==la&&(fa[n]=S,this.notifyArrayChildUpdate_(n,S,la))}else{n=Array(n+1-fa.length);for(la=0;la<n.length-1;la++)n[la]=void 0;n[n.length-1]=S;this.spliceWithArray_(fa.length,0,n)}};return a}(),Wv={clear:function(){return this.splice(0)},replace:function(a){var d=this[De];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},splice:function(a,d){for(var n=arguments.length,S=Array(2<n?n-2:0),fa=2;fa<n;fa++)S[fa-2]=arguments[fa];n=this[De];
switch(arguments.length){case 0:return[];case 1:return n.spliceWithArray_(a);case 2:return n.spliceWithArray_(a,d)}return n.spliceWithArray_(a,d,S)},spliceWithArray:function(a,d,n){return this[De].spliceWithArray_(a,d,n)},push:function(){for(var a=this[De],d=arguments.length,n=Array(d),S=0;S<d;S++)n[S]=arguments[S];a.spliceWithArray_(a.values_.length,0,n);return a.values_.length},pop:function(){return this.splice(Math.max(this[De].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},
unshift:function(){for(var a=this[De],d=arguments.length,n=Array(d),S=0;S<d;S++)n[S]=arguments[S];a.spliceWithArray_(0,0,n);return a.values_.length},reverse:function(){Cg.trackingDerivation&&e(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){Cg.trackingDerivation&&e(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[De];a=d.dehanceValues_(d.values_).indexOf(a);return-1<a?(this.splice(a,1),!0):!1}};fb("concat",
Ua);fb("flat",Ua);fb("includes",Ua);fb("indexOf",Ua);fb("join",Ua);fb("lastIndexOf",Ua);fb("slice",Ua);fb("toString",Ua);fb("toLocaleString",Ua);fb("every",pb);fb("filter",pb);fb("find",pb);fb("findIndex",pb);fb("flatMap",pb);fb("forEach",pb);fb("map",pb);fb("some",pb);fb("reduce",Gb);fb("reduceRight",Gb);var vE=H("ObservableArrayAdministration",qx),wE={};var xE=Symbol.iterator;var yE=Symbol.toStringTag;var Oz=function(){function a(n,S,fa){var la=this;void 0===S&&(S=Ha);void 0===fa&&(fa="ObservableMap");
this.name_=this.enhancer_=void 0;this[De]=wE;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=S;this.name_=fa;V(Map)||e(18);this.keysAtom_=hb("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;ec(!0,function(){la.merge(n)})}var d=a.prototype;d.has_=function(n){return this.data_.has(n)};d.has=function(n){var S=this;if(!Cg.trackingDerivation)return this.has_(n);var fa=this.hasMap_.get(n);if(!fa){var la=fa=new Os(this.has_(n),
Pa,"ObservableMap.key?",!1);this.hasMap_.set(n,la);Bd(la,function(){return S.hasMap_["delete"](n)})}return fa.get()};d.set=function(n,S){var fa=this.has_(n);if(ob(this)){S=Sa(this,{type:fa?kq:"add",object:this,newValue:S,name:n});if(!S)return this;S=S.newValue}fa?this.updateValue_(n,S):this.addValue_(n,S);return this};d["delete"]=function(n){var S=this;if(ob(this)&&!Sa(this,{type:"delete",object:this,name:n}))return!1;if(this.has_(n)){var fa=Hb(this),la=fa?{observableKind:"map",debugObjectName:this.name_,
type:"delete",object:this,oldValue:this.data_.get(n).value_,name:n}:null;$b(function(){var va;S.keysAtom_.reportChanged();null==(va=S.hasMap_.get(n))?void 0:va.setNewValue_(!1);S.data_.get(n).setNewValue_(void 0);S.data_["delete"](n)});fa&&Yb(this,la);return!0}return!1};d.updateValue_=function(n,S){var fa=this.data_.get(n);S=fa.prepareNewValue_(S);if(S!==Cg.UNCHANGED){var la=Hb(this);n=la?{observableKind:"map",debugObjectName:this.name_,type:kq,object:this,oldValue:fa.value_,name:n,newValue:S}:null;
fa.setNewValue_(S);la&&Yb(this,n)}};d.addValue_=function(n,S){var fa=this;$b(function(){var Na,cb=new Os(S,fa.enhancer_,"ObservableMap.key",!1);fa.data_.set(n,cb);S=cb.value_;null==(Na=fa.hasMap_.get(n))?void 0:Na.setNewValue_(!0);fa.keysAtom_.reportChanged()});var la=Hb(this),va=la?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:n,newValue:S}:null;la&&Yb(this,va)};d.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)};
d.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var n=this,S=this.keys();return eb({next:function(){var fa=S.next(),la=fa.done;fa=fa.value;return{done:la,value:la?void 0:n.get(fa)}}})};d.entries=function(){var n=this,S=this.keys();return eb({next:function(){var fa=S.next(),la=fa.done;fa=fa.value;return{done:la,value:la?void 0:[fa,n.get(fa)]}}})};d[xE]=function(){return this.entries()};
d.forEach=function(n,S){for(var fa=ua(this),la;!(la=fa()).done;)la=la.value,n.call(S,la[1],la[0],this)};d.merge=function(n){var S=this;Ir(n)&&(n=new Map(n));$b(function(){P(n)?L(n).forEach(function(fa){return S.set(fa,n[fa])}):Array.isArray(n)?n.forEach(function(fa){return S.set(fa[0],fa[1])}):N(n)?(n.constructor!==Map&&e(19,n),n.forEach(function(fa,la){return S.set(la,fa)})):null!==n&&void 0!==n&&e(20,n)});return this};d.clear=function(){var n=this;$b(function(){Wa(function(){for(var S=ua(n.keys()),
fa;!(fa=S()).done;)n["delete"](fa.value)})})};d.replace=function(n){var S=this;$b(function(){for(var fa=nd(n),la=new Map,va=!1,Na=ua(S.data_.keys()),cb;!(cb=Na()).done;)if(cb=cb.value,!fa.has(cb))if(S["delete"](cb))va=!0;else{var qb=S.data_.get(cb);la.set(cb,qb)}for(fa=ua(fa.entries());!(Na=fa()).done;)cb=Na.value,Na=cb[0],qb=cb[1],cb=S.data_.has(Na),S.set(Na,qb),S.data_.has(Na)&&(qb=S.data_.get(Na),la.set(Na,qb),cb||(va=!0));if(!va)if(S.data_.size!==la.size)S.keysAtom_.reportChanged();else for(va=
S.data_.keys(),fa=la.keys(),Na=va.next(),cb=fa.next();!Na.done;){if(Na.value!==cb.value){S.keysAtom_.reportChanged();break}Na=va.next();cb=fa.next()}S.data_=la});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(n,S){return Jb(this,n)};d.intercept_=function(n){return wb(this,n)};ba(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:yE,get:function(){return"Map"}}]);return a}(),
Ir=H("ObservableMap",Oz),zE={};var AE=Symbol.iterator;var BE=Symbol.toStringTag;var Pz=function(){function a(n,S,fa){void 0===S&&(S=Ha);void 0===fa&&(fa="ObservableSet");this.name_=void 0;this[De]=zE;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=fa;V(Set)||e(22);this.atom_=hb(this.name_);this.enhancer_=function(la,va){return S(la,va,fa)};n&&this.replace(n)}var d=a.prototype;d.dehanceValue_=function(n){return void 0!==this.dehancer?
this.dehancer(n):n};d.clear=function(){var n=this;$b(function(){Wa(function(){for(var S=ua(n.data_.values()),fa;!(fa=S()).done;)n["delete"](fa.value)})})};d.forEach=function(n,S){for(var fa=ua(this),la;!(la=fa()).done;)la=la.value,n.call(S,la,la,this)};d.add=function(n){var S=this;if(ob(this)&&!Sa(this,{type:"add",object:this,newValue:n}))return this;if(!this.has(n)){$b(function(){S.data_.add(S.enhancer_(n,void 0));S.atom_.reportChanged()});var fa=Hb(this),la=fa?{observableKind:"set",debugObjectName:this.name_,
type:"add",object:this,newValue:n}:null;fa&&Yb(this,la)}return this};d["delete"]=function(n){var S=this;if(ob(this)&&!Sa(this,{type:"delete",object:this,oldValue:n}))return!1;if(this.has(n)){var fa=Hb(this),la=fa?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:n}:null;$b(function(){S.atom_.reportChanged();S.data_["delete"](n)});fa&&Yb(this,la);return!0}return!1};d.has=function(n){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(n))};d.entries=
function(){var n=0,S=Array.from(this.keys()),fa=Array.from(this.values());return eb({next:function(){var la=n;n+=1;return la<fa.length?{value:[S[la],fa[la]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var n=this,S=0,fa=Array.from(this.data_.values());return eb({next:function(){return S<fa.length?{value:n.dehanceValue_(fa[S++]),done:!1}:{done:!0}}})};d.replace=function(n){var S=this;Qs(n)&&(n=new Set(n));$b(function(){Array.isArray(n)?
(S.clear(),n.forEach(function(fa){return S.add(fa)})):O(n)?(S.clear(),n.forEach(function(fa){return S.add(fa)})):null!==n&&void 0!==n&&e("Cannot initialize set from "+n)});return this};d.observe_=function(n,S){return Jb(this,n)};d.intercept_=function(n){return wb(this,n)};d.toJSON=function(){return Array.from(this)};d.toString=function(){return"[object ObservableSet]"};d[AE]=function(){return this.values()};ba(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:BE,
get:function(){return"Set"}}]);return a}(),Qs=H("ObservableSet",Pz),Qz=Object.create(null),Rz=function(){function a(n,S,fa,la){void 0===S&&(S=new Map);void 0===la&&(la=Di);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=n;this.values_=S;this.name_=fa;this.defaultAnnotation_=la;this.keysAtom_=new jh("ObservableObject.keys");this.isPlainObject_=P(this.target_)}
var d=a.prototype;d.getObservablePropValue_=function(n){return this.values_.get(n).get()};d.setObservablePropValue_=function(n,S){var fa=this.values_.get(n);if(fa instanceof Ou)return fa.set(S),!0;if(ob(this)){S=Sa(this,{type:kq,object:this.proxy_||this.target_,name:n,newValue:S});if(!S)return null;S=S.newValue}S=fa.prepareNewValue_(S);if(S!==Cg.UNCHANGED){var la=Hb(this);n=la?{type:kq,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:fa.value_,name:n,newValue:S}:
null;fa.setNewValue_(S);la&&Yb(this,n)}return!0};d.get_=function(n){Cg.trackingDerivation&&!W(this.target_,n)&&this.has_(n);return this.target_[n]};d.set_=function(n,S,fa){void 0===fa&&(fa=!1);if(W(this.target_,n)){if(this.values_.has(n))return this.setObservablePropValue_(n,S);if(fa)return Reflect.set(this.target_,n,S);this.target_[n]=S;return!0}return this.extend_(n,{value:S,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,fa)};d.has_=function(n){if(!Cg.trackingDerivation)return n in
this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var S=this.pendingKeys_.get(n);S||(S=new Os(n in this.target_,Pa,"ObservableObject.key?",!1),this.pendingKeys_.set(n,S));return S.get()};d.make_=function(n,S){!0===S&&(S=this.defaultAnnotation_);if(!1!==S){if(!(n in this.target_)){var fa;if(null!=(fa=this.target_[ie])&&fa[n])return;e(1,S.annotationType_,this.name_+"."+n.toString())}for(fa=this.target_;fa&&fa!==jq;){var la=iq(fa,n);if(la){la=S.make_(this,n,la,fa);if(0===la)return;if(1===la)break}fa=
Object.getPrototypeOf(fa)}var va;null==(va=this.target_[ie])?!0:delete va[n]}};d.extend_=function(n,S,fa,la){void 0===la&&(la=!1);!0===fa&&(fa=this.defaultAnnotation_);if(!1===fa)return this.defineProperty_(n,S,la);if(S=fa.extend_(this,n,S,la)){var va;null==(va=this.target_[ie])?!0:delete va[n]}return S};d.defineProperty_=function(n,S,fa){void 0===fa&&(fa=!1);try{Tb();var la=this.delete_(n);if(!la)return la;if(ob(this)){var va=Sa(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:S.value});
if(!va)return null;var Na=va.newValue;S.value!==Na&&(S=Y({},S,{value:Na}))}if(fa){if(!Reflect.defineProperty(this.target_,n,S))return!1}else zp(this.target_,n,S);this.notifyPropertyAddition_(n,S.value)}finally{Ib()}return!0};d.defineObservableProperty_=function(n,S,fa,la){void 0===la&&(la=!1);try{Tb();var va=this.delete_(n);if(!va)return va;if(ob(this)){var Na=Sa(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:S});if(!Na)return null;S=Na.newValue}var cb=Rd(n),qb={configurable:Cg.safeDescriptors?
this.isPlainObject_:!0,enumerable:!0,get:cb.get,set:cb.set};if(la){if(!Reflect.defineProperty(this.target_,n,qb))return!1}else zp(this.target_,n,qb);var xb=new Os(S,fa,"ObservableObject.key",!1);this.values_.set(n,xb);this.notifyPropertyAddition_(n,xb.value_)}finally{Ib()}return!0};d.defineComputedProperty_=function(n,S,fa){void 0===fa&&(fa=!1);try{Tb();var la=this.delete_(n);if(!la)return la;if(ob(this)&&!Sa(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:void 0}))return null;S.name||
(S.name="ObservableObject.key");S.context=this.proxy_||this.target_;var va=Rd(n),Na={configurable:Cg.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:va.get,set:va.set};if(fa){if(!Reflect.defineProperty(this.target_,n,Na))return!1}else zp(this.target_,n,Na);this.values_.set(n,new Ou(S));this.notifyPropertyAddition_(n,void 0)}finally{Ib()}return!0};d.delete_=function(n,S){void 0===S&&(S=!1);if(!W(this.target_,n))return!0;if(ob(this)&&!Sa(this,{object:this.proxy_||this.target_,name:n,type:"remove"}))return null;
try{var fa,la;Tb();var va=Hb(this),Na=this.values_.get(n),cb=void 0;if(!Na&&va){var qb;cb=null==(qb=iq(this.target_,n))?void 0:qb.value}if(S){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];Na&&(this.values_["delete"](n),Na instanceof Os&&(cb=Na.value_),zb(Na));this.keysAtom_.reportChanged();null==(fa=this.pendingKeys_)?void 0:null==(la=fa.get(n))?void 0:la.set(n in this.target_);if(va){var xb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,
debugObjectName:this.name_,oldValue:cb,name:n};va&&Yb(this,xb)}}finally{Ib()}return!0};d.observe_=function(n,S){return Jb(this,n)};d.intercept_=function(n){return wb(this,n)};d.notifyPropertyAddition_=function(n,S){var fa,la,va=Hb(this);va&&(S=va?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:S}:null,va&&Yb(this,S));null==(fa=this.pendingKeys_)?void 0:null==(la=fa.get(n))?void 0:la.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=
function(){this.keysAtom_.reportObserved();return sd(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return a}(),CE=H("ObservableObjectAdministration",Rz),DE=be(0),rx=0,Sz=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,d):void 0!==a.prototype.__proto__?a.prototype.__proto__=d:a.prototype=d})(Sz,Array.prototype);var sx=function(a,d,n){function S(la,va,Na,cb){void 0===Na&&(Na="ObservableArray");void 0===cb&&(cb=
!1);var qb=a.call(this)||this;va=new qx(Na,va,cb,!0);va.proxy_=ha(qb);F(ha(qb),De,va);la&&la.length&&(va=ed(!0),qb.spliceWithArray(0,0,la),Cg.allowStateChanges=va);Object.defineProperty(ha(qb),"0",DE);return qb}ia(S,a);var fa=S.prototype;fa.concat=function(){this[De].atom_.reportObserved();for(var la=arguments.length,va=Array(la),Na=0;Na<la;Na++)va[Na]=arguments[Na];return Array.prototype.concat.apply(this.slice(),va.map(function(cb){return Tc(cb)?cb.slice():cb}))};fa[n]=function(){var la=this,va=
0;return eb({next:function(){return va<la.length?{value:la[va++],done:!1}:{done:!0,value:void 0}}})};ba(S,[{key:"length",get:function(){return this[De].getArrayLength_()},set:function(la){this[De].setArrayLength_(la)}},{key:d,get:function(){return"Array"}}]);return S}(Sz,Symbol.toStringTag,Symbol.iterator);Object.entries(Wv).forEach(function(a){var d=a[0];a=a[1];"concat"!==d&&u(sx.prototype,d,a)});Ed(1E3);var Tz=jq.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof I()[a]&&e("MobX requires global '"+
a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:nc,extras:{getDebugName:gb},$mobx:De});var EE=ca(612),Em=class{constructor(a){Bb(this,"props");Bb(this,"aspectRatio");Bb(this,"type");Bb(this,"hideCloneHandles",!1);Bb(this,"hideResizeHandles",!1);Bb(this,"hideRotateHandle",!1);Bb(this,"hideContextBar",!1);Bb(this,"hideSelectionDetail",!1);Bb(this,"hideSelection",!1);Bb(this,"canChangeAspectRatio",!0);Bb(this,"canUnmount",
!0);Bb(this,"canResize",[!0,!0]);Bb(this,"canScale",!0);Bb(this,"canFlip",!0);Bb(this,"canEdit",!1);Bb(this,"canBind",!1);Bb(this,"nonce");Bb(this,"bindingDistance",4);Bb(this,"isDirty",!1);Bb(this,"lastSerialized");Bb(this,"getCenter",()=>kg.getBoundsCenter(this.bounds));Bb(this,"getRotatedBounds",()=>{const {bounds:la,props:{rotation:va}}=this;return va?kg.getBoundsFromPoints(kg.getRotatedCorners(la,va)):la});Bb(this,"hitTestPoint",la=>{var va=this.rotatedBounds;if(!this.props.rotation)return Mk.pointInBounds(la,
va);va=kg.getRotatedCorners(va,this.props.rotation);return Mk.pointInPolygon(la,va)});Bb(this,"hitTestLineSegment",(la,va)=>{const Na=kg.getBoundsFromPoints([la,va]),{rotatedBounds:cb,props:{rotation:qb=0}}=this;return kg.boundsContain(cb,Na)||qb?h(la,va,kg.getRotatedCorners(this.bounds)).didIntersect:0<p(cb,la,va).length});Bb(this,"hitTestBounds",la=>{const {rotatedBounds:va,props:{rotation:Na=0}}=this,cb=kg.getRotatedCorners(this.bounds,Na);return kg.boundsContain(la,va)||0<y([la.minX,la.minY],
[la.width,la.height],cb).length});Bb(this,"getExpandedBounds",()=>kg.expandBounds(this.getBounds(),this.bindingDistance));Bb(this,"getBindingPoint",(la,va,Na,cb)=>{var qb=this.getBounds(),xb=this.getExpandedBounds();if(Mk.pointInBounds(la,xb)){var Eb=C(va,Na,xb).filter(jc=>jc.didIntersect).map(jc=>jc.points[0]);if(Eb.length)return Na=this.getCenter(),Eb=Eb.sort((jc,oc)=>Fe.dist(oc,va)-Fe.dist(jc,va))[0],Eb=Fe.med(la,Eb),cb?(cb=2>Fe.dist(la,Na)?Na:la,qb=0):(cb=2>Fe.distanceToLineSegment(la,Eb,Na)?
Na:Eb,qb=Mk.pointInBounds(la,qb)?this.bindingDistance:Math.max(this.bindingDistance,kg.getBoundsSides(qb).map(jc=>Fe.distanceToLineSegment(jc[1][0],jc[1][1],la)).sort((jc,oc)=>jc-oc)[0])),xb=Fe.divV(Fe.sub(cb,[xb.minX,xb.minY]),[xb.width,xb.height]),{point:Fe.clampV(xb,0,1),distance:qb}}});Bb(this,"getSerialized",()=>Kb(ag(Ke({},this.props),{type:this.type,nonce:this.nonce})));Bb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||$b(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});
if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});Bb(this,"validateProps",la=>la);Bb(this,"update",(la,va=!1,Na=!1)=>{va||this.isDirty||this.setIsDirty(!0);va||Na||this.incNonce();Object.assign(this.props,this.validateProps(la));return this});Bb(this,"clone",()=>new this.constructor(this.serialized));Bb(this,"onResetBounds",la=>this);Bb(this,"scale",[1,1]);Bb(this,"onResizeStart",la=>{var va;this.scale=[...(null!=(va=this.props.scale)?
va:[1,1])];return this});Bb(this,"onResize",(la,va)=>{const {bounds:Na,rotation:cb,scale:[qb,xb]}=va;la=[...this.scale];0>qb&&(la[0]*=-1);0>xb&&(la[1]*=-1);this.update({point:[Na.minX,Na.minY],scale:la,rotation:cb});return this});Bb(this,"onHandleChange",(la,{id:va,delta:Na})=>{if(void 0!==la.handles){var cb=Ss(la.handles);cb[va]=ag(Ke({},cb[va]),{point:Fe.add(Na,la.handles[va].point)});var qb=kg.getCommonTopLeft(Object.values(cb).map(xb=>xb.point));Object.values(cb).forEach(xb=>{xb.point=Fe.sub(xb.point,
qb)});this.update({point:Fe.add(la.point,qb),handles:cb})}});var d,n;const S=this.constructor.id,fa=null!=(d=this.constructor.defaultProps)?d:{};this.type=S;this.props=Ke(Ke({scale:[1,1]},fa),a);this.nonce=null!=(n=a.nonce)?n:Date.now();Ic(this)}get id(){return this.props.id}setNonce(a){this.nonce=a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=
this.getBounds();const {stroke:d,strokeWidth:n,strokeType:S,opacity:fa,fill:la,noFill:va,borderRadius:Na}=this.props;return(0,EE.jsx)("rect",{fill:va?"none":Uf(la,"background"),stroke:Uf(d,"stroke"),strokeWidth:null!=n?n:2,strokeDasharray:"dashed"===S?"8 2":void 0,fillOpacity:null!=fa?fa:.2,width:a.width,height:a.height,rx:Na,ry:Na})}};Bb(Em,"type");Ce([Ff],Em.prototype,"props",2);Ce([Ff],Em.prototype,"canResize",2);Ce([Ff],Em.prototype,"nonce",2);Ce([Ff],Em.prototype,"isDirty",2);Ce([Ff],Em.prototype,
"lastSerialized",2);Ce([sg],Em.prototype,"id",1);Ce([qh],Em.prototype,"setNonce",1);Ce([qh],Em.prototype,"incNonce",1);Ce([qh],Em.prototype,"setIsDirty",1);Ce([qh],Em.prototype,"setLastSerialized",1);Ce([sg],Em.prototype,"center",1);Ce([sg],Em.prototype,"bounds",1);Ce([sg],Em.prototype,"rotatedBounds",1);Ce([sg],Em.prototype,"serialized",1);Ce([qh],Em.prototype,"update",2);var En=class extends Em{constructor(a={}){super(a);Bb(this,"canBind",!0);Bb(this,"getBounds",()=>{const [d,n]=this.props.point,
[S,fa]=this.props.size;return{minX:d,minY:n,maxX:d+S,maxY:n+fa,width:S,height:fa}});Bb(this,"getRotatedBounds",()=>kg.getBoundsFromPoints(kg.getRotatedCorners(this.bounds,this.props.rotation)));Bb(this,"onResize",(d,n)=>{const {bounds:S,rotation:fa,scale:[la,va]}=n;d=[...this.scale];0>la&&(d[0]*=-1);0>va&&(d[1]*=-1);this.update({point:[S.minX,S.minY],scale:d,rotation:fa});return this.update({rotation:fa,point:[S.minX,S.minY],size:[Math.max(1,S.width),Math.max(1,S.height)],scale:d})});Bb(this,"validateProps",
d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return d});Ic(this)}};Bb(En,"id","box");Bb(En,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var Mt=class extends Em{constructor(a={}){super(a);Bb(this,"getBounds",()=>{const {pointBounds:d,props:{point:n}}=this;return kg.translateBounds(d,n)});Bb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:n},bounds:S,rotatedPoints:fa}=this;return d?kg.translateBounds(kg.getBoundsFromPoints(fa),
n):S});Bb(this,"normalizedPoints",[]);Bb(this,"isResizeFlippedX",!1);Bb(this,"isResizeFlippedY",!1);Bb(this,"onResizeStart",()=>{var d;const {bounds:n,props:{points:S}}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const fa=[n.width,n.height];this.normalizedPoints=S.map(la=>ee.divV(la,fa));return this});Bb(this,"onResize",(d,n)=>{const {bounds:S,scale:[fa,la]}=n,va=[S.width,S.height];d=[...this.scale];0>fa&&(d[0]*=-1);0>la&&(d[1]*=-1);return this.update(fa||la?{point:[S.minX,S.minY],points:this.normalizedPoints.map(Na=>
ee.mulV(Na,va).concat(Na[2])),scale:d}:{point:[S.minX,S.minY],points:this.normalizedPoints.map(Na=>ee.mulV(Na,va).concat(Na[2]))})});Bb(this,"hitTestPoint",d=>{const {props:{points:n,point:S}}=this;return Mk.pointNearToPolyline(ee.sub(d,S),n)});Bb(this,"hitTestLineSegment",(d,n)=>{const {bounds:S,props:{points:fa,point:la}}=this;if(Mk.pointInBounds(d,S)||Mk.pointInBounds(n,S)||0<p(S,d,n).length){const va=ee.sub(d,la),Na=ee.sub(n,la);return h(va,Na,fa).didIntersect||!!fa.find(cb=>5>ee.dist(va,cb)||
5>ee.dist(Na,cb))}return!1});Bb(this,"hitTestBounds",d=>{const {rotatedBounds:n,props:{points:S,point:fa}}=this,la=kg.translateBounds(d,ee.neg(fa));return kg.boundsContain(d,n)||S.every(va=>Mk.pointInBounds(va,la))||kg.boundsCollide(d,n)&&0<E([la.minX,la.minY],[la.width,la.height],S).length});Ic(this)}get pointBounds(){const {props:{points:a}}=this;return kg.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:n},center:S}=this;if(!n)return d;const fa=ee.sub(S,a);return d.map(la=>
ee.rotWith(la,fa,n))}};Bb(Mt,"id","draw");Bb(Mt,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});Ce([sg],Mt.prototype,"pointBounds",1);Ce([sg],Mt.prototype,"rotatedPoints",1);var tx=class extends En{constructor(a={}){super(a);Bb(this,"getBounds",()=>{const {props:{point:[d,n],size:[S,fa]}}=this;return kg.getRotatedEllipseBounds(d,n,S/2,fa/2,0)});Bb(this,"getRotatedBounds",()=>{const {props:{point:[d,n],size:[S,fa],rotation:la}}=this;return kg.getRotatedEllipseBounds(d,
n,S/2,fa/2,la)});Bb(this,"hitTestPoint",d=>{const {props:{size:n,rotation:S},center:fa}=this;return Mk.pointInEllipse(d,fa,n[0],n[1],S||0)});Bb(this,"hitTestLineSegment",(d,n)=>{const {props:{size:[S,fa],rotation:la=0},center:va}=this;return g(d,n,va,S,fa,la).didIntersect});Bb(this,"hitTestBounds",d=>{const {props:{size:[n,S],rotation:fa=0},rotatedBounds:la}=this;var va;if(!(va=kg.boundsContain(d,la))){const {minX:Na,minY:cb,width:qb,height:xb}=d;va=0<t(this.center,n/2,S/2,fa,[Na,cb],[qb,xb]).length}return va});
Ic(this)}};Bb(tx,"id","ellipse");Bb(tx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var ux=class extends En{constructor(a={}){super(a);Bb(this,"onResetBounds",d=>{const {clipping:n,size:S,point:fa}=this.props;if(n){const [la,va,Na,cb]=Array.isArray(n)?n:[n,n,n,n];return this.update({clipping:0,point:[fa[0]-cb,fa[1]-la],size:[S[0]+(cb-va),S[1]+(la-Na)]})}if(d.asset){const {size:[la,va]}=d.asset;this.update({clipping:0,point:[fa[0]+S[0]/2-la/2,fa[1]+S[1]/
2-va/2],size:[la,va]})}return this});Bb(this,"onResize",(d,n)=>{const {bounds:S,clip:fa,scale:la}=n;({clipping:n}=this.props);const {clipping:va}=d;if(fa){const {point:[Na,cb],size:[qb,xb]}=d,[Eb,jc,oc,hc]=va?Array.isArray(va)?va:[va,va,va,va]:[0,0,0,0];n=[Eb+(S.minY-cb),jc+(S.maxX-(Na+qb)),oc+(S.maxY-(cb+xb)),hc+(S.minX-Na)]}else void 0!==va&&(n=Array.isArray(va)?va:[va,va,va,va],n=[n[0]*la[1],n[1]*la[0],n[2]*la[1],n[3]*la[0]]);if(n&&Array.isArray(n)){const Na=n;Na.every((cb,qb)=>0===qb||cb===Na[qb-
1])&&(n=Na[0])}return this.update({point:[S.minX,S.minY],size:[Math.max(1,S.width),Math.max(1,S.height)],clipping:n})});Ic(this)}};Bb(ux,"id","ellipse");Bb(ux,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Uz=class extends Em{constructor(a={}){super(a);Bb(this,"getBounds",()=>{const {points:d,props:{point:n}}=this;return kg.translateBounds(kg.getBoundsFromPoints(d),n)});Bb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,
props:{point:n}}=this;return kg.translateBounds(kg.getBoundsFromPoints(d),n)});Bb(this,"normalizedHandles",[]);Bb(this,"onResizeStart",()=>{var d;const {props:{handles:n},bounds:S}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const fa=[S.width,S.height];this.normalizedHandles=Object.values(n).map(la=>ee.divV(la.point,fa));return this});Bb(this,"onResize",(d,n)=>{const {bounds:S,scale:[fa,la]}=n,{props:{handles:va},normalizedHandles:Na}=this,cb=[S.width,S.height];d=[...this.scale];0>fa&&
(d[0]*=-1);0>la&&(d[1]*=-1);return this.update({point:[S.minX,S.minY],handles:Object.values(va).map((qb,xb)=>ag(Ke({},qb),{point:ee.mulV(Na[xb],cb)})),scale:d})});Bb(this,"hitTestPoint",d=>{const {points:n}=this;return Mk.pointNearToPolyline(ee.sub(d,this.props.point),n)});Bb(this,"hitTestLineSegment",(d,n)=>{const {bounds:S,points:fa,props:{point:la}}=this;if(Mk.pointInBounds(d,S)||Mk.pointInBounds(n,S)||0<p(S,d,n).length){const va=ee.sub(d,la),Na=ee.sub(n,la);return h(va,Na,fa).didIntersect||!!fa.find(cb=>
5>ee.dist(va,cb)||5>ee.dist(Na,cb))}return!1});Bb(this,"hitTestBounds",d=>{const {rotatedBounds:n,points:S,props:{point:fa}}=this,la=kg.translateBounds(d,ee.neg(fa));return kg.boundsContain(d,n)||S.every(va=>Mk.pointInBounds(va,la))||kg.boundsCollide(d,n)&&0<E([la.minX,la.minY],[la.width,la.height],S).length});Bb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Uz.defaultProps.handles);return d});Ic(this)}get points(){return Object.values(this.props.handles).map(a=>
a.point)}get centroid(){const {points:a}=this;return tl.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,rotation:n}}=this;return n?Object.values(d).map(S=>ee.rotWith(S.point,a,n)):this.points}},Nt=Uz;Bb(Nt,"id","polyline");Bb(Nt,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});Ce([sg],Nt.prototype,"points",1);Ce([sg],Nt.prototype,"centroid",1);Ce([sg],Nt.prototype,"rotatedPoints",1);var Vz=class extends Nt{constructor(a={}){super(a);
Bb(this,"hideResizeHandles",!0);Bb(this,"hideRotateHandle",!0);Bb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Vz.defaultProps.handles);return d});Bb(this,"getHandlesChange",(d,n)=>{var S=Kj(d.handles,n);S=Kj(S,{start:{point:Fe.toFixed(S.start.point)},end:{point:Fe.toFixed(S.end.point)}});if(!Fe.isEqual(S.start.point,S.end.point)){n={point:d.point,handles:Ss(S)};d=d.point;S=kg.translateBounds(kg.getBoundsFromPoints(Object.values(S).map(la=>
la.point)),n.point);var fa=Fe.sub([S.minX,S.minY],d);Fe.isEqual(fa,[0,0])||(Object.values(n.handles).forEach(la=>{la.point=Fe.toFixed(Fe.sub(la.point,fa))}),n.point=Fe.toFixed(Fe.add(n.point,fa)));return n}});Ic(this)}},Su=Vz;Bb(Su,"id","line");Bb(Su,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Jr=class extends En{constructor(a={}){super(a);Bb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,
props:{point:n},offset:S}=this;return kg.translateBounds(kg.getBoundsFromPoints(d),ee.add(n,S))});Bb(this,"hitTestPoint",d=>{const {vertices:n}=this;return Mk.pointInPolygon(ee.add(d,this.props.point),n)});Bb(this,"hitTestLineSegment",(d,n)=>{const {vertices:S,props:{point:fa}}=this;return h(ee.sub(d,fa),ee.sub(n,fa),S).didIntersect});Bb(this,"hitTestBounds",d=>{const {rotatedBounds:n,offset:S,rotatedVertices:fa,props:{point:la}}=this,va=kg.translateBounds(d,ee.neg(ee.add(la,S)));return kg.boundsContain(d,
n)||fa.every(Na=>Mk.pointInBounds(Na,va))||0<y([va.minX,va.minY],[va.width,va.height],fa).length});Bb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});Ic(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},vertices:d}=this;return d.map(n=>ee.add(n,a))}get centroid(){const {vertices:a}=this;return tl.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:n}}=this;return n?a.map(S=>
ee.rotWith(S,d,n)):a}get offset(){const {props:{size:[a,d]}}=this,n=kg.getBoundsCenter(kg.getBoundsFromPoints(this.vertices));return ee.sub(ee.div([a,d],2),n)}getVertices(a=0){const {ratio:d,sides:n,size:S}=this.props;return 3===n?tl.getTriangleVertices(S,a,d):tl.getPolygonVertices(S,n,a,d)}};Bb(Jr,"id","polygon");Bb(Jr,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});Ce([sg],Jr.prototype,"vertices",1);Ce([sg],Jr.prototype,"pageVertices",
1);Ce([sg],Jr.prototype,"centroid",1);Ce([sg],Jr.prototype,"rotatedVertices",1);Ce([sg],Jr.prototype,"offset",1);var vx=class extends En{constructor(a={}){super(a);Bb(this,"canEdit",!0);Bb(this,"canFlip",!1);Ic(this)}};Bb(vx,"id","text");Bb(vx,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Xv=class extends En{constructor(a={}){super(a);Bb(this,"canEdit",!1);Bb(this,"canFlip",!1);Bb(this,"getBounds",()=>0===this.shapes.length?(df().deleteShapes([this.id]),
{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):kg.getCommonBounds(this.shapes.map(d=>d.getBounds())));Ic(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};Bb(Xv,"id","group");Bb(Xv,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});Ce([sg],Xv.prototype,"shapes",1);var Ot=class{constructor(){Bb(this,"_id");Bb(this,"_initial");Bb(this,"_states");Bb(this,"_isActive",!1);Bb(this,"cursor");
Bb(this,"_disposables",[]);Bb(this,"children",new Map([]));Bb(this,"registerStates",n=>{n.forEach(S=>this.children.set(S.id,new S(this,this)));return this});Bb(this,"deregisterStates",n=>{n.forEach(S=>{var fa;null==(fa=this.children.get(S.id))?void 0:fa.dispose();this.children.delete(S.id)});return this});Bb(this,"currentState",{});Bb(this,"transition",(n,S={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${n}.`);const fa=this.children.get(n),la=this.currentState;
if(!fa)throw Error(`Could not find a state named ${n}.`);$b(()=>{this.currentState?(la._events.onExit(ag(Ke({},S),{toId:n})),la.dispose(),this.setCurrentState(fa),this._events.onTransition(ag(Ke({},S),{fromId:la.id,toId:n})),fa._events.onEnter(ag(Ke({},S),{fromId:la.id}))):(this.currentState=fa,fa._events.onEnter(ag(Ke({},S),{fromId:""})))});return this});Bb(this,"isIn",n=>{n=n.split(".").reverse();let S=this;for(;0<n.length;){const fa=n.pop();if(!fa)return!0;if(S.currentState.id===fa){if(0===n.length)return!0;
S=S.currentState}else break}return!1});Bb(this,"isInAny",(...n)=>n.some(this.isIn));Bb(this,"forwardEvent",(n,...S)=>{var fa,la;(null==(la=null==(fa=this.currentState)?void 0:fa._events)?0:la[n])&&$b(()=>{var va;return null==(va=this.currentState._events)?void 0:va[n](...S)})});Bb(this,"_events",{onTransition:n=>{var S;null==(S=this.onTransition)?void 0:S.call(this,n)},onEnter:n=>{var S;this._isActive=!0;this.initial&&this.transition(this.initial,n);null==(S=this.onEnter)?void 0:S.call(this,n)},onExit:n=>
{var S,fa,la;this._isActive=!1;null==(fa=null==(S=this.currentState)?void 0:S.onExit)?void 0:fa.call(S,{toId:"parent"});null==(la=this.onExit)?void 0:la.call(this,n)},onPointerDown:(n,S)=>{var fa;null==(fa=this.onPointerDown)?void 0:fa.call(this,n,S);this.forwardEvent("onPointerDown",n,S)},onPointerUp:(n,S)=>{var fa;null==(fa=this.onPointerUp)?void 0:fa.call(this,n,S);this.forwardEvent("onPointerUp",n,S)},onPointerMove:(n,S)=>{var fa;null==(fa=this.onPointerMove)?void 0:fa.call(this,n,S);this.forwardEvent("onPointerMove",
n,S)},onPointerEnter:(n,S)=>{var fa;null==(fa=this.onPointerEnter)?void 0:fa.call(this,n,S);this.forwardEvent("onPointerEnter",n,S)},onPointerLeave:(n,S)=>{var fa;null==(fa=this.onPointerLeave)?void 0:fa.call(this,n,S);this.forwardEvent("onPointerLeave",n,S)},onDoubleClick:(n,S)=>{var fa;null==(fa=this.onDoubleClick)?void 0:fa.call(this,n,S);this.forwardEvent("onDoubleClick",n,S)},onKeyDown:(n,S)=>{var fa;this._events.onModifierKey(n,S);null==(fa=this.onKeyDown)?void 0:fa.call(this,n,S);this.forwardEvent("onKeyDown",
n,S)},onKeyUp:(n,S)=>{var fa;this._events.onModifierKey(n,S);null==(fa=this.onKeyUp)?void 0:fa.call(this,n,S);this.forwardEvent("onKeyUp",n,S)},onPinchStart:(n,S)=>{var fa;null==(fa=this.onPinchStart)?void 0:fa.call(this,n,S);this.forwardEvent("onPinchStart",n,S)},onPinch:(n,S)=>{var fa;null==(fa=this.onPinch)?void 0:fa.call(this,n,S);this.forwardEvent("onPinch",n,S)},onPinchEnd:(n,S)=>{var fa;null==(fa=this.onPinchEnd)?void 0:fa.call(this,n,S);this.forwardEvent("onPinchEnd",n,S)},onModifierKey:(n,
S)=>{switch(S.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(n,S)}}});Bb(this,"onEnter");Bb(this,"onExit");Bb(this,"onTransition");Bb(this,"onPointerDown");Bb(this,"onPointerUp");Bb(this,"onPointerMove");Bb(this,"onPointerEnter");Bb(this,"onPointerLeave");Bb(this,"onDoubleClick");Bb(this,"onKeyDown");Bb(this,"onKeyUp");Bb(this,"onPinchStart");Bb(this,"onPinch");Bb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;
this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=a}};Bb(Ot,"id");Bb(Ot,"shortcuts");Ce([Ff],Ot.prototype,"currentState",2);Ce([qh],Ot.prototype,"setCurrentState",
1);var wx=class extends Ot{constructor(a,d){var n,S;super();Bb(this,"_root");Bb(this,"_parent");Bb(this,"children",new Map([]));Bb(this,"registerStates",fa=>{fa.forEach(la=>this.children.set(la.id,new la(this,this._root)));return this});Bb(this,"deregisterStates",fa=>{fa.forEach(la=>{var va;null==(va=this.children.get(la.id))?void 0:va.dispose();this.children.delete(la.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(n=this.initial)?
n:this.states[0].id,n=this.children.get(a))&&(this.setCurrentState(n),null==(S=this.currentState)?void 0:S._events.onEnter({fromId:"initial"}));Ic(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};Bb(wx,"cursor");var Kr=class extends wx{constructor(){super(...arguments);Bb(this,"isLocked",!1);Bb(this,"previous");Bb(this,"onEnter",({fromId:a})=>{this.previous=
a;this.cursor&&this.app.cursors.setCursor(this.cursor)});Bb(this,"onTransition",a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},uj=class extends wx{get app(){return this.root}get tool(){return this.parent}},Wz=class extends uj{constructor(){super(...arguments);Bb(this,"cursor","crosshair");Bb(this,"creatingShape");Bb(this,"aspectRatio");Bb(this,"initialBounds",
{});Bb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:n}}=this.app;var {Shape:S}=this.tool;S=new S({id:xk(),type:S.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:Fe.abs(Fe.sub(n,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};S.canChangeAspectRatio||(S.aspectRatio?(this.aspectRatio=S.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=
1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=S;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(S);this.app.setSelectedShapes([S])});Bb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:d}=this,{currentPoint:n,originPoint:S,shiftKey:fa}=this.app.inputs;a=fa||this.creatingShape.props.isAspectRatioLocked||
!this.creatingShape.canChangeAspectRatio;d=kg.getTransformedBoundingBox(d,"bottom_right_corner",Fe.sub(n,S),0,a);this.app.settings.snapToGrid&&!a&&(d=kg.snapBoundsToGrid(d,8));this.creatingShape.update({point:[d.minX,d.minY],size:[d.width,d.height]})}});Bb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});Bb(this,"onKeyDown",(a,d)=>
{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};Bb(Wz,"id","creating");var Xz=class extends uj{constructor(){super(...arguments);Bb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});Bb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});
Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};Bb(Xz,"id","idle");var Yz=class extends uj{constructor(){super(...arguments);Bb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<ee.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});Bb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};Bb(Yz,"id","pointing");var Oq=class extends Kr{constructor(){super(...arguments);
Bb(this,"cursor","crosshair")}};Bb(Oq,"id","box");Bb(Oq,"states",[Xz,Yz,Wz]);Bb(Oq,"initial","idle");var Zz=class extends uj{constructor(){super(...arguments);Bb(this,"shape",{});Bb(this,"points",[[0,0,.5]]);Bb(this,"persistDebounced",Pg(this.app.persist,200));Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});Bb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:n}=this.tool;var {originPoint:S}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
n){this.shape=n;var {shape:fa}=this;var la=fa.props.points[fa.props.points.length-1];const Na=ee.sub(S,fa.props.point).concat(null!=(a=S[2])?a:.5);this.points=[...fa.props.points,la,la];const cb=Math.ceil(ee.dist(la,S)/16);for(let qb=0,xb=qb/(cb-1);qb<cb;qb++){a=this.points;S=a.push;fa=ee.lrp(la,Na,xb);var va=la[2];S.call(a,fa.concat.call(fa,va+(Na[2]-va)*xb))}this.addNextPoint(Na)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(la=S[2])?la:.5]],this.shape=new d({id:xk(),type:d.id,parentId:this.app.currentPage.id,
point:S.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});Bb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:n}=this.app.inputs;ee.isEqual(n,d)||this.addNextPoint(ee.sub(d,a.props.point).concat(d[2]))});Bb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,
points:this.tool.simplify?Mk.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,n=ee.min(a,
[0,0]);this.points.push(a);0>n[0]||0>n[1]?(this.points=this.points.map(S=>ee.sub(S,n).concat(S[2])),d.update({point:ee.add(d.props.point,n),points:this.points})):d.update({points:this.points})}};Bb(Zz,"id","creating");var $z=class extends uj{constructor(){super(...arguments);Bb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};
Bb($z,"id","idle");var aA=class extends uj{constructor(){super(...arguments);Bb(this,"origin",[0,0]);Bb(this,"prevDelta",[0,0]);Bb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});Bb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});Bb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};Bb(aA,"id","pinching");var Tu=class extends Kr{constructor(){super(...arguments);Bb(this,"cursor","crosshair");Bb(this,"simplify",!0);Bb(this,"simplifyTolerance",
1);Bb(this,"previousShape");Bb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};Bb(Tu,"id","draw");Bb(Tu,"states",[$z,Zz,aA]);Bb(Tu,"initial","idle");var bA=class extends uj{constructor(){super(...arguments);Bb(this,"points",[[0,0,.5]]);Bb(this,"hitShapes",new Set);Bb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});Bb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;ee.isEqual(d,a)||(this.points.push(a),
this.app.shapesInViewport.filter(n=>n.hitTestLineSegment(d,a)).forEach(n=>this.hitShapes.add(n)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});Bb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};Bb(bA,"id","erasing");var cA=class extends uj{constructor(){super(...arguments);Bb(this,"onPointerDown",
(a,d)=>{a.order||this.tool.transition("pointing")});Bb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};Bb(cA,"id","idle");var dA=class extends uj{constructor(){super(...arguments);Bb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>
d.hitTestPoint(a)))});Bb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<ee.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});Bb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};Bb(dA,"id","pointing");var Yv=class extends Kr{constructor(){super(...arguments);Bb(this,"cursor","crosshair")}};Bb(Yv,"id","erase");Bb(Yv,"states",[cA,dA,bA]);Bb(Yv,
"initial","idle");var xx=class extends uj{constructor(){super(...arguments);Bb(this,"handle",{});Bb(this,"handleId","end");Bb(this,"currentShape",{});Bb(this,"initialShape",{});Bb(this,"bindableShapeIds",[]);Bb(this,"startBindingShapeId");Bb(this,"newStartBindingId","");Bb(this,"draggedBindingId","");Bb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:n,currentPoint:S,modKey:fa,altKey:la},settings:{snapToGrid:va}}=this.app;var Na=this.app.getShapeById(this.initialShape.id),
{handles:cb}=this.initialShape,qb=this.handleId,xb="start"===this.handleId?"end":"start";if(!Fe.isEqual(d,S)){var Eb=Fe.sub(S,n);if(a){var jc=cb[xb].point,oc=Fe.add(cb[qb].point,Eb),hc=Fe.angle(jc,oc);jc=Fe.rotWith(oc,jc,Dm.snapAngleToSegments(hc,24)-hc);Eb=Fe.add(Eb,Fe.sub(jc,oc))}Eb=Fe.add(cb[qb].point,Eb);cb={[qb]:ag(Ke({},cb[qb]),{point:va?Fe.snap(Eb,8):Fe.toFixed(Eb),bindingId:void 0})};var Rc=this.currentShape.getHandlesChange(this.initialShape,cb);if(Rc){cb=Kj(Na.props,Rc);var hd={},zc;qb=
cb.handles[qb];xb=cb.handles[xb];if(this.startBindingShapeId){var $c;if(Eb=this.app.getShapeById(this.startBindingShapeId)){oc=Eb.getCenter();jc=cb.handles.end;var Uc=Fe.add(cb.handles.start.point,cb.point);Fe.isEqual(Uc,oc)&&Uc[1]++;hc=Eb.hitTestPoint(S);Uc=Fe.uni(Fe.sub(Uc,oc));const td=void 0!==this.app.currentPage.bindings[this.newStartBindingId];fa||Eb.hitTestPoint(Fe.add(cb.point,jc.point))||($c=kd(Na.props,Eb,"start",this.newStartBindingId,oc,oc,Uc,hc));$c&&!td?(hd[this.newStartBindingId]=
$c,cb.handles.start.bindingId=$c.id):!$c&&td&&(console.log("removing start binding"),delete hd[this.newStartBindingId],cb.handles.start.bindingId=void 0)}}if(!fa){$c=Fe.add(xb.point,cb.point);xb=Fe.add(qb.point,cb.point);qb=Fe.uni(Fe.sub(xb,$c));const td=Fe.add(cb.point,cb.handles.start.point),vd=Fe.add(cb.point,cb.handles.end.point);Eb=this.bindableShapeIds.map(ae=>this.app.getShapeById(ae)).sort((ae,qe)=>qe.nonce-ae.nonce).filter(ae=>![td,vd].every(qe=>ae.hitTestPoint(qe)));for(const ae of Eb)if(zc=
kd(Na.props,ae,this.handleId,this.draggedBindingId,xb,$c,qb,la))break}zc?(hd[this.draggedBindingId]=zc,cb=Kj(cb,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(Na=Na.props.handles[this.handleId].bindingId,void 0!==Na&&(delete hd[Na],cb=Kj(cb,{handles:{[this.handleId]:{bindingId:void 0}}})));Rc=this.currentShape.getHandlesChange(cb,cb.handles);$b(()=>{var td;if(Rc){this.currentShape.update(Rc);this.app.currentPage.updateBindings(hd);const vd=Object.values(null!=(td=Rc.handles)?td:
{}).map(ae=>ae.bindingId).map(ae=>this.app.currentPage.bindings[ae]).filter(Boolean).flatMap(ae=>[ae.toId,ae.fromId].filter(Boolean));this.app.setBindingShapes(vd)}})}}});Bb(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});Bb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),
this.tool.transition("idle")}})}};Bb(xx,"id","creating");var eA=class extends xx{constructor(){super(...arguments);Bb(this,"onEnter",()=>{var a;this.app.history.pause();this.newStartBindingId=xk();this.draggedBindingId=xk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:n}=this.app.inputs;d=new d(ag(Ke({},d.defaultProps),{id:xk(),type:d.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?Fe.snap(n,8):n,fill:this.app.settings.color,
stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=Kb(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);this.app.setSelectedShapes([d]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(S=>this.app.getShapeById(S)).filter(S=>Mk.pointInBounds(n,S.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};Bb(eA,"id","creating");
var fA=class extends uj{constructor(){super(...arguments);Bb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});Bb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});Bb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);
break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});Bb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};Bb(fA,"id","idle");var gA=class extends uj{constructor(){super(...arguments);Bb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<ee.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};
Bb(gA,"id","pointing");var Zv=class extends Kr{constructor(){super(...arguments);Bb(this,"cursor","crosshair")}};Bb(Zv,"id","line");Bb(Zv,"states",[fA,gA,eA]);Bb(Zv,"initial","idle");var hA=class extends uj{constructor(){super(...arguments);Bb(this,"cursor","crosshair");Bb(this,"creatingShape");Bb(this,"aspectRatio");Bb(this,"initialBounds",{});Bb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:n}=this.tool,S=new n({id:xk(),type:n.id,parentId:a.id,point:[...d],text:"",
size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=S;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);$b(()=>{this.app.currentPage.addShapes(S);const fa=this.app.settings.snapToGrid?Fe.snap([...d],8):d,{bounds:la}=S;S.update({point:Fe.sub(fa,[la.width/2,la.height/2])});this.app.transition("select");this.app.setSelectedShapes([S]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};
Bb(hA,"id","creating");var iA=class extends uj{constructor(){super(...arguments);Bb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});Bb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};Bb(iA,"id","idle");var $v=class extends Kr{constructor(){super(...arguments);
Bb(this,"cursor","crosshair")}};Bb($v,"id","box");Bb($v,"states",[iA,hA]);Bb($v,"initial","idle");var FE=ig(Cm()),GE=class extends FE.default{constructor(){super(...arguments);Bb(this,"toBBox",a=>a.rotatedBounds)}},jA=class extends uj{constructor(){super(...arguments);Bb(this,"initialSelectedIds",[]);Bb(this,"initialSelectedShapes",[]);Bb(this,"tree",new GE);Bb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:n}=this.app;this.initialSelectedIds=Array.from(n.values());this.initialSelectedShapes=
Array.from(a.values());this.tree.load(d.shapes)});Bb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});Bb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:n,currentPoint:S}}=this.app,fa=kg.getBoundsFromPoints([S,n],0);this.app.setBrush(fa);const la=[...(new Set(this.tree.search(fa).filter(va=>d?kg.boundsContain(fa,va.rotatedBounds):va.hitTestBounds(fa)).filter(va=>"group"!==va.type).map(va=>{var Na;return null!=(Na=this.app.getParentGroup(va))?
Na:va})))];a?la.every(va=>this.initialSelectedShapes.includes(va))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(va=>!la.includes(va))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...la]))]):this.app.setSelectedShapes(la);this.app.viewport.panToPointWhenNearBounds(S)});Bb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});Bb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),
this.tool.transition("idle")}})}};Bb(jA,"id","brushing");var kA=class extends uj{constructor(){super(...arguments);Bb(this,"onEnter",a=>{var d;const {selectedIds:n,inputs:{shiftKey:S}}=this.app;if("shape"===a.type&&!n.has(a.shape.id)){const fa=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;S?this.app.setSelectedShapes([...Array.from(n.values()),fa.id]):this.app.setSelectedShapes([fa])}});Bb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};Bb(kA,"id","contextMenu");var lA=class extends uj{constructor(){super(...arguments);
Bb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});Bb(this,"onExit",()=>{});Bb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});Bb(this,"onPointerDown",(a,d)=>{const {selectedShapes:n,inputs:{ctrlKey:S}}=this.app;
if(2===d.button)this.tool.transition("contextMenu",a);else if(S)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(n.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:fa,inputs:la}=this.app;
fa&&Mk.pointInBounds(la.currentPoint,fa)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",a);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",Ke(Ke({},d),a))}});Bb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})});Bb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});Bb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&
!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};Bb(lA,"id","idle");var mA=class extends uj{constructor(){super(...arguments);Bb(this,"onEnter",a=>{var d;const {selectedIds:n,inputs:{shiftKey:S}}=this.app,fa=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;S?this.app.setSelectedShapes([...Array.from(n.values()),fa.id]):this.app.setSelectedShapes([fa])});Bb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<ee.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});Bb(this,"onPointerUp",()=>{this.tool.transition("idle")});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};Bb(mA,"id","pointingShape");var nA=class extends uj{constructor(){super(...arguments);Bb(this,"cursor","move");Bb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<ee.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
Bb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};Bb(nA,"id","pointingBoundsBackground");var oA=class extends uj{constructor(){super(...arguments);Bb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});Bb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<ee.dist(a,d)&&this.tool.transition("brushing")});Bb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});Bb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};Bb(oA,"id","pointingCanvas");var pA=class extends uj{constructor(){super(...arguments);Bb(this,"cursor","move");Bb(this,
"isCloning",!1);Bb(this,"didClone",!1);Bb(this,"initialPoints",{});Bb(this,"initialShapePoints",{});Bb(this,"initialClonePoints",{});Bb(this,"clones",[]);Bb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,inputs:n}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(d.map(({id:S,props:{point:fa}})=>[S,fa.slice()]));document.querySelectorAll("input,textarea").forEach(S=>S.blur());null==(a=document.getSelection())?void 0:a.empty();n.altKey?this.startCloning():
this.moveSelectedShapesToPointer()});Bb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});Bb(this,"onPointerMove",()=>{const {inputs:{currentPoint:a}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});Bb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Bb(this,"onPointerUp",()=>{this.app.history.resume();
this.app.persist();this.tool.transition("idle")});Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(n=>{n.update({point:this.initialPoints[n.id]})}),this.tool.transition("idle")}});Bb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:n,allSelectedShapes:S}=this.app;n.removeShapes(...S);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));
this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:n}}=this.app,{initialPoints:S}=this,fa=ee.sub(n,d);a&&(Math.abs(fa[0])<Math.abs(fa[1])?fa[0]=0:fa[1]=0);$b(()=>{this.app.allSelectedShapesArray.filter(la=>!la.props.isLocked).forEach(la=>{let va=ee.add(S[la.id],fa);this.app.settings.snapToGrid&&(va=ee.snap(va,8));la.update({point:va})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>
{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d(ag(Ke({},a.serialized),{id:xk(),type:a.type,point:this.initialPoints[a.id],rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);
this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};Bb(pA,"id","translating");var qA=class extends uj{constructor(){super(...arguments);Bb(this,"pointedSelectedShape");Bb(this,"onEnter",a=>{this.pointedSelectedShape=a.shape});Bb(this,"onExit",()=>{this.pointedSelectedShape=void 0});Bb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<ee.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
Bb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:n}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:n}=this.app),n=Array.from(n.values()),n.splice(n.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(n);else{if(1===n.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof En&&Mk.pointInBounds(d,
this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};Bb(qA,"id","pointingSelectedShape");var rA=class extends uj{constructor(){super(...arguments);Bb(this,"info",{});Bb(this,"onEnter",a=>{this.info=a;this.updateCursor()});Bb(this,"onExit",()=>{this.app.cursors.reset()});
Bb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<ee.dist(a,d)&&this.tool.transition("resizing",this.info)});Bb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(Jt[this.info.handle],this.app.selectionBounds.rotation)}};Bb(rA,"id","pointingResizeHandle");var sA=class extends uj{constructor(){super(...arguments);
Bb(this,"isSingle",!1);Bb(this,"handle","bottom_right_corner");Bb(this,"snapshots",{});Bb(this,"initialCommonBounds",{});Bb(this,"selectionRotation",0);Bb(this,"resizeType","corner");Bb(this,"onEnter",a=>{var d,n;const {history:S,selectedShapesArray:fa,selectionBounds:la}=this.app;if(!la)throw Error("Expected a selected bounds.");this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";
this.app.cursors.setCursor(sA.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);S.pause();const va=kg.getBoundsFromPoints(fa.map(Na=>kg.getBoundsCenter(Na.bounds)));this.selectionRotation=(this.isSingle=1===fa.length)?null!=(n=fa[0].props.rotation)?n:0:0;this.initialCommonBounds=Ke({},la);this.snapshots=Object.fromEntries(fa.map(Na=>{const cb=Ke({},Na.bounds),[qb,xb]=kg.getBoundsCenter(cb);return[Na.id,{props:Na.serialized,bounds:cb,transformOrigin:[(qb-this.initialCommonBounds.minX)/
this.initialCommonBounds.width,(xb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(qb-va.minX)/va.width,(xb-va.minY)/va.height],isAspectRatioLocked:Na.props.isAspectRatioLocked||!(Na.canChangeAspectRatio&&!Na.props.rotation)}]}));fa.forEach(Na=>{var cb;null==(cb=Na.onResizeStart)?void 0:cb.call(Na,{isSingle:this.isSingle})})});Bb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});
Bb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:n,originPoint:S,currentPoint:fa}}=this.app,{handle:la,snapshots:va,initialCommonBounds:Na}=this;let cb=ee.sub(fa,S);a&&(cb=ee.mul(cb,2));const qb=this.app.selectedShapes.values().next().value;let xb=kg.getTransformedBoundingBox(Na,la,cb,this.selectionRotation,d||this.isSingle&&(n?!("clipping"in qb.props):!qb.canChangeAspectRatio||qb.props.isAspectRatioLocked));a&&(xb=Ke(Ke({},xb),kg.centerBounds(xb,kg.getBoundsCenter(Na))));const {scaleX:Eb,
scaleY:jc}=xb;this.app.selectedShapes.forEach(oc=>{var hc,Rc;const {isAspectRatioLocked:hd,props:zc,bounds:$c,transformOrigin:Uc}=va[oc.id];let td=kg.getRelativeTransformedBoundingBox(xb,Na,$c,0>Eb,0>jc);if(oc.canResize.some(qe=>qe)||oc.props.isSizeLocked||!this.isSingle){var vd=[Eb,jc],ae=null!=(hc=zc.rotation)?hc:0;hc=kg.getBoundsCenter(td);oc.canFlip||(vd=ee.abs(vd));oc.canScale||(vd=null!=(Rc=zc.scale)?Rc:[1,1]);if(ae&&0>Eb&&0<=jc||0>jc&&0<=Eb)ae*=-1;this.app.settings.snapToGrid&&!hd&&(td=kg.snapBoundsToGrid(td,
8));oc.onResize(zc,{center:hc,rotation:ae,scale:vd,bounds:td,type:la,clip:n,transformOrigin:Uc})}});this.updateCursor(Eb,jc);this.app.viewport.panToPointWhenNearBounds(fa)});Bb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(Ke({},this.snapshots[n.id].props))}),this.tool.transition("idle")}})}updateCursor(a,d){var n,S,fa,la;const va=0>a&&0<=d;a=0>
d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":va||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(n=this.app.selectionBounds)?void 0:n.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(S=this.app.selectionBounds)?void 0:S.rotation);break;case "top_right_corner":case "bottom_left_corner":va||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==
(fa=this.app.selectionBounds)?void 0:fa.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(la=this.app.selectionBounds)?void 0:la.rotation)}}},yx=sA;Bb(yx,"id","resizing");Bb(yx,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var tA=class extends uj{constructor(){super(...arguments);
Bb(this,"cursor","rotate");Bb(this,"handle","");Bb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});Bb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<ee.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});Bb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(Jt[this.handle],
this.app.selectionRotation)}};Bb(tA,"id","pointingRotateHandle");var uA=class extends uj{constructor(){super(...arguments);Bb(this,"info",{});Bb(this,"onEnter",a=>{this.info=a});Bb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<ee.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});Bb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};Bb(uA,"id","pointingShapeBehindBounds");var zx=class extends uj{constructor(){super(...arguments);Bb(this,"cursor","rotate");Bb(this,"snapshot",{});Bb(this,"initialCommonCenter",[0,0]);Bb(this,"initialCommonBounds",{});Bb(this,"initialAngle",0);Bb(this,"initialSelectionRotation",0);Bb(this,"handle","");Bb(this,"onEnter",a=>{const {history:d,selectedShapesArray:n,selectionBounds:S}=this.app;
if(!S)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=Ke({},S);this.initialCommonCenter=kg.getBoundsCenter(S);this.initialAngle=ee.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(n.map(fa=>[fa.id,{point:[...fa.props.point],center:[...fa.center],rotation:fa.props.rotation,handles:"handles"in fa?Ss(fa.handles):void 0}]));this.updateCursor()});Bb(this,
"onExit",()=>{this.app.history.resume();this.snapshot={}});Bb(this,"onPointerMove",()=>{const {selectedShapes:a,inputs:{shiftKey:d,currentPoint:n}}=this.app,{snapshot:S,initialCommonCenter:fa,initialAngle:la,initialSelectionRotation:va}=this;let Na=ee.angle(fa,n)-la;d&&(Na=Dm.snapAngleToSegments(Na,24));a.forEach(qb=>{var xb=S[qb.id];let Eb=0;if(d){var {rotation:jc=0}=xb;Eb=Dm.snapAngleToSegments(jc,24)-jc}const oc=ee.sub(xb.center,xb.point);jc=ee.rotWith(xb.center,fa,Na);if("handles"in qb){xb=xb.handles;
const hc=xb.map(hd=>ee.rotWith(hd.point,oc,Na)),Rc=kg.getCommonTopLeft(hc);qb.update({point:ee.add(Rc,ee.sub(jc,oc)),handles:xb.map((hd,zc)=>ag(Ke({},hd),{point:ee.sub(hc[zc],Rc)}))})}else qb.update({point:ee.sub(jc,oc),rotation:Dm.clampRadians((xb.rotation||0)+Na+Eb)})});const cb=Dm.clampRadians(va+Na);this.app.setSelectionRotation(d?Dm.snapAngleToSegments(cb,24):cb);this.updateCursor()});Bb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Bb(this,
"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(this.snapshot[n.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(Jt[this.handle],this.app.selectionRotation)}};Bb(zx,"id","rotating");var vA=class extends uj{constructor(){super(...arguments);Bb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});Bb(this,"onPinchEnd",()=>{this.tool.transition("idle")});Bb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
Bb(vA,"id","pinching");var wA=class extends xx{constructor(){super(...arguments);Bb(this,"cursor","grabbing");Bb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=xk();this.draggedBindingId=xk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=Kb(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};Bb(wA,"id","translatingHandle");var xA=class extends uj{constructor(){super(...arguments);
Bb(this,"cursor","grabbing");Bb(this,"info",{});Bb(this,"onEnter",a=>{this.info=a});Bb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<ee.dist(a,d)&&this.tool.transition("translatingHandle",this.info)});Bb(this,"onPointerUp",()=>{this.tool.transition("idle")});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};Bb(xA,"id","pointingHandle");var yA=class extends uj{constructor(){super(...arguments);Bb(this,"handle");Bb(this,"onEnter",
a=>{var d;this.app.cursors.setCursor(Jt[a.handle],null!=(d=this.app.selectionBounds.rotation)?d:0);this.handle=a.handle});Bb(this,"onExit",()=>{this.app.cursors.reset()});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});Bb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
a);break;default:this.tool.transition("pointingResizeHandle",a)}}});Bb(this,"onPointerLeave",()=>{this.tool.transition("idle")});Bb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var n=this.app.selectedShapes.values().next().value;if(!n.canEdit||this.app.readOnly||n.props.isLocked)n.onResetBounds({asset:n.props.assetId?this.app.assets[n.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":null==(d=n.onResetBounds)?void 0:d.call(n,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:n})}}})}};Bb(yA,"id","hoveringSelectionHandle");var zA=class extends uj{constructor(){super(...arguments);Bb(this,"editingShape",{});Bb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});Bb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=
this.editingShape.props.text.trim();""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});Bb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",
a);break;case "canvas":a.order||this.tool.transition("idle",a)}});Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":$b(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};Bb(zA,"id","editingShape");var AA=class extends uj{constructor(){super(...arguments);Bb(this,"minimapZoom",1);Bb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});Bb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");
var n=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(d&&n){const S=d.getBoundingClientRect();this.minimapRect.height=S.height;this.minimapRect.width=S.width;this.minimapRect.minX=S.left;this.minimapRect.minY=S.top;this.minimapRect.maxX=S.right;this.minimapRect.maxY=S.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=ee.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);n=n.getBoundingClientRect();n=ee.mul(ee.sub(a,[n.left+n.width/2,n.top+n.height/
2]),this.minimapZoom);return ee.sub(this.app.viewport.camera.point,n)}});Bb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});Bb(this,"onPointerMove",(a,d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});Bb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};Bb(AA,"id","pointingMinimap");var Pt=class extends Kr{constructor(){super(...arguments);Bb(this,"returnTo",
"");Bb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};Bb(Pt,"id","select");Bb(Pt,"initial","idle");Bb(Pt,"shortcut","whiteboard/select");Bb(Pt,"states",[lA,jA,kA,oA,mA,uA,qA,nA,yA,rA,tA,AA,xA,wA,pA,yx,zx,zx,vA,zA]);var BA=class extends uj{constructor(){super(...arguments);Bb(this,"cursor","grabbing");Bb(this,"originalScreenPoint",[]);Bb(this,"originalCameraPoint",[]);Bb(this,"prevState","idle");Bb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=
this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});Bb(this,"onPointerMove",(a,d)=>{a=Fe.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:Fe.sub(this.originalCameraPoint,Fe.div(a,this.app.viewport.camera.zoom))})});Bb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};Bb(BA,"id","panning");var CA=class extends uj{constructor(){super(...arguments);Bb(this,"onEnter",a=>{this.parent.prevTool&&
a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});Bb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};Bb(CA,"id","idle");var DA=class extends uj{constructor(){super(...arguments);Bb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});Bb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};Bb(DA,
"id","idleHold");var EA=class extends uj{constructor(){super(...arguments);Bb(this,"origin",[0,0]);Bb(this,"prevDelta",[0,0]);Bb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});Bb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});Bb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};Bb(EA,"id","pinching");var Qt=class extends Kr{constructor(){super(...arguments);Bb(this,"cursor","grab");Bb(this,"prevTool",null);Bb(this,"onEnter",a=>{this.prevTool=
null==a?void 0:a.prevTool});Bb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});Bb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};Bb(Qt,"id","move");Bb(Qt,"shortcut","whiteboard/pan");Bb(Qt,"states",[CA,DA,BA,EA]);Bb(Qt,"initial","idle");var Fm=class{constructor(a,d={}){Bb(this,"lastShapesNounces",null);Bb(this,"app");Bb(this,"id");Bb(this,"name");Bb(this,"shapes",[]);Bb(this,"bindings",{});Bb(this,"nonce",0);Bb(this,"bringForward",
(Na,cb)=>{const qb=this.parseShapesArg(Na);qb.sort((xb,Eb)=>this.shapes.indexOf(Eb)-this.shapes.indexOf(xb)).map(xb=>this.shapes.indexOf(xb)).forEach(xb=>{if(xb!==this.shapes.length-1&&!qb.includes(this.shapes[xb+1])){var Eb=this.shapes[xb];this.shapes[xb]=this.shapes[xb+1];this.shapes[xb+1]=Eb}});cb||this.app.persist();return this});Bb(this,"sendBackward",Na=>{const cb=this.parseShapesArg(Na);cb.sort((qb,xb)=>this.shapes.indexOf(qb)-this.shapes.indexOf(xb)).map(qb=>this.shapes.indexOf(qb)).forEach(qb=>
{if(0!==qb&&!cb.includes(this.shapes[qb-1])){var xb=this.shapes[qb];this.shapes[qb]=this.shapes[qb-1];this.shapes[qb-1]=xb}});this.app.persist();return this});Bb(this,"bringToFront",Na=>{const cb=this.parseShapesArg(Na);this.shapes=this.shapes.filter(qb=>!cb.includes(qb)).concat(cb);this.app.persist();return this});Bb(this,"sendToBack",Na=>{const cb=this.parseShapesArg(Na);this.shapes=cb.concat(this.shapes.filter(qb=>!cb.includes(qb)));this.app.persist();return this});Bb(this,"flip",(Na,cb)=>{Na=
this.parseShapesArg(Na);const qb=kg.getCommonBounds(Na.map(xb=>xb.bounds));Na.forEach(xb=>{var Eb;const jc=kg.getRelativeTransformedBoundingBox(qb,qb,xb.bounds,"horizontal"===cb,"vertical"===cb);if(xb.serialized)xb.onResize(xb.serialized,{bounds:jc,center:kg.getBoundsCenter(jc),rotation:null!=(Eb=xb.props.rotation)?Eb:-0,type:"top_left_corner",scale:xb.canFlip&&xb.props.scale?"horizontal"===cb?[-xb.props.scale[0],1]:[1,-xb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();
return this});Bb(this,"getShapeById",Na=>this.shapes.find(cb=>cb.id===Na));Bb(this,"cleanup",Na=>{Na=xc(this.bindings,Na);const cb=new Set;let qb=!1;const xb=Ss(this.bindings);Na.forEach(Eb=>{var jc;if(this.bindings[Eb.id]){var oc=this.getShapeById(Eb.toId),hc=this.getShapeById(Eb.fromId);oc&&hc?cb.has(hc.id)||(Eb=this.updateArrowBindings(hc),cb.add(hc.id),Eb&&(oc=Ke(Ke({},hc.props),Eb),null==(jc=this.getShapeById(oc.id))?void 0:jc.update(oc,!1,(0,XE.default)(null==Eb?void 0:Eb.handles,null==hc?void 0:
hc.props.handles)))):(delete xb[Eb.id],qb=!0)}});Object.keys(xb).forEach(Eb=>{const jc=this.bindings[Eb];0===this.shapes.filter(oc=>oc.id===jc.fromId||oc.id===jc.toId).length&&(delete xb[Eb],qb=!0)});qb&&this.update({bindings:xb})});Bb(this,"updateArrowBindings",Na=>{var cb,qb,xb,Eb={start:Ss(Na.props.handles.start),end:Ss(Na.props.handles.end)},jc={isBound:!1,handle:Na.props.handles.start,point:Fe.add(Na.props.handles.start.point,Na.props.point)},oc={isBound:!1,handle:Na.props.handles.end,point:Fe.add(Na.props.handles.end.point,
Na.props.point)};if(Na.props.handles.start.bindingId){var hc=void 0!==(null==(cb=Na.props.decorations)?void 0:cb.start);cb=Na.props.handles.start;var Rc=this.bindings[Na.props.handles.start.bindingId],hd=this.getShapeById(null==Rc?void 0:Rc.toId);if(hd){jc=hd.getBounds();var zc=hd.getExpandedBounds(),$c=kg.expandBounds(jc,hc?Rc.distance:1);const {minX:Uc,minY:td,width:vd,height:ae}=zc,qe=Fe.add([Uc,td],Fe.mulV([vd,ae],Fe.rotWith(Rc.point,[.5,.5],hd.props.rotation||0)));jc={isBound:!0,hasDecoration:hc,
binding:Rc,handle:cb,point:qe,target:hd,bounds:jc,expandedBounds:zc,intersectBounds:$c,center:hd.getCenter()}}}if(Na.props.handles.end.bindingId&&(hc=void 0!==(null==(qb=Na.props.decorations)?void 0:qb.end),qb=Na.props.handles.end,cb=this.bindings[Na.props.handles.end.bindingId],Rc=this.getShapeById(null==cb?void 0:cb.toId))){oc=Rc.getBounds();hd=Rc.getExpandedBounds();zc=hc?kg.expandBounds(oc,cb.distance):oc;const {minX:Uc,minY:td,width:vd,height:ae}=hd;$c=Fe.add([Uc,td],Fe.mulV([vd,ae],Fe.rotWith(cb.point,
[.5,.5],Rc.props.rotation||0)));oc={isBound:!0,hasDecoration:hc,binding:cb,handle:qb,point:$c,target:Rc,bounds:oc,expandedBounds:hd,intersectBounds:zc,center:Rc.getCenter()}}for(const Uc of["end","start"]){qb="start"===Uc?jc:oc;const td="start"===Uc?oc:jc;if(qb.isBound)if(qb.binding.distance){if(hc=Fe.uni(Fe.sub(qb.point,td.point)),cb=C(td.point,hc,qb.intersectBounds,qb.target.props.rotation).filter(vd=>vd.didIntersect).map(vd=>vd.points[0]).sort((vd,ae)=>Fe.dist(vd,td.point)-Fe.dist(ae,td.point)),
cb[0])if(Rc=void 0,td.isBound&&(Rc=C(td.point,hc,td.intersectBounds,td.target.props.rotation).filter(vd=>vd.didIntersect).map(vd=>vd.points[0]).sort((vd,ae)=>Fe.dist(vd,td.point)-Fe.dist(ae,td.point))[0]),td.isBound&&(2>cb.length||Rc&&cb[0]&&10>Math.ceil(Fe.dist(cb[0],Rc))||kg.boundsContain(qb.expandedBounds,td.expandedBounds)||kg.boundsCollide(qb.expandedBounds,td.expandedBounds)))hc=Fe.uni(Fe.sub(td.point,qb.point)),cb=C(qb.point,hc,qb.bounds,qb.target.props.rotation).filter(vd=>vd.didIntersect).map(vd=>
vd.points[0]),cb[0]&&(Eb[Uc].point=Fe.toFixed(Fe.sub(cb[0],Na.props.point)),Eb["start"===Uc?"end":"start"].point=Fe.toFixed(Fe.add(Fe.sub(cb[0],Na.props.point),Fe.mul(hc,Math.min(Fe.dist(cb[0],td.point),10*(kg.boundsContain(td.bounds,qb.intersectBounds)?-1:1))))));else{if(!td.isBound&&(cb[0]&&10>Fe.dist(cb[0],td.point)||Mk.pointInBounds(td.point,qb.intersectBounds)))return Eb=Fe.uni(Fe.sub(qb.center,td.point)),null==(xb=Na.getHandlesChange)?void 0:xb.call(Na,Na.props,{[Uc]:ag(Ke({},Na.props.handles[Uc]),
{point:Fe.toFixed(Fe.add(Fe.sub(td.point,Na.props.point),Fe.mul(Eb,10)))})});cb[0]&&(Eb[Uc].point=Fe.toFixed(Fe.sub(cb[0],Na.props.point)))}}else Eb[Uc].point=Fe.sub(qb.point,Na.props.point)}return Na.getHandlesChange(Na.props,Eb)});const {id:n,name:S,shapes:fa=[],bindings:la={},nonce:va}=d;this.id=n;this.name=S;this.bindings=Object.assign({},la);this.app=a;this.nonce=va||0;this.addShapes(...fa);Ic(this);rc(()=>{const Na=0<this.shapes.length?Object.fromEntries(this.shapes.map(cb=>[cb.id,cb.nonce])):
null;if(this.lastShapesNounces&&Na){const cb=this.lastShapesNounces,qb=[...(new Set([...Object.keys(Na),...Object.keys(cb)]))].filter(xb=>cb[xb]!==Na[xb]);requestAnimationFrame(()=>{this.cleanup(qb)})}Na&&(this.lastShapesNounces=Na)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>Kb(a)),bindings:Ss(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,
a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,n)=>a.indexOf(d.id)-a.indexOf(n.id));return this}addShapes(...a){if(0!==a.length)return a="getBounds"in a[0]?a:a.map(d=>new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(n=>!d.includes(n));return d}getBindableShapes(){return this.shapes.filter(a=>
a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};Ce([Ff],Fm.prototype,"id",2);Ce([Ff],Fm.prototype,"name",2);Ce([Ff],Fm.prototype,"shapes",2);Ce([Ff],Fm.prototype,"bindings",2);Ce([sg],Fm.prototype,"serialized",1);Ce([sg],Fm.prototype,"shapesById",1);Ce([Ff],Fm.prototype,"nonce",2);Ce([qh],Fm.prototype,"update",1);Ce([qh],Fm.prototype,"updateBindings",1);Ce([qh],Fm.prototype,"updateShapesIndex",1);Ce([qh],Fm.prototype,"addShapes",1);Ce([qh],Fm.prototype,"removeShapes",1);Ce([qh],Fm.prototype,
"bringForward",2);Ce([qh],Fm.prototype,"sendBackward",2);Ce([qh],Fm.prototype,"bringToFront",2);Ce([qh],Fm.prototype,"sendToBack",2);Ce([qh],Fm.prototype,"cleanup",2);var al=class{constructor(){Bb(this,"shiftKey",!1);Bb(this,"ctrlKey",!1);Bb(this,"modKey",!1);Bb(this,"altKey",!1);Bb(this,"spaceKey",!1);Bb(this,"isPinching",!1);Bb(this,"currentScreenPoint",[0,0]);Bb(this,"currentPoint",[0,0]);Bb(this,"previousScreenPoint",[0,0]);Bb(this,"previousPoint",[0,0]);Bb(this,"originScreenPoint",[0,0]);Bb(this,
"originPoint",[0,0]);Bb(this,"pointerIds",new Set);Bb(this,"state","idle");Bb(this,"containerOffset",[0,0]);Bb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);this.updateModifiers(d);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});Bb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});Bb(this,"onPointerUp",(a,d)=>
{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});Bb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});Bb(this,"onKeyUp",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});Bb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});Bb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});Bb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});
Ic(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=Fe.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=Xb()?a.metaKey:a.ctrlKey))}};Ce([Ff],al.prototype,"shiftKey",2);Ce([Ff],al.prototype,"ctrlKey",2);Ce([Ff],al.prototype,"modKey",2);Ce([Ff],al.prototype,"altKey",
2);Ce([Ff],al.prototype,"spaceKey",2);Ce([Ff],al.prototype,"isPinching",2);Ce([Ff],al.prototype,"currentScreenPoint",2);Ce([Ff],al.prototype,"currentPoint",2);Ce([Ff],al.prototype,"previousScreenPoint",2);Ce([Ff],al.prototype,"previousPoint",2);Ce([Ff],al.prototype,"originScreenPoint",2);Ce([Ff],al.prototype,"originPoint",2);Ce([Ff],al.prototype,"state",2);Ce([Ff],al.prototype,"containerOffset",2);Ce([qh],al.prototype,"updateContainerOffset",1);Ce([qh],al.prototype,"updateModifiers",1);Ce([qh],al.prototype,
"onPointerDown",2);Ce([qh],al.prototype,"onPointerMove",2);Ce([qh],al.prototype,"onPointerUp",2);Ce([qh],al.prototype,"onKeyDown",2);Ce([qh],al.prototype,"onKeyUp",2);Ce([qh],al.prototype,"onPinchStart",2);Ce([qh],al.prototype,"onPinch",2);Ce([qh],al.prototype,"onPinchEnd",2);var HE=(a,d=100)=>-(Math.cos(Math.PI*ee.clamp(a/d,0,1))-1)/2,Rs=class{constructor(){Bb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});Bb(this,"camera",{point:[0,0],zoom:1});Bb(this,"updateBounds",a=>
{this.bounds=a;return this});Bb(this,"panCamera",a=>this.update({point:ee.sub(this.camera.point,ee.div(a,this.camera.zoom))}));Bb(this,"panToPointWhenNearBounds",a=>{const d=ee.div([Rs.panThreshold,Rs.panThreshold],this.camera.zoom),n=ee.sub([this.currentView.maxX,this.currentView.maxY],ee.add(a,d));a=ee.sub([this.currentView.minX,this.currentView.minY],ee.sub(a,d));this.panCamera(ee.mul([0>n[0]?n[0]:0<a[0]?a[0]:0,0>n[1]?n[1]:0<a[1]?a[1]:0],-Rs.panMultiplier*this.camera.zoom))});Bb(this,"update",
({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});Bb(this,"getPagePoint",a=>{const {camera:d,bounds:n}=this;return ee.sub(ee.div(ee.sub(a,[n.minX,n.minY]),d.zoom),d.point)});Bb(this,"getScreenPoint",a=>{const {camera:d}=this;return ee.mul(ee.add(a,d.point),d.zoom)});Bb(this,"onZoom",(a,d,n=!1)=>this.pinchZoom(a,[0,0],d,n));Bb(this,"pinchZoom",(a,d,n,S=!1)=>{var {camera:fa}=this;d=ee.sub(fa.point,
ee.div(d,fa.zoom));n=ee.clamp(n,Rs.minZoom,Rs.maxZoom);fa=ee.div(a,fa.zoom);a=ee.div(a,n);a=ee.toFixed(ee.add(d,ee.sub(a,fa)));S?this.animateCamera({point:a,zoom:n}):this.update({point:a,zoom:n});return this});Bb(this,"setZoom",(a,d=!1)=>{const {bounds:n}=this;this.onZoom([n.width/2,n.height/2],a,d)});Bb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});Bb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});Bb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});
Bb(this,"animateCamera",({point:a,zoom:d})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/d}));Bb(this,"animateToViewport",a=>{const d=performance.now(),n=Ke({},this.currentView),S=()=>{var fa=performance.now()-d;fa=HE(fa);var la=n.minX+(a.minX-n.minX)*fa;this.update({point:[-la,-(n.minY+(a.minY-n.minY)*fa)],zoom:this.bounds.width/(n.maxX+(a.maxX-n.maxX)*fa-la)});1>fa&&requestAnimationFrame(S)};
S()});Bb(this,"zoomToBounds",({width:a,height:d,minX:n,minY:S})=>{const {bounds:fa,camera:la}=this;let va=Math.min((fa.width-100)/a,(fa.height-100)/d);va=Math.min(1,Math.max(Rs.minZoom,la.zoom===va||1>la.zoom?Math.min(1,va):va));a=ee.add([-n,-S],[(fa.width-a*va)/2/va,(fa.height-d*va)/2/va]);this.animateCamera({point:a,zoom:va})});Ic(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:n}}=this,S=a.width/n,fa=a.height/n;return{minX:-d[0],minY:-d[1],maxX:S-d[0],maxY:fa-d[1],width:S,height:fa}}},
hp=Rs;Bb(hp,"minZoom",.1);Bb(hp,"maxZoom",4);Bb(hp,"panMultiplier",.05);Bb(hp,"panThreshold",100);Ce([Ff],hp.prototype,"bounds",2);Ce([Ff],hp.prototype,"camera",2);Ce([qh],hp.prototype,"updateBounds",2);Ce([qh],hp.prototype,"update",2);Ce([sg],hp.prototype,"currentView",1);var IE=class{constructor(a){Bb(this,"app");Bb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});Bb(this,"hoverShape",d=>{this.app.setHoveredShape(d);
return this});Bb(this,"createShapes",(...d)=>{this.app.createShapes(d);return this});Bb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);return this});Bb(this,"deleteShapes",(...d)=>{this.app.deleteShapes(d.length?d:this.app.selectedShapesArray);return this});Bb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});Bb(this,"deselectShapes",(...d)=>{const n="string"===typeof d[0]?d:d.map(S=>S.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(S=>!n.includes(S.id)));
return this});Bb(this,"flipHorizontal",(...d)=>{this.app.flipHorizontal(d);return this});Bb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);return this});Bb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>!this.app.shapesInGroups().includes(d)));return this});Bb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});Bb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});Bb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});
Bb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});Bb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=kg.getCommonBounds(d.map(n=>n.bounds));this.app.viewport.zoomToBounds(d);return this});Bb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=kg.getCommonBounds(d.map(n=>n.bounds));this.app.viewport.update({point:Fe.add(Fe.neg(kg.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/
2])});return this});Bb(this,"zoomToSelection",()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);return this});Bb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:Fe.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});Bb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});Bb(this,"toggleSnapToGrid",()=>{const {settings:d}=this.app;d.update({snapToGrid:!d.snapToGrid});
return this});Bb(this,"togglePenMode",()=>{const {settings:d}=this.app;d.update({penMode:!d.penMode});return this});Bb(this,"setColor",d=>{const {settings:n}=this.app;n.update({color:d});this.app.selectedShapesArray.forEach(S=>{S.props.isLocked||S.update({fill:d,stroke:d})});this.app.persist();return this});Bb(this,"setScaleLevel",d=>{const {settings:n}=this.app;n.update({scaleLevel:d});this.app.selectedShapes.forEach(S=>{S.props.isLocked||S.setScaleLevel(d)});this.app.persist();return this});Bb(this,
"undo",()=>{this.app.undo();return this});Bb(this,"redo",()=>{this.app.redo();return this});Bb(this,"persist",()=>{this.app.persist();return this});Bb(this,"createNewLineBinding",(d,n)=>this.app.createNewLineBinding(d,n));Bb(this,"clone",d=>{if(!this.app.readOnly&&1===this.app.selectedShapesArray.length&&Object.values(hq).some(jc=>jc===this.app.selectedShapesArray[0].type)){var n=this.app.allSelectedShapesArray[0],S=this.app.getShapeClass(n.type),{minX:fa,minY:la,maxX:va,maxY:Na,width:cb,height:qb}=
n.bounds,xb=[0,0];switch(d){case "down":xb=[fa,Na+100];break;case "up":xb=[fa,la-100-qb];break;case "left":xb=[fa-100-cb,la];break;case "right":xb=[va+100,la]}var Eb=new S(ag(Ke({},n.serialized),{id:xk(),nonce:Date.now(),refs:[],label:"",point:xb}));this.app.history.pause();this.app.currentPage.addShapes(Eb);this.app.createNewLineBinding(n,Eb);this.app.history.resume();this.app.persist();setTimeout(()=>this.editShape(Eb))}});Bb(this,"cloneShapes",({shapes:d,assets:n,bindings:S,point:fa=[0,0]})=>{const la=
kg.getCommonBounds(d.filter(cb=>"group"!==cb.type).map(cb=>{var qb,xb,Eb,jc,oc,hc,Rc,hd,zc,$c,Uc,td,vd,ae,qe,Lf;return{minX:null!=(xb=null==(qb=cb.point)?void 0:qb[0])?xb:fa[0],minY:null!=(jc=null==(Eb=cb.point)?void 0:Eb[1])?jc:fa[1],width:null!=(hc=null==(oc=cb.size)?void 0:oc[0])?hc:4,height:null!=(hd=null==(Rc=cb.size)?void 0:Rc[1])?hd:4,maxX:(null!=($c=null==(zc=cb.point)?void 0:zc[0])?$c:fa[0])+(null!=(td=null==(Uc=cb.size)?void 0:Uc[0])?td:4),maxY:(null!=(ae=null==(vd=cb.point)?void 0:vd[1])?
ae:fa[1])+(null!=(Lf=null==(qe=cb.size)?void 0:qe[1])?Lf:4)}})),va=d.map(cb=>ag(Ke({},cb),{id:xk(),point:[fa[0]+cb.point[0]-la.minX,fa[1]+cb.point[1]-la.minY]}));va.forEach(cb=>{var qb;cb.children&&0<(null==(qb=cb.children)?void 0:qb.length)&&(cb.children=cb.children.map(xb=>{var Eb;return null==(Eb=va[d.findIndex(jc=>jc.id===xb)])?void 0:Eb.id}).filter(Nc))});const Na=[];va.flatMap(cb=>{var qb;return Object.values(null!=(qb=cb.handles)?qb:{})}).forEach(cb=>{if(cb.bindingId){var qb=S[cb.bindingId];
if(qb){var xb=d.findIndex(jc=>jc.id===qb.fromId);const Eb=d.findIndex(jc=>jc.id===qb.toId);qb&&-1!==xb&&-1!==Eb?(xb=ag(Ke({},qb),{id:xk(),fromId:va[xb].id,toId:va[Eb].id}),Na.push(xb),cb.bindingId=xb.id):cb.bindingId=void 0}else console.warn("binding not found",cb.bindingId)}});n=n.filter(cb=>va.some(qb=>qb.assetId===cb.id));return{shapes:va,assets:n,bindings:Na}});Bb(this,"getClonedShapesFromTldrString",(d,n)=>{try{{var S;const qb=null==(S=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:
S[1];if(qb){try{var fa=JSON.parse(qb)}catch(xb){fa=null}var la=fa}else la=void 0}d=la;if(!d)return null;const {shapes:va,bindings:Na,assets:cb}=d;return this.cloneShapes({shapes:va,bindings:Na,assets:cb,point:n})}catch(va){console.log(va)}return null});Bb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});Bb(this,"addClonedShapes",d=>{const {shapes:n,assets:S,bindings:fa}=d;0<S.length&&this.app.createAssets(S);0<n.length&&this.app.createShapes(n);
this.app.currentPage.updateBindings(Object.fromEntries(fa.map(la=>[la.id,la])));this.app.selectedTool.transition("idle");return this});Bb(this,"addClonedShapesFromTldrString",(d,n)=>{(d=this.getClonedShapesFromTldrString(d,n))&&this.addClonedShapes(d);return this});Bb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var n=[...d.filter(S=>"group"===S.type),...d.map(S=>this.app.getParentGroup(S))].filter(Nc);this.app.currentPage.removeShapes(...n);d=d.filter(S=>"group"!==
S.type);1<d.length&&(n=this.app.getShapeClass("group"),n=new n({id:xk(),type:n.id,parentId:this.app.currentPage.id,children:d.map(S=>S.id)}),this.app.currentPage.addShapes(n),this.app.setSelectedShapes([n]),this.app.bringForward(d,!0));this.app.persist()}});Bb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(S=>"group"===S.type),...d.map(S=>this.app.getParentGroup(S))].filter(Nc);var n=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),
this.app.persist(),this.app.setSelectedShapes(n))}});Bb(this,"convertShapes",(d,n=this.app.allSelectedShapesArray)=>{const S=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...n);n=n.map(fa=>new S(ag(Ke({},fa.serialized),{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...n);this.app.persist();this.app.setSelectedShapes(n)});Bb(this,"setCollapsed",(d,n=this.app.allSelectedShapesArray)=>{n.forEach(S=>{"logseq-portal"===S.props.type&&S.setCollapsed(d)});this.app.persist()});this.app=
a}},Rt=class{constructor(){Bb(this,"cursor","default");Bb(this,"rotation",0);Bb(this,"reset",()=>{this.cursor="default"});Bb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});Bb(this,"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});Ic(this)}};Ce([Ff],Rt.prototype,"cursor",2);Ce([Ff],Rt.prototype,"rotation",2);Ce([qh],Rt.prototype,"reset",2);Ce([qh],Rt.prototype,"setCursor",2);Ce([qh],Rt.prototype,"setRotation",2);var St=class{constructor(a){Bb(this,
"app");Bb(this,"stack",[]);Bb(this,"isPaused",!0);Bb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});Bb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});Bb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:d})});Bb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});Bb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});
Bb(this,"instantiateShape",d=>new (this.app.getShapeClass(d.type))(d));Bb(this,"deserialize",d=>{$b(()=>{var n,{pages:S}=d;const fa=this.isPaused;this.pause();const la=[...this.app.selectedIds];try{const va=new Map(this.app.pages),Na=[];for(const cb of S){const qb=va.get(cb.id);if(void 0!==qb){const xb=new Map(qb.shapes.map(Eb=>[Eb.props.id,Eb]));S=[];for(const Eb of cb.shapes){const jc=xb.get(Eb.id);void 0!==jc?(jc.nonce!==Eb.nonce&&(jc.update(Eb,!0),jc.nonce=Eb.nonce,jc.setLastSerialized(Eb)),xb.delete(Eb.id)):
S.push(this.instantiateShape(Eb))}0<xb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&qb.removeShapes(...xb.values());0<S.length&&qb.addShapes(...S);va.delete(cb.id);qb.updateBindings(cb.bindings);qb.nonce=null!=(n=cb.nonce)?n:0}else{const {id:xb,name:Eb,shapes:jc,bindings:oc,nonce:hc}=cb;Na.push(new Fm(this.app,{id:xb,name:Eb,nonce:hc,bindings:oc,shapes:jc.map(Rc=>this.instantiateShape(Rc))}))}}0<Na.length&&this.app.addPages(Na);0<va.size&&this.app.removePages(Array.from(va.values()));
this.app.setSelectedShapes(la).setErasingShapes([])}catch(va){console.warn(va)}fa||this.resume()})});this.app=a;Ic(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};Ce([Ff],St.prototype,"stack",2);Ce([qh],St.prototype,"persist",2);Ce([qh],St.prototype,"undo",2);Ce([qh],St.prototype,"redo",2);Ce([qh],St.prototype,"deserialize",2);var Lr=class{constructor(){Bb(this,"mode","light");Bb(this,"showGrid",!0);Bb(this,"snapToGrid",!0);Bb(this,"penMode",!1);Bb(this,"scaleLevel",
"md");Bb(this,"color","");Ic(this)}update(a){Object.assign(this,a)}};Ce([Ff],Lr.prototype,"mode",2);Ce([Ff],Lr.prototype,"showGrid",2);Ce([Ff],Lr.prototype,"snapToGrid",2);Ce([Ff],Lr.prototype,"penMode",2);Ce([Ff],Lr.prototype,"scaleLevel",2);Ce([Ff],Lr.prototype,"color",2);Ce([qh],Lr.prototype,"update",1);var fi=class extends Ot{constructor(a,d,n,S){var fa,la;super();Bb(this,"uuid",xk());Bb(this,"readOnly");Bb(this,"api");Bb(this,"inputs",new al);Bb(this,"cursors",new Rt);Bb(this,"viewport",new hp);
Bb(this,"settings",new Lr);Bb(this,"Tools",[]);Bb(this,"history",new St(this));Bb(this,"persist",this.history.persist);Bb(this,"undo",this.history.undo);Bb(this,"redo",this.history.redo);Bb(this,"saving",!1);Bb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});Bb(this,"load",()=>{this.notify("load",null);return this});Bb(this,"save",()=>{this.notify("save",null);return this});Bb(this,"pages",new Map([["page",new Fm(this,
{id:"page",name:"page",shapes:[],bindings:{}})]]));Bb(this,"getPageById",va=>{const Na=this.pages.get(va);if(!Na)throw Error(`Could not find a page named ${va}.`);return Na});Bb(this,"getShapeById",(va,Na=this.currentPage.id)=>{var cb;return null==(cb=this.getPageById(Na))?void 0:cb.shapesById[va]});Bb(this,"createShapes",va=>{if(this.readOnly)return this;(va=this.currentPage.addShapes(...va))&&this.notify("create-shapes",va);this.persist();return this});Bb(this,"updateShapes",va=>{if(this.readOnly)return this;
va.forEach(Na=>{const cb=this.getShapeById(Na.id);null==cb?void 0:cb.update(Na);Na.type!==(null==cb?void 0:cb.type)&&this.api.convertShapes(Na.type,[cb])});this.persist();return this});Bb(this,"deleteShapes",va=>{if(0===va.length||this.readOnly)return this;va=va.map(xb=>"string"===typeof xb?this.getShapeById(xb):xb).filter(Nc).filter(xb=>!xb.props.isLocked);const Na=this.shapesInGroups(va);va.forEach(xb=>{this.getParentGroup(xb)&&Na.push(xb)});let cb=new Set([...va,...Na].map(xb=>xb.id));Na.forEach(xb=>
{var Eb;const jc=this.getParentGroup(xb);if(jc){const oc=null==(Eb=jc.props.children)?void 0:Eb.filter(hc=>hc!==xb.id);!oc||1>=(null==oc?void 0:oc.length)?cb.add(jc.id):jc.update({children:oc})}});const qb=(xb,Eb)=>{var jc;[...cb].includes(xb)&&"line"===(null==(jc=this.getShapeById(Eb))?void 0:jc.type)&&cb.add(Eb)};this.currentPage.shapes.filter(xb=>!xb.props.isLocked).flatMap(xb=>{var Eb;return Object.values(null!=(Eb=xb.props.handles)?Eb:{})}).flatMap(xb=>xb.bindingId).filter(Nc).map(xb=>{var Eb,
jc;const oc=null==(Eb=this.currentPage.bindings[xb])?void 0:Eb.toId;xb=null==(jc=this.currentPage.bindings[xb])?void 0:jc.fromId;oc&&xb&&(qb(oc,xb),qb(xb,oc))});va=[...cb].map(xb=>this.getShapeById(xb));this.setSelectedShapes(this.selectedShapesArray.filter(xb=>!cb.has(xb.id)));(va=this.currentPage.removeShapes(...va))&&this.notify("delete-shapes",va);this.persist();return this});Bb(this,"bringForward",(va=this.selectedShapesArray,Na)=>{0<va.length&&!this.readOnly&&this.currentPage.bringForward(va,
Na);return this});Bb(this,"sendBackward",(va=this.selectedShapesArray)=>{0<va.length&&!this.readOnly&&this.currentPage.sendBackward(va);return this});Bb(this,"sendToBack",(va=this.selectedShapesArray)=>{0<va.length&&!this.readOnly&&this.currentPage.sendToBack(va);return this});Bb(this,"bringToFront",(va=this.selectedShapesArray)=>{0<va.length&&!this.readOnly&&this.currentPage.bringToFront(va);return this});Bb(this,"flipHorizontal",(va=this.selectedShapesArray)=>{this.currentPage.flip(va,"horizontal");
return this});Bb(this,"flipVertical",(va=this.selectedShapesArray)=>{this.currentPage.flip(va,"vertical");return this});Bb(this,"align",(va,Na=this.selectedShapesArray)=>{if(2>Na.length||this.readOnly)return this;const cb=Na.map(oc=>{const hc=oc.getBounds();return{id:oc.id,point:[hc.minX,hc.minY],bounds:hc}}),qb=kg.getCommonBounds(cb.map(({bounds:oc})=>oc)),xb=qb.minX+qb.width/2,Eb=qb.minY+qb.height/2,jc=Object.fromEntries(cb.map(({id:oc,point:hc,bounds:Rc})=>[oc,{prev:hc,next:{top:[hc[0],qb.minY],
centerVertical:[hc[0],Eb-Rc.height/2],bottom:[hc[0],qb.maxY-Rc.height],left:[qb.minX,hc[1]],centerHorizontal:[xb-Rc.width/2,hc[1]],right:[qb.maxX-Rc.width,hc[1]]}[va]}]));Na.forEach(oc=>{jc[oc.id]&&oc.update({point:jc[oc.id].next})});this.persist();return this});Bb(this,"distribute",(va,Na=this.selectedShapesArray)=>{if(2>Na.length||this.readOnly)return this;const cb=Object.fromEntries(kg.getDistributions(Na,va).map(qb=>[qb.id,qb]));Na.forEach(qb=>{cb[qb.id]&&qb.update({point:cb[qb.id].next})});this.persist();
return this});Bb(this,"packIntoRectangle",(va=this.selectedShapesArray)=>{if(2>va.length||this.readOnly)return this;const Na=Object.fromEntries(kg.getPackedDistributions(va).map(cb=>[cb.id,cb]));va.forEach(cb=>{Na[cb.id]&&cb.update({point:Na[cb.id].next})});this.persist();return this});Bb(this,"setLocked",va=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(Na=>{Na.update({isLocked:va})});this.persist();return this});Bb(this,"assets",{});Bb(this,
"removeUnusedAssets",()=>{const va=this.getCleanUpAssets();Object.keys(this.assets).forEach(Na=>{va.some(cb=>cb.id===Na)||delete this.assets[Na]});this.persist();return this});Bb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const Na=this.allSelectedShapesArray;var va=JSON.stringify({shapes:Na.map(qb=>qb.serialized),assets:this.getCleanUpAssets().filter(qb=>Na.some(xb=>xb.props.assetId===qb.id)),bindings:Kb(this.currentPage.bindings)});va=encodeURIComponent(`<whiteboard-tldr>${va}</whiteboard-tldr>`);
const cb=this.selectedShapesArray.map(qb=>`((${qb.props.id}))`).join(" ");this.notify("copy",{text:cb,html:va})}});Bb(this,"paste",(va,Na)=>{var cb;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!Na,dataTransfer:null!=(cb=null==va?void 0:va.clipboardData)?cb:void 0})});Bb(this,"cut",()=>{this.copy();this.api.deleteShapes()});Bb(this,"drop",(va,Na)=>{this.notify("drop",{dataTransfer:va,point:Na?this.viewport.getPagePoint(Na):kg.getBoundsCenter(this.viewport.currentView)})});
Bb(this,"selectTool",(va,Na={})=>{this.readOnly&&!["select","move"].includes(va)||this.transition(va,Na)});Bb(this,"editingId");Bb(this,"setEditingShape",va=>{this.editingId="string"===typeof va?va:null==va?void 0:va.id;return this});Bb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});Bb(this,"hoveredId");Bb(this,"setHoveredShape",va=>{this.hoveredId="string"===typeof va?va:null==va?void 0:va.id;return this});Bb(this,"selectedIds",new Set);Bb(this,
"selectedShapes",new Set);Bb(this,"selectionRotation",0);Bb(this,"setSelectedShapes",va=>{var Na;const {selectedIds:cb,selectedShapes:qb}=this;cb.clear();qb.clear();va[0]&&"string"===typeof va[0]?va.forEach(Eb=>cb.add(Eb)):va.forEach(Eb=>cb.add(Eb.id));const xb=this.currentPage.shapes.filter(Eb=>cb.has(Eb.id));xb.forEach(Eb=>qb.add(Eb));this.selectionRotation=1===xb.length?null!=(Na=xb[0].props.rotation)?Na:0:0;0===va.length&&this.setEditingShape();return this});Bb(this,"erasingIds",new Set);Bb(this,
"erasingShapes",new Set);Bb(this,"setErasingShapes",va=>{const {erasingIds:Na,erasingShapes:cb}=this;Na.clear();cb.clear();va[0]&&"string"===typeof va[0]?va.forEach(qb=>Na.add(qb)):va.forEach(qb=>Na.add(qb.id));this.currentPage.shapes.filter(qb=>Na.has(qb.id)).forEach(qb=>cb.add(qb));return this});Bb(this,"bindingIds");Bb(this,"setBindingShapes",va=>{this.bindingIds=va;return this});Bb(this,"clearBindingShape",()=>this.setBindingShapes());Bb(this,"createNewLineBinding",(va,Na)=>{va="string"===typeof va?
this.getShapeById(va):va;Na="string"===typeof Na?this.getShapeById(Na):Na;if((null==va?0:va.canBind)&&(null==Na?0:Na.canBind)&&(Na=xd(va,Na))){const [cb,qb]=Na;this.createShapes([cb]);this.currentPage.updateBindings(Object.fromEntries(qb.map(xb=>[xb.id,xb])));this.persist();return!0}return!1});Bb(this,"brush");Bb(this,"setBrush",va=>{this.brush=va;return this});Bb(this,"setCamera",(va,Na)=>{this.viewport.update({point:va,zoom:Na});return this});Bb(this,"getPagePoint",va=>{const {camera:Na}=this.viewport;
return ee.sub(ee.div(va,Na.zoom),Na.point)});Bb(this,"getScreenPoint",va=>{const {camera:Na}=this.viewport;return ee.mul(ee.add(va,Na.point),Na.zoom)});Bb(this,"Shapes",new Map);Bb(this,"registerShapes",va=>{va.forEach(Na=>{if("group"===Na.id){const cb=this;Na.prototype.getShapes=function(){var qb,xb;return null!=(xb=null==(qb=this.props.children)?void 0:qb.map(Eb=>cb.getShapeById(Eb)).filter(Boolean))?xb:[]}}return this.Shapes.set(Na.id,Na)})});Bb(this,"deregisterShapes",va=>{va.forEach(Na=>this.Shapes.delete(Na.id))});
Bb(this,"getShapeClass",va=>{if(!va)throw Error("No shape type provided.");const Na=this.Shapes.get(va);if(!Na)throw Error(`Could not find shape class for ${va}`);return Na});Bb(this,"wrapUpdate",va=>{$b(()=>{const Na=!this.history.isPaused;Na&&this.history.pause();va();Na&&(this.history.resume(),this.persist())})});Bb(this,"subscriptions",new Set([]));Bb(this,"subscribe",(va,Na)=>{if(void 0===Na)throw Error("Callback is required.");const cb={event:va,callback:Na};this.subscriptions.add(cb);return()=>
this.unsubscribe(cb)});Bb(this,"unsubscribe",va=>{this.subscriptions.delete(va);return this});Bb(this,"notify",(va,Na)=>{this.subscriptions.forEach(cb=>{cb.event===va&&cb.callback(this,Na)});return this});Bb(this,"onTransition",()=>{});Bb(this,"onPointerDown",(va,Na)=>{if(!this.editingShape&&1===Na.button&&!this.isIn("move"))this.temporaryTransitionToMove(Na);else if(2===Na.button&&!this.editingShape)Na.preventDefault(),this.transition("select");else if("clientX"in Na)this.inputs.onPointerDown([...this.viewport.getPagePoint([Na.clientX,
Na.clientY]),Na.pressure],Na)});Bb(this,"onPointerUp",(va,Na)=>{if(!this.editingShape&&1===Na.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Na.stopPropagation(),Na.preventDefault();else if("clientX"in Na)this.inputs.onPointerUp([...this.viewport.getPagePoint([Na.clientX,Na.clientY]),Na.pressure],Na)});Bb(this,"onPointerMove",(va,Na)=>{if("clientX"in Na)this.inputs.onPointerMove([...this.viewport.getPagePoint([Na.clientX,Na.clientY]),Na.pressure],Na)});Bb(this,"onKeyDown",
(va,Na)=>{if(this.editingShape||" "!==Na.key||this.isIn("move"))this.inputs.onKeyDown(Na);else this.temporaryTransitionToMove(Na)});Bb(this,"onKeyUp",(va,Na)=>{if(!this.editingShape&&" "===Na.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Na.stopPropagation(),Na.preventDefault();else this.inputs.onKeyUp(Na)});Bb(this,"onPinchStart",(va,Na)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(va.point),.5],Na)});Bb(this,"onPinch",(va,Na)=>{this.inputs.onPinch([...this.viewport.getPagePoint(va.point),
.5],Na)});Bb(this,"onPinchEnd",(va,Na)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(va.point),.5],Na)});this._states=[Pt,Qt];this.readOnly=S;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),S=null!=(fa=this.initial)?fa:this.states[0].id,fa=this.children.get(S))&&(this.currentState=fa,null==(la=this.currentState)?void 0:la._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);n&&this.registerTools(n);this.history.resume();a&&this.history.deserialize(a);
this.api=new IE(this);Ic(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>
d.props.children).filter(Nc).map(d=>this.getShapeById(d)).filter(Nc)}getParentGroup(a){return this.shapes.find(d=>{var n;return null==(n=d.props.children)?void 0:n.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):a.forEach(d=>delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(n=>{n.props.assetId&&this.assets[n.props.assetId]&&
a.add(this.assets[n.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=this;return a?d.shapes.find(n=>n.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(n=>n.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=
this;return a?this.shapes.find(d=>{var n;return"group"===d.type&&(null==(n=d.props.children)?void 0:n.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;
const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(S=>{var fa;return Object.values(null!=(fa=S.props.handles)?fa:{})}).flatMap(S=>S.bindingId).filter(Nc).flatMap(S=>{var fa,la;return[null==(fa=this.currentPage.bindings[S])?void 0:fa.fromId,null==(la=this.currentPage.bindings[S])?void 0:la.toId]}).filter(Nc):[],n=[...(null!=(a=this.bindingIds)?a:[]),...d];return n?this.currentPage.shapes.filter(S=>null==n?void 0:n.includes(S.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;
return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:d,viewport:{currentView:n}}=this;return d.shapes.filter(S=>!S.canUnmount||a.has(S)||kg.boundsContain(n,S.rotatedBounds)||kg.boundsCollide(n,S.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!kg.boundsContain(d,a)&&!kg.boundsCollide(d,a)){var n=kg.getBoundsCenter(a);return ee.clampV([(n[0]-
d.minX-d.width/2)/d.width,(n[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?ag(Ke({},a[0].bounds),{rotation:a[0].props.rotation}):kg.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}get showCloneHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape")&&1===a.length&&Object.values(hq).some(d=>d===this.selectedShapesArray[0].type)&&!this.readOnly}temporaryTransitionToMove(a){a.stopPropagation();a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};Bb(fi,"id","app");Bb(fi,"initial","select");Ce([sg],fi.prototype,"serialized",1);Ce([Ff],fi.prototype,"pages",2);Ce([sg],
fi.prototype,"currentPageId",1);Ce([sg],fi.prototype,"currentPage",1);Ce([qh],fi.prototype,"addPages",1);Ce([qh],fi.prototype,"removePages",1);Ce([qh],fi.prototype,"createShapes",2);Ce([qh],fi.prototype,"updateShapes",2);Ce([qh],fi.prototype,"deleteShapes",2);Ce([Ff],fi.prototype,"assets",2);Ce([qh],fi.prototype,"addAssets",1);Ce([qh],fi.prototype,"removeAssets",1);Ce([qh],fi.prototype,"removeUnusedAssets",2);Ce([sg],fi.prototype,"selectedTool",1);Ce([Ff],fi.prototype,"editingId",2);Ce([sg],fi.prototype,
"editingShape",1);Ce([qh],fi.prototype,"setEditingShape",2);Ce([Ff],fi.prototype,"hoveredId",2);Ce([sg],fi.prototype,"hoveredShape",1);Ce([sg],fi.prototype,"hoveredGroup",1);Ce([qh],fi.prototype,"setHoveredShape",2);Ce([Ff],fi.prototype,"selectedIds",2);Ce([Ff],fi.prototype,"selectedShapes",2);Ce([Ff],fi.prototype,"selectionRotation",2);Ce([sg],fi.prototype,"selectedShapesArray",1);Ce([sg],fi.prototype,"allSelectedShapes",1);Ce([sg],fi.prototype,"allSelectedShapesArray",1);Ce([qh],fi.prototype,"setSelectedShapes",
2);Ce([qh],fi.prototype,"setSelectionRotation",1);Ce([Ff],fi.prototype,"erasingIds",2);Ce([Ff],fi.prototype,"erasingShapes",2);Ce([sg],fi.prototype,"erasingShapesArray",1);Ce([qh],fi.prototype,"setErasingShapes",2);Ce([Ff],fi.prototype,"bindingIds",2);Ce([sg],fi.prototype,"bindingShapes",1);Ce([qh],fi.prototype,"setBindingShapes",2);Ce([qh],fi.prototype,"createNewLineBinding",2);Ce([Ff],fi.prototype,"brush",2);Ce([qh],fi.prototype,"setBrush",2);Ce([qh],fi.prototype,"setCamera",2);Ce([sg],fi.prototype,
"currentGrid",1);Ce([sg],fi.prototype,"shapes",1);Ce([sg],fi.prototype,"shapesInViewport",1);Ce([sg],fi.prototype,"selectionDirectionHint",1);Ce([sg],fi.prototype,"selectionBounds",1);Ce([sg],fi.prototype,"showSelection",1);Ce([sg],fi.prototype,"showSelectionDetail",1);Ce([sg],fi.prototype,"showSelectionRotation",1);Ce([sg],fi.prototype,"showContextBar",1);Ce([sg],fi.prototype,"showRotateHandles",1);Ce([sg],fi.prototype,"showResizeHandles",1);Ce([sg],fi.prototype,"showCloneHandles",1);var JE=Function.prototype.toString,
Ax=Object.create,KE=Object.prototype.toString,LE=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,n){this._keys.push(d);this._values.push(n)};return a}(),ME="undefined"!==typeof WeakMap?Ee:te,NE="g"===/test/g.flags?Af:Tf,OE="undefined"!==typeof Symbol?Cf:Vf,PE=Object.defineProperty,QE=Object.getOwnPropertyDescriptor,FA=Object.getOwnPropertyNames,
Bx=Object.getOwnPropertySymbols,GA=Object.prototype,HA=GA.hasOwnProperty,RE=GA.propertyIsEnumerable,IA="function"===typeof Bx,SE=IA?og:FA,TE=Array.isArray,Cx=Object.assign,UE=Object.getPrototypeOf,JA={array:function(a,d){var n=new d.Constructor;d.cache.set(a,n);for(var S=0,fa=a.length;S<fa;++S)n[S]=d.copier(a[S],d);return n},arrayBuffer:function(a,d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,
d){return new d.Constructor(a.getTime())},error:Uh,map:Yg,object:IA?Xg:wg,regExp:function(a,d){d=new d.Constructor(a.source,NE(a));d.lastIndex=a.lastIndex;return d},set:Bi},VE=Cx({},JA,{array:function(a,d){var n=new d.Constructor;d.cache.set(a,n);return oh(a,n,d)},map:function(a,d){return oh(a,Yg(a,d),d)},object:function(a,d){var n=Oe(d.prototype);d.cache.set(a,n);return oh(a,n,d)},set:function(a,d){return oh(a,Bi(a,d),d)}});vi(Cx({},VE,{}));var WE=vi({}),XE=ig(Ht()),YE=ig(Gr()),Ss=WE,Lo=class{static insertTextFirefox(a,
d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const n=a.ownerDocument,S=n.activeElement;S!==a&&a.focus();n.execCommand("insertText",!1,d)||Lo.insertTextFirefox(a,d);S===n.body?a.blur():S instanceof HTMLElement&&S!==a&&S.focus()}static set(a,d){a.select();Lo.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:n}=a;return a.value.slice(d?d:void 0,n?n:void 0)}static wrapSelection(a,
d,n){const {selectionStart:S,selectionEnd:fa}=a,la=Lo.getSelection(a);Lo.insert(a,d+la+(null!=n?n:d));a.selectionStart=(S||0)+d.length;a.selectionEnd=(fa||0)+d.length}static replace(a,d,n){let S=0;a.value.replace(d,(...fa)=>{const la=S+fa[fa.length-2],va=fa[0].length;a.selectionStart=la;a.selectionEnd=la+va;fa="string"===typeof n?n:n(...fa);Lo.insert(a,fa);a.selectionStart=la;S+=fa.length-va;return fa})}static findLineEnd(a,d){const n=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(n)?d:n+1}static indent(a){var d;
const {selectionStart:n,selectionEnd:S,value:fa}=a;var la=fa.slice(n,S);if((la=null==(d=/\n/g.exec(la))?void 0:d.length)&&0<la){d=fa.lastIndexOf("\n",n-1)+1;var va=a.value.slice(d,S-1);la=va.replace(/^|\n/g,`$&${Lo.INDENT}`);va=la.length-va.length;a.setSelectionRange(d,S-1);Lo.insert(a,la);a.setSelectionRange(n+1,S+va)}else Lo.insert(a,Lo.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:n,value:S}=a;var fa=S.lastIndexOf("\n",d-1)+1;const la=Lo.findLineEnd(S,n);var va=a.value.slice(fa,
la);const Na=va.replace(/(^|\n)(\t| {1,2})/g,"$1");va=va.length-Na.length;a.setSelectionRange(fa,la);Lo.insert(a,Na);fa=(fa=/\t| {1,2}/.exec(S.slice(fa,d)))?fa[0].length:0;a.setSelectionRange(d-fa,Math.max(d-fa,n-va))}static normalizeText(a){return a.replace(Lo.fixNewLines,"\n")}},Tt=Lo;Bb(Tt,"fixNewLines",/\r?\n|\r/g);Bb(Tt,"INDENT","  ");var Mr;"undefined"!==typeof window&&(Mr=Fg());var Dx=new Map,KA=Xb()?"⌘":"ctrl",ZE=class extends fi{},LA=ig(ca(25)),$E=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var MA=ig(ca(25)),Ex={},Uu=ig(ca(25)),aF=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},Fx=ig(ca(25)),Gx=new Map,bF={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",
binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},cF=((a,...d)=>a.reduce((n,S,fa)=>n+S+(fa<d.length?d[fa]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: calc(64px / var(--tl-zoom));;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle:hover {
    fill: var(--tl-selectStroke);
    cursor: pointer; 
  }

  .tl-clone-handle:hover line {
    stroke: var(--tl-background);
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,NA=ig(ca(25)),OA=ig(ca(25)),Hx={},bl={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},PA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},dF=["enter","leave"],eF=["gotpointercapture","lostpointercapture"],
QA=class{constructor(a,d,n){this.ctrl=a;this.args=d;this.key=n;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:n,args:S}=this;d[n]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=S;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,n=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=n.from?ih(n.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:n,shared:S}=this;d.args=this.args;var fa=0;if(a){d.event=a;n.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;S.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;S.locked=!!document.pointerLockElement;fa=Object;var la=fa.assign,va={};"buttons"in a&&(va.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:td,altKey:vd,metaKey:ae,ctrlKey:qe}=a;Object.assign(va,{shiftKey:td,altKey:vd,metaKey:ae,ctrlKey:qe})}la.call(fa,S,va);S.down=S.pressed=1===S.buttons%2||0<S.touches;fa=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(la=d._delta.map(Math.abs),bl.addTo(d._distance,la));this.axisIntent&&
this.axisIntent(a);const [Na,cb]=d._movement,[qb,xb]=n.threshold,{_step:Eb,values:jc}=d;n.hasCustomTransform?(!1===Eb[0]&&(Eb[0]=Math.abs(Na)>=qb&&jc[0]),!1===Eb[1]&&(Eb[1]=Math.abs(cb)>=xb&&jc[1])):(!1===Eb[0]&&(Eb[0]=Math.abs(Na)>=qb&&Math.sign(Na)*qb),!1===Eb[1]&&(Eb[1]=Math.abs(cb)>=xb&&Math.sign(cb)*xb));d.intentional=!1!==Eb[0]||!1!==Eb[1];if(d.intentional){la=[0,0];if(n.hasCustomTransform){const [td,vd]=jc;la[0]=!1!==Eb[0]?td-Eb[0]:0;la[1]=!1!==Eb[1]?vd-Eb[1]:0}else la[0]=!1!==Eb[0]?Na-Eb[0]:
0,la[1]=!1!==Eb[1]?cb-Eb[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(la);va=d.offset;var oc=d._active&&!d._blocked||d.active;oc&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=S[this.ingKey]=d._active,a&&(d.first&&("bounds"in n&&(d._bounds=ih(n.bounds,d)),this.setup&&this.setup()),d.movement=la,this.computeOffset()));var [hc,Rc]=d.offset,[[hd,zc],[$c,Uc]]=d._bounds;d.overflow=[hc<hd?-1:hc>zc?1:0,Rc<$c?-1:Rc>Uc?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?
d._movement[0]:d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=Mf(d._bounds,d.offset,d._active?n.rubberband||[0,0]:[0,0]);d.delta=bl.sub(d.offset,va);this.computeMovement();oc&&(!d.last||32<fa)&&(d.delta=bl.sub(d.offset,va),a=d.delta.map(Math.abs),bl.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<fa&&(d.velocity=[a[0]/fa,a[1]/fa]))}}emit(){const a=this.state;var d=
this.shared;const n=this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||n.triggerAllEvents)d=this.handler(Nf(Nf(Nf({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Vu=class extends QA{constructor(...a){super(...a);ug(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=bl.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=bl.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,n=this.config;!d.axis&&a&&(a="object"===typeof n.axisThreshold?n.axisThreshold[sh(a)]:n.axisThreshold,d.axis=pj(d._movement,a));d._blocked=(n.lockDirection||!!n.axis)&&!d.axis||!!n.axis&&n.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},fF=a=>a,RA={enabled(a=!0){return a},
eventOptions(a,d,n){return Nf(Nf({},n.shared.eventOptions),a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return bl.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return bl.toVector(a)},transform(a,d,n){a=a||n.shared.transform;this.hasCustomTransform=!!a;return a||fF},threshold(a){return bl.toVector(a,0)}},Ts=Nf(Nf({},RA),{},{axis(a,d,{axis:n}){this.lockDirection="lock"===n;if(!this.lockDirection)return n},
axisThreshold(a=0){return a},bounds(a={}){if("function"===typeof a)return la=>Ts.bounds(a(la));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:n=Infinity,top:S=-Infinity,bottom:fa=Infinity}=a;return[[d,n],[S,fa]]}}),SA={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},gF=class extends Vu{constructor(...a){super(...a);ug(this,"ingKey","dragging")}reset(){super.reset();
const a=this.state;a._pointerId=void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),n=a.currentTarget.getBoundingClientRect();a._bounds=Ts.bounds({left:d.left-n.left+a.offset[0],right:d.right-n.right+a.offset[0],top:d.top-n.top+a.offset[1],bottom:d.bottom-n.bottom+a.offset[1]})}}cancel(){const a=
this.state;a.canceled||(a.canceled=!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,n=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var S=this.ctrl.setEventIds(a);
d.pointerCapture&&a.target.setPointerCapture(a.pointerId);S&&1<S.size&&n._pointerActive||(this.start(a),this.setupPointer(a),n._pointerId=kh(a),n._pointerActive=!0,this.computeValues(Bg(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==sh(a)?(n._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);
this.emit()}pointerMove(a){const d=this.state,n=this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var S=kh(a);if(void 0===d._pointerId||S===d._pointerId)S=Bg(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=bl.sub(S,d._values),this.computeValues(S)),bl.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):n.preventScrollAxis&&!d._preventScroll?
d.axis&&(d.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(va){}const d=this.state,n=this.config;if(d._active&&d._pointerActive){var S=kh(a);if(void 0===d._pointerId||S===d._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(a);var [fa,la]=d._distance;d.tap=fa<=n.tapsThreshold&&la<=n.tapsThreshold;if(d.tap&&n.filterTaps)d._force=!0;else{const [va,Na]=d.direction,[cb,qb]=d.velocity,[xb,Eb]=d.movement,[jc,oc]=n.swipe.velocity,[hc,Rc]=n.swipe.distance;d.elapsedTime<n.swipe.duration&&(Math.abs(cb)>jc&&Math.abs(xb)>hc&&(d.swipe[0]=va),Math.abs(qb)>oc&&Math.abs(Eb)>Rc&&(d.swipe[1]=Na))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,
n=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&
a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=SA[a.key];if(d){const n=this.state,S=a.shiftKey?10:a.altKey?.1:1;this.start(a);n._delta=d(S);n._keyboardActive=!0;bl.addTo(n._movement,n._delta);this.compute(a);this.emit()}}keyUp(a){a.key in SA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Us="undefined"!==typeof window&&window.document&&window.document.createElement;try{var TA="constructor"in GestureEvent}catch(a){TA=!1}var hF=
TA,Wu=Us&&"ontouchstart"in window||Us&&1<window.navigator.maxTouchPoints,UA=Us&&"ontouchstart"in window||Us&&1<window.navigator.maxTouchPoints,VA=Us&&"onpointerdown"in window,iF=Us&&"exitPointerLock"in window.document,WA={mouse:0,touch:0,pen:8},jF=Nf(Nf({},Ts),{},{device(a,d,{pointer:{touch:n=!1,lock:S=!1,mouse:fa=!1}={}}){this.pointerLock=S&&iF;return Wu&&n?"touch":this.pointerLock?"mouse":VA&&!fa?"pointer":Wu?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:n}){this.preventScrollDelay="number"===
typeof n?n:n||void 0===n&&a?250:void 0;if(UA&&!1!==n)return a?a:void 0!==n?"y":void 0},pointerCapture(a,d,{pointer:{capture:n=!0,buttons:S=1,keys:fa=!0}={}}){this.pointerButtons=S;this.keys=fa;return!this.pointerLock&&"pointer"===this.device&&n},threshold(a,d,{filterTaps:n=!1,tapsThreshold:S=3,axis:fa}){a=bl.toVector(a,n?S:fa?1:0);this.filterTaps=n;this.tapsThreshold=S;return a},swipe({velocity:a=.5,distance:d=50,duration:n=250}={}){return{velocity:this.transform(bl.toVector(a)),distance:this.transform(bl.toVector(d)),
duration:n}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;default:return a}},axisThreshold(a){return a?Nf(Nf({},WA),a):WA}}),kF=class extends QA{constructor(...a){super(...a);ug(this,"ingKey","pinching");ug(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:n}=
this.state;this.state.offset="wheel"===a?bl.add(d,n):[(1+d[0])*n[0],d[1]+n[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,n]=a._movement;if(!a.axis){const S=30*Math.abs(d)-Math.abs(n);0>S?a.axis="angle":0<S&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=
!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);var d=this.state;const n=this.ctrl.touchIds;d._active&&d._touchIds.every(S=>n.has(S))||2>n.size||(this.start(a),d._touchIds=Array.from(n).slice(0,2),d=Jf(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,n=d._pointerEvents,S=this.ctrl.pointerIds;d._active&&Array.from(n.keys()).every(fa=>S.has(fa))||
(2>n.size&&n.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=Hf(...Array.from(n.values())),this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=Jf(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=Hf(...Array.from(d.values())),this.pinchMove(a,
d))}pinchMove(a,d){const n=this.state,S=d.angle-n._values[1];let fa=0;270<Math.abs(S)&&(fa+=Math.sign(S));this.computeValues([d.distance,d.angle-360*fa]);n.origin=d.origin;n.turns=fa;n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);
try{a.target.releasePointerCapture(a.pointerId)}catch(n){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,
a.rotation]);d.origin=[a.clientX,a.clientY];var n=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=bl.sub(d._movement,n);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();
const d=this.state;d._delta=[-Wi(a)[1]/100*d.offset[0],0];bl.addTo(d._movement,d._delta);Bk(d);this.state.origin=[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),
{passive:!1})}},lF=Nf(Nf({},RA),{},{device(a,d,{shared:n,pointer:{touch:S=!1}={}}){if(n.target&&!Wu&&hF)return"gesture";if(Wu&&S)return"touch";if(UA){if(VA)return"pointer";if(Wu)return"touch"}},bounds(a,d,{scaleBounds:n={},angleBounds:S={}}){const fa=va=>{va=ih(n,va);va=Object.assign({},{min:-Infinity,max:Infinity},va||{});return[va.min,va.max]},la=va=>{va=ih(S,va);va=Object.assign({},{min:-Infinity,max:Infinity},va||{});return[va.min,va.max]};return"function"!==typeof n&&"function"!==typeof S?[fa(),
la()]:va=>[fa(va),la(va)]},threshold(a,d,n){this.lockDirection="lock"===n.axis;return bl.toVector(a,this.lockDirection?[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),mF=class extends Vu{constructor(...a){super(...a);ug(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(Bg(a));
this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=Bg(a),n=this.state;n._delta=bl.sub(d,n._values);bl.addTo(n._movement,n._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},nF=Nf(Nf({},Ts),{},{mouseOnly:(a=!0)=>a}),oF=class extends Vu{constructor(...a){super(...a);ug(this,
"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var n,S;const {scrollX:fa,scrollY:la,scrollLeft:va,scrollTop:Na}=a.currentTarget;var cb=[null!==(n=null!==fa&&void 0!==fa?fa:va)&&void 0!==n?n:0,null!==(S=null!==la&&void 0!==la?la:Na)&&void 0!==S?S:0];d._delta=bl.sub(cb,d._values);bl.addTo(d._movement,d._delta);this.computeValues(cb);
this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll","",this.scroll.bind(this))}},pF=Ts,qF=class extends Vu{constructor(...a){super(...a);ug(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=Wi(a);bl.addTo(d._movement,d._delta);Bk(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&
(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},rF=Ts,sF=class extends Vu{constructor(...a){super(...a);ug(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(Bg(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var n=Bg(a);d._movement=d._delta=bl.sub(n,d._values);this.computeValues(n);this.compute(a);
d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},tF=Nf(Nf({},Ts),{},{mouseOnly:(a=!0)=>a}),Ix=new Map,Jx=new Map,uF={key:"drag",engine:gF,resolver:jF},vF={key:"hover",engine:sF,resolver:tF},wF={key:"move",engine:mF,resolver:nF},xF={key:"pinch",engine:kF,resolver:lF},yF={key:"scroll",engine:oF,resolver:pF},zF={key:"wheel",engine:qF,resolver:rF},Kx=ig(ca(25)),AF={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=
!0){return a},window(a=Us?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},BF=["target","eventOptions","window","enabled","transform"],XA=class{constructor(a,d){ug(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,n,S,fa){const la=this._listeners,va=qi(d,n),Na=Nf(Nf({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),fa);a.addEventListener(va,S,Na);const cb=()=>{a.removeEventListener(va,
S,Na);la.delete(cb)};la.add(cb);return cb}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},CF=class{constructor(){ug(this,"_timeouts",new Map)}add(a,d,n=140,...S){this.remove(a);this._timeouts.set(a,window.setTimeout(d,n,...S))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},DF=class{constructor(a){ug(this,"gestures",new Set);ug(this,"_targetEventStore",new XA(this));ug(this,"gestureEventStores",
{});ug(this,"gestureTimeoutStores",{});ug(this,"handlers",{});ug(this,"config",{});ug(this,"pointerIds",new Set);ug(this,"touchIds",new Set);ug(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&Xi(this,"drag");a.wheel&&Xi(this,"wheel");a.scroll&&Xi(this,"scroll");a.move&&Xi(this,"move");a.pinch&&Xi(this,"pinch");a.hover&&Xi(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(rf(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?
this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=d}applyConfig(a,d){this.config=qj(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const n={};let S;if(d.target&&
(S=d.target(),!S))return;if(d.enabled){for(const fa of this.gestures){const la=this.config[fa],va=YA(n,la.eventOptions,!!S);la.enabled&&(new (Ix.get(fa))(this,a,fa)).bind(va)}d=YA(n,d.eventOptions,!!S);for(const fa in this.nativeHandlers)d(fa,"",la=>this.nativeHandlers[fa](Nf(Nf({},this.state.shared),{},{event:la,args:a})),void 0,!0)}for(const fa in n)n[fa]=bi(...n[fa]);if(!S)return n;for(const fa in n){const {device:la,capture:va,passive:Na}=gg(fa);this._targetEventStore.add(S,la,"",n[fa],{capture:va,
passive:Na})}}},YA=(a,d,n)=>(S,fa,la,va={},Na=!1)=>{var cb,qb;const xb=null!==(cb=va.capture)&&void 0!==cb?cb:d.capture;va=null!==(qb=va.passive)&&void 0!==qb?qb:d.passive;S=Na?S:Zg(S,fa,xb);n&&va&&(S+="Passive");a[S]=a[S]||[];a[S].push(la)},EF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,aw=ig(ca(25)),Lx=ig(ca(25)),ZA=ig(ca(25)),$A=ig(ca(25)),FF=ig(ca(25)),GF=ig(ca(25)),HF=ig(ca(25)),IF=ig(ca(25)),JF={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",
move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>je('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>je("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>je("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>je("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>je("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>je("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>je("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>je("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>je("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>je('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>je('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>je('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>je('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>je('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},KF=ig(ca(25));ig(ca(25));var aB=ca(25),bB=ig(ca(25));if(!ca(25).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!Ic)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var LF=ca(34),Xu=ig(ca(25)),cB="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,MF=1E4,NF=function(a){var d="function"===typeof Symbol&&Symbol.iterator,n=d&&a[d],S=0;if(n)return n.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&
S>=a.length&&(a=void 0);return{value:a&&a[S++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},dB=cB?we(cB):uf(),OF=dB.addReactionToTrack,PF=dB.recordReactionAsCommitted,eB=function(a,d){var n="function"===typeof Symbol&&a[Symbol.iterator];if(!n)return a;a=n.call(a);var S,fa=[];try{for(;(void 0===d||0<d--)&&!(S=a.next()).done;)fa.push(S.value)}catch(va){var la={error:va}}finally{try{S&&!S.done&&(n=a["return"])&&n.call(a)}finally{if(la)throw la.error;
}}return fa},QF=function(){return function(){}}(),Ut=ca(25),fB="function"===typeof Symbol&&Symbol.for,gB=fB?Symbol.for("react.forward_ref"):"function"===typeof Ut.forwardRef&&(0,Ut.forwardRef)(function(a){return null}).$$typeof,hB=fB?Symbol.for("react.memo"):"function"===typeof Ut.memo&&(0,Ut.memo)(function(a){return null}).$$typeof,RF={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};rg.displayName="Observer";ca(25);ca(25);ca(25);(function(a){a||=$e;ub({reactionScheduler:a})})(LF.unstable_batchedUpdates);
var SF=ig(ca(25)),Mx=ca(612),Mo=SF.forwardRef(function(a,d){var {children:n,opacity:S,centered:fa,className:la=""}=a,va=yg(a,["children","opacity","centered","className"]);return(0,Mx.jsx)(rg,{children:()=>(0,Mx.jsx)("div",{ref:d,className:`tl-positioned-div ${la}`,style:S?{opacity:S}:void 0,draggable:!1,children:(0,Mx.jsx)("div",ag(Ke({className:`tl-positioned-inner ${fa?"tl-centered":""}`},va),{children:n}))})})}),TF=ig(ca(25)),Nx=ca(612),ip=TF.forwardRef(function(a,d){var {id:n,className:S="",
style:fa,children:la}=a,va=yg(a,["id","className","style","children"]);return(0,Nx.jsx)(rg,{children:()=>(0,Nx.jsx)("svg",{ref:d,style:fa,className:`tl-positioned-svg ${S}`,children:(0,Nx.jsx)("g",ag(Ke({id:n,className:"tl-centered-g"},va),{children:la}))})})}),Yu=ig(ca(25)),iB=ig(ca(25)),bw=ig(ca(25)),UF=ca(612),Nr=Ne(function(a){var {id:d,bounds:n,zIndex:S,rotation:fa=0,className:la="",children:va}=a;a=yg(a,"id bounds zIndex rotation className children".split(" "));const Na=bw.useRef(null);bw.useLayoutEffect(()=>
{Na.current.style.transform=`translate(
        calc(${n.minX}px - var(--tl-padding)),
        calc(${n.minY}px - var(--tl-padding)))
        rotate(${fa+(n.rotation||0)}rad)`},[n.minX,n.minY,fa,n.rotation]);bw.useLayoutEffect(()=>{const cb=Na.current;cb.style.width=`calc(${Math.floor(n.width)}px + (var(--tl-padding) * 2))`;cb.style.height=`calc(${Math.floor(n.height)}px + (var(--tl-padding) * 2))`},[n.width,n.height]);bw.useLayoutEffect(()=>{const cb=Na.current;void 0!==S&&(cb.style.zIndex=S.toString())},[S]);return(0,UF.jsx)("div",ag(Ke({id:d,ref:Na,className:`tl-positioned ${la}`,"aria-label":"container"},a),{children:va}))}),
VF=ig(ca(25)),jB=ca(612),WF=Ne(function({shapes:a,hidden:d,bounds:n,rotation:S=0}){const {components:{ContextBar:fa},viewport:{bounds:la,camera:{point:[va,Na],zoom:cb}}}=yd(),qb=VF.useRef(null);var xb=kg.getRotatedBounds(n,S);xb=kg.multiplyBounds(xb,cb);Qb(qb,n,S,10005);if(!fa)throw Error("Expected a ContextBar component.");const Eb=kg.translateBounds(xb,[va*cb,Na*cb]);return(0,jB.jsx)("div",{ref:qb,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,jB.jsx)(fa,{hidden:d,shapes:a,bounds:n,offsets:{left:Eb.minX,right:la.width-Eb.maxX,top:Eb.minY,bottom:la.height-Eb.maxY,width:Eb.width,height:Eb.height},scaledBounds:xb,rotation:S})})}),kB=ig(ca(25)),XF=ca(612),lB=Ne(function({children:a}){const d=kB.useRef(null),{viewport:n}=yd(),S=d.current,{zoom:fa,point:la}=n.camera;kB.useEffect(()=>{S&&(S.style.transform=`scale(${fa}) translate3d(${la[0]}px, ${la[1]}px, 0)`)},[fa,la,S]);return(0,XF.jsx)("div",{ref:d,className:"tl-absolute tl-layer",
children:a})}),cw=ca(612),mB=Ne(function({shape:a,isHovered:d=!1,isSelected:n=!1,isBinding:S=!1,isEditing:fa=!1,isLocked:la=!1,meta:va}){const {bounds:Na,props:{scale:cb,rotation:qb=0},ReactIndicator:xb}=a;return(0,cw.jsx)(Nr,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:Na,rotation:qb,scale:cb,zIndex:fa?1E3:1E4,children:(0,cw.jsx)(ip,{children:(0,cw.jsx)("g",{className:`tl-indicator-container ${n?"tl-selected":"tl-hovered"} ${la?"tl-locked":""}`,children:(0,cw.jsx)(xb,{isEditing:fa,
isBinding:S,isHovered:d,isLocked:la,isSelected:n,isErasing:!1,meta:va})})})})}),nB=ig(ca(25)),dw=ca(612),YF=Ne(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:n}},components:{QuickLinks:S}}=yd();var fa=df();const la=Mh(d);if(!S)throw Error("Expected a QuickLinks component.");fa=50>a.height*n||!fa.selectedShapesArray.includes(d);return(0,dw.jsx)(Nr,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,dw.jsx)(Mo,{children:(0,dw.jsx)("span",ag(Ke({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},la),{onPointerDown:va=>va.stopPropagation(),children:(0,dw.jsx)(S,{className:"tl-backlinks-count "+(fa?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})}),ew=ca(612),ZF=Ne(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:n}},components:{BacklinksCount:S}}=yd();var fa=df();if(!S)throw Error("Expected a BacklinksCount component.");const la=va=>va.stopPropagation();
fa=50>a.height*n||!fa.selectedShapesArray.includes(d)||d.hideSelection;return(0,ew.jsx)(Nr,{bounds:a,className:"tl-backlinks-count-container",children:(0,ew.jsx)(Mo,{children:(0,ew.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:la,onWheelCapture:la,onKeyDown:la,title:"Shape Backlinks",children:(0,ew.jsx)(S,{className:"tl-backlinks-count "+(fa?"tl-backlinks-count-rounded":""),id:d.id,
shape:d})})})})}),$F=ig(ca(25)),oB=ca(612),aG=Ne(function({bounds:a,hidden:d,shapes:n,rotation:S=0,detail:fa="size"}){const {components:{SelectionDetail:la},viewport:{camera:{zoom:va}}}=yd(),Na=$F.useRef(null),cb=kg.multiplyBounds(a,va);Qb(Na,a,S,10003);if(!la)throw Error("Expected a SelectionDetail component.");return(0,oB.jsx)("div",{ref:Na,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,oB.jsx)(la,
{shapes:n,bounds:a,scaledBounds:cb,zoom:va,rotation:S,detail:fa})})}),pB=ca(612),bG=Ne(function({shape:a,isHovered:d=!1,isSelected:n=!1,isBinding:S=!1,isErasing:fa=!1,isEditing:la=!1,onEditingEnd:va,asset:Na,meta:cb,zIndex:qb}){const {bounds:xb,props:{rotation:Eb,scale:jc},ReactComponent:oc}=a,hc=df(),Rc=Mh(a);var hd=hc.getParentGroup(a);hd=hc.selectedIds.has(null==hd?void 0:hd.id);return(0,pB.jsx)(Nr,{"data-shape-id":a.id,"data-html2canvas-ignore":!n&&!hd&&0!==hc.selectedShapes.size||null,zIndex:qb,
"data-type":"Shape",bounds:xb,rotation:Eb,scale:jc,children:(0,pB.jsx)(oc,{meta:cb,isEditing:la,isBinding:S,isHovered:d,isSelected:n,isErasing:fa,events:Rc,asset:Na,onEditingEnd:va})})}),Vt=ca(612),qB=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],cG=Ne(function({size:a}){const {viewport:{camera:{point:d,zoom:n}}}=yd();return(0,Vt.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,Vt.jsx)("defs",{children:qB.map(([S,fa,
la],va)=>{la=la*a*n;var Na=d[0]*n,cb=d[1]*n;Na=0<Na?Na%la:la+Na%la;cb=0<cb?cb%la:la+cb%la;S=oj(n,[S,fa],[0,1]);return(0,Vt.jsx)("pattern",{id:`grid-${va}`,width:la,height:la,patternUnits:"userSpaceOnUse",children:!(2<S||.1>S)&&(0,Vt.jsx)("circle",{className:"tl-grid-dot",cx:Na,cy:cb,r:1.5,opacity:Math.max(0,Math.min(S,1))})},`grid-pattern-${va}`)})}),qB.map((S,fa)=>(0,Vt.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${fa})`},`grid-rect-${fa}`))]})}),rB=Ne(function({size:a}){return(0,Vt.jsx)(cG,
{size:a})}),sB=ca(612),tB=Ne(function({bounds:a}){const d=Xd("background");return(0,sB.jsx)(ip,ag(Ke({"data-html2canvas-ignore":"true"},d),{children:(0,sB.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});ca(25);var uB=ca(612),vB=Ne(function({scaledBounds:a,shapes:d,detail:n="size",rotation:S=0}){var fa;const la=1===d.length?S:null!=(fa=a.rotation)?fa:0;return(0,uB.jsx)(Mo,{centered:!0,children:(0,uB.jsx)("div",{className:"tl-bounds-detail",
style:{transform:la<Rn||la>3*Rn?`rotate(${la}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+la}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${Fe.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===n?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${Dm.radiansToDegrees(Dm.clampRadians(S)).toFixed()}\xB0`})})}),Ox=ca(612),dG={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},fw=Ne(function({cx:a,cy:d,size:n,targetSize:S,corner:fa,isHidden:la}){const va=Xd(fa);return(0,Ox.jsxs)("g",ag(Ke({opacity:la?0:1},va),{children:[(0,Ox.jsx)("rect",{className:"tl-transparent "+(la?"":dG[fa]),"aria-label":`${fa} target`,x:a-1.25*S,y:d-1.25*S,width:2.5*S,height:2.5*S,pointerEvents:la?"none":"all"}),(0,Ox.jsx)("rect",{className:"tl-corner-handle","aria-label":`${fa} handle`,x:a-n/2,y:d-n/2,width:n,height:n,pointerEvents:"none"})]}))}),
gw=ca(612),Px=Ne(function({cx:a,cy:d,size:n,direction:S,isHidden:fa}){const la=df();return(0,gw.jsxs)("g",{className:"tl-clone-handle",opacity:fa?0:1,children:[(0,gw.jsx)("circle",{"aria-label":`${S} handle`,pointerEvents:"all",onPointerDown:va=>la.api.clone(S),cx:a,cy:d,r:n}),(0,gw.jsx)("line",{x1:a-n/2,y1:d,x2:a+n/2,y2:d}),(0,gw.jsx)("line",{x1:a,y1:d-n/2,x2:a,y2:d+n/2})]})}),eG=ca(612),fG={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},hw=
Ne(function({x:a,y:d,width:n,height:S,targetSize:fa,edge:la,disabled:va,isHidden:Na}){const cb=Xd(la);return(0,eG.jsx)("rect",Ke({pointerEvents:Na||va?"none":"all",className:"tl-transparent tl-edge-handle "+(Na?"":fG[la]),"aria-label":`${la} target`,opacity:Na?0:1,x:a-fa,y:d-fa,width:Math.max(1,n+2*fa),height:Math.max(1,S+2*fa)},cb))}),Qx=ca(612);Ne(function({cx:a,cy:d,size:n,targetSize:S,isHidden:fa}){const la=Xd("rotate");return(0,Qx.jsxs)("g",ag(Ke({opacity:fa?0:1},la),{children:[(0,Qx.jsx)("circle",
{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:S,pointerEvents:fa?"none":"all"}),(0,Qx.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:n/2,pointerEvents:"none"})]}))});ca(25);var wB=ca(612),iw=Ne(function({cx:a,cy:d,targetSize:n,corner:S,isHidden:fa}){const la=Xd(S);return(0,wB.jsx)("g",ag(Ke({opacity:fa?0:1},la),{children:(0,wB.jsx)("rect",{className:"tl-transparent","aria-label":`${S} target`,x:a-2.5*n,y:d-2.5*n,width:3*n,height:3*n,pointerEvents:fa?
"none":"all"})}))}),Vl=ca(612),xB=Ne(function({bounds:a,showResizeHandles:d,showRotateHandles:n,showCloneHandles:S,shapes:fa}){var la,va;const Na=df();let {width:cb,height:qb}=a;var xb=Na.viewport.camera.zoom;a=8/xb;const Eb=6/xb;xb=30/xb;const jc=2*a,oc=1===fa.length?fa[0].canResize:[!0,!0],hc=null!=(va=null==(la=Na.editingShape)?void 0:la.props.borderRadius)?va:0;return(0,Vl.jsx)(Vl.Fragment,{children:0<fa.length&&(0,Vl.jsxs)(ip,{children:[!Na.editingShape&&(0,Vl.jsx)("rect",{className:"tl-bounds-fg",
width:Math.max(cb,1),height:Math.max(qb,1),rx:hc,ry:hc,pointerEvents:"none"}),(0,Vl.jsx)(hw,{x:2*Eb,y:0,width:cb-4*Eb,height:0,targetSize:Eb,edge:"top_edge",disabled:!oc[1],isHidden:!d}),(0,Vl.jsx)(hw,{x:cb,y:2*Eb,width:0,height:qb-4*Eb,targetSize:Eb,edge:"right_edge",disabled:!oc[0],isHidden:!d}),(0,Vl.jsx)(hw,{x:2*Eb,y:qb,width:cb-4*Eb,height:0,targetSize:Eb,edge:"bottom_edge",disabled:!oc[1],isHidden:!d}),(0,Vl.jsx)(hw,{x:0,y:2*Eb,width:0,height:qb-4*Eb,targetSize:Eb,edge:"left_edge",disabled:!oc[0],
isHidden:!d}),(0,Vl.jsx)(iw,{cx:0,cy:0,targetSize:Eb,corner:"top_left_resize_corner",isHidden:!n}),(0,Vl.jsx)(iw,{cx:cb+2*Eb,cy:0,targetSize:Eb,corner:"top_right_resize_corner",isHidden:!n}),(0,Vl.jsx)(iw,{cx:cb+2*Eb,cy:qb+2*Eb,targetSize:Eb,corner:"bottom_right_resize_corner",isHidden:!n}),(0,Vl.jsx)(iw,{cx:0,cy:qb+2*Eb,targetSize:Eb,corner:"bottom_left_resize_corner",isHidden:!n}),(0,Vl.jsx)(Px,{cx:-xb,cy:qb/2,size:jc,direction:"left",isHidden:!S}),(0,Vl.jsx)(Px,{cx:cb+xb,cy:qb/2,size:jc,direction:"right",
isHidden:!S}),(0,Vl.jsx)(Px,{cx:cb/2,cy:qb+xb,size:jc,direction:"down",isHidden:!S}),(null==oc?void 0:oc.every(Rc=>Rc))&&(0,Vl.jsxs)(Vl.Fragment,{children:[(0,Vl.jsx)(fw,{cx:0,cy:0,size:a,targetSize:Eb,corner:"top_left_corner",isHidden:!d}),(0,Vl.jsx)(fw,{cx:cb,cy:0,size:a,targetSize:Eb,corner:"top_right_corner",isHidden:!d}),(0,Vl.jsx)(fw,{cx:cb,cy:qb,size:a,targetSize:Eb,corner:"bottom_right_corner",isHidden:!d}),(0,Vl.jsx)(fw,{cx:0,cy:qb,size:a,targetSize:Eb,corner:"bottom_left_corner",isHidden:!d})]})]})})}),
Rx=ca(612),yB=Ne(function({bounds:a}){return(0,Rx.jsx)(Nr,{bounds:a,zIndex:10001,children:(0,Rx.jsx)(ip,{children:(0,Rx.jsx)("rect",{className:"tl-brush",x:0,y:0,width:a.width,height:a.height})})})}),zB=ca(612);Ne(function(){return(0,zB.jsx)(zB.Fragment,{})});var Sx=ca(612),AB=Ne(function({shape:a,handle:d,id:n}){a=Sd(a,n);const [S,fa]=d.point;return(0,Sx.jsxs)("g",ag(Ke({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${S}, ${fa})`,children:[(0,Sx.jsx)("circle",{className:"tl-handle-bg",
pointerEvents:"all"}),(0,Sx.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),BB=ig(ca(25)),Tx=ca(612),Ux=Ne(function({direction:a}){const {viewport:{bounds:d}}=yd(),n=BB.useRef(null);BB.useLayoutEffect(()=>{const S=n.current;if(S){var fa=[d.width/2,d.height/2],la=kg.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[va,Na]]of la)la=w(fa,a,va,Na),la.didIntersect&&(la=la.points[0],S.style.transform=`translate(${la[0]-6}px,${la[1]-6}px) rotate(${Fe.toAngle(a)}rad)`)}},
[a,d]);return(0,Tx.jsx)("div",{ref:n,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,Tx.jsx)("svg",{height:12,width:12,children:(0,Tx.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),cl=ca(612),gG=Ne(function({id:a,className:d,brush:n,shapes:S,assets:fa,bindingShapes:la,editingShape:va,hoveredShape:Na,hoveredGroup:cb,selectionBounds:qb,selectedShapes:xb,erasingShapes:Eb,selectionDirectionHint:jc,cursor:oc="default",cursorRotation:hc=0,selectionRotation:Rc=0,showSelection:hd=
!0,showHandles:zc=!0,showSelectionRotation:$c=!1,showResizeHandles:Uc=!0,showRotateHandles:td=!0,showCloneHandles:vd=!0,showSelectionDetail:ae=!0,showContextBar:qe=!0,showGrid:Lf=!0,gridSize:Qe=8,onEditingEnd:of=$E,theme:ng=Nq,children:xf}){var cg;const oe=Yu.useRef(null),{viewport:Vd,components:he,meta:Pd}=yd(),ke=df(),yf=Yu.useCallback(Zf=>{ke.inputs.updateContainerOffset([Zf.minX,Zf.minY])},[]);Ue(ng,a);Id(oe);ve(oe,Vd,yf);Fj(oe);Se();He(oe,oc,hc);Ye(oe);vh(oe);a=kf();const Pf=(oc=1===(null==xb?
void 0:xb.length)&&xb[0])&&"handles"in oc.props?null==xb?void 0:xb[0]:void 0,Lg=Yu.useMemo(()=>new Set(xb||[]),[xb]),yh=Yu.useMemo(()=>new Set(Eb||[]),[Eb]);oc=1===(null==xb?void 0:xb.length)?xb[0]:void 0;cb=[...(new Set([cb,Na]))].filter(Nc);return(0,cl.jsxs)("div",{ref:oe,className:`tl-container ${null!=d?d:""}`,children:[(0,cl.jsxs)("div",ag(Ke({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[Lf&&he.Grid&&(0,cl.jsx)(he.Grid,{size:Qe}),(0,cl.jsxs)(lB,{children:[he.SelectionBackground&&
xb&&qb&&hd&&(0,cl.jsx)(Nr,{"data-type":"SelectionBackground",bounds:qb,zIndex:2,"data-html2canvas-ignore":"true",children:(0,cl.jsx)(he.SelectionBackground,{shapes:xb,bounds:qb,showResizeHandles:Uc,showRotateHandles:td})}),S&&S.map((Zf,Kh)=>(0,cl.jsx)(bG,{shape:Zf,asset:fa&&Zf.props.assetId?fa[Zf.props.assetId]:void 0,isEditing:Zf===va,isHovered:Zf===Na,isBinding:null==la?void 0:la.includes(Zf),isSelected:Lg.has(Zf),isErasing:yh.has(Zf),meta:Pd,zIndex:1E3+Kh,onEditingEnd:of},"shape_"+Zf.id)),!ke.isIn("select.pinching")&&
(null==xb?void 0:xb.map(Zf=>(0,cl.jsx)(mB,{shape:Zf,isEditing:Zf===va,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:Zf.props.isLocked},"selected_indicator_"+Zf.id))),cb.map(Zf=>Zf!==va&&(0,cl.jsx)(mB,{shape:Zf},"hovered_indicator_"+Zf.id)),oc&&he.BacklinksCount&&(0,cl.jsx)(ZF,{hidden:!1,bounds:oc.bounds,shape:oc}),Na&&Na!==oc&&he.QuickLinks&&(0,cl.jsx)(YF,{hidden:!1,bounds:Na.bounds,shape:Na}),n&&he.Brush&&(0,cl.jsx)(he.Brush,{bounds:n}),xb&&qb&&(0,cl.jsxs)(cl.Fragment,{children:[hd&&he.SelectionForeground&&
(0,cl.jsx)(Nr,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:qb,zIndex:va&&xb.includes(va)?1002:10002,children:(0,cl.jsx)(he.SelectionForeground,{shapes:xb.filter(Zf=>!Zf.props.isLocked),bounds:qb,showResizeHandles:Uc,showRotateHandles:td,showCloneHandles:vd})}),zc&&Pf&&he.Handle&&(0,cl.jsx)(Nr,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:qb,zIndex:10003,children:(0,cl.jsx)(ip,{children:Object.entries(null!=(cg=Pf.props.handles)?cg:
{}).map(([Zf,Kh])=>Yu.createElement(he.Handle,{key:`${Kh.id}_handle_${Kh.id}`,shape:Pf,handle:Kh,id:Zf}))})}),xb&&he.SelectionDetail&&(0,cl.jsx)(aG,{"data-html2canvas-ignore":"true",shapes:xb,bounds:qb,detail:$c?"rotation":"size",hidden:!ae,rotation:Rc},"detail"+xb.map(Zf=>Zf.id).join(""))]})]}),jc&&qb&&xb&&(0,cl.jsx)(Ux,{direction:jc,bounds:qb,shapes:xb}),(0,cl.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,cl.jsx)(lB,{children:xb&&qb&&(0,cl.jsx)(cl.Fragment,
{children:xb&&he.ContextBar&&(0,cl.jsx)(WF,{shapes:xb.filter(Zf=>!Zf.props.isLocked),hidden:!qe,bounds:oc?oc.bounds:qb,rotation:oc?oc.props.rotation:0},"context"+xb.map(Zf=>Zf.id).join(""))})}),xf]})}),CB=ig(ca(25)),DB=ig(ca(25)),EB=ca(612);Ne(function({children:a}){const d=DB.useRef(null),{viewport:n}=yd();DB.useEffect(()=>rc(()=>{const S=d.current;if(S){var {zoom:fa,point:la}=n.camera;S.style.transform=`scale(${fa}) translateX(${la[0]}px) translateY(${la[1]}px)`}}),[]);return(0,EB.jsx)("svg",{className:"tl-absolute tl-overlay",
pointerEvents:"none",children:(0,EB.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});var hG=ca(612),iG=Ne(function(a){const d=md(a),n=We(a.id);Cd(d,a);dd(d,a);return(0,hG.jsx)(n.Provider,{value:d,children:a.children})}),jG=ca(612),kG=Ne(function({id:a="noid",viewport:d,inputs:n,callbacks:S=Nq,meta:fa=Nq,components:la=Nq,children:va}){const [Na,cb]=CB.useState(()=>{const {Brush:xb,ContextBar:Eb,DirectionIndicator:jc,Grid:oc,Handle:hc,SelectionBackground:Rc,SelectionDetail:hd,SelectionForeground:zc}=
la,$c=yg(la,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:a,viewport:d,inputs:n,callbacks:S,meta:fa,components:ag(Ke({},$c),{Brush:null===xb?void 0:yB,ContextBar:Eb,DirectionIndicator:null===jc?void 0:Ux,Grid:null===oc?void 0:rB,Handle:null===hc?void 0:AB,SelectionBackground:null===Rc?void 0:tB,SelectionDetail:null===hd?void 0:vB,SelectionForeground:null===zc?void 0:xB})}});CB.useLayoutEffect(()=>{const {Brush:xb,ContextBar:Eb,
DirectionIndicator:jc,Grid:oc,Handle:hc,SelectionBackground:Rc,SelectionDetail:hd,SelectionForeground:zc}=la,$c=yg(la,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return rc(()=>{cb({id:a,viewport:d,inputs:n,callbacks:S,meta:fa,components:ag(Ke({},$c),{Brush:null===xb?void 0:yB,ContextBar:Eb,DirectionIndicator:null===jc?void 0:Ux,Grid:null===oc?void 0:rB,Handle:null===hc?void 0:AB,SelectionBackground:null===Rc?void 0:tB,SelectionDetail:null===
hd?void 0:vB,SelectionForeground:null===zc?void 0:xB})})})},[]);const qb=jd(a);return(0,jG.jsx)(qb.Provider,{value:Na,children:va})}),FB=ca(612),lG=ca(612),mG=Ne(function(a){const d=df();return(0,lG.jsx)(Nh,Ke({viewport:d.viewport,inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,
erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,penMode:d.settings.penMode,showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,showCloneHandles:d.showCloneHandles,showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},
a))});ca(612);var Wt=ig(ca(25)),Or=ig(ca(25)),nG=ca(612),oG="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),pi=a=>{var {name:d,className:n}=a;a=yg(a,["name","className"]);const S=oG.includes(d)?"tie tie-":"ti ti-";return(0,nG.jsx)("i",Ke({className:[S+d,n].join(" ")},
a))},ji=ca(25),pG=ca(25),Vs=ca(25),ko=ca(25),Vx=ca(25),qG=ca(34),mn=ca(25),lq=(0,mn.forwardRef)((a,d)=>{var {children:n}=a;a=yg(a,["children"]);const S=mn.Children.toArray(n),fa=S.find(xh);if(fa){const la=fa.props.children;n=S.map(va=>va===fa?1<mn.Children.count(la)?mn.Children.only(null):(0,mn.isValidElement)(la)?la.props.children:null:va);return(0,mn.createElement)(Wx,pf({},a,{ref:d}),(0,mn.isValidElement)(la)?(0,mn.cloneElement)(la,void 0,n):null)}return(0,mn.createElement)(Wx,pf({},a,{ref:d}),
n)});lq.displayName="Slot";var Wx=(0,mn.forwardRef)((a,d)=>{const {children:n}=a;a=yg(a,["children"]);return(0,mn.isValidElement)(n)?(0,mn.cloneElement)(n,ag(Ke({},im(a,n.props)),{ref:zh(d,n.ref)})):1<mn.Children.count(n)?mn.Children.only(null):null});Wx.displayName="SlotClone";var GB=({children:a})=>(0,mn.createElement)(mn.Fragment,null,a),kl="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const n=(0,Vx.forwardRef)((S,fa)=>{var {asChild:la}=S;S=yg(S,["asChild"]);
la=la?lq:d;(0,Vx.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Vx.createElement)(la,pf({},S,{ref:fa}))});n.displayName=`Primitive.${d}`;return ag(Ke({},a),{[d]:n})},{}),Xx=ca(25),rG=ca(25),HB,sG=(0,ko.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yx=(0,ko.forwardRef)((a,d)=>{var n;const {disableOutsidePointerEvents:S=!1,onEscapeKeyDown:fa,onPointerDownOutside:la,onFocusOutside:va,onInteractOutside:Na,onDismiss:cb}=a,qb=yg(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),
xb=(0,ko.useContext)(sG),[Eb,jc]=(0,ko.useState)(null),oc=null!==(n=null===Eb||void 0===Eb?void 0:Eb.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,hc]=(0,ko.useState)({});d=$h(d,Uc=>jc(Uc));n=Array.from(xb.layers);var [Rc]=[...xb.layersWithOutsidePointerEventsDisabled].slice(-1);Rc=n.indexOf(Rc);const hd=Eb?n.indexOf(Eb):-1;n=0<xb.layersWithOutsidePointerEventsDisabled.size;const zc=hd>=Rc;Rc=ck(Uc=>{const td=Uc.target,vd=[...xb.branches].some(ae=>
ae.contains(td));zc&&!vd&&(null===la||void 0===la||la(Uc),null===Na||void 0===Na||Na(Uc),Uc.defaultPrevented||null===cb||void 0===cb||cb())},oc);const $c=Dk(Uc=>{const td=Uc.target;[...xb.branches].some(vd=>vd.contains(td))||(null===va||void 0===va||va(Uc),null===Na||void 0===Na||Na(Uc),Uc.defaultPrevented||null===cb||void 0===cb||cb())},oc);Vk(Uc=>{hd===xb.layers.size-1&&(null===fa||void 0===fa||fa(Uc),!Uc.defaultPrevented&&cb&&(Uc.preventDefault(),cb()))},oc);(0,ko.useEffect)(()=>{if(Eb)return S&&
(0===xb.layersWithOutsidePointerEventsDisabled.size&&(HB=oc.body.style.pointerEvents,oc.body.style.pointerEvents="none"),xb.layersWithOutsidePointerEventsDisabled.add(Eb)),xb.layers.add(Eb),Tl(),()=>{S&&1===xb.layersWithOutsidePointerEventsDisabled.size&&(oc.body.style.pointerEvents=HB)}},[Eb,oc,S,xb]);(0,ko.useEffect)(()=>()=>{Eb&&(xb.layers.delete(Eb),xb.layersWithOutsidePointerEventsDisabled.delete(Eb),Tl())},[Eb,xb]);(0,ko.useEffect)(()=>{const Uc=()=>hc({});document.addEventListener("dismissableLayer.update",
Uc);return()=>document.removeEventListener("dismissableLayer.update",Uc)},[]);return(0,ko.createElement)(kl.div,pf({},qb,{ref:d,style:Ke({pointerEvents:n?zc?"auto":"none":void 0},a.style),onFocusCapture:Ng(a.onFocusCapture,$c.onFocusCapture),onBlurCapture:Ng(a.onBlurCapture,$c.onBlurCapture),onPointerDownCapture:Ng(a.onPointerDownCapture,Rc.onPointerDownCapture)}))}),IB=ig(ca(25)),tG=ca(25),Vm=(null===globalThis||void 0===globalThis?0:globalThis.document)?tG.useLayoutEffect:()=>{},uG=IB["useId".toString()]||
(()=>{}),vG=0,pm=ca(25),wG=(a,d,n)=>Mi(void 0,null,function*(){const {placement:S="bottom",strategy:fa="absolute",middleware:la=[],platform:va}=n,Na=yield null==va.isRTL?void 0:va.isRTL(d);let cb=yield va.getElementRects({reference:a,floating:d,strategy:fa}),{x:qb,y:xb}=rl(cb,S,Na),Eb=S,jc={},oc=0;for(let hc=0;hc<la.length;hc++){const {name:Rc,fn:hd}=la[hc],{x:zc,y:$c,data:Uc,reset:td}=yield hd({x:qb,y:xb,initialPlacement:S,placement:Eb,strategy:fa,middlewareData:jc,rects:cb,platform:va,elements:{reference:a,
floating:d}});qb=null!=zc?zc:qb;xb=null!=$c?$c:xb;jc=ag(Ke({},jc),{[Rc]:Ke(Ke({},jc[Rc]),Uc)});td&&50>=oc&&(oc++,"object"==typeof td&&(td.placement&&(Eb=td.placement),td.rects&&(cb=!0===td.rects?yield va.getElementRects({reference:a,floating:d,strategy:fa}):td.rects),{x:qb,y:xb}=rl(cb,Eb,Na)),hc=-1)}return{x:qb,y:xb,placement:Eb,strategy:fa,middlewareData:jc}}),Zx=Math.min,Pq=Math.max,JB=a=>({name:"arrow",options:a,fn(d){return Mi(this,null,function*(){const {element:n,padding:S=0}=null!=a?a:{},{x:fa,
y:la,placement:va,rects:Na,platform:cb}=d;if(null==n)return{};const qb=Om(S),xb={x:fa,y:la},Eb=Jk(va),jc=va.split("-")[1],oc=jm(Eb);var hc=yield cb.getDimensions(n);const Rc="y"===Eb?"top":"left",hd="y"===Eb?"bottom":"right";var zc=Na.reference[oc]+Na.reference[Eb]-xb[Eb]-Na.floating[oc];const $c=xb[Eb]-Na.reference[Eb];var Uc=yield null==cb.getOffsetParent?void 0:cb.getOffsetParent(n);let td=Uc?"y"===Eb?Uc.clientHeight||0:Uc.clientWidth||0:0;0===td&&(td=Na.floating[oc]);Uc=qb[Rc];const vd=td-hc[oc]-
qb[hd];hc=td/2-hc[oc]/2+(zc/2-$c/2);zc=Pq(Uc,Zx(hc,vd));return{[Eb]:xb[Eb]-(0<("start"===jc?qb[Rc]:qb[hd])&&hc!==zc&&Na.reference[oc]<=Na.floating[oc]?hc<Uc?Uc-hc:vd-hc:0),data:{[Eb]:zc,centerOffset:hc-zc}}})}}),xG={left:"right",right:"left",bottom:"top",top:"bottom"},yG={start:"end",end:"start"},KB=["top","right","bottom","left"];KB.reduce((a,d)=>a.concat(d,d+"-start",d+"-end"),[]);var LB=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return Mi(this,null,function*(){var n;const {placement:S,
middlewareData:fa,rects:la,initialPlacement:va,platform:Na,elements:cb}=d;var qb=a;const {mainAxis:xb=!0,crossAxis:Eb=!0,fallbackPlacements:jc,fallbackStrategy:oc="bestFit",flipAlignment:hc=!0}=qb;qb=yg(qb,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const Rc=Si(S);var hd=jc||(Rc!==va&&hc?function(ae){const qe=sl(ae);return[zj(ae),qe,zj(qe)]}(va):[sl(va)]);hd=[va,...hd];const zc=yield zl(d,qb),$c=[];qb=(null==(n=fa.flip)?void 0:n.overflows)||[];if(xb&&$c.push(zc[Rc]),
Eb){const {main:ae,cross:qe}=Wk(S,la,yield null==Na.isRTL?void 0:Na.isRTL(cb.floating));$c.push(zc[ae],zc[qe])}if(qb=[...qb,{placement:S,overflows:$c}],!$c.every(ae=>0>=ae)){var Uc,td;n=(null!=(Uc=null==(td=fa.flip)?void 0:td.index)?Uc:0)+1;if(Uc=hd[n])return{data:{index:n,overflows:qb},reset:{placement:Uc}};Uc="bottom";switch(oc){case "bestFit":var vd;(td=null==(vd=qb.map(ae=>[ae,ae.overflows.filter(qe=>0<qe).reduce((qe,Lf)=>qe+Lf,0)]).sort((ae,qe)=>ae[1]-qe[1])[0])?void 0:vd[0].placement)&&(Uc=
td);break;case "initialPlacement":Uc=va}if(S!==Uc)return{reset:{placement:Uc}}}return{}})}}},MB=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,n=yg(a,["strategy"]);return{name:"hide",fn(S){return Mi(this,null,function*(){var {rects:fa}=S;switch(d){case "referenceHidden":return fa=Kk(yield zl(S,ag(Ke({},n),{elementContext:"reference"})),fa.reference),{data:{referenceHiddenOffsets:fa,referenceHidden:nk(fa)}};case "escaped":return fa=Kk(yield zl(S,ag(Ke({},n),{altBoundary:!0})),fa.floating),
{data:{escapedOffsets:fa,escaped:nk(fa)}};default:return{}}})}}},NB=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return Mi(this,null,function*(){const {x:n,y:S}=d,fa=yield function(la,va){return Mi(this,null,function*(){const {placement:Na,platform:cb,elements:qb}=la;var xb=yield null==cb.isRTL?void 0:cb.isRTL(qb.floating),Eb=Si(Na);const jc=Na.split("-")[1],oc="x"===Jk(Na);Eb=["left","top"].includes(Eb)?-1:1;xb=xb&&oc?-1:1;const hc="function"==typeof va?va(la):va;let {mainAxis:Rc,
crossAxis:hd,alignmentAxis:zc}="number"==typeof hc?{mainAxis:hc,crossAxis:0,alignmentAxis:null}:Ke({mainAxis:0,crossAxis:0,alignmentAxis:null},hc);return jc&&"number"==typeof zc&&(hd="end"===jc?-1*zc:zc),oc?{x:hd*xb,y:Rc*Eb}:{x:Rc*Eb,y:hd*xb}})}(d,a);return{x:n+fa.x,y:S+fa.y,data:fa}})}}},OB=function(a){return void 0===a&&(a={}),{name:"shift",options:a,fn(d){return Mi(this,null,function*(){const {x:n,y:S,placement:fa}=d;var la=a;const {mainAxis:va=!0,crossAxis:Na=!1,limiter:cb={fn:oc=>{let {x:hc,
y:Rc}=oc;return{x:hc,y:Rc}}}}=la;var qb=yg(la,["mainAxis","crossAxis","limiter"]);la={x:n,y:S};qb=yield zl(d,qb);const xb=Jk(Si(fa)),Eb="x"===xb?"y":"x";let jc=la[xb];la=la[Eb];va&&(jc=Pq(jc+qb["y"===xb?"top":"left"],Zx(jc,jc-qb["y"===xb?"bottom":"right"])));Na&&(la=Pq(la+qb["y"===Eb?"top":"left"],Zx(la,la-qb["y"===Eb?"bottom":"right"])));la=cb.fn(ag(Ke({},d),{[xb]:jc,[Eb]:la}));return ag(Ke({},la),{data:{x:la.x-n,y:la.y-S}})})}}},PB=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:n,
y:S,placement:fa,rects:la,middlewareData:va}=d,{offset:Na=0,mainAxis:cb=!0,crossAxis:qb=!0}=a;var xb={x:n,y:S};d=Jk(fa);const Eb="x"===d?"y":"x";let jc=xb[d];xb=xb[Eb];var oc="function"==typeof Na?Na(ag(Ke({},la),{placement:fa})):Na;oc="number"==typeof oc?{mainAxis:oc,crossAxis:0}:Ke({mainAxis:0,crossAxis:0},oc);if(cb){var hc="y"===d?"height":"width",Rc=la.reference[d]-la.floating[hc]+oc.mainAxis;hc=la.reference[d]+la.reference[hc]-oc.mainAxis;jc<Rc?jc=Rc:jc>hc&&(jc=hc)}if(qb){var hd,zc,$c,Uc;const td=
"y"===d?"width":"height";Rc=["top","left"].includes(Si(fa));hc=la.reference[Eb]-la.floating[td]+(Rc&&null!=(hd=null==(zc=va.offset)?void 0:zc[Eb])?hd:0)+(Rc?0:oc.crossAxis);hd=la.reference[Eb]+la.reference[td]+(Rc?0:null!=($c=null==(Uc=va.offset)?void 0:Uc[Eb])?$c:0)-(Rc?oc.crossAxis:0);xb<hc?xb=hc:xb>hd&&(xb=hd)}return{[d]:jc,[Eb]:xb}}}},zG=function(a){return void 0===a&&(a={}),{name:"size",options:a,fn(d){return Mi(this,null,function*(){const {placement:n,rects:S,platform:fa,elements:la}=d;var va=
a,{apply:Na}=va;va=yg(va,["apply"]);va=yield zl(d,va);var cb=Si(n),qb=n.split("-")[1],xb,Eb;"top"===cb||"bottom"===cb?(xb=cb,Eb=qb===((yield null==fa.isRTL?void 0:fa.isRTL(la.floating))?"start":"end")?"left":"right"):(Eb=cb,xb="end"===qb?"top":"bottom");cb=Pq(va.left,0);qb=Pq(va.right,0);const jc=Pq(va.top,0),oc=Pq(va.bottom,0);Eb={availableHeight:S.floating.height-(["left","right"].includes(n)?2*(0!==jc||0!==oc?jc+oc:Pq(va.top,va.bottom)):va[xb]),availableWidth:S.floating.width-(["top","bottom"].includes(n)?
2*(0!==cb||0!==qb?cb+qb:Pq(va.left,va.right)):va[Eb])};xb=yield fa.getDimensions(la.floating);null==Na||Na(Ke(Ke({},d),Eb));Na=yield fa.getDimensions(la.floating);return xb.width!==Na.width||xb.height!==Na.height?{reset:{rects:!0}}:{}})}}},QB=Math.min,Zu=Math.max,jw=Math.round,AG={getClippingRect:function(a){let {element:d,boundary:n,rootBoundary:S,strategy:fa}=a;a=[...("clippingAncestors"===n?Co(d):[].concat(n)),S];a=a.reduce((la,va)=>{va=Nn(d,va,fa);return la.top=Zu(va.top,la.top),la.right=QB(va.right,
la.right),la.bottom=QB(va.bottom,la.bottom),la.left=Zu(va.left,la.left),la},Nn(d,a[0],fa));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,offsetParent:n,strategy:S}=a;var fa=tk(n);const la=Ak(n);if(n===la)return d;a={scrollLeft:0,scrollTop:0};var va=0,Na=0;(fa||!fa&&"fixed"!==S)&&(("body"!==fj(n)||Gj(la))&&(a=Pm(n)),tk(n))&&(fa=Zj(n,!0),va=fa.x+n.clientLeft,Na=fa.y+n.clientTop);return ag(Ke({},d),{x:d.x-
a.scrollLeft+va,y:d.y-a.scrollTop+Na})},isElement:ek,getDimensions:Rk,getOffsetParent:fk,getDocumentElement:Ak,getElementRects:a=>{let {reference:d,floating:n,strategy:S}=a;a=fk(n);var fa=tk(a);const la=Ak(a);var va;if(va=fa)va=Zj(a),va=jw(va.width)!==a.offsetWidth||jw(va.height)!==a.offsetHeight;va=Zj(d,va,"fixed"===S);let Na={scrollLeft:0,scrollTop:0};var cb=0,qb=0;if(fa||!fa&&"fixed"!==S)(("body"!==fj(a)||Gj(la))&&(Na=Pm(a)),tk(a))?(fa=Zj(a,!0),cb=fa.x+a.clientLeft,qb=fa.y+a.clientTop):la&&(cb=
fo(la));return{reference:{x:va.left+Na.scrollLeft-cb,y:va.top+Na.scrollTop-qb,width:va.width,height:va.height},floating:ag(Ke({},Rk(n)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===Nj(a).direction},BG=(a,d,n)=>wG(a,d,Ke({platform:AG},n)),No=ig(ca(25),1),RB=ca(25),CG=ig(ca(34),1),$x="undefined"!==typeof document?RB.useLayoutEffect:RB.useEffect,SB=a=>{const {element:d,padding:n}=a;return{name:"arrow",options:a,fn(S){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=
d.current)return JB({element:d.current,padding:n}).fn(S)}else if(d)return JB({element:d,padding:n}).fn(S);return{}}}},ay=ca(25),DG=(0,ay.forwardRef)((a,d)=>{const {children:n,width:S=10,height:fa=5}=a,la=yg(a,["children","width","height"]);return(0,ay.createElement)(kl.svg,pf({},la,{ref:d,width:S,height:fa,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?n:(0,ay.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),EG=ca(25),[by,Xt]=Ci("Popper"),[FG,TB]=by("Popper"),cy=(0,pm.forwardRef)((a,
d)=>{const {__scopePopper:n,virtualRef:S}=a;a=yg(a,["__scopePopper","virtualRef"]);const fa=TB("PopperAnchor",n),la=(0,pm.useRef)(null);d=$h(d,la);(0,pm.useEffect)(()=>{fa.onAnchorChange((null===S||void 0===S?void 0:S.current)||la.current)});return S?null:(0,pm.createElement)(kl.div,pf({},a,{ref:d}))}),[GG,HG]=by("PopperContent"),[IG,JG]=by("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),dy=(0,pm.forwardRef)((a,d)=>{var n,S,fa,la,va,Na,cb,qb;const {__scopePopper:xb,side:Eb="bottom",sideOffset:jc=
0,align:oc="center",alignOffset:hc=0,arrowPadding:Rc=0,collisionBoundary:hd=[],collisionPadding:zc=0,sticky:$c="partial",hideWhenDetached:Uc=!1,avoidCollisions:td=!0}=a;a=yg(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const vd=TB("PopperContent",xb),[ae,qe]=(0,pm.useState)(null);d=$h(d,fl=>qe(fl));const [Lf,Qe]=(0,pm.useState)(null);var of=Vb(Lf),ng=null!==(n=null===of||void 0===of?void 0:of.width)&&
void 0!==n?n:0;n=null!==(S=null===of||void 0===of?void 0:of.height)&&void 0!==S?S:0;S=Eb+("center"!==oc?"-"+oc:"");of="number"===typeof zc?zc:Ke({top:0,right:0,bottom:0,left:0},zc);const xf=Array.isArray(hd)?hd:[hd],cg=0<xf.length;of={padding:of,boundary:xf.filter(sc),altBoundary:cg};const {reference:oe,floating:Vd,strategy:he,x:Pd,y:ke,placement:yf,middlewareData:Pf,update:Lg}=Bc({strategy:"fixed",placement:S,whileElementsMounted:vc,middleware:[NB({mainAxis:jc+n,alignmentAxis:hc}),td?OB(Ke({mainAxis:!0,
crossAxis:!1,limiter:"partial"===$c?PB():void 0},of)):void 0,Lf?SB({element:Lf,padding:Rc}):void 0,td?LB(Ke({},of)):void 0,LG({arrowWidth:ng,arrowHeight:n}),Uc?MB({strategy:"referenceHidden"}):void 0].filter(Pc)});Vm(()=>{oe(vd.anchor)},[oe,vd.anchor]);const yh=null!==Pd&&null!==ke,[Zf,Kh]=Zb(yf);ng=null===(fa=Pf.arrow)||void 0===fa?void 0:fa.x;fa=null===(la=Pf.arrow)||void 0===la?void 0:la.y;la=0!==(null===(va=Pf.arrow)||void 0===va?void 0:va.centerOffset);const [zg,Wh]=(0,pm.useState)();Vm(()=>
{ae&&Wh(window.getComputedStyle(ae).zIndex)},[ae]);const {hasParent:mi,positionUpdateFns:Ij}=JG("PopperContent",xb),el=!mi;(0,pm.useLayoutEffect)(()=>{if(!el)return Ij.add(Lg),()=>{Ij.delete(Lg)}},[el,Ij,Lg]);(0,pm.useLayoutEffect)(()=>{el&&yh&&Array.from(Ij).reverse().forEach(fl=>requestAnimationFrame(fl))},[el,yh,Ij]);va=ag(Ke({"data-side":Zf,"data-align":Kh},a),{ref:d,style:ag(Ke({},a.style),{animation:yh?void 0:"none",opacity:null!==(Na=Pf.hide)&&void 0!==Na&&Na.referenceHidden?0:void 0})});return(0,pm.createElement)("div",
{ref:Vd,"data-radix-popper-content-wrapper":"",style:{position:he,left:0,top:0,transform:yh?`translate3d(${Math.round(Pd)}px, ${Math.round(ke)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:zg,["--radix-popper-transform-origin"]:[null===(cb=Pf.transformOrigin)||void 0===cb?void 0:cb.x,null===(qb=Pf.transformOrigin)||void 0===qb?void 0:qb.y].join(" ")}},(0,pm.createElement)(GG,{scope:xb,placedSide:Zf,onArrowChange:Qe,arrowX:ng,arrowY:fa,shouldHideArrow:la},el?(0,pm.createElement)(IG,
{scope:xb,hasParent:!0,positionUpdateFns:Ij},(0,pm.createElement)(kl.div,va)):(0,pm.createElement)(kl.div,va)))}),KG={top:"bottom",right:"left",bottom:"top",left:"right"},UB=(0,pm.forwardRef)(function(a,d){var {__scopePopper:n}=a;a=yg(a,["__scopePopper"]);n=HG("PopperArrow",n);return(0,pm.createElement)("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[KG[n.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",
right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0}},(0,pm.createElement)(DG,pf({},a,{ref:d,style:ag(Ke({},a.style),{display:"block"})})))}),LG=a=>({name:"transformOrigin",options:a,fn(d){var n,S,fa,la,va;const {placement:Na,rects:cb,middlewareData:qb}=d,xb=(d=0!==(null===(n=qb.arrow)||void 0===n?void 0:n.centerOffset))?0:a.arrowWidth;n=d?0:a.arrowHeight;const [Eb,
jc]=Zb(Na),oc={start:"0%",center:"50%",end:"100%"}[jc],hc=(null!==(S=null===(fa=qb.arrow)||void 0===fa?void 0:fa.x)&&void 0!==S?S:0)+xb/2;S=(null!==(la=null===(va=qb.arrow)||void 0===va?void 0:va.y)&&void 0!==la?la:0)+n/2;va=la="";"bottom"===Eb?(la=d?oc:`${hc}px`,va=`${-n}px`):"top"===Eb?(la=d?oc:`${hc}px`,va=`${cb.floating.height+n}px`):"right"===Eb?(la=`${-n}px`,va=d?oc:`${S}px`):"left"===Eb&&(la=`${cb.floating.width+n}px`,va=d?oc:`${S}px`);return{data:{x:la,y:va}}}}),ey=a=>{const {__scopePopper:d,
children:n}=a,[S,fa]=(0,pm.useState)(null);return(0,pm.createElement)(FG,{scope:d,anchor:S,onAnchorChange:fa},n)},VB=ca(25),MG=ig(ca(34)),NG=(0,VB.forwardRef)((a,d)=>{var n;const {container:S=null===globalThis||void 0===globalThis?void 0:null===(n=globalThis.document)||void 0===n?void 0:n.body}=a;a=yg(a,["container"]);return S?MG.default.createPortal((0,VB.createElement)(kl.div,pf({},a,{ref:d})),S):null}),Qq=ca(25),OG=ca(34),$u=a=>{const {present:d,children:n}=a;a=Dc(d);const S="function"===typeof n?
n({present:a.isPresent}):Qq.Children.only(n),fa=$h(a.ref,S.ref);return"function"===typeof n||a.isPresent?(0,Qq.cloneElement)(S,{ref:fa}):null};$u.displayName="Presence";var kw=ca(25),WB=ca(25),PG=(0,WB.forwardRef)((a,d)=>(0,WB.createElement)(kl.span,pf({},a,{ref:d,style:Ke({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[lw]=Ci("Tooltip",[Xt]),mw=Xt(),[QG,fy]=lw("TooltipProvider"),[RG,
av]=lw("Tooltip"),SG=(0,ji.forwardRef)((a,d)=>{var {__scopeTooltip:n}=a;const S=yg(a,["__scopeTooltip"]),fa=av("TooltipTrigger",n),la=fy("TooltipTrigger",n);n=mw(n);const va=(0,ji.useRef)(null);d=$h(d,va,fa.onTriggerChange);const Na=(0,ji.useRef)(!1),cb=(0,ji.useRef)(!1),qb=(0,ji.useCallback)(()=>Na.current=!1,[]);(0,ji.useEffect)(()=>()=>document.removeEventListener("pointerup",qb),[qb]);return(0,ji.createElement)(cy,pf({asChild:!0},n),(0,ji.createElement)(kl.button,pf({"aria-describedby":fa.open?
fa.contentId:void 0,"data-state":fa.stateAttribute},S,{ref:d,onPointerMove:Ng(a.onPointerMove,xb=>{"touch"===xb.pointerType||cb.current||la.isPointerInTransitRef.current||(fa.onTriggerEnter(),cb.current=!0)}),onPointerLeave:Ng(a.onPointerLeave,()=>{fa.onTriggerLeave();cb.current=!1}),onPointerDown:Ng(a.onPointerDown,()=>{Na.current=!0;document.addEventListener("pointerup",qb,{once:!0})}),onFocus:Ng(a.onFocus,()=>{if(!Na.current)fa.onOpen()}),onBlur:Ng(a.onBlur,fa.onClose),onClick:Ng(a.onClick,fa.onClose)})))}),
[TG,UG]=lw("TooltipPortal",{forceMount:void 0}),VG=(0,ji.forwardRef)((a,d)=>{var n=UG("TooltipContent",a.__scopeTooltip);const {forceMount:S=n.forceMount,side:fa="top"}=a;n=yg(a,["forceMount","side"]);a=av("TooltipContent",a.__scopeTooltip);return(0,ji.createElement)($u,{present:S||a.open},a.disableHoverableContent?(0,ji.createElement)(XB,pf({side:fa},n,{ref:d})):(0,ji.createElement)(WG,pf({side:fa},n,{ref:d})))}),WG=(0,ji.forwardRef)((a,d)=>{const n=av("TooltipContent",a.__scopeTooltip),S=fy("TooltipContent",
a.__scopeTooltip),fa=(0,ji.useRef)(null);d=$h(d,fa);const [la,va]=(0,ji.useState)(null),{trigger:Na,onClose:cb}=n,qb=fa.current,{onPointerInTransitChange:xb}=S,Eb=(0,ji.useCallback)(()=>{va(null);xb(!1)},[xb]),jc=(0,ji.useCallback)((oc,hc)=>{const Rc=Md({x:oc.clientX,y:oc.clientY},oc.currentTarget.getBoundingClientRect()),hd="right"===Rc||"bottom"===Rc?-5:5;oc="right"===Rc||"left"===Rc?{x:oc.clientX+hd,y:oc.clientY}:{x:oc.clientX,y:oc.clientY+hd};hc=hc.getBoundingClientRect();const {top:zc,right:$c,
bottom:Uc,left:td}=hc;hc=Ld([oc,{x:td,y:zc},{x:$c,y:zc},{x:$c,y:Uc},{x:td,y:Uc}]);va(hc);xb(!0)},[xb]);(0,ji.useEffect)(()=>()=>Eb(),[Eb]);(0,ji.useEffect)(()=>{if(Na&&qb){const oc=Rc=>jc(Rc,qb),hc=Rc=>jc(Rc,Na);Na.addEventListener("pointerleave",oc);qb.addEventListener("pointerleave",hc);return()=>{Na.removeEventListener("pointerleave",oc);qb.removeEventListener("pointerleave",hc)}}},[Na,qb,jc,Eb]);(0,ji.useEffect)(()=>{if(la){const oc=hc=>{var Rc=hc.target;hc={x:hc.clientX,y:hc.clientY};Rc=(null===
Na||void 0===Na?void 0:Na.contains(Rc))||(null===qb||void 0===qb?void 0:qb.contains(Rc));const {x:hd,y:zc}=hc;hc=!1;for(let $c=0,Uc=la.length-1;$c<la.length;Uc=$c++){const td=la[$c].x,vd=la[$c].y,ae=la[Uc].x,qe=la[Uc].y;vd>zc!==qe>zc&&hd<(ae-td)*(zc-vd)/(qe-vd)+td&&(hc=!hc)}hc=!hc;Rc?Eb():hc&&(Eb(),cb())};document.addEventListener("pointermove",oc);return()=>document.removeEventListener("pointermove",oc)}},[Na,qb,la,cb,Eb]);return(0,ji.createElement)(XB,pf({},a,{ref:d}))}),[XG,YG]=lw("Tooltip",{isInside:!1}),
XB=(0,ji.forwardRef)((a,d)=>{const {__scopeTooltip:n,children:S,"aria-label":fa,onEscapeKeyDown:la,onPointerDownOutside:va}=a;a=yg(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Na=av("TooltipContent",n),cb=mw(n),{onClose:qb}=Na;(0,ji.useEffect)(()=>{document.addEventListener("tooltip.open",qb);return()=>document.removeEventListener("tooltip.open",qb)},[qb]);(0,ji.useEffect)(()=>{if(Na.trigger){const xb=Eb=>{Eb=Eb.target;null!==Eb&&void 0!==Eb&&Eb.contains(Na.trigger)&&
qb()};window.addEventListener("scroll",xb,{capture:!0});return()=>window.removeEventListener("scroll",xb,{capture:!0})}},[Na.trigger,qb]);return(0,ji.createElement)(Yx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:la,onPointerDownOutside:va,onFocusOutside:xb=>xb.preventDefault(),onDismiss:qb},(0,ji.createElement)(dy,pf({"data-state":Na.stateAttribute},cb,a,{ref:d,style:ag(Ke({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,ji.createElement)(GB,
null,S),(0,ji.createElement)(XG,{scope:n,isInside:!0},(0,ji.createElement)(PG,{id:Na.contentId,role:"tooltip"},fa||S))))}),ZG=(0,ji.forwardRef)((a,d)=>{const {__scopeTooltip:n}=a;a=yg(a,["__scopeTooltip"]);const S=mw(n);return YG("TooltipArrow",n).isInside?null:(0,ji.createElement)(UB,pf({},S,a,{ref:d}))}),$G=a=>{const {__scopeTooltip:d,delayDuration:n=700,skipDelayDuration:S=300,disableHoverableContent:fa=!1,children:la}=a,[va,Na]=(0,ji.useState)(!0),cb=(0,ji.useRef)(!1),qb=(0,ji.useRef)(0);(0,ji.useEffect)(()=>
{const xb=qb.current;return()=>window.clearTimeout(xb)},[]);return(0,ji.createElement)(QG,{scope:d,isOpenDelayed:va,delayDuration:n,onOpen:(0,ji.useCallback)(()=>{window.clearTimeout(qb.current);Na(!1)},[]),onClose:(0,ji.useCallback)(()=>{window.clearTimeout(qb.current);qb.current=window.setTimeout(()=>Na(!0),S)},[S]),isPointerInTransitRef:cb,onPointerInTransitChange:(0,ji.useCallback)(xb=>{cb.current=xb},[]),disableHoverableContent:fa},la)},aH=a=>{const {__scopeTooltip:d,children:n,open:S,defaultOpen:fa=
!1,onOpenChange:la,disableHoverableContent:va,delayDuration:Na}=a,cb=fy("Tooltip",a.__scopeTooltip);a=mw(d);const [qb,xb]=(0,ji.useState)(null),Eb=Ki(),jc=(0,ji.useRef)(0),oc=null!==va&&void 0!==va?va:cb.disableHoverableContent,hc=null!==Na&&void 0!==Na?Na:cb.delayDuration,Rc=(0,ji.useRef)(!1),[hd=!1,zc]=pd({prop:S,defaultProp:fa,onChange:ae=>{if(ae)cb.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else cb.onClose();null===la||void 0===la||la(ae)}}),$c=(0,ji.useMemo)(()=>hd?Rc.current?
"delayed-open":"instant-open":"closed",[hd]),Uc=(0,ji.useCallback)(()=>{window.clearTimeout(jc.current);Rc.current=!1;zc(!0)},[zc]),td=(0,ji.useCallback)(()=>{window.clearTimeout(jc.current);zc(!1)},[zc]),vd=(0,ji.useCallback)(()=>{window.clearTimeout(jc.current);jc.current=window.setTimeout(()=>{Rc.current=!0;zc(!0)},hc)},[hc,zc]);(0,ji.useEffect)(()=>()=>window.clearTimeout(jc.current),[]);return(0,ji.createElement)(ey,a,(0,ji.createElement)(RG,{scope:d,contentId:Eb,open:hd,stateAttribute:$c,trigger:qb,
onTriggerChange:xb,onTriggerEnter:(0,ji.useCallback)(()=>{cb.isOpenDelayed?vd():Uc()},[cb.isOpenDelayed,vd,Uc]),onTriggerLeave:(0,ji.useCallback)(()=>{oc?td():window.clearTimeout(jc.current)},[td,oc]),onOpen:Uc,onClose:td,disableHoverableContent:oc},n))},bH=SG,cH=a=>{const {__scopeTooltip:d,forceMount:n,children:S,container:fa}=a;a=av("TooltipPortal",d);return(0,ji.createElement)(TG,{scope:d,forceMount:n},(0,ji.createElement)($u,{present:n||a.open},(0,ji.createElement)(NG,{asChild:!0,container:fa},
S)))},dH=VG,eH=ZG,Pr=ca(612),YB=ca(612),gy=ca(612),fH=({style:a,icon:d,onClick:n})=>(0,gy.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:n,children:(0,gy.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,gy.jsx)(pi,{name:d})})}),ZB=ca(25),$B=(0,ZB.forwardRef)((a,d)=>{const {pressed:n,defaultPressed:S=!1,onPressedChange:fa}=a,la=yg(a,["pressed","defaultPressed","onPressedChange"]),[va=!1,Na]=pd({prop:n,onChange:fa,defaultProp:S});
return(0,ZB.createElement)(kl.button,pf({type:"button","aria-pressed":va,"data-state":va?"on":"off","data-disabled":a.disabled?"":void 0},la,{ref:d,onClick:Ng(a.onClick,()=>{a.disabled||Na(!va)})}))}),gH=$B,hy=ca(612),jp=ca(25),Yh=ca(25),mq=ig(ca(25)),aC=ca(25),hH=(0,aC.createContext)(void 0),iH=ca(25),iy=0,Qr=ca(25),bC={bubbles:!1,cancelable:!0},cC=(0,Qr.forwardRef)((a,d)=>{const {loop:n=!1,trapped:S=!1,onMountAutoFocus:fa,onUnmountAutoFocus:la}=a;a=yg(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);
const [va,Na]=(0,Qr.useState)(null),cb=Mj(fa),qb=Mj(la),xb=(0,Qr.useRef)(null);d=$h(d,oc=>Na(oc));const Eb=(0,Qr.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Qr.useEffect)(()=>{if(S){let oc=function(Rc){!Eb.paused&&va&&(Rc=Rc.target,va.contains(Rc)?xb.current=Rc:$f(xb.current,{select:!0}))},hc=function(Rc){!Eb.paused&&va&&(va.contains(Rc.relatedTarget)||$f(xb.current,{select:!0}))};document.addEventListener("focusin",oc);document.addEventListener("focusout",hc);
return()=>{document.removeEventListener("focusin",oc);document.removeEventListener("focusout",hc)}}},[S,va,Eb.paused]);(0,Qr.useEffect)(()=>{if(va){dC.add(Eb);const oc=document.activeElement;if(!va.contains(oc)){const hc=new CustomEvent("focusScope.autoFocusOnMount",bC);va.addEventListener("focusScope.autoFocusOnMount",cb);va.dispatchEvent(hc);hc.defaultPrevented||(Sf(wi(Wf(va)),{select:!0}),document.activeElement===oc&&$f(va))}return()=>{va.removeEventListener("focusScope.autoFocusOnMount",cb);setTimeout(()=>
{const hc=new CustomEvent("focusScope.autoFocusOnUnmount",bC);va.addEventListener("focusScope.autoFocusOnUnmount",qb);va.dispatchEvent(hc);hc.defaultPrevented||$f(null!==oc&&void 0!==oc?oc:document.body,{select:!0});va.removeEventListener("focusScope.autoFocusOnUnmount",qb);dC.remove(Eb)},0)}}},[va,cb,qb,Eb]);const jc=(0,Qr.useCallback)(oc=>{if((n||S)&&!Eb.paused){var hc=document.activeElement;if("Tab"===oc.key&&!oc.altKey&&!oc.ctrlKey&&!oc.metaKey&&hc){const hd=oc.currentTarget;var Rc=hd;const zc=
Wf(Rc),$c=th(zc,Rc);Rc=th(zc.reverse(),Rc);const [Uc,td]=[$c,Rc];Uc&&td?oc.shiftKey||hc!==td?oc.shiftKey&&hc===Uc&&(oc.preventDefault(),n&&$f(td,{select:!0})):(oc.preventDefault(),n&&$f(Uc,{select:!0})):hc===hd&&oc.preventDefault()}}},[n,S,Eb.paused]);return(0,Qr.createElement)(kl.div,pf({tabIndex:-1},a,{ref:d,onKeyDown:jc}))}),dC=function(){let a=[];return{add(d){const n=a[0];d===n||null!==n&&void 0!==n&&n.pause();a=ci(a,d);a.unshift(d)},remove(d){var n;a=ci(a,d);null===(n=a[0])||void 0===n||n.resume()}}}(),
qm=ca(25),jH={bubbles:!1,cancelable:!0},[jy,eC,kH]=bh("RovingFocusGroup"),[lH,nw]=Ci("RovingFocusGroup",[kH]),[mH,nH]=lH("RovingFocusGroup"),fC=(0,qm.forwardRef)((a,d)=>(0,qm.createElement)(jy.Provider,{scope:a.__scopeRovingFocusGroup},(0,qm.createElement)(jy.Slot,{scope:a.__scopeRovingFocusGroup},(0,qm.createElement)(oH,pf({},a,{ref:d}))))),oH=(0,qm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:n,orientation:S,loop:fa=!1,dir:la,currentTabStopId:va,defaultCurrentTabStopId:Na,onCurrentTabStopIdChange:cb,
onEntryFocus:qb}=a,xb=yg(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),Eb=(0,qm.useRef)(null);d=$h(d,Eb);const jc=ph(la),[oc=null,hc]=pd({prop:va,defaultProp:Na,onChange:cb}),[Rc,hd]=(0,qm.useState)(!1),zc=Mj(qb),$c=eC(n),Uc=(0,qm.useRef)(!1),[td,vd]=(0,qm.useState)(0);(0,qm.useEffect)(()=>{const ae=Eb.current;if(ae)return ae.addEventListener("rovingFocusGroup.onEntryFocus",zc),()=>ae.removeEventListener("rovingFocusGroup.onEntryFocus",
zc)},[zc]);return(0,qm.createElement)(mH,{scope:n,orientation:S,dir:jc,loop:fa,currentTabStopId:oc,onItemFocus:(0,qm.useCallback)(ae=>hc(ae),[hc]),onItemShiftTab:(0,qm.useCallback)(()=>hd(!0),[]),onFocusableItemAdd:(0,qm.useCallback)(()=>vd(ae=>ae+1),[]),onFocusableItemRemove:(0,qm.useCallback)(()=>vd(ae=>ae-1),[])},(0,qm.createElement)(kl.div,pf({tabIndex:Rc||0===td?-1:0,"data-orientation":S},xb,{ref:d,style:Ke({outline:"none"},a.style),onMouseDown:Ng(a.onMouseDown,()=>{Uc.current=!0}),onFocus:Ng(a.onFocus,
ae=>{var qe=!Uc.current;if(ae.target===ae.currentTarget&&qe&&!Rc&&(qe=new CustomEvent("rovingFocusGroup.onEntryFocus",jH),ae.currentTarget.dispatchEvent(qe),!qe.defaultPrevented)){ae=$c().filter(Qe=>Qe.focusable);qe=ae.find(Qe=>Qe.active);const Lf=ae.find(Qe=>Qe.id===oc);ae=[qe,Lf,...ae].filter(Boolean).map(Qe=>Qe.ref.current);Fh(ae)}Uc.current=!1}),onBlur:Ng(a.onBlur,()=>hd(!1))})))}),gC=(0,qm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:n,focusable:S=!0,active:fa=!1}=a,la=yg(a,["__scopeRovingFocusGroup",
"focusable","active"]),va=Ki(),Na=nH("RovingFocusGroupItem",n),cb=Na.currentTabStopId===va,qb=eC(n),{onFocusableItemAdd:xb,onFocusableItemRemove:Eb}=Na;(0,qm.useEffect)(()=>{if(S)return xb(),()=>Eb()},[S,xb,Eb]);return(0,qm.createElement)(jy.ItemSlot,{scope:n,id:va,focusable:S,active:fa},(0,qm.createElement)(kl.span,pf({tabIndex:cb?0:-1,"data-orientation":Na.orientation},la,{ref:d,onMouseDown:Ng(a.onMouseDown,jc=>{if(S)Na.onItemFocus(va);else jc.preventDefault()}),onFocus:Ng(a.onFocus,()=>Na.onItemFocus(va)),
onKeyDown:Ng(a.onKeyDown,jc=>{if("Tab"===jc.key&&jc.shiftKey)Na.onItemShiftTab();else if(jc.target===jc.currentTarget){var oc=Pi(jc,Na.orientation,Na.dir);if(void 0!==oc){jc.preventDefault();let hc=qb().filter(Rc=>Rc.focusable).map(Rc=>Rc.ref.current);if("last"===oc)hc.reverse();else if("prev"===oc||"next"===oc)"prev"===oc&&hc.reverse(),jc=hc.indexOf(jc.currentTarget),hc=Na.loop?uh(hc,jc+1):hc.slice(jc+1);setTimeout(()=>Fh(hc))}}})})))}),pH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",
PageUp:"first",Home:"first",PageDown:"last",End:"last"},qH=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},Yt=new WeakMap,ow=new WeakMap,pw={},ky=0,ly=function(a,d,n){void 0===d&&(d=qH(a));void 0===n&&(n="data-aria-hidden");var S=Array.isArray(a)?a:[a];pw[n]||(pw[n]=new WeakMap);var fa=pw[n],la=[],va=new Set,Na=function(qb){qb&&!va.has(qb)&&(va.add(qb),Na(qb.parentNode))};S.forEach(Na);var cb=function(qb){!qb||0<=S.indexOf(qb)||Array.prototype.forEach.call(qb.children,
function(xb){if(va.has(xb))cb(xb);else{var Eb=xb.getAttribute("aria-hidden");Eb=null!==Eb&&"false"!==Eb;var jc=(Yt.get(xb)||0)+1,oc=(fa.get(xb)||0)+1;Yt.set(xb,jc);fa.set(xb,oc);la.push(xb);1===jc&&Eb&&ow.set(xb,!0);1===oc&&xb.setAttribute(n,"true");Eb||xb.setAttribute("aria-hidden","true")}})};cb(d);va.clear();ky++;return function(){la.forEach(function(qb){var xb=Yt.get(qb)-1,Eb=fa.get(qb)-1;Yt.set(qb,xb);fa.set(qb,Eb);xb||(ow.has(qb)||qb.removeAttribute("aria-hidden"),ow.delete(qb));Eb||qb.removeAttribute(n)});
ky--;ky||(Yt=new WeakMap,Yt=new WeakMap,ow=new WeakMap,pw={})}},rH=ig(Ms(),1),{__assign:Rr,__rest:hC,__spreadArray:Bp}=rH.default,iC=ig(ca(25)),Rq=ig(ca(25)),sH=ca(25),jC=ig(ca(25)),$m=function(a){var d=a.sideCar;a=hC(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");d=d.read();if(!d)throw Error("Sidecar medium not found");return jC.createElement(d,Rr({},a))};$m.isSideCarExport=!0;var lo=function(a){void 0===a&&(a={});var d=Nl(null);d.options=Rr({async:!0,
ssr:!1},a);return d}(),Fu=function(){},Pv=Rq.forwardRef(function(a,d){var n=Rq.useRef(null),S=Rq.useState({onScrollCapture:Fu,onWheelCapture:Fu,onTouchMoveCapture:Fu}),fa=S[0];S=S[1];var la=a.forwardProps,va=a.children,Na=a.className,cb=a.removeScrollBar,qb=a.enabled,xb=a.shards,Eb=a.sideCar,jc=a.noIsolation,oc=a.inert,hc=a.allowPinchZoom,Rc=a.as;Rc=void 0===Rc?"div":Rc;a=hC(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));
d=ak([n,d]);fa=Rr(Rr({},a),fa);return Rq.createElement(Rq.Fragment,null,qb&&Rq.createElement(Eb,{sideCar:lo,removeScrollBar:cb,shards:xb,noIsolation:jc,inert:oc,setCallbacks:S,allowPinchZoom:!!hc,lockRef:n}),la?Rq.cloneElement(Rq.Children.only(va),Rr(Rr({},fa),{ref:d})):Rq.createElement(Rc,Rr({},fa,{className:Na,ref:d}),va))});Pv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pv.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var xm=ig(ca(25)),kx=ig(ca(25)),
fE=ig(ca(25)),tt=function(){var a=0,d=null;return{add:function(n){if(0==a){if(document){var S=document.createElement("style");S.type="text/css";var fa="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;fa&&S.setAttribute("nonce",fa)}else S=null;if(d=S)S=d,S.styleSheet?S.styleSheet.cssText=n:S.appendChild(document.createTextNode(n)),n=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),
d=null)}}},lx=function(){var a=tt();return function(d,n){fE.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&n])}},kC=function(){var a=lx();return function(d){a(d.styles,d.dynamic);return null}},lC={left:0,top:0,right:0,gap:0},mC=kC(),nC=function(a,d,n,S){var fa=a.left,la=a.top,va=a.right;a=a.gap;void 0===n&&(n="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(S,";\n   padding-right: ").concat(a,"px ").concat(S,";\n  }\n  body {\n    overflow: hidden ").concat(S,
";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(S,";"),"margin"===n&&"\n    padding-left: ".concat(fa,"px;\n    padding-top: ").concat(la,"px;\n    padding-right: ").concat(va,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(S,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(S,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(S,
";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(S,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(S,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(S,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},oC=function(a){var d=a.noRelative,n=a.noImportant;
a=a.gapMode;var S=void 0===a?"margin":a;a=kx.useMemo(function(){var fa=S;void 0===fa&&(fa="margin");if("undefined"===typeof window)fa=lC;else{var la=window.getComputedStyle(document.body),va=la["padding"===fa?"paddingTop":"marginTop"],Na=la["padding"===fa?"paddingRight":"marginRight"];fa=[parseInt(la["padding"===fa?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(va||"",10)||0,parseInt(Na||"",10)||0];fa={left:fa[0],top:fa[1],right:fa[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+
fa[2]-fa[0])}}return fa},[S]);return kx.createElement(mC,{styles:nC(a,!d,S,n?"":"!important")})},mx=!1;if("undefined"!==typeof window)try{var Fs=Object.defineProperty({},"passive",{get:function(){return mx=!0}});window.addEventListener("test",Fs,Fs);window.removeEventListener("test",Fs,Fs)}catch(a){mx=!1}var Gs=mx?{passive:!1}:!1,nx=function(a,d){var n=window.getComputedStyle(a);return"hidden"!==n[d]&&!(n.overflowY===n.overflowX&&"TEXTAREA"!==a.tagName&&"visible"===n[d])},pC=function(a,d){do{"undefined"!==
typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(qC(a,d)){var n=rC(a,d);if(n[1]>n[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},qC=function(a,d){return"v"===a?nx(d,"overflowY"):nx(d,"overflowX")},rC=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},bv=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},qw=function(a){return a&&"current"in a?a.current:a},
dl=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},Cp=0,Fk=[];lo.useMedium(function(a){var d=xm.useRef([]),n=xm.useRef([0,0]),S=xm.useRef(),fa=xm.useState(Cp++)[0],la=xm.useState(function(){return kC()})[0],va=xm.useRef(a);xm.useEffect(function(){va.current=a},[a]);xm.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(fa));var hc=Bp([a.lockRef.current],(a.shards||
[]).map(qw),!0).filter(Boolean);hc.forEach(function(Rc){return Rc.classList.add("allow-interactivity-".concat(fa))});return function(){document.body.classList.remove("block-interactivity-".concat(fa));hc.forEach(function(Rc){return Rc.classList.remove("allow-interactivity-".concat(fa))})}}},[a.inert,a.lockRef.current,a.shards]);var Na=xm.useCallback(function(hc,Rc){if("touches"in hc&&2===hc.touches.length)return!va.current.allowPinchZoom;var hd=bv(hc),zc=n.current,$c="deltaX"in hc?hc.deltaX:zc[0]-
hd[0];zc="deltaY"in hc?hc.deltaY:zc[1]-hd[1];var Uc=hc.target,td=Math.abs($c)>Math.abs(zc)?"h":"v";if("touches"in hc&&"h"===td&&"range"===Uc.type)return!1;var vd=pC(td,Uc);if(!vd)return!0;vd?hd=td:(hd="v"===td?"h":"v",vd=pC(td,Uc));if(!vd)return!1;!S.current&&"changedTouches"in hc&&($c||zc)&&(S.current=hd);if(!hd)return!0;hd=S.current||hd;zc="h"===hd?$c:zc;$c=window.getComputedStyle(Rc).direction;$c="h"===hd&&"rtl"===$c?-1:1;td=$c*zc;hc=hc.target;zc=Rc.contains(hc);Uc=!1;td=0<td;var ae=vd=0;do{var qe=
rC(hd,hc),Lf=qe[0];qe=qe[1]-qe[2]-$c*Lf;(Lf||qe)&&qC(hd,hc)&&(vd+=qe,ae+=Lf);hc=hc.parentNode}while(!zc&&hc!==document.body||zc&&(Rc.contains(hc)||Rc===hc));td&&0===vd?Uc=!0:td||0!==ae||(Uc=!0);return Uc},[]),cb=xm.useCallback(function(hc){if(Fk.length&&Fk[Fk.length-1]===la){var Rc="deltaY"in hc?[hc.deltaX,hc.deltaY]:bv(hc),hd=d.current.filter(function(zc){var $c;if($c=zc.name===hc.type&&zc.target===hc.target)zc=zc.delta,$c=zc[0]===Rc[0]&&zc[1]===Rc[1];return $c})[0];hd&&hd.should?hc.cancelable&&
hc.preventDefault():hd||(hd=(va.current.shards||[]).map(qw).filter(Boolean).filter(function(zc){return zc.contains(hc.target)}),(0<hd.length?Na(hc,hd[0]):!va.current.noIsolation)&&hc.cancelable&&hc.preventDefault())}},[]),qb=xm.useCallback(function(hc,Rc,hd,zc){var $c={name:hc,delta:Rc,target:hd,should:zc};d.current.push($c);setTimeout(function(){d.current=d.current.filter(function(Uc){return Uc!==$c})},1)},[]),xb=xm.useCallback(function(hc){n.current=bv(hc);S.current=void 0},[]),Eb=xm.useCallback(function(hc){qb(hc.type,
[hc.deltaX,hc.deltaY],hc.target,Na(hc,a.lockRef.current))},[]),jc=xm.useCallback(function(hc){qb(hc.type,bv(hc),hc.target,Na(hc,a.lockRef.current))},[]);xm.useEffect(function(){Fk.push(la);a.setCallbacks({onScrollCapture:Eb,onWheelCapture:Eb,onTouchMoveCapture:jc});document.addEventListener("wheel",cb,Gs);document.addEventListener("touchmove",cb,Gs);document.addEventListener("touchstart",xb,Gs);return function(){Fk=Fk.filter(function(hc){return hc!==la});document.removeEventListener("wheel",cb,Gs);
document.removeEventListener("touchmove",cb,Gs);document.removeEventListener("touchstart",xb,Gs)}},[]);var oc=a.removeScrollBar;return xm.createElement(xm.Fragment,null,a.inert?xm.createElement(la,{styles:dl(fa)}):null,oc?xm.createElement(oC,{gapMode:"margin"}):null)});var nq=iC.forwardRef(function(a,d){return iC.createElement(Pv,Rr({},a,{ref:d,sideCar:$m}))});nq.classNames=Pv.classNames;var rm=["Enter"," "],mo=["ArrowUp","PageDown","End"],Pj=["ArrowDown","PageUp","Home",...mo];[...rm];[...rm];var [rw,
sw,tw]=bh("Menu"),[Sq,cv]=Ci("Menu",[tw,Xt,nw]),dv=Xt(),Hj=nw(),[my,Zt]=Sq("Menu"),[ny,Sr]=Sq("Menu"),oy=(0,Yh.forwardRef)((a,d)=>{var {__scopeMenu:n}=a;a=yg(a,["__scopeMenu"]);n=dv(n);return(0,Yh.createElement)(cy,pf({},n,a,{ref:d}))}),[,Ws]=Sq("MenuPortal",{forceMount:void 0}),[tH,ev]=Sq("MenuContent"),fv=(0,Yh.forwardRef)((a,d)=>{var n=Ws("MenuContent",a.__scopeMenu);({forceMount:n=n.forceMount}=a);const S=yg(a,["forceMount"]),fa=Zt("MenuContent",a.__scopeMenu),la=Sr("MenuContent",a.__scopeMenu);
return(0,Yh.createElement)(rw.Provider,{scope:a.__scopeMenu},(0,Yh.createElement)($u,{present:n||fa.open},(0,Yh.createElement)(rw.Slot,{scope:a.__scopeMenu},la.modal?(0,Yh.createElement)(py,pf({},S,{ref:d})):(0,Yh.createElement)(gv,pf({},S,{ref:d})))))}),py=(0,Yh.forwardRef)((a,d)=>{const n=Zt("MenuContent",a.__scopeMenu),S=(0,Yh.useRef)(null);d=$h(d,S);(0,Yh.useEffect)(()=>{const fa=S.current;if(fa)return ly(fa)},[]);return(0,Yh.createElement)(uw,pf({},a,{ref:d,trapFocus:n.open,disableOutsidePointerEvents:n.open,
disableOutsideScroll:!0,onFocusOutside:Ng(a.onFocusOutside,fa=>fa.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),gv=(0,Yh.forwardRef)((a,d)=>{const n=Zt("MenuContent",a.__scopeMenu);return(0,Yh.createElement)(uw,pf({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),uw=(0,Yh.forwardRef)((a,d)=>{const {__scopeMenu:n,loop:S=!1,trapFocus:fa,onOpenAutoFocus:la,onCloseAutoFocus:va,disableOutsidePointerEvents:Na,
onEscapeKeyDown:cb,onPointerDownOutside:qb,onFocusOutside:xb,onInteractOutside:Eb,onDismiss:jc,disableOutsideScroll:oc}=a,hc=yg(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),Rc=Zt("MenuContent",n),hd=Sr("MenuContent",n),zc=dv(n),$c=Hj(n),Uc=sw(n),[td,vd]=(0,Yh.useState)(null),ae=(0,Yh.useRef)(null);d=$h(d,ae,Rc.onContentChange);const qe=(0,Yh.useRef)(0),
Lf=(0,Yh.useRef)(""),Qe=(0,Yh.useRef)(0),of=(0,Yh.useRef)(null),ng=(0,Yh.useRef)("right"),xf=(0,Yh.useRef)(0),cg=oc?nq:Yh.Fragment,oe=oc?{as:lq,allowPinchZoom:!0}:void 0,Vd=Pd=>{var ke,yf;Pd=Lf.current+Pd;const Pf=Uc().filter(zg=>!zg.disabled),Lg=document.activeElement,yh=null===(ke=Pf.find(zg=>zg.ref.current===Lg))||void 0===ke?void 0:ke.textValue;ke=Pf.map(zg=>zg.textValue);const Zf=gk(ke,Pd,yh),Kh=null===(yf=Pf.find(zg=>zg.textValue===Zf))||void 0===yf?void 0:yf.ref.current;(function mi(Wh){Lf.current=
Wh;window.clearTimeout(qe.current);""!==Wh&&(qe.current=window.setTimeout(()=>mi(""),1E3))})(Pd);Kh&&setTimeout(()=>Kh.focus())};(0,Yh.useEffect)(()=>()=>window.clearTimeout(qe.current),[]);Eg();const he=(0,Yh.useCallback)(Pd=>{var ke,yf,Pf;if(Pf=ng.current===(null===(ke=of.current)||void 0===ke?void 0:ke.side)){if(ke=null===(yf=of.current)||void 0===yf?void 0:yf.area){const {x:Lg,y:yh}={x:Pd.clientX,y:Pd.clientY};Pd=!1;for(let Zf=0,Kh=ke.length-1;Zf<ke.length;Kh=Zf++){yf=ke[Zf].x;Pf=ke[Zf].y;const zg=
ke[Kh].x,Wh=ke[Kh].y;Pf>yh!==Wh>yh&&Lg<(zg-yf)*(yh-Pf)/(Wh-Pf)+yf&&(Pd=!Pd)}ke=Pd}else ke=!1;Pf=ke}return Pf},[]);return(0,Yh.createElement)(tH,{scope:n,searchRef:Lf,onItemEnter:(0,Yh.useCallback)(Pd=>{he(Pd)&&Pd.preventDefault()},[he]),onItemLeave:(0,Yh.useCallback)(Pd=>{var ke;he(Pd)||(null===(ke=ae.current)||void 0===ke||ke.focus(),vd(null))},[he]),onTriggerLeave:(0,Yh.useCallback)(Pd=>{he(Pd)&&Pd.preventDefault()},[he]),pointerGraceTimerRef:Qe,onPointerGraceIntentChange:(0,Yh.useCallback)(Pd=>
{of.current=Pd},[])},(0,Yh.createElement)(cg,oe,(0,Yh.createElement)(cC,{asChild:!0,trapped:fa,onMountAutoFocus:Ng(la,Pd=>{var ke;Pd.preventDefault();null===(ke=ae.current)||void 0===ke||ke.focus()}),onUnmountAutoFocus:va},(0,Yh.createElement)(Yx,{asChild:!0,disableOutsidePointerEvents:Na,onEscapeKeyDown:cb,onPointerDownOutside:qb,onFocusOutside:xb,onInteractOutside:Eb,onDismiss:jc},(0,Yh.createElement)(fC,pf({asChild:!0},$c,{dir:hd.dir,orientation:"vertical",loop:S,currentTabStopId:td,onCurrentTabStopIdChange:vd,
onEntryFocus:Pd=>{hd.isUsingKeyboardRef.current||Pd.preventDefault()}}),(0,Yh.createElement)(dy,pf({role:"menu","aria-orientation":"vertical","data-state":Rc.open?"open":"closed","data-radix-menu-content":"",dir:hd.dir},zc,hc,{ref:d,style:Ke({outline:"none"},hc.style),onKeyDown:Ng(hc.onKeyDown,Pd=>{var ke=Pd.target.closest("[data-radix-menu-content]")===Pd.currentTarget;const yf=Pd.ctrlKey||Pd.altKey||Pd.metaKey,Pf=1===Pd.key.length;ke&&("Tab"===Pd.key&&Pd.preventDefault(),!yf&&Pf&&Vd(Pd.key));Pd.target===
ae.current&&Pj.includes(Pd.key)&&(Pd.preventDefault(),ke=Uc().filter(Lg=>!Lg.disabled).map(Lg=>Lg.ref.current),mo.includes(Pd.key)&&ke.reverse(),go(ke))}),onBlur:Ng(a.onBlur,Pd=>{Pd.currentTarget.contains(Pd.target)||(window.clearTimeout(qe.current),Lf.current="")}),onPointerMove:Ng(a.onPointerMove,uo(Pd=>{const ke=xf.current!==Pd.clientX;Pd.currentTarget.contains(Pd.target)&&ke&&(ng.current=Pd.clientX>xf.current?"right":"left",xf.current=Pd.clientX)}))})))))))}),$t=(0,Yh.forwardRef)((a,d)=>{const {disabled:n=
!1,onSelect:S}=a,fa=yg(a,["disabled","onSelect"]),la=(0,Yh.useRef)(null),va=Sr("MenuItem",a.__scopeMenu),Na=ev("MenuItem",a.__scopeMenu);d=$h(d,la);const cb=(0,Yh.useRef)(!1);return(0,Yh.createElement)(sC,pf({},fa,{ref:d,disabled:n,onClick:Ng(a.onClick,()=>{const qb=la.current;if(!n&&qb){const xb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});qb.addEventListener("menu.itemSelect",Eb=>null===S||void 0===S?void 0:S(Eb),{once:!0});Sl(qb,xb);if(xb.defaultPrevented)cb.current=!1;else va.onClose()}}),
onPointerDown:qb=>{var xb;null===(xb=a.onPointerDown)||void 0===xb||xb.call(a,qb);cb.current=!0},onPointerUp:Ng(a.onPointerUp,qb=>{var xb;cb.current||null===(xb=qb.currentTarget)||void 0===xb||xb.click()}),onKeyDown:Ng(a.onKeyDown,qb=>{const xb=""!==Na.searchRef.current;n||xb&&" "===qb.key||!rm.includes(qb.key)||(qb.currentTarget.click(),qb.preventDefault())})}))}),sC=(0,Yh.forwardRef)((a,d)=>{const {__scopeMenu:n,disabled:S=!1,textValue:fa}=a,la=yg(a,["__scopeMenu","disabled","textValue"]),va=ev("MenuItem",
n),Na=Hj(n),cb=(0,Yh.useRef)(null);d=$h(d,cb);const [qb,xb]=(0,Yh.useState)(!1),[Eb,jc]=(0,Yh.useState)("");(0,Yh.useEffect)(()=>{const oc=cb.current;if(oc){var hc;jc((null!==(hc=oc.textContent)&&void 0!==hc?hc:"").trim())}},[la.children]);return(0,Yh.createElement)(rw.ItemSlot,{scope:n,disabled:S,textValue:null!==fa&&void 0!==fa?fa:Eb},(0,Yh.createElement)(gC,pf({asChild:!0},Na,{focusable:!S}),(0,Yh.createElement)(kl.div,pf({role:"menuitem","data-highlighted":qb?"":void 0,"aria-disabled":S||void 0,
"data-disabled":S?"":void 0},la,{ref:d,onPointerMove:Ng(a.onPointerMove,uo(oc=>{if(S)va.onItemLeave(oc);else va.onItemEnter(oc),oc.defaultPrevented||oc.currentTarget.focus()})),onPointerLeave:Ng(a.onPointerLeave,uo(oc=>va.onItemLeave(oc))),onFocus:Ng(a.onFocus,()=>xb(!0)),onBlur:Ng(a.onBlur,()=>xb(!1))}))))});Sq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Sq("MenuItemIndicator",{checked:!1});var tC=(0,Yh.forwardRef)((a,d)=>{a=yg(a,["__scopeMenu"]);return(0,Yh.createElement)(kl.div,pf({role:"separator",
"aria-orientation":"horizontal"},a,{ref:d}))});Sq("MenuSub");var uC=a=>{const {__scopeMenu:d,open:n=!1,children:S,dir:fa,onOpenChange:la,modal:va=!0}=a;a=dv(d);const [Na,cb]=(0,Yh.useState)(null),qb=(0,Yh.useRef)(!1),xb=Mj(la),Eb=ph(fa);(0,Yh.useEffect)(()=>{const jc=()=>{qb.current=!0;document.addEventListener("pointerdown",oc,{capture:!0,once:!0});document.addEventListener("pointermove",oc,{capture:!0,once:!0})},oc=()=>qb.current=!1;document.addEventListener("keydown",jc,{capture:!0});return()=>
{document.removeEventListener("keydown",jc,{capture:!0});document.removeEventListener("pointerdown",oc,{capture:!0});document.removeEventListener("pointermove",oc,{capture:!0})}},[]);return(0,Yh.createElement)(ey,a,(0,Yh.createElement)(my,{scope:d,open:n,onOpenChange:xb,content:Na,onContentChange:cb},(0,Yh.createElement)(ny,{scope:d,onClose:(0,Yh.useCallback)(()=>xb(!1),[xb]),isUsingKeyboardRef:qb,dir:Eb,modal:va},S)))},[au]=Ci("DropdownMenu",[cv]),Tr=cv(),[vw,hv]=au("DropdownMenu"),vC=(0,jp.forwardRef)((a,
d)=>{const {__scopeDropdownMenu:n,disabled:S=!1}=a,fa=yg(a,["__scopeDropdownMenu","disabled"]),la=hv("DropdownMenuTrigger",n),va=Tr(n);return(0,jp.createElement)(oy,pf({asChild:!0},va),(0,jp.createElement)(kl.button,pf({type:"button",id:la.triggerId,"aria-haspopup":"menu","aria-expanded":la.open,"aria-controls":la.open?la.contentId:void 0,"data-state":la.open?"open":"closed","data-disabled":S?"":void 0,disabled:S},fa,{ref:zh(d,la.triggerRef),onPointerDown:Ng(a.onPointerDown,Na=>{S||0!==Na.button||
!1!==Na.ctrlKey||(la.onOpenToggle(),la.open||Na.preventDefault())}),onKeyDown:Ng(a.onKeyDown,Na=>{if(!S){if(["Enter"," "].includes(Na.key))la.onOpenToggle();if("ArrowDown"===Na.key)la.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Na.key)&&Na.preventDefault()}})})))}),ww=(0,jp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:n}=a;const S=yg(a,["__scopeDropdownMenu"]),fa=hv("DropdownMenuContent",n);n=Tr(n);const la=(0,jp.useRef)(!1);return(0,jp.createElement)(fv,pf({id:fa.contentId,"aria-labelledby":fa.triggerId},
n,S,{ref:d,onCloseAutoFocus:Ng(a.onCloseAutoFocus,va=>{var Na;la.current||null===(Na=fa.triggerRef.current)||void 0===Na||Na.focus();la.current=!1;va.preventDefault()}),onInteractOutside:Ng(a.onInteractOutside,va=>{va=va.detail.originalEvent;const Na=0===va.button&&!0===va.ctrlKey;va=2===va.button||Na;if(!fa.modal||va)la.current=!0}),style:ag(Ke({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),iv=(0,jp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:n}=
a;a=yg(a,["__scopeDropdownMenu"]);n=Tr(n);return(0,jp.createElement)($t,pf({},n,a,{ref:d}))}),qy=a=>{const {__scopeDropdownMenu:d,children:n,dir:S,open:fa,defaultOpen:la,onOpenChange:va,modal:Na=!0}=a;a=Tr(d);const cb=(0,jp.useRef)(null),[qb=!1,xb]=pd({prop:fa,defaultProp:la,onChange:va});return(0,jp.createElement)(vw,{scope:d,triggerId:Ki(),triggerRef:cb,contentId:Ki(),open:qb,onOpenChange:xb,onOpenToggle:(0,jp.useCallback)(()=>xb(Eb=>!Eb),[xb]),modal:Na},(0,jp.createElement)(uC,pf({},a,{open:qb,
onOpenChange:xb,dir:S,modal:Na}),n))},Qj=ig(ca(25)).default.createContext({}),wC=ig(ca(25)),xC=ca(612),Wl=a=>{var {action:d}=a;a=yg(a,["action"]);var {renderers:n}=wC.useContext(Qj);n=null==n?void 0:n.KeyboardShortcut;return(0,xC.jsx)("div",ag(Ke({className:"tl-menu-right-slot"},a),{children:(0,xC.jsx)(n,{action:d})}))};ca(25);var Gm=ca(612),yC=Ne(function(){const a=df(),d=n=>{n.preventDefault()};return(0,Gm.jsxs)(qy,{children:[(0,Gm.jsx)(vC,{className:"tl-button text-sm px-2 important",id:"tl-zoom",
children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,Gm.jsxs)(ww,{onCloseAutoFocus:n=>n.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,Gm.jsxs)(iv,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,Gm.jsx)(Wl,{action:"whiteboard/zoom-to-fit"})]}),(0,Gm.jsxs)(iv,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,children:["Zoom to fit selection",(0,Gm.jsx)(Wl,{action:"whiteboard/zoom-to-selection"})]}),
(0,Gm.jsxs)(iv,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomIn,children:["Zoom in",(0,Gm.jsx)(Wl,{action:"whiteboard/zoom-in"})]}),(0,Gm.jsxs)(iv,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,Gm.jsx)(Wl,{action:"whiteboard/zoom-out"})]}),(0,Gm.jsxs)(iv,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,Gm.jsx)(Wl,{action:"whiteboard/reset-zoom"})]})]})]})}),xw=ca(25),ry=["horizontal","vertical"],oq=(0,xw.forwardRef)((a,
d)=>{const {decorative:n,orientation:S="horizontal"}=a;a=yg(a,["decorative","orientation"]);const fa=ry.includes(S)?S:"horizontal";return(0,xw.createElement)(kl.div,pf({"data-orientation":fa},n?{role:"none"}:{"aria-orientation":"vertical"===fa?fa:void 0,role:"separator"},a,{ref:d}))});oq.propTypes={orientation(a,d,n){a=a[d];d=String(a);return a&&!ry.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${n}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var Hl=ca(612),ty=Ne(function(){const a=df(),{handlers:{t:d}}=Or.useContext(Qj),n=Or.useCallback(()=>{a.api.undo()},[a]),S=Or.useCallback(()=>{a.api.redo()},[a]),fa=Or.useCallback(()=>{a.api.zoomIn()},[a]),la=Or.useCallback(()=>{a.api.zoomOut()},[a]),va=Or.useCallback(()=>{a.api.toggleGrid()},[a]),Na=Or.useCallback(()=>{a.api.toggleSnapToGrid()},[a]),cb=Or.useCallback(()=>{a.api.togglePenMode()},[a]);return(0,Hl.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",
children:[!a.readOnly&&(0,Hl.jsxs)("div",{className:"tl-toolbar tl-history-bar mr-2 mb-2",children:[(0,Hl.jsx)(Ge,{tooltip:d("whiteboard/undo"),onClick:n,children:(0,Hl.jsx)(pi,{name:"arrow-back-up"})}),(0,Hl.jsx)(Ge,{tooltip:d("whiteboard/redo"),onClick:S,children:(0,Hl.jsx)(pi,{name:"arrow-forward-up"})})]}),(0,Hl.jsxs)("div",{className:"tl-toolbar tl-zoom-bar mr-2 mb-2",children:[(0,Hl.jsx)(Ge,{tooltip:d("whiteboard/zoom-in"),onClick:fa,id:"tl-zoom-in",children:(0,Hl.jsx)(pi,{name:"plus"})}),(0,Hl.jsx)(Ge,
{tooltip:d("whiteboard/zoom-out"),onClick:la,id:"tl-zoom-out",children:(0,Hl.jsx)(pi,{name:"minus"})}),(0,Hl.jsx)(oq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Hl.jsx)(yC,{})]}),(0,Hl.jsxs)("div",{className:"tl-toolbar tl-grid-bar mr-2 mb-2",children:[(0,Hl.jsx)(nf,{tooltip:d("whiteboard/toggle-grid"),className:"tl-button",pressed:a.settings.showGrid,id:"tl-show-grid",onPressedChange:va,children:(0,Hl.jsx)(pi,{name:"grid-dots"})}),!a.readOnly&&(0,Hl.jsx)(nf,{tooltip:d("whiteboard/snap-to-grid"),
className:"tl-button",pressed:a.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:Na,children:(0,Hl.jsx)(pi,{name:a.settings.snapToGrid?"magnet":"magnet-off"})})]}),!a.readOnly&&(0,Hl.jsx)("div",{className:"tl-toolbar tl-pen-mode-bar mb-2",children:(0,Hl.jsx)(nf,{tooltip:d("whiteboard/toggle-pen-mode"),className:"tl-button",pressed:a.settings.penMode,id:"tl-toggle-pen-mode",onPressedChange:cb,children:(0,Hl.jsx)(pi,{name:a.settings.penMode?"pencil":"pencil-off"})})})]})}),bu=ig(ca(25)),sy=
ig(ca(34)),yw=ca(612),Fn=a=>`[${a.map(d=>{var n;return null!=(n=null==d?void 0:d.toFixed(2))?n:"-"}).join(", ")}]`,Sn=Ne(()=>{var a;const {viewport:{bounds:d,camera:{point:n,zoom:S}},inputs:fa}=yd(),la=bu.default.useRef();bu.default.useEffect(()=>{const Na=document.getElementById("tl-statusbar-anchor");la.current=Na},[]);const va=[["Z",null!=(a=null==S?void 0:S.toFixed(2))?a:"null"],["MP",Fn(fa.currentPoint)],["MS",Fn(fa.currentScreenPoint)],["VP",Fn(n)],["VBR",Fn([d.maxX,d.maxY])]].map(Na=>Na.join("")).join("|");
a=la.current?sy.default.createPortal((0,yw.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:va}),la.current):null;return(0,yw.jsx)(yw.Fragment,{children:a})}),no=ig(ca(25)),jv=ca(612),Dp=Ne(a=>{var {id:d,icon:n,tooltip:S,tooltipSide:fa="left",handleClick:la}=a;a=yg(a,["id","icon","tooltip","tooltipSide","handleClick"]);var va;const Na=df(),cb=null==(va=[...Na.Tools,Pt,Qt])?void 0:va.find(qb=>qb.id===d);va=(va=null==cb?void 0:cb.shortcut)&&S?(0,jv.jsxs)("div",{className:"flex",
children:[S,(0,jv.jsx)(Wl,{action:va})]}):S;return(0,jv.jsx)(Ge,ag(Ke({},a),{tooltipSide:fa,tooltip:va,"data-tool":d,"data-selected":d===Na.selectedTool.id,onClick:la,children:"string"===typeof n?(0,jv.jsx)(pi,{name:n}):n}))}),jk=ca(25),[uy]=Ci("Popover",[Xt]),cu=Xt(),[vy,Xs]=uy("Popover"),wy=(0,jk.forwardRef)((a,d)=>{var {__scopePopover:n}=a;const S=yg(a,["__scopePopover"]),fa=Xs("PopoverTrigger",n);n=cu(n);d=$h(d,fa.triggerRef);a=(0,jk.createElement)(kl.button,pf({type:"button","aria-haspopup":"dialog",
"aria-expanded":fa.open,"aria-controls":fa.contentId,"data-state":fa.open?"open":"closed"},S,{ref:d,onClick:Ng(a.onClick,fa.onOpenToggle)}));return fa.hasCustomAnchor?a:(0,jk.createElement)(cy,pf({asChild:!0},n),a)}),[,xy]=uy("PopoverPortal",{forceMount:void 0}),yy=(0,jk.forwardRef)((a,d)=>{var n=xy("PopoverContent",a.__scopePopover);({forceMount:n=n.forceMount}=a);const S=yg(a,["forceMount"]);a=Xs("PopoverContent",a.__scopePopover);return(0,jk.createElement)($u,{present:n||a.open},a.modal?(0,jk.createElement)(du,
pf({},S,{ref:d})):(0,jk.createElement)(zC,pf({},S,{ref:d})))}),du=(0,jk.forwardRef)((a,d)=>{const n=Xs("PopoverContent",a.__scopePopover),S=(0,jk.useRef)(null);d=$h(d,S);const fa=(0,jk.useRef)(!1);(0,jk.useEffect)(()=>{const la=S.current;if(la)return ly(la)},[]);return(0,jk.createElement)(nq,{as:lq,allowPinchZoom:!0},(0,jk.createElement)(AC,pf({},a,{ref:d,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ng(a.onCloseAutoFocus,la=>{var va;la.preventDefault();fa.current||null===(va=n.triggerRef.current)||
void 0===va||va.focus()}),onPointerDownOutside:Ng(a.onPointerDownOutside,la=>{la=la.detail.originalEvent;const va=0===la.button&&!0===la.ctrlKey;fa.current=2===la.button||va},{checkForDefaultPrevented:!1}),onFocusOutside:Ng(a.onFocusOutside,la=>la.preventDefault(),{checkForDefaultPrevented:!1})})))}),zC=(0,jk.forwardRef)((a,d)=>{const n=Xs("PopoverContent",a.__scopePopover),S=(0,jk.useRef)(!1);return(0,jk.createElement)(AC,pf({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:fa=>
{var la;null===(la=a.onCloseAutoFocus)||void 0===la||la.call(a,fa);if(!fa.defaultPrevented){var va;S.current||null===(va=n.triggerRef.current)||void 0===va||va.focus();fa.preventDefault()}S.current=!1},onInteractOutside:fa=>{var la,va;null===(la=a.onInteractOutside)||void 0===la||la.call(a,fa);fa.defaultPrevented||(S.current=!0);la=fa.target;(null===(va=n.triggerRef.current)||void 0===va?0:va.contains(la))&&fa.preventDefault()}}))}),AC=(0,jk.forwardRef)((a,d)=>{const {__scopePopover:n,trapFocus:S,
onOpenAutoFocus:fa,onCloseAutoFocus:la,disableOutsidePointerEvents:va,onEscapeKeyDown:Na,onPointerDownOutside:cb,onFocusOutside:qb,onInteractOutside:xb}=a;a=yg(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const Eb=Xs("PopoverContent",n),jc=cu(n);Eg();return(0,jk.createElement)(cC,{asChild:!0,loop:!0,trapped:S,onMountAutoFocus:fa,onUnmountAutoFocus:la},(0,jk.createElement)(Yx,
{asChild:!0,disableOutsidePointerEvents:va,onInteractOutside:xb,onEscapeKeyDown:Na,onPointerDownOutside:cb,onFocusOutside:qb,onDismiss:()=>Eb.onOpenChange(!1)},(0,jk.createElement)(dy,pf({"data-state":Eb.open?"open":"closed",role:"dialog",id:Eb.contentId},jc,a,{ref:d,style:ag(Ke({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),Ys=(0,jk.forwardRef)((a,d)=>{var {__scopePopover:n}=a;a=yg(a,["__scopePopover"]);n=cu(n);return(0,jk.createElement)(UB,
pf({},n,a,{ref:d}))}),zw=a=>{const {__scopePopover:d,children:n,open:S,defaultOpen:fa,onOpenChange:la,modal:va=!1}=a;a=cu(d);const Na=(0,jk.useRef)(null),[cb,qb]=(0,jk.useState)(!1),[xb=!1,Eb]=pd({prop:S,defaultProp:fa,onChange:la});return(0,jk.createElement)(ey,a,(0,jk.createElement)(vy,{scope:d,contentId:Ki(),triggerRef:Na,open:xb,onOpenChange:Eb,onOpenToggle:(0,jk.useCallback)(()=>Eb(jc=>!jc),[Eb]),hasCustomAnchor:cb,onCustomAnchorAdd:(0,jk.useCallback)(()=>qb(!0),[]),onCustomAnchorRemove:(0,jk.useCallback)(()=>
qb(!1),[]),modal:va},n))},BC=ig(ca(25)),pq=ca(612),zy=Ne(function(a){var {popoverSide:d="left",setGeometry:n,activeGeometry:S,chevron:fa=!0}=a;a=yg(a,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:la}}=BC.default.useContext(Qj);const va=[{id:"box",icon:"square",tooltip:la("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:la("whiteboard/circle")},{id:"polygon",icon:"triangle",tooltip:la("whiteboard/triangle")}];la={id:"shapes",icon:"triangle-square-circle",tooltip:la("whiteboard/shape")};
la=S?va.find(Na=>Na.id===S):la;return(0,pq.jsxs)(zw,{children:[(0,pq.jsx)(wy,{asChild:!0,children:(0,pq.jsxs)("div",ag(Ke({},a),{className:"tl-geometry-tools-pane-anchor",children:[(0,pq.jsx)(Dp,ag(Ke({},la),{tooltipSide:d})),fa&&(0,pq.jsx)(pi,{"data-selected":S,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,pq.jsxs)(yy,{className:"tl-popover-content",side:d,sideOffset:15,children:[(0,pq.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":
"flex-row"}`,children:va.map(Na=>(0,pq.jsx)(Dp,{id:Na.id,icon:Na.icon,tooltip:S?Na.tooltip:"",handleClick:n,tooltipSide:d},Na.id))}),(0,pq.jsx)(Ys,{className:"tl-popover-arrow"})]})]})}),jj=ca(25),Ay=ca(25),By=["PageUp","PageDown"],kv=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Cy={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},
[Dy,uH,CC]=bh("Slider"),[qq]=Ci("Slider",[CC]),[Tq,Uq]=qq("Slider"),Zs=(0,jj.forwardRef)((a,d)=>{function n(xf){const cg=Aq(Qe,xf);la(xf,cg)}function S(xf){la(xf,ae.current)}function fa(){Qe[ae.current]!==ng.current[ae.current]&&hd(Qe)}function la(xf,cg,{commit:oe}={commit:!1}){const Vd=(String(qb).split(".")[1]||"").length;xf=xn(Math.round((xf-Na)/qb)*qb+Na,Vd);const he=to(xf,[Na,cb]);of((Pd=[])=>{const ke=Uj(Pd,he,cg);var yf=jc*qb;if(0<yf){const Pf=Qm(ke);yf=Math.min(...Pf)>=yf}else yf=!0;return yf?
(ae.current=ke.indexOf(he),(yf=String(ke)!==String(Pd))&&oe&&hd(ke),yf?ke:Pd):Pd})}const {name:va,min:Na=0,max:cb=100,step:qb=1,orientation:xb="horizontal",disabled:Eb=!1,minStepsBetweenThumbs:jc=0,defaultValue:oc=[Na],value:hc,onValueChange:Rc=()=>{},onValueCommit:hd=()=>{},inverted:zc=!1}=a,$c=yg(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[Uc,td]=(0,jj.useState)(null);d=$h(d,xf=>td(xf));const vd=(0,jj.useRef)(new Set),
ae=(0,jj.useRef)(0);var qe="horizontal"===xb;const Lf=Uc?!!Uc.closest("form"):!0;qe=qe?vH:EC;const [Qe=[],of]=pd({prop:hc,defaultProp:oc,onChange:xf=>{var cg;null===(cg=[...vd.current][ae.current])||void 0===cg||cg.focus();Rc(xf)}}),ng=(0,jj.useRef)(Qe);return(0,jj.createElement)(Tq,{scope:a.__scopeSlider,disabled:Eb,min:Na,max:cb,valueIndexToChangeRef:ae,thumbs:vd.current,values:Qe,orientation:xb},(0,jj.createElement)(Dy.Provider,{scope:a.__scopeSlider},(0,jj.createElement)(Dy.Slot,{scope:a.__scopeSlider},
(0,jj.createElement)(qe,pf({"aria-disabled":Eb,"data-disabled":Eb?"":void 0},$c,{ref:d,onPointerDown:Ng($c.onPointerDown,()=>{Eb||(ng.current=Qe)}),min:Na,max:cb,inverted:zc,onSlideStart:Eb?void 0:n,onSlideMove:Eb?void 0:S,onSlideEnd:Eb?void 0:fa,onHomeKeyDown:()=>!Eb&&la(Na,0,{commit:!0}),onEndKeyDown:()=>!Eb&&la(cb,Qe.length-1,{commit:!0}),onStepKeyDown:({event:xf,direction:cg})=>{if(!Eb){xf=By.includes(xf.key)||xf.shiftKey&&kv.includes(xf.key);const oe=ae.current;la(Qe[oe]+qb*(xf?10:1)*cg,oe,{commit:!0})}}})))),
Lf&&Qe.map((xf,cg)=>(0,jj.createElement)(Il,{key:cg,name:va?va+(1<Qe.length?"[]":""):void 0,value:xf})))}),[Ey,DC]=qq("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),vH=(0,jj.forwardRef)((a,d)=>{function n($c){const Uc=hc.current||jc.getBoundingClientRect(),td=wn([0,Uc.width],zc?[S,fa]:[fa,S]);hc.current=Uc;return td($c-Uc.left)}const {min:S,max:fa,dir:la,inverted:va,onSlideStart:Na,onSlideMove:cb,onSlideEnd:qb,onStepKeyDown:xb}=a,Eb=yg(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
[jc,oc]=(0,jj.useState)(null);d=$h(d,$c=>oc($c));const hc=(0,jj.useRef)(),Rc=ph(la),hd="ltr"===Rc,zc=hd&&!va||!hd&&va;return(0,jj.createElement)(Ey,{scope:a.__scopeSlider,startEdge:zc?"left":"right",endEdge:zc?"right":"left",direction:zc?1:-1,size:"width"},(0,jj.createElement)(Of,pf({dir:Rc,"data-orientation":"horizontal"},Eb,{ref:d,style:ag(Ke({},Eb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:$c=>{$c=n($c.clientX);null===Na||void 0===Na||Na($c)},onSlideMove:$c=>{$c=
n($c.clientX);null===cb||void 0===cb||cb($c)},onSlideEnd:()=>{hc.current=void 0;null===qb||void 0===qb||qb()},onStepKeyDown:$c=>{const Uc=Cy[zc?"from-left":"from-right"].includes($c.key);null===xb||void 0===xb||xb({event:$c,direction:Uc?-1:1})}})))}),EC=(0,jj.forwardRef)((a,d)=>{function n(hc){const Rc=jc.current||Eb.current.getBoundingClientRect(),hd=wn([0,Rc.height],oc?[fa,S]:[S,fa]);jc.current=Rc;return hd(hc-Rc.top)}const {min:S,max:fa,inverted:la,onSlideStart:va,onSlideMove:Na,onSlideEnd:cb,
onStepKeyDown:qb}=a,xb=yg(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),Eb=(0,jj.useRef)(null);d=$h(d,Eb);const jc=(0,jj.useRef)(),oc=!la;return(0,jj.createElement)(Ey,{scope:a.__scopeSlider,startEdge:oc?"bottom":"top",endEdge:oc?"top":"bottom",size:"height",direction:oc?1:-1},(0,jj.createElement)(Of,pf({"data-orientation":"vertical"},xb,{ref:d,style:ag(Ke({},xb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:hc=>{hc=n(hc.clientY);null===
va||void 0===va||va(hc)},onSlideMove:hc=>{hc=n(hc.clientY);null===Na||void 0===Na||Na(hc)},onSlideEnd:()=>{jc.current=void 0;null===cb||void 0===cb||cb()},onStepKeyDown:hc=>{const Rc=Cy[oc?"from-bottom":"from-top"].includes(hc.key);null===qb||void 0===qb||qb({event:hc,direction:Rc?-1:1})}})))}),Of=(0,jj.forwardRef)((a,d)=>{const {__scopeSlider:n,onSlideStart:S,onSlideMove:fa,onSlideEnd:la,onHomeKeyDown:va,onEndKeyDown:Na,onStepKeyDown:cb}=a,qb=yg(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
xb=Uq("Slider",n);return(0,jj.createElement)(kl.span,pf({},qb,{ref:d,onKeyDown:Ng(a.onKeyDown,Eb=>{"Home"===Eb.key?(va(Eb),Eb.preventDefault()):"End"===Eb.key?(Na(Eb),Eb.preventDefault()):By.concat(kv).includes(Eb.key)&&(cb(Eb),Eb.preventDefault())}),onPointerDown:Ng(a.onPointerDown,Eb=>{const jc=Eb.target;jc.setPointerCapture(Eb.pointerId);Eb.preventDefault();xb.thumbs.has(jc)?jc.focus():S(Eb)}),onPointerMove:Ng(a.onPointerMove,Eb=>{Eb.target.hasPointerCapture(Eb.pointerId)&&fa(Eb)}),onPointerUp:Ng(a.onPointerUp,
Eb=>{const jc=Eb.target;jc.hasPointerCapture(Eb.pointerId)&&(jc.releasePointerCapture(Eb.pointerId),la(Eb))})}))}),ch=(0,jj.forwardRef)((a,d)=>{var {__scopeSlider:n}=a;a=yg(a,["__scopeSlider"]);n=Uq("SliderTrack",n);return(0,jj.createElement)(kl.span,pf({"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation},a,{ref:d}))}),Yf=(0,jj.forwardRef)((a,d)=>{var {__scopeSlider:n}=a;const S=yg(a,["__scopeSlider"]),fa=Uq("SliderRange",n);n=DC("SliderRange",n);var la=(0,jj.useRef)(null);d=$h(d,
la);var va=fa.values.length;la=fa.values.map(Na=>wj(Na,fa.min,fa.max));va=1<va?Math.min(...la):0;la=100-Math.max(...la);return(0,jj.createElement)(kl.span,pf({"data-orientation":fa.orientation,"data-disabled":fa.disabled?"":void 0},S,{ref:d,style:ag(Ke({},a.style),{[n.startEdge]:va+"%",[n.endEdge]:la+"%"})}))}),Hg=(0,jj.forwardRef)((a,d)=>{const n=uH(a.__scopeSlider),[S,fa]=(0,jj.useState)(null);d=$h(d,va=>fa(va));const la=(0,jj.useMemo)(()=>S?n().findIndex(va=>va.ref.current===S):-1,[n,S]);return(0,jj.createElement)(Oo,
pf({},a,{ref:d,index:la}))}),Oo=(0,jj.forwardRef)((a,d)=>{const {__scopeSlider:n,index:S}=a,fa=yg(a,["__scopeSlider","index"]),la=Uq("SliderThumb",n),va=DC("SliderThumb",n),[Na,cb]=(0,jj.useState)(null);d=$h(d,oc=>cb(oc));var qb=Vb(Na);const xb=la.values[S],Eb=void 0===xb?0:wj(xb,la.min,la.max),jc=vl(S,la.values.length);qb=(qb=null===qb||void 0===qb?void 0:qb[va.size])?cm(qb,Eb,va.direction):0;(0,jj.useEffect)(()=>{if(Na)return la.thumbs.add(Na),()=>{la.thumbs.delete(Na)}},[Na,la.thumbs]);return(0,jj.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[va.startEdge]:`calc(${Eb}% + ${qb}px)`}},(0,jj.createElement)(Dy.ItemSlot,{scope:a.__scopeSlider},(0,jj.createElement)(kl.span,pf({role:"slider","aria-label":a["aria-label"]||jc,"aria-valuemin":la.min,"aria-valuenow":xb,"aria-valuemax":la.max,"aria-orientation":la.orientation,"data-orientation":la.orientation,"data-disabled":la.disabled?"":void 0,tabIndex:la.disabled?void 0:0},fa,{ref:d,style:void 0===xb?{display:"none"}:
a.style,onFocus:Ng(a.onFocus,()=>{la.valueIndexToChangeRef.current=S})}))))}),Il=a=>{const {value:d}=a;a=yg(a,["value"]);const n=(0,jj.useRef)(null),S=Ln(d);(0,jj.useEffect)(()=>{const fa=n.current,la=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(S!==d&&la){const va=new Event("input",{bubbles:!0});la.call(fa,d);fa.dispatchEvent(va)}},[S,d]);return(0,jj.createElement)("input",pf({style:{display:"none"}},a,{ref:n,defaultValue:d}))},lv=Zs,Nk=ch,rq=Yf,Ef=Hg,Mg=ig(ca(25)),
nn=ca(612),vf=Ne(a=>{var {side:d,align:n,alignOffset:S,label:fa,arrow:la,children:va,border:Na}=a;a=yg(a,"side align alignOffset label arrow children border".split(" "));const cb=Mg.useRef(null),[qb,xb]=Mg.useState(!1),{viewport:{bounds:Eb,camera:{point:jc,zoom:oc}}}=df(),[hc,Rc]=Mg.useState(0);Mg.useEffect(()=>{if(cb.current&&qb){var hd=cb.current.getBoundingClientRect();kg.boundsContain(Eb,{minX:hd.x,minY:hd.y,maxX:hd.right,maxY:hd.bottom,width:hd.width,height:hd.height})||Rc(zc=>zc+1)}},[jc[0],
jc[1],oc,qb]);return(0,nn.jsxs)(zw,{onOpenChange:hd=>xb(hd),children:[(0,nn.jsx)(wy,ag(Ke({},a),{"data-border":Na,className:"tl-button tl-popover-trigger-button",children:fa})),(0,nn.jsxs)(yy,{ref:cb,className:"tl-popover-content",align:n,alignOffset:S,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[va,la&&(0,nn.jsx)(Ys,{className:"tl-popover-arrow"})]},"popover-content-"+hc)]})}),Ur=ig(ca(25)),sm=ca(612),Fy=ig(ca(25)),lg=ca(25),Tn=ca(34),on=ig(ca(25)),Gn=
ca(25),pn=ca(25),Vr=ca(34),Jl="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const n=(0,pn.forwardRef)((S,fa)=>{var {asChild:la}=S;S=yg(S,["asChild"]);la=la?lq:d;(0,pn.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,pn.createElement)(la,pf({},S,{ref:fa}))});n.displayName=`Primitive.${d}`;return ag(Ke({},a),{[d]:n})},{}),kp,Hh=(0,Gn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Un=(0,Gn.forwardRef)((a,
d)=>{var n;const {disableOutsidePointerEvents:S=!1,onEscapeKeyDown:fa,onPointerDownOutside:la,onFocusOutside:va,onInteractOutside:Na,onDismiss:cb}=a,qb=yg(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),xb=(0,Gn.useContext)(Hh),[Eb,jc]=(0,Gn.useState)(null),oc=null!==(n=null===Eb||void 0===Eb?void 0:Eb.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,hc]=(0,Gn.useState)({});
d=$h(d,Uc=>jc(Uc));n=Array.from(xb.layers);var [Rc]=[...xb.layersWithOutsidePointerEventsDisabled].slice(-1);Rc=n.indexOf(Rc);const hd=Eb?n.indexOf(Eb):-1;n=0<xb.layersWithOutsidePointerEventsDisabled.size;const zc=hd>=Rc;Rc=zo(Uc=>{const td=Uc.target,vd=[...xb.branches].some(ae=>ae.contains(td));zc&&!vd&&(null===la||void 0===la||la(Uc),null===Na||void 0===Na||Na(Uc),Uc.defaultPrevented||null===cb||void 0===cb||cb())},oc);const $c=em(Uc=>{const td=Uc.target;[...xb.branches].some(vd=>vd.contains(td))||
(null===va||void 0===va||va(Uc),null===Na||void 0===Na||Na(Uc),Uc.defaultPrevented||null===cb||void 0===cb||cb())},oc);Vk(Uc=>{hd===xb.layers.size-1&&(null===fa||void 0===fa||fa(Uc),!Uc.defaultPrevented&&cb&&(Uc.preventDefault(),cb()))},oc);(0,Gn.useEffect)(()=>{if(Eb)return S&&(0===xb.layersWithOutsidePointerEventsDisabled.size&&(kp=oc.body.style.pointerEvents,oc.body.style.pointerEvents="none"),xb.layersWithOutsidePointerEventsDisabled.add(Eb)),xb.layers.add(Eb),ym(),()=>{S&&1===xb.layersWithOutsidePointerEventsDisabled.size&&
(oc.body.style.pointerEvents=kp)}},[Eb,oc,S,xb]);(0,Gn.useEffect)(()=>()=>{Eb&&(xb.layers.delete(Eb),xb.layersWithOutsidePointerEventsDisabled.delete(Eb),ym())},[Eb,xb]);(0,Gn.useEffect)(()=>{const Uc=()=>hc({});document.addEventListener("dismissableLayer.update",Uc);return()=>document.removeEventListener("dismissableLayer.update",Uc)},[]);return(0,Gn.createElement)(Jl.div,pf({},qb,{ref:d,style:Ke({pointerEvents:n?zc?"auto":"none":void 0},a.style),onFocusCapture:Ng(a.onFocusCapture,$c.onFocusCapture),
onBlurCapture:Ng(a.onBlurCapture,$c.onBlurCapture),onPointerDownCapture:Ng(a.onPointerDownCapture,Rc.onPointerDownCapture)}))}),Hn=ca(25),Gy={bubbles:!1,cancelable:!0},$s=(0,Hn.forwardRef)((a,d)=>{const {loop:n=!1,trapped:S=!1,onMountAutoFocus:fa,onUnmountAutoFocus:la}=a;a=yg(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [va,Na]=(0,Hn.useState)(null),cb=Mj(fa),qb=Mj(la),xb=(0,Hn.useRef)(null);d=$h(d,oc=>Na(oc));const Eb=(0,Hn.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,Hn.useEffect)(()=>{if(S){let oc=function(Rc){!Eb.paused&&va&&(Rc=Rc.target,va.contains(Rc)?xb.current=Rc:dm(xb.current,{select:!0}))},hc=function(Rc){!Eb.paused&&va&&(va.contains(Rc.relatedTarget)||dm(xb.current,{select:!0}))};document.addEventListener("focusin",oc);document.addEventListener("focusout",hc);return()=>{document.removeEventListener("focusin",oc);document.removeEventListener("focusout",hc)}}},[S,va,Eb.paused]);(0,Hn.useEffect)(()=>{if(va){Dh.add(Eb);const oc=document.activeElement;
if(!va.contains(oc)){const hc=new CustomEvent("focusScope.autoFocusOnMount",Gy);va.addEventListener("focusScope.autoFocusOnMount",cb);va.dispatchEvent(hc);hc.defaultPrevented||(Mn(wo(ho(va)),{select:!0}),document.activeElement===oc&&dm(va))}return()=>{va.removeEventListener("focusScope.autoFocusOnMount",cb);setTimeout(()=>{const hc=new CustomEvent("focusScope.autoFocusOnUnmount",Gy);va.addEventListener("focusScope.autoFocusOnUnmount",qb);va.dispatchEvent(hc);hc.defaultPrevented||dm(null!==oc&&void 0!==
oc?oc:document.body,{select:!0});va.removeEventListener("focusScope.autoFocusOnUnmount",qb);Dh.remove(Eb)},0)}}},[va,cb,qb,Eb]);const jc=(0,Hn.useCallback)(oc=>{if((n||S)&&!Eb.paused){var hc=document.activeElement;if("Tab"===oc.key&&!oc.altKey&&!oc.ctrlKey&&!oc.metaKey&&hc){const hd=oc.currentTarget;var Rc=hd;const zc=ho(Rc),$c=vn(zc,Rc);Rc=vn(zc.reverse(),Rc);const [Uc,td]=[$c,Rc];Uc&&td?oc.shiftKey||hc!==td?oc.shiftKey&&hc===Uc&&(oc.preventDefault(),n&&dm(td,{select:!0})):(oc.preventDefault(),n&&
dm(Uc,{select:!0})):hc===hd&&oc.preventDefault()}}},[n,S,Eb.paused]);return(0,Hn.createElement)(Jl.div,pf({tabIndex:-1},a,{ref:d,onKeyDown:jc}))}),Dh=function(){let a=[];return{add(d){const n=a[0];d===n||null!==n&&void 0!==n&&n.pause();a=un(a,d);a.unshift(d)},remove(d){var n;a=un(a,d);null===(n=a[0])||void 0===n||n.resume()}}}(),qn=ca(25),[Ep,Sh]=Ci("Popper"),[mv,yk]=Ep("Popper"),Kl=(0,qn.forwardRef)((a,d)=>{const {__scopePopper:n,virtualRef:S}=a;a=yg(a,["__scopePopper","virtualRef"]);const fa=yk("PopperAnchor",
n),la=(0,qn.useRef)(null);d=$h(d,la);(0,qn.useEffect)(()=>{fa.onAnchorChange((null===S||void 0===S?void 0:S.current)||la.current)});return S?null:(0,qn.createElement)(Jl.div,pf({},a,{ref:d}))}),[eu]=Ep("PopperContent"),[nv,Hy]=Ep("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),fu=(0,qn.forwardRef)((a,d)=>{var n,S,fa,la,va,Na,cb,qb;const {__scopePopper:xb,side:Eb="bottom",sideOffset:jc=0,align:oc="center",alignOffset:hc=0,arrowPadding:Rc=0,collisionBoundary:hd=[],collisionPadding:zc=0,sticky:$c=
"partial",hideWhenDetached:Uc=!1,avoidCollisions:td=!0,onPlaced:vd}=a,ae=yg(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),qe=yk("PopperContent",xb),[Lf,Qe]=(0,qn.useState)(null);d=$h(d,co=>Qe(co));const [of,ng]=(0,qn.useState)(null);var xf=Vb(of),cg=null!==(n=null===xf||void 0===xf?void 0:xf.width)&&void 0!==n?n:0;n=null!==(S=null===xf||void 0===xf?void 0:xf.height)&&void 0!==S?S:0;S=
Eb+("center"!==oc?"-"+oc:"");xf="number"===typeof zc?zc:Ke({top:0,right:0,bottom:0,left:0},zc);const oe=Array.isArray(hd)?hd:[hd],Vd=0<oe.length;xf={padding:xf,boundary:oe.filter(Rh),altBoundary:Vd};const {reference:he,floating:Pd,strategy:ke,x:yf,y:Pf,placement:Lg,middlewareData:yh,update:Zf}=Bc({strategy:"fixed",placement:S,whileElementsMounted:vc,middleware:[tm(),NB({mainAxis:jc+n,alignmentAxis:hc}),td?OB(Ke({mainAxis:!0,crossAxis:!1,limiter:"partial"===$c?PB():void 0},xf)):void 0,of?SB({element:of,
padding:Rc}):void 0,td?LB(Ke({},xf)):void 0,zG(ag(Ke({},xf),{apply:({elements:co,availableWidth:ND,availableHeight:Cu})=>{co.floating.style.setProperty("--radix-popper-available-width",`${ND}px`);co.floating.style.setProperty("--radix-popper-available-height",`${Cu}px`)}})),FC({arrowWidth:cg,arrowHeight:n}),Uc?MB({strategy:"referenceHidden"}):void 0].filter(xo)});Vm(()=>{he(qe.anchor)},[he,qe.anchor]);const Kh=null!==yf&&null!==Pf,[zg,Wh]=Ao(Lg),mi=Mj(vd);Vm(()=>{Kh&&(null===mi||void 0===mi||mi())},
[Kh,mi]);cg=null===(fa=yh.arrow)||void 0===fa?void 0:fa.x;fa=null===(la=yh.arrow)||void 0===la?void 0:la.y;la=0!==(null===(va=yh.arrow)||void 0===va?void 0:va.centerOffset);const [Ij,el]=(0,qn.useState)();Vm(()=>{Lf&&el(window.getComputedStyle(Lf).zIndex)},[Lf]);const {hasParent:fl,positionUpdateFns:yq}=Hy("PopperContent",xb),rr=!fl;(0,qn.useLayoutEffect)(()=>{if(!rr)return yq.add(Zf),()=>{yq.delete(Zf)}},[rr,yq,Zf]);Vm(()=>{rr&&Kh&&Array.from(yq).reverse().forEach(co=>requestAnimationFrame(co))},
[rr,Kh,yq]);va=ag(Ke({"data-side":zg,"data-align":Wh},ae),{ref:d,style:ag(Ke({},ae.style),{animation:Kh?void 0:"none",opacity:null!==(Na=yh.hide)&&void 0!==Na&&Na.referenceHidden?0:void 0})});return(0,qn.createElement)("div",{ref:Pd,"data-radix-popper-content-wrapper":"",style:{position:ke,left:0,top:0,transform:Kh?`translate3d(${Math.round(yf)}px, ${Math.round(Pf)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Ij,["--radix-popper-transform-origin"]:[null===(cb=yh.transformOrigin)||
void 0===cb?void 0:cb.x,null===(qb=yh.transformOrigin)||void 0===qb?void 0:qb.y].join(" ")},dir:a.dir},(0,qn.createElement)(eu,{scope:xb,placedSide:zg,onArrowChange:ng,arrowX:cg,arrowY:fa,shouldHideArrow:la},rr?(0,qn.createElement)(nv,{scope:xb,hasParent:!0,positionUpdateFns:yq},(0,qn.createElement)(Jl.div,va)):(0,qn.createElement)(Jl.div,va)))}),tm=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:n}=a,{width:S,height:fa}=d.reference;n.floating.style.setProperty("--radix-popper-anchor-width",
`${S}px`);n.floating.style.setProperty("--radix-popper-anchor-height",`${fa}px`);return{}}}),FC=a=>({name:"transformOrigin",options:a,fn(d){var n,S,fa,la,va;const {placement:Na,rects:cb,middlewareData:qb}=d,xb=(d=0!==(null===(n=qb.arrow)||void 0===n?void 0:n.centerOffset))?0:a.arrowWidth;n=d?0:a.arrowHeight;const [Eb,jc]=Ao(Na),oc={start:"0%",center:"50%",end:"100%"}[jc],hc=(null!==(S=null===(fa=qb.arrow)||void 0===fa?void 0:fa.x)&&void 0!==S?S:0)+xb/2;S=(null!==(la=null===(va=qb.arrow)||void 0===
va?void 0:va.y)&&void 0!==la?la:0)+n/2;va=la="";"bottom"===Eb?(la=d?oc:`${hc}px`,va=`${-n}px`):"top"===Eb?(la=d?oc:`${hc}px`,va=`${cb.floating.height+n}px`):"right"===Eb?(la=`${-n}px`,va=d?oc:`${S}px`):"left"===Eb&&(la=`${cb.floating.width+n}px`,va=d?oc:`${S}px`);return{data:{x:la,y:va}}}}),wH=a=>{const {__scopePopper:d,children:n}=a,[S,fa]=(0,qn.useState)(null);return(0,qn.createElement)(mv,{scope:d,anchor:S,onAnchorChange:fa},n)},GC=ca(25),xH=ig(ca(34)),Wr=(0,GC.forwardRef)((a,d)=>{var n;const {container:S=
null===globalThis||void 0===globalThis?void 0:null===(n=globalThis.document)||void 0===n?void 0:n.body}=a;a=yg(a,["container"]);return S?xH.default.createPortal((0,GC.createElement)(Jl.div,pf({},a,{ref:d})),S):null}),Vq=ca(25),zk=(0,Vq.forwardRef)((a,d)=>(0,Vq.createElement)(Jl.span,pf({},a,{ref:d,style:Ke({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),HC=[" ","Enter","ArrowUp","ArrowDown"],
Iy=[" ","Enter"],[Aw,Fp,yH]=function(a){var d=a+"CollectionProvider";const [n,S]=Ci(d),[fa,la]=n(d,{collectionRef:{current:null},itemMap:new Map}),va=xb=>{const {scope:Eb,children:jc}=xb;xb=on.default.useRef(null);const oc=on.default.useRef(new Map).current;return on.default.createElement(fa,{scope:Eb,itemMap:oc,collectionRef:xb},jc)};Object.assign(va,{displayName:d});const Na=a+"CollectionSlot";d=on.default.forwardRef((xb,Eb)=>{const {scope:jc,children:oc}=xb;xb=la(Na,jc);Eb=$h(Eb,xb.collectionRef);
return on.default.createElement(lq,{ref:Eb},oc)});Object.assign(d,{displayName:Na});const cb=a+"CollectionItemSlot",qb=on.default.forwardRef((xb,Eb)=>{const {scope:jc,children:oc}=xb,hc=yg(xb,["scope","children"]),Rc=on.default.useRef(null);xb=$h(Eb,Rc);const hd=la(cb,jc);on.default.useEffect(()=>{hd.itemMap.set(Rc,Ke({ref:Rc},hc));return()=>void hd.itemMap.delete(Rc)});return on.default.createElement(lq,{["data-radix-collection-item"]:"",ref:xb},oc)});Object.assign(qb,{displayName:cb});return[{Provider:va,
Slot:d,ItemSlot:qb},function(xb){const Eb=la(a+"CollectionConsumer",xb);return on.default.useCallback(()=>{const jc=Eb.collectionRef.current;if(!jc)return[];const oc=Array.from(jc.querySelectorAll("[data-radix-collection-item]"));return Array.from(Eb.itemMap.values()).sort((hc,Rc)=>oc.indexOf(hc.ref.current)-oc.indexOf(Rc.ref.current))},[Eb.collectionRef,Eb.itemMap])},S]}("Select"),[Wq]=Ci("Select",[yH,Sh]),Jy=Sh(),[Bw,Xq]=Wq("Select"),[Ky,Ly]=Wq("Select"),IC=(0,lg.forwardRef)((a,d)=>{const {__scopeSelect:n,
disabled:S=!1}=a;a=yg(a,["__scopeSelect","disabled"]);const fa=Jy(n),la=Xq("SelectTrigger",n),va=la.disabled||S;d=$h(d,la.onTriggerChange);const Na=Fp(n),[cb,qb,xb]=hm(Eb=>{const jc=Na().filter(hc=>!hc.disabled),oc=jc.find(hc=>hc.value===la.value);Eb=Rl(jc,Eb,oc);if(void 0!==Eb)la.onValueChange(Eb.value)});return(0,lg.createElement)(Kl,pf({asChild:!0},fa),(0,lg.createElement)(Jl.button,pf({type:"button",role:"combobox","aria-controls":la.contentId,"aria-expanded":la.open,"aria-required":la.required,
"aria-autocomplete":"none",dir:la.dir,"data-state":la.open?"open":"closed",disabled:va,"data-disabled":va?"":void 0,"data-placeholder":void 0===la.value?"":void 0},a,{ref:d,onClick:Ng(a.onClick,Eb=>{Eb.currentTarget.focus()}),onPointerDown:Ng(a.onPointerDown,Eb=>{const jc=Eb.target;jc.hasPointerCapture(Eb.pointerId)&&jc.releasePointerCapture(Eb.pointerId);0===Eb.button&&!1===Eb.ctrlKey&&(va||(la.onOpenChange(!0),xb()),la.triggerPointerDownPosRef.current={x:Math.round(Eb.pageX),y:Math.round(Eb.pageY)},
Eb.preventDefault())}),onKeyDown:Ng(a.onKeyDown,Eb=>{const jc=""!==cb.current;Eb.ctrlKey||Eb.altKey||Eb.metaKey||1!==Eb.key.length||qb(Eb.key);jc&&" "===Eb.key||!HC.includes(Eb.key)||(va||(la.onOpenChange(!0),xb()),Eb.preventDefault())})})))}),JC=(0,lg.forwardRef)((a,d)=>{const {__scopeSelect:n,children:S,placeholder:fa}=a;a=yg(a,["__scopeSelect","className","style","children","placeholder"]);const la=Xq("SelectValue",n),{onValueNodeHasChildrenChange:va}=la,Na=void 0!==S;d=$h(d,la.onValueNodeChange);
Vm(()=>{va(Na)},[va,Na]);return(0,lg.createElement)(Jl.span,pf({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===la.value&&void 0!==fa?fa:S)}),KC=(0,lg.forwardRef)((a,d)=>{const {children:n}=a;a=yg(a,["__scopeSelect","children"]);return(0,lg.createElement)(Jl.span,pf({"aria-hidden":!0},a,{ref:d}),n||"▼")}),at=(0,lg.forwardRef)((a,d)=>{const n=Xq("SelectContent",a.__scopeSelect),[S,fa]=(0,lg.useState)();Vm(()=>{fa(new DocumentFragment)},[]);return n.open?(0,lg.createElement)(LC,pf({},a,{ref:d})):
S?(0,Tn.createPortal)((0,lg.createElement)(Xr,{scope:a.__scopeSelect},(0,lg.createElement)(Aw.Slot,{scope:a.__scopeSelect},(0,lg.createElement)("div",null,a.children))),S):null}),[Xr,Yq]=Wq("SelectContent"),LC=(0,lg.forwardRef)((a,d)=>{const {__scopeSelect:n,position:S="item-aligned",onCloseAutoFocus:fa,onEscapeKeyDown:la,onPointerDownOutside:va,side:Na,sideOffset:cb,align:qb,alignOffset:xb,arrowPadding:Eb,collisionBoundary:jc,collisionPadding:oc,sticky:hc,hideWhenDetached:Rc,avoidCollisions:hd}=
a;a=yg(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const zc=Xq("SelectContent",n),[$c,Uc]=(0,lg.useState)(null),[td,vd]=(0,lg.useState)(null);d=$h(d,zg=>Uc(zg));const [ae,qe]=(0,lg.useState)(null),[Lf,Qe]=(0,lg.useState)(null),of=Fp(n),[ng,xf]=(0,lg.useState)(!1),cg=(0,lg.useRef)(!1);(0,lg.useEffect)(()=>{if($c)return ly($c)},[$c]);
Eg();const oe=(0,lg.useCallback)(zg=>{const [Wh,...mi]=of().map(fl=>fl.ref.current),[Ij]=mi.slice(-1),el=document.activeElement;for(const fl of zg){if(fl===el)break;null===fl||void 0===fl||fl.scrollIntoView({block:"nearest"});fl===Wh&&td&&(td.scrollTop=0);fl===Ij&&td&&(td.scrollTop=td.scrollHeight);null===fl||void 0===fl||fl.focus();if(document.activeElement!==el)break}},[of,td]),Vd=(0,lg.useCallback)(()=>oe([ae,$c]),[oe,ae,$c]);(0,lg.useEffect)(()=>{ng&&Vd()},[ng,Vd]);const {onOpenChange:he,triggerPointerDownPosRef:Pd}=
zc;(0,lg.useEffect)(()=>{if($c){var zg=0,Wh=0;const mi=el=>{var fl,yq,rr,co;zg=Math.abs(Math.round(el.pageX)-(null!==(fl=null===(yq=Pd.current)||void 0===yq?void 0:yq.x)&&void 0!==fl?fl:0));Wh=Math.abs(Math.round(el.pageY)-(null!==(rr=null===(co=Pd.current)||void 0===co?void 0:co.y)&&void 0!==rr?rr:0))},Ij=el=>{10>=zg&&10>=Wh?el.preventDefault():$c.contains(el.target)||he(!1);document.removeEventListener("pointermove",mi);Pd.current=null};null!==Pd.current&&(document.addEventListener("pointermove",
mi),document.addEventListener("pointerup",Ij,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",mi);document.removeEventListener("pointerup",Ij,{capture:!0})}}},[$c,he,Pd]);(0,lg.useEffect)(()=>{const zg=()=>he(!1);window.addEventListener("blur",zg);window.addEventListener("resize",zg);return()=>{window.removeEventListener("blur",zg);window.removeEventListener("resize",zg)}},[he]);const [ke,yf]=hm(zg=>{const Wh=of().filter(el=>!el.disabled),mi=Wh.find(el=>el.ref.current===
document.activeElement),Ij=Rl(Wh,zg,mi);Ij&&setTimeout(()=>Ij.ref.current.focus())}),Pf=(0,lg.useCallback)((zg,Wh,mi)=>{mi=!cg.current&&!mi;if(void 0!==zc.value&&zc.value===Wh||mi)qe(zg),mi&&(cg.current=!0)},[zc.value]),Lg=(0,lg.useCallback)(()=>null===$c||void 0===$c?void 0:$c.focus(),[$c]),yh=(0,lg.useCallback)((zg,Wh,mi)=>{mi=!cg.current&&!mi;(void 0!==zc.value&&zc.value===Wh||mi)&&Qe(zg)},[zc.value]),Zf="popper"===S?bt:MC,Kh=Zf===bt?{side:Na,sideOffset:cb,align:qb,alignOffset:xb,arrowPadding:Eb,
collisionBoundary:jc,collisionPadding:oc,sticky:hc,hideWhenDetached:Rc,avoidCollisions:hd}:{};return(0,lg.createElement)(Xr,{scope:n,content:$c,viewport:td,onViewportChange:vd,itemRefCallback:Pf,selectedItem:ae,onItemLeave:Lg,itemTextRefCallback:yh,focusSelectedItem:Vd,selectedItemText:Lf,position:S,isPositioned:ng,searchRef:ke},(0,lg.createElement)(nq,{as:lq,allowPinchZoom:!0},(0,lg.createElement)($s,{asChild:!0,trapped:zc.open,onMountAutoFocus:zg=>{zg.preventDefault()},onUnmountAutoFocus:Ng(fa,
zg=>{var Wh;null===(Wh=zc.trigger)||void 0===Wh||Wh.focus({preventScroll:!0});zg.preventDefault()})},(0,lg.createElement)(Un,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:la,onPointerDownOutside:va,onFocusOutside:zg=>zg.preventDefault(),onDismiss:()=>zc.onOpenChange(!1)},(0,lg.createElement)(Zf,pf({role:"listbox",id:zc.contentId,"data-state":zc.open?"open":"closed",dir:zc.dir,onContextMenu:zg=>zg.preventDefault()},a,Kh,{onPlaced:()=>xf(!0),ref:d,style:Ke({display:"flex",flexDirection:"column",
outline:"none"},a.style),onKeyDown:Ng(a.onKeyDown,zg=>{var Wh=zg.ctrlKey||zg.altKey||zg.metaKey;"Tab"===zg.key&&zg.preventDefault();Wh||1!==zg.key.length||yf(zg.key);if(["ArrowUp","ArrowDown","Home","End"].includes(zg.key)){let mi=of().filter(Ij=>!Ij.disabled).map(Ij=>Ij.ref.current);["ArrowUp","End"].includes(zg.key)&&(mi=mi.slice().reverse());["ArrowUp","ArrowDown"].includes(zg.key)&&(Wh=mi.indexOf(zg.target),mi=mi.slice(Wh+1));setTimeout(()=>oe(mi));zg.preventDefault()}})}))))))}),MC=(0,lg.forwardRef)((a,
d)=>{const {__scopeSelect:n,onPlaced:S}=a;a=yg(a,["__scopeSelect","onPlaced"]);const fa=Xq("SelectContent",n);var la=Yq("SelectContent",n);const [va,Na]=(0,lg.useState)(null),[cb,qb]=(0,lg.useState)(null);d=$h(d,td=>qb(td));const xb=Fp(n),Eb=(0,lg.useRef)(!1),jc=(0,lg.useRef)(!0),{viewport:oc,selectedItem:hc,selectedItemText:Rc,focusSelectedItem:hd}=la,zc=(0,lg.useCallback)(()=>{if(fa.trigger&&fa.valueNode&&va&&cb&&oc&&hc&&Rc){var td=fa.trigger.getBoundingClientRect(),vd=cb.getBoundingClientRect(),
ae=fa.valueNode.getBoundingClientRect(),qe=Rc.getBoundingClientRect();"rtl"!==fa.dir?(qe=ae.left-(qe.left-vd.left),ae=td.width+(td.left-qe),vd=to(qe,[10,window.innerWidth-10-Math.max(ae,vd.width)]),va.style.minWidth=ae+"px",va.style.left=vd+"px"):(qe=window.innerWidth-ae.right-(vd.right-qe.right),ae=td.width+(window.innerWidth-td.right-qe),vd=to(qe,[10,window.innerWidth-10-Math.max(ae,vd.width)]),va.style.minWidth=ae+"px",va.style.right=vd+"px");const cg=xb();vd=window.innerHeight-20;var Lf=oc.scrollHeight,
Qe=window.getComputedStyle(cb);ae=parseInt(Qe.borderTopWidth,10);var of=parseInt(Qe.paddingTop,10);qe=parseInt(Qe.borderBottomWidth,10);Qe=parseInt(Qe.paddingBottom,10);var ng=ae+of+Lf+Qe+qe;Lf=Math.min(5*hc.offsetHeight,ng);var xf=window.getComputedStyle(oc);Qe=parseInt(xf.paddingTop,10);xf=parseInt(xf.paddingBottom,10);const oe=td.top+td.height/2-10,Vd=vd-oe;td=hc.offsetHeight/2;of=ae+of+(hc.offsetTop+td);ng-=of;of<=oe?(ae=hc===cg[cg.length-1].ref.current,va.style.bottom="0px",va.style.height=of+
Math.max(Vd,td+(ae?xf:0)+(cb.clientHeight-oc.offsetTop-oc.offsetHeight)+qe)+"px"):(qe=hc===cg[0].ref.current,va.style.top="0px",va.style.height=Math.max(oe,ae+oc.offsetTop+(qe?Qe:0)+td)+ng+"px",oc.scrollTop=of-oe+oc.offsetTop);va.style.margin="10px 0";va.style.minHeight=Lf+"px";va.style.maxHeight=vd+"px";null===S||void 0===S||S();requestAnimationFrame(()=>Eb.current=!0)}},[xb,fa.trigger,fa.valueNode,va,cb,oc,hc,Rc,fa.dir,S]);Vm(()=>zc(),[zc]);const [$c,Uc]=(0,lg.useState)();Vm(()=>{cb&&Uc(window.getComputedStyle(cb).zIndex)},
[cb]);la=(0,lg.useCallback)(td=>{td&&!0===jc.current&&(zc(),null===hd||void 0===hd||hd(),jc.current=!1)},[zc,hd]);return(0,lg.createElement)(gu,{scope:n,contentWrapper:va,shouldExpandOnScrollRef:Eb,onScrollButtonChange:la},(0,lg.createElement)("div",{ref:Na,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$c}},(0,lg.createElement)(Jl.div,pf({},a,{ref:d,style:Ke({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),bt=(0,lg.forwardRef)((a,d)=>{const {__scopeSelect:n,align:S=
"start",collisionPadding:fa=10}=a;a=yg(a,["__scopeSelect","align","collisionPadding"]);const la=Jy(n);return(0,lg.createElement)(fu,pf({},la,a,{ref:d,align:S,collisionPadding:fa,style:ag(Ke({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)",
"--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[gu,ct]=Wq("SelectContent",{}),ov=(0,lg.forwardRef)((a,d)=>{const {__scopeSelect:n}=a;a=yg(a,["__scopeSelect"]);const S=Yq("SelectViewport",n),fa=ct("SelectViewport",n);d=$h(d,S.onViewportChange);const la=(0,lg.useRef)(0);return(0,lg.createElement)(lg.Fragment,null,(0,lg.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,lg.createElement)(Aw.Slot,{scope:n},(0,lg.createElement)(Jl.div,pf({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:Ke({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:Ng(a.onScroll,va=>{va=va.currentTarget;const {contentWrapper:Na,shouldExpandOnScrollRef:cb}=fa;if(null!==cb&&void 0!==cb&&cb.current&&Na){var qb=Math.abs(la.current-va.scrollTop);if(0<qb){var xb=window.innerHeight-20,Eb=parseFloat(Na.style.minHeight);const jc=parseFloat(Na.style.height);Eb=Math.max(Eb,
jc);Eb<xb&&(qb=Eb+qb,xb=Math.min(xb,qb),qb-=xb,Na.style.height=xb+"px","0px"===Na.style.bottom&&(va.scrollTop=0<qb?qb:0,Na.style.justifyContent="flex-end"))}}la.current=va.scrollTop})}))))});Wq("SelectGroup");var [pv,Yr]=Wq("SelectItem"),lp=(0,lg.forwardRef)((a,d)=>{const {__scopeSelect:n,value:S,disabled:fa=!1,textValue:la}=a;a=yg(a,["__scopeSelect","value","disabled","textValue"]);const va=Xq("SelectItem",n),Na=Yq("SelectItem",n),cb=va.value===S,[qb,xb]=(0,lg.useState)(null!==la&&void 0!==la?la:
""),[Eb,jc]=(0,lg.useState)(!1);d=$h(d,Rc=>{var hd;return null===(hd=Na.itemRefCallback)||void 0===hd?void 0:hd.call(Na,Rc,S,fa)});const oc=Ki(),hc=()=>{fa||(va.onValueChange(S),va.onOpenChange(!1))};return(0,lg.createElement)(pv,{scope:n,value:S,disabled:fa,textId:oc,isSelected:cb,onItemTextChange:(0,lg.useCallback)(Rc=>{xb(hd=>{var zc;return hd||(null!==(zc=null===Rc||void 0===Rc?void 0:Rc.textContent)&&void 0!==zc?zc:"").trim()})},[])},(0,lg.createElement)(Aw.ItemSlot,{scope:n,value:S,disabled:fa,
textValue:qb},(0,lg.createElement)(Jl.div,pf({role:"option","aria-labelledby":oc,"data-highlighted":Eb?"":void 0,"aria-selected":cb&&Eb,"data-state":cb?"checked":"unchecked","aria-disabled":fa||void 0,"data-disabled":fa?"":void 0,tabIndex:fa?void 0:-1},a,{ref:d,onFocus:Ng(a.onFocus,()=>jc(!0)),onBlur:Ng(a.onBlur,()=>jc(!1)),onPointerUp:Ng(a.onPointerUp,hc),onPointerMove:Ng(a.onPointerMove,Rc=>{if(fa){var hd;null===(hd=Na.onItemLeave)||void 0===hd||hd.call(Na)}else Rc.currentTarget.focus({preventScroll:!0})}),
onPointerLeave:Ng(a.onPointerLeave,Rc=>{if(Rc.currentTarget===document.activeElement){var hd;null===(hd=Na.onItemLeave)||void 0===hd||hd.call(Na)}}),onKeyDown:Ng(a.onKeyDown,Rc=>{var hd;if(""===(null===(hd=Na.searchRef)||void 0===hd?void 0:hd.current)||" "!==Rc.key)Iy.includes(Rc.key)&&hc()," "===Rc.key&&Rc.preventDefault()})}))))}),NC=(0,lg.forwardRef)((a,d)=>{var {__scopeSelect:n}=a;a=yg(a,["__scopeSelect","className","style"]);const S=Xq("SelectItemText",n),fa=Yq("SelectItemText",n),la=Yr("SelectItemText",
n);n=Ly("SelectItemText",n);const [va,Na]=(0,lg.useState)(null);d=$h(d,jc=>Na(jc),la.onItemTextChange,jc=>{var oc;return null===(oc=fa.itemTextRefCallback)||void 0===oc?void 0:oc.call(fa,jc,la.value,la.disabled)});const cb=null===va||void 0===va?void 0:va.textContent,qb=(0,lg.useMemo)(()=>(0,lg.createElement)("option",{key:la.value,value:la.value,disabled:la.disabled},cb),[la.disabled,la.value,cb]),{onNativeOptionAdd:xb,onNativeOptionRemove:Eb}=n;Vm(()=>{xb(qb);return()=>Eb(qb)},[xb,Eb,qb]);return(0,lg.createElement)(lg.Fragment,
null,(0,lg.createElement)(Jl.span,pf({id:la.textId},a,{ref:d})),la.isSelected&&S.valueNode&&!S.valueNodeHasChildren?(0,Tn.createPortal)(a.children,S.valueNode):null)}),Po=(0,lg.forwardRef)((a,d)=>{const n=Yq("SelectScrollUpButton",a.__scopeSelect),S=ct("SelectScrollUpButton",a.__scopeSelect),[fa,la]=(0,lg.useState)(!1);d=$h(d,S.onScrollButtonChange);Vm(()=>{if(n.viewport&&n.isPositioned){let va=function(){la(0<Na.scrollTop)};const Na=n.viewport;va();Na.addEventListener("scroll",va);return()=>Na.removeEventListener("scroll",
va)}},[n.viewport,n.isPositioned]);return fa?(0,lg.createElement)(qv,pf({},a,{ref:d,onAutoScroll:()=>{const {viewport:va,selectedItem:Na}=n;va&&Na&&(va.scrollTop-=Na.offsetHeight)}})):null}),hu=(0,lg.forwardRef)((a,d)=>{const n=Yq("SelectScrollDownButton",a.__scopeSelect),S=ct("SelectScrollDownButton",a.__scopeSelect),[fa,la]=(0,lg.useState)(!1);d=$h(d,S.onScrollButtonChange);Vm(()=>{if(n.viewport&&n.isPositioned){let va=function(){la(Math.ceil(Na.scrollTop)<Na.scrollHeight-Na.clientHeight)};const Na=
n.viewport;va();Na.addEventListener("scroll",va);return()=>Na.removeEventListener("scroll",va)}},[n.viewport,n.isPositioned]);return fa?(0,lg.createElement)(qv,pf({},a,{ref:d,onAutoScroll:()=>{const {viewport:va,selectedItem:Na}=n;va&&Na&&(va.scrollTop+=Na.offsetHeight)}})):null}),qv=(0,lg.forwardRef)((a,d)=>{const {__scopeSelect:n,onAutoScroll:S}=a;a=yg(a,["__scopeSelect","onAutoScroll"]);const fa=Yq("SelectScrollButton",n),la=(0,lg.useRef)(null),va=Fp(n),Na=(0,lg.useCallback)(()=>{null!==la.current&&
(window.clearInterval(la.current),la.current=null)},[]);(0,lg.useEffect)(()=>()=>Na(),[Na]);Vm(()=>{var cb;const qb=va().find(xb=>xb.ref.current===document.activeElement);null===qb||void 0===qb||null===(cb=qb.ref.current)||void 0===cb||cb.scrollIntoView({block:"nearest"})},[va]);return(0,lg.createElement)(Jl.div,pf({"aria-hidden":!0},a,{ref:d,style:Ke({flexShrink:0},a.style),onPointerMove:Ng(a.onPointerMove,()=>{var cb;null===(cb=fa.onItemLeave)||void 0===cb||cb.call(fa);null===la.current&&(la.current=
window.setInterval(S,50))}),onPointerLeave:Ng(a.onPointerLeave,()=>{Na()})}))}),Zq=(0,lg.forwardRef)((a,d)=>{const {value:n}=a;a=yg(a,["value"]);const S=(0,lg.useRef)(null);d=$h(d,S);const fa=Ln(n);(0,lg.useEffect)(()=>{const la=S.current,va=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(fa!==n&&va){const Na=new Event("change",{bubbles:!0});va.call(la,n);la.dispatchEvent(Na)}},[fa,n]);return(0,lg.createElement)(zk,{asChild:!0},(0,lg.createElement)("select",pf({},
a,{ref:d,defaultValue:n})))});Zq.displayName="BubbleSelect";var OC=a=>{const {__scopeSelect:d,children:n,open:S,defaultOpen:fa,onOpenChange:la,value:va,defaultValue:Na,onValueChange:cb,dir:qb,name:xb,autoComplete:Eb,disabled:jc,required:oc}=a,hc=Jy(d),[Rc,hd]=(0,lg.useState)(null),[zc,$c]=(0,lg.useState)(null),[Uc,td]=(0,lg.useState)(!1),vd=ph(qb),[ae=!1,qe]=pd({prop:S,defaultProp:fa,onChange:la}),[Lf,Qe]=pd({prop:va,defaultProp:Na,onChange:cb}),of=(0,lg.useRef)(null),ng=Rc?!!Rc.closest("form"):!0,
[xf,cg]=(0,lg.useState)(new Set),oe=Array.from(xf).map(Vd=>Vd.props.value).join(";");return(0,lg.createElement)(wH,hc,(0,lg.createElement)(Bw,{required:oc,scope:d,trigger:Rc,onTriggerChange:hd,valueNode:zc,onValueNodeChange:$c,valueNodeHasChildren:Uc,onValueNodeHasChildrenChange:td,contentId:Ki(),value:Lf,onValueChange:Qe,open:ae,onOpenChange:qe,dir:vd,triggerPointerDownPosRef:of,disabled:jc},(0,lg.createElement)(Aw.Provider,{scope:d},(0,lg.createElement)(Ky,{scope:a.__scopeSelect,onNativeOptionAdd:(0,lg.useCallback)(Vd=>
{cg(he=>(new Set(he)).add(Vd))},[]),onNativeOptionRemove:(0,lg.useCallback)(Vd=>{cg(he=>{he=new Set(he);he.delete(Vd);return he})},[])},n)),ng?(0,lg.createElement)(Zq,{key:oe,"aria-hidden":!0,required:oc,tabIndex:-1,name:xb,autoComplete:Eb,value:Lf,onChange:Vd=>Qe(Vd.target.value),disabled:jc},void 0===Lf?(0,lg.createElement)("option",{value:""}):null,Array.from(xf)):null))},QC=IC,RC=JC,Wm=KC,My=a=>(0,lg.createElement)(Wr,pf({asChild:!0},a)),PC=at,oo=ov,ge=lp,SC=NC,Ui=Po,$i=hu,In=ca(612),rv=ig(ca(25)),
Cw=ca(612),Jn=ca(612),zH=Ne(function(){const a=df(),{handlers:{t:d}}=no.useContext(Qj),n=no.useCallback(va=>{a.api.setColor(va)},[]),S=no.useCallback(va=>{(va=va.currentTarget.dataset.tool)&&a.selectTool(va)},[]),[fa,la]=no.useState(()=>{var va;return null!=(va=Object.values(hq).find(Na=>Na===a.selectedTool.id))?va:Object.values(hq)[0]});no.useEffect(()=>{la(va=>{var Na;return null!=(Na=Object.values(hq).find(cb=>cb===a.selectedTool.id))?Na:va})},[a.selectedTool.id]);return(0,Jn.jsx)("div",{className:"tl-primary-tools",
"data-html2canvas-ignore":"true",children:(0,Jn.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,Jn.jsx)(Dp,{handleClick:()=>a.selectTool("select"),tooltip:d("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,Jn.jsx)(Dp,{handleClick:()=>a.selectTool("move"),tooltip:d("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,Jn.jsx)(oq,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,Jn.jsx)(Dp,{handleClick:()=>a.selectTool("logseq-portal"),
tooltip:d("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,Jn.jsx)(Dp,{handleClick:()=>a.selectTool("pencil"),tooltip:d("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,Jn.jsx)(Dp,{handleClick:()=>a.selectTool("highlighter"),tooltip:d("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,Jn.jsx)(Dp,{handleClick:()=>a.selectTool("erase"),tooltip:d("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,Jn.jsx)(Dp,{handleClick:()=>a.selectTool("line"),tooltip:d("whiteboard/connector"),
id:"line",icon:"connector"}),(0,Jn.jsx)(Dp,{handleClick:()=>a.selectTool("text"),tooltip:d("whiteboard/text"),id:"text",icon:"text"}),(0,Jn.jsx)(zy,{activeGeometry:fa,setGeometry:S}),(0,Jn.jsx)(oq,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,Jn.jsx)(en,{popoverSide:"left",color:a.settings.color,setColor:n}),(0,Jn.jsx)($o,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),iu=ca(612),TC=Ne(function(){const a=df();return(0,iu.jsxs)("div",
{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,iu.jsx)("div",{style:{flex:1}}),(0,iu.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),dt=ca(612),$q=Ne(function(){const a=df();return(0,dt.jsxs)(dt.Fragment,{children:[ic()&&(0,dt.jsx)(TC,{}),ic()&&(0,dt.jsx)(Sn,{}),!a.readOnly&&(0,dt.jsx)(zH,{}),(0,dt.jsx)(ty,{})]})}),ju=ig(ca(25)),um=ig(ca(25)),Ny=ig(ca(25)),UC=ig(ca(25)),ar=ca(612),br=({id:a,showReferenceContent:d=
!1})=>{var n;const {handlers:{isWhiteboardPage:S,redirectToPage:fa,sidebarAddBlock:la,queryBlockByUUID:va},renderers:{Breadcrumb:Na,PageName:cb}}=UC.default.useContext(Qj);var qb="";let xb=Vg(a)?"B":"P",Eb="";if(Vg(a)){qb=va(a);if(!qb)return(0,ar.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});Eb=qb.content;qb="whiteboard-shape"===(null==(n=qb.properties)?void 0:n["ls-type"])?"link-to-whiteboard":"link-to-block"}else qb=S(a)?"link-to-whiteboard":"link-to-page";n=Eb&&
23<Eb.length?Eb.slice(0,20)+"...":Eb;return(0,ar.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:jc=>{jc.stopPropagation();jc.shiftKey?la(a,"B"===xb?"block":"page"):fa(a)},children:[(0,ar.jsx)(pi,{name:qb}),(0,ar.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===xb?(0,ar.jsx)(cb,{pageName:a}):(0,ar.jsxs)(ar.Fragment,{children:[(0,ar.jsx)(Na,{levelLimit:1,blockId:a,endSeparator:d}),d&&n]})})]})},Hm=ig(ca(25)),Vn=ca(25),Oy=["children"],
Dw="undefined"!==typeof document?Vn.useLayoutEffect:Vn.useEffect,Th=ig(ca(25)),aj=ca(25),AH=ca(34),et,Im,VC="undefined"!=typeof document?aj.useLayoutEffect:aj.useEffect;!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(Im||={});var WC=((et={})[Im.DEBUG]="debug",et[Im.INFO]="log",et[Im.WARN]="warn",et[Im.ERROR]="error",et),cr=bj(function(){var a=Og(Im.ERROR);return{log:Og(function(d,n,S){var fa;void 0===S&&(S=Im.INFO);S>=(null!=(fa=("undefined"==typeof globalThis?
window:globalThis).VIRTUOSO_LOG_LEVEL)?fa:a(4))&&console[WC[S]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",d,n)}),logLevel:a}},[],{singleton:!0}),Wn=bj(function(){var a=Gh(),d=Gh(),n=Og(0),S=Gh(),fa=Og(0),la=Gh(),va=Gh(),Na=Og(0),cb=Og(0),qb=Og(0),xb=Og(0),Eb=Gh(),jc=Gh(),oc=Og(!1),hc=Og(!1);return Rg(vg(a,hh(function(Rc){return Rc.scrollTop})),d),Rg(vg(a,hh(function(Rc){return Rc.scrollHeight})),va),Rg(d,fa),{scrollContainerState:a,scrollTop:d,viewportHeight:la,
headerHeight:Na,fixedHeaderHeight:cb,fixedFooterHeight:qb,footerHeight:xb,scrollHeight:va,smoothScrollTargetReached:S,react18ConcurrentRendering:hc,scrollTo:Eb,scrollBy:jc,statefulScrollTop:fa,deviation:n,scrollingInProgress:oc}},[],{singleton:!0}),Ej={lvl:0},Py=bj(function(){return{recalcInProgress:Og(!1)}},[],{singleton:!0}),BH={offsetHeight:"height",offsetWidth:"width"},dr=bj(function(a){var d=a[0].log,n=a[1].recalcInProgress;a=Gh();var S=Gh(),fa=mk(S,0),la=Gh(),va=Gh(),Na=Og(0),cb=Og([]),qb=Og(void 0),
xb=Og(void 0),Eb=Og(function($c,Uc){return tj($c,BH[Uc])}),jc=Og(void 0),oc=Og(0),hc={offsetTree:[],sizeTree:Ej,groupOffsetTree:Ej,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},Rc=mk(vg(a,xi(cb,d,oc),Ek(cj,hc),Li()),hc);Rg(vg(cb,gh(function($c){return 0<$c.length}),xi(Rc,oc),hh(function($c){var Uc=$c[0],td=$c[1],vd=$c[2];$c=Uc.reduce(function(ae,qe,Lf){return Ca(ae,qe,Zi(qe,td.offsetTree,vd)||Lf)},Ej);return hi({},td,{groupIndices:Uc,groupOffsetTree:$c})})),Rc);Rg(vg(S,xi(Rc),gh(function($c){return $c[0]<
$c[1].lastIndex}),hh(function($c){var Uc=$c[1];return[{startIndex:$c[0],endIndex:Uc.lastIndex,size:Uc.lastSize}]})),a);Rg(qb,xb);var hd=mk(vg(qb,hh(function($c){return void 0===$c})),!0);Rg(vg(xb,gh(function($c){return void 0!==$c&&Rc(4).sizeTree===Ej}),hh(function($c){return[{startIndex:0,endIndex:0,size:$c}]})),a);hc=hl(vg(a,xi(Rc),Ek(function($c,Uc){Uc=Uc[1];return{changed:Uc!==$c.sizes,sizes:Uc}},{changed:!1,sizes:hc}),hh(function($c){return $c.changed})));li(vg(Na,Ek(function($c,Uc){return{diff:$c.prev-
Uc,prev:Uc}},{diff:0,prev:0}),hh(function($c){return $c.diff})),function($c){0<$c?(n(0,!0),la(0,$c)):0>$c&&va(0,$c)});li(vg(Na,xi(d)),function($c){0>$c[0]&&(0,$c[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:Na},Im.ERROR)});d=hl(la);Rg(vg(la,xi(Rc),hh(function($c){var Uc=$c[0];$c=$c[1];if(0<$c.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Oa($c.sizeTree).reduce(function(td,
vd){var ae=vd.k;vd=vd.v;return{ranges:[].concat(td.ranges,[{startIndex:td.prevIndex,endIndex:ae+Uc-1,size:td.prevSize}]),prevIndex:ae+Uc,prevSize:vd}},{ranges:[],prevIndex:0,prevSize:$c.lastSize}).ranges})),a);var zc=hl(vg(va,xi(Rc,oc),hh(function($c){return Zi(-$c[0],$c[1].offsetTree,$c[2])})));return Rg(vg(va,xi(Rc,oc),hh(function($c){var Uc=$c[0],td=$c[1];$c=$c[2];if(0<td.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var vd=Oa(td.sizeTree).reduce(function(ae,
qe){return Ca(ae,Math.max(0,qe.k+Uc),qe.v)},Ej);return hi({},td,{sizeTree:vd},Dj(td.offsetTree,0,vd,$c))})),Rc),{data:jc,totalCount:S,sizeRanges:a,groupIndices:cb,defaultItemSize:xb,fixedItemSize:qb,unshiftWith:la,shiftWith:va,shiftWithOffset:zc,beforeUnshiftWith:d,firstItemIndex:Na,gap:oc,sizes:Rc,listRefresh:hc,statefulTotalCount:fa,trackItemSizes:hd,itemSize:Eb}},Oj(cr,Py),{singleton:!0}),CH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,sv=bj(function(a){function d(){hd&&
(hd(),hd=null);$c&&($c(),$c=null);zc&&(clearTimeout(zc),zc=null);Na(0,!1)}var n=a[0],S=n.sizes,fa=n.totalCount,la=n.listRefresh;n=n.gap;var va=a[1],Na=va.scrollingInProgress,cb=va.viewportHeight,qb=va.scrollTo,xb=va.smoothScrollTargetReached,Eb=va.headerHeight,jc=va.footerHeight,oc=va.fixedHeaderHeight;va=va.fixedFooterHeight;a=a[2].log;var hc=Gh(),Rc=Og(0),hd=null,zc=null,$c=null;return Rg(vg(hc,xi(S,cb,fa,Rc,Eb,jc,a),xi(n,oc,va),hh(function(Uc){var td=Uc[0],vd=td[0],ae=td[1],qe=td[2],Lf=td[3],Qe=
td[4],of=td[5],ng=td[6],xf=td[7],cg=Uc[1];td=Uc[2];Uc=Uc[3];var oe=dj(vd),Vd=oe.align,he=oe.behavior,Pd=oe.offset;--Lf;oe=mj(oe,ae,Lf);of=Zi(oe,ae.offsetTree,cg)+of;"end"===Vd?(of+=td+da(ae.sizeTree,oe)[1]-qe+Uc,oe===Lf&&(of+=ng)):"center"===Vd?of+=(td+da(ae.sizeTree,oe)[1]-qe+Uc)/2:of-=Qe;Pd&&(of+=Pd);var ke=function(Pf){d();Pf?(xf("retrying to scroll to",{location:vd},Im.DEBUG),hc(0,vd)):xf("list did not change, scroll successful",{},Im.DEBUG)};if(d(),"smooth"===he){var yf=!1;$c=li(la,function(Pf){yf=
yf||Pf});hd=ql(xb,function(){ke(yf)})}else hd=ql(vg(la,function(Pf){var Lg=setTimeout(function(){Pf(!1)},150);return function(yh){yh&&(Pf(!0),clearTimeout(Lg))}}),ke);zc=setTimeout(function(){d()},1200);Na(0,!0);return xf("scrolling from index to",{index:oe,top:of,behavior:he},Im.DEBUG),{top:of,behavior:he}})),qb),{scrollToIndex:hc,topListHeight:Rc}},Oj(dr,Wn,cr),{singleton:!0}),DH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},
tv=bj(function(a){var d=a[0],n=d.scrollContainerState;a=d.scrollTop;var S=d.viewportHeight,fa=d.headerHeight,la=d.footerHeight,va=d.scrollBy;d=Og(!1);var Na=Og(!0),cb=Gh(),qb=Gh(),xb=Og(4),Eb=Og(0),jc=mk(vg(Wp(vg(ui(a),mm(1),On(!0)),vg(ui(a),mm(1),On(!1),hk(100))),Li()),!1),oc=mk(vg(Wp(vg(va,On(!0)),vg(va,On(!1),hk(200))),Li()),!1);Rg(vg(uk(ui(a),ui(Eb)),hh(function(hc){return hc[0]<=hc[1]}),Li()),Na);Rg(vg(Na,hn(50)),qb);S=hl(vg(uk(n,ui(S),ui(fa),ui(la),ui(xb)),Ek(function(hc,Rc){var hd,zc,$c=Rc[0],
Uc=$c.scrollTop;$c=$c.scrollHeight;var td=Rc[1],vd={viewportHeight:td,scrollTop:Uc,scrollHeight:$c};return Uc+td-$c>-Rc[4]?(Uc>hc.state.scrollTop?(hd="SCROLLED_DOWN",zc=hc.state.scrollTop-Uc):(hd="SIZE_DECREASED",zc=hc.state.scrollTop-Uc||hc.scrollTopDelta),{atBottom:!0,state:vd,atBottomBecause:hd,scrollTopDelta:zc}):{atBottom:!1,notAtBottomBecause:vd.scrollHeight>hc.state.scrollHeight?"SIZE_INCREASED":td<hc.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Uc<hc.state.scrollTop?"SCROLLING_UPWARDS":
"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:vd}},DH),Li(function(hc,Rc){return hc&&hc.atBottom===Rc.atBottom})));fa=mk(vg(n,Ek(function(hc,Rc){var hd=Rc.scrollTop,zc=Rc.scrollHeight;Rc=Rc.viewportHeight;return 1.01>Math.abs(hc.scrollHeight-zc)?{scrollTop:hd,scrollHeight:zc,jump:0,changed:!1}:hc.scrollTop!==hd&&1>zc-(hd+Rc)?{scrollHeight:zc,scrollTop:hd,jump:hc.scrollTop-hd,changed:!0}:{scrollHeight:zc,scrollTop:hd,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),gh(function(hc){return hc.changed}),
hh(function(hc){return hc.jump})),0);Rg(vg(S,hh(function(hc){return hc.atBottom})),d);Rg(vg(d,hn(50)),cb);la=Og("down");Rg(vg(n,hh(function(hc){return hc.scrollTop}),Li(),Ek(function(hc,Rc){return oc(4)?{direction:hc.direction,prevScrollTop:Rc}:{direction:Rc<hc.prevScrollTop?"up":"down",prevScrollTop:Rc}},{direction:"down",prevScrollTop:0}),hh(function(hc){return hc.direction})),la);Rg(vg(n,hn(50),On("none")),la);n=Og(0);return Rg(vg(jc,gh(function(hc){return!hc}),On(0)),n),Rg(vg(a,hn(100),xi(jc),
gh(function(hc){return!!hc[1]}),Ek(function(hc,Rc){return[hc[1],Rc[0]]},[0,0]),hh(function(hc){return hc[1]-hc[0]})),n),{isScrolling:jc,isAtTop:Na,isAtBottom:d,atBottomState:S,atTopStateChange:qb,atBottomStateChange:cb,scrollDirection:la,atBottomThreshold:xb,atTopThreshold:Eb,scrollVelocity:n,lastJumpDueToItemResize:fa}},Oj(Wn)),Zr=bj(function(a){var d=a[0].log;a=Og(!1);var n=hl(vg(a,gh(function(S){return S}),Li()));return li(a,function(S){S&&d(4)("props updated",{},Im.DEBUG)}),{propsReady:a,didMount:n}},
Oj(cr),{singleton:!0}),Ew=bj(function(a){var d=a[0],n=d.sizes,S=d.listRefresh;d=d.defaultItemSize;var fa=a[1].scrollTop,la=a[2].scrollToIndex;a=a[3].didMount;var va=Og(!0),Na=Og(0);return Rg(vg(a,xi(Na),gh(function(cb){return!!cb[1]}),On(!1)),va),li(vg(uk(S,a),xi(va,n,d),gh(function(cb){var qb=cb[1],xb=cb[3];return cb[0][1]&&(cb[2].sizeTree!==Ej||void 0!==xb)&&!qb}),xi(Na)),function(cb){var qb=cb[1];setTimeout(function(){ql(fa,function(){va(0,!0)});la(0,qb)})}),{scrolledToInitialItem:va,initialTopMostItemIndex:Na}},
Oj(dr,Wn,sv,Zr),{singleton:!0}),XC=bj(function(a){function d(Rc){cb(0,{index:"LAST",align:"end",behavior:Rc})}function n(Rc){var hd=ql(Na,function(zc){!Rc||zc.atBottom||"SIZE_INCREASED"!==zc.notAtBottomBecause||hc||(Eb(4)("scrolling to bottom due to increased size",{},Im.DEBUG),d("auto"))});setTimeout(hd,100)}var S=a[0],fa=S.totalCount,la=S.listRefresh,va=a[1];S=va.isAtBottom;var Na=va.atBottomState,cb=a[2].scrollToIndex;va=a[3].scrolledToInitialItem;var qb=a[4],xb=qb.propsReady;qb=qb.didMount;var Eb=
a[5].log;a=a[6].scrollingInProgress;var jc=Og(!1),oc=Gh(),hc=null;return li(vg(uk(vg(ui(fa),mm(1)),qb),xi(ui(jc),S,va,a),hh(function(Rc){var hd=Rc[0],zc=hd[0];hd=hd[1]&&Rc[3];var $c="auto";hd&&($c=Rc[1],Rc=Rc[2]||Rc[4],$c="function"==typeof $c?ej($c(Rc)):Rc&&ej($c),hd=hd&&!!$c);return{totalCount:zc,shouldFollow:hd,followOutputBehavior:$c}}),gh(function(Rc){return Rc.shouldFollow})),function(Rc){var hd=Rc.totalCount,zc=Rc.followOutputBehavior;hc&&(hc(),hc=null);hc=ql(la,function(){Eb(4)("following output to ",
{totalCount:hd},Im.DEBUG);d(zc);hc=null})}),li(vg(uk(ui(jc),fa,xb),gh(function(Rc){return Rc[0]&&Rc[2]}),Ek(function(Rc,hd){hd=hd[1];return{refreshed:Rc.value===hd,value:hd}},{refreshed:!1,value:0}),gh(function(Rc){return Rc.refreshed}),xi(jc,fa)),function(Rc){n(!1!==Rc[1])}),li(oc,function(){n(!1!==jc(4))}),li(uk(ui(jc),Na),function(Rc){var hd=Rc[1];Rc[0]&&!hd.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===hd.notAtBottomBecause&&d("auto")}),{followOutput:jc,autoscrollToBottom:oc}},Oj(dr,tv,sv,Ew,Zr,cr,
Wn)),YC=bj(function(a){var d=a[0],n=d.totalCount,S=d.groupIndices;d=d.sizes;var fa=a[1];a=fa.scrollTop;fa=fa.headerHeight;var la=Gh(),va=Gh(),Na=hl(vg(la,hh(hj)));return Rg(vg(Na,hh(function(cb){return cb.totalCount})),n),Rg(vg(Na,hh(function(cb){return cb.groupIndices})),S),Rg(vg(uk(a,d,fa),gh(function(cb){return cb[1].groupOffsetTree!==Ej}),hh(function(cb){return da(cb[1].groupOffsetTree,Math.max(cb[0]-cb[2],0),"v")[0]}),Li(),hh(function(cb){return[cb]})),va),{groupCounts:la,topItemsIndexes:va}},
Oj(dr,Wn)),Qy=bj(function(a){var d=a[0];a=d.scrollTop;var n=d.viewportHeight,S=d.deviation,fa=d.headerHeight,la=d.fixedHeaderHeight;d=Gh();var va=Og(0),Na=Og(0),cb=Og(0);a=mk(vg(uk(ui(a),ui(n),ui(fa),ui(d,ok),ui(cb),ui(va),ui(la),ui(S),ui(Na)),hh(function(qb){var xb=qb[0],Eb=qb[1],jc=qb[2],oc=qb[3],hc=oc[0];oc=oc[1];var Rc=qb[4],hd=qb[6],zc=qb[7],$c=qb[8],Uc=xb-zc;qb=qb[5]+hd;var td=Math.max(jc-Uc,0),vd="none",ae="number"==typeof $c?$c:$c.top||0;$c="number"==typeof $c?$c:$c.bottom||0;return hc-=zc,
oc+=jc+hd,hc+(jc+hd)>xb+qb-ae&&(vd="up"),oc-zc<xb-td+Eb+$c&&(vd="down"),"none"!==vd?[Math.max(Uc-jc-Al(Rc,"top",vd)-ae,0),Uc-td-hd+Eb+Al(Rc,"bottom",vd)+$c]:null}),gh(function(qb){return null!=qb}),Li(ok)),[0,0]);return{listBoundary:d,overscan:cb,topListHeight:va,increaseViewportBy:Na,visibleRange:a}},Oj(Wn),{singleton:!0}),ZC={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},ku=bj(function(a){var d=a[0],n=d.sizes,S=d.totalCount,fa=d.data,
la=d.firstItemIndex,va=d.gap,Na=a[1],cb=a[2],qb=cb.visibleRange;d=cb.listBoundary;cb=cb.topListHeight;var xb=a[3],Eb=xb.scrolledToInitialItem,jc=xb.initialTopMostItemIndex;xb=a[4].topListHeight;var oc=a[5],hc=a[6].didMount,Rc=a[7].recalcInProgress;a=Og([]);var hd=Gh();Rg(Na.topItemsIndexes,a);n=mk(vg(uk(hc,Rc,ui(qb,ok),ui(S),ui(n),ui(jc),Eb,ui(a),ui(la),ui(va),fa),gh(function(zc){return zc[0]&&!zc[1]}),hh(function(zc){var $c=zc[2],Uc=$c[0],td=$c[1];$c=zc[3];var vd=zc[5],ae=zc[6],qe=zc[7],Lf=zc[8],
Qe=zc[9],of=zc[10];zc=zc[4];var ng=zc.sizeTree,xf=zc.offsetTree;if(0===$c||0===Uc&&0===td)return hi({},ZC,{totalCount:$c});if(ng===Ej)return jn(function(yh,Zf,Kh){return Zf.groupOffsetTree!==Ej?(yh=yi(yh,Zf),[{index:da(Zf.groupOffsetTree,yh)[0],size:0,offset:0},{index:yh,size:0,offset:0,data:Kh&&Kh[0]}]):[{index:yh,size:0,offset:0,data:Kh&&Kh[0]}]}("number"==typeof vd?vd:"LAST"===vd.index?$c-1:vd.index,zc,of),[],$c,Qe,zc,Lf);vd=[];if(0<qe.length){var cg,oe=qe[0],Vd=qe[qe.length-1],he=0;for(ng=Sm(Ad(ng,
oe,Vd));!(cg=ng()).done;){var Pd=cg.value;cg=Pd.value;var ke=Math.min(Pd.end,Vd);for(Pd=Math.max(Pd.start,oe);Pd<=ke;Pd++)vd.push({index:Pd,size:cg,offset:he,data:of&&of[Pd]}),he+=cg}}if(!ae)return jn([],vd,$c,Qe,zc,Lf);var yf=0<qe.length?qe[qe.length-1]+1:0,Pf=function(yh,Zf,Kh,zg){return void 0===zg&&(zg=0),0<zg&&(Zf=Math.max(Zf,yh[jf(yh,zg,Oh)].offset)),$d((mi=Kh,el=jf(Wh=yh,Zf,Ij=Bj),fl=jf(Wh,mi,Ij,el),Wh.slice(el,fl+1)),Ch);var Wh,mi,Ij,el,fl}(xf,Uc,td,yf);if(0===Pf.length)return null;var Lg=
$c-1;return jn(Lj([],function(yh){for(var Zf,Kh=Sm(Pf);!(Zf=Kh()).done;){var zg=Zf.value,Wh=zg.value;Zf=Wh.offset;var mi=zg.start,Ij=Wh.size;Wh.offset<Uc&&(Wh=(mi+=Math.floor((Uc-Wh.offset+Qe)/(Ij+Qe)))-zg.start,Zf+=Wh*Ij+Wh*Qe);mi<yf&&(Zf+=(yf-mi)*Ij,mi=yf);for(zg=Math.min(zg.end,Lg);mi<=zg&&!(Zf>=td);mi++)yh.push({index:mi,size:Ij,offset:Zf,data:of&&of[mi]}),Zf+=Ij+Qe}}),vd,$c,Qe,zc,Lf)}),gh(function(zc){return null!==zc}),Li()),ZC);return Rg(vg(fa,gh(function(zc){return void 0!==zc}),hh(function(zc){return zc.length})),
S),Rg(vg(n,hh(function(zc){return zc.topListHeight})),xb),Rg(xb,cb),Rg(vg(n,hh(function(zc){return[zc.top,zc.bottom]})),d),Rg(vg(n,hh(function(zc){return zc.items})),hd),hi({listState:n,topItemsIndexes:a,endReached:hl(vg(n,gh(function(zc){return 0<zc.items.length}),xi(S,fa),gh(function(zc){var $c=zc[0].items;return $c[$c.length-1].originalIndex===zc[1]-1}),hh(function(zc){return[zc[1]-1,zc[2]]}),Li(ok),hh(function(zc){return zc[0]}))),startReached:hl(vg(n,hn(200),gh(function(zc){var $c=zc.items;return 0<
$c.length&&$c[0].originalIndex===zc.topItems.length}),hh(function(zc){return zc.items[0].index}),Li())),rangeChanged:hl(vg(n,gh(function(zc){return 0<zc.items.length}),hh(function(zc){zc=zc.items;for(var $c=0,Uc=zc.length-1;"group"===zc[$c].type&&$c<Uc;)$c++;for(;"group"===zc[Uc].type&&Uc>$c;)Uc--;return{startIndex:zc[$c].index,endIndex:zc[Uc].index}}),Li(il))),itemsRendered:hd},oc)},Oj(dr,YC,Qy,Ew,sv,tv,Zr,Py),{singleton:!0}),er=bj(function(a){var d=a[0],n=d.sizes,S=d.firstItemIndex,fa=d.data;d=
d.gap;var la=a[1].listState;a=a[2].didMount;var va=Og(0);return Rg(vg(a,xi(va),gh(function(Na){return 0!==Na[1]}),xi(n,S,d,fa),hh(function(Na){var cb=Na[0][1],qb=Na[1],xb=Na[2],Eb=Na[3];Na=Na[4];var jc=void 0===Na?[]:Na;Na=0;if(0<qb.groupIndices.length)for(var oc,hc=Sm(qb.groupIndices);!((oc=hc()).done||oc.value-Na>=cb);)Na++;cb+=Na;return jn(Array.from({length:cb}).map(function(Rc,hd){return{index:hd,size:0,offset:0,data:jc[hd]}}),[],cb,Eb,qb,xb)})),la),{initialItemCount:va}},Oj(dr,ku,Zr),{singleton:!0}),
Fw=bj(function(a){a=a[0].scrollVelocity;var d=Og(!1),n=Gh(),S=Og(!1);return Rg(vg(a,xi(S,d,n),gh(function(fa){return!!fa[1]}),hh(function(fa){var la=fa[0],va=fa[1],Na=fa[2];fa=fa[3];var cb=va.enter;if(Na){if((0,va.exit)(la,fa))return!1}else if(cb(la,fa))return!0;return Na}),Li()),d),li(vg(uk(d,a,n),xi(S)),function(fa){var la=fa[0];fa=fa[1];return la[0]&&fa&&fa.change&&fa.change(la[1],la[2])}),{isSeeking:d,scrollSeekConfiguration:S,scrollVelocity:a,scrollSeekRangeChanged:n}},Oj(tv),{singleton:!0}),
Gw=bj(function(a){a=a[0].topItemsIndexes;var d=Og(0);return Rg(vg(d,gh(function(n){return 0<n}),hh(function(n){return Array.from({length:n}).map(function(S,fa){return fa})})),a),{topItemCount:d}},Oj(ku)),lu=bj(function(a){var d=a[0],n=d.footerHeight,S=d.headerHeight,fa=d.fixedHeaderHeight;d=d.fixedFooterHeight;var la=a[1].listState;a=Gh();n=mk(vg(uk(n,d,S,fa,la),hh(function(va){var Na=va[4];return va[0]+va[1]+va[2]+va[3]+Na.offsetBottom+Na.bottom})),0);return Rg(ui(n),a),{totalListHeight:n,totalListHeightChanged:a}},
Oj(Wn,ku),{singleton:!0}),Ry=An(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),$C=bj(function(a){function d(hd){0<hd?(S(0,{top:-hd,behavior:"auto"}),la(0,0)):(la(0,0),S(0,{top:-hd,behavior:"auto"}))}var n=a[0],S=n.scrollBy,fa=n.scrollTop,la=n.deviation,va=n.scrollingInProgress,Na=a[1];n=Na.isScrolling;var cb=Na.isAtBottom,qb=Na.scrollDirection,xb=a[3],Eb=xb.beforeUnshiftWith,jc=xb.shiftWithOffset,oc=xb.sizes;xb=xb.gap;var hc=a[4].log,Rc=a[5].recalcInProgress;
a=hl(vg(a[2].listState,xi(Na.lastJumpDueToItemResize),Ek(function(hd,zc){var $c=hd[1],Uc=zc[0],td=Uc.items,vd=Uc.totalCount;Uc=Uc.bottom+Uc.offsetBottom;var ae=0;return hd[2]===vd&&0<$c.length&&0<td.length&&(0===td[0].originalIndex&&0===$c[0].originalIndex||0!=(ae=Uc-hd[3])&&(ae+=zc[1])),[ae,td,vd,Uc]},[0,[],0,0]),gh(function(hd){return 0!==hd[0]}),xi(fa,qb,va,cb,hc),gh(function(hd){return!hd[3]&&0!==hd[1]&&"up"===hd[2]}),hh(function(hd){var zc=hd[0][0];return(0,hd[5])("Upward scrolling compensation",
{amount:zc},Im.DEBUG),zc})));return li(vg(a,xi(la,n)),function(hd){var zc=hd[0],$c=hd[1];hd[2]&&Ry()?la(0,$c-zc):d(-zc)}),li(vg(uk(mk(n,!1),la,Rc),gh(function(hd){return!hd[0]&&!hd[2]&&0!==hd[1]}),hh(function(hd){return hd[1]}),hn(1)),d),Rg(vg(jc,hh(function(hd){return{top:-hd}})),S),li(vg(Eb,xi(oc,xb),hh(function(hd){var zc=hd[0];return zc*hd[1].lastSize+zc*hd[2]})),function(hd){la(0,hd);requestAnimationFrame(function(){Up(S,{top:hd});requestAnimationFrame(function(){la(0,0);Rc(0,!1)})})}),{deviation:la}},
Oj(Wn,tv,ku,dr,cr,Py)),Sy=bj(function(a){var d=a[0].totalListHeight,n=a[1].didMount,S=a[2].scrollTo;a=Og(0);return li(vg(n,xi(a),gh(function(fa){return 0!==fa[1]}),hh(function(fa){return{top:fa[1]}})),function(fa){ql(vg(d,gh(function(la){return 0!==la})),function(){setTimeout(function(){S(0,fa)})})}),{initialScrollTop:a}},Oj(lu,Zr,Wn),{singleton:!0}),Ty=bj(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var n=Og(!1);return{alignToBottom:n,paddingTopAddition:mk(vg(uk(n,d,a),gh(function(S){return S[0]}),
hh(function(S){return Math.max(0,S[1]-S[2])}),Li()),0)}},Oj(Wn,lu),{singleton:!0}),$r=bj(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var n=Gh(),S=Gh(),fa=Gh(),la=Og(!1),va=Og(void 0);return Rg(vg(uk(n,S),hh(function(Na){var cb=Na[0];return{scrollTop:Math.max(0,cb.scrollTop-Na[1].offsetTop),scrollHeight:cb.scrollHeight,viewportHeight:cb.viewportHeight}})),d),Rg(vg(a,xi(S),hh(function(Na){var cb=Na[0];return hi({},cb,{top:cb.top+Na[1].offsetTop})})),fa),{useWindowScroll:la,customScrollParent:va,
windowScrollContainerState:n,windowViewportRect:S,windowScrollTo:fa}},Oj(Wn)),as=["done","behavior","align"],Uy=bj(function(a){var d=a[0],n=d.sizes,S=d.totalCount;d=d.gap;var fa=a[1],la=fa.scrollTop,va=fa.viewportHeight,Na=fa.headerHeight,cb=fa.fixedHeaderHeight,qb=fa.fixedFooterHeight,xb=fa.scrollingInProgress;a=a[2].scrollToIndex;fa=Gh();return Rg(vg(fa,xi(n,va,S,Na,cb,qb,la),xi(d),hh(function(Eb){var jc=Eb[0],oc=jc[0],hc=jc[1],Rc=jc[2],hd=jc[3],zc=jc[4],$c=jc[5],Uc=jc[6];jc=jc[7];var td=Eb[1];
Eb=oc.done;var vd=oc.behavior,ae=oc.align,qe=Rm(oc,as),Lf=null;oc=mj(oc,hc,hd-1);zc=Zi(oc,hc.offsetTree,td)+zc+$c;return zc<jc+$c?Lf=hi({},qe,{behavior:vd,align:null!=ae?ae:"start"}):zc+da(hc.sizeTree,oc)[1]>jc+Rc-Uc&&(Lf=hi({},qe,{behavior:vd,align:null!=ae?ae:"end"})),Lf?Eb&&ql(vg(xb,mm(1),gh(function(Qe){return!1===Qe})),Eb):Eb&&Eb(),Lf}),gh(function(Eb){return null!==Eb})),a),{scrollIntoView:fa}},Oj(dr,Wn,sv,ku,cr),{singleton:!0}),aD=["listState","topItemsIndexes"],uv=bj(function(a){return hi({},
a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},Oj(Qy,er,Zr,Fw,lu,Sy,Ty,$r,Uy)),bD=bj(function(a){var d=a[0],n=d.totalCount,S=d.sizeRanges,fa=d.fixedItemSize,la=d.defaultItemSize,va=d.trackItemSizes,Na=d.itemSize,cb=d.data,qb=d.firstItemIndex,xb=d.groupIndices,Eb=d.statefulTotalCount;d=d.gap;var jc=a[1],oc=jc.initialTopMostItemIndex;jc=jc.scrolledToInitialItem;var hc=a[2],Rc=a[3],hd=a[4],zc=hd.listState,$c=hd.topItemsIndexes;hd=Rm(hd,aD);var Uc=a[5].scrollToIndex,td=a[7].topItemCount,vd=a[8].groupCounts,
ae=a[9];a=a[10];return Rg(hd.rangeChanged,ae.scrollSeekRangeChanged),Rg(vg(ae.windowViewportRect,hh(function(qe){return qe.visibleHeight})),hc.viewportHeight),hi({totalCount:n,data:cb,firstItemIndex:qb,sizeRanges:S,initialTopMostItemIndex:oc,scrolledToInitialItem:jc,topItemsIndexes:$c,topItemCount:td,groupCounts:vd,fixedItemHeight:fa,defaultItemHeight:la,gap:d},Rc,{statefulTotalCount:Eb,listState:zc,scrollToIndex:Uc,trackItemSizes:va,itemSize:Na,groupIndices:xb},hd,ae,hc,a)},Oj(dr,Ew,Wn,XC,ku,sv,
$C,Gw,YC,uv,cr)),Vy=An(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),Qo=Th.createContext(void 0),Wy=Th.createContext(void 0),Xy=["placeholder"],cD=["style","children"],dD=["style","children"],Hw=bj(function(){var a=Og(function(cb){return"Item "+cb}),d=Og(null),n=Og(function(cb){return"Group "+cb}),S=Og({}),fa=Og(Yp),la=Og("div"),va=Og(lj),Na=function(cb,
qb){return void 0===qb&&(qb=null),mk(vg(S,hh(function(xb){return xb[cb]}),Li()),qb)};return{context:d,itemContent:a,groupContent:n,components:S,computeItemKey:fa,headerFooterTag:la,scrollerRef:va,FooterComponent:Na("Footer"),HeaderComponent:Na("Header"),TopItemListComponent:Na("TopItemList"),ListComponent:Na("List","div"),ItemComponent:Na("Item","div"),GroupComponent:Na("Group","div"),ScrollerComponent:Na("Scroller","div"),EmptyPlaceholder:Na("EmptyPlaceholder"),ScrollSeekPlaceholder:Na("ScrollSeekPlaceholder")}}),
eD=bj(function(a){function d(fa,la,va){Rg(vg(fa,xi(S.components),hh(function(Na){var cb,qb=Na[0];Na=Na[1];return console.warn("react-virtuoso: "+va+" property is deprecated. Pass components."+la+" instead."),hi({},Na,((cb={})[la]=qb,cb))})),S.components)}var n=a[0],S=a[1];a={item:jl(S.itemContent,"Rename the %citem%c prop to %citemContent."),group:jl(S.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:jl(n.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:jl(n.fixedItemHeight,
"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:jl(n.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Gh(),maxHeightCacheSize:Gh(),footer:Gh(),header:Gh(),HeaderContainer:Gh(),FooterContainer:Gh(),ItemContainer:Gh(),ScrollContainer:Gh(),GroupContainer:Gh(),ListContainer:Gh(),emptyComponent:Gh(),scrollSeek:Gh()};return li(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.",
"color: red;","color: inherit;","color: blue;")}),li(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),li(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),li(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),
li(a.scrollSeek,function(fa){var la=fa.placeholder;fa=Rm(fa,Xy);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=hi({},(0,S.components)(4),{ScrollSeekPlaceholder:la});(0,S.components)(0,la);(0,n.scrollSeekConfiguration)(0,fa)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,
"Scroller","ScrollContainer"),d(a.emptyComponent,"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),hi({},n,S,a)},Oj(bD,Hw)),Xn=function(a){return Th.createElement("div",{style:{height:a.height}})},EH={position:Vy(),zIndex:1,overflowAnchor:"none"},vv={overflowAnchor:"none"},fD=Th.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=Eh("listState"),n=Xl("sizeRanges"),S=Eh("useWindowScroll"),fa=Eh("customScrollParent"),la=Xl("windowScrollContainerState"),va=Xl("scrollContainerState");
S=fa||S?la:va;var Na=Eh("itemContent"),cb=Eh("context"),qb=Eh("groupContent");la=Eh("trackItemSizes");va=Eh("itemSize");var xb=Eh("log"),Eb=Xl("gap");n=Aj(n,va,la,a?lj:S,xb,Eb,fa).callbackRef;fa=Th.useState(0);var jc=fa[0],oc=fa[1];sq("deviation",function(td){jc!==td&&oc(td)});fa=Eh("EmptyPlaceholder");var hc=Eh("ScrollSeekPlaceholder")||Xn;S=Eh("ListComponent");var Rc=Eh("ItemComponent"),hd=Eh("GroupComponent"),zc=Eh("computeItemKey"),$c=Eh("isSeeking"),Uc=0<Eh("groupIndices").length;la=Eh("paddingTopAddition");
la=a?{}:{boxSizing:"border-box",paddingTop:d.offsetTop+la,paddingBottom:d.offsetBottom,marginTop:jc};return!a&&0===d.totalCount&&fa?(0,aj.createElement)(fa,wk(fa,cb)):(0,aj.createElement)(S,hi({},wk(S,cb),{ref:n,style:la,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function(td){var vd=td.originalIndex,ae=zc(vd+d.firstItemIndex,td.data,cb);return $c?(0,aj.createElement)(hc,hi({},wk(hc,cb),{key:ae,index:td.index,height:td.size,type:td.type||"item"},"group"===
td.type?{}:{groupIndex:td.groupIndex})):"group"===td.type?(0,aj.createElement)(hd,hi({},wk(hd,cb),{key:ae,"data-index":vd,"data-known-size":td.size,"data-item-index":td.index,style:EH}),qb(td.index)):(0,aj.createElement)(Rc,hi({},wk(Rc,cb),{key:ae,"data-index":vd,"data-known-size":td.size,"data-item-index":td.index,"data-item-group-index":td.groupIndex,style:vv}),Uc?Na(td.index,td.groupIndex,td.data,cb):Na(td.index,td.data,cb))}))}),FH={height:"100%",outline:"none",overflowY:"auto",position:"relative",
WebkitOverflowScrolling:"touch"},ft={width:"100%",height:"100%",position:"absolute",top:0},Iw={width:"100%",position:Vy(),top:0},Jw=Th.memo(function(){var a=Eh("HeaderComponent"),d=Xl("headerHeight"),n=Eh("headerFooterTag"),S=ik(function(la){return d(tj(la,"height"))}),fa=Eh("context");return a?(0,aj.createElement)(n,{ref:S},(0,aj.createElement)(a,wk(a,fa))):null}),GH=Th.memo(function(){var a=Eh("FooterComponent"),d=Xl("footerHeight"),n=Eh("headerFooterTag"),S=ik(function(la){return d(tj(la,"height"))}),
fa=Eh("context");return a?(0,aj.createElement)(n,{ref:S},(0,aj.createElement)(a,wk(a,fa))):null}),gD=function(a){a=a.children;var d=(0,aj.useContext)(Qo),n=Xl("viewportHeight"),S=Xl("fixedItemHeight"),fa=ik(fn(n,function(la){return tj(la,"height")}));return Th.useEffect(function(){d&&(n(d.viewportHeight),S(d.itemHeight))},[d,n,S]),Th.createElement("div",{style:ft,ref:fa,"data-viewport-type":"element"},a)},hD=function(a){a=a.children;var d=(0,aj.useContext)(Qo),n=Xl("windowViewportRect"),S=Xl("fixedItemHeight"),
fa=Eh("customScrollParent");fa=si(n,fa);return Th.useEffect(function(){d&&(S(d.itemHeight),n({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,n,S]),Th.createElement("div",{ref:fa,style:ft,"data-viewport-type":"window"},a)},iD=function(a){a=a.children;var d=Eh("TopItemListComponent"),n=Eh("headerHeight");n=hi({},Iw,{marginTop:n+"px"});var S=Eh("context");return(0,aj.createElement)(d||"div",{style:n,context:S},a)},mu=vk(eD,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Th.memo(function(a){var d=Eh("useWindowScroll"),n=0<Eh("topItemsIndexes").length,S=Eh("customScrollParent"),fa=S||d?hD:gD;return Th.createElement(S||d?Kw:wv,hi({},a),Th.createElement(fa,null,Th.createElement(Jw,null),Th.createElement(fD,null),Th.createElement(GH,
null)),n&&Th.createElement(iD,null,Th.createElement(fD,{showTopList:!0})))})),Yy=mu.Component,Xl=mu.usePublisher,Eh=mu.useEmitterValue,sq=mu.useEmitter,wv=Fo({usePublisher:Xl,useEmitterValue:Eh,useEmitter:sq}),Kw=Zp({usePublisher:Xl,useEmitterValue:Eh,useEmitter:sq}),Yn={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},jD={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Lw=Math.round,Zy=Math.ceil,Mw=Math.floor,Sj=Math.min,Gp=Math.max,
xv=bj(function(a){var d=a[0],n=d.overscan,S=d.visibleRange,fa=d.listBoundary,la=a[1];d=la.scrollTop;var va=la.viewportHeight,Na=la.scrollBy,cb=la.scrollTo,qb=la.smoothScrollTargetReached,xb=la.scrollContainerState,Eb=la.footerHeight;la=la.headerHeight;var jc=a[2],oc=a[3],hc=a[4],Rc=hc.propsReady,hd=hc.didMount,zc=a[5];hc=zc.windowViewportRect;var $c=zc.windowScrollTo,Uc=zc.useWindowScroll,td=zc.customScrollParent;zc=zc.windowScrollContainerState;a=a[6];var vd=Og(0),ae=Og(0),qe=Og(Yn),Lf=Og({height:0,
width:0}),Qe=Og({height:0,width:0}),of=Gh(),ng=Gh(),xf=Og(0),cg=Og(void 0),oe=Og({row:0,column:0});Rg(vg(uk(hd,ae,cg),gh(function(Vd){return 0!==Vd[1]}),hh(function(Vd){return{items:$p(0,Vd[1]-1,Vd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),qe);Rg(vg(uk(ui(vd),S,ui(oe,Pn),ui(Qe,function(Vd,he){return Vd&&Vd.width===he.width&&Vd.height===he.height}),cg),xi(Lf),hh(function(Vd){var he=Vd[0],Pd=he[0],ke=he[1],yf=ke[0],Pf=ke[1],Lg=he[2],yh=he[3],Zf=he[4],Kh=Vd[1];Vd=Lg.row;
var zg=Lg.column;he=yh.height;ke=yh.width;var Wh=Kh.width;if(0===Pd||0===Wh)return Yn;if(0===ke)return hi({},jD,{items:$p(0,0,Zf)});zg=Gp(1,Mw((Wh+zg)/(ke+zg)));yf=zg*Mw((yf+Vd)/(he+Vd));Pf=zg*Zy((Pf+Vd)/(he+Vd))-1;Pf=Sj(Pd-1,Gp(Pf,zg-1));yf=$p(Sj(Pf,Gp(0,yf)),Pf,Zf);yh=Go(Kh,Lg,yh,yf);Lg=yh.top;yh=yh.bottom;Pd=Zy(Pd/zg);return{items:yf,offsetTop:Lg,offsetBottom:Pd*he+(Pd-1)*Vd-yh,top:Lg,bottom:yh,itemHeight:he,itemWidth:ke}})),qe);Rg(vg(cg,gh(function(Vd){return void 0!==Vd}),hh(function(Vd){return Vd.length})),
vd);Rg(vg(Lf,hh(function(Vd){return Vd.height})),va);Rg(vg(uk(Lf,Qe,qe,oe),hh(function(Vd){Vd=Go(Vd[0],Vd[3],Vd[1],Vd[2].items);return[Vd.top,Vd.bottom]}),Li(ok)),fa);S=hl(vg(ui(qe),gh(function(Vd){return 0<Vd.items.length}),xi(vd),gh(function(Vd){var he=Vd[0].items;return he[he.length-1].index===Vd[1]-1}),hh(function(Vd){return Vd[1]-1}),Li()));fa=hl(vg(ui(qe),gh(function(Vd){Vd=Vd.items;return 0<Vd.length&&0===Vd[0].index}),On(0),Li()));va=hl(vg(ui(qe),gh(function(Vd){return 0<Vd.items.length}),
hh(function(Vd){Vd=Vd.items;return{startIndex:Vd[0].index,endIndex:Vd[Vd.length-1].index}}),Li(il)));Rg(va,oc.scrollSeekRangeChanged);Rg(vg(of,xi(Lf,Qe,vd,oe),hh(function(Vd){var he=Vd[1],Pd=Vd[2],ke=Vd[3],yf=Vd[4],Pf=dj(Vd[0]);Vd=Pf.align;var Lg=Pf.behavior,yh=Pf.offset;Pf=Pf.index;"LAST"===Pf&&(Pf=ke-1);ke=Bl(he,yf,Pd,Gp(0,Pf,Sj(ke-1,Pf)));return"end"===Vd?ke=Lw(ke-he.height+Pd.height):"center"===Vd&&(ke=Lw(ke-he.height/2+Pd.height/2)),yh&&(ke+=yh),{top:ke,behavior:Lg}})),cb);hd=mk(vg(qe,hh(function(Vd){return Vd.offsetBottom+
Vd.bottom})),0);return Rg(vg(hc,hh(function(Vd){return{width:Vd.visibleWidth,height:Vd.visibleHeight}})),Lf),hi({data:cg,totalCount:vd,viewportDimensions:Lf,itemDimensions:Qe,scrollTop:d,scrollHeight:ng,overscan:n,scrollBy:Na,scrollTo:cb,scrollToIndex:of,smoothScrollTargetReached:qb,windowViewportRect:hc,windowScrollTo:$c,useWindowScroll:Uc,customScrollParent:td,windowScrollContainerState:zc,deviation:xf,scrollContainerState:xb,footerHeight:Eb,headerHeight:la,initialItemCount:ae,gap:oe},oc,{gridState:qe,
totalListHeight:hd},jc,{startReached:fa,endReached:S,rangeChanged:va,propsReady:Rc},a)},Oj(Qy,Wn,tv,Fw,Zr,$r,cr)),HH=["placeholder"],Ok=bj(function(){var a=Og(function(qb){return"Item "+qb}),d=Og({}),n=Og(null),S=Og("virtuoso-grid-item"),fa=Og("virtuoso-grid-list"),la=Og(Yp),va=Og("div"),Na=Og(lj),cb=function(qb,xb){return void 0===xb&&(xb=null),mk(vg(d,hh(function(Eb){return Eb[qb]}),Li()),xb)};return{context:n,itemContent:a,components:d,computeItemKey:la,itemClassName:S,listClassName:fa,headerFooterTag:va,
scrollerRef:Na,FooterComponent:cb("Footer"),HeaderComponent:cb("Header"),ListComponent:cb("List","div"),ItemComponent:cb("Item","div"),ScrollerComponent:cb("Scroller","div"),ScrollSeekPlaceholder:cb("ScrollSeekPlaceholder","div")}}),gt=bj(function(a){function d(fa,la,va){Rg(vg(fa,xi(S.components),hh(function(Na){var cb,qb=Na[0];Na=Na[1];return console.warn("react-virtuoso: "+va+" property is deprecated. Pass components."+la+" instead."),hi({},Na,((cb={})[la]=qb,cb))})),S.components)}var n=a[0],S=
a[1];a={item:jl(S.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Gh(),ScrollContainer:Gh(),ListContainer:Gh(),emptyComponent:Gh(),scrollSeek:Gh()};return li(a.scrollSeek,function(fa){var la=fa.placeholder;fa=Rm(fa,HH);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=hi({},(0,S.components)(4),{ScrollSeekPlaceholder:la});(0,S.components)(0,la);(0,n.scrollSeekConfiguration)(0,
fa)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),hi({},n,S,a)},Oj(xv,Ok)),kD=Th.memo(function(){var a=ll("gridState"),d=ll("listClassName"),n=ll("itemClassName"),S=ll("itemContent"),fa=ll("computeItemKey"),la=ll("isSeeking"),va=Zn("scrollHeight"),Na=ll("ItemComponent"),cb=ll("ListComponent"),qb=ll("ScrollSeekPlaceholder"),xb=ll("context"),Eb=Zn("itemDimensions"),jc=Zn("gap"),oc=ll("log"),hc=ik(function(Rc){va(Rc.parentElement.parentElement.scrollHeight);
var hd=Rc.firstChild;hd&&Eb(hd.getBoundingClientRect());jc({row:Bm("row-gap",getComputedStyle(Rc).rowGap,oc),column:Bm("column-gap",getComputedStyle(Rc).columnGap,oc)})});return(0,aj.createElement)(cb,hi({ref:hc,className:d},wk(cb,xb),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(Rc){var hd=fa(Rc.index,Rc.data,xb);return la?(0,aj.createElement)(qb,hi({key:hd},wk(qb,xb),{index:Rc.index,height:a.itemHeight,width:a.itemWidth})):(0,aj.createElement)(Na,hi({},wk(Na,
xb),{className:n,"data-index":Rc.index,key:hd}),S(Rc.index,Rc.data,xb))}))}),lD=Th.memo(function(){var a=ll("HeaderComponent"),d=Zn("headerHeight"),n=ll("headerFooterTag"),S=ik(function(la){return d(tj(la,"height"))}),fa=ll("context");return a?(0,aj.createElement)(n,{ref:S},(0,aj.createElement)(a,wk(a,fa))):null}),Zh=Th.memo(function(){var a=ll("FooterComponent"),d=Zn("footerHeight"),n=ll("headerFooterTag"),S=ik(function(la){return d(tj(la,"height"))}),fa=ll("context");return a?(0,aj.createElement)(n,
{ref:S},(0,aj.createElement)(a,wk(a,fa))):null}),Nw=function(a){a=a.children;var d=(0,aj.useContext)(Wy),n=Zn("itemDimensions"),S=Zn("viewportDimensions"),fa=ik(function(la){S(la.getBoundingClientRect())});return Th.useEffect(function(){d&&(S({height:d.viewportHeight,width:d.viewportWidth}),n({height:d.itemHeight,width:d.itemWidth}))},[d,S,n]),Th.createElement("div",{style:ft,ref:fa},a)},mp=function(a){a=a.children;var d=(0,aj.useContext)(Wy),n=Zn("windowViewportRect"),S=Zn("itemDimensions"),fa=ll("customScrollParent");
fa=si(n,fa);return Th.useEffect(function(){d&&(S({height:d.itemHeight,width:d.itemWidth}),n({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,n,S]),Th.createElement("div",{ref:fa,style:ft},a)},fr=vk(gt,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},Th.memo(function(a){a=hi({},a);var d=ll("useWindowScroll"),n=ll("customScrollParent"),S=n||d?mp:Nw;return Th.createElement(n||d?Ow:nu,hi({},a),Th.createElement(S,null,Th.createElement(lD,null),Th.createElement(kD,null),Th.createElement(Zh,null)))})),Zn=fr.usePublisher,ll=fr.useEmitterValue,$y=fr.useEmitter,nu=Fo({usePublisher:Zn,useEmitterValue:ll,useEmitter:$y}),Ow=Zp({usePublisher:Zn,useEmitterValue:ll,useEmitter:$y}),ou=bj(function(){var a=Og(function(cb){return Th.createElement("td",
null,"Item $",cb)}),d=Og(null),n=Og(null),S=Og(null),fa=Og({}),la=Og(Yp),va=Og(lj),Na=function(cb,qb){return void 0===qb&&(qb=null),mk(vg(fa,hh(function(xb){return xb[cb]}),Li()),qb)};return{context:d,itemContent:a,fixedHeaderContent:n,fixedFooterContent:S,components:fa,computeItemKey:la,scrollerRef:va,TableComponent:Na("Table","table"),TableHeadComponent:Na("TableHead","thead"),TableFooterComponent:Na("TableFoot","tfoot"),TableBodyComponent:Na("TableBody","tbody"),TableRowComponent:Na("TableRow",
"tr"),ScrollerComponent:Na("Scroller","div"),EmptyPlaceholder:Na("EmptyPlaceholder"),ScrollSeekPlaceholder:Na("ScrollSeekPlaceholder"),FillerRow:Na("FillerRow")}}),mD=bj(function(a){return hi({},a[0],a[1])},Oj(bD,ou)),nD=function(a){return Th.createElement("tr",null,Th.createElement("td",{style:{height:a.height}}))},$n=function(a){return Th.createElement("tr",null,Th.createElement("td",{style:{height:a.height,padding:0,border:0}}))},Pw=Th.memo(function(){var a=kk("listState"),d=np("sizeRanges"),n=
kk("useWindowScroll"),S=kk("customScrollParent"),fa=np("windowScrollContainerState"),la=np("scrollContainerState");n=S||n?fa:la;var va=kk("itemContent");fa=kk("trackItemSizes");S=Aj(d,kk("itemSize"),fa,n,kk("log"),void 0,S);d=S.callbackRef;var Na=S.ref;S=Th.useState(0);var cb=S[0],qb=S[1];cz("deviation",function(zc){cb!==zc&&(Na.current.style.marginTop=zc+"px",qb(zc))});fa=kk("EmptyPlaceholder");var xb=kk("ScrollSeekPlaceholder")||nD;n=kk("FillerRow")||$n;S=kk("TableBodyComponent");var Eb=kk("TableRowComponent"),
jc=kk("computeItemKey"),oc=kk("isSeeking");la=kk("paddingTopAddition");var hc=kk("firstItemIndex"),Rc=kk("statefulTotalCount"),hd=kk("context");if(0===Rc&&fa)return(0,aj.createElement)(fa,wk(fa,hd));fa=a.offsetTop+la+cb;la=a.offsetBottom;fa=0<fa?Th.createElement(n,{height:fa,key:"padding-top"}):null;n=0<la?Th.createElement(n,{height:la,key:"padding-bottom"}):null;a=a.items.map(function(zc){var $c=zc.originalIndex,Uc=jc($c+hc,zc.data,hd);return oc?(0,aj.createElement)(xb,hi({},wk(xb,hd),{key:Uc,index:zc.index,
height:zc.size,type:zc.type||"item"})):(0,aj.createElement)(Eb,hi({},wk(Eb,hd),{key:Uc,"data-index":$c,"data-known-size":zc.size,"data-item-index":zc.index,style:{overflowAnchor:"none"}}),va(zc.index,zc.data,hd))});return(0,aj.createElement)(S,hi({ref:d,"data-test-id":"virtuoso-item-list"},wk(S,hd)),[fa].concat(a,[n]))}),az=function(a){a=a.children;var d=(0,aj.useContext)(Qo),n=np("viewportHeight"),S=np("fixedItemHeight"),fa=ik(fn(n,function(la){return tj(la,"height")}));return Th.useEffect(function(){d&&
(n(d.viewportHeight),S(d.itemHeight))},[d,n,S]),Th.createElement("div",{style:ft,ref:fa,"data-viewport-type":"element"},a)},bz=function(a){a=a.children;var d=(0,aj.useContext)(Qo),n=np("windowViewportRect"),S=np("fixedItemHeight"),fa=kk("customScrollParent");fa=si(n,fa);return Th.useEffect(function(){d&&(S(d.itemHeight),n({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,n,S]),Th.createElement("div",{ref:fa,style:ft,"data-viewport-type":"window"},a)},Qw=vk(mD,{required:{},optional:{context:"context",
followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",
fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},
events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Th.memo(function(a){var d=kk("useWindowScroll"),n=kk("customScrollParent"),S=np("fixedHeaderHeight"),fa=np("fixedFooterHeight"),la=kk("fixedHeaderContent"),va=kk("fixedFooterContent"),Na=kk("context");
S=ik(fn(S,function(Eb){return tj(Eb,"height")}));var cb=ik(fn(fa,function(Eb){return tj(Eb,"height")}));fa=n||d?yv:oD;d=n||d?bz:az;n=kk("TableComponent");var qb=kk("TableHeadComponent"),xb=kk("TableFooterComponent");la=la?Th.createElement(qb,hi({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:S},wk(qb,Na)),la()):null;va=va?Th.createElement(xb,hi({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:cb},wk(xb,Na)),va()):null;return Th.createElement(fa,hi({},a),Th.createElement(d,
null,Th.createElement(n,hi({style:{borderSpacing:0}},wk(n,Na)),[la,Th.createElement(Pw,{key:"TableBody"}),va])))})),np=Qw.usePublisher,kk=Qw.useEmitterValue,cz=Qw.useEmitter,oD=Fo({usePublisher:np,useEmitterValue:kk,useEmitter:cz}),yv=Zp({usePublisher:np,useEmitterValue:kk,useEmitter:cz}),gr=ig(ca(25)),op=function(a){function d(n){n=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+n+" for more information.")||this;if(void 0===
n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}aq(d,a);return d}(Fq(Error)),dz={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",
floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",
lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",
mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",
sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},pD=/^#[a-fA-F0-9]{6}$/,ez=/^#[a-fA-F0-9]{8}$/,Ro=/^#[a-fA-F0-9]{3}$/,zv=/^#[a-fA-F0-9]{4}$/,Yl=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,
Rw=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Av=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,pp=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Tj=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},Bv=Dr(Er,Er.length,[]),hr=
ca(612),qp=ig(ca(25)),po=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const n=a.ownerDocument,S=n.activeElement;S!==a&&a.focus();n.execCommand("insertText",!1,d)||po.insertTextFirefox(a,d);S===n.body?a.blur():S instanceof HTMLElement&&S!==a&&S.focus()}static set(a,d){a.select();po.insert(a,d)}static getSelection(a){const {selectionStart:d,
selectionEnd:n}=a;return a.value.slice(d?d:void 0,n?n:void 0)}static wrapSelection(a,d,n){const {selectionStart:S,selectionEnd:fa}=a,la=po.getSelection(a);po.insert(a,d+la+(null!=n?n:d));a.selectionStart=(S||0)+d.length;a.selectionEnd=(fa||0)+d.length}static replace(a,d,n){let S=0;a.value.replace(d,(...fa)=>{const la=S+fa[fa.length-2],va=fa[0].length;a.selectionStart=la;a.selectionEnd=la+va;fa="string"===typeof n?n:n(...fa);po.insert(a,fa);a.selectionStart=la;S+=fa.length-va;return fa})}static findLineEnd(a,
d){const n=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(n)?d:n+1}static indent(a){var d;const {selectionStart:n,selectionEnd:S,value:fa}=a;var la=fa.slice(n,S);if((la=null==(d=/\n/g.exec(la))?void 0:d.length)&&0<la){d=fa.lastIndexOf("\n",n-1)+1;var va=a.value.slice(d,S-1);la=va.replace(/^|\n/g,"$\x26  ");va=la.length-va.length;a.setSelectionRange(d,S-1);po.insert(a,la);a.setSelectionRange(n+1,S+va)}else po.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:n,value:S}=a;var fa=
S.lastIndexOf("\n",d-1)+1;const la=po.findLineEnd(S,n);var va=a.value.slice(fa,la);const Na=va.replace(/(^|\n)(\t| {1,2})/g,"$1");va=va.length-Na.length;a.setSelectionRange(fa,la);po.insert(a,Na);fa=(fa=/\t| {1,2}/.exec(S.slice(fa,d)))?fa[0].length:0;a.setSelectionRange(d-fa,Math.max(d-fa,n-va))}},Cv=ca(612),pu=a=>a.stopPropagation(),bs=qp.memo(function({font:a,text:d,color:n,fontStyle:S,fontSize:fa,fontWeight:la,offsetX:va=0,offsetY:Na=0,scale:cb=1,isEditing:qb=!1,pointerEvents:xb=!1,onBlur:Eb,onChange:jc}){const oc=
qp.useRef(null),hc=qp.useRef(!1),Rc=qp.useCallback(vd=>{jc(Tt.normalizeText(vd.currentTarget.value))},[jc]),hd=qp.useCallback(vd=>{if("Escape"!==vd.key)if("Tab"===vd.key&&0===d.length)vd.preventDefault();else{if("Meta"!==vd.key&&!vd.metaKey)vd.stopPropagation();else if("z"===vd.key&&vd.metaKey){document.execCommand(vd.shiftKey?"redo":"undo",!1);vd.stopPropagation();vd.preventDefault();return}"Tab"===vd.key&&(vd.preventDefault(),vd.shiftKey?po.unindent(vd.currentTarget):po.indent(vd.currentTarget),
null==jc?void 0:jc(Tt.normalizeText(vd.currentTarget.value)))}},[jc]),zc=qp.useCallback(vd=>{qb&&(vd.currentTarget.setSelectionRange(0,0),null==Eb?void 0:Eb())},[Eb]),$c=qp.useCallback(vd=>{qb&&hc.current&&document.activeElement===vd.currentTarget&&vd.currentTarget.select()},[qb]),Uc=qp.useCallback(vd=>{qb&&vd.stopPropagation()},[qb]);qp.useEffect(()=>{qb&&requestAnimationFrame(()=>{hc.current=!0;const vd=oc.current;vd&&(vd.focus(),vd.select())})},[qb,Eb]);const td=qp.useRef(null);qp.useLayoutEffect(()=>
{const vd=td.current;if(vd){var ae=ah(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:fa,lineHeight:1,fontWeight:la},4);vd.style.transform=`scale(${cb}, ${cb}) translate(${va}px, ${Na}px)`;vd.style.width=ae[0]+1+"px";vd.style.height=ae[1]+1+"px"}},[d,la,fa,Na,va,cb]);return(0,Cv.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Cv.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:td,style:{font:a,fontStyle:S,fontSize:fa,fontWeight:la,color:n,pointerEvents:xb?"all":"none",
userSelect:qb?"text":"none"},children:[qb?(0,Cv.jsx)("textarea",{ref:oc,style:{font:a,color:n,fontStyle:S,fontSize:fa,fontWeight:la},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:n,onFocus:$c,onChange:Rc,onKeyDown:hd,onBlur:zc,onPointerDown:Uc,onContextMenu:pu,onCopy:pu,onPaste:pu,onCut:pu}):
d,"​"]})})}),vm=ca(612),Hp={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},cs=class extends En{constructor(){super(...arguments);Bb(this,"canEdit",!0);Bb(this,"ReactComponent",Ne(({events:a,isErasing:d,isBinding:n,isSelected:S,isEditing:fa,onEditingEnd:la})=>{const {props:{size:[va,Na],stroke:cb,fill:qb,noFill:xb,strokeWidth:Eb,strokeType:jc,borderRadius:oc,opacity:hc,label:Rc,italic:hd,fontWeight:zc,fontSize:$c}}=this;var Uc=Rc||fa?ah(Rc,{fontFamily:"var(--ls-font-family)",fontSize:$c,lineHeight:1,fontWeight:zc},
4):[0,0];const td=Fe.mul(this.props.size,.5);Uc=Math.max(.5,Math.min(1,va/Uc[0],Na/Uc[1]));const vd=this.getBounds(),ae=gr.useMemo(()=>Fe.sub(td,Fe.toFixed([vd.width/2,vd.height/2])),[vd,Uc,td]),qe=gr.useCallback(Lf=>{var Qe;null==(Qe=this.update)?void 0:Qe.call(this,{label:Lf})},[Rc]);return(0,vm.jsxs)("div",ag(Ke({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,vm.jsx)(bs,{font:"20px / 1 var(--ls-font-family)",text:Rc,color:Uf(cb,"text"),offsetX:ae[0],
offsetY:ae[1],fontSize:$c,scale:Uc,isEditing:fa,onChange:qe,onBlur:la,fontStyle:hd?"italic":"normal",fontWeight:zc,pointerEvents:!!Rc}),(0,vm.jsxs)(ip,{opacity:d?.2:hc,children:[n&&(0,vm.jsx)(Js,{mode:"svg",strokeWidth:Eb,size:[va,Na]}),(0,vm.jsx)("rect",{className:S||!xb?"tl-hitarea-fill":"tl-hitarea-stroke",x:Eb/2,y:Eb/2,rx:oc,ry:oc,width:Math.max(.01,va-Eb),height:Math.max(.01,Na-Eb),pointerEvents:"all"}),(0,vm.jsx)("rect",{x:Eb/2,y:Eb/2,rx:oc,ry:oc,width:Math.max(.01,va-Eb),height:Math.max(.01,
Na-Eb),strokeWidth:Eb,stroke:Uf(cb,"stroke"),strokeDasharray:"dashed"===jc?"8 2":void 0,fill:xb?"none":Uf(qb,"background")})]})]}))}));Bb(this,"setScaleLevel",a=>Mi(this,null,function*(){this.update({scaleLevel:a,fontSize:Hp[null!=a?a:"md"],strokeWidth:Hp[null!=a?a:"md"]/10});this.onResetBounds()}));Bb(this,"ReactIndicator",Ne(()=>{const {props:{size:[a,d],borderRadius:n,isLocked:S}}=this;return(0,vm.jsx)("g",{children:(0,vm.jsx)("rect",{width:a,height:d,rx:n,ry:n,fill:"transparent",strokeDasharray:S?
"8 2":void 0})})}));Bb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return kn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};Bb(cs,"id","box");Bb(cs,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,
opacity:1,label:""});Ce([sg],cs.prototype,"scaleLevel",1);Ce([qh],cs.prototype,"setScaleLevel",2);var Sw=ig(ca(25)),So=ca(612),fz={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ir=class extends tx{constructor(){super(...arguments);Bb(this,"canEdit",!0);Bb(this,"ReactComponent",Ne(({isSelected:a,isErasing:d,events:n,isEditing:S,onEditingEnd:fa})=>{const {size:[la,va],stroke:Na,fill:cb,noFill:qb,strokeWidth:xb,strokeType:Eb,opacity:jc,label:oc,italic:hc,fontWeight:Rc,fontSize:hd}=this.props;var zc=oc||S?ah(oc,
{fontFamily:"var(--ls-font-family)",fontSize:hd,lineHeight:1,fontWeight:Rc},4):[0,0];const $c=Fe.mul(this.props.size,.5);zc=Math.max(.5,Math.min(1,la/zc[0],va/zc[1]));const Uc=this.getBounds(),td=Sw.useMemo(()=>Fe.sub($c,Fe.toFixed([Uc.width/2,Uc.height/2])),[Uc,zc,$c]),vd=Sw.useCallback(ae=>{var qe;null==(qe=this.update)?void 0:qe.call(this,{label:ae})},[oc]);return(0,So.jsxs)("div",ag(Ke({},n),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,So.jsx)(bs,
{font:"18px / 1 var(--ls-font-family)",text:oc,color:Uf(Na,"text"),offsetX:td[0],offsetY:td[1],scale:zc,isEditing:S,onChange:vd,onBlur:fa,fontStyle:hc?"italic":"normal",fontSize:hd,fontWeight:Rc,pointerEvents:!!oc}),(0,So.jsxs)(ip,ag(Ke({},n),{opacity:d?.2:jc,children:[(0,So.jsx)("ellipse",{className:a||!qb?"tl-hitarea-fill":"tl-hitarea-stroke",cx:la/2,cy:va/2,rx:Math.max(.01,(la-xb)/2),ry:Math.max(.01,(va-xb)/2)}),(0,So.jsx)("ellipse",{cx:la/2,cy:va/2,rx:Math.max(.01,(la-xb)/2),ry:Math.max(.01,(va-
xb)/2),strokeWidth:xb,stroke:Uf(Na,"stroke"),strokeDasharray:"dashed"===Eb?"8 2":void 0,fill:qb?"none":Uf(cb,"background")})]}))]}))}));Bb(this,"setScaleLevel",a=>Mi(this,null,function*(){this.update({scaleLevel:a,fontSize:fz[null!=a?a:"md"],strokeWidth:fz[null!=a?a:"md"]/10});this.onResetBounds()}));Bb(this,"ReactIndicator",Ne(()=>{const {size:[a,d],isLocked:n}=this.props;return(0,So.jsx)("g",{children:(0,So.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:n?
"8 2":"undefined"})})}));Bb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return kn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,n],stroke:S,fill:fa,noFill:la,strokeWidth:va,strokeType:Na,opacity:cb}=this.props;return(0,So.jsxs)("g",{opacity:cb,children:[(0,So.jsx)("ellipse",{className:la?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:n/2,rx:Math.max(.01,(d-va)/2),ry:Math.max(.01,
(n-va)/2)}),(0,So.jsx)("ellipse",{cx:d/2,cy:n/2,rx:Math.max(.01,(d-va)/2),ry:Math.max(.01,(n-va)/2),strokeWidth:va,stroke:Uf(S,"stroke"),strokeDasharray:"dashed"===Na?"8 2":void 0,fill:la?"none":Uf(fa,"background")})]})}};Bb(ir,"id","ellipse");Bb(ir,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});Ce([sg],ir.prototype,"scaleLevel",1);Ce([qh],ir.prototype,
"setScaleLevel",2);var qu=ca(612),Tw=class extends Xv{constructor(){super(...arguments);Bb(this,"ReactComponent",Ne(({events:a})=>{const d=this.getBounds(),n=df(),S=n.selectedShapesArray.some(la=>n.shapesInGroups([this]).includes(la)),fa=this.ReactIndicator;return(0,qu.jsxs)(ip,ag(Ke({},a),{className:"tl-group-container",children:[(0,qu.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),S&&(0,qu.jsx)("g",{stroke:"var(--color-selectedFill)",
children:(0,qu.jsx)(fa,{})})]}))}));Bb(this,"ReactIndicator",Ne(()=>{const a=this.getBounds();return(0,qu.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};Bb(Tw,"id","group");Bb(Tw,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var ru=ca(612),qD={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Ip=class extends Mt{constructor(a={}){super(a);Bb(this,"ReactComponent",Ne(({events:d,isErasing:n})=>{const {pointsPath:S,
props:{stroke:fa,strokeWidth:la,opacity:va}}=this;return(0,ru.jsx)(ip,ag(Ke({},d),{opacity:n?.2:1,children:(0,ru.jsx)("path",{d:S,strokeWidth:16*la,stroke:Uf(fa,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:va})}))}));Bb(this,"setScaleLevel",d=>Mi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:qD[null!=d?d:"md"]});this.onResetBounds()}));Bb(this,"ReactIndicator",Ne(()=>{const {pointsPath:d,props:n}=this;return(0,ru.jsx)("path",{d,fill:"none",
strokeDasharray:n.isLocked?"8 2":"undefined"})}));Bb(this,"validateProps",d=>{d=kn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});Ic(this)}get pointsPath(){const {points:a}=this.props;return Nu.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:n,opacity:S}}=this;return(0,ru.jsx)("path",{d:a,strokeWidth:16*n,stroke:Uf(d,"stroke"),fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:S})}};Bb(Ip,"id","highlighter");Bb(Ip,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});Ce([sg],Ip.prototype,"pointsPath",1);Ce([sg],Ip.prototype,"scaleLevel",1);Ce([qh],Ip.prototype,"setScaleLevel",2);var eg=ig(ca(25)),Qh=ca(612),su={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},jr=class extends En{constructor(){super(...arguments);
Bb(this,"canChangeAspectRatio",!0);Bb(this,"canFlip",!1);Bb(this,"canEdit",!0);Bb(this,"htmlAnchorRef",eg.createRef());Bb(this,"setScaleLevel",a=>Mi(this,null,function*(){var d;const n=Fe.mul(this.props.size,su[null!=a?a:"md"]/su[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield Jc();this.update({size:n})}));Bb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const n=this.htmlAnchorRef.current.getBoundingClientRect(),[S,fa]=Fe.div([n.width,n.height],null!=(d=
null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(S||400,1400),10),Math.max(Math.min(fa||400,1400),10)]})}return this});Bb(this,"ReactComponent",Ne(({events:a,isErasing:d,isEditing:n})=>{const {props:{html:S,scaleLevel:fa}}=this,la=Cn(),va=df(),Na=va.selectedIds.has(this.id),cb=la||Na&&!n||"select"!==va.selectedTool.id,qb=eg.useCallback(Eb=>{cb||Eb.stopPropagation()},[cb]),xb=su[null!=fa?fa:"md"];eg.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:va.viewport.camera.zoom}),
va.persist(!0))},[]);return(0,Qh.jsx)(Mo,ag(Ke({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Qh.jsx)("div",{onWheelCapture:qb,onPointerDown:qb,onPointerUp:qb,className:"tl-html-container",style:{pointerEvents:la||!n&&!Na?"none":"all",overflow:n?"auto":"hidden",width:`calc(100% / ${xb})`,height:`calc(100% / ${xb})`,transform:`scale(${xb})`},children:(0,Qh.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:S.trim()}})})}))}));
Bb(this,"ReactIndicator",Ne(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,Qh.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}));Bb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return kn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};Bb(jr,"id","html");Bb(jr,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});Ce([sg],
jr.prototype,"scaleLevel",1);Ce([qh],jr.prototype,"setScaleLevel",2);var gz=ig(ca(25)),tu=ca(612),kr=class extends En{constructor(){super(...arguments);Bb(this,"frameRef",gz.createRef());Bb(this,"canEdit",!0);Bb(this,"onIFrameSourceChange",a=>{this.update({url:a})});Bb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});Bb(this,"ReactComponent",Ne(({events:a,isErasing:d,isEditing:n})=>{gz.useRef(null);const S=
df();return(0,tu.jsx)(Mo,ag(Ke({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,tu.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:n||S.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,tu.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,tu.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));
Bb(this,"ReactIndicator",Ne(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,tu.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}))}};Bb(kr,"id","iframe");Bb(kr,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});Ce([qh],kr.prototype,"onIFrameSourceChange",2);Ce([qh],kr.prototype,"reload",2);var rD=ig(ca(25)),ht=ca(612),Cj=class extends ux{constructor(){super(...arguments);Bb(this,"ReactComponent",Ne(({events:a,
isErasing:d,isBinding:n,asset:S})=>{const {props:{opacity:fa,objectFit:la,clipping:va,size:[Na,cb]}}=this,[qb,xb,Eb,jc]=Array.isArray(va)?va:[va,va,va,va],{handlers:oc}=rD.useContext(Qj);return(0,ht.jsxs)(Mo,ag(Ke({},a),{opacity:d?.2:fa,children:[n&&(0,ht.jsx)(Js,{mode:"html",strokeWidth:4,size:[Na,cb]}),(0,ht.jsx)("div",{"data-asset-loaded":!!S,className:"tl-image-shape-container",children:S?(0,ht.jsx)("img",{src:oc?oc.makeAssetUrl(S.src):S.src,draggable:!1,style:{position:"relative",top:-qb,left:-jc,
width:Na+(jc-xb),height:cb+(qb-Eb),objectFit:la}}):"Asset is missing"})]}))}));Bb(this,"ReactIndicator",Ne(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,ht.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,n;const S=this.getBounds(),{assetId:fa,clipping:la}=this.props;if(a=a.find(va=>va.id===fa)){Array.isArray(la);const va=null==(n=null==(d=window.logseq)?void 0:d.api)?void 0:n.make_asset_url;return(0,ht.jsx)("image",
{width:S.width,height:S.height,href:va?va(a.src):a.src})}return super.getShapeSVGJsx({})}};Bb(Cj,"id","image");Bb(Cj,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Uw=ig(ca(25)),sD=ig(ca(25)),uu=ca(612),vu=ca(612),it={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},tD=sD.memo(function({style:a,start:d,end:n,decorationStart:S,decorationEnd:fa,scaleLevel:la}){const va=Fe.dist(d,n);if(2>va)return null;
const {strokeWidth:Na}=a,cb=1+Na*it[null!=la?la:"md"]/10,qb="M"+Fe.toFixed(d)+"L"+Fe.toFixed(n);la=Math.min(va/3,Na*it[null!=la?la:"md"]);S=S?Hq(d,n,la):null;fa=fa?Hq(n,d,la):null;return(0,vu.jsxs)(vu.Fragment,{children:[(0,vu.jsx)("path",{className:"tl-stroke-hitarea",d:qb}),(0,vu.jsx)("path",{d:qb,strokeWidth:cb,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),S&&(0,vu.jsx)(Gq,{left:S.left,middle:d,right:S.right,
stroke:a.stroke,strokeWidth:cb}),fa&&(0,vu.jsx)(Gq,{left:fa.left,middle:n,right:fa.right,stroke:a.stroke,strokeWidth:cb})]})}),Dv=ca(612),Zl=ca(612),uD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},jt=class extends Su{constructor(){super(...arguments);Bb(this,"hideSelection",!0);Bb(this,"canEdit",!0);Bb(this,"ReactComponent",Ne(({events:a,isErasing:d,isEditing:n,onEditingEnd:S})=>{const {stroke:fa,handles:{start:la,end:va},opacity:Na,label:cb,italic:qb,fontWeight:xb,fontSize:Eb,id:jc}=this.props,oc=cb||
n?ah(cb||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:Eb,lineHeight:1,fontWeight:xb},6):[0,0],hc=Fe.med(la.point,va.point);var Rc=Fe.dist(la.point,va.point);Rc=Math.max(.5,Math.min(1,Math.max(Rc/(oc[1]+128),Rc/(oc[0]+128))));const hd=this.getBounds(),zc=Uw.useMemo(()=>Fe.sub(hc,Fe.toFixed([hd.width/2,hd.height/2])),[hd,Rc,hc]),$c=Uw.useCallback(Uc=>{var td;null==(td=this.update)?void 0:td.call(this,{label:Uc})},[cb]);return(0,Zl.jsxs)("div",ag(Ke({},a),{style:{width:"100%",height:"100%",
overflow:"hidden"},className:"tl-line-container",children:[(0,Zl.jsx)(bs,{font:"20px / 1 var(--ls-font-family)",text:cb,fontSize:Eb,color:Uf(fa,"text"),offsetX:zc[0],offsetY:zc[1],scale:Rc,isEditing:n,onChange:$c,onBlur:S,fontStyle:qb?"italic":"normal",fontWeight:xb,pointerEvents:!!cb}),(0,Zl.jsxs)(ip,{opacity:d?.2:Na,id:jc+"_svg",children:[(0,Zl.jsx)(Ls,{id:jc,bounds:hd,labelSize:oc,offset:zc,scale:Rc}),(0,Zl.jsx)("g",{pointerEvents:"none",mask:cb||n?`url(#${jc}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));
Bb(this,"setScaleLevel",a=>Mi(this,null,function*(){this.update({scaleLevel:a,fontSize:uD[null!=a?a:"md"]});this.onResetBounds()}));Bb(this,"ReactIndicator",Ne(({isEditing:a})=>{const {id:d,decorations:n,label:S,strokeWidth:fa,fontSize:la,fontWeight:va,handles:{start:Na,end:cb},isLocked:qb}=this.props,xb=this.getBounds(),Eb=S||a?ah(S,{fontFamily:"var(--ls-font-family)",fontSize:la,lineHeight:1,fontWeight:va},6):[0,0],jc=Fe.med(Na.point,cb.point);var oc=Fe.dist(Na.point,cb.point);oc=Math.max(.5,Math.min(1,
Math.max(oc/(Eb[1]+128),oc/(Eb[0]+128))));const hc=Uw.useMemo(()=>Fe.sub(jc,Fe.toFixed([xb.width/2,xb.height/2])),[xb,oc,jc]);return(0,Zl.jsxs)("g",{children:[(0,Zl.jsx)("path",{mask:S?`url(#${d}_clip)`:"",d:nm({strokeWidth:fa},Na.point,cb.point,null==n?void 0:n.start,null==n?void 0:n.end),strokeDasharray:qb?"8 2":"undefined"}),S&&!a&&(0,Zl.jsx)("rect",{x:xb.width/2-Eb[0]/2*oc+hc[0],y:xb.height/2-Eb[1]/2*oc+hc[1],width:Eb[0]*oc,height:Eb[1]*oc,rx:4*oc,ry:4*oc,fill:"transparent"})]})}));Bb(this,"validateProps",
a=>kn(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,fill:n,strokeWidth:S,strokeType:fa,decorations:la,label:va,scaleLevel:Na,handles:{start:cb,end:qb}}=this.props,xb=Fe.med(cb.point,qb.point);return(0,Zl.jsxs)(Zl.Fragment,{children:[(0,Zl.jsx)(tD,{style:{stroke:Uf(d,"text"),fill:n,strokeWidth:S,strokeType:fa},scaleLevel:Na,start:cb.point,end:qb.point,decorationStart:null==la?void 0:la.start,decorationEnd:null==la?void 0:la.end}),
a&&(0,Zl.jsx)(Zl.Fragment,{children:(0,Zl.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${xb[0]}, ${xb[1]})`,textAnchor:"middle",fill:Uf(d,"text"),stroke:Uf(d,"text"),children:va})})]})}};Bb(jt,"id","line");Bb(jt,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",
strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});Ce([sg],jt.prototype,"scaleLevel",1);Ce([qh],jt.prototype,"setScaleLevel",2);var $l=ig(ca(25)),Yj=ca(612),ao={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Vw=Ne(({type:a,fill:d,opacity:n,children:S})=>{const fa="var(--ls-secondary-background-color)"!==d?Uf(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?Gf(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,Yj.jsxs)("div",
{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,Yj.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:n,background:"P"===a?fa:`linear-gradient(0deg, ${d}, ${fa})`}}),(0,Yj.jsx)("div",{className:"relative",children:S})]})}),Gk=class extends En{constructor(a={}){var d;super(a);Bb(this,"hideRotateHandle",!0);Bb(this,"canChangeAspectRatio",!0);Bb(this,"canFlip",!0);Bb(this,"canEdit",!0);Bb(this,"persist",null);Bb(this,
"initialHeightCalculated",!0);Bb(this,"getInnerHeight",null);Bb(this,"setCollapsed",n=>Mi(this,null,function*(){var S;if("B"===this.props.blockType){if(this.update({compact:n}),this.canResize[1]=!n,!n)this.onResetBounds()}else{const fa=this.props.size[1];this.canResize[1]=!n;this.update({isAutoResizing:!n,collapsed:n,size:[this.props.size[0],n?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:n?fa:this.props.collapsedHeight})}null==(S=this.persist)?void 0:S.call(this)}));Bb(this,
"setScaleLevel",n=>Mi(this,null,function*(){var S;const fa=Fe.mul(this.props.size,ao[null!=n?n:"md"]/ao[null!=(S=this.props.scaleLevel)?S:"md"]);this.update({scaleLevel:n});yield Jc();this.update({size:fa})}));Bb(this,"onResetBounds",n=>{n=this.getAutoResizeHeight();null!==n&&1<Math.abs(n-this.props.size[1])&&(this.update({size:[this.props.size[0],n]}),this.initialHeightCalculated=!0);return this});Bb(this,"onResize",(n,S)=>{var fa;const {bounds:la,rotation:va,scale:[Na,cb]}=S;n=[...this.scale];0>
Na&&(n[0]*=-1);0>cb&&(n[1]*=-1);S=la.height;this.props.isAutoResizing&&(S=null!=(fa=this.getAutoResizeHeight())?fa:S);return this.update({point:[la.minX,la.minY],size:[Math.max(1,la.width),Math.max(1,S)],scale:n,rotation:va})});Bb(this,"PortalComponent",Ne(({})=>{const {props:{pageId:n,fill:S,opacity:fa}}=this,{renderers:la}=$l.useContext(Qj),va=df(),Na=$l.useRef(null),[,cb]=this.useComponentSize(Na,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");
if(null==la||!la.Page)return null;const {Page:qb,Block:xb}=la,[Eb,jc]=$l.useState(!1);$l.useEffect(()=>{var oc,hc;if(this.props.isAutoResizing){const Rc=(null!=(hc=null==(oc=this.getInnerHeight)?void 0:oc.call(this))?hc:cb)+this.getHeaderHeight();cb&&1<Math.abs(Rc-this.props.size[1])&&(this.update({size:[this.props.size[0],Rc]}),Eb&&va.persist(!0))}},[cb,this.props.isAutoResizing]);$l.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();va.persist(!0)})},[this.initialHeightCalculated]);
$l.useEffect(()=>{setTimeout(function(){jc(!0)})},[]);return(0,Yj.jsxs)(Yj.Fragment,{children:[(0,Yj.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>va.viewport.camera.zoom?"optimizeSpeed":"auto",background:S&&"var(--ls-secondary-background-color)"!==S?Gf(S)?`var(--ls-highlight-color-${S})`:S:"var(--ls-secondary-background-color)",opacity:fa}}),(0,Yj.jsx)("div",{ref:Na,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?
"visible":"auto"},children:(Eb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,Yj.jsx)(xb,{blockId:n}):(0,Yj.jsx)(qb,{pageName:n}))})]})}));Bb(this,"ReactComponent",Ne(n=>{var S;const {events:fa,isErasing:la,isEditing:va,isBinding:Na}=n,{props:{opacity:cb,pageId:qb,fill:xb,scaleLevel:Eb,strokeWidth:jc,size:oc}}=this,hc=df(),{renderers:Rc,handlers:hd}=$l.useContext(Qj);this.persist=()=>hc.persist();const zc=Cn(),$c=hc.selectedIds.has(this.id)&&1===hc.selectedIds.size,
Uc=hc.isIn("logseq-portal.creating")&&!qb,td=(zc||$c&&!va||"select"!==hc.selectedTool.id)&&!Uc,vd=$l.useCallback(Vd=>{td||Vd.stopPropagation()},[td]),ae=1===hc.selectedShapesArray.length&&hc.selectedShapesArray.some(Vd=>"logseq-portal"===Vd.type&&Vd.props.id!==this.props.id&&qb&&Vd.props.pageId===qb),qe=ao[null!=Eb?Eb:"md"];$l.useEffect(()=>this.props.collapsed&&va?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):
()=>{},[va,this.props.collapsed]);$l.useEffect(()=>{if(Uc){const Vd=[hc.viewport.bounds.width,hc.viewport.bounds.height],he=hc.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(he[0]>Vd[0]-400||he[1]>Vd[1]-240||1.5<hc.viewport.camera.zoom||.5>hc.viewport.camera.zoom)&&hc.viewport.zoomToBounds(ag(Ke({},this.bounds),{minY:this.bounds.maxY+25}))}},[hc.viewport.bounds.height.toFixed(2)]);const Lf=$l.useCallback(Vd=>{this.initialHeightCalculated=!1;const he=Vg(Vd)?"B":"P";this.update({pageId:Vd,
size:[400,320],blockType:he,compact:"B"===he});hc.selectTool("select");hc.history.resume();hc.history.persist()},[]),Qe=this.PortalComponent;var of=$l.useMemo(()=>{var Vd;if(qb&&"B"===this.props.blockType)return null==(Vd=null==hd?void 0:hd.queryBlockByUUID(qb))?void 0:Vd.content},[null==hd?void 0:hd.queryBlockByUUID,qb]);of="B"===this.props.blockType&&"string"!==typeof of;const ng=(!this.props.collapsed||va)&&!of;if(null==Rc||!Rc.Page)return null;const {Breadcrumb:xf,PageName:cg}=Rc,oe={width:`calc(100% / ${qe})`,
height:`calc(100% / ${qe})`,opacity:la?.2:1};1!==qe&&(oe.transform=`scale(${qe})`);return(0,Yj.jsxs)(Mo,ag(Ke({style:{pointerEvents:"all"}},fa),{children:[Na&&(0,Yj.jsx)(Js,{mode:"html",strokeWidth:jc,size:oc}),(0,Yj.jsx)("div",{"data-inner-events":!td,onWheelCapture:vd,onPointerDown:vd,onPointerUp:vd,style:{width:"100%",height:"100%",pointerEvents:zc||!va&&!$c?"none":"all"},children:Uc?(0,Yj.jsx)(qo,{onChange:Lf,onAddBlock:Vd=>{setTimeout(()=>{var he,Pd,ke;hc.api.editShape(this);null==(ke=null==
(Pd=null==(he=window.logseq)?void 0:he.api)?void 0:Pd.edit_block)?void 0:ke.call(Pd,Vd)})},placeholder:"Create or search your graph..."}):(0,Yj.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":qb,"data-portal-selected":ae,"data-editing":va,style:oe,children:[!this.props.compact&&!of&&(0,Yj.jsx)(Vw,{type:null!=(S=this.props.blockType)?S:"P",fill:xb,opacity:cb,children:"P"===this.props.blockType?(0,Yj.jsx)(cg,{pageName:qb}):(0,Yj.jsx)(xf,{blockId:qb})}),
of&&(0,Yj.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),ng&&(0,Yj.jsx)(Qe,Ke({},n))]})})]}))}));Bb(this,"ReactIndicator",Ne(()=>{const n=this.getBounds();return(0,Yj.jsx)("rect",{width:n.width,height:n.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));Bb(this,"validateProps",n=>{var S;if(void 0!==n.size){const fa=ao[null!=(S=this.props.scaleLevel)?S:"md"];n.size[0]=Math.max(n.size[0],60*fa);n.size[1]=Math.max(n.size[1],40*fa)}return kn(this,
n)});Ic(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [n,S]=$l.useState([0,0]),fa=df();$l.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const la=
d?a.current.querySelector(d):a.current;if(la){const va=()=>{const {width:cb,height:qb}=la.getBoundingClientRect(),xb=Fe.div([cb,qb],fa.viewport.camera.zoom);S(xb);return xb};va();this.getInnerHeight=()=>va()[1];const Na=new ResizeObserver(()=>{va()});Na.observe(la);return()=>{Na.disconnect()}}}return()=>{}},10)},[a,d]);return n}getHeaderHeight(){var a;const d=ao[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+
this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,n;const S=this.getBounds();return(0,Yj.jsxs)(Yj.Fragment,{children:[(0,Yj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Gf(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:Uf(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:S.width,rx:8,ry:8,
height:S.height}),!this.props.compact&&(0,Yj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Uf(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(n=this.props.opacity)?n:.2,x:1,y:1,width:S.width-2,height:38,rx:8,ry:8}),(0,Yj.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${S.width/2}, ${10+S.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",
stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};Bb(Gk,"id","logseq-portal");Bb(Gk,"defaultSearchQuery","");Bb(Gk,"defaultSearchFilter",null);Bb(Gk,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});Ce([sg],Gk.prototype,"collapsed",
1);Ce([qh],Gk.prototype,"setCollapsed",2);Ce([sg],Gk.prototype,"scaleLevel",1);Ce([qh],Gk.prototype,"setScaleLevel",2);var {min:kt,PI:Ev}=Math,lt=Ev+1E-4,To=ca(612),mt={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},hz={easing:a=>Math.sin(a*Math.PI/2),simulatePressure:!0},Ah={easing:a=>a*a,simulatePressure:!1},tq=class extends Mt{constructor(a={}){super(a);Bb(this,"ReactComponent",Ne(({events:d,isErasing:n})=>{const {props:{opacity:S}}=this;return(0,To.jsx)(ip,ag(Ke({},d),{opacity:n?.2:S,children:this.getShapeSVGJsx()}))}));
Bb(this,"setScaleLevel",d=>Mi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:mt[null!=d?d:"md"]});this.onResetBounds()}));Bb(this,"ReactIndicator",Ne(()=>{const {pointsPath:d}=this;return(0,To.jsx)("path",{d,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));Bb(this,"validateProps",d=>{d=kn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});Ic(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=ag(Ke({size:1+1.5*a.strokeWidth,
thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?hz:Ah),{last:a.isComplete}),a=Lk(a.points,d),d=Nu.getSvgPathFromStroke(Kq(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:n,strokeType:S}}=this;return(0,To.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:n/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:Uf(d,"text"),fill:Uf(d,"text"),strokeDasharray:"dashed"===S?"12 4":void 0})}};
Bb(tq,"id","pencil");Bb(tq,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Ce([sg],tq.prototype,"pointsPath",1);Ce([sg],tq.prototype,"scaleLevel",1);Ce([qh],tq.prototype,"setScaleLevel",2);var Ww=ig(ca(25)),Xm=ca(612),lr={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ds=class extends Jr{constructor(){super(...arguments);Bb(this,"canEdit",!0);Bb(this,"ReactComponent",Ne(({events:a,isErasing:d,
isSelected:n,isEditing:S,onEditingEnd:fa})=>{const {offset:[la,va],props:{stroke:Na,fill:cb,noFill:qb,strokeWidth:xb,opacity:Eb,strokeType:jc,label:oc,italic:hc,fontWeight:Rc,fontSize:hd}}=this,zc=this.getVertices(xb/2).join();var $c=oc||S?ah(oc,{fontFamily:"var(--ls-font-family)",fontSize:hd,lineHeight:1,fontWeight:Rc},4):[0,0];const Uc=[this.props.size[0]/2,2*this.props.size[1]/3];$c=Math.max(.5,Math.min(1,this.props.size[0]/(2*$c[0]),this.props.size[1]/(2*$c[1])));const td=this.getBounds(),vd=
Ww.useMemo(()=>Fe.sub(Uc,Fe.toFixed([td.width/2,td.height/2])),[td,$c,Uc]),ae=Ww.useCallback(qe=>{var Lf;null==(Lf=this.update)?void 0:Lf.call(this,{label:qe})},[oc]);return(0,Xm.jsxs)("div",ag(Ke({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Xm.jsx)(bs,{font:"20px / 1 var(--ls-font-family)",text:oc,fontSize:hd,color:Uf(Na,"text"),offsetX:vd[0],offsetY:vd[1]/$c,scale:$c,isEditing:S,onChange:ae,onBlur:fa,fontStyle:hc?"italic":"normal",fontWeight:Rc,pointerEvents:!!oc}),(0,Xm.jsx)(ip,
{opacity:d?.2:Eb,children:(0,Xm.jsxs)("g",{transform:`translate(${la}, ${va})`,children:[(0,Xm.jsx)("polygon",{className:n||!qb?"tl-hitarea-fill":"tl-hitarea-stroke",points:zc}),(0,Xm.jsx)("polygon",{points:zc,stroke:Uf(Na,"stroke"),fill:qb?"none":Uf(cb,"background"),strokeWidth:xb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===jc?"8 2":void 0})]})})]}))}));Bb(this,"setScaleLevel",a=>Mi(this,null,function*(){this.update({scaleLevel:a,fontSize:lr[null!=a?a:"md"],strokeWidth:lr[null!=a?
a:"md"]/10});this.onResetBounds()}));Bb(this,"ReactIndicator",Ne(()=>{const {offset:[a,d],props:{strokeWidth:n,isLocked:S}}=this;return(0,Xm.jsx)("g",{children:(0,Xm.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(n/2).join(),strokeDasharray:S?"8 2":"undefined"})})}));Bb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return kn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,n],props:{stroke:S,
fill:fa,noFill:la,strokeWidth:va,opacity:Na,strokeType:cb}}=this;a=this.getVertices(va/2).join();return(0,Xm.jsxs)("g",{transform:`translate(${d}, ${n})`,opacity:Na,children:[(0,Xm.jsx)("polygon",{className:la?"tl-hitarea-stroke":"tl-hitarea-fill",points:a}),(0,Xm.jsx)("polygon",{points:a,stroke:Uf(S,"stroke"),fill:la?"none":Uf(fa,"background"),strokeWidth:va,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===cb?"8 2":void 0})]})}};Bb(ds,"id","polygon");Bb(ds,"defaultProps",{id:"polygon",
parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});Ce([sg],ds.prototype,"scaleLevel",1);Ce([qh],ds.prototype,"setScaleLevel",2);var wm=ig(ca(25)),mr=ca(612),rp={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Jp=class extends vx{constructor(){super(...arguments);Bb(this,"ReactComponent",Ne(({events:a,isErasing:d,isEditing:n,onEditingEnd:S})=>{const {props:{opacity:fa,
fontFamily:la,fontSize:va,fontWeight:Na,italic:cb,lineHeight:qb,text:xb,stroke:Eb,padding:jc}}=this,oc=wm.useRef(null),hc=wm.useRef(!1),Rc=wm.useRef(null),hd=wm.useCallback(vd=>{const {isSizeLocked:ae}=this.props;vd=Tt.normalizeText(vd.currentTarget.value);ae?this.update({text:vd,size:this.getAutoSizedBoundingBox({text:vd})}):this.update({text:vd})},[]),zc=wm.useCallback(vd=>{if("Escape"!==vd.key)if("Tab"===vd.key&&0===xb.length)vd.preventDefault();else{if("Meta"!==vd.key&&!vd.metaKey)vd.stopPropagation();
else if("z"===vd.key&&vd.metaKey){vd.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);vd.stopPropagation();vd.preventDefault();return}"Tab"===vd.key&&(vd.preventDefault(),vd.shiftKey?po.unindent(vd.currentTarget):po.indent(vd.currentTarget),this.update({text:Tt.normalizeText(vd.currentTarget.value)}))}},[]),$c=wm.useCallback(vd=>{n&&(null==S?void 0:S())},[S]),Uc=wm.useCallback(vd=>{n&&hc.current&&document.activeElement===vd.currentTarget&&vd.currentTarget.select()},[n]),td=
wm.useCallback(vd=>{n&&vd.stopPropagation()},[n]);wm.useEffect(()=>{n&&requestAnimationFrame(()=>{hc.current=!0;const vd=oc.current;vd&&(vd.focus(),vd.select())})},[n,S]);wm.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,mr.jsx)(Mo,ag(Ke({},a),{opacity:d?.2:fa,children:(0,mr.jsx)("div",{ref:Rc,className:"tl-text-shape-wrapper","data-hastext":!!xb,"data-isediting":n,style:{fontFamily:la,fontStyle:cb?"italic":"normal",fontSize:va,fontWeight:Na,
padding:jc,lineHeight:qb,color:Uf(Eb,"text")},children:n?(0,mr.jsx)("textarea",{ref:oc,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:xb,onFocus:Uc,onChange:hd,onKeyDown:zc,onBlur:$c,onPointerDown:td}):(0,mr.jsxs)(mr.Fragment,{children:[xb,"​"]})})}))}));Bb(this,"setScaleLevel",a=>Mi(this,null,function*(){this.update({scaleLevel:a,
fontSize:rp[null!=a?a:"md"]});this.onResetBounds()}));Bb(this,"ReactIndicator",Ne(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:n},bounds:S}=this;return a?null:(0,mr.jsx)("rect",{width:S.width,height:S.height,rx:d,ry:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}));Bb(this,"validateProps",a=>kn(this,a));Bb(this,"getBounds",()=>{const [a,d]=this.props.point,[n,S]=this.props.size;return{minX:a,minY:d,maxX:a+n,maxY:d+S,width:n,height:S}});Bb(this,"onResizeStart",({isSingle:a})=>
{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});Bb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:n=this.props.fontFamily,fontSize:S=this.props.fontSize,fontWeight:fa=this.props.fontWeight,lineHeight:la=this.props.lineHeight,padding:va=
this.props.padding}=a,[Na,cb]=ah(d,{fontFamily:n,fontSize:S,lineHeight:la,fontWeight:fa},va);return[Na,cb]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:d,stroke:n,fontSize:S,fontFamily:fa}}=this;a=this.getBounds();return(0,mr.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,mr.jsx)("div",{style:{color:Uf(n,"text"),fontSize:S,fontFamily:fa,display:"contents"},children:d})})}};
Bb(Jp,"id","text");Bb(Jp,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Ce([sg],Jp.prototype,"scaleLevel",1);Ce([qh],Jp.prototype,"setScaleLevel",2);var Xw=ig(ca(25)),es=ca(612),wu=class extends En{constructor(){super(...arguments);Bb(this,"canFlip",!1);Bb(this,"canEdit",
!0);Bb(this,"canChangeAspectRatio",!1);Bb(this,"ReactComponent",Ne(({events:a,isErasing:d,asset:n,isEditing:S})=>{const {props:{opacity:fa}}=this,la=Cn();var va=df();const Na=va.selectedIds.has(this.id),cb=la||Na&&!S||"select"!==va.selectedTool.id;va=Xw.useCallback(xb=>{cb||xb.stopPropagation()},[cb]);const {handlers:qb}=Xw.useContext(Qj);return(0,es.jsx)(Mo,ag(Ke({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:fa}},a),{children:(0,es.jsx)("div",{onWheelCapture:va,onPointerDown:va,onPointerUp:va,
className:"tl-video-container",style:{pointerEvents:la||!S&&!Na?"none":"all",overflow:S?"auto":"hidden"},children:n&&(0,es.jsx)("video",{controls:!0,src:qb?qb.makeAssetUrl(n.src):n.src})})}))}));Bb(this,"ReactIndicator",Ne(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,es.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}))}};Bb(wu,"id","video");Bb(wu,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",
clipping:0,isAspectRatioLocked:!0});var am=ca(612),Yw=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,Zw=class extends En{constructor(){super(...arguments);Bb(this,"aspectRatio",480/853);Bb(this,"canChangeAspectRatio",!1);Bb(this,"canFlip",!1);Bb(this,"canEdit",!0);Bb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:Zw.defaultProps.size})});Bb(this,"ReactComponent",Ne(({events:a,isErasing:d,isEditing:n})=>{const S=df();return(0,am.jsx)(Mo,
ag(Ke({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,am.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:n||S.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,am.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,am.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",
width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,am.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,am.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,am.jsxs)("g",
{children:[(0,am.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,am.jsx)("g",{children:(0,am.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,am.jsxs)("g",{fill:"#fff",children:[(0,am.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,am.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));Bb(this,"ReactIndicator",Ne(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,am.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}));Bb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return kn(this,a)})}get embedId(){var a,d;const n=this.props.url,
S=n.match(Yw);return null!=(d=null!=(a=null==S?void 0:S[1])?a:n)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,am.jsxs)("g",{children:[(0,am.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,am.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,am.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},nr=Zw;Bb(nr,"id","youtube");Bb(nr,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});Ce([sg],nr.prototype,"embedId",1);Ce([qh],nr.prototype,"onYoutubeLinkChange",2);var nt=ig(ca(25)),Kp=ca(612),iz=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,jz=class extends En{constructor(){super(...arguments);Bb(this,"canFlip",!1);Bb(this,"canEdit",!0);Bb(this,"initialHeightCalculated",
!0);Bb(this,"getInnerHeight",null);Bb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:jz.defaultProps.size})});Bb(this,"ReactComponent",Ne(({events:a,isErasing:d,isEditing:n})=>{const {renderers:{Tweet:S}}=nt.useContext(Qj),fa=df(),la=nt.useRef(null),[,va]=this.useComponentSize(la);nt.useEffect(()=>{var Na,cb;const qb=null!=(cb=null==(Na=this.getInnerHeight)?void 0:Na.call(this))?cb:va;va&&1<Math.abs(qb-this.props.size[1])&&(this.update({size:[this.props.size[0],qb]}),fa.persist(!0))},[va]);
nt.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();fa.persist(!0)})},[this.initialHeightCalculated]);return(0,Kp.jsx)(Mo,ag(Ke({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Kp.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:n||fa.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,Kp.jsx)("div",{ref:la,children:(0,Kp.jsx)(S,{tweetId:this.embedId})}):null})}))}));
Bb(this,"ReactIndicator",Ne(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,Kp.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}));Bb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});Bb(this,"onResize",(a,d)=>{var n;const {bounds:S,rotation:fa,scale:[la,va]}=d;a=[...this.scale];0>la&&(a[0]*=-1);0>va&&(a[1]*=
-1);d=null!=(n=this.getAutoResizeHeight())?n:S.height;return this.update({point:[S.minX,S.minY],size:[Math.max(1,S.width),Math.max(1,d)],scale:a,rotation:fa})});Bb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return kn(this,a)})}get embedId(){var a,d;const n=this.props.url,S=n.match(iz);return null!=(d=null!=(a=null==S?void 0:S[1])?a:n)?d:""}useComponentSize(a,d=""){const [n,S]=nt.useState([0,0]),fa=df();nt.useEffect(()=>
{if(null==a?0:a.current){const la=d?a.current.querySelector(d):a.current;if(la){const va=()=>{const {width:cb,height:qb}=la.getBoundingClientRect(),xb=Fe.div([cb,qb],fa.viewport.camera.zoom);S(xb);return xb};va();this.getInnerHeight=()=>va()[1];const Na=new ResizeObserver(()=>{va()});Na.observe(la);return()=>{Na.disconnect()}}}return()=>{}},[a,d]);return n}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,Kp.jsxs)("g",
{children:[(0,Kp.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,Kp.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Kp.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},ot=jz;Bb(ot,"id","tweet");Bb(ot,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});Ce([sg],ot.prototype,"embedId",1);Ce([qh],ot.prototype,"onTwitterLinkChange",2);var Fv=ig(ca(25)),or=ca(612),pt=class extends En{constructor(){super(...arguments);Bb(this,"frameRef",Fv.createRef());Bb(this,"canChangeAspectRatio",!0);Bb(this,"canFlip",!0);Bb(this,"canEdit",!0);Bb(this,"ReactComponent",
Ne(({events:a,asset:d,isErasing:n,isEditing:S})=>{Fv.useRef(null);const {handlers:fa}=Fv.useContext(Qj);df();const la=Cn();return(0,or.jsx)(Mo,ag(Ke({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:1}},a),{children:d?(0,or.jsx)("embed",{src:fa?fa.inflateAsset(d.src).url:d.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!la&&S?"all":"none"}}):null}))}));Bb(this,"ReactIndicator",Ne(()=>{const {props:{size:[a,
d],isLocked:n}}=this;return(0,or.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}))}};Bb(pt,"id","pdf");Bb(pt,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});ca(612);var rn=[cs,ir,Ip,Cj,wu,jt,tq,ds,Jp,nr,ot,kr,jr,pt,Gk,Tw],qt=class extends Oq{constructor(){super(...arguments);Bb(this,"Shape",cs)}};Bb(qt,"id","box");Bb(qt,"shortcut","whiteboard/rectangle");var sn=class extends Oq{constructor(){super(...arguments);
Bb(this,"Shape",ir)}};Bb(sn,"id","ellipse");Bb(sn,"shortcut","whiteboard/ellipse");var kz=class extends Yv{};Bb(kz,"id","erase");Bb(kz,"shortcut","whiteboard/eraser");var Ym=class extends Tu{constructor(){super(...arguments);Bb(this,"Shape",Ip);Bb(this,"simplify",!0);Bb(this,"simplifyTolerance",.618)}};Bb(Ym,"id","highlighter");Bb(Ym,"shortcut","whiteboard/highlighter");var sp=class extends Zv{constructor(){super(...arguments);Bb(this,"Shape",jt)}};Bb(sp,"id","line");Bb(sp,"shortcut","whiteboard/connector");
var $w=class extends Tu{constructor(){super(...arguments);Bb(this,"Shape",tq);Bb(this,"simplify",!1)}};Bb($w,"id","pencil");Bb($w,"shortcut","whiteboard/pencil");var vD=class extends Oq{constructor(){super(...arguments);Bb(this,"Shape",ds)}};Bb(vD,"id","polygon");var lz=class extends $v{constructor(){super(...arguments);Bb(this,"Shape",Jp)}};Bb(lz,"id","text");Bb(lz,"shortcut","whiteboard/text");var Ll=class extends Oq{constructor(){super(...arguments);Bb(this,"Shape",nr)}};Bb(Ll,"id","youtube");
var pr=class extends uj{constructor(){super(...arguments);Bb(this,"creatingShape");Bb(this,"offset",[0,0]);Bb(this,"onEnter",()=>{this.app.history.pause();$b(()=>{var a=Fe.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(a=Fe.snap(a,8));this.creatingShape=a=new Gk({id:xk(),parentId:this.app.currentPage.id,point:a,size:Gk.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});
Bb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});Bb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};Bb(pr,"id","creating");var Uo=class extends uj{constructor(){super(...arguments);
Bb(this,"cursor","crosshair");Bb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};Bb(Uo,"id","idle");var rt=class extends Kr{constructor(){super(...arguments);Bb(this,"Shape",Gk);Bb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};Bb(rt,"id","logseq-portal");Bb(rt,"shortcut","whiteboard/portal");Bb(rt,"states",[Uo,pr]);Bb(rt,"initial","idle");var Gi=class extends Oq{constructor(){super(...arguments);Bb(this,"Shape",jr)}};Bb(Gi,"id","youtube");var wD=class extends Oq{constructor(){super(...arguments);
Bb(this,"Shape",kr)}};Bb(wD,"id","iframe");var IH=ig(ca(615)),Vo=ca(612),Ni=new Map(rn.map(a=>[a.id,a])),fs=class{constructor(a){Bb(this,"shapes");Bb(this,"pageId");Bb(this,"assets");a&&this.load(a)}load(a){var d;const n=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==n?void 0:n.id;this.assets=a.assets;this.shapes=null==n?void 0:n.shapes.map(S=>{var fa=S.type;if(!fa)throw Error("No shape type provided.");const la=Ni.get(fa);if(!la)throw Error(`Could not find shape class for ${fa}`);
return new la(S)}).filter(S=>"group"!==S.type)}generatePreviewJsx(a,d){var n,S;const fa=[...(null!=(n=this.shapes)?n:[]).map(qb=>qb.getRotatedBounds())];(n=null==a?void 0:a.currentView)&&fa.push(n);let la=kg.getCommonBounds(fa);if(!la)return null;la=kg.expandBounds(la,16);la=d?kg.ensureRatio(la,d):la;const va=qb=>[(qb[0]-la.minX).toFixed(2),(qb[1]-la.minY).toFixed(2)],[Na,cb]=n?va([n.minX,n.minY]):[0,0];return la&&(0,Vo.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":la.minX.toFixed(2),
"data-common-bound-y":la.minY.toFixed(2),"data-common-bound-width":la.width.toFixed(2),"data-common-bound-height":la.height.toFixed(2),viewBox:[0,0,la.width,la.height].join(" "),children:[(0,Vo.jsx)("defs",{children:n&&(0,Vo.jsxs)(Vo.Fragment,{children:[(0,Vo.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Na}, ${cb})`,width:n.width,height:n.height}),(0,Vo.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,Vo.jsx)("rect",{width:la.width,height:la.height,fill:"white"}),(0,Vo.jsx)("use",
{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,Vo.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(S=this.shapes)?void 0:S.map(qb=>{var xb,Eb;const {bounds:jc,props:{rotation:oc}}=qb,[hc,Rc]=va([jc.minX,jc.minY]),hd=+(180*((null!=oc?oc:0)+(null!=(xb=jc.rotation)?xb:0))/Math.PI).toFixed(2),[zc,$c]=[(jc.width/2).toFixed(2),(jc.height/2).toFixed(2)];return(0,Vo.jsx)("g",{transform:[`translate(${hc}, ${Rc})`,`rotate(${hd}, ${zc}, ${$c})`].join(" "),children:qb.getShapeSVGJsx({assets:null!=
(Eb=this.assets)?Eb:[]})},qb.id)})}),(0,Vo.jsx)("rect",{mask:n?`url(#${this.pageId}-camera-mask)`:"",width:la.width,height:la.height,fill:"transparent"}),n&&(0,Vo.jsx)("use",{id:"minimap-camera-rect","data-x":Na,"data-y":cb,"data-width":n.width,"data-height":n.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?IH.default.renderToString(a):""}},uq=ig(ca(25)),Lp=ca(612),xu=uq.forwardRef((a,
d)=>{var {value:n,className:S}=a;a=yg(a,["autoResize","value","className"]);return(0,Lp.jsx)("div",{className:"tl-input"+(S?" "+S:""),children:(0,Lp.jsxs)("div",{className:"tl-input-sizer",children:[(0,Lp.jsx)("div",{className:"tl-input-hidden",children:n}),(0,Lp.jsx)("input",Ke({ref:d,value:n,className:"tl-text-input",type:"text"},a))]})})}),Oi=ca(612),gs=({type:a,active:d})=>(0,Oi.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,Oi.jsx)("i",{className:`tie tie-${({B:"block",P:"page",
WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),xD=(a,d)=>(0,Oi.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((n,S)=>1===S%2?(0,Oi.jsx)("mark",{className:"tl-highlighted",children:n}):n).map((n,S)=>(0,Oi.jsx)(Hm.default.Fragment,{children:n},S))}),yu=(a,d)=>{const {handlers:n}=Hm.default.useContext(Qj),[S,fa]=Hm.default.useState(null),la=ef(a,200);Hm.default.useEffect(()=>{let va=
!1;if(0<la.length){const Na={"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?Na["pages?"]=!1:"P"===d&&(Na["blocks?"]=!1);n.search(la,Na).then(cb=>{va||fa(cb)})}else fa(null);return()=>{va=!0}},[la,null==n?void 0:n.search]);return S},qo=Ne(({className:a,style:d,placeholder:n,onChange:S,onBlur:fa,onAddBlock:la})=>{const [va,Na]=Hm.default.useState(Gk.defaultSearchQuery),[cb,qb]=Hm.default.useState(Gk.defaultSearchFilter),xb=Hm.default.useRef(null),{handlers:Eb,renderers:jc}=Hm.default.useContext(Qj),
oc=Eb.t,hc=Hm.default.useCallback(Qe=>{var of;setTimeout(()=>S(Qe));null==(of=xb.current)?void 0:of.blur();Qe&&(Gk.defaultSearchQuery="",Gk.defaultSearchFilter=null)},[]),Rc=Hm.default.useCallback(Qe=>Mi(void 0,null,function*(){const of=yield null==Eb?void 0:Eb.addNewBlock(Qe);of&&(hc(of),null==la?void 0:la(of));return of}),[la]),hd=Hm.default.useRef(null),[zc,$c]=Hm.default.useState(0),Uc=yu(va,cb),[td,vd]=Hm.default.useState("circle-plus"),[ae,qe]=Hm.default.useState(!1);Hm.default.useEffect(()=>
{setTimeout(()=>{var Qe;null==(Qe=xb.current)?void 0:Qe.focus()})},[cb]);Hm.default.useEffect(()=>{Gk.defaultSearchQuery=va;Gk.defaultSearchFilter=cb},[va,cb]);const Lf=Hm.default.useMemo(()=>{var Qe;const of=[],ng=null==jc?void 0:jc.Breadcrumb;if(!ng||!Eb)return[];la&&of.push({actionIcon:"circle-plus",onChosen:()=>!!Rc(va),element:(0,Oi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Oi.jsx)(gs,{active:!0,type:"BA"}),0<va.length?(0,Oi.jsxs)(Oi.Fragment,{children:[(0,Oi.jsx)("strong",
{children:oc("whiteboard/new-block")}),va]}):(0,Oi.jsx)("strong",{children:oc("whiteboard/new-block-no-colon")})]})});(null==(Qe=null==Uc?void 0:Uc.pages)?0:Qe.some(xf=>xf.toLowerCase()===va.toLowerCase()))||!va||of.push({actionIcon:"circle-plus",onChosen:()=>{hc(va);return!0},element:(0,Oi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Oi.jsx)(gs,{active:!0,type:"PA"}),(0,Oi.jsx)("strong",{children:oc("whiteboard/new-page")}),va]})},{actionIcon:"circle-plus",onChosen:()=>Mi(void 0,
null,function*(){yield null==Eb?void 0:Eb.addNewWhiteboard(va);hc(va);return!0}),element:(0,Oi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Oi.jsx)(gs,{active:!0,type:"WA"}),(0,Oi.jsx)("strong",{children:oc("whiteboard/new-whiteboard")}),va]})});0===va.length&&null===cb&&of.push({actionIcon:"search",onChosen:()=>{qb("B");return!0},element:(0,Oi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Oi.jsx)(gs,{type:"BS"}),oc("whiteboard/search-only-blocks")]})},{actionIcon:"search",
onChosen:()=>{qb("P");return!0},element:(0,Oi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Oi.jsx)(gs,{type:"PS"}),oc("whiteboard/search-only-pages")]})});cb&&"P"!==cb||!Uc||!Uc.pages||of.push(...Uc.pages.map(xf=>({actionIcon:"search",onChosen:()=>{hc(xf);return!0},element:(0,Oi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Oi.jsx)(gs,{type:Eb.isWhiteboardPage(xf)?"WP":"P"}),xD(xf,va)]})})));cb&&"B"!==cb||!Uc||!Uc.blocks||of.push(...Uc.blocks.filter(xf=>xf.content&&
xf.uuid).map(({content:xf,uuid:cg})=>{const oe=Eb.queryBlockByUUID(cg);return{actionIcon:"search",onChosen:()=>{var Vd,he,Pd;return oe?(hc(cg),null==(Pd=null==(he=null==(Vd=window.logseq)?void 0:Vd.api)?void 0:he.set_blocks_id)?void 0:Pd.call(he,[cg]),!0):!1},element:oe?(0,Oi.jsxs)(Oi.Fragment,{children:[(0,Oi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Oi.jsx)(gs,{type:"B"}),(0,Oi.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,Oi.jsx)(ng,{blockId:cg})})]}),
(0,Oi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Oi.jsx)("div",{className:"tl-quick-search-option-placeholder"}),xD(xf,va)]})]}):(0,Oi.jsx)("div",{className:"tl-quick-search-option-row",children:oc("whiteboard/cache-outdated")})}}));return of},[va,cb,Uc,null==jc?void 0:jc.Breadcrumb,Eb]);Hm.default.useEffect(()=>{const Qe=of=>{var ng,xf;let cg=zc;"ArrowDown"===of.key?cg=Math.min(Lf.length-1,zc+1):"ArrowUp"===of.key?cg=Math.max(0,zc-1):"Enter"===of.key?(null==(ng=Lf[zc])?void 0:
ng.onChosen(),of.stopPropagation(),of.preventDefault()):"Backspace"===of.key&&0===va.length?qb(null):"Escape"===of.key&&hc("");cg!==zc&&(ng=Lf[cg],$c(cg),vd(ng.actionIcon),of.stopPropagation(),of.preventDefault(),(of=null==(xf=hd.current)?void 0:xf.querySelector(".tl-quick-search-option:nth-child("+(cg+1)+")"))&&(null==of?void 0:of.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",Qe,!0);return()=>{document.removeEventListener("keydown",Qe,!0)}},[Lf,zc,va]);return(0,Oi.jsxs)("div",
{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,Oi.jsx)(fH,{icon:td,onClick:()=>{var Qe;null==(Qe=Lf[zc])?void 0:Qe.onChosen()}}),(0,Oi.jsxs)("div",{className:"tl-quick-search-input-container",children:[cb&&(0,Oi.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,Oi.jsx)(gs,{type:cb}),"B"===cb?"Search blocks":"Search pages",(0,Oi.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>qb(null),children:(0,Oi.jsx)(pi,{name:"x"})})]}),(0,Oi.jsx)(xu,
{ref:xb,type:"text",value:va,className:"tl-quick-search-input",placeholder:null!=n?n:"Create or search your graph...",onChange:Qe=>Na(Qe.target.value),onKeyDown:Qe=>{"Enter"===Qe.key&&hc(va);Qe.stopPropagation()},onFocus:()=>{qe(!0)},onBlur:()=>{qe(!1);null==fa?void 0:fa()}})]}),0<Lf.length&&(0,Oi.jsx)("div",{onWheelCapture:Qe=>Qe.stopPropagation(),className:"tl-quick-search-options",ref:hd,style:{visibility:ae?"visible":"hidden",pointerEvents:ae?"all":"none"},children:(0,Oi.jsx)(Yy,{style:{height:40*
Math.min(Math.max(1,Lf.length),12)},totalCount:Lf.length,itemContent:Qe=>{const {actionIcon:of,onChosen:ng,element:xf}=Lf[Qe];return(0,Oi.jsx)("div",{"data-focused":Qe===zc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{vd(of);$c(Qe)},onPointerDownCapture:cg=>{ng()&&(cg.stopPropagation(),cg.preventDefault())},children:xf},Qe)}})})]})}),pk=ca(612),mz=Ne(function(a){var {pageId:d,portalType:n,refs:S,side:fa,onRefsChange:la}=a;a=yg(a,"pageId portalType shapeType refs side onRefsChange".split(" "));
const {handlers:{t:va}}=Ny.default.useContext(Qj),Na=S.length+(d?1:0),cb=0===S.length,qb=Eb=>{Eb&&!S.includes(Eb)&&cb&&la([...S,Eb])},xb=!(!d||!n);return(0,pk.jsx)(vf,ag(Ke({},a),{side:fa,align:"start",alignOffset:-6,label:(0,pk.jsx)(Le,{content:va("whiteboard/link"),sideOffset:14,children:(0,pk.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,pk.jsx)(pi,{name:0<Na?"link":"add-link"}),0<Na&&(0,pk.jsx)("div",{className:"tl-shape-links-count",children:Na})]})}),
children:(0,pk.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":xb,children:[xb&&(0,pk.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,pk.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,pk.jsx)(pi,{className:"opacity-50",name:"internal-link"}),va("whiteboard/references")]}),(0,pk.jsx)(ln,{type:n,id:d})]}),(0,pk.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,pk.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",
children:[(0,pk.jsx)(pi,{className:"opacity-50",name:"add-link"}),va("whiteboard/link-to-any-page-or-block")]}),cb&&(0,pk.jsx)(qo,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:va("whiteboard/start-typing-to-search"),onChange:qb}),0<S.length&&(0,pk.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:S.map((Eb,jc)=>(0,pk.jsx)(ln,{id:Eb,type:Vg(Eb)?"B":"P",onRemove:()=>{la(S.filter((oc,hc)=>jc!==hc))},showContent:!0},Eb))})]})]})}))}),Hk=ig(ca(25)),[Gv]=Ci("ToggleGroup",
[nw]),nz=nw(),yD=Hk.default.forwardRef((a,d)=>{const {type:n}=a;a=yg(a,["type"]);if("single"===n)return Hk.default.createElement(JH,pf({},a,{ref:d}));if("multiple"===n)return Hk.default.createElement(KH,pf({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[Mp,zD]=Gv("ToggleGroup"),JH=Hk.default.forwardRef((a,d)=>{const {value:n,defaultValue:S,onValueChange:fa=()=>{}}=a,la=yg(a,["value","defaultValue","onValueChange"]),[va,Na]=pd({prop:n,defaultProp:S,onChange:fa});return Hk.default.createElement(Mp,
{scope:a.__scopeToggleGroup,type:"single",value:va?[va]:[],onItemActivate:Na,onItemDeactivate:Hk.default.useCallback(()=>Na(""),[Na])},Hk.default.createElement(zu,pf({},la,{ref:d})))}),KH=Hk.default.forwardRef((a,d)=>{const {value:n,defaultValue:S,onValueChange:fa=()=>{}}=a,la=yg(a,["value","defaultValue","onValueChange"]),[va=[],Na]=pd({prop:n,defaultProp:S,onChange:fa}),cb=Hk.default.useCallback(xb=>Na((Eb=[])=>[...Eb,xb]),[Na]),qb=Hk.default.useCallback(xb=>Na((Eb=[])=>Eb.filter(jc=>jc!==xb)),
[Na]);return Hk.default.createElement(Mp,{scope:a.__scopeToggleGroup,type:"multiple",value:va,onItemActivate:cb,onItemDeactivate:qb},Hk.default.createElement(zu,pf({},la,{ref:d})))}),[AD,LH]=Gv("ToggleGroup"),zu=Hk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:n,disabled:S=!1,rovingFocus:fa=!0,orientation:la,dir:va,loop:Na=!0}=a;var cb=yg(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=nz(n);const qb=ph(va);cb=Ke({role:"group",dir:qb},cb);return Hk.default.createElement(AD,
{scope:n,rovingFocus:fa,disabled:S},fa?Hk.default.createElement(fC,pf({asChild:!0},a,{orientation:la,dir:qb,loop:Na}),Hk.default.createElement(kl.div,pf({},cb,{ref:d}))):Hk.default.createElement(kl.div,pf({},cb,{ref:d})))}),MH=Hk.default.forwardRef((a,d)=>{var n=zD("ToggleGroupItem",a.__scopeToggleGroup);const S=LH("ToggleGroupItem",a.__scopeToggleGroup),fa=nz(a.__scopeToggleGroup);n=n.value.includes(a.value);const la=S.disabled||a.disabled;a=ag(Ke({},a),{pressed:n,disabled:la});const va=Hk.default.useRef(null);
return S.rovingFocus?Hk.default.createElement(gC,pf({asChild:!0},fa,{focusable:!la,active:n,ref:va}),Hk.default.createElement(BD,pf({},a,{ref:d}))):Hk.default.createElement(BD,pf({},a,{ref:d}))}),BD=Hk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:n,value:S}=a,fa=yg(a,["__scopeToggleGroup","value"]),la=zD("ToggleGroupItem",n);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return Hk.default.createElement($B,pf({},"single"===la.type?a:void 0,fa,{ref:d,onPressedChange:va=>{if(va)la.onItemActivate(S);
else la.onItemDeactivate(S)}}))}),CD=yD,oz=MH,tn=ca(612),vj=ca(612),pz="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),NH=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],bo=new Map,qz={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),
ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},OH=Object.entries(qz).filter(([,
a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),PH=Ne(()=>{const a=df(),{handlers:{t:d}}=um.default.useContext(Qj),n=ib("AutoResizing"),S=n.every(fa=>fa.props.isAutoResizing);return(0,vj.jsx)(nf,{tooltip:d("whiteboard/auto-resize"),toggle:n.every(fa=>"logseq-portal"===fa.props.type),className:"tl-button",pressed:S,onPressedChange:fa=>{n.forEach(la=>{if("logseq-portal"===la.props.type)la.update({isAutoResizing:fa});else la.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},
children:(0,vj.jsx)(pi,{name:"dimensions"})})}),QH=Ne(()=>{const a=df();var {handlers:{t:d}}=um.default.useContext(Qj);const n=ib("LogseqPortalViewMode"),S=n.every(fa=>fa.collapsed);if(!S&&!n.every(fa=>!fa.collapsed))return null;d=(0,vj.jsxs)("div",{className:"flex",children:[S?d("whiteboard/expand"):d("whiteboard/collapse"),(0,vj.jsx)(Wl,{action:S?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,vj.jsx)(nf,{tooltip:d,toggle:n.every(fa=>"logseq-portal"===fa.props.type),
className:"tl-button",pressed:S,onPressedChange:()=>a.api.setCollapsed(!S),children:(0,vj.jsx)(pi,{name:S?"object-expanded":"object-compact"})})}),RH=Ne(()=>{const {handlers:{isMobile:a}}=um.default.useContext(Qj);var d=ib("ScaleLevel");d=1<(new Set(d.map(n=>n.scaleLevel))).size?"":d[0].scaleLevel;return(0,vj.jsx)($o,{scaleLevel:d,compact:a()})}),vq=Ne(()=>{const a=df(),{handlers:{t:d}}=um.default.useContext(Qj),n=ib("IFrameSource")[0],S=um.default.useCallback(la=>{n.onIFrameSourceChange(la.target.value.trim().toLowerCase());
a.persist()},[]),fa=um.default.useCallback(()=>{n.reload()},[]);return(0,vj.jsxs)("span",{className:"flex gap-3",children:[(0,vj.jsx)(Ge,{tooltip:d("whiteboard/reload"),type:"button",onClick:fa,children:(0,vj.jsx)(pi,{name:"refresh"})}),(0,vj.jsx)(xu,{title:d("whiteboard/website-url"),className:"tl-iframe-src",value:`${n.props.url}`,onChange:S}),(0,vj.jsx)(Ge,{tooltip:d("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(n.props.url),children:(0,vj.jsx)(pi,{name:"external-link"})})]})}),
SH=Ne(()=>{const a=df(),{handlers:{t:d}}=um.default.useContext(Qj),n=ib("YoutubeLink")[0],S=um.default.useCallback(fa=>{n.onYoutubeLinkChange(fa.target.value);a.persist()},[]);return(0,vj.jsxs)("span",{className:"flex gap-3",children:[(0,vj.jsx)(xu,{title:d("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${n.props.url}`,onChange:S}),(0,vj.jsx)(Ge,{tooltip:d("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var fa,la,va;return null==(va=null==(la=null==(fa=window.logseq)?void 0:
fa.api)?void 0:la.open_external_link)?void 0:va.call(la,n.props.url)},children:(0,vj.jsx)(pi,{name:"external-link"})})]})}),TH=Ne(()=>{const a=df(),{handlers:{t:d}}=um.default.useContext(Qj),n=ib("TwitterLink")[0],S=um.default.useCallback(fa=>{n.onTwitterLinkChange(fa.target.value);a.persist()},[]);return(0,vj.jsxs)("span",{className:"flex gap-3",children:[(0,vj.jsx)(xu,{title:d("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${n.props.url}`,onChange:S}),(0,vj.jsx)(Ge,{tooltip:d("whiteboard/open-twitter-url"),
type:"button",onClick:()=>{var fa,la,va;return null==(va=null==(la=null==(fa=window.logseq)?void 0:fa.api)?void 0:la.open_external_link)?void 0:va.call(la,n.props.url)},children:(0,vj.jsx)(pi,{name:"external-link"})})]})}),UH=Ne(()=>{const a=df(),{handlers:{t:d,setCurrentPdf:n}}=um.default.useContext(Qj),S=a.selectedShapesArray[0];return(0,vj.jsx)(Ge,{tooltip:d("whiteboard/edit-pdf"),type:"button",onClick:()=>n(a.assets[S.props.assetId].src),children:(0,vj.jsx)(pi,{name:"edit"})})}),VH=Ne(()=>{const a=
df(),{handlers:{t:d}}=um.default.useContext(Qj);var n=ib("NoFill");const S=um.default.useCallback(fa=>{a.selectedShapesArray.forEach(la=>la.update({noFill:fa}));a.persist()},[]);n=n.every(fa=>fa.props.noFill);return(0,vj.jsx)(nf,{tooltip:d("whiteboard/fill"),className:"tl-button",pressed:n,onPressedChange:S,children:(0,vj.jsx)(pi,{name:n?"droplet-off":"droplet"})})}),WH=Ne(()=>{const a=df(),d=ib("Swatch"),n=um.default.useCallback(fa=>{a.selectedShapesArray.forEach(la=>{la.update({fill:fa,stroke:fa})});
a.persist()},[]),S=um.default.useCallback(fa=>{a.selectedShapesArray.forEach(la=>{la.update({opacity:fa})});a.persist()},[]);return(0,vj.jsx)(en,{popoverSide:"top",color:d[0].props.noFill?d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:S,setColor:n})}),XH=Ne(()=>{const a=df(),d=um.default.useCallback(n=>{a.api.convertShapes(n.currentTarget.dataset.tool)},[]);return(0,vj.jsx)(zy,{popoverSide:"top",chevron:!1,setGeometry:d})}),DD=Ne(()=>{const a=df(),{handlers:{t:d}}=um.default.useContext(Qj),
n=ib("StrokeType"),S=n.every(fa=>"dashed"===fa.props.strokeType)?"dashed":n.every(fa=>"line"===fa.props.strokeType)?"line":"mixed";return(0,vj.jsx)(ka,{title:d("whiteboard/stroke-type"),options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:S,onValueChange:fa=>{n.forEach(la=>{la.update({strokeType:fa})});a.persist()}})}),YH=Ne(()=>{const a=df(),{handlers:{t:d}}=um.default.useContext(Qj),n=ib("ArrowMode");var S=n.every(la=>{var va;return"arrow"===
(null==(va=la.props.decorations)?void 0:va.start)});const fa=n.every(la=>{var va;return"arrow"===(null==(va=la.props.decorations)?void 0:va.end)});S=[S?"start":null,fa?"end":null].filter(Nc);return(0,vj.jsx)(Fa,{title:d("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:S,onValueChange:la=>{n.forEach(va=>{var Na=va.update;var cb={start:la.includes("start")?"arrow":null,end:la.includes("end")?"arrow":null};Na.call(va,{decorations:cb})});
a.persist()}})}),ZH=Ne(()=>{const a=df(),{handlers:{t:d}}=um.default.useContext(Qj),n=ib("TextStyle"),S=n.every(la=>500<la.props.fontWeight),fa=n.every(la=>la.props.italic);return(0,vj.jsxs)("span",{className:"flex gap-1",children:[(0,vj.jsx)(nf,{tooltip:d("whiteboard/bold"),className:"tl-button",pressed:S,onPressedChange:la=>{n.forEach(va=>{va.update({fontWeight:la?700:400});va.onResetBounds()});a.persist()},children:(0,vj.jsx)(pi,{name:"bold"})}),(0,vj.jsx)(nf,{tooltip:d("whiteboard/italic"),className:"tl-button",
pressed:fa,onPressedChange:la=>{n.forEach(va=>{va.update({italic:la});va.onResetBounds()});a.persist()},children:(0,vj.jsx)(pi,{name:"italic"})})]})}),$H=Ne(()=>{var a;const d=df(),n=d.selectedShapesArray[0];return(0,vj.jsx)(mz,{onRefsChange:S=>{n.update({refs:S});d.persist()},refs:null!=(a=n.props.refs)?a:[],shapeType:n.props.type,side:"right",pageId:"logseq-portal"===n.props.type?n.props.pageId:void 0,portalType:"logseq-portal"===n.props.type?n.props.blockType:void 0})});bo.set("Geometry",XH);bo.set("AutoResizing",
PH);bo.set("LogseqPortalViewMode",QH);bo.set("ScaleLevel",RH);bo.set("YoutubeLink",SH);bo.set("TwitterLink",TH);bo.set("IFrameSource",vq);bo.set("NoFill",VH);bo.set("Swatch",WH);bo.set("StrokeType",DD);bo.set("ArrowMode",YH);bo.set("TextStyle",ZH);bo.set("Links",$H);bo.set("EditPdf",UH);var rz=a=>{var d;return(null!=(d=qz[a])?d:[]).filter(Nc)},aI=a=>{const d=a.map(S=>S.props.type),n=new Set(0<a.length?rz(d[0]):[]);for(let S=1;S<d.length&&0<n.size;S++){const fa=rz(d[S]);n.forEach(la=>{fa.includes(la)||
n.delete(la)})}1<a.length&&NH.forEach(S=>{n.has(S)&&n.delete(S)});return Array.from(n).sort((S,fa)=>pz.indexOf(S)-pz.indexOf(fa)).map(S=>bo.get(S))},Hv=ca(612),ED=Ne(({shapes:a,offsets:d,hidden:n})=>{const S=df(),fa=ju.useRef(null),la=ju.useRef(null);ju.useLayoutEffect(()=>{setTimeout(()=>{const Na=la.current;if(Na){var {offsetWidth:cb,offsetHeight:qb}=Na;fa.current=[cb,qb]}})});ju.useLayoutEffect(()=>{var Na;const cb=la.current;if(cb){var qb=null!=(Na=fa.current)?Na:[0,0];Na=0;if(116>d.top){var xb=
d.height/2+40;140>d.bottom&&(xb+=d.bottom-140)}else xb=-(d.height/2+40);16>d.left+d.width/2-qb[0]/2?Na+=-(d.left+d.width/2-qb[0]/2-16):16>d.right+d.width/2-qb[0]/2&&(Na+=d.right+d.width/2-qb[0]/2-16);var [Eb,jc]=[Na,xb];cb.style.transform=`translateX(${Eb}px) translateY(${jc}px)`}},[d]);if(!S)return null;const va=aI(a);return(0,Hv.jsx)(Mo,{centered:!0,children:0<va.length&&(0,Hv.jsx)("div",{ref:la,className:"tl-toolbar tl-context-bar",style:{visibility:n?"hidden":"visible",pointerEvents:n?"none":
"all"},children:va.map((Na,cb)=>(0,Hv.jsxs)(ju.Fragment,{children:[(0,Hv.jsx)(Na,{}),cb<va.length-1&&(0,Hv.jsx)(oq,{className:"tl-toolbar-separator",orientation:"vertical"})]},cb))})})}),sz=ig(ca(25)),Ml=ca(25),[FD]=Ci("ContextMenu",[cv]),Au=cv(),[Iv,Bu]=FD("ContextMenu"),tz=(0,Ml.forwardRef)((a,d)=>{const {__scopeContextMenu:n,disabled:S=!1}=a,fa=yg(a,["__scopeContextMenu","disabled"]),la=Bu("ContextMenuTrigger",n),va=Au(n),Na=(0,Ml.useRef)({x:0,y:0}),cb=(0,Ml.useRef)({getBoundingClientRect:()=>
DOMRect.fromRect(Ke({width:0,height:0},Na.current))}),qb=(0,Ml.useRef)(0),xb=(0,Ml.useCallback)(()=>window.clearTimeout(qb.current),[]);(0,Ml.useEffect)(()=>xb,[xb]);(0,Ml.useEffect)(()=>void(S&&xb()),[S,xb]);return(0,Ml.createElement)(Ml.Fragment,null,(0,Ml.createElement)(oy,pf({},va,{virtualRef:cb})),(0,Ml.createElement)(kl.span,pf({"data-state":la.open?"open":"closed","data-disabled":S?"":void 0},fa,{ref:d,style:Ke({WebkitTouchCallout:"none"},a.style),onContextMenu:S?a.onContextMenu:Ng(a.onContextMenu,
Eb=>{xb();Na.current={x:Eb.clientX,y:Eb.clientY};la.onOpenChange(!0);Eb.preventDefault()}),onPointerDown:S?a.onPointerDown:Ng(a.onPointerDown,tc(Eb=>{xb();qb.current=window.setTimeout(()=>{Na.current={x:Eb.clientX,y:Eb.clientY};la.onOpenChange(!0)},700)})),onPointerMove:S?a.onPointerMove:Ng(a.onPointerMove,tc(xb)),onPointerCancel:S?a.onPointerCancel:Ng(a.onPointerCancel,tc(xb)),onPointerUp:S?a.onPointerUp:Ng(a.onPointerUp,tc(xb))})))}),uz=(0,Ml.forwardRef)((a,d)=>{var {__scopeContextMenu:n}=a;const S=
yg(a,["__scopeContextMenu"]),fa=Bu("ContextMenuContent",n);n=Au(n);const la=(0,Ml.useRef)(!1);return(0,Ml.createElement)(fv,pf({},n,S,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:va=>{var Na;null===(Na=a.onCloseAutoFocus)||void 0===Na||Na.call(a,va);!va.defaultPrevented&&la.current&&va.preventDefault();la.current=!1},onInteractOutside:va=>{var Na;null===(Na=a.onInteractOutside)||void 0===Na||Na.call(a,va);va.defaultPrevented||fa.modal||(la.current=!0)},style:ag(Ke({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
bm=(0,Ml.forwardRef)((a,d)=>{var {__scopeContextMenu:n}=a;a=yg(a,["__scopeContextMenu"]);n=Au(n);return(0,Ml.createElement)($t,pf({},n,a,{ref:d}))}),hs=(0,Ml.forwardRef)((a,d)=>{var {__scopeContextMenu:n}=a;a=yg(a,["__scopeContextMenu"]);n=Au(n);return(0,Ml.createElement)(tC,pf({},n,a,{ref:d}))}),GD=a=>{const {__scopeContextMenu:d,children:n,onOpenChange:S,dir:fa,modal:la=!0}=a,[va,Na]=(0,Ml.useState)(!1);a=Au(d);const cb=Mj(S),qb=(0,Ml.useCallback)(xb=>{Na(xb);cb(xb)},[cb]);return(0,Ml.createElement)(Iv,
{scope:d,open:va,onOpenChange:qb,modal:la},(0,Ml.createElement)(uC,pf({},a,{dir:fa,open:va,onOpenChange:qb,modal:la}),n))},pg=ca(612),qr=Ne(function({children:a,collisionRef:d}){var n,S,fa,la,va,Na,cb,qb,xb,Eb,jc,oc,hc,Rc,hd,zc,$c;const Uc=df(),{handlers:td}=sz.useContext(Qj),vd=td.t,ae=sz.useRef(null),qe=Qe=>{Qe();Uc.transition("select")},Lf=sz.useMemo(()=>ic(),[]);return(0,pg.jsxs)(GD,{onOpenChange:Qe=>{Qe&&!Uc.isIn("select.contextMenu")?Uc.transition("select").selectedTool.transition("contextMenu"):
!Qe&&Uc.isIn("select.contextMenu")&&Uc.selectedTool.transition("idle")},children:[(0,pg.jsx)(tz,{disabled:Uc.editingShape&&0!==Object.keys(Uc.editingShape).length,children:a}),(0,pg.jsx)(uz,{className:"tl-menu tl-context-menu",ref:ae,onEscapeKeyDown:()=>Uc.transition("select"),collisionBoundary:d.current,asChild:!0,tabIndex:-1,children:(0,pg.jsxs)("div",{children:[1<(null==(n=Uc.selectedShapes)?void 0:n.size)&&!Uc.readOnly&&(null==(S=Uc.selectedShapesArray)?void 0:S.some(Qe=>!Qe.props.isLocked))&&
(0,pg.jsxs)(pg.Fragment,{children:[(0,pg.jsxs)(bm,{children:[(0,pg.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,pg.jsx)(Ge,{tooltip:vd("whiteboard/align-left"),onClick:()=>qe(()=>Uc.align("left")),children:(0,pg.jsx)(pi,{name:"layout-align-left"})}),(0,pg.jsx)(Ge,{tooltip:vd("whiteboard/align-center-horizontally"),onClick:()=>qe(()=>Uc.align("centerHorizontal")),children:(0,pg.jsx)(pi,{name:"layout-align-center"})}),(0,pg.jsx)(Ge,{tooltip:vd("whiteboard/align-right"),onClick:()=>
qe(()=>Uc.align("right")),children:(0,pg.jsx)(pi,{name:"layout-align-right"})}),(0,pg.jsx)(oq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,pg.jsx)(Ge,{tooltip:vd("whiteboard/distribute-horizontally"),onClick:()=>qe(()=>Uc.distribute("horizontal")),children:(0,pg.jsx)(pi,{name:"layout-distribute-vertical"})})]}),(0,pg.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,pg.jsx)(Ge,{tooltip:vd("whiteboard/align-top"),onClick:()=>qe(()=>Uc.align("top")),children:(0,pg.jsx)(pi,
{name:"layout-align-top"})}),(0,pg.jsx)(Ge,{tooltip:vd("whiteboard/align-center-vertically"),onClick:()=>qe(()=>Uc.align("centerVertical")),children:(0,pg.jsx)(pi,{name:"layout-align-middle"})}),(0,pg.jsx)(Ge,{tooltip:vd("whiteboard/align-bottom"),onClick:()=>qe(()=>Uc.align("bottom")),children:(0,pg.jsx)(pi,{name:"layout-align-bottom"})}),(0,pg.jsx)(oq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,pg.jsx)(Ge,{tooltip:vd("whiteboard/distribute-vertically"),onClick:()=>qe(()=>Uc.distribute("vertical")),
children:(0,pg.jsx)(pi,{name:"layout-distribute-horizontal"})})]})]}),(0,pg.jsx)(hs,{className:"menu-separator"}),(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.packIntoRectangle),children:[(0,pg.jsx)(pi,{className:"tl-menu-icon",name:"layout-grid"}),vd("whiteboard/pack-into-rectangle")]}),(0,pg.jsx)(hs,{className:"menu-separator"})]}),0<(null==(fa=Uc.selectedShapes)?void 0:fa.size)&&(0,pg.jsxs)(pg.Fragment,{children:[(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.api.zoomToSelection),
children:[vd("whiteboard/zoom-to-fit"),(0,pg.jsx)(Wl,{action:"whiteboard/zoom-to-fit"})]}),(0,pg.jsx)(hs,{className:"menu-separator"})]}),(Uc.selectedShapesArray.some(Qe=>"group"===Qe.type||Uc.getParentGroup(Qe))||1<Uc.selectedShapesArray.length)&&(null==(la=Uc.selectedShapesArray)?void 0:la.some(Qe=>!Qe.props.isLocked))&&!Uc.readOnly&&(0,pg.jsxs)(pg.Fragment,{children:[Uc.selectedShapesArray.some(Qe=>"group"===Qe.type||Uc.getParentGroup(Qe))&&(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>
qe(Uc.api.unGroup),children:[(0,pg.jsx)(pi,{className:"tl-menu-icon",name:"ungroup"}),vd("whiteboard/ungroup"),(0,pg.jsx)(Wl,{action:"whiteboard/ungroup"})]}),1<Uc.selectedShapesArray.length&&(null==(va=Uc.selectedShapesArray)?void 0:va.some(Qe=>!Qe.props.isLocked))&&(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.api.doGroup),children:[(0,pg.jsx)(pi,{className:"tl-menu-icon",name:"group"}),vd("whiteboard/group"),(0,pg.jsx)(Wl,{action:"whiteboard/group"})]}),(0,pg.jsx)(hs,{className:"menu-separator"})]}),
0<(null==(Na=Uc.selectedShapes)?void 0:Na.size)&&(null==(cb=Uc.selectedShapesArray)?void 0:cb.some(Qe=>!Qe.props.isLocked))&&(0,pg.jsxs)(pg.Fragment,{children:[!Uc.readOnly&&(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.cut),children:[(0,pg.jsx)(pi,{className:"tl-menu-icon",name:"cut"}),vd("whiteboard/cut")]}),(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.copy),children:[(0,pg.jsx)(pi,{className:"tl-menu-icon",name:"copy"}),vd("whiteboard/copy"),(0,pg.jsx)(Wl,{action:"editor/copy"})]})]}),
!Uc.readOnly&&(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.paste),children:[(0,pg.jsx)(pi,{className:"tl-menu-icon",name:"clipboard"}),vd("whiteboard/paste"),(0,pg.jsx)("div",{className:"tl-menu-right-slot",children:(0,pg.jsx)("span",{className:"keyboard-shortcut",children:(0,pg.jsxs)("code",{children:[KA,"+v"]})})})]}),1===(null==(qb=Uc.selectedShapes)?void 0:qb.size)&&!Uc.readOnly&&(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(()=>Uc.paste(void 0,!0)),children:[vd("whiteboard/paste-as-link"),
(0,pg.jsx)("div",{className:"tl-menu-right-slot",children:(0,pg.jsx)("span",{className:"keyboard-shortcut",children:(0,pg.jsxs)("code",{children:[KA,"+⇧+v"]})})})]}),0<(null==(xb=Uc.selectedShapes)?void 0:xb.size)&&(0,pg.jsxs)(pg.Fragment,{children:[(0,pg.jsx)(hs,{className:"menu-separator"}),(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(()=>{var Qe,of;return td.exportToImage(Uc.currentPageId,{x:Uc.selectionBounds.minX+Uc.viewport.camera.point[0]-8,y:Uc.selectionBounds.minY+Uc.viewport.camera.point[1]-
8,width:(null==(Qe=Uc.selectionBounds)?void 0:Qe.width)+16,height:(null==(of=Uc.selectionBounds)?void 0:of.height)+16,zoom:Uc.viewport.camera.zoom})}),children:[(0,pg.jsx)(pi,{className:"tl-menu-icon",name:"file-export"}),vd("whiteboard/export"),(0,pg.jsx)("div",{className:"tl-menu-right-slot",children:(0,pg.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,pg.jsx)(hs,{className:"menu-separator"}),(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.api.selectAll),children:[vd("whiteboard/select-all"),
(0,pg.jsx)(Wl,{action:"editor/select-parent"})]}),1<(null==(Eb=Uc.selectedShapes)?void 0:Eb.size)&&(0,pg.jsx)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.api.deselectAll),children:vd("whiteboard/deselect-all")}),!Uc.readOnly&&0<(null==(jc=Uc.selectedShapes)?void 0:jc.size)&&(null==(oc=Uc.selectedShapesArray)?void 0:oc.some(Qe=>!Qe.props.isLocked))&&(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(()=>Uc.setLocked(!0)),children:[(0,pg.jsx)(pi,{className:"tl-menu-icon",name:"lock"}),vd("whiteboard/lock"),
(0,pg.jsx)(Wl,{action:"whiteboard/lock"})]}),!Uc.readOnly&&0<(null==(hc=Uc.selectedShapes)?void 0:hc.size)&&(null==(Rc=Uc.selectedShapesArray)?void 0:Rc.some(Qe=>Qe.props.isLocked))&&(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(()=>Uc.setLocked(!1)),children:[(0,pg.jsx)(pi,{className:"tl-menu-icon",name:"lock-open"}),vd("whiteboard/unlock"),(0,pg.jsx)(Wl,{action:"whiteboard/unlock"})]}),0<(null==(hd=Uc.selectedShapes)?void 0:hd.size)&&!Uc.readOnly&&(null==(zc=Uc.selectedShapesArray)?void 0:
zc.some(Qe=>!Qe.props.isLocked))&&(0,pg.jsxs)(pg.Fragment,{children:[(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.api.deleteShapes),children:[(0,pg.jsx)(pi,{className:"tl-menu-icon",name:"backspace"}),vd("whiteboard/delete"),(0,pg.jsx)(Wl,{action:"editor/delete"})]}),1<(null==($c=Uc.selectedShapes)?void 0:$c.size)&&!Uc.readOnly&&(0,pg.jsxs)(pg.Fragment,{children:[(0,pg.jsx)(hs,{className:"menu-separator"}),(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.flipHorizontal),children:[(0,pg.jsx)(pi,
{className:"tl-menu-icon",name:"flip-horizontal"}),vd("whiteboard/flip-horizontally")]}),(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.flipVertical),children:[(0,pg.jsx)(pi,{className:"tl-menu-icon",name:"flip-vertical"}),vd("whiteboard/flip-vertically")]})]}),!Uc.readOnly&&(0,pg.jsxs)(pg.Fragment,{children:[(0,pg.jsx)(hs,{className:"menu-separator"}),(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.bringToFront),children:[vd("whiteboard/move-to-front"),(0,pg.jsx)(Wl,{action:"whiteboard/bring-to-front"})]}),
(0,pg.jsxs)(bm,{className:"tl-menu-item",onClick:()=>qe(Uc.sendToBack),children:[vd("whiteboard/move-to-back"),(0,pg.jsx)(Wl,{action:"whiteboard/send-to-back"})]})]}),Lf&&(0,pg.jsx)(bm,{className:"tl-menu-item",onClick:()=>{1===Uc.selectedShapesArray.length?console.log(Kb(Uc.selectedShapesArray[0].serialized)):console.log(Uc.selectedShapesArray.map(Qe=>Kb(Qe.serialized)))},children:vd("whiteboard/dev-print-shape-props")})]})]})})]})}),vz=ig(ca(25)),ax=ca(612),bI=Ne(({shape:a})=>{const d=df(),{handlers:n}=
vz.default.useContext(Qj),S=n.t,fa=vz.default.useMemo(()=>{var la;const va=[...(null!=(la=a.props.refs)?la:[])].map(Na=>[Na,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&va.unshift([a.props.pageId,!1]);return va.filter(Na=>Na[0].toLowerCase()!==d.currentPage.name&&n.getBlockPageName(Na[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===fa.length?null:(0,ax.jsx)("div",{className:"tl-quick-links",title:S("whiteboard/shape-quick-links"),children:fa.map(([la,
va])=>(0,ax.jsx)("div",{className:"tl-quick-links-row",children:(0,ax.jsx)(br,{id:la,showReferenceContent:va})},la))})}),cI=ig(ca(25)),wq=ig(ca(25)),HD={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},wz=(a,d,n)=>Mi(void 0,[a,d,n],function*(S,{point:fa,shiftKey:la,dataTransfer:va,fromDrop:Na},cb){function qb(Pd,ke){return Mi(this,null,function*(){const yf=Object.values(S.assets).find(Pf=>Pf.src===Pd);return yf?yf:{id:xk(),type:ke,src:Pd,size:yield Hi(cb.makeAssetUrl(Pd),
ke)}})}function xb(Pd){return Mi(this,null,function*(){const ke=Pd.filter(yf=>"unknown"!==cd(yf.name)).map(yf=>Mi(this,null,function*(){try{const Pf=yield cb.saveAsset(yf);return yield qb(Pf,cd(yf.name))}catch(Pf){console.error(Pf)}return null}));return(yield Promise.all(ke)).filter(Nc)})}function Eb(Pd){return[ag(Ke({},jr.defaultProps),{html:Pd,point:[fa[0],fa[1]]})]}function jc(Pd){return Mi(this,null,function*(){return qd(hc,Rc,$c,zc,Uc,hd,Lf)(Pd)})}function oc(){return Mi(this,null,function*(){const Pd=
yield navigator.clipboard.read(),ke=qd(Uc,hd,Lf);return(yield Promise.all(Pd.map(yf=>ke(yf)))).flat().filter(Nc)})}function hc(Pd){return Mi(this,null,function*(){var ke=Pd.getData("file");if(!ke)return null;const yf=yield qb(ke,"pdf");S.addAssets([yf]);ke=ag(Ke({},pt.defaultProps),{id:xk(),assetId:yf.id,url:ke,opacity:1});yf.size&&Object.assign(ke,{point:[fa[0]-yf.size[0]/4+16,fa[1]-yf.size[1]/4+16],size:Fe.div(yf.size,2)});return[ke]})}function Rc(Pd){return Mi(this,null,function*(){var ke=Array.from(Pd.files);
return 0<ke.length?(ng=ke=yield xb(ke),ke.map((yf,Pf)=>{switch(yf.type){case "video":var Lg=wu.defaultProps;break;case "image":Lg=Cj.defaultProps;break;case "pdf":Lg=pt.defaultProps;break;default:return null}Lg=ag(Ke({},Lg),{id:xk(),assetId:yf.id,opacity:1});yf.size&&Object.assign(Lg,{point:[fa[0]-yf.size[0]/4+16*Pf,fa[1]-yf.size[1]/4+16*Pf],size:Fe.div(yf.size,2)});return Lg})):null})}function hd(Pd){return Mi(this,null,function*(){if(Pd.types.includes("text/plain")&&(la||Na))return null;const ke=
yield Wd(Pd,"text/html");return ke?qd(td,Eb)(ke):null})}function zc(Pd){return Mi(this,null,function*(){var ke,yf,Pf,Lg,yh,Zf,Kh=Pd.getData("block-uuid");if(Kh){Kh=Kh.trim();const zg=null==(Pf=null==(yf=null==(ke=window.logseq)?void 0:ke.api)?void 0:yf.get_selected_blocks)?void 0:Pf.call(yf);ke=zg&&1<(null==zg?void 0:zg.length)?zg.map(Wh=>Wh.uuid):[Kh];null==(Zf=null==(yh=null==(Lg=window.logseq)?void 0:Lg.api)?void 0:yh.set_blocks_id)?void 0:Zf.call(yh,ke);Lg=ke.map(Wh=>qe(`((${Wh}))`));return(yield Promise.all(Lg)).flat().filter(Nc).map((Wh,
mi)=>ag(Ke({},Wh),{point:[fa[0]+(Gk.defaultProps.size[0]+16)*mi,fa[1]]}))}return null})}function $c(Pd){return Mi(this,null,function*(){var ke=Pd.getData("page-name");return ke?(ke=ke.trim(),qe(`[[${ke}]]`)):null})}function Uc(Pd){return Mi(this,null,function*(){var ke=yield Wd(Pd,"text/plain");return ke?(ke=ke.trim(),qd(vd,ae)(ke)):null})}function td(Pd){if(Pd=S.api.getClonedShapesFromTldrString(decodeURIComponent(Pd),fa)){const {shapes:ke,assets:yf,bindings:Pf}=Pd;xf.push(...yf);cg.push(...Pf);
return ke}return null}function vd(Pd){return Mi(this,null,function*(){try{const yf=new URL(Pd);var ke=yf.host&&["http:","https:"].includes(yf.protocol)}catch(yf){ke=!1}return ke&&!la?Yw.test(Pd)?[ag(Ke({},nr.defaultProps),{url:Pd,point:[fa[0],fa[1]]})]:iz.test(Pd)?[ag(Ke({},ot.defaultProps),{url:Pd,point:[fa[0],fa[1]]})]:[ag(Ke({},kr.defaultProps),{url:Pd,point:[fa[0],fa[1]]})]:null})}function ae(Pd){return Pd.startsWith("\x3ciframe")?[ag(Ke({},jr.defaultProps),{html:Pd,point:[fa[0],fa[1]]})]:null}
function qe(Pd){return Mi(this,null,function*(){if(/^\(\(.*\)\)$/.test(Pd)&&40===Pd.length){var ke=Pd.slice(2,-2);if(Vg(ke))return[ag(Ke({},Gk.defaultProps),{point:[fa[0],fa[1]],size:[400,0],pageId:ke,fill:S.settings.color,stroke:S.settings.color,scaleLevel:S.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(Pd))return ke=Pd.slice(2,-2),[ag(Ke({},Gk.defaultProps),{point:[fa[0],fa[1]],size:[400,0],pageId:ke,fill:S.settings.color,stroke:S.settings.color,scaleLevel:S.settings.scaleLevel,
blockType:"P"})];return null})}function Lf(Pd){return Mi(this,null,function*(){var ke=yield Wd(Pd,"text/plain");return ke&&(ke=ke.trim(),ke=yield null==cb?void 0:cb.addNewBlock(ke))?[ag(Ke({},Gk.defaultProps),{size:[400,0],point:[fa[0],fa[1]],pageId:ke,fill:S.settings.color,stroke:S.settings.color,scaleLevel:S.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var Qe,of;let ng=[],xf=[];const cg=[];S.cursors.setCursor("progress");let oe=[];try{va?oe.push(...(null!=(Qe=yield jc(va))?Qe:[])):oe.push(...(null!=
(of=yield oc())?of:[]))}catch(Pd){console.error(Pd)}const Vd=oe.map(Pd=>ag(Ke({},Pd),{parentId:S.currentPageId,isLocked:!1,id:Vg(Pd.id)?Pd.id:xk()})),he=null==va?void 0:va.types.every(Pd=>"Files"===Pd);S.wrapUpdate(()=>{var Pd=[...ng,...xf];0<Pd.length&&S.createAssets(Pd);0<Vd.length&&S.createShapes(Vd);S.currentPage.updateBindings(Object.fromEntries(cg.map(ke=>[ke.id,ke])));if(1===S.selectedShapesArray.length&&1===Vd.length&&Na){Pd=S.selectedShapesArray[0];const ke=S.getShapeById(Vd[0].id);S.createNewLineBinding(Pd,
ke)}S.setSelectedShapes(Vd.map(ke=>ke.id));S.selectedTool.transition("idle");S.cursors.setCursor("default");(Na||he)&&S.packIntoRectangle()})}),Jv=ig(ca(25)),xz=ig(ca(25)),xq=ca(612),ID=[qt,sn,vD,kz,Ym,sp,$w,lz,Ll,wD,Gi,rt],JD=a=>{const {renderers:d}=Wt.useContext(Qj);return(0,xq.jsx)(d.BacklinksCount,ag(Ke({},a),{options:{"portal?":!1}}))},KD=()=>{const a=Wt.useRef(null),d=df(),n=Wt.useMemo(()=>({ContextBar:ED,BacklinksCount:JD,QuickLinks:bI}),[]);return(0,xq.jsx)(qr,{collisionRef:a,children:(0,xq.jsx)("div",
{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":d.uuid,children:(0,xq.jsx)(mG,{components:n,children:(0,xq.jsx)($q,{})})})})},LD=a=>{var {onPersist:d,readOnly:n,model:S}=a;a=yg(a,["onPersist","readOnly","model"]);const fa=Je(),la=se(),va=ff(),Na=n?null:Rf(),cb=Wt.useCallback((qb,xb)=>{null==d?void 0:d(qb,xb)},[S]);return(0,xq.jsx)(iG,ag(Ke({Shapes:rn,Tools:ID,onDrop:fa,onPaste:la,onCopy:va,readOnly:n,onCanvasDBClick:Na,onPersist:cb,model:S},a),{children:(0,xq.jsx)(KD,{})}))},MD=
function(a){var {renderers:d,handlers:n}=a;a=yg(a,["renderers","handlers"]);const S={renderers:Wt.useMemo(()=>Object.fromEntries(Object.entries(d).map(([fa,la])=>[fa,Wt.memo(la)])),[]),handlers:n};return(0,xq.jsx)(Qj.Provider,{value:S,children:(0,xq.jsx)(LD,Ke({},a))})}};
'use strict';var MJd=function(a,b){var c=$APP.aI(a)?$APP.Kw.C($APP.sI.C(new $APP.O(null,2,5,$APP.Q,[$APP.Jw,"logseq.tldraw.shape"],null))):$APP.Aw;a=$APP.sI.C(new $APP.O(null,2,5,$APP.Q,[$APP.Jw,$APP.Ro.C?$APP.Ro.C(b):$APP.Ro.call(null,b)],null));return $APP.wk.A(function(d){var e=$APP.nf(d);d=$APP.H.A(e,$APP.Kw);e=$APP.H.A(e,$APP.mx);e=$APP.H.A(e,c);return $APP.n(e)?new $APP.m(null,2,[$APP.Ek,$APP.t.C(d),$APP.yYc,$APP.yYc.C(e)],null):null},$APP.BLa.C(a))},NJd=function(a){return $APP.Po.G(a,$APP.G([$APP.Qo,
!0]))},OJd=function(a,b,c,d,e){var f=$APP.Ro.C?$APP.Ro.C(b):$APP.Ro.call(null,b);c=$APP.jf([$APP.FK($APP.Bw),$APP.jVa,$APP.FK($APP.Dw),new $APP.m(null,6,[$APP.Ek,$APP.qa(c,"id"),$APP.Xn,$APP.qa(c,"name"),$APP.sB,NJd($APP.qa(c,"bindings")),$APP.yYc,$APP.qa(c,"nonce"),$APP.C5b,NJd(d),$APP.v5b,e],null)]);d=$APP.Wo.I?$APP.Wo.I():$APP.Wo.call(null);a=$APP.cw.C(a);a=$APP.n(a)?a:$APP.Wo.I?$APP.Wo.I():$APP.Wo.call(null);return new $APP.m(null,6,[$APP.Lw,b,$APP.Jw,f,$APP.Vw,"whiteboard",$APP.mx,c,$APP.bw,
d,$APP.cw,a],null)},PJd=function(a,b,c,d,e,f){a=NJd(a.getCleanUpAssets());var g=b.shapes,h=$APP.mh.A(function(z){return $APP.qa(z,"id")},g),k=$APP.Ug(h,$APP.ij.C(g.length));g=$APP.Rg($APP.mh.A(function(z){z=$APP.nf(z);z=$APP.H.A(z,$APP.Ek);return $APP.S.F(NJd(b.getShapeById(z).serialized),$APP.Gs,$APP.H.A(k,z))},$APP.gs.A(c,d)));d=$APP.Rg($APP.mh.A($APP.Ek,d));var p=$APP.Rg($APP.mh.A($APP.Ek,c)),q=$APP.Rg($APP.zl.A($APP.Fj,$APP.gs.A(p,d)));c=$APP.Rg($APP.Rf.A(function(z){z=$APP.Ek.C(z);return q.C?
q.C(z):q.call(null,z)},g));var r=$APP.zl.A($APP.Fj,$APP.gs.A(d,p)),u=$APP.nG();d=$APP.y(r)?$APP.zl.A($APP.kb,$APP.hj.A(function(z){return $APP.EK(z,$APP.Aw)},function(){var z=new $APP.O(null,1,5,$APP.Q,[$APP.Zt],null),D=$APP.hj.A(function(F){return new $APP.O(null,2,5,$APP.Q,[$APP.Kw,$APP.Rh(F)],null)},r);return $APP.nI?$APP.nI(u,z,D):$APP.Amb.call(null,u,z,D)}())):null;p=$APP.hj.A(function(z){return new $APP.O(null,2,5,$APP.Q,[$APP.nNa,new $APP.O(null,2,5,$APP.Q,[$APP.Kw,$APP.Rh(z)],null)],null)},
r);g=$APP.zl.A(function(z){var D=$APP.B,F=D.A,J=$APP.yYc.C;var I=new $APP.O(null,2,5,$APP.Q,[$APP.Kw,$APP.Kw.C(z)],null);I=$APP.sI.C?$APP.sI.C(I):$APP.sI.call(null,I);return F.call(D,J.call($APP.yYc,$APP.EK(I,$APP.Aw)),$APP.yYc.C($APP.EK(z,$APP.Aw)))},$APP.mh.A(function(z){var D=$APP.nG(),F=$APP.gI?$APP.gI(D):$APP.iI.call(null,D);return $APP.IMa(D,F,z,e)},g));var x=$APP.VI(e);a=OJd(x,e,b,a,h);return $APP.y(g)||$APP.y(p)||$APP.Lg.A($APP.mx.C(a),$APP.mx.C(x))?new $APP.m(null,6,[$APP.BRc,a,$APP.r5c,
$APP.mh.A($APP.dw,g),$APP.Ix,p,$APP.h$c,d,$APP.KBc,c,$APP.qSa,new $APP.m(null,2,[$APP.nXa,!0,$APP.DSa,f],null)],null):null},QJd=function(a,b,c){var d=$APP.Ec($APP.A(b.pages)),e=d.shapes,f=$APP.VI(a);f=$APP.EK(f,$APP.Dw);f=$APP.v5b.C(f);var g=$APP.Ug(f,$APP.ij.C($APP.yc(f)));e=$APP.Rg($APP.$l.A(function(r,u){var x=u.id;return new $APP.m(null,2,[$APP.Ek,x,$APP.yYc,$APP.B.A(r,$APP.H.A(g,x))?u.nonce:Date.now()],null)},e));var h=$APP.nG();f=function(){var r=$APP.wt.A($APP.v($APP.Xsd),new $APP.O(null,2,
5,$APP.Q,[h,a],null));return $APP.n(r)?r:$APP.Rg($APP.mh.A(function(u){return $APP.Zr.F(u,$APP.Ek,$APP.t)},MJd(h,a)))}();b=PJd(b,d,e,f,a,c);d=$APP.nf(b);f=$APP.H.A(d,$APP.BRc);b=$APP.H.A(d,$APP.KBc);var k=$APP.H.A(d,$APP.h$c),p=$APP.H.A(d,$APP.r5c),q=$APP.H.A(d,$APP.Ix);c=$APP.H.A(d,$APP.qSa);if($APP.y(d)){d=$APP.lk.G(q,new $APP.O(null,1,5,$APP.Q,[f],null),$APP.G([p]));b=$APP.n($APP.wf(function(r){return $APP.B.A("group",$APP.Bl.C(r))},b))?$APP.S.F(c,$APP.cGc,$APP.jF):$APP.n(function(){var r=$APP.of(k);
return $APP.n(r)?$APP.uf(function(u){return $APP.B.A("group",$APP.Bl.C(u))},k):r}())?$APP.S.F(c,$APP.cGc,$APP.JSc):$APP.n($APP.wf(function(r){return $APP.B.A("line",$APP.Bl.C(r))&&$APP.B.A("arrow ",$APP.Mm.C($APP.xQc.C(r)))},b))?$APP.S.F(c,$APP.cGc,$APP.S1c):c;$APP.Ch.K($APP.Xsd,$APP.Yr,new $APP.O(null,2,5,$APP.Q,[h,a],null),e);if($APP.Qd(new $APP.Ng(null,new $APP.m(null,1,[$APP.S1c,null],null),null),$APP.cGc.C(b)))return $APP.pG($APP.Egd,new $APP.m(null,2,[$APP.ot,d,$APP.qSa,b],null));e=$APP.Egd.C($APP.v($APP.lG));
c=$APP.lk.A($APP.ot.C(e),d);e=$APP.On.G($APP.G([b,$APP.qSa.C(e)]));$APP.pG($APP.Egd,$APP.lf);return $APP.qI?$APP.qI(h,c,e):$APP.rI.call(null,h,c,e)}return null},RJd=function(a){return $APP.gl(null,function(){return $APP.gl(function(){var b=$APP.n(a)?$APP.pi(a):a;return $APP.n(b)?b:$APP.mu?$APP.mu():$APP.nu.call(null)}(),function(b){return $APP.gl($APP.n(a)?a:$APP.t.C(b),function(c){return $APP.gl($APP.nG(),function(d){return $APP.gl(function(){var e=$APP.jf([$APP.FK($APP.Bw),$APP.jVa,$APP.FK($APP.Dw),
new $APP.m(null,6,[$APP.Ek,$APP.t.C(b),$APP.Xn,c,$APP.Bw,$APP.jVa,$APP.sB,$APP.lf,$APP.yYc,1,$APP.C5b,$APP.Wf],null)]);e=new $APP.O(null,1,5,$APP.Q,[$APP.Ag([$APP.Kw,$APP.mx,$APP.fx,$APP.bw,$APP.cw,$APP.Hx,$APP.Vw,$APP.Jw,$APP.Lw],[b,e,!1,$APP.Wo.I?$APP.Wo.I():$APP.Wo.call(null),$APP.Wo.I?$APP.Wo.I():$APP.Wo.call(null),$APP.Yv,"whiteboard",$APP.Ro.C?$APP.Ro.C(c):$APP.Ro.call(null,c),c])],null);return $APP.oI?$APP.oI(e):$APP.rI.call(null,e)}(),function(){return $APP.Zk(function(){$APP.zG(new $APP.O(null,
2,5,$APP.Q,[d,$APP.ilb],null),function(e){return $APP.Fe.A($APP.Rg(e),$APP.Ro.C?$APP.Ro.C(c):$APP.Ro.call(null,c))});return c}())})})})})})},SJd=function(a){a=$APP.gQ.C(a);return $APP.zl.A($APP.vxb,a)},TJd=function(a){var b=$APP.rt.C($APP.VI(a));a=SJd(a);a=$APP.Rf.A(function(d){return $APP.B.A(b,$APP.rt.C($APP.Zw.C(d)))},a);var c=$APP.Rg($APP.zl.A($APP.kb,$APP.mh.A(function(d){return $APP.wt.F(d,new $APP.O(null,2,5,$APP.Q,[$APP.Uw,$APP.rt],null),null)},a)));a=$APP.zl.A(function(d){d=$APP.rt.C(d);
return c.C?c.C(d):c.call(null,d)},a);return $APP.y(a)?$APP.A(a):null},UJd=function(a,b){return $APP.gl(null,function(){return $APP.gl($APP.nG(),function(c){return $APP.gl($APP.jx.I?$APP.jx.I():$APP.jx.call(null),function(d){return $APP.gl($APP.VI(a),function(e){return $APP.gl(function(){var f=TJd(a);return $APP.n(f)?f:e}(),function(f){return $APP.gl($APP.dw(new $APP.m(null,6,[$APP.Uw,$APP.Mg(f,new $APP.O(null,1,5,$APP.Q,[$APP.rt],null)),$APP.Kw,d,$APP.Nw,$APP.n(b)?b:"",$APP.Hx,$APP.Yv,$APP.Yw,new $APP.m(null,
2,[$APP.Jw,$APP.Ro.C?$APP.Ro.C(a):$APP.Ro.call(null,a),$APP.Lw,a],null),$APP.Zw,new $APP.m(null,1,[$APP.Jw,a],null)],null)),function(g){return $APP.gl(function(){var h=new $APP.O(null,1,5,$APP.Q,[g],null),k=new $APP.m(null,1,[$APP.nXa,!0],null);return $APP.qI?$APP.qI(c,h,k):$APP.rI.call(null,c,h,k)}(),function(){return $APP.Zk(d)})})})})})})})},VJd=function(){return $APP.gl(null,function(){return $APP.gl(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.gl(a.text(),function(b){return $APP.gl($APP.gE($APP.lf,
b),function(c){return $APP.Zk(c)})})})})},WJd=function(a){var b=$APP.xpb();return($APP.$c(b)||$APP.B.A(1,$APP.yc(b))&&$APP.B.A(a,$APP.Jw.C($APP.A(b))))&&$APP.nb($APP.wt.A($APP.v($APP.lG),new $APP.O(null,1,5,$APP.Q,[$APP.Rkb],null)))},XJd=function(a){var b=$APP.BH();$APP.n(b)&&$APP.yf.A(b.api.updateShapes,$APP.yi(a))},YJd=function(a){var b=$APP.BH();$APP.n(b)&&(b=$APP.Ec($APP.A(b.pages)),$APP.n(b)&&(a=new $APP.O(null,2,5,$APP.Q,[$APP.Jw,a],null),a=$APP.sI.C?$APP.sI.C(a):$APP.sI.call(null,a),$APP.n(a)&&
(a=$APP.EK(a,$APP.Dw),a=$APP.v5b.C(a),$APP.y(a)&&b.updateShapesIndex($APP.yi(a)))))},ZJd=function(a){return null!=a?$APP.hl($APP.gl(null,function(){return $APP.gl(VJd(),function(b){var c=$APP.nf(b);b=$APP.H.A(c,$APP.dx);c=$APP.H.A(c,$APP.qy);var d=$APP.A(b);b=$APP.w5b(d,c);d=$APP.EK(d,$APP.Dw);c=$APP.C5b.C(d);d=$APP.sB.C(d);a.cloneShapesIntoCurrentPage($APP.xi(new $APP.m(null,3,[$APP.F5b,b,$APP.C5b,c,$APP.sB,d],null)));b=$APP.Tkb();return $APP.Zk(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",
b)}):null},$Jd=function(a){a.cleanup($APP.mh.A(function(b){return b.id},a.shapes))},cKd=function(a,b){b=$APP.Po.G(b,$APP.G([new $APP.m(null,1,[$APP.Qo,!0],null)]));b=$APP.nf(b);var c=$APP.H.A(b,aKd),d=$APP.H.A(b,$APP.CK),e=$APP.H.A(b,bKd),f=$APP.nG();return $APP.gl(null,function(){return $APP.gl($APP.n(d)?$APP.DNb(f,a,new $APP.m(null,1,[$APP.Ft,100],null)):null,function(g){return $APP.gl($APP.mh.A(function(h){return $APP.Zr.F(h,$APP.Kw,$APP.t)},g),function(h){return $APP.gl($APP.n(c)?$APP.ENb(a):
null,function(k){return $APP.gl($APP.n(e)?$APP.FNb(a,100):null,function(p){return $APP.Zk($APP.xi(new $APP.m(null,3,[$APP.dx,k,$APP.qy,h,$APP.lA,p],null)))})})})})})},dKd=function(a){return $APP.fl($APP.a_b($APP.nG(),new $APP.O(null,1,5,$APP.Q,[$APP.Po.C(a)],null)),function(b){var c=(c=$APP.y(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.C.F(c,0,null),$APP.C.F(c,1,null),c=$APP.C.F(c,2,null),$APP.d_b($APP.n(c)?c:b)):null})},eKd=function(){return $APP.v2b(null)},fKd=function(){return $APP.w2b(null)},wKd=
function(a){return $APP.Ag([gKd,hKd,iKd,jKd,kKd,lKd,mKd,nKd,$APP.tC,oKd,pKd,qKd,rKd,$APP.cA,sKd,tKd,uKd,vKd],[function(b){if($APP.n($APP.Uo.C?$APP.Uo.C(b):$APP.Uo.call(null,b)))var c=$APP.Jw.C($APP.kob($APP.nG(),$APP.pi(b)));else c=$APP.Jw.C,b=new $APP.O(null,2,5,$APP.Q,[$APP.Jw,$APP.Ro.C?$APP.Ro.C(b):$APP.Ro.call(null,b)],null),b=$APP.sI.C?$APP.sI.C(b):$APP.sI.call(null,b),c=c.call($APP.Jw,b);return c},function(b){return $APP.xi($APP.kic(b))},function(b){return $APP.WI(b,!1)},function(b){return $APP.blb($APP.n(b)?
$APP.kic(b):null)},function(b){return RJd(b)},$APP.WF,function(b){return $APP.bZb(b,new $APP.m(null,1,[$APP.jQ,!1],null))},$APP.aJ,cKd,dKd,$APP.c_b,function(b,c){return $APP.efb(b,$APP.G([$APP.Pz,c]))},function(b){return $APP.gl(null,function(){return $APP.gl(UJd(a,b),function(c){return $APP.Zk($APP.t.C(c))})})},function(b){return $APP.UK.G($APP.G([$APP.nh.C(b)]))},function(b,c){return $APP.wH(function(){return(0,$APP.Zec)(b,$APP.On.G($APP.G([$APP.Po.G(c,$APP.G([$APP.Qo,!0])),new $APP.m(null,1,[$APP.Ey,
!0],null)])))})},function(b,c){return $APP.gH($APP.nG(),$APP.rt.C($APP.VI(b)),$APP.nh.C(c))},function(b){var c=$APP.n($APP.Uo.C?$APP.Uo.C(b):$APP.Uo.call(null,b))?$APP.Jw.C($APP.kob($APP.nG(),$APP.pi(b))):null;c=$APP.n(c)?c:b;var d=$APP.SI(c),e=$APP.aJ(c);return $APP.n(d)?$APP.n(e)?$APP.HOb(c,new $APP.m(null,1,[$APP.mO,b],null)):$APP.lO($APP.WI(b,!1)):null},function(b){return $APP.xi($APP.Jnb(b))}])},yKd=function(a,b,c){return $APP.hl($APP.gl(null,function(){return $APP.gl($APP.v(xKd),function(){return $APP.gl($APP.gl(null,
function(){return $APP.gl($APP.pG(new $APP.O(null,2,5,$APP.Q,[$APP.P8c,$APP.nG()],null),$APP.Wo.I?$APP.Wo.I():$APP.Wo.call(null)),function(){return $APP.Zk(QJd(a,b,c.replace))})}),function(d){return $APP.Zk($APP.Df(xKd,d))})})}),function(d){console.error(d);return $APP.CD.C(new $APP.O(null,2,5,$APP.Q,[$APP.$B,["Save whiteboard failed, error:",$APP.t.C(d.cause)].join("")],null))})},vKd=new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),sKd=new $APP.N(null,"exportToImage","exportToImage",
-154356643),rKd=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),zKd=new $APP.N(null,"KeyboardShortcut","KeyboardShortcut",1250004264),bKd=new $APP.N(null,"files?","files?",-1267491104),gKd=new $APP.N(null,"getBlockPageName","getBlockPageName",-1656908032),AKd=new $APP.N(null,"renderers","renderers",-1460292282),BKd=new $APP.N(null,"model","model",331153215),iKd=new $APP.N(null,"getRedirectPageName","getRedirectPageName",-1858136925),lKd=new $APP.N(null,"isMobile","isMobile",-2043133877),jKd=
new $APP.N(null,"setCurrentPdf","setCurrentPdf",-63289336),CKd=new $APP.N(null,"onMount","onMount",-876858467),mKd=new $APP.N(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),pKd=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),DKd=new $APP.N(null,"onPersist","onPersist",-1848738852),EKd=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),qKd=new $APP.N(null,"copyToClipboard","copyToClipboard",1092115063),uKd=new $APP.N(null,"redirectToPage","redirectToPage",87147838),kKd=
new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",554297706),oKd=new $APP.N(null,"saveAsset","saveAsset",-668047853),FKd=new $APP.N(null,"BacklinksCount","BacklinksCount",364670631),GKd=new $APP.N(null,"Block","Block",-1959785792),tKd=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),HKd=new $APP.N(null,"Page","Page",-1267059506),aKd=new $APP.N(null,"pages?","pages?",-2065014049),IKd=new $APP.N(null,"PageName","PageName",-164991013),JKd=new $APP.N(null,"Tweet","Tweet",-452258680),
nKd=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579),KKd=new $APP.N(null,"BlockReference","BlockReference",-120254741),hKd=new $APP.N(null,"inflateAsset","inflateAsset",-1449040639);$APP.W4a("tldraw");var LKd=$APP.ll(616);var MKd,NKd,xKd,OKd,PKd;$APP.cAd={};MKd=$APP.NQ($APP.qa(LKd,"App"));$APP.fAd=$APP.qa(LKd,"generateJSXFromModel");
NKd=new $APP.m(null,8,[HKd,$APP.HE($APP.LE,function(a){return(0,$APP.iW)(new $APP.m(null,2,[$APP.hA,$APP.WI($APP.qa(a,"pageName"),!1),$APP.Ey,!0],null))},null,"frontend.extensions.tldraw/page-cp"),GKd,$APP.HE($APP.LE,function(a){a=$APP.Rh($APP.qa(a,"blockId"));var b=$APP.ckb($APP.Cyc);a=b.C?b.C(a):b.call(null,a);return $APP.xE(a)},null,"frontend.extensions.tldraw/block-cp"),EKd,$APP.HE($APP.LE,function(a){return $APP.xE($APP.fT(new $APP.m(null,1,[$APP.sX,!0],null),$APP.nG(),$APP.Rh($APP.qa(a,"blockId")),
new $APP.m(null,2,[$APP.Smc,$APP.qa(a,"endSeparator"),$APP.Tmc,$APP.qa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),JKd,$APP.HE($APP.LE,function(a){return(0,$APP.Mlc)($APP.qa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),IKd,$APP.HE($APP.LE,function(a){return(0,$APP.SS)(new $APP.m(null,1,[$APP.sX,!0],null),new $APP.m(null,1,[$APP.Jw,$APP.qa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),FKd,function(a){return $APP.yf.A($APP.iAd,$APP.mh.A(function(b){return $APP.Po.G($APP.qa(a,
b),$APP.G([new $APP.m(null,1,[$APP.Qo,!0],null)]))},new $APP.O(null,3,5,$APP.Q,["id","className","options"],null)))},KKd,$APP.HE($APP.LE,function(a){return(0,$APP.Zkc)($APP.lf,$APP.qa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),zKd,$APP.HE($APP.LE,function(a){a=$APP.WQ($APP.nh.C($APP.qa(a,"action")));return"string"===typeof a?$APP.xE($APP.GT(a)):$APP.xE($APP.tn.A(" | ",$APP.mh.A($APP.GT,a)))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);xKd=$APP.Bh.C(null);
OKd=$APP.HE($APP.LE,function(a,b,c,d,e){return $APP.Y("div",{style:{overscrollBehavior:"none"},onBlur:function(f){f=$APP.qa(f,"target").tagName;var g=new $APP.Ng(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);f=g.C?g.C(f):g.call(null,f);return $APP.n(f)?$APP.iH():null},onWheel:$APP.GF,className:"draw tldraw whiteboard relative w-full h-full"},[$APP.n($APP.n(c)?$APP.nb(d):c)?$APP.Y("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.xE($APP.$Q("Loading onboarding whiteboard ..."))]):
null,$APP.xE(function(){var f=new $APP.m(null,6,[AKd,NKd,$APP.AIa,wKd(a),CKd,e,$APP.T6c,!0,DKd,function(g,h){return yKd(a,g,h)},BKd,b],null);return MKd.C?MKd.C(f):MKd.call(null,f)}())])},new $APP.O(null,2,5,$APP.Q,[$APP.KE,new $APP.m(null,1,[$APP.ibb,function(a,b){var c=$APP.A($APP.JE.C(a)),d=$APP.C.A($APP.JE.C(a),1),e=$APP.C.A($APP.JE.C(b),1),f=function(){var g=function(){var h=$APP.qa(d,"pages");h=null==h?null:$APP.A(h);return null==h?null:$APP.qa(h,"shapes")}();return $APP.Ug($APP.mh.A(function(h){return $APP.qa(h,
"id")},g),g)}();a=function(){var g=$APP.qa(e,"pages");g=null==g?null:$APP.A(g);return null==g?null:$APP.qa(g,"shapes")}();a=$APP.Rf.A(function(g){var h=$APP.H.A(f,$APP.qa(g,"id"));return $APP.n(h)?$APP.Lg.A($APP.qa(g,"type"),$APP.qa(h,"type")):null},a);$APP.y(a)&&XJd(a);YJd(c);return b}],null)],null),"frontend.extensions.tldraw/tldraw-inner");
PKd=$APP.HE($APP.LE,function(a,b,c,d){function e(h){if($APP.n(h)){h.appUndo=eKd;h.appRedo=fKd;var k=$APP.qa(h,"api");return $APP.n(k)?$APP.fl(f?ZJd(k):null,function(){$Jd(h.currentPage);$APP.clb(h,b);return d.C?d.C(h):d.call(null,h)}):null}return null}var f=WJd(a),g=$APP.G5b(a);return $APP.n(g)?OKd(a,g,f,c,e):null},new $APP.O(null,1,5,$APP.Q,[$APP.A8],null),"frontend.extensions.tldraw/tldraw-app-inner");
$APP.dAd=$APP.HE($APP.LE,function(a,b){var c=$APP.SE(null),d=$APP.C.F(c,0,null);c=$APP.C.F(c,1,null);$APP.TE(function(){$APP.n($APP.n(d)?b:d)&&$APP.clb(d,b);return function(){return $APP.gc}},new $APP.O(null,2,5,$APP.Q,[b,d],null));return PKd(a,b,d,c)},null,"frontend.extensions.tldraw/tldraw-app");$APP.gz.ii();
}).call(this);