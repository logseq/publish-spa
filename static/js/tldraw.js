(function(){
shadow$provide[610]=function(xa,ba,Sa,I){function u(v,y,C){var E,Q={},g=null,k=null;void 0!==C&&(g=""+C);void 0!==y.key&&(g=""+y.key);void 0!==y.ref&&(k=y.ref);for(E in y)r.call(y,E)&&!c.hasOwnProperty(E)&&(Q[E]=y[E]);if(v&&v.defaultProps)for(E in y=v.defaultProps,y)void 0===Q[E]&&(Q[E]=y[E]);return{$$typeof:X,type:v,key:g,ref:k,props:Q,_owner:z.current}}ba(18);xa=ba(21);var X=60103;I.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(ba=Symbol.for,X=ba("react.element"),I.Fragment=ba("react.fragment"));
var z=xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};I.jsx=u;I.jsxs=u};
shadow$provide[612]=function(xa,ba,Sa,I){Sa.exports=ba(610)};
shadow$provide[613]=function(xa,ba,Sa,I){function u(nc){for(var ad="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+nc,dd=1;dd<arguments.length;dd++)ad+="\x26args[]\x3d"+encodeURIComponent(arguments[dd]);return"Minified React error #"+nc+"; visit "+ad+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function X(nc){if(null==nc)return null;if("function"===typeof nc)return nc.displayName||nc.name||null;if("string"===typeof nc)return nc;
switch(nc){case T:return"Fragment";case R:return"Portal";case F:return"Profiler";case B:return"StrictMode";case ia:return"Suspense";case V:return"SuspenseList"}if("object"===typeof nc)switch(nc.$$typeof){case M:return(nc.displayName||"Context")+".Consumer";case L:return(nc._context.displayName||"Context")+".Provider";case J:var ad=nc.render;ad=ad.displayName||ad.name||"";return nc.displayName||(""!==ad?"ForwardRef("+ad+")":"ForwardRef");case aa:return X(nc.type);case W:return X(nc._render);case Z:ad=
nc._payload;nc=nc._init;try{return X(nc(ad))}catch(dd){}}return null}function z(nc,ad){for(var dd=nc._threadCount|0;dd<=ad;dd++)nc[dd]=nc._currentValue2,nc._threadCount=dd+1}function r(nc,ad,dd,Ud){if(Ud&&(Ud=nc.contextType,"object"===typeof Ud&&null!==Ud))return z(Ud,dd),Ud[dd];if(nc=nc.contextTypes){dd={};for(var rd in nc)dd[rd]=ad[rd];ad=dd}else ad=wa;return ad}function c(nc){if(Ja.call($a,nc))return!0;if(Ja.call(Ka,nc))return!1;if(za.test(nc))return $a[nc]=!0;Ka[nc]=!0;return!1}function v(nc,
ad,dd,Ud){if(null!==dd&&0===dd.type)return!1;switch(typeof ad){case "function":case "symbol":return!0;case "boolean":if(Ud)return!1;if(null!==dd)return!dd.acceptsBooleans;nc=nc.toLowerCase().slice(0,5);return"data-"!==nc&&"aria-"!==nc;default:return!1}}function y(nc,ad,dd,Ud){if(null===ad||"undefined"===typeof ad||v(nc,ad,dd,Ud))return!0;if(Ud)return!1;if(null!==dd)switch(dd.type){case 3:return!ad;case 4:return!1===ad;case 5:return isNaN(ad);case 6:return isNaN(ad)||1>ad}return!1}function C(nc,ad,
dd,Ud,rd,Fc,jd){this.acceptsBooleans=2===ad||3===ad||4===ad;this.attributeName=Ud;this.attributeNamespace=rd;this.mustUseProperty=dd;this.propertyName=nc;this.type=ad;this.sanitizeURL=Fc;this.removeEmptyString=jd}function E(nc){return nc[1].toUpperCase()}function Q(nc){if("boolean"===typeof nc||"number"===typeof nc)return""+nc;nc=""+nc;var ad=Da.exec(nc);if(ad){var dd="",Ud,rd=0;for(Ud=ad.index;Ud<nc.length;Ud++){switch(nc.charCodeAt(Ud)){case 34:ad="\x26quot;";break;case 38:ad="\x26amp;";break;case 39:ad=
"\x26#x27;";break;case 60:ad="\x26lt;";break;case 62:ad="\x26gt;";break;default:continue}rd!==Ud&&(dd+=nc.substring(rd,Ud));rd=Ud+1;dd+=ad}nc=rd!==Ud?dd+nc.substring(rd,Ud):dd}return nc}function g(nc,ad){var dd=Ga.hasOwnProperty(nc)?Ga[nc]:null,Ud;if(Ud="style"!==nc)Ud=null!==dd?0===dd.type:!(2<nc.length)||"o"!==nc[0]&&"O"!==nc[0]||"n"!==nc[1]&&"N"!==nc[1]?!1:!0;if(Ud||y(nc,ad,dd,!1))return"";if(null!==dd){nc=dd.attributeName;Ud=dd.type;if(3===Ud||4===Ud&&!0===ad)return nc+'\x3d""';dd.sanitizeURL&&
(ad=""+ad);return nc+'\x3d"'+(Q(ad)+'"')}return c(nc)?nc+'\x3d"'+(Q(ad)+'"'):""}function k(nc,ad){return nc===ad&&(0!==nc||1/nc===1/ad)||nc!==nc&&ad!==ad}function b(){if(null===la)throw Error(u(321));return la}function h(){if(0<Xa)throw Error(u(312));return{memoizedState:null,queue:null,next:null}}function l(){null===va?null===ua?(Ba=!1,ua=va=h()):(Ba=!0,va=ua):null===va.next?(Ba=!1,va=va.next=h()):(Ba=!0,va=va.next);return va}function m(nc,ad,dd,Ud){for(;Ra;)Ra=!1,Xa+=1,va=null,dd=nc(ad,Ud);D();
return dd}function D(){la=null;Ra=!1;ua=null;Xa=0;va=ab=null}function w(nc,ad){return"function"===typeof ad?ad(nc):ad}function t(nc,ad,dd){la=b();va=l();if(Ba){var Ud=va.queue;ad=Ud.dispatch;if(null!==ab&&(dd=ab.get(Ud),void 0!==dd)){ab.delete(Ud);Ud=va.memoizedState;do Ud=nc(Ud,dd.action),dd=dd.next;while(null!==dd);va.memoizedState=Ud;return[Ud,ad]}return[va.memoizedState,ad]}nc=nc===w?"function"===typeof ad?ad():ad:void 0!==dd?dd(ad):ad;va.memoizedState=nc;nc=va.queue={last:null,dispatch:null};
nc=nc.dispatch=f.bind(null,la,nc);return[va.memoizedState,nc]}function p(nc,ad){la=b();va=l();ad=void 0===ad?null:ad;if(null!==va){var dd=va.memoizedState;if(null!==dd&&null!==ad){var Ud=dd[1];a:if(null===Ud)Ud=!1;else{for(var rd=0;rd<Ud.length&&rd<ad.length;rd++)if(!ma(ad[rd],Ud[rd])){Ud=!1;break a}Ud=!0}if(Ud)return dd[0]}}nc=nc();va.memoizedState=[nc,ad];return nc}function f(nc,ad,dd){if(!(25>Xa))throw Error(u(301));if(nc===la)if(Ra=!0,nc={action:dd,next:null},null===ab&&(ab=new Map),dd=ab.get(ad),
void 0===dd)ab.set(ad,nc);else{for(ad=dd;null!==ad.next;)ad=ad.next;ad.next=nc}}function G(){}function x(nc){switch(nc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K(nc){if(void 0===nc||null===nc)return nc;var ad="";N.Children.forEach(nc,function(dd){null!=dd&&(ad+=dd)});return ad}function U(nc,ad){if(void 0===nc)throw Error(u(152,X(ad)||"Component"));}function H(nc,ad,dd){function Ud(jd,
Rb){var tb=Rb.prototype&&Rb.prototype.isReactComponent,Jb=r(Rb,ad,dd,tb),Lb=[],ib=!1,xb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Lb)return null},enqueueReplaceState:function(hd,Dd){ib=!0;Lb=[Dd]},enqueueSetState:function(hd,Dd){if(null===Lb)return null;Lb.push(Dd)}};if(tb){if(tb=new Rb(jd.props,Jb,xb),"function"===typeof Rb.getDerivedStateFromProps){var Xb=Rb.getDerivedStateFromProps.call(null,jd.props,tb.state);null!=Xb&&(tb.state=O({},tb.state,Xb))}}else if(la={},
tb=Rb(jd.props,Jb,xb),tb=m(Rb,jd.props,tb,Jb),null==tb||null==tb.render){nc=tb;U(nc,Rb);return}tb.props=jd.props;tb.context=Jb;tb.updater=xb;xb=tb.state;void 0===xb&&(tb.state=xb=null);if("function"===typeof tb.UNSAFE_componentWillMount||"function"===typeof tb.componentWillMount)if("function"===typeof tb.componentWillMount&&"function"!==typeof Rb.getDerivedStateFromProps&&tb.componentWillMount(),"function"===typeof tb.UNSAFE_componentWillMount&&"function"!==typeof Rb.getDerivedStateFromProps&&tb.UNSAFE_componentWillMount(),
Lb.length){xb=Lb;var qc=ib;Lb=null;ib=!1;if(qc&&1===xb.length)tb.state=xb[0];else{Xb=qc?xb[0]:tb.state;var Sc=!0;for(qc=qc?1:0;qc<xb.length;qc++){var bd=xb[qc];bd="function"===typeof bd?bd.call(tb,Xb,jd.props,Jb):bd;null!=bd&&(Sc?(Sc=!1,Xb=O({},Xb,bd)):O(Xb,bd))}tb.state=Xb}}else Lb=null;nc=tb.render();U(nc,Rb);if("function"===typeof tb.getChildContext&&(jd=Rb.childContextTypes,"object"===typeof jd)){var tc=tb.getChildContext(),gd;for(gd in tc)if(!(gd in jd))throw Error(u(108,X(Rb)||"Unknown",gd));
}tc&&(ad=O({},ad,tc))}for(;N.isValidElement(nc);){var rd=nc,Fc=rd.type;if("function"!==typeof Fc)break;Ud(rd,Fc)}return{child:nc,context:ad}}var O=ba(18),N=ba(21),R=60106,T=60107,B=60108,F=60114,L=60109,M=60110,J=60112,ia=60113,V=60120,aa=60115,Z=60116,W=60121,ha=60117,Y=60119,fa=60129,qa=60131;"function"===typeof Symbol&&Symbol.for&&(xa=Symbol.for,R=xa("react.portal"),T=xa("react.fragment"),B=xa("react.strict_mode"),F=xa("react.profiler"),L=xa("react.provider"),M=xa("react.context"),J=xa("react.forward_ref"),
ia=xa("react.suspense"),V=xa("react.suspense_list"),aa=xa("react.memo"),Z=xa("react.lazy"),W=xa("react.block"),ha=xa("react.fundamental"),Y=xa("react.scope"),fa=xa("react.debug_trace_mode"),qa=xa("react.legacy_hidden"));xa=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var wa={},ra=new Uint16Array(16);for(ba=0;15>ba;ba++)ra[ba]=ba+1;ra[15]=0;var za=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ja=Object.prototype.hasOwnProperty,Ka={},$a={},Ga={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(nc){Ga[nc]=new C(nc,0,!1,nc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(nc){var ad=nc[0];Ga[ad]=new C(ad,1,!1,nc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(nc){Ga[nc]=
new C(nc,2,!1,nc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(nc){Ga[nc]=new C(nc,2,!1,nc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(nc){Ga[nc]=new C(nc,3,!1,nc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(nc){Ga[nc]=new C(nc,3,!0,nc,null,!1,!1)});["capture","download"].forEach(function(nc){Ga[nc]=new C(nc,4,!1,nc,null,!1,!1)});["cols","rows","size","span"].forEach(function(nc){Ga[nc]=new C(nc,6,!1,nc,null,!1,!1)});["rowSpan","start"].forEach(function(nc){Ga[nc]=new C(nc,5,!1,nc.toLowerCase(),null,!1,!1)});var Na=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(nc){var ad=
nc.replace(Na,E);Ga[ad]=new C(ad,1,!1,nc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(nc){var ad=nc.replace(Na,E);Ga[ad]=new C(ad,1,!1,nc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(nc){var ad=nc.replace(Na,E);Ga[ad]=new C(ad,1,!1,nc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(nc){Ga[nc]=new C(nc,1,!1,nc.toLowerCase(),null,!1,!1)});
Ga.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(nc){Ga[nc]=new C(nc,1,!1,nc.toLowerCase(),null,!0,!0)});var Da=/["'&<>]/,ma="function"===typeof Object.is?Object.is:k,la=null,ua=null,va=null,Ba=!1,Ra=!1,ab=null,Xa=0,Qa=null,Za={readContext:function(nc){var ad=Qa.threadID;z(nc,ad);return nc[ad]},useContext:function(nc){b();var ad=Qa.threadID;z(nc,ad);return nc[ad]},useMemo:p,useReducer:t,useRef:function(nc){la=
b();va=l();var ad=va.memoizedState;return null===ad?(nc={current:nc},va.memoizedState=nc):ad},useState:function(nc){return t(w,nc)},useLayoutEffect:function(){},useCallback:function(nc,ad){return p(function(){return nc},ad)},useImperativeHandle:G,useEffect:G,useDebugValue:G,useDeferredValue:function(nc){b();return nc},useTransition:function(){b();return[function(nc){nc()},!1]},useOpaqueIdentifier:function(){return(Qa.identifierPrefix||"")+"R:"+(Qa.uniqueID++).toString(36)},useMutableSource:function(nc,
ad){b();return ad(nc._source)}},kb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Ob=O({menuitem:!0},kb),Nb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},db=["Webkit","ms","Moz","O"];Object.keys(Nb).forEach(function(nc){db.forEach(function(ad){ad=ad+nc.charAt(0).toUpperCase()+nc.substring(1);Nb[ad]=Nb[nc]})});var sb=/([A-Z])/g,hb=/^ms-/,Wa=N.Children.toArray,
gb=xa.ReactCurrentDispatcher,Ta={listing:!0,pre:!0,textarea:!0},Wb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Lc={},Dc={},uc=Object.prototype.hasOwnProperty,Rc={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},wd=function(){function nc(dd,Ud,rd){N.isValidElement(dd)?dd.type!==T?dd=[dd]:(dd=dd.props.children,dd=N.isValidElement(dd)?[dd]:Wa(dd)):dd=Wa(dd);dd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:dd,childIndex:0,context:wa,footer:""};
var Fc=ra[0];if(0===Fc){var jd=ra;Fc=jd.length;var Rb=2*Fc;if(!(65536>=Rb))throw Error(u(304));var tb=new Uint16Array(Rb);tb.set(jd);ra=tb;ra[0]=Fc+1;for(jd=Fc;jd<Rb-1;jd++)ra[jd]=jd+1;ra[Rb-1]=0}else ra[0]=ra[Fc];this.threadID=Fc;this.stack=[dd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Ud;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=rd&&rd.identifierPrefix||""}
var ad=nc.prototype;ad.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var dd=this.threadID;ra[dd]=ra[0];ra[0]=dd}};ad.pushProvider=function(dd){var Ud=++this.contextIndex,rd=dd.type._context,Fc=this.threadID;z(rd,Fc);var jd=rd[Fc];this.contextStack[Ud]=rd;this.contextValueStack[Ud]=jd;rd[Fc]=dd.props.value};ad.popProvider=function(){var dd=this.contextIndex,Ud=this.contextStack[dd],rd=this.contextValueStack[dd];this.contextStack[dd]=null;this.contextValueStack[dd]=
null;this.contextIndex--;Ud[this.threadID]=rd};ad.clearProviders=function(){for(var dd=this.contextIndex;0<=dd;dd--)this.contextStack[dd][this.threadID]=this.contextValueStack[dd]};ad.read=function(dd){if(this.exhausted)return null;var Ud=Qa;Qa=this;var rd=gb.current;gb.current=Za;try{for(var Fc=[""],jd=!1;Fc[0].length<dd;){if(0===this.stack.length){this.exhausted=!0;var Rb=this.threadID;ra[Rb]=ra[0];ra[0]=Rb;break}var tb=this.stack[this.stack.length-1];if(jd||tb.childIndex>=tb.children.length){var Jb=
tb.footer;""!==Jb&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===tb.type)this.currentSelectValue=null;else if(null!=tb.type&&null!=tb.type.type&&tb.type.type.$$typeof===L)this.popProvider(tb.type);else if(tb.type===ia){this.suspenseDepth--;var Lb=Fc.pop();if(jd){jd=!1;var ib=tb.fallbackFrame;if(!ib)throw Error(u(303));this.stack.push(ib);Fc[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Fc[this.suspenseDepth]+=Lb}Fc[this.suspenseDepth]+=Jb}else{var xb=tb.children[tb.childIndex++],
Xb="";try{Xb+=this.render(xb,tb.context,tb.domNamespace)}catch(qc){if(null!=qc&&"function"===typeof qc.then)throw Error(u(294));throw qc;}finally{}Fc.length<=this.suspenseDepth&&Fc.push("");Fc[this.suspenseDepth]+=Xb}}return Fc[0]}finally{gb.current=rd,Qa=Ud,D()}};ad.render=function(dd,Ud,rd){if("string"===typeof dd||"number"===typeof dd){rd=""+dd;if(""===rd)return"";if(this.makeStaticMarkup)return Q(rd);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+Q(rd);this.previousWasTextNode=!0;return Q(rd)}Ud=
H(dd,Ud,this.threadID);dd=Ud.child;Ud=Ud.context;if(null===dd||!1===dd)return"";if(!N.isValidElement(dd)){if(null!=dd&&null!=dd.$$typeof){rd=dd.$$typeof;if(rd===R)throw Error(u(257));throw Error(u(258,rd.toString()));}dd=Wa(dd);this.stack.push({type:null,domNamespace:rd,children:dd,childIndex:0,context:Ud,footer:""});return""}var Fc=dd.type;if("string"===typeof Fc)return this.renderDOM(dd,Ud,rd);switch(Fc){case qa:case fa:case B:case F:case V:case T:return dd=Wa(dd.props.children),this.stack.push({type:null,
domNamespace:rd,children:dd,childIndex:0,context:Ud,footer:""}),"";case ia:throw Error(u(294));case Y:throw Error(u(343));}if("object"===typeof Fc&&null!==Fc)switch(Fc.$$typeof){case J:la={};var jd=Fc.render(dd.props,dd.ref);jd=m(Fc.render,dd.props,jd,dd.ref);jd=Wa(jd);this.stack.push({type:null,domNamespace:rd,children:jd,childIndex:0,context:Ud,footer:""});return"";case aa:return dd=[N.createElement(Fc.type,O({ref:dd.ref},dd.props))],this.stack.push({type:null,domNamespace:rd,children:dd,childIndex:0,
context:Ud,footer:""}),"";case L:return Fc=Wa(dd.props.children),rd={type:dd,domNamespace:rd,children:Fc,childIndex:0,context:Ud,footer:""},this.pushProvider(dd),this.stack.push(rd),"";case M:Fc=dd.type;jd=dd.props;var Rb=this.threadID;z(Fc,Rb);Fc=Wa(jd.children(Fc[Rb]));this.stack.push({type:dd,domNamespace:rd,children:Fc,childIndex:0,context:Ud,footer:""});return"";case ha:throw Error(u(338));case Z:return Fc=dd.type,jd=Fc._init,Fc=jd(Fc._payload),dd=[N.createElement(Fc,O({ref:dd.ref},dd.props))],
this.stack.push({type:null,domNamespace:rd,children:dd,childIndex:0,context:Ud,footer:""}),""}throw Error(u(130,null==Fc?Fc:typeof Fc,""));};ad.renderDOM=function(dd,Ud,rd){var Fc=dd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===rd&&x(Fc);if(!Lc.hasOwnProperty(Fc)){if(!Wb.test(Fc))throw Error(u(65,Fc));Lc[Fc]=!0}var jd=dd.props;if("input"===Fc)jd=O({type:void 0},jd,{defaultChecked:void 0,defaultValue:void 0,value:null!=jd.value?jd.value:jd.defaultValue,checked:null!=jd.checked?jd.checked:jd.defaultChecked});
else if("textarea"===Fc){var Rb=jd.value;if(null==Rb){Rb=jd.defaultValue;var tb=jd.children;if(null!=tb){if(null!=Rb)throw Error(u(92));if(Array.isArray(tb)){if(!(1>=tb.length))throw Error(u(93));tb=tb[0]}Rb=""+tb}null==Rb&&(Rb="")}jd=O({},jd,{value:void 0,children:""+Rb})}else if("select"===Fc)this.currentSelectValue=null!=jd.value?jd.value:jd.defaultValue,jd=O({},jd,{value:void 0});else if("option"===Fc){tb=this.currentSelectValue;var Jb=K(jd.children);if(null!=tb){var Lb=null!=jd.value?jd.value+
"":Jb;Rb=!1;if(Array.isArray(tb))for(var ib=0;ib<tb.length;ib++){if(""+tb[ib]===Lb){Rb=!0;break}}else Rb=""+tb===Lb;jd=O({selected:void 0,children:void 0},jd,{selected:Rb,children:Jb})}}if(Rb=jd){if(Ob[Fc]&&(null!=Rb.children||null!=Rb.dangerouslySetInnerHTML))throw Error(u(137,Fc));if(null!=Rb.dangerouslySetInnerHTML){if(null!=Rb.children)throw Error(u(60));if(!("object"===typeof Rb.dangerouslySetInnerHTML&&"__html"in Rb.dangerouslySetInnerHTML))throw Error(u(61));}if(null!=Rb.style&&"object"!==
typeof Rb.style)throw Error(u(62));}Rb=jd;tb=this.makeStaticMarkup;Jb=1===this.stack.length;Lb="\x3c"+dd.type;a:if(-1===Fc.indexOf("-"))ib="string"===typeof Rb.is;else switch(Fc){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":ib=!1;break a;default:ib=!0}for(Dd in Rb)if(uc.call(Rb,Dd)){var xb=Rb[Dd];if(null!=xb){if("style"===Dd){var Xb=void 0,qc="",Sc="";for(Xb in xb)if(xb.hasOwnProperty(Xb)){var bd=
0===Xb.indexOf("--"),tc=xb[Xb];if(null!=tc){if(bd)var gd=Xb;else if(gd=Xb,Dc.hasOwnProperty(gd))gd=Dc[gd];else{var hd=gd.replace(sb,"-$1").toLowerCase().replace(hb,"-ms-");gd=Dc[gd]=hd}qc+=Sc+gd+":";Sc=Xb;bd=null==tc||"boolean"===typeof tc||""===tc?"":bd||"number"!==typeof tc||0===tc||Nb.hasOwnProperty(Sc)&&Nb[Sc]?(""+tc).trim():tc+"px";qc+=bd;Sc=";"}}xb=qc||null}Xb=null;ib?Rc.hasOwnProperty(Dd)||(Xb=Dd,Xb=c(Xb)&&null!=xb?Xb+'\x3d"'+(Q(xb)+'"'):""):Xb=g(Dd,xb);Xb&&(Lb+=" "+Xb)}}tb||Jb&&(Lb+=' data-reactroot\x3d""');
var Dd=Lb;Rb="";kb.hasOwnProperty(Fc)?Dd+="/\x3e":(Dd+="\x3e",Rb="\x3c/"+dd.type+"\x3e");a:{tb=jd.dangerouslySetInnerHTML;if(null!=tb){if(null!=tb.__html){tb=tb.__html;break a}}else if(tb=jd.children,"string"===typeof tb||"number"===typeof tb){tb=Q(tb);break a}tb=null}null!=tb?(jd=[],Ta.hasOwnProperty(Fc)&&"\n"===tb.charAt(0)&&(Dd+="\n"),Dd+=tb):jd=Wa(jd.children);dd=dd.type;rd=null==rd||"http://www.w3.org/1999/xhtml"===rd?x(dd):"http://www.w3.org/2000/svg"===rd&&"foreignObject"===dd?"http://www.w3.org/1999/xhtml":
rd;this.stack.push({domNamespace:rd,type:Fc,children:jd,childIndex:0,context:Ud,footer:Rb});this.previousWasTextNode=!1;return Dd};return nc}();I.renderToNodeStream=function(){throw Error(u(207));};I.renderToStaticMarkup=function(nc,ad){nc=new wd(nc,!0,ad);try{return nc.read(Infinity)}finally{nc.destroy()}};I.renderToStaticNodeStream=function(){throw Error(u(208));};I.renderToString=function(nc,ad){nc=new wd(nc,!1,ad);try{return nc.read(Infinity)}finally{nc.destroy()}};I.version="17.0.2"};
shadow$provide[615]=function(xa,ba,Sa,I){Sa.exports=ba(613)};
shadow$provide[616]=function(xa,ba,Sa,I){function u(){if(!vr&&(vr="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vr))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vr(Gu)}function X(a,d=0){return(Al[a[d+0]]+Al[a[d+1]]+Al[a[d+2]]+Al[a[d+3]]+"-"+Al[a[d+4]]+Al[a[d+5]]+"-"+Al[a[d+6]]+Al[a[d+7]]+"-"+Al[a[d+8]]+Al[a[d+9]]+"-"+Al[a[d+10]]+Al[a[d+11]]+Al[a[d+12]]+Al[a[d+13]]+Al[a[d+14]]+
Al[a[d+15]]).toLowerCase()}function z(a){let d=0;var n=0;for(var P of a)d+=P.w*P.h,n=Math.max(n,P.w);a.sort((sa,La)=>La.h-sa.h);n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),n),h:Infinity}];let ea=P=0;for(const sa of a)for(a=n.length-1;0<=a;a--){var ka=n[a];if(!(sa.w>ka.w||sa.h>ka.h)){sa.x=ka.x;sa.y=ka.y;ea=Math.max(ea,sa.y+sa.h);P=Math.max(P,sa.x+sa.w);sa.w===ka.w&&sa.h===ka.h?(ka=n.pop(),a<n.length&&(n[a]=ka)):sa.h===ka.h?(ka.x+=sa.w,ka.w-=sa.w):(sa.w!==ka.w&&n.push({x:ka.x+sa.w,y:ka.y,w:ka.w-
sa.w,h:sa.h}),ka.y+=sa.h,ka.h-=sa.h);break}}return{w:P,h:ea,fill:d/(P*ea)||0}}function r(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function c(a,d,n=0){const P=[a[0]+d[0]/2,a[1]+d[1]/2],ea=Yd.rotWith(a,P,n),ka=Yd.rotWith(Yd.add(a,[d[0],0]),P,n),sa=Yd.rotWith(Yd.add(a,d),P,n);a=Yd.rotWith(Yd.add(a,[0,d[1]]),P,n);return[["top",[ea,ka]],["right",[ka,sa]],["bottom",[sa,a]],["left",[a,ea]]]}function v(a,d,n,P){const [ea,ka]=a,[sa,La]=d,[Ua,eb]=n,[lb,rb]=P;return La/sa!==(rb-eb)/(lb-Ua)&&
(d=sa*(rb-eb)-La*(lb-Ua),0!==d&&(a=((ka-eb)*(lb-Ua)-(ea-Ua)*(rb-eb))/d,d=((ka-eb)*sa-(ea-Ua)*La)/d,0<=a&&0<=d&&1>=d))?r("intersection",[ea+a*sa,ka+a*La]):r("no intersection")}function y(a,d,n,P,ea=0){return b(n,P,ea,a,d)}function C(a,d,n,P=0){const {minX:ea,minY:ka,width:sa,height:La}=n;return y(a,d,[ea,ka],[sa,La],P)}function E(a,d,n,P){var ea=Yd.sub(a,n);n=Yd.sub(P,n);d=Yd.sub(d,a);P=n[0]*ea[1]-n[1]*ea[0];ea=d[0]*ea[1]-d[1]*ea[0];n=n[1]*d[0]-n[0]*d[1];return 0===P||0===ea?r("coincident"):0===n?
r("parallel"):0!==n&&(P/=n,ea/=n,0<=P&&1>=P&&0<=ea&&1>=ea)?r("intersection",Yd.add(a,Yd.mul(d,P))):r("no intersection")}function Q(a,d,n,P){var ea=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),ka=2*((d[0]-a[0])*(a[0]-n[0])+(d[1]-a[1])*(a[1]-n[1]));n=ka*ka-4*ea*(n[0]*n[0]+n[1]*n[1]+a[0]*a[0]+a[1]*a[1]-2*(n[0]*a[0]+n[1]*a[1])-P*P);if(0>n)return r("outside");if(0===n)return r("tangent");P=Math.sqrt(n);n=(-ka+P)/(2*ea);ea=(-ka-P)/(2*ea);if((0>n||1<n)&&(0>ea||1<ea))return 0>n&&0>ea||1<n&&1<ea?r("outside"):
r("inside");ka=[];0<=n&&1>=n&&ka.push(Yd.lrp(a,d,n));0<=ea&&1>=ea&&ka.push(Yd.lrp(a,d,ea));return r("intersection",...ka)}function g(a,d,n,P,ea,ka=0){if(0===P||0===ea||Yd.isEqual(a,d))return r("no intersection");P=0>P?P:-P;ea=0>ea?ea:-ea;a=Yd.sub(Yd.rotWith(a,n,-ka),n);d=Yd.sub(Yd.rotWith(d,n,-ka),n);var sa=Yd.sub(d,a),La=sa[0]*sa[0]/P/P+sa[1]*sa[1]/ea/ea;sa=2*a[0]*sa[0]/P/P+2*a[1]*sa[1]/ea/ea;const Ua=[];P=sa*sa-4*La*(a[0]*a[0]/P/P+a[1]*a[1]/ea/ea-1);0===P?Ua.push(-sa/2/La):0<P&&(P=Math.sqrt(P),
Ua.push((-sa+P)/2/La),Ua.push((-sa-P)/2/La));La=Ua.filter(eb=>0<=eb&&1>=eb).map(eb=>Yd.add(n,Yd.add(a,Yd.mul(Yd.sub(d,a),eb)))).map(eb=>Yd.rotWith(eb,n,ka));return r("intersection",...La)}function k(a,d,n){const P=[];for(let ea=1;ea<n.length;ea++){const ka=E(a,d,n[ea-1],n[ea]);ka&&P.push(...ka.points)}return 0===P.length?r("no intersection"):r("intersection",...n)}function b(a,d,n,P,ea){return c(a,d,n).reduce((ka,[sa,[La,Ua]])=>{(La=v(P,ea,La,Ua))&&ka.push(r(sa,...La.points));return ka},[]).filter(ka=>
ka.didIntersect)}function h(a,d,n,P){return c(a,d).reduce((ea,[ka,[sa,La]])=>{(sa=E(n,P,sa,La))&&ea.push(r(ka,...sa.points));return ea},[]).filter(ea=>ea.didIntersect)}function l(a,d,n,P){return c(a,d).reduce((ea,[ka,[sa,La]])=>{(sa=Q(sa,La,n,P))&&ea.push($f(Ie({},sa),{message:ka}));return ea},[]).filter(ea=>ea.didIntersect)}function m(a,d,n,P,ea,ka=0){return c(a,d).reduce((sa,[La,[Ua,eb]])=>{(Ua=g(Ua,eb,n,P,ea,ka))&&sa.push($f(Ie({},Ua),{message:La}));return sa},[]).filter(sa=>sa.didIntersect)}function D(a,
d,n){return c(a,d).reduce((P,[ea,[ka,sa]])=>{ka=k(ka,sa,n);ka.didIntersect&&P.push(r(ea,...ka.points));return P},[]).filter(P=>P.didIntersect)}function w(a,d,n){return c(a,d).reduce((P,[ea,[ka,sa]])=>{{const La=[];for(let Ua=1;Ua<n.length+1;Ua++){const eb=E(ka,sa,n[Ua-1],n[Ua%n.length]);eb&&La.push(...eb.points)}ka=0===La.length?r("no intersection"):r("intersection",...n)}ka.didIntersect&&P.push(r(ea,...ka.points));return P},[]).filter(P=>P.didIntersect)}function t(a,d,n,P=0,ea,ka){return d===n?l(ea,
ka,a,d):m(ea,ka,a,d,n,P)}function p(a,d,n){const {minX:P,minY:ea,width:ka,height:sa}=a;return h([P,ea],[ka,sa],d,n)}function f(a){for(var d=arguments.length,n=Array(1<d?d-1:0),P=1;P<d;P++)n[P-1]=arguments[P];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function G(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?
window:"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:jx}function x(){Ia||f("Proxy not available")}function K(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function U(a){return"function"===typeof a}function H(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function O(a){return null!==a&&"object"===typeof a}function N(a){if(!O(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&
a.constructor;return"function"===typeof a&&a.toString()===ob}function R(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function T(a,d,n){xp(a,d,{enumerable:!1,writable:!0,configurable:!0,value:n})}function B(a,d,n){xp(a,d,{enumerable:!1,writable:!1,configurable:!0,value:n})}function F(a,d){var n="isMobX"+a;d.prototype[n]=!0;return function(P){return O(P)&&!0===P[n]}}function L(a){return a instanceof Map}function M(a){return a instanceof
Set}function J(a){var d=Object.keys(a);if(!yc)return d;var n=Object.getOwnPropertySymbols(a);return n.length?[].concat(d,n.filter(function(P){return bq.propertyIsEnumerable.call(a,P)})):d}function ia(a){return null===a?null:"object"===typeof a?""+a:a}function V(a,d){return bq.hasOwnProperty.call(a,d)}function aa(a,d){for(var n=0;n<d.length;n++){var P=d[n];P.enumerable=P.enumerable||!1;P.configurable=!0;"value"in P&&(P.writable=!0);Object.defineProperty(a,P.key,P)}}function Z(a,d,n){d&&aa(a.prototype,
d);n&&aa(a,n);Object.defineProperty(a,"prototype",{writable:!1});return a}function W(){W=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var n=arguments[d],P;for(P in n)Object.prototype.hasOwnProperty.call(n,P)&&(a[P]=n[P])}return a};return W.apply(this,arguments)}function ha(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;Y(a,d)}function Y(a,d){Y=Object.setPrototypeOf||function(n,P){n.__proto__=P;return n};return Y(a,d)}function fa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function qa(a,d){if(a){if("string"===typeof a)return wa(a,d);var n=Object.prototype.toString.call(a).slice(8,-1);"Object"===n&&a.constructor&&(n=a.constructor.name);if("Map"===n||"Set"===n)return Array.from(a);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wa(a,d)}}function wa(a,d){if(null==d||d>a.length)d=a.length;for(var n=0,P=Array(d);n<d;n++)P[n]=a[n];return P}function ra(a,d){var n="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(n)return(n=
n.call(a)).next.bind(n);if(Array.isArray(a)||(n=qa(a))||d&&a&&"number"===typeof a.length){n&&(a=n);var P=0;return function(){return P>=a.length?{done:!0}:{done:!1,value:a[P++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function za(a){return Object.assign(function(d,n){Ja(d,n,a)},a)}function Ja(a,d,n){V(a,ce)||T(a,ce,W({},a[ce]));n.annotationType_!==Lh&&(a[ce][d]=n)}function Ka(a){V(a,
ce)||T(a,ce,W({},a[ce]));return a[ce]}function $a(a,d,n){void 0===d&&(d=Qb);void 0===n&&(n=Qb);a=new hh(a);d!==Qb&&Wc(oE,a,d,void 0);n!==Qb&&zd(a,n);return a}function Ga(a,d,n){return Uc(a)?a:Array.isArray(a)?Ef.array(a,{name:n}):N(a)?Ef.object(a,void 0,{name:n}):L(a)?Ef.map(a,{name:n}):M(a)?Ef.set(a,{name:n}):"function"!==typeof a||bd(a)||xd(a)?a:R(a)?Qu(a):Pu(n,a)}function Na(a){return a}function Da(a,d){return{annotationType_:a,options_:d,make_:ma,extend_:la}}function ma(a,d,n,P){var ea;if(null!=
(ea=this.options_)&&ea.bound)return null===this.extend_(a,d,n,!1)?0:1;if(P===a.target_)return null===this.extend_(a,d,n,!1)?0:2;if(bd(n.value))return 1;a=ua(a,this,d,n,!1);xp(P,d,a);return 2}function la(a,d,n,P){n=ua(a,this,d,n);return a.defineProperty_(d,n,P)}function ua(a,d,n,P,ea){var ka,sa,La,Ua,eb,lb,rb;void 0===ea&&(ea=Bg.safeDescriptors);P=P.value;if(null!=(ka=d.options_)&&ka.bound){var Vb;P=P.bind(null!=(Vb=a.proxy_)?Vb:a.target_)}return{value:Ta(null!=(sa=null==(La=d.options_)?void 0:La.name)?
sa:n.toString(),P,null!=(Ua=null==(eb=d.options_)?void 0:eb.autoAction)?Ua:!1,null!=(lb=d.options_)&&lb.bound?null!=(rb=a.proxy_)?rb:a.target_:void 0),configurable:ea?a.isPlainObject_:!0,enumerable:!1,writable:ea?!1:!0}}function va(a,d){return{annotationType_:a,options_:d,make_:Ba,extend_:Ra}}function Ba(a,d,n,P){var ea;if(P===a.target_)return null===this.extend_(a,d,n,!1)?0:2;if(null!=(ea=this.options_)&&ea.bound&&(!V(a.target_,d)||!xd(a.target_[d]))&&null===this.extend_(a,d,n,!1))return 0;if(xd(n.value))return 1;
a=ab(a,this,d,n,!1,!1);xp(P,d,a);return 2}function Ra(a,d,n,P){var ea;n=ab(a,this,d,n,null==(ea=this.options_)?void 0:ea.bound);return a.defineProperty_(d,n,P)}function ab(a,d,n,P,ea,ka){void 0===ka&&(ka=Bg.safeDescriptors);d=P.value;xd(d)||(d=Qu(d));if(ea){var sa;d=d.bind(null!=(sa=a.proxy_)?sa:a.target_);d.isMobXFlow=!0}return{value:d,configurable:ka?a.isPlainObject_:!0,enumerable:!1,writable:ka?!1:!0}}function Xa(a,d){return{annotationType_:a,options_:d,make_:Qa,extend_:Za}}function Qa(a,d,n){return null===
this.extend_(a,d,n,!1)?0:1}function Za(a,d,n,P){return a.defineComputedProperty_(d,W({},this.options_,{get:n.get,set:n.set}),P)}function kb(a,d){return{annotationType_:a,options_:d,make_:Ob,extend_:Nb}}function Ob(a,d,n){return null===this.extend_(a,d,n,!1)?0:1}function Nb(a,d,n,P){var ea,ka;return a.defineObservableProperty_(d,n.value,null!=(ea=null==(ka=this.options_)?void 0:ka.enhancer)?ea:Ga,P)}function db(a){return{annotationType_:"true",options_:a,make_:sb,extend_:hb}}function sb(a,d,n,P){var ea,
ka;if(n.get)return pg.make_(a,d,n,P);if(n.set){n=Ta(d.toString(),n.set);if(P===a.target_)return null===a.defineProperty_(d,{configurable:Bg.safeDescriptors?a.isPlainObject_:!0,set:n})?0:2;xp(P,d,{configurable:!0,set:n});return 2}if(P!==a.target_&&"function"===typeof n.value){var sa;if(R(n.value)){var La;return(null!=(La=this.options_)&&La.autoBind?Qu.bound:Qu).make_(a,d,n,P)}return(null!=(sa=this.options_)&&sa.autoBind?Pu.bound:Pu).make_(a,d,n,P)}sa=!1===(null==(ea=this.options_)?void 0:ea.deep)?
Ef.ref:Ef;if("function"===typeof n.value&&null!=(ka=this.options_)&&ka.autoBind){var Ua;n.value=n.value.bind(null!=(Ua=a.proxy_)?Ua:a.target_)}return sa.make_(a,d,n,P)}function hb(a,d,n,P){var ea,ka;if(n.get)return pg.extend_(a,d,n,P);if(n.set)return a.defineProperty_(d,{configurable:Bg.safeDescriptors?a.isPlainObject_:!0,set:Ta(d.toString(),n.set)},P);if("function"===typeof n.value&&null!=(ea=this.options_)&&ea.autoBind){var sa;n.value=n.value.bind(null!=(sa=a.proxy_)?sa:a.target_)}return(!1===(null==
(ka=this.options_)?void 0:ka.deep)?Ef.ref:Ef).extend_(a,d,n,P)}function Wa(a){if(!0===a.deep)var d=Ga;else{if(!1===a.deep)a=Na;else{a=a.defaultDecorator;var n;a=a?null!=(d=null==(n=a.options_)?void 0:n.enhancer)?d:Ga:Ga}d=a}return d}function gb(a,d,n){if(H(d))Ja(a,d,Pe);else return Uc(a)?a:N(a)?Ef.object(a,d,n):Array.isArray(a)?Ef.array(a,d):L(a)?Ef.map(a,d):M(a)?Ef.set(a,d):"object"===typeof a&&null!==a?a:Ef.box(a,d)}function Ta(a,d,n,P){function ea(){a:{var ka=P||this,sa=arguments,La=Bg.trackingDerivation,
Ua=!n||!La;jd();var eb=Bg.allowStateChanges;Ua&&(nc(),eb=Lc(!0));var lb=ad(!0),rb=fE++,Vb=Qv;Qv=rb;try{var Zb=d.apply(ka,sa);break a}catch(sc){var Tb=sc;throw sc;}finally{Qv!==rb&&f(30),Qv=Vb,void 0!==Tb&&(Bg.suppressReactionErrors=!0),Bg.allowStateChanges=eb,Bg.allowStateReads=lb,Rb(),Ua&&(Bg.trackingDerivation=La),Bg.suppressReactionErrors=!1}Zb=void 0}return Zb}void 0===n&&(n=!1);ea.isMobxAction=!0;gE&&(Hz.value=a,Object.defineProperty(ea,"name",Hz));return ea}function Wb(a,d){a=Lc(a);try{return d()}finally{Bg.allowStateChanges=
a}}function Lc(a){var d=Bg.allowStateChanges;Bg.allowStateChanges=a;return d}function Dc(a){switch(a.dependenciesState_){case ck.UP_TO_DATE_:return!1;case ck.NOT_TRACKING_:case ck.STALE_:return!0;case ck.POSSIBLY_STALE_:for(var d=ad(!0),n=nc(),P=a.observing_,ea=P.length,ka=0;ka<ea;ka++){var sa=P[ka];if(Ou(sa)){if(Bg.disableErrorBoundaries)sa.get();else try{sa.get()}catch(La){return Bg.trackingDerivation=n,Bg.allowStateReads=d,!0}if(a.dependenciesState_===ck.STALE_)return Bg.trackingDerivation=n,Bg.allowStateReads=
d,!0}}dd(a);Bg.trackingDerivation=n;Bg.allowStateReads=d;return!1}}function uc(a,d,n){var P=ad(!0);dd(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++Bg.runId;var ea=Bg.trackingDerivation;Bg.trackingDerivation=a;Bg.inBatch++;if(!0===Bg.disableErrorBoundaries)var ka=d.call(n);else try{ka=d.call(n)}catch(lb){ka=new Os(lb)}Bg.inBatch--;Bg.trackingDerivation=ea;var sa=a.observing_;d=a.observing_=a.newObserving_;n=ck.UP_TO_DATE_;ea=0;for(var La=a.unboundDepsCount_,Ua=
0;Ua<La;Ua++){var eb=d[Ua];0===eb.diffValue_&&(eb.diffValue_=1,ea!==Ua&&(d[ea]=eb),ea++);eb.dependenciesState_>n&&(n=eb.dependenciesState_)}d.length=ea;a.newObserving_=null;for(La=sa.length;La--;)Ua=sa[La],0===Ua.diffValue_&&rd(Ua,a),Ua.diffValue_=0;for(;ea--;)sa=d[ea],1===sa.diffValue_&&(sa.diffValue_=0,La=a,sa.observers_.add(La),sa.lowestObserverState_>La.dependenciesState_&&(sa.lowestObserverState_=La.dependenciesState_));n!==ck.UP_TO_DATE_&&(a.dependenciesState_=n,a.onBecomeStale_());Bg.allowStateReads=
P;return ka}function Rc(a){var d=a.observing_;a.observing_=[];for(var n=d.length;n--;)rd(d[n],a);a.dependenciesState_=ck.NOT_TRACKING_}function wd(a){var d=nc();try{return a()}finally{Bg.trackingDerivation=d}}function nc(){var a=Bg.trackingDerivation;Bg.trackingDerivation=null;return a}function ad(a){var d=Bg.allowStateReads;Bg.allowStateReads=a;return d}function dd(a){if(a.dependenciesState_!==ck.UP_TO_DATE_){a.dependenciesState_=ck.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
ck.UP_TO_DATE_}}function Ud(){(Bg.pendingReactions.length||Bg.inBatch||Bg.isRunningReactions)&&f(36);Iz=!0;if(Sv){var a=G();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);Bg=new Rv}}function rd(a,d){a.observers_["delete"](d);0===a.observers_.size&&Fc(a)}function Fc(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,Bg.pendingUnobservations.push(a))}function jd(){Bg.inBatch++}function Rb(){if(0===--Bg.inBatch){0<Bg.inBatch||Bg.isRunningReactions||Tv(xb);for(var a=Bg.pendingUnobservations,
d=0;d<a.length;d++){var n=a[d];n.isPendingUnobservation_=!1;0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Nu&&n.suspend_())}Bg.pendingUnobservations=[]}}function tb(a){var d=Bg.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&Bg.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<Bg.inBatch&&Fc(a);return!1}
function Jb(a){a.lowestObserverState_!==ck.STALE_&&(a.lowestObserverState_=ck.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===ck.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=ck.STALE_}))}function Lb(a){a.lowestObserverState_!==ck.STALE_&&(a.lowestObserverState_=ck.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===ck.POSSIBLY_STALE_?d.dependenciesState_=ck.STALE_:d.dependenciesState_===ck.UP_TO_DATE_&&(a.lowestObserverState_=ck.UP_TO_DATE_)}))}function ib(a){a.lowestObserverState_===
ck.UP_TO_DATE_&&(a.lowestObserverState_=ck.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===ck.UP_TO_DATE_&&(d.dependenciesState_=ck.POSSIBLY_STALE_,d.onBecomeStale_())}))}function xb(){Bg.isRunningReactions=!0;for(var a=Bg.pendingReactions,d=0;0<a.length;){++d===kE&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var n=a.splice(0),P=0,ea=n.length;P<ea;P++)n[P].runReaction_()}Bg.isRunningReactions=!1}function Xb(a){var d=Tv;Tv=function(n){return a(function(){return d(n)})}}
function qc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Sc(a){return function(d,n){if(U(d))return Ta(d.name||"\x3cunnamed action\x3e",d,a);if(U(n))return Ta(d,n,a);if(H(n))return Ja(d,n,a?Lz:Kz);if(H(d))return za(Da(a?"autoAction":Jz,{name:d,autoAction:a}))}}function bd(a){return U(a)&&!0===a.isMobxAction}function tc(a,d){function n(){a(Ua)}var P,ea;void 0===d&&(d=na);var ka=null!=(P=null==(ea=d)?void 0:ea.name)?P:"Autorun";if(d.scheduler||d.delay){var sa=
gd(d),La=!1;var Ua=new Kt(ka,function(){La||(La=!0,sa(function(){La=!1;Ua.isDisposed_||Ua.track(n)}))},d.onError,d.requiresObservable)}else Ua=new Kt(ka,function(){this.track(n)},d.onError,d.requiresObservable);Ua.schedule_();return Ua.getDisposer_()}function gd(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:nE}function hd(a,d,n){function P(){lb=!1;if(!Tb.isDisposed_){var sc=!1;Tb.track(function(){var Kc=Wb(!1,function(){return a(Tb)});sc=eb||!Zb(rb,Kc);Vb=rb;
rb=Kc});eb&&n.fireImmediately?sa(rb,Vb,Tb):!eb&&sc&&sa(rb,Vb,Tb);eb=!1}}var ea;void 0===n&&(n=na);var ka=null!=(ea=n.name)?ea:"Reaction",sa=ph(ka,n.onError?Dd(n.onError,d):d),La=!n.scheduler&&!n.delay,Ua=gd(n),eb=!0,lb=!1,rb,Vb,Zb=n.compareStructural?cg.structural:n.equals||cg["default"],Tb=new Kt(ka,function(){eb||La?P():lb||(lb=!0,Ua(P))},n.onError,n.requiresObservable);Tb.schedule_();return Tb.getDisposer_()}function Dd(a,d){return function(){try{return d.apply(this,arguments)}catch(n){a.call(this,
n)}}}function zd(a,d,n){return Wc(pE,a,d,n)}function Wc(a,d,n,P){var ea="function"===typeof P?hc(d,n):hc(d),ka=U(P)?P:n,sa=a+"L";ea[sa]?ea[sa].add(ka):ea[sa]=new Set([ka]);return function(){var La=ea[sa];La&&(La["delete"](ka),0===La.size&&delete ea[sa])}}function qb(a){!0===a.isolateGlobalState&&Ud();var d=a.useProxies,n=a.enforceActions;void 0!==d&&(Bg.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(Bg.verifyProxies=!0);void 0!==n&&(d="always"===n?"always":
"observed"===n,Bg.enforceActions=d,Bg.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(P){P in a&&(Bg[P]=!!a[P])});Bg.allowStateReads=!Bg.observableRequiresReaction;a.reactionScheduler&&Xb(a.reactionScheduler)}function wc(a,d,n,P){var ea=vd(d),ka=Kd(a,P)[ze];jd();try{Zc(ea).forEach(function(sa){ka.extend_(sa,ea[sa],n?sa in n?n[sa]:!0:!0)})}finally{Rb()}return a}
function sd(a){var d={name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(sd));return d}function Ed(){this.message="FLOW_CANCELLED"}function xd(a){return!0===(null==a?void 0:a.isMobXFlow)}function Uc(a,d){return a?void 0!==d?ue(a)?a[ze].values_.has(d):!1:ue(a)||!!a[ze]||wi(a)||Uv(a)||Ou(a):!1}function Id(a){if(ue(a))return a[ze].ownKeys_();f(38)}function Ce(a,d,n){a.set(d,n);return n}function cf(a,d){if(null==a||"object"!==typeof a||a instanceof
Date||!Uc(a))return a;if(iE(a)||Ou(a))return cf(a.get(),d);if(d.has(a))return d.get(a);if(od(a)){var n=Ce(d,a,Array(a.length));a.forEach(function(sa,La){n[La]=cf(sa,d)});return n}if(Ps(a)){var P=Ce(d,a,new Set);a.forEach(function(sa){P.add(cf(sa,d))});return P}if(Hr(a)){var ea=Ce(d,a,new Map);a.forEach(function(sa,La){ea.set(La,cf(sa,d))});return ea}var ka=Ce(d,a,{});Id(a).forEach(function(sa){bq.propertyIsEnumerable.call(a,sa)&&(ka[sa]=cf(a[sa],d))});return ka}function mc(a,d){return cf(a,new Map)}
function id(){f("trace() is not available in production builds");for(var a=!1,d=arguments.length,n=Array(d),P=0;P<d;P++)n[P]=arguments[P];"boolean"===typeof n[n.length-1]&&(a=n.pop());a:{switch(n.length){case 0:d=Bg.trackingDerivation;break a;case 1:d=hc(n[0]);break a;case 2:d=hc(n[0],n[1]);break a}d=void 0}if(!d)return f("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===Jt.NONE&&console.log("[mobx.trace] '"+
d.name_+"' tracing enabled");d.isTracing_=a?Jt.BREAK:Jt.LOG}function Gc(a,d){void 0===d&&(d=void 0);jd();try{return a.apply(d)}finally{Rb()}}function zb(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function Eb(a,d){var n=a.interceptors_||(a.interceptors_=[]);n.push(d);return K(function(){var P=n.indexOf(d);-1!==P&&n.splice(P,1)})}function Pa(a,d){var n=nc();try{var P=[].concat(a.interceptors_||[]);a=0;for(var ea=P.length;a<ea&&((d=P[a](d))&&!d.type&&f(14),d);a++);return d}finally{Bg.trackingDerivation=
n}}function Ib(a){return void 0!==a.changeListeners_&&0<a.changeListeners_.length}function xc(a,d){var n=a.changeListeners_||(a.changeListeners_=[]);n.push(d);return K(function(){var P=n.indexOf(d);-1!==P&&n.splice(P,1)})}function Ic(a,d){var n=nc();if(a=a.changeListeners_){a=a.slice();for(var P=0,ea=a.length;P<ea;P++)a[P](d);Bg.trackingDerivation=n}}function fd(a,d,n){var P=Kd(a,n)[ze];jd();try{var ea;null!=(ea=d)?ea:d=Ka(a);Zc(d).forEach(function(ka){return P.make_(ka,d[ka])})}finally{Rb()}return a}
function cb(a,d,n,P){void 0===n&&(n="ObservableArray");void 0===P&&(P=!1);x();d=new px(n,d,P,!1);B(d.values_,ze,d);n=new Proxy(d.values_,tE);d.proxy_=n;a&&a.length&&(P=Lc(!0),d.spliceWithArray_(0,0,a),Bg.allowStateChanges=P);return n}function nb(a,d){"function"===typeof Array.prototype[a]&&(Vv[a]=d(a))}function jb(a){return function(){var d=this[ze];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function Bb(a){return function(d,n){var P=this,ea=this[ze];ea.atom_.reportObserved();
return ea.dehanceValues_(ea.values_)[a](function(ka,sa){return d.call(n,ka,sa,P)})}}function Kb(a){return function(){var d=this,n=this[ze];n.atom_.reportObserved();n=n.dehanceValues_(n.values_);var P=arguments[0];arguments[0]=function(ea,ka,sa){return P(ea,ka,sa,d)};return n[a].apply(n,arguments)}}function od(a){return O(a)&&uE(a[ze])}function qd(a){if(L(a)||Hr(a))return a;if(Array.isArray(a))return new Map(a);if(N(a)){var d=new Map,n;for(n in a)d.set(n,a[n]);return d}return f(21,a)}function Kd(a,
d){var n;if(V(a,ze))return a;var P=null!=(n=null==d?void 0:d.name)?n:"ObservableObject";n=Qz;var ea=new Map;P=String(P);var ka;var sa=d?null!=(ka=d.defaultDecorator)?ka:db(d):void 0;d=new n(a,ea,P,sa);T(a,ze,d);return a}function ge(a){return Pz[a]||(Pz[a]={get:function(){return this[ze].getObservablePropValue_(a)},set:function(d){return this[ze].setObservablePropValue_(a,d)}})}function ue(a){return O(a)?BE(a[ze]):!1}function he(a){return{enumerable:!1,configurable:!0,get:function(){return this[ze].get_(a)},
set:function(d){this[ze].set_(a,d)}}}function ae(a){if(a>qx){for(var d=qx;d<a+100;d++)xp(rx.prototype,""+d,he(d));qx=a}}function Db(a,d,n){return new rx(a,d,n)}function hc(a,d){if("object"===typeof a&&null!==a){if(od(a))return void 0!==d&&f(23),a[ze].atom_;if(Ps(a))return a[ze];if(Hr(a)){if(void 0===d)return a.keysAtom_;var n=a.data_.get(d)||a.hasMap_.get(d);n||f(25,d,Ya(a));return n}if(ue(a)){if(!d)return f(26);(n=a[ze].values_.get(d))||f(27,d,Ya(a));return n}if(wi(a)||Ou(a)||Uv(a))return a}else if(U(a)&&
Uv(a[ze]))return a[ze];f(28)}function Ac(a,d){a||f(29);if(void 0!==d)return Ac(hc(a,d));if(wi(a)||Ou(a)||Uv(a)||Hr(a)||Ps(a))return a;if(a[ze])return a[ze];f(24,a)}function Ya(a,d){if(void 0!==d)a=hc(a,d);else{if(bd(a))return a.name;a=ue(a)||Hr(a)||Ps(a)?Ac(a):hc(a)}return a.name_}function ta(a,d,n){void 0===n&&(n=-1);return pa(a,d,n)}function pa(a,d,n,P,ea){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var ka=typeof a;if("function"!==ka&&"object"!==ka&&"object"!=
typeof d)return!1;ka=Sz.call(a);if(ka!==Sz.call(d))return!1;switch(ka){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=n&&n++}a=Fa(a);d=Fa(d);ka="[object Array]"===ka;if(!ka){if("object"!=typeof a||"object"!=
typeof d)return!1;var sa=a.constructor,La=d.constructor;if(sa!==La&&!(U(sa)&&sa instanceof sa&&U(La)&&La instanceof La)&&"constructor"in a&&"constructor"in d)return!1}if(0===n)return!1;0>n&&(n=-1);P=P||[];ea=ea||[];for(sa=P.length;sa--;)if(P[sa]===a)return ea[sa]===d;P.push(a);ea.push(d);if(ka){sa=a.length;if(sa!==d.length)return!1;for(;sa--;)if(!pa(a[sa],d[sa],n-1,P,ea))return!1}else{ka=Object.keys(a);sa=ka.length;if(Object.keys(d).length!==sa)return!1;for(;sa--;)if(La=ka[sa],!V(d,La)||!pa(a[La],
d[La],n-1,P,ea))return!1}P.pop();ea.pop();return!0}function Fa(a){return od(a)?a.slice():L(a)||Hr(a)||M(a)||Ps(a)?Array.from(a.entries()):a}function Va(a){a[Symbol.iterator]=wb;return a}function wb(){return this}function dc(a,d){const n=new Set(d),P=Object.values(a),ea=new Set(P.filter(ka=>n.has(ka.toId)||n.has(ka.fromId)));a=ea.size;for(d=-1;0!==d;)ea.forEach(ka=>{ka=ka.fromId;for(const sa of P)sa.fromId===ka&&ea.add(sa),sa.toId===ka&&ea.add(sa)}),d=ea.size-a,a=ea.size;return Array.from(ea.values())}
function Oc(a,d,n,P,ea,ka,sa,La){if(ea=d.getBindingPoint(ea,ka,sa,La))return{id:P,type:"line",fromId:a.id,toId:d.id,handleId:n,point:De.toFixed(ea.point),distance:ea.distance}}function kd(a,d){const n=a.getCenter(),P=d.getCenter();var ea=tk();ea=$f(Ie({},Ru.defaultProps),{id:ea,type:Ru.id,parentId:a.props.parentId,point:n});a=Oc(ea,a,"start",tk(),n,n,De.uni(De.sub(P,n)),!1);d=Oc(ea,d,"end",tk(),P,P,De.uni(De.sub(n,P)),!1);return a&&d?(ea.handles.start.point=[0,0],ea.handles.end.point=De.sub(P,n),
ea.handles.start.bindingId=a.id,ea.handles.end.bindingId=d.id,[ea,[a,d]]):null}function pe(){return new KE}function Be(){return new WeakMap}function Ne(a){if(!a)return zx(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:zx(a);if(~IE.call(d).indexOf("[native code]"))try{return new d}catch(n){}return zx(a)}function Sf(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function zf(a){return a.flags}function Uf(a){a=
JE.call(a);return a.substring(8,a.length-1)}function Bf(a){return a[Symbol.toStringTag]||Uf(a)}function ng(a){return EA(a).concat(Ax(a))}function oh(a,d,n){for(var P=RE(a),ea=0,ka=P.length,sa,La;ea<ka;++ea)if(sa=P[ea],"callee"!==sa&&"caller"!==sa)if(La=PE(a,sa)){La.get||La.set||(La.value=n.copier(La.value,n));try{OE(d,sa,La)}catch(Ua){d[sa]=La.value}}else d[sa]=n.copier(a[sa],n);return d}function Xg(a,d){var n=new d.Constructor;d.cache.set(a,n);a.forEach(function(P,ea){n.set(ea,d.copier(P,d))});return n}
function vg(a,d){var n=Ne(d.prototype);d.cache.set(a,n);for(var P in a)GA.call(a,P)&&(n[P]=d.copier(a[P],d));return n}function Wg(a,d){var n=Ne(d.prototype);d.cache.set(a,n);for(var P in a)GA.call(a,P)&&(n[P]=d.copier(a[P],d));P=Ax(a);for(var ea=0,ka=P.length,sa;ea<ka;++ea)sa=P[ea],QE.call(a,sa)&&(n[sa]=d.copier(a[sa],d));return n}function ki(a,d){return new d.Constructor(a.valueOf())}function Th(a,d){return a}function Bi(a,d){var n=new d.Constructor;d.cache.set(a,n);a.forEach(function(P){n.add(d.copier(P,
d))});return n}function yi(a){function d(ka,sa){sa.prototype=sa.Constructor=void 0;if(!ka||"object"!==typeof ka)return ka;if(sa.cache.has(ka))return sa.cache.get(ka);sa.prototype=ka.__proto__||TE(ka);sa.Constructor=sa.prototype&&sa.prototype.constructor;if(!sa.Constructor||sa.Constructor===Object)return ea(ka,sa);if(SE(ka))return P(ka,sa);var La=n[NE(ka)];return La?La(ka,sa):"function"===typeof ka.then?ka:ea(ka,sa)}a=Bx({},IA,a);var n={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,
Boolean:ki,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,Int32Array:a.arrayBuffer,Map:a.map,Number:ki,Object:a.object,Promise:Th,RegExp:a.regExp,Set:a.set,String:ki,WeakMap:Th,WeakSet:Th,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},P=n.Array,ea=n.Object;return function(ka){return d(ka,{Constructor:void 0,cache:LE(),
copier:d,prototype:void 0})}}function Kj(a,d){return(0,XE.default)(a,d,{arrayMerge:(n,P,ea)=>P})}function oj(a,d,n,P=!1){const [ea,ka]=d,[sa,La]=n;a=sa+(a-ea)/(ka-ea)*(La-sa);return P?sa<La?Math.max(Math.min(a,La),sa):Math.max(Math.min(a,sa),La):a}function Gi(a,d){return new Promise((n,P)=>{if("video"===d){const ea=document.createElement("video");ea.addEventListener("loadedmetadata",function(){n([this.videoWidth,this.videoHeight])},!1);ea.src=a}else if("image"===d){const ea=new Image;ea.onload=()=>
n([ea.width,ea.height]);ea.src=a;ea.onerror=ka=>P(ka)}else"pdf"===d&&n([595,842])})}function Ff(a){return Object.values(os).includes(a)}function Tf(a,d){return Ff(a)||null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:a}function Eg(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",
padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);return a}function ah(a,d,n=0){var P,ea,ka;if(!a)return[16,32];let sa;sa="string"===typeof d?d:`${null!=(P=d.fontStyle)?P:"normal"} ${null!=(ea=d.fontVariant)?ea:"normal"} ${null!=(ka=d.fontWeight)?ka:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!Cx.has(`${a}-${sa}-${n}`)){if(!Lr)return[10,
10];Lr.parentNode||document.body.appendChild(Lr);Lr.innerHTML=`${a}&#8203;`;Lr.style.font=sa;Lr.style.padding=n+"px";d=Lr.getBoundingClientRect();Cx.set(`${a}-${sa}-${n}`,[Math.ceil(d.width||1),Math.ceil(d.height||1)])}return Cx.get(`${a}-${sa}-${n}`)}function Ug(a){try{if("string"!==typeof a||!vh.test(a))throw TypeError("Invalid UUID");let d;const n=new Uint8Array(16);n[0]=(d=parseInt(a.slice(0,8),16))>>>24;n[1]=d>>>16&255;n[2]=d>>>8&255;n[3]=d&255;n[4]=(d=parseInt(a.slice(9,13),16))>>>8;n[5]=d&
255;n[6]=(d=parseInt(a.slice(14,18),16))>>>8;n[7]=d&255;n[8]=(d=parseInt(a.slice(19,23),16))>>>8;n[9]=d&255;n[10]=(d=parseInt(a.slice(24,36),16))/1099511627776&255;n[11]=d/4294967296&255;n[12]=d>>>24&255;n[13]=d>>>16&255;n[14]=d>>>8&255;n[15]=d&255;return!0}catch(d){return!1}}function Og(a,d=0,n){let P;return function(...ea){null==n?void 0:n(...ea);clearTimeout(P);P=setTimeout(()=>a.apply(ea),d)}}function Gb(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function Ub(){var a,d,n;return(null==
(n=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:n.call(d,"ui/developer-mode?"))||!1}function pc(a){return!!a}function lc(a=0){return new Promise(d=>setTimeout(d,a))}function Nc(a="noid"){Dx[a]||(Dx[a]=LA.createContext({}));return Dx[a]}function ld(a="noid"){return LA.useContext(Nc(a))}function Rd(a){const {callbacks:d}=ld(),n=KA.useRef(-1);return KA.useMemo(()=>{const P=ea=>{var ka,sa;const {order:La=0}=ea;if(!La){var Ua=ea.target;Ua.removeEventListener("pointerup",
P);Ua.releasePointerCapture(ea.pointerId);null==(ka=d.onPointerUp)?void 0:ka.call(d,{type:"selection",handle:a,order:La},ea);ka=Date.now();Ua=ka-n.current;300<Ua?n.current=ka:300>=Ua&&(null==(sa=d.onDoubleClick)?void 0:sa.call(d,{type:"selection",handle:a,order:La},ea),n.current=-1);ea.order=La+1}};return{onPointerDown:ea=>{var ka;const {order:sa=0}=ea;if(!sa){var La=fe(ea.currentTarget);La.setPointerCapture(ea.pointerId);La.addEventListener("pointerup",P);null==(ka=d.onPointerDown)?void 0:ka.call(d,
{type:"selection",handle:a,order:sa},ea);ea.order=sa+1}},onPointerMove:ea=>{var ka;const {order:sa=0}=ea;sa||(null==(ka=d.onPointerMove)?void 0:ka.call(d,{type:"selection",handle:a,order:sa},ea),ea.order=sa+1)},onPointerEnter:ea=>{var ka;const {order:sa=0}=ea;sa||(null==(ka=d.onPointerEnter)?void 0:ka.call(d,{type:"selection",handle:a,order:sa},ea),ea.order=sa+1)},onPointerLeave:ea=>{var ka;const {order:sa=0}=ea;sa||(null==(ka=d.onPointerLeave)?void 0:ka.call(d,{type:"selection",handle:a,order:sa},
ea),ea.order=sa+1)},onKeyDown:ea=>{var ka;null==(ka=d.onKeyDown)?void 0:ka.call(d,{type:"selection",handle:a,order:-1},ea)},onKeyUp:ea=>{var ka;null==(ka=d.onKeyUp)?void 0:ka.call(d,{type:"selection",handle:a,order:-1},ea)}}},[d])}function fe(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return fe(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function re(a,d,n){const P=Tu.useRef(!1),ea=Tu.useCallback(()=>{var ka;if(P.current){const sa=
null==(ka=a.current)?void 0:ka.getBoundingClientRect();sa&&(ka={minX:sa.left,maxX:sa.left+sa.width,minY:sa.top,maxY:sa.top+sa.height,width:sa.width,height:sa.height},d.updateBounds(ka),null==n?void 0:n(ka))}else P.current=!0},[a,n]);Tu.useEffect(()=>{const ka=a.current?$E(a.current):document,sa=Og(ea,100);ka.addEventListener("scroll",sa);window.addEventListener("resize",sa);return()=>{ka.removeEventListener("scroll",sa);window.removeEventListener("resize",sa)}},[]);Tu.useLayoutEffect(()=>{const ka=
new ResizeObserver(sa=>{sa[0].contentRect&&ea()});a.current&&ka.observe(a.current);return()=>{ka.disconnect()}},[a]);Tu.useEffect(()=>{ea();setTimeout(()=>{var ka,sa;null==(sa=null==(ka=a.current)?void 0:ka.querySelector(".tl-canvas"))?void 0:sa.focus()})},[a])}function af(a,d){return Object.keys(d).reduce((n,P)=>{const ea=d[P];return ea?n+`${`--${a}-${P}`}: ${ea};
`:n},"")}function Nd(a,d,n=".logseq-tldraw"){Ex.useLayoutEffect(()=>{const P=document.createElement("style"),ea=af(a,d);P.setAttribute("id",`${a}-theme`);P.setAttribute("data-selector",n);P.innerHTML=`
        ${n} {
          ${ea}
        }
      `;document.head.appendChild(P);return()=>{P&&document.head.contains(P)&&document.head.removeChild(P)}},[a,d,n])}function ff(a,d){Ex.useLayoutEffect(()=>{if(Fx.get(a))return()=>{};const n=document.createElement("style");n.innerHTML=d;n.setAttribute("id",a);document.head.appendChild(n);Fx.set(a,n);return()=>{n&&document.head.contains(n)&&(document.head.removeChild(n),Fx.delete(a))}},[a,d])}function Se(a,d){const n=Ex.useMemo(()=>Ie(Ie({},aF),a),[a]);Nd("tl",n,d);ff("tl-canvas",bF)}function Ue(a=
"noid"){Gx[a]||(Gx[a]=NA.createContext({}));return Gx[a]}function bf(a="noid"){return NA.useContext(Ue(a))}function jf(){const a=bf(),{callbacks:d}=ld(),n=MA.useRef(-1);return MA.useMemo(()=>({onPointerDown:P=>{var ea,ka,sa;if(!a.settings.penMode||"pen"===P.pointerType&&P.isPrimary){var {order:La=0}=P;La||(null==(ea=P.currentTarget)?void 0:ea.setPointerCapture(P.pointerId));P.isPrimary&&(null==(ka=d.onPointerDown)?void 0:ka.call(d,{type:"canvas",order:La},P),ea=Date.now(),ka=ea-n.current,300<ka?n.current=
ea:300>=ka&&(null==(sa=d.onDoubleClick)?void 0:sa.call(d,{type:"canvas",order:La},P),n.current=-1))}},onPointerMove:P=>{var ea;if(!a.settings.penMode||"pen"===P.pointerType&&P.isPrimary){var {order:ka=0}=P;null==(ea=d.onPointerMove)?void 0:ea.call(d,{type:"canvas",order:ka},P)}},onPointerUp:P=>{var ea,ka;if(!a.settings.penMode||"pen"===P.pointerType&&P.isPrimary){var {order:sa=0}=P;sa||(null==(ea=P.currentTarget)?void 0:ea.releasePointerCapture(P.pointerId));null==(ka=d.onPointerUp)?void 0:ka.call(d,
{type:"canvas",order:sa},P)}},onPointerEnter:P=>{var ea;if(!a.settings.penMode||"pen"===P.pointerType&&P.isPrimary){var {order:ka=0}=P;null==(ea=d.onPointerEnter)?void 0:ea.call(d,{type:"canvas",order:ka},P)}},onPointerLeave:P=>{var ea;if(!a.settings.penMode||"pen"===P.pointerType&&P.isPrimary){var {order:ka=0}=P;null==(ea=d.onPointerLeave)?void 0:ea.call(d,{type:"canvas",order:ka},P)}},onDrop:P=>Ji(this,null,function*(){P.preventDefault();"clientX"in P&&a.drop(P.dataTransfer,[P.clientX,P.clientY])}),
onDragOver:P=>{P.preventDefault()},onTouchEnd:P=>{let ea=a.selectedTool.id;"pencil"!==ea&&"highlighter"!==ea||P.preventDefault()}}),[d])}function ye(a,d,n){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*n):a*d*n/(d+n*a)}function qg(a,d,n,P=.15){return 0===P?Math.max(d,Math.min(a,n)):a<d?-ye(d-a,n-d,P)+d:a>n?+ye(a-n,n-d,P)+n:a}function Lf(a,[d,n],[P,ea]){const [[ka,sa],[La,Ua]]=a;return[qg(d,ka,sa,P),qg(n,La,Ua,ea)]}function ug(a,d,n){d in a?Object.defineProperty(a,d,{value:n,enumerable:!0,configurable:!0,
writable:!0}):a[d]=n;return a}function qh(a,d){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(a);d&&(P=P.filter(function(ea){return Object.getOwnPropertyDescriptor(a,ea).enumerable}));n.push.apply(n,P)}return n}function Mf(a){for(var d=1;d<arguments.length;d++){var n=null!=arguments[d]?arguments[d]:{};d%2?qh(Object(n),!0).forEach(function(P){ug(a,P,n[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):qh(Object(n)).forEach(function(P){Object.defineProperty(a,
P,Object.getOwnPropertyDescriptor(n,P))})}return a}function Sg(a){return a?a[0].toUpperCase()+a.slice(1):""}function Wh(a=!1,d){return a&&!cF.includes(d)}function Yg(a,d="",n=!1){const P=OA[a];d=P?P[d]||d:d;return"on"+Sg(a)+Sg(d)+(Wh(n,d)?"Capture":"")}function fg(a){a=a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var n=dF.includes(a)?"capturecapture":"capture";(n=!!~a.indexOf(n))&&(a=a.replace("capture",""));return{device:a,capture:n,passive:d}}function pi(a,
d=""){const n=OA[a];return a+(n?n[d]||d:d)}function rh(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function Wi(a){return Array.from(a.touches).filter(d=>{var n,P;return d.target===a.currentTarget||(null===(n=a.currentTarget)||void 0===n?void 0:null===(P=n.contains)||void 0===P?void 0:P.call(n,d.target))})}function Hh(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function Gf(a,d){const n=d.clientX-a.clientX,P=d.clientY-
a.clientY;return{angle:-(180*Math.atan2(n,P))/Math.PI,distance:Math.hypot(n,P),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function qf(a){return Wi(a).map(d=>d.identifier)}function If(a,d){const [n,P]=Array.from(a.touches).filter(ea=>d.includes(ea.identifier));return Gf(n,P)}function jh(a){const d=Hh(a);return"touches"in a?d.identifier:d.pointerId}function Ag(a){a=Hh(a);return[a.clientX,a.clientY]}function Xi(a){let {deltaX:d,deltaY:n,deltaMode:P}=a;1===P?(d*=40,n*=40):2===P&&(d*=800,
n*=800);return[d,n]}function ih(a,...d){return"function"===typeof a?a(...d):a}function bi(){}function ci(...a){return 0===a.length?bi:1===a.length?a[0]:function(){let d;for(const n of a)d=n.apply(this,arguments)||d;return d}}function pj([a,d],n){a=Math.abs(a);d=Math.abs(d);if(a>d&&a>n)return"x";if(d>a&&d>n)return"y"}function Ak(a){const [d,n]=a.overflow,[P,ea]=a._delta,[ka,sa]=a._direction;if(0>d&&0<P&&0>ka||0<d&&0>P&&0<ka)a._movement[0]=a._movementBound[0];if(0>n&&0<ea&&0>sa||0<n&&0>ea&&0<sa)a._movement[1]=
a._movementBound[1]}function Qi(a){Hx.set(a.key,a.engine);Ix.set(a.key,a.resolver)}function Rk(a={},d){const n={};for(const [P,ea]of Object.entries(d))switch(typeof ea){case "function":n[P]=ea.call(n,a[P],P,a);break;case "object":n[P]=Rk(a[P],ea);break;case "boolean":ea&&(n[P]=a[P])}return n}function qj(a,d,n={}){const {target:P,eventOptions:ea,window:ka,enabled:sa,transform:La}=a;var Ua=AF;if(null==a)a={};else{if(null==a)var eb={};else{eb={};var lb=Object.keys(a),rb;for(rb=0;rb<lb.length;rb++){var Vb=
lb[rb];0<=Ua.indexOf(Vb)||(eb[Vb]=a[Vb])}}if(Object.getOwnPropertySymbols)for(rb=Object.getOwnPropertySymbols(a),Vb=0;Vb<rb.length;Vb++)lb=rb[Vb],0<=Ua.indexOf(lb)||Object.prototype.propertyIsEnumerable.call(a,lb)&&(eb[lb]=a[lb]);a=eb}n.shared=Rk({target:P,eventOptions:ea,window:ka,enabled:sa,transform:La},zF);if(d){var Zb=Ix.get(d);n[d]=Rk(Mf({shared:n.shared},a),Zb)}else for(Zb in a)(d=Ix.get(Zb))&&(n[Zb]=Rk(Mf({shared:n.shared},a[Zb]),d));return n}function Vi(a,d){a.gestures.add(d);a.gestureEventStores[d]=
new WA(a,d);a.gestureTimeoutStores[d]=new BF}function ej(a,d,n,P,ea,ka){if(a.has(n)&&Hx.has(P)){var sa=n+"Start",La=n+"End";ea[P]=Ua=>{let eb=void 0;if(Ua.first&&sa in d)d[sa](Ua);n in d&&(eb=d[n](Ua));if(Ua.last&&La in d)d[La](Ua);return eb};ka[P]=ka[P]||{}}}function Ze(a,d={},n,P){const ea=Jx.default.useMemo(()=>new CF(a),[]);ea.applyHandlers(a,P);ea.applyConfig(d,n);Jx.default.useEffect(ea.effect.bind(ea));Jx.default.useEffect(()=>ea.clean.bind(ea),[]);if(void 0===d.target)return ea.bind.bind(ea)}
function Ih(a){a.forEach(Qi);return function(d,n){n=n||{};const P={},ea={},ka=new Set;for(let Vb in d)DF.test(Vb)?(ka.add(RegExp.lastMatch),ea[Vb]=d[Vb]):P[Vb]=d[Vb];const [sa,La,Ua]=[ea,P,ka];d={};ej(Ua,sa,"onDrag","drag",d,n);ej(Ua,sa,"onWheel","wheel",d,n);ej(Ua,sa,"onScroll","scroll",d,n);ej(Ua,sa,"onPinch","pinch",d,n);ej(Ua,sa,"onMove","move",d,n);ej(Ua,sa,"onHover","hover",d,n);const {handlers:eb,nativeHandlers:lb,config:rb}={handlers:d,config:n,nativeHandlers:La};return Ze(eb,rb,void 0,lb)}}
function Hi(a,d){return Ih([tF,wF,xF,yF,vF,uF])(a,d||{})}function Ej(a){const {viewport:d,inputs:n,callbacks:P}=ld(),ea=$v.useRef(void 0),ka=$v.useRef([0,0]),sa=$v.useRef(0),La=$v.useMemo(()=>({onWheel:Ua=>{var eb;({event:Ua}=Ua);Ua.preventDefault();const {deltaY:lb,deltaX:rb}=Ua;var Vb=0;if(Ua.ctrlKey||Ua.metaKey){Vb=Math.sign(Ua.deltaY);let Kc=lb;10<Math.abs(Ua.deltaY)&&(Kc=10*Vb);Vb=Kc}const [Zb,Tb,sc]=[rb,lb,Vb];"pinching"===n.state||sa.current>=Ua.timeStamp||(sa.current=Ua.timeStamp,(Ua.altKey||
Ua.ctrlKey||Ua.metaKey)&&0===Ua.buttons?(Vb=d.bounds,Ua=null!=(eb=n.currentScreenPoint)?eb:[Vb.width/2,Vb.height/2],eb=d.camera.zoom,d.onZoom(Ua,eb-sc/100*eb)):(eb=De.mul(Ua.shiftKey&&!Gb()?[Tb,0]:[Zb,Tb],.8),De.isEqual(eb,[0,0])||d.panCamera(eb)))},onPinchStart:({event:Ua,delta:eb,offset:lb,origin:rb})=>{var Vb;const Zb=a.current;Ua instanceof WheelEvent||!(Ua.target===Zb||null!=Zb&&Zb.contains(Ua.target))||(null==(Vb=P.onPinchStart)?void 0:Vb.call(P,{type:"canvas",order:0,delta:[...eb,lb[0]],offset:lb,
point:De.sub(rb,n.containerOffset)},Ua),ea.current=rb,ka.current=[0,0])},onPinchEnd:({event:Ua,offset:eb,origin:lb})=>{var rb;const Vb=a.current;Ua instanceof WheelEvent||!(Ua.target===Vb||null!=Vb&&Vb.contains(Ua.target))||"pinching"!==n.state||(null==(rb=P.onPinchEnd)?void 0:rb.call(P,{type:"canvas",order:0,delta:[0,0,eb[0]],offset:eb,point:De.sub(lb,n.containerOffset)},Ua),ka.current=[0,0])},onPinch:({event:Ua,offset:eb,origin:lb})=>{var rb,Vb=a.current;if(!(Ua instanceof WheelEvent)&&(Ua.target===
Vb||null!=Vb&&Vb.contains(Ua.target))){ea.current||(ea.current=lb);Vb=De.sub(ea.current,lb);var Zb=De.sub(Vb,ka.current);null==(rb=P.onPinch)?void 0:rb.call(P,{type:"canvas",order:0,delta:[...Zb,eb[0]],offset:eb,point:De.sub(lb,n.containerOffset)},Ua);ka.current=Vb}}}),[P]);Hi(La,{target:a,eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:gp.maxZoom,min:gp.minZoom})}})}function yb(a,d,n,P){Kx.useLayoutEffect(()=>{a.current.style.transform=
`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,n,d.rotation]);Kx.useLayoutEffect(()=>{const ea=a.current;ea.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;ea.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);Kx.useLayoutEffect(()=>{const ea=a.current;void 0!==P&&(ea.style.zIndex=P.toString())},[P])}function Ec(a,d){const {onPersist:n,onError:P,onMount:ea,onCreateAssets:ka,onCreateShapes:sa,onDeleteAssets:La,onDeleteShapes:Ua,onDrop:eb,
onPaste:lb,onCopy:rb,onCanvasDBClick:Vb}=d;YA.useLayoutEffect(()=>{const Zb=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,ea&&ea(a,null),()=>{Zb.forEach(Tb=>Tb());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);YA.useLayoutEffect(()=>{const Zb=[];n&&Zb.push(a.subscribe("persist",n));P&&Zb.push(a.subscribe("error",P));sa&&Zb.push(a.subscribe("create-shapes",sa));ka&&Zb.push(a.subscribe("create-assets",ka));Ua&&Zb.push(a.subscribe("delete-shapes",Ua));La&&Zb.push(a.subscribe("delete-assets",
La));eb&&Zb.push(a.subscribe("drop",eb));lb&&Zb.push(a.subscribe("paste",lb));rb&&Zb.push(a.subscribe("copy",rb));Vb&&Zb.push(a.subscribe("canvas-dbclick",Vb));return()=>Zb.forEach(Tb=>Tb())},[a,n,P])}function Qc(a){if("app"in a)return a.app;const [d]=ZA.useState(()=>new YE(a.model,a.Shapes,a.Tools,a.readOnly));ZA.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function nd(a,d){EF.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function yd(a){const d=ld(),{viewport:{bounds:n}}=
d;FF.useEffect(()=>{const P=sa=>{sa.preventDefault()},ea=sa=>{if(0!==sa.touches.length){var La=sa.touches[0].pageX,Ua=sa.touches[0].radiusX||0;(10>La-Ua||La+Ua>n.width-10)&&sa.preventDefault()}},ka=a.current;if(!ka)return()=>{};ka.addEventListener("touchstart",P,{passive:!0});ka.addEventListener("gestureend",P,{passive:!0});ka.addEventListener("gesturechange",P,{passive:!0});ka.addEventListener("gesturestart",P,{passive:!0});ka.addEventListener("touchstart",ea,{passive:!0});return()=>{ka&&(ka.removeEventListener("touchstart",
P),ka.removeEventListener("gestureend",P),ka.removeEventListener("gesturechange",P),ka.removeEventListener("gesturestart",P),ka.removeEventListener("touchstart",ea))}},[a,n.width])}function Md(a,d){const {inputs:n,callbacks:P}=ld();return GF.useMemo(()=>({onPointerDown:ea=>{var ka,sa;const {order:La=0}=ea;La||(null==(ka=ea.currentTarget)?void 0:ka.setPointerCapture(ea.pointerId));ka=a.props.handles[d];null==(sa=P.onPointerDown)?void 0:sa.call(P,{type:"handle",shape:a,handle:ka,id:d,order:La},ea);
ea.order=La+1},onPointerMove:ea=>{var ka;const {order:sa=0}=ea,La=a.props.handles[d];null==(ka=P.onPointerMove)?void 0:ka.call(P,{type:"handle",shape:a,handle:La,id:d,order:sa},ea);ea.order=sa+1},onPointerUp:ea=>{var ka,sa;const {order:La=0}=ea;La||(null==(ka=ea.currentTarget)?void 0:ka.releasePointerCapture(ea.pointerId));ka=a.props.handles[d];null==(sa=P.onPointerUp)?void 0:sa.call(P,{type:"handle",shape:a,handle:ka,id:d,order:La},ea);ea.order=La+1},onPointerEnter:ea=>{var ka;const {order:sa=0}=
ea,La=a.props.handles[d];null==(ka=P.onPointerEnter)?void 0:ka.call(P,{type:"handle",shape:a,handle:La,id:d,order:sa},ea);ea.order=sa+1},onPointerLeave:ea=>{var ka;const {order:sa=0}=ea,La=a.props.handles[d];null==(ka=P.onPointerLeave)?void 0:ka.call(P,{type:"handle",shape:a,handle:La,id:d,order:sa},ea);ea.order=sa+1},onKeyUp:ea=>{var ka;const sa=a.props.handles[d];null==(ka=P.onKeyUp)?void 0:ka.call(P,{type:"handle",shape:a,handle:sa,id:d,order:-1},ea)},onKeyDown:ea=>{var ka;const sa=a.props.handles[d];
null==(ka=P.onKeyDown)?void 0:ka.call(P,{type:"handle",shape:a,handle:sa,id:d,order:-1},ea)}}),[a.id,n,P])}function de(a,d,n=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${n?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Fe(a,d,n=0){HF.useEffect(()=>{const P=a.current;P&&(P.style.cursor=
IF[d](xm.radiansToDegrees(n)))},[d,n])}function Ve(a){const {viewport:d}=ld(),n=bf();JF.useLayoutEffect(()=>tc(()=>{const P=Og(()=>{var ea;null==(ea=a.current)?void 0:ea.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==n.inputs.state&&null!=d.camera.zoom&&P()}),[])}function ef(a,d=0){const [n,P]=(0,$A.useState)(a);(0,$A.useEffect)(()=>{let ea=!1;const ka=setTimeout(()=>{ea||P(a)},d);return()=>{ea=!0;clearTimeout(ka)}},[a,d]);return n}function Qe(){const a=bf();aB.useEffect(()=>
{hd(()=>Ie({},a.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);aB.useEffect(()=>{var d;const n=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");n?a.viewport.update(n):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function Ye(a){a()}function kf(a){return sd(hc(a,void 0))}function yf(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,
cleanAt:Date.now()+LF}}function se(a){var d=new Map,n=1,P=new a(function(ea){var ka=d.get(ea);ka&&(ka.reaction.dispose(),d.delete(ea))});return{addReactionToTrack:function(ea,ka,sa){var La=n++;P.register(sa,La,ea);ea.current=yf(ka);ea.current.finalizationRegistryCleanupToken=La;d.set(La,ea.current);return ea.current},recordReactionAsCommitted:function(ea){P.unregister(ea);ea.current&&ea.current.finalizationRegistryCleanupToken&&d.delete(ea.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function sf(){function a(){void 0===P&&(P=setTimeout(d,1E4))}function d(){P=void 0;var ea=Date.now();n.forEach(function(ka){var sa=ka.current;sa&&ea>=sa.cleanAt&&(sa.reaction.dispose(),ka.current=null,n.delete(ka))});0<n.size&&a()}var n=new Set,P;return{addReactionToTrack:function(ea,ka,sa){ea.current=yf(ka);n.add(ea);a();return ea.current},recordReactionAsCommitted:function(ea){n.delete(ea)},forceCleanupTimerToRunNowForTests:function(){P&&(clearTimeout(P),
d())},resetCleanupScheduleForTests:function(){var ea;if(0<n.size){try{for(var ka=MF(n),sa=ka.next();!sa.done;sa=ka.next()){var La=sa.value,Ua=La.current;Ua&&(Ua.reaction.dispose(),La.current=null)}}catch(lb){var eb={error:lb}}finally{try{sa&&!sa.done&&(ea=ka.return)&&ea.call(ka)}finally{if(eb)throw eb.error;}}n.clear()}P&&(clearTimeout(P),P=void 0)}}}function Te(){return new PF}function Jg(a,d){void 0===d&&(d="observed");var n=dB(Wu.default.useState(Te),1)[0],P=dB(Wu.default.useState(),2)[1],ea=Wu.default.useRef(null);
if(!ea.current)var ka=new Kt("observer".concat(d),function(){sa.mounted?P([]):sa.changedBeforeMount=!0}),sa=NF(ea,ka,n);n=ea.current.reaction;Wu.default.useDebugValue(n,kf);Wu.default.useEffect(function(){OF(ea);ea.current?(ea.current.mounted=!0,ea.current.changedBeforeMount&&(ea.current.changedBeforeMount=!1,P([]))):(ea.current={reaction:new Kt("observer".concat(d),function(){P([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},P([]));return function(){ea.current.reaction.dispose();ea.current=
null}},[]);var La,Ua;n.track(function(){try{La=a()}catch(eb){Ua=eb}});if(Ua)throw Ua;return La}function Ke(a,d){var n;if(gB&&a.$$typeof===gB)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(n=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==n?n:!1;var P=a,ea=a.displayName||a.name;if(fB&&a.$$typeof===fB&&(d=!0,P=a.render,"function"!==typeof P))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
n=function(ka,sa){return Jg(function(){return P(ka,sa)},ea)};""!==ea&&(n.displayName=ea);a.contextTypes&&(n.contextTypes=a.contextTypes);d&&(n=(0,Tt.forwardRef)(n));n=(0,Tt.memo)(n);Af(a,n);return n}function Af(a,d){Object.keys(a).forEach(function(n){QF[n]||Object.defineProperty(d,n,Object.getOwnPropertyDescriptor(a,n))})}function rg(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:Jg(a)}function uh(a){const d=bf(),{callbacks:n}=ld(),P=hB.useRef(!1);hB.useEffect(()=>{const ea=Ua=>
{var eb,lb;if(null==(eb=a.current)?0:eb.contains(document.activeElement))null==(lb=n.onKeyDown)?void 0:lb.call(n,{type:"canvas",order:-1},Ua),P.current=Ua.shiftKey},ka=Ua=>{var eb,lb;if(null==(eb=a.current)?0:eb.contains(document.activeElement))null==(lb=n.onKeyUp)?void 0:lb.call(n,{type:"canvas",order:-1},Ua),P.current=Ua.shiftKey},sa=Ua=>{var eb,lb,rb;!d.editingShape&&(null==(eb=a.current)?0:eb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(rb=null==(lb=document.activeElement)?
void 0:lb.tagName)?rb:"")&&(Ua.preventDefault(),d.paste(Ua,P.current))},La=Ua=>{var eb,lb,rb;!d.editingShape&&0<d.selectedShapes.size&&(null==(eb=a.current)?0:eb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(rb=null==(lb=document.activeElement)?void 0:lb.tagName)?rb:"")&&(Ua.preventDefault(),d.copy())};window.addEventListener("keydown",ea);window.addEventListener("keyup",ka);document.addEventListener("paste",sa);document.addEventListener("copy",La);return()=>{window.removeEventListener("keydown",
ea);window.removeEventListener("keyup",ka);document.removeEventListener("paste",sa);document.removeEventListener("copy",La)}},[])}function Mh(a){const d=bf(),{inputs:n,callbacks:P}=ld(),ea=mB.useRef(-1);return mB.useMemo(()=>({onPointerDown:ka=>{var sa,La;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:Ua=0}=ka;Ua||(null==(sa=ka.currentTarget)?void 0:sa.setPointerCapture(ka.pointerId));null==(La=P.onPointerDown)?void 0:La.call(P,{type:"shape",shape:a,order:Ua},ka);ka.order=
Ua+1}},onPointerMove:ka=>{var sa;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:La=0}=ka;null==(sa=P.onPointerMove)?void 0:sa.call(P,{type:"shape",shape:a,order:La},ka);ka.order=La+1}},onPointerUp:ka=>{var sa,La,Ua;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:eb=0}=ka;eb||(null==(sa=ka.currentTarget)?void 0:sa.releasePointerCapture(ka.pointerId));null==(La=P.onPointerUp)?void 0:La.call(P,{type:"shape",shape:a,order:eb},ka);sa=Date.now();La=sa-
ea.current;300<La?ea.current=sa:300>=La&&(null==(Ua=P.onDoubleClick)?void 0:Ua.call(P,{type:"shape",shape:a,order:eb},ka),ea.current=-1);ka.order=eb+1}},onPointerEnter:ka=>{var sa;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:La=0}=ka;null==(sa=P.onPointerEnter)?void 0:sa.call(P,{type:"shape",shape:a,order:La},ka);ka.order=La+1}},onPointerLeave:ka=>{var sa;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:La=0}=ka;null==(sa=P.onPointerLeave)?void 0:
sa.call(P,{type:"shape",shape:a,order:La},ka);ka.order=La+1}},onKeyUp:ka=>{var sa;null==(sa=P.onKeyUp)?void 0:sa.call(P,{type:"shape",shape:a,order:-1},ka)},onKeyDown:ka=>{var sa;null==(sa=P.onKeyDown)?void 0:sa.call(P,{type:"shape",shape:a,order:-1},ka)}}),[a.id,n,P])}function Nh(a){var {viewport:d,inputs:n,callbacks:P,components:ea}=a;a=wg(a,["viewport","inputs","callbacks","components"]);return(0,EB.jsx)(jG,{id:a.id,viewport:d,inputs:n,callbacks:P,components:ea,meta:a.meta,children:(0,EB.jsx)(fG,
Ie({},a))})}function of(){of=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var n=arguments[d],P;for(P in n)Object.prototype.hasOwnProperty.call(n,P)&&(a[P]=n[P])}return a};return of.apply(this,arguments)}function Ng(a,d,{checkForDefaultPrevented:n=!0}={}){return function(P){null===a||void 0===a||a(P);if(!1===n||!P.defaultPrevented)return null===d||void 0===d?void 0:d(P)}}function yh(...a){return d=>a.forEach(n=>{"function"===typeof n?n(d):null!==n&&void 0!==n&&
(n.current=d)})}function Zh(...a){return(0,oG.useCallback)(yh(...a),a)}function Ci(a,d=[]){let n=[];const P=()=>{const ea=n.map(ka=>(0,Us.createContext)(ka));return function(ka){const sa=(null===ka||void 0===ka?void 0:ka[a])||ea;return(0,Us.useMemo)(()=>({[`__scope${a}`]:$f(Ie({},ka),{[a]:sa})}),[ka,sa])}};P.scopeName=a;return[function(ea,ka){function sa(eb){const {scope:lb,children:rb}=eb,Vb=wg(eb,["scope","children"]);eb=(null===lb||void 0===lb?void 0:lb[a][Ua])||La;const Zb=(0,Us.useMemo)(()=>
Vb,Object.values(Vb));return(0,Us.createElement)(eb.Provider,{value:Zb},rb)}const La=(0,Us.createContext)(ka),Ua=n.length;n=[...n,ka];sa.displayName=ea+"Provider";return[sa,function(eb,lb){if(lb=(0,Us.useContext)((null===lb||void 0===lb?void 0:lb[a][Ua])||La))return lb;if(void 0!==ka)return ka;throw Error(`\`${eb}\` must be used within \`${ea}\``);}]},il(P,...d)]}function il(...a){const d=a[0];if(1===a.length)return d;const n=()=>{const P=a.map(ea=>({useScope:ea(),scopeName:ea.scopeName}));return function(ea){const ka=
P.reduce((sa,{useScope:La,scopeName:Ua})=>{La=La(ea)[`__scope${Ua}`];return Ie(Ie({},sa),La)},{});return(0,Us.useMemo)(()=>({[`__scope${d.scopeName}`]:ka}),[ka])}};n.scopeName=d.scopeName;return n}function wh(a){return(0,ln.isValidElement)(a)&&a.type===FB}function jm(a,d){const n=Ie({},d);for(const P in d){const ea=a[P],ka=d[P];/^on[A-Z]/.test(P)?ea&&ka?n[P]=(...sa)=>{ka(...sa);ea(...sa)}:ea&&(n[P]=ea):"style"===P?n[P]=Ie(Ie({},ea),ka):"className"===P&&(n[P]=[ea,ka].filter(Boolean).join(" "))}return Ie(Ie({},
a),n)}function Sl(a,d){a&&(0,pG.flushSync)(()=>a.dispatchEvent(d))}function Mj(a){const d=(0,Wx.useRef)(a);(0,Wx.useEffect)(()=>{d.current=a});return(0,Wx.useMemo)(()=>(...n)=>{var P;return null===(P=d.current)||void 0===P?void 0:P.call(d,...n)},[])}function Uk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Mj(a);(0,qG.useEffect)(()=>{const P=ea=>{"Escape"===ea.key&&n(ea)};d.addEventListener("keydown",P);return()=>d.removeEventListener("keydown",P)},[n,d])}function Zj(a,
d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Mj(a),P=(0,jo.useRef)(!1),ea=(0,jo.useRef)(()=>{});(0,jo.useEffect)(()=>{const ka=La=>{if(La.target&&!P.current){let Ua=function(){mk("dismissableLayer.pointerDownOutside",n,eb,{discrete:!0})};const eb={originalEvent:La};"touch"===La.pointerType?(d.removeEventListener("click",ea.current),ea.current=Ua,d.addEventListener("click",ea.current,{once:!0})):Ua()}P.current=!1},sa=window.setTimeout(()=>{d.addEventListener("pointerdown",
ka)},0);return()=>{window.clearTimeout(sa);d.removeEventListener("pointerdown",ka);d.removeEventListener("click",ea.current)}},[d,n]);return{onPointerDownCapture:()=>P.current=!0}}function zk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Mj(a),P=(0,jo.useRef)(!1);(0,jo.useEffect)(()=>{const ea=ka=>{ka.target&&!P.current&&mk("dismissableLayer.focusOutside",n,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",ea);return()=>d.removeEventListener("focusin",
ea)},[d,n]);return{onFocusCapture:()=>P.current=!0,onBlurCapture:()=>P.current=!1}}function Rl(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function mk(a,d,n,{discrete:P}){const ea=n.originalEvent.target;n=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:n});d&&ea.addEventListener(a,d,{once:!0});P?Sl(ea,n):ea.dispatchEvent(n)}function Ii(a){const [d,n]=HB.useState(tG());Um(()=>{a||n(P=>null!==P&&void 0!==P?P:String(uG++))},[a]);return a||(d?`radix-${d}`:"")}function Ri(a){return a.split("-")[0]}
function Ik(a){return["top","bottom"].includes(Ri(a))?"x":"y"}function km(a){return"y"===a?"height":"width"}function ol(a,d,n){let {reference:P,floating:ea}=a;var ka=P.x+P.width/2-ea.width/2;const sa=P.y+P.height/2-ea.height/2;a=Ik(d);var La=km(a);La=P[La]/2-ea[La]/2;const Ua="x"===a;switch(Ri(d)){case "top":ka={x:ka,y:P.y-ea.height};break;case "bottom":ka={x:ka,y:P.y+P.height};break;case "right":ka={x:P.x+P.width,y:sa};break;case "left":ka={x:P.x-ea.width,y:sa};break;default:ka={x:P.x,y:P.y}}switch(d.split("-")[1]){case "start":ka[a]-=
La*(n&&Ua?-1:1);break;case "end":ka[a]+=La*(n&&Ua?-1:1)}return ka}function Pm(a){return"number"!=typeof a?Ie({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function Bm(a){return $f(Ie({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function zl(a,d){return Ji(this,null,function*(){var n;void 0===d&&(d={});const {x:P,y:ea,platform:ka,rects:sa,elements:La,strategy:Ua}=a,{boundary:eb="clippingAncestors",rootBoundary:lb="viewport",elementContext:rb="floating",altBoundary:Vb=
!1,padding:Zb=0}=d,Tb=Pm(Zb),sc=La[Vb?"floating"===rb?"reference":"floating":rb],Kc=Bm(yield ka.getClippingRect({element:null==(n=yield null==ka.isElement?void 0:ka.isElement(sc))||n?sc:sc.contextElement||(yield null==ka.getDocumentElement?void 0:ka.getDocumentElement(La.floating)),boundary:eb,rootBoundary:lb,strategy:Ua}));n=Bm(ka.convertOffsetParentRelativeRectToViewportRelativeRect?yield ka.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===rb?$f(Ie({},sa.floating),{x:P,y:ea}):
sa.reference,offsetParent:yield null==ka.getOffsetParent?void 0:ka.getOffsetParent(La.floating),strategy:Ua}):sa[rb]);return{top:Kc.top-n.top+Tb.top,bottom:n.bottom-Kc.bottom+Tb.bottom,left:Kc.left-n.left+Tb.left,right:n.right-Kc.right+Tb.right}})}function nl(a){return a.replace(/left|right|bottom|top/g,d=>wG[d])}function Vk(a,d,n){void 0===n&&(n=!1);const P=a.split("-")[1],ea=Ik(a);a=km(ea);n="x"===ea?P===(n?"end":"start")?"right":"left":"start"===P?"bottom":"top";return d.reference[a]>d.floating[a]&&
(n=nl(n)),{main:n,cross:nl(n)}}function xj(a){return a.replace(/start|end/g,d=>xG[d])}function Kk(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function nk(a){return JB.some(d=>0<=a[d])}function Wk(a){return null==a?window:a&&a.document&&a.location&&a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function Nj(a){return Wk(a).getComputedStyle(a)}function hj(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||
"").toLowerCase():""}function Qj(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function sk(a){return a instanceof Wk(a).HTMLElement}function fk(a){return a instanceof Wk(a).Element}function rk(a){return"undefined"==typeof ShadowRoot?!1:a instanceof Wk(a).ShadowRoot||a instanceof ShadowRoot}function Fj(a){const {overflow:d,overflowX:n,overflowY:P}=Nj(a);return/auto|scroll|overlay|hidden/.test(d+P+n)}function Dl(a){const d=
/firefox/i.test(Qj());a=Nj(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function pl(){return!/^((?!chrome|android).)*safari/i.test(Qj())}function ak(a,d,n){var P,ea,ka,sa;void 0===d&&(d=!1);void 0===n&&(n=!1);var La=a.getBoundingClientRect();let Ua=1,eb=1;d&&sk(a)&&(Ua=0<a.offsetWidth&&iw(La.width)/a.offsetWidth||1,eb=0<a.offsetHeight&&iw(La.height)/a.offsetHeight||
1);a=fk(a)?Wk(a):window;d=!pl()&&n;n=(La.left+(d&&null!=(P=null==(ea=a.visualViewport)?void 0:ea.offsetLeft)?P:0))/Ua;P=(La.top+(d&&null!=(ka=null==(sa=a.visualViewport)?void 0:sa.offsetTop)?ka:0))/eb;ka=La.width/Ua;La=La.height/eb;return{width:ka,height:La,top:P,right:n+ka,bottom:P+La,left:n,x:n,y:P}}function Bk(a){return(d=a,(d instanceof Wk(d).Node?a.ownerDocument:a.document)||window.document).documentElement;var d}function Om(a){return fk(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,
scrollTop:a.pageYOffset}}function io(a){return ak(Bk(a)).left+Om(a).scrollLeft}function Lj(a){return"html"===hj(a)?a:a.assignedSlot||a.parentNode||(rk(a)?a.host:null)||Bk(a)}function Tj(a){return sk(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}function gk(a){for(var d=Wk(a),n=Tj(a);n&&["table","td","th"].includes(hj(n))&&"static"===getComputedStyle(n).position;)n=Tj(n);if(!n||"html"!==hj(n)&&("body"!==hj(n)||"static"!==getComputedStyle(n).position||Dl(n))){if(!n)a:{a=Lj(a);for(rk(a)&&
(a=a.host);sk(a)&&!["html","body"].includes(hj(a));){if(Dl(a)){n=a;break a}a=a.parentNode}n=null}d=n||d}return d}function Qk(a){if(sk(a))return{width:a.offsetWidth,height:a.offsetHeight};a=ak(a);return{width:a.width,height:a.height}}function fm(a){const d=Lj(a);return["html","body","#document"].includes(hj(d))?a.ownerDocument.body:sk(d)&&Fj(d)?d:fm(d)}function Ql(a,d){var n;void 0===d&&(d=[]);var P=fm(a);a=P===(null==(n=a.ownerDocument)?void 0:n.body);n=Wk(P);P=a?[n].concat(n.visualViewport||[],Fj(P)?
P:[]):P;d=d.concat(P);return a?d:d.concat(Ql(P))}function On(a,d,n){return"viewport"===d?Bm(function(P,ea){var ka=Wk(P),sa=Bk(P);ka=ka.visualViewport;P=sa.clientWidth;sa=sa.clientHeight;let La=0,Ua=0;if(ka){P=ka.width;sa=ka.height;const eb=pl();(eb||!eb&&"fixed"===ea)&&(La=ka.offsetLeft,Ua=ka.offsetTop)}return{width:P,height:sa,x:La,y:Ua}}(a,n)):fk(d)?function(P,ea){var ka=ak(P,!1,"fixed"===ea);ea=ka.top+P.clientTop;ka=ka.left+P.clientLeft;return{top:ea,left:ka,x:ka,y:ea,right:ka+P.clientWidth,bottom:ea+
P.clientHeight,width:P.clientWidth,height:P.clientHeight}}(d,n):Bm(function(P){var ea;const ka=Bk(P);var sa=Om(P);const La=null==(ea=P.ownerDocument)?void 0:ea.body;ea=Yu(ka.scrollWidth,ka.clientWidth,La?La.scrollWidth:0,La?La.clientWidth:0);const Ua=Yu(ka.scrollHeight,ka.clientHeight,La?La.scrollHeight:0,La?La.clientHeight:0);P=-sa.scrollLeft+io(P);sa=-sa.scrollTop;return"rtl"===Nj(La||ka).direction&&(P+=Yu(ka.clientWidth,La?La.clientWidth:0)-ea),{width:ea,height:Ua,x:P,y:sa}}(Bk(a)))}function Ao(a){const d=
Ql(a),n=["absolute","fixed"].includes(Nj(a).position)&&sk(a)?gk(a):a;return fk(n)?d.filter(P=>{var ea;if(ea=fk(P))a:if(ea=null==n.getRootNode?void 0:n.getRootNode(),P.contains(n))ea=!0;else{if(ea&&rk(ea)){ea=n;do{if(ea&&P===ea){ea=!0;break a}ea=ea.parentNode||ea.host}while(ea)}ea=!1}return ea&&"body"!==hj(P)}):[]}function cc(a,d,n,P){void 0===P&&(P={});const {ancestorScroll:ea=!0,ancestorResize:ka=!0,elementResize:sa=!0,animationFrame:La=!1}=P,Ua=ea&&!La,eb=ka&&!La,lb=Ua||eb?[...(fk(a)?Ql(a):[]),
...Ql(d)]:[];lb.forEach(Tb=>{Ua&&Tb.addEventListener("scroll",n,{passive:!0});eb&&Tb.addEventListener("resize",n)});let rb,Vb=null;if(sa){let Tb=!0;Vb=new ResizeObserver(()=>{Tb||n();Tb=!1});fk(a)&&!La&&Vb.observe(a);Vb.observe(d)}let Zb=La?ak(a):null;return La&&function sc(){const Kc=ak(a);!Zb||Kc.x===Zb.x&&Kc.y===Zb.y&&Kc.width===Zb.width&&Kc.height===Zb.height||n();Zb=Kc;rb=requestAnimationFrame(sc)}(),n(),()=>{var sc;lb.forEach(Kc=>{Ua&&Kc.removeEventListener("scroll",n);eb&&Kc.removeEventListener("resize",
n)});null==(sc=Vb)||sc.disconnect();Vb=null;La&&cancelAnimationFrame(rb)}}function Ha(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let n,P;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var ea=a.length;if(ea!=d.length)return!1;for(n=ea;0!==n--;)if(!Ha(a[n],d[n]))return!1;return!0}P=Object.keys(a);ea=P.length;if(ea!==Object.keys(d).length)return!1;for(n=ea;0!==n--;)if(!Object.prototype.hasOwnProperty.call(d,P[n]))return!1;
for(n=ea;0!==n--;)if(ea=P[n],!("_owner"===ea&&a.$$typeof||Ha(a[ea],d[ea])))return!1;return!0}return a!==a&&d!==d}function jc(a){const d=Mo.useRef(a);Zx(()=>{d.current=a});return d}function gc(a){let {middleware:d,placement:n="bottom",strategy:P="absolute",whileElementsMounted:ea}=void 0===a?{}:a;const ka=Mo.useRef(null),sa=Mo.useRef(null),La=jc(ea),Ua=Mo.useRef(null),[eb,lb]=Mo.useState({x:null,y:null,strategy:P,placement:n,middlewareData:{}}),[rb,Vb]=Mo.useState(d);Ha(null==rb?void 0:rb.map(vc=>
{({options:vc}=vc);return vc}),null==d?void 0:d.map(vc=>{({options:vc}=vc);return vc}))||Vb(d);const Zb=Mo.useCallback(()=>{ka.current&&sa.current&&AG(ka.current,sa.current,{middleware:rb,placement:n,strategy:P}).then(vc=>{Tb.current&&BG.flushSync(()=>{lb(vc)})})},[rb,n,P]);Zx(()=>{Tb.current&&Zb()},[Zb]);const Tb=Mo.useRef(!1);Zx(()=>{Tb.current=!0;return()=>{Tb.current=!1}},[]);const sc=Mo.useCallback(()=>{"function"===typeof Ua.current&&(Ua.current(),Ua.current=null);if(ka.current&&sa.current)if(La.current){const vc=
La.current(ka.current,sa.current,Zb);Ua.current=vc}else Zb()},[Zb,La]),Kc=Mo.useCallback(vc=>{ka.current=vc;sc()},[sc]),fc=Mo.useCallback(vc=>{sa.current=vc;sc()},[sc]),zc=Mo.useMemo(()=>({reference:ka,floating:sa}),[]);return Mo.useMemo(()=>$f(Ie({},eb),{update:Zb,refs:zc,reference:Kc,floating:fc}),[eb,Zb,zc,Kc,fc])}function Cb(a){const [d,n]=(0,DG.useState)(void 0);Um(()=>{if(a){n({width:a.offsetWidth,height:a.offsetHeight});const P=new ResizeObserver(ea=>{if(Array.isArray(ea)&&ea.length){ea=ea[0];
if("borderBoxSize"in ea){ea=ea.borderBoxSize;var ka=Array.isArray(ea)?ea[0]:ea;ea=ka.inlineSize;ka=ka.blockSize}else ea=a.offsetWidth,ka=a.offsetHeight;n({width:ea,height:ka})}});P.observe(a,{box:"border-box"});return()=>P.unobserve(a)}n(void 0)},[a]);return d}function rc(a){return void 0!==a}function $b(a){return null!==a}function Hb(a){const [d,n="center"]=a.split("-");return[d,n]}function Fb(a,d){return(0,Pq.useReducer)((n,P)=>{P=d[n][P];return null!==P&&void 0!==P?P:n},a)}function ic(a){const [d,
n]=(0,Pq.useState)(),P=(0,Pq.useRef)({}),ea=(0,Pq.useRef)(a),ka=(0,Pq.useRef)("none"),[sa,La]=Fb(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Pq.useEffect)(()=>{const Ua=Jc(P.current);ka.current="mounted"===sa?Ua:"none"},[sa]);Um(()=>{const Ua=P.current,eb=ea.current;if(eb!==a){const lb=ka.current,rb=Jc(Ua);a?La("MOUNT"):"none"===rb||"none"===(null===Ua||void 0===
Ua?void 0:Ua.display)?La("UNMOUNT"):eb&&lb!==rb?La("ANIMATION_OUT"):La("UNMOUNT");ea.current=a}},[a,La]);Um(()=>{if(d){const Ua=lb=>{const rb=Jc(P.current).includes(lb.animationName);lb.target===d&&rb&&(0,NG.flushSync)(()=>La("ANIMATION_END"))},eb=lb=>{lb.target===d&&(ka.current=Jc(P.current))};d.addEventListener("animationstart",eb);d.addEventListener("animationcancel",Ua);d.addEventListener("animationend",Ua);return()=>{d.removeEventListener("animationstart",eb);d.removeEventListener("animationcancel",
Ua);d.removeEventListener("animationend",Ua)}}La("ANIMATION_END")},[d,La]);return{isPresent:["mounted","unmountSuspended"].includes(sa),ref:(0,Pq.useCallback)(Ua=>{Ua&&(P.current=getComputedStyle(Ua));n(Ua)},[])}}function Jc(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}function Vc({prop:a,defaultProp:d,onChange:n=()=>{}}){const [P,ea]=ud({defaultProp:d,onChange:n}),ka=void 0!==a;d=ka?a:P;const sa=Mj(n);n=(0,jw.useCallback)(La=>{ka?(La="function"===typeof La?La(a):La,La!==a&&sa(La)):
ea(La)},[ka,a,ea,sa]);return[d,n]}function ud({defaultProp:a,onChange:d}){a=(0,jw.useState)(a);const [n]=a,P=(0,jw.useRef)(n),ea=Mj(d);(0,jw.useEffect)(()=>{P.current!==n&&(ea(n),P.current=n)},[n,P,ea]);return a}function Fd(a,d){const n=Math.abs(d.top-a.y),P=Math.abs(d.bottom-a.y),ea=Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(n,P,ea,a)){case a:return"left";case ea:return"right";case n:return"top";case P:return"bottom";default:return null}}function Bd(a){a=a.slice();a.sort((d,n)=>
d.x<n.x?-1:d.x>n.x?1:d.y<n.y?-1:d.y>n.y?1:0);return le(a)}function le(a){if(1>=a.length)return a.slice();const d=[];for(var n=0;n<a.length;n++){for(var P=a[n];2<=d.length;){var ea=d[d.length-1],ka=d[d.length-2];if((ea.x-ka.x)*(P.y-ka.y)>=(ea.y-ka.y)*(P.x-ka.x))d.pop();else break}d.push(P)}d.pop();n=[];for(P=a.length-1;0<=P;P--){for(ea=a[P];2<=n.length;){ka=n[n.length-1];const sa=n[n.length-2];if((ka.x-sa.x)*(ea.y-sa.y)>=(ka.y-sa.y)*(ea.x-sa.x))n.pop();else break}n.push(ea)}n.pop();return 1===d.length&&
1===n.length&&d[0].x===n[0].x&&d[0].y===n[0].y?d:d.concat(n)}function Je(a){var {side:d,content:n,sideOffset:P=10}=a;a=wg(a,["side","content","sideOffset"]);return n?(0,Or.jsx)(ZG,{delayDuration:300,children:(0,Or.jsxs)($G,{children:[(0,Or.jsx)(aH,{asChild:!0,children:a.children}),(0,Or.jsx)(bH,{children:(0,Or.jsxs)(cH,$f(Ie({className:"tl-tooltip-content",sideOffset:P,side:d},a),{children:[n,(0,Or.jsx)(dH,{className:"tl-tooltip-arrow"})]}))})]})}):(0,Or.jsx)(Or.Fragment,{children:a.children})}function Ee(a){var {className:d,
tooltip:n,tooltipSide:P}=a;a=wg(a,["className","tooltip","tooltipSide"]);return(0,XB.jsx)(Je,{content:n,side:P,children:(0,XB.jsx)("button",Ie({className:"tl-button "+(null!=d?d:"")},a))})}function mf(a){var {toggle:d=!0,pressed:n,onPressedChange:P,className:ea,tooltip:ka}=a;a=wg(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,gy.jsx)(Je,{content:ka,children:(0,gy.jsx)("div",{className:"inline-block",children:(0,gy.jsx)(fH,$f(Ie({},a),{"data-toggle":d,className:"tl-toggle-input"+
(ea?" "+ea:""),pressed:n,onPressedChange:P}))})})}function $g(a){var d=a+"CollectionProvider";const [n,P]=Ci(d),[ea,ka]=n(d,{collectionRef:{current:null},itemMap:new Map}),sa=lb=>{const {scope:rb,children:Vb}=lb;lb=lq.default.useRef(null);const Zb=lq.default.useRef(new Map).current;return lq.default.createElement(ea,{scope:rb,itemMap:Zb,collectionRef:lb},Vb)};Object.assign(sa,{displayName:d});const La=a+"CollectionSlot";d=lq.default.forwardRef((lb,rb)=>{const {scope:Vb,children:Zb}=lb;lb=ka(La,Vb);
rb=Zh(rb,lb.collectionRef);return lq.default.createElement(kq,{ref:rb},Zb)});Object.assign(d,{displayName:La});const Ua=a+"CollectionItemSlot",eb=lq.default.forwardRef((lb,rb)=>{const {scope:Vb,children:Zb}=lb,Tb=wg(lb,["scope","children"]),sc=lq.default.useRef(null);lb=Zh(rb,sc);const Kc=ka(Ua,Vb);lq.default.useEffect(()=>{Kc.itemMap.set(sc,Ie({ref:sc},Tb));return()=>void Kc.itemMap.delete(sc)});return lq.default.createElement(kq,{["data-radix-collection-item"]:"",ref:lb},Zb)});Object.assign(eb,
{displayName:Ua});return[{Provider:sa,Slot:d,ItemSlot:eb},function(lb){const rb=ka(a+"CollectionConsumer",lb);return lq.default.useCallback(()=>{const Vb=rb.collectionRef.current;if(!Vb)return[];const Zb=Array.from(Vb.querySelectorAll("[data-radix-collection-item]"));return Array.from(rb.itemMap.values()).sort((Tb,sc)=>Zb.indexOf(Tb.ref.current)-Zb.indexOf(sc.ref.current))},[rb.collectionRef,rb.itemMap])},P]}function nh(a){const d=(0,$B.useContext)(gH);return a||d||"ltr"}function Cg(){(0,hH.useEffect)(()=>
{var a,d;const n=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=n[0])&&void 0!==a?a:Pg());document.body.insertAdjacentElement("beforeend",null!==(d=n[1])&&void 0!==d?d:Pg());hy++;return()=>{1===hy&&document.querySelectorAll("[data-radix-focus-guard]").forEach(P=>P.remove());hy--}},[])}function Pg(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";
return a}function Rf(a,{select:d=!1}={}){const n=document.activeElement;for(const P of a)if(Zf(P,{select:d}),document.activeElement!==n)break}function Vf(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const P="INPUT"===n.tagName&&"hidden"===n.type;return n.disabled||n.hidden||P?NodeFilter.FILTER_SKIP:0<=n.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function sh(a,d){for(const n of a)if(!fh(n,{upTo:d}))return n}
function fh(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Zf(a,{select:d=!1}={}){if(a&&a.focus){const n=document.activeElement;a.focus({preventScroll:!0});a!==n&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function $h(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function ui(a){return a.filter(d=>"A"!==d.tagName)}function Oi(a,d,n){a=
a.key;n="rtl"!==n?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(n))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(n))return oH[n]}function Eh(a){const d=document.activeElement;for(const n of a){if(n===d)break;n.focus();if(document.activeElement!==d)break}}function th(a,d){return a.map((n,P)=>a[(d+P)%a.length])}function Di(a,d){var n=(0,rH.useState)(function(){return{value:a,callback:d,facade:{get current(){return n.value},
set current(P){var ea=n.value;ea!==P&&(n.value=P,n.callback(P,ea))}}}})[0];n.callback=d;return n.facade}function Yj(a,d){return Di(d||null,function(n){return a.forEach(function(P){"function"===typeof P?P(n):P&&(P.current=n);return P})})}function Zm(a){return a}function Ml(a,d){void 0===d&&(d=Zm);var n=[],P=!1;return{read:function(){if(P)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:a},useMedium:function(ea){var ka=
d(ea,P);n.push(ka);return function(){n=n.filter(function(sa){return sa!==ka})}},assignSyncMedium:function(ea){for(P=!0;n.length;){var ka=n;n=[];ka.forEach(ea)}n={push:function(sa){return ea(sa)},filter:function(){return n}}},assignMedium:function(ea){P=!0;var ka=[];if(n.length){var sa=n;n=[];sa.forEach(ea);ka=n}var La=function(){var Ua=ka;ka=[];Ua.forEach(ea)};Promise.resolve().then(La);n={push:function(Ua){ka.push(Ua);Promise.resolve().then(La)},filter:function(Ua){ka=ka.filter(Ua);return n}}}}}
function eo(a){const d=document.activeElement;for(const n of a){if(n===d)break;n.focus();if(document.activeElement!==d)break}}function Nl(a,d){return a.map((n,P)=>a[(d+P)%a.length])}function ek(a,d,n){const P=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,ea=n?a.indexOf(n):-1;a=Nl(a,Math.max(ea,0));1===P.length&&(a=a.filter(ka=>ka!==n));a=a.find(ka=>ka.toLowerCase().startsWith(P.toLowerCase()));return a!==n?a:void 0}function Eo(a){return d=>"mouse"===d.pointerType?a(d):void 0}function Fo(a,
[d,n]){return Math.min(n,Math.max(d,a))}function Qn(a){const d=(0,zy.useRef)({value:a,previous:a});return(0,zy.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function Uj(a=[],d,n){a=[...a];a[n]=d;return a.sort((P,ea)=>P-ea)}function vj(a,d,n){return 100/(n-d)*(a-d)}function tl(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function zq(a,d){if(1===a.length)return 0;a=a.map(P=>Math.abs(P-d));
const n=Math.min(...a);return a.indexOf(n)}function hm(a,d,n){a/=2;const P=An([0,50],[0,a]);return(a-P(d)*n)*n}function Rm(a){return a.slice(0,-1).map((d,n)=>a[n+1]-d)}function An(a,d){return n=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(n-a[0])}function tn(a,d){d=Math.pow(10,d);return Math.round(a*d)/d}function fn(a){function d(eb){return eb?(0,rm.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:eb},children:(0,rm.jsx)("div",{className:`w-full h-full bg-${eb}-500`})}):
(0,rm.jsx)("div",{className:"tl-color-bg",children:(0,rm.jsx)(oi,{name:"color-swatch"})})}var {color:n,opacity:P,popoverSide:ea,setColor:ka,setOpacity:sa}=a;a=wg(a,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:La}}=Tr.default.useContext(Pj),Ua=Tr.default.useMemo(()=>{let eb="";return Og(lb=>{ka(eb)},100,lb=>{eb=lb.target.value})},[]);return(0,rm.jsx)(uf,$f(Ie({},a),{border:!0,arrow:!0,side:ea,label:(0,rm.jsx)(Je,{content:La("whiteboard/color"),side:ea,sideOffset:14,
children:d(n)}),children:(0,rm.jsxs)("div",{className:"p-1",children:[(0,rm.jsx)("div",{className:"tl-color-palette",children:Object.values(os).map(eb=>(0,rm.jsx)("button",{className:`tl-color-drip m-1${eb===n?" active":""}`,onClick:()=>ka(eb),children:d(eb)},eb))}),(0,rm.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,rm.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${Ff(n)?"":"active"}`,children:(0,rm.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,rm.jsx)("input",
Ie({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(n)?n:"#000000",onChange:Ua,style:{opacity:Ff(n)?0:1}},a))})}),(0,rm.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:La("whiteboard/select-custom-color")})]}),sa&&(0,rm.jsx)("div",{className:"mx-1 my-2",children:(0,rm.jsxs)(kv,{defaultValue:[null!=P?P:0],onValueCommit:eb=>sa(eb[0]),max:1,step:.1,"aria-label":La("whiteboard/opacity"),className:"tl-slider-root",
children:[(0,rm.jsx)(Mk,{className:"tl-slider-track",children:(0,rm.jsx)(qq,{className:"tl-slider-range"})}),(0,rm.jsx)(Df,{className:"tl-slider-thumb"})]})})]})}))}function nj(a,d){a&&(0,Ur.flushSync)(()=>a.dispatchEvent(d))}function so(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Mj(a),P=(0,Fn.useRef)(!1),ea=(0,Fn.useRef)(()=>{});(0,Fn.useEffect)(()=>{const ka=La=>{if(La.target&&!P.current){let Ua=function(){Jm("dismissableLayer.pointerDownOutside",n,eb,{discrete:!0})};
const eb={originalEvent:La};"touch"===La.pointerType?(d.removeEventListener("click",ea.current),ea.current=Ua,d.addEventListener("click",ea.current,{once:!0})):Ua()}P.current=!1},sa=window.setTimeout(()=>{d.addEventListener("pointerdown",ka)},0);return()=>{window.clearTimeout(sa);d.removeEventListener("pointerdown",ka);d.removeEventListener("click",ea.current)}},[d,n]);return{onPointerDownCapture:()=>P.current=!0}}function bm(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=
Mj(a),P=(0,Fn.useRef)(!1);(0,Fn.useEffect)(()=>{const ea=ka=>{ka.target&&!P.current&&Jm("dismissableLayer.focusOutside",n,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",ea);return()=>d.removeEventListener("focusin",ea)},[d,n]);return{onFocusCapture:()=>P.current=!0,onBlurCapture:()=>P.current=!1}}function wm(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function Jm(a,d,n,{discrete:P}){const ea=n.originalEvent.target;n=new CustomEvent(a,{bubbles:!1,
cancelable:!0,detail:n});d&&ea.addEventListener(a,d,{once:!0});P?nj(ea,n):ea.dispatchEvent(n)}function Kn(a,{select:d=!1}={}){const n=document.activeElement;for(const P of a)if(cm(P,{select:d}),document.activeElement!==n)break}function fo(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const P="INPUT"===n.tagName&&"hidden"===n.type;return n.disabled||n.hidden||P?NodeFilter.FILTER_SKIP:0<=n.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);
return d}function wn(a,d){for(const n of a)if(!Sm(n,{upTo:d}))return n}function Sm(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function cm(a,{select:d=!1}={}){if(a&&a.focus){const n=document.activeElement;a.focus({preventScroll:!0});a!==n&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function un(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function to(a){return a.filter(d=>
"A"!==d.tagName)}function uo(a){return void 0!==a}function Qh(a){return null!==a}function vo(a){const [d,n="center"]=a.split("-");return[d,n]}function dm(a){const d=Mj(a),n=(0,kg.useRef)(""),P=(0,kg.useRef)(0);a=(0,kg.useCallback)(ka=>{ka=n.current+ka;d(ka);(function Ua(La){n.current=La;window.clearTimeout(P.current);""!==La&&(P.current=window.setTimeout(()=>Ua(""),1E3))})(ka)},[d]);const ea=(0,kg.useCallback)(()=>{n.current="";window.clearTimeout(P.current)},[]);(0,kg.useEffect)(()=>()=>window.clearTimeout(P.current),
[]);return[n,a,ea]}function Ol(a,d,n){const P=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,ea=n?a.indexOf(n):-1;a=ul(a,Math.max(ea,0));1===P.length&&(a=a.filter(ka=>ka!==n));a=a.find(ka=>ka.textValue.toLowerCase().startsWith(P.toLowerCase()));return a!==n?a:void 0}function ul(a,d){return a.map((n,P)=>a[(d+P)%a.length])}function $m(a){var {options:d,tooltip:n,popoverSide:P,chevron:ea=!0,value:ka,onValueChange:sa}=a;a=wg(a,"options tooltip popoverSide chevron value onValueChange".split(" "));
const [La,Ua]=Ey.useState(!1);return(0,Hn.jsx)("div",$f(Ie({},a),{className:"tl-select-input",children:(0,Hn.jsxs)(NC,{open:La,onOpenChange:Ua,value:ka,onValueChange:sa,children:[(0,Hn.jsx)(Je,{content:n,side:P,children:(0,Hn.jsxs)(PC,{className:"tl-select-input-trigger",children:[(0,Hn.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,Hn.jsx)(QC,{})}),ea&&(0,Hn.jsx)(Vm,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,Hn.jsx)(oi,{name:La?"chevron-up":"chevron-down"})})]})}),
(0,Hn.jsx)(Ly,{className:"tl-select-input-portal",children:(0,Hn.jsxs)(OC,{className:"tl-select-input-content",side:P,position:"popper",sideOffset:14,align:"center",onKeyDown:eb=>eb.stopPropagation(),children:[(0,Hn.jsx)(Ti,{}),(0,Hn.jsx)(no,{className:"tl-select-input-viewport",children:d.map(eb=>(0,Hn.jsx)($d,{className:"tl-select-input-select-item",value:eb.value,children:(0,Hn.jsx)(RC,{children:eb.label})},eb.value))}),(0,Hn.jsx)(Zi,{})]})})]})}))}function Wo(a){var {scaleLevel:d,compact:n,popoverSide:P}=
a;wg(a,["scaleLevel","compact","popoverSide"]);const ea=bf();({handlers:{t:a}}=qv.default.useContext(Pj));const ka=[{label:n?"XS":a("whiteboard/extra-small"),value:"xs"},{label:n?"SM":a("whiteboard/small"),value:"sm"},{label:n?"MD":a("whiteboard/medium"),value:"md"},{label:n?"LG":a("whiteboard/large"),value:"lg"},{label:n?"XL":a("whiteboard/extra-large"),value:"xl"},{label:n?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,Bw.jsx)($m,{tooltip:a("whiteboard/scale-level"),options:ka,value:d,popoverSide:P,
chevron:!n,onValueChange:sa=>{ea.api.setScaleLevel(sa)}})}function an(a,d){return function(n){return a(d(n))}}function wo(a,d){return d(a)}function bn(a,d){return function(n){return a(d,n)}}function Pl(a,d){return function(){return a(d)}}function Ij(a,d){d(a);return a}function Jj(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];return d}function Mm(a){a()}function Np(a){return function(){return a}}function Aq(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];
return function(){d.map(Mm)}}function kj(){}function ji(a,d){return a(1,d)}function Mp(a,d){a(0,d)}function qs(a){a(2)}function Go(a){return a(4)}function Qg(a,d){return ji(a,bn(d,0))}function ml(a,d){var n=a(1,function(P){n();d(P)});return n}function Fh(){var a=[];return function(d,n){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(n),function(){var P=a.indexOf(n);-1<P&&a.splice(P,1)};case 0:a.slice().forEach(function(P){P(n)});break;default:throw Error("unrecognized action "+d);
}}}function Mg(a){var d=a,n=Fh();return function(P,ea){switch(P){case 1:ea(d);break;case 0:d=ea;break;case 4:return d}return n(P,ea)}}function vn(a){var d,n;return function(P,ea){switch(P){case 1:if(ea){if(n===ea)break;d&&d();n=ea;return d=a(1,ea)}d&&d();return kj;case 2:d&&d();n=null;break;default:throw Error("unrecognized action "+P);}}}function fl(a){return Ij(Fh(),function(d){return Qg(a,d)})}function kk(a,d){return Ij(Mg(d),function(n){return Qg(a,n)})}function em(){for(var a=arguments.length,
d=Array(a),n=0;n<a;n++)d[n]=arguments[n];return function(P){return d.reduceRight(wo,P)}}function tg(a){for(var d=arguments.length,n=Array(1<d?d-1:0),P=1;P<d;P++)n[P-1]=arguments[P];var ea=em.apply(void 0,n);return function(ka,sa){switch(ka){case 1:return ji(a,ea(sa));case 2:a(2);break;default:throw Error("unrecognized action "+ka);}}}function ym(a,d){return a===d}function Ki(a){void 0===a&&(a=ym);var d;return function(n){return function(P){a(d,P)||(d=P,n(P))}}}function eh(a){return function(d){return function(n){a(n)&&
d(n)}}}function gh(a){return function(d){return an(d,a)}}function Ln(a){return function(d){return function(){return d(a)}}}function Ck(a,d){return function(n){return function(P){return n(d=a(d,P))}}}function lm(a){return function(d){return function(n){0<a?a--:d(n)}}}function gn(a){var d,n;return function(P){return function(ea){d=ea;n||=setTimeout(function(){n=void 0;P(d)},a)}}}function hk(a){var d,n;return function(P){return function(ea){d=ea;n&&clearTimeout(n);n=setTimeout(function(){P(d)},a)}}}
function xi(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];var P=Array(d.length),ea=0,ka=null,sa=Math.pow(2,d.length)-1;d.forEach(function(La,Ua){var eb=Math.pow(2,Ua);ji(La,function(lb){var rb=ea;ea|=eb;P[Ua]=lb;rb!==sa&&ea===sa&&ka&&(ka(),ka=null)})});return function(La){return function(Ua){var eb=function(){return La([Ua].concat(P))};ea===sa?eb():ka=eb}}}function Yp(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];return function(P,ea){switch(P){case 1:return Aq.apply(void 0,
d.map(function(ka){return ka(1,ea)}));case 2:break;default:throw Error("unrecognized action "+P);}}}function ti(a,d){void 0===d&&(d=ym);return tg(a,Ki(d))}function uk(){for(var a=Fh(),d=arguments.length,n=Array(d),P=0;P<d;P++)n[P]=arguments[P];var ea=Array(n.length),ka=0,sa=Math.pow(2,n.length)-1;n.forEach(function(La,Ua){var eb=Math.pow(2,Ua);ji(La,function(lb){ea[Ua]=lb;ka|=eb;ka===sa&&a(0,ea)})});return function(La,Ua){switch(La){case 1:return ka===sa&&Ua(ea),a(1,Ua);case 2:a(2);break;default:throw Error("unrecognized action "+
La);}}}function bj(a,d,n){void 0===d&&(d=[]);n=(void 0===n?{singleton:!0}:n).singleton;return{id:Symbol(),constructor:a,dependencies:d,singleton:n}}function vp(a){var d=new Map;return function ea(P){var ka=P.id,sa=P.constructor,La=P.dependencies;if((P=P.singleton)&&d.has(ka))return d.get(ka);sa=sa(La.map(function(Ua){return ea(Ua)}));P&&d.set(ka,sa);return sa}(a)}function Xo(a,d){if(null==a)return{};var n={},P=Object.keys(a),ea;for(ea=0;ea<P.length;ea++){var ka=P[ea];0<=d.indexOf(ka)||(n[ka]=a[ka])}return n}
function wp(a,d){if(a){if("string"===typeof a)return Op(a,d);var n=Object.prototype.toString.call(a).slice(8,-1);"Object"===n&&a.constructor&&(n=a.constructor.name);if("Map"===n||"Set"===n)return Array.from(a);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Op(a,d)}}function Op(a,d){if(null==d||d>a.length)d=a.length;for(var n=0,P=Array(d);n<d;n++)P[n]=a[n];return P}function Ho(a,d){var n="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(n)return(n=n.call(a)).next.bind(n);
if(Array.isArray(a)||(n=wp(a))||d&&a&&"number"===typeof a.length){n&&(a=n);var P=0;return function(){return P>=a.length?{done:!0}:{done:!1,value:a[P++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function sp(a,d){for(var n={},P={},ea=0,ka=a.length;ea<ka;)P[a[ea]]=1,ea+=1;for(var sa in d)P.hasOwnProperty(sa)||(n[sa]=d[sa]);return n}function vk(a,d,n){function P(rb,Vb){rb.propsReady&&
(0,rb.propsReady)(0,!1);for(var Zb=Ho(sa),Tb;!(Tb=Zb()).done;)Tb=Tb.value,(0,rb[d.required[Tb]])(0,Vb[Tb]);for(Zb=Ho(La);!(Tb=Zb()).done;)if(Tb=Tb.value,Tb in Vb)(0,rb[d.optional[Tb]])(0,Vb[Tb]);rb.propsReady&&(0,rb.propsReady)(0,!0)}function ea(rb){return Ua.reduce(function(Vb,Zb){Vb[Zb]=function(Tb){(0,rb[d.methods[Zb]])(0,Tb)};return Vb},{})}function ka(rb){return eb.reduce(function(Vb,Zb){Vb[Zb]=vn(rb[d.events[Zb]]);return Vb},{})}var sa=Object.keys(d.required||{}),La=Object.keys(d.optional||
{}),Ua=Object.keys(d.methods||{}),eb=Object.keys(d.events||{}),lb=(0,Un.createContext)({});return{Component:(0,Un.forwardRef)(function(rb,Vb){var Zb=rb.children,Tb=Xo(rb,Ny),sc=(0,Un.useState)(function(){return Ij(vp(a),function(fc){return P(fc,Tb)})})[0],Kc=(0,Un.useState)(Pl(ka,sc))[0];Cw(function(){for(var fc=Ho(eb),zc;!(zc=fc()).done;)if(zc=zc.value,zc in Tb)(0,Kc[zc])(1,Tb[zc]);return function(){Object.values(Kc).map(qs)}},[Tb,Kc,sc]);Cw(function(){P(sc,Tb)});(0,Un.useImperativeHandle)(Vb,Np(ea(sc)));
return(0,Un.createElement)(lb.Provider,{value:sc},n?(0,Un.createElement)(n,sp([].concat(sa,La,eb),Tb),Zb):Zb)}),usePublisher:function(rb){return(0,Un.useCallback)(bn(Mp,(0,Un.useContext)(lb)[rb]),[rb])},useEmitterValue:function(rb){var Vb=(0,Un.useContext)(lb)[rb];rb=(0,Un.useState)(Pl(Go,Vb));var Zb=rb[0],Tb=rb[1];Cw(function(){return ji(Vb,function(sc){sc!==Zb&&Tb(Np(sc))})},[Vb,Zb]);return Zb},useEmitter:function(rb,Vb){var Zb=(0,Un.useContext)(lb)[rb];Cw(function(){return Zb(1,Vb)},[Vb,Zb])}}}
function gi(){return gi=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var n=arguments[d],P;for(P in n)Object.prototype.hasOwnProperty.call(n,P)&&(a[P]=n[P])}return a},gi.apply(this,arguments)}function Km(a,d){if(null==a)return{};var n,P,ea={},ka=Object.keys(a);for(P=0;P<ka.length;P++)0<=d.indexOf(n=ka[P])||(ea[n]=a[n]);return ea}function Io(a,d){(null==d||d>a.length)&&(d=a.length);for(var n=0,P=Array(d);n<d;n++)P[n]=a[n];return P}function Lm(a,d){var n="undefined"!=typeof Symbol&&
a[Symbol.iterator]||a["@@iterator"];if(n)return(n=n.call(a)).next.bind(n);if(Array.isArray(a)||(n=function(ea,ka){if(ea){if("string"==typeof ea)return Io(ea,ka);var sa=Object.prototype.toString.call(ea).slice(8,-1);return"Object"===sa&&ea.constructor&&(sa=ea.constructor.name),"Map"===sa||"Set"===sa?Array.from(ea):"Arguments"===sa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sa)?Io(ea,ka):void 0}}(a))||d&&a&&"number"==typeof a.length){n&&(a=n);var P=0;return function(){return P>=a.length?{done:!0}:
{done:!1,value:a[P++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function ap(a,d){void 0===d&&(d=!0);var n=(0,$i.useRef)(null),P=function(ka){};if("undefined"!=typeof ResizeObserver){var ea=new ResizeObserver(function(ka){ka=ka[0].target;null!==ka.offsetParent&&a(ka)});P=function(ka){ka&&d?(ea.observe(ka),n.current=ka):(n.current&&ea.unobserve(n.current),n.current=null)}}return{ref:n,
callbackRef:P}}function dk(a,d){return void 0===d&&(d=!0),ap(a,d).callbackRef}function yj(a,d,n,P,ea,ka,sa){return ap(function(La){for(var Ua=function(rb,Vb,Zb,Tb){Zb=rb.length;if(0===Zb)return null;for(var sc=[],Kc=0;Kc<Zb;Kc++){var fc=rb.item(Kc);if(fc&&void 0!==fc.dataset.index){var zc=parseInt(fc.dataset.index),vc=parseFloat(fc.dataset.knownSize),$c=Vb(fc,"offsetHeight");if(0===$c&&Tb("Zero-sized element, this should not happen",{child:fc},Hm.ERROR),$c!==vc)fc=sc[sc.length-1],0===sc.length||fc.size!==
$c||fc.endIndex!==zc-1?sc.push({startIndex:zc,endIndex:zc,size:$c}):sc[sc.length-1].endIndex++}}return sc}(La.children,d,0,ea),eb=La.parentElement;!eb.dataset.virtuosoScroller;)eb=eb.parentElement;var lb="window"===eb.firstElementChild.dataset.viewportType;P({scrollTop:Math.max(sa?sa.scrollTop:lb?window.pageYOffset||document.documentElement.scrollTop:eb.scrollTop,0),scrollHeight:sa?sa.scrollHeight:lb?document.documentElement.scrollHeight:eb.scrollHeight,viewportHeight:sa?sa.offsetHeight:lb?window.innerHeight:
eb.offsetHeight});null==ka||ka(function(rb,Vb,Zb){return"normal"===Vb||null!=Vb&&Vb.endsWith("px")||Zb("row-gap was not resolved to pixel value correctly",Vb,Hm.WARN),"normal"===Vb?0:parseInt(null!=Vb?Vb:"0",10)}(0,getComputedStyle(La).rowGap,ea));null!==Ua&&a(Ua)},n)}function sj(a,d){return Math.round(a.getBoundingClientRect()[d])}function xr(a,d,n,P,ea){void 0===P&&(P=kj);var ka=(0,$i.useRef)(null),sa=(0,$i.useRef)(null),La=(0,$i.useRef)(null),Ua=(0,$i.useRef)(!1),eb=(0,$i.useCallback)(function(lb){lb=
lb.target;var rb=lb===window||lb===document,Vb=rb?window.pageYOffset||document.documentElement.scrollTop:lb.scrollTop,Zb=rb?document.documentElement.scrollHeight:lb.scrollHeight,Tb=rb?window.innerHeight:lb.offsetHeight;lb=function(){a({scrollTop:Math.max(Vb,0),scrollHeight:Zb,viewportHeight:Tb})};Ua.current?(0,zH.flushSync)(lb):lb();Ua.current=!1;null!==sa.current&&(Vb===sa.current||0>=Vb||Vb===Zb-Tb)&&(sa.current=null,d(!0),La.current&&(clearTimeout(La.current),La.current=null))},[a,d]);return(0,$i.useEffect)(function(){var lb=
ea||ka.current;return P(ea||ka.current),eb({target:lb}),lb.addEventListener("scroll",eb,{passive:!0}),function(){P(null);lb.removeEventListener("scroll",eb)}},[ka,eb,n,P,ea]),{scrollerRef:ka,scrollByCallback:function(lb){Ua.current=!0;ka.current.scrollBy(lb)},scrollToCallback:function(lb){var rb=ka.current;if(rb&&!("offsetHeight"in rb&&0===rb.offsetHeight)){var Vb,Zb,Tb,sc="smooth"===lb.behavior;if(rb===window?(Zb=Math.max(sj(document.documentElement,"height"),document.documentElement.scrollHeight),
Vb=window.innerHeight,Tb=document.documentElement.scrollTop):(Zb=rb.scrollHeight,Vb=sj(rb,"height"),Tb=rb.scrollTop),lb.top=Math.ceil(Math.max(Math.min(Zb-Vb,lb.top),0)),1.01>Math.abs(Vb-Zb)||lb.top===Tb)return a({scrollTop:Tb,scrollHeight:Zb,viewportHeight:Vb}),void(sc&&d(!0));sc?(sa.current=lb.top,La.current&&clearTimeout(La.current),La.current=setTimeout(function(){La.current=null;sa.current=null;d(!0)},1E3)):sa.current=null;rb.scrollTo(lb)}}}}function Yo(a,d,n,P,ea){return void 0===P&&(P=Dj),
void 0===ea&&(ea=Dj),{k:a,v:d,lvl:n,l:P,r:ea}}function A(a,d){if(a===Dj)return Dj;var n=a.k,P=a.l,ea=a.r;if(d===n){if(P===Dj)return ea;if(ea===Dj)return P;d=fb(P);return Pc(Ab(a,{k:d[0],v:d[1],l:ub(P)}))}return Pc(Ab(a,d<n?{l:A(P,d)}:{r:A(ea,d)}))}function ca(a,d,n){return(void 0===n&&(n="k"),a===Dj)?[-Infinity,void 0]:a[n]===d?[a.k,a.v]:a[n]<d?(d=ca(a.r,d,n),-Infinity===d[0]?[a.k,a.v]:d):ca(a.l,d,n)}function Aa(a,d,n){return a===Dj?Yo(d,n,1):d===a.k?Ab(a,{k:d,v:n}):Zd(ie(Ab(a,d<a.k?{l:Aa(a.l,d,n)}:
{r:Aa(a.r,d,n)})))}function ya(a,d,n){if(a===Dj)return[];var P=a.k,ea=a.v,ka=a.r,sa=[];return P>d&&(sa=sa.concat(ya(a.l,d,n))),P>=d&&P<=n&&sa.push({k:P,v:ea}),P<=n&&(sa=sa.concat(ya(ka,d,n))),sa}function Ma(a){return a===Dj?[]:[].concat(Ma(a.l),[{k:a.k,v:a.v}],Ma(a.r))}function fb(a){return a.r===Dj?[a.k,a.v]:fb(a.r)}function ub(a){return a.r===Dj?a.l:Pc(Ab(a,{r:ub(a.r)}))}function Ab(a,d){return Yo(void 0!==d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==
d.r?d.r:a.r)}function ec(a){return a===Dj||a.lvl>a.r.lvl}function Pc(a){var d=a.l,n=a.r,P=a.lvl;if(n.lvl>=P-1&&d.lvl>=P-1)return a;if(P>n.lvl+1){if(ec(d))return ie(Ab(a,{lvl:P-1}));if(d===Dj||d.r===Dj)throw Error("Unexpected empty nodes");return Ab(d.r,{l:Ab(d,{r:d.r.l}),r:Ab(a,{l:d.r.r,lvl:P-1}),lvl:P})}if(ec(a))return Zd(Ab(a,{lvl:P-1}));if(n===Dj||n.l===Dj)throw Error("Unexpected empty nodes");d=n.l;var ea=ec(d)?n.lvl-1:n.lvl;return Ab(d,{l:Ab(a,{r:d.l,lvl:P-1}),r:Zd(Ab(n,{l:d.r,lvl:ea})),lvl:d.lvl+
1})}function md(a,d,n){return a===Dj?[]:Vd(ya(a,ca(a,d)[0],n),function(P){return{index:P.k,value:P.v}})}function Vd(a,d){var n=a.length;if(0===n)return[];var P=d(a[0]),ea=P.index;P=P.value;for(var ka=[],sa=1;sa<n;sa++){var La=d(a[sa]),Ua=La.index;La=La.value;ka.push({start:ea,end:Ua-1,value:P});ea=Ua;P=La}return ka.push({start:ea,end:Infinity,value:P}),ka}function Zd(a){var d=a.r,n=a.lvl;return d===Dj||d.r===Dj||d.lvl!==n||d.r.lvl!==n?a:Ab(d,{l:Ab(a,{r:d.l}),lvl:n+1})}function ie(a){var d=a.l;return d===
Dj||d.lvl!==a.lvl?a:Ab(d,{r:Ab(a,{l:d.r})})}function hf(a,d,n,P){void 0===P&&(P=0);for(var ea=a.length-1;P<=ea;){var ka=Math.floor((P+ea)/2),sa=n(a[ka],d);if(0===sa)return ka;if(-1===sa){if(2>ea-P)return ka-1;ea=ka-1}else{if(ea===P)return ka;P=ka+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);}function Hg(a){var d=a.size,n=a.startIndex,P=a.endIndex;return function(ea){return ea.start===n&&(ea.end===P||Infinity===ea.end)&&ea.value===d}}function Oh(a,d){a=
a.index;return d===a?0:d<a?-1:1}function wj(a,d){a=a.offset;return d===a?0:d<a?-1:1}function Ah(a){return{index:a.index,value:a}}function Cj(a,d,n,P){var ea=0,ka=0,sa=0,La;0!==d?(sa=a[La=hf(a,d-1,Oh)].offset,ka=ca(n,d-1),ea=ka[0],ka=ka[1],a.length&&a[La].size===ca(n,d)[1]&&--La,a=a.slice(0,La+1)):a=[];for(d=Lm(md(n,d,Infinity));!(n=d()).done;)La=n.value,n=La.start,La=La.value,ea=n-ea,sa=ea*ka+sa+ea*P,a.push({offset:sa,size:La,index:n}),ea=n,ka=La;return{offsetTree:a,lastIndex:ea,lastOffset:sa,lastSize:ka}}
function aj(a,d){var n=d[0],P=d[1],ea=d[3];0<n.length&&(0,d[2])("received item sizes",n,Hm.DEBUG);var ka=a.sizeTree;d=ka;var sa=0;if(0<P.length&&ka===Dj&&2===n.length){var La=n[0].size,Ua=n[1].size;d=P.reduce(function(lb,rb){return Aa(Aa(lb,rb,La),rb+1,Ua)},d)}else n=function(lb,rb){var Vb,Zb=lb===Dj?0:Infinity;for(rb=Lm(rb);!(Vb=rb()).done;){var Tb=Vb.value;Vb=Tb.size;var sc=Tb.startIndex,Kc=Tb.endIndex;if(Zb=Math.min(Zb,sc),lb===Dj)lb=Aa(lb,0,Vb);else{var fc=md(lb,sc-1,Kc+1);if(!fc.some(Hg(Tb))){var zc,
vc=Tb=!1;for(fc=Lm(fc);!(zc=fc()).done;){var $c=zc.value;zc=$c.start;var ed=$c.end;$c=$c.value;Tb?(Kc>=zc||Vb===$c)&&(lb=A(lb,zc)):(vc=$c!==Vb,Tb=!0);ed>Kc&&Kc>=zc&&$c!==Vb&&(lb=Aa(lb,Kc+1,$c))}vc&&(lb=Aa(lb,sc,Vb))}}}return[lb,Zb]}(d,n),d=n[0],sa=n[1];if(d===ka)return a;a=Cj(a.offsetTree,sa,d,ea);var eb=a.offsetTree;return{sizeTree:d,offsetTree:eb,lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:P.reduce(function(lb,rb){return Aa(lb,rb,Ui(rb,eb,ea))},Dj),groupIndices:P}}
function Ui(a,d,n){if(0===d.length)return 0;d=d[hf(d,a,Oh)];a-=d.index;a=d.size*a+(a-1)*n+d.offset;return 0<a?a+n:a}function jj(a,d,n){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+1;a=vi("LAST"===a.index?n:a.index,d);return Math.max(0,a,Math.min(n,a))}function vi(a,d){if(d.groupOffsetTree===Dj)return a;for(var n=0;d.groupIndices[n]<=a+n;)n++;return a+n}function cj(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&BH||(a.behavior="auto"),a.offset||(a.offset=
0),a}function dj(a){return!!a&&("smooth"===a?"smooth":"auto")}function gj(a){return a.reduce(function(d,n){return d.groupIndices.push(d.totalCount),d.totalCount+=n+1,d},{totalCount:0,groupIndices:[]})}function lk(a,d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function gl(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function Cl(a,d,n){return"number"==typeof a?"up"===n&&"top"===d||"down"===n&&"bottom"===d?a:0:"up"===n?"top"===d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function Cn(a,
d,n){if(0===a.length)return[];if(d.groupOffsetTree===Dj)return a.map(function(Ua){return gi({},Ua,{index:Ua.index+n,originalIndex:Ua.index})});var P,ea=[],ka=md(d.groupOffsetTree,a[0].index,a[a.length-1].index),sa=void 0,La=0;for(a=Lm(a);!(P=a()).done;)P=P.value,(!sa||sa.end<P.index)&&(sa=ka.shift(),La=d.groupIndices.indexOf(sa.start)),ea.push(gi({},P.index===sa.start?{type:"group",index:La}:{index:P.index-(La+1)+n,groupIndex:La},{size:P.size,offset:P.offset,originalIndex:P.index,data:P.data}));return ea}
function en(a,d,n,P,ea,ka){var sa=0,La=0;0<a.length&&(sa=a[0].offset,La=a[a.length-1],La=La.offset+La.size);var Ua=n-ea.lastIndex,eb=sa;P=ea.lastOffset+Ua*ea.lastSize+(Ua-1)*P-La;return{items:Cn(a,ea,ka),topItems:Cn(d,ea,ka),topListHeight:d.reduce(function(lb,rb){return rb.size+lb},0),offsetTop:sa,offsetBottom:P,top:eb,bottom:La,totalCount:n,firstItemIndex:ka}}function Bn(a){var d,n=!1;return function(){return n||(n=!0,d=a()),d}}function ri(a,d){var n=(0,$i.useRef)(null),P=(0,$i.useCallback)(function(Ua){if(null!==
Ua&&Ua.offsetParent){var eb=Ua.getBoundingClientRect();Ua=eb.width;if(d){var lb=d.getBoundingClientRect();eb=eb.top-lb.top;lb=lb.height-Math.max(0,eb);eb+=d.scrollTop}else lb=window.innerHeight-Math.max(0,eb.top),eb=eb.top+window.pageYOffset;n.current={offsetTop:eb,visibleHeight:lb,visibleWidth:Ua};a(n.current)}},[a,d]),ea=ap(P),ka=ea.callbackRef,sa=ea.ref,La=(0,$i.useCallback)(function(){P(sa.current)},[P,sa]);return(0,$i.useEffect)(function(){if(d){d.addEventListener("scroll",La);var Ua=new ResizeObserver(La);
return Ua.observe(d),function(){d.removeEventListener("scroll",La);Ua.unobserve(d)}}return window.addEventListener("scroll",La),window.addEventListener("resize",La),function(){window.removeEventListener("scroll",La);window.removeEventListener("resize",La)}},[La,d]),ka}function Zp(a){return a}function hl(a,d){var n=Fh();return ji(n,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),Qg(n,a),n}function qk(a,d){if("string"!=
typeof a)return{context:d}}function xo(a){var d=a.usePublisher,n=a.useEmitter,P=a.useEmitterValue;return Sh.memo(function(ea){var ka=ea.style,sa=ea.children;ea=Km(ea,bD);var La=d("scrollContainerState"),Ua=P("ScrollerComponent"),eb=d("smoothScrollTargetReached"),lb=P("scrollerRef"),rb=P("context");La=xr(La,eb,Ua,lb);eb=La.scrollerRef;lb=La.scrollByCallback;return n("scrollTo",La.scrollToCallback),n("scrollBy",lb),(0,$i.createElement)(Ua,gi({ref:eb,style:gi({},EH,ka),"data-test-id":"virtuoso-scroller",
"data-virtuoso-scroller":!0,tabIndex:0},ea,qk(Ua,rb)),sa)})}function Pp(a){var d=a.usePublisher,n=a.useEmitter,P=a.useEmitterValue;return Sh.memo(function(ea){var ka=ea.style,sa=ea.children;ea=Km(ea,cD);var La=d("windowScrollContainerState"),Ua=P("ScrollerComponent"),eb=d("smoothScrollTargetReached"),lb=P("totalListHeight"),rb=P("deviation"),Vb=P("customScrollParent"),Zb=P("context");eb=xr(La,eb,Ua,kj,Vb);var Tb=eb.scrollerRef;La=eb.scrollByCallback;eb=eb.scrollToCallback;return UC(function(){return Tb.current=
Vb||window,function(){Tb.current=null}},[Tb,Vb]),n("windowScrollTo",eb),n("scrollBy",La),(0,$i.createElement)(Ua,gi({style:gi({position:"relative"},ka,0!==lb?{height:lb+rb}:{}),"data-virtuoso-scroller":!0},ea,qk(Ua,Zb)),sa)})}function Qp(a,d,n){return Array.from({length:d-a+1}).map(function(P,ea){return{index:ea+a,data:null==n?void 0:n[ea+a]}})}function Mn(a,d){return a&&a.column===d.column&&a.row===d.row}function yo(a,d,n,P){var ea=n.height;return void 0===ea||0===P.length?{top:0,bottom:0}:{top:vl(a,
d,n,P[0].index),bottom:vl(a,d,n,P[P.length-1].index)+ea}}function vl(a,d,n,P){var ea=d.column;a=Fp(1,Lw((a.width+ea)/(n.width+ea)));P=Lw(P/a);n=P*n.height+Fp(0,P-1)*d.row;return 0<n?n+d.row:n}function zm(a,d,n){return"normal"===d||null!=d&&d.endsWith("px")||n(a+" was not resolved to pixel value correctly",d,Hm.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function xn(a,d){xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,P){n.__proto__=P;return n};return xn(a,d)}function Wp(a,d){a.prototype=
Object.create(d.prototype);a.prototype.constructor=a;xn(a,d)}function Do(a){Do=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return Do(a)}function Fu(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function Bq(a,d,n){Bq=Fu()?Reflect.construct.bind():function(P,
ea,ka){var sa=[null];sa.push.apply(sa,ea);P=new (Function.bind.apply(P,sa));ka&&xn(P,ka.prototype);return P};return Bq.apply(null,arguments)}function Dq(a){var d="function"===typeof Map?new Map:void 0;Dq=function(n){function P(){return Bq(n,arguments,Do(this).constructor)}if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!==typeof n)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof d){if(d.has(n))return d.get(n);
d.set(n,P)}P.prototype=Object.create(n.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}});return xn(P,n)};return Dq(a)}function Hu(a,d,n){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*n)}function $p(a,d,n,P){void 0===P&&(P=Hu);if(0===d)return P(n,n,n);a=(a%360+360)%360/60;var ea=(1-Math.abs(2*n-1))*d,ka=ea*(1-Math.abs(a%2-1)),sa=d=0,La=0;0<=a&&1>a?(d=ea,sa=ka):1<=a&&2>a?(d=ka,sa=ea):2<=a&&3>a?(sa=ea,La=ka):3<=a&&4>a?(sa=ka,La=ea):4<=a&&5>a?(d=ka,La=ea):
5<=a&&6>a&&(d=ea,La=ka);n-=ea/2;return P(d+n,sa+n,La+n)}function rs(a){if("string"!==typeof a)throw new np(3);if("string"===typeof a){var d=a.toLowerCase();a=cz[d]?"#"+cz[d]:a}if(a.match(oD))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(dz))return d=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};if(a.match(Qo))return{red:parseInt(""+
a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(yv))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d};if(d=Xl.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)};if(d=Qw.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:1<parseFloat(""+
d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var n=zv.exec(a);if(n){d=parseInt(""+n[1],10);var P=parseInt(""+n[2],10)/100;n=parseInt(""+n[3],10)/100;d="rgb("+$p(d,P,n)+")";P=Xl.exec(d);if(!P)throw new np(4,a,d);return{red:parseInt(""+P[1],10),green:parseInt(""+P[2],10),blue:parseInt(""+P[3],10)}}if(d=op.exec(a.substring(0,50))){P=parseInt(""+d[1],10);n=parseInt(""+d[2],10)/100;var ea=parseInt(""+d[3],10)/100;P="rgb("+$p(P,n,ea)+")";n=Xl.exec(P);if(!n)throw new np(4,a,P);return{red:parseInt(""+
n[1],10),green:parseInt(""+n[2],10),blue:parseInt(""+n[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new np(5);}function zo(a){a=a.toString(16);return 1===a.length?"0"+a:a}function Rp(a,d,n){return Sj("#"+zo(Math.round(255*a))+zo(Math.round(255*d))+zo(Math.round(255*n)))}function ls(a,d,n){if("number"===typeof a&&"number"===typeof d&&"number"===typeof n)return Sj("#"+zo(a)+zo(d)+zo(n));if("object"===typeof a&&void 0===d&&void 0===n)return Sj("#"+zo(a.red)+zo(a.green)+
zo(a.blue));throw new np(6);}function st(a){if("object"!==typeof a)throw new np(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?ls(a.red,a.green,a.blue):"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new np(7);return a}if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return ls(a);if("number"===
typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?$p(a.hue,a.saturation,a.lightness,Rp):"rgba("+$p(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new np(2);return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=$p(a.hue,a.saturation,a.lightness,Rp);else throw new np(1);
return a}throw new np(8);}function sr(a,d,n){return function(){var P=n.concat(Array.prototype.slice.call(arguments));return P.length>=d?a.apply(this,P):sr(a,d,P)}}function tr(a,d){if("transparent"===d)return d;d=rs(d);var n=d.red/255,P=d.green/255,ea=d.blue/255,ka=Math.max(n,P,ea),sa=Math.min(n,P,ea),La=(ka+sa)/2;if(ka===sa)d=void 0!==d.alpha?{hue:0,saturation:0,lightness:La,alpha:d.alpha}:{hue:0,saturation:0,lightness:La};else{var Ua=ka-sa;sa=.5<La?Ua/(2-ka-sa):Ua/(ka+sa);switch(ka){case n:n=(P-
ea)/Ua+(P<ea?6:0);break;case P:n=(ea-n)/Ua+2;break;default:n=(n-P)/Ua+4}n*=60;d=void 0!==d.alpha?{hue:n,saturation:sa,lightness:La,alpha:d.alpha}:{hue:n,saturation:sa,lightness:La}}La=of;a=d.lightness-parseFloat(a);return st(La({},d,{lightness:Math.max(0,Math.min(1,a))}))}function dn(a,d){var n;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let P=null!=(n=d.fill)?n:a.props.fill;void 0===P||Ff(P)||"var(--ls-secondary-background-color)"===
P||d.noFill||!NH.includes(a.props.type)||(a=Av(.3,P),d.stroke=a);return d}function ps({strokeWidth:a,size:d,mode:n}){return"svg"===n?(0,gr.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,d[1]-2*a),strokeWidth:4*a}):(0,gr.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function yn(){const a=bf();return"panning"===a.inputs.state||
"pinching"===a.inputs.state}function Cq({left:a,middle:d,right:n,stroke:P,strokeWidth:ea}){return(0,tu.jsxs)("g",{children:[(0,tu.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${n}`}),(0,tu.jsx)("path",{d:`M ${a} L ${d} ${n}`,fill:"none",stroke:P,strokeWidth:ea,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Eq(a,d,n){d=Q(a,d,a,n).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(n=d[0])?De.rotWith(n,
a,Math.PI/6):a;a=n?De.rotWith(n,a,-Math.PI/6):a;return{left:d,right:a}}function ss(a,d,n){const {left:P,right:ea}=Eq(a,d,n);return`M ${P} L ${a} ${ea}`}function im(a,d,n,P,ea){a=a.strokeWidth;var ka=De.dist(d,n);a=Math.min(ka/3,16*a);ka=[];ka.push(`M ${d} L ${n}`);P&&ka.push(ss(d,n,a));ea&&ka.push(ss(n,d,a));return ka.join(" ")}function ns({id:a,bounds:d,labelSize:n,offset:P,scale:ea=1}){return(0,Cv.jsx)("defs",{children:(0,Cv.jsxs)("mask",{id:a+"_clip",children:[(0,Cv.jsx)("rect",{x:-100,y:-100,
width:d.width+200,height:d.height+200,fill:"white"}),(0,Cv.jsx)("rect",{x:d.width/2-n[0]/2*ea+((null==P?void 0:P[0])||0),y:d.height/2-n[1]/2*ea+((null==P?void 0:P[1])||0),width:n[0]*ea,height:n[1]*ea,rx:4*ea,ry:4*ea,fill:"black"})]})})}function Sp(a,d,n,P=ea=>ea){return a*P(.5-d*(.5-n))}function Tp(a){return[-a[0],-a[1]]}function xl(a,d){return[a[0]+d[0],a[1]+d[1]]}function wl(a,d){return[a[0]-d[0],a[1]-d[1]]}function yl(a,d){return[a[0]*d,a[1]*d]}function Up(a){return[a[1],-a[0]]}function ur(a,d){return a[0]===
d[0]&&a[1]===d[1]}function Fq(a){return a[0]*a[0]+a[1]*a[1]}function Hq(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function tt(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function Bo(a,d,n){let P=Math.sin(n);n=Math.cos(n);let ea=a[0]-d[0];a=a[1]-d[1];return[ea*n-a*P+d[0],ea*P+a*n+d[1]]}function zn(a,d,n){return xl(a,yl(wl(d,a),n))}function Vp(a,d,n){return xl(a,yl(d,n))}function Gq(a,d={}){let {size:n=16,smoothing:P=.5,thinning:ea=.5,simulatePressure:ka=!0,easing:sa=be=>be,start:La={},end:Ua=
{},last:eb=!1}=d,{cap:lb=!0,easing:rb=be=>be*(2-be)}=La,{cap:Vb=!0,easing:Zb=be=>--be*be*be+1}=Ua;if(0===a.length||0>=n)return[];var Tb=a[a.length-1].runningLength;let sc=!1===La.taper?0:!0===La.taper?Math.max(n,Tb):La.taper,Kc=!1===Ua.taper?0:!0===Ua.taper?Math.max(n,Tb):Ua.taper;var fc=Math.pow(n*P,2);d=[];let zc=[];var vc=a.slice(0,10).reduce((be,Jd)=>{var ee=Jd.pressure;ka&&(Jd=jt(1,Jd.distance/n),ee=jt(1,1-Jd),ee=jt(1,be+.275*(ee-be)*Jd));return(be+ee)/2},a[0].pressure),$c=Sp(n,ea,a[a.length-
1].pressure,sa),ed;let Wd=a[0].vector;var me=a[0].point;let Kf=me;var Oe=me;let nf=Kf;var mg=!1;for(var wf=0;wf<a.length;wf++){var {pressure:bg}=a[wf];let {point:be,vector:Jd,distance:ee,runningLength:xf}=a[wf];if(wf<a.length-1&&3>Tb-xf)continue;ea?(ka&&($c=jt(1,ee/n),bg=jt(1,1-$c),bg=jt(1,vc+.275*(bg-vc)*$c)),$c=Sp(n,ea,bg,sa)):$c=n/2;void 0===ed&&(ed=$c);var ke=xf<sc?rb(xf/sc):1,Pd=Tb-xf<Kc?Zb((Tb-xf)/Kc):1;$c=Math.max(.01,$c*Math.min(ke,Pd));Pd=(wf<a.length-1?a[wf+1]:a[wf]).vector;let Of=wf<a.length-
1?Jd[0]*Pd[0]+Jd[1]*Pd[1]:1;ke=null!==Of&&0>Of;if(0>Jd[0]*Wd[0]+Jd[1]*Wd[1]&&!mg||ke){me=yl(Up(Wd),$c);for(let Kg=1/13,xh=0;1>=xh;xh+=Kg)Oe=Bo(wl(be,me),be,kt*xh),d.push(Oe),nf=Bo(xl(be,me),be,kt*-xh),zc.push(nf);me=Oe;Kf=nf;ke&&(mg=!0)}else(mg=!1,wf===a.length-1)?(bg=yl(Up(Jd),$c),d.push(wl(be,bg)),zc.push(xl(be,bg))):(vc=yl(Up(zn(Pd,Jd,Of)),$c),Oe=wl(be,vc),(1>=wf||Fq(wl(me,Oe))>fc)&&(d.push(Oe),me=Oe),nf=xl(be,vc),(1>=wf||Fq(wl(Kf,nf))>fc)&&(zc.push(nf),Kf=nf),vc=bg,Wd=Jd)}Tb=a[0].point.slice(0,
2);fc=1<a.length?a[a.length-1].point.slice(0,2):xl(a[0].point,[1,1]);Oe=[];mg=[];if(1===a.length){if(!sc&&!Kc||eb){a=Vp(Tb,Hq(Up(wl(Tb,fc))),-(ed||$c));d=[];for(let be=1/13,Jd=be;1>=Jd;Jd+=be)d.push(Bo(a,Tb,2*kt*Jd));return d}}else{if(!(sc||Kc&&1===a.length))if(lb)for(let be=1/13,Jd=be;1>=Jd;Jd+=be)ed=Bo(zc[0],Tb,kt*Jd),Oe.push(ed);else wf=wl(d[0],zc[0]),ed=yl(wf,.5),wf=yl(wf,.51),Oe.push(wl(Tb,ed),wl(Tb,wf),xl(Tb,wf),xl(Tb,ed));ed=Up(Tp(a[a.length-1].vector));if(Kc||sc&&1===a.length)mg.push(fc);
else if(Vb){a=Vp(fc,ed,$c);for(let be=1/29,Jd=be;1>Jd;Jd+=be)mg.push(Bo(a,fc,3*kt*Jd))}else mg.push(xl(fc,yl(ed,$c)),xl(fc,yl(ed,.99*$c)),wl(fc,yl(ed,.99*$c)),wl(fc,yl(ed,$c)))}return d.concat(mg,zc.reverse(),Oe)}function Hk(a,d={}){var n;let {streamline:P=.5,size:ea=16,last:ka=!1}=d;if(0===a.length)return[];d=.15+.85*(1-P);a=Array.isArray(a[0])?a:a.map(({x:rb,y:Vb,pressure:Zb=.5})=>[rb,Vb,Zb]);if(2===a.length){var sa=a[1];a=a.slice(0,-1);for(var La=1;5>La;La++)a.push(zn(a[0],sa,La/4))}1===a.length&&
(a=[...a,[...xl(a[0],[1,1]),...a[0].slice(2)]]);sa=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];La=!1;let Ua=0,eb=sa[0],lb=a.length-1;for(let rb=1;rb<a.length;rb++){let Vb=ka&&rb===lb?a[rb].slice(0,2):zn(eb.point,a[rb],d);if(ur(eb.point,Vb))continue;let Zb=tt(Vb,eb.point);if(Ua+=Zb,rb<lb&&!La){if(Ua<ea)continue;La=!0}eb={point:Vb,pressure:0<=a[rb][2]?a[rb][2]:.5,vector:Hq(wl(eb.point,Vb)),distance:Zb,runningLength:Ua};sa.push(eb)}return sa[0].vector=
(null==(n=sa[1])?void 0:n.vector)||[0,0],sa}function Nn(a,d=4/3){return(new es(a)).exportAsSVG(d)}function go(a,d=4/3){return(new es(a)).generatePreviewJsx(void 0,d)}function cn({id:a,type:d,onRemove:n,showContent:P}){const ea=bf(),{handlers:ka}=My.default.useContext(Pj),sa=ka.t;return(0,ok.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,ok.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,ok.jsx)(ar,{id:a,showReferenceContent:P})}),
(0,ok.jsx)("div",{className:"flex-1"}),ka.getBlockPageName(a)!==ea.currentPage.name&&(0,ok.jsx)(Ee,{tooltip:sa("whiteboard/open-page"),type:"button",onClick:()=>null==ka?void 0:ka.redirectToPage(a),children:(0,ok.jsx)(oi,{name:"open-as-page"})}),(0,ok.jsx)(Ee,{tooltip:sa("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==ka?void 0:ka.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,ok.jsx)(oi,{name:"move-to-sidebar-right"})}),n&&(0,ok.jsx)(Ee,{className:"tl-shape-links-panel-item-remove-button",
tooltip:sa("whiteboard/remove-link"),type:"button",onClick:n,children:(0,ok.jsx)(oi,{name:"x",className:"!translate-y-0"})})]})}function ja({options:a,value:d,onValueChange:n}){return(0,sn.jsx)(BD,{className:"tl-toggle-group-input",type:"single",value:d,onValueChange:n,children:a.map(P=>(0,sn.jsx)(Je,{content:P.tooltip,children:(0,sn.jsx)("div",{className:"inline-block",children:(0,sn.jsx)(nz,{className:"tl-toggle-group-input-button",value:P.value,disabled:P.value===d,children:(0,sn.jsx)(oi,{name:P.icon})})})},
P.value))})}function Ca({options:a,value:d,onValueChange:n}){return(0,sn.jsx)(BD,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:n,children:a.map(P=>(0,sn.jsx)(nz,{className:"tl-toggle-group-input-button",value:P.value,children:(0,sn.jsx)(oi,{name:P.icon})},P.value))})}function bb(a){return bf().selectedShapesArray.filter(d=>!d.props.isLocked).filter(d=>{var n;return null==(n=pz[d.props.type])?void 0:n.includes(a)})}function bc(a){return d=>"mouse"!==d.pointerType?a(d):void 0}
function Cc(a){var d;a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";const n=a[0].toLowerCase();[a]=null!=(d=Object.entries(GD).find(([,P])=>P.includes(n)))?d:["unknown",null];return a}function Xc(...a){return(...d)=>Ji(this,null,function*(){for(const n of a){const P=yield n(...d);if(P&&0<P.length)return P}return null})}function Qd(a,d){return Ji(this,null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():null})}function ne(){const {handlers:a}=
vq.useContext(Pj);return vq.useCallback((d,n)=>Ji(this,null,function*(){if(n.shiftKey&&1===d.selectedShapesArray.length){var P=yield navigator.clipboard.read();let ea;0<P.length&&(P=(yield(yield P[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(P)&&40===P.length?(P=P.slice(2,-2),Ug(P)&&(ea=P)):/^\[\[.*\]\]$/.test(P)&&(ea=P.slice(2,-2)));if(ea){d.selectedShapesArray[0].update({refs:[ea]});d.persist();return}}vz(d,n,a)}),[])}function He(){const a=ne();return bI.useCallback((d,n)=>Ji(this,
[d,n],function*(P,{dataTransfer:ea,point:ka}){a(P,{point:ka,shiftKey:!1,dataTransfer:ea,fromDrop:!0})}),[])}function df(){const {handlers:a}=Iv.useContext(Pj);return Iv.useCallback((d,{text:n,html:P})=>{a.copyToClipboard(n,P)},[])}function Pf(){return wz.default.useCallback(a=>Ji(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var Ig=Object.create,Vg=Object.defineProperty,zi=Object.defineProperties,fi=Object.getOwnPropertyDescriptor,
Sk=Object.getOwnPropertyDescriptors,Co=Object.getOwnPropertyNames,gm=Object.getOwnPropertySymbols,fj=Object.getPrototypeOf,Tk=Object.prototype.hasOwnProperty,Qm=Object.prototype.propertyIsEnumerable,Zo=(a,d,n)=>d in a?Vg(a,d,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[d]=n,Ie=(a,d)=>{for(var n in d||={})Tk.call(d,n)&&Zo(a,n,d[n]);if(gm)for(n of gm(d))Qm.call(d,n)&&Zo(a,n,d[n]);return a},$f=(a,d)=>zi(a,Sk(d)),wg=(a,d)=>{var n={},P;for(P in a)Tk.call(a,P)&&0>d.indexOf(P)&&(n[P]=a[P]);if(null!=
a&&gm)for(P of gm(a))0>d.indexOf(P)&&Qm.call(a,P)&&(n[P]=a[P]);return n},qi=(a,d)=>function(){return d||(0,a[Co(a)[0]])((d={exports:{}}).exports,d),d.exports},Nm=(a,d,n,P)=>{if(d&&"object"===typeof d||"function"===typeof d)for(let ea of Co(d))Tk.call(a,ea)||ea===n||Vg(a,ea,{get:()=>d[ea],enumerable:!(P=fi(d,ea))||P.enumerable});return a},gg=(a,d,n)=>(n=null!=a?Ig(fj(a)):{},Nm(!d&&a&&a.__esModule?n:Vg(n,"default",{value:a,enumerable:!0}),a)),Ae=(a,d,n,P)=>{for(var ea=1<P?void 0:P?fi(d,n):d,ka=a.length-
1,sa;0<=ka;ka--)if(sa=a[ka])ea=(P?sa(d,n,ea):sa(ea))||ea;P&&ea&&Vg(d,n,ea);return ea},pb=(a,d,n)=>{Zo(a,"symbol"!==typeof d?d+"":d,n);return n},Ji=(a,d,n)=>new Promise((P,ea)=>{var ka=Ua=>{try{La(n.next(Ua))}catch(eb){ea(eb)}},sa=Ua=>{try{La(n.throw(Ua))}catch(eb){ea(eb)}},La=Ua=>Ua.done?P(Ua.value):Promise.resolve(Ua.value).then(ka,sa);La((n=n.apply(a,d)).next())}),Am=qi({["../../node_modules/rbush/rbush.min.js"](a,d){!function(n,P){"object"==typeof a&&"undefined"!=typeof d?d.exports=P():"function"==
typeof define&&define.amd?define(P):(n=n||self).RBush=P()}(a,function(){function n(fc,zc,vc,$c,ed){!function wf(me,Kf,Oe,nf,mg){for(;nf>Oe;){if(600<nf-Oe){var bg=nf-Oe+1,ke=Kf-Oe+1,Pd=Math.log(bg),be=.5*Math.exp(2*Pd/3);Pd=.5*Math.sqrt(Pd*be*(bg-be)/bg)*(0>ke-bg/2?-1:1);wf(me,Kf,Math.max(Oe,Math.floor(Kf-ke*be/bg+Pd)),Math.min(nf,Math.floor(Kf+(bg-ke)*be/bg+Pd)),mg)}bg=me[Kf];ke=Oe;be=nf;P(me,Oe,Kf);for(0<mg(me[nf],bg)&&P(me,Oe,nf);ke<be;){P(me,ke,be);ke++;for(be--;0>mg(me[ke],bg);)ke++;for(;0<mg(me[be],
bg);)be--}0===mg(me[Oe],bg)?P(me,Oe,be):P(me,++be,nf);be<=Kf&&(Oe=be+1);Kf<=be&&(nf=be-1)}}(fc,zc,vc||0,$c||fc.length-1,ed||ea)}function P(fc,zc,vc){var $c=fc[zc];fc[zc]=fc[vc];fc[vc]=$c}function ea(fc,zc){return fc<zc?-1:fc>zc?1:0}function ka(fc,zc){sa(fc,0,fc.children.length,zc,fc)}function sa(fc,zc,vc,$c,ed){ed||=Tb(null);ed.minX=1/0;ed.minY=1/0;ed.maxX=-1/0;for(ed.maxY=-1/0;zc<vc;zc++){var Wd=fc.children[zc];La(ed,fc.leaf?$c(Wd):Wd)}return ed}function La(fc,zc){return fc.minX=Math.min(fc.minX,
zc.minX),fc.minY=Math.min(fc.minY,zc.minY),fc.maxX=Math.max(fc.maxX,zc.maxX),fc.maxY=Math.max(fc.maxY,zc.maxY),fc}function Ua(fc,zc){return fc.minX-zc.minX}function eb(fc,zc){return fc.minY-zc.minY}function lb(fc){return(fc.maxX-fc.minX)*(fc.maxY-fc.minY)}function rb(fc){return fc.maxX-fc.minX+(fc.maxY-fc.minY)}function Vb(fc,zc){return fc.minX<=zc.minX&&fc.minY<=zc.minY&&zc.maxX<=fc.maxX&&zc.maxY<=fc.maxY}function Zb(fc,zc){return zc.minX<=fc.maxX&&zc.minY<=fc.maxY&&zc.maxX>=fc.minX&&zc.maxY>=fc.minY}
function Tb(fc){return{children:fc,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function sc(fc,zc,vc,$c,ed){for(var Wd=[zc,vc];Wd.length;)if(!((vc=Wd.pop())-(zc=Wd.pop())<=$c)){var me=zc+Math.ceil((vc-zc)/$c/2)*$c;n(fc,me,zc,vc,ed);Wd.push(zc,me,me,vc)}}var Kc=function(fc){void 0===fc&&(fc=9);this._maxEntries=Math.max(4,fc);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return Kc.prototype.all=function(){return this._all(this.data,[])},Kc.prototype.search=function(fc){var zc=
this.data,vc=[];if(!Zb(fc,zc))return vc;for(var $c=this.toBBox,ed=[];zc;){for(var Wd=0;Wd<zc.children.length;Wd++){var me=zc.children[Wd],Kf=zc.leaf?$c(me):me;Zb(fc,Kf)&&(zc.leaf?vc.push(me):Vb(fc,Kf)?this._all(me,vc):ed.push(me))}zc=ed.pop()}return vc},Kc.prototype.collides=function(fc){var zc=this.data;if(!Zb(fc,zc))return!1;for(var vc=[];zc;){for(var $c=0;$c<zc.children.length;$c++){var ed=zc.children[$c],Wd=zc.leaf?this.toBBox(ed):ed;if(Zb(fc,Wd)){if(zc.leaf||Vb(fc,Wd))return!0;vc.push(ed)}}zc=
vc.pop()}return!1},Kc.prototype.load=function(fc){if(!fc||!fc.length)return this;if(fc.length<this._minEntries){for(var zc=0;zc<fc.length;zc++)this.insert(fc[zc]);return this}fc=this._build(fc.slice(),0,fc.length-1,0);this.data.children.length?this.data.height===fc.height?this._splitRoot(this.data,fc):(this.data.height<fc.height&&(zc=this.data,this.data=fc,fc=zc),this._insert(fc,this.data.height-fc.height-1,!0)):this.data=fc;return this},Kc.prototype.insert=function(fc){return fc&&this._insert(fc,
this.data.height-1),this},Kc.prototype.clear=function(){return this.data=Tb([]),this},Kc.prototype.remove=function(fc,zc){if(!fc)return this;for(var vc,$c,ed,Wd=this.data,me=this.toBBox(fc),Kf=[],Oe=[];Wd||Kf.length;){if(Wd||(Wd=Kf.pop(),$c=Kf[Kf.length-1],vc=Oe.pop(),ed=!0),Wd.leaf){a:{var nf=fc;var mg=Wd.children,wf=zc;if(wf){for(var bg=0;bg<mg.length;bg++)if(wf(nf,mg[bg])){nf=bg;break a}nf=-1}else nf=mg.indexOf(nf)}if(-1!==nf)return Wd.children.splice(nf,1),Kf.push(Wd),this._condense(Kf),this}ed||
Wd.leaf||!Vb(Wd,me)?$c?(vc++,Wd=$c.children[vc],ed=!1):Wd=null:(Kf.push(Wd),Oe.push(vc),vc=0,$c=Wd,Wd=Wd.children[0])}return this},Kc.prototype.toBBox=function(fc){return fc},Kc.prototype.compareMinX=function(fc,zc){return fc.minX-zc.minX},Kc.prototype.compareMinY=function(fc,zc){return fc.minY-zc.minY},Kc.prototype.toJSON=function(){return this.data},Kc.prototype.fromJSON=function(fc){return this.data=fc,this},Kc.prototype._all=function(fc,zc){for(var vc=[];fc;)fc.leaf?zc.push.apply(zc,fc.children):
vc.push.apply(vc,fc.children),fc=vc.pop();return zc},Kc.prototype._build=function(fc,zc,vc,$c){var ed,Wd=vc-zc+1,me=this._maxEntries;if(Wd<=me)return ka(ed=Tb(fc.slice(zc,vc+1)),this.toBBox),ed;$c||($c=Math.ceil(Math.log(Wd)/Math.log(me)),me=Math.ceil(Wd/Math.pow(me,$c-1)));(ed=Tb([])).leaf=!1;ed.height=$c;Wd=Math.ceil(Wd/me);me=Wd*Math.ceil(Math.sqrt(me));for(sc(fc,zc,vc,me,this.compareMinX);zc<=vc;zc+=me){var Kf=Math.min(zc+me-1,vc);sc(fc,zc,Kf,Wd,this.compareMinY);for(var Oe=zc;Oe<=Kf;Oe+=Wd)ed.children.push(this._build(fc,
Oe,Math.min(Oe+Wd-1,Kf),$c-1))}return ka(ed,this.toBBox),ed},Kc.prototype._chooseSubtree=function(fc,zc,vc,$c){for(;$c.push(zc),!zc.leaf&&$c.length-1!==vc;){for(var ed=1/0,Wd=1/0,me=void 0,Kf=0;Kf<zc.children.length;Kf++){var Oe=zc.children[Kf],nf=lb(Oe),mg=(wf=fc,bg=Oe,(Math.max(bg.maxX,wf.maxX)-Math.min(bg.minX,wf.minX))*(Math.max(bg.maxY,wf.maxY)-Math.min(bg.minY,wf.minY))-nf);mg<Wd?(Wd=mg,ed=nf<ed?nf:ed,me=Oe):mg===Wd&&nf<ed&&(ed=nf,me=Oe)}zc=me||zc.children[0]}var wf,bg;return zc},Kc.prototype._insert=
function(fc,zc,vc){vc=vc?fc:this.toBBox(fc);var $c=[],ed=this._chooseSubtree(vc,this.data,zc,$c);ed.children.push(fc);for(La(ed,vc);0<=zc&&$c[zc].children.length>this._maxEntries;)this._split($c,zc),zc--;this._adjustParentBBoxes(vc,$c,zc)},Kc.prototype._split=function(fc,zc){var vc=fc[zc],$c=vc.children.length,ed=this._minEntries;this._chooseSplitAxis(vc,ed,$c);$c=this._chooseSplitIndex(vc,ed,$c);$c=Tb(vc.children.splice($c,vc.children.length-$c));$c.height=vc.height;$c.leaf=vc.leaf;ka(vc,this.toBBox);
ka($c,this.toBBox);zc?fc[zc-1].children.push($c):this._splitRoot(vc,$c)},Kc.prototype._splitRoot=function(fc,zc){this.data=Tb([fc,zc]);this.data.height=fc.height+1;this.data.leaf=!1;ka(this.data,this.toBBox)},Kc.prototype._chooseSplitIndex=function(fc,zc,vc){for(var $c,ed,Wd,me,Kf,Oe,nf,mg=1/0,wf=1/0,bg=zc;bg<=vc-zc;bg++){var ke=sa(fc,0,bg,this.toBBox),Pd=sa(fc,bg,vc,this.toBBox),be=(ed=ke,Wd=Pd,me=void 0,Kf=void 0,Oe=void 0,nf=void 0,me=Math.max(ed.minX,Wd.minX),Kf=Math.max(ed.minY,Wd.minY),Oe=Math.min(ed.maxX,
Wd.maxX),nf=Math.min(ed.maxY,Wd.maxY),Math.max(0,Oe-me)*Math.max(0,nf-Kf));ke=lb(ke)+lb(Pd);be<mg?(mg=be,$c=bg,wf=ke<wf?ke:wf):be===mg&&ke<wf&&(wf=ke,$c=bg)}return $c||vc-zc},Kc.prototype._chooseSplitAxis=function(fc,zc,vc){var $c=fc.leaf?this.compareMinX:Ua,ed=fc.leaf?this.compareMinY:eb;this._allDistMargin(fc,zc,vc,$c)<this._allDistMargin(fc,zc,vc,ed)&&fc.children.sort($c)},Kc.prototype._allDistMargin=function(fc,zc,vc,$c){fc.children.sort($c);$c=this.toBBox;for(var ed=sa(fc,0,zc,$c),Wd=sa(fc,vc-
zc,vc,$c),me=rb(ed)+rb(Wd),Kf=zc;Kf<vc-zc;Kf++){var Oe=fc.children[Kf];La(ed,fc.leaf?$c(Oe):Oe);me+=rb(ed)}for(vc=vc-zc-1;vc>=zc;vc--)ed=fc.children[vc],La(Wd,fc.leaf?$c(ed):ed),me+=rb(Wd);return me},Kc.prototype._adjustParentBBoxes=function(fc,zc,vc){for(;0<=vc;vc--)La(zc[vc],fc)},Kc.prototype._condense=function(fc){for(var zc=fc.length-1,vc=void 0;0<=zc;zc--)0===fc[zc].children.length?0<zc?(vc=fc[zc-1].children).splice(vc.indexOf(fc[zc]),1):this.clear():ka(fc[zc],this.toBBox)},Kc})}}),vt=qi({["../../node_modules/fast-deep-equal/index.js"](a,
d){d.exports=function ka(P,ea){if(P===ea)return!0;if(P&&ea&&"object"==typeof P&&"object"==typeof ea){if(P.constructor!==ea.constructor)return!1;var sa;if(Array.isArray(P)){var La=P.length;if(La!=ea.length)return!1;for(sa=La;0!==sa--;)if(!ka(P[sa],ea[sa]))return!1;return!0}if(P.constructor===RegExp)return P.source===ea.source&&P.flags===ea.flags;if(P.valueOf!==Object.prototype.valueOf)return P.valueOf()===ea.valueOf();if(P.toString!==Object.prototype.toString)return P.toString()===ea.toString();var Ua=
Object.keys(P);La=Ua.length;if(La!==Object.keys(ea).length)return!1;for(sa=La;0!==sa--;)if(!Object.prototype.hasOwnProperty.call(ea,Ua[sa]))return!1;for(sa=La;0!==sa--;)if(La=Ua[sa],!ka(P[La],ea[La]))return!1;return!0}return P!==P&&ea!==ea}}}),wr=qi({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function n(rb,Vb){return!1!==Vb.clone&&Vb.isMergeableObject(rb)?Ua(Array.isArray(rb)?[]:{},rb,Vb):rb}function P(rb,Vb,Zb){return rb.concat(Vb).map(function(Tb){return n(Tb,Zb)})}function ea(rb){return Object.getOwnPropertySymbols?
Object.getOwnPropertySymbols(rb).filter(function(Vb){return Object.propertyIsEnumerable.call(rb,Vb)}):[]}function ka(rb){return Object.keys(rb).concat(ea(rb))}function sa(rb,Vb){try{return Vb in rb}catch(Zb){return!1}}function La(rb,Vb,Zb){var Tb={};Zb.isMergeableObject(rb)&&ka(rb).forEach(function(sc){Tb[sc]=n(rb[sc],Zb)});ka(Vb).forEach(function(sc){if(!sa(rb,sc)||Object.hasOwnProperty.call(rb,sc)&&Object.propertyIsEnumerable.call(rb,sc))if(sa(rb,sc)&&Zb.isMergeableObject(Vb[sc])){if(Zb.customMerge){var Kc=
Zb.customMerge(sc);Kc="function"===typeof Kc?Kc:Ua}else Kc=Ua;Tb[sc]=Kc(rb[sc],Vb[sc],Zb)}else Tb[sc]=n(Vb[sc],Zb)});return Tb}function Ua(rb,Vb,Zb){Zb=Zb||{};Zb.arrayMerge=Zb.arrayMerge||P;Zb.isMergeableObject=Zb.isMergeableObject||eb;Zb.cloneUnlessOtherwiseSpecified=n;var Tb=Array.isArray(Vb),sc=Array.isArray(rb);return Tb!==sc?n(Vb,Zb):Tb?Zb.arrayMerge(rb,Vb,Zb):La(rb,Vb,Zb)}var eb=function(rb){var Vb;if(Vb=!!rb&&"object"===typeof rb)Vb=Object.prototype.toString.call(rb),Vb=!("[object RegExp]"===
Vb||"[object Date]"===Vb||rb.$$typeof===lb);return Vb},lb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Ua.all=function(rb,Vb){if(!Array.isArray(rb))throw Error("first argument should be an array");return rb.reduce(function(Zb,Tb){return Ua(Zb,Tb,Vb)},{})};d.exports=Ua}}),ms=qi({["../../node_modules/tslib/tslib.js"](a,d){var n,P,ea,ka,sa,La,Ua,eb,lb,rb,Vb,Zb,Tb,sc,Kc,fc,zc,vc,$c,ed,Wd,me,Kf,Oe,nf;(function(mg){function wf(ke,Pd){ke!==bg&&("function"===typeof Object.create?
Object.defineProperty(ke,"__esModule",{value:!0}):ke.__esModule=!0);return function(be,Jd){return ke[be]=Pd?Pd(be,Jd):Jd}}var bg="object"===typeof xa?xa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(ke){mg(wf(bg,wf(ke)))}):"object"===typeof d&&"object"===typeof d.exports?mg(wf(bg,wf(d.exports))):mg(wf(bg))})(function(mg){var wf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ke,Pd){ke.__proto__=
Pd}||function(ke,Pd){for(var be in Pd)Object.prototype.hasOwnProperty.call(Pd,be)&&(ke[be]=Pd[be])};n=function(ke,Pd){function be(){this.constructor=ke}if("function"!==typeof Pd&&null!==Pd)throw new TypeError("Class extends value "+String(Pd)+" is not a constructor or null");wf(ke,Pd);ke.prototype=null===Pd?Object.create(Pd):(be.prototype=Pd.prototype,new be)};P=Object.assign||function(ke){for(var Pd,be=1,Jd=arguments.length;be<Jd;be++){Pd=arguments[be];for(var ee in Pd)Object.prototype.hasOwnProperty.call(Pd,
ee)&&(ke[ee]=Pd[ee])}return ke};ea=function(ke,Pd){var be={},Jd;for(Jd in ke)Object.prototype.hasOwnProperty.call(ke,Jd)&&0>Pd.indexOf(Jd)&&(be[Jd]=ke[Jd]);if(null!=ke&&"function"===typeof Object.getOwnPropertySymbols){var ee=0;for(Jd=Object.getOwnPropertySymbols(ke);ee<Jd.length;ee++)0>Pd.indexOf(Jd[ee])&&Object.prototype.propertyIsEnumerable.call(ke,Jd[ee])&&(be[Jd[ee]]=ke[Jd[ee]])}return be};ka=function(ke,Pd,be,Jd){var ee=arguments.length,xf=3>ee?Pd:null===Jd?Jd=Object.getOwnPropertyDescriptor(Pd,
be):Jd,Of;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)xf=Reflect.decorate(ke,Pd,be,Jd);else for(var Kg=ke.length-1;0<=Kg;Kg--)if(Of=ke[Kg])xf=(3>ee?Of(xf):3<ee?Of(Pd,be,xf):Of(Pd,be))||xf;return 3<ee&&xf&&Object.defineProperty(Pd,be,xf),xf};sa=function(ke,Pd){return function(be,Jd){Pd(be,Jd,ke)}};La=function(ke,Pd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(ke,Pd)};Ua=function(ke,Pd,be,Jd){function ee(xf){return xf instanceof be?
xf:new be(function(Of){Of(xf)})}return new (be||=Promise)(function(xf,Of){function Kg(Jh){try{Yf(Jd.next(Jh))}catch(yg){Of(yg)}}function xh(Jh){try{Yf(Jd["throw"](Jh))}catch(yg){Of(yg)}}function Yf(Jh){Jh.done?xf(Jh.value):ee(Jh.value).then(Kg,xh)}Yf((Jd=Jd.apply(ke,Pd||[])).next())})};eb=function(ke,Pd){function be(Yf){return function(Jh){return Jd([Yf,Jh])}}function Jd(Yf){if(xf)throw new TypeError("Generator is already executing.");for(;ee;)try{if(xf=1,Of&&(Kg=Yf[0]&2?Of["return"]:Yf[0]?Of["throw"]||
((Kg=Of["return"])&&Kg.call(Of),0):Of.next)&&!(Kg=Kg.call(Of,Yf[1])).done)return Kg;if(Of=0,Kg)Yf=[Yf[0]&2,Kg.value];switch(Yf[0]){case 0:case 1:Kg=Yf;break;case 4:return ee.label++,{value:Yf[1],done:!1};case 5:ee.label++;Of=Yf[1];Yf=[0];continue;case 7:Yf=ee.ops.pop();ee.trys.pop();continue;default:if(!(Kg=ee.trys,Kg=0<Kg.length&&Kg[Kg.length-1])&&(6===Yf[0]||2===Yf[0])){ee=0;continue}if(3===Yf[0]&&(!Kg||Yf[1]>Kg[0]&&Yf[1]<Kg[3]))ee.label=Yf[1];else if(6===Yf[0]&&ee.label<Kg[1])ee.label=Kg[1],Kg=
Yf;else if(Kg&&ee.label<Kg[2])ee.label=Kg[2],ee.ops.push(Yf);else{Kg[2]&&ee.ops.pop();ee.trys.pop();continue}}Yf=Pd.call(ke,ee)}catch(Jh){Yf=[6,Jh],Of=0}finally{xf=Kg=0}if(Yf[0]&5)throw Yf[1];return{value:Yf[0]?Yf[1]:void 0,done:!0}}var ee={label:0,sent:function(){if(Kg[0]&1)throw Kg[1];return Kg[1]},trys:[],ops:[]},xf,Of,Kg,xh;return xh={next:be(0),"throw":be(1),"return":be(2)},"function"===typeof Symbol&&(xh[Symbol.iterator]=function(){return this}),xh};lb=function(ke,Pd){for(var be in ke)"default"===
be||Object.prototype.hasOwnProperty.call(Pd,be)||nf(Pd,ke,be)};nf=Object.create?function(ke,Pd,be,Jd){void 0===Jd&&(Jd=be);var ee=Object.getOwnPropertyDescriptor(Pd,be);if(!ee||("get"in ee?!Pd.__esModule:ee.writable||ee.configurable))ee={enumerable:!0,get:function(){return Pd[be]}};Object.defineProperty(ke,Jd,ee)}:function(ke,Pd,be,Jd){void 0===Jd&&(Jd=be);ke[Jd]=Pd[be]};rb=function(ke){var Pd="function"===typeof Symbol&&Symbol.iterator,be=Pd&&ke[Pd],Jd=0;if(be)return be.call(ke);if(ke&&"number"===
typeof ke.length)return{next:function(){ke&&Jd>=ke.length&&(ke=void 0);return{value:ke&&ke[Jd++],done:!ke}}};throw new TypeError(Pd?"Object is not iterable.":"Symbol.iterator is not defined.");};Vb=function(ke,Pd){var be="function"===typeof Symbol&&ke[Symbol.iterator];if(!be)return ke;ke=be.call(ke);var Jd,ee=[];try{for(;(void 0===Pd||0<Pd--)&&!(Jd=ke.next()).done;)ee.push(Jd.value)}catch(Of){var xf={error:Of}}finally{try{Jd&&!Jd.done&&(be=ke["return"])&&be.call(ke)}finally{if(xf)throw xf.error;}}return ee};
Zb=function(){for(var ke=[],Pd=0;Pd<arguments.length;Pd++)ke=ke.concat(Vb(arguments[Pd]));return ke};Tb=function(){for(var ke=0,Pd=0,be=arguments.length;Pd<be;Pd++)ke+=arguments[Pd].length;ke=Array(ke);var Jd=0;for(Pd=0;Pd<be;Pd++)for(var ee=arguments[Pd],xf=0,Of=ee.length;xf<Of;xf++,Jd++)ke[Jd]=ee[xf];return ke};sc=function(ke,Pd,be){if(be||2===arguments.length)for(var Jd=0,ee=Pd.length,xf;Jd<ee;Jd++)!xf&&Jd in Pd||(xf||=Array.prototype.slice.call(Pd,0,Jd),xf[Jd]=Pd[Jd]);return ke.concat(xf||Array.prototype.slice.call(Pd))};
Kc=function(ke){return this instanceof Kc?(this.v=ke,this):new Kc(ke)};fc=function(ke,Pd,be){function Jd(yg){xh[yg]&&(Yf[yg]=function(Vh){return new Promise(function(li,Hj){1<Jh.push([yg,Vh,li,Hj])||ee(yg,Vh)})})}function ee(yg,Vh){try{var li=xh[yg](Vh);li.value instanceof Kc?Promise.resolve(li.value.v).then(xf,Of):Kg(Jh[0][2],li)}catch(Hj){Kg(Jh[0][3],Hj)}}function xf(yg){ee("next",yg)}function Of(yg){ee("throw",yg)}function Kg(yg,Vh){(yg(Vh),Jh.shift(),Jh.length)&&ee(Jh[0][0],Jh[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var xh=be.apply(ke,Pd||[]),Yf,Jh=[];return Yf={},Jd("next"),Jd("throw"),Jd("return"),Yf[Symbol.asyncIterator]=function(){return this},Yf};zc=function(ke){function Pd(ee,xf){be[ee]=ke[ee]?function(Of){return(Jd=!Jd)?{value:Kc(ke[ee](Of)),done:"return"===ee}:xf?xf(Of):Of}:xf}var be,Jd;return be={},Pd("next"),Pd("throw",function(ee){throw ee;}),Pd("return"),be[Symbol.iterator]=function(){return this},be};vc=function(ke){function Pd(xf){ee[xf]=ke[xf]&&function(Of){return new Promise(function(Kg,xh){Of=
ke[xf](Of);be(Kg,xh,Of.done,Of.value)})}}function be(xf,Of,Kg,xh){Promise.resolve(xh).then(function(Yf){xf({value:Yf,done:Kg})},Of)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Jd=ke[Symbol.asyncIterator],ee;return Jd?Jd.call(ke):(ke="function"===typeof rb?rb(ke):ke[Symbol.iterator](),ee={},Pd("next"),Pd("throw"),Pd("return"),ee[Symbol.asyncIterator]=function(){return this},ee)};$c=function(ke,Pd){Object.defineProperty?Object.defineProperty(ke,"raw",{value:Pd}):
ke.raw=Pd;return ke};var bg=Object.create?function(ke,Pd){Object.defineProperty(ke,"default",{enumerable:!0,value:Pd})}:function(ke,Pd){ke["default"]=Pd};ed=function(ke){if(ke&&ke.__esModule)return ke;var Pd={};if(null!=ke)for(var be in ke)"default"!==be&&Object.prototype.hasOwnProperty.call(ke,be)&&nf(Pd,ke,be);bg(Pd,ke);return Pd};Wd=function(ke){return ke&&ke.__esModule?ke:{"default":ke}};me=function(ke,Pd,be,Jd){if("a"===be&&!Jd)throw new TypeError("Private accessor was defined without a getter");
if("function"===typeof Pd?ke!==Pd||!Jd:!Pd.has(ke))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===be?Jd:"a"===be?Jd.call(ke):Jd?Jd.value:Pd.get(ke)};Kf=function(ke,Pd,be,Jd,ee){if("m"===Jd)throw new TypeError("Private method is not writable");if("a"===Jd&&!ee)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof Pd?ke!==Pd||!ee:!Pd.has(ke))throw new TypeError("Cannot write private member to an object whose class did not declare it");
return"a"===Jd?ee.call(ke,be):ee?ee.value=be:Pd.set(ke,be),be};Oe=function(ke,Pd){if(null===Pd||"object"!==typeof Pd&&"function"!==typeof Pd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof ke?Pd===ke:ke.has(Pd)};mg("__extends",n);mg("__assign",P);mg("__rest",ea);mg("__decorate",ka);mg("__param",sa);mg("__metadata",La);mg("__awaiter",Ua);mg("__generator",eb);mg("__exportStar",lb);mg("__createBinding",nf);mg("__values",rb);mg("__read",Vb);mg("__spread",Zb);mg("__spreadArrays",
Tb);mg("__spreadArray",sc);mg("__await",Kc);mg("__asyncGenerator",fc);mg("__asyncDelegator",zc);mg("__asyncValues",vc);mg("__makeTemplateObject",$c);mg("__importStar",ed);mg("__importDefault",Wd);mg("__classPrivateFieldGet",me);mg("__classPrivateFieldSet",Kf);mg("__classPrivateFieldIn",Oe)})}}),Iq={};((a,d)=>{for(var n in d)Vg(a,n,{get:d[n],enumerable:!0})})(Iq,{App:()=>LD,PreviewManager:()=>es,generateJSXFromModel:()=>go,generateSVGFromModel:()=>Nn});Sa.exports=(a=>Nm(Vg({},"__esModule",{value:!0}),
a))(Iq);var os=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";a.Gray="gray";a.Default="";return a})(os||{}),Xp=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(Xp||{}),vr,Gu=new Uint8Array(16),vh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Al=[];for(let a=0;256>a;++a)Al.push((a+256).toString(16).slice(1));var ut,ho,$o=0,Jq=0,tk=function(a,d,n){n=d&&n||0;const P=
d||Array(16);a=a||{};let ea=a.node||ut;var ka=void 0!==a.clockseq?a.clockseq:ho;if(null==ea||null==ka){var sa=a.random||(a.rng||u)();null==ea&&(ea=ut=[sa[0]|1,sa[1],sa[2],sa[3],sa[4],sa[5]]);null==ka&&(ka=ho=(sa[6]<<8|sa[7])&16383)}sa=void 0!==a.msecs?a.msecs:Date.now();let La=void 0!==a.nsecs?a.nsecs:Jq+1;const Ua=sa-$o+(La-Jq)/1E4;0>Ua&&void 0===a.clockseq&&(ka=ka+1&16383);(0>Ua||sa>$o)&&void 0===a.nsecs&&(La=0);if(1E4<=La)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");$o=sa;Jq=
La;ho=ka;sa+=122192928E5;a=(1E4*(sa&268435455)+La)%4294967296;P[n++]=a>>>24&255;P[n++]=a>>>16&255;P[n++]=a>>>8&255;P[n++]=a&255;a=sa/4294967296*1E4&268435455;P[n++]=a>>>8&255;P[n++]=a&255;P[n++]=a>>>24&15|16;P[n++]=a>>>16&255;P[n++]=ka>>>8|128;P[n++]=ka&255;for(ka=0;6>ka;++ka)P[n+ka]=ea[ka];return d||X(P)},mi=class{static clamp(a,d,n){return Math.max(d,"undefined"!==typeof n?Math.min(a,n):a)}static clampV(a,d,n){return a.map(P=>n?mi.clamp(P,d,n):mi.clamp(P,d))}static cross(a,d,n){return(d[0]-a[0])*
(n[1]-a[1])-(n[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},Yd=mi;Yd.neg=a=>[-a[0],-a[1]];Yd.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];Yd.addScalar=(a,d)=>[a[0]+d,a[1]+d];Yd.sub=(a,d)=>[a[0]-d[0],a[1]-d[1]];Yd.subScalar=(a,d)=>[a[0]-d,a[1]-d];Yd.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];Yd.mul=(a,d)=>[a[0]*d,a[1]*d];Yd.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];Yd.div=(a,d)=>[a[0]/d,a[1]/d];Yd.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];Yd.per=a=>[a[1],-a[0]];Yd.dpr=(a,d)=>a[0]*d[0]+a[1]*
d[1];Yd.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];Yd.len2=a=>a[0]*a[0]+a[1]*a[1];Yd.len=a=>Math.hypot(a[0],a[1]);Yd.pry=(a,d)=>mi.dpr(a,d)/mi.len(d);Yd.uni=a=>mi.div(a,mi.len(a));Yd.normalize=a=>mi.uni(a);Yd.tangent=(a,d)=>mi.uni(mi.sub(a,d));Yd.dist2=(a,d)=>mi.len2(mi.sub(a,d));Yd.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);Yd.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let n=1/Math.max(d[0],d[1]);n*=1.29289-(d[0]+d[1])*n*.29289;return[a[0]*n,a[1]*n]};Yd.ang=(a,d)=>Math.atan2(mi.cpr(a,
d),mi.dpr(a,d));Yd.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);Yd.med=(a,d)=>mi.mul(mi.add(a,d),.5);Yd.rot=(a,d=0)=>[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];Yd.rotWith=(a,d,n=0)=>{if(0===n)return a;const P=Math.sin(n);n=Math.cos(n);const ea=a[0]-d[0];a=a[1]-d[1];return[ea*n-a*P+d[0],ea*P+a*n+d[1]]};Yd.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];Yd.lrp=(a,d,n)=>mi.add(a,mi.mul(mi.sub(d,a),n));Yd.int=(a,d,n,P,ea=1)=>{n=(mi.clamp(n,P)-n)/(P-n);return mi.add(mi.mul(a,1-n),mi.mul(d,
ea))};Yd.ang3=(a,d,n)=>{a=mi.vec(d,a);d=mi.vec(d,n);return mi.ang(a,d)};Yd.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];Yd.rescale=(a,d)=>{const n=mi.len(a);return[d*a[0]/n,d*a[1]/n]};Yd.isLeft=(a,d,n)=>(d[0]-a[0])*(n[1]-a[1])-(n[0]-a[0])*(d[1]-a[1]);Yd.clockwise=(a,d,n)=>0<mi.isLeft(a,d,n);Yd.toFixed=a=>a.map(d=>Math.round(100*d)/100);Yd.nearestPointOnLineThroughPoint=(a,d,n)=>mi.add(a,mi.mul(d,mi.pry(mi.sub(n,a),d)));Yd.distanceToLineThroughPoint=(a,d,n)=>mi.dist(n,mi.nearestPointOnLineThroughPoint(a,
d,n));Yd.nearestPointOnLineSegment=(a,d,n,P=!0)=>{const ea=mi.uni(mi.sub(d,a));n=mi.add(a,mi.mul(ea,mi.pry(mi.sub(n,a),ea)));if(P){if(n[0]<Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(n[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(n[1]<Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(n[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return n};Yd.distanceToLineSegment=(a,d,n,P=!0)=>mi.dist(n,mi.nearestPointOnLineSegment(a,d,n,P));Yd.nudge=(a,d,n)=>mi.isEqual(a,d)?a:mi.add(a,mi.mul(mi.uni(mi.sub(d,a)),n));
Yd.nudgeAtAngle=(a,d,n)=>[Math.cos(d)*n+a[0],Math.sin(d)*n+a[1]];Yd.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];Yd.pointsBetween=(a,d,n=6)=>Array.from(Array(n)).map((P,ea)=>{P=ea/(n-1);ea=Math.min(1,.5+Math.abs(.5-P));return[...mi.lrp(a,d,P),ea]});Yd.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);Yd.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};Yd.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];Yd.min=(...a)=>[Math.min(...a.map(d=>d[0])),
Math.min(...a.map(d=>d[1]))];var De=Yd,ig=class{static getRectangleSides(a,d,n=0){const P=[a[0]+d[0]/2,a[1]+d[1]/2],ea=Yd.rotWith(a,P,n),ka=Yd.rotWith(Yd.add(a,[d[0],0]),P,n),sa=Yd.rotWith(Yd.add(a,d),P,n);a=Yd.rotWith(Yd.add(a,[0,d[1]]),P,n);return[["top",[ea,ka]],["right",[ka,sa]],["bottom",[sa,a]],["left",[a,ea]]]}static getBoundsSides(a){return ig.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+
2*d,height:a.height+2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return ig.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let n=Infinity,P=Infinity,ea=
-Infinity,ka=-Infinity;if(2>a.length)P=n=0,ka=ea=1;else for(const sa of a)n=Math.min(sa[0],n),P=Math.min(sa[1],P),ea=Math.max(sa[0],ea),ka=Math.max(sa[1],ka);return 0!==d?ig.getBoundsFromPoints(a.map(sa=>Yd.rotWith(sa,[(n+ea)/2,(P+ka)/2],d))):{minX:n,minY:P,maxX:ea,maxY:ka,width:Math.max(1,ea-n),height:Math.max(1,ka-P)}}static centerBounds(a,d){const n=ig.getBoundsCenter(a);return ig.translateBounds(a,[d[0]-n[0],d[1]-n[1]])}static snapBoundsToGrid(a,d){const n=Math.round(a.minX/d)*d,P=Math.round(a.minY/
d)*d,ea=Math.round(a.maxX/d)*d;a=Math.round(a.maxY/d)*d;return{minX:n,minY:P,maxX:ea,maxY:a,width:Math.max(1,ea-n),height:Math.max(1,a-P)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+d[1],maxX:a.maxX+d[0],maxY:a.maxY+d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const n=ig.getBoundsCenter(a);return ig.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[n[0]*d,n[1]*d])}static divideBounds(a,d){const n=ig.getBoundsCenter(a);
return ig.centerBounds({minX:a.minX/d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[n[0]/d,n[1]/d])}static getRotatedBounds(a,d=0){a=ig.getRotatedCorners(a,d);let n=d=Infinity,P=-Infinity,ea=-Infinity;for(const ka of a)d=Math.min(ka[0],d),n=Math.min(ka[1],n),P=Math.max(ka[0],P),ea=Math.max(ka[1],ea);return{minX:d,minY:n,maxX:P,maxY:ea,width:Math.max(1,P-d),height:Math.max(1,ea-n),rotation:0}}static getRotatedEllipseBounds(a,d,n,P,ea=0){var ka=Math.cos(ea);const sa=
Math.sin(ea);ea=Math.hypot(n*ka,P*sa);ka=Math.hypot(n*sa,P*ka);return{minX:a+n-ea,minY:d+P-ka,maxX:a+n+ea,maxY:d+P+ka,width:2*ea,height:2*ka}}static getExpandedBounds(a,d){const n=Math.min(a.minX,d.minX),P=Math.min(a.minY,d.minY),ea=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:n,minY:P,maxX:ea,maxY:a,width:Math.abs(ea-n),height:Math.abs(a-P)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let n=1;n<a.length;n++)d=ig.getExpandedBounds(d,a[n]);return d}static getRotatedCorners(a,
d=0){const n=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(P=>Yd.rotWith(P,n,d)):a}static getTransformedBoundingBox(a,d,n,P=0,ea=!1){const [ka,sa]=[a.minX,a.minY],[La,Ua]=[a.maxX,a.maxY];let [eb,lb]=[a.minX,a.minY],[rb,Vb]=[a.maxX,a.maxY];if("center"===d)return{minX:eb+n[0],minY:lb+n[1],maxX:rb+n[0],maxY:Vb+n[1],width:rb-eb,height:Vb-lb,scaleX:1,scaleY:1};const [Zb,Tb]=Yd.rot(n,-P);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":lb+=
Tb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Vb+=Tb}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":eb+=Zb;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":rb+=Zb}var sc=La-ka;const Kc=Ua-sa;var fc=(rb-eb)/sc,zc=(Vb-lb)/Kc;a=0>fc;n=0>zc;var vc=Math.abs(rb-eb),$c=Math.abs(Vb-lb);if(ea)switch(ea=sc/Kc,sc=ea<vc/$c,zc=1/ea*(0>zc?1:-1)*vc,fc=$c*(0>fc?1:-1)*ea,d){case "top_left_corner":sc?lb=Vb+zc:eb=rb+fc;break;case "top_right_corner":sc?
lb=Vb+zc:rb=eb-fc;break;case "bottom_right_corner":sc?Vb=lb-zc:rb=eb-fc;break;case "bottom_left_corner":sc?Vb=lb-zc:eb=rb+fc;break;case "bottom_edge":case "top_edge":vc=(eb+rb)/2;$c*=ea;eb=vc-$c/2;rb=vc+$c/2;break;case "left_edge":case "right_edge":$c=(lb+Vb)/2,vc/=ea,lb=$c-vc/2,Vb=$c+vc/2}if(0!==P%(2*Math.PI)){vc=[0,0];$c=Yd.med([ka,sa],[La,Ua]);fc=Yd.med([eb,lb],[rb,Vb]);switch(d){case "top_left_corner":vc=Yd.sub(Yd.rotWith([rb,Vb],fc,P),Yd.rotWith([La,Ua],$c,P));break;case "top_right_corner":vc=
Yd.sub(Yd.rotWith([eb,Vb],fc,P),Yd.rotWith([ka,Ua],$c,P));break;case "bottom_right_corner":vc=Yd.sub(Yd.rotWith([eb,lb],fc,P),Yd.rotWith([ka,sa],$c,P));break;case "bottom_left_corner":vc=Yd.sub(Yd.rotWith([rb,lb],fc,P),Yd.rotWith([La,sa],$c,P));break;case "top_edge":vc=Yd.sub(Yd.rotWith(Yd.med([eb,Vb],[rb,Vb]),fc,P),Yd.rotWith(Yd.med([ka,Ua],[La,Ua]),$c,P));break;case "left_edge":vc=Yd.sub(Yd.rotWith(Yd.med([rb,lb],[rb,Vb]),fc,P),Yd.rotWith(Yd.med([La,sa],[La,Ua]),$c,P));break;case "bottom_edge":vc=
Yd.sub(Yd.rotWith(Yd.med([eb,lb],[rb,lb]),fc,P),Yd.rotWith(Yd.med([ka,sa],[La,sa]),$c,P));break;case "right_edge":vc=Yd.sub(Yd.rotWith(Yd.med([eb,lb],[eb,Vb]),fc,P),Yd.rotWith(Yd.med([ka,sa],[ka,Ua]),$c,P))}[eb,lb]=Yd.sub([eb,lb],vc);[rb,Vb]=Yd.sub([rb,Vb],vc)}rb<eb&&([rb,eb]=[eb,rb]);Vb<lb&&([Vb,lb]=[lb,Vb]);return{minX:eb,minY:lb,maxX:rb,maxY:Vb,width:rb-eb,height:Vb-lb,scaleX:(rb-eb)/(La-ka||1)*(a?-1:1),scaleY:(Vb-lb)/(Ua-sa||1)*(n?-1:1)}}static getTransformAnchor(a,d,n){let P=a;switch(a){case "top_left_corner":P=
d&&n?"bottom_right_corner":d?"top_right_corner":n?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":P=d&&n?"bottom_left_corner":d?"top_left_corner":n?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":P=d&&n?"top_left_corner":d?"bottom_left_corner":n?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":P=d&&n?"top_right_corner":d?"bottom_right_corner":n?"top_left_corner":"top_right_corner"}return P}static getRelativeTransformedBoundingBox(a,
d,n,P,ea){P=a.minX+(P?d.maxX-n.maxX:n.minX-d.minX)/d.width*a.width;ea=a.minY+(ea?d.maxY-n.maxY:n.minY-d.minY)/d.height*a.height;const ka=n.width/d.width*a.width;a=n.height/d.height*a.height;return{minX:P,minY:ea,maxX:P+ka,maxY:ea+a,width:ka,height:a}}static getRotatedSize(a,d){const n=Yd.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(P=>Yd.rotWith(P,n,d));a=ig.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=
ig.getBoundsCenter(a);return $f(Ie({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=[Infinity,Infinity];a.forEach(n=>{d[0]=Math.min(d[0],n[0]);d[1]=Math.min(d[1],n[1])});return d}static getTLSnapPoints(a,d,n){const P=Ie({},a);a=[0,0];const ea=[],ka={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},sa=["midX","minX","maxX"],La=["midY","minY","maxY"];d=d.map(Vb=>
{const Zb=sa.flatMap((sc,Kc)=>sa.map((fc,zc)=>{const vc=P[sc]-Vb[fc];return{f:sc,t:fc,gap:vc,distance:Math.abs(vc),isCareful:0===Kc||3===Kc+zc}})),Tb=La.flatMap((sc,Kc)=>La.map((fc,zc)=>{const vc=P[sc]-Vb[fc];return{f:sc,t:fc,gap:vc,distance:Math.abs(vc),isCareful:0===Kc||3===Kc+zc}}));return[Vb,Zb,Tb]});let Ua=Infinity,eb=Infinity,lb=Infinity,rb=Infinity;d.forEach(([,Vb,Zb])=>{Vb.forEach(Tb=>{Tb.distance<n&&Tb.distance<lb&&(lb=Tb.distance,Ua=Tb.gap)});Zb.forEach(Tb=>{Tb.distance<n&&Tb.distance<rb&&
(rb=Tb.distance,eb=Tb.gap)})});d.forEach(([Vb,Zb,Tb])=>{Infinity!==Ua&&Zb.forEach(sc=>{2>Math.abs(sc.gap-Ua)&&(ka[sc.f]=$f(Ie({},ka[sc.f]),{isSnapped:!0,to:Vb[sc.t],B:Vb,distance:sc.distance}))});Infinity!==eb&&Tb.forEach(sc=>{2>Math.abs(sc.gap-eb)&&(ka[sc.f]=$f(Ie({},ka[sc.f]),{isSnapped:!0,to:Vb[sc.t],B:Vb,distance:sc.distance}))})});a[0]=Infinity===Ua?0:Ua;a[1]=Infinity===eb?0:eb;P.minX-=a[0];P.midX-=a[0];P.maxX-=a[0];P.minY-=a[1];P.midY-=a[1];P.maxY-=a[1];sa.forEach(Vb=>{Vb=ka[Vb];if(Vb.isSnapped){var {id:Zb,
B:Tb}=Vb;Vb=P[Zb];ea.push("minX"===Zb?[[Vb,P.midY],[Vb,Tb.minY],[Vb,Tb.maxY]]:[[Vb,P.minY],[Vb,P.maxY],[Vb,Tb.minY],[Vb,Tb.maxY]])}});La.forEach(Vb=>{Vb=ka[Vb];if(Vb.isSnapped){var {id:Zb,B:Tb}=Vb;Vb=P[Zb];ea.push("midY"===Zb?[[P.midX,Vb],[Tb.minX,Vb],[Tb.maxX,Vb]]:[[P.minX,Vb],[P.maxX,Vb],[Tb.minX,Vb],[Tb.maxX,Vb]])}});return{offset:a,snapLines:ea}}static ensureRatio(a,d){const {width:n,height:P}=a,ea=Ie({},a);n/P<d?(ea.width=P*d,ea.maxX+=n-a.width):(ea.height=n/d,ea.maxY+=P-a.height);return ea}static getDistributions(a,
d){var n=a.map(ka=>{const sa=ka.getBounds();return{id:ka.id,point:[sa.minX,sa.minY],bounds:sa,center:ka.getCenter()}});a=n.length;var P=ig.getCommonBounds(n.map(({bounds:ka})=>ka));const ea=[];switch(d){case "horizontal":d=n.reduce((ka,sa)=>ka+sa.bounds.width,0);if(d>P.width){const ka=n.sort((eb,lb)=>eb.bounds.minX-lb.bounds.minX)[0],sa=n.sort((eb,lb)=>lb.bounds.maxX-eb.bounds.maxX)[0];P=n.filter(eb=>eb!==ka&&eb!==sa).sort((eb,lb)=>eb.center[0]-lb.center[0]);const La=(sa.center[0]-ka.center[0])/(a-
1),Ua=ka.center[0]+La;P.forEach(({id:eb,point:lb,bounds:rb},Vb)=>{ea.push({id:eb,prev:lb,next:[Ua+La*Vb-rb.width/2,rb.minY]})})}else{n=n.sort((La,Ua)=>La.center[0]-Ua.center[0]);let ka=P.minX;const sa=(P.width-d)/(a-1);n.forEach(({id:La,point:Ua,bounds:eb})=>{ea.push({id:La,prev:Ua,next:[ka,eb.minY]});ka+=eb.width+sa})}break;case "vertical":if(d=n.reduce((ka,sa)=>ka+sa.bounds.height,0),d>P.height){const ka=n.sort((eb,lb)=>eb.bounds.minY-lb.bounds.minY)[0],sa=n.sort((eb,lb)=>lb.bounds.maxY-eb.bounds.maxY)[0];
P=n.filter(eb=>eb!==ka&&eb!==sa).sort((eb,lb)=>eb.center[1]-lb.center[1]);const La=(sa.center[1]-ka.center[1])/(a-1),Ua=ka.center[1]+La;P.forEach(({id:eb,point:lb,bounds:rb},Vb)=>{ea.push({id:eb,prev:lb,next:[rb.minX,Ua+La*Vb-rb.height/2]})})}else{n=n.sort((La,Ua)=>La.center[1]-Ua.center[1]);let ka=P.minY;const sa=(P.height-d)/(a-1);n.forEach(({id:La,point:Ua,bounds:eb})=>{ea.push({id:La,prev:Ua,next:[eb.minX,ka]});ka+=eb.height+sa})}}return ea}static getPackedDistributions(a){const d=ig.getCommonBounds(a.map(({bounds:ea})=>
ea)),n=[d.minX,d.minY],P=Object.fromEntries(a.map(ea=>[ea.id,[ea.bounds.minX,ea.bounds.minY]]));a=a.filter(ea=>{var ka,sa,La,Ua;return!((null==(sa=null==(ka=ea.props.handles)?void 0:ka.start)?0:sa.bindingId)||(null==(Ua=null==(La=ea.props.handles)?void 0:La.end)?0:Ua.bindingId))}).map(ea=>{const ka=ea.getBounds();return{id:ea.id,w:ka.width+16,h:ka.height+16,x:ka.minX,y:ka.minY}});z(a);return a.map(({id:ea,x:ka,y:sa})=>({id:ea,prev:P[ea],next:[ka+n[0],sa+n[1]]}))}},up=class{static pointInCircle(a,
d,n){return Yd.dist(a,d)<=n}static pointInEllipse(a,d,n,P,ea=0){ea=ea||0;var ka=Math.cos(ea);ea=Math.sin(ea);d=Yd.sub(a,d);a=ka*d[0]+ea*d[1];ka=ea*d[0]-ka*d[1];return 1>=a*a/(n*n)+ka*ka/(P*P)}static pointInRect(a,d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let n=0;d.forEach((P,ea)=>{ea=d[(ea+1)%d.length];P[1]<=a[1]?ea[1]>a[1]&&0<Yd.cross(P,ea,a)&&(n+=1):ea[1]<=a[1]&&0>Yd.cross(P,ea,a)&&--n});return 0!==n}static pointInBounds(a,d){return!(a[0]<d.minX||
a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,n=3){for(let P=1;P<d.length;P++)if(Yd.distanceToLineSegment(d[P-1],d[P],a)<n)return!0;return!1}static _getSqSegDist(a,d,n){let P=d[0];d=d[1];let ea=n[0]-P,ka=n[1]-d;if(0!==ea||0!==ka){const sa=((a[0]-P)*ea+(a[1]-d)*ka)/(ea*ea+ka*ka);1<sa?(P=n[0],d=n[1]):0<sa&&(P+=ea*sa,d+=ka*sa)}ea=a[0]-P;ka=a[1]-d;return ea*ea+ka*ka}static _simplifyStep(a,d,n,P,ea){let ka=P,sa=-1;for(let La=d+1;La<n;La++){const Ua=up._getSqSegDist(a[La],a[d],a[n]);
Ua>ka&&(sa=La,ka=Ua)}-1<sa&&ka>P&&(1<sa-d&&up._simplifyStep(a,d,sa,P,ea),ea.push(a[sa]),1<n-sa&&up._simplifyStep(a,sa,n,P,ea))}static simplify2(a,d=1){if(2>=a.length)return a;d*=d;var n=a[0],P=a[1];const ea=[n];for(let ka=1,sa=a.length;ka<sa;ka++)P=a[ka],(P[0]-n[0])*(P[0]-n[0])+(P[1]-n[1])*(P[1]-n[1])>d&&(ea.push(P),n=P);n!==P&&ea.push(P);n=ea.length-1;P=[ea[0]];up._simplifyStep(ea,0,n,d,P);P.push(ea[n],a[a.length-1]);return P}static pointNearToPolyline(a,d,n=8){const P=d.length;for(let ea=1;ea<P;ea++)if(Yd.distanceToLineSegment(d[ea-
1],d[ea],a)<n)return!0;return!1}},Jk=up;pb(Jk,"simplify",(a,d=1)=>{var n=a.length;const P=a[0],ea=a[n-1],[ka,sa]=P,[La,Ua]=ea;if(2<n){let eb=0,lb=0;const rb=Yd.len2([Ua-sa,La-ka]);for(let Vb=1;Vb<n-1;Vb++){const [Zb,Tb]=a[Vb],sc=Math.pow(Zb*(Ua-sa)+ka*(Tb-Ua)+La*(sa-Tb),2)/rb;eb>sc||(eb=sc,lb=Vb)}if(eb>d)return n=up.simplify(a.slice(0,lb+1),d),a=up.simplify(a.slice(lb+1),d),n.concat(a.slice(1))}return[P,ea]});var Bl=Math.PI,Pn=Bl/2,Xk=2*Bl,Kq={},wt={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",
right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},xm=class{static circleFromThreePoints(a,d,n){const [P,ea]=a,[ka,sa]=d,[La,Ua]=n;d=P*(sa-Ua)-ea*(ka-La)+ka*Ua-La*sa;a=-((P*P+ea*ea)*(Ua-sa)+(ka*ka+
sa*sa)*(ea-Ua)+(La*La+Ua*Ua)*(sa-ea))/(2*d);d=-((P*P+ea*ea)*(ka-La)+(ka*ka+sa*sa)*(La-P)+(La*La+Ua*Ua)*(P-ka))/(2*d);return[a,d,Math.hypot(a-P,d-ea)]}static perimeterOfEllipse(a,d){const n=Math.pow(a-d,2)/Math.pow(a+d,2);return Bl*(a+d)*(1+3*n/(10+Math.sqrt(4-3*n)))}static shortAngleDist(a,d){a=(d-a)%Xk;return 2*a%Xk-a}static longAngleDist(a,d){return Xk-xm.shortAngleDist(a,d)}static lerpAngles(a,d,n){return a+xm.shortAngleDist(a,d)*n}static angleDelta(a,d){return xm.shortAngleDist(a,d)}static getSweep(a,
d,n){return xm.angleDelta(De.angle(a,d),De.angle(a,n))}static clampRadians(a){return(Xk+a)%Xk}static snapAngleToSegments(a,d){d=Xk/d;a=Math.floor((xm.clampRadians(a)+d/2)/d)*d%Xk;a<Bl&&(a+=Xk);a>Bl&&(a-=Xk);return a}static isAngleBetween(a,d,n){if(n===a||n===d)return!0;d=(d-a+Pn)%Pn;return d<=Bl!==(n-a+Pn)%Pn>d}static degreesToRadians(a){return a*Bl/180}static radiansToDegrees(a){return 180*a/Bl}static getArcLength(a,d,n,P){a=xm.getSweep(a,n,P);return a/Xk*Xk*d}static getSweepFlag(a,d,n){n=De.angle(a,
n);return 0<(De.angle(a,d)-n+3*Bl)%Xk-Bl?0:1}static getLargeArcFlag(a,d,n){a=De.angle(n,a);d=(De.angle(n,d)-a+3*Bl)%Xk-Bl;return Math.abs(d)>Pn?0:1}static getArcDashOffset(a,d,n,P,ea){const ka=xm.getSweepFlag(a,n,P);d=xm.getArcLength(a,d,n,P);return-(0>ka?d:Xk*a[2]-d)/2+ea}static getEllipseDashOffset(a,d){return-(Xk*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},ll=class{static getPolygonCentroid(a){var d=
a.map(n=>n[0]);a=a.map(n=>n[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+Math.max(...a);return[d?d/2:0,a?a/2:0]}};pb(ll,"getEdges",a=>{const d=a.length;return a.map((n,P)=>[n,a[(P+1)%d]])});pb(ll,"getEdgeOutwardNormal",(a,d)=>De.per(De.uni(De.sub(d,a))));pb(ll,"getEdgeInwardNormal",(a,d)=>De.neg(ll.getEdgeOutwardNormal(a,d)));pb(ll,"getOffsetEdge",(a,d,n)=>{n=De.mul(De.per(De.uni(De.sub(d,a))),n);return[De.add(a,n),De.add(d,n)]});pb(ll,"getOffsetEdges",(a,d)=>a.map(([n,P])=>ll.getOffsetEdge(n,
P,d)));pb(ll,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[De.add(a,[-d,-d]),De.add(a,[d,-d]),De.add(a,[d,d]),De.add(a,[-d,d])];if(2===a.length){const [n,P]=a;return[...ll.getOffsetEdge(n,P,d),...ll.getOffsetEdge(P,n,d)]}return ll.getOffsetEdges(ll.getEdges(a),d).flatMap((n,P,ea)=>{{P=ea[(P+1)%ea.length];const ka=Yd.slope(n[0],n[1]);ea=Yd.slope(P[0],P[1]);ka!==ea?Number.isNaN(ka)&&!Number.isNaN(ea)?n=[n[0][0],(n[0][0]-P[0][0])*
ea+P[0][1]]:Number.isNaN(ea)&&!Number.isNaN(ka)?n=[P[0][0],(P[0][0]-n[0][0])*ka+n[0][1]]:(n=(ka*n[0][0]-ea*P[0][0]+P[0][1]-n[0][1])/(ka-ea),n=[n,ea*(n-P[0][0])+P[0][1]]):n=void 0}if(void 0===n)throw Error("Expected an intersection");return n})});pb(ll,"getPolygonVertices",(a,d,n=0,P=1)=>{a=De.div(a,2);const [ea,ka]=[Math.max(1,a[0]-n),Math.max(1,a[1]-n)];n=[];for(let eb=0,lb=Xk/d;eb<d;eb++){var sa=(-Pn+eb*lb)%Xk,La=(-Pn+(eb+1)*lb)%Xk;sa=De.add(a,[ea*Math.cos(sa),ka*Math.sin(sa)]);La=De.add(a,[ea*
Math.cos(La),ka*Math.sin(La)]);var Ua=De.med(sa,La);Ua=De.nudge(Ua,a,De.dist(a,Ua)*(1-P));n.push(sa,Ua,La)}return n});pb(ll,"getTriangleVertices",(a,d=0,n=1)=>{const [P,ea]=a;var ka=1-n;a=[P/2,d/2];n=[P-d,ea-d];d=[d/2,ea-d];const sa=ll.getPolygonCentroid([a,n,d]),La=De.med(a,n),Ua=De.med(n,d),eb=De.med(d,a),lb=De.dist(La,sa)*ka,rb=De.dist(Ua,sa)*ka;ka*=De.dist(eb,sa);return[a,lb?De.nudge(La,sa,lb):La,n,rb?De.nudge(Ua,sa,rb):Ua,d,ka?De.nudge(eb,sa,ka):eb]});pb(ll,"getStarVertices",(a,d,n,P=1)=>{const ea=
De.div(d,2),ka=De.mul(ea,P/2),sa=Xk/n/2;return Array.from(Array(2*n)).map((La,Ua)=>{La=-Pn+Ua*sa;const [eb,lb]=Ua%2?ka:ea;return De.add(a,[eb*Math.cos(La),lb*Math.sin(La)])})});var Eu=class{static getCurvedPathForPolygon(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],n=a.length;for(let P=1;P<n;P++){const [ea,ka]=a[P],[sa,La]=a[(P+1)%n];d.push(ea,ka,(ea+sa)/2,(ka+La)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>
a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],n=a.length;for(let P=1;P<n-1;P++){const [ea,ka]=a[P],[sa,La]=a[P+1];d.push(ea,ka,(ea+sa)/2,(ka+La)/2)}return d.join(" ")}static getSvgPathFromStroke(a,d=!0){const n=a.length;if(4>n)return"";let P=a[0],ea=a[1];var ka=a[2];ka=`M${P[0].toFixed(2)},${P[1].toFixed(2)} Q${ea[0].toFixed(2)},${ea[1].toFixed(2)} ${((ea[0]+ka[0])/2).toFixed(2)},${((ea[1]+ka[1])/2).toFixed(2)} T`;for(let sa=2,La=n-1;sa<
La;sa++)P=a[sa],ea=a[sa+1],ka+=`${((P[0]+ea[0])/2).toFixed(2)},${((P[1]+ea[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}static getSvgPathFromStrokePoints(a,d=!1){const n=a.length;if(4>n)return"";let P=a[0].point,ea=a[1].point;var ka=a[2].point;ka=`M${P[0].toFixed(2)},${P[1].toFixed(2)} Q${ea[0].toFixed(2)},${ea[1].toFixed(2)} ${((ea[0]+ka[0])/2).toFixed(2)},${((ea[1]+ka[1])/2).toFixed(2)} T`;for(let sa=2,La=n-1;sa<La;sa++)P=a[sa].point,ea=a[sa+1].point,ka+=`${((P[0]+ea[0])/2).toFixed(2)},${((P[1]+
ea[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}};pb(Eu,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var jx={},kx=Object.assign,aq=Object.getOwnPropertyDescriptor,xp=Object.defineProperty,bq=Object.prototype,da=[];Object.freeze(da);var na={};Object.freeze(na);var Ia="undefined"!==typeof Proxy,ob=Object.toString(),Qb=function(){},yc="undefined"!==typeof Object.getOwnPropertySymbols,Zc="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:yc?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:
Object.getOwnPropertyNames,vd=Object.getOwnPropertyDescriptors||function(a){var d={};Zc(a).forEach(function(n){d[n]=aq(a,n)});return d},ce=Symbol("mobx-stored-annotations"),ze=Symbol("mobx administration"),hh=function(){function a(n){void 0===n&&(n="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=ck.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=n}var d=a.prototype;d.onBO=
function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};d.reportObserved=function(){return tb(this)};d.reportChanged=function(){jd();Jb(this);Rb()};d.toString=function(){return this.name_};return a}(),wi=F("Atom",hh),cg={identity:function(a,d){return a===d},structural:function(a,d){return ta(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,
d){return ta(a,d,1)}},Lh="override",Ai=db(),ai={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(ai);var Pe=kb("observable"),te=kb("observable.ref",{enhancer:Na}),Me=kb("observable.shallow",{enhancer:function(a,d,n){if(void 0===a||null===a||ue(a)||od(a)||Hr(a)||Ps(a))return a;if(Array.isArray(a))return Ef.array(a,{name:n,deep:!1});if(N(a))return Ef.object(a,void 0,{name:n,deep:!1});if(L(a))return Ef.map(a,{name:n,deep:!1});if(M(a))return Ef.set(a,{name:n,deep:!1})}}),Wf=kb("observable.struct",
{enhancer:function(a,d){return ta(a,d)?d:a}}),eg=za(Pe);Object.assign(gb,eg);var Pi={box:function(a,d){d=d||ai;return new Ns(a,Wa(d),d.name,!0,d.equals)},array:function(a,d){d=d||ai;return(!1===Bg.useProxies||!1===d.proxy?Db:cb)(a,Wa(d),d.name)},map:function(a,d){d=d||ai;return new Nz(a,Wa(d),d.name)},set:function(a,d){d=d||ai;return new Oz(a,Wa(d),d.name)},object:function(a,d,n){if(!1===Bg.useProxies||!1===(null==n?void 0:n.proxy))n=Kd({},n);else{var P={},ea,ka;x();P=Kd(P,n);n=null!=(ka=(ea=P[ze]).proxy_)?
ka:ea.proxy_=new Proxy(P,sE)}return wc(n,a,d)},ref:za(te),shallow:za(Me),deep:eg,struct:za(Wf)},Ef=kx(gb,Pi),Ei=Xa("computed"),lj=Xa("computed.struct",{equals:cg.structural}),pg=function(a,d){if(H(d))return Ja(a,d,Ei);if(N(a))return za(Xa("computed",a));d=N(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new Nu(d)};Object.assign(pg,Ei);pg.struct=za(lj);var tp,Ov,Qv=0,fE=1,gE=null!=(tp=null==(Ov=aq(function(){},"name"))?void 0:Ov.configurable)?tp:!1,Hz={value:"action",configurable:!0,writable:!1,
enumerable:!1};var hE=Symbol.toPrimitive;var Ns=function(a){function d(P,ea,ka,sa,La){void 0===ka&&(ka="ObservableValue");void 0===La&&(La=cg["default"]);sa=a.call(this,ka)||this;sa.enhancer=void 0;sa.hasUnreportedChange_=!1;sa.interceptors_=void 0;sa.changeListeners_=void 0;sa.value_=void 0;sa.dehancer=void 0;sa.enhancer=ea;sa.name_=ka;sa.equals=La;sa.value_=ea(P,void 0,ka);return sa}ha(d,a);var n=d.prototype;n.dehanceValue=function(P){return void 0!==this.dehancer?this.dehancer(P):P};n.set=function(P){P=
this.prepareNewValue_(P);P!==Bg.UNCHANGED&&this.setNewValue_(P)};n.prepareNewValue_=function(P){if(zb(this)){P=Pa(this,{object:this,type:jq,newValue:P});if(!P)return Bg.UNCHANGED;P=P.newValue}P=this.enhancer(P,this.value_,this.name_);return this.equals(this.value_,P)?Bg.UNCHANGED:P};n.setNewValue_=function(P){var ea=this.value_;this.value_=P;this.reportChanged();Ib(this)&&Ic(this,{type:jq,object:this,newValue:P,oldValue:ea})};n.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};
n.intercept_=function(P){return Eb(this,P)};n.observe_=function(P,ea){ea&&P({observableKind:"value",debugObjectName:this.name_,object:this,type:jq,newValue:this.value_,oldValue:void 0});return xc(this,P)};n.raw=function(){return this.value_};n.toJSON=function(){return this.get()};n.toString=function(){return this.name_+"["+this.value_+"]"};n.valueOf=function(){return ia(this.get())};n[hE]=function(){return this.valueOf()};return d}(hh),iE=F("ObservableValue",Ns);var jE=Symbol.toPrimitive;var Nu=function(){function a(n){this.dependenciesState_=
ck.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=ck.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Os(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=Jt.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=
void 0;n.get||f(31);this.derivation=n.get;this.name_=n.name||"ComputedValue";n.set&&(this.setter_=Ta("ComputedValue-setter",n.set));this.equals_=n.equals||(n.compareStructural||n.struct?cg.structural:cg["default"]);this.scope_=n.context;this.requiresReaction_=n.requiresReaction;this.keepAlive_=!!n.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){ib(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};
d.get=function(){this.isComputing_&&f(32,this.name_,this.derivation);if(0!==Bg.inBatch||0!==this.observers_.size||this.keepAlive_){if(tb(this),Dc(this)){var n=Bg.trackingContext;this.keepAlive_&&!n&&(Bg.trackingContext=this);this.trackAndCompute()&&Lb(this);Bg.trackingContext=n}}else Dc(this)&&(this.warnAboutUntrackedRead_(),jd(),this.value_=this.computeValue_(!1),Rb());n=this.value_;if(n instanceof Os)throw n.cause;return n};d.set=function(n){if(this.setter_){this.isRunningSetter_&&f(33,this.name_);
this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else f(34,this.name_)};d.trackAndCompute=function(){var n=this.value_,P=this.dependenciesState_===ck.NOT_TRACKING_,ea=this.computeValue_(!0);if(n=P||n instanceof Os||ea instanceof Os||!this.equals_(n,ea))this.value_=ea;return n};d.computeValue_=function(n){this.isComputing_=!0;var P=Lc(!1);if(n)var ea=uc(this,this.derivation,this.scope_);else if(!0===Bg.disableErrorBoundaries)ea=this.derivation.call(this.scope_);
else try{ea=this.derivation.call(this.scope_)}catch(ka){ea=new Os(ka)}Bg.allowStateChanges=P;this.isComputing_=!1;return ea};d.suspend_=function(){this.keepAlive_||(Rc(this),this.value_=void 0)};d.observe_=function(n,P){var ea=this,ka=!0,sa=void 0;return tc(function(){var La=ea.get();if(!ka||P){var Ua=nc();n({observableKind:"computed",debugObjectName:ea.name_,type:jq,object:ea,newValue:La,oldValue:sa});Bg.trackingDerivation=Ua}ka=!1;sa=La})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+
"["+this.derivation.toString()+"]"};d.valueOf=function(){return ia(this.get())};d[jE]=function(){return this.valueOf()};return a}(),Ou=F("ComputedValue",Nu),ck;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(ck||={});var Jt;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(Jt||={});var Os=function(a){this.cause=void 0;this.cause=a},Rv=function(){this.version=6;this.UNCHANGED=
{};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=
!0},Sv=!0,Iz=!1,Bg=function(){var a=G();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&(Sv=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new Rv).version&&(Sv=!1);if(Sv){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED={}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new Rv}setTimeout(function(){Iz||f(35)},1);return new Rv}(),Kt=function(){function a(n,P,ea,ka){void 0===n&&(n="Reaction");this.requiresObservable_=this.errorHandler_=
this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=ck.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=Jt.NONE;this.name_=n;this.onInvalidate_=P;this.errorHandler_=ea;this.requiresObservable_=ka}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Bg.pendingReactions.push(this),
0<Bg.inBatch||Bg.isRunningReactions||Tv(xb))};d.isScheduled=function(){return this.isScheduled_};d.runReaction_=function(){if(!this.isDisposed_){jd();this.isScheduled_=!1;var n=Bg.trackingContext;Bg.trackingContext=this;if(Dc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(P){this.reportExceptionInDerivation_(P)}}Bg.trackingContext=n;Rb()}};d.track=function(n){if(!this.isDisposed_){jd();this.isRunning_=!0;var P=Bg.trackingContext;Bg.trackingContext=this;n=uc(this,n,void 0);Bg.trackingContext=
P;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Rc(this);n instanceof Os&&this.reportExceptionInDerivation_(n.cause);Rb()}};d.reportExceptionInDerivation_=function(n){var P=this;if(this.errorHandler_)this.errorHandler_(n,this);else{if(Bg.disableErrorBoundaries)throw n;Bg.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",n);Bg.globalReactionErrorHandlers.forEach(function(ea){return ea(n,P)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||
(jd(),Rc(this),Rb()))};d.getDisposer_=function(){var n=this.dispose.bind(this);n[ze]=this;return n};d.toString=function(){return"Reaction["+this.name_+"]"};d.trace=function(n){void 0===n&&(n=!1);id(this,n)};return a}(),kE=100,Tv=function(a){return a()},Uv=F("Reaction",Kt),Jz="action",Kz=Da(Jz),lE=Da("action.bound",{bound:!0}),Lz=Da("autoAction",{autoAction:!0}),mE=Da("autoAction.bound",{autoAction:!0,bound:!0}),ph=Sc(!1);Object.assign(ph,Kz);var Pu=Sc(!0);Object.assign(Pu,Lz);ph.bound=za(lE);Pu.bound=
za(mE);var nE=function(a){return a()},oE="onBO",pE="onBUO",qE=0;Ed.prototype=Object.create(Error.prototype);var Mz=va("flow"),rE=va("flow.bound",{bound:!0}),Qu=Object.assign(function(a,d){if(H(d))return Ja(a,d,Mz);var n=a.name||"\x3cunnamed flow\x3e";d=function(){var P=arguments,ea=++qE,ka=ph(n+" - runid: "+ea+" - init",a).apply(this,P),sa,La=void 0;P=new Promise(function(Ua,eb){function lb(Tb){La=void 0;try{var sc=ph(n+" - runid: "+ea+" - yield "+Zb++,ka.next).call(ka,Tb)}catch(Kc){return eb(Kc)}Vb(sc)}
function rb(Tb){La=void 0;try{var sc=ph(n+" - runid: "+ea+" - yield "+Zb++,ka["throw"]).call(ka,Tb)}catch(Kc){return eb(Kc)}Vb(sc)}function Vb(Tb){if(U(null==Tb?void 0:Tb.then))Tb.then(Vb,eb);else{if(Tb.done)return Ua(Tb.value);La=Promise.resolve(Tb.value);return La.then(lb,rb)}}var Zb=0;sa=eb;lb(void 0)});P.cancel=ph(n+" - runid: "+ea+" - cancel",function(){try{if(La){var Ua=La;U(Ua.cancel)&&Ua.cancel()}var eb=ka["return"](void 0),lb=Promise.resolve(eb.value);lb.then(Qb,Qb);U(lb.cancel)&&lb.cancel();
sa(new Ed)}catch(rb){sa(rb)}});return P};d.isMobXFlow=!0;return d},Mz);Qu.bound=za(rE);var sE={has:function(a,d){return a[ze].has_(d)},get:function(a,d){return a[ze].get_(d)},set:function(a,d,n){var P;return H(d)?null!=(P=a[ze].set_(d,n,!0))?P:!0:!1},deleteProperty:function(a,d){var n;return H(d)?null!=(n=a[ze].delete_(d,!0))?n:!0:!1},defineProperty:function(a,d,n){var P;return null!=(P=a[ze].defineProperty_(d,n))?P:!0},ownKeys:function(a){return a[ze].ownKeys_()},preventExtensions:function(a){f(13)}},
jq="update",tE={get:function(a,d){var n=a[ze];return d===ze?n:"length"===d?n.getArrayLength_():"string"!==typeof d||isNaN(d)?V(Vv,d)?Vv[d]:a[d]:n.get_(parseInt(d))},set:function(a,d,n){var P=a[ze];"length"===d&&P.setArrayLength_(n);"symbol"===typeof d||isNaN(d)?a[d]=n:P.set_(parseInt(d),n);return!0},preventExtensions:function(){f(15)}},px=function(){function a(n,P,ea,ka){void 0===n&&(n="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=
this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=ea;this.legacyMode_=ka;this.atom_=new hh(n);this.enhancer_=function(sa,La){return P(sa,La,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};d.dehanceValues_=function(n){return void 0!==this.dehancer&&0<n.length?n.map(this.dehancer):n};d.intercept_=function(n){return Eb(this,n)};d.observe_=function(n,P){void 0===P&&(P=!1);P&&n({observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return xc(this,n)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(n){("number"!==typeof n||isNaN(n)||0>n)&&f("Out of range: "+n);var P=this.values_.length;if(n!==P)if(n>P){for(var ea=Array(n-P),ka=0;ka<n-P;ka++)ea[ka]=void 0;this.spliceWithArray_(P,0,ea)}else this.spliceWithArray_(n,
P-n)};d.updateArrayLength_=function(n,P){n!==this.lastKnownLength_&&f(16);this.lastKnownLength_+=P;this.legacyMode_&&0<P&&ae(n+P+1)};d.spliceWithArray_=function(n,P,ea){var ka=this,sa=this.values_.length;void 0===n?n=0:n>sa?n=sa:0>n&&(n=Math.max(0,sa+n));P=1===arguments.length?sa-n:void 0===P||null===P?0:Math.max(0,Math.min(P,sa-n));void 0===ea&&(ea=da);if(zb(this)){var La=Pa(this,{object:this.proxy_,type:"splice",index:n,removedCount:P,added:ea});if(!La)return da;P=La.removedCount;ea=La.added}ea=
0===ea.length?ea:ea.map(function(Ua){return ka.enhancer_(Ua,void 0)});this.legacyMode_&&this.updateArrayLength_(sa,ea.length-P);sa=this.spliceItemsIntoValues_(n,P,ea);0===P&&0===ea.length||this.notifyArraySplice_(n,ea,sa);return this.dehanceValues_(sa)};d.spliceItemsIntoValues_=function(n,P,ea){if(1E4>ea.length){var ka;return(ka=this.values_).splice.apply(ka,[n,P].concat(ea))}ka=this.values_.slice(n,n+P);var sa=this.values_.slice(n+P);this.values_.length+=ea.length-P;for(P=0;P<ea.length;P++)this.values_[n+
P]=ea[P];for(P=0;P<sa.length;P++)this.values_[n+ea.length+P]=sa[P];return ka};d.notifyArrayChildUpdate_=function(n,P,ea){var ka=!this.owned_&&!1,sa=Ib(this);n=sa||ka?{observableKind:"array",object:this.proxy_,type:jq,debugObjectName:this.atom_.name_,index:n,newValue:P,oldValue:ea}:null;this.atom_.reportChanged();sa&&Ic(this,n)};d.notifyArraySplice_=function(n,P,ea){var ka=!this.owned_&&!1,sa=Ib(this);n=sa||ka?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",
index:n,removed:ea,added:P,removedCount:ea.length,addedCount:P.length}:null;this.atom_.reportChanged();sa&&Ic(this,n)};d.get_=function(n){if(this.legacyMode_&&n>=this.values_.length)console.warn("[mobx] Out of bounds read: "+n);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])};d.set_=function(n,P){var ea=this.values_;this.legacyMode_&&n>ea.length&&f(17,n,ea.length);if(n<ea.length){var ka=ea[n];if(zb(this)){P=Pa(this,{type:jq,object:this.proxy_,index:n,newValue:P});if(!P)return;
P=P.newValue}P=this.enhancer_(P,ka);P!==ka&&(ea[n]=P,this.notifyArrayChildUpdate_(n,P,ka))}else{n=Array(n+1-ea.length);for(ka=0;ka<n.length-1;ka++)n[ka]=void 0;n[n.length-1]=P;this.spliceWithArray_(ea.length,0,n)}};return a}(),Vv={clear:function(){return this.splice(0)},replace:function(a){var d=this[ze];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},splice:function(a,d){for(var n=arguments.length,P=Array(2<n?n-2:0),ea=2;ea<n;ea++)P[ea-2]=arguments[ea];n=this[ze];
switch(arguments.length){case 0:return[];case 1:return n.spliceWithArray_(a);case 2:return n.spliceWithArray_(a,d)}return n.spliceWithArray_(a,d,P)},spliceWithArray:function(a,d,n){return this[ze].spliceWithArray_(a,d,n)},push:function(){for(var a=this[ze],d=arguments.length,n=Array(d),P=0;P<d;P++)n[P]=arguments[P];a.spliceWithArray_(a.values_.length,0,n);return a.values_.length},pop:function(){return this.splice(Math.max(this[ze].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},
unshift:function(){for(var a=this[ze],d=arguments.length,n=Array(d),P=0;P<d;P++)n[P]=arguments[P];a.spliceWithArray_(0,0,n);return a.values_.length},reverse:function(){Bg.trackingDerivation&&f(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){Bg.trackingDerivation&&f(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[ze];a=d.dehanceValues_(d.values_).indexOf(a);return-1<a?(this.splice(a,1),!0):!1}};nb("concat",
jb);nb("flat",jb);nb("includes",jb);nb("indexOf",jb);nb("join",jb);nb("lastIndexOf",jb);nb("slice",jb);nb("toString",jb);nb("toLocaleString",jb);nb("every",Bb);nb("filter",Bb);nb("find",Bb);nb("findIndex",Bb);nb("flatMap",Bb);nb("forEach",Bb);nb("map",Bb);nb("some",Bb);nb("reduce",Kb);nb("reduceRight",Kb);var uE=F("ObservableArrayAdministration",px),vE={};var wE=Symbol.iterator;var xE=Symbol.toStringTag;var Nz=function(){function a(n,P,ea){var ka=this;void 0===P&&(P=Ga);void 0===ea&&(ea="ObservableMap");
this.name_=this.enhancer_=void 0;this[ze]=vE;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=P;this.name_=ea;U(Map)||f(18);this.keysAtom_=$a("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Wb(!0,function(){ka.merge(n)})}var d=a.prototype;d.has_=function(n){return this.data_.has(n)};d.has=function(n){var P=this;if(!Bg.trackingDerivation)return this.has_(n);var ea=this.hasMap_.get(n);if(!ea){var ka=ea=new Ns(this.has_(n),
Na,"ObservableMap.key?",!1);this.hasMap_.set(n,ka);zd(ka,function(){return P.hasMap_["delete"](n)})}return ea.get()};d.set=function(n,P){var ea=this.has_(n);if(zb(this)){P=Pa(this,{type:ea?jq:"add",object:this,newValue:P,name:n});if(!P)return this;P=P.newValue}ea?this.updateValue_(n,P):this.addValue_(n,P);return this};d["delete"]=function(n){var P=this;if(zb(this)&&!Pa(this,{type:"delete",object:this,name:n}))return!1;if(this.has_(n)){var ea=Ib(this),ka=ea?{observableKind:"map",debugObjectName:this.name_,
type:"delete",object:this,oldValue:this.data_.get(n).value_,name:n}:null;Gc(function(){var sa;P.keysAtom_.reportChanged();null==(sa=P.hasMap_.get(n))?void 0:sa.setNewValue_(!1);P.data_.get(n).setNewValue_(void 0);P.data_["delete"](n)});ea&&Ic(this,ka);return!0}return!1};d.updateValue_=function(n,P){var ea=this.data_.get(n);P=ea.prepareNewValue_(P);if(P!==Bg.UNCHANGED){var ka=Ib(this);n=ka?{observableKind:"map",debugObjectName:this.name_,type:jq,object:this,oldValue:ea.value_,name:n,newValue:P}:null;
ea.setNewValue_(P);ka&&Ic(this,n)}};d.addValue_=function(n,P){var ea=this;Gc(function(){var La,Ua=new Ns(P,ea.enhancer_,"ObservableMap.key",!1);ea.data_.set(n,Ua);P=Ua.value_;null==(La=ea.hasMap_.get(n))?void 0:La.setNewValue_(!0);ea.keysAtom_.reportChanged()});var ka=Ib(this),sa=ka?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:n,newValue:P}:null;ka&&Ic(this,sa)};d.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)};
d.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var n=this,P=this.keys();return Va({next:function(){var ea=P.next(),ka=ea.done;ea=ea.value;return{done:ka,value:ka?void 0:n.get(ea)}}})};d.entries=function(){var n=this,P=this.keys();return Va({next:function(){var ea=P.next(),ka=ea.done;ea=ea.value;return{done:ka,value:ka?void 0:[ea,n.get(ea)]}}})};d[wE]=function(){return this.entries()};
d.forEach=function(n,P){for(var ea=ra(this),ka;!(ka=ea()).done;)ka=ka.value,n.call(P,ka[1],ka[0],this)};d.merge=function(n){var P=this;Hr(n)&&(n=new Map(n));Gc(function(){N(n)?J(n).forEach(function(ea){return P.set(ea,n[ea])}):Array.isArray(n)?n.forEach(function(ea){return P.set(ea[0],ea[1])}):L(n)?(n.constructor!==Map&&f(19,n),n.forEach(function(ea,ka){return P.set(ka,ea)})):null!==n&&void 0!==n&&f(20,n)});return this};d.clear=function(){var n=this;Gc(function(){wd(function(){for(var P=ra(n.keys()),
ea;!(ea=P()).done;)n["delete"](ea.value)})})};d.replace=function(n){var P=this;Gc(function(){for(var ea=qd(n),ka=new Map,sa=!1,La=ra(P.data_.keys()),Ua;!(Ua=La()).done;)if(Ua=Ua.value,!ea.has(Ua))if(P["delete"](Ua))sa=!0;else{var eb=P.data_.get(Ua);ka.set(Ua,eb)}for(ea=ra(ea.entries());!(La=ea()).done;)Ua=La.value,La=Ua[0],eb=Ua[1],Ua=P.data_.has(La),P.set(La,eb),P.data_.has(La)&&(eb=P.data_.get(La),ka.set(La,eb),Ua||(sa=!0));if(!sa)if(P.data_.size!==ka.size)P.keysAtom_.reportChanged();else for(sa=
P.data_.keys(),ea=ka.keys(),La=sa.next(),Ua=ea.next();!La.done;){if(La.value!==Ua.value){P.keysAtom_.reportChanged();break}La=sa.next();Ua=ea.next()}P.data_=ka});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(n,P){return xc(this,n)};d.intercept_=function(n){return Eb(this,n)};Z(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:xE,get:function(){return"Map"}}]);return a}(),
Hr=F("ObservableMap",Nz),yE={};var zE=Symbol.iterator;var AE=Symbol.toStringTag;var Oz=function(){function a(n,P,ea){void 0===P&&(P=Ga);void 0===ea&&(ea="ObservableSet");this.name_=void 0;this[ze]=yE;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=ea;U(Set)||f(22);this.atom_=$a(this.name_);this.enhancer_=function(ka,sa){return P(ka,sa,ea)};n&&this.replace(n)}var d=a.prototype;d.dehanceValue_=function(n){return void 0!==this.dehancer?
this.dehancer(n):n};d.clear=function(){var n=this;Gc(function(){wd(function(){for(var P=ra(n.data_.values()),ea;!(ea=P()).done;)n["delete"](ea.value)})})};d.forEach=function(n,P){for(var ea=ra(this),ka;!(ka=ea()).done;)ka=ka.value,n.call(P,ka,ka,this)};d.add=function(n){var P=this;if(zb(this)&&!Pa(this,{type:"add",object:this,newValue:n}))return this;if(!this.has(n)){Gc(function(){P.data_.add(P.enhancer_(n,void 0));P.atom_.reportChanged()});var ea=Ib(this),ka=ea?{observableKind:"set",debugObjectName:this.name_,
type:"add",object:this,newValue:n}:null;ea&&Ic(this,ka)}return this};d["delete"]=function(n){var P=this;if(zb(this)&&!Pa(this,{type:"delete",object:this,oldValue:n}))return!1;if(this.has(n)){var ea=Ib(this),ka=ea?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:n}:null;Gc(function(){P.atom_.reportChanged();P.data_["delete"](n)});ea&&Ic(this,ka);return!0}return!1};d.has=function(n){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(n))};d.entries=
function(){var n=0,P=Array.from(this.keys()),ea=Array.from(this.values());return Va({next:function(){var ka=n;n+=1;return ka<ea.length?{value:[P[ka],ea[ka]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var n=this,P=0,ea=Array.from(this.data_.values());return Va({next:function(){return P<ea.length?{value:n.dehanceValue_(ea[P++]),done:!1}:{done:!0}}})};d.replace=function(n){var P=this;Ps(n)&&(n=new Set(n));Gc(function(){Array.isArray(n)?
(P.clear(),n.forEach(function(ea){return P.add(ea)})):M(n)?(P.clear(),n.forEach(function(ea){return P.add(ea)})):null!==n&&void 0!==n&&f("Cannot initialize set from "+n)});return this};d.observe_=function(n,P){return xc(this,n)};d.intercept_=function(n){return Eb(this,n)};d.toJSON=function(){return Array.from(this)};d.toString=function(){return"[object ObservableSet]"};d[zE]=function(){return this.values()};Z(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:AE,
get:function(){return"Set"}}]);return a}(),Ps=F("ObservableSet",Oz),Pz=Object.create(null),Qz=function(){function a(n,P,ea,ka){void 0===P&&(P=new Map);void 0===ka&&(ka=Ai);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=n;this.values_=P;this.name_=ea;this.defaultAnnotation_=ka;this.keysAtom_=new hh("ObservableObject.keys");this.isPlainObject_=N(this.target_)}
var d=a.prototype;d.getObservablePropValue_=function(n){return this.values_.get(n).get()};d.setObservablePropValue_=function(n,P){var ea=this.values_.get(n);if(ea instanceof Nu)return ea.set(P),!0;if(zb(this)){P=Pa(this,{type:jq,object:this.proxy_||this.target_,name:n,newValue:P});if(!P)return null;P=P.newValue}P=ea.prepareNewValue_(P);if(P!==Bg.UNCHANGED){var ka=Ib(this);n=ka?{type:jq,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:ea.value_,name:n,newValue:P}:
null;ea.setNewValue_(P);ka&&Ic(this,n)}return!0};d.get_=function(n){Bg.trackingDerivation&&!V(this.target_,n)&&this.has_(n);return this.target_[n]};d.set_=function(n,P,ea){void 0===ea&&(ea=!1);if(V(this.target_,n)){if(this.values_.has(n))return this.setObservablePropValue_(n,P);if(ea)return Reflect.set(this.target_,n,P);this.target_[n]=P;return!0}return this.extend_(n,{value:P,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,ea)};d.has_=function(n){if(!Bg.trackingDerivation)return n in
this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var P=this.pendingKeys_.get(n);P||(P=new Ns(n in this.target_,Na,"ObservableObject.key?",!1),this.pendingKeys_.set(n,P));return P.get()};d.make_=function(n,P){!0===P&&(P=this.defaultAnnotation_);if(!1!==P){if(!(n in this.target_)){var ea;if(null!=(ea=this.target_[ce])&&ea[n])return;f(1,P.annotationType_,this.name_+"."+n.toString())}for(ea=this.target_;ea&&ea!==bq;){var ka=aq(ea,n);if(ka){ka=P.make_(this,n,ka,ea);if(0===ka)return;if(1===ka)break}ea=
Object.getPrototypeOf(ea)}var sa;null==(sa=this.target_[ce])?!0:delete sa[n]}};d.extend_=function(n,P,ea,ka){void 0===ka&&(ka=!1);!0===ea&&(ea=this.defaultAnnotation_);if(!1===ea)return this.defineProperty_(n,P,ka);if(P=ea.extend_(this,n,P,ka)){var sa;null==(sa=this.target_[ce])?!0:delete sa[n]}return P};d.defineProperty_=function(n,P,ea){void 0===ea&&(ea=!1);try{jd();var ka=this.delete_(n);if(!ka)return ka;if(zb(this)){var sa=Pa(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:P.value});
if(!sa)return null;var La=sa.newValue;P.value!==La&&(P=W({},P,{value:La}))}if(ea){if(!Reflect.defineProperty(this.target_,n,P))return!1}else xp(this.target_,n,P);this.notifyPropertyAddition_(n,P.value)}finally{Rb()}return!0};d.defineObservableProperty_=function(n,P,ea,ka){void 0===ka&&(ka=!1);try{jd();var sa=this.delete_(n);if(!sa)return sa;if(zb(this)){var La=Pa(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:P});if(!La)return null;P=La.newValue}var Ua=ge(n),eb={configurable:Bg.safeDescriptors?
this.isPlainObject_:!0,enumerable:!0,get:Ua.get,set:Ua.set};if(ka){if(!Reflect.defineProperty(this.target_,n,eb))return!1}else xp(this.target_,n,eb);var lb=new Ns(P,ea,"ObservableObject.key",!1);this.values_.set(n,lb);this.notifyPropertyAddition_(n,lb.value_)}finally{Rb()}return!0};d.defineComputedProperty_=function(n,P,ea){void 0===ea&&(ea=!1);try{jd();var ka=this.delete_(n);if(!ka)return ka;if(zb(this)&&!Pa(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:void 0}))return null;P.name||
(P.name="ObservableObject.key");P.context=this.proxy_||this.target_;var sa=ge(n),La={configurable:Bg.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:sa.get,set:sa.set};if(ea){if(!Reflect.defineProperty(this.target_,n,La))return!1}else xp(this.target_,n,La);this.values_.set(n,new Nu(P));this.notifyPropertyAddition_(n,void 0)}finally{Rb()}return!0};d.delete_=function(n,P){void 0===P&&(P=!1);if(!V(this.target_,n))return!0;if(zb(this)&&!Pa(this,{object:this.proxy_||this.target_,name:n,type:"remove"}))return null;
try{var ea,ka;jd();var sa=Ib(this),La=this.values_.get(n),Ua=void 0;if(!La&&sa){var eb;Ua=null==(eb=aq(this.target_,n))?void 0:eb.value}if(P){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];La&&(this.values_["delete"](n),La instanceof Ns&&(Ua=La.value_),Jb(La));this.keysAtom_.reportChanged();null==(ea=this.pendingKeys_)?void 0:null==(ka=ea.get(n))?void 0:ka.set(n in this.target_);if(sa){var lb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,
debugObjectName:this.name_,oldValue:Ua,name:n};sa&&Ic(this,lb)}}finally{Rb()}return!0};d.observe_=function(n,P){return xc(this,n)};d.intercept_=function(n){return Eb(this,n)};d.notifyPropertyAddition_=function(n,P){var ea,ka,sa=Ib(this);sa&&(P=sa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:P}:null,sa&&Ic(this,P));null==(ea=this.pendingKeys_)?void 0:null==(ka=ea.get(n))?void 0:ka.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=
function(){this.keysAtom_.reportObserved();return Zc(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return a}(),BE=F("ObservableObjectAdministration",Qz),CE=he(0),qx=0,Rz=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,d):void 0!==a.prototype.__proto__?a.prototype.__proto__=d:a.prototype=d})(Rz,Array.prototype);var rx=function(a,d,n){function P(ka,sa,La,Ua){void 0===La&&(La="ObservableArray");void 0===Ua&&(Ua=
!1);var eb=a.call(this)||this;sa=new px(La,sa,Ua,!0);sa.proxy_=fa(eb);B(fa(eb),ze,sa);ka&&ka.length&&(sa=Lc(!0),eb.spliceWithArray(0,0,ka),Bg.allowStateChanges=sa);Object.defineProperty(fa(eb),"0",CE);return eb}ha(P,a);var ea=P.prototype;ea.concat=function(){this[ze].atom_.reportObserved();for(var ka=arguments.length,sa=Array(ka),La=0;La<ka;La++)sa[La]=arguments[La];return Array.prototype.concat.apply(this.slice(),sa.map(function(Ua){return od(Ua)?Ua.slice():Ua}))};ea[n]=function(){var ka=this,sa=
0;return Va({next:function(){return sa<ka.length?{value:ka[sa++],done:!1}:{done:!0,value:void 0}}})};Z(P,[{key:"length",get:function(){return this[ze].getArrayLength_()},set:function(ka){this[ze].setArrayLength_(ka)}},{key:d,get:function(){return"Array"}}]);return P}(Rz,Symbol.toStringTag,Symbol.iterator);Object.entries(Vv).forEach(function(a){var d=a[0];a=a[1];"concat"!==d&&T(rx.prototype,d,a)});ae(1E3);var Sz=bq.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof G()[a]&&f("MobX requires global '"+
a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:qc,extras:{getDebugName:Ya},$mobx:ze});var DE=ba(612),Dm=class{constructor(a){pb(this,"props");pb(this,"aspectRatio");pb(this,"type");pb(this,"hideCloneHandles",!1);pb(this,"hideResizeHandles",!1);pb(this,"hideRotateHandle",!1);pb(this,"hideContextBar",!1);pb(this,"hideSelectionDetail",!1);pb(this,"hideSelection",!1);pb(this,"canChangeAspectRatio",!0);pb(this,"canUnmount",
!0);pb(this,"canResize",[!0,!0]);pb(this,"canScale",!0);pb(this,"canFlip",!0);pb(this,"canEdit",!1);pb(this,"canBind",!1);pb(this,"nonce");pb(this,"bindingDistance",4);pb(this,"isDirty",!1);pb(this,"lastSerialized");pb(this,"getCenter",()=>ig.getBoundsCenter(this.bounds));pb(this,"getRotatedBounds",()=>{const {bounds:ka,props:{rotation:sa}}=this;return sa?ig.getBoundsFromPoints(ig.getRotatedCorners(ka,sa)):ka});pb(this,"hitTestPoint",ka=>{var sa=this.rotatedBounds;if(!this.props.rotation)return Jk.pointInBounds(ka,
sa);sa=ig.getRotatedCorners(sa,this.props.rotation);return Jk.pointInPolygon(ka,sa)});pb(this,"hitTestLineSegment",(ka,sa)=>{const La=ig.getBoundsFromPoints([ka,sa]),{rotatedBounds:Ua,props:{rotation:eb=0}}=this;return ig.boundsContain(Ua,La)||eb?k(ka,sa,ig.getRotatedCorners(this.bounds)).didIntersect:0<p(Ua,ka,sa).length});pb(this,"hitTestBounds",ka=>{const {rotatedBounds:sa,props:{rotation:La=0}}=this,Ua=ig.getRotatedCorners(this.bounds,La);return ig.boundsContain(ka,sa)||0<w([ka.minX,ka.minY],
[ka.width,ka.height],Ua).length});pb(this,"getExpandedBounds",()=>ig.expandBounds(this.getBounds(),this.bindingDistance));pb(this,"getBindingPoint",(ka,sa,La,Ua)=>{var eb=this.getBounds(),lb=this.getExpandedBounds();if(Jk.pointInBounds(ka,lb)){var rb=C(sa,La,lb).filter(Vb=>Vb.didIntersect).map(Vb=>Vb.points[0]);if(rb.length)return La=this.getCenter(),rb=rb.sort((Vb,Zb)=>De.dist(Zb,sa)-De.dist(Vb,sa))[0],rb=De.med(ka,rb),Ua?(Ua=2>De.dist(ka,La)?La:ka,eb=0):(Ua=2>De.distanceToLineSegment(ka,rb,La)?
La:rb,eb=Jk.pointInBounds(ka,eb)?this.bindingDistance:Math.max(this.bindingDistance,ig.getBoundsSides(eb).map(Vb=>De.distanceToLineSegment(Vb[1][0],Vb[1][1],ka)).sort((Vb,Zb)=>Vb-Zb)[0])),lb=De.divV(De.sub(Ua,[lb.minX,lb.minY]),[lb.width,lb.height]),{point:De.clampV(lb,0,1),distance:eb}}});pb(this,"getSerialized",()=>mc($f(Ie({},this.props),{type:this.type,nonce:this.nonce})));pb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Gc(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});
if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});pb(this,"validateProps",ka=>ka);pb(this,"update",(ka,sa=!1,La=!1)=>{sa||this.isDirty||this.setIsDirty(!0);sa||La||this.incNonce();Object.assign(this.props,this.validateProps(ka));return this});pb(this,"clone",()=>new this.constructor(this.serialized));pb(this,"onResetBounds",ka=>this);pb(this,"scale",[1,1]);pb(this,"onResizeStart",ka=>{var sa;this.scale=[...(null!=(sa=this.props.scale)?
sa:[1,1])];return this});pb(this,"onResize",(ka,sa)=>{const {bounds:La,rotation:Ua,scale:[eb,lb]}=sa;ka=[...this.scale];0>eb&&(ka[0]*=-1);0>lb&&(ka[1]*=-1);this.update({point:[La.minX,La.minY],scale:ka,rotation:Ua});return this});pb(this,"onHandleChange",(ka,{id:sa,delta:La})=>{if(void 0!==ka.handles){var Ua=Rs(ka.handles);Ua[sa]=$f(Ie({},Ua[sa]),{point:De.add(La,ka.handles[sa].point)});var eb=ig.getCommonTopLeft(Object.values(Ua).map(lb=>lb.point));Object.values(Ua).forEach(lb=>{lb.point=De.sub(lb.point,
eb)});this.update({point:De.add(ka.point,eb),handles:Ua})}});var d,n;const P=this.constructor.id,ea=null!=(d=this.constructor.defaultProps)?d:{};this.type=P;this.props=Ie(Ie({scale:[1,1]},ea),a);this.nonce=null!=(n=a.nonce)?n:Date.now();fd(this)}get id(){return this.props.id}setNonce(a){this.nonce=a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=
this.getBounds();const {stroke:d,strokeWidth:n,strokeType:P,opacity:ea,fill:ka,noFill:sa,borderRadius:La}=this.props;return(0,DE.jsx)("rect",{fill:sa?"none":Tf(ka,"background"),stroke:Tf(d,"stroke"),strokeWidth:null!=n?n:2,strokeDasharray:"dashed"===P?"8 2":void 0,fillOpacity:null!=ea?ea:.2,width:a.width,height:a.height,rx:La,ry:La})}};pb(Dm,"type");Ae([Ef],Dm.prototype,"props",2);Ae([Ef],Dm.prototype,"canResize",2);Ae([Ef],Dm.prototype,"nonce",2);Ae([Ef],Dm.prototype,"isDirty",2);Ae([Ef],Dm.prototype,
"lastSerialized",2);Ae([pg],Dm.prototype,"id",1);Ae([ph],Dm.prototype,"setNonce",1);Ae([ph],Dm.prototype,"incNonce",1);Ae([ph],Dm.prototype,"setIsDirty",1);Ae([ph],Dm.prototype,"setLastSerialized",1);Ae([pg],Dm.prototype,"center",1);Ae([pg],Dm.prototype,"bounds",1);Ae([pg],Dm.prototype,"rotatedBounds",1);Ae([pg],Dm.prototype,"serialized",1);Ae([ph],Dm.prototype,"update",2);var Dn=class extends Dm{constructor(a={}){super(a);pb(this,"canBind",!0);pb(this,"getBounds",()=>{const [d,n]=this.props.point,
[P,ea]=this.props.size;return{minX:d,minY:n,maxX:d+P,maxY:n+ea,width:P,height:ea}});pb(this,"getRotatedBounds",()=>ig.getBoundsFromPoints(ig.getRotatedCorners(this.bounds,this.props.rotation)));pb(this,"onResize",(d,n)=>{const {bounds:P,rotation:ea,scale:[ka,sa]}=n;d=[...this.scale];0>ka&&(d[0]*=-1);0>sa&&(d[1]*=-1);this.update({point:[P.minX,P.minY],scale:d,rotation:ea});return this.update({rotation:ea,point:[P.minX,P.minY],size:[Math.max(1,P.width),Math.max(1,P.height)],scale:d})});pb(this,"validateProps",
d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return d});fd(this)}};pb(Dn,"id","box");pb(Dn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var Lt=class extends Dm{constructor(a={}){super(a);pb(this,"getBounds",()=>{const {pointBounds:d,props:{point:n}}=this;return ig.translateBounds(d,n)});pb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:n},bounds:P,rotatedPoints:ea}=this;return d?ig.translateBounds(ig.getBoundsFromPoints(ea),
n):P});pb(this,"normalizedPoints",[]);pb(this,"isResizeFlippedX",!1);pb(this,"isResizeFlippedY",!1);pb(this,"onResizeStart",()=>{var d;const {bounds:n,props:{points:P}}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const ea=[n.width,n.height];this.normalizedPoints=P.map(ka=>Yd.divV(ka,ea));return this});pb(this,"onResize",(d,n)=>{const {bounds:P,scale:[ea,ka]}=n,sa=[P.width,P.height];d=[...this.scale];0>ea&&(d[0]*=-1);0>ka&&(d[1]*=-1);return this.update(ea||ka?{point:[P.minX,P.minY],points:this.normalizedPoints.map(La=>
Yd.mulV(La,sa).concat(La[2])),scale:d}:{point:[P.minX,P.minY],points:this.normalizedPoints.map(La=>Yd.mulV(La,sa).concat(La[2]))})});pb(this,"hitTestPoint",d=>{const {props:{points:n,point:P}}=this;return Jk.pointNearToPolyline(Yd.sub(d,P),n)});pb(this,"hitTestLineSegment",(d,n)=>{const {bounds:P,props:{points:ea,point:ka}}=this;if(Jk.pointInBounds(d,P)||Jk.pointInBounds(n,P)||0<p(P,d,n).length){const sa=Yd.sub(d,ka),La=Yd.sub(n,ka);return k(sa,La,ea).didIntersect||!!ea.find(Ua=>5>Yd.dist(sa,Ua)||
5>Yd.dist(La,Ua))}return!1});pb(this,"hitTestBounds",d=>{const {rotatedBounds:n,props:{points:P,point:ea}}=this,ka=ig.translateBounds(d,Yd.neg(ea));return ig.boundsContain(d,n)||P.every(sa=>Jk.pointInBounds(sa,ka))||ig.boundsCollide(d,n)&&0<D([ka.minX,ka.minY],[ka.width,ka.height],P).length});fd(this)}get pointBounds(){const {props:{points:a}}=this;return ig.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:n},center:P}=this;if(!n)return d;const ea=Yd.sub(P,a);return d.map(ka=>
Yd.rotWith(ka,ea,n))}};pb(Lt,"id","draw");pb(Lt,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});Ae([pg],Lt.prototype,"pointBounds",1);Ae([pg],Lt.prototype,"rotatedPoints",1);var sx=class extends Dn{constructor(a={}){super(a);pb(this,"getBounds",()=>{const {props:{point:[d,n],size:[P,ea]}}=this;return ig.getRotatedEllipseBounds(d,n,P/2,ea/2,0)});pb(this,"getRotatedBounds",()=>{const {props:{point:[d,n],size:[P,ea],rotation:ka}}=this;return ig.getRotatedEllipseBounds(d,
n,P/2,ea/2,ka)});pb(this,"hitTestPoint",d=>{const {props:{size:n,rotation:P},center:ea}=this;return Jk.pointInEllipse(d,ea,n[0],n[1],P||0)});pb(this,"hitTestLineSegment",(d,n)=>{const {props:{size:[P,ea],rotation:ka=0},center:sa}=this;return g(d,n,sa,P,ea,ka).didIntersect});pb(this,"hitTestBounds",d=>{const {props:{size:[n,P],rotation:ea=0},rotatedBounds:ka}=this;var sa;if(!(sa=ig.boundsContain(d,ka))){const {minX:La,minY:Ua,width:eb,height:lb}=d;sa=0<t(this.center,n/2,P/2,ea,[La,Ua],[eb,lb]).length}return sa});
fd(this)}};pb(sx,"id","ellipse");pb(sx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var tx=class extends Dn{constructor(a={}){super(a);pb(this,"onResetBounds",d=>{const {clipping:n,size:P,point:ea}=this.props;if(n){const [ka,sa,La,Ua]=Array.isArray(n)?n:[n,n,n,n];return this.update({clipping:0,point:[ea[0]-Ua,ea[1]-ka],size:[P[0]+(Ua-sa),P[1]+(ka-La)]})}if(d.asset){const {size:[ka,sa]}=d.asset;this.update({clipping:0,point:[ea[0]+P[0]/2-ka/2,ea[1]+P[1]/
2-sa/2],size:[ka,sa]})}return this});pb(this,"onResize",(d,n)=>{const {bounds:P,clip:ea,scale:ka}=n;({clipping:n}=this.props);const {clipping:sa}=d;if(ea){const {point:[La,Ua],size:[eb,lb]}=d,[rb,Vb,Zb,Tb]=sa?Array.isArray(sa)?sa:[sa,sa,sa,sa]:[0,0,0,0];n=[rb+(P.minY-Ua),Vb+(P.maxX-(La+eb)),Zb+(P.maxY-(Ua+lb)),Tb+(P.minX-La)]}else void 0!==sa&&(n=Array.isArray(sa)?sa:[sa,sa,sa,sa],n=[n[0]*ka[1],n[1]*ka[0],n[2]*ka[1],n[3]*ka[0]]);if(n&&Array.isArray(n)){const La=n;La.every((Ua,eb)=>0===eb||Ua===La[eb-
1])&&(n=La[0])}return this.update({point:[P.minX,P.minY],size:[Math.max(1,P.width),Math.max(1,P.height)],clipping:n})});fd(this)}};pb(tx,"id","ellipse");pb(tx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Tz=class extends Dm{constructor(a={}){super(a);pb(this,"getBounds",()=>{const {points:d,props:{point:n}}=this;return ig.translateBounds(ig.getBoundsFromPoints(d),n)});pb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,
props:{point:n}}=this;return ig.translateBounds(ig.getBoundsFromPoints(d),n)});pb(this,"normalizedHandles",[]);pb(this,"onResizeStart",()=>{var d;const {props:{handles:n},bounds:P}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const ea=[P.width,P.height];this.normalizedHandles=Object.values(n).map(ka=>Yd.divV(ka.point,ea));return this});pb(this,"onResize",(d,n)=>{const {bounds:P,scale:[ea,ka]}=n,{props:{handles:sa},normalizedHandles:La}=this,Ua=[P.width,P.height];d=[...this.scale];0>ea&&
(d[0]*=-1);0>ka&&(d[1]*=-1);return this.update({point:[P.minX,P.minY],handles:Object.values(sa).map((eb,lb)=>$f(Ie({},eb),{point:Yd.mulV(La[lb],Ua)})),scale:d})});pb(this,"hitTestPoint",d=>{const {points:n}=this;return Jk.pointNearToPolyline(Yd.sub(d,this.props.point),n)});pb(this,"hitTestLineSegment",(d,n)=>{const {bounds:P,points:ea,props:{point:ka}}=this;if(Jk.pointInBounds(d,P)||Jk.pointInBounds(n,P)||0<p(P,d,n).length){const sa=Yd.sub(d,ka),La=Yd.sub(n,ka);return k(sa,La,ea).didIntersect||!!ea.find(Ua=>
5>Yd.dist(sa,Ua)||5>Yd.dist(La,Ua))}return!1});pb(this,"hitTestBounds",d=>{const {rotatedBounds:n,points:P,props:{point:ea}}=this,ka=ig.translateBounds(d,Yd.neg(ea));return ig.boundsContain(d,n)||P.every(sa=>Jk.pointInBounds(sa,ka))||ig.boundsCollide(d,n)&&0<D([ka.minX,ka.minY],[ka.width,ka.height],P).length});pb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Tz.defaultProps.handles);return d});fd(this)}get points(){return Object.values(this.props.handles).map(a=>
a.point)}get centroid(){const {points:a}=this;return ll.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,rotation:n}}=this;return n?Object.values(d).map(P=>Yd.rotWith(P.point,a,n)):this.points}},Mt=Tz;pb(Mt,"id","polyline");pb(Mt,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});Ae([pg],Mt.prototype,"points",1);Ae([pg],Mt.prototype,"centroid",1);Ae([pg],Mt.prototype,"rotatedPoints",1);var Uz=class extends Mt{constructor(a={}){super(a);
pb(this,"hideResizeHandles",!0);pb(this,"hideRotateHandle",!0);pb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Uz.defaultProps.handles);return d});pb(this,"getHandlesChange",(d,n)=>{var P=Kj(d.handles,n);P=Kj(P,{start:{point:De.toFixed(P.start.point)},end:{point:De.toFixed(P.end.point)}});if(!De.isEqual(P.start.point,P.end.point)){n={point:d.point,handles:Rs(P)};d=d.point;P=ig.translateBounds(ig.getBoundsFromPoints(Object.values(P).map(ka=>
ka.point)),n.point);var ea=De.sub([P.minX,P.minY],d);De.isEqual(ea,[0,0])||(Object.values(n.handles).forEach(ka=>{ka.point=De.toFixed(De.sub(ka.point,ea))}),n.point=De.toFixed(De.add(n.point,ea)));return n}});fd(this)}},Ru=Uz;pb(Ru,"id","line");pb(Ru,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Ir=class extends Dn{constructor(a={}){super(a);pb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,
props:{point:n},offset:P}=this;return ig.translateBounds(ig.getBoundsFromPoints(d),Yd.add(n,P))});pb(this,"hitTestPoint",d=>{const {vertices:n}=this;return Jk.pointInPolygon(Yd.add(d,this.props.point),n)});pb(this,"hitTestLineSegment",(d,n)=>{const {vertices:P,props:{point:ea}}=this;return k(Yd.sub(d,ea),Yd.sub(n,ea),P).didIntersect});pb(this,"hitTestBounds",d=>{const {rotatedBounds:n,offset:P,rotatedVertices:ea,props:{point:ka}}=this,sa=ig.translateBounds(d,Yd.neg(Yd.add(ka,P)));return ig.boundsContain(d,
n)||ea.every(La=>Jk.pointInBounds(La,sa))||0<w([sa.minX,sa.minY],[sa.width,sa.height],ea).length});pb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});fd(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},vertices:d}=this;return d.map(n=>Yd.add(n,a))}get centroid(){const {vertices:a}=this;return ll.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:n}}=this;return n?a.map(P=>
Yd.rotWith(P,d,n)):a}get offset(){const {props:{size:[a,d]}}=this,n=ig.getBoundsCenter(ig.getBoundsFromPoints(this.vertices));return Yd.sub(Yd.div([a,d],2),n)}getVertices(a=0){const {ratio:d,sides:n,size:P}=this.props;return 3===n?ll.getTriangleVertices(P,a,d):ll.getPolygonVertices(P,n,a,d)}};pb(Ir,"id","polygon");pb(Ir,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});Ae([pg],Ir.prototype,"vertices",1);Ae([pg],Ir.prototype,"pageVertices",
1);Ae([pg],Ir.prototype,"centroid",1);Ae([pg],Ir.prototype,"rotatedVertices",1);Ae([pg],Ir.prototype,"offset",1);var ux=class extends Dn{constructor(a={}){super(a);pb(this,"canEdit",!0);pb(this,"canFlip",!1);fd(this)}};pb(ux,"id","text");pb(ux,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Wv=class extends Dn{constructor(a={}){super(a);pb(this,"canEdit",!1);pb(this,"canFlip",!1);pb(this,"getBounds",()=>0===this.shapes.length?(bf().deleteShapes([this.id]),
{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):ig.getCommonBounds(this.shapes.map(d=>d.getBounds())));fd(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};pb(Wv,"id","group");pb(Wv,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});Ae([pg],Wv.prototype,"shapes",1);var Nt=class{constructor(){pb(this,"_id");pb(this,"_initial");pb(this,"_states");pb(this,"_isActive",!1);pb(this,"cursor");
pb(this,"_disposables",[]);pb(this,"children",new Map([]));pb(this,"registerStates",n=>{n.forEach(P=>this.children.set(P.id,new P(this,this)));return this});pb(this,"deregisterStates",n=>{n.forEach(P=>{var ea;null==(ea=this.children.get(P.id))?void 0:ea.dispose();this.children.delete(P.id)});return this});pb(this,"currentState",{});pb(this,"transition",(n,P={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${n}.`);const ea=this.children.get(n),ka=this.currentState;
if(!ea)throw Error(`Could not find a state named ${n}.`);Gc(()=>{this.currentState?(ka._events.onExit($f(Ie({},P),{toId:n})),ka.dispose(),this.setCurrentState(ea),this._events.onTransition($f(Ie({},P),{fromId:ka.id,toId:n})),ea._events.onEnter($f(Ie({},P),{fromId:ka.id}))):(this.currentState=ea,ea._events.onEnter($f(Ie({},P),{fromId:""})))});return this});pb(this,"isIn",n=>{n=n.split(".").reverse();let P=this;for(;0<n.length;){const ea=n.pop();if(!ea)return!0;if(P.currentState.id===ea){if(0===n.length)return!0;
P=P.currentState}else break}return!1});pb(this,"isInAny",(...n)=>n.some(this.isIn));pb(this,"forwardEvent",(n,...P)=>{var ea,ka;(null==(ka=null==(ea=this.currentState)?void 0:ea._events)?0:ka[n])&&Gc(()=>{var sa;return null==(sa=this.currentState._events)?void 0:sa[n](...P)})});pb(this,"_events",{onTransition:n=>{var P;null==(P=this.onTransition)?void 0:P.call(this,n)},onEnter:n=>{var P;this._isActive=!0;this.initial&&this.transition(this.initial,n);null==(P=this.onEnter)?void 0:P.call(this,n)},onExit:n=>
{var P,ea,ka;this._isActive=!1;null==(ea=null==(P=this.currentState)?void 0:P.onExit)?void 0:ea.call(P,{toId:"parent"});null==(ka=this.onExit)?void 0:ka.call(this,n)},onPointerDown:(n,P)=>{var ea;null==(ea=this.onPointerDown)?void 0:ea.call(this,n,P);this.forwardEvent("onPointerDown",n,P)},onPointerUp:(n,P)=>{var ea;null==(ea=this.onPointerUp)?void 0:ea.call(this,n,P);this.forwardEvent("onPointerUp",n,P)},onPointerMove:(n,P)=>{var ea;null==(ea=this.onPointerMove)?void 0:ea.call(this,n,P);this.forwardEvent("onPointerMove",
n,P)},onPointerEnter:(n,P)=>{var ea;null==(ea=this.onPointerEnter)?void 0:ea.call(this,n,P);this.forwardEvent("onPointerEnter",n,P)},onPointerLeave:(n,P)=>{var ea;null==(ea=this.onPointerLeave)?void 0:ea.call(this,n,P);this.forwardEvent("onPointerLeave",n,P)},onDoubleClick:(n,P)=>{var ea;null==(ea=this.onDoubleClick)?void 0:ea.call(this,n,P);this.forwardEvent("onDoubleClick",n,P)},onKeyDown:(n,P)=>{var ea;this._events.onModifierKey(n,P);null==(ea=this.onKeyDown)?void 0:ea.call(this,n,P);this.forwardEvent("onKeyDown",
n,P)},onKeyUp:(n,P)=>{var ea;this._events.onModifierKey(n,P);null==(ea=this.onKeyUp)?void 0:ea.call(this,n,P);this.forwardEvent("onKeyUp",n,P)},onPinchStart:(n,P)=>{var ea;null==(ea=this.onPinchStart)?void 0:ea.call(this,n,P);this.forwardEvent("onPinchStart",n,P)},onPinch:(n,P)=>{var ea;null==(ea=this.onPinch)?void 0:ea.call(this,n,P);this.forwardEvent("onPinch",n,P)},onPinchEnd:(n,P)=>{var ea;null==(ea=this.onPinchEnd)?void 0:ea.call(this,n,P);this.forwardEvent("onPinchEnd",n,P)},onModifierKey:(n,
P)=>{switch(P.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(n,P)}}});pb(this,"onEnter");pb(this,"onExit");pb(this,"onTransition");pb(this,"onPointerDown");pb(this,"onPointerUp");pb(this,"onPointerMove");pb(this,"onPointerEnter");pb(this,"onPointerLeave");pb(this,"onDoubleClick");pb(this,"onKeyDown");pb(this,"onKeyUp");pb(this,"onPinchStart");pb(this,"onPinch");pb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;
this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=a}};pb(Nt,"id");pb(Nt,"shortcuts");Ae([Ef],Nt.prototype,"currentState",2);Ae([ph],Nt.prototype,"setCurrentState",
1);var vx=class extends Nt{constructor(a,d){var n,P;super();pb(this,"_root");pb(this,"_parent");pb(this,"children",new Map([]));pb(this,"registerStates",ea=>{ea.forEach(ka=>this.children.set(ka.id,new ka(this,this._root)));return this});pb(this,"deregisterStates",ea=>{ea.forEach(ka=>{var sa;null==(sa=this.children.get(ka.id))?void 0:sa.dispose();this.children.delete(ka.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(n=this.initial)?
n:this.states[0].id,n=this.children.get(a))&&(this.setCurrentState(n),null==(P=this.currentState)?void 0:P._events.onEnter({fromId:"initial"}));fd(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};pb(vx,"cursor");var Jr=class extends vx{constructor(){super(...arguments);pb(this,"isLocked",!1);pb(this,"previous");pb(this,"onEnter",({fromId:a})=>{this.previous=
a;this.cursor&&this.app.cursors.setCursor(this.cursor)});pb(this,"onTransition",a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},tj=class extends vx{get app(){return this.root}get tool(){return this.parent}},Vz=class extends tj{constructor(){super(...arguments);pb(this,"cursor","crosshair");pb(this,"creatingShape");pb(this,"aspectRatio");pb(this,"initialBounds",
{});pb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:n}}=this.app;var {Shape:P}=this.tool;P=new P({id:tk(),type:P.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:De.abs(De.sub(n,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};P.canChangeAspectRatio||(P.aspectRatio?(this.aspectRatio=P.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=
1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=P;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(P);this.app.setSelectedShapes([P])});pb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:d}=this,{currentPoint:n,originPoint:P,shiftKey:ea}=this.app.inputs;a=ea||this.creatingShape.props.isAspectRatioLocked||
!this.creatingShape.canChangeAspectRatio;d=ig.getTransformedBoundingBox(d,"bottom_right_corner",De.sub(n,P),0,a);this.app.settings.snapToGrid&&!a&&(d=ig.snapBoundsToGrid(d,8));this.creatingShape.update({point:[d.minX,d.minY],size:[d.width,d.height]})}});pb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});pb(this,"onKeyDown",(a,d)=>
{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};pb(Vz,"id","creating");var Wz=class extends tj{constructor(){super(...arguments);pb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});pb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});
pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};pb(Wz,"id","idle");var Xz=class extends tj{constructor(){super(...arguments);pb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Yd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});pb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};pb(Xz,"id","pointing");var Nq=class extends Jr{constructor(){super(...arguments);
pb(this,"cursor","crosshair")}};pb(Nq,"id","box");pb(Nq,"states",[Wz,Xz,Vz]);pb(Nq,"initial","idle");var Yz=class extends tj{constructor(){super(...arguments);pb(this,"shape",{});pb(this,"points",[[0,0,.5]]);pb(this,"persistDebounced",Og(this.app.persist,200));pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});pb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:n}=this.tool;var {originPoint:P}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
n){this.shape=n;var {shape:ea}=this;var ka=ea.props.points[ea.props.points.length-1];const La=Yd.sub(P,ea.props.point).concat(null!=(a=P[2])?a:.5);this.points=[...ea.props.points,ka,ka];const Ua=Math.ceil(Yd.dist(ka,P)/16);for(let eb=0,lb=eb/(Ua-1);eb<Ua;eb++){a=this.points;P=a.push;ea=Yd.lrp(ka,La,lb);var sa=ka[2];P.call(a,ea.concat.call(ea,sa+(La[2]-sa)*lb))}this.addNextPoint(La)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ka=P[2])?ka:.5]],this.shape=new d({id:tk(),type:d.id,parentId:this.app.currentPage.id,
point:P.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});pb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:n}=this.app.inputs;Yd.isEqual(n,d)||this.addNextPoint(Yd.sub(d,a.props.point).concat(d[2]))});pb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,
points:this.tool.simplify?Jk.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,n=Yd.min(a,
[0,0]);this.points.push(a);0>n[0]||0>n[1]?(this.points=this.points.map(P=>Yd.sub(P,n).concat(P[2])),d.update({point:Yd.add(d.props.point,n),points:this.points})):d.update({points:this.points})}};pb(Yz,"id","creating");var Zz=class extends tj{constructor(){super(...arguments);pb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};
pb(Zz,"id","idle");var $z=class extends tj{constructor(){super(...arguments);pb(this,"origin",[0,0]);pb(this,"prevDelta",[0,0]);pb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});pb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});pb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};pb($z,"id","pinching");var Su=class extends Jr{constructor(){super(...arguments);pb(this,"cursor","crosshair");pb(this,"simplify",!0);pb(this,"simplifyTolerance",
1);pb(this,"previousShape");pb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};pb(Su,"id","draw");pb(Su,"states",[Zz,Yz,$z]);pb(Su,"initial","idle");var aA=class extends tj{constructor(){super(...arguments);pb(this,"points",[[0,0,.5]]);pb(this,"hitShapes",new Set);pb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});pb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;Yd.isEqual(d,a)||(this.points.push(a),
this.app.shapesInViewport.filter(n=>n.hitTestLineSegment(d,a)).forEach(n=>this.hitShapes.add(n)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});pb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};pb(aA,"id","erasing");var bA=class extends tj{constructor(){super(...arguments);pb(this,"onPointerDown",
(a,d)=>{a.order||this.tool.transition("pointing")});pb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};pb(bA,"id","idle");var cA=class extends tj{constructor(){super(...arguments);pb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>
d.hitTestPoint(a)))});pb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Yd.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});pb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};pb(cA,"id","pointing");var Xv=class extends Jr{constructor(){super(...arguments);pb(this,"cursor","crosshair")}};pb(Xv,"id","erase");pb(Xv,"states",[bA,cA,aA]);pb(Xv,
"initial","idle");var wx=class extends tj{constructor(){super(...arguments);pb(this,"handle",{});pb(this,"handleId","end");pb(this,"currentShape",{});pb(this,"initialShape",{});pb(this,"bindableShapeIds",[]);pb(this,"startBindingShapeId");pb(this,"newStartBindingId","");pb(this,"draggedBindingId","");pb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:n,currentPoint:P,modKey:ea,altKey:ka},settings:{snapToGrid:sa}}=this.app;var La=this.app.getShapeById(this.initialShape.id),
{handles:Ua}=this.initialShape,eb=this.handleId,lb="start"===this.handleId?"end":"start";if(!De.isEqual(d,P)){var rb=De.sub(P,n);if(a){var Vb=Ua[lb].point,Zb=De.add(Ua[eb].point,rb),Tb=De.angle(Vb,Zb);Vb=De.rotWith(Zb,Vb,xm.snapAngleToSegments(Tb,24)-Tb);rb=De.add(rb,De.sub(Vb,Zb))}rb=De.add(Ua[eb].point,rb);Ua={[eb]:$f(Ie({},Ua[eb]),{point:sa?De.snap(rb,8):De.toFixed(rb),bindingId:void 0})};var sc=this.currentShape.getHandlesChange(this.initialShape,Ua);if(sc){Ua=Kj(La.props,sc);var Kc={},fc;eb=
Ua.handles[eb];lb=Ua.handles[lb];if(this.startBindingShapeId){var zc;if(rb=this.app.getShapeById(this.startBindingShapeId)){Zb=rb.getCenter();Vb=Ua.handles.end;var vc=De.add(Ua.handles.start.point,Ua.point);De.isEqual(vc,Zb)&&vc[1]++;Tb=rb.hitTestPoint(P);vc=De.uni(De.sub(vc,Zb));const $c=void 0!==this.app.currentPage.bindings[this.newStartBindingId];ea||rb.hitTestPoint(De.add(Ua.point,Vb.point))||(zc=Oc(La.props,rb,"start",this.newStartBindingId,Zb,Zb,vc,Tb));zc&&!$c?(Kc[this.newStartBindingId]=
zc,Ua.handles.start.bindingId=zc.id):!zc&&$c&&(console.log("removing start binding"),delete Kc[this.newStartBindingId],Ua.handles.start.bindingId=void 0)}}if(!ea){zc=De.add(lb.point,Ua.point);lb=De.add(eb.point,Ua.point);eb=De.uni(De.sub(lb,zc));const $c=De.add(Ua.point,Ua.handles.start.point),ed=De.add(Ua.point,Ua.handles.end.point);rb=this.bindableShapeIds.map(Wd=>this.app.getShapeById(Wd)).sort((Wd,me)=>me.nonce-Wd.nonce).filter(Wd=>![$c,ed].every(me=>Wd.hitTestPoint(me)));for(const Wd of rb)if(fc=
Oc(La.props,Wd,this.handleId,this.draggedBindingId,lb,zc,eb,ka))break}fc?(Kc[this.draggedBindingId]=fc,Ua=Kj(Ua,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(La=La.props.handles[this.handleId].bindingId,void 0!==La&&(delete Kc[La],Ua=Kj(Ua,{handles:{[this.handleId]:{bindingId:void 0}}})));sc=this.currentShape.getHandlesChange(Ua,Ua.handles);Gc(()=>{var $c;if(sc){this.currentShape.update(sc);this.app.currentPage.updateBindings(Kc);const ed=Object.values(null!=($c=sc.handles)?$c:
{}).map(Wd=>Wd.bindingId).map(Wd=>this.app.currentPage.bindings[Wd]).filter(Boolean).flatMap(Wd=>[Wd.toId,Wd.fromId].filter(Boolean));this.app.setBindingShapes(ed)}})}}});pb(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});pb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),
this.tool.transition("idle")}})}};pb(wx,"id","creating");var dA=class extends wx{constructor(){super(...arguments);pb(this,"onEnter",()=>{var a;this.app.history.pause();this.newStartBindingId=tk();this.draggedBindingId=tk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:n}=this.app.inputs;d=new d($f(Ie({},d.defaultProps),{id:tk(),type:d.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?De.snap(n,8):n,fill:this.app.settings.color,
stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=mc(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);this.app.setSelectedShapes([d]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(P=>this.app.getShapeById(P)).filter(P=>Jk.pointInBounds(n,P.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};pb(dA,"id","creating");
var eA=class extends tj{constructor(){super(...arguments);pb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});pb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});pb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);
break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});pb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};pb(eA,"id","idle");var fA=class extends tj{constructor(){super(...arguments);pb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Yd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};
pb(fA,"id","pointing");var Yv=class extends Jr{constructor(){super(...arguments);pb(this,"cursor","crosshair")}};pb(Yv,"id","line");pb(Yv,"states",[eA,fA,dA]);pb(Yv,"initial","idle");var gA=class extends tj{constructor(){super(...arguments);pb(this,"cursor","crosshair");pb(this,"creatingShape");pb(this,"aspectRatio");pb(this,"initialBounds",{});pb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:n}=this.tool,P=new n({id:tk(),type:n.id,parentId:a.id,point:[...d],text:"",
size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=P;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);Gc(()=>{this.app.currentPage.addShapes(P);const ea=this.app.settings.snapToGrid?De.snap([...d],8):d,{bounds:ka}=P;P.update({point:De.sub(ea,[ka.width/2,ka.height/2])});this.app.transition("select");this.app.setSelectedShapes([P]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};
pb(gA,"id","creating");var hA=class extends tj{constructor(){super(...arguments);pb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});pb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};pb(hA,"id","idle");var Zv=class extends Jr{constructor(){super(...arguments);
pb(this,"cursor","crosshair")}};pb(Zv,"id","box");pb(Zv,"states",[hA,gA]);pb(Zv,"initial","idle");var EE=gg(Am()),FE=class extends EE.default{constructor(){super(...arguments);pb(this,"toBBox",a=>a.rotatedBounds)}},iA=class extends tj{constructor(){super(...arguments);pb(this,"initialSelectedIds",[]);pb(this,"initialSelectedShapes",[]);pb(this,"tree",new FE);pb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:n}=this.app;this.initialSelectedIds=Array.from(n.values());this.initialSelectedShapes=
Array.from(a.values());this.tree.load(d.shapes)});pb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});pb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:n,currentPoint:P}}=this.app,ea=ig.getBoundsFromPoints([P,n],0);this.app.setBrush(ea);const ka=[...(new Set(this.tree.search(ea).filter(sa=>d?ig.boundsContain(ea,sa.rotatedBounds):sa.hitTestBounds(ea)).filter(sa=>"group"!==sa.type).map(sa=>{var La;return null!=(La=this.app.getParentGroup(sa))?
La:sa})))];a?ka.every(sa=>this.initialSelectedShapes.includes(sa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(sa=>!ka.includes(sa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...ka]))]):this.app.setSelectedShapes(ka);this.app.viewport.panToPointWhenNearBounds(P)});pb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});pb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),
this.tool.transition("idle")}})}};pb(iA,"id","brushing");var jA=class extends tj{constructor(){super(...arguments);pb(this,"onEnter",a=>{var d;const {selectedIds:n,inputs:{shiftKey:P}}=this.app;if("shape"===a.type&&!n.has(a.shape.id)){const ea=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;P?this.app.setSelectedShapes([...Array.from(n.values()),ea.id]):this.app.setSelectedShapes([ea])}});pb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};pb(jA,"id","contextMenu");var kA=class extends tj{constructor(){super(...arguments);
pb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});pb(this,"onExit",()=>{});pb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});pb(this,"onPointerDown",(a,d)=>{const {selectedShapes:n,inputs:{ctrlKey:P}}=this.app;
if(2===d.button)this.tool.transition("contextMenu",a);else if(P)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(n.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:ea,inputs:ka}=this.app;
ea&&Jk.pointInBounds(ka.currentPoint,ea)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",a);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",Ie(Ie({},d),a))}});pb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})});pb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});pb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&
!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};pb(kA,"id","idle");var lA=class extends tj{constructor(){super(...arguments);pb(this,"onEnter",a=>{var d;const {selectedIds:n,inputs:{shiftKey:P}}=this.app,ea=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;P?this.app.setSelectedShapes([...Array.from(n.values()),ea.id]):this.app.setSelectedShapes([ea])});pb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<Yd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});pb(this,"onPointerUp",()=>{this.tool.transition("idle")});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};pb(lA,"id","pointingShape");var mA=class extends tj{constructor(){super(...arguments);pb(this,"cursor","move");pb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Yd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
pb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};pb(mA,"id","pointingBoundsBackground");var nA=class extends tj{constructor(){super(...arguments);pb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});pb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<Yd.dist(a,d)&&this.tool.transition("brushing")});pb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});pb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};pb(nA,"id","pointingCanvas");var oA=class extends tj{constructor(){super(...arguments);pb(this,"cursor","move");pb(this,
"isCloning",!1);pb(this,"didClone",!1);pb(this,"initialPoints",{});pb(this,"initialShapePoints",{});pb(this,"initialClonePoints",{});pb(this,"clones",[]);pb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,inputs:n}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(d.map(({id:P,props:{point:ea}})=>[P,ea.slice()]));document.querySelectorAll("input,textarea").forEach(P=>P.blur());null==(a=document.getSelection())?void 0:a.empty();n.altKey?this.startCloning():
this.moveSelectedShapesToPointer()});pb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});pb(this,"onPointerMove",()=>{const {inputs:{currentPoint:a}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});pb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});pb(this,"onPointerUp",()=>{this.app.history.resume();
this.app.persist();this.tool.transition("idle")});pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(n=>{n.update({point:this.initialPoints[n.id]})}),this.tool.transition("idle")}});pb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:n,allSelectedShapes:P}=this.app;n.removeShapes(...P);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));
this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:n}}=this.app,{initialPoints:P}=this,ea=Yd.sub(n,d);a&&(Math.abs(ea[0])<Math.abs(ea[1])?ea[0]=0:ea[1]=0);Gc(()=>{this.app.allSelectedShapesArray.filter(ka=>!ka.props.isLocked).forEach(ka=>{let sa=Yd.add(P[ka.id],ea);this.app.settings.snapToGrid&&(sa=Yd.snap(sa,8));ka.update({point:sa})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>
{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d($f(Ie({},a.serialized),{id:tk(),type:a.type,point:this.initialPoints[a.id],rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);
this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};pb(oA,"id","translating");var pA=class extends tj{constructor(){super(...arguments);pb(this,"pointedSelectedShape");pb(this,"onEnter",a=>{this.pointedSelectedShape=a.shape});pb(this,"onExit",()=>{this.pointedSelectedShape=void 0});pb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Yd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
pb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:n}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:n}=this.app),n=Array.from(n.values()),n.splice(n.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(n);else{if(1===n.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof Dn&&Jk.pointInBounds(d,
this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};pb(pA,"id","pointingSelectedShape");var qA=class extends tj{constructor(){super(...arguments);pb(this,"info",{});pb(this,"onEnter",a=>{this.info=a;this.updateCursor()});pb(this,"onExit",()=>{this.app.cursors.reset()});
pb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Yd.dist(a,d)&&this.tool.transition("resizing",this.info)});pb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(wt[this.info.handle],this.app.selectionBounds.rotation)}};pb(qA,"id","pointingResizeHandle");var rA=class extends tj{constructor(){super(...arguments);
pb(this,"isSingle",!1);pb(this,"handle","bottom_right_corner");pb(this,"snapshots",{});pb(this,"initialCommonBounds",{});pb(this,"selectionRotation",0);pb(this,"resizeType","corner");pb(this,"onEnter",a=>{var d,n;const {history:P,selectedShapesArray:ea,selectionBounds:ka}=this.app;if(!ka)throw Error("Expected a selected bounds.");this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";
this.app.cursors.setCursor(rA.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);P.pause();const sa=ig.getBoundsFromPoints(ea.map(La=>ig.getBoundsCenter(La.bounds)));this.selectionRotation=(this.isSingle=1===ea.length)?null!=(n=ea[0].props.rotation)?n:0:0;this.initialCommonBounds=Ie({},ka);this.snapshots=Object.fromEntries(ea.map(La=>{const Ua=Ie({},La.bounds),[eb,lb]=ig.getBoundsCenter(Ua);return[La.id,{props:La.serialized,bounds:Ua,transformOrigin:[(eb-this.initialCommonBounds.minX)/
this.initialCommonBounds.width,(lb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(eb-sa.minX)/sa.width,(lb-sa.minY)/sa.height],isAspectRatioLocked:La.props.isAspectRatioLocked||!(La.canChangeAspectRatio&&!La.props.rotation)}]}));ea.forEach(La=>{var Ua;null==(Ua=La.onResizeStart)?void 0:Ua.call(La,{isSingle:this.isSingle})})});pb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});
pb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:n,originPoint:P,currentPoint:ea}}=this.app,{handle:ka,snapshots:sa,initialCommonBounds:La}=this;let Ua=Yd.sub(ea,P);a&&(Ua=Yd.mul(Ua,2));const eb=this.app.selectedShapes.values().next().value;let lb=ig.getTransformedBoundingBox(La,ka,Ua,this.selectionRotation,d||this.isSingle&&(n?!("clipping"in eb.props):!eb.canChangeAspectRatio||eb.props.isAspectRatioLocked));a&&(lb=Ie(Ie({},lb),ig.centerBounds(lb,ig.getBoundsCenter(La))));const {scaleX:rb,
scaleY:Vb}=lb;this.app.selectedShapes.forEach(Zb=>{var Tb,sc;const {isAspectRatioLocked:Kc,props:fc,bounds:zc,transformOrigin:vc}=sa[Zb.id];let $c=ig.getRelativeTransformedBoundingBox(lb,La,zc,0>rb,0>Vb);if(Zb.canResize.some(me=>me)||Zb.props.isSizeLocked||!this.isSingle){var ed=[rb,Vb],Wd=null!=(Tb=fc.rotation)?Tb:0;Tb=ig.getBoundsCenter($c);Zb.canFlip||(ed=Yd.abs(ed));Zb.canScale||(ed=null!=(sc=fc.scale)?sc:[1,1]);if(Wd&&0>rb&&0<=Vb||0>Vb&&0<=rb)Wd*=-1;this.app.settings.snapToGrid&&!Kc&&($c=ig.snapBoundsToGrid($c,
8));Zb.onResize(fc,{center:Tb,rotation:Wd,scale:ed,bounds:$c,type:ka,clip:n,transformOrigin:vc})}});this.updateCursor(rb,Vb);this.app.viewport.panToPointWhenNearBounds(ea)});pb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(Ie({},this.snapshots[n.id].props))}),this.tool.transition("idle")}})}updateCursor(a,d){var n,P,ea,ka;const sa=0>a&&0<=d;a=0>
d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":sa||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(n=this.app.selectionBounds)?void 0:n.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(P=this.app.selectionBounds)?void 0:P.rotation);break;case "top_right_corner":case "bottom_left_corner":sa||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==
(ea=this.app.selectionBounds)?void 0:ea.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ka=this.app.selectionBounds)?void 0:ka.rotation)}}},xx=rA;pb(xx,"id","resizing");pb(xx,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var sA=class extends tj{constructor(){super(...arguments);
pb(this,"cursor","rotate");pb(this,"handle","");pb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});pb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Yd.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});pb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(wt[this.handle],
this.app.selectionRotation)}};pb(sA,"id","pointingRotateHandle");var tA=class extends tj{constructor(){super(...arguments);pb(this,"info",{});pb(this,"onEnter",a=>{this.info=a});pb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Yd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});pb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};pb(tA,"id","pointingShapeBehindBounds");var yx=class extends tj{constructor(){super(...arguments);pb(this,"cursor","rotate");pb(this,"snapshot",{});pb(this,"initialCommonCenter",[0,0]);pb(this,"initialCommonBounds",{});pb(this,"initialAngle",0);pb(this,"initialSelectionRotation",0);pb(this,"handle","");pb(this,"onEnter",a=>{const {history:d,selectedShapesArray:n,selectionBounds:P}=this.app;
if(!P)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=Ie({},P);this.initialCommonCenter=ig.getBoundsCenter(P);this.initialAngle=Yd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(n.map(ea=>[ea.id,{point:[...ea.props.point],center:[...ea.center],rotation:ea.props.rotation,handles:"handles"in ea?Rs(ea.handles):void 0}]));this.updateCursor()});pb(this,
"onExit",()=>{this.app.history.resume();this.snapshot={}});pb(this,"onPointerMove",()=>{const {selectedShapes:a,inputs:{shiftKey:d,currentPoint:n}}=this.app,{snapshot:P,initialCommonCenter:ea,initialAngle:ka,initialSelectionRotation:sa}=this;let La=Yd.angle(ea,n)-ka;d&&(La=xm.snapAngleToSegments(La,24));a.forEach(eb=>{var lb=P[eb.id];let rb=0;if(d){var {rotation:Vb=0}=lb;rb=xm.snapAngleToSegments(Vb,24)-Vb}const Zb=Yd.sub(lb.center,lb.point);Vb=Yd.rotWith(lb.center,ea,La);if("handles"in eb){lb=lb.handles;
const Tb=lb.map(Kc=>Yd.rotWith(Kc.point,Zb,La)),sc=ig.getCommonTopLeft(Tb);eb.update({point:Yd.add(sc,Yd.sub(Vb,Zb)),handles:lb.map((Kc,fc)=>$f(Ie({},Kc),{point:Yd.sub(Tb[fc],sc)}))})}else eb.update({point:Yd.sub(Vb,Zb),rotation:xm.clampRadians((lb.rotation||0)+La+rb)})});const Ua=xm.clampRadians(sa+La);this.app.setSelectionRotation(d?xm.snapAngleToSegments(Ua,24):Ua);this.updateCursor()});pb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});pb(this,
"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(this.snapshot[n.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(wt[this.handle],this.app.selectionRotation)}};pb(yx,"id","rotating");var uA=class extends tj{constructor(){super(...arguments);pb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});pb(this,"onPinchEnd",()=>{this.tool.transition("idle")});pb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
pb(uA,"id","pinching");var vA=class extends wx{constructor(){super(...arguments);pb(this,"cursor","grabbing");pb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=tk();this.draggedBindingId=tk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=mc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};pb(vA,"id","translatingHandle");var wA=class extends tj{constructor(){super(...arguments);
pb(this,"cursor","grabbing");pb(this,"info",{});pb(this,"onEnter",a=>{this.info=a});pb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Yd.dist(a,d)&&this.tool.transition("translatingHandle",this.info)});pb(this,"onPointerUp",()=>{this.tool.transition("idle")});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};pb(wA,"id","pointingHandle");var xA=class extends tj{constructor(){super(...arguments);pb(this,"handle");pb(this,"onEnter",
a=>{var d;this.app.cursors.setCursor(wt[a.handle],null!=(d=this.app.selectionBounds.rotation)?d:0);this.handle=a.handle});pb(this,"onExit",()=>{this.app.cursors.reset()});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});pb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
a);break;default:this.tool.transition("pointingResizeHandle",a)}}});pb(this,"onPointerLeave",()=>{this.tool.transition("idle")});pb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var n=this.app.selectedShapes.values().next().value;if(!n.canEdit||this.app.readOnly||n.props.isLocked)n.onResetBounds({asset:n.props.assetId?this.app.assets[n.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":null==(d=n.onResetBounds)?void 0:d.call(n,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:n})}}})}};pb(xA,"id","hoveringSelectionHandle");var yA=class extends tj{constructor(){super(...arguments);pb(this,"editingShape",{});pb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});pb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=
this.editingShape.props.text.trim();""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});pb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",
a);break;case "canvas":a.order||this.tool.transition("idle",a)}});pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":Gc(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};pb(yA,"id","editingShape");var zA=class extends tj{constructor(){super(...arguments);pb(this,"minimapZoom",1);pb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});pb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");
var n=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(d&&n){const P=d.getBoundingClientRect();this.minimapRect.height=P.height;this.minimapRect.width=P.width;this.minimapRect.minX=P.left;this.minimapRect.minY=P.top;this.minimapRect.maxX=P.right;this.minimapRect.maxY=P.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=Yd.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);n=n.getBoundingClientRect();n=Yd.mul(Yd.sub(a,[n.left+n.width/2,n.top+n.height/
2]),this.minimapZoom);return Yd.sub(this.app.viewport.camera.point,n)}});pb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});pb(this,"onPointerMove",(a,d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});pb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};pb(zA,"id","pointingMinimap");var Ot=class extends Jr{constructor(){super(...arguments);pb(this,"returnTo",
"");pb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};pb(Ot,"id","select");pb(Ot,"initial","idle");pb(Ot,"shortcut","whiteboard/select");pb(Ot,"states",[kA,iA,jA,nA,lA,tA,pA,mA,xA,qA,sA,zA,wA,vA,oA,xx,yx,yx,uA,yA]);var AA=class extends tj{constructor(){super(...arguments);pb(this,"cursor","grabbing");pb(this,"originalScreenPoint",[]);pb(this,"originalCameraPoint",[]);pb(this,"prevState","idle");pb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=
this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});pb(this,"onPointerMove",(a,d)=>{a=De.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:De.sub(this.originalCameraPoint,De.div(a,this.app.viewport.camera.zoom))})});pb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};pb(AA,"id","panning");var BA=class extends tj{constructor(){super(...arguments);pb(this,"onEnter",a=>{this.parent.prevTool&&
a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});pb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};pb(BA,"id","idle");var CA=class extends tj{constructor(){super(...arguments);pb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});pb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};pb(CA,
"id","idleHold");var DA=class extends tj{constructor(){super(...arguments);pb(this,"origin",[0,0]);pb(this,"prevDelta",[0,0]);pb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});pb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});pb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};pb(DA,"id","pinching");var Pt=class extends Jr{constructor(){super(...arguments);pb(this,"cursor","grab");pb(this,"prevTool",null);pb(this,"onEnter",a=>{this.prevTool=
null==a?void 0:a.prevTool});pb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});pb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};pb(Pt,"id","move");pb(Pt,"shortcut","whiteboard/pan");pb(Pt,"states",[BA,CA,AA,DA]);pb(Pt,"initial","idle");var Em=class{constructor(a,d={}){pb(this,"lastShapesNounces",null);pb(this,"app");pb(this,"id");pb(this,"name");pb(this,"shapes",[]);pb(this,"bindings",{});pb(this,"nonce",0);pb(this,"bringForward",
(La,Ua)=>{const eb=this.parseShapesArg(La);eb.sort((lb,rb)=>this.shapes.indexOf(rb)-this.shapes.indexOf(lb)).map(lb=>this.shapes.indexOf(lb)).forEach(lb=>{if(lb!==this.shapes.length-1&&!eb.includes(this.shapes[lb+1])){var rb=this.shapes[lb];this.shapes[lb]=this.shapes[lb+1];this.shapes[lb+1]=rb}});Ua||this.app.persist();return this});pb(this,"sendBackward",La=>{const Ua=this.parseShapesArg(La);Ua.sort((eb,lb)=>this.shapes.indexOf(eb)-this.shapes.indexOf(lb)).map(eb=>this.shapes.indexOf(eb)).forEach(eb=>
{if(0!==eb&&!Ua.includes(this.shapes[eb-1])){var lb=this.shapes[eb];this.shapes[eb]=this.shapes[eb-1];this.shapes[eb-1]=lb}});this.app.persist();return this});pb(this,"bringToFront",La=>{const Ua=this.parseShapesArg(La);this.shapes=this.shapes.filter(eb=>!Ua.includes(eb)).concat(Ua);this.app.persist();return this});pb(this,"sendToBack",La=>{const Ua=this.parseShapesArg(La);this.shapes=Ua.concat(this.shapes.filter(eb=>!Ua.includes(eb)));this.app.persist();return this});pb(this,"flip",(La,Ua)=>{La=
this.parseShapesArg(La);const eb=ig.getCommonBounds(La.map(lb=>lb.bounds));La.forEach(lb=>{var rb;const Vb=ig.getRelativeTransformedBoundingBox(eb,eb,lb.bounds,"horizontal"===Ua,"vertical"===Ua);if(lb.serialized)lb.onResize(lb.serialized,{bounds:Vb,center:ig.getBoundsCenter(Vb),rotation:null!=(rb=lb.props.rotation)?rb:-0,type:"top_left_corner",scale:lb.canFlip&&lb.props.scale?"horizontal"===Ua?[-lb.props.scale[0],1]:[1,-lb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();
return this});pb(this,"getShapeById",La=>this.shapes.find(Ua=>Ua.id===La));pb(this,"cleanup",La=>{La=dc(this.bindings,La);const Ua=new Set;let eb=!1;const lb=Rs(this.bindings);La.forEach(rb=>{var Vb;if(this.bindings[rb.id]){var Zb=this.getShapeById(rb.toId),Tb=this.getShapeById(rb.fromId);Zb&&Tb?Ua.has(Tb.id)||(rb=this.updateArrowBindings(Tb),Ua.add(Tb.id),rb&&(Zb=Ie(Ie({},Tb.props),rb),null==(Vb=this.getShapeById(Zb.id))?void 0:Vb.update(Zb,!1,(0,WE.default)(null==rb?void 0:rb.handles,null==Tb?void 0:
Tb.props.handles)))):(delete lb[rb.id],eb=!0)}});Object.keys(lb).forEach(rb=>{const Vb=this.bindings[rb];0===this.shapes.filter(Zb=>Zb.id===Vb.fromId||Zb.id===Vb.toId).length&&(delete lb[rb],eb=!0)});eb&&this.update({bindings:lb})});pb(this,"updateArrowBindings",La=>{var Ua,eb,lb,rb={start:Rs(La.props.handles.start),end:Rs(La.props.handles.end)},Vb={isBound:!1,handle:La.props.handles.start,point:De.add(La.props.handles.start.point,La.props.point)},Zb={isBound:!1,handle:La.props.handles.end,point:De.add(La.props.handles.end.point,
La.props.point)};if(La.props.handles.start.bindingId){var Tb=void 0!==(null==(Ua=La.props.decorations)?void 0:Ua.start);Ua=La.props.handles.start;var sc=this.bindings[La.props.handles.start.bindingId],Kc=this.getShapeById(null==sc?void 0:sc.toId);if(Kc){Vb=Kc.getBounds();var fc=Kc.getExpandedBounds(),zc=ig.expandBounds(Vb,Tb?sc.distance:1);const {minX:vc,minY:$c,width:ed,height:Wd}=fc,me=De.add([vc,$c],De.mulV([ed,Wd],De.rotWith(sc.point,[.5,.5],Kc.props.rotation||0)));Vb={isBound:!0,hasDecoration:Tb,
binding:sc,handle:Ua,point:me,target:Kc,bounds:Vb,expandedBounds:fc,intersectBounds:zc,center:Kc.getCenter()}}}if(La.props.handles.end.bindingId&&(Tb=void 0!==(null==(eb=La.props.decorations)?void 0:eb.end),eb=La.props.handles.end,Ua=this.bindings[La.props.handles.end.bindingId],sc=this.getShapeById(null==Ua?void 0:Ua.toId))){Zb=sc.getBounds();Kc=sc.getExpandedBounds();fc=Tb?ig.expandBounds(Zb,Ua.distance):Zb;const {minX:vc,minY:$c,width:ed,height:Wd}=Kc;zc=De.add([vc,$c],De.mulV([ed,Wd],De.rotWith(Ua.point,
[.5,.5],sc.props.rotation||0)));Zb={isBound:!0,hasDecoration:Tb,binding:Ua,handle:eb,point:zc,target:sc,bounds:Zb,expandedBounds:Kc,intersectBounds:fc,center:sc.getCenter()}}for(const vc of["end","start"]){eb="start"===vc?Vb:Zb;const $c="start"===vc?Zb:Vb;if(eb.isBound)if(eb.binding.distance){if(Tb=De.uni(De.sub(eb.point,$c.point)),Ua=C($c.point,Tb,eb.intersectBounds,eb.target.props.rotation).filter(ed=>ed.didIntersect).map(ed=>ed.points[0]).sort((ed,Wd)=>De.dist(ed,$c.point)-De.dist(Wd,$c.point)),
Ua[0])if(sc=void 0,$c.isBound&&(sc=C($c.point,Tb,$c.intersectBounds,$c.target.props.rotation).filter(ed=>ed.didIntersect).map(ed=>ed.points[0]).sort((ed,Wd)=>De.dist(ed,$c.point)-De.dist(Wd,$c.point))[0]),$c.isBound&&(2>Ua.length||sc&&Ua[0]&&10>Math.ceil(De.dist(Ua[0],sc))||ig.boundsContain(eb.expandedBounds,$c.expandedBounds)||ig.boundsCollide(eb.expandedBounds,$c.expandedBounds)))Tb=De.uni(De.sub($c.point,eb.point)),Ua=C(eb.point,Tb,eb.bounds,eb.target.props.rotation).filter(ed=>ed.didIntersect).map(ed=>
ed.points[0]),Ua[0]&&(rb[vc].point=De.toFixed(De.sub(Ua[0],La.props.point)),rb["start"===vc?"end":"start"].point=De.toFixed(De.add(De.sub(Ua[0],La.props.point),De.mul(Tb,Math.min(De.dist(Ua[0],$c.point),10*(ig.boundsContain($c.bounds,eb.intersectBounds)?-1:1))))));else{if(!$c.isBound&&(Ua[0]&&10>De.dist(Ua[0],$c.point)||Jk.pointInBounds($c.point,eb.intersectBounds)))return rb=De.uni(De.sub(eb.center,$c.point)),null==(lb=La.getHandlesChange)?void 0:lb.call(La,La.props,{[vc]:$f(Ie({},La.props.handles[vc]),
{point:De.toFixed(De.add(De.sub($c.point,La.props.point),De.mul(rb,10)))})});Ua[0]&&(rb[vc].point=De.toFixed(De.sub(Ua[0],La.props.point)))}}else rb[vc].point=De.sub(eb.point,La.props.point)}return La.getHandlesChange(La.props,rb)});const {id:n,name:P,shapes:ea=[],bindings:ka={},nonce:sa}=d;this.id=n;this.name=P;this.bindings=Object.assign({},ka);this.app=a;this.nonce=sa||0;this.addShapes(...ea);fd(this);tc(()=>{const La=0<this.shapes.length?Object.fromEntries(this.shapes.map(Ua=>[Ua.id,Ua.nonce])):
null;if(this.lastShapesNounces&&La){const Ua=this.lastShapesNounces,eb=[...(new Set([...Object.keys(La),...Object.keys(Ua)]))].filter(lb=>Ua[lb]!==La[lb]);requestAnimationFrame(()=>{this.cleanup(eb)})}La&&(this.lastShapesNounces=La)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>mc(a)),bindings:Rs(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,
a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,n)=>a.indexOf(d.id)-a.indexOf(n.id));return this}addShapes(...a){if(0!==a.length)return a="getBounds"in a[0]?a:a.map(d=>new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(n=>!d.includes(n));return d}getBindableShapes(){return this.shapes.filter(a=>
a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};Ae([Ef],Em.prototype,"id",2);Ae([Ef],Em.prototype,"name",2);Ae([Ef],Em.prototype,"shapes",2);Ae([Ef],Em.prototype,"bindings",2);Ae([pg],Em.prototype,"serialized",1);Ae([pg],Em.prototype,"shapesById",1);Ae([Ef],Em.prototype,"nonce",2);Ae([ph],Em.prototype,"update",1);Ae([ph],Em.prototype,"updateBindings",1);Ae([ph],Em.prototype,"updateShapesIndex",1);Ae([ph],Em.prototype,"addShapes",1);Ae([ph],Em.prototype,"removeShapes",1);Ae([ph],Em.prototype,
"bringForward",2);Ae([ph],Em.prototype,"sendBackward",2);Ae([ph],Em.prototype,"bringToFront",2);Ae([ph],Em.prototype,"sendToBack",2);Ae([ph],Em.prototype,"cleanup",2);var $k=class{constructor(){pb(this,"shiftKey",!1);pb(this,"ctrlKey",!1);pb(this,"modKey",!1);pb(this,"altKey",!1);pb(this,"spaceKey",!1);pb(this,"isPinching",!1);pb(this,"currentScreenPoint",[0,0]);pb(this,"currentPoint",[0,0]);pb(this,"previousScreenPoint",[0,0]);pb(this,"previousPoint",[0,0]);pb(this,"originScreenPoint",[0,0]);pb(this,
"originPoint",[0,0]);pb(this,"pointerIds",new Set);pb(this,"state","idle");pb(this,"containerOffset",[0,0]);pb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);this.updateModifiers(d);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});pb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});pb(this,"onPointerUp",(a,d)=>
{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});pb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});pb(this,"onKeyUp",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});pb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});pb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});pb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});
fd(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=De.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=Gb()?a.metaKey:a.ctrlKey))}};Ae([Ef],$k.prototype,"shiftKey",2);Ae([Ef],$k.prototype,"ctrlKey",2);Ae([Ef],$k.prototype,"modKey",2);Ae([Ef],$k.prototype,"altKey",
2);Ae([Ef],$k.prototype,"spaceKey",2);Ae([Ef],$k.prototype,"isPinching",2);Ae([Ef],$k.prototype,"currentScreenPoint",2);Ae([Ef],$k.prototype,"currentPoint",2);Ae([Ef],$k.prototype,"previousScreenPoint",2);Ae([Ef],$k.prototype,"previousPoint",2);Ae([Ef],$k.prototype,"originScreenPoint",2);Ae([Ef],$k.prototype,"originPoint",2);Ae([Ef],$k.prototype,"state",2);Ae([Ef],$k.prototype,"containerOffset",2);Ae([ph],$k.prototype,"updateContainerOffset",1);Ae([ph],$k.prototype,"updateModifiers",1);Ae([ph],$k.prototype,
"onPointerDown",2);Ae([ph],$k.prototype,"onPointerMove",2);Ae([ph],$k.prototype,"onPointerUp",2);Ae([ph],$k.prototype,"onKeyDown",2);Ae([ph],$k.prototype,"onKeyUp",2);Ae([ph],$k.prototype,"onPinchStart",2);Ae([ph],$k.prototype,"onPinch",2);Ae([ph],$k.prototype,"onPinchEnd",2);var GE=(a,d=100)=>-(Math.cos(Math.PI*Yd.clamp(a/d,0,1))-1)/2,Qs=class{constructor(){pb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});pb(this,"camera",{point:[0,0],zoom:1});pb(this,"updateBounds",a=>
{this.bounds=a;return this});pb(this,"panCamera",a=>this.update({point:Yd.sub(this.camera.point,Yd.div(a,this.camera.zoom))}));pb(this,"panToPointWhenNearBounds",a=>{const d=Yd.div([Qs.panThreshold,Qs.panThreshold],this.camera.zoom),n=Yd.sub([this.currentView.maxX,this.currentView.maxY],Yd.add(a,d));a=Yd.sub([this.currentView.minX,this.currentView.minY],Yd.sub(a,d));this.panCamera(Yd.mul([0>n[0]?n[0]:0<a[0]?a[0]:0,0>n[1]?n[1]:0<a[1]?a[1]:0],-Qs.panMultiplier*this.camera.zoom))});pb(this,"update",
({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});pb(this,"getPagePoint",a=>{const {camera:d,bounds:n}=this;return Yd.sub(Yd.div(Yd.sub(a,[n.minX,n.minY]),d.zoom),d.point)});pb(this,"getScreenPoint",a=>{const {camera:d}=this;return Yd.mul(Yd.add(a,d.point),d.zoom)});pb(this,"onZoom",(a,d,n=!1)=>this.pinchZoom(a,[0,0],d,n));pb(this,"pinchZoom",(a,d,n,P=!1)=>{var {camera:ea}=this;d=Yd.sub(ea.point,
Yd.div(d,ea.zoom));n=Yd.clamp(n,Qs.minZoom,Qs.maxZoom);ea=Yd.div(a,ea.zoom);a=Yd.div(a,n);a=Yd.toFixed(Yd.add(d,Yd.sub(a,ea)));P?this.animateCamera({point:a,zoom:n}):this.update({point:a,zoom:n});return this});pb(this,"setZoom",(a,d=!1)=>{const {bounds:n}=this;this.onZoom([n.width/2,n.height/2],a,d)});pb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});pb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});pb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});
pb(this,"animateCamera",({point:a,zoom:d})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/d}));pb(this,"animateToViewport",a=>{const d=performance.now(),n=Ie({},this.currentView),P=()=>{var ea=performance.now()-d;ea=GE(ea);var ka=n.minX+(a.minX-n.minX)*ea;this.update({point:[-ka,-(n.minY+(a.minY-n.minY)*ea)],zoom:this.bounds.width/(n.maxX+(a.maxX-n.maxX)*ea-ka)});1>ea&&requestAnimationFrame(P)};
P()});pb(this,"zoomToBounds",({width:a,height:d,minX:n,minY:P})=>{const {bounds:ea,camera:ka}=this;let sa=Math.min((ea.width-100)/a,(ea.height-100)/d);sa=Math.min(1,Math.max(Qs.minZoom,ka.zoom===sa||1>ka.zoom?Math.min(1,sa):sa));a=Yd.add([-n,-P],[(ea.width-a*sa)/2/sa,(ea.height-d*sa)/2/sa]);this.animateCamera({point:a,zoom:sa})});fd(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:n}}=this,P=a.width/n,ea=a.height/n;return{minX:-d[0],minY:-d[1],maxX:P-d[0],maxY:ea-d[1],width:P,height:ea}}},
gp=Qs;pb(gp,"minZoom",.1);pb(gp,"maxZoom",4);pb(gp,"panMultiplier",.05);pb(gp,"panThreshold",100);Ae([Ef],gp.prototype,"bounds",2);Ae([Ef],gp.prototype,"camera",2);Ae([ph],gp.prototype,"updateBounds",2);Ae([ph],gp.prototype,"update",2);Ae([pg],gp.prototype,"currentView",1);var HE=class{constructor(a){pb(this,"app");pb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});pb(this,"hoverShape",d=>{this.app.setHoveredShape(d);
return this});pb(this,"createShapes",(...d)=>{this.app.createShapes(d);return this});pb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);return this});pb(this,"deleteShapes",(...d)=>{this.app.deleteShapes(d.length?d:this.app.selectedShapesArray);return this});pb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});pb(this,"deselectShapes",(...d)=>{const n="string"===typeof d[0]?d:d.map(P=>P.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(P=>!n.includes(P.id)));
return this});pb(this,"flipHorizontal",(...d)=>{this.app.flipHorizontal(d);return this});pb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);return this});pb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>!this.app.shapesInGroups().includes(d)));return this});pb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});pb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});pb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});
pb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});pb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=ig.getCommonBounds(d.map(n=>n.bounds));this.app.viewport.zoomToBounds(d);return this});pb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=ig.getCommonBounds(d.map(n=>n.bounds));this.app.viewport.update({point:De.add(De.neg(ig.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/
2])});return this});pb(this,"zoomToSelection",()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);return this});pb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:De.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});pb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});pb(this,"toggleSnapToGrid",()=>{const {settings:d}=this.app;d.update({snapToGrid:!d.snapToGrid});
return this});pb(this,"togglePenMode",()=>{const {settings:d}=this.app;d.update({penMode:!d.penMode});return this});pb(this,"setColor",d=>{const {settings:n}=this.app;n.update({color:d});this.app.selectedShapesArray.forEach(P=>{P.props.isLocked||P.update({fill:d,stroke:d})});this.app.persist();return this});pb(this,"setScaleLevel",d=>{const {settings:n}=this.app;n.update({scaleLevel:d});this.app.selectedShapes.forEach(P=>{P.props.isLocked||P.setScaleLevel(d)});this.app.persist();return this});pb(this,
"undo",()=>{this.app.undo();return this});pb(this,"redo",()=>{this.app.redo();return this});pb(this,"persist",()=>{this.app.persist();return this});pb(this,"createNewLineBinding",(d,n)=>this.app.createNewLineBinding(d,n));pb(this,"clone",d=>{if(!this.app.readOnly&&1===this.app.selectedShapesArray.length&&Object.values(Xp).some(Vb=>Vb===this.app.selectedShapesArray[0].type)){var n=this.app.allSelectedShapesArray[0],P=this.app.getShapeClass(n.type),{minX:ea,minY:ka,maxX:sa,maxY:La,width:Ua,height:eb}=
n.bounds,lb=[0,0];switch(d){case "down":lb=[ea,La+100];break;case "up":lb=[ea,ka-100-eb];break;case "left":lb=[ea-100-Ua,ka];break;case "right":lb=[sa+100,ka]}var rb=new P($f(Ie({},n.serialized),{id:tk(),nonce:Date.now(),refs:[],label:"",point:lb}));this.app.history.pause();this.app.currentPage.addShapes(rb);this.app.createNewLineBinding(n,rb);this.app.history.resume();this.app.persist();setTimeout(()=>this.editShape(rb))}});pb(this,"cloneShapes",({shapes:d,assets:n,bindings:P,point:ea=[0,0]})=>{const ka=
ig.getCommonBounds(d.filter(Ua=>"group"!==Ua.type).map(Ua=>{var eb,lb,rb,Vb,Zb,Tb,sc,Kc,fc,zc,vc,$c,ed,Wd,me,Kf;return{minX:null!=(lb=null==(eb=Ua.point)?void 0:eb[0])?lb:ea[0],minY:null!=(Vb=null==(rb=Ua.point)?void 0:rb[1])?Vb:ea[1],width:null!=(Tb=null==(Zb=Ua.size)?void 0:Zb[0])?Tb:4,height:null!=(Kc=null==(sc=Ua.size)?void 0:sc[1])?Kc:4,maxX:(null!=(zc=null==(fc=Ua.point)?void 0:fc[0])?zc:ea[0])+(null!=($c=null==(vc=Ua.size)?void 0:vc[0])?$c:4),maxY:(null!=(Wd=null==(ed=Ua.point)?void 0:ed[1])?
Wd:ea[1])+(null!=(Kf=null==(me=Ua.size)?void 0:me[1])?Kf:4)}})),sa=d.map(Ua=>$f(Ie({},Ua),{id:tk(),point:[ea[0]+Ua.point[0]-ka.minX,ea[1]+Ua.point[1]-ka.minY]}));sa.forEach(Ua=>{var eb;Ua.children&&0<(null==(eb=Ua.children)?void 0:eb.length)&&(Ua.children=Ua.children.map(lb=>{var rb;return null==(rb=sa[d.findIndex(Vb=>Vb.id===lb)])?void 0:rb.id}).filter(pc))});const La=[];sa.flatMap(Ua=>{var eb;return Object.values(null!=(eb=Ua.handles)?eb:{})}).forEach(Ua=>{if(Ua.bindingId){var eb=P[Ua.bindingId];
if(eb){var lb=d.findIndex(Vb=>Vb.id===eb.fromId);const rb=d.findIndex(Vb=>Vb.id===eb.toId);eb&&-1!==lb&&-1!==rb?(lb=$f(Ie({},eb),{id:tk(),fromId:sa[lb].id,toId:sa[rb].id}),La.push(lb),Ua.bindingId=lb.id):Ua.bindingId=void 0}else console.warn("binding not found",Ua.bindingId)}});n=n.filter(Ua=>sa.some(eb=>eb.assetId===Ua.id));return{shapes:sa,assets:n,bindings:La}});pb(this,"getClonedShapesFromTldrString",(d,n)=>{try{{var P;const eb=null==(P=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:
P[1];if(eb){try{var ea=JSON.parse(eb)}catch(lb){ea=null}var ka=ea}else ka=void 0}d=ka;if(!d)return null;const {shapes:sa,bindings:La,assets:Ua}=d;return this.cloneShapes({shapes:sa,bindings:La,assets:Ua,point:n})}catch(sa){console.log(sa)}return null});pb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});pb(this,"addClonedShapes",d=>{const {shapes:n,assets:P,bindings:ea}=d;0<P.length&&this.app.createAssets(P);0<n.length&&this.app.createShapes(n);
this.app.currentPage.updateBindings(Object.fromEntries(ea.map(ka=>[ka.id,ka])));this.app.selectedTool.transition("idle");return this});pb(this,"addClonedShapesFromTldrString",(d,n)=>{(d=this.getClonedShapesFromTldrString(d,n))&&this.addClonedShapes(d);return this});pb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var n=[...d.filter(P=>"group"===P.type),...d.map(P=>this.app.getParentGroup(P))].filter(pc);this.app.currentPage.removeShapes(...n);d=d.filter(P=>"group"!==
P.type);1<d.length&&(n=this.app.getShapeClass("group"),n=new n({id:tk(),type:n.id,parentId:this.app.currentPage.id,children:d.map(P=>P.id)}),this.app.currentPage.addShapes(n),this.app.setSelectedShapes([n]),this.app.bringForward(d,!0));this.app.persist()}});pb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(P=>"group"===P.type),...d.map(P=>this.app.getParentGroup(P))].filter(pc);var n=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),
this.app.persist(),this.app.setSelectedShapes(n))}});pb(this,"convertShapes",(d,n=this.app.allSelectedShapesArray)=>{const P=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...n);n=n.map(ea=>new P($f(Ie({},ea.serialized),{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...n);this.app.persist();this.app.setSelectedShapes(n)});pb(this,"setCollapsed",(d,n=this.app.allSelectedShapesArray)=>{n.forEach(P=>{"logseq-portal"===P.props.type&&P.setCollapsed(d)});this.app.persist()});this.app=
a}},Qt=class{constructor(){pb(this,"cursor","default");pb(this,"rotation",0);pb(this,"reset",()=>{this.cursor="default"});pb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});pb(this,"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});fd(this)}};Ae([Ef],Qt.prototype,"cursor",2);Ae([Ef],Qt.prototype,"rotation",2);Ae([ph],Qt.prototype,"reset",2);Ae([ph],Qt.prototype,"setCursor",2);Ae([ph],Qt.prototype,"setRotation",2);var Rt=class{constructor(a){pb(this,
"app");pb(this,"stack",[]);pb(this,"isPaused",!0);pb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});pb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});pb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:d})});pb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});pb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});
pb(this,"instantiateShape",d=>new (this.app.getShapeClass(d.type))(d));pb(this,"deserialize",d=>{Gc(()=>{var n,{pages:P}=d;const ea=this.isPaused;this.pause();const ka=[...this.app.selectedIds];try{const sa=new Map(this.app.pages),La=[];for(const Ua of P){const eb=sa.get(Ua.id);if(void 0!==eb){const lb=new Map(eb.shapes.map(rb=>[rb.props.id,rb]));P=[];for(const rb of Ua.shapes){const Vb=lb.get(rb.id);void 0!==Vb?(Vb.nonce!==rb.nonce&&(Vb.update(rb,!0),Vb.nonce=rb.nonce,Vb.setLastSerialized(rb)),lb.delete(rb.id)):
P.push(this.instantiateShape(rb))}0<lb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&eb.removeShapes(...lb.values());0<P.length&&eb.addShapes(...P);sa.delete(Ua.id);eb.updateBindings(Ua.bindings);eb.nonce=null!=(n=Ua.nonce)?n:0}else{const {id:lb,name:rb,shapes:Vb,bindings:Zb,nonce:Tb}=Ua;La.push(new Em(this.app,{id:lb,name:rb,nonce:Tb,bindings:Zb,shapes:Vb.map(sc=>this.instantiateShape(sc))}))}}0<La.length&&this.app.addPages(La);0<sa.size&&this.app.removePages(Array.from(sa.values()));
this.app.setSelectedShapes(ka).setErasingShapes([])}catch(sa){console.warn(sa)}ea||this.resume()})});this.app=a;fd(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};Ae([Ef],Rt.prototype,"stack",2);Ae([ph],Rt.prototype,"persist",2);Ae([ph],Rt.prototype,"undo",2);Ae([ph],Rt.prototype,"redo",2);Ae([ph],Rt.prototype,"deserialize",2);var Kr=class{constructor(){pb(this,"mode","light");pb(this,"showGrid",!0);pb(this,"snapToGrid",!0);pb(this,"penMode",!1);pb(this,"scaleLevel",
"md");pb(this,"color","");fd(this)}update(a){Object.assign(this,a)}};Ae([Ef],Kr.prototype,"mode",2);Ae([Ef],Kr.prototype,"showGrid",2);Ae([Ef],Kr.prototype,"snapToGrid",2);Ae([Ef],Kr.prototype,"penMode",2);Ae([Ef],Kr.prototype,"scaleLevel",2);Ae([Ef],Kr.prototype,"color",2);Ae([ph],Kr.prototype,"update",1);var ei=class extends Nt{constructor(a,d,n,P){var ea,ka;super();pb(this,"uuid",tk());pb(this,"readOnly");pb(this,"api");pb(this,"inputs",new $k);pb(this,"cursors",new Qt);pb(this,"viewport",new gp);
pb(this,"settings",new Kr);pb(this,"Tools",[]);pb(this,"history",new Rt(this));pb(this,"persist",this.history.persist);pb(this,"undo",this.history.undo);pb(this,"redo",this.history.redo);pb(this,"saving",!1);pb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});pb(this,"load",()=>{this.notify("load",null);return this});pb(this,"save",()=>{this.notify("save",null);return this});pb(this,"pages",new Map([["page",new Em(this,
{id:"page",name:"page",shapes:[],bindings:{}})]]));pb(this,"getPageById",sa=>{const La=this.pages.get(sa);if(!La)throw Error(`Could not find a page named ${sa}.`);return La});pb(this,"getShapeById",(sa,La=this.currentPage.id)=>{var Ua;return null==(Ua=this.getPageById(La))?void 0:Ua.shapesById[sa]});pb(this,"createShapes",sa=>{if(this.readOnly)return this;(sa=this.currentPage.addShapes(...sa))&&this.notify("create-shapes",sa);this.persist();return this});pb(this,"updateShapes",sa=>{if(this.readOnly)return this;
sa.forEach(La=>{const Ua=this.getShapeById(La.id);null==Ua?void 0:Ua.update(La);La.type!==(null==Ua?void 0:Ua.type)&&this.api.convertShapes(La.type,[Ua])});this.persist();return this});pb(this,"deleteShapes",sa=>{if(0===sa.length||this.readOnly)return this;sa=sa.map(lb=>"string"===typeof lb?this.getShapeById(lb):lb).filter(pc).filter(lb=>!lb.props.isLocked);const La=this.shapesInGroups(sa);sa.forEach(lb=>{this.getParentGroup(lb)&&La.push(lb)});let Ua=new Set([...sa,...La].map(lb=>lb.id));La.forEach(lb=>
{var rb;const Vb=this.getParentGroup(lb);if(Vb){const Zb=null==(rb=Vb.props.children)?void 0:rb.filter(Tb=>Tb!==lb.id);!Zb||1>=(null==Zb?void 0:Zb.length)?Ua.add(Vb.id):Vb.update({children:Zb})}});const eb=(lb,rb)=>{var Vb;[...Ua].includes(lb)&&"line"===(null==(Vb=this.getShapeById(rb))?void 0:Vb.type)&&Ua.add(rb)};this.currentPage.shapes.filter(lb=>!lb.props.isLocked).flatMap(lb=>{var rb;return Object.values(null!=(rb=lb.props.handles)?rb:{})}).flatMap(lb=>lb.bindingId).filter(pc).map(lb=>{var rb,
Vb;const Zb=null==(rb=this.currentPage.bindings[lb])?void 0:rb.toId;lb=null==(Vb=this.currentPage.bindings[lb])?void 0:Vb.fromId;Zb&&lb&&(eb(Zb,lb),eb(lb,Zb))});sa=[...Ua].map(lb=>this.getShapeById(lb));this.setSelectedShapes(this.selectedShapesArray.filter(lb=>!Ua.has(lb.id)));(sa=this.currentPage.removeShapes(...sa))&&this.notify("delete-shapes",sa);this.persist();return this});pb(this,"bringForward",(sa=this.selectedShapesArray,La)=>{0<sa.length&&!this.readOnly&&this.currentPage.bringForward(sa,
La);return this});pb(this,"sendBackward",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.sendBackward(sa);return this});pb(this,"sendToBack",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.sendToBack(sa);return this});pb(this,"bringToFront",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.bringToFront(sa);return this});pb(this,"flipHorizontal",(sa=this.selectedShapesArray)=>{this.currentPage.flip(sa,"horizontal");
return this});pb(this,"flipVertical",(sa=this.selectedShapesArray)=>{this.currentPage.flip(sa,"vertical");return this});pb(this,"align",(sa,La=this.selectedShapesArray)=>{if(2>La.length||this.readOnly)return this;const Ua=La.map(Zb=>{const Tb=Zb.getBounds();return{id:Zb.id,point:[Tb.minX,Tb.minY],bounds:Tb}}),eb=ig.getCommonBounds(Ua.map(({bounds:Zb})=>Zb)),lb=eb.minX+eb.width/2,rb=eb.minY+eb.height/2,Vb=Object.fromEntries(Ua.map(({id:Zb,point:Tb,bounds:sc})=>[Zb,{prev:Tb,next:{top:[Tb[0],eb.minY],
centerVertical:[Tb[0],rb-sc.height/2],bottom:[Tb[0],eb.maxY-sc.height],left:[eb.minX,Tb[1]],centerHorizontal:[lb-sc.width/2,Tb[1]],right:[eb.maxX-sc.width,Tb[1]]}[sa]}]));La.forEach(Zb=>{Vb[Zb.id]&&Zb.update({point:Vb[Zb.id].next})});this.persist();return this});pb(this,"distribute",(sa,La=this.selectedShapesArray)=>{if(2>La.length||this.readOnly)return this;const Ua=Object.fromEntries(ig.getDistributions(La,sa).map(eb=>[eb.id,eb]));La.forEach(eb=>{Ua[eb.id]&&eb.update({point:Ua[eb.id].next})});this.persist();
return this});pb(this,"packIntoRectangle",(sa=this.selectedShapesArray)=>{if(2>sa.length||this.readOnly)return this;const La=Object.fromEntries(ig.getPackedDistributions(sa).map(Ua=>[Ua.id,Ua]));sa.forEach(Ua=>{La[Ua.id]&&Ua.update({point:La[Ua.id].next})});this.persist();return this});pb(this,"setLocked",sa=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(La=>{La.update({isLocked:sa})});this.persist();return this});pb(this,"assets",{});pb(this,
"removeUnusedAssets",()=>{const sa=this.getCleanUpAssets();Object.keys(this.assets).forEach(La=>{sa.some(Ua=>Ua.id===La)||delete this.assets[La]});this.persist();return this});pb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const La=this.allSelectedShapesArray;var sa=JSON.stringify({shapes:La.map(eb=>eb.serialized),assets:this.getCleanUpAssets().filter(eb=>La.some(lb=>lb.props.assetId===eb.id)),bindings:mc(this.currentPage.bindings)});sa=encodeURIComponent(`<whiteboard-tldr>${sa}</whiteboard-tldr>`);
const Ua=this.selectedShapesArray.map(eb=>`((${eb.props.id}))`).join(" ");this.notify("copy",{text:Ua,html:sa})}});pb(this,"paste",(sa,La)=>{var Ua;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!La,dataTransfer:null!=(Ua=null==sa?void 0:sa.clipboardData)?Ua:void 0})});pb(this,"cut",()=>{this.copy();this.api.deleteShapes()});pb(this,"drop",(sa,La)=>{this.notify("drop",{dataTransfer:sa,point:La?this.viewport.getPagePoint(La):ig.getBoundsCenter(this.viewport.currentView)})});
pb(this,"selectTool",(sa,La={})=>{this.readOnly&&!["select","move"].includes(sa)||this.transition(sa,La)});pb(this,"editingId");pb(this,"setEditingShape",sa=>{this.editingId="string"===typeof sa?sa:null==sa?void 0:sa.id;return this});pb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});pb(this,"hoveredId");pb(this,"setHoveredShape",sa=>{this.hoveredId="string"===typeof sa?sa:null==sa?void 0:sa.id;return this});pb(this,"selectedIds",new Set);pb(this,
"selectedShapes",new Set);pb(this,"selectionRotation",0);pb(this,"setSelectedShapes",sa=>{var La;const {selectedIds:Ua,selectedShapes:eb}=this;Ua.clear();eb.clear();sa[0]&&"string"===typeof sa[0]?sa.forEach(rb=>Ua.add(rb)):sa.forEach(rb=>Ua.add(rb.id));const lb=this.currentPage.shapes.filter(rb=>Ua.has(rb.id));lb.forEach(rb=>eb.add(rb));this.selectionRotation=1===lb.length?null!=(La=lb[0].props.rotation)?La:0:0;0===sa.length&&this.setEditingShape();return this});pb(this,"erasingIds",new Set);pb(this,
"erasingShapes",new Set);pb(this,"setErasingShapes",sa=>{const {erasingIds:La,erasingShapes:Ua}=this;La.clear();Ua.clear();sa[0]&&"string"===typeof sa[0]?sa.forEach(eb=>La.add(eb)):sa.forEach(eb=>La.add(eb.id));this.currentPage.shapes.filter(eb=>La.has(eb.id)).forEach(eb=>Ua.add(eb));return this});pb(this,"bindingIds");pb(this,"setBindingShapes",sa=>{this.bindingIds=sa;return this});pb(this,"clearBindingShape",()=>this.setBindingShapes());pb(this,"createNewLineBinding",(sa,La)=>{sa="string"===typeof sa?
this.getShapeById(sa):sa;La="string"===typeof La?this.getShapeById(La):La;if((null==sa?0:sa.canBind)&&(null==La?0:La.canBind)&&(La=kd(sa,La))){const [Ua,eb]=La;this.createShapes([Ua]);this.currentPage.updateBindings(Object.fromEntries(eb.map(lb=>[lb.id,lb])));this.persist();return!0}return!1});pb(this,"brush");pb(this,"setBrush",sa=>{this.brush=sa;return this});pb(this,"setCamera",(sa,La)=>{this.viewport.update({point:sa,zoom:La});return this});pb(this,"getPagePoint",sa=>{const {camera:La}=this.viewport;
return Yd.sub(Yd.div(sa,La.zoom),La.point)});pb(this,"getScreenPoint",sa=>{const {camera:La}=this.viewport;return Yd.mul(Yd.add(sa,La.point),La.zoom)});pb(this,"Shapes",new Map);pb(this,"registerShapes",sa=>{sa.forEach(La=>{if("group"===La.id){const Ua=this;La.prototype.getShapes=function(){var eb,lb;return null!=(lb=null==(eb=this.props.children)?void 0:eb.map(rb=>Ua.getShapeById(rb)).filter(Boolean))?lb:[]}}return this.Shapes.set(La.id,La)})});pb(this,"deregisterShapes",sa=>{sa.forEach(La=>this.Shapes.delete(La.id))});
pb(this,"getShapeClass",sa=>{if(!sa)throw Error("No shape type provided.");const La=this.Shapes.get(sa);if(!La)throw Error(`Could not find shape class for ${sa}`);return La});pb(this,"wrapUpdate",sa=>{Gc(()=>{const La=!this.history.isPaused;La&&this.history.pause();sa();La&&(this.history.resume(),this.persist())})});pb(this,"subscriptions",new Set([]));pb(this,"subscribe",(sa,La)=>{if(void 0===La)throw Error("Callback is required.");const Ua={event:sa,callback:La};this.subscriptions.add(Ua);return()=>
this.unsubscribe(Ua)});pb(this,"unsubscribe",sa=>{this.subscriptions.delete(sa);return this});pb(this,"notify",(sa,La)=>{this.subscriptions.forEach(Ua=>{Ua.event===sa&&Ua.callback(this,La)});return this});pb(this,"onTransition",()=>{});pb(this,"onPointerDown",(sa,La)=>{if(!this.editingShape&&1===La.button&&!this.isIn("move"))this.temporaryTransitionToMove(La);else if(2===La.button&&!this.editingShape)La.preventDefault(),this.transition("select");else if("clientX"in La)this.inputs.onPointerDown([...this.viewport.getPagePoint([La.clientX,
La.clientY]),La.pressure],La)});pb(this,"onPointerUp",(sa,La)=>{if(!this.editingShape&&1===La.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),La.stopPropagation(),La.preventDefault();else if("clientX"in La)this.inputs.onPointerUp([...this.viewport.getPagePoint([La.clientX,La.clientY]),La.pressure],La)});pb(this,"onPointerMove",(sa,La)=>{if("clientX"in La)this.inputs.onPointerMove([...this.viewport.getPagePoint([La.clientX,La.clientY]),La.pressure],La)});pb(this,"onKeyDown",
(sa,La)=>{if(this.editingShape||" "!==La.key||this.isIn("move"))this.inputs.onKeyDown(La);else this.temporaryTransitionToMove(La)});pb(this,"onKeyUp",(sa,La)=>{if(!this.editingShape&&" "===La.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),La.stopPropagation(),La.preventDefault();else this.inputs.onKeyUp(La)});pb(this,"onPinchStart",(sa,La)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(sa.point),.5],La)});pb(this,"onPinch",(sa,La)=>{this.inputs.onPinch([...this.viewport.getPagePoint(sa.point),
.5],La)});pb(this,"onPinchEnd",(sa,La)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(sa.point),.5],La)});this._states=[Ot,Pt];this.readOnly=P;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),P=null!=(ea=this.initial)?ea:this.states[0].id,ea=this.children.get(P))&&(this.currentState=ea,null==(ka=this.currentState)?void 0:ka._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);n&&this.registerTools(n);this.history.resume();a&&this.history.deserialize(a);
this.api=new HE(this);fd(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>
d.props.children).filter(pc).map(d=>this.getShapeById(d)).filter(pc)}getParentGroup(a){return this.shapes.find(d=>{var n;return null==(n=d.props.children)?void 0:n.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):a.forEach(d=>delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(n=>{n.props.assetId&&this.assets[n.props.assetId]&&
a.add(this.assets[n.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=this;return a?d.shapes.find(n=>n.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(n=>n.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=
this;return a?this.shapes.find(d=>{var n;return"group"===d.type&&(null==(n=d.props.children)?void 0:n.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;
const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(P=>{var ea;return Object.values(null!=(ea=P.props.handles)?ea:{})}).flatMap(P=>P.bindingId).filter(pc).flatMap(P=>{var ea,ka;return[null==(ea=this.currentPage.bindings[P])?void 0:ea.fromId,null==(ka=this.currentPage.bindings[P])?void 0:ka.toId]}).filter(pc):[],n=[...(null!=(a=this.bindingIds)?a:[]),...d];return n?this.currentPage.shapes.filter(P=>null==n?void 0:n.includes(P.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;
return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:d,viewport:{currentView:n}}=this;return d.shapes.filter(P=>!P.canUnmount||a.has(P)||ig.boundsContain(n,P.rotatedBounds)||ig.boundsCollide(n,P.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!ig.boundsContain(d,a)&&!ig.boundsCollide(d,a)){var n=ig.getBoundsCenter(a);return Yd.clampV([(n[0]-
d.minX-d.width/2)/d.width,(n[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?$f(Ie({},a[0].bounds),{rotation:a[0].props.rotation}):ig.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}get showCloneHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape")&&1===a.length&&Object.values(Xp).some(d=>d===this.selectedShapesArray[0].type)&&!this.readOnly}temporaryTransitionToMove(a){a.stopPropagation();a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};pb(ei,"id","app");pb(ei,"initial","select");Ae([pg],ei.prototype,"serialized",1);Ae([Ef],ei.prototype,"pages",2);Ae([pg],
ei.prototype,"currentPageId",1);Ae([pg],ei.prototype,"currentPage",1);Ae([ph],ei.prototype,"addPages",1);Ae([ph],ei.prototype,"removePages",1);Ae([ph],ei.prototype,"createShapes",2);Ae([ph],ei.prototype,"updateShapes",2);Ae([ph],ei.prototype,"deleteShapes",2);Ae([Ef],ei.prototype,"assets",2);Ae([ph],ei.prototype,"addAssets",1);Ae([ph],ei.prototype,"removeAssets",1);Ae([ph],ei.prototype,"removeUnusedAssets",2);Ae([pg],ei.prototype,"selectedTool",1);Ae([Ef],ei.prototype,"editingId",2);Ae([pg],ei.prototype,
"editingShape",1);Ae([ph],ei.prototype,"setEditingShape",2);Ae([Ef],ei.prototype,"hoveredId",2);Ae([pg],ei.prototype,"hoveredShape",1);Ae([pg],ei.prototype,"hoveredGroup",1);Ae([ph],ei.prototype,"setHoveredShape",2);Ae([Ef],ei.prototype,"selectedIds",2);Ae([Ef],ei.prototype,"selectedShapes",2);Ae([Ef],ei.prototype,"selectionRotation",2);Ae([pg],ei.prototype,"selectedShapesArray",1);Ae([pg],ei.prototype,"allSelectedShapes",1);Ae([pg],ei.prototype,"allSelectedShapesArray",1);Ae([ph],ei.prototype,"setSelectedShapes",
2);Ae([ph],ei.prototype,"setSelectionRotation",1);Ae([Ef],ei.prototype,"erasingIds",2);Ae([Ef],ei.prototype,"erasingShapes",2);Ae([pg],ei.prototype,"erasingShapesArray",1);Ae([ph],ei.prototype,"setErasingShapes",2);Ae([Ef],ei.prototype,"bindingIds",2);Ae([pg],ei.prototype,"bindingShapes",1);Ae([ph],ei.prototype,"setBindingShapes",2);Ae([ph],ei.prototype,"createNewLineBinding",2);Ae([Ef],ei.prototype,"brush",2);Ae([ph],ei.prototype,"setBrush",2);Ae([ph],ei.prototype,"setCamera",2);Ae([pg],ei.prototype,
"currentGrid",1);Ae([pg],ei.prototype,"shapes",1);Ae([pg],ei.prototype,"shapesInViewport",1);Ae([pg],ei.prototype,"selectionDirectionHint",1);Ae([pg],ei.prototype,"selectionBounds",1);Ae([pg],ei.prototype,"showSelection",1);Ae([pg],ei.prototype,"showSelectionDetail",1);Ae([pg],ei.prototype,"showSelectionRotation",1);Ae([pg],ei.prototype,"showContextBar",1);Ae([pg],ei.prototype,"showRotateHandles",1);Ae([pg],ei.prototype,"showResizeHandles",1);Ae([pg],ei.prototype,"showCloneHandles",1);var IE=Function.prototype.toString,
zx=Object.create,JE=Object.prototype.toString,KE=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,n){this._keys.push(d);this._values.push(n)};return a}(),LE="undefined"!==typeof WeakMap?Be:pe,ME="g"===/test/g.flags?zf:Sf,NE="undefined"!==typeof Symbol?Bf:Uf,OE=Object.defineProperty,PE=Object.getOwnPropertyDescriptor,EA=Object.getOwnPropertyNames,
Ax=Object.getOwnPropertySymbols,FA=Object.prototype,GA=FA.hasOwnProperty,QE=FA.propertyIsEnumerable,HA="function"===typeof Ax,RE=HA?ng:EA,SE=Array.isArray,Bx=Object.assign,TE=Object.getPrototypeOf,IA={array:function(a,d){var n=new d.Constructor;d.cache.set(a,n);for(var P=0,ea=a.length;P<ea;++P)n[P]=d.copier(a[P],d);return n},arrayBuffer:function(a,d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,
d){return new d.Constructor(a.getTime())},error:Th,map:Xg,object:HA?Wg:vg,regExp:function(a,d){d=new d.Constructor(a.source,ME(a));d.lastIndex=a.lastIndex;return d},set:Bi},UE=Bx({},IA,{array:function(a,d){var n=new d.Constructor;d.cache.set(a,n);return oh(a,n,d)},map:function(a,d){return oh(a,Xg(a,d),d)},object:function(a,d){var n=Ne(d.prototype);d.cache.set(a,n);return oh(a,n,d)},set:function(a,d){return oh(a,Bi(a,d),d)}});yi(Bx({},UE,{}));var VE=yi({}),WE=gg(vt()),XE=gg(wr()),Rs=VE,Ko=class{static insertTextFirefox(a,
d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const n=a.ownerDocument,P=n.activeElement;P!==a&&a.focus();n.execCommand("insertText",!1,d)||Ko.insertTextFirefox(a,d);P===n.body?a.blur():P instanceof HTMLElement&&P!==a&&P.focus()}static set(a,d){a.select();Ko.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:n}=a;return a.value.slice(d?d:void 0,n?n:void 0)}static wrapSelection(a,
d,n){const {selectionStart:P,selectionEnd:ea}=a,ka=Ko.getSelection(a);Ko.insert(a,d+ka+(null!=n?n:d));a.selectionStart=(P||0)+d.length;a.selectionEnd=(ea||0)+d.length}static replace(a,d,n){let P=0;a.value.replace(d,(...ea)=>{const ka=P+ea[ea.length-2],sa=ea[0].length;a.selectionStart=ka;a.selectionEnd=ka+sa;ea="string"===typeof n?n:n(...ea);Ko.insert(a,ea);a.selectionStart=ka;P+=ea.length-sa;return ea})}static findLineEnd(a,d){const n=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(n)?d:n+1}static indent(a){var d;
const {selectionStart:n,selectionEnd:P,value:ea}=a;var ka=ea.slice(n,P);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=ea.lastIndexOf("\n",n-1)+1;var sa=a.value.slice(d,P-1);ka=sa.replace(/^|\n/g,`$&${Ko.INDENT}`);sa=ka.length-sa.length;a.setSelectionRange(d,P-1);Ko.insert(a,ka);a.setSelectionRange(n+1,P+sa)}else Ko.insert(a,Ko.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:n,value:P}=a;var ea=P.lastIndexOf("\n",d-1)+1;const ka=Ko.findLineEnd(P,n);var sa=a.value.slice(ea,
ka);const La=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-La.length;a.setSelectionRange(ea,ka);Ko.insert(a,La);ea=(ea=/\t| {1,2}/.exec(P.slice(ea,d)))?ea[0].length:0;a.setSelectionRange(d-ea,Math.max(d-ea,n-sa))}static normalizeText(a){return a.replace(Ko.fixNewLines,"\n")}},St=Ko;pb(St,"fixNewLines",/\r?\n|\r/g);pb(St,"INDENT","  ");var Lr;"undefined"!==typeof window&&(Lr=Eg());var Cx=new Map,JA=Gb()?"":"ctrl",YE=class extends ei{},KA=gg(ba(21)),ZE=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var LA=gg(ba(21)),Dx={},Tu=gg(ba(21)),$E=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},Ex=gg(ba(21)),Fx=new Map,aF={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",
binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},bF=((a,...d)=>a.reduce((n,P,ea)=>n+P+(ea<d.length?d[ea]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: calc(64px / var(--tl-zoom));;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle:hover {
    fill: var(--tl-selectStroke);
    cursor: pointer; 
  }

  .tl-clone-handle:hover line {
    stroke: var(--tl-background);
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,MA=gg(ba(21)),NA=gg(ba(21)),Gx={},al={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},OA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},cF=["enter","leave"],dF=["gotpointercapture","lostpointercapture"],
PA=class{constructor(a,d,n){this.ctrl=a;this.args=d;this.key=n;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:n,args:P}=this;d[n]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=P;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,n=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=n.from?ih(n.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:n,shared:P}=this;d.args=this.args;var ea=0;if(a){d.event=a;n.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;P.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;P.locked=!!document.pointerLockElement;ea=Object;var ka=ea.assign,sa={};"buttons"in a&&(sa.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:$c,altKey:ed,metaKey:Wd,ctrlKey:me}=a;Object.assign(sa,{shiftKey:$c,altKey:ed,metaKey:Wd,ctrlKey:me})}ka.call(ea,P,sa);P.down=P.pressed=1===P.buttons%2||0<P.touches;ea=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(ka=d._delta.map(Math.abs),al.addTo(d._distance,ka));this.axisIntent&&
this.axisIntent(a);const [La,Ua]=d._movement,[eb,lb]=n.threshold,{_step:rb,values:Vb}=d;n.hasCustomTransform?(!1===rb[0]&&(rb[0]=Math.abs(La)>=eb&&Vb[0]),!1===rb[1]&&(rb[1]=Math.abs(Ua)>=lb&&Vb[1])):(!1===rb[0]&&(rb[0]=Math.abs(La)>=eb&&Math.sign(La)*eb),!1===rb[1]&&(rb[1]=Math.abs(Ua)>=lb&&Math.sign(Ua)*lb));d.intentional=!1!==rb[0]||!1!==rb[1];if(d.intentional){ka=[0,0];if(n.hasCustomTransform){const [$c,ed]=Vb;ka[0]=!1!==rb[0]?$c-rb[0]:0;ka[1]=!1!==rb[1]?ed-rb[1]:0}else ka[0]=!1!==rb[0]?La-rb[0]:
0,ka[1]=!1!==rb[1]?Ua-rb[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(ka);sa=d.offset;var Zb=d._active&&!d._blocked||d.active;Zb&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=P[this.ingKey]=d._active,a&&(d.first&&("bounds"in n&&(d._bounds=ih(n.bounds,d)),this.setup&&this.setup()),d.movement=ka,this.computeOffset()));var [Tb,sc]=d.offset,[[Kc,fc],[zc,vc]]=d._bounds;d.overflow=[Tb<Kc?-1:Tb>fc?1:0,sc<zc?-1:sc>vc?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?
d._movement[0]:d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=Lf(d._bounds,d.offset,d._active?n.rubberband||[0,0]:[0,0]);d.delta=al.sub(d.offset,sa);this.computeMovement();Zb&&(!d.last||32<ea)&&(d.delta=al.sub(d.offset,sa),a=d.delta.map(Math.abs),al.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<ea&&(d.velocity=[a[0]/ea,a[1]/ea]))}}emit(){const a=this.state;var d=
this.shared;const n=this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||n.triggerAllEvents)d=this.handler(Mf(Mf(Mf({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Uu=class extends PA{constructor(...a){super(...a);ug(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=al.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=al.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,n=this.config;!d.axis&&a&&(a="object"===typeof n.axisThreshold?n.axisThreshold[rh(a)]:n.axisThreshold,d.axis=pj(d._movement,a));d._blocked=(n.lockDirection||!!n.axis)&&!d.axis||!!n.axis&&n.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},eF=a=>a,QA={enabled(a=!0){return a},
eventOptions(a,d,n){return Mf(Mf({},n.shared.eventOptions),a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return al.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return al.toVector(a)},transform(a,d,n){a=a||n.shared.transform;this.hasCustomTransform=!!a;return a||eF},threshold(a){return al.toVector(a,0)}},Ss=Mf(Mf({},QA),{},{axis(a,d,{axis:n}){this.lockDirection="lock"===n;if(!this.lockDirection)return n},
axisThreshold(a=0){return a},bounds(a={}){if("function"===typeof a)return ka=>Ss.bounds(a(ka));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:n=Infinity,top:P=-Infinity,bottom:ea=Infinity}=a;return[[d,n],[P,ea]]}}),RA={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},fF=class extends Uu{constructor(...a){super(...a);ug(this,"ingKey","dragging")}reset(){super.reset();
const a=this.state;a._pointerId=void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),n=a.currentTarget.getBoundingClientRect();a._bounds=Ss.bounds({left:d.left-n.left+a.offset[0],right:d.right-n.right+a.offset[0],top:d.top-n.top+a.offset[1],bottom:d.bottom-n.bottom+a.offset[1]})}}cancel(){const a=
this.state;a.canceled||(a.canceled=!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,n=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var P=this.ctrl.setEventIds(a);
d.pointerCapture&&a.target.setPointerCapture(a.pointerId);P&&1<P.size&&n._pointerActive||(this.start(a),this.setupPointer(a),n._pointerId=jh(a),n._pointerActive=!0,this.computeValues(Ag(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==rh(a)?(n._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);
this.emit()}pointerMove(a){const d=this.state,n=this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var P=jh(a);if(void 0===d._pointerId||P===d._pointerId)P=Ag(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=al.sub(P,d._values),this.computeValues(P)),al.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):n.preventScrollAxis&&!d._preventScroll?
d.axis&&(d.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(sa){}const d=this.state,n=this.config;if(d._active&&d._pointerActive){var P=jh(a);if(void 0===d._pointerId||P===d._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(a);var [ea,ka]=d._distance;d.tap=ea<=n.tapsThreshold&&ka<=n.tapsThreshold;if(d.tap&&n.filterTaps)d._force=!0;else{const [sa,La]=d.direction,[Ua,eb]=d.velocity,[lb,rb]=d.movement,[Vb,Zb]=n.swipe.velocity,[Tb,sc]=n.swipe.distance;d.elapsedTime<n.swipe.duration&&(Math.abs(Ua)>Vb&&Math.abs(lb)>Tb&&(d.swipe[0]=sa),Math.abs(eb)>Zb&&Math.abs(rb)>sc&&(d.swipe[1]=La))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,
n=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&
a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=RA[a.key];if(d){const n=this.state,P=a.shiftKey?10:a.altKey?.1:1;this.start(a);n._delta=d(P);n._keyboardActive=!0;al.addTo(n._movement,n._delta);this.compute(a);this.emit()}}keyUp(a){a.key in RA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Ts="undefined"!==typeof window&&window.document&&window.document.createElement;try{var SA="constructor"in GestureEvent}catch(a){SA=!1}var gF=
SA,Vu=Ts&&"ontouchstart"in window||Ts&&1<window.navigator.maxTouchPoints,TA=Ts&&"ontouchstart"in window||Ts&&1<window.navigator.maxTouchPoints,UA=Ts&&"onpointerdown"in window,hF=Ts&&"exitPointerLock"in window.document,VA={mouse:0,touch:0,pen:8},iF=Mf(Mf({},Ss),{},{device(a,d,{pointer:{touch:n=!1,lock:P=!1,mouse:ea=!1}={}}){this.pointerLock=P&&hF;return Vu&&n?"touch":this.pointerLock?"mouse":UA&&!ea?"pointer":Vu?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:n}){this.preventScrollDelay="number"===
typeof n?n:n||void 0===n&&a?250:void 0;if(TA&&!1!==n)return a?a:void 0!==n?"y":void 0},pointerCapture(a,d,{pointer:{capture:n=!0,buttons:P=1,keys:ea=!0}={}}){this.pointerButtons=P;this.keys=ea;return!this.pointerLock&&"pointer"===this.device&&n},threshold(a,d,{filterTaps:n=!1,tapsThreshold:P=3,axis:ea}){a=al.toVector(a,n?P:ea?1:0);this.filterTaps=n;this.tapsThreshold=P;return a},swipe({velocity:a=.5,distance:d=50,duration:n=250}={}){return{velocity:this.transform(al.toVector(a)),distance:this.transform(al.toVector(d)),
duration:n}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;default:return a}},axisThreshold(a){return a?Mf(Mf({},VA),a):VA}}),jF=class extends PA{constructor(...a){super(...a);ug(this,"ingKey","pinching");ug(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:n}=
this.state;this.state.offset="wheel"===a?al.add(d,n):[(1+d[0])*n[0],d[1]+n[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,n]=a._movement;if(!a.axis){const P=30*Math.abs(d)-Math.abs(n);0>P?a.axis="angle":0<P&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=
!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);var d=this.state;const n=this.ctrl.touchIds;d._active&&d._touchIds.every(P=>n.has(P))||2>n.size||(this.start(a),d._touchIds=Array.from(n).slice(0,2),d=If(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,n=d._pointerEvents,P=this.ctrl.pointerIds;d._active&&Array.from(n.keys()).every(ea=>P.has(ea))||
(2>n.size&&n.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=Gf(...Array.from(n.values())),this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=If(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=Gf(...Array.from(d.values())),this.pinchMove(a,
d))}pinchMove(a,d){const n=this.state,P=d.angle-n._values[1];let ea=0;270<Math.abs(P)&&(ea+=Math.sign(P));this.computeValues([d.distance,d.angle-360*ea]);n.origin=d.origin;n.turns=ea;n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);
try{a.target.releasePointerCapture(a.pointerId)}catch(n){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,
a.rotation]);d.origin=[a.clientX,a.clientY];var n=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=al.sub(d._movement,n);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();
const d=this.state;d._delta=[-Xi(a)[1]/100*d.offset[0],0];al.addTo(d._movement,d._delta);Ak(d);this.state.origin=[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),
{passive:!1})}},kF=Mf(Mf({},QA),{},{device(a,d,{shared:n,pointer:{touch:P=!1}={}}){if(n.target&&!Vu&&gF)return"gesture";if(Vu&&P)return"touch";if(TA){if(UA)return"pointer";if(Vu)return"touch"}},bounds(a,d,{scaleBounds:n={},angleBounds:P={}}){const ea=sa=>{sa=ih(n,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]},ka=sa=>{sa=ih(P,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]};return"function"!==typeof n&&"function"!==typeof P?[ea(),
ka()]:sa=>[ea(sa),ka(sa)]},threshold(a,d,n){this.lockDirection="lock"===n.axis;return al.toVector(a,this.lockDirection?[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),lF=class extends Uu{constructor(...a){super(...a);ug(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(Ag(a));
this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=Ag(a),n=this.state;n._delta=al.sub(d,n._values);al.addTo(n._movement,n._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},mF=Mf(Mf({},Ss),{},{mouseOnly:(a=!0)=>a}),nF=class extends Uu{constructor(...a){super(...a);ug(this,
"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var n,P;const {scrollX:ea,scrollY:ka,scrollLeft:sa,scrollTop:La}=a.currentTarget;var Ua=[null!==(n=null!==ea&&void 0!==ea?ea:sa)&&void 0!==n?n:0,null!==(P=null!==ka&&void 0!==ka?ka:La)&&void 0!==P?P:0];d._delta=al.sub(Ua,d._values);al.addTo(d._movement,d._delta);this.computeValues(Ua);
this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll","",this.scroll.bind(this))}},oF=Ss,pF=class extends Uu{constructor(...a){super(...a);ug(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=Xi(a);al.addTo(d._movement,d._delta);Ak(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&
(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},qF=Ss,rF=class extends Uu{constructor(...a){super(...a);ug(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(Ag(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var n=Ag(a);d._movement=d._delta=al.sub(n,d._values);this.computeValues(n);this.compute(a);
d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},sF=Mf(Mf({},Ss),{},{mouseOnly:(a=!0)=>a}),Hx=new Map,Ix=new Map,tF={key:"drag",engine:fF,resolver:iF},uF={key:"hover",engine:rF,resolver:sF},vF={key:"move",engine:lF,resolver:mF},wF={key:"pinch",engine:jF,resolver:kF},xF={key:"scroll",engine:nF,resolver:oF},yF={key:"wheel",engine:pF,resolver:qF},Jx=gg(ba(21)),zF={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=
!0){return a},window(a=Ts?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},AF=["target","eventOptions","window","enabled","transform"],WA=class{constructor(a,d){ug(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,n,P,ea){const ka=this._listeners,sa=pi(d,n),La=Mf(Mf({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),ea);a.addEventListener(sa,P,La);const Ua=()=>{a.removeEventListener(sa,
P,La);ka.delete(Ua)};ka.add(Ua);return Ua}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},BF=class{constructor(){ug(this,"_timeouts",new Map)}add(a,d,n=140,...P){this.remove(a);this._timeouts.set(a,window.setTimeout(d,n,...P))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},CF=class{constructor(a){ug(this,"gestures",new Set);ug(this,"_targetEventStore",new WA(this));ug(this,"gestureEventStores",
{});ug(this,"gestureTimeoutStores",{});ug(this,"handlers",{});ug(this,"config",{});ug(this,"pointerIds",new Set);ug(this,"touchIds",new Set);ug(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&Vi(this,"drag");a.wheel&&Vi(this,"wheel");a.scroll&&Vi(this,"scroll");a.move&&Vi(this,"move");a.pinch&&Vi(this,"pinch");a.hover&&Vi(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(qf(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?
this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=d}applyConfig(a,d){this.config=qj(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const n={};let P;if(d.target&&
(P=d.target(),!P))return;if(d.enabled){for(const ea of this.gestures){const ka=this.config[ea],sa=XA(n,ka.eventOptions,!!P);ka.enabled&&(new (Hx.get(ea))(this,a,ea)).bind(sa)}d=XA(n,d.eventOptions,!!P);for(const ea in this.nativeHandlers)d(ea,"",ka=>this.nativeHandlers[ea](Mf(Mf({},this.state.shared),{},{event:ka,args:a})),void 0,!0)}for(const ea in n)n[ea]=ci(...n[ea]);if(!P)return n;for(const ea in n){const {device:ka,capture:sa,passive:La}=fg(ea);this._targetEventStore.add(P,ka,"",n[ea],{capture:sa,
passive:La})}}},XA=(a,d,n)=>(P,ea,ka,sa={},La=!1)=>{var Ua,eb;const lb=null!==(Ua=sa.capture)&&void 0!==Ua?Ua:d.capture;sa=null!==(eb=sa.passive)&&void 0!==eb?eb:d.passive;P=La?P:Yg(P,ea,lb);n&&sa&&(P+="Passive");a[P]=a[P]||[];a[P].push(ka)},DF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,$v=gg(ba(21)),Kx=gg(ba(21)),YA=gg(ba(21)),ZA=gg(ba(21)),EF=gg(ba(21)),FF=gg(ba(21)),GF=gg(ba(21)),HF=gg(ba(21)),IF={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",
move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>de('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>de("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>de("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>de("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>de("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>de("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>de("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>de("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>de("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>de('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>de('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>de('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>de('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>de('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},JF=gg(ba(21));gg(ba(21));var $A=ba(21),aB=gg(ba(21));if(!ba(21).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!fd)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var KF=ba(30),Wu=gg(ba(21)),bB="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,LF=1E4,MF=function(a){var d="function"===typeof Symbol&&Symbol.iterator,n=d&&a[d],P=0;if(n)return n.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&
P>=a.length&&(a=void 0);return{value:a&&a[P++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},cB=bB?se(bB):sf(),NF=cB.addReactionToTrack,OF=cB.recordReactionAsCommitted,dB=function(a,d){var n="function"===typeof Symbol&&a[Symbol.iterator];if(!n)return a;a=n.call(a);var P,ea=[];try{for(;(void 0===d||0<d--)&&!(P=a.next()).done;)ea.push(P.value)}catch(sa){var ka={error:sa}}finally{try{P&&!P.done&&(n=a["return"])&&n.call(a)}finally{if(ka)throw ka.error;
}}return ea},PF=function(){return function(){}}(),Tt=ba(21),eB="function"===typeof Symbol&&Symbol.for,fB=eB?Symbol.for("react.forward_ref"):"function"===typeof Tt.forwardRef&&(0,Tt.forwardRef)(function(a){return null}).$$typeof,gB=eB?Symbol.for("react.memo"):"function"===typeof Tt.memo&&(0,Tt.memo)(function(a){return null}).$$typeof,QF={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};rg.displayName="Observer";ba(21);ba(21);ba(21);(function(a){a||=Ye;qb({reactionScheduler:a})})(KF.unstable_batchedUpdates);
var RF=gg(ba(21)),Lx=ba(612),Lo=RF.forwardRef(function(a,d){var {children:n,opacity:P,centered:ea,className:ka=""}=a,sa=wg(a,["children","opacity","centered","className"]);return(0,Lx.jsx)(rg,{children:()=>(0,Lx.jsx)("div",{ref:d,className:`tl-positioned-div ${ka}`,style:P?{opacity:P}:void 0,draggable:!1,children:(0,Lx.jsx)("div",$f(Ie({className:`tl-positioned-inner ${ea?"tl-centered":""}`},sa),{children:n}))})})}),SF=gg(ba(21)),Mx=ba(612),hp=SF.forwardRef(function(a,d){var {id:n,className:P="",
style:ea,children:ka}=a,sa=wg(a,["id","className","style","children"]);return(0,Mx.jsx)(rg,{children:()=>(0,Mx.jsx)("svg",{ref:d,style:ea,className:`tl-positioned-svg ${P}`,children:(0,Mx.jsx)("g",$f(Ie({id:n,className:"tl-centered-g"},sa),{children:ka}))})})}),Xu=gg(ba(21)),hB=gg(ba(21)),aw=gg(ba(21)),TF=ba(612),Mr=Ke(function(a){var {id:d,bounds:n,zIndex:P,rotation:ea=0,className:ka="",children:sa}=a;a=wg(a,"id bounds zIndex rotation className children".split(" "));const La=aw.useRef(null);aw.useLayoutEffect(()=>
{La.current.style.transform=`translate(
        calc(${n.minX}px - var(--tl-padding)),
        calc(${n.minY}px - var(--tl-padding)))
        rotate(${ea+(n.rotation||0)}rad)`},[n.minX,n.minY,ea,n.rotation]);aw.useLayoutEffect(()=>{const Ua=La.current;Ua.style.width=`calc(${Math.floor(n.width)}px + (var(--tl-padding) * 2))`;Ua.style.height=`calc(${Math.floor(n.height)}px + (var(--tl-padding) * 2))`},[n.width,n.height]);aw.useLayoutEffect(()=>{const Ua=La.current;void 0!==P&&(Ua.style.zIndex=P.toString())},[P]);return(0,TF.jsx)("div",$f(Ie({id:d,ref:La,className:`tl-positioned ${ka}`,"aria-label":"container"},a),{children:sa}))}),
UF=gg(ba(21)),iB=ba(612),VF=Ke(function({shapes:a,hidden:d,bounds:n,rotation:P=0}){const {components:{ContextBar:ea},viewport:{bounds:ka,camera:{point:[sa,La],zoom:Ua}}}=ld(),eb=UF.useRef(null);var lb=ig.getRotatedBounds(n,P);lb=ig.multiplyBounds(lb,Ua);yb(eb,n,P,10005);if(!ea)throw Error("Expected a ContextBar component.");const rb=ig.translateBounds(lb,[sa*Ua,La*Ua]);return(0,iB.jsx)("div",{ref:eb,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,iB.jsx)(ea,{hidden:d,shapes:a,bounds:n,offsets:{left:rb.minX,right:ka.width-rb.maxX,top:rb.minY,bottom:ka.height-rb.maxY,width:rb.width,height:rb.height},scaledBounds:lb,rotation:P})})}),jB=gg(ba(21)),WF=ba(612),kB=Ke(function({children:a}){const d=jB.useRef(null),{viewport:n}=ld(),P=d.current,{zoom:ea,point:ka}=n.camera;jB.useEffect(()=>{P&&(P.style.transform=`scale(${ea}) translate3d(${ka[0]}px, ${ka[1]}px, 0)`)},[ea,ka,P]);return(0,WF.jsx)("div",{ref:d,className:"tl-absolute tl-layer",
children:a})}),bw=ba(612),lB=Ke(function({shape:a,isHovered:d=!1,isSelected:n=!1,isBinding:P=!1,isEditing:ea=!1,isLocked:ka=!1,meta:sa}){const {bounds:La,props:{scale:Ua,rotation:eb=0},ReactIndicator:lb}=a;return(0,bw.jsx)(Mr,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:La,rotation:eb,scale:Ua,zIndex:ea?1E3:1E4,children:(0,bw.jsx)(hp,{children:(0,bw.jsx)("g",{className:`tl-indicator-container ${n?"tl-selected":"tl-hovered"} ${ka?"tl-locked":""}`,children:(0,bw.jsx)(lb,{isEditing:ea,
isBinding:P,isHovered:d,isLocked:ka,isSelected:n,isErasing:!1,meta:sa})})})})}),mB=gg(ba(21)),cw=ba(612),XF=Ke(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:n}},components:{QuickLinks:P}}=ld();var ea=bf();const ka=Mh(d);if(!P)throw Error("Expected a QuickLinks component.");ea=50>a.height*n||!ea.selectedShapesArray.includes(d);return(0,cw.jsx)(Mr,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,cw.jsx)(Lo,{children:(0,cw.jsx)("span",$f(Ie({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},ka),{onPointerDown:sa=>sa.stopPropagation(),children:(0,cw.jsx)(P,{className:"tl-backlinks-count "+(ea?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})}),dw=ba(612),YF=Ke(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:n}},components:{BacklinksCount:P}}=ld();var ea=bf();if(!P)throw Error("Expected a BacklinksCount component.");const ka=sa=>sa.stopPropagation();
ea=50>a.height*n||!ea.selectedShapesArray.includes(d)||d.hideSelection;return(0,dw.jsx)(Mr,{bounds:a,className:"tl-backlinks-count-container",children:(0,dw.jsx)(Lo,{children:(0,dw.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:ka,onWheelCapture:ka,onKeyDown:ka,title:"Shape Backlinks",children:(0,dw.jsx)(P,{className:"tl-backlinks-count "+(ea?"tl-backlinks-count-rounded":""),id:d.id,
shape:d})})})})}),ZF=gg(ba(21)),nB=ba(612),$F=Ke(function({bounds:a,hidden:d,shapes:n,rotation:P=0,detail:ea="size"}){const {components:{SelectionDetail:ka},viewport:{camera:{zoom:sa}}}=ld(),La=ZF.useRef(null),Ua=ig.multiplyBounds(a,sa);yb(La,a,P,10003);if(!ka)throw Error("Expected a SelectionDetail component.");return(0,nB.jsx)("div",{ref:La,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,nB.jsx)(ka,
{shapes:n,bounds:a,scaledBounds:Ua,zoom:sa,rotation:P,detail:ea})})}),oB=ba(612),aG=Ke(function({shape:a,isHovered:d=!1,isSelected:n=!1,isBinding:P=!1,isErasing:ea=!1,isEditing:ka=!1,onEditingEnd:sa,asset:La,meta:Ua,zIndex:eb}){const {bounds:lb,props:{rotation:rb,scale:Vb},ReactComponent:Zb}=a,Tb=bf(),sc=Mh(a);var Kc=Tb.getParentGroup(a);Kc=Tb.selectedIds.has(null==Kc?void 0:Kc.id);return(0,oB.jsx)(Mr,{"data-shape-id":a.id,"data-html2canvas-ignore":!n&&!Kc&&0!==Tb.selectedShapes.size||null,zIndex:eb,
"data-type":"Shape",bounds:lb,rotation:rb,scale:Vb,children:(0,oB.jsx)(Zb,{meta:Ua,isEditing:ka,isBinding:P,isHovered:d,isSelected:n,isErasing:ea,events:sc,asset:La,onEditingEnd:sa})})}),Ut=ba(612),pB=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],bG=Ke(function({size:a}){const {viewport:{camera:{point:d,zoom:n}}}=ld();return(0,Ut.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,Ut.jsx)("defs",{children:pB.map(([P,ea,
ka],sa)=>{ka=ka*a*n;var La=d[0]*n,Ua=d[1]*n;La=0<La?La%ka:ka+La%ka;Ua=0<Ua?Ua%ka:ka+Ua%ka;P=oj(n,[P,ea],[0,1]);return(0,Ut.jsx)("pattern",{id:`grid-${sa}`,width:ka,height:ka,patternUnits:"userSpaceOnUse",children:!(2<P||.1>P)&&(0,Ut.jsx)("circle",{className:"tl-grid-dot",cx:La,cy:Ua,r:1.5,opacity:Math.max(0,Math.min(P,1))})},`grid-pattern-${sa}`)})}),pB.map((P,ea)=>(0,Ut.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${ea})`},`grid-rect-${ea}`))]})}),qB=Ke(function({size:a}){return(0,Ut.jsx)(bG,
{size:a})}),rB=ba(612),sB=Ke(function({bounds:a}){const d=Rd("background");return(0,rB.jsx)(hp,$f(Ie({"data-html2canvas-ignore":"true"},d),{children:(0,rB.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});ba(21);var tB=ba(612),uB=Ke(function({scaledBounds:a,shapes:d,detail:n="size",rotation:P=0}){var ea;const ka=1===d.length?P:null!=(ea=a.rotation)?ea:0;return(0,tB.jsx)(Lo,{centered:!0,children:(0,tB.jsx)("div",{className:"tl-bounds-detail",
style:{transform:ka<Pn||ka>3*Pn?`rotate(${ka}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+ka}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${De.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===n?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${xm.radiansToDegrees(xm.clampRadians(P)).toFixed()}\xB0`})})}),Nx=ba(612),cG={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},ew=Ke(function({cx:a,cy:d,size:n,targetSize:P,corner:ea,isHidden:ka}){const sa=Rd(ea);return(0,Nx.jsxs)("g",$f(Ie({opacity:ka?0:1},sa),{children:[(0,Nx.jsx)("rect",{className:"tl-transparent "+(ka?"":cG[ea]),"aria-label":`${ea} target`,x:a-1.25*P,y:d-1.25*P,width:2.5*P,height:2.5*P,pointerEvents:ka?"none":"all"}),(0,Nx.jsx)("rect",{className:"tl-corner-handle","aria-label":`${ea} handle`,x:a-n/2,y:d-n/2,width:n,height:n,pointerEvents:"none"})]}))}),
fw=ba(612),Ox=Ke(function({cx:a,cy:d,size:n,direction:P,isHidden:ea}){const ka=bf();return(0,fw.jsxs)("g",{className:"tl-clone-handle",opacity:ea?0:1,children:[(0,fw.jsx)("circle",{"aria-label":`${P} handle`,pointerEvents:"all",onPointerDown:sa=>ka.api.clone(P),cx:a,cy:d,r:n}),(0,fw.jsx)("line",{x1:a-n/2,y1:d,x2:a+n/2,y2:d}),(0,fw.jsx)("line",{x1:a,y1:d-n/2,x2:a,y2:d+n/2})]})}),dG=ba(612),eG={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},gw=
Ke(function({x:a,y:d,width:n,height:P,targetSize:ea,edge:ka,disabled:sa,isHidden:La}){const Ua=Rd(ka);return(0,dG.jsx)("rect",Ie({pointerEvents:La||sa?"none":"all",className:"tl-transparent tl-edge-handle "+(La?"":eG[ka]),"aria-label":`${ka} target`,opacity:La?0:1,x:a-ea,y:d-ea,width:Math.max(1,n+2*ea),height:Math.max(1,P+2*ea)},Ua))}),Px=ba(612);Ke(function({cx:a,cy:d,size:n,targetSize:P,isHidden:ea}){const ka=Rd("rotate");return(0,Px.jsxs)("g",$f(Ie({opacity:ea?0:1},ka),{children:[(0,Px.jsx)("circle",
{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:P,pointerEvents:ea?"none":"all"}),(0,Px.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:n/2,pointerEvents:"none"})]}))});ba(21);var vB=ba(612),hw=Ke(function({cx:a,cy:d,targetSize:n,corner:P,isHidden:ea}){const ka=Rd(P);return(0,vB.jsx)("g",$f(Ie({opacity:ea?0:1},ka),{children:(0,vB.jsx)("rect",{className:"tl-transparent","aria-label":`${P} target`,x:a-2.5*n,y:d-2.5*n,width:3*n,height:3*n,pointerEvents:ea?
"none":"all"})}))}),Ul=ba(612),wB=Ke(function({bounds:a,showResizeHandles:d,showRotateHandles:n,showCloneHandles:P,shapes:ea}){var ka,sa;const La=bf();let {width:Ua,height:eb}=a;var lb=La.viewport.camera.zoom;a=8/lb;const rb=6/lb;lb=30/lb;const Vb=2*a,Zb=1===ea.length?ea[0].canResize:[!0,!0],Tb=null!=(sa=null==(ka=La.editingShape)?void 0:ka.props.borderRadius)?sa:0;return(0,Ul.jsx)(Ul.Fragment,{children:0<ea.length&&(0,Ul.jsxs)(hp,{children:[!La.editingShape&&(0,Ul.jsx)("rect",{className:"tl-bounds-fg",
width:Math.max(Ua,1),height:Math.max(eb,1),rx:Tb,ry:Tb,pointerEvents:"none"}),(0,Ul.jsx)(gw,{x:2*rb,y:0,width:Ua-4*rb,height:0,targetSize:rb,edge:"top_edge",disabled:!Zb[1],isHidden:!d}),(0,Ul.jsx)(gw,{x:Ua,y:2*rb,width:0,height:eb-4*rb,targetSize:rb,edge:"right_edge",disabled:!Zb[0],isHidden:!d}),(0,Ul.jsx)(gw,{x:2*rb,y:eb,width:Ua-4*rb,height:0,targetSize:rb,edge:"bottom_edge",disabled:!Zb[1],isHidden:!d}),(0,Ul.jsx)(gw,{x:0,y:2*rb,width:0,height:eb-4*rb,targetSize:rb,edge:"left_edge",disabled:!Zb[0],
isHidden:!d}),(0,Ul.jsx)(hw,{cx:0,cy:0,targetSize:rb,corner:"top_left_resize_corner",isHidden:!n}),(0,Ul.jsx)(hw,{cx:Ua+2*rb,cy:0,targetSize:rb,corner:"top_right_resize_corner",isHidden:!n}),(0,Ul.jsx)(hw,{cx:Ua+2*rb,cy:eb+2*rb,targetSize:rb,corner:"bottom_right_resize_corner",isHidden:!n}),(0,Ul.jsx)(hw,{cx:0,cy:eb+2*rb,targetSize:rb,corner:"bottom_left_resize_corner",isHidden:!n}),(0,Ul.jsx)(Ox,{cx:-lb,cy:eb/2,size:Vb,direction:"left",isHidden:!P}),(0,Ul.jsx)(Ox,{cx:Ua+lb,cy:eb/2,size:Vb,direction:"right",
isHidden:!P}),(0,Ul.jsx)(Ox,{cx:Ua/2,cy:eb+lb,size:Vb,direction:"down",isHidden:!P}),(null==Zb?void 0:Zb.every(sc=>sc))&&(0,Ul.jsxs)(Ul.Fragment,{children:[(0,Ul.jsx)(ew,{cx:0,cy:0,size:a,targetSize:rb,corner:"top_left_corner",isHidden:!d}),(0,Ul.jsx)(ew,{cx:Ua,cy:0,size:a,targetSize:rb,corner:"top_right_corner",isHidden:!d}),(0,Ul.jsx)(ew,{cx:Ua,cy:eb,size:a,targetSize:rb,corner:"bottom_right_corner",isHidden:!d}),(0,Ul.jsx)(ew,{cx:0,cy:eb,size:a,targetSize:rb,corner:"bottom_left_corner",isHidden:!d})]})]})})}),
Qx=ba(612),xB=Ke(function({bounds:a}){return(0,Qx.jsx)(Mr,{bounds:a,zIndex:10001,children:(0,Qx.jsx)(hp,{children:(0,Qx.jsx)("rect",{className:"tl-brush",x:0,y:0,width:a.width,height:a.height})})})}),yB=ba(612);Ke(function(){return(0,yB.jsx)(yB.Fragment,{})});var Rx=ba(612),zB=Ke(function({shape:a,handle:d,id:n}){a=Md(a,n);const [P,ea]=d.point;return(0,Rx.jsxs)("g",$f(Ie({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${P}, ${ea})`,children:[(0,Rx.jsx)("circle",{className:"tl-handle-bg",
pointerEvents:"all"}),(0,Rx.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),AB=gg(ba(21)),Sx=ba(612),Tx=Ke(function({direction:a}){const {viewport:{bounds:d}}=ld(),n=AB.useRef(null);AB.useLayoutEffect(()=>{const P=n.current;if(P){var ea=[d.width/2,d.height/2],ka=ig.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[sa,La]]of ka)ka=v(ea,a,sa,La),ka.didIntersect&&(ka=ka.points[0],P.style.transform=`translate(${ka[0]-6}px,${ka[1]-6}px) rotate(${De.toAngle(a)}rad)`)}},
[a,d]);return(0,Sx.jsx)("div",{ref:n,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,Sx.jsx)("svg",{height:12,width:12,children:(0,Sx.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),bl=ba(612),fG=Ke(function({id:a,className:d,brush:n,shapes:P,assets:ea,bindingShapes:ka,editingShape:sa,hoveredShape:La,hoveredGroup:Ua,selectionBounds:eb,selectedShapes:lb,erasingShapes:rb,selectionDirectionHint:Vb,cursor:Zb="default",cursorRotation:Tb=0,selectionRotation:sc=0,showSelection:Kc=
!0,showHandles:fc=!0,showSelectionRotation:zc=!1,showResizeHandles:vc=!0,showRotateHandles:$c=!0,showCloneHandles:ed=!0,showSelectionDetail:Wd=!0,showContextBar:me=!0,showGrid:Kf=!0,gridSize:Oe=8,onEditingEnd:nf=ZE,theme:mg=Kq,children:wf}){var bg;const ke=Xu.useRef(null),{viewport:Pd,components:be,meta:Jd}=ld(),ee=bf(),xf=Xu.useCallback(Yf=>{ee.inputs.updateContainerOffset([Yf.minX,Yf.minY])},[]);Se(mg,a);yd(ke);re(ke,Pd,xf);Ej(ke);Qe();Fe(ke,Zb,Tb);Ve(ke);uh(ke);a=jf();const Of=(Zb=1===(null==lb?
void 0:lb.length)&&lb[0])&&"handles"in Zb.props?null==lb?void 0:lb[0]:void 0,Kg=Xu.useMemo(()=>new Set(lb||[]),[lb]),xh=Xu.useMemo(()=>new Set(rb||[]),[rb]);Zb=1===(null==lb?void 0:lb.length)?lb[0]:void 0;Ua=[...(new Set([Ua,La]))].filter(pc);return(0,bl.jsxs)("div",{ref:ke,className:`tl-container ${null!=d?d:""}`,children:[(0,bl.jsxs)("div",$f(Ie({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[Kf&&be.Grid&&(0,bl.jsx)(be.Grid,{size:Oe}),(0,bl.jsxs)(kB,{children:[be.SelectionBackground&&
lb&&eb&&Kc&&(0,bl.jsx)(Mr,{"data-type":"SelectionBackground",bounds:eb,zIndex:2,"data-html2canvas-ignore":"true",children:(0,bl.jsx)(be.SelectionBackground,{shapes:lb,bounds:eb,showResizeHandles:vc,showRotateHandles:$c})}),P&&P.map((Yf,Jh)=>(0,bl.jsx)(aG,{shape:Yf,asset:ea&&Yf.props.assetId?ea[Yf.props.assetId]:void 0,isEditing:Yf===sa,isHovered:Yf===La,isBinding:null==ka?void 0:ka.includes(Yf),isSelected:Kg.has(Yf),isErasing:xh.has(Yf),meta:Jd,zIndex:1E3+Jh,onEditingEnd:nf},"shape_"+Yf.id)),!ee.isIn("select.pinching")&&
(null==lb?void 0:lb.map(Yf=>(0,bl.jsx)(lB,{shape:Yf,isEditing:Yf===sa,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:Yf.props.isLocked},"selected_indicator_"+Yf.id))),Ua.map(Yf=>Yf!==sa&&(0,bl.jsx)(lB,{shape:Yf},"hovered_indicator_"+Yf.id)),Zb&&be.BacklinksCount&&(0,bl.jsx)(YF,{hidden:!1,bounds:Zb.bounds,shape:Zb}),La&&La!==Zb&&be.QuickLinks&&(0,bl.jsx)(XF,{hidden:!1,bounds:La.bounds,shape:La}),n&&be.Brush&&(0,bl.jsx)(be.Brush,{bounds:n}),lb&&eb&&(0,bl.jsxs)(bl.Fragment,{children:[Kc&&be.SelectionForeground&&
(0,bl.jsx)(Mr,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:eb,zIndex:sa&&lb.includes(sa)?1002:10002,children:(0,bl.jsx)(be.SelectionForeground,{shapes:lb.filter(Yf=>!Yf.props.isLocked),bounds:eb,showResizeHandles:vc,showRotateHandles:$c,showCloneHandles:ed})}),fc&&Of&&be.Handle&&(0,bl.jsx)(Mr,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:eb,zIndex:10003,children:(0,bl.jsx)(hp,{children:Object.entries(null!=(bg=Of.props.handles)?bg:
{}).map(([Yf,Jh])=>Xu.createElement(be.Handle,{key:`${Jh.id}_handle_${Jh.id}`,shape:Of,handle:Jh,id:Yf}))})}),lb&&be.SelectionDetail&&(0,bl.jsx)($F,{"data-html2canvas-ignore":"true",shapes:lb,bounds:eb,detail:zc?"rotation":"size",hidden:!Wd,rotation:sc},"detail"+lb.map(Yf=>Yf.id).join(""))]})]}),Vb&&eb&&lb&&(0,bl.jsx)(Tx,{direction:Vb,bounds:eb,shapes:lb}),(0,bl.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,bl.jsx)(kB,{children:lb&&eb&&(0,bl.jsx)(bl.Fragment,
{children:lb&&be.ContextBar&&(0,bl.jsx)(VF,{shapes:lb.filter(Yf=>!Yf.props.isLocked),hidden:!me,bounds:Zb?Zb.bounds:eb,rotation:Zb?Zb.props.rotation:0},"context"+lb.map(Yf=>Yf.id).join(""))})}),wf]})}),BB=gg(ba(21)),CB=gg(ba(21)),DB=ba(612);Ke(function({children:a}){const d=CB.useRef(null),{viewport:n}=ld();CB.useEffect(()=>tc(()=>{const P=d.current;if(P){var {zoom:ea,point:ka}=n.camera;P.style.transform=`scale(${ea}) translateX(${ka[0]}px) translateY(${ka[1]}px)`}}),[]);return(0,DB.jsx)("svg",{className:"tl-absolute tl-overlay",
pointerEvents:"none",children:(0,DB.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});var gG=ba(612),hG=Ke(function(a){const d=Qc(a),n=Ue(a.id);nd(d,a);Ec(d,a);return(0,gG.jsx)(n.Provider,{value:d,children:a.children})}),iG=ba(612),jG=Ke(function({id:a="noid",viewport:d,inputs:n,callbacks:P=Kq,meta:ea=Kq,components:ka=Kq,children:sa}){const [La,Ua]=BB.useState(()=>{const {Brush:lb,ContextBar:rb,DirectionIndicator:Vb,Grid:Zb,Handle:Tb,SelectionBackground:sc,SelectionDetail:Kc,SelectionForeground:fc}=
ka,zc=wg(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:a,viewport:d,inputs:n,callbacks:P,meta:ea,components:$f(Ie({},zc),{Brush:null===lb?void 0:xB,ContextBar:rb,DirectionIndicator:null===Vb?void 0:Tx,Grid:null===Zb?void 0:qB,Handle:null===Tb?void 0:zB,SelectionBackground:null===sc?void 0:sB,SelectionDetail:null===Kc?void 0:uB,SelectionForeground:null===fc?void 0:wB})}});BB.useLayoutEffect(()=>{const {Brush:lb,ContextBar:rb,
DirectionIndicator:Vb,Grid:Zb,Handle:Tb,SelectionBackground:sc,SelectionDetail:Kc,SelectionForeground:fc}=ka,zc=wg(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return tc(()=>{Ua({id:a,viewport:d,inputs:n,callbacks:P,meta:ea,components:$f(Ie({},zc),{Brush:null===lb?void 0:xB,ContextBar:rb,DirectionIndicator:null===Vb?void 0:Tx,Grid:null===Zb?void 0:qB,Handle:null===Tb?void 0:zB,SelectionBackground:null===sc?void 0:sB,SelectionDetail:null===
Kc?void 0:uB,SelectionForeground:null===fc?void 0:wB})})})},[]);const eb=Nc(a);return(0,iG.jsx)(eb.Provider,{value:La,children:sa})}),EB=ba(612),kG=ba(612),lG=Ke(function(a){const d=bf();return(0,kG.jsx)(Nh,Ie({viewport:d.viewport,inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,
erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,penMode:d.settings.penMode,showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,showCloneHandles:d.showCloneHandles,showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},
a))});ba(612);var Vt=gg(ba(21)),Nr=gg(ba(21)),mG=ba(612),nG="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),oi=a=>{var {name:d,className:n}=a;a=wg(a,["name","className"]);const P=nG.includes(d)?"tie tie-":"ti ti-";return(0,mG.jsx)("i",Ie({className:[P+d,n].join(" ")},
a))},ii=ba(21),oG=ba(21),Us=ba(21),jo=ba(21),Ux=ba(21),pG=ba(30),ln=ba(21),kq=(0,ln.forwardRef)((a,d)=>{var {children:n}=a;a=wg(a,["children"]);const P=ln.Children.toArray(n),ea=P.find(wh);if(ea){const ka=ea.props.children;n=P.map(sa=>sa===ea?1<ln.Children.count(ka)?ln.Children.only(null):(0,ln.isValidElement)(ka)?ka.props.children:null:sa);return(0,ln.createElement)(Vx,of({},a,{ref:d}),(0,ln.isValidElement)(ka)?(0,ln.cloneElement)(ka,void 0,n):null)}return(0,ln.createElement)(Vx,of({},a,{ref:d}),
n)});kq.displayName="Slot";var Vx=(0,ln.forwardRef)((a,d)=>{const {children:n}=a;a=wg(a,["children"]);return(0,ln.isValidElement)(n)?(0,ln.cloneElement)(n,$f(Ie({},jm(a,n.props)),{ref:yh(d,n.ref)})):1<ln.Children.count(n)?ln.Children.only(null):null});Vx.displayName="SlotClone";var FB=({children:a})=>(0,ln.createElement)(ln.Fragment,null,a),jl="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const n=(0,Ux.forwardRef)((P,ea)=>{var {asChild:ka}=P;P=wg(P,["asChild"]);
ka=ka?kq:d;(0,Ux.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Ux.createElement)(ka,of({},P,{ref:ea}))});n.displayName=`Primitive.${d}`;return $f(Ie({},a),{[d]:n})},{}),Wx=ba(21),qG=ba(21),GB,rG=(0,jo.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xx=(0,jo.forwardRef)((a,d)=>{var n;const {disableOutsidePointerEvents:P=!1,onEscapeKeyDown:ea,onPointerDownOutside:ka,onFocusOutside:sa,onInteractOutside:La,onDismiss:Ua}=a,eb=wg(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),
lb=(0,jo.useContext)(rG),[rb,Vb]=(0,jo.useState)(null),Zb=null!==(n=null===rb||void 0===rb?void 0:rb.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Tb]=(0,jo.useState)({});d=Zh(d,vc=>Vb(vc));n=Array.from(lb.layers);var [sc]=[...lb.layersWithOutsidePointerEventsDisabled].slice(-1);sc=n.indexOf(sc);const Kc=rb?n.indexOf(rb):-1;n=0<lb.layersWithOutsidePointerEventsDisabled.size;const fc=Kc>=sc;sc=Zj(vc=>{const $c=vc.target,ed=[...lb.branches].some(Wd=>
Wd.contains($c));fc&&!ed&&(null===ka||void 0===ka||ka(vc),null===La||void 0===La||La(vc),vc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Zb);const zc=zk(vc=>{const $c=vc.target;[...lb.branches].some(ed=>ed.contains($c))||(null===sa||void 0===sa||sa(vc),null===La||void 0===La||La(vc),vc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Zb);Uk(vc=>{Kc===lb.layers.size-1&&(null===ea||void 0===ea||ea(vc),!vc.defaultPrevented&&Ua&&(vc.preventDefault(),Ua()))},Zb);(0,jo.useEffect)(()=>{if(rb)return P&&
(0===lb.layersWithOutsidePointerEventsDisabled.size&&(GB=Zb.body.style.pointerEvents,Zb.body.style.pointerEvents="none"),lb.layersWithOutsidePointerEventsDisabled.add(rb)),lb.layers.add(rb),Rl(),()=>{P&&1===lb.layersWithOutsidePointerEventsDisabled.size&&(Zb.body.style.pointerEvents=GB)}},[rb,Zb,P,lb]);(0,jo.useEffect)(()=>()=>{rb&&(lb.layers.delete(rb),lb.layersWithOutsidePointerEventsDisabled.delete(rb),Rl())},[rb,lb]);(0,jo.useEffect)(()=>{const vc=()=>Tb({});document.addEventListener("dismissableLayer.update",
vc);return()=>document.removeEventListener("dismissableLayer.update",vc)},[]);return(0,jo.createElement)(jl.div,of({},eb,{ref:d,style:Ie({pointerEvents:n?fc?"auto":"none":void 0},a.style),onFocusCapture:Ng(a.onFocusCapture,zc.onFocusCapture),onBlurCapture:Ng(a.onBlurCapture,zc.onBlurCapture),onPointerDownCapture:Ng(a.onPointerDownCapture,sc.onPointerDownCapture)}))}),HB=gg(ba(21)),sG=ba(21),Um=(null===globalThis||void 0===globalThis?0:globalThis.document)?sG.useLayoutEffect:()=>{},tG=HB["useId".toString()]||
(()=>{}),uG=0,om=ba(21),vG=(a,d,n)=>Ji(void 0,null,function*(){const {placement:P="bottom",strategy:ea="absolute",middleware:ka=[],platform:sa}=n,La=yield null==sa.isRTL?void 0:sa.isRTL(d);let Ua=yield sa.getElementRects({reference:a,floating:d,strategy:ea}),{x:eb,y:lb}=ol(Ua,P,La),rb=P,Vb={},Zb=0;for(let Tb=0;Tb<ka.length;Tb++){const {name:sc,fn:Kc}=ka[Tb],{x:fc,y:zc,data:vc,reset:$c}=yield Kc({x:eb,y:lb,initialPlacement:P,placement:rb,strategy:ea,middlewareData:Vb,rects:Ua,platform:sa,elements:{reference:a,
floating:d}});eb=null!=fc?fc:eb;lb=null!=zc?zc:lb;Vb=$f(Ie({},Vb),{[sc]:Ie(Ie({},Vb[sc]),vc)});$c&&50>=Zb&&(Zb++,"object"==typeof $c&&($c.placement&&(rb=$c.placement),$c.rects&&(Ua=!0===$c.rects?yield sa.getElementRects({reference:a,floating:d,strategy:ea}):$c.rects),{x:eb,y:lb}=ol(Ua,rb,La)),Tb=-1)}return{x:eb,y:lb,placement:rb,strategy:ea,middlewareData:Vb}}),Yx=Math.min,Oq=Math.max,IB=a=>({name:"arrow",options:a,fn(d){return Ji(this,null,function*(){const {element:n,padding:P=0}=null!=a?a:{},{x:ea,
y:ka,placement:sa,rects:La,platform:Ua}=d;if(null==n)return{};const eb=Pm(P),lb={x:ea,y:ka},rb=Ik(sa),Vb=sa.split("-")[1],Zb=km(rb);var Tb=yield Ua.getDimensions(n);const sc="y"===rb?"top":"left",Kc="y"===rb?"bottom":"right";var fc=La.reference[Zb]+La.reference[rb]-lb[rb]-La.floating[Zb];const zc=lb[rb]-La.reference[rb];var vc=yield null==Ua.getOffsetParent?void 0:Ua.getOffsetParent(n);let $c=vc?"y"===rb?vc.clientHeight||0:vc.clientWidth||0:0;0===$c&&($c=La.floating[Zb]);vc=eb[sc];const ed=$c-Tb[Zb]-
eb[Kc];Tb=$c/2-Tb[Zb]/2+(fc/2-zc/2);fc=Oq(vc,Yx(Tb,ed));return{[rb]:lb[rb]-(0<("start"===Vb?eb[sc]:eb[Kc])&&Tb!==fc&&La.reference[Zb]<=La.floating[Zb]?Tb<vc?vc-Tb:ed-Tb:0),data:{[rb]:fc,centerOffset:Tb-fc}}})}}),wG={left:"right",right:"left",bottom:"top",top:"bottom"},xG={start:"end",end:"start"},JB=["top","right","bottom","left"];JB.reduce((a,d)=>a.concat(d,d+"-start",d+"-end"),[]);var KB=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return Ji(this,null,function*(){var n;const {placement:P,
middlewareData:ea,rects:ka,initialPlacement:sa,platform:La,elements:Ua}=d;var eb=a;const {mainAxis:lb=!0,crossAxis:rb=!0,fallbackPlacements:Vb,fallbackStrategy:Zb="bestFit",flipAlignment:Tb=!0}=eb;eb=wg(eb,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const sc=Ri(P);var Kc=Vb||(sc!==sa&&Tb?function(Wd){const me=nl(Wd);return[xj(Wd),me,xj(me)]}(sa):[nl(sa)]);Kc=[sa,...Kc];const fc=yield zl(d,eb),zc=[];eb=(null==(n=ea.flip)?void 0:n.overflows)||[];if(lb&&zc.push(fc[sc]),
rb){const {main:Wd,cross:me}=Vk(P,ka,yield null==La.isRTL?void 0:La.isRTL(Ua.floating));zc.push(fc[Wd],fc[me])}if(eb=[...eb,{placement:P,overflows:zc}],!zc.every(Wd=>0>=Wd)){var vc,$c;n=(null!=(vc=null==($c=ea.flip)?void 0:$c.index)?vc:0)+1;if(vc=Kc[n])return{data:{index:n,overflows:eb},reset:{placement:vc}};vc="bottom";switch(Zb){case "bestFit":var ed;($c=null==(ed=eb.map(Wd=>[Wd,Wd.overflows.filter(me=>0<me).reduce((me,Kf)=>me+Kf,0)]).sort((Wd,me)=>Wd[1]-me[1])[0])?void 0:ed[0].placement)&&(vc=
$c);break;case "initialPlacement":vc=sa}if(P!==vc)return{reset:{placement:vc}}}return{}})}}},LB=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,n=wg(a,["strategy"]);return{name:"hide",fn(P){return Ji(this,null,function*(){var {rects:ea}=P;switch(d){case "referenceHidden":return ea=Kk(yield zl(P,$f(Ie({},n),{elementContext:"reference"})),ea.reference),{data:{referenceHiddenOffsets:ea,referenceHidden:nk(ea)}};case "escaped":return ea=Kk(yield zl(P,$f(Ie({},n),{altBoundary:!0})),ea.floating),
{data:{escapedOffsets:ea,escaped:nk(ea)}};default:return{}}})}}},MB=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return Ji(this,null,function*(){const {x:n,y:P}=d,ea=yield function(ka,sa){return Ji(this,null,function*(){const {placement:La,platform:Ua,elements:eb}=ka;var lb=yield null==Ua.isRTL?void 0:Ua.isRTL(eb.floating),rb=Ri(La);const Vb=La.split("-")[1],Zb="x"===Ik(La);rb=["left","top"].includes(rb)?-1:1;lb=lb&&Zb?-1:1;const Tb="function"==typeof sa?sa(ka):sa;let {mainAxis:sc,
crossAxis:Kc,alignmentAxis:fc}="number"==typeof Tb?{mainAxis:Tb,crossAxis:0,alignmentAxis:null}:Ie({mainAxis:0,crossAxis:0,alignmentAxis:null},Tb);return Vb&&"number"==typeof fc&&(Kc="end"===Vb?-1*fc:fc),Zb?{x:Kc*lb,y:sc*rb}:{x:sc*rb,y:Kc*lb}})}(d,a);return{x:n+ea.x,y:P+ea.y,data:ea}})}}},NB=function(a){return void 0===a&&(a={}),{name:"shift",options:a,fn(d){return Ji(this,null,function*(){const {x:n,y:P,placement:ea}=d;var ka=a;const {mainAxis:sa=!0,crossAxis:La=!1,limiter:Ua={fn:Zb=>{let {x:Tb,
y:sc}=Zb;return{x:Tb,y:sc}}}}=ka;var eb=wg(ka,["mainAxis","crossAxis","limiter"]);ka={x:n,y:P};eb=yield zl(d,eb);const lb=Ik(Ri(ea)),rb="x"===lb?"y":"x";let Vb=ka[lb];ka=ka[rb];sa&&(Vb=Oq(Vb+eb["y"===lb?"top":"left"],Yx(Vb,Vb-eb["y"===lb?"bottom":"right"])));La&&(ka=Oq(ka+eb["y"===rb?"top":"left"],Yx(ka,ka-eb["y"===rb?"bottom":"right"])));ka=Ua.fn($f(Ie({},d),{[lb]:Vb,[rb]:ka}));return $f(Ie({},ka),{data:{x:ka.x-n,y:ka.y-P}})})}}},OB=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:n,
y:P,placement:ea,rects:ka,middlewareData:sa}=d,{offset:La=0,mainAxis:Ua=!0,crossAxis:eb=!0}=a;var lb={x:n,y:P};d=Ik(ea);const rb="x"===d?"y":"x";let Vb=lb[d];lb=lb[rb];var Zb="function"==typeof La?La($f(Ie({},ka),{placement:ea})):La;Zb="number"==typeof Zb?{mainAxis:Zb,crossAxis:0}:Ie({mainAxis:0,crossAxis:0},Zb);if(Ua){var Tb="y"===d?"height":"width",sc=ka.reference[d]-ka.floating[Tb]+Zb.mainAxis;Tb=ka.reference[d]+ka.reference[Tb]-Zb.mainAxis;Vb<sc?Vb=sc:Vb>Tb&&(Vb=Tb)}if(eb){var Kc,fc,zc,vc;const $c=
"y"===d?"width":"height";sc=["top","left"].includes(Ri(ea));Tb=ka.reference[rb]-ka.floating[$c]+(sc&&null!=(Kc=null==(fc=sa.offset)?void 0:fc[rb])?Kc:0)+(sc?0:Zb.crossAxis);Kc=ka.reference[rb]+ka.reference[$c]+(sc?0:null!=(zc=null==(vc=sa.offset)?void 0:vc[rb])?zc:0)-(sc?Zb.crossAxis:0);lb<Tb?lb=Tb:lb>Kc&&(lb=Kc)}return{[d]:Vb,[rb]:lb}}}},yG=function(a){return void 0===a&&(a={}),{name:"size",options:a,fn(d){return Ji(this,null,function*(){const {placement:n,rects:P,platform:ea,elements:ka}=d;var sa=
a,{apply:La}=sa;sa=wg(sa,["apply"]);sa=yield zl(d,sa);var Ua=Ri(n),eb=n.split("-")[1],lb,rb;"top"===Ua||"bottom"===Ua?(lb=Ua,rb=eb===((yield null==ea.isRTL?void 0:ea.isRTL(ka.floating))?"start":"end")?"left":"right"):(rb=Ua,lb="end"===eb?"top":"bottom");Ua=Oq(sa.left,0);eb=Oq(sa.right,0);const Vb=Oq(sa.top,0),Zb=Oq(sa.bottom,0);rb={availableHeight:P.floating.height-(["left","right"].includes(n)?2*(0!==Vb||0!==Zb?Vb+Zb:Oq(sa.top,sa.bottom)):sa[lb]),availableWidth:P.floating.width-(["top","bottom"].includes(n)?
2*(0!==Ua||0!==eb?Ua+eb:Oq(sa.left,sa.right)):sa[rb])};lb=yield ea.getDimensions(ka.floating);null==La||La(Ie(Ie({},d),rb));La=yield ea.getDimensions(ka.floating);return lb.width!==La.width||lb.height!==La.height?{reset:{rects:!0}}:{}})}}},PB=Math.min,Yu=Math.max,iw=Math.round,zG={getClippingRect:function(a){let {element:d,boundary:n,rootBoundary:P,strategy:ea}=a;a=[...("clippingAncestors"===n?Ao(d):[].concat(n)),P];a=a.reduce((ka,sa)=>{sa=On(d,sa,ea);return ka.top=Yu(sa.top,ka.top),ka.right=PB(sa.right,
ka.right),ka.bottom=PB(sa.bottom,ka.bottom),ka.left=Yu(sa.left,ka.left),ka},On(d,a[0],ea));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,offsetParent:n,strategy:P}=a;var ea=sk(n);const ka=Bk(n);if(n===ka)return d;a={scrollLeft:0,scrollTop:0};var sa=0,La=0;(ea||!ea&&"fixed"!==P)&&(("body"!==hj(n)||Fj(ka))&&(a=Om(n)),sk(n))&&(ea=ak(n,!0),sa=ea.x+n.clientLeft,La=ea.y+n.clientTop);return $f(Ie({},d),{x:d.x-
a.scrollLeft+sa,y:d.y-a.scrollTop+La})},isElement:fk,getDimensions:Qk,getOffsetParent:gk,getDocumentElement:Bk,getElementRects:a=>{let {reference:d,floating:n,strategy:P}=a;a=gk(n);var ea=sk(a);const ka=Bk(a);var sa;if(sa=ea)sa=ak(a),sa=iw(sa.width)!==a.offsetWidth||iw(sa.height)!==a.offsetHeight;sa=ak(d,sa,"fixed"===P);let La={scrollLeft:0,scrollTop:0};var Ua=0,eb=0;if(ea||!ea&&"fixed"!==P)(("body"!==hj(a)||Fj(ka))&&(La=Om(a)),sk(a))?(ea=ak(a,!0),Ua=ea.x+a.clientLeft,eb=ea.y+a.clientTop):ka&&(Ua=
io(ka));return{reference:{x:sa.left+La.scrollLeft-Ua,y:sa.top+La.scrollTop-eb,width:sa.width,height:sa.height},floating:$f(Ie({},Qk(n)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===Nj(a).direction},AG=(a,d,n)=>vG(a,d,Ie({platform:zG},n)),Mo=gg(ba(21),1),QB=ba(21),BG=gg(ba(30),1),Zx="undefined"!==typeof document?QB.useLayoutEffect:QB.useEffect,RB=a=>{const {element:d,padding:n}=a;return{name:"arrow",options:a,fn(P){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=
d.current)return IB({element:d.current,padding:n}).fn(P)}else if(d)return IB({element:d,padding:n}).fn(P);return{}}}},$x=ba(21),CG=(0,$x.forwardRef)((a,d)=>{const {children:n,width:P=10,height:ea=5}=a,ka=wg(a,["children","width","height"]);return(0,$x.createElement)(jl.svg,of({},ka,{ref:d,width:P,height:ea,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?n:(0,$x.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),DG=ba(21),[ay,Wt]=Ci("Popper"),[EG,SB]=ay("Popper"),by=(0,om.forwardRef)((a,
d)=>{const {__scopePopper:n,virtualRef:P}=a;a=wg(a,["__scopePopper","virtualRef"]);const ea=SB("PopperAnchor",n),ka=(0,om.useRef)(null);d=Zh(d,ka);(0,om.useEffect)(()=>{ea.onAnchorChange((null===P||void 0===P?void 0:P.current)||ka.current)});return P?null:(0,om.createElement)(jl.div,of({},a,{ref:d}))}),[FG,GG]=ay("PopperContent"),[HG,IG]=ay("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),cy=(0,om.forwardRef)((a,d)=>{var n,P,ea,ka,sa,La,Ua,eb;const {__scopePopper:lb,side:rb="bottom",sideOffset:Vb=
0,align:Zb="center",alignOffset:Tb=0,arrowPadding:sc=0,collisionBoundary:Kc=[],collisionPadding:fc=0,sticky:zc="partial",hideWhenDetached:vc=!1,avoidCollisions:$c=!0}=a;a=wg(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const ed=SB("PopperContent",lb),[Wd,me]=(0,om.useState)(null);d=Zh(d,el=>me(el));const [Kf,Oe]=(0,om.useState)(null);var nf=Cb(Kf),mg=null!==(n=null===nf||void 0===nf?void 0:nf.width)&&
void 0!==n?n:0;n=null!==(P=null===nf||void 0===nf?void 0:nf.height)&&void 0!==P?P:0;P=rb+("center"!==Zb?"-"+Zb:"");nf="number"===typeof fc?fc:Ie({top:0,right:0,bottom:0,left:0},fc);const wf=Array.isArray(Kc)?Kc:[Kc],bg=0<wf.length;nf={padding:nf,boundary:wf.filter($b),altBoundary:bg};const {reference:ke,floating:Pd,strategy:be,x:Jd,y:ee,placement:xf,middlewareData:Of,update:Kg}=gc({strategy:"fixed",placement:P,whileElementsMounted:cc,middleware:[MB({mainAxis:Vb+n,alignmentAxis:Tb}),$c?NB(Ie({mainAxis:!0,
crossAxis:!1,limiter:"partial"===zc?OB():void 0},nf)):void 0,Kf?RB({element:Kf,padding:sc}):void 0,$c?KB(Ie({},nf)):void 0,KG({arrowWidth:mg,arrowHeight:n}),vc?LB({strategy:"referenceHidden"}):void 0].filter(rc)});Um(()=>{ke(ed.anchor)},[ke,ed.anchor]);const xh=null!==Jd&&null!==ee,[Yf,Jh]=Hb(xf);mg=null===(ea=Of.arrow)||void 0===ea?void 0:ea.x;ea=null===(ka=Of.arrow)||void 0===ka?void 0:ka.y;ka=0!==(null===(sa=Of.arrow)||void 0===sa?void 0:sa.centerOffset);const [yg,Vh]=(0,om.useState)();Um(()=>
{Wd&&Vh(window.getComputedStyle(Wd).zIndex)},[Wd]);const {hasParent:li,positionUpdateFns:Hj}=IG("PopperContent",lb),dl=!li;(0,om.useLayoutEffect)(()=>{if(!dl)return Hj.add(Kg),()=>{Hj.delete(Kg)}},[dl,Hj,Kg]);(0,om.useLayoutEffect)(()=>{dl&&xh&&Array.from(Hj).reverse().forEach(el=>requestAnimationFrame(el))},[dl,xh,Hj]);sa=$f(Ie({"data-side":Yf,"data-align":Jh},a),{ref:d,style:$f(Ie({},a.style),{animation:xh?void 0:"none",opacity:null!==(La=Of.hide)&&void 0!==La&&La.referenceHidden?0:void 0})});return(0,om.createElement)("div",
{ref:Pd,"data-radix-popper-content-wrapper":"",style:{position:be,left:0,top:0,transform:xh?`translate3d(${Math.round(Jd)}px, ${Math.round(ee)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:yg,["--radix-popper-transform-origin"]:[null===(Ua=Of.transformOrigin)||void 0===Ua?void 0:Ua.x,null===(eb=Of.transformOrigin)||void 0===eb?void 0:eb.y].join(" ")}},(0,om.createElement)(FG,{scope:lb,placedSide:Yf,onArrowChange:Oe,arrowX:mg,arrowY:ea,shouldHideArrow:ka},dl?(0,om.createElement)(HG,
{scope:lb,hasParent:!0,positionUpdateFns:Hj},(0,om.createElement)(jl.div,sa)):(0,om.createElement)(jl.div,sa)))}),JG={top:"bottom",right:"left",bottom:"top",left:"right"},TB=(0,om.forwardRef)(function(a,d){var {__scopePopper:n}=a;a=wg(a,["__scopePopper"]);n=GG("PopperArrow",n);return(0,om.createElement)("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[JG[n.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",
right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0}},(0,om.createElement)(CG,of({},a,{ref:d,style:$f(Ie({},a.style),{display:"block"})})))}),KG=a=>({name:"transformOrigin",options:a,fn(d){var n,P,ea,ka,sa;const {placement:La,rects:Ua,middlewareData:eb}=d,lb=(d=0!==(null===(n=eb.arrow)||void 0===n?void 0:n.centerOffset))?0:a.arrowWidth;n=d?0:a.arrowHeight;const [rb,
Vb]=Hb(La),Zb={start:"0%",center:"50%",end:"100%"}[Vb],Tb=(null!==(P=null===(ea=eb.arrow)||void 0===ea?void 0:ea.x)&&void 0!==P?P:0)+lb/2;P=(null!==(ka=null===(sa=eb.arrow)||void 0===sa?void 0:sa.y)&&void 0!==ka?ka:0)+n/2;sa=ka="";"bottom"===rb?(ka=d?Zb:`${Tb}px`,sa=`${-n}px`):"top"===rb?(ka=d?Zb:`${Tb}px`,sa=`${Ua.floating.height+n}px`):"right"===rb?(ka=`${-n}px`,sa=d?Zb:`${P}px`):"left"===rb&&(ka=`${Ua.floating.width+n}px`,sa=d?Zb:`${P}px`);return{data:{x:ka,y:sa}}}}),dy=a=>{const {__scopePopper:d,
children:n}=a,[P,ea]=(0,om.useState)(null);return(0,om.createElement)(EG,{scope:d,anchor:P,onAnchorChange:ea},n)},UB=ba(21),LG=gg(ba(30)),MG=(0,UB.forwardRef)((a,d)=>{var n;const {container:P=null===globalThis||void 0===globalThis?void 0:null===(n=globalThis.document)||void 0===n?void 0:n.body}=a;a=wg(a,["container"]);return P?LG.default.createPortal((0,UB.createElement)(jl.div,of({},a,{ref:d})),P):null}),Pq=ba(21),NG=ba(30),Zu=a=>{const {present:d,children:n}=a;a=ic(d);const P="function"===typeof n?
n({present:a.isPresent}):Pq.Children.only(n),ea=Zh(a.ref,P.ref);return"function"===typeof n||a.isPresent?(0,Pq.cloneElement)(P,{ref:ea}):null};Zu.displayName="Presence";var jw=ba(21),VB=ba(21),OG=(0,VB.forwardRef)((a,d)=>(0,VB.createElement)(jl.span,of({},a,{ref:d,style:Ie({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[kw]=Ci("Tooltip",[Wt]),lw=Wt(),[PG,ey]=kw("TooltipProvider"),[QG,
$u]=kw("Tooltip"),RG=(0,ii.forwardRef)((a,d)=>{var {__scopeTooltip:n}=a;const P=wg(a,["__scopeTooltip"]),ea=$u("TooltipTrigger",n),ka=ey("TooltipTrigger",n);n=lw(n);const sa=(0,ii.useRef)(null);d=Zh(d,sa,ea.onTriggerChange);const La=(0,ii.useRef)(!1),Ua=(0,ii.useRef)(!1),eb=(0,ii.useCallback)(()=>La.current=!1,[]);(0,ii.useEffect)(()=>()=>document.removeEventListener("pointerup",eb),[eb]);return(0,ii.createElement)(by,of({asChild:!0},n),(0,ii.createElement)(jl.button,of({"aria-describedby":ea.open?
ea.contentId:void 0,"data-state":ea.stateAttribute},P,{ref:d,onPointerMove:Ng(a.onPointerMove,lb=>{"touch"===lb.pointerType||Ua.current||ka.isPointerInTransitRef.current||(ea.onTriggerEnter(),Ua.current=!0)}),onPointerLeave:Ng(a.onPointerLeave,()=>{ea.onTriggerLeave();Ua.current=!1}),onPointerDown:Ng(a.onPointerDown,()=>{La.current=!0;document.addEventListener("pointerup",eb,{once:!0})}),onFocus:Ng(a.onFocus,()=>{if(!La.current)ea.onOpen()}),onBlur:Ng(a.onBlur,ea.onClose),onClick:Ng(a.onClick,ea.onClose)})))}),
[SG,TG]=kw("TooltipPortal",{forceMount:void 0}),UG=(0,ii.forwardRef)((a,d)=>{var n=TG("TooltipContent",a.__scopeTooltip);const {forceMount:P=n.forceMount,side:ea="top"}=a;n=wg(a,["forceMount","side"]);a=$u("TooltipContent",a.__scopeTooltip);return(0,ii.createElement)(Zu,{present:P||a.open},a.disableHoverableContent?(0,ii.createElement)(WB,of({side:ea},n,{ref:d})):(0,ii.createElement)(VG,of({side:ea},n,{ref:d})))}),VG=(0,ii.forwardRef)((a,d)=>{const n=$u("TooltipContent",a.__scopeTooltip),P=ey("TooltipContent",
a.__scopeTooltip),ea=(0,ii.useRef)(null);d=Zh(d,ea);const [ka,sa]=(0,ii.useState)(null),{trigger:La,onClose:Ua}=n,eb=ea.current,{onPointerInTransitChange:lb}=P,rb=(0,ii.useCallback)(()=>{sa(null);lb(!1)},[lb]),Vb=(0,ii.useCallback)((Zb,Tb)=>{const sc=Fd({x:Zb.clientX,y:Zb.clientY},Zb.currentTarget.getBoundingClientRect()),Kc="right"===sc||"bottom"===sc?-5:5;Zb="right"===sc||"left"===sc?{x:Zb.clientX+Kc,y:Zb.clientY}:{x:Zb.clientX,y:Zb.clientY+Kc};Tb=Tb.getBoundingClientRect();const {top:fc,right:zc,
bottom:vc,left:$c}=Tb;Tb=Bd([Zb,{x:$c,y:fc},{x:zc,y:fc},{x:zc,y:vc},{x:$c,y:vc}]);sa(Tb);lb(!0)},[lb]);(0,ii.useEffect)(()=>()=>rb(),[rb]);(0,ii.useEffect)(()=>{if(La&&eb){const Zb=sc=>Vb(sc,eb),Tb=sc=>Vb(sc,La);La.addEventListener("pointerleave",Zb);eb.addEventListener("pointerleave",Tb);return()=>{La.removeEventListener("pointerleave",Zb);eb.removeEventListener("pointerleave",Tb)}}},[La,eb,Vb,rb]);(0,ii.useEffect)(()=>{if(ka){const Zb=Tb=>{var sc=Tb.target;Tb={x:Tb.clientX,y:Tb.clientY};sc=(null===
La||void 0===La?void 0:La.contains(sc))||(null===eb||void 0===eb?void 0:eb.contains(sc));const {x:Kc,y:fc}=Tb;Tb=!1;for(let zc=0,vc=ka.length-1;zc<ka.length;vc=zc++){const $c=ka[zc].x,ed=ka[zc].y,Wd=ka[vc].x,me=ka[vc].y;ed>fc!==me>fc&&Kc<(Wd-$c)*(fc-ed)/(me-ed)+$c&&(Tb=!Tb)}Tb=!Tb;sc?rb():Tb&&(rb(),Ua())};document.addEventListener("pointermove",Zb);return()=>document.removeEventListener("pointermove",Zb)}},[La,eb,ka,Ua,rb]);return(0,ii.createElement)(WB,of({},a,{ref:d}))}),[WG,XG]=kw("Tooltip",{isInside:!1}),
WB=(0,ii.forwardRef)((a,d)=>{const {__scopeTooltip:n,children:P,"aria-label":ea,onEscapeKeyDown:ka,onPointerDownOutside:sa}=a;a=wg(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const La=$u("TooltipContent",n),Ua=lw(n),{onClose:eb}=La;(0,ii.useEffect)(()=>{document.addEventListener("tooltip.open",eb);return()=>document.removeEventListener("tooltip.open",eb)},[eb]);(0,ii.useEffect)(()=>{if(La.trigger){const lb=rb=>{rb=rb.target;null!==rb&&void 0!==rb&&rb.contains(La.trigger)&&
eb()};window.addEventListener("scroll",lb,{capture:!0});return()=>window.removeEventListener("scroll",lb,{capture:!0})}},[La.trigger,eb]);return(0,ii.createElement)(Xx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ka,onPointerDownOutside:sa,onFocusOutside:lb=>lb.preventDefault(),onDismiss:eb},(0,ii.createElement)(cy,of({"data-state":La.stateAttribute},Ua,a,{ref:d,style:$f(Ie({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,ii.createElement)(FB,
null,P),(0,ii.createElement)(WG,{scope:n,isInside:!0},(0,ii.createElement)(OG,{id:La.contentId,role:"tooltip"},ea||P))))}),YG=(0,ii.forwardRef)((a,d)=>{const {__scopeTooltip:n}=a;a=wg(a,["__scopeTooltip"]);const P=lw(n);return XG("TooltipArrow",n).isInside?null:(0,ii.createElement)(TB,of({},P,a,{ref:d}))}),ZG=a=>{const {__scopeTooltip:d,delayDuration:n=700,skipDelayDuration:P=300,disableHoverableContent:ea=!1,children:ka}=a,[sa,La]=(0,ii.useState)(!0),Ua=(0,ii.useRef)(!1),eb=(0,ii.useRef)(0);(0,ii.useEffect)(()=>
{const lb=eb.current;return()=>window.clearTimeout(lb)},[]);return(0,ii.createElement)(PG,{scope:d,isOpenDelayed:sa,delayDuration:n,onOpen:(0,ii.useCallback)(()=>{window.clearTimeout(eb.current);La(!1)},[]),onClose:(0,ii.useCallback)(()=>{window.clearTimeout(eb.current);eb.current=window.setTimeout(()=>La(!0),P)},[P]),isPointerInTransitRef:Ua,onPointerInTransitChange:(0,ii.useCallback)(lb=>{Ua.current=lb},[]),disableHoverableContent:ea},ka)},$G=a=>{const {__scopeTooltip:d,children:n,open:P,defaultOpen:ea=
!1,onOpenChange:ka,disableHoverableContent:sa,delayDuration:La}=a,Ua=ey("Tooltip",a.__scopeTooltip);a=lw(d);const [eb,lb]=(0,ii.useState)(null),rb=Ii(),Vb=(0,ii.useRef)(0),Zb=null!==sa&&void 0!==sa?sa:Ua.disableHoverableContent,Tb=null!==La&&void 0!==La?La:Ua.delayDuration,sc=(0,ii.useRef)(!1),[Kc=!1,fc]=Vc({prop:P,defaultProp:ea,onChange:Wd=>{if(Wd)Ua.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else Ua.onClose();null===ka||void 0===ka||ka(Wd)}}),zc=(0,ii.useMemo)(()=>Kc?sc.current?
"delayed-open":"instant-open":"closed",[Kc]),vc=(0,ii.useCallback)(()=>{window.clearTimeout(Vb.current);sc.current=!1;fc(!0)},[fc]),$c=(0,ii.useCallback)(()=>{window.clearTimeout(Vb.current);fc(!1)},[fc]),ed=(0,ii.useCallback)(()=>{window.clearTimeout(Vb.current);Vb.current=window.setTimeout(()=>{sc.current=!0;fc(!0)},Tb)},[Tb,fc]);(0,ii.useEffect)(()=>()=>window.clearTimeout(Vb.current),[]);return(0,ii.createElement)(dy,a,(0,ii.createElement)(QG,{scope:d,contentId:rb,open:Kc,stateAttribute:zc,trigger:eb,
onTriggerChange:lb,onTriggerEnter:(0,ii.useCallback)(()=>{Ua.isOpenDelayed?ed():vc()},[Ua.isOpenDelayed,ed,vc]),onTriggerLeave:(0,ii.useCallback)(()=>{Zb?$c():window.clearTimeout(Vb.current)},[$c,Zb]),onOpen:vc,onClose:$c,disableHoverableContent:Zb},n))},aH=RG,bH=a=>{const {__scopeTooltip:d,forceMount:n,children:P,container:ea}=a;a=$u("TooltipPortal",d);return(0,ii.createElement)(SG,{scope:d,forceMount:n},(0,ii.createElement)(Zu,{present:n||a.open},(0,ii.createElement)(MG,{asChild:!0,container:ea},
P)))},cH=UG,dH=YG,Or=ba(612),XB=ba(612),fy=ba(612),eH=({style:a,icon:d,onClick:n})=>(0,fy.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:n,children:(0,fy.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,fy.jsx)(oi,{name:d})})}),YB=ba(21),ZB=(0,YB.forwardRef)((a,d)=>{const {pressed:n,defaultPressed:P=!1,onPressedChange:ea}=a,ka=wg(a,["pressed","defaultPressed","onPressedChange"]),[sa=!1,La]=Vc({prop:n,onChange:ea,defaultProp:P});
return(0,YB.createElement)(jl.button,of({type:"button","aria-pressed":sa,"data-state":sa?"on":"off","data-disabled":a.disabled?"":void 0},ka,{ref:d,onClick:Ng(a.onClick,()=>{a.disabled||La(!sa)})}))}),fH=ZB,gy=ba(612),ip=ba(21),Xh=ba(21),lq=gg(ba(21)),$B=ba(21),gH=(0,$B.createContext)(void 0),hH=ba(21),hy=0,Pr=ba(21),aC={bubbles:!1,cancelable:!0},bC=(0,Pr.forwardRef)((a,d)=>{const {loop:n=!1,trapped:P=!1,onMountAutoFocus:ea,onUnmountAutoFocus:ka}=a;a=wg(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);
const [sa,La]=(0,Pr.useState)(null),Ua=Mj(ea),eb=Mj(ka),lb=(0,Pr.useRef)(null);d=Zh(d,Zb=>La(Zb));const rb=(0,Pr.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Pr.useEffect)(()=>{if(P){let Zb=function(sc){!rb.paused&&sa&&(sc=sc.target,sa.contains(sc)?lb.current=sc:Zf(lb.current,{select:!0}))},Tb=function(sc){!rb.paused&&sa&&(sa.contains(sc.relatedTarget)||Zf(lb.current,{select:!0}))};document.addEventListener("focusin",Zb);document.addEventListener("focusout",Tb);
return()=>{document.removeEventListener("focusin",Zb);document.removeEventListener("focusout",Tb)}}},[P,sa,rb.paused]);(0,Pr.useEffect)(()=>{if(sa){cC.add(rb);const Zb=document.activeElement;if(!sa.contains(Zb)){const Tb=new CustomEvent("focusScope.autoFocusOnMount",aC);sa.addEventListener("focusScope.autoFocusOnMount",Ua);sa.dispatchEvent(Tb);Tb.defaultPrevented||(Rf(ui(Vf(sa)),{select:!0}),document.activeElement===Zb&&Zf(sa))}return()=>{sa.removeEventListener("focusScope.autoFocusOnMount",Ua);setTimeout(()=>
{const Tb=new CustomEvent("focusScope.autoFocusOnUnmount",aC);sa.addEventListener("focusScope.autoFocusOnUnmount",eb);sa.dispatchEvent(Tb);Tb.defaultPrevented||Zf(null!==Zb&&void 0!==Zb?Zb:document.body,{select:!0});sa.removeEventListener("focusScope.autoFocusOnUnmount",eb);cC.remove(rb)},0)}}},[sa,Ua,eb,rb]);const Vb=(0,Pr.useCallback)(Zb=>{if((n||P)&&!rb.paused){var Tb=document.activeElement;if("Tab"===Zb.key&&!Zb.altKey&&!Zb.ctrlKey&&!Zb.metaKey&&Tb){const Kc=Zb.currentTarget;var sc=Kc;const fc=
Vf(sc),zc=sh(fc,sc);sc=sh(fc.reverse(),sc);const [vc,$c]=[zc,sc];vc&&$c?Zb.shiftKey||Tb!==$c?Zb.shiftKey&&Tb===vc&&(Zb.preventDefault(),n&&Zf($c,{select:!0})):(Zb.preventDefault(),n&&Zf(vc,{select:!0})):Tb===Kc&&Zb.preventDefault()}}},[n,P,rb.paused]);return(0,Pr.createElement)(jl.div,of({tabIndex:-1},a,{ref:d,onKeyDown:Vb}))}),cC=function(){let a=[];return{add(d){const n=a[0];d===n||null!==n&&void 0!==n&&n.pause();a=$h(a,d);a.unshift(d)},remove(d){var n;a=$h(a,d);null===(n=a[0])||void 0===n||n.resume()}}}(),
pm=ba(21),iH={bubbles:!1,cancelable:!0},[iy,dC,jH]=$g("RovingFocusGroup"),[kH,mw]=Ci("RovingFocusGroup",[jH]),[lH,mH]=kH("RovingFocusGroup"),eC=(0,pm.forwardRef)((a,d)=>(0,pm.createElement)(iy.Provider,{scope:a.__scopeRovingFocusGroup},(0,pm.createElement)(iy.Slot,{scope:a.__scopeRovingFocusGroup},(0,pm.createElement)(nH,of({},a,{ref:d}))))),nH=(0,pm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:n,orientation:P,loop:ea=!1,dir:ka,currentTabStopId:sa,defaultCurrentTabStopId:La,onCurrentTabStopIdChange:Ua,
onEntryFocus:eb}=a,lb=wg(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),rb=(0,pm.useRef)(null);d=Zh(d,rb);const Vb=nh(ka),[Zb=null,Tb]=Vc({prop:sa,defaultProp:La,onChange:Ua}),[sc,Kc]=(0,pm.useState)(!1),fc=Mj(eb),zc=dC(n),vc=(0,pm.useRef)(!1),[$c,ed]=(0,pm.useState)(0);(0,pm.useEffect)(()=>{const Wd=rb.current;if(Wd)return Wd.addEventListener("rovingFocusGroup.onEntryFocus",fc),()=>Wd.removeEventListener("rovingFocusGroup.onEntryFocus",
fc)},[fc]);return(0,pm.createElement)(lH,{scope:n,orientation:P,dir:Vb,loop:ea,currentTabStopId:Zb,onItemFocus:(0,pm.useCallback)(Wd=>Tb(Wd),[Tb]),onItemShiftTab:(0,pm.useCallback)(()=>Kc(!0),[]),onFocusableItemAdd:(0,pm.useCallback)(()=>ed(Wd=>Wd+1),[]),onFocusableItemRemove:(0,pm.useCallback)(()=>ed(Wd=>Wd-1),[])},(0,pm.createElement)(jl.div,of({tabIndex:sc||0===$c?-1:0,"data-orientation":P},lb,{ref:d,style:Ie({outline:"none"},a.style),onMouseDown:Ng(a.onMouseDown,()=>{vc.current=!0}),onFocus:Ng(a.onFocus,
Wd=>{var me=!vc.current;if(Wd.target===Wd.currentTarget&&me&&!sc&&(me=new CustomEvent("rovingFocusGroup.onEntryFocus",iH),Wd.currentTarget.dispatchEvent(me),!me.defaultPrevented)){Wd=zc().filter(Oe=>Oe.focusable);me=Wd.find(Oe=>Oe.active);const Kf=Wd.find(Oe=>Oe.id===Zb);Wd=[me,Kf,...Wd].filter(Boolean).map(Oe=>Oe.ref.current);Eh(Wd)}vc.current=!1}),onBlur:Ng(a.onBlur,()=>Kc(!1))})))}),fC=(0,pm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:n,focusable:P=!0,active:ea=!1}=a,ka=wg(a,["__scopeRovingFocusGroup",
"focusable","active"]),sa=Ii(),La=mH("RovingFocusGroupItem",n),Ua=La.currentTabStopId===sa,eb=dC(n),{onFocusableItemAdd:lb,onFocusableItemRemove:rb}=La;(0,pm.useEffect)(()=>{if(P)return lb(),()=>rb()},[P,lb,rb]);return(0,pm.createElement)(iy.ItemSlot,{scope:n,id:sa,focusable:P,active:ea},(0,pm.createElement)(jl.span,of({tabIndex:Ua?0:-1,"data-orientation":La.orientation},ka,{ref:d,onMouseDown:Ng(a.onMouseDown,Vb=>{if(P)La.onItemFocus(sa);else Vb.preventDefault()}),onFocus:Ng(a.onFocus,()=>La.onItemFocus(sa)),
onKeyDown:Ng(a.onKeyDown,Vb=>{if("Tab"===Vb.key&&Vb.shiftKey)La.onItemShiftTab();else if(Vb.target===Vb.currentTarget){var Zb=Oi(Vb,La.orientation,La.dir);if(void 0!==Zb){Vb.preventDefault();let Tb=eb().filter(sc=>sc.focusable).map(sc=>sc.ref.current);if("last"===Zb)Tb.reverse();else if("prev"===Zb||"next"===Zb)"prev"===Zb&&Tb.reverse(),Vb=Tb.indexOf(Vb.currentTarget),Tb=La.loop?th(Tb,Vb+1):Tb.slice(Vb+1);setTimeout(()=>Eh(Tb))}}})})))}),oH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",
PageUp:"first",Home:"first",PageDown:"last",End:"last"},pH=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},Xt=new WeakMap,nw=new WeakMap,ow={},jy=0,ky=function(a,d,n){void 0===d&&(d=pH(a));void 0===n&&(n="data-aria-hidden");var P=Array.isArray(a)?a:[a];ow[n]||(ow[n]=new WeakMap);var ea=ow[n],ka=[],sa=new Set,La=function(eb){eb&&!sa.has(eb)&&(sa.add(eb),La(eb.parentNode))};P.forEach(La);var Ua=function(eb){!eb||0<=P.indexOf(eb)||Array.prototype.forEach.call(eb.children,
function(lb){if(sa.has(lb))Ua(lb);else{var rb=lb.getAttribute("aria-hidden");rb=null!==rb&&"false"!==rb;var Vb=(Xt.get(lb)||0)+1,Zb=(ea.get(lb)||0)+1;Xt.set(lb,Vb);ea.set(lb,Zb);ka.push(lb);1===Vb&&rb&&nw.set(lb,!0);1===Zb&&lb.setAttribute(n,"true");rb||lb.setAttribute("aria-hidden","true")}})};Ua(d);sa.clear();jy++;return function(){ka.forEach(function(eb){var lb=Xt.get(eb)-1,rb=ea.get(eb)-1;Xt.set(eb,lb);ea.set(eb,rb);lb||(nw.has(eb)||eb.removeAttribute("aria-hidden"),nw.delete(eb));rb||eb.removeAttribute(n)});
jy--;jy||(Xt=new WeakMap,Xt=new WeakMap,nw=new WeakMap,ow={})}},qH=gg(ms(),1),{__assign:Qr,__rest:gC,__spreadArray:Ap}=qH.default,hC=gg(ba(21)),Qq=gg(ba(21)),rH=ba(21),iC=gg(ba(21)),hn=function(a){var d=a.sideCar;a=gC(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");d=d.read();if(!d)throw Error("Sidecar medium not found");return iC.createElement(d,Qr({},a))};hn.isSideCarExport=!0;var ko=function(a){void 0===a&&(a={});var d=Ml(null);d.options=Qr({async:!0,
ssr:!1},a);return d}(),Iu=function(){},Pv=Qq.forwardRef(function(a,d){var n=Qq.useRef(null),P=Qq.useState({onScrollCapture:Iu,onWheelCapture:Iu,onTouchMoveCapture:Iu}),ea=P[0];P=P[1];var ka=a.forwardProps,sa=a.children,La=a.className,Ua=a.removeScrollBar,eb=a.enabled,lb=a.shards,rb=a.sideCar,Vb=a.noIsolation,Zb=a.inert,Tb=a.allowPinchZoom,sc=a.as;sc=void 0===sc?"div":sc;a=gC(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));
d=Yj([n,d]);ea=Qr(Qr({},a),ea);return Qq.createElement(Qq.Fragment,null,eb&&Qq.createElement(rb,{sideCar:ko,removeScrollBar:Ua,shards:lb,noIsolation:Vb,inert:Zb,setCallbacks:P,allowPinchZoom:!!Tb,lockRef:n}),ka?Qq.cloneElement(Qq.Children.only(sa),Qr(Qr({},ea),{ref:d})):Qq.createElement(sc,Qr({},ea,{className:La,ref:d}),sa))});Pv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pv.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var Cm=gg(ba(21)),lx=gg(ba(21)),
eE=gg(ba(21)),xt=function(){var a=0,d=null;return{add:function(n){if(0==a){if(document){var P=document.createElement("style");P.type="text/css";var ea="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;ea&&P.setAttribute("nonce",ea)}else P=null;if(d=P)P=d,P.styleSheet?P.styleSheet.cssText=n:P.appendChild(document.createTextNode(n)),n=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),
d=null)}}},mx=function(){var a=xt();return function(d,n){eE.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&n])}},jC=function(){var a=mx();return function(d){a(d.styles,d.dynamic);return null}},kC={left:0,top:0,right:0,gap:0},lC=jC(),mC=function(a,d,n,P){var ea=a.left,ka=a.top,sa=a.right;a=a.gap;void 0===n&&(n="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(P,";\n   padding-right: ").concat(a,"px ").concat(P,";\n  }\n  body {\n    overflow: hidden ").concat(P,
";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(P,";"),"margin"===n&&"\n    padding-left: ".concat(ea,"px;\n    padding-top: ").concat(ka,"px;\n    padding-right: ").concat(sa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(P,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(P,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(P,
";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(P,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(P,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(P,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},nC=function(a){var d=a.noRelative,n=a.noImportant;
a=a.gapMode;var P=void 0===a?"margin":a;a=lx.useMemo(function(){var ea=P;void 0===ea&&(ea="margin");if("undefined"===typeof window)ea=kC;else{var ka=window.getComputedStyle(document.body),sa=ka["padding"===ea?"paddingTop":"marginTop"],La=ka["padding"===ea?"paddingRight":"marginRight"];ea=[parseInt(ka["padding"===ea?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(sa||"",10)||0,parseInt(La||"",10)||0];ea={left:ea[0],top:ea[1],right:ea[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+
ea[2]-ea[0])}}return ea},[P]);return lx.createElement(lC,{styles:mC(a,!d,P,n?"":"!important")})},nx=!1;if("undefined"!==typeof window)try{var Ls=Object.defineProperty({},"passive",{get:function(){return nx=!0}});window.addEventListener("test",Ls,Ls);window.removeEventListener("test",Ls,Ls)}catch(a){nx=!1}var Ms=nx?{passive:!1}:!1,ox=function(a,d){var n=window.getComputedStyle(a);return"hidden"!==n[d]&&!(n.overflowY===n.overflowX&&"TEXTAREA"!==a.tagName&&"visible"===n[d])},oC=function(a,d){do{"undefined"!==
typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(pC(a,d)){var n=qC(a,d);if(n[1]>n[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},pC=function(a,d){return"v"===a?ox(d,"overflowY"):ox(d,"overflowX")},qC=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},av=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},pw=function(a){return a&&"current"in a?a.current:a},
cl=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},Bp=0,Ek=[];ko.useMedium(function(a){var d=Cm.useRef([]),n=Cm.useRef([0,0]),P=Cm.useRef(),ea=Cm.useState(Bp++)[0],ka=Cm.useState(function(){return jC()})[0],sa=Cm.useRef(a);Cm.useEffect(function(){sa.current=a},[a]);Cm.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(ea));var Tb=Ap([a.lockRef.current],(a.shards||
[]).map(pw),!0).filter(Boolean);Tb.forEach(function(sc){return sc.classList.add("allow-interactivity-".concat(ea))});return function(){document.body.classList.remove("block-interactivity-".concat(ea));Tb.forEach(function(sc){return sc.classList.remove("allow-interactivity-".concat(ea))})}}},[a.inert,a.lockRef.current,a.shards]);var La=Cm.useCallback(function(Tb,sc){if("touches"in Tb&&2===Tb.touches.length)return!sa.current.allowPinchZoom;var Kc=av(Tb),fc=n.current,zc="deltaX"in Tb?Tb.deltaX:fc[0]-
Kc[0];fc="deltaY"in Tb?Tb.deltaY:fc[1]-Kc[1];var vc=Tb.target,$c=Math.abs(zc)>Math.abs(fc)?"h":"v";if("touches"in Tb&&"h"===$c&&"range"===vc.type)return!1;var ed=oC($c,vc);if(!ed)return!0;ed?Kc=$c:(Kc="v"===$c?"h":"v",ed=oC($c,vc));if(!ed)return!1;!P.current&&"changedTouches"in Tb&&(zc||fc)&&(P.current=Kc);if(!Kc)return!0;Kc=P.current||Kc;fc="h"===Kc?zc:fc;zc=window.getComputedStyle(sc).direction;zc="h"===Kc&&"rtl"===zc?-1:1;$c=zc*fc;Tb=Tb.target;fc=sc.contains(Tb);vc=!1;$c=0<$c;var Wd=ed=0;do{var me=
qC(Kc,Tb),Kf=me[0];me=me[1]-me[2]-zc*Kf;(Kf||me)&&pC(Kc,Tb)&&(ed+=me,Wd+=Kf);Tb=Tb.parentNode}while(!fc&&Tb!==document.body||fc&&(sc.contains(Tb)||sc===Tb));$c&&0===ed?vc=!0:$c||0!==Wd||(vc=!0);return vc},[]),Ua=Cm.useCallback(function(Tb){if(Ek.length&&Ek[Ek.length-1]===ka){var sc="deltaY"in Tb?[Tb.deltaX,Tb.deltaY]:av(Tb),Kc=d.current.filter(function(fc){var zc;if(zc=fc.name===Tb.type&&fc.target===Tb.target)fc=fc.delta,zc=fc[0]===sc[0]&&fc[1]===sc[1];return zc})[0];Kc&&Kc.should?Tb.cancelable&&
Tb.preventDefault():Kc||(Kc=(sa.current.shards||[]).map(pw).filter(Boolean).filter(function(fc){return fc.contains(Tb.target)}),(0<Kc.length?La(Tb,Kc[0]):!sa.current.noIsolation)&&Tb.cancelable&&Tb.preventDefault())}},[]),eb=Cm.useCallback(function(Tb,sc,Kc,fc){var zc={name:Tb,delta:sc,target:Kc,should:fc};d.current.push(zc);setTimeout(function(){d.current=d.current.filter(function(vc){return vc!==zc})},1)},[]),lb=Cm.useCallback(function(Tb){n.current=av(Tb);P.current=void 0},[]),rb=Cm.useCallback(function(Tb){eb(Tb.type,
[Tb.deltaX,Tb.deltaY],Tb.target,La(Tb,a.lockRef.current))},[]),Vb=Cm.useCallback(function(Tb){eb(Tb.type,av(Tb),Tb.target,La(Tb,a.lockRef.current))},[]);Cm.useEffect(function(){Ek.push(ka);a.setCallbacks({onScrollCapture:rb,onWheelCapture:rb,onTouchMoveCapture:Vb});document.addEventListener("wheel",Ua,Ms);document.addEventListener("touchmove",Ua,Ms);document.addEventListener("touchstart",lb,Ms);return function(){Ek=Ek.filter(function(Tb){return Tb!==ka});document.removeEventListener("wheel",Ua,Ms);
document.removeEventListener("touchmove",Ua,Ms);document.removeEventListener("touchstart",lb,Ms)}},[]);var Zb=a.removeScrollBar;return Cm.createElement(Cm.Fragment,null,a.inert?Cm.createElement(ka,{styles:cl(ea)}):null,Zb?Cm.createElement(nC,{gapMode:"margin"}):null)});var mq=hC.forwardRef(function(a,d){return hC.createElement(Pv,Qr({},a,{ref:d,sideCar:hn}))});mq.classNames=Pv.classNames;var qm=["Enter"," "],lo=["ArrowUp","PageDown","End"],Oj=["ArrowDown","PageUp","Home",...lo];[...qm];[...qm];var [qw,
rw,sw]=$g("Menu"),[Rq,bv]=Ci("Menu",[sw,Wt,mw]),cv=Wt(),Gj=mw(),[ly,Yt]=Rq("Menu"),[my,Rr]=Rq("Menu"),ny=(0,Xh.forwardRef)((a,d)=>{var {__scopeMenu:n}=a;a=wg(a,["__scopeMenu"]);n=cv(n);return(0,Xh.createElement)(by,of({},n,a,{ref:d}))}),[,Vs]=Rq("MenuPortal",{forceMount:void 0}),[sH,dv]=Rq("MenuContent"),ev=(0,Xh.forwardRef)((a,d)=>{var n=Vs("MenuContent",a.__scopeMenu);({forceMount:n=n.forceMount}=a);const P=wg(a,["forceMount"]),ea=Yt("MenuContent",a.__scopeMenu),ka=Rr("MenuContent",a.__scopeMenu);
return(0,Xh.createElement)(qw.Provider,{scope:a.__scopeMenu},(0,Xh.createElement)(Zu,{present:n||ea.open},(0,Xh.createElement)(qw.Slot,{scope:a.__scopeMenu},ka.modal?(0,Xh.createElement)(oy,of({},P,{ref:d})):(0,Xh.createElement)(fv,of({},P,{ref:d})))))}),oy=(0,Xh.forwardRef)((a,d)=>{const n=Yt("MenuContent",a.__scopeMenu),P=(0,Xh.useRef)(null);d=Zh(d,P);(0,Xh.useEffect)(()=>{const ea=P.current;if(ea)return ky(ea)},[]);return(0,Xh.createElement)(tw,of({},a,{ref:d,trapFocus:n.open,disableOutsidePointerEvents:n.open,
disableOutsideScroll:!0,onFocusOutside:Ng(a.onFocusOutside,ea=>ea.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),fv=(0,Xh.forwardRef)((a,d)=>{const n=Yt("MenuContent",a.__scopeMenu);return(0,Xh.createElement)(tw,of({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),tw=(0,Xh.forwardRef)((a,d)=>{const {__scopeMenu:n,loop:P=!1,trapFocus:ea,onOpenAutoFocus:ka,onCloseAutoFocus:sa,disableOutsidePointerEvents:La,
onEscapeKeyDown:Ua,onPointerDownOutside:eb,onFocusOutside:lb,onInteractOutside:rb,onDismiss:Vb,disableOutsideScroll:Zb}=a,Tb=wg(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),sc=Yt("MenuContent",n),Kc=Rr("MenuContent",n),fc=cv(n),zc=Gj(n),vc=rw(n),[$c,ed]=(0,Xh.useState)(null),Wd=(0,Xh.useRef)(null);d=Zh(d,Wd,sc.onContentChange);const me=(0,Xh.useRef)(0),
Kf=(0,Xh.useRef)(""),Oe=(0,Xh.useRef)(0),nf=(0,Xh.useRef)(null),mg=(0,Xh.useRef)("right"),wf=(0,Xh.useRef)(0),bg=Zb?mq:Xh.Fragment,ke=Zb?{as:kq,allowPinchZoom:!0}:void 0,Pd=Jd=>{var ee,xf;Jd=Kf.current+Jd;const Of=vc().filter(yg=>!yg.disabled),Kg=document.activeElement,xh=null===(ee=Of.find(yg=>yg.ref.current===Kg))||void 0===ee?void 0:ee.textValue;ee=Of.map(yg=>yg.textValue);const Yf=ek(ee,Jd,xh),Jh=null===(xf=Of.find(yg=>yg.textValue===Yf))||void 0===xf?void 0:xf.ref.current;(function li(Vh){Kf.current=
Vh;window.clearTimeout(me.current);""!==Vh&&(me.current=window.setTimeout(()=>li(""),1E3))})(Jd);Jh&&setTimeout(()=>Jh.focus())};(0,Xh.useEffect)(()=>()=>window.clearTimeout(me.current),[]);Cg();const be=(0,Xh.useCallback)(Jd=>{var ee,xf,Of;if(Of=mg.current===(null===(ee=nf.current)||void 0===ee?void 0:ee.side)){if(ee=null===(xf=nf.current)||void 0===xf?void 0:xf.area){const {x:Kg,y:xh}={x:Jd.clientX,y:Jd.clientY};Jd=!1;for(let Yf=0,Jh=ee.length-1;Yf<ee.length;Jh=Yf++){xf=ee[Yf].x;Of=ee[Yf].y;const yg=
ee[Jh].x,Vh=ee[Jh].y;Of>xh!==Vh>xh&&Kg<(yg-xf)*(xh-Of)/(Vh-Of)+xf&&(Jd=!Jd)}ee=Jd}else ee=!1;Of=ee}return Of},[]);return(0,Xh.createElement)(sH,{scope:n,searchRef:Kf,onItemEnter:(0,Xh.useCallback)(Jd=>{be(Jd)&&Jd.preventDefault()},[be]),onItemLeave:(0,Xh.useCallback)(Jd=>{var ee;be(Jd)||(null===(ee=Wd.current)||void 0===ee||ee.focus(),ed(null))},[be]),onTriggerLeave:(0,Xh.useCallback)(Jd=>{be(Jd)&&Jd.preventDefault()},[be]),pointerGraceTimerRef:Oe,onPointerGraceIntentChange:(0,Xh.useCallback)(Jd=>
{nf.current=Jd},[])},(0,Xh.createElement)(bg,ke,(0,Xh.createElement)(bC,{asChild:!0,trapped:ea,onMountAutoFocus:Ng(ka,Jd=>{var ee;Jd.preventDefault();null===(ee=Wd.current)||void 0===ee||ee.focus()}),onUnmountAutoFocus:sa},(0,Xh.createElement)(Xx,{asChild:!0,disableOutsidePointerEvents:La,onEscapeKeyDown:Ua,onPointerDownOutside:eb,onFocusOutside:lb,onInteractOutside:rb,onDismiss:Vb},(0,Xh.createElement)(eC,of({asChild:!0},zc,{dir:Kc.dir,orientation:"vertical",loop:P,currentTabStopId:$c,onCurrentTabStopIdChange:ed,
onEntryFocus:Jd=>{Kc.isUsingKeyboardRef.current||Jd.preventDefault()}}),(0,Xh.createElement)(cy,of({role:"menu","aria-orientation":"vertical","data-state":sc.open?"open":"closed","data-radix-menu-content":"",dir:Kc.dir},fc,Tb,{ref:d,style:Ie({outline:"none"},Tb.style),onKeyDown:Ng(Tb.onKeyDown,Jd=>{var ee=Jd.target.closest("[data-radix-menu-content]")===Jd.currentTarget;const xf=Jd.ctrlKey||Jd.altKey||Jd.metaKey,Of=1===Jd.key.length;ee&&("Tab"===Jd.key&&Jd.preventDefault(),!xf&&Of&&Pd(Jd.key));Jd.target===
Wd.current&&Oj.includes(Jd.key)&&(Jd.preventDefault(),ee=vc().filter(Kg=>!Kg.disabled).map(Kg=>Kg.ref.current),lo.includes(Jd.key)&&ee.reverse(),eo(ee))}),onBlur:Ng(a.onBlur,Jd=>{Jd.currentTarget.contains(Jd.target)||(window.clearTimeout(me.current),Kf.current="")}),onPointerMove:Ng(a.onPointerMove,Eo(Jd=>{const ee=wf.current!==Jd.clientX;Jd.currentTarget.contains(Jd.target)&&ee&&(mg.current=Jd.clientX>wf.current?"right":"left",wf.current=Jd.clientX)}))})))))))}),Zt=(0,Xh.forwardRef)((a,d)=>{const {disabled:n=
!1,onSelect:P}=a,ea=wg(a,["disabled","onSelect"]),ka=(0,Xh.useRef)(null),sa=Rr("MenuItem",a.__scopeMenu),La=dv("MenuItem",a.__scopeMenu);d=Zh(d,ka);const Ua=(0,Xh.useRef)(!1);return(0,Xh.createElement)(rC,of({},ea,{ref:d,disabled:n,onClick:Ng(a.onClick,()=>{const eb=ka.current;if(!n&&eb){const lb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});eb.addEventListener("menu.itemSelect",rb=>null===P||void 0===P?void 0:P(rb),{once:!0});Sl(eb,lb);if(lb.defaultPrevented)Ua.current=!1;else sa.onClose()}}),
onPointerDown:eb=>{var lb;null===(lb=a.onPointerDown)||void 0===lb||lb.call(a,eb);Ua.current=!0},onPointerUp:Ng(a.onPointerUp,eb=>{var lb;Ua.current||null===(lb=eb.currentTarget)||void 0===lb||lb.click()}),onKeyDown:Ng(a.onKeyDown,eb=>{const lb=""!==La.searchRef.current;n||lb&&" "===eb.key||!qm.includes(eb.key)||(eb.currentTarget.click(),eb.preventDefault())})}))}),rC=(0,Xh.forwardRef)((a,d)=>{const {__scopeMenu:n,disabled:P=!1,textValue:ea}=a,ka=wg(a,["__scopeMenu","disabled","textValue"]),sa=dv("MenuItem",
n),La=Gj(n),Ua=(0,Xh.useRef)(null);d=Zh(d,Ua);const [eb,lb]=(0,Xh.useState)(!1),[rb,Vb]=(0,Xh.useState)("");(0,Xh.useEffect)(()=>{const Zb=Ua.current;if(Zb){var Tb;Vb((null!==(Tb=Zb.textContent)&&void 0!==Tb?Tb:"").trim())}},[ka.children]);return(0,Xh.createElement)(qw.ItemSlot,{scope:n,disabled:P,textValue:null!==ea&&void 0!==ea?ea:rb},(0,Xh.createElement)(fC,of({asChild:!0},La,{focusable:!P}),(0,Xh.createElement)(jl.div,of({role:"menuitem","data-highlighted":eb?"":void 0,"aria-disabled":P||void 0,
"data-disabled":P?"":void 0},ka,{ref:d,onPointerMove:Ng(a.onPointerMove,Eo(Zb=>{if(P)sa.onItemLeave(Zb);else sa.onItemEnter(Zb),Zb.defaultPrevented||Zb.currentTarget.focus()})),onPointerLeave:Ng(a.onPointerLeave,Eo(Zb=>sa.onItemLeave(Zb))),onFocus:Ng(a.onFocus,()=>lb(!0)),onBlur:Ng(a.onBlur,()=>lb(!1))}))))});Rq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Rq("MenuItemIndicator",{checked:!1});var sC=(0,Xh.forwardRef)((a,d)=>{a=wg(a,["__scopeMenu"]);return(0,Xh.createElement)(jl.div,of({role:"separator",
"aria-orientation":"horizontal"},a,{ref:d}))});Rq("MenuSub");var tC=a=>{const {__scopeMenu:d,open:n=!1,children:P,dir:ea,onOpenChange:ka,modal:sa=!0}=a;a=cv(d);const [La,Ua]=(0,Xh.useState)(null),eb=(0,Xh.useRef)(!1),lb=Mj(ka),rb=nh(ea);(0,Xh.useEffect)(()=>{const Vb=()=>{eb.current=!0;document.addEventListener("pointerdown",Zb,{capture:!0,once:!0});document.addEventListener("pointermove",Zb,{capture:!0,once:!0})},Zb=()=>eb.current=!1;document.addEventListener("keydown",Vb,{capture:!0});return()=>
{document.removeEventListener("keydown",Vb,{capture:!0});document.removeEventListener("pointerdown",Zb,{capture:!0});document.removeEventListener("pointermove",Zb,{capture:!0})}},[]);return(0,Xh.createElement)(dy,a,(0,Xh.createElement)(ly,{scope:d,open:n,onOpenChange:lb,content:La,onContentChange:Ua},(0,Xh.createElement)(my,{scope:d,onClose:(0,Xh.useCallback)(()=>lb(!1),[lb]),isUsingKeyboardRef:eb,dir:rb,modal:sa},P)))},[$t]=Ci("DropdownMenu",[bv]),Sr=bv(),[uw,gv]=$t("DropdownMenu"),uC=(0,ip.forwardRef)((a,
d)=>{const {__scopeDropdownMenu:n,disabled:P=!1}=a,ea=wg(a,["__scopeDropdownMenu","disabled"]),ka=gv("DropdownMenuTrigger",n),sa=Sr(n);return(0,ip.createElement)(ny,of({asChild:!0},sa),(0,ip.createElement)(jl.button,of({type:"button",id:ka.triggerId,"aria-haspopup":"menu","aria-expanded":ka.open,"aria-controls":ka.open?ka.contentId:void 0,"data-state":ka.open?"open":"closed","data-disabled":P?"":void 0,disabled:P},ea,{ref:yh(d,ka.triggerRef),onPointerDown:Ng(a.onPointerDown,La=>{P||0!==La.button||
!1!==La.ctrlKey||(ka.onOpenToggle(),ka.open||La.preventDefault())}),onKeyDown:Ng(a.onKeyDown,La=>{if(!P){if(["Enter"," "].includes(La.key))ka.onOpenToggle();if("ArrowDown"===La.key)ka.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(La.key)&&La.preventDefault()}})})))}),vw=(0,ip.forwardRef)((a,d)=>{var {__scopeDropdownMenu:n}=a;const P=wg(a,["__scopeDropdownMenu"]),ea=gv("DropdownMenuContent",n);n=Sr(n);const ka=(0,ip.useRef)(!1);return(0,ip.createElement)(ev,of({id:ea.contentId,"aria-labelledby":ea.triggerId},
n,P,{ref:d,onCloseAutoFocus:Ng(a.onCloseAutoFocus,sa=>{var La;ka.current||null===(La=ea.triggerRef.current)||void 0===La||La.focus();ka.current=!1;sa.preventDefault()}),onInteractOutside:Ng(a.onInteractOutside,sa=>{sa=sa.detail.originalEvent;const La=0===sa.button&&!0===sa.ctrlKey;sa=2===sa.button||La;if(!ea.modal||sa)ka.current=!0}),style:$f(Ie({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),hv=(0,ip.forwardRef)((a,d)=>{var {__scopeDropdownMenu:n}=
a;a=wg(a,["__scopeDropdownMenu"]);n=Sr(n);return(0,ip.createElement)(Zt,of({},n,a,{ref:d}))}),py=a=>{const {__scopeDropdownMenu:d,children:n,dir:P,open:ea,defaultOpen:ka,onOpenChange:sa,modal:La=!0}=a;a=Sr(d);const Ua=(0,ip.useRef)(null),[eb=!1,lb]=Vc({prop:ea,defaultProp:ka,onChange:sa});return(0,ip.createElement)(uw,{scope:d,triggerId:Ii(),triggerRef:Ua,contentId:Ii(),open:eb,onOpenChange:lb,onOpenToggle:(0,ip.useCallback)(()=>lb(rb=>!rb),[lb]),modal:La},(0,ip.createElement)(tC,of({},a,{open:eb,
onOpenChange:lb,dir:P,modal:La}),n))},Pj=gg(ba(21)).default.createContext({}),vC=gg(ba(21)),wC=ba(612),Vl=a=>{var {action:d}=a;a=wg(a,["action"]);var {renderers:n}=vC.useContext(Pj);n=null==n?void 0:n.KeyboardShortcut;return(0,wC.jsx)("div",$f(Ie({className:"tl-menu-right-slot"},a),{children:(0,wC.jsx)(n,{action:d})}))};ba(21);var Fm=ba(612),xC=Ke(function(){const a=bf(),d=n=>{n.preventDefault()};return(0,Fm.jsxs)(py,{children:[(0,Fm.jsx)(uC,{className:"tl-button text-sm px-2 important",id:"tl-zoom",
children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,Fm.jsxs)(vw,{onCloseAutoFocus:n=>n.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,Fm.jsxs)(hv,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,Fm.jsx)(Vl,{action:"whiteboard/zoom-to-fit"})]}),(0,Fm.jsxs)(hv,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,children:["Zoom to fit selection",(0,Fm.jsx)(Vl,{action:"whiteboard/zoom-to-selection"})]}),
(0,Fm.jsxs)(hv,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomIn,children:["Zoom in",(0,Fm.jsx)(Vl,{action:"whiteboard/zoom-in"})]}),(0,Fm.jsxs)(hv,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,Fm.jsx)(Vl,{action:"whiteboard/zoom-out"})]}),(0,Fm.jsxs)(hv,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,Fm.jsx)(Vl,{action:"whiteboard/reset-zoom"})]})]})]})}),ww=ba(21),qy=["horizontal","vertical"],nq=(0,ww.forwardRef)((a,
d)=>{const {decorative:n,orientation:P="horizontal"}=a;a=wg(a,["decorative","orientation"]);const ea=qy.includes(P)?P:"horizontal";return(0,ww.createElement)(jl.div,of({"data-orientation":ea},n?{role:"none"}:{"aria-orientation":"vertical"===ea?ea:void 0,role:"separator"},a,{ref:d}))});nq.propTypes={orientation(a,d,n){a=a[d];d=String(a);return a&&!qy.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${n}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var Gl=ba(612),sy=Ke(function(){const a=bf(),{handlers:{t:d}}=Nr.useContext(Pj),n=Nr.useCallback(()=>{a.api.undo()},[a]),P=Nr.useCallback(()=>{a.api.redo()},[a]),ea=Nr.useCallback(()=>{a.api.zoomIn()},[a]),ka=Nr.useCallback(()=>{a.api.zoomOut()},[a]),sa=Nr.useCallback(()=>{a.api.toggleGrid()},[a]),La=Nr.useCallback(()=>{a.api.toggleSnapToGrid()},[a]),Ua=Nr.useCallback(()=>{a.api.togglePenMode()},[a]);return(0,Gl.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",
children:[!a.readOnly&&(0,Gl.jsxs)("div",{className:"tl-toolbar tl-history-bar mr-2 mb-2",children:[(0,Gl.jsx)(Ee,{tooltip:d("whiteboard/undo"),onClick:n,children:(0,Gl.jsx)(oi,{name:"arrow-back-up"})}),(0,Gl.jsx)(Ee,{tooltip:d("whiteboard/redo"),onClick:P,children:(0,Gl.jsx)(oi,{name:"arrow-forward-up"})})]}),(0,Gl.jsxs)("div",{className:"tl-toolbar tl-zoom-bar mr-2 mb-2",children:[(0,Gl.jsx)(Ee,{tooltip:d("whiteboard/zoom-in"),onClick:ea,id:"tl-zoom-in",children:(0,Gl.jsx)(oi,{name:"plus"})}),(0,Gl.jsx)(Ee,
{tooltip:d("whiteboard/zoom-out"),onClick:ka,id:"tl-zoom-out",children:(0,Gl.jsx)(oi,{name:"minus"})}),(0,Gl.jsx)(nq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Gl.jsx)(xC,{})]}),(0,Gl.jsxs)("div",{className:"tl-toolbar tl-grid-bar mr-2 mb-2",children:[(0,Gl.jsx)(mf,{tooltip:d("whiteboard/toggle-grid"),className:"tl-button",pressed:a.settings.showGrid,id:"tl-show-grid",onPressedChange:sa,children:(0,Gl.jsx)(oi,{name:"grid-dots"})}),!a.readOnly&&(0,Gl.jsx)(mf,{tooltip:d("whiteboard/snap-to-grid"),
className:"tl-button",pressed:a.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:La,children:(0,Gl.jsx)(oi,{name:a.settings.snapToGrid?"magnet":"magnet-off"})})]}),!a.readOnly&&(0,Gl.jsx)("div",{className:"tl-toolbar tl-pen-mode-bar mb-2",children:(0,Gl.jsx)(mf,{tooltip:d("whiteboard/toggle-pen-mode"),className:"tl-button",pressed:a.settings.penMode,id:"tl-toggle-pen-mode",onPressedChange:Ua,children:(0,Gl.jsx)(oi,{name:a.settings.penMode?"pencil":"pencil-off"})})})]})}),au=gg(ba(21)),ry=
gg(ba(30)),xw=ba(612),En=a=>`[${a.map(d=>{var n;return null!=(n=null==d?void 0:d.toFixed(2))?n:"-"}).join(", ")}]`,Rn=Ke(()=>{var a;const {viewport:{bounds:d,camera:{point:n,zoom:P}},inputs:ea}=ld(),ka=au.default.useRef();au.default.useEffect(()=>{const La=document.getElementById("tl-statusbar-anchor");ka.current=La},[]);const sa=[["Z",null!=(a=null==P?void 0:P.toFixed(2))?a:"null"],["MP",En(ea.currentPoint)],["MS",En(ea.currentScreenPoint)],["VP",En(n)],["VBR",En([d.maxX,d.maxY])]].map(La=>La.join("")).join("|");
a=ka.current?ry.default.createPortal((0,xw.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:sa}),ka.current):null;return(0,xw.jsx)(xw.Fragment,{children:a})}),mo=gg(ba(21)),iv=ba(612),Cp=Ke(a=>{var {id:d,icon:n,tooltip:P,tooltipSide:ea="left",handleClick:ka}=a;a=wg(a,["id","icon","tooltip","tooltipSide","handleClick"]);var sa;const La=bf(),Ua=null==(sa=[...La.Tools,Ot,Pt])?void 0:sa.find(eb=>eb.id===d);sa=(sa=null==Ua?void 0:Ua.shortcut)&&P?(0,iv.jsxs)("div",{className:"flex",
children:[P,(0,iv.jsx)(Vl,{action:sa})]}):P;return(0,iv.jsx)(Ee,$f(Ie({},a),{tooltipSide:ea,tooltip:sa,"data-tool":d,"data-selected":d===La.selectedTool.id,onClick:ka,children:"string"===typeof n?(0,iv.jsx)(oi,{name:n}):n}))}),ik=ba(21),[ty]=Ci("Popover",[Wt]),bu=Wt(),[uy,Ws]=ty("Popover"),vy=(0,ik.forwardRef)((a,d)=>{var {__scopePopover:n}=a;const P=wg(a,["__scopePopover"]),ea=Ws("PopoverTrigger",n);n=bu(n);d=Zh(d,ea.triggerRef);a=(0,ik.createElement)(jl.button,of({type:"button","aria-haspopup":"dialog",
"aria-expanded":ea.open,"aria-controls":ea.contentId,"data-state":ea.open?"open":"closed"},P,{ref:d,onClick:Ng(a.onClick,ea.onOpenToggle)}));return ea.hasCustomAnchor?a:(0,ik.createElement)(by,of({asChild:!0},n),a)}),[,wy]=ty("PopoverPortal",{forceMount:void 0}),xy=(0,ik.forwardRef)((a,d)=>{var n=wy("PopoverContent",a.__scopePopover);({forceMount:n=n.forceMount}=a);const P=wg(a,["forceMount"]);a=Ws("PopoverContent",a.__scopePopover);return(0,ik.createElement)(Zu,{present:n||a.open},a.modal?(0,ik.createElement)(cu,
of({},P,{ref:d})):(0,ik.createElement)(yC,of({},P,{ref:d})))}),cu=(0,ik.forwardRef)((a,d)=>{const n=Ws("PopoverContent",a.__scopePopover),P=(0,ik.useRef)(null);d=Zh(d,P);const ea=(0,ik.useRef)(!1);(0,ik.useEffect)(()=>{const ka=P.current;if(ka)return ky(ka)},[]);return(0,ik.createElement)(mq,{as:kq,allowPinchZoom:!0},(0,ik.createElement)(zC,of({},a,{ref:d,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ng(a.onCloseAutoFocus,ka=>{var sa;ka.preventDefault();ea.current||null===(sa=n.triggerRef.current)||
void 0===sa||sa.focus()}),onPointerDownOutside:Ng(a.onPointerDownOutside,ka=>{ka=ka.detail.originalEvent;const sa=0===ka.button&&!0===ka.ctrlKey;ea.current=2===ka.button||sa},{checkForDefaultPrevented:!1}),onFocusOutside:Ng(a.onFocusOutside,ka=>ka.preventDefault(),{checkForDefaultPrevented:!1})})))}),yC=(0,ik.forwardRef)((a,d)=>{const n=Ws("PopoverContent",a.__scopePopover),P=(0,ik.useRef)(!1);return(0,ik.createElement)(zC,of({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:ea=>
{var ka;null===(ka=a.onCloseAutoFocus)||void 0===ka||ka.call(a,ea);if(!ea.defaultPrevented){var sa;P.current||null===(sa=n.triggerRef.current)||void 0===sa||sa.focus();ea.preventDefault()}P.current=!1},onInteractOutside:ea=>{var ka,sa;null===(ka=a.onInteractOutside)||void 0===ka||ka.call(a,ea);ea.defaultPrevented||(P.current=!0);ka=ea.target;(null===(sa=n.triggerRef.current)||void 0===sa?0:sa.contains(ka))&&ea.preventDefault()}}))}),zC=(0,ik.forwardRef)((a,d)=>{const {__scopePopover:n,trapFocus:P,
onOpenAutoFocus:ea,onCloseAutoFocus:ka,disableOutsidePointerEvents:sa,onEscapeKeyDown:La,onPointerDownOutside:Ua,onFocusOutside:eb,onInteractOutside:lb}=a;a=wg(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const rb=Ws("PopoverContent",n),Vb=bu(n);Cg();return(0,ik.createElement)(bC,{asChild:!0,loop:!0,trapped:P,onMountAutoFocus:ea,onUnmountAutoFocus:ka},(0,ik.createElement)(Xx,
{asChild:!0,disableOutsidePointerEvents:sa,onInteractOutside:lb,onEscapeKeyDown:La,onPointerDownOutside:Ua,onFocusOutside:eb,onDismiss:()=>rb.onOpenChange(!1)},(0,ik.createElement)(cy,of({"data-state":rb.open?"open":"closed",role:"dialog",id:rb.contentId},Vb,a,{ref:d,style:$f(Ie({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),Xs=(0,ik.forwardRef)((a,d)=>{var {__scopePopover:n}=a;a=wg(a,["__scopePopover"]);n=bu(n);return(0,ik.createElement)(TB,
of({},n,a,{ref:d}))}),yw=a=>{const {__scopePopover:d,children:n,open:P,defaultOpen:ea,onOpenChange:ka,modal:sa=!1}=a;a=bu(d);const La=(0,ik.useRef)(null),[Ua,eb]=(0,ik.useState)(!1),[lb=!1,rb]=Vc({prop:P,defaultProp:ea,onChange:ka});return(0,ik.createElement)(dy,a,(0,ik.createElement)(uy,{scope:d,contentId:Ii(),triggerRef:La,open:lb,onOpenChange:rb,onOpenToggle:(0,ik.useCallback)(()=>rb(Vb=>!Vb),[rb]),hasCustomAnchor:Ua,onCustomAnchorAdd:(0,ik.useCallback)(()=>eb(!0),[]),onCustomAnchorRemove:(0,ik.useCallback)(()=>
eb(!1),[]),modal:sa},n))},AC=gg(ba(21)),oq=ba(612),yy=Ke(function(a){var {popoverSide:d="left",setGeometry:n,activeGeometry:P,chevron:ea=!0}=a;a=wg(a,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:ka}}=AC.default.useContext(Pj);const sa=[{id:"box",icon:"square",tooltip:ka("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:ka("whiteboard/circle")},{id:"polygon",icon:"triangle",tooltip:ka("whiteboard/triangle")}];ka={id:"shapes",icon:"triangle-square-circle",tooltip:ka("whiteboard/shape")};
ka=P?sa.find(La=>La.id===P):ka;return(0,oq.jsxs)(yw,{children:[(0,oq.jsx)(vy,{asChild:!0,children:(0,oq.jsxs)("div",$f(Ie({},a),{className:"tl-geometry-tools-pane-anchor",children:[(0,oq.jsx)(Cp,$f(Ie({},ka),{tooltipSide:d})),ea&&(0,oq.jsx)(oi,{"data-selected":P,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,oq.jsxs)(xy,{className:"tl-popover-content",side:d,sideOffset:15,children:[(0,oq.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":
"flex-row"}`,children:sa.map(La=>(0,oq.jsx)(Cp,{id:La.id,icon:La.icon,tooltip:P?La.tooltip:"",handleClick:n,tooltipSide:d},La.id))}),(0,oq.jsx)(Xs,{className:"tl-popover-arrow"})]})]})}),ij=ba(21),zy=ba(21),Ay=["PageUp","PageDown"],jv=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],By={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},
[Cy,tH,BC]=$g("Slider"),[pq]=Ci("Slider",[BC]),[Sq,Tq]=pq("Slider"),Ys=(0,ij.forwardRef)((a,d)=>{function n(wf){const bg=zq(Oe,wf);ka(wf,bg)}function P(wf){ka(wf,Wd.current)}function ea(){Oe[Wd.current]!==mg.current[Wd.current]&&Kc(Oe)}function ka(wf,bg,{commit:ke}={commit:!1}){const Pd=(String(eb).split(".")[1]||"").length;wf=tn(Math.round((wf-La)/eb)*eb+La,Pd);const be=Fo(wf,[La,Ua]);nf((Jd=[])=>{const ee=Uj(Jd,be,bg);var xf=Vb*eb;if(0<xf){const Of=Rm(ee);xf=Math.min(...Of)>=xf}else xf=!0;return xf?
(Wd.current=ee.indexOf(be),(xf=String(ee)!==String(Jd))&&ke&&Kc(ee),xf?ee:Jd):Jd})}const {name:sa,min:La=0,max:Ua=100,step:eb=1,orientation:lb="horizontal",disabled:rb=!1,minStepsBetweenThumbs:Vb=0,defaultValue:Zb=[La],value:Tb,onValueChange:sc=()=>{},onValueCommit:Kc=()=>{},inverted:fc=!1}=a,zc=wg(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[vc,$c]=(0,ij.useState)(null);d=Zh(d,wf=>$c(wf));const ed=(0,ij.useRef)(new Set),
Wd=(0,ij.useRef)(0);var me="horizontal"===lb;const Kf=vc?!!vc.closest("form"):!0;me=me?uH:DC;const [Oe=[],nf]=Vc({prop:Tb,defaultProp:Zb,onChange:wf=>{var bg;null===(bg=[...ed.current][Wd.current])||void 0===bg||bg.focus();sc(wf)}}),mg=(0,ij.useRef)(Oe);return(0,ij.createElement)(Sq,{scope:a.__scopeSlider,disabled:rb,min:La,max:Ua,valueIndexToChangeRef:Wd,thumbs:ed.current,values:Oe,orientation:lb},(0,ij.createElement)(Cy.Provider,{scope:a.__scopeSlider},(0,ij.createElement)(Cy.Slot,{scope:a.__scopeSlider},
(0,ij.createElement)(me,of({"aria-disabled":rb,"data-disabled":rb?"":void 0},zc,{ref:d,onPointerDown:Ng(zc.onPointerDown,()=>{rb||(mg.current=Oe)}),min:La,max:Ua,inverted:fc,onSlideStart:rb?void 0:n,onSlideMove:rb?void 0:P,onSlideEnd:rb?void 0:ea,onHomeKeyDown:()=>!rb&&ka(La,0,{commit:!0}),onEndKeyDown:()=>!rb&&ka(Ua,Oe.length-1,{commit:!0}),onStepKeyDown:({event:wf,direction:bg})=>{if(!rb){wf=Ay.includes(wf.key)||wf.shiftKey&&jv.includes(wf.key);const ke=Wd.current;ka(Oe[ke]+eb*(wf?10:1)*bg,ke,{commit:!0})}}})))),
Kf&&Oe.map((wf,bg)=>(0,ij.createElement)(Hl,{key:bg,name:sa?sa+(1<Oe.length?"[]":""):void 0,value:wf})))}),[Dy,CC]=pq("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),uH=(0,ij.forwardRef)((a,d)=>{function n(zc){const vc=Tb.current||Vb.getBoundingClientRect(),$c=An([0,vc.width],fc?[P,ea]:[ea,P]);Tb.current=vc;return $c(zc-vc.left)}const {min:P,max:ea,dir:ka,inverted:sa,onSlideStart:La,onSlideMove:Ua,onSlideEnd:eb,onStepKeyDown:lb}=a,rb=wg(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
[Vb,Zb]=(0,ij.useState)(null);d=Zh(d,zc=>Zb(zc));const Tb=(0,ij.useRef)(),sc=nh(ka),Kc="ltr"===sc,fc=Kc&&!sa||!Kc&&sa;return(0,ij.createElement)(Dy,{scope:a.__scopeSlider,startEdge:fc?"left":"right",endEdge:fc?"right":"left",direction:fc?1:-1,size:"width"},(0,ij.createElement)(Nf,of({dir:sc,"data-orientation":"horizontal"},rb,{ref:d,style:$f(Ie({},rb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:zc=>{zc=n(zc.clientX);null===La||void 0===La||La(zc)},onSlideMove:zc=>{zc=
n(zc.clientX);null===Ua||void 0===Ua||Ua(zc)},onSlideEnd:()=>{Tb.current=void 0;null===eb||void 0===eb||eb()},onStepKeyDown:zc=>{const vc=By[fc?"from-left":"from-right"].includes(zc.key);null===lb||void 0===lb||lb({event:zc,direction:vc?-1:1})}})))}),DC=(0,ij.forwardRef)((a,d)=>{function n(Tb){const sc=Vb.current||rb.current.getBoundingClientRect(),Kc=An([0,sc.height],Zb?[ea,P]:[P,ea]);Vb.current=sc;return Kc(Tb-sc.top)}const {min:P,max:ea,inverted:ka,onSlideStart:sa,onSlideMove:La,onSlideEnd:Ua,
onStepKeyDown:eb}=a,lb=wg(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),rb=(0,ij.useRef)(null);d=Zh(d,rb);const Vb=(0,ij.useRef)(),Zb=!ka;return(0,ij.createElement)(Dy,{scope:a.__scopeSlider,startEdge:Zb?"bottom":"top",endEdge:Zb?"top":"bottom",size:"height",direction:Zb?1:-1},(0,ij.createElement)(Nf,of({"data-orientation":"vertical"},lb,{ref:d,style:$f(Ie({},lb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Tb=>{Tb=n(Tb.clientY);null===
sa||void 0===sa||sa(Tb)},onSlideMove:Tb=>{Tb=n(Tb.clientY);null===La||void 0===La||La(Tb)},onSlideEnd:()=>{Vb.current=void 0;null===Ua||void 0===Ua||Ua()},onStepKeyDown:Tb=>{const sc=By[Zb?"from-bottom":"from-top"].includes(Tb.key);null===eb||void 0===eb||eb({event:Tb,direction:sc?-1:1})}})))}),Nf=(0,ij.forwardRef)((a,d)=>{const {__scopeSlider:n,onSlideStart:P,onSlideMove:ea,onSlideEnd:ka,onHomeKeyDown:sa,onEndKeyDown:La,onStepKeyDown:Ua}=a,eb=wg(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
lb=Tq("Slider",n);return(0,ij.createElement)(jl.span,of({},eb,{ref:d,onKeyDown:Ng(a.onKeyDown,rb=>{"Home"===rb.key?(sa(rb),rb.preventDefault()):"End"===rb.key?(La(rb),rb.preventDefault()):Ay.concat(jv).includes(rb.key)&&(Ua(rb),rb.preventDefault())}),onPointerDown:Ng(a.onPointerDown,rb=>{const Vb=rb.target;Vb.setPointerCapture(rb.pointerId);rb.preventDefault();lb.thumbs.has(Vb)?Vb.focus():P(rb)}),onPointerMove:Ng(a.onPointerMove,rb=>{rb.target.hasPointerCapture(rb.pointerId)&&ea(rb)}),onPointerUp:Ng(a.onPointerUp,
rb=>{const Vb=rb.target;Vb.hasPointerCapture(rb.pointerId)&&(Vb.releasePointerCapture(rb.pointerId),ka(rb))})}))}),bh=(0,ij.forwardRef)((a,d)=>{var {__scopeSlider:n}=a;a=wg(a,["__scopeSlider"]);n=Tq("SliderTrack",n);return(0,ij.createElement)(jl.span,of({"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation},a,{ref:d}))}),Xf=(0,ij.forwardRef)((a,d)=>{var {__scopeSlider:n}=a;const P=wg(a,["__scopeSlider"]),ea=Tq("SliderRange",n);n=CC("SliderRange",n);var ka=(0,ij.useRef)(null);d=Zh(d,
ka);var sa=ea.values.length;ka=ea.values.map(La=>vj(La,ea.min,ea.max));sa=1<sa?Math.min(...ka):0;ka=100-Math.max(...ka);return(0,ij.createElement)(jl.span,of({"data-orientation":ea.orientation,"data-disabled":ea.disabled?"":void 0},P,{ref:d,style:$f(Ie({},a.style),{[n.startEdge]:sa+"%",[n.endEdge]:ka+"%"})}))}),Gg=(0,ij.forwardRef)((a,d)=>{const n=tH(a.__scopeSlider),[P,ea]=(0,ij.useState)(null);d=Zh(d,sa=>ea(sa));const ka=(0,ij.useMemo)(()=>P?n().findIndex(sa=>sa.ref.current===P):-1,[n,P]);return(0,ij.createElement)(No,
of({},a,{ref:d,index:ka}))}),No=(0,ij.forwardRef)((a,d)=>{const {__scopeSlider:n,index:P}=a,ea=wg(a,["__scopeSlider","index"]),ka=Tq("SliderThumb",n),sa=CC("SliderThumb",n),[La,Ua]=(0,ij.useState)(null);d=Zh(d,Zb=>Ua(Zb));var eb=Cb(La);const lb=ka.values[P],rb=void 0===lb?0:vj(lb,ka.min,ka.max),Vb=tl(P,ka.values.length);eb=(eb=null===eb||void 0===eb?void 0:eb[sa.size])?hm(eb,rb,sa.direction):0;(0,ij.useEffect)(()=>{if(La)return ka.thumbs.add(La),()=>{ka.thumbs.delete(La)}},[La,ka.thumbs]);return(0,ij.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[sa.startEdge]:`calc(${rb}% + ${eb}px)`}},(0,ij.createElement)(Cy.ItemSlot,{scope:a.__scopeSlider},(0,ij.createElement)(jl.span,of({role:"slider","aria-label":a["aria-label"]||Vb,"aria-valuemin":ka.min,"aria-valuenow":lb,"aria-valuemax":ka.max,"aria-orientation":ka.orientation,"data-orientation":ka.orientation,"data-disabled":ka.disabled?"":void 0,tabIndex:ka.disabled?void 0:0},ea,{ref:d,style:void 0===lb?{display:"none"}:
a.style,onFocus:Ng(a.onFocus,()=>{ka.valueIndexToChangeRef.current=P})}))))}),Hl=a=>{const {value:d}=a;a=wg(a,["value"]);const n=(0,ij.useRef)(null),P=Qn(d);(0,ij.useEffect)(()=>{const ea=n.current,ka=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(P!==d&&ka){const sa=new Event("input",{bubbles:!0});ka.call(ea,d);ea.dispatchEvent(sa)}},[P,d]);return(0,ij.createElement)("input",of({style:{display:"none"}},a,{ref:n,defaultValue:d}))},kv=Ys,Mk=bh,qq=Xf,Df=Gg,Lg=gg(ba(21)),
mn=ba(612),uf=Ke(a=>{var {side:d,align:n,alignOffset:P,label:ea,arrow:ka,children:sa,border:La}=a;a=wg(a,"side align alignOffset label arrow children border".split(" "));const Ua=Lg.useRef(null),[eb,lb]=Lg.useState(!1),{viewport:{bounds:rb,camera:{point:Vb,zoom:Zb}}}=bf(),[Tb,sc]=Lg.useState(0);Lg.useEffect(()=>{if(Ua.current&&eb){var Kc=Ua.current.getBoundingClientRect();ig.boundsContain(rb,{minX:Kc.x,minY:Kc.y,maxX:Kc.right,maxY:Kc.bottom,width:Kc.width,height:Kc.height})||sc(fc=>fc+1)}},[Vb[0],
Vb[1],Zb,eb]);return(0,mn.jsxs)(yw,{onOpenChange:Kc=>lb(Kc),children:[(0,mn.jsx)(vy,$f(Ie({},a),{"data-border":La,className:"tl-button tl-popover-trigger-button",children:ea})),(0,mn.jsxs)(xy,{ref:Ua,className:"tl-popover-content",align:n,alignOffset:P,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[sa,ka&&(0,mn.jsx)(Xs,{className:"tl-popover-arrow"})]},"popover-content-"+Tb)]})}),Tr=gg(ba(21)),rm=ba(612),Ey=gg(ba(21)),kg=ba(21),Sn=ba(30),nn=gg(ba(21)),Fn=
ba(21),on=ba(21),Ur=ba(30),Il="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const n=(0,on.forwardRef)((P,ea)=>{var {asChild:ka}=P;P=wg(P,["asChild"]);ka=ka?kq:d;(0,on.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,on.createElement)(ka,of({},P,{ref:ea}))});n.displayName=`Primitive.${d}`;return $f(Ie({},a),{[d]:n})},{}),jp,Gh=(0,Fn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tn=(0,Fn.forwardRef)((a,
d)=>{var n;const {disableOutsidePointerEvents:P=!1,onEscapeKeyDown:ea,onPointerDownOutside:ka,onFocusOutside:sa,onInteractOutside:La,onDismiss:Ua}=a,eb=wg(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),lb=(0,Fn.useContext)(Gh),[rb,Vb]=(0,Fn.useState)(null),Zb=null!==(n=null===rb||void 0===rb?void 0:rb.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Tb]=(0,Fn.useState)({});
d=Zh(d,vc=>Vb(vc));n=Array.from(lb.layers);var [sc]=[...lb.layersWithOutsidePointerEventsDisabled].slice(-1);sc=n.indexOf(sc);const Kc=rb?n.indexOf(rb):-1;n=0<lb.layersWithOutsidePointerEventsDisabled.size;const fc=Kc>=sc;sc=so(vc=>{const $c=vc.target,ed=[...lb.branches].some(Wd=>Wd.contains($c));fc&&!ed&&(null===ka||void 0===ka||ka(vc),null===La||void 0===La||La(vc),vc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Zb);const zc=bm(vc=>{const $c=vc.target;[...lb.branches].some(ed=>ed.contains($c))||
(null===sa||void 0===sa||sa(vc),null===La||void 0===La||La(vc),vc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Zb);Uk(vc=>{Kc===lb.layers.size-1&&(null===ea||void 0===ea||ea(vc),!vc.defaultPrevented&&Ua&&(vc.preventDefault(),Ua()))},Zb);(0,Fn.useEffect)(()=>{if(rb)return P&&(0===lb.layersWithOutsidePointerEventsDisabled.size&&(jp=Zb.body.style.pointerEvents,Zb.body.style.pointerEvents="none"),lb.layersWithOutsidePointerEventsDisabled.add(rb)),lb.layers.add(rb),wm(),()=>{P&&1===lb.layersWithOutsidePointerEventsDisabled.size&&
(Zb.body.style.pointerEvents=jp)}},[rb,Zb,P,lb]);(0,Fn.useEffect)(()=>()=>{rb&&(lb.layers.delete(rb),lb.layersWithOutsidePointerEventsDisabled.delete(rb),wm())},[rb,lb]);(0,Fn.useEffect)(()=>{const vc=()=>Tb({});document.addEventListener("dismissableLayer.update",vc);return()=>document.removeEventListener("dismissableLayer.update",vc)},[]);return(0,Fn.createElement)(Il.div,of({},eb,{ref:d,style:Ie({pointerEvents:n?fc?"auto":"none":void 0},a.style),onFocusCapture:Ng(a.onFocusCapture,zc.onFocusCapture),
onBlurCapture:Ng(a.onBlurCapture,zc.onBlurCapture),onPointerDownCapture:Ng(a.onPointerDownCapture,sc.onPointerDownCapture)}))}),Gn=ba(21),Fy={bubbles:!1,cancelable:!0},Zs=(0,Gn.forwardRef)((a,d)=>{const {loop:n=!1,trapped:P=!1,onMountAutoFocus:ea,onUnmountAutoFocus:ka}=a;a=wg(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [sa,La]=(0,Gn.useState)(null),Ua=Mj(ea),eb=Mj(ka),lb=(0,Gn.useRef)(null);d=Zh(d,Zb=>La(Zb));const rb=(0,Gn.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,Gn.useEffect)(()=>{if(P){let Zb=function(sc){!rb.paused&&sa&&(sc=sc.target,sa.contains(sc)?lb.current=sc:cm(lb.current,{select:!0}))},Tb=function(sc){!rb.paused&&sa&&(sa.contains(sc.relatedTarget)||cm(lb.current,{select:!0}))};document.addEventListener("focusin",Zb);document.addEventListener("focusout",Tb);return()=>{document.removeEventListener("focusin",Zb);document.removeEventListener("focusout",Tb)}}},[P,sa,rb.paused]);(0,Gn.useEffect)(()=>{if(sa){Ch.add(rb);const Zb=document.activeElement;
if(!sa.contains(Zb)){const Tb=new CustomEvent("focusScope.autoFocusOnMount",Fy);sa.addEventListener("focusScope.autoFocusOnMount",Ua);sa.dispatchEvent(Tb);Tb.defaultPrevented||(Kn(to(fo(sa)),{select:!0}),document.activeElement===Zb&&cm(sa))}return()=>{sa.removeEventListener("focusScope.autoFocusOnMount",Ua);setTimeout(()=>{const Tb=new CustomEvent("focusScope.autoFocusOnUnmount",Fy);sa.addEventListener("focusScope.autoFocusOnUnmount",eb);sa.dispatchEvent(Tb);Tb.defaultPrevented||cm(null!==Zb&&void 0!==
Zb?Zb:document.body,{select:!0});sa.removeEventListener("focusScope.autoFocusOnUnmount",eb);Ch.remove(rb)},0)}}},[sa,Ua,eb,rb]);const Vb=(0,Gn.useCallback)(Zb=>{if((n||P)&&!rb.paused){var Tb=document.activeElement;if("Tab"===Zb.key&&!Zb.altKey&&!Zb.ctrlKey&&!Zb.metaKey&&Tb){const Kc=Zb.currentTarget;var sc=Kc;const fc=fo(sc),zc=wn(fc,sc);sc=wn(fc.reverse(),sc);const [vc,$c]=[zc,sc];vc&&$c?Zb.shiftKey||Tb!==$c?Zb.shiftKey&&Tb===vc&&(Zb.preventDefault(),n&&cm($c,{select:!0})):(Zb.preventDefault(),n&&
cm(vc,{select:!0})):Tb===Kc&&Zb.preventDefault()}}},[n,P,rb.paused]);return(0,Gn.createElement)(Il.div,of({tabIndex:-1},a,{ref:d,onKeyDown:Vb}))}),Ch=function(){let a=[];return{add(d){const n=a[0];d===n||null!==n&&void 0!==n&&n.pause();a=un(a,d);a.unshift(d)},remove(d){var n;a=un(a,d);null===(n=a[0])||void 0===n||n.resume()}}}(),pn=ba(21),[Dp,Rh]=Ci("Popper"),[lv,xk]=Dp("Popper"),Jl=(0,pn.forwardRef)((a,d)=>{const {__scopePopper:n,virtualRef:P}=a;a=wg(a,["__scopePopper","virtualRef"]);const ea=xk("PopperAnchor",
n),ka=(0,pn.useRef)(null);d=Zh(d,ka);(0,pn.useEffect)(()=>{ea.onAnchorChange((null===P||void 0===P?void 0:P.current)||ka.current)});return P?null:(0,pn.createElement)(Il.div,of({},a,{ref:d}))}),[du]=Dp("PopperContent"),[mv,Gy]=Dp("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),eu=(0,pn.forwardRef)((a,d)=>{var n,P,ea,ka,sa,La,Ua,eb;const {__scopePopper:lb,side:rb="bottom",sideOffset:Vb=0,align:Zb="center",alignOffset:Tb=0,arrowPadding:sc=0,collisionBoundary:Kc=[],collisionPadding:fc=0,sticky:zc=
"partial",hideWhenDetached:vc=!1,avoidCollisions:$c=!0,onPlaced:ed}=a,Wd=wg(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),me=xk("PopperContent",lb),[Kf,Oe]=(0,pn.useState)(null);d=Zh(d,bo=>Oe(bo));const [nf,mg]=(0,pn.useState)(null);var wf=Cb(nf),bg=null!==(n=null===wf||void 0===wf?void 0:wf.width)&&void 0!==n?n:0;n=null!==(P=null===wf||void 0===wf?void 0:wf.height)&&void 0!==P?P:0;P=
rb+("center"!==Zb?"-"+Zb:"");wf="number"===typeof fc?fc:Ie({top:0,right:0,bottom:0,left:0},fc);const ke=Array.isArray(Kc)?Kc:[Kc],Pd=0<ke.length;wf={padding:wf,boundary:ke.filter(Qh),altBoundary:Pd};const {reference:be,floating:Jd,strategy:ee,x:xf,y:Of,placement:Kg,middlewareData:xh,update:Yf}=gc({strategy:"fixed",placement:P,whileElementsMounted:cc,middleware:[sm(),MB({mainAxis:Vb+n,alignmentAxis:Tb}),$c?NB(Ie({mainAxis:!0,crossAxis:!1,limiter:"partial"===zc?OB():void 0},wf)):void 0,nf?RB({element:nf,
padding:sc}):void 0,$c?KB(Ie({},wf)):void 0,yG($f(Ie({},wf),{apply:({elements:bo,availableWidth:MD,availableHeight:Bu})=>{bo.floating.style.setProperty("--radix-popper-available-width",`${MD}px`);bo.floating.style.setProperty("--radix-popper-available-height",`${Bu}px`)}})),EC({arrowWidth:bg,arrowHeight:n}),vc?LB({strategy:"referenceHidden"}):void 0].filter(uo)});Um(()=>{be(me.anchor)},[be,me.anchor]);const Jh=null!==xf&&null!==Of,[yg,Vh]=vo(Kg),li=Mj(ed);Um(()=>{Jh&&(null===li||void 0===li||li())},
[Jh,li]);bg=null===(ea=xh.arrow)||void 0===ea?void 0:ea.x;ea=null===(ka=xh.arrow)||void 0===ka?void 0:ka.y;ka=0!==(null===(sa=xh.arrow)||void 0===sa?void 0:sa.centerOffset);const [Hj,dl]=(0,pn.useState)();Um(()=>{Kf&&dl(window.getComputedStyle(Kf).zIndex)},[Kf]);const {hasParent:el,positionUpdateFns:xq}=Gy("PopperContent",lb),qr=!el;(0,pn.useLayoutEffect)(()=>{if(!qr)return xq.add(Yf),()=>{xq.delete(Yf)}},[qr,xq,Yf]);Um(()=>{qr&&Jh&&Array.from(xq).reverse().forEach(bo=>requestAnimationFrame(bo))},
[qr,Jh,xq]);sa=$f(Ie({"data-side":yg,"data-align":Vh},Wd),{ref:d,style:$f(Ie({},Wd.style),{animation:Jh?void 0:"none",opacity:null!==(La=xh.hide)&&void 0!==La&&La.referenceHidden?0:void 0})});return(0,pn.createElement)("div",{ref:Jd,"data-radix-popper-content-wrapper":"",style:{position:ee,left:0,top:0,transform:Jh?`translate3d(${Math.round(xf)}px, ${Math.round(Of)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Hj,["--radix-popper-transform-origin"]:[null===(Ua=xh.transformOrigin)||
void 0===Ua?void 0:Ua.x,null===(eb=xh.transformOrigin)||void 0===eb?void 0:eb.y].join(" ")},dir:a.dir},(0,pn.createElement)(du,{scope:lb,placedSide:yg,onArrowChange:mg,arrowX:bg,arrowY:ea,shouldHideArrow:ka},qr?(0,pn.createElement)(mv,{scope:lb,hasParent:!0,positionUpdateFns:xq},(0,pn.createElement)(Il.div,sa)):(0,pn.createElement)(Il.div,sa)))}),sm=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:n}=a,{width:P,height:ea}=d.reference;n.floating.style.setProperty("--radix-popper-anchor-width",
`${P}px`);n.floating.style.setProperty("--radix-popper-anchor-height",`${ea}px`);return{}}}),EC=a=>({name:"transformOrigin",options:a,fn(d){var n,P,ea,ka,sa;const {placement:La,rects:Ua,middlewareData:eb}=d,lb=(d=0!==(null===(n=eb.arrow)||void 0===n?void 0:n.centerOffset))?0:a.arrowWidth;n=d?0:a.arrowHeight;const [rb,Vb]=vo(La),Zb={start:"0%",center:"50%",end:"100%"}[Vb],Tb=(null!==(P=null===(ea=eb.arrow)||void 0===ea?void 0:ea.x)&&void 0!==P?P:0)+lb/2;P=(null!==(ka=null===(sa=eb.arrow)||void 0===
sa?void 0:sa.y)&&void 0!==ka?ka:0)+n/2;sa=ka="";"bottom"===rb?(ka=d?Zb:`${Tb}px`,sa=`${-n}px`):"top"===rb?(ka=d?Zb:`${Tb}px`,sa=`${Ua.floating.height+n}px`):"right"===rb?(ka=`${-n}px`,sa=d?Zb:`${P}px`):"left"===rb&&(ka=`${Ua.floating.width+n}px`,sa=d?Zb:`${P}px`);return{data:{x:ka,y:sa}}}}),vH=a=>{const {__scopePopper:d,children:n}=a,[P,ea]=(0,pn.useState)(null);return(0,pn.createElement)(lv,{scope:d,anchor:P,onAnchorChange:ea},n)},FC=ba(21),wH=gg(ba(30)),Vr=(0,FC.forwardRef)((a,d)=>{var n;const {container:P=
null===globalThis||void 0===globalThis?void 0:null===(n=globalThis.document)||void 0===n?void 0:n.body}=a;a=wg(a,["container"]);return P?wH.default.createPortal((0,FC.createElement)(Il.div,of({},a,{ref:d})),P):null}),Uq=ba(21),yk=(0,Uq.forwardRef)((a,d)=>(0,Uq.createElement)(Il.span,of({},a,{ref:d,style:Ie({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),GC=[" ","Enter","ArrowUp","ArrowDown"],
Hy=[" ","Enter"],[zw,Ep,xH]=function(a){var d=a+"CollectionProvider";const [n,P]=Ci(d),[ea,ka]=n(d,{collectionRef:{current:null},itemMap:new Map}),sa=lb=>{const {scope:rb,children:Vb}=lb;lb=nn.default.useRef(null);const Zb=nn.default.useRef(new Map).current;return nn.default.createElement(ea,{scope:rb,itemMap:Zb,collectionRef:lb},Vb)};Object.assign(sa,{displayName:d});const La=a+"CollectionSlot";d=nn.default.forwardRef((lb,rb)=>{const {scope:Vb,children:Zb}=lb;lb=ka(La,Vb);rb=Zh(rb,lb.collectionRef);
return nn.default.createElement(kq,{ref:rb},Zb)});Object.assign(d,{displayName:La});const Ua=a+"CollectionItemSlot",eb=nn.default.forwardRef((lb,rb)=>{const {scope:Vb,children:Zb}=lb,Tb=wg(lb,["scope","children"]),sc=nn.default.useRef(null);lb=Zh(rb,sc);const Kc=ka(Ua,Vb);nn.default.useEffect(()=>{Kc.itemMap.set(sc,Ie({ref:sc},Tb));return()=>void Kc.itemMap.delete(sc)});return nn.default.createElement(kq,{["data-radix-collection-item"]:"",ref:lb},Zb)});Object.assign(eb,{displayName:Ua});return[{Provider:sa,
Slot:d,ItemSlot:eb},function(lb){const rb=ka(a+"CollectionConsumer",lb);return nn.default.useCallback(()=>{const Vb=rb.collectionRef.current;if(!Vb)return[];const Zb=Array.from(Vb.querySelectorAll("[data-radix-collection-item]"));return Array.from(rb.itemMap.values()).sort((Tb,sc)=>Zb.indexOf(Tb.ref.current)-Zb.indexOf(sc.ref.current))},[rb.collectionRef,rb.itemMap])},P]}("Select"),[Vq]=Ci("Select",[xH,Rh]),Iy=Rh(),[Aw,Wq]=Vq("Select"),[Jy,Ky]=Vq("Select"),HC=(0,kg.forwardRef)((a,d)=>{const {__scopeSelect:n,
disabled:P=!1}=a;a=wg(a,["__scopeSelect","disabled"]);const ea=Iy(n),ka=Wq("SelectTrigger",n),sa=ka.disabled||P;d=Zh(d,ka.onTriggerChange);const La=Ep(n),[Ua,eb,lb]=dm(rb=>{const Vb=La().filter(Tb=>!Tb.disabled),Zb=Vb.find(Tb=>Tb.value===ka.value);rb=Ol(Vb,rb,Zb);if(void 0!==rb)ka.onValueChange(rb.value)});return(0,kg.createElement)(Jl,of({asChild:!0},ea),(0,kg.createElement)(Il.button,of({type:"button",role:"combobox","aria-controls":ka.contentId,"aria-expanded":ka.open,"aria-required":ka.required,
"aria-autocomplete":"none",dir:ka.dir,"data-state":ka.open?"open":"closed",disabled:sa,"data-disabled":sa?"":void 0,"data-placeholder":void 0===ka.value?"":void 0},a,{ref:d,onClick:Ng(a.onClick,rb=>{rb.currentTarget.focus()}),onPointerDown:Ng(a.onPointerDown,rb=>{const Vb=rb.target;Vb.hasPointerCapture(rb.pointerId)&&Vb.releasePointerCapture(rb.pointerId);0===rb.button&&!1===rb.ctrlKey&&(sa||(ka.onOpenChange(!0),lb()),ka.triggerPointerDownPosRef.current={x:Math.round(rb.pageX),y:Math.round(rb.pageY)},
rb.preventDefault())}),onKeyDown:Ng(a.onKeyDown,rb=>{const Vb=""!==Ua.current;rb.ctrlKey||rb.altKey||rb.metaKey||1!==rb.key.length||eb(rb.key);Vb&&" "===rb.key||!GC.includes(rb.key)||(sa||(ka.onOpenChange(!0),lb()),rb.preventDefault())})})))}),IC=(0,kg.forwardRef)((a,d)=>{const {__scopeSelect:n,children:P,placeholder:ea}=a;a=wg(a,["__scopeSelect","className","style","children","placeholder"]);const ka=Wq("SelectValue",n),{onValueNodeHasChildrenChange:sa}=ka,La=void 0!==P;d=Zh(d,ka.onValueNodeChange);
Um(()=>{sa(La)},[sa,La]);return(0,kg.createElement)(Il.span,of({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===ka.value&&void 0!==ea?ea:P)}),JC=(0,kg.forwardRef)((a,d)=>{const {children:n}=a;a=wg(a,["__scopeSelect","children"]);return(0,kg.createElement)(Il.span,of({"aria-hidden":!0},a,{ref:d}),n||"")}),$s=(0,kg.forwardRef)((a,d)=>{const n=Wq("SelectContent",a.__scopeSelect),[P,ea]=(0,kg.useState)();Um(()=>{ea(new DocumentFragment)},[]);return n.open?(0,kg.createElement)(KC,of({},a,{ref:d})):
P?(0,Sn.createPortal)((0,kg.createElement)(Wr,{scope:a.__scopeSelect},(0,kg.createElement)(zw.Slot,{scope:a.__scopeSelect},(0,kg.createElement)("div",null,a.children))),P):null}),[Wr,Xq]=Vq("SelectContent"),KC=(0,kg.forwardRef)((a,d)=>{const {__scopeSelect:n,position:P="item-aligned",onCloseAutoFocus:ea,onEscapeKeyDown:ka,onPointerDownOutside:sa,side:La,sideOffset:Ua,align:eb,alignOffset:lb,arrowPadding:rb,collisionBoundary:Vb,collisionPadding:Zb,sticky:Tb,hideWhenDetached:sc,avoidCollisions:Kc}=
a;a=wg(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const fc=Wq("SelectContent",n),[zc,vc]=(0,kg.useState)(null),[$c,ed]=(0,kg.useState)(null);d=Zh(d,yg=>vc(yg));const [Wd,me]=(0,kg.useState)(null),[Kf,Oe]=(0,kg.useState)(null),nf=Ep(n),[mg,wf]=(0,kg.useState)(!1),bg=(0,kg.useRef)(!1);(0,kg.useEffect)(()=>{if(zc)return ky(zc)},[zc]);
Cg();const ke=(0,kg.useCallback)(yg=>{const [Vh,...li]=nf().map(el=>el.ref.current),[Hj]=li.slice(-1),dl=document.activeElement;for(const el of yg){if(el===dl)break;null===el||void 0===el||el.scrollIntoView({block:"nearest"});el===Vh&&$c&&($c.scrollTop=0);el===Hj&&$c&&($c.scrollTop=$c.scrollHeight);null===el||void 0===el||el.focus();if(document.activeElement!==dl)break}},[nf,$c]),Pd=(0,kg.useCallback)(()=>ke([Wd,zc]),[ke,Wd,zc]);(0,kg.useEffect)(()=>{mg&&Pd()},[mg,Pd]);const {onOpenChange:be,triggerPointerDownPosRef:Jd}=
fc;(0,kg.useEffect)(()=>{if(zc){var yg=0,Vh=0;const li=dl=>{var el,xq,qr,bo;yg=Math.abs(Math.round(dl.pageX)-(null!==(el=null===(xq=Jd.current)||void 0===xq?void 0:xq.x)&&void 0!==el?el:0));Vh=Math.abs(Math.round(dl.pageY)-(null!==(qr=null===(bo=Jd.current)||void 0===bo?void 0:bo.y)&&void 0!==qr?qr:0))},Hj=dl=>{10>=yg&&10>=Vh?dl.preventDefault():zc.contains(dl.target)||be(!1);document.removeEventListener("pointermove",li);Jd.current=null};null!==Jd.current&&(document.addEventListener("pointermove",
li),document.addEventListener("pointerup",Hj,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",li);document.removeEventListener("pointerup",Hj,{capture:!0})}}},[zc,be,Jd]);(0,kg.useEffect)(()=>{const yg=()=>be(!1);window.addEventListener("blur",yg);window.addEventListener("resize",yg);return()=>{window.removeEventListener("blur",yg);window.removeEventListener("resize",yg)}},[be]);const [ee,xf]=dm(yg=>{const Vh=nf().filter(dl=>!dl.disabled),li=Vh.find(dl=>dl.ref.current===
document.activeElement),Hj=Ol(Vh,yg,li);Hj&&setTimeout(()=>Hj.ref.current.focus())}),Of=(0,kg.useCallback)((yg,Vh,li)=>{li=!bg.current&&!li;if(void 0!==fc.value&&fc.value===Vh||li)me(yg),li&&(bg.current=!0)},[fc.value]),Kg=(0,kg.useCallback)(()=>null===zc||void 0===zc?void 0:zc.focus(),[zc]),xh=(0,kg.useCallback)((yg,Vh,li)=>{li=!bg.current&&!li;(void 0!==fc.value&&fc.value===Vh||li)&&Oe(yg)},[fc.value]),Yf="popper"===P?at:LC,Jh=Yf===at?{side:La,sideOffset:Ua,align:eb,alignOffset:lb,arrowPadding:rb,
collisionBoundary:Vb,collisionPadding:Zb,sticky:Tb,hideWhenDetached:sc,avoidCollisions:Kc}:{};return(0,kg.createElement)(Wr,{scope:n,content:zc,viewport:$c,onViewportChange:ed,itemRefCallback:Of,selectedItem:Wd,onItemLeave:Kg,itemTextRefCallback:xh,focusSelectedItem:Pd,selectedItemText:Kf,position:P,isPositioned:mg,searchRef:ee},(0,kg.createElement)(mq,{as:kq,allowPinchZoom:!0},(0,kg.createElement)(Zs,{asChild:!0,trapped:fc.open,onMountAutoFocus:yg=>{yg.preventDefault()},onUnmountAutoFocus:Ng(ea,
yg=>{var Vh;null===(Vh=fc.trigger)||void 0===Vh||Vh.focus({preventScroll:!0});yg.preventDefault()})},(0,kg.createElement)(Tn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:ka,onPointerDownOutside:sa,onFocusOutside:yg=>yg.preventDefault(),onDismiss:()=>fc.onOpenChange(!1)},(0,kg.createElement)(Yf,of({role:"listbox",id:fc.contentId,"data-state":fc.open?"open":"closed",dir:fc.dir,onContextMenu:yg=>yg.preventDefault()},a,Jh,{onPlaced:()=>wf(!0),ref:d,style:Ie({display:"flex",flexDirection:"column",
outline:"none"},a.style),onKeyDown:Ng(a.onKeyDown,yg=>{var Vh=yg.ctrlKey||yg.altKey||yg.metaKey;"Tab"===yg.key&&yg.preventDefault();Vh||1!==yg.key.length||xf(yg.key);if(["ArrowUp","ArrowDown","Home","End"].includes(yg.key)){let li=nf().filter(Hj=>!Hj.disabled).map(Hj=>Hj.ref.current);["ArrowUp","End"].includes(yg.key)&&(li=li.slice().reverse());["ArrowUp","ArrowDown"].includes(yg.key)&&(Vh=li.indexOf(yg.target),li=li.slice(Vh+1));setTimeout(()=>ke(li));yg.preventDefault()}})}))))))}),LC=(0,kg.forwardRef)((a,
d)=>{const {__scopeSelect:n,onPlaced:P}=a;a=wg(a,["__scopeSelect","onPlaced"]);const ea=Wq("SelectContent",n);var ka=Xq("SelectContent",n);const [sa,La]=(0,kg.useState)(null),[Ua,eb]=(0,kg.useState)(null);d=Zh(d,$c=>eb($c));const lb=Ep(n),rb=(0,kg.useRef)(!1),Vb=(0,kg.useRef)(!0),{viewport:Zb,selectedItem:Tb,selectedItemText:sc,focusSelectedItem:Kc}=ka,fc=(0,kg.useCallback)(()=>{if(ea.trigger&&ea.valueNode&&sa&&Ua&&Zb&&Tb&&sc){var $c=ea.trigger.getBoundingClientRect(),ed=Ua.getBoundingClientRect(),
Wd=ea.valueNode.getBoundingClientRect(),me=sc.getBoundingClientRect();"rtl"!==ea.dir?(me=Wd.left-(me.left-ed.left),Wd=$c.width+($c.left-me),ed=Fo(me,[10,window.innerWidth-10-Math.max(Wd,ed.width)]),sa.style.minWidth=Wd+"px",sa.style.left=ed+"px"):(me=window.innerWidth-Wd.right-(ed.right-me.right),Wd=$c.width+(window.innerWidth-$c.right-me),ed=Fo(me,[10,window.innerWidth-10-Math.max(Wd,ed.width)]),sa.style.minWidth=Wd+"px",sa.style.right=ed+"px");const bg=lb();ed=window.innerHeight-20;var Kf=Zb.scrollHeight,
Oe=window.getComputedStyle(Ua);Wd=parseInt(Oe.borderTopWidth,10);var nf=parseInt(Oe.paddingTop,10);me=parseInt(Oe.borderBottomWidth,10);Oe=parseInt(Oe.paddingBottom,10);var mg=Wd+nf+Kf+Oe+me;Kf=Math.min(5*Tb.offsetHeight,mg);var wf=window.getComputedStyle(Zb);Oe=parseInt(wf.paddingTop,10);wf=parseInt(wf.paddingBottom,10);const ke=$c.top+$c.height/2-10,Pd=ed-ke;$c=Tb.offsetHeight/2;nf=Wd+nf+(Tb.offsetTop+$c);mg-=nf;nf<=ke?(Wd=Tb===bg[bg.length-1].ref.current,sa.style.bottom="0px",sa.style.height=nf+
Math.max(Pd,$c+(Wd?wf:0)+(Ua.clientHeight-Zb.offsetTop-Zb.offsetHeight)+me)+"px"):(me=Tb===bg[0].ref.current,sa.style.top="0px",sa.style.height=Math.max(ke,Wd+Zb.offsetTop+(me?Oe:0)+$c)+mg+"px",Zb.scrollTop=nf-ke+Zb.offsetTop);sa.style.margin="10px 0";sa.style.minHeight=Kf+"px";sa.style.maxHeight=ed+"px";null===P||void 0===P||P();requestAnimationFrame(()=>rb.current=!0)}},[lb,ea.trigger,ea.valueNode,sa,Ua,Zb,Tb,sc,ea.dir,P]);Um(()=>fc(),[fc]);const [zc,vc]=(0,kg.useState)();Um(()=>{Ua&&vc(window.getComputedStyle(Ua).zIndex)},
[Ua]);ka=(0,kg.useCallback)($c=>{$c&&!0===Vb.current&&(fc(),null===Kc||void 0===Kc||Kc(),Vb.current=!1)},[fc,Kc]);return(0,kg.createElement)(fu,{scope:n,contentWrapper:sa,shouldExpandOnScrollRef:rb,onScrollButtonChange:ka},(0,kg.createElement)("div",{ref:La,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:zc}},(0,kg.createElement)(Il.div,of({},a,{ref:d,style:Ie({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),at=(0,kg.forwardRef)((a,d)=>{const {__scopeSelect:n,align:P=
"start",collisionPadding:ea=10}=a;a=wg(a,["__scopeSelect","align","collisionPadding"]);const ka=Iy(n);return(0,kg.createElement)(eu,of({},ka,a,{ref:d,align:P,collisionPadding:ea,style:$f(Ie({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)",
"--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[fu,bt]=Vq("SelectContent",{}),nv=(0,kg.forwardRef)((a,d)=>{const {__scopeSelect:n}=a;a=wg(a,["__scopeSelect"]);const P=Xq("SelectViewport",n),ea=bt("SelectViewport",n);d=Zh(d,P.onViewportChange);const ka=(0,kg.useRef)(0);return(0,kg.createElement)(kg.Fragment,null,(0,kg.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,kg.createElement)(zw.Slot,{scope:n},(0,kg.createElement)(Il.div,of({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:Ie({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:Ng(a.onScroll,sa=>{sa=sa.currentTarget;const {contentWrapper:La,shouldExpandOnScrollRef:Ua}=ea;if(null!==Ua&&void 0!==Ua&&Ua.current&&La){var eb=Math.abs(ka.current-sa.scrollTop);if(0<eb){var lb=window.innerHeight-20,rb=parseFloat(La.style.minHeight);const Vb=parseFloat(La.style.height);rb=Math.max(rb,
Vb);rb<lb&&(eb=rb+eb,lb=Math.min(lb,eb),eb-=lb,La.style.height=lb+"px","0px"===La.style.bottom&&(sa.scrollTop=0<eb?eb:0,La.style.justifyContent="flex-end"))}}ka.current=sa.scrollTop})}))))});Vq("SelectGroup");var [ov,Xr]=Vq("SelectItem"),kp=(0,kg.forwardRef)((a,d)=>{const {__scopeSelect:n,value:P,disabled:ea=!1,textValue:ka}=a;a=wg(a,["__scopeSelect","value","disabled","textValue"]);const sa=Wq("SelectItem",n),La=Xq("SelectItem",n),Ua=sa.value===P,[eb,lb]=(0,kg.useState)(null!==ka&&void 0!==ka?ka:
""),[rb,Vb]=(0,kg.useState)(!1);d=Zh(d,sc=>{var Kc;return null===(Kc=La.itemRefCallback)||void 0===Kc?void 0:Kc.call(La,sc,P,ea)});const Zb=Ii(),Tb=()=>{ea||(sa.onValueChange(P),sa.onOpenChange(!1))};return(0,kg.createElement)(ov,{scope:n,value:P,disabled:ea,textId:Zb,isSelected:Ua,onItemTextChange:(0,kg.useCallback)(sc=>{lb(Kc=>{var fc;return Kc||(null!==(fc=null===sc||void 0===sc?void 0:sc.textContent)&&void 0!==fc?fc:"").trim()})},[])},(0,kg.createElement)(zw.ItemSlot,{scope:n,value:P,disabled:ea,
textValue:eb},(0,kg.createElement)(Il.div,of({role:"option","aria-labelledby":Zb,"data-highlighted":rb?"":void 0,"aria-selected":Ua&&rb,"data-state":Ua?"checked":"unchecked","aria-disabled":ea||void 0,"data-disabled":ea?"":void 0,tabIndex:ea?void 0:-1},a,{ref:d,onFocus:Ng(a.onFocus,()=>Vb(!0)),onBlur:Ng(a.onBlur,()=>Vb(!1)),onPointerUp:Ng(a.onPointerUp,Tb),onPointerMove:Ng(a.onPointerMove,sc=>{if(ea){var Kc;null===(Kc=La.onItemLeave)||void 0===Kc||Kc.call(La)}else sc.currentTarget.focus({preventScroll:!0})}),
onPointerLeave:Ng(a.onPointerLeave,sc=>{if(sc.currentTarget===document.activeElement){var Kc;null===(Kc=La.onItemLeave)||void 0===Kc||Kc.call(La)}}),onKeyDown:Ng(a.onKeyDown,sc=>{var Kc;if(""===(null===(Kc=La.searchRef)||void 0===Kc?void 0:Kc.current)||" "!==sc.key)Hy.includes(sc.key)&&Tb()," "===sc.key&&sc.preventDefault()})}))))}),MC=(0,kg.forwardRef)((a,d)=>{var {__scopeSelect:n}=a;a=wg(a,["__scopeSelect","className","style"]);const P=Wq("SelectItemText",n),ea=Xq("SelectItemText",n),ka=Xr("SelectItemText",
n);n=Ky("SelectItemText",n);const [sa,La]=(0,kg.useState)(null);d=Zh(d,Vb=>La(Vb),ka.onItemTextChange,Vb=>{var Zb;return null===(Zb=ea.itemTextRefCallback)||void 0===Zb?void 0:Zb.call(ea,Vb,ka.value,ka.disabled)});const Ua=null===sa||void 0===sa?void 0:sa.textContent,eb=(0,kg.useMemo)(()=>(0,kg.createElement)("option",{key:ka.value,value:ka.value,disabled:ka.disabled},Ua),[ka.disabled,ka.value,Ua]),{onNativeOptionAdd:lb,onNativeOptionRemove:rb}=n;Um(()=>{lb(eb);return()=>rb(eb)},[lb,rb,eb]);return(0,kg.createElement)(kg.Fragment,
null,(0,kg.createElement)(Il.span,of({id:ka.textId},a,{ref:d})),ka.isSelected&&P.valueNode&&!P.valueNodeHasChildren?(0,Sn.createPortal)(a.children,P.valueNode):null)}),Oo=(0,kg.forwardRef)((a,d)=>{const n=Xq("SelectScrollUpButton",a.__scopeSelect),P=bt("SelectScrollUpButton",a.__scopeSelect),[ea,ka]=(0,kg.useState)(!1);d=Zh(d,P.onScrollButtonChange);Um(()=>{if(n.viewport&&n.isPositioned){let sa=function(){ka(0<La.scrollTop)};const La=n.viewport;sa();La.addEventListener("scroll",sa);return()=>La.removeEventListener("scroll",
sa)}},[n.viewport,n.isPositioned]);return ea?(0,kg.createElement)(pv,of({},a,{ref:d,onAutoScroll:()=>{const {viewport:sa,selectedItem:La}=n;sa&&La&&(sa.scrollTop-=La.offsetHeight)}})):null}),gu=(0,kg.forwardRef)((a,d)=>{const n=Xq("SelectScrollDownButton",a.__scopeSelect),P=bt("SelectScrollDownButton",a.__scopeSelect),[ea,ka]=(0,kg.useState)(!1);d=Zh(d,P.onScrollButtonChange);Um(()=>{if(n.viewport&&n.isPositioned){let sa=function(){ka(Math.ceil(La.scrollTop)<La.scrollHeight-La.clientHeight)};const La=
n.viewport;sa();La.addEventListener("scroll",sa);return()=>La.removeEventListener("scroll",sa)}},[n.viewport,n.isPositioned]);return ea?(0,kg.createElement)(pv,of({},a,{ref:d,onAutoScroll:()=>{const {viewport:sa,selectedItem:La}=n;sa&&La&&(sa.scrollTop+=La.offsetHeight)}})):null}),pv=(0,kg.forwardRef)((a,d)=>{const {__scopeSelect:n,onAutoScroll:P}=a;a=wg(a,["__scopeSelect","onAutoScroll"]);const ea=Xq("SelectScrollButton",n),ka=(0,kg.useRef)(null),sa=Ep(n),La=(0,kg.useCallback)(()=>{null!==ka.current&&
(window.clearInterval(ka.current),ka.current=null)},[]);(0,kg.useEffect)(()=>()=>La(),[La]);Um(()=>{var Ua;const eb=sa().find(lb=>lb.ref.current===document.activeElement);null===eb||void 0===eb||null===(Ua=eb.ref.current)||void 0===Ua||Ua.scrollIntoView({block:"nearest"})},[sa]);return(0,kg.createElement)(Il.div,of({"aria-hidden":!0},a,{ref:d,style:Ie({flexShrink:0},a.style),onPointerMove:Ng(a.onPointerMove,()=>{var Ua;null===(Ua=ea.onItemLeave)||void 0===Ua||Ua.call(ea);null===ka.current&&(ka.current=
window.setInterval(P,50))}),onPointerLeave:Ng(a.onPointerLeave,()=>{La()})}))}),Yq=(0,kg.forwardRef)((a,d)=>{const {value:n}=a;a=wg(a,["value"]);const P=(0,kg.useRef)(null);d=Zh(d,P);const ea=Qn(n);(0,kg.useEffect)(()=>{const ka=P.current,sa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(ea!==n&&sa){const La=new Event("change",{bubbles:!0});sa.call(ka,n);ka.dispatchEvent(La)}},[ea,n]);return(0,kg.createElement)(yk,{asChild:!0},(0,kg.createElement)("select",of({},
a,{ref:d,defaultValue:n})))});Yq.displayName="BubbleSelect";var NC=a=>{const {__scopeSelect:d,children:n,open:P,defaultOpen:ea,onOpenChange:ka,value:sa,defaultValue:La,onValueChange:Ua,dir:eb,name:lb,autoComplete:rb,disabled:Vb,required:Zb}=a,Tb=Iy(d),[sc,Kc]=(0,kg.useState)(null),[fc,zc]=(0,kg.useState)(null),[vc,$c]=(0,kg.useState)(!1),ed=nh(eb),[Wd=!1,me]=Vc({prop:P,defaultProp:ea,onChange:ka}),[Kf,Oe]=Vc({prop:sa,defaultProp:La,onChange:Ua}),nf=(0,kg.useRef)(null),mg=sc?!!sc.closest("form"):!0,
[wf,bg]=(0,kg.useState)(new Set),ke=Array.from(wf).map(Pd=>Pd.props.value).join(";");return(0,kg.createElement)(vH,Tb,(0,kg.createElement)(Aw,{required:Zb,scope:d,trigger:sc,onTriggerChange:Kc,valueNode:fc,onValueNodeChange:zc,valueNodeHasChildren:vc,onValueNodeHasChildrenChange:$c,contentId:Ii(),value:Kf,onValueChange:Oe,open:Wd,onOpenChange:me,dir:ed,triggerPointerDownPosRef:nf,disabled:Vb},(0,kg.createElement)(zw.Provider,{scope:d},(0,kg.createElement)(Jy,{scope:a.__scopeSelect,onNativeOptionAdd:(0,kg.useCallback)(Pd=>
{bg(be=>(new Set(be)).add(Pd))},[]),onNativeOptionRemove:(0,kg.useCallback)(Pd=>{bg(be=>{be=new Set(be);be.delete(Pd);return be})},[])},n)),mg?(0,kg.createElement)(Yq,{key:ke,"aria-hidden":!0,required:Zb,tabIndex:-1,name:lb,autoComplete:rb,value:Kf,onChange:Pd=>Oe(Pd.target.value),disabled:Vb},void 0===Kf?(0,kg.createElement)("option",{value:""}):null,Array.from(wf)):null))},PC=HC,QC=IC,Vm=JC,Ly=a=>(0,kg.createElement)(Vr,of({asChild:!0},a)),OC=$s,no=nv,$d=kp,RC=MC,Ti=Oo,Zi=gu,Hn=ba(612),qv=gg(ba(21)),
Bw=ba(612),In=ba(612),yH=Ke(function(){const a=bf(),{handlers:{t:d}}=mo.useContext(Pj),n=mo.useCallback(sa=>{a.api.setColor(sa)},[]),P=mo.useCallback(sa=>{(sa=sa.currentTarget.dataset.tool)&&a.selectTool(sa)},[]),[ea,ka]=mo.useState(()=>{var sa;return null!=(sa=Object.values(Xp).find(La=>La===a.selectedTool.id))?sa:Object.values(Xp)[0]});mo.useEffect(()=>{ka(sa=>{var La;return null!=(La=Object.values(Xp).find(Ua=>Ua===a.selectedTool.id))?La:sa})},[a.selectedTool.id]);return(0,In.jsx)("div",{className:"tl-primary-tools",
"data-html2canvas-ignore":"true",children:(0,In.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,In.jsx)(Cp,{handleClick:()=>a.selectTool("select"),tooltip:d("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,In.jsx)(Cp,{handleClick:()=>a.selectTool("move"),tooltip:d("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,In.jsx)(nq,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,In.jsx)(Cp,{handleClick:()=>a.selectTool("logseq-portal"),
tooltip:d("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,In.jsx)(Cp,{handleClick:()=>a.selectTool("pencil"),tooltip:d("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,In.jsx)(Cp,{handleClick:()=>a.selectTool("highlighter"),tooltip:d("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,In.jsx)(Cp,{handleClick:()=>a.selectTool("erase"),tooltip:d("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,In.jsx)(Cp,{handleClick:()=>a.selectTool("line"),tooltip:d("whiteboard/connector"),
id:"line",icon:"connector"}),(0,In.jsx)(Cp,{handleClick:()=>a.selectTool("text"),tooltip:d("whiteboard/text"),id:"text",icon:"text"}),(0,In.jsx)(yy,{activeGeometry:ea,setGeometry:P}),(0,In.jsx)(nq,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,In.jsx)(fn,{popoverSide:"left",color:a.settings.color,setColor:n}),(0,In.jsx)(Wo,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),hu=ba(612),SC=Ke(function(){const a=bf();return(0,hu.jsxs)("div",
{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,hu.jsx)("div",{style:{flex:1}}),(0,hu.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),ct=ba(612),Zq=Ke(function(){const a=bf();return(0,ct.jsxs)(ct.Fragment,{children:[Ub()&&(0,ct.jsx)(SC,{}),Ub()&&(0,ct.jsx)(Rn,{}),!a.readOnly&&(0,ct.jsx)(yH,{}),(0,ct.jsx)(sy,{})]})}),iu=gg(ba(21)),tm=gg(ba(21)),My=gg(ba(21)),TC=gg(ba(21)),$q=ba(612),ar=({id:a,showReferenceContent:d=
!1})=>{var n;const {handlers:{isWhiteboardPage:P,redirectToPage:ea,sidebarAddBlock:ka,queryBlockByUUID:sa},renderers:{Breadcrumb:La,PageName:Ua}}=TC.default.useContext(Pj);var eb="";let lb=Ug(a)?"B":"P",rb="";if(Ug(a)){eb=sa(a);if(!eb)return(0,$q.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});rb=eb.content;eb="whiteboard-shape"===(null==(n=eb.properties)?void 0:n["ls-type"])?"link-to-whiteboard":"link-to-block"}else eb=P(a)?"link-to-whiteboard":"link-to-page";n=rb&&
23<rb.length?rb.slice(0,20)+"...":rb;return(0,$q.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Vb=>{Vb.stopPropagation();Vb.shiftKey?ka(a,"B"===lb?"block":"page"):ea(a)},children:[(0,$q.jsx)(oi,{name:eb}),(0,$q.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===lb?(0,$q.jsx)(Ua,{pageName:a}):(0,$q.jsxs)($q.Fragment,{children:[(0,$q.jsx)(La,{levelLimit:1,blockId:a,endSeparator:d}),d&&n]})})]})},Gm=gg(ba(21)),Un=ba(21),Ny=["children"],
Cw="undefined"!==typeof document?Un.useLayoutEffect:Un.useEffect,Sh=gg(ba(21)),$i=ba(21),zH=ba(30),dt,Hm,UC="undefined"!=typeof document?$i.useLayoutEffect:$i.useEffect;!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(Hm||={});var VC=((dt={})[Hm.DEBUG]="debug",dt[Hm.INFO]="log",dt[Hm.WARN]="warn",dt[Hm.ERROR]="error",dt),br=bj(function(){var a=Mg(Hm.ERROR);return{log:Mg(function(d,n,P){var ea;void 0===P&&(P=Hm.INFO);P>=(null!=(ea=("undefined"==typeof globalThis?
window:globalThis).VIRTUOSO_LOG_LEVEL)?ea:a(4))&&console[VC[P]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",d,n)}),logLevel:a}},[],{singleton:!0}),Vn=bj(function(){var a=Fh(),d=Fh(),n=Mg(0),P=Fh(),ea=Mg(0),ka=Fh(),sa=Fh(),La=Mg(0),Ua=Mg(0),eb=Mg(0),lb=Mg(0),rb=Fh(),Vb=Fh(),Zb=Mg(!1),Tb=Mg(!1);return Qg(tg(a,gh(function(sc){return sc.scrollTop})),d),Qg(tg(a,gh(function(sc){return sc.scrollHeight})),sa),Qg(d,ea),{scrollContainerState:a,scrollTop:d,viewportHeight:ka,
headerHeight:La,fixedHeaderHeight:Ua,fixedFooterHeight:eb,footerHeight:lb,scrollHeight:sa,smoothScrollTargetReached:P,react18ConcurrentRendering:Tb,scrollTo:rb,scrollBy:Vb,statefulScrollTop:ea,deviation:n,scrollingInProgress:Zb}},[],{singleton:!0}),Dj={lvl:0},Oy=bj(function(){return{recalcInProgress:Mg(!1)}},[],{singleton:!0}),AH={offsetHeight:"height",offsetWidth:"width"},cr=bj(function(a){var d=a[0].log,n=a[1].recalcInProgress;a=Fh();var P=Fh(),ea=kk(P,0),ka=Fh(),sa=Fh(),La=Mg(0),Ua=Mg([]),eb=Mg(void 0),
lb=Mg(void 0),rb=Mg(function(zc,vc){return sj(zc,AH[vc])}),Vb=Mg(void 0),Zb=Mg(0),Tb={offsetTree:[],sizeTree:Dj,groupOffsetTree:Dj,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},sc=kk(tg(a,xi(Ua,d,Zb),Ck(aj,Tb),Ki()),Tb);Qg(tg(Ua,eh(function(zc){return 0<zc.length}),xi(sc,Zb),gh(function(zc){var vc=zc[0],$c=zc[1],ed=zc[2];zc=vc.reduce(function(Wd,me,Kf){return Aa(Wd,me,Ui(me,$c.offsetTree,ed)||Kf)},Dj);return gi({},$c,{groupIndices:vc,groupOffsetTree:zc})})),sc);Qg(tg(P,xi(sc),eh(function(zc){return zc[0]<
zc[1].lastIndex}),gh(function(zc){var vc=zc[1];return[{startIndex:zc[0],endIndex:vc.lastIndex,size:vc.lastSize}]})),a);Qg(eb,lb);var Kc=kk(tg(eb,gh(function(zc){return void 0===zc})),!0);Qg(tg(lb,eh(function(zc){return void 0!==zc&&sc(4).sizeTree===Dj}),gh(function(zc){return[{startIndex:0,endIndex:0,size:zc}]})),a);Tb=fl(tg(a,xi(sc),Ck(function(zc,vc){vc=vc[1];return{changed:vc!==zc.sizes,sizes:vc}},{changed:!1,sizes:Tb}),gh(function(zc){return zc.changed})));ji(tg(La,Ck(function(zc,vc){return{diff:zc.prev-
vc,prev:vc}},{diff:0,prev:0}),gh(function(zc){return zc.diff})),function(zc){0<zc?(n(0,!0),ka(0,zc)):0>zc&&sa(0,zc)});ji(tg(La,xi(d)),function(zc){0>zc[0]&&(0,zc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:La},Hm.ERROR)});d=fl(ka);Qg(tg(ka,xi(sc),gh(function(zc){var vc=zc[0];zc=zc[1];if(0<zc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Ma(zc.sizeTree).reduce(function($c,
ed){var Wd=ed.k;ed=ed.v;return{ranges:[].concat($c.ranges,[{startIndex:$c.prevIndex,endIndex:Wd+vc-1,size:$c.prevSize}]),prevIndex:Wd+vc,prevSize:ed}},{ranges:[],prevIndex:0,prevSize:zc.lastSize}).ranges})),a);var fc=fl(tg(sa,xi(sc,Zb),gh(function(zc){return Ui(-zc[0],zc[1].offsetTree,zc[2])})));return Qg(tg(sa,xi(sc,Zb),gh(function(zc){var vc=zc[0],$c=zc[1];zc=zc[2];if(0<$c.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var ed=Ma($c.sizeTree).reduce(function(Wd,
me){return Aa(Wd,Math.max(0,me.k+vc),me.v)},Dj);return gi({},$c,{sizeTree:ed},Cj($c.offsetTree,0,ed,zc))})),sc),{data:Vb,totalCount:P,sizeRanges:a,groupIndices:Ua,defaultItemSize:lb,fixedItemSize:eb,unshiftWith:ka,shiftWith:sa,shiftWithOffset:fc,beforeUnshiftWith:d,firstItemIndex:La,gap:Zb,sizes:sc,listRefresh:Tb,statefulTotalCount:ea,trackItemSizes:Kc,itemSize:rb}},Jj(br,Oy),{singleton:!0}),BH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,rv=bj(function(a){function d(){Kc&&
(Kc(),Kc=null);zc&&(zc(),zc=null);fc&&(clearTimeout(fc),fc=null);La(0,!1)}var n=a[0],P=n.sizes,ea=n.totalCount,ka=n.listRefresh;n=n.gap;var sa=a[1],La=sa.scrollingInProgress,Ua=sa.viewportHeight,eb=sa.scrollTo,lb=sa.smoothScrollTargetReached,rb=sa.headerHeight,Vb=sa.footerHeight,Zb=sa.fixedHeaderHeight;sa=sa.fixedFooterHeight;a=a[2].log;var Tb=Fh(),sc=Mg(0),Kc=null,fc=null,zc=null;return Qg(tg(Tb,xi(P,Ua,ea,sc,rb,Vb,a),xi(n,Zb,sa),gh(function(vc){var $c=vc[0],ed=$c[0],Wd=$c[1],me=$c[2],Kf=$c[3],Oe=
$c[4],nf=$c[5],mg=$c[6],wf=$c[7],bg=vc[1];$c=vc[2];vc=vc[3];var ke=cj(ed),Pd=ke.align,be=ke.behavior,Jd=ke.offset;--Kf;ke=jj(ke,Wd,Kf);nf=Ui(ke,Wd.offsetTree,bg)+nf;"end"===Pd?(nf+=$c+ca(Wd.sizeTree,ke)[1]-me+vc,ke===Kf&&(nf+=mg)):"center"===Pd?nf+=($c+ca(Wd.sizeTree,ke)[1]-me+vc)/2:nf-=Oe;Jd&&(nf+=Jd);var ee=function(Of){d();Of?(wf("retrying to scroll to",{location:ed},Hm.DEBUG),Tb(0,ed)):wf("list did not change, scroll successful",{},Hm.DEBUG)};if(d(),"smooth"===be){var xf=!1;zc=ji(ka,function(Of){xf=
xf||Of});Kc=ml(lb,function(){ee(xf)})}else Kc=ml(tg(ka,function(Of){var Kg=setTimeout(function(){Of(!1)},150);return function(xh){xh&&(Of(!0),clearTimeout(Kg))}}),ee);fc=setTimeout(function(){d()},1200);La(0,!0);return wf("scrolling from index to",{index:ke,top:nf,behavior:be},Hm.DEBUG),{top:nf,behavior:be}})),eb),{scrollToIndex:Tb,topListHeight:sc}},Jj(cr,Vn,br),{singleton:!0}),CH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},
sv=bj(function(a){var d=a[0],n=d.scrollContainerState;a=d.scrollTop;var P=d.viewportHeight,ea=d.headerHeight,ka=d.footerHeight,sa=d.scrollBy;d=Mg(!1);var La=Mg(!0),Ua=Fh(),eb=Fh(),lb=Mg(4),rb=Mg(0),Vb=kk(tg(Yp(tg(ti(a),lm(1),Ln(!0)),tg(ti(a),lm(1),Ln(!1),hk(100))),Ki()),!1),Zb=kk(tg(Yp(tg(sa,Ln(!0)),tg(sa,Ln(!1),hk(200))),Ki()),!1);Qg(tg(uk(ti(a),ti(rb)),gh(function(Tb){return Tb[0]<=Tb[1]}),Ki()),La);Qg(tg(La,gn(50)),eb);P=fl(tg(uk(n,ti(P),ti(ea),ti(ka),ti(lb)),Ck(function(Tb,sc){var Kc,fc,zc=sc[0],
vc=zc.scrollTop;zc=zc.scrollHeight;var $c=sc[1],ed={viewportHeight:$c,scrollTop:vc,scrollHeight:zc};return vc+$c-zc>-sc[4]?(vc>Tb.state.scrollTop?(Kc="SCROLLED_DOWN",fc=Tb.state.scrollTop-vc):(Kc="SIZE_DECREASED",fc=Tb.state.scrollTop-vc||Tb.scrollTopDelta),{atBottom:!0,state:ed,atBottomBecause:Kc,scrollTopDelta:fc}):{atBottom:!1,notAtBottomBecause:ed.scrollHeight>Tb.state.scrollHeight?"SIZE_INCREASED":$c<Tb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":vc<Tb.state.scrollTop?"SCROLLING_UPWARDS":
"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:ed}},CH),Ki(function(Tb,sc){return Tb&&Tb.atBottom===sc.atBottom})));ea=kk(tg(n,Ck(function(Tb,sc){var Kc=sc.scrollTop,fc=sc.scrollHeight;sc=sc.viewportHeight;return 1.01>Math.abs(Tb.scrollHeight-fc)?{scrollTop:Kc,scrollHeight:fc,jump:0,changed:!1}:Tb.scrollTop!==Kc&&1>fc-(Kc+sc)?{scrollHeight:fc,scrollTop:Kc,jump:Tb.scrollTop-Kc,changed:!0}:{scrollHeight:fc,scrollTop:Kc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),eh(function(Tb){return Tb.changed}),
gh(function(Tb){return Tb.jump})),0);Qg(tg(P,gh(function(Tb){return Tb.atBottom})),d);Qg(tg(d,gn(50)),Ua);ka=Mg("down");Qg(tg(n,gh(function(Tb){return Tb.scrollTop}),Ki(),Ck(function(Tb,sc){return Zb(4)?{direction:Tb.direction,prevScrollTop:sc}:{direction:sc<Tb.prevScrollTop?"up":"down",prevScrollTop:sc}},{direction:"down",prevScrollTop:0}),gh(function(Tb){return Tb.direction})),ka);Qg(tg(n,gn(50),Ln("none")),ka);n=Mg(0);return Qg(tg(Vb,eh(function(Tb){return!Tb}),Ln(0)),n),Qg(tg(a,gn(100),xi(Vb),
eh(function(Tb){return!!Tb[1]}),Ck(function(Tb,sc){return[Tb[1],sc[0]]},[0,0]),gh(function(Tb){return Tb[1]-Tb[0]})),n),{isScrolling:Vb,isAtTop:La,isAtBottom:d,atBottomState:P,atTopStateChange:eb,atBottomStateChange:Ua,scrollDirection:ka,atBottomThreshold:lb,atTopThreshold:rb,scrollVelocity:n,lastJumpDueToItemResize:ea}},Jj(Vn)),Yr=bj(function(a){var d=a[0].log;a=Mg(!1);var n=fl(tg(a,eh(function(P){return P}),Ki()));return ji(a,function(P){P&&d(4)("props updated",{},Hm.DEBUG)}),{propsReady:a,didMount:n}},
Jj(br),{singleton:!0}),Dw=bj(function(a){var d=a[0],n=d.sizes,P=d.listRefresh;d=d.defaultItemSize;var ea=a[1].scrollTop,ka=a[2].scrollToIndex;a=a[3].didMount;var sa=Mg(!0),La=Mg(0);return Qg(tg(a,xi(La),eh(function(Ua){return!!Ua[1]}),Ln(!1)),sa),ji(tg(uk(P,a),xi(sa,n,d),eh(function(Ua){var eb=Ua[1],lb=Ua[3];return Ua[0][1]&&(Ua[2].sizeTree!==Dj||void 0!==lb)&&!eb}),xi(La)),function(Ua){var eb=Ua[1];setTimeout(function(){ml(ea,function(){sa(0,!0)});ka(0,eb)})}),{scrolledToInitialItem:sa,initialTopMostItemIndex:La}},
Jj(cr,Vn,rv,Yr),{singleton:!0}),WC=bj(function(a){function d(sc){Ua(0,{index:"LAST",align:"end",behavior:sc})}function n(sc){var Kc=ml(La,function(fc){!sc||fc.atBottom||"SIZE_INCREASED"!==fc.notAtBottomBecause||Tb||(rb(4)("scrolling to bottom due to increased size",{},Hm.DEBUG),d("auto"))});setTimeout(Kc,100)}var P=a[0],ea=P.totalCount,ka=P.listRefresh,sa=a[1];P=sa.isAtBottom;var La=sa.atBottomState,Ua=a[2].scrollToIndex;sa=a[3].scrolledToInitialItem;var eb=a[4],lb=eb.propsReady;eb=eb.didMount;var rb=
a[5].log;a=a[6].scrollingInProgress;var Vb=Mg(!1),Zb=Fh(),Tb=null;return ji(tg(uk(tg(ti(ea),lm(1)),eb),xi(ti(Vb),P,sa,a),gh(function(sc){var Kc=sc[0],fc=Kc[0];Kc=Kc[1]&&sc[3];var zc="auto";Kc&&(zc=sc[1],sc=sc[2]||sc[4],zc="function"==typeof zc?dj(zc(sc)):sc&&dj(zc),Kc=Kc&&!!zc);return{totalCount:fc,shouldFollow:Kc,followOutputBehavior:zc}}),eh(function(sc){return sc.shouldFollow})),function(sc){var Kc=sc.totalCount,fc=sc.followOutputBehavior;Tb&&(Tb(),Tb=null);Tb=ml(ka,function(){rb(4)("following output to ",
{totalCount:Kc},Hm.DEBUG);d(fc);Tb=null})}),ji(tg(uk(ti(Vb),ea,lb),eh(function(sc){return sc[0]&&sc[2]}),Ck(function(sc,Kc){Kc=Kc[1];return{refreshed:sc.value===Kc,value:Kc}},{refreshed:!1,value:0}),eh(function(sc){return sc.refreshed}),xi(Vb,ea)),function(sc){n(!1!==sc[1])}),ji(Zb,function(){n(!1!==Vb(4))}),ji(uk(ti(Vb),La),function(sc){var Kc=sc[1];sc[0]&&!Kc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===Kc.notAtBottomBecause&&d("auto")}),{followOutput:Vb,autoscrollToBottom:Zb}},Jj(cr,sv,rv,Dw,Yr,br,
Vn)),XC=bj(function(a){var d=a[0],n=d.totalCount,P=d.groupIndices;d=d.sizes;var ea=a[1];a=ea.scrollTop;ea=ea.headerHeight;var ka=Fh(),sa=Fh(),La=fl(tg(ka,gh(gj)));return Qg(tg(La,gh(function(Ua){return Ua.totalCount})),n),Qg(tg(La,gh(function(Ua){return Ua.groupIndices})),P),Qg(tg(uk(a,d,ea),eh(function(Ua){return Ua[1].groupOffsetTree!==Dj}),gh(function(Ua){return ca(Ua[1].groupOffsetTree,Math.max(Ua[0]-Ua[2],0),"v")[0]}),Ki(),gh(function(Ua){return[Ua]})),sa),{groupCounts:ka,topItemsIndexes:sa}},
Jj(cr,Vn)),Py=bj(function(a){var d=a[0];a=d.scrollTop;var n=d.viewportHeight,P=d.deviation,ea=d.headerHeight,ka=d.fixedHeaderHeight;d=Fh();var sa=Mg(0),La=Mg(0),Ua=Mg(0);a=kk(tg(uk(ti(a),ti(n),ti(ea),ti(d,lk),ti(Ua),ti(sa),ti(ka),ti(P),ti(La)),gh(function(eb){var lb=eb[0],rb=eb[1],Vb=eb[2],Zb=eb[3],Tb=Zb[0];Zb=Zb[1];var sc=eb[4],Kc=eb[6],fc=eb[7],zc=eb[8],vc=lb-fc;eb=eb[5]+Kc;var $c=Math.max(Vb-vc,0),ed="none",Wd="number"==typeof zc?zc:zc.top||0;zc="number"==typeof zc?zc:zc.bottom||0;return Tb-=fc,
Zb+=Vb+Kc,Tb+(Vb+Kc)>lb+eb-Wd&&(ed="up"),Zb-fc<lb-$c+rb+zc&&(ed="down"),"none"!==ed?[Math.max(vc-Vb-Cl(sc,"top",ed)-Wd,0),vc-$c-Kc+rb+Cl(sc,"bottom",ed)+zc]:null}),eh(function(eb){return null!=eb}),Ki(lk)),[0,0]);return{listBoundary:d,overscan:Ua,topListHeight:sa,increaseViewportBy:La,visibleRange:a}},Jj(Vn),{singleton:!0}),YC={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},ju=bj(function(a){var d=a[0],n=d.sizes,P=d.totalCount,ea=d.data,
ka=d.firstItemIndex,sa=d.gap,La=a[1],Ua=a[2],eb=Ua.visibleRange;d=Ua.listBoundary;Ua=Ua.topListHeight;var lb=a[3],rb=lb.scrolledToInitialItem,Vb=lb.initialTopMostItemIndex;lb=a[4].topListHeight;var Zb=a[5],Tb=a[6].didMount,sc=a[7].recalcInProgress;a=Mg([]);var Kc=Fh();Qg(La.topItemsIndexes,a);n=kk(tg(uk(Tb,sc,ti(eb,lk),ti(P),ti(n),ti(Vb),rb,ti(a),ti(ka),ti(sa),ea),eh(function(fc){return fc[0]&&!fc[1]}),gh(function(fc){var zc=fc[2],vc=zc[0],$c=zc[1];zc=fc[3];var ed=fc[5],Wd=fc[6],me=fc[7],Kf=fc[8],
Oe=fc[9],nf=fc[10];fc=fc[4];var mg=fc.sizeTree,wf=fc.offsetTree;if(0===zc||0===vc&&0===$c)return gi({},YC,{totalCount:zc});if(mg===Dj)return en(function(xh,Yf,Jh){return Yf.groupOffsetTree!==Dj?(xh=vi(xh,Yf),[{index:ca(Yf.groupOffsetTree,xh)[0],size:0,offset:0},{index:xh,size:0,offset:0,data:Jh&&Jh[0]}]):[{index:xh,size:0,offset:0,data:Jh&&Jh[0]}]}("number"==typeof ed?ed:"LAST"===ed.index?zc-1:ed.index,fc,nf),[],zc,Oe,fc,Kf);ed=[];if(0<me.length){var bg,ke=me[0],Pd=me[me.length-1],be=0;for(mg=Lm(md(mg,
ke,Pd));!(bg=mg()).done;){var Jd=bg.value;bg=Jd.value;var ee=Math.min(Jd.end,Pd);for(Jd=Math.max(Jd.start,ke);Jd<=ee;Jd++)ed.push({index:Jd,size:bg,offset:be,data:nf&&nf[Jd]}),be+=bg}}if(!Wd)return en([],ed,zc,Oe,fc,Kf);var xf=0<me.length?me[me.length-1]+1:0,Of=function(xh,Yf,Jh,yg){return void 0===yg&&(yg=0),0<yg&&(Yf=Math.max(Yf,xh[hf(xh,yg,Oh)].offset)),Vd((li=Jh,dl=hf(Vh=xh,Yf,Hj=wj),el=hf(Vh,li,Hj,dl),Vh.slice(dl,el+1)),Ah);var Vh,li,Hj,dl,el}(wf,vc,$c,xf);if(0===Of.length)return null;var Kg=
zc-1;return en(Ij([],function(xh){for(var Yf,Jh=Lm(Of);!(Yf=Jh()).done;){var yg=Yf.value,Vh=yg.value;Yf=Vh.offset;var li=yg.start,Hj=Vh.size;Vh.offset<vc&&(Vh=(li+=Math.floor((vc-Vh.offset+Oe)/(Hj+Oe)))-yg.start,Yf+=Vh*Hj+Vh*Oe);li<xf&&(Yf+=(xf-li)*Hj,li=xf);for(yg=Math.min(yg.end,Kg);li<=yg&&!(Yf>=$c);li++)xh.push({index:li,size:Hj,offset:Yf,data:nf&&nf[li]}),Yf+=Hj+Oe}}),ed,zc,Oe,fc,Kf)}),eh(function(fc){return null!==fc}),Ki()),YC);return Qg(tg(ea,eh(function(fc){return void 0!==fc}),gh(function(fc){return fc.length})),
P),Qg(tg(n,gh(function(fc){return fc.topListHeight})),lb),Qg(lb,Ua),Qg(tg(n,gh(function(fc){return[fc.top,fc.bottom]})),d),Qg(tg(n,gh(function(fc){return fc.items})),Kc),gi({listState:n,topItemsIndexes:a,endReached:fl(tg(n,eh(function(fc){return 0<fc.items.length}),xi(P,ea),eh(function(fc){var zc=fc[0].items;return zc[zc.length-1].originalIndex===fc[1]-1}),gh(function(fc){return[fc[1]-1,fc[2]]}),Ki(lk),gh(function(fc){return fc[0]}))),startReached:fl(tg(n,gn(200),eh(function(fc){var zc=fc.items;return 0<
zc.length&&zc[0].originalIndex===fc.topItems.length}),gh(function(fc){return fc.items[0].index}),Ki())),rangeChanged:fl(tg(n,eh(function(fc){return 0<fc.items.length}),gh(function(fc){fc=fc.items;for(var zc=0,vc=fc.length-1;"group"===fc[zc].type&&zc<vc;)zc++;for(;"group"===fc[vc].type&&vc>zc;)vc--;return{startIndex:fc[zc].index,endIndex:fc[vc].index}}),Ki(gl))),itemsRendered:Kc},Zb)},Jj(cr,XC,Py,Dw,rv,sv,Yr,Oy),{singleton:!0}),dr=bj(function(a){var d=a[0],n=d.sizes,P=d.firstItemIndex,ea=d.data;d=
d.gap;var ka=a[1].listState;a=a[2].didMount;var sa=Mg(0);return Qg(tg(a,xi(sa),eh(function(La){return 0!==La[1]}),xi(n,P,d,ea),gh(function(La){var Ua=La[0][1],eb=La[1],lb=La[2],rb=La[3];La=La[4];var Vb=void 0===La?[]:La;La=0;if(0<eb.groupIndices.length)for(var Zb,Tb=Lm(eb.groupIndices);!((Zb=Tb()).done||Zb.value-La>=Ua);)La++;Ua+=La;return en(Array.from({length:Ua}).map(function(sc,Kc){return{index:Kc,size:0,offset:0,data:Vb[Kc]}}),[],Ua,rb,eb,lb)})),ka),{initialItemCount:sa}},Jj(cr,ju,Yr),{singleton:!0}),
Ew=bj(function(a){a=a[0].scrollVelocity;var d=Mg(!1),n=Fh(),P=Mg(!1);return Qg(tg(a,xi(P,d,n),eh(function(ea){return!!ea[1]}),gh(function(ea){var ka=ea[0],sa=ea[1],La=ea[2];ea=ea[3];var Ua=sa.enter;if(La){if((0,sa.exit)(ka,ea))return!1}else if(Ua(ka,ea))return!0;return La}),Ki()),d),ji(tg(uk(d,a,n),xi(P)),function(ea){var ka=ea[0];ea=ea[1];return ka[0]&&ea&&ea.change&&ea.change(ka[1],ka[2])}),{isSeeking:d,scrollSeekConfiguration:P,scrollVelocity:a,scrollSeekRangeChanged:n}},Jj(sv),{singleton:!0}),
Fw=bj(function(a){a=a[0].topItemsIndexes;var d=Mg(0);return Qg(tg(d,eh(function(n){return 0<n}),gh(function(n){return Array.from({length:n}).map(function(P,ea){return ea})})),a),{topItemCount:d}},Jj(ju)),ku=bj(function(a){var d=a[0],n=d.footerHeight,P=d.headerHeight,ea=d.fixedHeaderHeight;d=d.fixedFooterHeight;var ka=a[1].listState;a=Fh();n=kk(tg(uk(n,d,P,ea,ka),gh(function(sa){var La=sa[4];return sa[0]+sa[1]+sa[2]+sa[3]+La.offsetBottom+La.bottom})),0);return Qg(ti(n),a),{totalListHeight:n,totalListHeightChanged:a}},
Jj(Vn,ju),{singleton:!0}),Qy=Bn(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),ZC=bj(function(a){function d(Kc){0<Kc?(P(0,{top:-Kc,behavior:"auto"}),ka(0,0)):(ka(0,0),P(0,{top:-Kc,behavior:"auto"}))}var n=a[0],P=n.scrollBy,ea=n.scrollTop,ka=n.deviation,sa=n.scrollingInProgress,La=a[1];n=La.isScrolling;var Ua=La.isAtBottom,eb=La.scrollDirection,lb=a[3],rb=lb.beforeUnshiftWith,Vb=lb.shiftWithOffset,Zb=lb.sizes;lb=lb.gap;var Tb=a[4].log,sc=a[5].recalcInProgress;
a=fl(tg(a[2].listState,xi(La.lastJumpDueToItemResize),Ck(function(Kc,fc){var zc=Kc[1],vc=fc[0],$c=vc.items,ed=vc.totalCount;vc=vc.bottom+vc.offsetBottom;var Wd=0;return Kc[2]===ed&&0<zc.length&&0<$c.length&&(0===$c[0].originalIndex&&0===zc[0].originalIndex||0!=(Wd=vc-Kc[3])&&(Wd+=fc[1])),[Wd,$c,ed,vc]},[0,[],0,0]),eh(function(Kc){return 0!==Kc[0]}),xi(ea,eb,sa,Ua,Tb),eh(function(Kc){return!Kc[3]&&0!==Kc[1]&&"up"===Kc[2]}),gh(function(Kc){var fc=Kc[0][0];return(0,Kc[5])("Upward scrolling compensation",
{amount:fc},Hm.DEBUG),fc})));return ji(tg(a,xi(ka,n)),function(Kc){var fc=Kc[0],zc=Kc[1];Kc[2]&&Qy()?ka(0,zc-fc):d(-fc)}),ji(tg(uk(kk(n,!1),ka,sc),eh(function(Kc){return!Kc[0]&&!Kc[2]&&0!==Kc[1]}),gh(function(Kc){return Kc[1]}),gn(1)),d),Qg(tg(Vb,gh(function(Kc){return{top:-Kc}})),P),ji(tg(rb,xi(Zb,lb),gh(function(Kc){var fc=Kc[0];return fc*Kc[1].lastSize+fc*Kc[2]})),function(Kc){ka(0,Kc);requestAnimationFrame(function(){Mp(P,{top:Kc});requestAnimationFrame(function(){ka(0,0);sc(0,!1)})})}),{deviation:ka}},
Jj(Vn,sv,ju,cr,br,Oy)),Ry=bj(function(a){var d=a[0].totalListHeight,n=a[1].didMount,P=a[2].scrollTo;a=Mg(0);return ji(tg(n,xi(a),eh(function(ea){return 0!==ea[1]}),gh(function(ea){return{top:ea[1]}})),function(ea){ml(tg(d,eh(function(ka){return 0!==ka})),function(){setTimeout(function(){P(0,ea)})})}),{initialScrollTop:a}},Jj(ku,Yr,Vn),{singleton:!0}),Sy=bj(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var n=Mg(!1);return{alignToBottom:n,paddingTopAddition:kk(tg(uk(n,d,a),eh(function(P){return P[0]}),
gh(function(P){return Math.max(0,P[1]-P[2])}),Ki()),0)}},Jj(Vn,ku),{singleton:!0}),Zr=bj(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var n=Fh(),P=Fh(),ea=Fh(),ka=Mg(!1),sa=Mg(void 0);return Qg(tg(uk(n,P),gh(function(La){var Ua=La[0];return{scrollTop:Math.max(0,Ua.scrollTop-La[1].offsetTop),scrollHeight:Ua.scrollHeight,viewportHeight:Ua.viewportHeight}})),d),Qg(tg(a,xi(P),gh(function(La){var Ua=La[0];return gi({},Ua,{top:Ua.top+La[1].offsetTop})})),ea),{useWindowScroll:ka,customScrollParent:sa,
windowScrollContainerState:n,windowViewportRect:P,windowScrollTo:ea}},Jj(Vn)),$r=["done","behavior","align"],Ty=bj(function(a){var d=a[0],n=d.sizes,P=d.totalCount;d=d.gap;var ea=a[1],ka=ea.scrollTop,sa=ea.viewportHeight,La=ea.headerHeight,Ua=ea.fixedHeaderHeight,eb=ea.fixedFooterHeight,lb=ea.scrollingInProgress;a=a[2].scrollToIndex;ea=Fh();return Qg(tg(ea,xi(n,sa,P,La,Ua,eb,ka),xi(d),gh(function(rb){var Vb=rb[0],Zb=Vb[0],Tb=Vb[1],sc=Vb[2],Kc=Vb[3],fc=Vb[4],zc=Vb[5],vc=Vb[6];Vb=Vb[7];var $c=rb[1];
rb=Zb.done;var ed=Zb.behavior,Wd=Zb.align,me=Km(Zb,$r),Kf=null;Zb=jj(Zb,Tb,Kc-1);fc=Ui(Zb,Tb.offsetTree,$c)+fc+zc;return fc<Vb+zc?Kf=gi({},me,{behavior:ed,align:null!=Wd?Wd:"start"}):fc+ca(Tb.sizeTree,Zb)[1]>Vb+sc-vc&&(Kf=gi({},me,{behavior:ed,align:null!=Wd?Wd:"end"})),Kf?rb&&ml(tg(lb,lm(1),eh(function(Oe){return!1===Oe})),rb):rb&&rb(),Kf}),eh(function(rb){return null!==rb})),a),{scrollIntoView:ea}},Jj(cr,Vn,rv,ju,br),{singleton:!0}),$C=["listState","topItemsIndexes"],tv=bj(function(a){return gi({},
a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},Jj(Py,dr,Yr,Ew,ku,Ry,Sy,Zr,Ty)),aD=bj(function(a){var d=a[0],n=d.totalCount,P=d.sizeRanges,ea=d.fixedItemSize,ka=d.defaultItemSize,sa=d.trackItemSizes,La=d.itemSize,Ua=d.data,eb=d.firstItemIndex,lb=d.groupIndices,rb=d.statefulTotalCount;d=d.gap;var Vb=a[1],Zb=Vb.initialTopMostItemIndex;Vb=Vb.scrolledToInitialItem;var Tb=a[2],sc=a[3],Kc=a[4],fc=Kc.listState,zc=Kc.topItemsIndexes;Kc=Km(Kc,$C);var vc=a[5].scrollToIndex,$c=a[7].topItemCount,ed=a[8].groupCounts,
Wd=a[9];a=a[10];return Qg(Kc.rangeChanged,Wd.scrollSeekRangeChanged),Qg(tg(Wd.windowViewportRect,gh(function(me){return me.visibleHeight})),Tb.viewportHeight),gi({totalCount:n,data:Ua,firstItemIndex:eb,sizeRanges:P,initialTopMostItemIndex:Zb,scrolledToInitialItem:Vb,topItemsIndexes:zc,topItemCount:$c,groupCounts:ed,fixedItemHeight:ea,defaultItemHeight:ka,gap:d},sc,{statefulTotalCount:rb,listState:fc,scrollToIndex:vc,trackItemSizes:sa,itemSize:La,groupIndices:lb},Kc,Wd,Tb,a)},Jj(cr,Dw,Vn,WC,ju,rv,
ZC,Fw,XC,tv,br)),Uy=Bn(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),Po=Sh.createContext(void 0),Vy=Sh.createContext(void 0),Wy=["placeholder"],bD=["style","children"],cD=["style","children"],Gw=bj(function(){var a=Mg(function(Ua){return"Item "+Ua}),d=Mg(null),n=Mg(function(Ua){return"Group "+Ua}),P=Mg({}),ea=Mg(Zp),ka=Mg("div"),sa=Mg(kj),La=function(Ua,
eb){return void 0===eb&&(eb=null),kk(tg(P,gh(function(lb){return lb[Ua]}),Ki()),eb)};return{context:d,itemContent:a,groupContent:n,components:P,computeItemKey:ea,headerFooterTag:ka,scrollerRef:sa,FooterComponent:La("Footer"),HeaderComponent:La("Header"),TopItemListComponent:La("TopItemList"),ListComponent:La("List","div"),ItemComponent:La("Item","div"),GroupComponent:La("Group","div"),ScrollerComponent:La("Scroller","div"),EmptyPlaceholder:La("EmptyPlaceholder"),ScrollSeekPlaceholder:La("ScrollSeekPlaceholder")}}),
dD=bj(function(a){function d(ea,ka,sa){Qg(tg(ea,xi(P.components),gh(function(La){var Ua,eb=La[0];La=La[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+ka+" instead."),gi({},La,((Ua={})[ka]=eb,Ua))})),P.components)}var n=a[0],P=a[1];a={item:hl(P.itemContent,"Rename the %citem%c prop to %citemContent."),group:hl(P.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:hl(n.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:hl(n.fixedItemHeight,
"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:hl(n.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Fh(),maxHeightCacheSize:Fh(),footer:Fh(),header:Fh(),HeaderContainer:Fh(),FooterContainer:Fh(),ItemContainer:Fh(),ScrollContainer:Fh(),GroupContainer:Fh(),ListContainer:Fh(),emptyComponent:Fh(),scrollSeek:Fh()};return ji(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.",
"color: red;","color: inherit;","color: blue;")}),ji(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),ji(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),ji(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),
ji(a.scrollSeek,function(ea){var ka=ea.placeholder;ea=Km(ea,Wy);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=gi({},(0,P.components)(4),{ScrollSeekPlaceholder:ka});(0,P.components)(0,ka);(0,n.scrollSeekConfiguration)(0,ea)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,
"Scroller","ScrollContainer"),d(a.emptyComponent,"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),gi({},n,P,a)},Jj(aD,Gw)),Wn=function(a){return Sh.createElement("div",{style:{height:a.height}})},DH={position:Uy(),zIndex:1,overflowAnchor:"none"},uv={overflowAnchor:"none"},eD=Sh.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=Dh("listState"),n=Wl("sizeRanges"),P=Dh("useWindowScroll"),ea=Dh("customScrollParent"),ka=Wl("windowScrollContainerState"),sa=Wl("scrollContainerState");
P=ea||P?ka:sa;var La=Dh("itemContent"),Ua=Dh("context"),eb=Dh("groupContent");ka=Dh("trackItemSizes");sa=Dh("itemSize");var lb=Dh("log"),rb=Wl("gap");n=yj(n,sa,ka,a?kj:P,lb,rb,ea).callbackRef;ea=Sh.useState(0);var Vb=ea[0],Zb=ea[1];rq("deviation",function($c){Vb!==$c&&Zb($c)});ea=Dh("EmptyPlaceholder");var Tb=Dh("ScrollSeekPlaceholder")||Wn;P=Dh("ListComponent");var sc=Dh("ItemComponent"),Kc=Dh("GroupComponent"),fc=Dh("computeItemKey"),zc=Dh("isSeeking"),vc=0<Dh("groupIndices").length;ka=Dh("paddingTopAddition");
ka=a?{}:{boxSizing:"border-box",paddingTop:d.offsetTop+ka,paddingBottom:d.offsetBottom,marginTop:Vb};return!a&&0===d.totalCount&&ea?(0,$i.createElement)(ea,qk(ea,Ua)):(0,$i.createElement)(P,gi({},qk(P,Ua),{ref:n,style:ka,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function($c){var ed=$c.originalIndex,Wd=fc(ed+d.firstItemIndex,$c.data,Ua);return zc?(0,$i.createElement)(Tb,gi({},qk(Tb,Ua),{key:Wd,index:$c.index,height:$c.size,type:$c.type||"item"},"group"===
$c.type?{}:{groupIndex:$c.groupIndex})):"group"===$c.type?(0,$i.createElement)(Kc,gi({},qk(Kc,Ua),{key:Wd,"data-index":ed,"data-known-size":$c.size,"data-item-index":$c.index,style:DH}),eb($c.index)):(0,$i.createElement)(sc,gi({},qk(sc,Ua),{key:Wd,"data-index":ed,"data-known-size":$c.size,"data-item-index":$c.index,"data-item-group-index":$c.groupIndex,style:uv}),vc?La($c.index,$c.groupIndex,$c.data,Ua):La($c.index,$c.data,Ua))}))}),EH={height:"100%",outline:"none",overflowY:"auto",position:"relative",
WebkitOverflowScrolling:"touch"},et={width:"100%",height:"100%",position:"absolute",top:0},Hw={width:"100%",position:Uy(),top:0},Iw=Sh.memo(function(){var a=Dh("HeaderComponent"),d=Wl("headerHeight"),n=Dh("headerFooterTag"),P=dk(function(ka){return d(sj(ka,"height"))}),ea=Dh("context");return a?(0,$i.createElement)(n,{ref:P},(0,$i.createElement)(a,qk(a,ea))):null}),FH=Sh.memo(function(){var a=Dh("FooterComponent"),d=Wl("footerHeight"),n=Dh("headerFooterTag"),P=dk(function(ka){return d(sj(ka,"height"))}),
ea=Dh("context");return a?(0,$i.createElement)(n,{ref:P},(0,$i.createElement)(a,qk(a,ea))):null}),fD=function(a){a=a.children;var d=(0,$i.useContext)(Po),n=Wl("viewportHeight"),P=Wl("fixedItemHeight"),ea=dk(an(n,function(ka){return sj(ka,"height")}));return Sh.useEffect(function(){d&&(n(d.viewportHeight),P(d.itemHeight))},[d,n,P]),Sh.createElement("div",{style:et,ref:ea,"data-viewport-type":"element"},a)},gD=function(a){a=a.children;var d=(0,$i.useContext)(Po),n=Wl("windowViewportRect"),P=Wl("fixedItemHeight"),
ea=Dh("customScrollParent");ea=ri(n,ea);return Sh.useEffect(function(){d&&(P(d.itemHeight),n({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,n,P]),Sh.createElement("div",{ref:ea,style:et,"data-viewport-type":"window"},a)},hD=function(a){a=a.children;var d=Dh("TopItemListComponent"),n=Dh("headerHeight");n=gi({},Hw,{marginTop:n+"px"});var P=Dh("context");return(0,$i.createElement)(d||"div",{style:n,context:P},a)},lu=vk(dD,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Sh.memo(function(a){var d=Dh("useWindowScroll"),n=0<Dh("topItemsIndexes").length,P=Dh("customScrollParent"),ea=P||d?gD:fD;return Sh.createElement(P||d?Jw:vv,gi({},a),Sh.createElement(ea,null,Sh.createElement(Iw,null),Sh.createElement(eD,null),Sh.createElement(FH,
null)),n&&Sh.createElement(hD,null,Sh.createElement(eD,{showTopList:!0})))})),Xy=lu.Component,Wl=lu.usePublisher,Dh=lu.useEmitterValue,rq=lu.useEmitter,vv=xo({usePublisher:Wl,useEmitterValue:Dh,useEmitter:rq}),Jw=Pp({usePublisher:Wl,useEmitterValue:Dh,useEmitter:rq}),Xn={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},iD={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Kw=Math.round,Yy=Math.ceil,Lw=Math.floor,Rj=Math.min,Fp=Math.max,
wv=bj(function(a){var d=a[0],n=d.overscan,P=d.visibleRange,ea=d.listBoundary,ka=a[1];d=ka.scrollTop;var sa=ka.viewportHeight,La=ka.scrollBy,Ua=ka.scrollTo,eb=ka.smoothScrollTargetReached,lb=ka.scrollContainerState,rb=ka.footerHeight;ka=ka.headerHeight;var Vb=a[2],Zb=a[3],Tb=a[4],sc=Tb.propsReady,Kc=Tb.didMount,fc=a[5];Tb=fc.windowViewportRect;var zc=fc.windowScrollTo,vc=fc.useWindowScroll,$c=fc.customScrollParent;fc=fc.windowScrollContainerState;a=a[6];var ed=Mg(0),Wd=Mg(0),me=Mg(Xn),Kf=Mg({height:0,
width:0}),Oe=Mg({height:0,width:0}),nf=Fh(),mg=Fh(),wf=Mg(0),bg=Mg(void 0),ke=Mg({row:0,column:0});Qg(tg(uk(Kc,Wd,bg),eh(function(Pd){return 0!==Pd[1]}),gh(function(Pd){return{items:Qp(0,Pd[1]-1,Pd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),me);Qg(tg(uk(ti(ed),P,ti(ke,Mn),ti(Oe,function(Pd,be){return Pd&&Pd.width===be.width&&Pd.height===be.height}),bg),xi(Kf),gh(function(Pd){var be=Pd[0],Jd=be[0],ee=be[1],xf=ee[0],Of=ee[1],Kg=be[2],xh=be[3],Yf=be[4],Jh=Pd[1];Pd=Kg.row;
var yg=Kg.column;be=xh.height;ee=xh.width;var Vh=Jh.width;if(0===Jd||0===Vh)return Xn;if(0===ee)return gi({},iD,{items:Qp(0,0,Yf)});yg=Fp(1,Lw((Vh+yg)/(ee+yg)));xf=yg*Lw((xf+Pd)/(be+Pd));Of=yg*Yy((Of+Pd)/(be+Pd))-1;Of=Rj(Jd-1,Fp(Of,yg-1));xf=Qp(Rj(Of,Fp(0,xf)),Of,Yf);xh=yo(Jh,Kg,xh,xf);Kg=xh.top;xh=xh.bottom;Jd=Yy(Jd/yg);return{items:xf,offsetTop:Kg,offsetBottom:Jd*be+(Jd-1)*Pd-xh,top:Kg,bottom:xh,itemHeight:be,itemWidth:ee}})),me);Qg(tg(bg,eh(function(Pd){return void 0!==Pd}),gh(function(Pd){return Pd.length})),
ed);Qg(tg(Kf,gh(function(Pd){return Pd.height})),sa);Qg(tg(uk(Kf,Oe,me,ke),gh(function(Pd){Pd=yo(Pd[0],Pd[3],Pd[1],Pd[2].items);return[Pd.top,Pd.bottom]}),Ki(lk)),ea);P=fl(tg(ti(me),eh(function(Pd){return 0<Pd.items.length}),xi(ed),eh(function(Pd){var be=Pd[0].items;return be[be.length-1].index===Pd[1]-1}),gh(function(Pd){return Pd[1]-1}),Ki()));ea=fl(tg(ti(me),eh(function(Pd){Pd=Pd.items;return 0<Pd.length&&0===Pd[0].index}),Ln(0),Ki()));sa=fl(tg(ti(me),eh(function(Pd){return 0<Pd.items.length}),
gh(function(Pd){Pd=Pd.items;return{startIndex:Pd[0].index,endIndex:Pd[Pd.length-1].index}}),Ki(gl)));Qg(sa,Zb.scrollSeekRangeChanged);Qg(tg(nf,xi(Kf,Oe,ed,ke),gh(function(Pd){var be=Pd[1],Jd=Pd[2],ee=Pd[3],xf=Pd[4],Of=cj(Pd[0]);Pd=Of.align;var Kg=Of.behavior,xh=Of.offset;Of=Of.index;"LAST"===Of&&(Of=ee-1);ee=vl(be,xf,Jd,Fp(0,Of,Rj(ee-1,Of)));return"end"===Pd?ee=Kw(ee-be.height+Jd.height):"center"===Pd&&(ee=Kw(ee-be.height/2+Jd.height/2)),xh&&(ee+=xh),{top:ee,behavior:Kg}})),Ua);Kc=kk(tg(me,gh(function(Pd){return Pd.offsetBottom+
Pd.bottom})),0);return Qg(tg(Tb,gh(function(Pd){return{width:Pd.visibleWidth,height:Pd.visibleHeight}})),Kf),gi({data:bg,totalCount:ed,viewportDimensions:Kf,itemDimensions:Oe,scrollTop:d,scrollHeight:mg,overscan:n,scrollBy:La,scrollTo:Ua,scrollToIndex:nf,smoothScrollTargetReached:eb,windowViewportRect:Tb,windowScrollTo:zc,useWindowScroll:vc,customScrollParent:$c,windowScrollContainerState:fc,deviation:wf,scrollContainerState:lb,footerHeight:rb,headerHeight:ka,initialItemCount:Wd,gap:ke},Zb,{gridState:me,
totalListHeight:Kc},Vb,{startReached:ea,endReached:P,rangeChanged:sa,propsReady:sc},a)},Jj(Py,Vn,sv,Ew,Yr,Zr,br)),GH=["placeholder"],Nk=bj(function(){var a=Mg(function(eb){return"Item "+eb}),d=Mg({}),n=Mg(null),P=Mg("virtuoso-grid-item"),ea=Mg("virtuoso-grid-list"),ka=Mg(Zp),sa=Mg("div"),La=Mg(kj),Ua=function(eb,lb){return void 0===lb&&(lb=null),kk(tg(d,gh(function(rb){return rb[eb]}),Ki()),lb)};return{context:n,itemContent:a,components:d,computeItemKey:ka,itemClassName:P,listClassName:ea,headerFooterTag:sa,
scrollerRef:La,FooterComponent:Ua("Footer"),HeaderComponent:Ua("Header"),ListComponent:Ua("List","div"),ItemComponent:Ua("Item","div"),ScrollerComponent:Ua("Scroller","div"),ScrollSeekPlaceholder:Ua("ScrollSeekPlaceholder","div")}}),ft=bj(function(a){function d(ea,ka,sa){Qg(tg(ea,xi(P.components),gh(function(La){var Ua,eb=La[0];La=La[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+ka+" instead."),gi({},La,((Ua={})[ka]=eb,Ua))})),P.components)}var n=a[0],P=
a[1];a={item:hl(P.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Fh(),ScrollContainer:Fh(),ListContainer:Fh(),emptyComponent:Fh(),scrollSeek:Fh()};return ji(a.scrollSeek,function(ea){var ka=ea.placeholder;ea=Km(ea,GH);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=gi({},(0,P.components)(4),{ScrollSeekPlaceholder:ka});(0,P.components)(0,ka);(0,n.scrollSeekConfiguration)(0,
ea)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),gi({},n,P,a)},Jj(wv,Nk)),jD=Sh.memo(function(){var a=kl("gridState"),d=kl("listClassName"),n=kl("itemClassName"),P=kl("itemContent"),ea=kl("computeItemKey"),ka=kl("isSeeking"),sa=Yn("scrollHeight"),La=kl("ItemComponent"),Ua=kl("ListComponent"),eb=kl("ScrollSeekPlaceholder"),lb=kl("context"),rb=Yn("itemDimensions"),Vb=Yn("gap"),Zb=kl("log"),Tb=dk(function(sc){sa(sc.parentElement.parentElement.scrollHeight);
var Kc=sc.firstChild;Kc&&rb(Kc.getBoundingClientRect());Vb({row:zm("row-gap",getComputedStyle(sc).rowGap,Zb),column:zm("column-gap",getComputedStyle(sc).columnGap,Zb)})});return(0,$i.createElement)(Ua,gi({ref:Tb,className:d},qk(Ua,lb),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(sc){var Kc=ea(sc.index,sc.data,lb);return ka?(0,$i.createElement)(eb,gi({key:Kc},qk(eb,lb),{index:sc.index,height:a.itemHeight,width:a.itemWidth})):(0,$i.createElement)(La,gi({},qk(La,
lb),{className:n,"data-index":sc.index,key:Kc}),P(sc.index,sc.data,lb))}))}),kD=Sh.memo(function(){var a=kl("HeaderComponent"),d=Yn("headerHeight"),n=kl("headerFooterTag"),P=dk(function(ka){return d(sj(ka,"height"))}),ea=kl("context");return a?(0,$i.createElement)(n,{ref:P},(0,$i.createElement)(a,qk(a,ea))):null}),Yh=Sh.memo(function(){var a=kl("FooterComponent"),d=Yn("footerHeight"),n=kl("headerFooterTag"),P=dk(function(ka){return d(sj(ka,"height"))}),ea=kl("context");return a?(0,$i.createElement)(n,
{ref:P},(0,$i.createElement)(a,qk(a,ea))):null}),Mw=function(a){a=a.children;var d=(0,$i.useContext)(Vy),n=Yn("itemDimensions"),P=Yn("viewportDimensions"),ea=dk(function(ka){P(ka.getBoundingClientRect())});return Sh.useEffect(function(){d&&(P({height:d.viewportHeight,width:d.viewportWidth}),n({height:d.itemHeight,width:d.itemWidth}))},[d,P,n]),Sh.createElement("div",{style:et,ref:ea},a)},lp=function(a){a=a.children;var d=(0,$i.useContext)(Vy),n=Yn("windowViewportRect"),P=Yn("itemDimensions"),ea=kl("customScrollParent");
ea=ri(n,ea);return Sh.useEffect(function(){d&&(P({height:d.itemHeight,width:d.itemWidth}),n({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,n,P]),Sh.createElement("div",{ref:ea,style:et},a)},er=vk(ft,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},Sh.memo(function(a){a=gi({},a);var d=kl("useWindowScroll"),n=kl("customScrollParent"),P=n||d?lp:Mw;return Sh.createElement(n||d?Nw:mu,gi({},a),Sh.createElement(P,null,Sh.createElement(kD,null),Sh.createElement(jD,null),Sh.createElement(Yh,null)))})),Yn=er.usePublisher,kl=er.useEmitterValue,Zy=er.useEmitter,mu=xo({usePublisher:Yn,useEmitterValue:kl,useEmitter:Zy}),Nw=Pp({usePublisher:Yn,useEmitterValue:kl,useEmitter:Zy}),nu=bj(function(){var a=Mg(function(Ua){return Sh.createElement("td",
null,"Item $",Ua)}),d=Mg(null),n=Mg(null),P=Mg(null),ea=Mg({}),ka=Mg(Zp),sa=Mg(kj),La=function(Ua,eb){return void 0===eb&&(eb=null),kk(tg(ea,gh(function(lb){return lb[Ua]}),Ki()),eb)};return{context:d,itemContent:a,fixedHeaderContent:n,fixedFooterContent:P,components:ea,computeItemKey:ka,scrollerRef:sa,TableComponent:La("Table","table"),TableHeadComponent:La("TableHead","thead"),TableFooterComponent:La("TableFoot","tfoot"),TableBodyComponent:La("TableBody","tbody"),TableRowComponent:La("TableRow",
"tr"),ScrollerComponent:La("Scroller","div"),EmptyPlaceholder:La("EmptyPlaceholder"),ScrollSeekPlaceholder:La("ScrollSeekPlaceholder"),FillerRow:La("FillerRow")}}),lD=bj(function(a){return gi({},a[0],a[1])},Jj(aD,nu)),mD=function(a){return Sh.createElement("tr",null,Sh.createElement("td",{style:{height:a.height}}))},Zn=function(a){return Sh.createElement("tr",null,Sh.createElement("td",{style:{height:a.height,padding:0,border:0}}))},Ow=Sh.memo(function(){var a=jk("listState"),d=mp("sizeRanges"),n=
jk("useWindowScroll"),P=jk("customScrollParent"),ea=mp("windowScrollContainerState"),ka=mp("scrollContainerState");n=P||n?ea:ka;var sa=jk("itemContent");ea=jk("trackItemSizes");P=yj(d,jk("itemSize"),ea,n,jk("log"),void 0,P);d=P.callbackRef;var La=P.ref;P=Sh.useState(0);var Ua=P[0],eb=P[1];bz("deviation",function(fc){Ua!==fc&&(La.current.style.marginTop=fc+"px",eb(fc))});ea=jk("EmptyPlaceholder");var lb=jk("ScrollSeekPlaceholder")||mD;n=jk("FillerRow")||Zn;P=jk("TableBodyComponent");var rb=jk("TableRowComponent"),
Vb=jk("computeItemKey"),Zb=jk("isSeeking");ka=jk("paddingTopAddition");var Tb=jk("firstItemIndex"),sc=jk("statefulTotalCount"),Kc=jk("context");if(0===sc&&ea)return(0,$i.createElement)(ea,qk(ea,Kc));ea=a.offsetTop+ka+Ua;ka=a.offsetBottom;ea=0<ea?Sh.createElement(n,{height:ea,key:"padding-top"}):null;n=0<ka?Sh.createElement(n,{height:ka,key:"padding-bottom"}):null;a=a.items.map(function(fc){var zc=fc.originalIndex,vc=Vb(zc+Tb,fc.data,Kc);return Zb?(0,$i.createElement)(lb,gi({},qk(lb,Kc),{key:vc,index:fc.index,
height:fc.size,type:fc.type||"item"})):(0,$i.createElement)(rb,gi({},qk(rb,Kc),{key:vc,"data-index":zc,"data-known-size":fc.size,"data-item-index":fc.index,style:{overflowAnchor:"none"}}),sa(fc.index,fc.data,Kc))});return(0,$i.createElement)(P,gi({ref:d,"data-test-id":"virtuoso-item-list"},qk(P,Kc)),[ea].concat(a,[n]))}),$y=function(a){a=a.children;var d=(0,$i.useContext)(Po),n=mp("viewportHeight"),P=mp("fixedItemHeight"),ea=dk(an(n,function(ka){return sj(ka,"height")}));return Sh.useEffect(function(){d&&
(n(d.viewportHeight),P(d.itemHeight))},[d,n,P]),Sh.createElement("div",{style:et,ref:ea,"data-viewport-type":"element"},a)},az=function(a){a=a.children;var d=(0,$i.useContext)(Po),n=mp("windowViewportRect"),P=mp("fixedItemHeight"),ea=jk("customScrollParent");ea=ri(n,ea);return Sh.useEffect(function(){d&&(P(d.itemHeight),n({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,n,P]),Sh.createElement("div",{ref:ea,style:et,"data-viewport-type":"window"},a)},Pw=vk(lD,{required:{},optional:{context:"context",
followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",
fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},
events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Sh.memo(function(a){var d=jk("useWindowScroll"),n=jk("customScrollParent"),P=mp("fixedHeaderHeight"),ea=mp("fixedFooterHeight"),ka=jk("fixedHeaderContent"),sa=jk("fixedFooterContent"),La=jk("context");
P=dk(an(P,function(rb){return sj(rb,"height")}));var Ua=dk(an(ea,function(rb){return sj(rb,"height")}));ea=n||d?xv:nD;d=n||d?az:$y;n=jk("TableComponent");var eb=jk("TableHeadComponent"),lb=jk("TableFooterComponent");ka=ka?Sh.createElement(eb,gi({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:P},qk(eb,La)),ka()):null;sa=sa?Sh.createElement(lb,gi({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Ua},qk(lb,La)),sa()):null;return Sh.createElement(ea,gi({},a),Sh.createElement(d,
null,Sh.createElement(n,gi({style:{borderSpacing:0}},qk(n,La)),[ka,Sh.createElement(Ow,{key:"TableBody"}),sa])))})),mp=Pw.usePublisher,jk=Pw.useEmitterValue,bz=Pw.useEmitter,nD=xo({usePublisher:mp,useEmitterValue:jk,useEmitter:bz}),xv=Pp({usePublisher:mp,useEmitterValue:jk,useEmitter:bz}),fr=gg(ba(21)),np=function(a){function d(n){n=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+n+" for more information.")||this;if(void 0===
n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}Wp(d,a);return d}(Dq(Error)),cz={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",
floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",
lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",
mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",
sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},oD=/^#[a-fA-F0-9]{6}$/,dz=/^#[a-fA-F0-9]{8}$/,Qo=/^#[a-fA-F0-9]{3}$/,yv=/^#[a-fA-F0-9]{4}$/,Xl=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,
Qw=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,zv=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,op=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Sj=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},Av=sr(tr,tr.length,[]),gr=
ba(612),pp=gg(ba(21)),oo=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const n=a.ownerDocument,P=n.activeElement;P!==a&&a.focus();n.execCommand("insertText",!1,d)||oo.insertTextFirefox(a,d);P===n.body?a.blur():P instanceof HTMLElement&&P!==a&&P.focus()}static set(a,d){a.select();oo.insert(a,d)}static getSelection(a){const {selectionStart:d,
selectionEnd:n}=a;return a.value.slice(d?d:void 0,n?n:void 0)}static wrapSelection(a,d,n){const {selectionStart:P,selectionEnd:ea}=a,ka=oo.getSelection(a);oo.insert(a,d+ka+(null!=n?n:d));a.selectionStart=(P||0)+d.length;a.selectionEnd=(ea||0)+d.length}static replace(a,d,n){let P=0;a.value.replace(d,(...ea)=>{const ka=P+ea[ea.length-2],sa=ea[0].length;a.selectionStart=ka;a.selectionEnd=ka+sa;ea="string"===typeof n?n:n(...ea);oo.insert(a,ea);a.selectionStart=ka;P+=ea.length-sa;return ea})}static findLineEnd(a,
d){const n=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(n)?d:n+1}static indent(a){var d;const {selectionStart:n,selectionEnd:P,value:ea}=a;var ka=ea.slice(n,P);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=ea.lastIndexOf("\n",n-1)+1;var sa=a.value.slice(d,P-1);ka=sa.replace(/^|\n/g,"$\x26  ");sa=ka.length-sa.length;a.setSelectionRange(d,P-1);oo.insert(a,ka);a.setSelectionRange(n+1,P+sa)}else oo.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:n,value:P}=a;var ea=
P.lastIndexOf("\n",d-1)+1;const ka=oo.findLineEnd(P,n);var sa=a.value.slice(ea,ka);const La=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-La.length;a.setSelectionRange(ea,ka);oo.insert(a,La);ea=(ea=/\t| {1,2}/.exec(P.slice(ea,d)))?ea[0].length:0;a.setSelectionRange(d-ea,Math.max(d-ea,n-sa))}},Bv=ba(612),ou=a=>a.stopPropagation(),as=pp.memo(function({font:a,text:d,color:n,fontStyle:P,fontSize:ea,fontWeight:ka,offsetX:sa=0,offsetY:La=0,scale:Ua=1,isEditing:eb=!1,pointerEvents:lb=!1,onBlur:rb,onChange:Vb}){const Zb=
pp.useRef(null),Tb=pp.useRef(!1),sc=pp.useCallback(ed=>{Vb(St.normalizeText(ed.currentTarget.value))},[Vb]),Kc=pp.useCallback(ed=>{if("Escape"!==ed.key)if("Tab"===ed.key&&0===d.length)ed.preventDefault();else{if("Meta"!==ed.key&&!ed.metaKey)ed.stopPropagation();else if("z"===ed.key&&ed.metaKey){document.execCommand(ed.shiftKey?"redo":"undo",!1);ed.stopPropagation();ed.preventDefault();return}"Tab"===ed.key&&(ed.preventDefault(),ed.shiftKey?oo.unindent(ed.currentTarget):oo.indent(ed.currentTarget),
null==Vb?void 0:Vb(St.normalizeText(ed.currentTarget.value)))}},[Vb]),fc=pp.useCallback(ed=>{eb&&(ed.currentTarget.setSelectionRange(0,0),null==rb?void 0:rb())},[rb]),zc=pp.useCallback(ed=>{eb&&Tb.current&&document.activeElement===ed.currentTarget&&ed.currentTarget.select()},[eb]),vc=pp.useCallback(ed=>{eb&&ed.stopPropagation()},[eb]);pp.useEffect(()=>{eb&&requestAnimationFrame(()=>{Tb.current=!0;const ed=Zb.current;ed&&(ed.focus(),ed.select())})},[eb,rb]);const $c=pp.useRef(null);pp.useLayoutEffect(()=>
{const ed=$c.current;if(ed){var Wd=ah(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:ea,lineHeight:1,fontWeight:ka},4);ed.style.transform=`scale(${Ua}, ${Ua}) translate(${sa}px, ${La}px)`;ed.style.width=Wd[0]+1+"px";ed.style.height=Wd[1]+1+"px"}},[d,ka,ea,La,sa,Ua]);return(0,Bv.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Bv.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:$c,style:{font:a,fontStyle:P,fontSize:ea,fontWeight:ka,color:n,pointerEvents:lb?"all":"none",
userSelect:eb?"text":"none"},children:[eb?(0,Bv.jsx)("textarea",{ref:Zb,style:{font:a,color:n,fontStyle:P,fontSize:ea,fontWeight:ka},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:n,onFocus:zc,onChange:sc,onKeyDown:Kc,onBlur:fc,onPointerDown:vc,onContextMenu:ou,onCopy:ou,onPaste:ou,onCut:ou}):
d,""]})})}),um=ba(612),Gp={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},bs=class extends Dn{constructor(){super(...arguments);pb(this,"canEdit",!0);pb(this,"ReactComponent",Ke(({events:a,isErasing:d,isBinding:n,isSelected:P,isEditing:ea,onEditingEnd:ka})=>{const {props:{size:[sa,La],stroke:Ua,fill:eb,noFill:lb,strokeWidth:rb,strokeType:Vb,borderRadius:Zb,opacity:Tb,label:sc,italic:Kc,fontWeight:fc,fontSize:zc}}=this;var vc=sc||ea?ah(sc,{fontFamily:"var(--ls-font-family)",fontSize:zc,lineHeight:1,fontWeight:fc},
4):[0,0];const $c=De.mul(this.props.size,.5);vc=Math.max(.5,Math.min(1,sa/vc[0],La/vc[1]));const ed=this.getBounds(),Wd=fr.useMemo(()=>De.sub($c,De.toFixed([ed.width/2,ed.height/2])),[ed,vc,$c]),me=fr.useCallback(Kf=>{var Oe;null==(Oe=this.update)?void 0:Oe.call(this,{label:Kf})},[sc]);return(0,um.jsxs)("div",$f(Ie({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,um.jsx)(as,{font:"20px / 1 var(--ls-font-family)",text:sc,color:Tf(Ua,"text"),offsetX:Wd[0],
offsetY:Wd[1],fontSize:zc,scale:vc,isEditing:ea,onChange:me,onBlur:ka,fontStyle:Kc?"italic":"normal",fontWeight:fc,pointerEvents:!!sc}),(0,um.jsxs)(hp,{opacity:d?.2:Tb,children:[n&&(0,um.jsx)(ps,{mode:"svg",strokeWidth:rb,size:[sa,La]}),(0,um.jsx)("rect",{className:P||!lb?"tl-hitarea-fill":"tl-hitarea-stroke",x:rb/2,y:rb/2,rx:Zb,ry:Zb,width:Math.max(.01,sa-rb),height:Math.max(.01,La-rb),pointerEvents:"all"}),(0,um.jsx)("rect",{x:rb/2,y:rb/2,rx:Zb,ry:Zb,width:Math.max(.01,sa-rb),height:Math.max(.01,
La-rb),strokeWidth:rb,stroke:Tf(Ua,"stroke"),strokeDasharray:"dashed"===Vb?"8 2":void 0,fill:lb?"none":Tf(eb,"background")})]})]}))}));pb(this,"setScaleLevel",a=>Ji(this,null,function*(){this.update({scaleLevel:a,fontSize:Gp[null!=a?a:"md"],strokeWidth:Gp[null!=a?a:"md"]/10});this.onResetBounds()}));pb(this,"ReactIndicator",Ke(()=>{const {props:{size:[a,d],borderRadius:n,isLocked:P}}=this;return(0,um.jsx)("g",{children:(0,um.jsx)("rect",{width:a,height:d,rx:n,ry:n,fill:"transparent",strokeDasharray:P?
"8 2":void 0})})}));pb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return dn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};pb(bs,"id","box");pb(bs,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,
opacity:1,label:""});Ae([pg],bs.prototype,"scaleLevel",1);Ae([ph],bs.prototype,"setScaleLevel",2);var Rw=gg(ba(21)),Ro=ba(612),ez={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},hr=class extends sx{constructor(){super(...arguments);pb(this,"canEdit",!0);pb(this,"ReactComponent",Ke(({isSelected:a,isErasing:d,events:n,isEditing:P,onEditingEnd:ea})=>{const {size:[ka,sa],stroke:La,fill:Ua,noFill:eb,strokeWidth:lb,strokeType:rb,opacity:Vb,label:Zb,italic:Tb,fontWeight:sc,fontSize:Kc}=this.props;var fc=Zb||P?ah(Zb,
{fontFamily:"var(--ls-font-family)",fontSize:Kc,lineHeight:1,fontWeight:sc},4):[0,0];const zc=De.mul(this.props.size,.5);fc=Math.max(.5,Math.min(1,ka/fc[0],sa/fc[1]));const vc=this.getBounds(),$c=Rw.useMemo(()=>De.sub(zc,De.toFixed([vc.width/2,vc.height/2])),[vc,fc,zc]),ed=Rw.useCallback(Wd=>{var me;null==(me=this.update)?void 0:me.call(this,{label:Wd})},[Zb]);return(0,Ro.jsxs)("div",$f(Ie({},n),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,Ro.jsx)(as,
{font:"18px / 1 var(--ls-font-family)",text:Zb,color:Tf(La,"text"),offsetX:$c[0],offsetY:$c[1],scale:fc,isEditing:P,onChange:ed,onBlur:ea,fontStyle:Tb?"italic":"normal",fontSize:Kc,fontWeight:sc,pointerEvents:!!Zb}),(0,Ro.jsxs)(hp,$f(Ie({},n),{opacity:d?.2:Vb,children:[(0,Ro.jsx)("ellipse",{className:a||!eb?"tl-hitarea-fill":"tl-hitarea-stroke",cx:ka/2,cy:sa/2,rx:Math.max(.01,(ka-lb)/2),ry:Math.max(.01,(sa-lb)/2)}),(0,Ro.jsx)("ellipse",{cx:ka/2,cy:sa/2,rx:Math.max(.01,(ka-lb)/2),ry:Math.max(.01,(sa-
lb)/2),strokeWidth:lb,stroke:Tf(La,"stroke"),strokeDasharray:"dashed"===rb?"8 2":void 0,fill:eb?"none":Tf(Ua,"background")})]}))]}))}));pb(this,"setScaleLevel",a=>Ji(this,null,function*(){this.update({scaleLevel:a,fontSize:ez[null!=a?a:"md"],strokeWidth:ez[null!=a?a:"md"]/10});this.onResetBounds()}));pb(this,"ReactIndicator",Ke(()=>{const {size:[a,d],isLocked:n}=this.props;return(0,Ro.jsx)("g",{children:(0,Ro.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:n?
"8 2":"undefined"})})}));pb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return dn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,n],stroke:P,fill:ea,noFill:ka,strokeWidth:sa,strokeType:La,opacity:Ua}=this.props;return(0,Ro.jsxs)("g",{opacity:Ua,children:[(0,Ro.jsx)("ellipse",{className:ka?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:n/2,rx:Math.max(.01,(d-sa)/2),ry:Math.max(.01,
(n-sa)/2)}),(0,Ro.jsx)("ellipse",{cx:d/2,cy:n/2,rx:Math.max(.01,(d-sa)/2),ry:Math.max(.01,(n-sa)/2),strokeWidth:sa,stroke:Tf(P,"stroke"),strokeDasharray:"dashed"===La?"8 2":void 0,fill:ka?"none":Tf(ea,"background")})]})}};pb(hr,"id","ellipse");pb(hr,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});Ae([pg],hr.prototype,"scaleLevel",1);Ae([ph],hr.prototype,
"setScaleLevel",2);var pu=ba(612),Sw=class extends Wv{constructor(){super(...arguments);pb(this,"ReactComponent",Ke(({events:a})=>{const d=this.getBounds(),n=bf(),P=n.selectedShapesArray.some(ka=>n.shapesInGroups([this]).includes(ka)),ea=this.ReactIndicator;return(0,pu.jsxs)(hp,$f(Ie({},a),{className:"tl-group-container",children:[(0,pu.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),P&&(0,pu.jsx)("g",{stroke:"var(--color-selectedFill)",
children:(0,pu.jsx)(ea,{})})]}))}));pb(this,"ReactIndicator",Ke(()=>{const a=this.getBounds();return(0,pu.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};pb(Sw,"id","group");pb(Sw,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var qu=ba(612),pD={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Hp=class extends Lt{constructor(a={}){super(a);pb(this,"ReactComponent",Ke(({events:d,isErasing:n})=>{const {pointsPath:P,
props:{stroke:ea,strokeWidth:ka,opacity:sa}}=this;return(0,qu.jsx)(hp,$f(Ie({},d),{opacity:n?.2:1,children:(0,qu.jsx)("path",{d:P,strokeWidth:16*ka,stroke:Tf(ea,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:sa})}))}));pb(this,"setScaleLevel",d=>Ji(this,null,function*(){this.update({scaleLevel:d,strokeWidth:pD[null!=d?d:"md"]});this.onResetBounds()}));pb(this,"ReactIndicator",Ke(()=>{const {pointsPath:d,props:n}=this;return(0,qu.jsx)("path",{d,fill:"none",
strokeDasharray:n.isLocked?"8 2":"undefined"})}));pb(this,"validateProps",d=>{d=dn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});fd(this)}get pointsPath(){const {points:a}=this.props;return Eu.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:n,opacity:P}}=this;return(0,qu.jsx)("path",{d:a,strokeWidth:16*n,stroke:Tf(d,"stroke"),fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:P})}};pb(Hp,"id","highlighter");pb(Hp,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});Ae([pg],Hp.prototype,"pointsPath",1);Ae([pg],Hp.prototype,"scaleLevel",1);Ae([ph],Hp.prototype,"setScaleLevel",2);var dg=gg(ba(21)),Ph=ba(612),ru={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},ir=class extends Dn{constructor(){super(...arguments);
pb(this,"canChangeAspectRatio",!0);pb(this,"canFlip",!1);pb(this,"canEdit",!0);pb(this,"htmlAnchorRef",dg.createRef());pb(this,"setScaleLevel",a=>Ji(this,null,function*(){var d;const n=De.mul(this.props.size,ru[null!=a?a:"md"]/ru[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield lc();this.update({size:n})}));pb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const n=this.htmlAnchorRef.current.getBoundingClientRect(),[P,ea]=De.div([n.width,n.height],null!=(d=
null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(P||400,1400),10),Math.max(Math.min(ea||400,1400),10)]})}return this});pb(this,"ReactComponent",Ke(({events:a,isErasing:d,isEditing:n})=>{const {props:{html:P,scaleLevel:ea}}=this,ka=yn(),sa=bf(),La=sa.selectedIds.has(this.id),Ua=ka||La&&!n||"select"!==sa.selectedTool.id,eb=dg.useCallback(rb=>{Ua||rb.stopPropagation()},[Ua]),lb=ru[null!=ea?ea:"md"];dg.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:sa.viewport.camera.zoom}),
sa.persist(!0))},[]);return(0,Ph.jsx)(Lo,$f(Ie({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Ph.jsx)("div",{onWheelCapture:eb,onPointerDown:eb,onPointerUp:eb,className:"tl-html-container",style:{pointerEvents:ka||!n&&!La?"none":"all",overflow:n?"auto":"hidden",width:`calc(100% / ${lb})`,height:`calc(100% / ${lb})`,transform:`scale(${lb})`},children:(0,Ph.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:P.trim()}})})}))}));
pb(this,"ReactIndicator",Ke(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,Ph.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}));pb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return dn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};pb(ir,"id","html");pb(ir,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});Ae([pg],
ir.prototype,"scaleLevel",1);Ae([ph],ir.prototype,"setScaleLevel",2);var fz=gg(ba(21)),su=ba(612),jr=class extends Dn{constructor(){super(...arguments);pb(this,"frameRef",fz.createRef());pb(this,"canEdit",!0);pb(this,"onIFrameSourceChange",a=>{this.update({url:a})});pb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});pb(this,"ReactComponent",Ke(({events:a,isErasing:d,isEditing:n})=>{fz.useRef(null);const P=
bf();return(0,su.jsx)(Lo,$f(Ie({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,su.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:n||P.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,su.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,su.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));
pb(this,"ReactIndicator",Ke(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,su.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}))}};pb(jr,"id","iframe");pb(jr,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});Ae([ph],jr.prototype,"onIFrameSourceChange",2);Ae([ph],jr.prototype,"reload",2);var qD=gg(ba(21)),gt=ba(612),Bj=class extends tx{constructor(){super(...arguments);pb(this,"ReactComponent",Ke(({events:a,
isErasing:d,isBinding:n,asset:P})=>{const {props:{opacity:ea,objectFit:ka,clipping:sa,size:[La,Ua]}}=this,[eb,lb,rb,Vb]=Array.isArray(sa)?sa:[sa,sa,sa,sa],{handlers:Zb}=qD.useContext(Pj);return(0,gt.jsxs)(Lo,$f(Ie({},a),{opacity:d?.2:ea,children:[n&&(0,gt.jsx)(ps,{mode:"html",strokeWidth:4,size:[La,Ua]}),(0,gt.jsx)("div",{"data-asset-loaded":!!P,className:"tl-image-shape-container",children:P?(0,gt.jsx)("img",{src:Zb?Zb.makeAssetUrl(P.src):P.src,draggable:!1,style:{position:"relative",top:-eb,left:-Vb,
width:La+(Vb-lb),height:Ua+(eb-rb),objectFit:ka}}):"Asset is missing"})]}))}));pb(this,"ReactIndicator",Ke(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,gt.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,n;const P=this.getBounds(),{assetId:ea,clipping:ka}=this.props;if(a=a.find(sa=>sa.id===ea)){Array.isArray(ka);const sa=null==(n=null==(d=window.logseq)?void 0:d.api)?void 0:n.make_asset_url;return(0,gt.jsx)("image",
{width:P.width,height:P.height,href:sa?sa(a.src):a.src})}return super.getShapeSVGJsx({})}};pb(Bj,"id","image");pb(Bj,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Tw=gg(ba(21)),rD=gg(ba(21)),tu=ba(612),uu=ba(612),ht={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},sD=rD.memo(function({style:a,start:d,end:n,decorationStart:P,decorationEnd:ea,scaleLevel:ka}){const sa=De.dist(d,n);if(2>sa)return null;
const {strokeWidth:La}=a,Ua=1+La*ht[null!=ka?ka:"md"]/10,eb="M"+De.toFixed(d)+"L"+De.toFixed(n);ka=Math.min(sa/3,La*ht[null!=ka?ka:"md"]);P=P?Eq(d,n,ka):null;ea=ea?Eq(n,d,ka):null;return(0,uu.jsxs)(uu.Fragment,{children:[(0,uu.jsx)("path",{className:"tl-stroke-hitarea",d:eb}),(0,uu.jsx)("path",{d:eb,strokeWidth:Ua,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),P&&(0,uu.jsx)(Cq,{left:P.left,middle:d,right:P.right,
stroke:a.stroke,strokeWidth:Ua}),ea&&(0,uu.jsx)(Cq,{left:ea.left,middle:n,right:ea.right,stroke:a.stroke,strokeWidth:Ua})]})}),Cv=ba(612),Yl=ba(612),tD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},it=class extends Ru{constructor(){super(...arguments);pb(this,"hideSelection",!0);pb(this,"canEdit",!0);pb(this,"ReactComponent",Ke(({events:a,isErasing:d,isEditing:n,onEditingEnd:P})=>{const {stroke:ea,handles:{start:ka,end:sa},opacity:La,label:Ua,italic:eb,fontWeight:lb,fontSize:rb,id:Vb}=this.props,Zb=Ua||
n?ah(Ua||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:rb,lineHeight:1,fontWeight:lb},6):[0,0],Tb=De.med(ka.point,sa.point);var sc=De.dist(ka.point,sa.point);sc=Math.max(.5,Math.min(1,Math.max(sc/(Zb[1]+128),sc/(Zb[0]+128))));const Kc=this.getBounds(),fc=Tw.useMemo(()=>De.sub(Tb,De.toFixed([Kc.width/2,Kc.height/2])),[Kc,sc,Tb]),zc=Tw.useCallback(vc=>{var $c;null==($c=this.update)?void 0:$c.call(this,{label:vc})},[Ua]);return(0,Yl.jsxs)("div",$f(Ie({},a),{style:{width:"100%",height:"100%",
overflow:"hidden"},className:"tl-line-container",children:[(0,Yl.jsx)(as,{font:"20px / 1 var(--ls-font-family)",text:Ua,fontSize:rb,color:Tf(ea,"text"),offsetX:fc[0],offsetY:fc[1],scale:sc,isEditing:n,onChange:zc,onBlur:P,fontStyle:eb?"italic":"normal",fontWeight:lb,pointerEvents:!!Ua}),(0,Yl.jsxs)(hp,{opacity:d?.2:La,id:Vb+"_svg",children:[(0,Yl.jsx)(ns,{id:Vb,bounds:Kc,labelSize:Zb,offset:fc,scale:sc}),(0,Yl.jsx)("g",{pointerEvents:"none",mask:Ua||n?`url(#${Vb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));
pb(this,"setScaleLevel",a=>Ji(this,null,function*(){this.update({scaleLevel:a,fontSize:tD[null!=a?a:"md"]});this.onResetBounds()}));pb(this,"ReactIndicator",Ke(({isEditing:a})=>{const {id:d,decorations:n,label:P,strokeWidth:ea,fontSize:ka,fontWeight:sa,handles:{start:La,end:Ua},isLocked:eb}=this.props,lb=this.getBounds(),rb=P||a?ah(P,{fontFamily:"var(--ls-font-family)",fontSize:ka,lineHeight:1,fontWeight:sa},6):[0,0],Vb=De.med(La.point,Ua.point);var Zb=De.dist(La.point,Ua.point);Zb=Math.max(.5,Math.min(1,
Math.max(Zb/(rb[1]+128),Zb/(rb[0]+128))));const Tb=Tw.useMemo(()=>De.sub(Vb,De.toFixed([lb.width/2,lb.height/2])),[lb,Zb,Vb]);return(0,Yl.jsxs)("g",{children:[(0,Yl.jsx)("path",{mask:P?`url(#${d}_clip)`:"",d:im({strokeWidth:ea},La.point,Ua.point,null==n?void 0:n.start,null==n?void 0:n.end),strokeDasharray:eb?"8 2":"undefined"}),P&&!a&&(0,Yl.jsx)("rect",{x:lb.width/2-rb[0]/2*Zb+Tb[0],y:lb.height/2-rb[1]/2*Zb+Tb[1],width:rb[0]*Zb,height:rb[1]*Zb,rx:4*Zb,ry:4*Zb,fill:"transparent"})]})}));pb(this,"validateProps",
a=>dn(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,fill:n,strokeWidth:P,strokeType:ea,decorations:ka,label:sa,scaleLevel:La,handles:{start:Ua,end:eb}}=this.props,lb=De.med(Ua.point,eb.point);return(0,Yl.jsxs)(Yl.Fragment,{children:[(0,Yl.jsx)(sD,{style:{stroke:Tf(d,"text"),fill:n,strokeWidth:P,strokeType:ea},scaleLevel:La,start:Ua.point,end:eb.point,decorationStart:null==ka?void 0:ka.start,decorationEnd:null==ka?void 0:ka.end}),
a&&(0,Yl.jsx)(Yl.Fragment,{children:(0,Yl.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${lb[0]}, ${lb[1]})`,textAnchor:"middle",fill:Tf(d,"text"),stroke:Tf(d,"text"),children:sa})})]})}};pb(it,"id","line");pb(it,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",
strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});Ae([pg],it.prototype,"scaleLevel",1);Ae([ph],it.prototype,"setScaleLevel",2);var Zl=gg(ba(21)),Xj=ba(612),$n={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Uw=Ke(({type:a,fill:d,opacity:n,children:P})=>{const ea="var(--ls-secondary-background-color)"!==d?Tf(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?Ff(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,Xj.jsxs)("div",
{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,Xj.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:n,background:"P"===a?ea:`linear-gradient(0deg, ${d}, ${ea})`}}),(0,Xj.jsx)("div",{className:"relative",children:P})]})}),Fk=class extends Dn{constructor(a={}){var d;super(a);pb(this,"hideRotateHandle",!0);pb(this,"canChangeAspectRatio",!0);pb(this,"canFlip",!0);pb(this,"canEdit",!0);pb(this,"persist",null);pb(this,
"initialHeightCalculated",!0);pb(this,"getInnerHeight",null);pb(this,"setCollapsed",n=>Ji(this,null,function*(){var P;if("B"===this.props.blockType){if(this.update({compact:n}),this.canResize[1]=!n,!n)this.onResetBounds()}else{const ea=this.props.size[1];this.canResize[1]=!n;this.update({isAutoResizing:!n,collapsed:n,size:[this.props.size[0],n?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:n?ea:this.props.collapsedHeight})}null==(P=this.persist)?void 0:P.call(this)}));pb(this,
"setScaleLevel",n=>Ji(this,null,function*(){var P;const ea=De.mul(this.props.size,$n[null!=n?n:"md"]/$n[null!=(P=this.props.scaleLevel)?P:"md"]);this.update({scaleLevel:n});yield lc();this.update({size:ea})}));pb(this,"onResetBounds",n=>{n=this.getAutoResizeHeight();null!==n&&1<Math.abs(n-this.props.size[1])&&(this.update({size:[this.props.size[0],n]}),this.initialHeightCalculated=!0);return this});pb(this,"onResize",(n,P)=>{var ea;const {bounds:ka,rotation:sa,scale:[La,Ua]}=P;n=[...this.scale];0>
La&&(n[0]*=-1);0>Ua&&(n[1]*=-1);P=ka.height;this.props.isAutoResizing&&(P=null!=(ea=this.getAutoResizeHeight())?ea:P);return this.update({point:[ka.minX,ka.minY],size:[Math.max(1,ka.width),Math.max(1,P)],scale:n,rotation:sa})});pb(this,"PortalComponent",Ke(({})=>{const {props:{pageId:n,fill:P,opacity:ea}}=this,{renderers:ka}=Zl.useContext(Pj),sa=bf(),La=Zl.useRef(null),[,Ua]=this.useComponentSize(La,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");
if(null==ka||!ka.Page)return null;const {Page:eb,Block:lb}=ka,[rb,Vb]=Zl.useState(!1);Zl.useEffect(()=>{var Zb,Tb;if(this.props.isAutoResizing){const sc=(null!=(Tb=null==(Zb=this.getInnerHeight)?void 0:Zb.call(this))?Tb:Ua)+this.getHeaderHeight();Ua&&1<Math.abs(sc-this.props.size[1])&&(this.update({size:[this.props.size[0],sc]}),rb&&sa.persist(!0))}},[Ua,this.props.isAutoResizing]);Zl.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();sa.persist(!0)})},[this.initialHeightCalculated]);
Zl.useEffect(()=>{setTimeout(function(){Vb(!0)})},[]);return(0,Xj.jsxs)(Xj.Fragment,{children:[(0,Xj.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>sa.viewport.camera.zoom?"optimizeSpeed":"auto",background:P&&"var(--ls-secondary-background-color)"!==P?Ff(P)?`var(--ls-highlight-color-${P})`:P:"var(--ls-secondary-background-color)",opacity:ea}}),(0,Xj.jsx)("div",{ref:La,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?
"visible":"auto"},children:(rb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,Xj.jsx)(lb,{blockId:n}):(0,Xj.jsx)(eb,{pageName:n}))})]})}));pb(this,"ReactComponent",Ke(n=>{var P;const {events:ea,isErasing:ka,isEditing:sa,isBinding:La}=n,{props:{opacity:Ua,pageId:eb,fill:lb,scaleLevel:rb,strokeWidth:Vb,size:Zb}}=this,Tb=bf(),{renderers:sc,handlers:Kc}=Zl.useContext(Pj);this.persist=()=>Tb.persist();const fc=yn(),zc=Tb.selectedIds.has(this.id)&&1===Tb.selectedIds.size,
vc=Tb.isIn("logseq-portal.creating")&&!eb,$c=(fc||zc&&!sa||"select"!==Tb.selectedTool.id)&&!vc,ed=Zl.useCallback(Pd=>{$c||Pd.stopPropagation()},[$c]),Wd=1===Tb.selectedShapesArray.length&&Tb.selectedShapesArray.some(Pd=>"logseq-portal"===Pd.type&&Pd.props.id!==this.props.id&&eb&&Pd.props.pageId===eb),me=$n[null!=rb?rb:"md"];Zl.useEffect(()=>this.props.collapsed&&sa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):
()=>{},[sa,this.props.collapsed]);Zl.useEffect(()=>{if(vc){const Pd=[Tb.viewport.bounds.width,Tb.viewport.bounds.height],be=Tb.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(be[0]>Pd[0]-400||be[1]>Pd[1]-240||1.5<Tb.viewport.camera.zoom||.5>Tb.viewport.camera.zoom)&&Tb.viewport.zoomToBounds($f(Ie({},this.bounds),{minY:this.bounds.maxY+25}))}},[Tb.viewport.bounds.height.toFixed(2)]);const Kf=Zl.useCallback(Pd=>{this.initialHeightCalculated=!1;const be=Ug(Pd)?"B":"P";this.update({pageId:Pd,
size:[400,320],blockType:be,compact:"B"===be});Tb.selectTool("select");Tb.history.resume();Tb.history.persist()},[]),Oe=this.PortalComponent;var nf=Zl.useMemo(()=>{var Pd;if(eb&&"B"===this.props.blockType)return null==(Pd=null==Kc?void 0:Kc.queryBlockByUUID(eb))?void 0:Pd.content},[null==Kc?void 0:Kc.queryBlockByUUID,eb]);nf="B"===this.props.blockType&&"string"!==typeof nf;const mg=(!this.props.collapsed||sa)&&!nf;if(null==sc||!sc.Page)return null;const {Breadcrumb:wf,PageName:bg}=sc,ke={width:`calc(100% / ${me})`,
height:`calc(100% / ${me})`,opacity:ka?.2:1};1!==me&&(ke.transform=`scale(${me})`);return(0,Xj.jsxs)(Lo,$f(Ie({style:{pointerEvents:"all"}},ea),{children:[La&&(0,Xj.jsx)(ps,{mode:"html",strokeWidth:Vb,size:Zb}),(0,Xj.jsx)("div",{"data-inner-events":!$c,onWheelCapture:ed,onPointerDown:ed,onPointerUp:ed,style:{width:"100%",height:"100%",pointerEvents:fc||!sa&&!zc?"none":"all"},children:vc?(0,Xj.jsx)(po,{onChange:Kf,onAddBlock:Pd=>{setTimeout(()=>{var be,Jd,ee;Tb.api.editShape(this);null==(ee=null==
(Jd=null==(be=window.logseq)?void 0:be.api)?void 0:Jd.edit_block)?void 0:ee.call(Jd,Pd)})},placeholder:"Create or search your graph..."}):(0,Xj.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":eb,"data-portal-selected":Wd,"data-editing":sa,style:ke,children:[!this.props.compact&&!nf&&(0,Xj.jsx)(Uw,{type:null!=(P=this.props.blockType)?P:"P",fill:lb,opacity:Ua,children:"P"===this.props.blockType?(0,Xj.jsx)(bg,{pageName:eb}):(0,Xj.jsx)(wf,{blockId:eb})}),
nf&&(0,Xj.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),mg&&(0,Xj.jsx)(Oe,Ie({},n))]})})]}))}));pb(this,"ReactIndicator",Ke(()=>{const n=this.getBounds();return(0,Xj.jsx)("rect",{width:n.width,height:n.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));pb(this,"validateProps",n=>{var P;if(void 0!==n.size){const ea=$n[null!=(P=this.props.scaleLevel)?P:"md"];n.size[0]=Math.max(n.size[0],60*ea);n.size[1]=Math.max(n.size[1],40*ea)}return dn(this,
n)});fd(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [n,P]=Zl.useState([0,0]),ea=bf();Zl.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const ka=
d?a.current.querySelector(d):a.current;if(ka){const sa=()=>{const {width:Ua,height:eb}=ka.getBoundingClientRect(),lb=De.div([Ua,eb],ea.viewport.camera.zoom);P(lb);return lb};sa();this.getInnerHeight=()=>sa()[1];const La=new ResizeObserver(()=>{sa()});La.observe(ka);return()=>{La.disconnect()}}}return()=>{}},10)},[a,d]);return n}getHeaderHeight(){var a;const d=$n[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+
this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,n;const P=this.getBounds();return(0,Xj.jsxs)(Xj.Fragment,{children:[(0,Xj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Ff(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:Tf(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:P.width,rx:8,ry:8,
height:P.height}),!this.props.compact&&(0,Xj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Tf(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(n=this.props.opacity)?n:.2,x:1,y:1,width:P.width-2,height:38,rx:8,ry:8}),(0,Xj.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${P.width/2}, ${10+P.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",
stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};pb(Fk,"id","logseq-portal");pb(Fk,"defaultSearchQuery","");pb(Fk,"defaultSearchFilter",null);pb(Fk,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});Ae([pg],Fk.prototype,"collapsed",
1);Ae([ph],Fk.prototype,"setCollapsed",2);Ae([pg],Fk.prototype,"scaleLevel",1);Ae([ph],Fk.prototype,"setScaleLevel",2);var {min:jt,PI:Dv}=Math,kt=Dv+1E-4,So=ba(612),lt={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},gz={easing:a=>Math.sin(a*Math.PI/2),simulatePressure:!0},zh={easing:a=>a*a,simulatePressure:!1},sq=class extends Lt{constructor(a={}){super(a);pb(this,"ReactComponent",Ke(({events:d,isErasing:n})=>{const {props:{opacity:P}}=this;return(0,So.jsx)(hp,$f(Ie({},d),{opacity:n?.2:P,children:this.getShapeSVGJsx()}))}));
pb(this,"setScaleLevel",d=>Ji(this,null,function*(){this.update({scaleLevel:d,strokeWidth:lt[null!=d?d:"md"]});this.onResetBounds()}));pb(this,"ReactIndicator",Ke(()=>{const {pointsPath:d}=this;return(0,So.jsx)("path",{d,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));pb(this,"validateProps",d=>{d=dn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});fd(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=$f(Ie({size:1+1.5*a.strokeWidth,
thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?gz:zh),{last:a.isComplete}),a=Hk(a.points,d),d=Eu.getSvgPathFromStroke(Gq(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:n,strokeType:P}}=this;return(0,So.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:n/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:Tf(d,"text"),fill:Tf(d,"text"),strokeDasharray:"dashed"===P?"12 4":void 0})}};
pb(sq,"id","pencil");pb(sq,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Ae([pg],sq.prototype,"pointsPath",1);Ae([pg],sq.prototype,"scaleLevel",1);Ae([ph],sq.prototype,"setScaleLevel",2);var Vw=gg(ba(21)),Wm=ba(612),kr={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},cs=class extends Ir{constructor(){super(...arguments);pb(this,"canEdit",!0);pb(this,"ReactComponent",Ke(({events:a,isErasing:d,
isSelected:n,isEditing:P,onEditingEnd:ea})=>{const {offset:[ka,sa],props:{stroke:La,fill:Ua,noFill:eb,strokeWidth:lb,opacity:rb,strokeType:Vb,label:Zb,italic:Tb,fontWeight:sc,fontSize:Kc}}=this,fc=this.getVertices(lb/2).join();var zc=Zb||P?ah(Zb,{fontFamily:"var(--ls-font-family)",fontSize:Kc,lineHeight:1,fontWeight:sc},4):[0,0];const vc=[this.props.size[0]/2,2*this.props.size[1]/3];zc=Math.max(.5,Math.min(1,this.props.size[0]/(2*zc[0]),this.props.size[1]/(2*zc[1])));const $c=this.getBounds(),ed=
Vw.useMemo(()=>De.sub(vc,De.toFixed([$c.width/2,$c.height/2])),[$c,zc,vc]),Wd=Vw.useCallback(me=>{var Kf;null==(Kf=this.update)?void 0:Kf.call(this,{label:me})},[Zb]);return(0,Wm.jsxs)("div",$f(Ie({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Wm.jsx)(as,{font:"20px / 1 var(--ls-font-family)",text:Zb,fontSize:Kc,color:Tf(La,"text"),offsetX:ed[0],offsetY:ed[1]/zc,scale:zc,isEditing:P,onChange:Wd,onBlur:ea,fontStyle:Tb?"italic":"normal",fontWeight:sc,pointerEvents:!!Zb}),(0,Wm.jsx)(hp,
{opacity:d?.2:rb,children:(0,Wm.jsxs)("g",{transform:`translate(${ka}, ${sa})`,children:[(0,Wm.jsx)("polygon",{className:n||!eb?"tl-hitarea-fill":"tl-hitarea-stroke",points:fc}),(0,Wm.jsx)("polygon",{points:fc,stroke:Tf(La,"stroke"),fill:eb?"none":Tf(Ua,"background"),strokeWidth:lb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Vb?"8 2":void 0})]})})]}))}));pb(this,"setScaleLevel",a=>Ji(this,null,function*(){this.update({scaleLevel:a,fontSize:kr[null!=a?a:"md"],strokeWidth:kr[null!=a?
a:"md"]/10});this.onResetBounds()}));pb(this,"ReactIndicator",Ke(()=>{const {offset:[a,d],props:{strokeWidth:n,isLocked:P}}=this;return(0,Wm.jsx)("g",{children:(0,Wm.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(n/2).join(),strokeDasharray:P?"8 2":"undefined"})})}));pb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return dn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,n],props:{stroke:P,
fill:ea,noFill:ka,strokeWidth:sa,opacity:La,strokeType:Ua}}=this;a=this.getVertices(sa/2).join();return(0,Wm.jsxs)("g",{transform:`translate(${d}, ${n})`,opacity:La,children:[(0,Wm.jsx)("polygon",{className:ka?"tl-hitarea-stroke":"tl-hitarea-fill",points:a}),(0,Wm.jsx)("polygon",{points:a,stroke:Tf(P,"stroke"),fill:ka?"none":Tf(ea,"background"),strokeWidth:sa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Ua?"8 2":void 0})]})}};pb(cs,"id","polygon");pb(cs,"defaultProps",{id:"polygon",
parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});Ae([pg],cs.prototype,"scaleLevel",1);Ae([ph],cs.prototype,"setScaleLevel",2);var vm=gg(ba(21)),lr=ba(612),qp={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Ip=class extends ux{constructor(){super(...arguments);pb(this,"ReactComponent",Ke(({events:a,isErasing:d,isEditing:n,onEditingEnd:P})=>{const {props:{opacity:ea,
fontFamily:ka,fontSize:sa,fontWeight:La,italic:Ua,lineHeight:eb,text:lb,stroke:rb,padding:Vb}}=this,Zb=vm.useRef(null),Tb=vm.useRef(!1),sc=vm.useRef(null),Kc=vm.useCallback(ed=>{const {isSizeLocked:Wd}=this.props;ed=St.normalizeText(ed.currentTarget.value);Wd?this.update({text:ed,size:this.getAutoSizedBoundingBox({text:ed})}):this.update({text:ed})},[]),fc=vm.useCallback(ed=>{if("Escape"!==ed.key)if("Tab"===ed.key&&0===lb.length)ed.preventDefault();else{if("Meta"!==ed.key&&!ed.metaKey)ed.stopPropagation();
else if("z"===ed.key&&ed.metaKey){ed.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);ed.stopPropagation();ed.preventDefault();return}"Tab"===ed.key&&(ed.preventDefault(),ed.shiftKey?oo.unindent(ed.currentTarget):oo.indent(ed.currentTarget),this.update({text:St.normalizeText(ed.currentTarget.value)}))}},[]),zc=vm.useCallback(ed=>{n&&(null==P?void 0:P())},[P]),vc=vm.useCallback(ed=>{n&&Tb.current&&document.activeElement===ed.currentTarget&&ed.currentTarget.select()},[n]),$c=
vm.useCallback(ed=>{n&&ed.stopPropagation()},[n]);vm.useEffect(()=>{n&&requestAnimationFrame(()=>{Tb.current=!0;const ed=Zb.current;ed&&(ed.focus(),ed.select())})},[n,P]);vm.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,lr.jsx)(Lo,$f(Ie({},a),{opacity:d?.2:ea,children:(0,lr.jsx)("div",{ref:sc,className:"tl-text-shape-wrapper","data-hastext":!!lb,"data-isediting":n,style:{fontFamily:ka,fontStyle:Ua?"italic":"normal",fontSize:sa,fontWeight:La,
padding:Vb,lineHeight:eb,color:Tf(rb,"text")},children:n?(0,lr.jsx)("textarea",{ref:Zb,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:lb,onFocus:vc,onChange:Kc,onKeyDown:fc,onBlur:zc,onPointerDown:$c}):(0,lr.jsxs)(lr.Fragment,{children:[lb,""]})})}))}));pb(this,"setScaleLevel",a=>Ji(this,null,function*(){this.update({scaleLevel:a,
fontSize:qp[null!=a?a:"md"]});this.onResetBounds()}));pb(this,"ReactIndicator",Ke(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:n},bounds:P}=this;return a?null:(0,lr.jsx)("rect",{width:P.width,height:P.height,rx:d,ry:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}));pb(this,"validateProps",a=>dn(this,a));pb(this,"getBounds",()=>{const [a,d]=this.props.point,[n,P]=this.props.size;return{minX:a,minY:d,maxX:a+n,maxY:d+P,width:n,height:P}});pb(this,"onResizeStart",({isSingle:a})=>
{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});pb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:n=this.props.fontFamily,fontSize:P=this.props.fontSize,fontWeight:ea=this.props.fontWeight,lineHeight:ka=this.props.lineHeight,padding:sa=
this.props.padding}=a,[La,Ua]=ah(d,{fontFamily:n,fontSize:P,lineHeight:ka,fontWeight:ea},sa);return[La,Ua]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:d,stroke:n,fontSize:P,fontFamily:ea}}=this;a=this.getBounds();return(0,lr.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,lr.jsx)("div",{style:{color:Tf(n,"text"),fontSize:P,fontFamily:ea,display:"contents"},children:d})})}};
pb(Ip,"id","text");pb(Ip,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Ae([pg],Ip.prototype,"scaleLevel",1);Ae([ph],Ip.prototype,"setScaleLevel",2);var Ww=gg(ba(21)),ds=ba(612),vu=class extends Dn{constructor(){super(...arguments);pb(this,"canFlip",!1);pb(this,"canEdit",
!0);pb(this,"canChangeAspectRatio",!1);pb(this,"ReactComponent",Ke(({events:a,isErasing:d,asset:n,isEditing:P})=>{const {props:{opacity:ea}}=this,ka=yn();var sa=bf();const La=sa.selectedIds.has(this.id),Ua=ka||La&&!P||"select"!==sa.selectedTool.id;sa=Ww.useCallback(lb=>{Ua||lb.stopPropagation()},[Ua]);const {handlers:eb}=Ww.useContext(Pj);return(0,ds.jsx)(Lo,$f(Ie({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:ea}},a),{children:(0,ds.jsx)("div",{onWheelCapture:sa,onPointerDown:sa,onPointerUp:sa,
className:"tl-video-container",style:{pointerEvents:ka||!P&&!La?"none":"all",overflow:P?"auto":"hidden"},children:n&&(0,ds.jsx)("video",{controls:!0,src:eb?eb.makeAssetUrl(n.src):n.src})})}))}));pb(this,"ReactIndicator",Ke(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,ds.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}))}};pb(vu,"id","video");pb(vu,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",
clipping:0,isAspectRatioLocked:!0});var $l=ba(612),Xw=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,Yw=class extends Dn{constructor(){super(...arguments);pb(this,"aspectRatio",480/853);pb(this,"canChangeAspectRatio",!1);pb(this,"canFlip",!1);pb(this,"canEdit",!0);pb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:Yw.defaultProps.size})});pb(this,"ReactComponent",Ke(({events:a,isErasing:d,isEditing:n})=>{const P=bf();return(0,$l.jsx)(Lo,
$f(Ie({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,$l.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:n||P.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,$l.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,$l.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",
width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,$l.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,$l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,$l.jsxs)("g",
{children:[(0,$l.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,$l.jsx)("g",{children:(0,$l.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,$l.jsxs)("g",{fill:"#fff",children:[(0,$l.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,$l.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));pb(this,"ReactIndicator",Ke(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,$l.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}));pb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return dn(this,a)})}get embedId(){var a,d;const n=this.props.url,
P=n.match(Xw);return null!=(d=null!=(a=null==P?void 0:P[1])?a:n)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,$l.jsxs)("g",{children:[(0,$l.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,$l.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,$l.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},mr=Yw;pb(mr,"id","youtube");pb(mr,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});Ae([pg],mr.prototype,"embedId",1);Ae([ph],mr.prototype,"onYoutubeLinkChange",2);var mt=gg(ba(21)),Jp=ba(612),hz=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,iz=class extends Dn{constructor(){super(...arguments);pb(this,"canFlip",!1);pb(this,"canEdit",!0);pb(this,"initialHeightCalculated",
!0);pb(this,"getInnerHeight",null);pb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:iz.defaultProps.size})});pb(this,"ReactComponent",Ke(({events:a,isErasing:d,isEditing:n})=>{const {renderers:{Tweet:P}}=mt.useContext(Pj),ea=bf(),ka=mt.useRef(null),[,sa]=this.useComponentSize(ka);mt.useEffect(()=>{var La,Ua;const eb=null!=(Ua=null==(La=this.getInnerHeight)?void 0:La.call(this))?Ua:sa;sa&&1<Math.abs(eb-this.props.size[1])&&(this.update({size:[this.props.size[0],eb]}),ea.persist(!0))},[sa]);
mt.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ea.persist(!0)})},[this.initialHeightCalculated]);return(0,Jp.jsx)(Lo,$f(Ie({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Jp.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:n||ea.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,Jp.jsx)("div",{ref:ka,children:(0,Jp.jsx)(P,{tweetId:this.embedId})}):null})}))}));
pb(this,"ReactIndicator",Ke(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,Jp.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}));pb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});pb(this,"onResize",(a,d)=>{var n;const {bounds:P,rotation:ea,scale:[ka,sa]}=d;a=[...this.scale];0>ka&&(a[0]*=-1);0>sa&&(a[1]*=
-1);d=null!=(n=this.getAutoResizeHeight())?n:P.height;return this.update({point:[P.minX,P.minY],size:[Math.max(1,P.width),Math.max(1,d)],scale:a,rotation:ea})});pb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return dn(this,a)})}get embedId(){var a,d;const n=this.props.url,P=n.match(hz);return null!=(d=null!=(a=null==P?void 0:P[1])?a:n)?d:""}useComponentSize(a,d=""){const [n,P]=mt.useState([0,0]),ea=bf();mt.useEffect(()=>
{if(null==a?0:a.current){const ka=d?a.current.querySelector(d):a.current;if(ka){const sa=()=>{const {width:Ua,height:eb}=ka.getBoundingClientRect(),lb=De.div([Ua,eb],ea.viewport.camera.zoom);P(lb);return lb};sa();this.getInnerHeight=()=>sa()[1];const La=new ResizeObserver(()=>{sa()});La.observe(ka);return()=>{La.disconnect()}}}return()=>{}},[a,d]);return n}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,Jp.jsxs)("g",
{children:[(0,Jp.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,Jp.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Jp.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},nt=iz;pb(nt,"id","tweet");pb(nt,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});Ae([pg],nt.prototype,"embedId",1);Ae([ph],nt.prototype,"onTwitterLinkChange",2);var Ev=gg(ba(21)),nr=ba(612),ot=class extends Dn{constructor(){super(...arguments);pb(this,"frameRef",Ev.createRef());pb(this,"canChangeAspectRatio",!0);pb(this,"canFlip",!0);pb(this,"canEdit",!0);pb(this,"ReactComponent",
Ke(({events:a,asset:d,isErasing:n,isEditing:P})=>{Ev.useRef(null);const {handlers:ea}=Ev.useContext(Pj);bf();const ka=yn();return(0,nr.jsx)(Lo,$f(Ie({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:1}},a),{children:d?(0,nr.jsx)("embed",{src:ea?ea.inflateAsset(d.src).url:d.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!ka&&P?"all":"none"}}):null}))}));pb(this,"ReactIndicator",Ke(()=>{const {props:{size:[a,
d],isLocked:n}}=this;return(0,nr.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}))}};pb(ot,"id","pdf");pb(ot,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});ba(612);var qn=[bs,hr,Hp,Bj,vu,it,sq,cs,Ip,mr,nt,jr,ir,ot,Fk,Sw],pt=class extends Nq{constructor(){super(...arguments);pb(this,"Shape",bs)}};pb(pt,"id","box");pb(pt,"shortcut","whiteboard/rectangle");var rn=class extends Nq{constructor(){super(...arguments);
pb(this,"Shape",hr)}};pb(rn,"id","ellipse");pb(rn,"shortcut","whiteboard/ellipse");var jz=class extends Xv{};pb(jz,"id","erase");pb(jz,"shortcut","whiteboard/eraser");var Xm=class extends Su{constructor(){super(...arguments);pb(this,"Shape",Hp);pb(this,"simplify",!0);pb(this,"simplifyTolerance",.618)}};pb(Xm,"id","highlighter");pb(Xm,"shortcut","whiteboard/highlighter");var rp=class extends Yv{constructor(){super(...arguments);pb(this,"Shape",it)}};pb(rp,"id","line");pb(rp,"shortcut","whiteboard/connector");
var Zw=class extends Su{constructor(){super(...arguments);pb(this,"Shape",sq);pb(this,"simplify",!1)}};pb(Zw,"id","pencil");pb(Zw,"shortcut","whiteboard/pencil");var uD=class extends Nq{constructor(){super(...arguments);pb(this,"Shape",cs)}};pb(uD,"id","polygon");var kz=class extends Zv{constructor(){super(...arguments);pb(this,"Shape",Ip)}};pb(kz,"id","text");pb(kz,"shortcut","whiteboard/text");var Kl=class extends Nq{constructor(){super(...arguments);pb(this,"Shape",mr)}};pb(Kl,"id","youtube");
var or=class extends tj{constructor(){super(...arguments);pb(this,"creatingShape");pb(this,"offset",[0,0]);pb(this,"onEnter",()=>{this.app.history.pause();Gc(()=>{var a=De.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(a=De.snap(a,8));this.creatingShape=a=new Fk({id:tk(),parentId:this.app.currentPage.id,point:a,size:Fk.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});
pb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});pb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};pb(or,"id","creating");var To=class extends tj{constructor(){super(...arguments);
pb(this,"cursor","crosshair");pb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};pb(To,"id","idle");var qt=class extends Jr{constructor(){super(...arguments);pb(this,"Shape",Fk);pb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};pb(qt,"id","logseq-portal");pb(qt,"shortcut","whiteboard/portal");pb(qt,"states",[To,or]);pb(qt,"initial","idle");var Fi=class extends Nq{constructor(){super(...arguments);pb(this,"Shape",ir)}};pb(Fi,"id","youtube");var vD=class extends Nq{constructor(){super(...arguments);
pb(this,"Shape",jr)}};pb(vD,"id","iframe");var HH=gg(ba(615)),Uo=ba(612),Mi=new Map(qn.map(a=>[a.id,a])),es=class{constructor(a){pb(this,"shapes");pb(this,"pageId");pb(this,"assets");a&&this.load(a)}load(a){var d;const n=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==n?void 0:n.id;this.assets=a.assets;this.shapes=null==n?void 0:n.shapes.map(P=>{var ea=P.type;if(!ea)throw Error("No shape type provided.");const ka=Mi.get(ea);if(!ka)throw Error(`Could not find shape class for ${ea}`);
return new ka(P)}).filter(P=>"group"!==P.type)}generatePreviewJsx(a,d){var n,P;const ea=[...(null!=(n=this.shapes)?n:[]).map(eb=>eb.getRotatedBounds())];(n=null==a?void 0:a.currentView)&&ea.push(n);let ka=ig.getCommonBounds(ea);if(!ka)return null;ka=ig.expandBounds(ka,16);ka=d?ig.ensureRatio(ka,d):ka;const sa=eb=>[(eb[0]-ka.minX).toFixed(2),(eb[1]-ka.minY).toFixed(2)],[La,Ua]=n?sa([n.minX,n.minY]):[0,0];return ka&&(0,Uo.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ka.minX.toFixed(2),
"data-common-bound-y":ka.minY.toFixed(2),"data-common-bound-width":ka.width.toFixed(2),"data-common-bound-height":ka.height.toFixed(2),viewBox:[0,0,ka.width,ka.height].join(" "),children:[(0,Uo.jsx)("defs",{children:n&&(0,Uo.jsxs)(Uo.Fragment,{children:[(0,Uo.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${La}, ${Ua})`,width:n.width,height:n.height}),(0,Uo.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,Uo.jsx)("rect",{width:ka.width,height:ka.height,fill:"white"}),(0,Uo.jsx)("use",
{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,Uo.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(P=this.shapes)?void 0:P.map(eb=>{var lb,rb;const {bounds:Vb,props:{rotation:Zb}}=eb,[Tb,sc]=sa([Vb.minX,Vb.minY]),Kc=+(180*((null!=Zb?Zb:0)+(null!=(lb=Vb.rotation)?lb:0))/Math.PI).toFixed(2),[fc,zc]=[(Vb.width/2).toFixed(2),(Vb.height/2).toFixed(2)];return(0,Uo.jsx)("g",{transform:[`translate(${Tb}, ${sc})`,`rotate(${Kc}, ${fc}, ${zc})`].join(" "),children:eb.getShapeSVGJsx({assets:null!=
(rb=this.assets)?rb:[]})},eb.id)})}),(0,Uo.jsx)("rect",{mask:n?`url(#${this.pageId}-camera-mask)`:"",width:ka.width,height:ka.height,fill:"transparent"}),n&&(0,Uo.jsx)("use",{id:"minimap-camera-rect","data-x":La,"data-y":Ua,"data-width":n.width,"data-height":n.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?HH.default.renderToString(a):""}},tq=gg(ba(21)),Kp=ba(612),wu=tq.forwardRef((a,
d)=>{var {value:n,className:P}=a;a=wg(a,["autoResize","value","className"]);return(0,Kp.jsx)("div",{className:"tl-input"+(P?" "+P:""),children:(0,Kp.jsxs)("div",{className:"tl-input-sizer",children:[(0,Kp.jsx)("div",{className:"tl-input-hidden",children:n}),(0,Kp.jsx)("input",Ie({ref:d,value:n,className:"tl-text-input",type:"text"},a))]})})}),Ni=ba(612),fs=({type:a,active:d})=>(0,Ni.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,Ni.jsx)("i",{className:`tie tie-${({B:"block",P:"page",
WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),wD=(a,d)=>(0,Ni.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((n,P)=>1===P%2?(0,Ni.jsx)("mark",{className:"tl-highlighted",children:n}):n).map((n,P)=>(0,Ni.jsx)(Gm.default.Fragment,{children:n},P))}),xu=(a,d)=>{const {handlers:n}=Gm.default.useContext(Pj),[P,ea]=Gm.default.useState(null),ka=ef(a,200);Gm.default.useEffect(()=>{let sa=
!1;if(0<ka.length){const La={"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?La["pages?"]=!1:"P"===d&&(La["blocks?"]=!1);n.search(ka,La).then(Ua=>{sa||ea(Ua)})}else ea(null);return()=>{sa=!0}},[ka,null==n?void 0:n.search]);return P},po=Ke(({className:a,style:d,placeholder:n,onChange:P,onBlur:ea,onAddBlock:ka})=>{const [sa,La]=Gm.default.useState(Fk.defaultSearchQuery),[Ua,eb]=Gm.default.useState(Fk.defaultSearchFilter),lb=Gm.default.useRef(null),{handlers:rb,renderers:Vb}=Gm.default.useContext(Pj),
Zb=rb.t,Tb=Gm.default.useCallback(Oe=>{var nf;setTimeout(()=>P(Oe));null==(nf=lb.current)?void 0:nf.blur();Oe&&(Fk.defaultSearchQuery="",Fk.defaultSearchFilter=null)},[]),sc=Gm.default.useCallback(Oe=>Ji(void 0,null,function*(){const nf=yield null==rb?void 0:rb.addNewBlock(Oe);nf&&(Tb(nf),null==ka?void 0:ka(nf));return nf}),[ka]),Kc=Gm.default.useRef(null),[fc,zc]=Gm.default.useState(0),vc=xu(sa,Ua),[$c,ed]=Gm.default.useState("circle-plus"),[Wd,me]=Gm.default.useState(!1);Gm.default.useEffect(()=>
{setTimeout(()=>{var Oe;null==(Oe=lb.current)?void 0:Oe.focus()})},[Ua]);Gm.default.useEffect(()=>{Fk.defaultSearchQuery=sa;Fk.defaultSearchFilter=Ua},[sa,Ua]);const Kf=Gm.default.useMemo(()=>{var Oe;const nf=[],mg=null==Vb?void 0:Vb.Breadcrumb;if(!mg||!rb)return[];ka&&nf.push({actionIcon:"circle-plus",onChosen:()=>!!sc(sa),element:(0,Ni.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ni.jsx)(fs,{active:!0,type:"BA"}),0<sa.length?(0,Ni.jsxs)(Ni.Fragment,{children:[(0,Ni.jsx)("strong",
{children:Zb("whiteboard/new-block")}),sa]}):(0,Ni.jsx)("strong",{children:Zb("whiteboard/new-block-no-colon")})]})});(null==(Oe=null==vc?void 0:vc.pages)?0:Oe.some(wf=>wf.toLowerCase()===sa.toLowerCase()))||!sa||nf.push({actionIcon:"circle-plus",onChosen:()=>{Tb(sa);return!0},element:(0,Ni.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ni.jsx)(fs,{active:!0,type:"PA"}),(0,Ni.jsx)("strong",{children:Zb("whiteboard/new-page")}),sa]})},{actionIcon:"circle-plus",onChosen:()=>Ji(void 0,
null,function*(){yield null==rb?void 0:rb.addNewWhiteboard(sa);Tb(sa);return!0}),element:(0,Ni.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ni.jsx)(fs,{active:!0,type:"WA"}),(0,Ni.jsx)("strong",{children:Zb("whiteboard/new-whiteboard")}),sa]})});0===sa.length&&null===Ua&&nf.push({actionIcon:"search",onChosen:()=>{eb("B");return!0},element:(0,Ni.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ni.jsx)(fs,{type:"BS"}),Zb("whiteboard/search-only-blocks")]})},{actionIcon:"search",
onChosen:()=>{eb("P");return!0},element:(0,Ni.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ni.jsx)(fs,{type:"PS"}),Zb("whiteboard/search-only-pages")]})});Ua&&"P"!==Ua||!vc||!vc.pages||nf.push(...vc.pages.map(wf=>({actionIcon:"search",onChosen:()=>{Tb(wf);return!0},element:(0,Ni.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ni.jsx)(fs,{type:rb.isWhiteboardPage(wf)?"WP":"P"}),wD(wf,sa)]})})));Ua&&"B"!==Ua||!vc||!vc.blocks||nf.push(...vc.blocks.filter(wf=>wf.content&&
wf.uuid).map(({content:wf,uuid:bg})=>{const ke=rb.queryBlockByUUID(bg);return{actionIcon:"search",onChosen:()=>{var Pd,be,Jd;return ke?(Tb(bg),null==(Jd=null==(be=null==(Pd=window.logseq)?void 0:Pd.api)?void 0:be.set_blocks_id)?void 0:Jd.call(be,[bg]),!0):!1},element:ke?(0,Ni.jsxs)(Ni.Fragment,{children:[(0,Ni.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ni.jsx)(fs,{type:"B"}),(0,Ni.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,Ni.jsx)(mg,{blockId:bg})})]}),
(0,Ni.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ni.jsx)("div",{className:"tl-quick-search-option-placeholder"}),wD(wf,sa)]})]}):(0,Ni.jsx)("div",{className:"tl-quick-search-option-row",children:Zb("whiteboard/cache-outdated")})}}));return nf},[sa,Ua,vc,null==Vb?void 0:Vb.Breadcrumb,rb]);Gm.default.useEffect(()=>{const Oe=nf=>{var mg,wf;let bg=fc;"ArrowDown"===nf.key?bg=Math.min(Kf.length-1,fc+1):"ArrowUp"===nf.key?bg=Math.max(0,fc-1):"Enter"===nf.key?(null==(mg=Kf[fc])?void 0:
mg.onChosen(),nf.stopPropagation(),nf.preventDefault()):"Backspace"===nf.key&&0===sa.length?eb(null):"Escape"===nf.key&&Tb("");bg!==fc&&(mg=Kf[bg],zc(bg),ed(mg.actionIcon),nf.stopPropagation(),nf.preventDefault(),(nf=null==(wf=Kc.current)?void 0:wf.querySelector(".tl-quick-search-option:nth-child("+(bg+1)+")"))&&(null==nf?void 0:nf.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",Oe,!0);return()=>{document.removeEventListener("keydown",Oe,!0)}},[Kf,fc,sa]);return(0,Ni.jsxs)("div",
{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,Ni.jsx)(eH,{icon:$c,onClick:()=>{var Oe;null==(Oe=Kf[fc])?void 0:Oe.onChosen()}}),(0,Ni.jsxs)("div",{className:"tl-quick-search-input-container",children:[Ua&&(0,Ni.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,Ni.jsx)(fs,{type:Ua}),"B"===Ua?"Search blocks":"Search pages",(0,Ni.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>eb(null),children:(0,Ni.jsx)(oi,{name:"x"})})]}),(0,Ni.jsx)(wu,
{ref:lb,type:"text",value:sa,className:"tl-quick-search-input",placeholder:null!=n?n:"Create or search your graph...",onChange:Oe=>La(Oe.target.value),onKeyDown:Oe=>{"Enter"===Oe.key&&Tb(sa);Oe.stopPropagation()},onFocus:()=>{me(!0)},onBlur:()=>{me(!1);null==ea?void 0:ea()}})]}),0<Kf.length&&(0,Ni.jsx)("div",{onWheelCapture:Oe=>Oe.stopPropagation(),className:"tl-quick-search-options",ref:Kc,style:{visibility:Wd?"visible":"hidden",pointerEvents:Wd?"all":"none"},children:(0,Ni.jsx)(Xy,{style:{height:40*
Math.min(Math.max(1,Kf.length),12)},totalCount:Kf.length,itemContent:Oe=>{const {actionIcon:nf,onChosen:mg,element:wf}=Kf[Oe];return(0,Ni.jsx)("div",{"data-focused":Oe===fc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{ed(nf);zc(Oe)},onPointerDownCapture:bg=>{mg()&&(bg.stopPropagation(),bg.preventDefault())},children:wf},Oe)}})})]})}),ok=ba(612),lz=Ke(function(a){var {pageId:d,portalType:n,refs:P,side:ea,onRefsChange:ka}=a;a=wg(a,"pageId portalType shapeType refs side onRefsChange".split(" "));
const {handlers:{t:sa}}=My.default.useContext(Pj),La=P.length+(d?1:0),Ua=0===P.length,eb=rb=>{rb&&!P.includes(rb)&&Ua&&ka([...P,rb])},lb=!(!d||!n);return(0,ok.jsx)(uf,$f(Ie({},a),{side:ea,align:"start",alignOffset:-6,label:(0,ok.jsx)(Je,{content:sa("whiteboard/link"),sideOffset:14,children:(0,ok.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,ok.jsx)(oi,{name:0<La?"link":"add-link"}),0<La&&(0,ok.jsx)("div",{className:"tl-shape-links-count",children:La})]})}),
children:(0,ok.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":lb,children:[lb&&(0,ok.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,ok.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,ok.jsx)(oi,{className:"opacity-50",name:"internal-link"}),sa("whiteboard/references")]}),(0,ok.jsx)(cn,{type:n,id:d})]}),(0,ok.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,ok.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",
children:[(0,ok.jsx)(oi,{className:"opacity-50",name:"add-link"}),sa("whiteboard/link-to-any-page-or-block")]}),Ua&&(0,ok.jsx)(po,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:sa("whiteboard/start-typing-to-search"),onChange:eb}),0<P.length&&(0,ok.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:P.map((rb,Vb)=>(0,ok.jsx)(cn,{id:rb,type:Ug(rb)?"B":"P",onRemove:()=>{ka(P.filter((Zb,Tb)=>Vb!==Tb))},showContent:!0},rb))})]})]})}))}),Gk=gg(ba(21)),[Fv]=Ci("ToggleGroup",
[mw]),mz=mw(),xD=Gk.default.forwardRef((a,d)=>{const {type:n}=a;a=wg(a,["type"]);if("single"===n)return Gk.default.createElement(IH,of({},a,{ref:d}));if("multiple"===n)return Gk.default.createElement(JH,of({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[Lp,yD]=Fv("ToggleGroup"),IH=Gk.default.forwardRef((a,d)=>{const {value:n,defaultValue:P,onValueChange:ea=()=>{}}=a,ka=wg(a,["value","defaultValue","onValueChange"]),[sa,La]=Vc({prop:n,defaultProp:P,onChange:ea});return Gk.default.createElement(Lp,
{scope:a.__scopeToggleGroup,type:"single",value:sa?[sa]:[],onItemActivate:La,onItemDeactivate:Gk.default.useCallback(()=>La(""),[La])},Gk.default.createElement(yu,of({},ka,{ref:d})))}),JH=Gk.default.forwardRef((a,d)=>{const {value:n,defaultValue:P,onValueChange:ea=()=>{}}=a,ka=wg(a,["value","defaultValue","onValueChange"]),[sa=[],La]=Vc({prop:n,defaultProp:P,onChange:ea}),Ua=Gk.default.useCallback(lb=>La((rb=[])=>[...rb,lb]),[La]),eb=Gk.default.useCallback(lb=>La((rb=[])=>rb.filter(Vb=>Vb!==lb)),
[La]);return Gk.default.createElement(Lp,{scope:a.__scopeToggleGroup,type:"multiple",value:sa,onItemActivate:Ua,onItemDeactivate:eb},Gk.default.createElement(yu,of({},ka,{ref:d})))}),[zD,KH]=Fv("ToggleGroup"),yu=Gk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:n,disabled:P=!1,rovingFocus:ea=!0,orientation:ka,dir:sa,loop:La=!0}=a;var Ua=wg(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=mz(n);const eb=nh(sa);Ua=Ie({role:"group",dir:eb},Ua);return Gk.default.createElement(zD,
{scope:n,rovingFocus:ea,disabled:P},ea?Gk.default.createElement(eC,of({asChild:!0},a,{orientation:ka,dir:eb,loop:La}),Gk.default.createElement(jl.div,of({},Ua,{ref:d}))):Gk.default.createElement(jl.div,of({},Ua,{ref:d})))}),LH=Gk.default.forwardRef((a,d)=>{var n=yD("ToggleGroupItem",a.__scopeToggleGroup);const P=KH("ToggleGroupItem",a.__scopeToggleGroup),ea=mz(a.__scopeToggleGroup);n=n.value.includes(a.value);const ka=P.disabled||a.disabled;a=$f(Ie({},a),{pressed:n,disabled:ka});const sa=Gk.default.useRef(null);
return P.rovingFocus?Gk.default.createElement(fC,of({asChild:!0},ea,{focusable:!ka,active:n,ref:sa}),Gk.default.createElement(AD,of({},a,{ref:d}))):Gk.default.createElement(AD,of({},a,{ref:d}))}),AD=Gk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:n,value:P}=a,ea=wg(a,["__scopeToggleGroup","value"]),ka=yD("ToggleGroupItem",n);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return Gk.default.createElement(ZB,of({},"single"===ka.type?a:void 0,ea,{ref:d,onPressedChange:sa=>{if(sa)ka.onItemActivate(P);
else ka.onItemDeactivate(P)}}))}),BD=xD,nz=LH,sn=ba(612),uj=ba(612),oz="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),MH=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],ao=new Map,pz={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),
ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},NH=Object.entries(pz).filter(([,
a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),OH=Ke(()=>{const a=bf(),{handlers:{t:d}}=tm.default.useContext(Pj),n=bb("AutoResizing"),P=n.every(ea=>ea.props.isAutoResizing);return(0,uj.jsx)(mf,{tooltip:d("whiteboard/auto-resize"),toggle:n.every(ea=>"logseq-portal"===ea.props.type),className:"tl-button",pressed:P,onPressedChange:ea=>{n.forEach(ka=>{if("logseq-portal"===ka.props.type)ka.update({isAutoResizing:ea});else ka.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},
children:(0,uj.jsx)(oi,{name:"dimensions"})})}),PH=Ke(()=>{const a=bf();var {handlers:{t:d}}=tm.default.useContext(Pj);const n=bb("LogseqPortalViewMode"),P=n.every(ea=>ea.collapsed);if(!P&&!n.every(ea=>!ea.collapsed))return null;d=(0,uj.jsxs)("div",{className:"flex",children:[P?d("whiteboard/expand"):d("whiteboard/collapse"),(0,uj.jsx)(Vl,{action:P?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,uj.jsx)(mf,{tooltip:d,toggle:n.every(ea=>"logseq-portal"===ea.props.type),
className:"tl-button",pressed:P,onPressedChange:()=>a.api.setCollapsed(!P),children:(0,uj.jsx)(oi,{name:P?"object-expanded":"object-compact"})})}),QH=Ke(()=>{const {handlers:{isMobile:a}}=tm.default.useContext(Pj);var d=bb("ScaleLevel");d=1<(new Set(d.map(n=>n.scaleLevel))).size?"":d[0].scaleLevel;return(0,uj.jsx)(Wo,{scaleLevel:d,compact:a()})}),uq=Ke(()=>{const a=bf(),{handlers:{t:d}}=tm.default.useContext(Pj),n=bb("IFrameSource")[0],P=tm.default.useCallback(ka=>{n.onIFrameSourceChange(ka.target.value.trim().toLowerCase());
a.persist()},[]),ea=tm.default.useCallback(()=>{n.reload()},[]);return(0,uj.jsxs)("span",{className:"flex gap-3",children:[(0,uj.jsx)(Ee,{tooltip:d("whiteboard/reload"),type:"button",onClick:ea,children:(0,uj.jsx)(oi,{name:"refresh"})}),(0,uj.jsx)(wu,{title:d("whiteboard/website-url"),className:"tl-iframe-src",value:`${n.props.url}`,onChange:P}),(0,uj.jsx)(Ee,{tooltip:d("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(n.props.url),children:(0,uj.jsx)(oi,{name:"external-link"})})]})}),
RH=Ke(()=>{const a=bf(),{handlers:{t:d}}=tm.default.useContext(Pj),n=bb("YoutubeLink")[0],P=tm.default.useCallback(ea=>{n.onYoutubeLinkChange(ea.target.value);a.persist()},[]);return(0,uj.jsxs)("span",{className:"flex gap-3",children:[(0,uj.jsx)(wu,{title:d("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${n.props.url}`,onChange:P}),(0,uj.jsx)(Ee,{tooltip:d("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var ea,ka,sa;return null==(sa=null==(ka=null==(ea=window.logseq)?void 0:
ea.api)?void 0:ka.open_external_link)?void 0:sa.call(ka,n.props.url)},children:(0,uj.jsx)(oi,{name:"external-link"})})]})}),SH=Ke(()=>{const a=bf(),{handlers:{t:d}}=tm.default.useContext(Pj),n=bb("TwitterLink")[0],P=tm.default.useCallback(ea=>{n.onTwitterLinkChange(ea.target.value);a.persist()},[]);return(0,uj.jsxs)("span",{className:"flex gap-3",children:[(0,uj.jsx)(wu,{title:d("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${n.props.url}`,onChange:P}),(0,uj.jsx)(Ee,{tooltip:d("whiteboard/open-twitter-url"),
type:"button",onClick:()=>{var ea,ka,sa;return null==(sa=null==(ka=null==(ea=window.logseq)?void 0:ea.api)?void 0:ka.open_external_link)?void 0:sa.call(ka,n.props.url)},children:(0,uj.jsx)(oi,{name:"external-link"})})]})}),TH=Ke(()=>{const a=bf(),{handlers:{t:d,setCurrentPdf:n}}=tm.default.useContext(Pj),P=a.selectedShapesArray[0];return(0,uj.jsx)(Ee,{tooltip:d("whiteboard/edit-pdf"),type:"button",onClick:()=>n(a.assets[P.props.assetId].src),children:(0,uj.jsx)(oi,{name:"edit"})})}),UH=Ke(()=>{const a=
bf(),{handlers:{t:d}}=tm.default.useContext(Pj);var n=bb("NoFill");const P=tm.default.useCallback(ea=>{a.selectedShapesArray.forEach(ka=>ka.update({noFill:ea}));a.persist()},[]);n=n.every(ea=>ea.props.noFill);return(0,uj.jsx)(mf,{tooltip:d("whiteboard/fill"),className:"tl-button",pressed:n,onPressedChange:P,children:(0,uj.jsx)(oi,{name:n?"droplet-off":"droplet"})})}),VH=Ke(()=>{const a=bf(),d=bb("Swatch"),n=tm.default.useCallback(ea=>{a.selectedShapesArray.forEach(ka=>{ka.update({fill:ea,stroke:ea})});
a.persist()},[]),P=tm.default.useCallback(ea=>{a.selectedShapesArray.forEach(ka=>{ka.update({opacity:ea})});a.persist()},[]);return(0,uj.jsx)(fn,{popoverSide:"top",color:d[0].props.noFill?d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:P,setColor:n})}),WH=Ke(()=>{const a=bf(),d=tm.default.useCallback(n=>{a.api.convertShapes(n.currentTarget.dataset.tool)},[]);return(0,uj.jsx)(yy,{popoverSide:"top",chevron:!1,setGeometry:d})}),CD=Ke(()=>{const a=bf(),{handlers:{t:d}}=tm.default.useContext(Pj),
n=bb("StrokeType"),P=n.every(ea=>"dashed"===ea.props.strokeType)?"dashed":n.every(ea=>"line"===ea.props.strokeType)?"line":"mixed";return(0,uj.jsx)(ja,{title:d("whiteboard/stroke-type"),options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:P,onValueChange:ea=>{n.forEach(ka=>{ka.update({strokeType:ea})});a.persist()}})}),XH=Ke(()=>{const a=bf(),{handlers:{t:d}}=tm.default.useContext(Pj),n=bb("ArrowMode");var P=n.every(ka=>{var sa;return"arrow"===
(null==(sa=ka.props.decorations)?void 0:sa.start)});const ea=n.every(ka=>{var sa;return"arrow"===(null==(sa=ka.props.decorations)?void 0:sa.end)});P=[P?"start":null,ea?"end":null].filter(pc);return(0,uj.jsx)(Ca,{title:d("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:P,onValueChange:ka=>{n.forEach(sa=>{var La=sa.update;var Ua={start:ka.includes("start")?"arrow":null,end:ka.includes("end")?"arrow":null};La.call(sa,{decorations:Ua})});
a.persist()}})}),YH=Ke(()=>{const a=bf(),{handlers:{t:d}}=tm.default.useContext(Pj),n=bb("TextStyle"),P=n.every(ka=>500<ka.props.fontWeight),ea=n.every(ka=>ka.props.italic);return(0,uj.jsxs)("span",{className:"flex gap-1",children:[(0,uj.jsx)(mf,{tooltip:d("whiteboard/bold"),className:"tl-button",pressed:P,onPressedChange:ka=>{n.forEach(sa=>{sa.update({fontWeight:ka?700:400});sa.onResetBounds()});a.persist()},children:(0,uj.jsx)(oi,{name:"bold"})}),(0,uj.jsx)(mf,{tooltip:d("whiteboard/italic"),className:"tl-button",
pressed:ea,onPressedChange:ka=>{n.forEach(sa=>{sa.update({italic:ka});sa.onResetBounds()});a.persist()},children:(0,uj.jsx)(oi,{name:"italic"})})]})}),ZH=Ke(()=>{var a;const d=bf(),n=d.selectedShapesArray[0];return(0,uj.jsx)(lz,{onRefsChange:P=>{n.update({refs:P});d.persist()},refs:null!=(a=n.props.refs)?a:[],shapeType:n.props.type,side:"right",pageId:"logseq-portal"===n.props.type?n.props.pageId:void 0,portalType:"logseq-portal"===n.props.type?n.props.blockType:void 0})});ao.set("Geometry",WH);ao.set("AutoResizing",
OH);ao.set("LogseqPortalViewMode",PH);ao.set("ScaleLevel",QH);ao.set("YoutubeLink",RH);ao.set("TwitterLink",SH);ao.set("IFrameSource",uq);ao.set("NoFill",UH);ao.set("Swatch",VH);ao.set("StrokeType",CD);ao.set("ArrowMode",XH);ao.set("TextStyle",YH);ao.set("Links",ZH);ao.set("EditPdf",TH);var qz=a=>{var d;return(null!=(d=pz[a])?d:[]).filter(pc)},$H=a=>{const d=a.map(P=>P.props.type),n=new Set(0<a.length?qz(d[0]):[]);for(let P=1;P<d.length&&0<n.size;P++){const ea=qz(d[P]);n.forEach(ka=>{ea.includes(ka)||
n.delete(ka)})}1<a.length&&MH.forEach(P=>{n.has(P)&&n.delete(P)});return Array.from(n).sort((P,ea)=>oz.indexOf(P)-oz.indexOf(ea)).map(P=>ao.get(P))},Gv=ba(612),DD=Ke(({shapes:a,offsets:d,hidden:n})=>{const P=bf(),ea=iu.useRef(null),ka=iu.useRef(null);iu.useLayoutEffect(()=>{setTimeout(()=>{const La=ka.current;if(La){var {offsetWidth:Ua,offsetHeight:eb}=La;ea.current=[Ua,eb]}})});iu.useLayoutEffect(()=>{var La;const Ua=ka.current;if(Ua){var eb=null!=(La=ea.current)?La:[0,0];La=0;if(116>d.top){var lb=
d.height/2+40;140>d.bottom&&(lb+=d.bottom-140)}else lb=-(d.height/2+40);16>d.left+d.width/2-eb[0]/2?La+=-(d.left+d.width/2-eb[0]/2-16):16>d.right+d.width/2-eb[0]/2&&(La+=d.right+d.width/2-eb[0]/2-16);var [rb,Vb]=[La,lb];Ua.style.transform=`translateX(${rb}px) translateY(${Vb}px)`}},[d]);if(!P)return null;const sa=$H(a);return(0,Gv.jsx)(Lo,{centered:!0,children:0<sa.length&&(0,Gv.jsx)("div",{ref:ka,className:"tl-toolbar tl-context-bar",style:{visibility:n?"hidden":"visible",pointerEvents:n?"none":
"all"},children:sa.map((La,Ua)=>(0,Gv.jsxs)(iu.Fragment,{children:[(0,Gv.jsx)(La,{}),Ua<sa.length-1&&(0,Gv.jsx)(nq,{className:"tl-toolbar-separator",orientation:"vertical"})]},Ua))})})}),rz=gg(ba(21)),Ll=ba(21),[ED]=Ci("ContextMenu",[bv]),zu=bv(),[Hv,Au]=ED("ContextMenu"),sz=(0,Ll.forwardRef)((a,d)=>{const {__scopeContextMenu:n,disabled:P=!1}=a,ea=wg(a,["__scopeContextMenu","disabled"]),ka=Au("ContextMenuTrigger",n),sa=zu(n),La=(0,Ll.useRef)({x:0,y:0}),Ua=(0,Ll.useRef)({getBoundingClientRect:()=>
DOMRect.fromRect(Ie({width:0,height:0},La.current))}),eb=(0,Ll.useRef)(0),lb=(0,Ll.useCallback)(()=>window.clearTimeout(eb.current),[]);(0,Ll.useEffect)(()=>lb,[lb]);(0,Ll.useEffect)(()=>void(P&&lb()),[P,lb]);return(0,Ll.createElement)(Ll.Fragment,null,(0,Ll.createElement)(ny,of({},sa,{virtualRef:Ua})),(0,Ll.createElement)(jl.span,of({"data-state":ka.open?"open":"closed","data-disabled":P?"":void 0},ea,{ref:d,style:Ie({WebkitTouchCallout:"none"},a.style),onContextMenu:P?a.onContextMenu:Ng(a.onContextMenu,
rb=>{lb();La.current={x:rb.clientX,y:rb.clientY};ka.onOpenChange(!0);rb.preventDefault()}),onPointerDown:P?a.onPointerDown:Ng(a.onPointerDown,bc(rb=>{lb();eb.current=window.setTimeout(()=>{La.current={x:rb.clientX,y:rb.clientY};ka.onOpenChange(!0)},700)})),onPointerMove:P?a.onPointerMove:Ng(a.onPointerMove,bc(lb)),onPointerCancel:P?a.onPointerCancel:Ng(a.onPointerCancel,bc(lb)),onPointerUp:P?a.onPointerUp:Ng(a.onPointerUp,bc(lb))})))}),tz=(0,Ll.forwardRef)((a,d)=>{var {__scopeContextMenu:n}=a;const P=
wg(a,["__scopeContextMenu"]),ea=Au("ContextMenuContent",n);n=zu(n);const ka=(0,Ll.useRef)(!1);return(0,Ll.createElement)(ev,of({},n,P,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:sa=>{var La;null===(La=a.onCloseAutoFocus)||void 0===La||La.call(a,sa);!sa.defaultPrevented&&ka.current&&sa.preventDefault();ka.current=!1},onInteractOutside:sa=>{var La;null===(La=a.onInteractOutside)||void 0===La||La.call(a,sa);sa.defaultPrevented||ea.modal||(ka.current=!0)},style:$f(Ie({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
am=(0,Ll.forwardRef)((a,d)=>{var {__scopeContextMenu:n}=a;a=wg(a,["__scopeContextMenu"]);n=zu(n);return(0,Ll.createElement)(Zt,of({},n,a,{ref:d}))}),gs=(0,Ll.forwardRef)((a,d)=>{var {__scopeContextMenu:n}=a;a=wg(a,["__scopeContextMenu"]);n=zu(n);return(0,Ll.createElement)(sC,of({},n,a,{ref:d}))}),FD=a=>{const {__scopeContextMenu:d,children:n,onOpenChange:P,dir:ea,modal:ka=!0}=a,[sa,La]=(0,Ll.useState)(!1);a=zu(d);const Ua=Mj(P),eb=(0,Ll.useCallback)(lb=>{La(lb);Ua(lb)},[Ua]);return(0,Ll.createElement)(Hv,
{scope:d,open:sa,onOpenChange:eb,modal:ka},(0,Ll.createElement)(tC,of({},a,{dir:ea,open:sa,onOpenChange:eb,modal:ka}),n))},og=ba(612),pr=Ke(function({children:a,collisionRef:d}){var n,P,ea,ka,sa,La,Ua,eb,lb,rb,Vb,Zb,Tb,sc,Kc,fc,zc;const vc=bf(),{handlers:$c}=rz.useContext(Pj),ed=$c.t,Wd=rz.useRef(null),me=Oe=>{Oe();vc.transition("select")},Kf=rz.useMemo(()=>Ub(),[]);return(0,og.jsxs)(FD,{onOpenChange:Oe=>{Oe&&!vc.isIn("select.contextMenu")?vc.transition("select").selectedTool.transition("contextMenu"):
!Oe&&vc.isIn("select.contextMenu")&&vc.selectedTool.transition("idle")},children:[(0,og.jsx)(sz,{disabled:vc.editingShape&&0!==Object.keys(vc.editingShape).length,children:a}),(0,og.jsx)(tz,{className:"tl-menu tl-context-menu",ref:Wd,onEscapeKeyDown:()=>vc.transition("select"),collisionBoundary:d.current,asChild:!0,tabIndex:-1,children:(0,og.jsxs)("div",{children:[1<(null==(n=vc.selectedShapes)?void 0:n.size)&&!vc.readOnly&&(null==(P=vc.selectedShapesArray)?void 0:P.some(Oe=>!Oe.props.isLocked))&&
(0,og.jsxs)(og.Fragment,{children:[(0,og.jsxs)(am,{children:[(0,og.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,og.jsx)(Ee,{tooltip:ed("whiteboard/align-left"),onClick:()=>me(()=>vc.align("left")),children:(0,og.jsx)(oi,{name:"layout-align-left"})}),(0,og.jsx)(Ee,{tooltip:ed("whiteboard/align-center-horizontally"),onClick:()=>me(()=>vc.align("centerHorizontal")),children:(0,og.jsx)(oi,{name:"layout-align-center"})}),(0,og.jsx)(Ee,{tooltip:ed("whiteboard/align-right"),onClick:()=>
me(()=>vc.align("right")),children:(0,og.jsx)(oi,{name:"layout-align-right"})}),(0,og.jsx)(nq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,og.jsx)(Ee,{tooltip:ed("whiteboard/distribute-horizontally"),onClick:()=>me(()=>vc.distribute("horizontal")),children:(0,og.jsx)(oi,{name:"layout-distribute-vertical"})})]}),(0,og.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,og.jsx)(Ee,{tooltip:ed("whiteboard/align-top"),onClick:()=>me(()=>vc.align("top")),children:(0,og.jsx)(oi,
{name:"layout-align-top"})}),(0,og.jsx)(Ee,{tooltip:ed("whiteboard/align-center-vertically"),onClick:()=>me(()=>vc.align("centerVertical")),children:(0,og.jsx)(oi,{name:"layout-align-middle"})}),(0,og.jsx)(Ee,{tooltip:ed("whiteboard/align-bottom"),onClick:()=>me(()=>vc.align("bottom")),children:(0,og.jsx)(oi,{name:"layout-align-bottom"})}),(0,og.jsx)(nq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,og.jsx)(Ee,{tooltip:ed("whiteboard/distribute-vertically"),onClick:()=>me(()=>vc.distribute("vertical")),
children:(0,og.jsx)(oi,{name:"layout-distribute-horizontal"})})]})]}),(0,og.jsx)(gs,{className:"menu-separator"}),(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.packIntoRectangle),children:[(0,og.jsx)(oi,{className:"tl-menu-icon",name:"layout-grid"}),ed("whiteboard/pack-into-rectangle")]}),(0,og.jsx)(gs,{className:"menu-separator"})]}),0<(null==(ea=vc.selectedShapes)?void 0:ea.size)&&(0,og.jsxs)(og.Fragment,{children:[(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.api.zoomToSelection),
children:[ed("whiteboard/zoom-to-fit"),(0,og.jsx)(Vl,{action:"whiteboard/zoom-to-fit"})]}),(0,og.jsx)(gs,{className:"menu-separator"})]}),(vc.selectedShapesArray.some(Oe=>"group"===Oe.type||vc.getParentGroup(Oe))||1<vc.selectedShapesArray.length)&&(null==(ka=vc.selectedShapesArray)?void 0:ka.some(Oe=>!Oe.props.isLocked))&&!vc.readOnly&&(0,og.jsxs)(og.Fragment,{children:[vc.selectedShapesArray.some(Oe=>"group"===Oe.type||vc.getParentGroup(Oe))&&(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>
me(vc.api.unGroup),children:[(0,og.jsx)(oi,{className:"tl-menu-icon",name:"ungroup"}),ed("whiteboard/ungroup"),(0,og.jsx)(Vl,{action:"whiteboard/ungroup"})]}),1<vc.selectedShapesArray.length&&(null==(sa=vc.selectedShapesArray)?void 0:sa.some(Oe=>!Oe.props.isLocked))&&(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.api.doGroup),children:[(0,og.jsx)(oi,{className:"tl-menu-icon",name:"group"}),ed("whiteboard/group"),(0,og.jsx)(Vl,{action:"whiteboard/group"})]}),(0,og.jsx)(gs,{className:"menu-separator"})]}),
0<(null==(La=vc.selectedShapes)?void 0:La.size)&&(null==(Ua=vc.selectedShapesArray)?void 0:Ua.some(Oe=>!Oe.props.isLocked))&&(0,og.jsxs)(og.Fragment,{children:[!vc.readOnly&&(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.cut),children:[(0,og.jsx)(oi,{className:"tl-menu-icon",name:"cut"}),ed("whiteboard/cut")]}),(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.copy),children:[(0,og.jsx)(oi,{className:"tl-menu-icon",name:"copy"}),ed("whiteboard/copy"),(0,og.jsx)(Vl,{action:"editor/copy"})]})]}),
!vc.readOnly&&(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.paste),children:[(0,og.jsx)(oi,{className:"tl-menu-icon",name:"clipboard"}),ed("whiteboard/paste"),(0,og.jsx)("div",{className:"tl-menu-right-slot",children:(0,og.jsx)("span",{className:"keyboard-shortcut",children:(0,og.jsxs)("code",{children:[JA,"+v"]})})})]}),1===(null==(eb=vc.selectedShapes)?void 0:eb.size)&&!vc.readOnly&&(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(()=>vc.paste(void 0,!0)),children:[ed("whiteboard/paste-as-link"),
(0,og.jsx)("div",{className:"tl-menu-right-slot",children:(0,og.jsx)("span",{className:"keyboard-shortcut",children:(0,og.jsxs)("code",{children:[JA,"++v"]})})})]}),0<(null==(lb=vc.selectedShapes)?void 0:lb.size)&&(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)(gs,{className:"menu-separator"}),(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(()=>{var Oe,nf;return $c.exportToImage(vc.currentPageId,{x:vc.selectionBounds.minX+vc.viewport.camera.point[0]-8,y:vc.selectionBounds.minY+vc.viewport.camera.point[1]-
8,width:(null==(Oe=vc.selectionBounds)?void 0:Oe.width)+16,height:(null==(nf=vc.selectionBounds)?void 0:nf.height)+16,zoom:vc.viewport.camera.zoom})}),children:[(0,og.jsx)(oi,{className:"tl-menu-icon",name:"file-export"}),ed("whiteboard/export"),(0,og.jsx)("div",{className:"tl-menu-right-slot",children:(0,og.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,og.jsx)(gs,{className:"menu-separator"}),(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.api.selectAll),children:[ed("whiteboard/select-all"),
(0,og.jsx)(Vl,{action:"editor/select-parent"})]}),1<(null==(rb=vc.selectedShapes)?void 0:rb.size)&&(0,og.jsx)(am,{className:"tl-menu-item",onClick:()=>me(vc.api.deselectAll),children:ed("whiteboard/deselect-all")}),!vc.readOnly&&0<(null==(Vb=vc.selectedShapes)?void 0:Vb.size)&&(null==(Zb=vc.selectedShapesArray)?void 0:Zb.some(Oe=>!Oe.props.isLocked))&&(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(()=>vc.setLocked(!0)),children:[(0,og.jsx)(oi,{className:"tl-menu-icon",name:"lock"}),ed("whiteboard/lock"),
(0,og.jsx)(Vl,{action:"whiteboard/lock"})]}),!vc.readOnly&&0<(null==(Tb=vc.selectedShapes)?void 0:Tb.size)&&(null==(sc=vc.selectedShapesArray)?void 0:sc.some(Oe=>Oe.props.isLocked))&&(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(()=>vc.setLocked(!1)),children:[(0,og.jsx)(oi,{className:"tl-menu-icon",name:"lock-open"}),ed("whiteboard/unlock"),(0,og.jsx)(Vl,{action:"whiteboard/unlock"})]}),0<(null==(Kc=vc.selectedShapes)?void 0:Kc.size)&&!vc.readOnly&&(null==(fc=vc.selectedShapesArray)?void 0:
fc.some(Oe=>!Oe.props.isLocked))&&(0,og.jsxs)(og.Fragment,{children:[(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.api.deleteShapes),children:[(0,og.jsx)(oi,{className:"tl-menu-icon",name:"backspace"}),ed("whiteboard/delete"),(0,og.jsx)(Vl,{action:"editor/delete"})]}),1<(null==(zc=vc.selectedShapes)?void 0:zc.size)&&!vc.readOnly&&(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)(gs,{className:"menu-separator"}),(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.flipHorizontal),children:[(0,og.jsx)(oi,
{className:"tl-menu-icon",name:"flip-horizontal"}),ed("whiteboard/flip-horizontally")]}),(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.flipVertical),children:[(0,og.jsx)(oi,{className:"tl-menu-icon",name:"flip-vertical"}),ed("whiteboard/flip-vertically")]})]}),!vc.readOnly&&(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)(gs,{className:"menu-separator"}),(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.bringToFront),children:[ed("whiteboard/move-to-front"),(0,og.jsx)(Vl,{action:"whiteboard/bring-to-front"})]}),
(0,og.jsxs)(am,{className:"tl-menu-item",onClick:()=>me(vc.sendToBack),children:[ed("whiteboard/move-to-back"),(0,og.jsx)(Vl,{action:"whiteboard/send-to-back"})]})]}),Kf&&(0,og.jsx)(am,{className:"tl-menu-item",onClick:()=>{1===vc.selectedShapesArray.length?console.log(mc(vc.selectedShapesArray[0].serialized)):console.log(vc.selectedShapesArray.map(Oe=>mc(Oe.serialized)))},children:ed("whiteboard/dev-print-shape-props")})]})]})})]})}),uz=gg(ba(21)),$w=ba(612),aI=Ke(({shape:a})=>{const d=bf(),{handlers:n}=
uz.default.useContext(Pj),P=n.t,ea=uz.default.useMemo(()=>{var ka;const sa=[...(null!=(ka=a.props.refs)?ka:[])].map(La=>[La,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&sa.unshift([a.props.pageId,!1]);return sa.filter(La=>La[0].toLowerCase()!==d.currentPage.name&&n.getBlockPageName(La[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===ea.length?null:(0,$w.jsx)("div",{className:"tl-quick-links",title:P("whiteboard/shape-quick-links"),children:ea.map(([ka,
sa])=>(0,$w.jsx)("div",{className:"tl-quick-links-row",children:(0,$w.jsx)(ar,{id:ka,showReferenceContent:sa})},ka))})}),bI=gg(ba(21)),vq=gg(ba(21)),GD={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},vz=(a,d,n)=>Ji(void 0,[a,d,n],function*(P,{point:ea,shiftKey:ka,dataTransfer:sa,fromDrop:La},Ua){function eb(Jd,ee){return Ji(this,null,function*(){const xf=Object.values(P.assets).find(Of=>Of.src===Jd);return xf?xf:{id:tk(),type:ee,src:Jd,size:yield Gi(Ua.makeAssetUrl(Jd),
ee)}})}function lb(Jd){return Ji(this,null,function*(){const ee=Jd.filter(xf=>"unknown"!==Cc(xf.name)).map(xf=>Ji(this,null,function*(){try{const Of=yield Ua.saveAsset(xf);return yield eb(Of,Cc(xf.name))}catch(Of){console.error(Of)}return null}));return(yield Promise.all(ee)).filter(pc)})}function rb(Jd){return[$f(Ie({},ir.defaultProps),{html:Jd,point:[ea[0],ea[1]]})]}function Vb(Jd){return Ji(this,null,function*(){return Xc(Tb,sc,zc,fc,vc,Kc,Kf)(Jd)})}function Zb(){return Ji(this,null,function*(){const Jd=
yield navigator.clipboard.read(),ee=Xc(vc,Kc,Kf);return(yield Promise.all(Jd.map(xf=>ee(xf)))).flat().filter(pc)})}function Tb(Jd){return Ji(this,null,function*(){var ee=Jd.getData("file");if(!ee)return null;const xf=yield eb(ee,"pdf");P.addAssets([xf]);ee=$f(Ie({},ot.defaultProps),{id:tk(),assetId:xf.id,url:ee,opacity:1});xf.size&&Object.assign(ee,{point:[ea[0]-xf.size[0]/4+16,ea[1]-xf.size[1]/4+16],size:De.div(xf.size,2)});return[ee]})}function sc(Jd){return Ji(this,null,function*(){var ee=Array.from(Jd.files);
return 0<ee.length?(mg=ee=yield lb(ee),ee.map((xf,Of)=>{switch(xf.type){case "video":var Kg=vu.defaultProps;break;case "image":Kg=Bj.defaultProps;break;case "pdf":Kg=ot.defaultProps;break;default:return null}Kg=$f(Ie({},Kg),{id:tk(),assetId:xf.id,opacity:1});xf.size&&Object.assign(Kg,{point:[ea[0]-xf.size[0]/4+16*Of,ea[1]-xf.size[1]/4+16*Of],size:De.div(xf.size,2)});return Kg})):null})}function Kc(Jd){return Ji(this,null,function*(){if(Jd.types.includes("text/plain")&&(ka||La))return null;const ee=
yield Qd(Jd,"text/html");return ee?Xc($c,rb)(ee):null})}function fc(Jd){return Ji(this,null,function*(){var ee,xf,Of,Kg,xh,Yf,Jh=Jd.getData("block-uuid");if(Jh){Jh=Jh.trim();const yg=null==(Of=null==(xf=null==(ee=window.logseq)?void 0:ee.api)?void 0:xf.get_selected_blocks)?void 0:Of.call(xf);ee=yg&&1<(null==yg?void 0:yg.length)?yg.map(Vh=>Vh.uuid):[Jh];null==(Yf=null==(xh=null==(Kg=window.logseq)?void 0:Kg.api)?void 0:xh.set_blocks_id)?void 0:Yf.call(xh,ee);Kg=ee.map(Vh=>me(`((${Vh}))`));return(yield Promise.all(Kg)).flat().filter(pc).map((Vh,
li)=>$f(Ie({},Vh),{point:[ea[0]+(Fk.defaultProps.size[0]+16)*li,ea[1]]}))}return null})}function zc(Jd){return Ji(this,null,function*(){var ee=Jd.getData("page-name");return ee?(ee=ee.trim(),me(`[[${ee}]]`)):null})}function vc(Jd){return Ji(this,null,function*(){var ee=yield Qd(Jd,"text/plain");return ee?(ee=ee.trim(),Xc(ed,Wd)(ee)):null})}function $c(Jd){if(Jd=P.api.getClonedShapesFromTldrString(decodeURIComponent(Jd),ea)){const {shapes:ee,assets:xf,bindings:Of}=Jd;wf.push(...xf);bg.push(...Of);
return ee}return null}function ed(Jd){return Ji(this,null,function*(){try{const xf=new URL(Jd);var ee=xf.host&&["http:","https:"].includes(xf.protocol)}catch(xf){ee=!1}return ee&&!ka?Xw.test(Jd)?[$f(Ie({},mr.defaultProps),{url:Jd,point:[ea[0],ea[1]]})]:hz.test(Jd)?[$f(Ie({},nt.defaultProps),{url:Jd,point:[ea[0],ea[1]]})]:[$f(Ie({},jr.defaultProps),{url:Jd,point:[ea[0],ea[1]]})]:null})}function Wd(Jd){return Jd.startsWith("\x3ciframe")?[$f(Ie({},ir.defaultProps),{html:Jd,point:[ea[0],ea[1]]})]:null}
function me(Jd){return Ji(this,null,function*(){if(/^\(\(.*\)\)$/.test(Jd)&&40===Jd.length){var ee=Jd.slice(2,-2);if(Ug(ee))return[$f(Ie({},Fk.defaultProps),{point:[ea[0],ea[1]],size:[400,0],pageId:ee,fill:P.settings.color,stroke:P.settings.color,scaleLevel:P.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(Jd))return ee=Jd.slice(2,-2),[$f(Ie({},Fk.defaultProps),{point:[ea[0],ea[1]],size:[400,0],pageId:ee,fill:P.settings.color,stroke:P.settings.color,scaleLevel:P.settings.scaleLevel,
blockType:"P"})];return null})}function Kf(Jd){return Ji(this,null,function*(){var ee=yield Qd(Jd,"text/plain");return ee&&(ee=ee.trim(),ee=yield null==Ua?void 0:Ua.addNewBlock(ee))?[$f(Ie({},Fk.defaultProps),{size:[400,0],point:[ea[0],ea[1]],pageId:ee,fill:P.settings.color,stroke:P.settings.color,scaleLevel:P.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var Oe,nf;let mg=[],wf=[];const bg=[];P.cursors.setCursor("progress");let ke=[];try{sa?ke.push(...(null!=(Oe=yield Vb(sa))?Oe:[])):ke.push(...(null!=
(nf=yield Zb())?nf:[]))}catch(Jd){console.error(Jd)}const Pd=ke.map(Jd=>$f(Ie({},Jd),{parentId:P.currentPageId,isLocked:!1,id:Ug(Jd.id)?Jd.id:tk()})),be=null==sa?void 0:sa.types.every(Jd=>"Files"===Jd);P.wrapUpdate(()=>{var Jd=[...mg,...wf];0<Jd.length&&P.createAssets(Jd);0<Pd.length&&P.createShapes(Pd);P.currentPage.updateBindings(Object.fromEntries(bg.map(ee=>[ee.id,ee])));if(1===P.selectedShapesArray.length&&1===Pd.length&&La){Jd=P.selectedShapesArray[0];const ee=P.getShapeById(Pd[0].id);P.createNewLineBinding(Jd,
ee)}P.setSelectedShapes(Pd.map(ee=>ee.id));P.selectedTool.transition("idle");P.cursors.setCursor("default");(La||be)&&P.packIntoRectangle()})}),Iv=gg(ba(21)),wz=gg(ba(21)),wq=ba(612),HD=[pt,rn,uD,jz,Xm,rp,Zw,kz,Kl,vD,Fi,qt],ID=a=>{const {renderers:d}=Vt.useContext(Pj);return(0,wq.jsx)(d.BacklinksCount,$f(Ie({},a),{options:{"portal?":!1}}))},JD=()=>{const a=Vt.useRef(null),d=bf(),n=Vt.useMemo(()=>({ContextBar:DD,BacklinksCount:ID,QuickLinks:aI}),[]);return(0,wq.jsx)(pr,{collisionRef:a,children:(0,wq.jsx)("div",
{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":d.uuid,children:(0,wq.jsx)(lG,{components:n,children:(0,wq.jsx)(Zq,{})})})})},KD=a=>{var {onPersist:d,readOnly:n,model:P}=a;a=wg(a,["onPersist","readOnly","model"]);const ea=He(),ka=ne(),sa=df(),La=n?null:Pf(),Ua=Vt.useCallback((eb,lb)=>{null==d?void 0:d(eb,lb)},[P]);return(0,wq.jsx)(hG,$f(Ie({Shapes:qn,Tools:HD,onDrop:ea,onPaste:ka,onCopy:sa,readOnly:n,onCanvasDBClick:La,onPersist:Ua,model:P},a),{children:(0,wq.jsx)(JD,{})}))},LD=
function(a){var {renderers:d,handlers:n}=a;a=wg(a,["renderers","handlers"]);const P={renderers:Vt.useMemo(()=>Object.fromEntries(Object.entries(d).map(([ea,ka])=>[ea,Vt.memo(ka)])),[]),handlers:n};return(0,wq.jsx)(Pj.Provider,{value:P,children:(0,wq.jsx)(KD,Ie({},a))})}};
'use strict';var eId=function(a,b){var c=$APP.hC(a)?$APP.AA.A($APP.ED.A(new $APP.O(null,2,5,$APP.P,[$APP.$q,"logseq.tldraw.shape"],null))):$APP.FC;a=$APP.ED.A(new $APP.O(null,2,5,$APP.P,[$APP.$q,$APP.Nq.A?$APP.Nq.A(b):$APP.Nq.call(null,b)],null));return $APP.vl.j(function(d){var e=$APP.Ff(d);d=$APP.H.j(e,$APP.AA);e=$APP.H.j(e,$APP.kD);e=$APP.H.j(e,c);return $APP.m(e)?new $APP.l(null,2,[$APP.Gl,$APP.r.A(d),$APP.qRc,$APP.qRc.A(e)],null):null},$APP.j2a.A(a))},fId=function(a){return $APP.fq.F(a,$APP.F([$APP.hq,
!0]))},gId=function(a,b,c,d,e){var f=$APP.Nq.A?$APP.Nq.A(b):$APP.Nq.call(null,b);c=$APP.Cf([$APP.bH($APP.GC),$APP.Fhb,$APP.bH($APP.IC),new $APP.l(null,6,[$APP.Gl,$APP.sa(c,"id"),$APP.Jp,$APP.sa(c,"name"),$APP.AF,fId($APP.sa(c,"bindings")),$APP.qRc,$APP.sa(c,"nonce"),$APP.lTb,fId(d),$APP.eTb,e],null)]);d=$APP.Xq.H?$APP.Xq.H():$APP.Xq.call(null);a=$APP.ZB.A(a);a=$APP.m(a)?a:$APP.Xq.H?$APP.Xq.H():$APP.Xq.call(null);return new $APP.l(null,6,[$APP.Zq,b,$APP.$q,f,$APP.aC,"whiteboard",$APP.kD,c,$APP.YB,
d,$APP.ZB,a],null)},hId=function(a,b,c,d,e,f){a=fId(a.getCleanUpAssets());var g=b.shapes,h=$APP.Th.j(function(z){return $APP.sa(z,"id")},g),n=$APP.Ah(h,$APP.Mj.A(g.length));g=$APP.vh($APP.Th.j(function(z){z=$APP.Ff(z);z=$APP.H.j(z,$APP.Gl);return $APP.T.C(fId(b.getShapeById(z).serialized),$APP.uw,$APP.H.j(n,z))},$APP.My.j(c,d)));d=$APP.vh($APP.Th.j($APP.Gl,d));var p=$APP.vh($APP.Th.j($APP.Gl,c)),q=$APP.vh($APP.Jm.j($APP.kk,$APP.My.j(p,d)));c=$APP.vh($APP.og.j(function(z){z=$APP.Gl.A(z);return q.A?
q.A(z):q.call(null,z)},g));var t=$APP.Jm.j($APP.kk,$APP.My.j(d,p)),v=$APP.Uz();d=$APP.x(t)?$APP.Jm.j($APP.ub,$APP.Lj.j(function(z){return $APP.aH(z,$APP.FC)},function(){var z=new $APP.O(null,1,5,$APP.P,[$APP.Ix],null),E=$APP.Lj.j(function(G){return new $APP.O(null,2,5,$APP.P,[$APP.AA,$APP.ui(G)],null)},t);return $APP.xD?$APP.xD(v,z,E):$APP.o3a.call(null,v,z,E)}())):null;p=$APP.Lj.j(function(z){return new $APP.O(null,2,5,$APP.P,[$APP.qAb,new $APP.O(null,2,5,$APP.P,[$APP.AA,$APP.ui(z)],null)],null)},
t);g=$APP.Jm.j(function(z){var E=$APP.B,G=E.j,K=$APP.qRc.A;var J=new $APP.O(null,2,5,$APP.P,[$APP.AA,$APP.AA.A(z)],null);J=$APP.ED.A?$APP.ED.A(J):$APP.ED.call(null,J);return G.call(E,K.call($APP.qRc,$APP.aH(J,$APP.FC)),$APP.qRc.A($APP.aH(z,$APP.FC)))},$APP.Th.j(function(z){var E=$APP.Uz(),G=$APP.pD?$APP.pD(E):$APP.rD.call(null,E);G=$APP.Cf([$APP.wfb(E,G,$APP.GC),$APP.cH,$APP.wfb(E,G,$APP.FC),z]);E=$APP.Nq(e);G=new $APP.l(null,4,[$APP.AA,$APP.xi($APP.Gl.A(z))?$APP.Gl.A(z):$APP.ui($APP.Gl.A(z)),$APP.ZC,
new $APP.l(null,1,[$APP.$q,E],null),$APP.$C,new $APP.l(null,1,[$APP.$q,E],null),$APP.kD,G],null);z=$APP.Lhb($APP.T.C(G,$APP.kD,new $APP.l(null,2,[$APP.GC,$APP.cH,$APP.FC,z],null)),E);return $APP.Yl.F($APP.F([G,z]))},g));var y=$APP.RE(e);a=gId(y,e,b,a,h);return $APP.x(g)||$APP.x(p)||$APP.nh.j($APP.kD.A(a),$APP.kD.A(y))?new $APP.l(null,6,[$APP.qJc,a,$APP.f_c,$APP.Th.j($APP.$B,g),$APP.cM,p,$APP.z4c,d,$APP.vrc,c,$APP.l$b,new $APP.l(null,2,[$APP.Xic,!0,$APP.Yic,f],null)],null):null},iId=function(a,b,c){var d=
$APP.Xc($APP.A(b.pages)),e=d.shapes,f=$APP.RE(a);f=$APP.aH(f,$APP.IC);f=$APP.eTb.A(f);var g=$APP.Ah(f,$APP.Mj.A($APP.Pc(f)));e=$APP.vh($APP.Jn.j(function(t,v){var y=v.id;return new $APP.l(null,2,[$APP.Gl,y,$APP.qRc,$APP.B.j(t,$APP.H.j(g,y))?v.nonce:Date.now()],null)},e));var h=$APP.Uz();f=function(){var t=$APP.ix.j($APP.u($APP.yrd),new $APP.O(null,2,5,$APP.P,[h,a],null));return $APP.m(t)?t:$APP.vh($APP.Th.j(function(v){return $APP.er.C(v,$APP.Gl,$APP.r)},eId(h,a)))}();b=hId(b,d,e,f,a,c);d=$APP.Ff(b);
f=$APP.H.j(d,$APP.qJc);b=$APP.H.j(d,$APP.vrc);var n=$APP.H.j(d,$APP.z4c),p=$APP.H.j(d,$APP.f_c),q=$APP.H.j(d,$APP.cM);c=$APP.H.j(d,$APP.l$b);if($APP.x(d)){d=$APP.hl.F(q,new $APP.O(null,1,5,$APP.P,[f],null),$APP.F([p]));b=$APP.m($APP.Tf(function(t){return $APP.B.j("group",$APP.Lm.A(t))},b))?$APP.T.C(c,$APP.Dwc,$APP.Ru):$APP.m(function(){var t=$APP.Gf(n);return $APP.m(t)?$APP.Rf(function(v){return $APP.B.j("group",$APP.Lm.A(v))},n):t}())?$APP.T.C(c,$APP.Dwc,$APP.CKc):$APP.m($APP.Tf(function(t){return $APP.B.j("line",
$APP.Lm.A(t))&&$APP.B.j("arrow ",$APP.Ao.A($APP.gIc.A(t)))},b))?$APP.T.C(c,$APP.Dwc,$APP.dWc):c;$APP.gi.J($APP.yrd,$APP.xu,new $APP.O(null,2,5,$APP.P,[h,a],null),e);if($APP.ke(new $APP.qh(null,new $APP.l(null,1,[$APP.dWc,null],null),null),$APP.Dwc.A(b)))return $APP.Wz($APP.Xbd,new $APP.l(null,2,[$APP.ax,d,$APP.l$b,b],null));e=$APP.Xbd.A($APP.u($APP.Rz));c=$APP.hl.j($APP.ax.A(e),d);e=$APP.Yl.F($APP.F([b,$APP.l$b.A(e)]));$APP.Wz($APP.Xbd,$APP.Ef);return $APP.CD?$APP.CD(h,c,e):$APP.DD.call(null,h,c,
e)}return null},jId=function(a){return $APP.mm(null,function(){return $APP.mm(function(){var b=$APP.m(a)?$APP.Wi(a):a;return $APP.m(b)?b:$APP.Tx?$APP.Tx():$APP.Ux.call(null)}(),function(b){return $APP.mm($APP.m(a)?a:$APP.r.A(b),function(c){return $APP.mm($APP.Uz(),function(d){return $APP.mm(function(){var e=$APP.Cf([$APP.bH($APP.GC),$APP.Fhb,$APP.bH($APP.IC),new $APP.l(null,6,[$APP.Gl,$APP.r.A(b),$APP.Jp,c,$APP.GC,$APP.Fhb,$APP.AF,$APP.Ef,$APP.qRc,1,$APP.lTb,$APP.sg],null)]);e=new $APP.O(null,1,5,
$APP.P,[$APP.bh([$APP.AA,$APP.kD,$APP.bC,$APP.YB,$APP.ZB,$APP.cC,$APP.aC,$APP.$q,$APP.Zq],[b,e,!1,$APP.Xq.H?$APP.Xq.H():$APP.Xq.call(null),$APP.Xq.H?$APP.Xq.H():$APP.Xq.call(null),$APP.Qq,"whiteboard",$APP.Nq.A?$APP.Nq.A(c):$APP.Nq.call(null,c),c])],null);return $APP.AD?$APP.AD(e):$APP.DD.call(null,e)}(),function(){return $APP.gm(function(){$APP.iA(new $APP.O(null,2,5,$APP.P,[d,$APP.kZa],null),function(e){return $APP.We.j($APP.vh(e),$APP.Nq.A?$APP.Nq.A(c):$APP.Nq.call(null,c))});return c}())})})})})})},
kId=function(a){a=$APP.wO.A(a);return $APP.Jm.j($APP.zfb,a)},lId=function(a){var b=$APP.dx.A($APP.RE(a));a=kId(a);a=$APP.og.j(function(d){return $APP.B.j(b,$APP.dx.A($APP.$C.A(d)))},a);var c=$APP.vh($APP.Jm.j($APP.ub,$APP.Th.j(function(d){return $APP.ix.C(d,new $APP.O(null,2,5,$APP.P,[$APP.UC,$APP.dx],null),null)},a)));a=$APP.Jm.j(function(d){d=$APP.dx.A(d);return c.A?c.A(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},mId=function(a,b){return $APP.mm(null,function(){return $APP.mm($APP.Uz(),
function(c){return $APP.mm($APP.hD.H?$APP.hD.H():$APP.hD.call(null),function(d){return $APP.mm($APP.RE(a),function(e){return $APP.mm(function(){var f=lId(a);return $APP.m(f)?f:e}(),function(f){return $APP.mm($APP.$B(new $APP.l(null,6,[$APP.UC,$APP.ph(f,new $APP.O(null,1,5,$APP.P,[$APP.dx],null)),$APP.AA,d,$APP.VA,$APP.m(b)?b:"",$APP.cC,$APP.Qq,$APP.ZC,new $APP.l(null,2,[$APP.$q,$APP.Nq.A?$APP.Nq.A(a):$APP.Nq.call(null,a),$APP.Zq,a],null),$APP.$C,new $APP.l(null,1,[$APP.$q,a],null)],null)),function(g){return $APP.mm(function(){var h=
new $APP.O(null,1,5,$APP.P,[g],null),n=new $APP.l(null,1,[$APP.Xic,!0],null);return $APP.CD?$APP.CD(c,h,n):$APP.DD.call(null,c,h,n)}(),function(){return $APP.gm(d)})})})})})})})},nId=function(){return $APP.mm(null,function(){return $APP.mm(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.mm(a.text(),function(b){return $APP.mm($APP.Tq($APP.Ef,b),function(c){return $APP.gm(c)})})})})},oId=function(a){var b=$APP.L7a();return($APP.td(b)||$APP.B.j(1,$APP.Pc(b))&&$APP.B.j(a,$APP.$q.A($APP.A(b))))&&
$APP.yb($APP.ix.j($APP.u($APP.Rz),new $APP.O(null,1,5,$APP.P,[$APP.TYa],null)))},pId=function(a){var b=$APP.tB();$APP.m(b)&&$APP.Xf.j(b.api.updateShapes,$APP.dj(a))},qId=function(a){var b=$APP.tB();$APP.m(b)&&(b=$APP.Xc($APP.A(b.pages)),$APP.m(b)&&(a=new $APP.O(null,2,5,$APP.P,[$APP.$q,a],null),a=$APP.ED.A?$APP.ED.A(a):$APP.ED.call(null,a),$APP.m(a)&&(a=$APP.aH(a,$APP.IC),a=$APP.eTb.A(a),$APP.x(a)&&b.updateShapesIndex($APP.dj(a)))))},rId=function(a){return null!=a?$APP.pm($APP.mm(null,function(){return $APP.mm(nId(),
function(b){var c=$APP.Ff(b);b=$APP.H.j(c,$APP.dD);c=$APP.H.j(c,$APP.Iv);var d=$APP.A(b);b=$APP.fTb(d,c);d=$APP.aH(d,$APP.IC);c=$APP.lTb.A(d);d=$APP.AF.A(d);a.cloneShapesIntoCurrentPage($APP.cj(new $APP.l(null,3,[$APP.oTb,b,$APP.lTb,c,$APP.AF,d],null)));b=$APP.VYa();return $APP.gm(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},sId=function(a){a.cleanup($APP.Th.j(function(b){return b.id},a.shapes))},vId=function(a,b){b=$APP.fq.F(b,$APP.F([new $APP.l(null,
1,[$APP.hq,!0],null)]));b=$APP.Ff(b);var c=$APP.H.j(b,tId),d=$APP.H.j(b,$APP.WG),e=$APP.H.j(b,uId),f=$APP.Uz();return $APP.mm(null,function(){return $APP.mm($APP.m(d)?$APP.qwb(f,a,new $APP.l(null,1,[$APP.$v,100],null)):null,function(g){return $APP.mm($APP.Th.j(function(h){return $APP.er.C(h,$APP.AA,$APP.r)},g),function(h){return $APP.mm($APP.m(c)?$APP.rwb(a):null,function(n){return $APP.mm($APP.m(e)?$APP.swb(a,100):null,function(p){return $APP.gm($APP.cj(new $APP.l(null,3,[$APP.dD,n,$APP.Iv,h,$APP.lH,
p],null)))})})})})})},wId=function(a){return $APP.lm($APP.$Lb($APP.Uz(),new $APP.O(null,1,5,$APP.P,[$APP.fq.A(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.m(c)?(b=$APP.C.C(c,0,null),$APP.C.C(c,1,null),c=$APP.C.C(c,2,null),$APP.cMb($APP.m(c)?c:b)):null})},xId=function(){return $APP.BPb(null)},yId=function(){return $APP.CPb(null)},PId=function(a){return $APP.bh([zId,AId,BId,CId,DId,EId,FId,GId,$APP.pB,HId,IId,JId,KId,$APP.sY,LId,MId,NId,OId],[function(b){if($APP.m($APP.Vq.A?$APP.Vq.A(b):
$APP.Vq.call(null,b)))var c=$APP.$q.A($APP.l6a($APP.Uz(),$APP.Wi(b)));else c=$APP.$q.A,b=new $APP.O(null,2,5,$APP.P,[$APP.$q,$APP.Nq.A?$APP.Nq.A(b):$APP.Nq.call(null,b)],null),b=$APP.ED.A?$APP.ED.A(b):$APP.ED.call(null,b),c=c.call($APP.$q,b);return c},function(b){return $APP.cj($APP.u7b(b))},function(b){return $APP.SE(b,!1)},function(b){return $APP.dZa($APP.m(b)?$APP.u7b(b):null)},function(b){return jId(b)},$APP.Wv,function(b){return $APP.aLb(b,new $APP.l(null,1,[$APP.CO,!1],null))},$APP.dF,vId,wId,
$APP.bMb,function(b,c){return $APP.MJa(b,$APP.F([$APP.Hv,c]))},function(b){return $APP.mm(null,function(){return $APP.mm(mId(a,b),function(c){return $APP.gm($APP.r.A(c))})})},function(b){return $APP.CH.F($APP.F([$APP.Uh.A(b)]))},function(b,c){return $APP.lB(function(){return(0,$APP.b4b)(b,$APP.Yl.F($APP.F([$APP.fq.F(c,$APP.F([$APP.hq,!0])),new $APP.l(null,1,[$APP.TL,!0],null)])))})},function(b,c){return $APP.UA($APP.Uz(),$APP.dx.A($APP.RE(b)),$APP.Uh.A(c))},function(b){var c=$APP.m($APP.Vq.A?$APP.Vq.A(b):
$APP.Vq.call(null,b))?$APP.$q.A($APP.l6a($APP.Uz(),$APP.Wi(b))):null;c=$APP.m(c)?c:b;var d=$APP.OE(c),e=$APP.dF(c);return $APP.m(d)?$APP.m(e)?$APP.wxb(c,new $APP.l(null,1,[$APP.CL,b],null)):$APP.BL($APP.SE(b,!1)):null},function(b){return $APP.cj($APP.D5a(b))}])},RId=function(a,b,c){return $APP.pm($APP.mm(null,function(){return $APP.mm($APP.u(QId),function(){return $APP.mm($APP.mm(null,function(){return $APP.mm($APP.Wz(new $APP.O(null,2,5,$APP.P,[$APP.W2c,$APP.Uz()],null),$APP.Xq.H?$APP.Xq.H():$APP.Xq.call(null)),
function(){return $APP.gm(iId(a,b,c.replace))})}),function(d){return $APP.gm($APP.bg(QId,d))})})}),function(d){console.error(d);return $APP.qm.A(new $APP.O(null,2,5,$APP.P,[$APP.JK,["Save whiteboard failed, error:",$APP.r.A(d.cause)].join("")],null))})},OId=new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),LId=new $APP.N(null,"exportToImage","exportToImage",-154356643),KId=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),SId=new $APP.N(null,"KeyboardShortcut","KeyboardShortcut",
1250004264),uId=new $APP.N(null,"files?","files?",-1267491104),zId=new $APP.N(null,"getBlockPageName","getBlockPageName",-1656908032),TId=new $APP.N(null,"renderers","renderers",-1460292282),UId=new $APP.N(null,"model","model",331153215),BId=new $APP.N(null,"getRedirectPageName","getRedirectPageName",-1858136925),EId=new $APP.N(null,"isMobile","isMobile",-2043133877),CId=new $APP.N(null,"setCurrentPdf","setCurrentPdf",-63289336),VId=new $APP.N(null,"onMount","onMount",-876858467),FId=new $APP.N(null,
"insertFirstPageBlock","insertFirstPageBlock",-1676658548),IId=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),WId=new $APP.N(null,"onPersist","onPersist",-1848738852),XId=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),JId=new $APP.N(null,"copyToClipboard","copyToClipboard",1092115063),NId=new $APP.N(null,"redirectToPage","redirectToPage",87147838),DId=new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",554297706),HId=new $APP.N(null,"saveAsset","saveAsset",-668047853),YId=new $APP.N(null,
"BacklinksCount","BacklinksCount",364670631),ZId=new $APP.N(null,"Block","Block",-1959785792),MId=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),$Id=new $APP.N(null,"Page","Page",-1267059506),tId=new $APP.N(null,"pages?","pages?",-2065014049),aJd=new $APP.N(null,"PageName","PageName",-164991013),bJd=new $APP.N(null,"Tweet","Tweet",-452258680),GId=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579),cJd=new $APP.N(null,"BlockReference","BlockReference",-120254741),AId=
new $APP.N(null,"inflateAsset","inflateAsset",-1449040639);$APP.kda("tldraw");var dJd=$APP.wm(616);var eJd,fJd,QId,gJd,hJd;$APP.Hyd={};eJd=$APP.fP($APP.sa(dJd,"App"));$APP.Kyd=$APP.sa(dJd,"generateJSXFromModel");
fJd=new $APP.l(null,8,[$Id,$APP.wr($APP.Br,function(a){return(0,$APP.VU)(new $APP.l(null,2,[$APP.wH,$APP.SE($APP.sa(a,"pageName"),!1),$APP.TL,!0],null))},null,"frontend.extensions.tldraw/page-cp"),ZId,$APP.wr($APP.Br,function(a){a=$APP.ui($APP.sa(a,"blockId"));var b=$APP.eYa($APP.$mc);a=b.A?b.A(a):b.call(null,a);return $APP.jr(a)},null,"frontend.extensions.tldraw/block-cp"),XId,$APP.wr($APP.Br,function(a){return $APP.jr($APP.MR(new $APP.l(null,1,[$APP.fW,!0],null),$APP.Uz(),$APP.ui($APP.sa(a,"blockId")),
new $APP.l(null,2,[$APP.dbc,$APP.sa(a,"endSeparator"),$APP.ebc,$APP.sa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),bJd,$APP.wr($APP.Br,function(a){return(0,$APP.X$b)($APP.sa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),aJd,$APP.wr($APP.Br,function(a){return(0,$APP.yR)(new $APP.l(null,1,[$APP.fW,!0],null),new $APP.l(null,1,[$APP.$q,$APP.sa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),YId,function(a){return $APP.Xf.j($APP.Nyd,$APP.Th.j(function(b){return $APP.fq.F($APP.sa(a,
b),$APP.F([new $APP.l(null,1,[$APP.hq,!0],null)]))},new $APP.O(null,3,5,$APP.P,["id","className","options"],null)))},cJd,$APP.wr($APP.Br,function(a){return(0,$APP.i$b)($APP.Ef,$APP.sa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),SId,$APP.wr($APP.Br,function(a){a=$APP.oP($APP.Uh.A($APP.sa(a,"action")));return"string"===typeof a?$APP.jr($APP.nS(a)):$APP.jr($APP.gp.j(" | ",$APP.Th.j($APP.nS,a)))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);QId=$APP.di.A(null);
gJd=$APP.wr($APP.Br,function(a,b,c,d,e){return $APP.X("div",{style:{overscrollBehavior:"none"},onBlur:function(f){f=$APP.sa(f,"target").tagName;var g=new $APP.qh(null,new $APP.l(null,2,["INPUT",null,"TEXTAREA",null],null),null);f=g.A?g.A(f):g.call(null,f);return $APP.m(f)?$APP.XA():null},onWheel:$APP.Bv,className:"draw tldraw whiteboard relative w-full h-full"},[$APP.m($APP.m(c)?$APP.yb(d):c)?$APP.X("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.jr($APP.vP("Loading onboarding whiteboard ..."))]):
null,$APP.jr(function(){var f=new $APP.l(null,6,[TId,fJd,$APP.vSa,PId(a),VId,e,$APP.O0c,!0,WId,function(g,h){return RId(a,g,h)},UId,b],null);return eJd.A?eJd.A(f):eJd.call(null,f)}())])},new $APP.O(null,2,5,$APP.P,[$APP.zr,new $APP.l(null,1,[$APP.Jza,function(a,b){var c=$APP.A($APP.yr.A(a)),d=$APP.C.j($APP.yr.A(a),1),e=$APP.C.j($APP.yr.A(b),1),f=function(){var g=function(){var h=$APP.sa(d,"pages");h=null==h?null:$APP.A(h);return null==h?null:$APP.sa(h,"shapes")}();return $APP.Ah($APP.Th.j(function(h){return $APP.sa(h,
"id")},g),g)}();a=function(){var g=$APP.sa(e,"pages");g=null==g?null:$APP.A(g);return null==g?null:$APP.sa(g,"shapes")}();a=$APP.og.j(function(g){var h=$APP.H.j(f,$APP.sa(g,"id"));return $APP.m(h)?$APP.nh.j($APP.sa(g,"type"),$APP.sa(h,"type")):null},a);$APP.x(a)&&pId(a);qId(c);return b}],null)],null),"frontend.extensions.tldraw/tldraw-inner");
hJd=$APP.wr($APP.Br,function(a,b,c,d){function e(h){if($APP.m(h)){h.appUndo=xId;h.appRedo=yId;var n=$APP.sa(h,"api");return $APP.m(n)?$APP.lm(f?rId(n):null,function(){sId(h.currentPage);$APP.eZa(h,b);return d.A?d.A(h):d.call(null,h)}):null}return null}var f=oId(a),g=$APP.pTb(a);return $APP.m(g)?gJd(a,g,f,c,e):null},new $APP.O(null,1,5,$APP.P,[$APP.B8],null),"frontend.extensions.tldraw/tldraw-app-inner");
$APP.Iyd=$APP.wr($APP.Br,function(a,b){var c=$APP.Ir(null),d=$APP.C.C(c,0,null);c=$APP.C.C(c,1,null);$APP.Jr(function(){$APP.m($APP.m(d)?b:d)&&$APP.eZa(d,b);return function(){return $APP.wc}},new $APP.O(null,2,5,$APP.P,[b,d],null));return hJd(a,b,d,c)},null,"frontend.extensions.tldraw/tldraw-app");$APP.Ta.bj();
}).call(this);