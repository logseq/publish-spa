(function(){
shadow$provide[588]=function(za,da,Ua,J){function r(u,A,B){var y,N={},h=null,g=null;void 0!==B&&(h=""+B);void 0!==A.key&&(h=""+A.key);void 0!==A.ref&&(g=A.ref);for(y in A)n.call(A,y)&&!b.hasOwnProperty(y)&&(N[y]=A[y]);if(u&&u.defaultProps)for(y in A=u.defaultProps,A)void 0===N[y]&&(N[y]=A[y]);return{$$typeof:U,type:u,key:h,ref:g,props:N,_owner:w.current}}da(19);za=da(22);var U=60103;J.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(da=Symbol.for,U=da("react.element"),J.Fragment=da("react.fragment"));
var w=za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};J.jsx=r;J.jsxs=r};
shadow$provide[590]=function(za,da,Ua,J){Ua.exports=da(588)};
shadow$provide[591]=function(za,da,Ua,J){function r(zb){for(var xc="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+zb,Fc=1;Fc<arguments.length;Fc++)xc+="\x26args[]\x3d"+encodeURIComponent(arguments[Fc]);return"Minified React error #"+zb+"; visit "+xc+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function U(zb){if(null==zb)return null;if("function"===typeof zb)return zb.displayName||zb.name||null;if("string"===typeof zb)return zb;
switch(zb){case T:return"Fragment";case Z:return"Portal";case F:return"Profiler";case L:return"StrictMode";case ja:return"Suspense";case R:return"SuspenseList"}if("object"===typeof zb)switch(zb.$$typeof){case S:return(zb.displayName||"Context")+".Consumer";case P:return(zb._context.displayName||"Context")+".Provider";case K:var xc=zb.render;xc=xc.displayName||xc.name||"";return zb.displayName||(""!==xc?"ForwardRef("+xc+")":"ForwardRef");case ba:return U(zb.type);case Q:return U(zb._render);case W:xc=
zb._payload;zb=zb._init;try{return U(zb(xc))}catch(Fc){}}return null}function w(zb,xc){for(var Fc=zb._threadCount|0;Fc<=xc;Fc++)zb[Fc]=zb._currentValue2,zb._threadCount=Fc+1}function n(zb,xc,Fc,wc){if(wc&&(wc=zb.contextType,"object"===typeof wc&&null!==wc))return w(wc,Fc),wc[Fc];if(zb=zb.contextTypes){Fc={};for(var Tc in zb)Fc[Tc]=xc[Tc];xc=Fc}else xc=va;return xc}function b(zb){if(La.call(Za,zb))return!0;if(La.call(Qa,zb))return!1;if(Da.test(zb))return Za[zb]=!0;Qa[zb]=!0;return!1}function u(zb,
xc,Fc,wc){if(null!==Fc&&0===Fc.type)return!1;switch(typeof xc){case "function":case "symbol":return!0;case "boolean":if(wc)return!1;if(null!==Fc)return!Fc.acceptsBooleans;zb=zb.toLowerCase().slice(0,5);return"data-"!==zb&&"aria-"!==zb;default:return!1}}function A(zb,xc,Fc,wc){if(null===xc||"undefined"===typeof xc||u(zb,xc,Fc,wc))return!0;if(wc)return!1;if(null!==Fc)switch(Fc.type){case 3:return!xc;case 4:return!1===xc;case 5:return isNaN(xc);case 6:return isNaN(xc)||1>xc}return!1}function B(zb,xc,
Fc,wc,Tc,od,bd){this.acceptsBooleans=2===xc||3===xc||4===xc;this.attributeName=wc;this.attributeNamespace=Tc;this.mustUseProperty=Fc;this.propertyName=zb;this.type=xc;this.sanitizeURL=od;this.removeEmptyString=bd}function y(zb){return zb[1].toUpperCase()}function N(zb){if("boolean"===typeof zb||"number"===typeof zb)return""+zb;zb=""+zb;var xc=Ka.exec(zb);if(xc){var Fc="",wc,Tc=0;for(wc=xc.index;wc<zb.length;wc++){switch(zb.charCodeAt(wc)){case 34:xc="\x26quot;";break;case 38:xc="\x26amp;";break;case 39:xc=
"\x26#x27;";break;case 60:xc="\x26lt;";break;case 62:xc="\x26gt;";break;default:continue}Tc!==wc&&(Fc+=zb.substring(Tc,wc));Tc=wc+1;Fc+=xc}zb=Tc!==wc?Fc+zb.substring(Tc,wc):Fc}return zb}function h(zb,xc){var Fc=Ra.hasOwnProperty(zb)?Ra[zb]:null,wc;if(wc="style"!==zb)wc=null!==Fc?0===Fc.type:!(2<zb.length)||"o"!==zb[0]&&"O"!==zb[0]||"n"!==zb[1]&&"N"!==zb[1]?!1:!0;if(wc||A(zb,xc,Fc,!1))return"";if(null!==Fc){zb=Fc.attributeName;wc=Fc.type;if(3===wc||4===wc&&!0===xc)return zb+'\x3d""';Fc.sanitizeURL&&
(xc=""+xc);return zb+'\x3d"'+(N(xc)+'"')}return b(zb)?zb+'\x3d"'+(N(xc)+'"'):""}function g(zb,xc){return zb===xc&&(0!==zb||1/zb===1/xc)||zb!==zb&&xc!==xc}function c(){if(null===pa)throw Error(r(321));return pa}function m(){if(0<Ya)throw Error(r(312));return{memoizedState:null,queue:null,next:null}}function p(){null===ka?null===oa?(ua=!1,oa=ka=m()):(ua=!0,ka=oa):null===ka.next?(ua=!1,ka=ka.next=m()):(ua=!0,ka=ka.next);return ka}function v(zb,xc,Fc,wc){for(;Ea;)Ea=!1,Ya+=1,ka=null,Fc=zb(xc,wc);D();
return Fc}function D(){pa=null;Ea=!1;oa=null;Ya=0;ka=Pa=null}function z(zb,xc){return"function"===typeof xc?xc(zb):xc}function t(zb,xc,Fc){pa=c();ka=p();if(ua){var wc=ka.queue;xc=wc.dispatch;if(null!==Pa&&(Fc=Pa.get(wc),void 0!==Fc)){Pa.delete(wc);wc=ka.memoizedState;do wc=zb(wc,Fc.action),Fc=Fc.next;while(null!==Fc);ka.memoizedState=wc;return[wc,xc]}return[ka.memoizedState,xc]}zb=zb===z?"function"===typeof xc?xc():xc:void 0!==Fc?Fc(xc):xc;ka.memoizedState=zb;zb=ka.queue={last:null,dispatch:null};
zb=zb.dispatch=f.bind(null,pa,zb);return[ka.memoizedState,zb]}function q(zb,xc){pa=c();ka=p();xc=void 0===xc?null:xc;if(null!==ka){var Fc=ka.memoizedState;if(null!==Fc&&null!==xc){var wc=Fc[1];a:if(null===wc)wc=!1;else{for(var Tc=0;Tc<wc.length&&Tc<xc.length;Tc++)if(!ra(xc[Tc],wc[Tc])){wc=!1;break a}wc=!0}if(wc)return Fc[0]}}zb=zb();ka.memoizedState=[zb,xc];return zb}function f(zb,xc,Fc){if(!(25>Ya))throw Error(r(301));if(zb===pa)if(Ea=!0,zb={action:Fc,next:null},null===Pa&&(Pa=new Map),Fc=Pa.get(xc),
void 0===Fc)Pa.set(xc,zb);else{for(xc=Fc;null!==xc.next;)xc=xc.next;xc.next=zb}}function G(){}function C(zb){switch(zb){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function E(zb){if(void 0===zb||null===zb)return zb;var xc="";M.Children.forEach(zb,function(Fc){null!=Fc&&(xc+=Fc)});return xc}function Y(zb,xc){if(void 0===zb)throw Error(r(152,U(xc)||"Component"));}function O(zb,xc,Fc){function wc(bd,
ud){var Eb=ud.prototype&&ud.prototype.isReactComponent,Zb=n(ud,xc,Fc,Eb),Vb=[],jb=!1,sb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Vb)return null},enqueueReplaceState:function(de,Ye){jb=!0;Vb=[Ye]},enqueueSetState:function(de,Ye){if(null===Vb)return null;Vb.push(Ye)}};if(Eb){if(Eb=new ud(bd.props,Zb,sb),"function"===typeof ud.getDerivedStateFromProps){var $b=ud.getDerivedStateFromProps.call(null,bd.props,Eb.state);null!=$b&&(Eb.state=X({},Eb.state,$b))}}else if(pa={},
Eb=ud(bd.props,Zb,sb),Eb=v(ud,bd.props,Eb,Zb),null==Eb||null==Eb.render){zb=Eb;Y(zb,ud);return}Eb.props=bd.props;Eb.context=Zb;Eb.updater=sb;sb=Eb.state;void 0===sb&&(Eb.state=sb=null);if("function"===typeof Eb.UNSAFE_componentWillMount||"function"===typeof Eb.componentWillMount)if("function"===typeof Eb.componentWillMount&&"function"!==typeof ud.getDerivedStateFromProps&&Eb.componentWillMount(),"function"===typeof Eb.UNSAFE_componentWillMount&&"function"!==typeof ud.getDerivedStateFromProps&&Eb.UNSAFE_componentWillMount(),
Vb.length){sb=Vb;var Gc=jb;Vb=null;jb=!1;if(Gc&&1===sb.length)Eb.state=sb[0];else{$b=Gc?sb[0]:Eb.state;var id=!0;for(Gc=Gc?1:0;Gc<sb.length;Gc++){var ed=sb[Gc];ed="function"===typeof ed?ed.call(Eb,$b,bd.props,Zb):ed;null!=ed&&(id?(id=!1,$b=X({},$b,ed)):X($b,ed))}Eb.state=$b}}else Vb=null;zb=Eb.render();Y(zb,ud);if("function"===typeof Eb.getChildContext&&(bd=ud.childContextTypes,"object"===typeof bd)){var zd=Eb.getChildContext(),ge;for(ge in zd)if(!(ge in bd))throw Error(r(108,U(ud)||"Unknown",ge));
}zd&&(xc=X({},xc,zd))}for(;M.isValidElement(zb);){var Tc=zb,od=Tc.type;if("function"!==typeof od)break;wc(Tc,od)}return{child:zb,context:xc}}var X=da(19),M=da(22),Z=60106,T=60107,L=60108,F=60114,P=60109,S=60110,K=60112,ja=60113,R=60120,ba=60115,W=60116,Q=60121,aa=60117,V=60119,qa=60129,wa=60131;"function"===typeof Symbol&&Symbol.for&&(za=Symbol.for,Z=za("react.portal"),T=za("react.fragment"),L=za("react.strict_mode"),F=za("react.profiler"),P=za("react.provider"),S=za("react.context"),K=za("react.forward_ref"),
ja=za("react.suspense"),R=za("react.suspense_list"),ba=za("react.memo"),W=za("react.lazy"),Q=za("react.block"),aa=za("react.fundamental"),V=za("react.scope"),qa=za("react.debug_trace_mode"),wa=za("react.legacy_hidden"));za=M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var va={},Ja=new Uint16Array(16);for(da=0;15>da;da++)Ja[da]=da+1;Ja[15]=0;var Da=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
La=Object.prototype.hasOwnProperty,Qa={},Za={},Ra={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(zb){Ra[zb]=new B(zb,0,!1,zb,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(zb){var xc=zb[0];Ra[xc]=new B(xc,1,!1,zb[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(zb){Ra[zb]=
new B(zb,2,!1,zb.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(zb){Ra[zb]=new B(zb,2,!1,zb,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(zb){Ra[zb]=new B(zb,3,!1,zb.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(zb){Ra[zb]=new B(zb,3,!0,zb,null,!1,!1)});["capture","download"].forEach(function(zb){Ra[zb]=new B(zb,4,!1,zb,null,!1,!1)});["cols","rows","size","span"].forEach(function(zb){Ra[zb]=new B(zb,6,!1,zb,null,!1,!1)});["rowSpan","start"].forEach(function(zb){Ra[zb]=new B(zb,5,!1,zb.toLowerCase(),null,!1,!1)});var Wa=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(zb){var xc=
zb.replace(Wa,y);Ra[xc]=new B(xc,1,!1,zb,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(zb){var xc=zb.replace(Wa,y);Ra[xc]=new B(xc,1,!1,zb,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(zb){var xc=zb.replace(Wa,y);Ra[xc]=new B(xc,1,!1,zb,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(zb){Ra[zb]=new B(zb,1,!1,zb.toLowerCase(),null,!1,!1)});
Ra.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(zb){Ra[zb]=new B(zb,1,!1,zb.toLowerCase(),null,!0,!0)});var Ka=/["'&<>]/,ra="function"===typeof Object.is?Object.is:g,pa=null,oa=null,ka=null,ua=!1,Ea=!1,Pa=null,Ya=0,Oa=null,gb={readContext:function(zb){var xc=Oa.threadID;w(zb,xc);return zb[xc]},useContext:function(zb){c();var xc=Oa.threadID;w(zb,xc);return zb[xc]},useMemo:q,useReducer:t,useRef:function(zb){pa=
c();ka=p();var xc=ka.memoizedState;return null===xc?(zb={current:zb},ka.memoizedState=zb):xc},useState:function(zb){return t(z,zb)},useLayoutEffect:function(){},useCallback:function(zb,xc){return q(function(){return zb},xc)},useImperativeHandle:G,useEffect:G,useDebugValue:G,useDeferredValue:function(zb){c();return zb},useTransition:function(){c();return[function(zb){zb()},!1]},useOpaqueIdentifier:function(){return(Oa.identifierPrefix||"")+"R:"+(Oa.uniqueID++).toString(36)},useMutableSource:function(zb,
xc){c();return xc(zb._source)}},yb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Kb=X({menuitem:!0},yb),Ab={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ob=["Webkit","ms","Moz","O"];Object.keys(Ab).forEach(function(zb){ob.forEach(function(xc){xc=xc+zb.charAt(0).toUpperCase()+zb.substring(1);Ab[xc]=Ab[zb]})});var Ia=/([A-Z])/g,bb=/^ms-/,hb=M.Children.toArray,
Qb=za.ReactCurrentDispatcher,tb={listing:!0,pre:!0,textarea:!0},Wb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,bc={},yc={},mc=Object.prototype.hasOwnProperty,Cb={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},lc=function(){function zb(Fc,wc,Tc){M.isValidElement(Fc)?Fc.type!==T?Fc=[Fc]:(Fc=Fc.props.children,Fc=M.isValidElement(Fc)?[Fc]:hb(Fc)):Fc=hb(Fc);Fc={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:Fc,childIndex:0,context:va,footer:""};
var od=Ja[0];if(0===od){var bd=Ja;od=bd.length;var ud=2*od;if(!(65536>=ud))throw Error(r(304));var Eb=new Uint16Array(ud);Eb.set(bd);Ja=Eb;Ja[0]=od+1;for(bd=od;bd<ud-1;bd++)Ja[bd]=bd+1;Ja[ud-1]=0}else Ja[0]=Ja[od];this.threadID=od;this.stack=[Fc];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=wc;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=Tc&&Tc.identifierPrefix||""}
var xc=zb.prototype;xc.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var Fc=this.threadID;Ja[Fc]=Ja[0];Ja[0]=Fc}};xc.pushProvider=function(Fc){var wc=++this.contextIndex,Tc=Fc.type._context,od=this.threadID;w(Tc,od);var bd=Tc[od];this.contextStack[wc]=Tc;this.contextValueStack[wc]=bd;Tc[od]=Fc.props.value};xc.popProvider=function(){var Fc=this.contextIndex,wc=this.contextStack[Fc],Tc=this.contextValueStack[Fc];this.contextStack[Fc]=null;this.contextValueStack[Fc]=
null;this.contextIndex--;wc[this.threadID]=Tc};xc.clearProviders=function(){for(var Fc=this.contextIndex;0<=Fc;Fc--)this.contextStack[Fc][this.threadID]=this.contextValueStack[Fc]};xc.read=function(Fc){if(this.exhausted)return null;var wc=Oa;Oa=this;var Tc=Qb.current;Qb.current=gb;try{for(var od=[""],bd=!1;od[0].length<Fc;){if(0===this.stack.length){this.exhausted=!0;var ud=this.threadID;Ja[ud]=Ja[0];Ja[0]=ud;break}var Eb=this.stack[this.stack.length-1];if(bd||Eb.childIndex>=Eb.children.length){var Zb=
Eb.footer;""!==Zb&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Eb.type)this.currentSelectValue=null;else if(null!=Eb.type&&null!=Eb.type.type&&Eb.type.type.$$typeof===P)this.popProvider(Eb.type);else if(Eb.type===ja){this.suspenseDepth--;var Vb=od.pop();if(bd){bd=!1;var jb=Eb.fallbackFrame;if(!jb)throw Error(r(303));this.stack.push(jb);od[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else od[this.suspenseDepth]+=Vb}od[this.suspenseDepth]+=Zb}else{var sb=Eb.children[Eb.childIndex++],
$b="";try{$b+=this.render(sb,Eb.context,Eb.domNamespace)}catch(Gc){if(null!=Gc&&"function"===typeof Gc.then)throw Error(r(294));throw Gc;}finally{}od.length<=this.suspenseDepth&&od.push("");od[this.suspenseDepth]+=$b}}return od[0]}finally{Qb.current=Tc,Oa=wc,D()}};xc.render=function(Fc,wc,Tc){if("string"===typeof Fc||"number"===typeof Fc){Tc=""+Fc;if(""===Tc)return"";if(this.makeStaticMarkup)return N(Tc);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+N(Tc);this.previousWasTextNode=!0;return N(Tc)}wc=
O(Fc,wc,this.threadID);Fc=wc.child;wc=wc.context;if(null===Fc||!1===Fc)return"";if(!M.isValidElement(Fc)){if(null!=Fc&&null!=Fc.$$typeof){Tc=Fc.$$typeof;if(Tc===Z)throw Error(r(257));throw Error(r(258,Tc.toString()));}Fc=hb(Fc);this.stack.push({type:null,domNamespace:Tc,children:Fc,childIndex:0,context:wc,footer:""});return""}var od=Fc.type;if("string"===typeof od)return this.renderDOM(Fc,wc,Tc);switch(od){case wa:case qa:case L:case F:case R:case T:return Fc=hb(Fc.props.children),this.stack.push({type:null,
domNamespace:Tc,children:Fc,childIndex:0,context:wc,footer:""}),"";case ja:throw Error(r(294));case V:throw Error(r(343));}if("object"===typeof od&&null!==od)switch(od.$$typeof){case K:pa={};var bd=od.render(Fc.props,Fc.ref);bd=v(od.render,Fc.props,bd,Fc.ref);bd=hb(bd);this.stack.push({type:null,domNamespace:Tc,children:bd,childIndex:0,context:wc,footer:""});return"";case ba:return Fc=[M.createElement(od.type,X({ref:Fc.ref},Fc.props))],this.stack.push({type:null,domNamespace:Tc,children:Fc,childIndex:0,
context:wc,footer:""}),"";case P:return od=hb(Fc.props.children),Tc={type:Fc,domNamespace:Tc,children:od,childIndex:0,context:wc,footer:""},this.pushProvider(Fc),this.stack.push(Tc),"";case S:od=Fc.type;bd=Fc.props;var ud=this.threadID;w(od,ud);od=hb(bd.children(od[ud]));this.stack.push({type:Fc,domNamespace:Tc,children:od,childIndex:0,context:wc,footer:""});return"";case aa:throw Error(r(338));case W:return od=Fc.type,bd=od._init,od=bd(od._payload),Fc=[M.createElement(od,X({ref:Fc.ref},Fc.props))],
this.stack.push({type:null,domNamespace:Tc,children:Fc,childIndex:0,context:wc,footer:""}),""}throw Error(r(130,null==od?od:typeof od,""));};xc.renderDOM=function(Fc,wc,Tc){var od=Fc.type.toLowerCase();"http://www.w3.org/1999/xhtml"===Tc&&C(od);if(!bc.hasOwnProperty(od)){if(!Wb.test(od))throw Error(r(65,od));bc[od]=!0}var bd=Fc.props;if("input"===od)bd=X({type:void 0},bd,{defaultChecked:void 0,defaultValue:void 0,value:null!=bd.value?bd.value:bd.defaultValue,checked:null!=bd.checked?bd.checked:bd.defaultChecked});
else if("textarea"===od){var ud=bd.value;if(null==ud){ud=bd.defaultValue;var Eb=bd.children;if(null!=Eb){if(null!=ud)throw Error(r(92));if(Array.isArray(Eb)){if(!(1>=Eb.length))throw Error(r(93));Eb=Eb[0]}ud=""+Eb}null==ud&&(ud="")}bd=X({},bd,{value:void 0,children:""+ud})}else if("select"===od)this.currentSelectValue=null!=bd.value?bd.value:bd.defaultValue,bd=X({},bd,{value:void 0});else if("option"===od){Eb=this.currentSelectValue;var Zb=E(bd.children);if(null!=Eb){var Vb=null!=bd.value?bd.value+
"":Zb;ud=!1;if(Array.isArray(Eb))for(var jb=0;jb<Eb.length;jb++){if(""+Eb[jb]===Vb){ud=!0;break}}else ud=""+Eb===Vb;bd=X({selected:void 0,children:void 0},bd,{selected:ud,children:Zb})}}if(ud=bd){if(Kb[od]&&(null!=ud.children||null!=ud.dangerouslySetInnerHTML))throw Error(r(137,od));if(null!=ud.dangerouslySetInnerHTML){if(null!=ud.children)throw Error(r(60));if(!("object"===typeof ud.dangerouslySetInnerHTML&&"__html"in ud.dangerouslySetInnerHTML))throw Error(r(61));}if(null!=ud.style&&"object"!==
typeof ud.style)throw Error(r(62));}ud=bd;Eb=this.makeStaticMarkup;Zb=1===this.stack.length;Vb="\x3c"+Fc.type;a:if(-1===od.indexOf("-"))jb="string"===typeof ud.is;else switch(od){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":jb=!1;break a;default:jb=!0}for(Ye in ud)if(mc.call(ud,Ye)){var sb=ud[Ye];if(null!=sb){if("style"===Ye){var $b=void 0,Gc="",id="";for($b in sb)if(sb.hasOwnProperty($b)){var ed=
0===$b.indexOf("--"),zd=sb[$b];if(null!=zd){if(ed)var ge=$b;else if(ge=$b,yc.hasOwnProperty(ge))ge=yc[ge];else{var de=ge.replace(Ia,"-$1").toLowerCase().replace(bb,"-ms-");ge=yc[ge]=de}Gc+=id+ge+":";id=$b;ed=null==zd||"boolean"===typeof zd||""===zd?"":ed||"number"!==typeof zd||0===zd||Ab.hasOwnProperty(id)&&Ab[id]?(""+zd).trim():zd+"px";Gc+=ed;id=";"}}sb=Gc||null}$b=null;jb?Cb.hasOwnProperty(Ye)||($b=Ye,$b=b($b)&&null!=sb?$b+'\x3d"'+(N(sb)+'"'):""):$b=h(Ye,sb);$b&&(Vb+=" "+$b)}}Eb||Zb&&(Vb+=' data-reactroot\x3d""');
var Ye=Vb;ud="";yb.hasOwnProperty(od)?Ye+="/\x3e":(Ye+="\x3e",ud="\x3c/"+Fc.type+"\x3e");a:{Eb=bd.dangerouslySetInnerHTML;if(null!=Eb){if(null!=Eb.__html){Eb=Eb.__html;break a}}else if(Eb=bd.children,"string"===typeof Eb||"number"===typeof Eb){Eb=N(Eb);break a}Eb=null}null!=Eb?(bd=[],tb.hasOwnProperty(od)&&"\n"===Eb.charAt(0)&&(Ye+="\n"),Ye+=Eb):bd=hb(bd.children);Fc=Fc.type;Tc=null==Tc||"http://www.w3.org/1999/xhtml"===Tc?C(Fc):"http://www.w3.org/2000/svg"===Tc&&"foreignObject"===Fc?"http://www.w3.org/1999/xhtml":
Tc;this.stack.push({domNamespace:Tc,type:od,children:bd,childIndex:0,context:wc,footer:ud});this.previousWasTextNode=!1;return Ye};return zb}();J.renderToNodeStream=function(){throw Error(r(207));};J.renderToStaticMarkup=function(zb,xc){zb=new lc(zb,!0,xc);try{return zb.read(Infinity)}finally{zb.destroy()}};J.renderToStaticNodeStream=function(){throw Error(r(208));};J.renderToString=function(zb,xc){zb=new lc(zb,!1,xc);try{return zb.read(Infinity)}finally{zb.destroy()}};J.version="17.0.2"};
shadow$provide[593]=function(za,da,Ua,J){Ua.exports=da(591)};
shadow$provide[594]=function(za,da,Ua,J){function r(){if(!nr&&(nr="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nr))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nr(yu)}function U(a,d=0){return(ql[a[d+0]]+ql[a[d+1]]+ql[a[d+2]]+ql[a[d+3]]+"-"+ql[a[d+4]]+ql[a[d+5]]+"-"+ql[a[d+6]]+ql[a[d+7]]+"-"+ql[a[d+8]]+ql[a[d+9]]+"-"+ql[a[d+10]]+ql[a[d+11]]+ql[a[d+12]]+ql[a[d+13]]+ql[a[d+14]]+
ql[a[d+15]]).toLowerCase()}function w(a){let d=0;var k=0;for(var H of a)d+=H.w*H.h,k=Math.max(k,H.w);a.sort((sa,Ha)=>Ha.h-sa.h);k=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),k),h:Infinity}];let fa=H=0;for(const sa of a)for(a=k.length-1;0<=a;a--){var la=k[a];if(!(sa.w>la.w||sa.h>la.h)){sa.x=la.x;sa.y=la.y;fa=Math.max(fa,sa.y+sa.h);H=Math.max(H,sa.x+sa.w);sa.w===la.w&&sa.h===la.h?(la=k.pop(),a<k.length&&(k[a]=la)):sa.h===la.h?(la.x+=sa.w,la.w-=sa.w):(sa.w!==la.w&&k.push({x:la.x+sa.w,y:la.y,w:la.w-
sa.w,h:sa.h}),la.y+=sa.h,la.h-=sa.h);break}}return{w:H,h:fa,fill:d/(H*fa)||0}}function n(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function b(a,d,k=0){const H=[a[0]+d[0]/2,a[1]+d[1]/2],fa=xd.rotWith(a,H,k),la=xd.rotWith(xd.add(a,[d[0],0]),H,k),sa=xd.rotWith(xd.add(a,d),H,k);a=xd.rotWith(xd.add(a,[0,d[1]]),H,k);return[["top",[fa,la]],["right",[la,sa]],["bottom",[sa,a]],["left",[a,fa]]]}function u(a,d,k,H){const [fa,la]=a,[sa,Ha]=d,[Ta,Xa]=k,[eb,ib]=H;return Ha/sa!==(ib-Xa)/(eb-Ta)&&
(d=sa*(ib-Xa)-Ha*(eb-Ta),0!==d&&(a=((la-Xa)*(eb-Ta)-(fa-Ta)*(ib-Xa))/d,d=((la-Xa)*sa-(fa-Ta)*Ha)/d,0<=a&&0<=d&&1>=d))?n("intersection",[fa+a*sa,la+a*Ha]):n("no intersection")}function A(a,d,k,H,fa=0){return c(k,H,fa,a,d)}function B(a,d,k,H=0){const {minX:fa,minY:la,width:sa,height:Ha}=k;return A(a,d,[fa,la],[sa,Ha],H)}function y(a,d,k,H){var fa=xd.sub(a,k);k=xd.sub(H,k);d=xd.sub(d,a);H=k[0]*fa[1]-k[1]*fa[0];fa=d[0]*fa[1]-d[1]*fa[0];k=k[1]*d[0]-k[0]*d[1];return 0===H||0===fa?n("coincident"):0===k?
n("parallel"):0!==k&&(H/=k,fa/=k,0<=H&&1>=H&&0<=fa&&1>=fa)?n("intersection",xd.add(a,xd.mul(d,H))):n("no intersection")}function N(a,d,k,H){var fa=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),la=2*((d[0]-a[0])*(a[0]-k[0])+(d[1]-a[1])*(a[1]-k[1]));k=la*la-4*fa*(k[0]*k[0]+k[1]*k[1]+a[0]*a[0]+a[1]*a[1]-2*(k[0]*a[0]+k[1]*a[1])-H*H);if(0>k)return n("outside");if(0===k)return n("tangent");H=Math.sqrt(k);k=(-la+H)/(2*fa);fa=(-la-H)/(2*fa);if((0>k||1<k)&&(0>fa||1<fa))return 0>k&&0>fa||1<k&&1<fa?n("outside"):
n("inside");la=[];0<=k&&1>=k&&la.push(xd.lrp(a,d,k));0<=fa&&1>=fa&&la.push(xd.lrp(a,d,fa));return n("intersection",...la)}function h(a,d,k,H,fa,la=0){if(0===H||0===fa||xd.isEqual(a,d))return n("no intersection");H=0>H?H:-H;fa=0>fa?fa:-fa;a=xd.sub(xd.rotWith(a,k,-la),k);d=xd.sub(xd.rotWith(d,k,-la),k);var sa=xd.sub(d,a),Ha=sa[0]*sa[0]/H/H+sa[1]*sa[1]/fa/fa;sa=2*a[0]*sa[0]/H/H+2*a[1]*sa[1]/fa/fa;const Ta=[];H=sa*sa-4*Ha*(a[0]*a[0]/H/H+a[1]*a[1]/fa/fa-1);0===H?Ta.push(-sa/2/Ha):0<H&&(H=Math.sqrt(H),
Ta.push((-sa+H)/2/Ha),Ta.push((-sa-H)/2/Ha));Ha=Ta.filter(Xa=>0<=Xa&&1>=Xa).map(Xa=>xd.add(k,xd.add(a,xd.mul(xd.sub(d,a),Xa)))).map(Xa=>xd.rotWith(Xa,k,la));return n("intersection",...Ha)}function g(a,d,k){const H=[];for(let fa=1;fa<k.length;fa++){const la=y(a,d,k[fa-1],k[fa]);la&&H.push(...la.points)}return 0===H.length?n("no intersection"):n("intersection",...k)}function c(a,d,k,H,fa){return b(a,d,k).reduce((la,[sa,[Ha,Ta]])=>{(Ha=u(H,fa,Ha,Ta))&&la.push(n(sa,...Ha.points));return la},[]).filter(la=>
la.didIntersect)}function m(a,d,k,H){return b(a,d).reduce((fa,[la,[sa,Ha]])=>{(sa=y(k,H,sa,Ha))&&fa.push(n(la,...sa.points));return fa},[]).filter(fa=>fa.didIntersect)}function p(a,d,k,H){return b(a,d).reduce((fa,[la,[sa,Ha]])=>{(sa=N(sa,Ha,k,H))&&fa.push(lf(he({},sa),{message:la}));return fa},[]).filter(fa=>fa.didIntersect)}function v(a,d,k,H,fa,la=0){return b(a,d).reduce((sa,[Ha,[Ta,Xa]])=>{(Ta=h(Ta,Xa,k,H,fa,la))&&sa.push(lf(he({},Ta),{message:Ha}));return sa},[]).filter(sa=>sa.didIntersect)}function D(a,
d,k){return b(a,d).reduce((H,[fa,[la,sa]])=>{la=g(la,sa,k);la.didIntersect&&H.push(n(fa,...la.points));return H},[]).filter(H=>H.didIntersect)}function z(a,d,k){return b(a,d).reduce((H,[fa,[la,sa]])=>{{const Ha=[];for(let Ta=1;Ta<k.length+1;Ta++){const Xa=y(la,sa,k[Ta-1],k[Ta%k.length]);Xa&&Ha.push(...Xa.points)}la=0===Ha.length?n("no intersection"):n("intersection",...k)}la.didIntersect&&H.push(n(fa,...la.points));return H},[]).filter(H=>H.didIntersect)}function t(a,d,k,H=0,fa,la){return d===k?p(fa,
la,a,d):v(fa,la,a,d,k,H)}function q(a,d,k){const {minX:H,minY:fa,width:la,height:sa}=a;return m([H,fa],[la,sa],d,k)}function f(a){for(var d=arguments.length,k=Array(1<d?d-1:0),H=1;H<d;H++)k[H-1]=arguments[H];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(k.length?" "+k.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function G(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?
window:"undefined"!==typeof za?za:"undefined"!==typeof self?self:px}function C(){Fa||f("Proxy not available")}function E(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function Y(a){return"function"===typeof a}function O(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function X(a){return null!==a&&"object"===typeof a}function M(a){if(!X(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&
a.constructor;return"function"===typeof a&&a.toString()===db}function Z(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function T(a,d,k){xp(a,d,{enumerable:!1,writable:!0,configurable:!0,value:k})}function L(a,d,k){xp(a,d,{enumerable:!1,writable:!1,configurable:!0,value:k})}function F(a,d){var k="isMobX"+a;d.prototype[k]=!0;return function(H){return X(H)&&!0===H[k]}}function P(a){return a instanceof Map}function S(a){return a instanceof
Set}function K(a){var d=Object.keys(a);if(!ic)return d;var k=Object.getOwnPropertySymbols(a);return k.length?[].concat(d,k.filter(function(H){return bq.propertyIsEnumerable.call(a,H)})):d}function ja(a){return null===a?null:"object"===typeof a?""+a:a}function R(a,d){return bq.hasOwnProperty.call(a,d)}function ba(a,d){for(var k=0;k<d.length;k++){var H=d[k];H.enumerable=H.enumerable||!1;H.configurable=!0;"value"in H&&(H.writable=!0);Object.defineProperty(a,H.key,H)}}function W(a,d,k){d&&ba(a.prototype,
d);k&&ba(a,k);Object.defineProperty(a,"prototype",{writable:!1});return a}function Q(){Q=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],H;for(H in k)Object.prototype.hasOwnProperty.call(k,H)&&(a[H]=k[H])}return a};return Q.apply(this,arguments)}function aa(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;V(a,d)}function V(a,d){V=Object.setPrototypeOf||function(k,H){k.__proto__=H;return k};return V(a,d)}function qa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function wa(a,d){if(a){if("string"===typeof a)return va(a,d);var k=Object.prototype.toString.call(a).slice(8,-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return va(a,d)}}function va(a,d){if(null==d||d>a.length)d=a.length;for(var k=0,H=Array(d);k<d;k++)H[k]=a[k];return H}function Ja(a,d){var k="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=
k.call(a)).next.bind(k);if(Array.isArray(a)||(k=wa(a))||d&&a&&"number"===typeof a.length){k&&(a=k);var H=0;return function(){return H>=a.length?{done:!0}:{done:!1,value:a[H++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Da(a){return Object.assign(function(d,k){La(d,k,a)},a)}function La(a,d,k){R(a,Fd)||T(a,Fd,Q({},a[Fd]));k.annotationType_!==bh&&(a[Fd][d]=k)}function Qa(a){R(a,
Fd)||T(a,Fd,Q({},a[Fd]));return a[Fd]}function Za(a,d,k){void 0===d&&(d=vb);void 0===k&&(k=vb);a=new Ag(a);d!==vb&&kd(fE,a,d,void 0);k!==vb&&Yd(a,k);return a}function Ra(a,d,k){return md(a)?a:Array.isArray(a)?Te.array(a,{name:k}):M(a)?Te.object(a,void 0,{name:k}):P(a)?Te.map(a,{name:k}):S(a)?Te.set(a,{name:k}):"function"!==typeof a||ed(a)||Qc(a)?a:Z(a)?Hu(a):Gu(k,a)}function Wa(a){return a}function Ka(a,d){return{annotationType_:a,options_:d,make_:ra,extend_:pa}}function ra(a,d,k,H){var fa;if(null!=
(fa=this.options_)&&fa.bound)return null===this.extend_(a,d,k,!1)?0:1;if(H===a.target_)return null===this.extend_(a,d,k,!1)?0:2;if(ed(k.value))return 1;a=oa(a,this,d,k,!1);xp(H,d,a);return 2}function pa(a,d,k,H){k=oa(a,this,d,k);return a.defineProperty_(d,k,H)}function oa(a,d,k,H,fa){var la,sa,Ha,Ta,Xa,eb,ib;void 0===fa&&(fa=Tf.safeDescriptors);H=H.value;if(null!=(la=d.options_)&&la.bound){var Db;H=H.bind(null!=(Db=a.proxy_)?Db:a.target_)}return{value:tb(null!=(sa=null==(Ha=d.options_)?void 0:Ha.name)?
sa:k.toString(),H,null!=(Ta=null==(Xa=d.options_)?void 0:Xa.autoAction)?Ta:!1,null!=(eb=d.options_)&&eb.bound?null!=(ib=a.proxy_)?ib:a.target_:void 0),configurable:fa?a.isPlainObject_:!0,enumerable:!1,writable:fa?!1:!0}}function ka(a,d){return{annotationType_:a,options_:d,make_:ua,extend_:Ea}}function ua(a,d,k,H){var fa;if(H===a.target_)return null===this.extend_(a,d,k,!1)?0:2;if(null!=(fa=this.options_)&&fa.bound&&(!R(a.target_,d)||!Qc(a.target_[d]))&&null===this.extend_(a,d,k,!1))return 0;if(Qc(k.value))return 1;
a=Pa(a,this,d,k,!1,!1);xp(H,d,a);return 2}function Ea(a,d,k,H){var fa;k=Pa(a,this,d,k,null==(fa=this.options_)?void 0:fa.bound);return a.defineProperty_(d,k,H)}function Pa(a,d,k,H,fa,la){void 0===la&&(la=Tf.safeDescriptors);d=H.value;Qc(d)||(d=Hu(d));if(fa){var sa;d=d.bind(null!=(sa=a.proxy_)?sa:a.target_);d.isMobXFlow=!0}return{value:d,configurable:la?a.isPlainObject_:!0,enumerable:!1,writable:la?!1:!0}}function Ya(a,d){return{annotationType_:a,options_:d,make_:Oa,extend_:gb}}function Oa(a,d,k){return null===
this.extend_(a,d,k,!1)?0:1}function gb(a,d,k,H){return a.defineComputedProperty_(d,Q({},this.options_,{get:k.get,set:k.set}),H)}function yb(a,d){return{annotationType_:a,options_:d,make_:Kb,extend_:Ab}}function Kb(a,d,k){return null===this.extend_(a,d,k,!1)?0:1}function Ab(a,d,k,H){var fa,la;return a.defineObservableProperty_(d,k.value,null!=(fa=null==(la=this.options_)?void 0:la.enhancer)?fa:Ra,H)}function ob(a){return{annotationType_:"true",options_:a,make_:Ia,extend_:bb}}function Ia(a,d,k,H){var fa,
la;if(k.get)return Jf.make_(a,d,k,H);if(k.set){k=tb(d.toString(),k.set);if(H===a.target_)return null===a.defineProperty_(d,{configurable:Tf.safeDescriptors?a.isPlainObject_:!0,set:k})?0:2;xp(H,d,{configurable:!0,set:k});return 2}if(H!==a.target_&&"function"===typeof k.value){var sa;if(Z(k.value)){var Ha;return(null!=(Ha=this.options_)&&Ha.autoBind?Hu.bound:Hu).make_(a,d,k,H)}return(null!=(sa=this.options_)&&sa.autoBind?Gu.bound:Gu).make_(a,d,k,H)}sa=!1===(null==(fa=this.options_)?void 0:fa.deep)?
Te.ref:Te;if("function"===typeof k.value&&null!=(la=this.options_)&&la.autoBind){var Ta;k.value=k.value.bind(null!=(Ta=a.proxy_)?Ta:a.target_)}return sa.make_(a,d,k,H)}function bb(a,d,k,H){var fa,la;if(k.get)return Jf.extend_(a,d,k,H);if(k.set)return a.defineProperty_(d,{configurable:Tf.safeDescriptors?a.isPlainObject_:!0,set:tb(d.toString(),k.set)},H);if("function"===typeof k.value&&null!=(fa=this.options_)&&fa.autoBind){var sa;k.value=k.value.bind(null!=(sa=a.proxy_)?sa:a.target_)}return(!1===(null==
(la=this.options_)?void 0:la.deep)?Te.ref:Te).extend_(a,d,k,H)}function hb(a){if(!0===a.deep)var d=Ra;else{if(!1===a.deep)a=Wa;else{a=a.defaultDecorator;var k;a=a?null!=(d=null==(k=a.options_)?void 0:k.enhancer)?d:Ra:Ra}d=a}return d}function Qb(a,d,k){if(O(d))La(a,d,oe);else return md(a)?a:M(a)?Te.object(a,d,k):Array.isArray(a)?Te.array(a,d):P(a)?Te.map(a,d):S(a)?Te.set(a,d):"object"===typeof a&&null!==a?a:Te.box(a,d)}function tb(a,d,k,H){function fa(){a:{var la=H||this,sa=arguments,Ha=Tf.trackingDerivation,
Ta=!k||!Ha;bd();var Xa=Tf.allowStateChanges;Ta&&(zb(),Xa=bc(!0));var eb=xc(!0),ib=XD++,Db=Qv;Qv=ib;try{var Ob=d.apply(la,sa);break a}catch(cc){var Hb=cc;throw cc;}finally{Qv!==ib&&f(30),Qv=Db,void 0!==Hb&&(Tf.suppressReactionErrors=!0),Tf.allowStateChanges=Xa,Tf.allowStateReads=eb,ud(),Ta&&(Tf.trackingDerivation=Ha),Tf.suppressReactionErrors=!1}Ob=void 0}return Ob}void 0===k&&(k=!1);fa.isMobxAction=!0;YD&&(Az.value=a,Object.defineProperty(fa,"name",Az));return fa}function Wb(a,d){a=bc(a);try{return d()}finally{Tf.allowStateChanges=
a}}function bc(a){var d=Tf.allowStateChanges;Tf.allowStateChanges=a;return d}function yc(a){switch(a.dependenciesState_){case Fj.UP_TO_DATE_:return!1;case Fj.NOT_TRACKING_:case Fj.STALE_:return!0;case Fj.POSSIBLY_STALE_:for(var d=xc(!0),k=zb(),H=a.observing_,fa=H.length,la=0;la<fa;la++){var sa=H[la];if(Fu(sa)){if(Tf.disableErrorBoundaries)sa.get();else try{sa.get()}catch(Ha){return Tf.trackingDerivation=k,Tf.allowStateReads=d,!0}if(a.dependenciesState_===Fj.STALE_)return Tf.trackingDerivation=k,Tf.allowStateReads=
d,!0}}Fc(a);Tf.trackingDerivation=k;Tf.allowStateReads=d;return!1}}function mc(a,d,k){var H=xc(!0);Fc(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++Tf.runId;var fa=Tf.trackingDerivation;Tf.trackingDerivation=a;Tf.inBatch++;if(!0===Tf.disableErrorBoundaries)var la=d.call(k);else try{la=d.call(k)}catch(eb){la=new Es(eb)}Tf.inBatch--;Tf.trackingDerivation=fa;var sa=a.observing_;d=a.observing_=a.newObserving_;k=Fj.UP_TO_DATE_;fa=0;for(var Ha=a.unboundDepsCount_,Ta=
0;Ta<Ha;Ta++){var Xa=d[Ta];0===Xa.diffValue_&&(Xa.diffValue_=1,fa!==Ta&&(d[fa]=Xa),fa++);Xa.dependenciesState_>k&&(k=Xa.dependenciesState_)}d.length=fa;a.newObserving_=null;for(Ha=sa.length;Ha--;)Ta=sa[Ha],0===Ta.diffValue_&&Tc(Ta,a),Ta.diffValue_=0;for(;fa--;)sa=d[fa],1===sa.diffValue_&&(sa.diffValue_=0,Ha=a,sa.observers_.add(Ha),sa.lowestObserverState_>Ha.dependenciesState_&&(sa.lowestObserverState_=Ha.dependenciesState_));k!==Fj.UP_TO_DATE_&&(a.dependenciesState_=k,a.onBecomeStale_());Tf.allowStateReads=
H;return la}function Cb(a){var d=a.observing_;a.observing_=[];for(var k=d.length;k--;)Tc(d[k],a);a.dependenciesState_=Fj.NOT_TRACKING_}function lc(a){var d=zb();try{return a()}finally{Tf.trackingDerivation=d}}function zb(){var a=Tf.trackingDerivation;Tf.trackingDerivation=null;return a}function xc(a){var d=Tf.allowStateReads;Tf.allowStateReads=a;return d}function Fc(a){if(a.dependenciesState_!==Fj.UP_TO_DATE_){a.dependenciesState_=Fj.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
Fj.UP_TO_DATE_}}function wc(){(Tf.pendingReactions.length||Tf.inBatch||Tf.isRunningReactions)&&f(36);Bz=!0;if(Sv){var a=G();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);Tf=new Rv}}function Tc(a,d){a.observers_["delete"](d);0===a.observers_.size&&od(a)}function od(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,Tf.pendingUnobservations.push(a))}function bd(){Tf.inBatch++}function ud(){if(0===--Tf.inBatch){0<Tf.inBatch||Tf.isRunningReactions||Tv(sb);for(var a=Tf.pendingUnobservations,
d=0;d<a.length;d++){var k=a[d];k.isPendingUnobservation_=!1;0===k.observers_.size&&(k.isBeingObserved_&&(k.isBeingObserved_=!1,k.onBUO()),k instanceof Eu&&k.suspend_())}Tf.pendingUnobservations=[]}}function Eb(a){var d=Tf.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&Tf.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<Tf.inBatch&&od(a);return!1}
function Zb(a){a.lowestObserverState_!==Fj.STALE_&&(a.lowestObserverState_=Fj.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===Fj.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=Fj.STALE_}))}function Vb(a){a.lowestObserverState_!==Fj.STALE_&&(a.lowestObserverState_=Fj.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Fj.POSSIBLY_STALE_?d.dependenciesState_=Fj.STALE_:d.dependenciesState_===Fj.UP_TO_DATE_&&(a.lowestObserverState_=Fj.UP_TO_DATE_)}))}function jb(a){a.lowestObserverState_===
Fj.UP_TO_DATE_&&(a.lowestObserverState_=Fj.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Fj.UP_TO_DATE_&&(d.dependenciesState_=Fj.POSSIBLY_STALE_,d.onBecomeStale_())}))}function sb(){Tf.isRunningReactions=!0;for(var a=Tf.pendingReactions,d=0;0<a.length;){++d===bE&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var k=a.splice(0),H=0,fa=k.length;H<fa;H++)k[H].runReaction_()}Tf.isRunningReactions=!1}function $b(a){var d=Tv;Tv=function(k){return a(function(){return d(k)})}}
function Gc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function id(a){return function(d,k){if(Y(d))return tb(d.name||"\x3cunnamed action\x3e",d,a);if(Y(k))return tb(d,k,a);if(O(k))return La(d,k,a?Ez:Dz);if(O(d))return Da(Ka(a?"autoAction":Cz,{name:d,autoAction:a}))}}function ed(a){return Y(a)&&!0===a.isMobxAction}function zd(a,d){function k(){a(Ta)}var H,fa;void 0===d&&(d=ma);var la=null!=(H=null==(fa=d)?void 0:fa.name)?H:"Autorun";if(d.scheduler||d.delay){var sa=
ge(d),Ha=!1;var Ta=new At(la,function(){Ha||(Ha=!0,sa(function(){Ha=!1;Ta.isDisposed_||Ta.track(k)}))},d.onError,d.requiresObservable)}else Ta=new At(la,function(){this.track(k)},d.onError,d.requiresObservable);Ta.schedule_();return Ta.getDisposer_()}function ge(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:eE}function de(a,d,k){function H(){eb=!1;if(!Hb.isDisposed_){var cc=!1;Hb.track(function(){var sc=Wb(!1,function(){return a(Hb)});cc=Xa||!Ob(ib,sc);Db=ib;
ib=sc});Xa&&k.fireImmediately?sa(ib,Db,Hb):!Xa&&cc&&sa(ib,Db,Hb);Xa=!1}}var fa;void 0===k&&(k=ma);var la=null!=(fa=k.name)?fa:"Reaction",sa=Ig(la,k.onError?Ye(k.onError,d):d),Ha=!k.scheduler&&!k.delay,Ta=ge(k),Xa=!0,eb=!1,ib,Db,Ob=k.compareStructural?pf.structural:k.equals||pf["default"],Hb=new At(la,function(){Xa||Ha?H():eb||(eb=!0,Ta(H))},k.onError,k.requiresObservable);Hb.schedule_();return Hb.getDisposer_()}function Ye(a,d){return function(){try{return d.apply(this,arguments)}catch(k){a.call(this,
k)}}}function Yd(a,d,k){return kd(gE,a,d,k)}function kd(a,d,k,H){var fa="function"===typeof H?Vg(d,k):Vg(d),la=Y(H)?H:k,sa=a+"L";fa[sa]?fa[sa].add(la):fa[sa]=new Set([la]);return function(){var Ha=fa[sa];Ha&&(Ha["delete"](la),0===Ha.size&&delete fa[sa])}}function Ic(a){!0===a.isolateGlobalState&&wc();var d=a.useProxies,k=a.enforceActions;void 0!==d&&(Tf.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(Tf.verifyProxies=!0);void 0!==k&&(d="always"===k?"always":
"observed"===k,Tf.enforceActions=d,Tf.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(H){H in a&&(Tf[H]=!!a[H])});Tf.allowStateReads=!Tf.observableRequiresReaction;a.reactionScheduler&&$b(a.reactionScheduler)}function Zd(a,d,k,H){var fa=Yc(d),la=Bd(a,H)[Xd];bd();try{Kc(fa).forEach(function(sa){la.extend_(sa,fa[sa],k?sa in k?k[sa]:!0:!0)})}finally{ud()}return a}
function Gh(a){var d={name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(Gh));return d}function fc(){this.message="FLOW_CANCELLED"}function Qc(a){return!0===(null==a?void 0:a.isMobXFlow)}function md(a,d){return a?void 0!==d?ve(a)?a[Xd].values_.has(d):!1:ve(a)||!!a[Xd]||Rh(a)||Uv(a)||Fu(a):!1}function yd(a){if(ve(a))return a[Xd].ownKeys_();f(38)}function bg(a,d,k){a.set(d,k);return k}function Pf(a,d){if(null==a||"object"!==typeof a||a instanceof
Date||!md(a))return a;if($D(a)||Fu(a))return Pf(a.get(),d);if(d.has(a))return d.get(a);if(cd(a)){var k=bg(d,a,Array(a.length));a.forEach(function(sa,Ha){k[Ha]=Pf(sa,d)});return k}if(Fs(a)){var H=bg(d,a,new Set);a.forEach(function(sa){H.add(Pf(sa,d))});return H}if(Ar(a)){var fa=bg(d,a,new Map);a.forEach(function(sa,Ha){fa.set(Ha,Pf(sa,d))});return fa}var la=bg(d,a,{});yd(a).forEach(function(sa){bq.propertyIsEnumerable.call(a,sa)&&(la[sa]=Pf(a[sa],d))});return la}function zc(a,d){return Pf(a,new Map)}
function fg(){f("trace() is not available in production builds");for(var a=!1,d=arguments.length,k=Array(d),H=0;H<d;H++)k[H]=arguments[H];"boolean"===typeof k[k.length-1]&&(a=k.pop());a:{switch(k.length){case 0:d=Tf.trackingDerivation;break a;case 1:d=Vg(k[0]);break a;case 2:d=Vg(k[0],k[1]);break a}d=void 0}if(!d)return f("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===zt.NONE&&console.log("[mobx.trace] '"+
d.name_+"' tracing enabled");d.isTracing_=a?zt.BREAK:zt.LOG}function fd(a,d){void 0===d&&(d=void 0);bd();try{return a.apply(d)}finally{ud()}}function Sd(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function Wc(a,d){var k=a.interceptors_||(a.interceptors_=[]);k.push(d);return E(function(){var H=k.indexOf(d);-1!==H&&k.splice(H,1)})}function hc(a,d){var k=zb();try{var H=[].concat(a.interceptors_||[]);a=0;for(var fa=H.length;a<fa&&((d=H[a](d))&&!d.type&&f(14),d);a++);return d}finally{Tf.trackingDerivation=
k}}function of(a){return void 0!==a.changeListeners_&&0<a.changeListeners_.length}function df(a,d){var k=a.changeListeners_||(a.changeListeners_=[]);k.push(d);return E(function(){var H=k.indexOf(d);-1!==H&&k.splice(H,1)})}function qe(a,d){var k=zb();if(a=a.changeListeners_){a=a.slice();for(var H=0,fa=a.length;H<fa;H++)a[H](d);Tf.trackingDerivation=k}}function Jg(a,d,k){var H=Bd(a,k)[Xd];bd();try{var fa;null!=(fa=d)?fa:d=Qa(a);Kc(d).forEach(function(la){return H.make_(la,d[la])})}finally{ud()}return a}
function kb(a,d,k,H){void 0===k&&(k="ObservableArray");void 0===H&&(H=!1);C();d=new tx(k,d,H,!1);L(d.values_,Xd,d);k=new Proxy(d.values_,kE);d.proxy_=k;a&&a.length&&(H=bc(!0),d.spliceWithArray_(0,0,a),Tf.allowStateChanges=H);return k}function pb(a,d){"function"===typeof Array.prototype[a]&&(Vv[a]=d(a))}function nb(a){return function(){var d=this[Xd];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function Lb(a){return function(d,k){var H=this,fa=this[Xd];fa.atom_.reportObserved();
return fa.dehanceValues_(fa.values_)[a](function(la,sa){return d.call(k,la,sa,H)})}}function Ib(a){return function(){var d=this,k=this[Xd];k.atom_.reportObserved();k=k.dehanceValues_(k.values_);var H=arguments[0];arguments[0]=function(fa,la,sa){return H(fa,la,sa,d)};return k[a].apply(k,arguments)}}function cd(a){return X(a)&&lE(a[Xd])}function dd(a){if(P(a)||Ar(a))return a;if(Array.isArray(a))return new Map(a);if(M(a)){var d=new Map,k;for(k in a)d.set(k,a[k]);return d}return f(21,a)}function Bd(a,
d){var k;if(R(a,Xd))return a;var H=null!=(k=null==d?void 0:d.name)?k:"ObservableObject";k=Jz;var fa=new Map;H=String(H);var la;var sa=d?null!=(la=d.defaultDecorator)?la:ob(d):void 0;d=new k(a,fa,H,sa);T(a,Xd,d);return a}function re(a){return Iz[a]||(Iz[a]={get:function(){return this[Xd].getObservablePropValue_(a)},set:function(d){return this[Xd].setObservablePropValue_(a,d)}})}function ve(a){return X(a)?sE(a[Xd]):!1}function Af(a){return{enumerable:!1,configurable:!0,get:function(){return this[Xd].get_(a)},
set:function(d){this[Xd].set_(a,d)}}}function xe(a){if(a>ux){for(var d=ux;d<a+100;d++)xp(vx.prototype,""+d,Af(d));ux=a}}function Gf(a,d,k){return new vx(a,d,k)}function Vg(a,d){if("object"===typeof a&&null!==a){if(cd(a))return void 0!==d&&f(23),a[Xd].atom_;if(Fs(a))return a[Xd];if(Ar(a)){if(void 0===d)return a.keysAtom_;var k=a.data_.get(d)||a.hasMap_.get(d);k||f(25,d,rb(a));return k}if(ve(a)){if(!d)return f(26);(k=a[Xd].values_.get(d))||f(27,d,rb(a));return k}if(Rh(a)||Fu(a)||Uv(a))return a}else if(Y(a)&&
Uv(a[Xd]))return a[Xd];f(28)}function Tg(a,d){a||f(29);if(void 0!==d)return Tg(Vg(a,d));if(Rh(a)||Fu(a)||Uv(a)||Ar(a)||Fs(a))return a;if(a[Xd])return a[Xd];f(24,a)}function rb(a,d){if(void 0!==d)a=Vg(a,d);else{if(ed(a))return a.name;a=ve(a)||Ar(a)||Fs(a)?Tg(a):Vg(a)}return a.name_}function ya(a,d,k){void 0===k&&(k=-1);return ha(a,d,k)}function ha(a,d,k,H,fa){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var la=typeof a;if("function"!==la&&"object"!==la&&"object"!=
typeof d)return!1;la=Lz.call(a);if(la!==Lz.call(d))return!1;switch(la){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=k&&k++}a=ta(a);d=ta(d);la="[object Array]"===la;if(!la){if("object"!=typeof a||"object"!=
typeof d)return!1;var sa=a.constructor,Ha=d.constructor;if(sa!==Ha&&!(Y(sa)&&sa instanceof sa&&Y(Ha)&&Ha instanceof Ha)&&"constructor"in a&&"constructor"in d)return!1}if(0===k)return!1;0>k&&(k=-1);H=H||[];fa=fa||[];for(sa=H.length;sa--;)if(H[sa]===a)return fa[sa]===d;H.push(a);fa.push(d);if(la){sa=a.length;if(sa!==d.length)return!1;for(;sa--;)if(!ha(a[sa],d[sa],k-1,H,fa))return!1}else{la=Object.keys(a);sa=la.length;if(Object.keys(d).length!==sa)return!1;for(;sa--;)if(Ha=la[sa],!R(d,Ha)||!ha(a[Ha],
d[Ha],k-1,H,fa))return!1}H.pop();fa.pop();return!0}function ta(a){return cd(a)?a.slice():P(a)||Ar(a)||S(a)||Fs(a)?Array.from(a.entries()):a}function Na(a){a[Symbol.iterator]=ab;return a}function ab(){return this}function Fb(a,d){const k=new Set(d),H=Object.values(a),fa=new Set(H.filter(la=>k.has(la.toId)||k.has(la.fromId)));a=fa.size;for(d=-1;0!==d;)fa.forEach(la=>{la=la.fromId;for(const sa of H)sa.fromId===la&&fa.add(sa),sa.toId===la&&fa.add(sa)}),d=fa.size-a,a=fa.size;return Array.from(fa.values())}
function jc(a,d,k,H,fa,la,sa,Ha){if(fa=d.getBindingPoint(fa,la,sa,Ha))return{id:H,type:"line",fromId:a.id,toId:d.id,handleId:k,point:ce.toFixed(fa.point),distance:fa.distance}}function Lc(a,d){const k=a.getCenter(),H=d.getCenter();var fa=gk();fa=lf(he({},Iu.defaultProps),{id:fa,type:Iu.id,parentId:a.props.parentId,point:k});a=jc(fa,a,"start",gk(),k,k,ce.uni(ce.sub(H,k)),!1);d=jc(fa,d,"end",gk(),H,H,ce.uni(ce.sub(k,H)),!1);return a&&d?(fa.handles.start.point=[0,0],fa.handles.end.point=ce.sub(H,k),
fa.handles.start.bindingId=a.id,fa.handles.end.bindingId=d.id,[fa,[a,d]]):null}function Vc(){return new BE}function be(){return new WeakMap}function Id(a){if(!a)return Dx(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:Dx(a);if(~zE.call(d).indexOf("[native code]"))try{return new d}catch(k){}return Dx(a)}function Ue(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function Ze(a){return a.flags}function uf(a){a=
AE.call(a);return a.substring(8,a.length-1)}function Pe(a){return a[Symbol.toStringTag]||uf(a)}function lg(a){return xA(a).concat(Ex(a))}function eg(a,d,k){for(var H=IE(a),fa=0,la=H.length,sa,Ha;fa<la;++fa)if(sa=H[fa],"callee"!==sa&&"caller"!==sa)if(Ha=GE(a,sa)){Ha.get||Ha.set||(Ha.value=k.copier(Ha.value,k));try{FE(d,sa,Ha)}catch(Ta){d[sa]=Ha.value}}else d[sa]=k.copier(a[sa],k);return d}function Lg(a,d){var k=new d.Constructor;d.cache.set(a,k);a.forEach(function(H,fa){k.set(fa,d.copier(H,d))});return k}
function gg(a,d){var k=Id(d.prototype);d.cache.set(a,k);for(var H in a)zA.call(a,H)&&(k[H]=d.copier(a[H],d));return k}function Og(a,d){var k=Id(d.prototype);d.cache.set(a,k);for(var H in a)zA.call(a,H)&&(k[H]=d.copier(a[H],d));H=Ex(a);for(var fa=0,la=H.length,sa;fa<la;++fa)sa=H[fa],HE.call(a,sa)&&(k[sa]=d.copier(a[sa],d));return k}function Gi(a,d){return new d.Constructor(a.valueOf())}function ih(a,d){return a}function Ci(a,d){var k=new d.Constructor;d.cache.set(a,k);a.forEach(function(H){k.add(d.copier(H,
d))});return k}function Ki(a){function d(la,sa){sa.prototype=sa.Constructor=void 0;if(!la||"object"!==typeof la)return la;if(sa.cache.has(la))return sa.cache.get(la);sa.prototype=la.__proto__||KE(la);sa.Constructor=sa.prototype&&sa.prototype.constructor;if(!sa.Constructor||sa.Constructor===Object)return fa(la,sa);if(JE(la))return H(la,sa);var Ha=k[EE(la)];return Ha?Ha(la,sa):"function"===typeof la.then?la:fa(la,sa)}a=Fx({},BA,a);var k={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,
Boolean:Gi,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,Int32Array:a.arrayBuffer,Map:a.map,Number:Gi,Object:a.object,Promise:ih,RegExp:a.regExp,Set:a.set,String:Gi,WeakMap:ih,WeakSet:ih,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},H=k.Array,fa=k.Object;return function(la){return d(la,{Constructor:void 0,cache:CE(),
copier:d,prototype:void 0})}}function pj(a,d){return(0,OE.default)(a,d,{arrayMerge:(k,H,fa)=>H})}function Vj(a,d,k,H=!1){const [fa,la]=d,[sa,Ha]=k;a=sa+(a-fa)/(la-fa)*(Ha-sa);return H?sa<Ha?Math.max(Math.min(a,Ha),sa):Math.max(Math.min(a,sa),Ha):a}function xj(a,d){return new Promise((k,H)=>{if("video"===d){const fa=document.createElement("video");fa.addEventListener("loadedmetadata",function(){k([this.videoWidth,this.videoHeight])},!1);fa.src=a}else if("image"===d){const fa=new Image;fa.onload=()=>
k([fa.width,fa.height]);fa.src=a;fa.onerror=la=>H(la)}else"pdf"===d&&k([595,842])})}function bj(a){return Object.values(hs).includes(a)}function zh(a,d){return bj(a)||null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:a}function Xk(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",
padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);return a}function Wj(a,d,k=0){var H,fa,la;if(!a)return[16,32];let sa;sa="string"===typeof d?d:`${null!=(H=d.fontStyle)?H:"normal"} ${null!=(fa=d.fontVariant)?fa:"normal"} ${null!=(la=d.fontWeight)?la:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!Gx.has(`${a}-${sa}-${k}`)){if(!Dr)return[10,
10];Dr.parentNode||document.body.appendChild(Dr);Dr.innerHTML=`${a}&#8203;`;Dr.style.font=sa;Dr.style.padding=k+"px";d=Dr.getBoundingClientRect();Gx.set(`${a}-${sa}-${k}`,[Math.ceil(d.width||1),Math.ceil(d.height||1)])}return Gx.get(`${a}-${sa}-${k}`)}function pk(a){try{if("string"!==typeof a||!Ng.test(a))throw TypeError("Invalid UUID");let d;const k=new Uint8Array(16);k[0]=(d=parseInt(a.slice(0,8),16))>>>24;k[1]=d>>>16&255;k[2]=d>>>8&255;k[3]=d&255;k[4]=(d=parseInt(a.slice(9,13),16))>>>8;k[5]=d&
255;k[6]=(d=parseInt(a.slice(14,18),16))>>>8;k[7]=d&255;k[8]=(d=parseInt(a.slice(19,23),16))>>>8;k[9]=d&255;k[10]=(d=parseInt(a.slice(24,36),16))/1099511627776&255;k[11]=d/4294967296&255;k[12]=d>>>24&255;k[13]=d>>>16&255;k[14]=d>>>8&255;k[15]=d&255;return!0}catch(d){return!1}}function dl(a,d=0,k){let H;return function(...fa){null==k?void 0:k(...fa);clearTimeout(H);H=setTimeout(()=>a.apply(fa),d)}}function xb(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function Sb(){var a,d,k;return(null==
(k=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:k.call(d,"ui/developer-mode?"))||!1}function pc(a){return!!a}function dc(a=0){return new Promise(d=>setTimeout(d,a))}function Dc(a="noid"){Hx[a]||(Hx[a]=EA.createContext({}));return Hx[a]}function Cc(a="noid"){return EA.useContext(Dc(a))}function Nd(a){const {callbacks:d}=Cc(),k=DA.useRef(-1);return DA.useMemo(()=>{const H=fa=>{var la,sa;const {order:Ha=0}=fa;if(!Ha){var Ta=fa.target;Ta.removeEventListener("pointerup",
H);Ta.releasePointerCapture(fa.pointerId);null==(la=d.onPointerUp)?void 0:la.call(d,{type:"selection",handle:a,order:Ha},fa);la=Date.now();Ta=la-k.current;300<Ta?k.current=la:300>=Ta&&(null==(sa=d.onDoubleClick)?void 0:sa.call(d,{type:"selection",handle:a,order:Ha},fa),k.current=-1);fa.order=Ha+1}};return{onPointerDown:fa=>{var la;const {order:sa=0}=fa;if(!sa){var Ha=ae(fa.currentTarget);Ha.setPointerCapture(fa.pointerId);Ha.addEventListener("pointerup",H);null==(la=d.onPointerDown)?void 0:la.call(d,
{type:"selection",handle:a,order:sa},fa);fa.order=sa+1}},onPointerMove:fa=>{var la;const {order:sa=0}=fa;sa||(null==(la=d.onPointerMove)?void 0:la.call(d,{type:"selection",handle:a,order:sa},fa),fa.order=sa+1)},onPointerEnter:fa=>{var la;const {order:sa=0}=fa;sa||(null==(la=d.onPointerEnter)?void 0:la.call(d,{type:"selection",handle:a,order:sa},fa),fa.order=sa+1)},onPointerLeave:fa=>{var la;const {order:sa=0}=fa;sa||(null==(la=d.onPointerLeave)?void 0:la.call(d,{type:"selection",handle:a,order:sa},
fa),fa.order=sa+1)},onKeyDown:fa=>{var la;null==(la=d.onKeyDown)?void 0:la.call(d,{type:"selection",handle:a,order:-1},fa)},onKeyUp:fa=>{var la;null==(la=d.onKeyUp)?void 0:la.call(d,{type:"selection",handle:a,order:-1},fa)}}},[d])}function ae(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return ae(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function le(a,d,k){const H=Ku.useRef(!1),fa=Ku.useCallback(()=>{var la;if(H.current){const sa=
null==(la=a.current)?void 0:la.getBoundingClientRect();sa&&(la={minX:sa.left,maxX:sa.left+sa.width,minY:sa.top,maxY:sa.top+sa.height,width:sa.width,height:sa.height},d.updateBounds(la),null==k?void 0:k(la))}else H.current=!0},[a,k]);Ku.useEffect(()=>{const la=a.current?RE(a.current):document,sa=dl(fa,100);la.addEventListener("scroll",sa);window.addEventListener("resize",sa);return()=>{la.removeEventListener("scroll",sa);window.removeEventListener("resize",sa)}},[]);Ku.useLayoutEffect(()=>{const la=
new ResizeObserver(sa=>{sa[0].contentRect&&fa()});a.current&&la.observe(a.current);return()=>{la.disconnect()}},[a]);Ku.useEffect(()=>{fa();setTimeout(()=>{var la,sa;null==(sa=null==(la=a.current)?void 0:la.querySelector(".tl-canvas"))?void 0:sa.focus()})},[a])}function $e(a,d){return Object.keys(d).reduce((k,H)=>{const fa=d[H];return fa?k+`${`--${a}-${H}`}: ${fa};
`:k},"")}function Ed(a,d,k=".logseq-tldraw"){Ix.useLayoutEffect(()=>{const H=document.createElement("style"),fa=$e(a,d);H.setAttribute("id",`${a}-theme`);H.setAttribute("data-selector",k);H.innerHTML=`
        ${k} {
          ${fa}
        }
      `;document.head.appendChild(H);return()=>{H&&document.head.contains(H)&&document.head.removeChild(H)}},[a,d,k])}function qf(a,d){Ix.useLayoutEffect(()=>{if(Jx.get(a))return()=>{};const k=document.createElement("style");k.innerHTML=d;k.setAttribute("id",a);document.head.appendChild(k);Jx.set(a,k);return()=>{k&&document.head.contains(k)&&(document.head.removeChild(k),Jx.delete(a))}},[a,d])}function we(a,d){const k=Ix.useMemo(()=>he(he({},SE),a),[a]);Ed("tl",k,d);qf("tl-canvas",TE)}function Ee(a=
"noid"){Kx[a]||(Kx[a]=GA.createContext({}));return Kx[a]}function He(a="noid"){return GA.useContext(Ee(a))}function Qe(){const a=He(),{callbacks:d}=Cc(),k=FA.useRef(-1);return FA.useMemo(()=>({onPointerDown:H=>{var fa,la,sa;const {order:Ha=0}=H;Ha||(null==(fa=H.currentTarget)?void 0:fa.setPointerCapture(H.pointerId));H.isPrimary&&(null==(la=d.onPointerDown)?void 0:la.call(d,{type:"canvas",order:Ha},H),fa=Date.now(),la=fa-k.current,300<la?k.current=fa:300>=la&&(null==(sa=d.onDoubleClick)?void 0:sa.call(d,
{type:"canvas",order:Ha},H),k.current=-1))},onPointerMove:H=>{var fa;const {order:la=0}=H;null==(fa=d.onPointerMove)?void 0:fa.call(d,{type:"canvas",order:la},H)},onPointerUp:H=>{var fa,la;const {order:sa=0}=H;sa||(null==(fa=H.currentTarget)?void 0:fa.releasePointerCapture(H.pointerId));null==(la=d.onPointerUp)?void 0:la.call(d,{type:"canvas",order:sa},H)},onPointerEnter:H=>{var fa;const {order:la=0}=H;null==(fa=d.onPointerEnter)?void 0:fa.call(d,{type:"canvas",order:la},H)},onPointerLeave:H=>{var fa;
const {order:la=0}=H;null==(fa=d.onPointerLeave)?void 0:fa.call(d,{type:"canvas",order:la},H)},onDrop:H=>oi(this,null,function*(){H.preventDefault();"clientX"in H&&a.drop(H.dataTransfer,[H.clientX,H.clientY])}),onDragOver:H=>{H.preventDefault()},onTouchEnd:H=>{let fa=a.selectedTool.id;"pencil"!==fa&&"highlighter"!==fa||H.preventDefault()}}),[d])}function Wf(a,d,k){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*k):a*d*k/(d+k*a)}function Yf(a,d,k,H=.15){return 0===H?Math.max(d,Math.min(a,k)):a<d?
-Wf(d-a,k-d,H)+d:a>k?+Wf(a-k,k-d,H)+k:a}function hg(a,[d,k],[H,fa]){const [[la,sa],[Ha,Ta]]=a;return[Yf(d,la,sa,H),Yf(k,Ha,Ta,fa)]}function sg(a,d,k){d in a?Object.defineProperty(a,d,{value:k,enumerable:!0,configurable:!0,writable:!0}):a[d]=k;return a}function Yg(a,d){var k=Object.keys(a);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(a);d&&(H=H.filter(function(fa){return Object.getOwnPropertyDescriptor(a,fa).enumerable}));k.push.apply(k,H)}return k}function xf(a){for(var d=1;d<
arguments.length;d++){var k=null!=arguments[d]?arguments[d]:{};d%2?Yg(Object(k),!0).forEach(function(H){sg(a,H,k[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(k)):Yg(Object(k)).forEach(function(H){Object.defineProperty(a,H,Object.getOwnPropertyDescriptor(k,H))})}return a}function wg(a){return a?a[0].toUpperCase()+a.slice(1):""}function Ih(a=!1,d){return a&&!UE.includes(d)}function Gg(a,d="",k=!1){const H=HA[a];d=H?H[d]||d:d;return"on"+wg(a)+wg(d)+
(Ih(k,d)?"Capture":"")}function Df(a){a=a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var k=VE.includes(a)?"capturecapture":"capture";(k=!!~a.indexOf(k))&&(a=a.replace("capture",""));return{device:a,capture:k,passive:d}}function mi(a,d=""){const k=HA[a];return a+(k?k[d]||d:d)}function Pg(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function Li(a){return Array.from(a.touches).filter(d=>{var k,H;return d.target===a.currentTarget||
(null===(k=a.currentTarget)||void 0===k?void 0:null===(H=k.contains)||void 0===H?void 0:H.call(k,d.target))})}function Ah(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function ff(a,d){const k=d.clientX-a.clientX,H=d.clientY-a.clientY;return{angle:-(180*Math.atan2(k,H))/Math.PI,distance:Math.hypot(k,H),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function ef(a){return Li(a).map(d=>d.identifier)}function jf(a,d){const [k,H]=
Array.from(a.touches).filter(fa=>d.includes(fa.identifier));return ff(k,H)}function rh(a){const d=Ah(a);return"touches"in a?d.identifier:d.pointerId}function Rf(a){a=Ah(a);return[a.clientX,a.clientY]}function sh(a){let {deltaX:d,deltaY:k,deltaMode:H}=a;1===H?(d*=40,k*=40):2===H&&(d*=800,k*=800);return[d,k]}function Cg(a,...d){return"function"===typeof a?a(...d):a}function th(){}function di(...a){return 0===a.length?th:1===a.length?a[0]:function(){let d;for(const k of a)d=k.apply(this,arguments)||
d;return d}}function jj([a,d],k){a=Math.abs(a);d=Math.abs(d);if(a>d&&a>k)return"x";if(d>a&&d>k)return"y"}function Ql(a){const [d,k]=a.overflow,[H,fa]=a._delta,[la,sa]=a._direction;if(0>d&&0<H&&0>la||0<d&&0>H&&0<la)a._movement[0]=a._movementBound[0];if(0>k&&0<fa&&0>sa||0<k&&0>fa&&0<sa)a._movement[1]=a._movementBound[1]}function Bh(a){Lx.set(a.key,a.engine);Mx.set(a.key,a.resolver)}function rk(a={},d){const k={};for(const [H,fa]of Object.entries(d))switch(typeof fa){case "function":k[H]=fa.call(k,a[H],
H,a);break;case "object":k[H]=rk(a[H],fa);break;case "boolean":fa&&(k[H]=a[H])}return k}function Hj(a,d,k={}){const {target:H,eventOptions:fa,window:la,enabled:sa,transform:Ha}=a;var Ta=rF;if(null==a)a={};else{if(null==a)var Xa={};else{Xa={};var eb=Object.keys(a),ib;for(ib=0;ib<eb.length;ib++){var Db=eb[ib];0<=Ta.indexOf(Db)||(Xa[Db]=a[Db])}}if(Object.getOwnPropertySymbols)for(ib=Object.getOwnPropertySymbols(a),Db=0;Db<ib.length;Db++)eb=ib[Db],0<=Ta.indexOf(eb)||Object.prototype.propertyIsEnumerable.call(a,
eb)&&(Xa[eb]=a[eb]);a=Xa}k.shared=rk({target:H,eventOptions:fa,window:la,enabled:sa,transform:Ha},qF);if(d){var Ob=Mx.get(d);k[d]=rk(xf({shared:k.shared},a),Ob)}else for(Ob in a)(d=Mx.get(Ob))&&(k[Ob]=rk(xf({shared:k.shared},a[Ob]),d));return k}function ij(a,d){a.gestures.add(d);a.gestureEventStores[d]=new PA(a,d);a.gestureTimeoutStores[d]=new sF}function Hi(a,d,k,H,fa,la){if(a.has(k)&&Lx.has(H)){var sa=k+"Start",Ha=k+"End";fa[H]=Ta=>{let Xa=void 0;if(Ta.first&&sa in d)d[sa](Ta);k in d&&(Xa=d[k](Ta));
if(Ta.last&&Ha in d)d[Ha](Ta);return Xa};la[H]=la[H]||{}}}function Ge(a,d={},k,H){const fa=Nx.default.useMemo(()=>new tF(a),[]);fa.applyHandlers(a,H);fa.applyConfig(d,k);Nx.default.useEffect(fa.effect.bind(fa));Nx.default.useEffect(()=>fa.clean.bind(fa),[]);if(void 0===d.target)return fa.bind.bind(fa)}function fh(a){a.forEach(Bh);return function(d,k){k=k||{};const H={},fa={},la=new Set;for(let Db in d)uF.test(Db)?(la.add(RegExp.lastMatch),fa[Db]=d[Db]):H[Db]=d[Db];const [sa,Ha,Ta]=[fa,H,la];d={};
Hi(Ta,sa,"onDrag","drag",d,k);Hi(Ta,sa,"onWheel","wheel",d,k);Hi(Ta,sa,"onScroll","scroll",d,k);Hi(Ta,sa,"onPinch","pinch",d,k);Hi(Ta,sa,"onMove","move",d,k);Hi(Ta,sa,"onHover","hover",d,k);const {handlers:Xa,nativeHandlers:eb,config:ib}={handlers:d,config:k,nativeHandlers:Ha};return Ge(Xa,ib,void 0,eb)}}function Si(a,d){return fh([kF,nF,oF,pF,mF,lF])(a,d||{})}function qj(a){const {viewport:d,inputs:k,callbacks:H}=Cc(),fa=$v.useRef(void 0),la=$v.useRef([0,0]),sa=$v.useRef(0),Ha=$v.useMemo(()=>({onWheel:Ta=>
{var Xa;({event:Ta}=Ta);Ta.preventDefault();const {deltaY:eb,deltaX:ib}=Ta;var Db=0;if(Ta.ctrlKey||Ta.metaKey){Db=Math.sign(Ta.deltaY);let sc=eb;10<Math.abs(Ta.deltaY)&&(sc=10*Db);Db=sc}const [Ob,Hb,cc]=[ib,eb,Db];"pinching"===k.state||sa.current>=Ta.timeStamp||(sa.current=Ta.timeStamp,(Ta.altKey||Ta.ctrlKey||Ta.metaKey)&&0===Ta.buttons?(Db=d.bounds,Ta=null!=(Xa=k.currentScreenPoint)?Xa:[Db.width/2,Db.height/2],Xa=d.camera.zoom,d.onZoom(Ta,Xa-cc/100*Xa)):(Xa=ce.mul(Ta.shiftKey&&!xb()?[Hb,0]:[Ob,Hb],
.8),ce.isEqual(Xa,[0,0])||d.panCamera(Xa)))},onPinchStart:({event:Ta,delta:Xa,offset:eb,origin:ib})=>{var Db;const Ob=a.current;Ta instanceof WheelEvent||!(Ta.target===Ob||null!=Ob&&Ob.contains(Ta.target))||(null==(Db=H.onPinchStart)?void 0:Db.call(H,{type:"canvas",order:0,delta:[...Xa,eb[0]],offset:eb,point:ce.sub(ib,k.containerOffset)},Ta),fa.current=ib,la.current=[0,0])},onPinchEnd:({event:Ta,offset:Xa,origin:eb})=>{var ib;const Db=a.current;Ta instanceof WheelEvent||!(Ta.target===Db||null!=Db&&
Db.contains(Ta.target))||"pinching"!==k.state||(null==(ib=H.onPinchEnd)?void 0:ib.call(H,{type:"canvas",order:0,delta:[0,0,Xa[0]],offset:Xa,point:ce.sub(eb,k.containerOffset)},Ta),la.current=[0,0])},onPinch:({event:Ta,offset:Xa,origin:eb})=>{var ib,Db=a.current;if(!(Ta instanceof WheelEvent)&&(Ta.target===Db||null!=Db&&Db.contains(Ta.target))){fa.current||(fa.current=eb);Db=ce.sub(fa.current,eb);var Ob=ce.sub(Db,la.current);null==(ib=H.onPinch)?void 0:ib.call(H,{type:"canvas",order:0,delta:[...Ob,
Xa[0]],offset:Xa,point:ce.sub(eb,k.containerOffset)},Ta);la.current=Db}}}),[H]);Si(Ha,{target:a,eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:bp.maxZoom,min:bp.minZoom})}})}function ek(a,d,k,H){Ox.useLayoutEffect(()=>{a.current.style.transform=`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,k,d.rotation]);Ox.useLayoutEffect(()=>{const fa=a.current;fa.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;fa.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);Ox.useLayoutEffect(()=>{const fa=a.current;void 0!==H&&(fa.style.zIndex=H.toString())},[H])}function Wn(a,d){const {onPersist:k,onError:H,onMount:fa,onCreateAssets:la,onCreateShapes:sa,onDeleteAssets:Ha,onDeleteShapes:Ta,onDrop:Xa,
onPaste:eb,onCopy:ib,onCanvasDBClick:Db}=d;RA.useLayoutEffect(()=>{const Ob=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,fa&&fa(a,null),()=>{Ob.forEach(Hb=>Hb());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);RA.useLayoutEffect(()=>{const Ob=[];k&&Ob.push(a.subscribe("persist",k));H&&Ob.push(a.subscribe("error",H));sa&&Ob.push(a.subscribe("create-shapes",sa));la&&Ob.push(a.subscribe("create-assets",la));Ta&&Ob.push(a.subscribe("delete-shapes",Ta));Ha&&Ob.push(a.subscribe("delete-assets",
Ha));Xa&&Ob.push(a.subscribe("drop",Xa));eb&&Ob.push(a.subscribe("paste",eb));ib&&Ob.push(a.subscribe("copy",ib));Db&&Ob.push(a.subscribe("canvas-dbclick",Db));return()=>Ob.forEach(Hb=>Hb())},[a,k,H])}function Xn(a){if("app"in a)return a.app;const [d]=SA.useState(()=>new PE(a.model,a.Shapes,a.Tools,a.readOnly));SA.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function Ek(a,d){vF.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function yn(a){const d=Cc(),{viewport:{bounds:k}}=
d;wF.useEffect(()=>{const H=sa=>{sa.preventDefault()},fa=sa=>{if(0!==sa.touches.length){var Ha=sa.touches[0].pageX,Ta=sa.touches[0].radiusX||0;(10>Ha-Ta||Ha+Ta>k.width-10)&&sa.preventDefault()}},la=a.current;if(!la)return()=>{};la.addEventListener("touchstart",H,{passive:!0});la.addEventListener("gestureend",H,{passive:!0});la.addEventListener("gesturechange",H,{passive:!0});la.addEventListener("gesturestart",H,{passive:!0});la.addEventListener("touchstart",fa,{passive:!0});return()=>{la&&(la.removeEventListener("touchstart",
H),la.removeEventListener("gestureend",H),la.removeEventListener("gesturechange",H),la.removeEventListener("gesturestart",H),la.removeEventListener("touchstart",fa))}},[a,k.width])}function tp(a,d){const {inputs:k,callbacks:H}=Cc();return xF.useMemo(()=>({onPointerDown:fa=>{var la,sa;const {order:Ha=0}=fa;Ha||(null==(la=fa.currentTarget)?void 0:la.setPointerCapture(fa.pointerId));la=a.props.handles[d];null==(sa=H.onPointerDown)?void 0:sa.call(H,{type:"handle",shape:a,handle:la,id:d,order:Ha},fa);
fa.order=Ha+1},onPointerMove:fa=>{var la;const {order:sa=0}=fa,Ha=a.props.handles[d];null==(la=H.onPointerMove)?void 0:la.call(H,{type:"handle",shape:a,handle:Ha,id:d,order:sa},fa);fa.order=sa+1},onPointerUp:fa=>{var la,sa;const {order:Ha=0}=fa;Ha||(null==(la=fa.currentTarget)?void 0:la.releasePointerCapture(fa.pointerId));la=a.props.handles[d];null==(sa=H.onPointerUp)?void 0:sa.call(H,{type:"handle",shape:a,handle:la,id:d,order:Ha},fa);fa.order=Ha+1},onPointerEnter:fa=>{var la;const {order:sa=0}=
fa,Ha=a.props.handles[d];null==(la=H.onPointerEnter)?void 0:la.call(H,{type:"handle",shape:a,handle:Ha,id:d,order:sa},fa);fa.order=sa+1},onPointerLeave:fa=>{var la;const {order:sa=0}=fa,Ha=a.props.handles[d];null==(la=H.onPointerLeave)?void 0:la.call(H,{type:"handle",shape:a,handle:Ha,id:d,order:sa},fa);fa.order=sa+1},onKeyUp:fa=>{var la;const sa=a.props.handles[d];null==(la=H.onKeyUp)?void 0:la.call(H,{type:"handle",shape:a,handle:sa,id:d,order:-1},fa)},onKeyDown:fa=>{var la;const sa=a.props.handles[d];
null==(la=H.onKeyDown)?void 0:la.call(H,{type:"handle",shape:a,handle:sa,id:d,order:-1},fa)}}),[a.id,k,H])}function Jj(a,d,k=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${k?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function wm(a,d,k=0){yF.useEffect(()=>{const H=a.current;H&&(H.style.cursor=
zF[d](gm.radiansToDegrees(k)))},[d,k])}function Gk(a){const {viewport:d}=Cc(),k=He();AF.useLayoutEffect(()=>zd(()=>{const H=dl(()=>{var fa;null==(fa=a.current)?void 0:fa.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==k.inputs.state&&null!=d.camera.zoom&&H()}),[])}function wo(a,d=0){const [k,H]=(0,TA.useState)(a);(0,TA.useEffect)(()=>{let fa=!1;const la=setTimeout(()=>{fa||H(a)},d);return()=>{fa=!0;clearTimeout(la)}},[a,d]);return k}function Rl(){const a=He();UA.useEffect(()=>
{de(()=>he({},a.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);UA.useEffect(()=>{var d;const k=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");k?a.viewport.update(k):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function zn(a){a()}function sk(a){return Gh(Vg(a,void 0))}function rj(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,
cleanAt:Date.now()+CF}}function xi(a){var d=new Map,k=1,H=new a(function(fa){var la=d.get(fa);la&&(la.reaction.dispose(),d.delete(fa))});return{addReactionToTrack:function(fa,la,sa){var Ha=k++;H.register(sa,Ha,fa);fa.current=rj(la);fa.current.finalizationRegistryCleanupToken=Ha;d.set(Ha,fa.current);return fa.current},recordReactionAsCommitted:function(fa){H.unregister(fa);fa.current&&fa.current.finalizationRegistryCleanupToken&&d.delete(fa.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function ln(){function a(){void 0===H&&(H=setTimeout(d,1E4))}function d(){H=void 0;var fa=Date.now();k.forEach(function(la){var sa=la.current;sa&&fa>=sa.cleanAt&&(sa.reaction.dispose(),la.current=null,k.delete(la))});0<k.size&&a()}var k=new Set,H;return{addReactionToTrack:function(fa,la,sa){fa.current=rj(la);k.add(fa);a();return fa.current},recordReactionAsCommitted:function(fa){k.delete(fa)},forceCleanupTimerToRunNowForTests:function(){H&&(clearTimeout(H),
d())},resetCleanupScheduleForTests:function(){var fa;if(0<k.size){try{for(var la=DF(k),sa=la.next();!sa.done;sa=la.next()){var Ha=sa.value,Ta=Ha.current;Ta&&(Ta.reaction.dispose(),Ha.current=null)}}catch(eb){var Xa={error:eb}}finally{try{sa&&!sa.done&&(fa=la.return)&&fa.call(la)}finally{if(Xa)throw Xa.error;}}k.clear()}H&&(clearTimeout(H),H=void 0)}}}function Th(){return new GF}function Oj(a,d){void 0===d&&(d="observed");var k=XA(Nu.default.useState(Th),1)[0],H=XA(Nu.default.useState(),2)[1],fa=Nu.default.useRef(null);
if(!fa.current)var la=new At("observer".concat(d),function(){sa.mounted?H([]):sa.changedBeforeMount=!0}),sa=EF(fa,la,k);k=fa.current.reaction;Nu.default.useDebugValue(k,sk);Nu.default.useEffect(function(){FF(fa);fa.current?(fa.current.mounted=!0,fa.current.changedBeforeMount&&(fa.current.changedBeforeMount=!1,H([]))):(fa.current={reaction:new At("observer".concat(d),function(){H([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},H([]));return function(){fa.current.reaction.dispose();fa.current=
null}},[]);var Ha,Ta;k.track(function(){try{Ha=a()}catch(Xa){Ta=Xa}});if(Ta)throw Ta;return Ha}function rf(a,d){var k;if($A&&a.$$typeof===$A)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(k=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==k?k:!1;var H=a,fa=a.displayName||a.name;if(ZA&&a.$$typeof===ZA&&(d=!0,H=a.render,"function"!==typeof H))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
k=function(la,sa){return Oj(function(){return H(la,sa)},fa)};""!==fa&&(k.displayName=fa);a.contextTypes&&(k.contextTypes=a.contextTypes);d&&(k=(0,Jt.forwardRef)(k));k=(0,Jt.memo)(k);Cj(a,k);return k}function Cj(a,d){Object.keys(a).forEach(function(k){HF[k]||Object.defineProperty(d,k,Object.getOwnPropertyDescriptor(a,k))})}function uk(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:Oj(a)}function An(a){const d=He(),{callbacks:k}=Cc(),H=aB.useRef(!1);aB.useEffect(()=>{const fa=Ta=>
{var Xa,eb;if(null==(Xa=a.current)?0:Xa.contains(document.activeElement))null==(eb=k.onKeyDown)?void 0:eb.call(k,{type:"canvas",order:-1},Ta),H.current=Ta.shiftKey},la=Ta=>{var Xa,eb;if(null==(Xa=a.current)?0:Xa.contains(document.activeElement))null==(eb=k.onKeyUp)?void 0:eb.call(k,{type:"canvas",order:-1},Ta),H.current=Ta.shiftKey},sa=Ta=>{var Xa,eb,ib;!d.editingShape&&(null==(Xa=a.current)?0:Xa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(ib=null==(eb=document.activeElement)?
void 0:eb.tagName)?ib:"")&&(Ta.preventDefault(),d.paste(Ta,H.current))},Ha=Ta=>{var Xa,eb,ib;!d.editingShape&&0<d.selectedShapes.size&&(null==(Xa=a.current)?0:Xa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(ib=null==(eb=document.activeElement)?void 0:eb.tagName)?ib:"")&&(Ta.preventDefault(),d.copy())};window.addEventListener("keydown",fa);window.addEventListener("keyup",la);document.addEventListener("paste",sa);document.addEventListener("copy",Ha);return()=>{window.removeEventListener("keydown",
fa);window.removeEventListener("keyup",la);document.removeEventListener("paste",sa);document.removeEventListener("copy",Ha)}},[])}function Hl(a){const {inputs:d,callbacks:k}=Cc(),H=fB.useRef(-1);return fB.useMemo(()=>({onPointerDown:fa=>{var la,sa;const {order:Ha=0}=fa;Ha||(null==(la=fa.currentTarget)?void 0:la.setPointerCapture(fa.pointerId));null==(sa=k.onPointerDown)?void 0:sa.call(k,{type:"shape",shape:a,order:Ha},fa);fa.order=Ha+1},onPointerMove:fa=>{var la;const {order:sa=0}=fa;null==(la=k.onPointerMove)?
void 0:la.call(k,{type:"shape",shape:a,order:sa},fa);fa.order=sa+1},onPointerUp:fa=>{var la,sa,Ha;const {order:Ta=0}=fa;Ta||(null==(la=fa.currentTarget)?void 0:la.releasePointerCapture(fa.pointerId));null==(sa=k.onPointerUp)?void 0:sa.call(k,{type:"shape",shape:a,order:Ta},fa);la=Date.now();sa=la-H.current;300<sa?H.current=la:300>=sa&&(null==(Ha=k.onDoubleClick)?void 0:Ha.call(k,{type:"shape",shape:a,order:Ta},fa),H.current=-1);fa.order=Ta+1},onPointerEnter:fa=>{var la;const {order:sa=0}=fa;null==
(la=k.onPointerEnter)?void 0:la.call(k,{type:"shape",shape:a,order:sa},fa);fa.order=sa+1},onPointerLeave:fa=>{var la;const {order:sa=0}=fa;null==(la=k.onPointerLeave)?void 0:la.call(k,{type:"shape",shape:a,order:sa},fa);fa.order=sa+1},onKeyUp:fa=>{var la;null==(la=k.onKeyUp)?void 0:la.call(k,{type:"shape",shape:a,order:-1},fa)},onKeyDown:fa=>{var la;null==(la=k.onKeyDown)?void 0:la.call(k,{type:"shape",shape:a,order:-1},fa)}}),[a.id,d,k])}function Ul(a){var {viewport:d,inputs:k,callbacks:H,components:fa}=
a;a=Mf(a,["viewport","inputs","callbacks","components"]);return(0,xB.jsx)(aG,{id:a.id,viewport:d,inputs:k,callbacks:H,components:fa,meta:a.meta,children:(0,xB.jsx)(XF,he({},a))})}function gf(){gf=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],H;for(H in k)Object.prototype.hasOwnProperty.call(k,H)&&(a[H]=k[H])}return a};return gf.apply(this,arguments)}function ig(a,d,{checkForDefaultPrevented:k=!0}={}){return function(H){null===a||void 0===a||
a(H);if(!1===k||!H.defaultPrevented)return null===d||void 0===d?void 0:d(H)}}function dh(...a){return d=>a.forEach(k=>{"function"===typeof k?k(d):null!==k&&void 0!==k&&(k.current=d)})}function uh(...a){return(0,fG.useCallback)(dh(...a),a)}function Dj(a,d=[]){let k=[];const H=()=>{const fa=k.map(la=>(0,Ms.createContext)(la));return function(la){const sa=(null===la||void 0===la?void 0:la[a])||fa;return(0,Ms.useMemo)(()=>({[`__scope${a}`]:lf(he({},la),{[a]:sa})}),[la,sa])}};H.scopeName=a;return[function(fa,
la){function sa(Xa){const {scope:eb,children:ib}=Xa,Db=Mf(Xa,["scope","children"]);Xa=(null===eb||void 0===eb?void 0:eb[a][Ta])||Ha;const Ob=(0,Ms.useMemo)(()=>Db,Object.values(Db));return(0,Ms.createElement)(Xa.Provider,{value:Ob},ib)}const Ha=(0,Ms.createContext)(la),Ta=k.length;k=[...k,la];sa.displayName=fa+"Provider";return[sa,function(Xa,eb){if(eb=(0,Ms.useContext)((null===eb||void 0===eb?void 0:eb[a][Ta])||Ha))return eb;if(void 0!==la)return la;throw Error(`\`${Xa}\` must be used within \`${fa}\``);
}]},fk(H,...d)]}function fk(...a){const d=a[0];if(1===a.length)return d;const k=()=>{const H=a.map(fa=>({useScope:fa(),scopeName:fa.scopeName}));return function(fa){const la=H.reduce((sa,{useScope:Ha,scopeName:Ta})=>{Ha=Ha(fa)[`__scope${Ta}`];return he(he({},sa),Ha)},{});return(0,Ms.useMemo)(()=>({[`__scope${d.scopeName}`]:la}),[la])}};k.scopeName=d.scopeName;return k}function Qg(a){return(0,Wm.isValidElement)(a)&&a.type===yB}function rl(a,d){const k=he({},d);for(const H in d){const fa=a[H],la=d[H];
/^on[A-Z]/.test(H)?fa&&la?k[H]=(...sa)=>{la(...sa);fa(...sa)}:fa&&(k[H]=fa):"style"===H?k[H]=he(he({},fa),la):"className"===H&&(k[H]=[fa,la].filter(Boolean).join(" "))}return he(he({},a),k)}function el(a,d){a&&(0,gG.flushSync)(()=>a.dispatchEvent(d))}function Mi(a){const d=(0,Zx.useRef)(a);(0,Zx.useEffect)(()=>{d.current=a});return(0,Zx.useMemo)(()=>(...k)=>{var H;return null===(H=d.current)||void 0===H?void 0:H.call(d,...k)},[])}function Zk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=
Mi(a);(0,hG.useEffect)(()=>{const H=fa=>{"Escape"===fa.key&&k(fa)};d.addEventListener("keydown",H);return()=>d.removeEventListener("keydown",H)},[k,d])}function Ij(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Mi(a),H=(0,$n.useRef)(!1),fa=(0,$n.useRef)(()=>{});(0,$n.useEffect)(()=>{const la=Ha=>{if(Ha.target&&!H.current){let Ta=function(){xm("dismissableLayer.pointerDownOutside",k,Xa,{discrete:!0})};const Xa={originalEvent:Ha};"touch"===Ha.pointerType?(d.removeEventListener("click",
fa.current),fa.current=Ta,d.addEventListener("click",fa.current,{once:!0})):Ta()}H.current=!1},sa=window.setTimeout(()=>{d.addEventListener("pointerdown",la)},0);return()=>{window.clearTimeout(sa);d.removeEventListener("pointerdown",la);d.removeEventListener("click",fa.current)}},[d,k]);return{onPointerDownCapture:()=>H.current=!0}}function qk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Mi(a),H=(0,$n.useRef)(!1);(0,$n.useEffect)(()=>{const fa=la=>{la.target&&!H.current&&
xm("dismissableLayer.focusOutside",k,{originalEvent:la},{discrete:!1})};d.addEventListener("focusin",fa);return()=>d.removeEventListener("focusin",fa)},[d,k]);return{onFocusCapture:()=>H.current=!0,onBlurCapture:()=>H.current=!1}}function dk(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function xm(a,d,k,{discrete:H}){const fa=k.originalEvent.target;k=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:k});d&&fa.addEventListener(a,d,{once:!0});H?el(fa,k):fa.dispatchEvent(k)}
function ni(a){const [d,k]=AB.useState(kG());Em(()=>{a||k(H=>null!==H&&void 0!==H?H:String(lG++))},[a]);return a||(d?`radix-${d}`:"")}function cj(a){return a.split("-")[0]}function pl(a){return["top","bottom"].includes(cj(a))?"x":"y"}function $k(a){return"y"===a?"height":"width"}function yj(a,d,k){let {reference:H,floating:fa}=a;var la=H.x+H.width/2-fa.width/2;const sa=H.y+H.height/2-fa.height/2;a=pl(d);var Ha=$k(a);Ha=H[Ha]/2-fa[Ha]/2;const Ta="x"===a;switch(cj(d)){case "top":la={x:la,y:H.y-fa.height};
break;case "bottom":la={x:la,y:H.y+H.height};break;case "right":la={x:H.x+H.width,y:sa};break;case "left":la={x:H.x-fa.width,y:sa};break;default:la={x:H.x,y:H.y}}switch(d.split("-")[1]){case "start":la[a]-=Ha*(k&&Ta?-1:1);break;case "end":la[a]+=Ha*(k&&Ta?-1:1)}return la}function ym(a){return"number"!=typeof a?he({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function zm(a){return lf(he({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function Yk(a,d){return oi(this,
null,function*(){var k;void 0===d&&(d={});const {x:H,y:fa,platform:la,rects:sa,elements:Ha,strategy:Ta}=a,{boundary:Xa="clippingAncestors",rootBoundary:eb="viewport",elementContext:ib="floating",altBoundary:Db=!1,padding:Ob=0}=d,Hb=ym(Ob),cc=Ha[Db?"floating"===ib?"reference":"floating":ib],sc=zm(yield la.getClippingRect({element:null==(k=yield null==la.isElement?void 0:la.isElement(cc))||k?cc:cc.contextElement||(yield null==la.getDocumentElement?void 0:la.getDocumentElement(Ha.floating)),boundary:Xa,
rootBoundary:eb,strategy:Ta}));k=zm(la.convertOffsetParentRelativeRectToViewportRelativeRect?yield la.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===ib?lf(he({},sa.floating),{x:H,y:fa}):sa.reference,offsetParent:yield null==la.getOffsetParent?void 0:la.getOffsetParent(Ha.floating),strategy:Ta}):sa[ib]);return{top:sc.top-k.top+Hb.top,bottom:k.bottom-sc.bottom+Hb.bottom,left:sc.left-k.left+Hb.left,right:k.right-sc.right+Hb.right}})}function Pm(a){return a.replace(/left|right|bottom|top/g,
d=>nG[d])}function Vl(a,d,k){void 0===k&&(k=!1);const H=a.split("-")[1],fa=pl(a);a=$k(fa);k="x"===fa?H===(k?"end":"start")?"right":"left":"start"===H?"bottom":"top";return d.reference[a]>d.floating[a]&&(k=Pm(k)),{main:k,cross:Pm(k)}}function Cn(a){return a.replace(/start|end/g,d=>oG[d])}function Rb(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function Sa(a){return CB.some(d=>0<=a[d])}function uc(a){return null==a?window:a&&a.document&&a.location&&
a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function tc(a){return uc(a).getComputedStyle(a)}function Tb(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||"").toLowerCase():""}function rc(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function nc(a){return a instanceof uc(a).HTMLElement}function Mb(a){return a instanceof uc(a).Element}function Jb(a){return"undefined"==
typeof ShadowRoot?!1:a instanceof uc(a).ShadowRoot||a instanceof ShadowRoot}function gc(a){const {overflow:d,overflowX:k,overflowY:H}=tc(a);return/auto|scroll|overlay|hidden/.test(d+H+k)}function Nc(a){const d=/firefox/i.test(rc());a=tc(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function Rc(){return!/^((?!chrome|android).)*safari/i.test(rc())}function Zc(a,
d,k){var H,fa,la,sa;void 0===d&&(d=!1);void 0===k&&(k=!1);var Ha=a.getBoundingClientRect();let Ta=1,Xa=1;d&&nc(a)&&(Ta=0<a.offsetWidth&&hw(Ha.width)/a.offsetWidth||1,Xa=0<a.offsetHeight&&hw(Ha.height)/a.offsetHeight||1);a=Mb(a)?uc(a):window;d=!Rc()&&k;k=(Ha.left+(d&&null!=(H=null==(fa=a.visualViewport)?void 0:fa.offsetLeft)?H:0))/Ta;H=(Ha.top+(d&&null!=(la=null==(sa=a.visualViewport)?void 0:sa.offsetTop)?la:0))/Xa;la=Ha.width/Ta;Ha=Ha.height/Xa;return{width:la,height:Ha,top:H,right:k+la,bottom:H+
Ha,left:k,x:k,y:H}}function qd(a){return(d=a,(d instanceof uc(d).Node?a.ownerDocument:a.document)||window.document).documentElement;var d}function Wd(a){return Mb(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function De(a){return Zc(qd(a)).left+Wd(a).scrollLeft}function me(a){return"html"===Tb(a)?a:a.assignedSlot||a.parentNode||(Jb(a)?a.host:null)||qd(a)}function ye(a){return nc(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}
function zf(a){for(var d=uc(a),k=ye(a);k&&["table","td","th"].includes(Tb(k))&&"static"===getComputedStyle(k).position;)k=ye(k);if(!k||"html"!==Tb(k)&&("body"!==Tb(k)||"static"!==getComputedStyle(k).position||Nc(k))){if(!k)a:{a=me(a);for(Jb(a)&&(a=a.host);nc(a)&&!["html","body"].includes(Tb(a));){if(Nc(a)){k=a;break a}a=a.parentNode}k=null}d=k||d}return d}function Kf(a){if(nc(a))return{width:a.offsetWidth,height:a.offsetHeight};a=Zc(a);return{width:a.width,height:a.height}}function ze(a){const d=
me(a);return["html","body","#document"].includes(Tb(d))?a.ownerDocument.body:nc(d)&&gc(d)?d:ze(d)}function Rg(a,d){var k;void 0===d&&(d=[]);var H=ze(a);a=H===(null==(k=a.ownerDocument)?void 0:k.body);k=uc(H);H=a?[k].concat(k.visualViewport||[],gc(H)?H:[]):H;d=d.concat(H);return a?d:d.concat(Rg(H))}function oh(a,d,k){return"viewport"===d?zm(function(H,fa){var la=uc(H),sa=qd(H);la=la.visualViewport;H=sa.clientWidth;sa=sa.clientHeight;let Ha=0,Ta=0;if(la){H=la.width;sa=la.height;const Xa=Rc();(Xa||!Xa&&
"fixed"===fa)&&(Ha=la.offsetLeft,Ta=la.offsetTop)}return{width:H,height:sa,x:Ha,y:Ta}}(a,k)):Mb(d)?function(H,fa){var la=Zc(H,!1,"fixed"===fa);fa=la.top+H.clientTop;la=la.left+H.clientLeft;return{top:fa,left:la,x:la,y:fa,right:la+H.clientWidth,bottom:fa+H.clientHeight,width:H.clientWidth,height:H.clientHeight}}(d,k):zm(function(H){var fa;const la=qd(H);var sa=Wd(H);const Ha=null==(fa=H.ownerDocument)?void 0:fa.body;fa=Pu(la.scrollWidth,la.clientWidth,Ha?Ha.scrollWidth:0,Ha?Ha.clientWidth:0);const Ta=
Pu(la.scrollHeight,la.clientHeight,Ha?Ha.scrollHeight:0,Ha?Ha.clientHeight:0);H=-sa.scrollLeft+De(H);sa=-sa.scrollTop;return"rtl"===tc(Ha||la).direction&&(H+=Pu(la.clientWidth,Ha?Ha.clientWidth:0)-fa),{width:fa,height:Ta,x:H,y:sa}}(qd(a)))}function pg(a){const d=Rg(a),k=["absolute","fixed"].includes(tc(a).position)&&nc(a)?zf(a):a;return Mb(k)?d.filter(H=>{var fa;if(fa=Mb(H))a:if(fa=null==k.getRootNode?void 0:k.getRootNode(),H.contains(k))fa=!0;else{if(fa&&Jb(fa)){fa=k;do{if(fa&&H===fa){fa=!0;break a}fa=
fa.parentNode||fa.host}while(fa)}fa=!1}return fa&&"body"!==Tb(H)}):[]}function mg(a,d,k,H){void 0===H&&(H={});const {ancestorScroll:fa=!0,ancestorResize:la=!0,elementResize:sa=!0,animationFrame:Ha=!1}=H,Ta=fa&&!Ha,Xa=la&&!Ha,eb=Ta||Xa?[...(Mb(a)?Rg(a):[]),...Rg(d)]:[];eb.forEach(Hb=>{Ta&&Hb.addEventListener("scroll",k,{passive:!0});Xa&&Hb.addEventListener("resize",k)});let ib,Db=null;if(sa){let Hb=!0;Db=new ResizeObserver(()=>{Hb||k();Hb=!1});Mb(a)&&!Ha&&Db.observe(a);Db.observe(d)}let Ob=Ha?Zc(a):
null;return Ha&&function cc(){const sc=Zc(a);!Ob||sc.x===Ob.x&&sc.y===Ob.y&&sc.width===Ob.width&&sc.height===Ob.height||k();Ob=sc;ib=requestAnimationFrame(cc)}(),k(),()=>{var cc;eb.forEach(sc=>{Ta&&sc.removeEventListener("scroll",k);Xa&&sc.removeEventListener("resize",k)});null==(cc=Db)||cc.disconnect();Db=null;Ha&&cancelAnimationFrame(ib)}}function jh(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let k,H;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var fa=
a.length;if(fa!=d.length)return!1;for(k=fa;0!==k--;)if(!jh(a[k],d[k]))return!1;return!0}H=Object.keys(a);fa=H.length;if(fa!==Object.keys(d).length)return!1;for(k=fa;0!==k--;)if(!Object.prototype.hasOwnProperty.call(d,H[k]))return!1;for(k=fa;0!==k--;)if(fa=H[k],!("_owner"===fa&&a.$$typeof||jh(a[fa],d[fa])))return!1;return!0}return a!==a&&d!==d}function vh(a){const d=Do.useRef(a);by(()=>{d.current=a});return d}function rg(a){let {middleware:d,placement:k="bottom",strategy:H="absolute",whileElementsMounted:fa}=
void 0===a?{}:a;const la=Do.useRef(null),sa=Do.useRef(null),Ha=vh(fa),Ta=Do.useRef(null),[Xa,eb]=Do.useState({x:null,y:null,strategy:H,placement:k,middlewareData:{}}),[ib,Db]=Do.useState(d);jh(null==ib?void 0:ib.map(ec=>{({options:ec}=ec);return ec}),null==d?void 0:d.map(ec=>{({options:ec}=ec);return ec}))||Db(d);const Ob=Do.useCallback(()=>{la.current&&sa.current&&rG(la.current,sa.current,{middleware:ib,placement:k,strategy:H}).then(ec=>{Hb.current&&sG.flushSync(()=>{eb(ec)})})},[ib,k,H]);by(()=>
{Hb.current&&Ob()},[Ob]);const Hb=Do.useRef(!1);by(()=>{Hb.current=!0;return()=>{Hb.current=!1}},[]);const cc=Do.useCallback(()=>{"function"===typeof Ta.current&&(Ta.current(),Ta.current=null);if(la.current&&sa.current)if(Ha.current){const ec=Ha.current(la.current,sa.current,Ob);Ta.current=ec}else Ob()},[Ob,Ha]),sc=Do.useCallback(ec=>{la.current=ec;cc()},[cc]),Ub=Do.useCallback(ec=>{sa.current=ec;cc()},[cc]),kc=Do.useMemo(()=>({reference:la,floating:sa}),[]);return Do.useMemo(()=>lf(he({},Xa),{update:Ob,
refs:kc,reference:sc,floating:Ub}),[Xa,Ob,kc,sc,Ub])}function yi(a){const [d,k]=(0,uG.useState)(void 0);Em(()=>{if(a){k({width:a.offsetWidth,height:a.offsetHeight});const H=new ResizeObserver(fa=>{if(Array.isArray(fa)&&fa.length){fa=fa[0];if("borderBoxSize"in fa){fa=fa.borderBoxSize;var la=Array.isArray(fa)?fa[0]:fa;fa=la.inlineSize;la=la.blockSize}else fa=a.offsetWidth,la=a.offsetHeight;k({width:fa,height:la})}});H.observe(a,{box:"border-box"});return()=>H.unobserve(a)}k(void 0)},[a]);return d}function hk(a){return void 0!==
a}function Bg(a){return null!==a}function Yi(a){const [d,k="center"]=a.split("-");return[d,k]}function ti(a,d){return(0,Qq.useReducer)((k,H)=>{H=d[k][H];return null!==H&&void 0!==H?H:k},a)}function Ti(a){const [d,k]=(0,Qq.useState)(),H=(0,Qq.useRef)({}),fa=(0,Qq.useRef)(a),la=(0,Qq.useRef)("none"),[sa,Ha]=ti(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Qq.useEffect)(()=>
{const Ta=Ni(H.current);la.current="mounted"===sa?Ta:"none"},[sa]);Em(()=>{const Ta=H.current,Xa=fa.current;if(Xa!==a){const eb=la.current,ib=Ni(Ta);a?Ha("MOUNT"):"none"===ib||"none"===(null===Ta||void 0===Ta?void 0:Ta.display)?Ha("UNMOUNT"):Xa&&eb!==ib?Ha("ANIMATION_OUT"):Ha("UNMOUNT");fa.current=a}},[a,Ha]);Em(()=>{if(d){const Ta=eb=>{const ib=Ni(H.current).includes(eb.animationName);eb.target===d&&ib&&(0,EG.flushSync)(()=>Ha("ANIMATION_END"))},Xa=eb=>{eb.target===d&&(la.current=Ni(H.current))};
d.addEventListener("animationstart",Xa);d.addEventListener("animationcancel",Ta);d.addEventListener("animationend",Ta);return()=>{d.removeEventListener("animationstart",Xa);d.removeEventListener("animationcancel",Ta);d.removeEventListener("animationend",Ta)}}Ha("ANIMATION_END")},[d,Ha]);return{isPresent:["mounted","unmountSuspended"].includes(sa),ref:(0,Qq.useCallback)(Ta=>{Ta&&(H.current=getComputedStyle(Ta));k(Ta)},[])}}function Ni(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}
function pi({prop:a,defaultProp:d,onChange:k=()=>{}}){const [H,fa]=Wl({defaultProp:d,onChange:k}),la=void 0!==a;d=la?a:H;const sa=Mi(k);k=(0,iw.useCallback)(Ha=>{la?(Ha="function"===typeof Ha?Ha(a):Ha,Ha!==a&&sa(Ha)):fa(Ha)},[la,a,fa,sa]);return[d,k]}function Wl({defaultProp:a,onChange:d}){a=(0,iw.useState)(a);const [k]=a,H=(0,iw.useRef)(k),fa=Mi(d);(0,iw.useEffect)(()=>{H.current!==k&&(fa(k),H.current=k)},[k,H,fa]);return a}function rm(a,d){const k=Math.abs(d.top-a.y),H=Math.abs(d.bottom-a.y),fa=
Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(k,H,fa,a)){case a:return"left";case fa:return"right";case k:return"top";case H:return"bottom";default:return null}}function Kh(a){a=a.slice();a.sort((d,k)=>d.x<k.x?-1:d.x>k.x?1:d.y<k.y?-1:d.y>k.y?1:0);return bk(a)}function bk(a){if(1>=a.length)return a.slice();const d=[];for(var k=0;k<a.length;k++){for(var H=a[k];2<=d.length;){var fa=d[d.length-1],la=d[d.length-2];if((fa.x-la.x)*(H.y-la.y)>=(fa.y-la.y)*(H.x-la.x))d.pop();else break}d.push(H)}d.pop();
k=[];for(H=a.length-1;0<=H;H--){for(fa=a[H];2<=k.length;){la=k[k.length-1];const sa=k[k.length-2];if((la.x-sa.x)*(fa.y-sa.y)>=(la.y-sa.y)*(fa.x-sa.x))k.pop();else break}k.push(fa)}k.pop();return 1===d.length&&1===k.length&&d[0].x===k[0].x&&d[0].y===k[0].y?d:d.concat(k)}function mk(a){var {side:d,content:k,sideOffset:H=10}=a;a=Mf(a,["side","content","sideOffset"]);return k?(0,Fr.jsx)(QG,{delayDuration:300,children:(0,Fr.jsxs)(RG,{children:[(0,Fr.jsx)(SG,{asChild:!0,children:a.children}),(0,Fr.jsx)(TG,
{children:(0,Fr.jsxs)(UG,lf(he({className:"tl-tooltip-content",sideOffset:H,side:d},a),{children:[k,(0,Fr.jsx)(VG,{className:"tl-tooltip-arrow"})]}))})]})}):(0,Fr.jsx)(Fr.Fragment,{children:a.children})}function Fg(a){var {className:d,tooltip:k,tooltipSide:H}=a;a=Mf(a,["className","tooltip","tooltipSide"]);return(0,QB.jsx)(mk,{content:k,side:H,children:(0,QB.jsx)("button",he({className:"tl-button "+(null!=d?d:"")},a))})}function kj(a){var {toggle:d=!0,pressed:k,onPressedChange:H,className:fa,tooltip:la}=
a;a=Mf(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,jy.jsx)(mk,{content:la,children:(0,jy.jsx)("div",{className:"inline-block",children:(0,jy.jsx)(XG,lf(he({},a),{"data-toggle":d,className:"tl-toggle-input"+(fa?" "+fa:""),pressed:k,onPressedChange:H}))})})}function jl(a){var d=a+"CollectionProvider";const [k,H]=Dj(d),[fa,la]=k(d,{collectionRef:{current:null},itemMap:new Map}),sa=eb=>{const {scope:ib,children:Db}=eb;eb=lq.default.useRef(null);const Ob=lq.default.useRef(new Map).current;
return lq.default.createElement(fa,{scope:ib,itemMap:Ob,collectionRef:eb},Db)};Object.assign(sa,{displayName:d});const Ha=a+"CollectionSlot";d=lq.default.forwardRef((eb,ib)=>{const {scope:Db,children:Ob}=eb;eb=la(Ha,Db);ib=uh(ib,eb.collectionRef);return lq.default.createElement(kq,{ref:ib},Ob)});Object.assign(d,{displayName:Ha});const Ta=a+"CollectionItemSlot",Xa=lq.default.forwardRef((eb,ib)=>{const {scope:Db,children:Ob}=eb,Hb=Mf(eb,["scope","children"]),cc=lq.default.useRef(null);eb=uh(ib,cc);
const sc=la(Ta,Db);lq.default.useEffect(()=>{sc.itemMap.set(cc,he({ref:cc},Hb));return()=>void sc.itemMap.delete(cc)});return lq.default.createElement(kq,{["data-radix-collection-item"]:"",ref:eb},Ob)});Object.assign(Xa,{displayName:Ta});return[{Provider:sa,Slot:d,ItemSlot:Xa},function(eb){const ib=la(a+"CollectionConsumer",eb);return lq.default.useCallback(()=>{const Db=ib.collectionRef.current;if(!Db)return[];const Ob=Array.from(Db.querySelectorAll("[data-radix-collection-item]"));return Array.from(ib.itemMap.values()).sort((Hb,
cc)=>Ob.indexOf(Hb.ref.current)-Ob.indexOf(cc.ref.current))},[ib.collectionRef,ib.itemMap])},H]}function ko(a){const d=(0,TB.useContext)(YG);return a||d||"ltr"}function ki(){(0,ZG.useEffect)(()=>{var a,d;const k=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=k[0])&&void 0!==a?a:op());document.body.insertAdjacentElement("beforeend",null!==(d=k[1])&&void 0!==d?d:op());ky++;return()=>{1===ky&&document.querySelectorAll("[data-radix-focus-guard]").forEach(H=>
H.remove());ky--}},[])}function op(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return a}function Rj(a,{select:d=!1}={}){const k=document.activeElement;for(const H of a)if(sj(H,{select:d}),document.activeElement!==k)break}function ik(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:k=>{const H="INPUT"===k.tagName&&"hidden"===k.type;
return k.disabled||k.hidden||H?NodeFilter.FILTER_SKIP:0<=k.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function zi(a,d){for(const k of a)if(!uo(k,{upTo:d}))return k}function uo(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function sj(a,{select:d=!1}={}){if(a&&a.focus){const k=document.activeElement;a.focus({preventScroll:!0});
a!==k&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function Mm(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function qp(a){return a.filter(d=>"A"!==d.tagName)}function cn(a,d,k){a=a.key;k="rtl"!==k?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(k))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(k))return fH[k]}function li(a){const d=document.activeElement;for(const k of a){if(k===d)break;k.focus();
if(document.activeElement!==d)break}}function Xh(a,d){return a.map((k,H)=>a[(d+H)%a.length])}function ak(a,d){var k=(0,jH.useState)(function(){return{value:a,callback:d,facade:{get current(){return k.value},set current(H){var fa=k.value;fa!==H&&(k.value=H,k.callback(H,fa))}}}})[0];k.callback=d;return k.facade}function lo(a,d){return ak(d||null,function(k){return a.forEach(function(H){"function"===typeof H?H(k):H&&(H.current=k);return H})})}function sn(a){return a}function Dl(a,d){void 0===d&&(d=sn);
var k=[],H=!1;return{read:function(){if(H)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return k.length?k[k.length-1]:a},useMedium:function(fa){var la=d(fa,H);k.push(la);return function(){k=k.filter(function(sa){return sa!==la})}},assignSyncMedium:function(fa){for(H=!0;k.length;){var la=k;k=[];la.forEach(fa)}k={push:function(sa){return fa(sa)},filter:function(){return k}}},assignMedium:function(fa){H=!0;var la=[];if(k.length){var sa=
k;k=[];sa.forEach(fa);la=k}var Ha=function(){var Ta=la;la=[];Ta.forEach(fa)};Promise.resolve().then(Ha);k={push:function(Ta){la.push(Ta);Promise.resolve().then(Ha)},filter:function(Ta){la=la.filter(Ta);return k}}}}}function mo(a){const d=document.activeElement;for(const k of a){if(k===d)break;k.focus();if(document.activeElement!==d)break}}function rp(a,d){return a.map((k,H)=>a[(d+H)%a.length])}function ck(a,d,k){const H=1<d.length&&Array.from(d).every(la=>la===d[0])?d[0]:d,fa=k?a.indexOf(k):-1;a=
rp(a,Math.max(fa,0));1===H.length&&(a=a.filter(la=>la!==k));a=a.find(la=>la.toLowerCase().startsWith(H.toLowerCase()));return a!==k?a:void 0}function Rm(a){return d=>"mouse"===d.pointerType?a(d):void 0}function nn(a,[d,k]){return Math.min(k,Math.max(d,a))}function Dn(a){const d=(0,By.useRef)({value:a,previous:a});return(0,By.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function Ii(a=[],d,k){a=[...a];a[k]=d;return a.sort((H,
fa)=>H-fa)}function oj(a,d,k){return 100/(k-d)*(a-d)}function pp(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function Tn(a,d){if(1===a.length)return 0;a=a.map(H=>Math.abs(H-d));const k=Math.min(...a);return a.indexOf(k)}function Fl(a,d,k){a/=2;const H=Gl([0,50],[0,a]);return(a-H(d)*k)*k}function En(a){return a.slice(0,-1).map((d,k)=>a[k+1]-d)}function Gl(a,d){return k=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(k-a[0])}function sm(a,d){d=Math.pow(10,
d);return Math.round(a*d)/d}function Fn(a){function d(Xa){return Xa?(0,Sk.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Xa},children:(0,Sk.jsx)("div",{className:`w-full h-full bg-${Xa}-500`})}):(0,Sk.jsx)("div",{className:"tl-color-bg",children:(0,Sk.jsx)(Ph,{name:"color-swatch"})})}var {color:k,opacity:H,popoverSide:fa,setColor:la,setOpacity:sa}=a;a=Mf(a,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:Ha}}=Le.default.useContext(ej),Ta=Le.default.useMemo(()=>
{let Xa="";return dl(eb=>{la(Xa)},100,eb=>{Xa=eb.target.value})},[]);return(0,Sk.jsx)(In,lf(he({},a),{border:!0,arrow:!0,side:fa,label:(0,Sk.jsx)(mk,{content:Ha("whiteboard/color"),side:fa,sideOffset:14,children:d(k)}),children:(0,Sk.jsxs)("div",{className:"p-1",children:[(0,Sk.jsx)("div",{className:"tl-color-palette",children:Object.values(hs).map(Xa=>(0,Sk.jsx)("button",{className:`tl-color-drip m-1${Xa===k?" active":""}`,onClick:()=>la(Xa),children:d(Xa)},Xa))}),(0,Sk.jsxs)("div",{className:"flex items-center tl-custom-color",
children:[(0,Sk.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${bj(k)?"":"active"}`,children:(0,Sk.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,Sk.jsx)("input",he({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(k)?k:"#000000",onChange:Ta,style:{opacity:bj(k)?0:1}},a))})}),(0,Sk.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:Ha("whiteboard/select-custom-color")})]}),sa&&(0,Sk.jsx)("div",
{className:"mx-1 my-2",children:(0,Sk.jsxs)(wl,{defaultValue:[null!=H?H:0],onValueCommit:Xa=>sa(Xa[0]),max:1,step:.1,"aria-label":Ha("whiteboard/opacity"),className:"tl-slider-root",children:[(0,Sk.jsx)(bv,{className:"tl-slider-track",children:(0,Sk.jsx)(xk,{className:"tl-slider-range"})}),(0,Sk.jsx)(oq,{className:"tl-slider-thumb"})]})})]})}))}function vi(a,d){a&&(0,Jn.flushSync)(()=>a.dispatchEvent(d))}function Qo(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Mi(a),
H=(0,Kl.useRef)(!1),fa=(0,Kl.useRef)(()=>{});(0,Kl.useEffect)(()=>{const la=Ha=>{if(Ha.target&&!H.current){let Ta=function(){no("dismissableLayer.pointerDownOutside",k,Xa,{discrete:!0})};const Xa={originalEvent:Ha};"touch"===Ha.pointerType?(d.removeEventListener("click",fa.current),fa.current=Ta,d.addEventListener("click",fa.current,{once:!0})):Ta()}H.current=!1},sa=window.setTimeout(()=>{d.addEventListener("pointerdown",la)},0);return()=>{window.clearTimeout(sa);d.removeEventListener("pointerdown",
la);d.removeEventListener("click",fa.current)}},[d,k]);return{onPointerDownCapture:()=>H.current=!0}}function kl(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Mi(a),H=(0,Kl.useRef)(!1);(0,Kl.useEffect)(()=>{const fa=la=>{la.target&&!H.current&&no("dismissableLayer.focusOutside",k,{originalEvent:la},{discrete:!1})};d.addEventListener("focusin",fa);return()=>d.removeEventListener("focusin",fa)},[d,k]);return{onFocusCapture:()=>H.current=!0,onBlurCapture:()=>H.current=
!1}}function tm(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function no(a,d,k,{discrete:H}){const fa=k.originalEvent.target;k=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:k});d&&fa.addEventListener(a,d,{once:!0});H?vi(fa,k):fa.dispatchEvent(k)}function en(a,{select:d=!1}={}){const k=document.activeElement;for(const H of a)if(Ml(H,{select:d}),document.activeElement!==k)break}function Np(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,
{acceptNode:k=>{const H="INPUT"===k.tagName&&"hidden"===k.type;return k.disabled||k.hidden||H?NodeFilter.FILTER_SKIP:0<=k.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function oo(a,d){for(const k of a)if(!tl(k,{upTo:d}))return k}function tl(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Ml(a,{select:d=!1}=
{}){if(a&&a.focus){const k=document.activeElement;a.focus({preventScroll:!0});a!==k&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function tn(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function Ug(a){return a.filter(d=>"A"!==d.tagName)}function Pp(a){return void 0!==a}function Op(a){return null!==a}function un(a){const [d,k="center"]=a.split("-");return[d,k]}function Pl(a){const d=Mi(a),k=(0,Ff.useRef)(""),H=(0,Ff.useRef)(0);a=(0,Ff.useCallback)(la=>{la=k.current+la;
d(la);(function Ta(Ha){k.current=Ha;window.clearTimeout(H.current);""!==Ha&&(H.current=window.setTimeout(()=>Ta(""),1E3))})(la)},[d]);const fa=(0,Ff.useCallback)(()=>{k.current="";window.clearTimeout(H.current)},[]);(0,Ff.useEffect)(()=>()=>window.clearTimeout(H.current),[]);return[k,a,fa]}function em(a,d,k){const H=1<d.length&&Array.from(d).every(la=>la===d[0])?d[0]:d,fa=k?a.indexOf(k):-1;a=Nl(a,Math.max(fa,0));1===H.length&&(a=a.filter(la=>la!==k));a=a.find(la=>la.textValue.toLowerCase().startsWith(H.toLowerCase()));
return a!==k?a:void 0}function Nl(a,d){return a.map((k,H)=>a[(d+H)%a.length])}function fm(a){var {options:d,tooltip:k,popoverSide:H,chevron:fa=!0,value:la,onValueChange:sa}=a;a=Mf(a,"options tooltip popoverSide chevron value onValueChange".split(" "));const [Ha,Ta]=oC.useState(!1);return(0,mh.jsx)("div",lf(he({},a),{className:"tl-select-input",children:(0,mh.jsxs)(Rr,{open:Ha,onOpenChange:Ta,value:la,onValueChange:sa,children:[(0,mh.jsx)(mk,{content:k,side:H,children:(0,mh.jsxs)(yC,{className:"tl-select-input-trigger",
children:[(0,mh.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,mh.jsx)(AC,{})}),fa&&(0,mh.jsx)(BC,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,mh.jsx)(Ph,{name:Ha?"chevron-up":"chevron-down"})})]})}),(0,mh.jsx)(Fm,{className:"tl-select-input-portal",children:(0,mh.jsxs)(Ny,{className:"tl-select-input-content",side:H,position:"popper",sideOffset:14,align:"center",onKeyDown:Xa=>Xa.stopPropagation(),children:[(0,mh.jsx)(CC,{}),(0,mh.jsx)(zC,{className:"tl-select-input-viewport",
children:d.map(Xa=>(0,mh.jsx)(ao,{className:"tl-select-input-select-item",value:Xa.value,children:(0,mh.jsx)(Cd,{children:Xa.label})},Xa.value))}),(0,mh.jsx)(ii,{})]})})]})}))}function Un(a){var {scaleLevel:d,compact:k,popoverSide:H}=a;Mf(a,["scaleLevel","compact","popoverSide"]);const fa=He();({handlers:{t:a}}=DC.default.useContext(ej));const la=[{label:k?"XS":a("whiteboard/extra-small"),value:"xs"},{label:k?"SM":a("whiteboard/small"),value:"sm"},{label:k?"MD":a("whiteboard/medium"),value:"md"},
{label:k?"LG":a("whiteboard/large"),value:"lg"},{label:k?"XL":a("whiteboard/extra-large"),value:"xl"},{label:k?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,iv.jsx)(fm,{tooltip:a("whiteboard/scale-level"),options:la,value:d,popoverSide:H,chevron:!k,onValueChange:sa=>{fa.api.setScaleLevel(sa)}})}function Ol(a,d){return function(k){return a(d(k))}}function dn(a,d){return d(a)}function vj(a,d){return function(k){return a(d,k)}}function hm(a,d){return function(){return a(d)}}function cl(a,d){d(a);
return a}function tj(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return d}function Qp(a){a()}function Nm(a){return function(){return a}}function po(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(){d.map(Qp)}}function wj(){}function Uh(a,d){return a(1,d)}function vn(a,d){a(0,d)}function vp(a){a(2)}function Jq(a){return a(4)}function dg(a,d){return Uh(a,vj(d,0))}function Sj(a,d){var k=a(1,function(H){k();d(H)});return k}function Zg(){var a=
[];return function(d,k){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(k),function(){var H=a.indexOf(k);-1<H&&a.splice(H,1)};case 0:a.slice().forEach(function(H){H(k)});break;default:throw Error("unrecognized action "+d);}}}function og(a){var d=a,k=Zg();return function(H,fa){switch(H){case 1:fa(d);break;case 0:d=fa;break;case 4:return d}return k(H,fa)}}function Ro(a){var d,k;return function(H,fa){switch(H){case 1:if(fa){if(k===fa)break;d&&d();k=fa;return d=a(1,fa)}d&&d();return wj;
case 2:d&&d();k=null;break;default:throw Error("unrecognized action "+H);}}}function nk(a){return cl(Zg(),function(d){return dg(a,d)})}function uj(a,d){return cl(og(d),function(k){return dg(a,k)})}function Nj(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(H){return d.reduceRight(dn,H)}}function wf(a){for(var d=arguments.length,k=Array(1<d?d-1:0),H=1;H<d;H++)k[H-1]=arguments[H];var fa=Nj.apply(void 0,k);return function(la,sa){switch(la){case 1:return Uh(a,fa(sa));
case 2:a(2);break;default:throw Error("unrecognized action "+la);}}}function wi(a,d){return a===d}function Ui(a){void 0===a&&(a=wi);var d;return function(k){return function(H){a(d,H)||(d=H,k(H))}}}function Yh(a){return function(d){return function(k){a(k)&&d(k)}}}function tg(a){return function(d){return Ol(d,a)}}function um(a){return function(d){return function(){return d(a)}}}function Xl(a,d){return function(k){return function(H){return k(d=a(d,H))}}}function Kj(a){return function(d){return function(k){0<
a?a--:d(k)}}}function Bm(a){var d,k;return function(H){return function(fa){d=fa;k||=setTimeout(function(){k=void 0;H(d)},a)}}}function Sm(a){var d,k;return function(H){return function(fa){d=fa;k&&clearTimeout(k);k=setTimeout(function(){H(d)},a)}}}function ph(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];var H=Array(d.length),fa=0,la=null,sa=Math.pow(2,d.length)-1;d.forEach(function(Ha,Ta){var Xa=Math.pow(2,Ta);Uh(Ha,function(eb){var ib=fa;fa|=Xa;H[Ta]=eb;ib!==sa&&fa===sa&&
la&&(la(),la=null)})});return function(Ha){return function(Ta){var Xa=function(){return Ha([Ta].concat(H))};fa===sa?Xa():la=Xa}}}function zo(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(H,fa){switch(H){case 1:return po.apply(void 0,d.map(function(la){return la(1,fa)}));case 2:break;default:throw Error("unrecognized action "+H);}}}function ci(a,d){void 0===d&&(d=wi);return wf(a,Ui(d))}function Xj(){for(var a=Zg(),d=arguments.length,k=Array(d),H=0;H<d;H++)k[H]=
arguments[H];var fa=Array(k.length),la=0,sa=Math.pow(2,k.length)-1;k.forEach(function(Ha,Ta){var Xa=Math.pow(2,Ta);Uh(Ha,function(eb){fa[Ta]=eb;la|=Xa;la===sa&&a(0,fa)})});return function(Ha,Ta){switch(Ha){case 1:return la===sa&&Ta(fa),a(1,Ta);case 2:a(2);break;default:throw Error("unrecognized action "+Ha);}}}function si(a,d,k){void 0===d&&(d=[]);k=(void 0===k?{singleton:!0}:k).singleton;return{id:Symbol(),constructor:a,dependencies:d,singleton:k}}function wp(a){var d=new Map;return function fa(H){var la=
H.id,sa=H.constructor,Ha=H.dependencies;if((H=H.singleton)&&d.has(la))return d.get(la);sa=sa(Ha.map(function(Ta){return fa(Ta)}));H&&d.set(la,sa);return sa}(a)}function jr(a,d){if(null==a)return{};var k={},H=Object.keys(a),fa;for(fa=0;fa<H.length;fa++){var la=H[fa];0<=d.indexOf(la)||(k[la]=a[la])}return k}function Kq(a,d){if(a){if("string"===typeof a)return So(a,d);var k=Object.prototype.toString.call(a).slice(8,-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);
if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return So(a,d)}}function So(a,d){if(null==d||d>a.length)d=a.length;for(var k=0,H=Array(d);k<d;k++)H[k]=a[k];return H}function Gn(a,d){var k="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=k.call(a)).next.bind(k);if(Array.isArray(a)||(k=Kq(a))||d&&a&&"number"===typeof a.length){k&&(a=k);var H=0;return function(){return H>=a.length?{done:!0}:{done:!1,value:a[H++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function ro(a,d){for(var k={},H={},fa=0,la=a.length;fa<la;)H[a[fa]]=1,fa+=1;for(var sa in d)H.hasOwnProperty(sa)||(k[sa]=d[sa]);return k}function Pj(a,d,k){function H(ib,Db){ib.propsReady&&(0,ib.propsReady)(0,!1);for(var Ob=Gn(sa),Hb;!(Hb=Ob()).done;)Hb=Hb.value,(0,ib[d.required[Hb]])(0,Db[Hb]);for(Ob=Gn(Ha);!(Hb=Ob()).done;)if(Hb=Hb.value,Hb in Db)(0,ib[d.optional[Hb]])(0,Db[Hb]);ib.propsReady&&(0,ib.propsReady)(0,!0)}function fa(ib){return Ta.reduce(function(Db,Ob){Db[Ob]=function(Hb){(0,ib[d.methods[Ob]])(0,
Hb)};return Db},{})}function la(ib){return Xa.reduce(function(Db,Ob){Db[Ob]=Ro(ib[d.events[Ob]]);return Db},{})}var sa=Object.keys(d.required||{}),Ha=Object.keys(d.optional||{}),Ta=Object.keys(d.methods||{}),Xa=Object.keys(d.events||{}),eb=(0,Kn.createContext)({});return{Component:(0,Kn.forwardRef)(function(ib,Db){var Ob=ib.children,Hb=jr(ib,HC),cc=(0,Kn.useState)(function(){return cl(wp(a),function(Ub){return H(Ub,Hb)})})[0],sc=(0,Kn.useState)(hm(la,cc))[0];au(function(){for(var Ub=Gn(Xa),kc;!(kc=
Ub()).done;)if(kc=kc.value,kc in Hb)(0,sc[kc])(1,Hb[kc]);return function(){Object.values(sc).map(vp)}},[Hb,sc,cc]);au(function(){H(cc,Hb)});(0,Kn.useImperativeHandle)(Db,Nm(fa(cc)));return(0,Kn.createElement)(eb.Provider,{value:cc},k?(0,Kn.createElement)(k,ro([].concat(sa,Ha,Xa),Hb),Ob):Ob)}),usePublisher:function(ib){return(0,Kn.useCallback)(vj(vn,(0,Kn.useContext)(eb)[ib]),[ib])},useEmitterValue:function(ib){var Db=(0,Kn.useContext)(eb)[ib];ib=(0,Kn.useState)(hm(Jq,Db));var Ob=ib[0],Hb=ib[1];au(function(){return Uh(Db,
function(cc){cc!==Ob&&Hb(Nm(cc))})},[Db,Ob]);return Ob},useEmitter:function(ib,Db){var Ob=(0,Kn.useContext)(eb)[ib];au(function(){return Ob(1,Db)},[Db,Ob])}}}function Mh(){return Mh=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],H;for(H in k)Object.prototype.hasOwnProperty.call(k,H)&&(a[H]=k[H])}return a},Mh.apply(this,arguments)}function fn(a,d){if(null==a)return{};var k,H,fa={},la=Object.keys(a);for(H=0;H<la.length;H++)0<=d.indexOf(k=la[H])||(fa[k]=a[k]);return fa}
function Zn(a,d){(null==d||d>a.length)&&(d=a.length);for(var k=0,H=Array(d);k<d;k++)H[k]=a[k];return H}function Tj(a,d){var k="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=k.call(a)).next.bind(k);if(Array.isArray(a)||(k=function(fa,la){if(fa){if("string"==typeof fa)return Zn(fa,la);var sa=Object.prototype.toString.call(fa).slice(8,-1);return"Object"===sa&&fa.constructor&&(sa=fa.constructor.name),"Map"===sa||"Set"===sa?Array.from(fa):"Arguments"===sa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sa)?
Zn(fa,la):void 0}}(a))||d&&a&&"number"==typeof a.length){k&&(a=k);var H=0;return function(){return H>=a.length?{done:!0}:{done:!1,value:a[H++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Oi(a,d){void 0===d&&(d=!0);var k=(0,$h.useRef)(null),H=function(la){};if("undefined"!=typeof ResizeObserver){var fa=new ResizeObserver(function(la){la=la[0].target;null!==la.offsetParent&&a(la)});
H=function(la){la&&d?(fa.observe(la),k.current=la):(k.current&&fa.unobserve(k.current),k.current=null)}}return{ref:k,callbackRef:H}}function Ri(a,d){return void 0===d&&(d=!0),Oi(a,d).callbackRef}function qr(a,d,k,H,fa,la,sa){return Oi(function(Ha){for(var Ta=function(ib,Db,Ob,Hb){Ob=ib.length;if(0===Ob)return null;for(var cc=[],sc=0;sc<Ob;sc++){var Ub=ib.item(sc);if(Ub&&void 0!==Ub.dataset.index){var kc=parseInt(Ub.dataset.index),ec=parseFloat(Ub.dataset.knownSize),Mc=Db(Ub,"offsetHeight");if(0===
Mc&&Hb("Zero-sized element, this should not happen",{child:Ub},Ll.ERROR),Mc!==ec)Ub=cc[cc.length-1],0===cc.length||Ub.size!==Mc||Ub.endIndex!==kc-1?cc.push({startIndex:kc,endIndex:kc,size:Mc}):cc[cc.length-1].endIndex++}}return cc}(Ha.children,d,0,fa),Xa=Ha.parentElement;!Xa.dataset.virtuosoScroller;)Xa=Xa.parentElement;var eb="window"===Xa.firstElementChild.dataset.viewportType;H({scrollTop:Math.max(sa?sa.scrollTop:eb?window.pageYOffset||document.documentElement.scrollTop:Xa.scrollTop,0),scrollHeight:sa?
sa.scrollHeight:eb?document.documentElement.scrollHeight:Xa.scrollHeight,viewportHeight:sa?sa.offsetHeight:eb?window.innerHeight:Xa.offsetHeight});null==la||la(function(ib,Db,Ob){return"normal"===Db||null!=Db&&Db.endsWith("px")||Ob("row-gap was not resolved to pixel value correctly",Db,Ll.WARN),"normal"===Db?0:parseInt(null!=Db?Db:"0",10)}(0,getComputedStyle(Ha).rowGap,fa));null!==Ta&&a(Ta)},k)}function El(a,d){return Math.round(a.getBoundingClientRect()[d])}function x(a,d,k,H,fa){void 0===H&&(H=
wj);var la=(0,$h.useRef)(null),sa=(0,$h.useRef)(null),Ha=(0,$h.useRef)(null),Ta=(0,$h.useRef)(!1),Xa=(0,$h.useCallback)(function(eb){eb=eb.target;var ib=eb===window||eb===document,Db=ib?window.pageYOffset||document.documentElement.scrollTop:eb.scrollTop,Ob=ib?document.documentElement.scrollHeight:eb.scrollHeight,Hb=ib?window.innerHeight:eb.offsetHeight;eb=function(){a({scrollTop:Math.max(Db,0),scrollHeight:Ob,viewportHeight:Hb})};Ta.current?(0,IC.flushSync)(eb):eb();Ta.current=!1;null!==sa.current&&
(Db===sa.current||0>=Db||Db===Ob-Hb)&&(sa.current=null,d(!0),Ha.current&&(clearTimeout(Ha.current),Ha.current=null))},[a,d]);return(0,$h.useEffect)(function(){var eb=fa||la.current;return H(fa||la.current),Xa({target:eb}),eb.addEventListener("scroll",Xa,{passive:!0}),function(){H(null);eb.removeEventListener("scroll",Xa)}},[la,Xa,k,H,fa]),{scrollerRef:la,scrollByCallback:function(eb){Ta.current=!0;la.current.scrollBy(eb)},scrollToCallback:function(eb){var ib=la.current;if(ib&&!("offsetHeight"in ib&&
0===ib.offsetHeight)){var Db,Ob,Hb,cc="smooth"===eb.behavior;if(ib===window?(Ob=Math.max(El(document.documentElement,"height"),document.documentElement.scrollHeight),Db=window.innerHeight,Hb=document.documentElement.scrollTop):(Ob=ib.scrollHeight,Db=El(ib,"height"),Hb=ib.scrollTop),eb.top=Math.ceil(Math.max(Math.min(Ob-Db,eb.top),0)),1.01>Math.abs(Db-Ob)||eb.top===Hb)return a({scrollTop:Hb,scrollHeight:Ob,viewportHeight:Db}),void(cc&&d(!0));cc?(sa.current=eb.top,Ha.current&&clearTimeout(Ha.current),
Ha.current=setTimeout(function(){Ha.current=null;sa.current=null;d(!0)},1E3)):sa.current=null;ib.scrollTo(eb)}}}}function ea(a,d,k,H,fa){return void 0===H&&(H=aj),void 0===fa&&(fa=aj),{k:a,v:d,lvl:k,l:H,r:fa}}function Aa(a,d){if(a===aj)return aj;var k=a.k,H=a.l,fa=a.r;if(d===k){if(H===aj)return fa;if(fa===aj)return H;d=qb(H);return Ad(Bc(a,{k:d[0],v:d[1],l:Yb(H)}))}return Ad(Bc(a,d<k?{l:Aa(H,d)}:{r:Aa(fa,d)}))}function xa(a,d,k){return(void 0===k&&(k="k"),a===aj)?[-Infinity,void 0]:a[k]===d?[a.k,
a.v]:a[k]<d?(d=xa(a.r,d,k),-Infinity===d[0]?[a.k,a.v]:d):xa(a.l,d,k)}function Ga(a,d,k){return a===aj?ea(d,k,1):d===a.k?Bc(a,{k:d,v:k}):Ce(Xf(Bc(a,d<a.k?{l:Ga(a.l,d,k)}:{r:Ga(a.r,d,k)})))}function $a(a,d,k){if(a===aj)return[];var H=a.k,fa=a.v,la=a.r,sa=[];return H>d&&(sa=sa.concat($a(a.l,d,k))),H>=d&&H<=k&&sa.push({k:H,v:fa}),H<=k&&(sa=sa.concat($a(la,d,k))),sa}function lb(a){return a===aj?[]:[].concat(lb(a.l),[{k:a.k,v:a.v}],lb(a.r))}function qb(a){return a.r===aj?[a.k,a.v]:qb(a.r)}function Yb(a){return a.r===
aj?a.l:Ad(Bc(a,{r:Yb(a.r)}))}function Bc(a,d){return ea(void 0!==d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==d.r?d.r:a.r)}function Uc(a){return a===aj||a.lvl>a.r.lvl}function Ad(a){var d=a.l,k=a.r,H=a.lvl;if(k.lvl>=H-1&&d.lvl>=H-1)return a;if(H>k.lvl+1){if(Uc(d))return Xf(Bc(a,{lvl:H-1}));if(d===aj||d.r===aj)throw Error("Unexpected empty nodes");return Bc(d.r,{l:Bc(d,{r:d.r.l}),r:Bc(a,{l:d.r.r,lvl:H-1}),lvl:H})}if(Uc(a))return Ce(Bc(a,{lvl:H-1}));if(k===
aj||k.l===aj)throw Error("Unexpected empty nodes");d=k.l;var fa=Uc(d)?k.lvl-1:k.lvl;return Bc(d,{l:Bc(a,{r:d.l,lvl:H-1}),r:Ce(Bc(k,{l:d.r,lvl:fa})),lvl:d.lvl+1})}function Gd(a,d,k){return a===aj?[]:Hd($a(a,xa(a,d)[0],k),function(H){return{index:H.k,value:H.v}})}function Hd(a,d){var k=a.length;if(0===k)return[];var H=d(a[0]),fa=H.index;H=H.value;for(var la=[],sa=1;sa<k;sa++){var Ha=d(a[sa]),Ta=Ha.index;Ha=Ha.value;la.push({start:fa,end:Ta-1,value:H});fa=Ta;H=Ha}return la.push({start:fa,end:Infinity,
value:H}),la}function Ce(a){var d=a.r,k=a.lvl;return d===aj||d.r===aj||d.lvl!==k||d.r.lvl!==k?a:Bc(d,{l:Bc(a,{r:d.l}),lvl:k+1})}function Xf(a){var d=a.l;return d===aj||d.lvl!==a.lvl?a:Bc(d,{r:Bc(a,{l:d.r})})}function $g(a,d,k,H){void 0===H&&(H=0);for(var fa=a.length-1;H<=fa;){var la=Math.floor((H+fa)/2),sa=k(a[la],d);if(0===sa)return la;if(-1===sa){if(2>fa-H)return la-1;fa=la-1}else{if(fa===H)return la;H=la+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);
}function jk(a){var d=a.size,k=a.startIndex,H=a.endIndex;return function(fa){return fa.start===k&&(fa.end===H||Infinity===fa.end)&&fa.value===d}}function Sg(a,d){a=a.index;return d===a?0:d<a?-1:1}function bi(a,d){a=a.offset;return d===a?0:d<a?-1:1}function Xi(a){return{index:a.index,value:a}}function hj(a,d,k,H){var fa=0,la=0,sa=0,Ha;0!==d?(sa=a[Ha=$g(a,d-1,Sg)].offset,la=xa(k,d-1),fa=la[0],la=la[1],a.length&&a[Ha].size===xa(k,d)[1]&&--Ha,a=a.slice(0,Ha+1)):a=[];for(d=Tj(Gd(k,d,Infinity));!(k=d()).done;)Ha=
k.value,k=Ha.start,Ha=Ha.value,fa=k-fa,sa=fa*la+sa+fa*H,a.push({offset:sa,size:Ha,index:k}),fa=k,la=Ha;return{offsetTree:a,lastIndex:fa,lastOffset:sa,lastSize:la}}function Qi(a,d){var k=d[0],H=d[1],fa=d[3];0<k.length&&(0,d[2])("received item sizes",k,Ll.DEBUG);var la=a.sizeTree;d=la;var sa=0;if(0<H.length&&la===aj&&2===k.length){var Ha=k[0].size,Ta=k[1].size;d=H.reduce(function(eb,ib){return Ga(Ga(eb,ib,Ha),ib+1,Ta)},d)}else k=function(eb,ib){var Db,Ob=eb===aj?0:Infinity;for(ib=Tj(ib);!(Db=ib()).done;){var Hb=
Db.value;Db=Hb.size;var cc=Hb.startIndex,sc=Hb.endIndex;if(Ob=Math.min(Ob,cc),eb===aj)eb=Ga(eb,0,Db);else{var Ub=Gd(eb,cc-1,sc+1);if(!Ub.some(jk(Hb))){var kc,ec=Hb=!1;for(Ub=Tj(Ub);!(kc=Ub()).done;){var Mc=kc.value;kc=Mc.start;var Oc=Mc.end;Mc=Mc.value;Hb?(sc>=kc||Db===Mc)&&(eb=Aa(eb,kc)):(ec=Mc!==Db,Hb=!0);Oc>sc&&sc>=kc&&Mc!==Db&&(eb=Ga(eb,sc+1,Mc))}ec&&(eb=Ga(eb,cc,Db))}}}return[eb,Ob]}(d,k),d=k[0],sa=k[1];if(d===la)return a;a=hj(a.offsetTree,sa,d,fa);var Xa=a.offsetTree;return{sizeTree:d,offsetTree:Xa,
lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:H.reduce(function(eb,ib){return Ga(eb,ib,xh(ib,Xa,fa))},aj),groupIndices:H}}function xh(a,d,k){if(0===d.length)return 0;d=d[$g(d,a,Sg)];a-=d.index;a=d.size*a+(a-1)*k+d.offset;return 0<a?a+k:a}function Bi(a,d,k){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+1;a=ri("LAST"===a.index?k:a.index,d);return Math.max(0,a,Math.min(k,a))}function ri(a,d){if(d.groupOffsetTree===aj)return a;for(var k=0;d.groupIndices[k]<=
a+k;)k++;return a+k}function gi(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&yH||(a.behavior="auto"),a.offset||(a.offset=0),a}function Kk(a){return!!a&&("smooth"===a?"smooth":"auto")}function Hk(a){return a.reduce(function(d,k){return d.groupIndices.push(d.totalCount),d.totalCount+=k+1,d},{totalCount:0,groupIndices:[]})}function ok(a,d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function gn(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function mn(a,
d,k){return"number"==typeof a?"up"===k&&"top"===d||"down"===k&&"bottom"===d?a:0:"up"===k?"top"===d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function Vo(a,d,k){if(0===a.length)return[];if(d.groupOffsetTree===aj)return a.map(function(Ta){return Mh({},Ta,{index:Ta.index+k,originalIndex:Ta.index})});var H,fa=[],la=Gd(d.groupOffsetTree,a[0].index,a[a.length-1].index),sa=void 0,Ha=0;for(a=Tj(a);!(H=a()).done;)H=H.value,(!sa||sa.end<H.index)&&(sa=la.shift(),Ha=d.groupIndices.indexOf(sa.start)),fa.push(Mh({},
H.index===sa.start?{type:"group",index:Ha}:{index:H.index-(Ha+1)+k,groupIndex:Ha},{size:H.size,offset:H.offset,originalIndex:H.index,data:H.data}));return fa}function Gq(a,d,k,H,fa,la){var sa=0,Ha=0;0<a.length&&(sa=a[0].offset,Ha=a[a.length-1],Ha=Ha.offset+Ha.size);var Ta=k-fa.lastIndex,Xa=sa;H=fa.lastOffset+Ta*fa.lastSize+(Ta-1)*H-Ha;return{items:Vo(a,fa,la),topItems:Vo(d,fa,la),topListHeight:d.reduce(function(eb,ib){return ib.size+eb},0),offsetTop:sa,offsetBottom:H,top:Xa,bottom:Ha,totalCount:k,
firstItemIndex:la}}function Uo(a){var d,k=!1;return function(){return k||(k=!0,d=a()),d}}function Nh(a,d){var k=(0,$h.useRef)(null),H=(0,$h.useCallback)(function(Ta){if(null!==Ta&&Ta.offsetParent){var Xa=Ta.getBoundingClientRect();Ta=Xa.width;if(d){var eb=d.getBoundingClientRect();Xa=Xa.top-eb.top;eb=eb.height-Math.max(0,Xa);Xa+=d.scrollTop}else eb=window.innerHeight-Math.max(0,Xa.top),Xa=Xa.top+window.pageYOffset;k.current={offsetTop:Xa,visibleHeight:eb,visibleWidth:Ta};a(k.current)}},[a,d]),fa=
Oi(H),la=fa.callbackRef,sa=fa.ref,Ha=(0,$h.useCallback)(function(){H(sa.current)},[H,sa]);return(0,$h.useEffect)(function(){if(d){d.addEventListener("scroll",Ha);var Ta=new ResizeObserver(Ha);return Ta.observe(d),function(){d.removeEventListener("scroll",Ha);Ta.unobserve(d)}}return window.addEventListener("scroll",Ha),window.addEventListener("resize",Ha),function(){window.removeEventListener("scroll",Ha);window.removeEventListener("resize",Ha)}},[Ha,d]),la}function Zp(a){return a}function Wk(a,d){var k=
Zg();return Uh(k,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),dg(k,a),k}function Uj(a,d){if("string"!=typeof a)return{context:d}}function qo(a){var d=a.usePublisher,k=a.useEmitter,H=a.useEmitterValue;return Fh.memo(function(fa){var la=fa.style,sa=fa.children;fa=fn(fa,Yy);var Ha=d("scrollContainerState"),Ta=H("ScrollerComponent"),Xa=d("smoothScrollTargetReached"),eb=H("scrollerRef"),ib=H("context");Ha=x(Ha,
Xa,Ta,eb);Xa=Ha.scrollerRef;eb=Ha.scrollByCallback;return k("scrollTo",Ha.scrollToCallback),k("scrollBy",eb),(0,$h.createElement)(Ta,Mh({ref:Xa,style:Mh({},CH,la),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},fa,Uj(Ta,ib)),sa)})}function Rp(a){var d=a.usePublisher,k=a.useEmitter,H=a.useEmitterValue;return Fh.memo(function(fa){var la=fa.style,sa=fa.children;fa=fn(fa,QC);var Ha=d("windowScrollContainerState"),Ta=H("ScrollerComponent"),Xa=d("smoothScrollTargetReached"),eb=
H("totalListHeight"),ib=H("deviation"),Db=H("customScrollParent"),Ob=H("context");Xa=x(Ha,Xa,Ta,wj,Db);var Hb=Xa.scrollerRef;Ha=Xa.scrollByCallback;Xa=Xa.scrollToCallback;return wH(function(){return Hb.current=Db||window,function(){Hb.current=null}},[Hb,Db]),k("windowScrollTo",Xa),k("scrollBy",Ha),(0,$h.createElement)(Ta,Mh({style:Mh({position:"relative"},la,0!==eb?{height:eb+ib}:{}),"data-virtuoso-scroller":!0},fa,Uj(Ta,Ob)),sa)})}function Sp(a,d,k){return Array.from({length:d-a+1}).map(function(H,
fa){return{index:fa+a,data:null==k?void 0:k[fa+a]}})}function wn(a,d){return a&&a.column===d.column&&a.row===d.row}function so(a,d,k,H){var fa=k.height;return void 0===fa||0===H.length?{top:0,bottom:0}:{top:ll(a,d,k,H[0].index),bottom:ll(a,d,k,H[H.length-1].index)+fa}}function ll(a,d,k,H){var fa=d.column;a=fj(1,qv((a.width+fa)/(k.width+fa)));H=qv(H/a);k=H*k.height+fj(0,H-1)*d.row;return 0<k?k+d.row:k}function im(a,d,k){return"normal"===d||null!=d&&d.endsWith("px")||k(a+" was not resolved to pixel value correctly",
d,Ll.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function hn(a,d){hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,H){k.__proto__=H;return k};return hn(a,d)}function Yp(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;hn(a,d)}function yo(a){yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return yo(a)}function xu(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function yq(a,d,k){yq=xu()?Reflect.construct.bind():function(H,fa,la){var sa=[null];sa.push.apply(sa,fa);H=new (Function.bind.apply(H,sa));la&&hn(H,la.prototype);return H};return yq.apply(null,arguments)}function Aq(a){var d="function"===typeof Map?new Map:void 0;Aq=function(k){function H(){return yq(k,arguments,yo(this).constructor)}if(null===k||-1===Function.toString.call(k).indexOf("[native code]"))return k;
if("function"!==typeof k)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof d){if(d.has(k))return d.get(k);d.set(k,H)}H.prototype=Object.create(k.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}});return hn(H,k)};return Aq(a)}function zu(a,d,k){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*k)}function $p(a,d,k,H){void 0===H&&(H=zu);if(0===d)return H(k,k,k);a=(a%360+360)%360/60;var fa=(1-Math.abs(2*k-1))*d,
la=fa*(1-Math.abs(a%2-1)),sa=d=0,Ha=0;0<=a&&1>a?(d=fa,sa=la):1<=a&&2>a?(d=la,sa=fa):2<=a&&3>a?(sa=fa,Ha=la):3<=a&&4>a?(sa=la,Ha=fa):4<=a&&5>a?(d=la,Ha=fa):5<=a&&6>a&&(d=fa,Ha=la);k-=fa/2;return H(d+k,sa+k,Ha+k)}function js(a){if("string"!==typeof a)throw new $m(3);if("string"===typeof a){var d=a.toLowerCase();a=Qw[d]?"#"+Qw[d]:a}if(a.match(bD))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(cD))return d=parseFloat((parseInt(""+a[7]+a[8],
16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};if(a.match(cz))return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(Lo))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d};if(d=Xs.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+
d[3],10)};if(d=pm.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var k=Rw.exec(a);if(k){d=parseInt(""+k[1],10);var H=parseInt(""+k[2],10)/100;k=parseInt(""+k[3],10)/100;d="rgb("+$p(d,H,k)+")";H=Xs.exec(d);if(!H)throw new $m(4,a,d);return{red:parseInt(""+H[1],10),green:parseInt(""+H[2],10),blue:parseInt(""+H[3],10)}}if(d=tv.exec(a.substring(0,50))){H=parseInt(""+d[1],
10);k=parseInt(""+d[2],10)/100;var fa=parseInt(""+d[3],10)/100;H="rgb("+$p(H,k,fa)+")";k=Xs.exec(H);if(!k)throw new $m(4,a,H);return{red:parseInt(""+k[1],10),green:parseInt(""+k[2],10),blue:parseInt(""+k[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new $m(5);}function to(a){a=a.toString(16);return 1===a.length?"0"+a:a}function Tp(a,d,k){return fo("#"+to(Math.round(255*a))+to(Math.round(255*d))+to(Math.round(255*k)))}function es(a,d,k){if("number"===typeof a&&
"number"===typeof d&&"number"===typeof k)return fo("#"+to(a)+to(d)+to(k));if("object"===typeof a&&void 0===d&&void 0===k)return fo("#"+to(a.red)+to(a.green)+to(a.blue));throw new $m(6);}function ht(a){if("object"!==typeof a)throw new $m(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?es(a.red,a.green,a.blue):"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new $m(7);return a}if("number"===
typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return es(a);if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?$p(a.hue,a.saturation,a.lightness,Tp):"rgba("+$p(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new $m(2);return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&
("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=$p(a.hue,a.saturation,a.lightness,Tp);else throw new $m(1);return a}throw new $m(8);}function kr(a,d,k){return function(){var H=k.concat(Array.prototype.slice.call(arguments));return H.length>=d?a.apply(this,H):kr(a,d,H)}}function lr(a,d){if("transparent"===d)return d;d=js(d);var k=d.red/255,H=d.green/255,fa=d.blue/255,la=Math.max(k,H,fa),sa=Math.min(k,H,fa),Ha=(la+sa)/2;if(la===sa)d=void 0!==d.alpha?{hue:0,saturation:0,
lightness:Ha,alpha:d.alpha}:{hue:0,saturation:0,lightness:Ha};else{var Ta=la-sa;sa=.5<Ha?Ta/(2-la-sa):Ta/(la+sa);switch(la){case k:k=(H-fa)/Ta+(H<fa?6:0);break;case H:k=(fa-k)/Ta+2;break;default:k=(k-H)/Ta+4}k*=60;d=void 0!==d.alpha?{hue:k,saturation:sa,lightness:Ha,alpha:d.alpha}:{hue:k,saturation:sa,lightness:Ha}}Ha=gf;a=d.lightness-parseFloat(a);return ht(Ha({},d,{lightness:Math.max(0,Math.min(1,a))}))}function Qm(a,d){var k;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==
d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let H=null!=(k=d.fill)?k:a.props.fill;void 0===H||bj(H)||"var(--ls-secondary-background-color)"===H||d.noFill||!LH.includes(a.props.type)||(a=Gj(.3,H),d.stroke=a);return d}function is({strokeWidth:a,size:d,mode:k}){return"svg"===k?(0,ku.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,d[1]-2*a),strokeWidth:4*a}):(0,ku.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",
left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function jn(){const a=He();return"panning"===a.inputs.state||"pinching"===a.inputs.state}function zq({left:a,middle:d,right:k,stroke:H,strokeWidth:fa}){return(0,Vw.jsxs)("g",{children:[(0,Vw.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${k}`}),(0,Vw.jsx)("path",{d:`M ${a} L ${d} ${k}`,fill:"none",stroke:H,strokeWidth:fa,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Bq(a,
d,k){d=N(a,d,a,k).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(k=d[0])?ce.rotWith(k,a,Math.PI/6):a;a=k?ce.rotWith(k,a,-Math.PI/6):a;return{left:d,right:a}}function ks(a,d,k){const {left:H,right:fa}=Bq(a,d,k);return`M ${H} L ${a} ${fa}`}function Tl(a,d,k,H,fa){a=a.strokeWidth;var la=ce.dist(d,k);a=Math.min(la/3,16*a);la=[];la.push(`M ${d} L ${k}`);H&&la.push(ks(d,k,a));fa&&la.push(ks(k,d,a));return la.join(" ")}function gs({id:a,bounds:d,
labelSize:k,offset:H,scale:fa=1}){return(0,xv.jsx)("defs",{children:(0,xv.jsxs)("mask",{id:a+"_clip",children:[(0,xv.jsx)("rect",{x:-100,y:-100,width:d.width+200,height:d.height+200,fill:"white"}),(0,xv.jsx)("rect",{x:d.width/2-k[0]/2*fa+((null==H?void 0:H[0])||0),y:d.height/2-k[1]/2*fa+((null==H?void 0:H[1])||0),width:k[0]*fa,height:k[1]*fa,rx:4*fa,ry:4*fa,fill:"black"})]})})}function Up(a,d,k,H=fa=>fa){return a*H(.5-d*(.5-k))}function Vp(a){return[-a[0],-a[1]]}function nl(a,d){return[a[0]+d[0],
a[1]+d[1]]}function ml(a,d){return[a[0]-d[0],a[1]-d[1]]}function ol(a,d){return[a[0]*d,a[1]*d]}function Wp(a){return[a[1],-a[0]]}function mr(a,d){return a[0]===d[0]&&a[1]===d[1]}function Cq(a){return a[0]*a[0]+a[1]*a[1]}function Eq(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function it(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function vo(a,d,k){let H=Math.sin(k);k=Math.cos(k);let fa=a[0]-d[0];a=a[1]-d[1];return[fa*k-a*H+d[0],fa*H+a*k+d[1]]}function kn(a,d,k){return nl(a,ol(ml(d,a),k))}
function Xp(a,d,k){return nl(a,ol(d,k))}function Dq(a,d={}){let {size:k=16,smoothing:H=.5,thinning:fa=.5,simulatePressure:la=!0,easing:sa=Qd=>Qd,start:Ha={},end:Ta={},last:Xa=!1}=d,{cap:eb=!0,easing:ib=Qd=>Qd*(2-Qd)}=Ha,{cap:Db=!0,easing:Ob=Qd=>--Qd*Qd*Qd+1}=Ta;if(0===a.length||0>=k)return[];var Hb=a[a.length-1].runningLength;let cc=!1===Ha.taper?0:!0===Ha.taper?Math.max(k,Hb):Ha.taper,sc=!1===Ta.taper?0:!0===Ta.taper?Math.max(k,Hb):Ta.taper;var Ub=Math.pow(k*H,2);d=[];let kc=[];var ec=a.slice(0,
10).reduce((Qd,hd)=>{var Dd=hd.pressure;la&&(hd=Fp(1,hd.distance/k),Dd=Fp(1,1-hd),Dd=Fp(1,Qd+.275*(Dd-Qd)*hd));return(Qd+Dd)/2},a[0].pressure),Mc=Up(k,fa,a[a.length-1].pressure,sa),Oc;let vd=a[0].vector;var Kd=a[0].point;let We=Kd;var ie=Kd;let Je=We;var Hf=!1;for(var Se=0;Se<a.length;Se++){var {pressure:Xe}=a[Se];let {point:Qd,vector:hd,distance:Dd,runningLength:Me}=a[Se];if(Se<a.length-1&&3>Hb-Me)continue;fa?(la&&(Mc=Fp(1,Dd/k),Xe=Fp(1,1-Mc),Xe=Fp(1,ec+.275*(Xe-ec)*Mc)),Mc=Up(k,fa,Xe,sa)):Mc=k/
2;void 0===Oc&&(Oc=Mc);var Pd=Me<cc?ib(Me/cc):1,ld=Hb-Me<sc?Ob((Hb-Me)/sc):1;Mc=Math.max(.01,Mc*Math.min(Pd,ld));ld=(Se<a.length-1?a[Se+1]:a[Se]).vector;let nf=Se<a.length-1?hd[0]*ld[0]+hd[1]*ld[1]:1;Pd=null!==nf&&0>nf;if(0>hd[0]*vd[0]+hd[1]*vd[1]&&!Hf||Pd){Kd=ol(Wp(vd),Mc);for(let Vf=1/13,If=0;1>=If;If+=Vf)ie=vo(ml(Qd,Kd),Qd,ar*If),d.push(ie),Je=vo(nl(Qd,Kd),Qd,ar*-If),kc.push(Je);Kd=ie;We=Je;Pd&&(Hf=!0)}else(Hf=!1,Se===a.length-1)?(Xe=ol(Wp(hd),Mc),d.push(ml(Qd,Xe)),kc.push(nl(Qd,Xe))):(ec=ol(Wp(kn(ld,
hd,nf)),Mc),ie=ml(Qd,ec),(1>=Se||Cq(ml(Kd,ie))>Ub)&&(d.push(ie),Kd=ie),Je=nl(Qd,ec),(1>=Se||Cq(ml(We,Je))>Ub)&&(kc.push(Je),We=Je),ec=Xe,vd=hd)}Hb=a[0].point.slice(0,2);Ub=1<a.length?a[a.length-1].point.slice(0,2):nl(a[0].point,[1,1]);ie=[];Hf=[];if(1===a.length){if(!cc&&!sc||Xa){a=Xp(Hb,Eq(Wp(ml(Hb,Ub))),-(Oc||Mc));d=[];for(let Qd=1/13,hd=Qd;1>=hd;hd+=Qd)d.push(vo(a,Hb,2*ar*hd));return d}}else{if(!(cc||sc&&1===a.length))if(eb)for(let Qd=1/13,hd=Qd;1>=hd;hd+=Qd)Oc=vo(kc[0],Hb,ar*hd),ie.push(Oc);else Se=
ml(d[0],kc[0]),Oc=ol(Se,.5),Se=ol(Se,.51),ie.push(ml(Hb,Oc),ml(Hb,Se),nl(Hb,Se),nl(Hb,Oc));Oc=Wp(Vp(a[a.length-1].vector));if(sc||cc&&1===a.length)Hf.push(Ub);else if(Db){a=Xp(Ub,Oc,Mc);for(let Qd=1/29,hd=Qd;1>hd;hd+=Qd)Hf.push(vo(a,Ub,3*ar*hd))}else Hf.push(nl(Ub,ol(Oc,Mc)),nl(Ub,ol(Oc,.99*Mc)),ml(Ub,ol(Oc,.99*Mc)),ml(Ub,ol(Oc,Mc)))}return d.concat(Hf,kc.reverse(),ie)}function tk(a,d={}){var k;let {streamline:H=.5,size:fa=16,last:la=!1}=d;if(0===a.length)return[];d=.15+.85*(1-H);a=Array.isArray(a[0])?
a:a.map(({x:ib,y:Db,pressure:Ob=.5})=>[ib,Db,Ob]);if(2===a.length){var sa=a[1];a=a.slice(0,-1);for(var Ha=1;5>Ha;Ha++)a.push(kn(a[0],sa,Ha/4))}1===a.length&&(a=[...a,[...nl(a[0],[1,1]),...a[0].slice(2)]]);sa=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ha=!1;let Ta=0,Xa=sa[0],eb=a.length-1;for(let ib=1;ib<a.length;ib++){let Db=la&&ib===eb?a[ib].slice(0,2):kn(Xa.point,a[ib],d);if(mr(Xa.point,Db))continue;let Ob=it(Db,Xa.point);if(Ta+=Ob,ib<eb&&
!Ha){if(Ta<fa)continue;Ha=!0}Xa={point:Db,pressure:0<=a[ib][2]?a[ib][2]:.5,vector:Eq(ml(Xa.point,Db)),distance:Ob,runningLength:Ta};sa.push(Xa)}return sa[0].vector=(null==(k=sa[1])?void 0:k.vector)||[0,0],sa}function xn(a,d=4/3){return(new Wh(a)).exportAsSVG(d)}function Vn(a,d=4/3){return(new Wh(a)).generatePreviewJsx(void 0,d)}function Om({id:a,type:d,onRemove:k,showContent:H}){const fa=He(),{handlers:la}=Py.default.useContext(ej),sa=la.t;return(0,Wi.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",
children:[(0,Wi.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,Wi.jsx)(Qy,{id:a,showReferenceContent:H})}),(0,Wi.jsx)("div",{className:"flex-1"}),la.getBlockPageName(a)!==fa.currentPage.name&&(0,Wi.jsx)(Fg,{tooltip:sa("whiteboard/open-page"),type:"button",onClick:()=>null==la?void 0:la.redirectToPage(a),children:(0,Wi.jsx)(Ph,{name:"open-as-page"})}),(0,Wi.jsx)(Fg,{tooltip:sa("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==
la?void 0:la.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,Wi.jsx)(Ph,{name:"move-to-sidebar-right"})}),k&&(0,Wi.jsx)(Fg,{className:"tl-shape-links-panel-item-remove-button",tooltip:sa("whiteboard/remove-link"),type:"button",onClick:k,children:(0,Wi.jsx)(Ph,{name:"x",className:"!translate-y-0"})})]})}function ia({options:a,value:d,onValueChange:k}){return(0,er.jsx)(oD,{className:"tl-toggle-group-input",type:"single",value:d,onValueChange:k,children:a.map(H=>(0,er.jsx)(mk,{content:H.tooltip,
children:(0,er.jsx)("div",{className:"inline-block",children:(0,er.jsx)(pD,{className:"tl-toggle-group-input-button",value:H.value,disabled:H.value===d,children:(0,er.jsx)(Ph,{name:H.icon})})})},H.value))})}function Ba({options:a,value:d,onValueChange:k}){return(0,er.jsx)(oD,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:k,children:a.map(H=>(0,er.jsx)(pD,{className:"tl-toggle-group-input-button",value:H.value,children:(0,er.jsx)(Ph,{name:H.icon})},H.value))})}function Va(a){return He().selectedShapesArray.filter(d=>
!d.props.isLocked).filter(d=>{var k;return null==(k=mz[d.props.type])?void 0:k.includes(a)})}function Pb(a){return d=>"mouse"!==d.pointerType?a(d):void 0}function qc(a){var d;a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";const k=a[0].toLowerCase();[a]=null!=(d=Object.entries(gr).find(([,H])=>H.includes(k)))?d:["unknown",null];return a}function Hc(...a){return(...d)=>oi(this,null,function*(){for(const k of a){const H=yield k(...d);if(H&&0<H.length)return H}return null})}function rd(a,d){return oi(this,
null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():null})}function Ld(){const {handlers:a}=wD.useContext(ej);return wD.useCallback((d,k)=>oi(this,null,function*(){if(k.shiftKey&&1===d.selectedShapesArray.length){var H=yield navigator.clipboard.read();let fa;0<H.length&&(H=(yield(yield H[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(H)&&40===H.length?(H=H.slice(2,-2),pk(H)&&(fa=H)):/^\[\[.*\]\]$/.test(H)&&(fa=H.slice(2,
-2)));if(fa){d.selectedShapesArray[0].update({refs:[fa]});d.persist();return}}xD(d,k,a)}),[])}function fe(){const a=Ld();return aI.useCallback((d,k)=>oi(this,[d,k],function*(H,{dataTransfer:fa,point:la}){a(H,{point:la,shiftKey:!1,dataTransfer:fa,fromDrop:!0})}),[])}function Ae(){const {handlers:a}=dx.useContext(ej);return dx.useCallback((d,{text:k,html:H})=>{a.copyToClipboard(k,H)},[])}function af(){return ex.default.useCallback(a=>oi(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},
100)}),[])}var ag=Object.create,qg=Object.defineProperty,Sh=Object.defineProperties,yh=Object.getOwnPropertyDescriptor,Fk=Object.getOwnPropertyDescriptors,xo=Object.getOwnPropertyNames,Sl=Object.getOwnPropertySymbols,Di=Object.getPrototypeOf,Ik=Object.prototype.hasOwnProperty,Am=Object.prototype.propertyIsEnumerable,To=(a,d,k)=>d in a?qg(a,d,{enumerable:!0,configurable:!0,writable:!0,value:k}):a[d]=k,he=(a,d)=>{for(var k in d||={})Ik.call(d,k)&&To(a,k,d[k]);if(Sl)for(k of Sl(d))Am.call(d,k)&&To(a,
k,d[k]);return a},lf=(a,d)=>Sh(a,Fk(d)),Mf=(a,d)=>{var k={},H;for(H in a)Ik.call(a,H)&&0>d.indexOf(H)&&(k[H]=a[H]);if(null!=a&&Sl)for(H of Sl(a))0>d.indexOf(H)&&Am.call(a,H)&&(k[H]=a[H]);return k},Lh=(a,d)=>function(){return d||(0,a[xo(a)[0]])((d={exports:{}}).exports,d),d.exports},vm=(a,d,k,H)=>{if(d&&"object"===typeof d||"function"===typeof d)for(let fa of xo(d))Ik.call(a,fa)||fa===k||qg(a,fa,{get:()=>d[fa],enumerable:!(H=yh(d,fa))||H.enumerable});return a},yf=(a,d,k)=>(k=null!=a?ag(Di(a)):{},vm(!d&&
a&&a.__esModule?k:qg(k,"default",{value:a,enumerable:!0}),a)),$d=(a,d,k,H)=>{for(var fa=1<H?void 0:H?yh(d,k):d,la=a.length-1,sa;0<=la;la--)if(sa=a[la])fa=(H?sa(d,k,fa):sa(fa))||fa;H&&fa&&qg(d,k,fa);return fa},fb=(a,d,k)=>{To(a,"symbol"!==typeof d?d+"":d,k);return k},oi=(a,d,k)=>new Promise((H,fa)=>{var la=Ta=>{try{Ha(k.next(Ta))}catch(Xa){fa(Xa)}},sa=Ta=>{try{Ha(k.throw(Ta))}catch(Xa){fa(Xa)}},Ha=Ta=>Ta.done?H(Ta.value):Promise.resolve(Ta.value).then(la,sa);Ha((k=k.apply(a,d)).next())}),jm=Lh({["../../node_modules/rbush/rbush.min.js"](a,
d){!function(k,H){"object"==typeof a&&"undefined"!=typeof d?d.exports=H():"function"==typeof define&&define.amd?define(H):(k=k||self).RBush=H()}(a,function(){function k(Ub,kc,ec,Mc,Oc){!function Se(Kd,We,ie,Je,Hf){for(;Je>ie;){if(600<Je-ie){var Xe=Je-ie+1,Pd=We-ie+1,ld=Math.log(Xe),Qd=.5*Math.exp(2*ld/3);ld=.5*Math.sqrt(ld*Qd*(Xe-Qd)/Xe)*(0>Pd-Xe/2?-1:1);Se(Kd,We,Math.max(ie,Math.floor(We-Pd*Qd/Xe+ld)),Math.min(Je,Math.floor(We+(Xe-Pd)*Qd/Xe+ld)),Hf)}Xe=Kd[We];Pd=ie;Qd=Je;H(Kd,ie,We);for(0<Hf(Kd[Je],
Xe)&&H(Kd,ie,Je);Pd<Qd;){H(Kd,Pd,Qd);Pd++;for(Qd--;0>Hf(Kd[Pd],Xe);)Pd++;for(;0<Hf(Kd[Qd],Xe);)Qd--}0===Hf(Kd[ie],Xe)?H(Kd,ie,Qd):H(Kd,++Qd,Je);Qd<=We&&(ie=Qd+1);We<=Qd&&(Je=Qd-1)}}(Ub,kc,ec||0,Mc||Ub.length-1,Oc||fa)}function H(Ub,kc,ec){var Mc=Ub[kc];Ub[kc]=Ub[ec];Ub[ec]=Mc}function fa(Ub,kc){return Ub<kc?-1:Ub>kc?1:0}function la(Ub,kc){sa(Ub,0,Ub.children.length,kc,Ub)}function sa(Ub,kc,ec,Mc,Oc){Oc||=Hb(null);Oc.minX=1/0;Oc.minY=1/0;Oc.maxX=-1/0;for(Oc.maxY=-1/0;kc<ec;kc++){var vd=Ub.children[kc];
Ha(Oc,Ub.leaf?Mc(vd):vd)}return Oc}function Ha(Ub,kc){return Ub.minX=Math.min(Ub.minX,kc.minX),Ub.minY=Math.min(Ub.minY,kc.minY),Ub.maxX=Math.max(Ub.maxX,kc.maxX),Ub.maxY=Math.max(Ub.maxY,kc.maxY),Ub}function Ta(Ub,kc){return Ub.minX-kc.minX}function Xa(Ub,kc){return Ub.minY-kc.minY}function eb(Ub){return(Ub.maxX-Ub.minX)*(Ub.maxY-Ub.minY)}function ib(Ub){return Ub.maxX-Ub.minX+(Ub.maxY-Ub.minY)}function Db(Ub,kc){return Ub.minX<=kc.minX&&Ub.minY<=kc.minY&&kc.maxX<=Ub.maxX&&kc.maxY<=Ub.maxY}function Ob(Ub,
kc){return kc.minX<=Ub.maxX&&kc.minY<=Ub.maxY&&kc.maxX>=Ub.minX&&kc.maxY>=Ub.minY}function Hb(Ub){return{children:Ub,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function cc(Ub,kc,ec,Mc,Oc){for(var vd=[kc,ec];vd.length;)if(!((ec=vd.pop())-(kc=vd.pop())<=Mc)){var Kd=kc+Math.ceil((ec-kc)/Mc/2)*Mc;k(Ub,Kd,kc,ec,Oc);vd.push(kc,Kd,Kd,ec)}}var sc=function(Ub){void 0===Ub&&(Ub=9);this._maxEntries=Math.max(4,Ub);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return sc.prototype.all=
function(){return this._all(this.data,[])},sc.prototype.search=function(Ub){var kc=this.data,ec=[];if(!Ob(Ub,kc))return ec;for(var Mc=this.toBBox,Oc=[];kc;){for(var vd=0;vd<kc.children.length;vd++){var Kd=kc.children[vd],We=kc.leaf?Mc(Kd):Kd;Ob(Ub,We)&&(kc.leaf?ec.push(Kd):Db(Ub,We)?this._all(Kd,ec):Oc.push(Kd))}kc=Oc.pop()}return ec},sc.prototype.collides=function(Ub){var kc=this.data;if(!Ob(Ub,kc))return!1;for(var ec=[];kc;){for(var Mc=0;Mc<kc.children.length;Mc++){var Oc=kc.children[Mc],vd=kc.leaf?
this.toBBox(Oc):Oc;if(Ob(Ub,vd)){if(kc.leaf||Db(Ub,vd))return!0;ec.push(Oc)}}kc=ec.pop()}return!1},sc.prototype.load=function(Ub){if(!Ub||!Ub.length)return this;if(Ub.length<this._minEntries){for(var kc=0;kc<Ub.length;kc++)this.insert(Ub[kc]);return this}Ub=this._build(Ub.slice(),0,Ub.length-1,0);this.data.children.length?this.data.height===Ub.height?this._splitRoot(this.data,Ub):(this.data.height<Ub.height&&(kc=this.data,this.data=Ub,Ub=kc),this._insert(Ub,this.data.height-Ub.height-1,!0)):this.data=
Ub;return this},sc.prototype.insert=function(Ub){return Ub&&this._insert(Ub,this.data.height-1),this},sc.prototype.clear=function(){return this.data=Hb([]),this},sc.prototype.remove=function(Ub,kc){if(!Ub)return this;for(var ec,Mc,Oc,vd=this.data,Kd=this.toBBox(Ub),We=[],ie=[];vd||We.length;){if(vd||(vd=We.pop(),Mc=We[We.length-1],ec=ie.pop(),Oc=!0),vd.leaf){a:{var Je=Ub;var Hf=vd.children,Se=kc;if(Se){for(var Xe=0;Xe<Hf.length;Xe++)if(Se(Je,Hf[Xe])){Je=Xe;break a}Je=-1}else Je=Hf.indexOf(Je)}if(-1!==
Je)return vd.children.splice(Je,1),We.push(vd),this._condense(We),this}Oc||vd.leaf||!Db(vd,Kd)?Mc?(ec++,vd=Mc.children[ec],Oc=!1):vd=null:(We.push(vd),ie.push(ec),ec=0,Mc=vd,vd=vd.children[0])}return this},sc.prototype.toBBox=function(Ub){return Ub},sc.prototype.compareMinX=function(Ub,kc){return Ub.minX-kc.minX},sc.prototype.compareMinY=function(Ub,kc){return Ub.minY-kc.minY},sc.prototype.toJSON=function(){return this.data},sc.prototype.fromJSON=function(Ub){return this.data=Ub,this},sc.prototype._all=
function(Ub,kc){for(var ec=[];Ub;)Ub.leaf?kc.push.apply(kc,Ub.children):ec.push.apply(ec,Ub.children),Ub=ec.pop();return kc},sc.prototype._build=function(Ub,kc,ec,Mc){var Oc,vd=ec-kc+1,Kd=this._maxEntries;if(vd<=Kd)return la(Oc=Hb(Ub.slice(kc,ec+1)),this.toBBox),Oc;Mc||(Mc=Math.ceil(Math.log(vd)/Math.log(Kd)),Kd=Math.ceil(vd/Math.pow(Kd,Mc-1)));(Oc=Hb([])).leaf=!1;Oc.height=Mc;vd=Math.ceil(vd/Kd);Kd=vd*Math.ceil(Math.sqrt(Kd));for(cc(Ub,kc,ec,Kd,this.compareMinX);kc<=ec;kc+=Kd){var We=Math.min(kc+
Kd-1,ec);cc(Ub,kc,We,vd,this.compareMinY);for(var ie=kc;ie<=We;ie+=vd)Oc.children.push(this._build(Ub,ie,Math.min(ie+vd-1,We),Mc-1))}return la(Oc,this.toBBox),Oc},sc.prototype._chooseSubtree=function(Ub,kc,ec,Mc){for(;Mc.push(kc),!kc.leaf&&Mc.length-1!==ec;){for(var Oc=1/0,vd=1/0,Kd=void 0,We=0;We<kc.children.length;We++){var ie=kc.children[We],Je=eb(ie),Hf=(Se=Ub,Xe=ie,(Math.max(Xe.maxX,Se.maxX)-Math.min(Xe.minX,Se.minX))*(Math.max(Xe.maxY,Se.maxY)-Math.min(Xe.minY,Se.minY))-Je);Hf<vd?(vd=Hf,Oc=
Je<Oc?Je:Oc,Kd=ie):Hf===vd&&Je<Oc&&(Oc=Je,Kd=ie)}kc=Kd||kc.children[0]}var Se,Xe;return kc},sc.prototype._insert=function(Ub,kc,ec){ec=ec?Ub:this.toBBox(Ub);var Mc=[],Oc=this._chooseSubtree(ec,this.data,kc,Mc);Oc.children.push(Ub);for(Ha(Oc,ec);0<=kc&&Mc[kc].children.length>this._maxEntries;)this._split(Mc,kc),kc--;this._adjustParentBBoxes(ec,Mc,kc)},sc.prototype._split=function(Ub,kc){var ec=Ub[kc],Mc=ec.children.length,Oc=this._minEntries;this._chooseSplitAxis(ec,Oc,Mc);Mc=this._chooseSplitIndex(ec,
Oc,Mc);Mc=Hb(ec.children.splice(Mc,ec.children.length-Mc));Mc.height=ec.height;Mc.leaf=ec.leaf;la(ec,this.toBBox);la(Mc,this.toBBox);kc?Ub[kc-1].children.push(Mc):this._splitRoot(ec,Mc)},sc.prototype._splitRoot=function(Ub,kc){this.data=Hb([Ub,kc]);this.data.height=Ub.height+1;this.data.leaf=!1;la(this.data,this.toBBox)},sc.prototype._chooseSplitIndex=function(Ub,kc,ec){for(var Mc,Oc,vd,Kd,We,ie,Je,Hf=1/0,Se=1/0,Xe=kc;Xe<=ec-kc;Xe++){var Pd=sa(Ub,0,Xe,this.toBBox),ld=sa(Ub,Xe,ec,this.toBBox),Qd=(Oc=
Pd,vd=ld,Kd=void 0,We=void 0,ie=void 0,Je=void 0,Kd=Math.max(Oc.minX,vd.minX),We=Math.max(Oc.minY,vd.minY),ie=Math.min(Oc.maxX,vd.maxX),Je=Math.min(Oc.maxY,vd.maxY),Math.max(0,ie-Kd)*Math.max(0,Je-We));Pd=eb(Pd)+eb(ld);Qd<Hf?(Hf=Qd,Mc=Xe,Se=Pd<Se?Pd:Se):Qd===Hf&&Pd<Se&&(Se=Pd,Mc=Xe)}return Mc||ec-kc},sc.prototype._chooseSplitAxis=function(Ub,kc,ec){var Mc=Ub.leaf?this.compareMinX:Ta,Oc=Ub.leaf?this.compareMinY:Xa;this._allDistMargin(Ub,kc,ec,Mc)<this._allDistMargin(Ub,kc,ec,Oc)&&Ub.children.sort(Mc)},
sc.prototype._allDistMargin=function(Ub,kc,ec,Mc){Ub.children.sort(Mc);Mc=this.toBBox;for(var Oc=sa(Ub,0,kc,Mc),vd=sa(Ub,ec-kc,ec,Mc),Kd=ib(Oc)+ib(vd),We=kc;We<ec-kc;We++){var ie=Ub.children[We];Ha(Oc,Ub.leaf?Mc(ie):ie);Kd+=ib(Oc)}for(ec=ec-kc-1;ec>=kc;ec--)Oc=Ub.children[ec],Ha(vd,Ub.leaf?Mc(Oc):Oc),Kd+=ib(vd);return Kd},sc.prototype._adjustParentBBoxes=function(Ub,kc,ec){for(;0<=ec;ec--)Ha(kc[ec],Ub)},sc.prototype._condense=function(Ub){for(var kc=Ub.length-1,ec=void 0;0<=kc;kc--)0===Ub[kc].children.length?
0<kc?(ec=Ub[kc-1].children).splice(ec.indexOf(Ub[kc]),1):this.clear():la(Ub[kc],this.toBBox)},sc})}}),kt=Lh({["../../node_modules/fast-deep-equal/index.js"](a,d){d.exports=function la(H,fa){if(H===fa)return!0;if(H&&fa&&"object"==typeof H&&"object"==typeof fa){if(H.constructor!==fa.constructor)return!1;var sa;if(Array.isArray(H)){var Ha=H.length;if(Ha!=fa.length)return!1;for(sa=Ha;0!==sa--;)if(!la(H[sa],fa[sa]))return!1;return!0}if(H.constructor===RegExp)return H.source===fa.source&&H.flags===fa.flags;
if(H.valueOf!==Object.prototype.valueOf)return H.valueOf()===fa.valueOf();if(H.toString!==Object.prototype.toString)return H.toString()===fa.toString();var Ta=Object.keys(H);Ha=Ta.length;if(Ha!==Object.keys(fa).length)return!1;for(sa=Ha;0!==sa--;)if(!Object.prototype.hasOwnProperty.call(fa,Ta[sa]))return!1;for(sa=Ha;0!==sa--;)if(Ha=Ta[sa],!la(H[Ha],fa[Ha]))return!1;return!0}return H!==H&&fa!==fa}}}),or=Lh({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function k(ib,Db){return!1!==Db.clone&&
Db.isMergeableObject(ib)?Ta(Array.isArray(ib)?[]:{},ib,Db):ib}function H(ib,Db,Ob){return ib.concat(Db).map(function(Hb){return k(Hb,Ob)})}function fa(ib){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(ib).filter(function(Db){return ib.propertyIsEnumerable(Db)}):[]}function la(ib){return Object.keys(ib).concat(fa(ib))}function sa(ib,Db){try{return Db in ib}catch(Ob){return!1}}function Ha(ib,Db,Ob){var Hb={};Ob.isMergeableObject(ib)&&la(ib).forEach(function(cc){Hb[cc]=k(ib[cc],Ob)});
la(Db).forEach(function(cc){if(!sa(ib,cc)||Object.hasOwnProperty.call(ib,cc)&&Object.propertyIsEnumerable.call(ib,cc))if(sa(ib,cc)&&Ob.isMergeableObject(Db[cc])){if(Ob.customMerge){var sc=Ob.customMerge(cc);sc="function"===typeof sc?sc:Ta}else sc=Ta;Hb[cc]=sc(ib[cc],Db[cc],Ob)}else Hb[cc]=k(Db[cc],Ob)});return Hb}function Ta(ib,Db,Ob){Ob=Ob||{};Ob.arrayMerge=Ob.arrayMerge||H;Ob.isMergeableObject=Ob.isMergeableObject||Xa;Ob.cloneUnlessOtherwiseSpecified=k;var Hb=Array.isArray(Db),cc=Array.isArray(ib);
return Hb!==cc?k(Db,Ob):Hb?Ob.arrayMerge(ib,Db,Ob):Ha(ib,Db,Ob)}var Xa=function(ib){var Db;if(Db=!!ib&&"object"===typeof ib)Db=Object.prototype.toString.call(ib),Db=!("[object RegExp]"===Db||"[object Date]"===Db||ib.$$typeof===eb);return Db},eb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Ta.all=function(ib,Db){if(!Array.isArray(ib))throw Error("first argument should be an array");return ib.reduce(function(Ob,Hb){return Ta(Ob,Hb,Db)},{})};d.exports=Ta}}),fs=Lh({["../../node_modules/tslib/tslib.js"](a,
d){var k,H,fa,la,sa,Ha,Ta,Xa,eb,ib,Db,Ob,Hb,cc,sc,Ub,kc,ec,Mc,Oc,vd,Kd,We,ie,Je;(function(Hf){function Se(Pd,ld){Pd!==Xe&&("function"===typeof Object.create?Object.defineProperty(Pd,"__esModule",{value:!0}):Pd.__esModule=!0);return function(Qd,hd){return Pd[Qd]=ld?ld(Qd,hd):hd}}var Xe="object"===typeof za?za:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Pd){Hf(Se(Xe,Se(Pd)))}):"object"===typeof d&&"object"===typeof d.exports?
Hf(Se(Xe,Se(d.exports))):Hf(Se(Xe))})(function(Hf){var Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Pd,ld){Pd.__proto__=ld}||function(Pd,ld){for(var Qd in ld)Object.prototype.hasOwnProperty.call(ld,Qd)&&(Pd[Qd]=ld[Qd])};k=function(Pd,ld){function Qd(){this.constructor=Pd}if("function"!==typeof ld&&null!==ld)throw new TypeError("Class extends value "+String(ld)+" is not a constructor or null");Se(Pd,ld);Pd.prototype=null===ld?Object.create(ld):(Qd.prototype=ld.prototype,new Qd)};
H=Object.assign||function(Pd){for(var ld,Qd=1,hd=arguments.length;Qd<hd;Qd++){ld=arguments[Qd];for(var Dd in ld)Object.prototype.hasOwnProperty.call(ld,Dd)&&(Pd[Dd]=ld[Dd])}return Pd};fa=function(Pd,ld){var Qd={},hd;for(hd in Pd)Object.prototype.hasOwnProperty.call(Pd,hd)&&0>ld.indexOf(hd)&&(Qd[hd]=Pd[hd]);if(null!=Pd&&"function"===typeof Object.getOwnPropertySymbols){var Dd=0;for(hd=Object.getOwnPropertySymbols(Pd);Dd<hd.length;Dd++)0>ld.indexOf(hd[Dd])&&Object.prototype.propertyIsEnumerable.call(Pd,
hd[Dd])&&(Qd[hd[Dd]]=Pd[hd[Dd]])}return Qd};la=function(Pd,ld,Qd,hd){var Dd=arguments.length,Me=3>Dd?ld:null===hd?hd=Object.getOwnPropertyDescriptor(ld,Qd):hd,nf;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)Me=Reflect.decorate(Pd,ld,Qd,hd);else for(var Vf=Pd.length-1;0<=Vf;Vf--)if(nf=Pd[Vf])Me=(3>Dd?nf(Me):3<Dd?nf(ld,Qd,Me):nf(ld,Qd))||Me;return 3<Dd&&Me&&Object.defineProperty(ld,Qd,Me),Me};sa=function(Pd,ld){return function(Qd,hd){ld(Qd,hd,Pd)}};Ha=function(Pd,ld){if("object"===
typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Pd,ld)};Ta=function(Pd,ld,Qd,hd){function Dd(Me){return Me instanceof Qd?Me:new Qd(function(nf){nf(Me)})}return new (Qd||=Promise)(function(Me,nf){function Vf(hh){try{kg(hd.next(hh))}catch(Qf){nf(Qf)}}function If(hh){try{kg(hd["throw"](hh))}catch(Qf){nf(Qf)}}function kg(hh){hh.done?Me(hh.value):Dd(hh.value).then(Vf,If)}kg((hd=hd.apply(Pd,ld||[])).next())})};Xa=function(Pd,ld){function Qd(kg){return function(hh){return hd([kg,
hh])}}function hd(kg){if(Me)throw new TypeError("Generator is already executing.");for(;Dd;)try{if(Me=1,nf&&(Vf=kg[0]&2?nf["return"]:kg[0]?nf["throw"]||((Vf=nf["return"])&&Vf.call(nf),0):nf.next)&&!(Vf=Vf.call(nf,kg[1])).done)return Vf;if(nf=0,Vf)kg=[kg[0]&2,Vf.value];switch(kg[0]){case 0:case 1:Vf=kg;break;case 4:return Dd.label++,{value:kg[1],done:!1};case 5:Dd.label++;nf=kg[1];kg=[0];continue;case 7:kg=Dd.ops.pop();Dd.trys.pop();continue;default:if(!(Vf=Dd.trys,Vf=0<Vf.length&&Vf[Vf.length-1])&&
(6===kg[0]||2===kg[0])){Dd=0;continue}if(3===kg[0]&&(!Vf||kg[1]>Vf[0]&&kg[1]<Vf[3]))Dd.label=kg[1];else if(6===kg[0]&&Dd.label<Vf[1])Dd.label=Vf[1],Vf=kg;else if(Vf&&Dd.label<Vf[2])Dd.label=Vf[2],Dd.ops.push(kg);else{Vf[2]&&Dd.ops.pop();Dd.trys.pop();continue}}kg=ld.call(Pd,Dd)}catch(hh){kg=[6,hh],nf=0}finally{Me=Vf=0}if(kg[0]&5)throw kg[1];return{value:kg[0]?kg[1]:void 0,done:!0}}var Dd={label:0,sent:function(){if(Vf[0]&1)throw Vf[1];return Vf[1]},trys:[],ops:[]},Me,nf,Vf,If;return If={next:Qd(0),
"throw":Qd(1),"return":Qd(2)},"function"===typeof Symbol&&(If[Symbol.iterator]=function(){return this}),If};eb=function(Pd,ld){for(var Qd in Pd)"default"===Qd||Object.prototype.hasOwnProperty.call(ld,Qd)||Je(ld,Pd,Qd)};Je=Object.create?function(Pd,ld,Qd,hd){void 0===hd&&(hd=Qd);var Dd=Object.getOwnPropertyDescriptor(ld,Qd);if(!Dd||("get"in Dd?!ld.__esModule:Dd.writable||Dd.configurable))Dd={enumerable:!0,get:function(){return ld[Qd]}};Object.defineProperty(Pd,hd,Dd)}:function(Pd,ld,Qd,hd){void 0===
hd&&(hd=Qd);Pd[hd]=ld[Qd]};ib=function(Pd){var ld="function"===typeof Symbol&&Symbol.iterator,Qd=ld&&Pd[ld],hd=0;if(Qd)return Qd.call(Pd);if(Pd&&"number"===typeof Pd.length)return{next:function(){Pd&&hd>=Pd.length&&(Pd=void 0);return{value:Pd&&Pd[hd++],done:!Pd}}};throw new TypeError(ld?"Object is not iterable.":"Symbol.iterator is not defined.");};Db=function(Pd,ld){var Qd="function"===typeof Symbol&&Pd[Symbol.iterator];if(!Qd)return Pd;Pd=Qd.call(Pd);var hd,Dd=[];try{for(;(void 0===ld||0<ld--)&&
!(hd=Pd.next()).done;)Dd.push(hd.value)}catch(nf){var Me={error:nf}}finally{try{hd&&!hd.done&&(Qd=Pd["return"])&&Qd.call(Pd)}finally{if(Me)throw Me.error;}}return Dd};Ob=function(){for(var Pd=[],ld=0;ld<arguments.length;ld++)Pd=Pd.concat(Db(arguments[ld]));return Pd};Hb=function(){for(var Pd=0,ld=0,Qd=arguments.length;ld<Qd;ld++)Pd+=arguments[ld].length;Pd=Array(Pd);var hd=0;for(ld=0;ld<Qd;ld++)for(var Dd=arguments[ld],Me=0,nf=Dd.length;Me<nf;Me++,hd++)Pd[hd]=Dd[Me];return Pd};cc=function(Pd,ld,Qd){if(Qd||
2===arguments.length)for(var hd=0,Dd=ld.length,Me;hd<Dd;hd++)!Me&&hd in ld||(Me||=Array.prototype.slice.call(ld,0,hd),Me[hd]=ld[hd]);return Pd.concat(Me||Array.prototype.slice.call(ld))};sc=function(Pd){return this instanceof sc?(this.v=Pd,this):new sc(Pd)};Ub=function(Pd,ld,Qd){function hd(Qf){If[Qf]&&(kg[Qf]=function(ch){return new Promise(function(Hh,nj){1<hh.push([Qf,ch,Hh,nj])||Dd(Qf,ch)})})}function Dd(Qf,ch){try{var Hh=If[Qf](ch);Hh.value instanceof sc?Promise.resolve(Hh.value.v).then(Me,nf):
Vf(hh[0][2],Hh)}catch(nj){Vf(hh[0][3],nj)}}function Me(Qf){Dd("next",Qf)}function nf(Qf){Dd("throw",Qf)}function Vf(Qf,ch){(Qf(ch),hh.shift(),hh.length)&&Dd(hh[0][0],hh[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var If=Qd.apply(Pd,ld||[]),kg,hh=[];return kg={},hd("next"),hd("throw"),hd("return"),kg[Symbol.asyncIterator]=function(){return this},kg};kc=function(Pd){function ld(Dd,Me){Qd[Dd]=Pd[Dd]?function(nf){return(hd=!hd)?{value:sc(Pd[Dd](nf)),done:"return"===
Dd}:Me?Me(nf):nf}:Me}var Qd,hd;return Qd={},ld("next"),ld("throw",function(Dd){throw Dd;}),ld("return"),Qd[Symbol.iterator]=function(){return this},Qd};ec=function(Pd){function ld(Me){Dd[Me]=Pd[Me]&&function(nf){return new Promise(function(Vf,If){nf=Pd[Me](nf);Qd(Vf,If,nf.done,nf.value)})}}function Qd(Me,nf,Vf,If){Promise.resolve(If).then(function(kg){Me({value:kg,done:Vf})},nf)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var hd=Pd[Symbol.asyncIterator],Dd;
return hd?hd.call(Pd):(Pd="function"===typeof ib?ib(Pd):Pd[Symbol.iterator](),Dd={},ld("next"),ld("throw"),ld("return"),Dd[Symbol.asyncIterator]=function(){return this},Dd)};Mc=function(Pd,ld){Object.defineProperty?Object.defineProperty(Pd,"raw",{value:ld}):Pd.raw=ld;return Pd};var Xe=Object.create?function(Pd,ld){Object.defineProperty(Pd,"default",{enumerable:!0,value:ld})}:function(Pd,ld){Pd["default"]=ld};Oc=function(Pd){if(Pd&&Pd.__esModule)return Pd;var ld={};if(null!=Pd)for(var Qd in Pd)"default"!==
Qd&&Object.prototype.hasOwnProperty.call(Pd,Qd)&&Je(ld,Pd,Qd);Xe(ld,Pd);return ld};vd=function(Pd){return Pd&&Pd.__esModule?Pd:{"default":Pd}};Kd=function(Pd,ld,Qd,hd){if("a"===Qd&&!hd)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof ld?Pd!==ld||!hd:!ld.has(Pd))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===Qd?hd:"a"===Qd?hd.call(Pd):hd?hd.value:ld.get(Pd)};We=function(Pd,ld,Qd,hd,Dd){if("m"===
hd)throw new TypeError("Private method is not writable");if("a"===hd&&!Dd)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof ld?Pd!==ld||!Dd:!ld.has(Pd))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===hd?Dd.call(Pd,Qd):Dd?Dd.value=Qd:ld.set(Pd,Qd),Qd};ie=function(Pd,ld){if(null===ld||"object"!==typeof ld&&"function"!==typeof ld)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===
typeof Pd?ld===Pd:Pd.has(ld)};Hf("__extends",k);Hf("__assign",H);Hf("__rest",fa);Hf("__decorate",la);Hf("__param",sa);Hf("__metadata",Ha);Hf("__awaiter",Ta);Hf("__generator",Xa);Hf("__exportStar",eb);Hf("__createBinding",Je);Hf("__values",ib);Hf("__read",Db);Hf("__spread",Ob);Hf("__spreadArrays",Hb);Hf("__spreadArray",cc);Hf("__await",sc);Hf("__asyncGenerator",Ub);Hf("__asyncDelegator",kc);Hf("__asyncValues",ec);Hf("__makeTemplateObject",Mc);Hf("__importStar",Oc);Hf("__importDefault",vd);Hf("__classPrivateFieldGet",
Kd);Hf("__classPrivateFieldSet",We);Hf("__classPrivateFieldIn",ie)})}}),Fq={};((a,d)=>{for(var k in d)qg(a,k,{get:d[k],enumerable:!0})})(Fq,{App:()=>CD,PreviewManager:()=>Wh,generateJSXFromModel:()=>Vn,generateSVGFromModel:()=>xn});Ua.exports=(a=>vm(qg({},"__esModule",{value:!0}),a))(Fq);var hs=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";a.Gray="gray";a.Default="";return a})(hs||{}),pr=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(pr||
{}),nr,yu=new Uint8Array(16),Ng=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ql=[];for(let a=0;256>a;++a)ql.push((a+256).toString(16).slice(1));var jt,Yn,Wo=0,Hq=0,gk=function(a,d,k){k=d&&k||0;const H=d||Array(16);a=a||{};let fa=a.node||jt;var la=void 0!==a.clockseq?a.clockseq:Yn;if(null==fa||null==la){var sa=a.random||(a.rng||r)();null==fa&&(fa=jt=[sa[0]|1,sa[1],sa[2],sa[3],sa[4],sa[5]]);null==la&&(la=Yn=(sa[6]<<8|sa[7])&16383)}sa=
void 0!==a.msecs?a.msecs:Date.now();let Ha=void 0!==a.nsecs?a.nsecs:Hq+1;const Ta=sa-Wo+(Ha-Hq)/1E4;0>Ta&&void 0===a.clockseq&&(la=la+1&16383);(0>Ta||sa>Wo)&&void 0===a.nsecs&&(Ha=0);if(1E4<=Ha)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Wo=sa;Hq=Ha;Yn=la;sa+=122192928E5;a=(1E4*(sa&268435455)+Ha)%4294967296;H[k++]=a>>>24&255;H[k++]=a>>>16&255;H[k++]=a>>>8&255;H[k++]=a&255;a=sa/4294967296*1E4&268435455;H[k++]=a>>>8&255;H[k++]=a&255;H[k++]=a>>>24&15|16;H[k++]=a>>>16&255;H[k++]=la>>>
8|128;H[k++]=la&255;for(la=0;6>la;++la)H[k+la]=fa[la];return d||U(H)},Jh=class{static clamp(a,d,k){return Math.max(d,"undefined"!==typeof k?Math.min(a,k):a)}static clampV(a,d,k){return a.map(H=>k?Jh.clamp(H,d,k):Jh.clamp(H,d))}static cross(a,d,k){return(d[0]-a[0])*(k[1]-a[1])-(k[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},xd=Jh;xd.neg=a=>[-a[0],-a[1]];xd.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];xd.addScalar=(a,d)=>[a[0]+d,a[1]+d];xd.sub=(a,d)=>[a[0]-d[0],a[1]-
d[1]];xd.subScalar=(a,d)=>[a[0]-d,a[1]-d];xd.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];xd.mul=(a,d)=>[a[0]*d,a[1]*d];xd.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];xd.div=(a,d)=>[a[0]/d,a[1]/d];xd.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];xd.per=a=>[a[1],-a[0]];xd.dpr=(a,d)=>a[0]*d[0]+a[1]*d[1];xd.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];xd.len2=a=>a[0]*a[0]+a[1]*a[1];xd.len=a=>Math.hypot(a[0],a[1]);xd.pry=(a,d)=>Jh.dpr(a,d)/Jh.len(d);xd.uni=a=>Jh.div(a,Jh.len(a));xd.normalize=a=>Jh.uni(a);xd.tangent=(a,d)=>Jh.uni(Jh.sub(a,d));xd.dist2=
(a,d)=>Jh.len2(Jh.sub(a,d));xd.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);xd.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let k=1/Math.max(d[0],d[1]);k*=1.29289-(d[0]+d[1])*k*.29289;return[a[0]*k,a[1]*k]};xd.ang=(a,d)=>Math.atan2(Jh.cpr(a,d),Jh.dpr(a,d));xd.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);xd.med=(a,d)=>Jh.mul(Jh.add(a,d),.5);xd.rot=(a,d=0)=>[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];xd.rotWith=(a,d,k=0)=>{if(0===k)return a;const H=
Math.sin(k);k=Math.cos(k);const fa=a[0]-d[0];a=a[1]-d[1];return[fa*k-a*H+d[0],fa*H+a*k+d[1]]};xd.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];xd.lrp=(a,d,k)=>Jh.add(a,Jh.mul(Jh.sub(d,a),k));xd.int=(a,d,k,H,fa=1)=>{k=(Jh.clamp(k,H)-k)/(H-k);return Jh.add(Jh.mul(a,1-k),Jh.mul(d,fa))};xd.ang3=(a,d,k)=>{a=Jh.vec(d,a);d=Jh.vec(d,k);return Jh.ang(a,d)};xd.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];xd.rescale=(a,d)=>{const k=Jh.len(a);return[d*a[0]/k,d*a[1]/k]};xd.isLeft=(a,d,k)=>(d[0]-a[0])*(k[1]-a[1])-(k[0]-a[0])*
(d[1]-a[1]);xd.clockwise=(a,d,k)=>0<Jh.isLeft(a,d,k);xd.toFixed=a=>a.map(d=>Math.round(100*d)/100);xd.nearestPointOnLineThroughPoint=(a,d,k)=>Jh.add(a,Jh.mul(d,Jh.pry(Jh.sub(k,a),d)));xd.distanceToLineThroughPoint=(a,d,k)=>Jh.dist(k,Jh.nearestPointOnLineThroughPoint(a,d,k));xd.nearestPointOnLineSegment=(a,d,k,H=!0)=>{const fa=Jh.uni(Jh.sub(d,a));k=Jh.add(a,Jh.mul(fa,Jh.pry(Jh.sub(k,a),fa)));if(H){if(k[0]<Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(k[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(k[1]<
Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(k[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return k};xd.distanceToLineSegment=(a,d,k,H=!0)=>Jh.dist(k,Jh.nearestPointOnLineSegment(a,d,k,H));xd.nudge=(a,d,k)=>Jh.isEqual(a,d)?a:Jh.add(a,Jh.mul(Jh.uni(Jh.sub(d,a)),k));xd.nudgeAtAngle=(a,d,k)=>[Math.cos(d)*k+a[0],Math.sin(d)*k+a[1]];xd.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];xd.pointsBetween=(a,d,k=6)=>Array.from(Array(k)).map((H,fa)=>{H=fa/(k-1);fa=Math.min(1,.5+Math.abs(.5-H));
return[...Jh.lrp(a,d,H),fa]});xd.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);xd.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};xd.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];xd.min=(...a)=>[Math.min(...a.map(d=>d[0])),Math.min(...a.map(d=>d[1]))];var ce=xd,Bf=class{static getRectangleSides(a,d,k=0){const H=[a[0]+d[0]/2,a[1]+d[1]/2],fa=xd.rotWith(a,H,k),la=xd.rotWith(xd.add(a,[d[0],0]),H,k),sa=xd.rotWith(xd.add(a,d),H,k);a=xd.rotWith(xd.add(a,[0,d[1]]),
H,k);return[["top",[fa,la]],["right",[la,sa]],["bottom",[sa,a]],["left",[a,fa]]]}static getBoundsSides(a){return Bf.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+2*d,height:a.height+2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&
a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return Bf.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let k=Infinity,H=Infinity,fa=-Infinity,la=-Infinity;if(2>a.length)H=k=0,la=fa=1;else for(const sa of a)k=Math.min(sa[0],k),H=Math.min(sa[1],H),fa=Math.max(sa[0],fa),la=Math.max(sa[1],la);return 0!==d?Bf.getBoundsFromPoints(a.map(sa=>xd.rotWith(sa,[(k+fa)/2,(H+la)/
2],d))):{minX:k,minY:H,maxX:fa,maxY:la,width:Math.max(1,fa-k),height:Math.max(1,la-H)}}static centerBounds(a,d){const k=Bf.getBoundsCenter(a);return Bf.translateBounds(a,[d[0]-k[0],d[1]-k[1]])}static snapBoundsToGrid(a,d){const k=Math.round(a.minX/d)*d,H=Math.round(a.minY/d)*d,fa=Math.round(a.maxX/d)*d;a=Math.round(a.maxY/d)*d;return{minX:k,minY:H,maxX:fa,maxY:a,width:Math.max(1,fa-k),height:Math.max(1,a-H)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+d[1],maxX:a.maxX+d[0],maxY:a.maxY+
d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const k=Bf.getBoundsCenter(a);return Bf.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[k[0]*d,k[1]*d])}static divideBounds(a,d){const k=Bf.getBoundsCenter(a);return Bf.centerBounds({minX:a.minX/d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[k[0]/d,k[1]/d])}static getRotatedBounds(a,d=0){a=Bf.getRotatedCorners(a,d);let k=d=Infinity,H=-Infinity,fa=
-Infinity;for(const la of a)d=Math.min(la[0],d),k=Math.min(la[1],k),H=Math.max(la[0],H),fa=Math.max(la[1],fa);return{minX:d,minY:k,maxX:H,maxY:fa,width:Math.max(1,H-d),height:Math.max(1,fa-k),rotation:0}}static getRotatedEllipseBounds(a,d,k,H,fa=0){var la=Math.cos(fa);const sa=Math.sin(fa);fa=Math.hypot(k*la,H*sa);la=Math.hypot(k*sa,H*la);return{minX:a+k-fa,minY:d+H-la,maxX:a+k+fa,maxY:d+H+la,width:2*fa,height:2*la}}static getExpandedBounds(a,d){const k=Math.min(a.minX,d.minX),H=Math.min(a.minY,d.minY),
fa=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:k,minY:H,maxX:fa,maxY:a,width:Math.abs(fa-k),height:Math.abs(a-H)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let k=1;k<a.length;k++)d=Bf.getExpandedBounds(d,a[k]);return d}static getRotatedCorners(a,d=0){const k=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(H=>xd.rotWith(H,k,d)):a}static getTransformedBoundingBox(a,d,k,H=0,fa=!1){const [la,
sa]=[a.minX,a.minY],[Ha,Ta]=[a.maxX,a.maxY];let [Xa,eb]=[a.minX,a.minY],[ib,Db]=[a.maxX,a.maxY];if("center"===d)return{minX:Xa+k[0],minY:eb+k[1],maxX:ib+k[0],maxY:Db+k[1],width:ib-Xa,height:Db-eb,scaleX:1,scaleY:1};const [Ob,Hb]=xd.rot(k,-H);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":eb+=Hb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Db+=Hb}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":Xa+=Ob;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":ib+=
Ob}var cc=Ha-la;const sc=Ta-sa;var Ub=(ib-Xa)/cc,kc=(Db-eb)/sc;a=0>Ub;k=0>kc;var ec=Math.abs(ib-Xa),Mc=Math.abs(Db-eb);if(fa)switch(fa=cc/sc,cc=fa<ec/Mc,kc=1/fa*(0>kc?1:-1)*ec,Ub=Mc*(0>Ub?1:-1)*fa,d){case "top_left_corner":cc?eb=Db+kc:Xa=ib+Ub;break;case "top_right_corner":cc?eb=Db+kc:ib=Xa-Ub;break;case "bottom_right_corner":cc?Db=eb-kc:ib=Xa-Ub;break;case "bottom_left_corner":cc?Db=eb-kc:Xa=ib+Ub;break;case "bottom_edge":case "top_edge":ec=(Xa+ib)/2;Mc*=fa;Xa=ec-Mc/2;ib=ec+Mc/2;break;case "left_edge":case "right_edge":Mc=
(eb+Db)/2,ec/=fa,eb=Mc-ec/2,Db=Mc+ec/2}if(0!==H%(2*Math.PI)){ec=[0,0];Mc=xd.med([la,sa],[Ha,Ta]);Ub=xd.med([Xa,eb],[ib,Db]);switch(d){case "top_left_corner":ec=xd.sub(xd.rotWith([ib,Db],Ub,H),xd.rotWith([Ha,Ta],Mc,H));break;case "top_right_corner":ec=xd.sub(xd.rotWith([Xa,Db],Ub,H),xd.rotWith([la,Ta],Mc,H));break;case "bottom_right_corner":ec=xd.sub(xd.rotWith([Xa,eb],Ub,H),xd.rotWith([la,sa],Mc,H));break;case "bottom_left_corner":ec=xd.sub(xd.rotWith([ib,eb],Ub,H),xd.rotWith([Ha,sa],Mc,H));break;
case "top_edge":ec=xd.sub(xd.rotWith(xd.med([Xa,Db],[ib,Db]),Ub,H),xd.rotWith(xd.med([la,Ta],[Ha,Ta]),Mc,H));break;case "left_edge":ec=xd.sub(xd.rotWith(xd.med([ib,eb],[ib,Db]),Ub,H),xd.rotWith(xd.med([Ha,sa],[Ha,Ta]),Mc,H));break;case "bottom_edge":ec=xd.sub(xd.rotWith(xd.med([Xa,eb],[ib,eb]),Ub,H),xd.rotWith(xd.med([la,sa],[Ha,sa]),Mc,H));break;case "right_edge":ec=xd.sub(xd.rotWith(xd.med([Xa,eb],[Xa,Db]),Ub,H),xd.rotWith(xd.med([la,sa],[la,Ta]),Mc,H))}[Xa,eb]=xd.sub([Xa,eb],ec);[ib,Db]=xd.sub([ib,
Db],ec)}ib<Xa&&([ib,Xa]=[Xa,ib]);Db<eb&&([Db,eb]=[eb,Db]);return{minX:Xa,minY:eb,maxX:ib,maxY:Db,width:ib-Xa,height:Db-eb,scaleX:(ib-Xa)/(Ha-la||1)*(a?-1:1),scaleY:(Db-eb)/(Ta-sa||1)*(k?-1:1)}}static getTransformAnchor(a,d,k){let H=a;switch(a){case "top_left_corner":H=d&&k?"bottom_right_corner":d?"top_right_corner":k?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":H=d&&k?"bottom_left_corner":d?"top_left_corner":k?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":H=
d&&k?"top_left_corner":d?"bottom_left_corner":k?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":H=d&&k?"top_right_corner":d?"bottom_right_corner":k?"top_left_corner":"top_right_corner"}return H}static getRelativeTransformedBoundingBox(a,d,k,H,fa){H=a.minX+(H?d.maxX-k.maxX:k.minX-d.minX)/d.width*a.width;fa=a.minY+(fa?d.maxY-k.maxY:k.minY-d.minY)/d.height*a.height;const la=k.width/d.width*a.width;a=k.height/d.height*a.height;return{minX:H,minY:fa,maxX:H+la,maxY:fa+a,width:la,height:a}}static getRotatedSize(a,
d){const k=xd.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(H=>xd.rotWith(H,k,d));a=Bf.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=Bf.getBoundsCenter(a);return lf(he({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=[Infinity,Infinity];a.forEach(k=>{d[0]=Math.min(d[0],k[0]);d[1]=Math.min(d[1],k[1])});return d}static getTLSnapPoints(a,d,k){const H=he({},a);a=[0,0];const fa=[],la=
{minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},sa=["midX","minX","maxX"],Ha=["midY","minY","maxY"];d=d.map(Db=>{const Ob=sa.flatMap((cc,sc)=>sa.map((Ub,kc)=>{const ec=H[cc]-Db[Ub];return{f:cc,t:Ub,gap:ec,distance:Math.abs(ec),isCareful:0===sc||3===sc+kc}})),Hb=Ha.flatMap((cc,sc)=>Ha.map((Ub,kc)=>{const ec=H[cc]-Db[Ub];return{f:cc,t:Ub,gap:ec,distance:Math.abs(ec),
isCareful:0===sc||3===sc+kc}}));return[Db,Ob,Hb]});let Ta=Infinity,Xa=Infinity,eb=Infinity,ib=Infinity;d.forEach(([,Db,Ob])=>{Db.forEach(Hb=>{Hb.distance<k&&Hb.distance<eb&&(eb=Hb.distance,Ta=Hb.gap)});Ob.forEach(Hb=>{Hb.distance<k&&Hb.distance<ib&&(ib=Hb.distance,Xa=Hb.gap)})});d.forEach(([Db,Ob,Hb])=>{Infinity!==Ta&&Ob.forEach(cc=>{2>Math.abs(cc.gap-Ta)&&(la[cc.f]=lf(he({},la[cc.f]),{isSnapped:!0,to:Db[cc.t],B:Db,distance:cc.distance}))});Infinity!==Xa&&Hb.forEach(cc=>{2>Math.abs(cc.gap-Xa)&&(la[cc.f]=
lf(he({},la[cc.f]),{isSnapped:!0,to:Db[cc.t],B:Db,distance:cc.distance}))})});a[0]=Infinity===Ta?0:Ta;a[1]=Infinity===Xa?0:Xa;H.minX-=a[0];H.midX-=a[0];H.maxX-=a[0];H.minY-=a[1];H.midY-=a[1];H.maxY-=a[1];sa.forEach(Db=>{Db=la[Db];if(Db.isSnapped){var {id:Ob,B:Hb}=Db;Db=H[Ob];fa.push("minX"===Ob?[[Db,H.midY],[Db,Hb.minY],[Db,Hb.maxY]]:[[Db,H.minY],[Db,H.maxY],[Db,Hb.minY],[Db,Hb.maxY]])}});Ha.forEach(Db=>{Db=la[Db];if(Db.isSnapped){var {id:Ob,B:Hb}=Db;Db=H[Ob];fa.push("midY"===Ob?[[H.midX,Db],[Hb.minX,
Db],[Hb.maxX,Db]]:[[H.minX,Db],[H.maxX,Db],[Hb.minX,Db],[Hb.maxX,Db]])}});return{offset:a,snapLines:fa}}static ensureRatio(a,d){const {width:k,height:H}=a,fa=he({},a);k/H<d?(fa.width=H*d,fa.maxX+=k-a.width):(fa.height=k/d,fa.maxY+=H-a.height);return fa}static getDistributions(a,d){var k=a.map(la=>{const sa=la.getBounds();return{id:la.id,point:[sa.minX,sa.minY],bounds:sa,center:la.getCenter()}});a=k.length;var H=Bf.getCommonBounds(k.map(({bounds:la})=>la));const fa=[];switch(d){case "horizontal":d=
k.reduce((la,sa)=>la+sa.bounds.width,0);if(d>H.width){const la=k.sort((Xa,eb)=>Xa.bounds.minX-eb.bounds.minX)[0],sa=k.sort((Xa,eb)=>eb.bounds.maxX-Xa.bounds.maxX)[0];H=k.filter(Xa=>Xa!==la&&Xa!==sa).sort((Xa,eb)=>Xa.center[0]-eb.center[0]);const Ha=(sa.center[0]-la.center[0])/(a-1),Ta=la.center[0]+Ha;H.forEach(({id:Xa,point:eb,bounds:ib},Db)=>{fa.push({id:Xa,prev:eb,next:[Ta+Ha*Db-ib.width/2,ib.minY]})})}else{k=k.sort((Ha,Ta)=>Ha.center[0]-Ta.center[0]);let la=H.minX;const sa=(H.width-d)/(a-1);k.forEach(({id:Ha,
point:Ta,bounds:Xa})=>{fa.push({id:Ha,prev:Ta,next:[la,Xa.minY]});la+=Xa.width+sa})}break;case "vertical":if(d=k.reduce((la,sa)=>la+sa.bounds.height,0),d>H.height){const la=k.sort((Xa,eb)=>Xa.bounds.minY-eb.bounds.minY)[0],sa=k.sort((Xa,eb)=>eb.bounds.maxY-Xa.bounds.maxY)[0];H=k.filter(Xa=>Xa!==la&&Xa!==sa).sort((Xa,eb)=>Xa.center[1]-eb.center[1]);const Ha=(sa.center[1]-la.center[1])/(a-1),Ta=la.center[1]+Ha;H.forEach(({id:Xa,point:eb,bounds:ib},Db)=>{fa.push({id:Xa,prev:eb,next:[ib.minX,Ta+Ha*Db-
ib.height/2]})})}else{k=k.sort((Ha,Ta)=>Ha.center[1]-Ta.center[1]);let la=H.minY;const sa=(H.height-d)/(a-1);k.forEach(({id:Ha,point:Ta,bounds:Xa})=>{fa.push({id:Ha,prev:Ta,next:[Xa.minX,la]});la+=Xa.height+sa})}}return fa}static getPackedDistributions(a){const d=Bf.getCommonBounds(a.map(({bounds:fa})=>fa)),k=[d.minX,d.minY],H=Object.fromEntries(a.map(fa=>[fa.id,[fa.bounds.minX,fa.bounds.minY]]));a=a.filter(fa=>{var la,sa,Ha,Ta;return!((null==(sa=null==(la=fa.props.handles)?void 0:la.start)?0:sa.bindingId)||
(null==(Ta=null==(Ha=fa.props.handles)?void 0:Ha.end)?0:Ta.bindingId))}).map(fa=>{const la=fa.getBounds();return{id:fa.id,w:la.width+16,h:la.height+16,x:la.minX,y:la.minY}});w(a);return a.map(({id:fa,x:la,y:sa})=>({id:fa,prev:H[fa],next:[la+k[0],sa+k[1]]}))}},up=class{static pointInCircle(a,d,k){return xd.dist(a,d)<=k}static pointInEllipse(a,d,k,H,fa=0){fa=fa||0;var la=Math.cos(fa);fa=Math.sin(fa);d=xd.sub(a,d);a=la*d[0]+fa*d[1];la=fa*d[0]-la*d[1];return 1>=a*a/(k*k)+la*la/(H*H)}static pointInRect(a,
d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let k=0;d.forEach((H,fa)=>{fa=d[(fa+1)%d.length];H[1]<=a[1]?fa[1]>a[1]&&0<xd.cross(H,fa,a)&&(k+=1):fa[1]<=a[1]&&0>xd.cross(H,fa,a)&&--k});return 0!==k}static pointInBounds(a,d){return!(a[0]<d.minX||a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,k=3){for(let H=1;H<d.length;H++)if(xd.distanceToLineSegment(d[H-1],d[H],a)<k)return!0;return!1}static _getSqSegDist(a,d,k){let H=d[0];d=d[1];let fa=
k[0]-H,la=k[1]-d;if(0!==fa||0!==la){const sa=((a[0]-H)*fa+(a[1]-d)*la)/(fa*fa+la*la);1<sa?(H=k[0],d=k[1]):0<sa&&(H+=fa*sa,d+=la*sa)}fa=a[0]-H;la=a[1]-d;return fa*fa+la*la}static _simplifyStep(a,d,k,H,fa){let la=H,sa=-1;for(let Ha=d+1;Ha<k;Ha++){const Ta=up._getSqSegDist(a[Ha],a[d],a[k]);Ta>la&&(sa=Ha,la=Ta)}-1<sa&&la>H&&(1<sa-d&&up._simplifyStep(a,d,sa,H,fa),fa.push(a[sa]),1<k-sa&&up._simplifyStep(a,sa,k,H,fa))}static simplify2(a,d=1){if(2>=a.length)return a;d*=d;var k=a[0],H=a[1];const fa=[k];for(let la=
1,sa=a.length;la<sa;la++)H=a[la],(H[0]-k[0])*(H[0]-k[0])+(H[1]-k[1])*(H[1]-k[1])>d&&(fa.push(H),k=H);k!==H&&fa.push(H);k=fa.length-1;H=[fa[0]];up._simplifyStep(fa,0,k,d,H);H.push(fa[k],a[a.length-1]);return H}static pointNearToPolyline(a,d,k=8){const H=d.length;for(let fa=1;fa<H;fa++)if(xd.distanceToLineSegment(d[fa-1],d[fa],a)<k)return!0;return!1}},vk=up;fb(vk,"simplify",(a,d=1)=>{var k=a.length;const H=a[0],fa=a[k-1],[la,sa]=H,[Ha,Ta]=fa;if(2<k){let Xa=0,eb=0;const ib=xd.len2([Ta-sa,Ha-la]);for(let Db=
1;Db<k-1;Db++){const [Ob,Hb]=a[Db],cc=Math.pow(Ob*(Ta-sa)+la*(Hb-Ta)+Ha*(sa-Hb),2)/ib;Xa>cc||(Xa=cc,eb=Db)}if(Xa>d)return k=up.simplify(a.slice(0,eb+1),d),a=up.simplify(a.slice(eb+1),d),k.concat(a.slice(1))}return[H,fa]});var sl=Math.PI,Bn=sl/2,Jk=2*sl,Iq={},lt={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",
bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},gm=class{static circleFromThreePoints(a,d,k){const [H,fa]=a,[la,sa]=d,[Ha,Ta]=k;d=H*(sa-Ta)-fa*(la-Ha)+la*Ta-Ha*sa;a=-((H*H+fa*fa)*(Ta-sa)+(la*la+sa*sa)*(fa-Ta)+(Ha*Ha+Ta*Ta)*(sa-fa))/(2*d);d=-((H*H+fa*fa)*(la-Ha)+(la*la+sa*sa)*(Ha-H)+(Ha*Ha+Ta*Ta)*(H-la))/(2*d);return[a,d,Math.hypot(a-H,d-fa)]}static perimeterOfEllipse(a,d){const k=Math.pow(a-
d,2)/Math.pow(a+d,2);return sl*(a+d)*(1+3*k/(10+Math.sqrt(4-3*k)))}static shortAngleDist(a,d){a=(d-a)%Jk;return 2*a%Jk-a}static longAngleDist(a,d){return Jk-gm.shortAngleDist(a,d)}static lerpAngles(a,d,k){return a+gm.shortAngleDist(a,d)*k}static angleDelta(a,d){return gm.shortAngleDist(a,d)}static getSweep(a,d,k){return gm.angleDelta(ce.angle(a,d),ce.angle(a,k))}static clampRadians(a){return(Jk+a)%Jk}static snapAngleToSegments(a,d){d=Jk/d;a=Math.floor((gm.clampRadians(a)+d/2)/d)*d%Jk;a<sl&&(a+=Jk);
a>sl&&(a-=Jk);return a}static isAngleBetween(a,d,k){if(k===a||k===d)return!0;d=(d-a+Bn)%Bn;return d<=sl!==(k-a+Bn)%Bn>d}static degreesToRadians(a){return a*sl/180}static radiansToDegrees(a){return 180*a/sl}static getArcLength(a,d,k,H){a=gm.getSweep(a,k,H);return a/Jk*Jk*d}static getSweepFlag(a,d,k){k=ce.angle(a,k);return 0<(ce.angle(a,d)-k+3*sl)%Jk-sl?0:1}static getLargeArcFlag(a,d,k){a=ce.angle(k,a);d=(ce.angle(k,d)-a+3*sl)%Jk-sl;return Math.abs(d)>Bn?0:1}static getArcDashOffset(a,d,k,H,fa){const la=
gm.getSweepFlag(a,k,H);d=gm.getArcLength(a,d,k,H);return-(0>la?d:Jk*a[2]-d)/2+fa}static getEllipseDashOffset(a,d){return-(Jk*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},bl=class{static getPolygonCentroid(a){var d=a.map(k=>k[0]);a=a.map(k=>k[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+Math.max(...a);return[d?d/2:0,a?a/2:0]}};fb(bl,"getEdges",a=>{const d=a.length;return a.map((k,H)=>
[k,a[(H+1)%d]])});fb(bl,"getEdgeOutwardNormal",(a,d)=>ce.per(ce.uni(ce.sub(d,a))));fb(bl,"getEdgeInwardNormal",(a,d)=>ce.neg(bl.getEdgeOutwardNormal(a,d)));fb(bl,"getOffsetEdge",(a,d,k)=>{k=ce.mul(ce.per(ce.uni(ce.sub(d,a))),k);return[ce.add(a,k),ce.add(d,k)]});fb(bl,"getOffsetEdges",(a,d)=>a.map(([k,H])=>bl.getOffsetEdge(k,H,d)));fb(bl,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[ce.add(a,[-d,-d]),ce.add(a,[d,-d]),ce.add(a,[d,
d]),ce.add(a,[-d,d])];if(2===a.length){const [k,H]=a;return[...bl.getOffsetEdge(k,H,d),...bl.getOffsetEdge(H,k,d)]}return bl.getOffsetEdges(bl.getEdges(a),d).flatMap((k,H,fa)=>{{H=fa[(H+1)%fa.length];const la=xd.slope(k[0],k[1]);fa=xd.slope(H[0],H[1]);la!==fa?Number.isNaN(la)&&!Number.isNaN(fa)?k=[k[0][0],(k[0][0]-H[0][0])*fa+H[0][1]]:Number.isNaN(fa)&&!Number.isNaN(la)?k=[H[0][0],(H[0][0]-k[0][0])*la+k[0][1]]:(k=(la*k[0][0]-fa*H[0][0]+H[0][1]-k[0][1])/(la-fa),k=[k,fa*(k-H[0][0])+H[0][1]]):k=void 0}if(void 0===
k)throw Error("Expected an intersection");return k})});fb(bl,"getPolygonVertices",(a,d,k=0,H=1)=>{a=ce.div(a,2);const [fa,la]=[Math.max(1,a[0]-k),Math.max(1,a[1]-k)];k=[];for(let Xa=0,eb=Jk/d;Xa<d;Xa++){var sa=(-Bn+Xa*eb)%Jk,Ha=(-Bn+(Xa+1)*eb)%Jk;sa=ce.add(a,[fa*Math.cos(sa),la*Math.sin(sa)]);Ha=ce.add(a,[fa*Math.cos(Ha),la*Math.sin(Ha)]);var Ta=ce.med(sa,Ha);Ta=ce.nudge(Ta,a,ce.dist(a,Ta)*(1-H));k.push(sa,Ta,Ha)}return k});fb(bl,"getTriangleVertices",(a,d=0,k=1)=>{const [H,fa]=a;var la=1-k;a=[H/
2,d/2];k=[H-d,fa-d];d=[d/2,fa-d];const sa=bl.getPolygonCentroid([a,k,d]),Ha=ce.med(a,k),Ta=ce.med(k,d),Xa=ce.med(d,a),eb=ce.dist(Ha,sa)*la,ib=ce.dist(Ta,sa)*la;la*=ce.dist(Xa,sa);return[a,eb?ce.nudge(Ha,sa,eb):Ha,k,ib?ce.nudge(Ta,sa,ib):Ta,d,la?ce.nudge(Xa,sa,la):Xa]});fb(bl,"getStarVertices",(a,d,k,H=1)=>{const fa=ce.div(d,2),la=ce.mul(fa,H/2),sa=Jk/k/2;return Array.from(Array(2*k)).map((Ha,Ta)=>{Ha=-Bn+Ta*sa;const [Xa,eb]=Ta%2?la:fa;return ce.add(a,[Xa*Math.cos(Ha),eb*Math.sin(Ha)])})});var wu=
class{static getCurvedPathForPolygon(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],k=a.length;for(let H=1;H<k;H++){const [fa,la]=a[H],[sa,Ha]=a[(H+1)%k];d.push(fa,la,(fa+sa)/2,(la+Ha)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],k=a.length;for(let H=1;H<k-1;H++){const [fa,la]=a[H],[sa,Ha]=a[H+
1];d.push(fa,la,(fa+sa)/2,(la+Ha)/2)}return d.join(" ")}static getSvgPathFromStroke(a,d=!0){const k=a.length;if(4>k)return"";let H=a[0],fa=a[1];var la=a[2];la=`M${H[0].toFixed(2)},${H[1].toFixed(2)} Q${fa[0].toFixed(2)},${fa[1].toFixed(2)} ${((fa[0]+la[0])/2).toFixed(2)},${((fa[1]+la[1])/2).toFixed(2)} T`;for(let sa=2,Ha=k-1;sa<Ha;sa++)H=a[sa],fa=a[sa+1],la+=`${((H[0]+fa[0])/2).toFixed(2)},${((H[1]+fa[1])/2).toFixed(2)} `;d&&(la+="Z");return la}static getSvgPathFromStrokePoints(a,d=!1){const k=a.length;
if(4>k)return"";let H=a[0].point,fa=a[1].point;var la=a[2].point;la=`M${H[0].toFixed(2)},${H[1].toFixed(2)} Q${fa[0].toFixed(2)},${fa[1].toFixed(2)} ${((fa[0]+la[0])/2).toFixed(2)},${((fa[1]+la[1])/2).toFixed(2)} T`;for(let sa=2,Ha=k-1;sa<Ha;sa++)H=a[sa].point,fa=a[sa+1].point,la+=`${((H[0]+fa[0])/2).toFixed(2)},${((H[1]+fa[1])/2).toFixed(2)} `;d&&(la+="Z");return la}};fb(wu,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var px={},qx=Object.assign,aq=Object.getOwnPropertyDescriptor,
xp=Object.defineProperty,bq=Object.prototype,ca=[];Object.freeze(ca);var ma={};Object.freeze(ma);var Fa="undefined"!==typeof Proxy,db=Object.toString(),vb=function(){},ic="undefined"!==typeof Object.getOwnPropertySymbols,Kc="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:ic?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,Yc=Object.getOwnPropertyDescriptors||function(a){var d={};Kc(a).forEach(function(k){d[k]=aq(a,k)});
return d},Fd=Symbol("mobx-stored-annotations"),Xd=Symbol("mobx administration"),Ag=function(){function a(k){void 0===k&&(k="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=Fj.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=k}var d=a.prototype;d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(k){return k()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(k){return k()})};
d.reportObserved=function(){return Eb(this)};d.reportChanged=function(){bd();Zb(this);ud()};d.toString=function(){return this.name_};return a}(),Rh=F("Atom",Ag),pf={identity:function(a,d){return a===d},structural:function(a,d){return ya(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,d){return ya(a,d,1)}},bh="override",Vh=ob(),qh={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(qh);var oe=yb("observable"),Rd=
yb("observable.ref",{enhancer:Wa}),ke=yb("observable.shallow",{enhancer:function(a,d,k){if(void 0===a||null===a||ve(a)||cd(a)||Ar(a)||Fs(a))return a;if(Array.isArray(a))return Te.array(a,{name:k,deep:!1});if(M(a))return Te.object(a,void 0,{name:k,deep:!1});if(P(a))return Te.map(a,{name:k,deep:!1});if(S(a))return Te.set(a,{name:k,deep:!1})}}),hf=yb("observable.struct",{enhancer:function(a,d){return ya(a,d)?d:a}}),vf=Da(oe);Object.assign(Qb,vf);var fi={box:function(a,d){d=d||qh;return new Ds(a,hb(d),
d.name,!0,d.equals)},array:function(a,d){d=d||qh;return(!1===Tf.useProxies||!1===d.proxy?Gf:kb)(a,hb(d),d.name)},map:function(a,d){d=d||qh;return new Gz(a,hb(d),d.name)},set:function(a,d){d=d||qh;return new Hz(a,hb(d),d.name)},object:function(a,d,k){if(!1===Tf.useProxies||!1===(null==k?void 0:k.proxy))k=Bd({},k);else{var H={},fa,la;C();H=Bd(H,k);k=null!=(la=(fa=H[Xd]).proxy_)?la:fa.proxy_=new Proxy(H,jE)}return Zd(k,a,d)},ref:Da(Rd),shallow:Da(ke),deep:vf,struct:Da(hf)},Te=qx(Qb,fi),Zh=Ya("computed"),
Fi=Ya("computed.struct",{equals:pf.structural}),Jf=function(a,d){if(O(d))return La(a,d,Zh);if(M(a))return Da(Ya("computed",a));d=M(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new Eu(d)};Object.assign(Jf,Zh);Jf.struct=Da(Fi);var sp,Nv,Qv=0,XD=1,YD=null!=(sp=null==(Nv=aq(function(){},"name"))?void 0:Nv.configurable)?sp:!1,Az={value:"action",configurable:!0,writable:!1,enumerable:!1};var ZD=Symbol.toPrimitive;var Ds=function(a){function d(H,fa,la,sa,Ha){void 0===la&&(la="ObservableValue");void 0===
Ha&&(Ha=pf["default"]);sa=a.call(this,la)||this;sa.enhancer=void 0;sa.hasUnreportedChange_=!1;sa.interceptors_=void 0;sa.changeListeners_=void 0;sa.value_=void 0;sa.dehancer=void 0;sa.enhancer=fa;sa.name_=la;sa.equals=Ha;sa.value_=fa(H,void 0,la);return sa}aa(d,a);var k=d.prototype;k.dehanceValue=function(H){return void 0!==this.dehancer?this.dehancer(H):H};k.set=function(H){H=this.prepareNewValue_(H);H!==Tf.UNCHANGED&&this.setNewValue_(H)};k.prepareNewValue_=function(H){if(Sd(this)){H=hc(this,{object:this,
type:jq,newValue:H});if(!H)return Tf.UNCHANGED;H=H.newValue}H=this.enhancer(H,this.value_,this.name_);return this.equals(this.value_,H)?Tf.UNCHANGED:H};k.setNewValue_=function(H){var fa=this.value_;this.value_=H;this.reportChanged();of(this)&&qe(this,{type:jq,object:this,newValue:H,oldValue:fa})};k.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};k.intercept_=function(H){return Wc(this,H)};k.observe_=function(H,fa){fa&&H({observableKind:"value",debugObjectName:this.name_,
object:this,type:jq,newValue:this.value_,oldValue:void 0});return df(this,H)};k.raw=function(){return this.value_};k.toJSON=function(){return this.get()};k.toString=function(){return this.name_+"["+this.value_+"]"};k.valueOf=function(){return ja(this.get())};k[ZD]=function(){return this.valueOf()};return d}(Ag),$D=F("ObservableValue",Ds);var aE=Symbol.toPrimitive;var Eu=function(){function a(k){this.dependenciesState_=Fj.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=
this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Fj.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Es(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=zt.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;k.get||f(31);this.derivation=k.get;this.name_=k.name||"ComputedValue";k.set&&
(this.setter_=tb("ComputedValue-setter",k.set));this.equals_=k.equals||(k.compareStructural||k.struct?pf.structural:pf["default"]);this.scope_=k.context;this.requiresReaction_=k.requiresReaction;this.keepAlive_=!!k.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){jb(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(k){return k()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(k){return k()})};d.get=function(){this.isComputing_&&f(32,this.name_,this.derivation);
if(0!==Tf.inBatch||0!==this.observers_.size||this.keepAlive_){if(Eb(this),yc(this)){var k=Tf.trackingContext;this.keepAlive_&&!k&&(Tf.trackingContext=this);this.trackAndCompute()&&Vb(this);Tf.trackingContext=k}}else yc(this)&&(this.warnAboutUntrackedRead_(),bd(),this.value_=this.computeValue_(!1),ud());k=this.value_;if(k instanceof Es)throw k.cause;return k};d.set=function(k){if(this.setter_){this.isRunningSetter_&&f(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,k)}finally{this.isRunningSetter_=
!1}}else f(34,this.name_)};d.trackAndCompute=function(){var k=this.value_,H=this.dependenciesState_===Fj.NOT_TRACKING_,fa=this.computeValue_(!0);if(k=H||k instanceof Es||fa instanceof Es||!this.equals_(k,fa))this.value_=fa;return k};d.computeValue_=function(k){this.isComputing_=!0;var H=bc(!1);if(k)var fa=mc(this,this.derivation,this.scope_);else if(!0===Tf.disableErrorBoundaries)fa=this.derivation.call(this.scope_);else try{fa=this.derivation.call(this.scope_)}catch(la){fa=new Es(la)}Tf.allowStateChanges=
H;this.isComputing_=!1;return fa};d.suspend_=function(){this.keepAlive_||(Cb(this),this.value_=void 0)};d.observe_=function(k,H){var fa=this,la=!0,sa=void 0;return zd(function(){var Ha=fa.get();if(!la||H){var Ta=zb();k({observableKind:"computed",debugObjectName:fa.name_,type:jq,object:fa,newValue:Ha,oldValue:sa});Tf.trackingDerivation=Ta}la=!1;sa=Ha})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};d.valueOf=function(){return ja(this.get())};
d[aE]=function(){return this.valueOf()};return a}(),Fu=F("ComputedValue",Eu),Fj;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(Fj||={});var zt;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(zt||={});var Es=function(a){this.cause=void 0;this.cause=a},Rv=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=
this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},Sv=!0,Bz=!1,Tf=function(){var a=G();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&
(Sv=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new Rv).version&&(Sv=!1);if(Sv){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED={}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new Rv}setTimeout(function(){Bz||f(35)},1);return new Rv}(),At=function(){function a(k,H,fa,la){void 0===k&&(k="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];
this.dependenciesState_=Fj.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=zt.NONE;this.name_=k;this.onInvalidate_=H;this.errorHandler_=fa;this.requiresObservable_=la}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Tf.pendingReactions.push(this),0<Tf.inBatch||Tf.isRunningReactions||Tv(sb))};d.isScheduled=function(){return this.isScheduled_};
d.runReaction_=function(){if(!this.isDisposed_){bd();this.isScheduled_=!1;var k=Tf.trackingContext;Tf.trackingContext=this;if(yc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(H){this.reportExceptionInDerivation_(H)}}Tf.trackingContext=k;ud()}};d.track=function(k){if(!this.isDisposed_){bd();this.isRunning_=!0;var H=Tf.trackingContext;Tf.trackingContext=this;k=mc(this,k,void 0);Tf.trackingContext=H;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Cb(this);k instanceof Es&&this.reportExceptionInDerivation_(k.cause);
ud()}};d.reportExceptionInDerivation_=function(k){var H=this;if(this.errorHandler_)this.errorHandler_(k,this);else{if(Tf.disableErrorBoundaries)throw k;Tf.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",k);Tf.globalReactionErrorHandlers.forEach(function(fa){return fa(k,H)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(bd(),Cb(this),ud()))};d.getDisposer_=function(){var k=this.dispose.bind(this);k[Xd]=this;return k};d.toString=function(){return"Reaction["+
this.name_+"]"};d.trace=function(k){void 0===k&&(k=!1);fg(this,k)};return a}(),bE=100,Tv=function(a){return a()},Uv=F("Reaction",At),Cz="action",Dz=Ka(Cz),cE=Ka("action.bound",{bound:!0}),Ez=Ka("autoAction",{autoAction:!0}),dE=Ka("autoAction.bound",{autoAction:!0,bound:!0}),Ig=id(!1);Object.assign(Ig,Dz);var Gu=id(!0);Object.assign(Gu,Ez);Ig.bound=Da(cE);Gu.bound=Da(dE);var eE=function(a){return a()},fE="onBO",gE="onBUO",hE=0;fc.prototype=Object.create(Error.prototype);var Fz=ka("flow"),iE=ka("flow.bound",
{bound:!0}),Hu=Object.assign(function(a,d){if(O(d))return La(a,d,Fz);var k=a.name||"\x3cunnamed flow\x3e";d=function(){var H=arguments,fa=++hE,la=Ig(k+" - runid: "+fa+" - init",a).apply(this,H),sa,Ha=void 0;H=new Promise(function(Ta,Xa){function eb(Hb){Ha=void 0;try{var cc=Ig(k+" - runid: "+fa+" - yield "+Ob++,la.next).call(la,Hb)}catch(sc){return Xa(sc)}Db(cc)}function ib(Hb){Ha=void 0;try{var cc=Ig(k+" - runid: "+fa+" - yield "+Ob++,la["throw"]).call(la,Hb)}catch(sc){return Xa(sc)}Db(cc)}function Db(Hb){if(Y(null==
Hb?void 0:Hb.then))Hb.then(Db,Xa);else{if(Hb.done)return Ta(Hb.value);Ha=Promise.resolve(Hb.value);return Ha.then(eb,ib)}}var Ob=0;sa=Xa;eb(void 0)});H.cancel=Ig(k+" - runid: "+fa+" - cancel",function(){try{if(Ha){var Ta=Ha;Y(Ta.cancel)&&Ta.cancel()}var Xa=la["return"](void 0),eb=Promise.resolve(Xa.value);eb.then(vb,vb);Y(eb.cancel)&&eb.cancel();sa(new fc)}catch(ib){sa(ib)}});return H};d.isMobXFlow=!0;return d},Fz);Hu.bound=Da(iE);var jE={has:function(a,d){return a[Xd].has_(d)},get:function(a,d){return a[Xd].get_(d)},
set:function(a,d,k){var H;return O(d)?null!=(H=a[Xd].set_(d,k,!0))?H:!0:!1},deleteProperty:function(a,d){var k;return O(d)?null!=(k=a[Xd].delete_(d,!0))?k:!0:!1},defineProperty:function(a,d,k){var H;return null!=(H=a[Xd].defineProperty_(d,k))?H:!0},ownKeys:function(a){return a[Xd].ownKeys_()},preventExtensions:function(a){f(13)}},jq="update",kE={get:function(a,d){var k=a[Xd];return d===Xd?k:"length"===d?k.getArrayLength_():"string"!==typeof d||isNaN(d)?R(Vv,d)?Vv[d]:a[d]:k.get_(parseInt(d))},set:function(a,
d,k){var H=a[Xd];"length"===d&&H.setArrayLength_(k);"symbol"===typeof d||isNaN(d)?a[d]=k:H.set_(parseInt(d),k);return!0},preventExtensions:function(){f(15)}},tx=function(){function a(k,H,fa,la){void 0===k&&(k="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=fa;this.legacyMode_=la;this.atom_=new Ag(k);this.enhancer_=function(sa,Ha){return H(sa,
Ha,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.dehanceValues_=function(k){return void 0!==this.dehancer&&0<k.length?k.map(this.dehancer):k};d.intercept_=function(k){return Wc(this,k)};d.observe_=function(k,H){void 0===H&&(H=!1);H&&k({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return df(this,
k)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(k){("number"!==typeof k||isNaN(k)||0>k)&&f("Out of range: "+k);var H=this.values_.length;if(k!==H)if(k>H){for(var fa=Array(k-H),la=0;la<k-H;la++)fa[la]=void 0;this.spliceWithArray_(H,0,fa)}else this.spliceWithArray_(k,H-k)};d.updateArrayLength_=function(k,H){k!==this.lastKnownLength_&&f(16);this.lastKnownLength_+=H;this.legacyMode_&&0<H&&xe(k+H+1)};d.spliceWithArray_=function(k,H,fa){var la=
this,sa=this.values_.length;void 0===k?k=0:k>sa?k=sa:0>k&&(k=Math.max(0,sa+k));H=1===arguments.length?sa-k:void 0===H||null===H?0:Math.max(0,Math.min(H,sa-k));void 0===fa&&(fa=ca);if(Sd(this)){var Ha=hc(this,{object:this.proxy_,type:"splice",index:k,removedCount:H,added:fa});if(!Ha)return ca;H=Ha.removedCount;fa=Ha.added}fa=0===fa.length?fa:fa.map(function(Ta){return la.enhancer_(Ta,void 0)});this.legacyMode_&&this.updateArrayLength_(sa,fa.length-H);sa=this.spliceItemsIntoValues_(k,H,fa);0===H&&0===
fa.length||this.notifyArraySplice_(k,fa,sa);return this.dehanceValues_(sa)};d.spliceItemsIntoValues_=function(k,H,fa){if(1E4>fa.length){var la;return(la=this.values_).splice.apply(la,[k,H].concat(fa))}la=this.values_.slice(k,k+H);var sa=this.values_.slice(k+H);this.values_.length+=fa.length-H;for(H=0;H<fa.length;H++)this.values_[k+H]=fa[H];for(H=0;H<sa.length;H++)this.values_[k+fa.length+H]=sa[H];return la};d.notifyArrayChildUpdate_=function(k,H,fa){var la=!this.owned_&&!1,sa=of(this);k=sa||la?{observableKind:"array",
object:this.proxy_,type:jq,debugObjectName:this.atom_.name_,index:k,newValue:H,oldValue:fa}:null;this.atom_.reportChanged();sa&&qe(this,k)};d.notifyArraySplice_=function(k,H,fa){var la=!this.owned_&&!1,sa=of(this);k=sa||la?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:k,removed:fa,added:H,removedCount:fa.length,addedCount:H.length}:null;this.atom_.reportChanged();sa&&qe(this,k)};d.get_=function(k){if(this.legacyMode_&&k>=this.values_.length)console.warn("[mobx] Out of bounds read: "+
k);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[k])};d.set_=function(k,H){var fa=this.values_;this.legacyMode_&&k>fa.length&&f(17,k,fa.length);if(k<fa.length){var la=fa[k];if(Sd(this)){H=hc(this,{type:jq,object:this.proxy_,index:k,newValue:H});if(!H)return;H=H.newValue}H=this.enhancer_(H,la);H!==la&&(fa[k]=H,this.notifyArrayChildUpdate_(k,H,la))}else{k=Array(k+1-fa.length);for(la=0;la<k.length-1;la++)k[la]=void 0;k[k.length-1]=H;this.spliceWithArray_(fa.length,0,k)}};return a}(),
Vv={clear:function(){return this.splice(0)},replace:function(a){var d=this[Xd];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},splice:function(a,d){for(var k=arguments.length,H=Array(2<k?k-2:0),fa=2;fa<k;fa++)H[fa-2]=arguments[fa];k=this[Xd];switch(arguments.length){case 0:return[];case 1:return k.spliceWithArray_(a);case 2:return k.spliceWithArray_(a,d)}return k.spliceWithArray_(a,d,H)},spliceWithArray:function(a,d,k){return this[Xd].spliceWithArray_(a,d,k)},
push:function(){for(var a=this[Xd],d=arguments.length,k=Array(d),H=0;H<d;H++)k[H]=arguments[H];a.spliceWithArray_(a.values_.length,0,k);return a.values_.length},pop:function(){return this.splice(Math.max(this[Xd].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var a=this[Xd],d=arguments.length,k=Array(d),H=0;H<d;H++)k[H]=arguments[H];a.spliceWithArray_(0,0,k);return a.values_.length},reverse:function(){Tf.trackingDerivation&&f(37,"reverse");this.replace(this.slice().reverse());
return this},sort:function(){Tf.trackingDerivation&&f(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[Xd];a=d.dehanceValues_(d.values_).indexOf(a);return-1<a?(this.splice(a,1),!0):!1}};pb("concat",nb);pb("flat",nb);pb("includes",nb);pb("indexOf",nb);pb("join",nb);pb("lastIndexOf",nb);pb("slice",nb);pb("toString",nb);pb("toLocaleString",nb);pb("every",Lb);pb("filter",Lb);pb("find",Lb);pb("findIndex",Lb);pb("flatMap",Lb);pb("forEach",
Lb);pb("map",Lb);pb("some",Lb);pb("reduce",Ib);pb("reduceRight",Ib);var lE=F("ObservableArrayAdministration",tx),mE={};var nE=Symbol.iterator;var oE=Symbol.toStringTag;var Gz=function(){function a(k,H,fa){var la=this;void 0===H&&(H=Ra);void 0===fa&&(fa="ObservableMap");this.name_=this.enhancer_=void 0;this[Xd]=mE;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=H;this.name_=fa;Y(Map)||f(18);this.keysAtom_=Za("ObservableMap.keys()");
this.data_=new Map;this.hasMap_=new Map;Wb(!0,function(){la.merge(k)})}var d=a.prototype;d.has_=function(k){return this.data_.has(k)};d.has=function(k){var H=this;if(!Tf.trackingDerivation)return this.has_(k);var fa=this.hasMap_.get(k);if(!fa){var la=fa=new Ds(this.has_(k),Wa,"ObservableMap.key?",!1);this.hasMap_.set(k,la);Yd(la,function(){return H.hasMap_["delete"](k)})}return fa.get()};d.set=function(k,H){var fa=this.has_(k);if(Sd(this)){H=hc(this,{type:fa?jq:"add",object:this,newValue:H,name:k});
if(!H)return this;H=H.newValue}fa?this.updateValue_(k,H):this.addValue_(k,H);return this};d["delete"]=function(k){var H=this;if(Sd(this)&&!hc(this,{type:"delete",object:this,name:k}))return!1;if(this.has_(k)){var fa=of(this),la=fa?{observableKind:"map",debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(k).value_,name:k}:null;fd(function(){var sa;H.keysAtom_.reportChanged();null==(sa=H.hasMap_.get(k))?void 0:sa.setNewValue_(!1);H.data_.get(k).setNewValue_(void 0);H.data_["delete"](k)});
fa&&qe(this,la);return!0}return!1};d.updateValue_=function(k,H){var fa=this.data_.get(k);H=fa.prepareNewValue_(H);if(H!==Tf.UNCHANGED){var la=of(this);k=la?{observableKind:"map",debugObjectName:this.name_,type:jq,object:this,oldValue:fa.value_,name:k,newValue:H}:null;fa.setNewValue_(H);la&&qe(this,k)}};d.addValue_=function(k,H){var fa=this;fd(function(){var Ha,Ta=new Ds(H,fa.enhancer_,"ObservableMap.key",!1);fa.data_.set(k,Ta);H=Ta.value_;null==(Ha=fa.hasMap_.get(k))?void 0:Ha.setNewValue_(!0);fa.keysAtom_.reportChanged()});
var la=of(this),sa=la?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:k,newValue:H}:null;la&&qe(this,sa)};d.get=function(k){return this.has(k)?this.dehanceValue_(this.data_.get(k).get()):this.dehanceValue_(void 0)};d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var k=this,H=this.keys();return Na({next:function(){var fa=H.next(),la=fa.done;fa=fa.value;
return{done:la,value:la?void 0:k.get(fa)}}})};d.entries=function(){var k=this,H=this.keys();return Na({next:function(){var fa=H.next(),la=fa.done;fa=fa.value;return{done:la,value:la?void 0:[fa,k.get(fa)]}}})};d[nE]=function(){return this.entries()};d.forEach=function(k,H){for(var fa=Ja(this),la;!(la=fa()).done;)la=la.value,k.call(H,la[1],la[0],this)};d.merge=function(k){var H=this;Ar(k)&&(k=new Map(k));fd(function(){M(k)?K(k).forEach(function(fa){return H.set(fa,k[fa])}):Array.isArray(k)?k.forEach(function(fa){return H.set(fa[0],
fa[1])}):P(k)?(k.constructor!==Map&&f(19,k),k.forEach(function(fa,la){return H.set(la,fa)})):null!==k&&void 0!==k&&f(20,k)});return this};d.clear=function(){var k=this;fd(function(){lc(function(){for(var H=Ja(k.keys()),fa;!(fa=H()).done;)k["delete"](fa.value)})})};d.replace=function(k){var H=this;fd(function(){for(var fa=dd(k),la=new Map,sa=!1,Ha=Ja(H.data_.keys()),Ta;!(Ta=Ha()).done;)if(Ta=Ta.value,!fa.has(Ta))if(H["delete"](Ta))sa=!0;else{var Xa=H.data_.get(Ta);la.set(Ta,Xa)}for(fa=Ja(fa.entries());!(Ha=
fa()).done;)Ta=Ha.value,Ha=Ta[0],Xa=Ta[1],Ta=H.data_.has(Ha),H.set(Ha,Xa),H.data_.has(Ha)&&(Xa=H.data_.get(Ha),la.set(Ha,Xa),Ta||(sa=!0));if(!sa)if(H.data_.size!==la.size)H.keysAtom_.reportChanged();else for(sa=H.data_.keys(),fa=la.keys(),Ha=sa.next(),Ta=fa.next();!Ha.done;){if(Ha.value!==Ta.value){H.keysAtom_.reportChanged();break}Ha=sa.next();Ta=fa.next()}H.data_=la});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(k,
H){return df(this,k)};d.intercept_=function(k){return Wc(this,k)};W(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:oE,get:function(){return"Map"}}]);return a}(),Ar=F("ObservableMap",Gz),pE={};var qE=Symbol.iterator;var rE=Symbol.toStringTag;var Hz=function(){function a(k,H,fa){void 0===H&&(H=Ra);void 0===fa&&(fa="ObservableSet");this.name_=void 0;this[Xd]=pE;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=
void 0;this.name_=fa;Y(Set)||f(22);this.atom_=Za(this.name_);this.enhancer_=function(la,sa){return H(la,sa,fa)};k&&this.replace(k)}var d=a.prototype;d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.clear=function(){var k=this;fd(function(){lc(function(){for(var H=Ja(k.data_.values()),fa;!(fa=H()).done;)k["delete"](fa.value)})})};d.forEach=function(k,H){for(var fa=Ja(this),la;!(la=fa()).done;)la=la.value,k.call(H,la,la,this)};d.add=function(k){var H=this;if(Sd(this)&&
!hc(this,{type:"add",object:this,newValue:k}))return this;if(!this.has(k)){fd(function(){H.data_.add(H.enhancer_(k,void 0));H.atom_.reportChanged()});var fa=of(this),la=fa?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,newValue:k}:null;fa&&qe(this,la)}return this};d["delete"]=function(k){var H=this;if(Sd(this)&&!hc(this,{type:"delete",object:this,oldValue:k}))return!1;if(this.has(k)){var fa=of(this),la=fa?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,
oldValue:k}:null;fd(function(){H.atom_.reportChanged();H.data_["delete"](k)});fa&&qe(this,la);return!0}return!1};d.has=function(k){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(k))};d.entries=function(){var k=0,H=Array.from(this.keys()),fa=Array.from(this.values());return Na({next:function(){var la=k;k+=1;return la<fa.length?{value:[H[la],fa[la]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var k=this,H=0,fa=
Array.from(this.data_.values());return Na({next:function(){return H<fa.length?{value:k.dehanceValue_(fa[H++]),done:!1}:{done:!0}}})};d.replace=function(k){var H=this;Fs(k)&&(k=new Set(k));fd(function(){Array.isArray(k)?(H.clear(),k.forEach(function(fa){return H.add(fa)})):S(k)?(H.clear(),k.forEach(function(fa){return H.add(fa)})):null!==k&&void 0!==k&&f("Cannot initialize set from "+k)});return this};d.observe_=function(k,H){return df(this,k)};d.intercept_=function(k){return Wc(this,k)};d.toJSON=
function(){return Array.from(this)};d.toString=function(){return"[object ObservableSet]"};d[qE]=function(){return this.values()};W(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:rE,get:function(){return"Set"}}]);return a}(),Fs=F("ObservableSet",Hz),Iz=Object.create(null),Jz=function(){function a(k,H,fa,la){void 0===H&&(H=new Map);void 0===la&&(la=Vh);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=
this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=k;this.values_=H;this.name_=fa;this.defaultAnnotation_=la;this.keysAtom_=new Ag("ObservableObject.keys");this.isPlainObject_=M(this.target_)}var d=a.prototype;d.getObservablePropValue_=function(k){return this.values_.get(k).get()};d.setObservablePropValue_=function(k,H){var fa=this.values_.get(k);if(fa instanceof Eu)return fa.set(H),!0;if(Sd(this)){H=hc(this,{type:jq,object:this.proxy_||this.target_,name:k,newValue:H});
if(!H)return null;H=H.newValue}H=fa.prepareNewValue_(H);if(H!==Tf.UNCHANGED){var la=of(this);k=la?{type:jq,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:fa.value_,name:k,newValue:H}:null;fa.setNewValue_(H);la&&qe(this,k)}return!0};d.get_=function(k){Tf.trackingDerivation&&!R(this.target_,k)&&this.has_(k);return this.target_[k]};d.set_=function(k,H,fa){void 0===fa&&(fa=!1);if(R(this.target_,k)){if(this.values_.has(k))return this.setObservablePropValue_(k,
H);if(fa)return Reflect.set(this.target_,k,H);this.target_[k]=H;return!0}return this.extend_(k,{value:H,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,fa)};d.has_=function(k){if(!Tf.trackingDerivation)return k in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var H=this.pendingKeys_.get(k);H||(H=new Ds(k in this.target_,Wa,"ObservableObject.key?",!1),this.pendingKeys_.set(k,H));return H.get()};d.make_=function(k,H){!0===H&&(H=this.defaultAnnotation_);if(!1!==H){if(!(k in
this.target_)){var fa;if(null!=(fa=this.target_[Fd])&&fa[k])return;f(1,H.annotationType_,this.name_+"."+k.toString())}for(fa=this.target_;fa&&fa!==bq;){var la=aq(fa,k);if(la){la=H.make_(this,k,la,fa);if(0===la)return;if(1===la)break}fa=Object.getPrototypeOf(fa)}var sa;null==(sa=this.target_[Fd])?!0:delete sa[k]}};d.extend_=function(k,H,fa,la){void 0===la&&(la=!1);!0===fa&&(fa=this.defaultAnnotation_);if(!1===fa)return this.defineProperty_(k,H,la);if(H=fa.extend_(this,k,H,la)){var sa;null==(sa=this.target_[Fd])?
!0:delete sa[k]}return H};d.defineProperty_=function(k,H,fa){void 0===fa&&(fa=!1);try{bd();var la=this.delete_(k);if(!la)return la;if(Sd(this)){var sa=hc(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:H.value});if(!sa)return null;var Ha=sa.newValue;H.value!==Ha&&(H=Q({},H,{value:Ha}))}if(fa){if(!Reflect.defineProperty(this.target_,k,H))return!1}else xp(this.target_,k,H);this.notifyPropertyAddition_(k,H.value)}finally{ud()}return!0};d.defineObservableProperty_=function(k,H,fa,la){void 0===
la&&(la=!1);try{bd();var sa=this.delete_(k);if(!sa)return sa;if(Sd(this)){var Ha=hc(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:H});if(!Ha)return null;H=Ha.newValue}var Ta=re(k),Xa={configurable:Tf.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Ta.get,set:Ta.set};if(la){if(!Reflect.defineProperty(this.target_,k,Xa))return!1}else xp(this.target_,k,Xa);var eb=new Ds(H,fa,"ObservableObject.key",!1);this.values_.set(k,eb);this.notifyPropertyAddition_(k,eb.value_)}finally{ud()}return!0};
d.defineComputedProperty_=function(k,H,fa){void 0===fa&&(fa=!1);try{bd();var la=this.delete_(k);if(!la)return la;if(Sd(this)&&!hc(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:void 0}))return null;H.name||(H.name="ObservableObject.key");H.context=this.proxy_||this.target_;var sa=re(k),Ha={configurable:Tf.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:sa.get,set:sa.set};if(fa){if(!Reflect.defineProperty(this.target_,k,Ha))return!1}else xp(this.target_,k,Ha);this.values_.set(k,
new Eu(H));this.notifyPropertyAddition_(k,void 0)}finally{ud()}return!0};d.delete_=function(k,H){void 0===H&&(H=!1);if(!R(this.target_,k))return!0;if(Sd(this)&&!hc(this,{object:this.proxy_||this.target_,name:k,type:"remove"}))return null;try{var fa,la;bd();var sa=of(this),Ha=this.values_.get(k),Ta=void 0;if(!Ha&&sa){var Xa;Ta=null==(Xa=aq(this.target_,k))?void 0:Xa.value}if(H){if(!Reflect.deleteProperty(this.target_,k))return!1}else delete this.target_[k];Ha&&(this.values_["delete"](k),Ha instanceof
Ds&&(Ta=Ha.value_),Zb(Ha));this.keysAtom_.reportChanged();null==(fa=this.pendingKeys_)?void 0:null==(la=fa.get(k))?void 0:la.set(k in this.target_);if(sa){var eb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Ta,name:k};sa&&qe(this,eb)}}finally{ud()}return!0};d.observe_=function(k,H){return df(this,k)};d.intercept_=function(k){return Wc(this,k)};d.notifyPropertyAddition_=function(k,H){var fa,la,sa=of(this);sa&&(H=sa?{type:"add",observableKind:"object",
debugObjectName:this.name_,object:this.proxy_||this.target_,name:k,newValue:H}:null,sa&&qe(this,H));null==(fa=this.pendingKeys_)?void 0:null==(la=fa.get(k))?void 0:la.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=function(){this.keysAtom_.reportObserved();return Kc(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return a}(),sE=F("ObservableObjectAdministration",Jz),tE=Af(0),ux=0,Kz=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,
d):void 0!==a.prototype.__proto__?a.prototype.__proto__=d:a.prototype=d})(Kz,Array.prototype);var vx=function(a,d,k){function H(la,sa,Ha,Ta){void 0===Ha&&(Ha="ObservableArray");void 0===Ta&&(Ta=!1);var Xa=a.call(this)||this;sa=new tx(Ha,sa,Ta,!0);sa.proxy_=qa(Xa);L(qa(Xa),Xd,sa);la&&la.length&&(sa=bc(!0),Xa.spliceWithArray(0,0,la),Tf.allowStateChanges=sa);Object.defineProperty(qa(Xa),"0",tE);return Xa}aa(H,a);var fa=H.prototype;fa.concat=function(){this[Xd].atom_.reportObserved();for(var la=arguments.length,
sa=Array(la),Ha=0;Ha<la;Ha++)sa[Ha]=arguments[Ha];return Array.prototype.concat.apply(this.slice(),sa.map(function(Ta){return cd(Ta)?Ta.slice():Ta}))};fa[k]=function(){var la=this,sa=0;return Na({next:function(){return sa<la.length?{value:la[sa++],done:!1}:{done:!0,value:void 0}}})};W(H,[{key:"length",get:function(){return this[Xd].getArrayLength_()},set:function(la){this[Xd].setArrayLength_(la)}},{key:d,get:function(){return"Array"}}]);return H}(Kz,Symbol.toStringTag,Symbol.iterator);Object.entries(Vv).forEach(function(a){var d=
a[0];a=a[1];"concat"!==d&&T(vx.prototype,d,a)});xe(1E3);var Lz=bq.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof G()[a]&&f("MobX requires global '"+a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Gc,extras:{getDebugName:rb},$mobx:Xd});var uE=da(590),lm=class{constructor(a){fb(this,"props");fb(this,"aspectRatio");fb(this,"type");fb(this,"hideCloneHandles",!1);fb(this,"hideResizeHandles",
!1);fb(this,"hideRotateHandle",!1);fb(this,"hideContextBar",!1);fb(this,"hideSelectionDetail",!1);fb(this,"hideSelection",!1);fb(this,"canChangeAspectRatio",!0);fb(this,"canUnmount",!0);fb(this,"canResize",[!0,!0]);fb(this,"canScale",!0);fb(this,"canFlip",!0);fb(this,"canEdit",!1);fb(this,"canBind",!1);fb(this,"nonce");fb(this,"bindingDistance",4);fb(this,"isDirty",!1);fb(this,"lastSerialized");fb(this,"getCenter",()=>Bf.getBoundsCenter(this.bounds));fb(this,"getRotatedBounds",()=>{const {bounds:la,
props:{rotation:sa}}=this;return sa?Bf.getBoundsFromPoints(Bf.getRotatedCorners(la,sa)):la});fb(this,"hitTestPoint",la=>{var sa=this.rotatedBounds;if(!this.props.rotation)return vk.pointInBounds(la,sa);sa=Bf.getRotatedCorners(sa,this.props.rotation);return vk.pointInPolygon(la,sa)});fb(this,"hitTestLineSegment",(la,sa)=>{const Ha=Bf.getBoundsFromPoints([la,sa]),{rotatedBounds:Ta,props:{rotation:Xa=0}}=this;return Bf.boundsContain(Ta,Ha)||Xa?g(la,sa,Bf.getRotatedCorners(this.bounds)).didIntersect:
0<q(Ta,la,sa).length});fb(this,"hitTestBounds",la=>{const {rotatedBounds:sa,props:{rotation:Ha=0}}=this,Ta=Bf.getRotatedCorners(this.bounds,Ha);return Bf.boundsContain(la,sa)||0<z([la.minX,la.minY],[la.width,la.height],Ta).length});fb(this,"getExpandedBounds",()=>Bf.expandBounds(this.getBounds(),this.bindingDistance));fb(this,"getBindingPoint",(la,sa,Ha,Ta)=>{var Xa=this.getBounds(),eb=this.getExpandedBounds();if(vk.pointInBounds(la,eb)){var ib=B(sa,Ha,eb).filter(Db=>Db.didIntersect).map(Db=>Db.points[0]);
if(ib.length)return Ha=this.getCenter(),ib=ib.sort((Db,Ob)=>ce.dist(Ob,sa)-ce.dist(Db,sa))[0],ib=ce.med(la,ib),Ta?(Ta=2>ce.dist(la,Ha)?Ha:la,Xa=0):(Ta=2>ce.distanceToLineSegment(la,ib,Ha)?Ha:ib,Xa=vk.pointInBounds(la,Xa)?this.bindingDistance:Math.max(this.bindingDistance,Bf.getBoundsSides(Xa).map(Db=>ce.distanceToLineSegment(Db[1][0],Db[1][1],la)).sort((Db,Ob)=>Db-Ob)[0])),eb=ce.divV(ce.sub(Ta,[eb.minX,eb.minY]),[eb.width,eb.height]),{point:ce.clampV(eb,0,1),distance:Xa}}});fb(this,"getSerialized",
()=>zc(lf(he({},this.props),{type:this.type,nonce:this.nonce})));fb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||fd(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});fb(this,"validateProps",la=>la);fb(this,"update",(la,sa=!1,Ha=!1)=>{sa||this.isDirty||this.setIsDirty(!0);sa||Ha||this.incNonce();Object.assign(this.props,this.validateProps(la));
return this});fb(this,"clone",()=>new this.constructor(this.serialized));fb(this,"onResetBounds",la=>this);fb(this,"scale",[1,1]);fb(this,"onResizeStart",la=>{var sa;this.scale=[...(null!=(sa=this.props.scale)?sa:[1,1])];return this});fb(this,"onResize",(la,sa)=>{const {bounds:Ha,rotation:Ta,scale:[Xa,eb]}=sa;la=[...this.scale];0>Xa&&(la[0]*=-1);0>eb&&(la[1]*=-1);this.update({point:[Ha.minX,Ha.minY],scale:la,rotation:Ta});return this});fb(this,"onHandleChange",(la,{id:sa,delta:Ha})=>{if(void 0!==
la.handles){var Ta=Is(la.handles);Ta[sa]=lf(he({},Ta[sa]),{point:ce.add(Ha,la.handles[sa].point)});var Xa=Bf.getCommonTopLeft(Object.values(Ta).map(eb=>eb.point));Object.values(Ta).forEach(eb=>{eb.point=ce.sub(eb.point,Xa)});this.update({point:ce.add(la.point,Xa),handles:Ta})}});var d,k;const H=this.constructor.id,fa=null!=(d=this.constructor.defaultProps)?d:{};this.type=H;this.props=he(he({scale:[1,1]},fa),a);this.nonce=null!=(k=a.nonce)?k:Date.now();Jg(this)}get id(){return this.props.id}setNonce(a){this.nonce=
a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=this.getBounds();const {stroke:d,strokeWidth:k,strokeType:H,opacity:fa,fill:la,noFill:sa,borderRadius:Ha}=this.props;return(0,uE.jsx)("rect",{fill:sa?"none":zh(la,"background"),stroke:zh(d,"stroke"),strokeWidth:null!=
k?k:2,strokeDasharray:"dashed"===H?"8 2":void 0,fillOpacity:null!=fa?fa:.2,width:a.width,height:a.height,rx:Ha,ry:Ha})}};fb(lm,"type");$d([Te],lm.prototype,"props",2);$d([Te],lm.prototype,"canResize",2);$d([Te],lm.prototype,"nonce",2);$d([Te],lm.prototype,"isDirty",2);$d([Te],lm.prototype,"lastSerialized",2);$d([Jf],lm.prototype,"id",1);$d([Ig],lm.prototype,"setNonce",1);$d([Ig],lm.prototype,"incNonce",1);$d([Ig],lm.prototype,"setIsDirty",1);$d([Ig],lm.prototype,"setLastSerialized",1);$d([Jf],lm.prototype,
"center",1);$d([Jf],lm.prototype,"bounds",1);$d([Jf],lm.prototype,"rotatedBounds",1);$d([Jf],lm.prototype,"serialized",1);$d([Ig],lm.prototype,"update",2);var on=class extends lm{constructor(a={}){super(a);fb(this,"canBind",!0);fb(this,"getBounds",()=>{const [d,k]=this.props.point,[H,fa]=this.props.size;return{minX:d,minY:k,maxX:d+H,maxY:k+fa,width:H,height:fa}});fb(this,"getRotatedBounds",()=>Bf.getBoundsFromPoints(Bf.getRotatedCorners(this.bounds,this.props.rotation)));fb(this,"onResize",(d,k)=>
{const {bounds:H,rotation:fa,scale:[la,sa]}=k;d=[...this.scale];0>la&&(d[0]*=-1);0>sa&&(d[1]*=-1);this.update({point:[H.minX,H.minY],scale:d,rotation:fa});return this.update({rotation:fa,point:[H.minX,H.minY],size:[Math.max(1,H.width),Math.max(1,H.height)],scale:d})});fb(this,"validateProps",d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return d});Jg(this)}};fb(on,"id","box");fb(on,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});
var Bt=class extends lm{constructor(a={}){super(a);fb(this,"getBounds",()=>{const {pointBounds:d,props:{point:k}}=this;return Bf.translateBounds(d,k)});fb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:k},bounds:H,rotatedPoints:fa}=this;return d?Bf.translateBounds(Bf.getBoundsFromPoints(fa),k):H});fb(this,"normalizedPoints",[]);fb(this,"isResizeFlippedX",!1);fb(this,"isResizeFlippedY",!1);fb(this,"onResizeStart",()=>{var d;const {bounds:k,props:{points:H}}=this;this.scale=[...(null!=
(d=this.props.scale)?d:[1,1])];const fa=[k.width,k.height];this.normalizedPoints=H.map(la=>xd.divV(la,fa));return this});fb(this,"onResize",(d,k)=>{const {bounds:H,scale:[fa,la]}=k,sa=[H.width,H.height];d=[...this.scale];0>fa&&(d[0]*=-1);0>la&&(d[1]*=-1);return this.update(fa||la?{point:[H.minX,H.minY],points:this.normalizedPoints.map(Ha=>xd.mulV(Ha,sa).concat(Ha[2])),scale:d}:{point:[H.minX,H.minY],points:this.normalizedPoints.map(Ha=>xd.mulV(Ha,sa).concat(Ha[2]))})});fb(this,"hitTestPoint",d=>{const {props:{points:k,
point:H}}=this;return vk.pointNearToPolyline(xd.sub(d,H),k)});fb(this,"hitTestLineSegment",(d,k)=>{const {bounds:H,props:{points:fa,point:la}}=this;if(vk.pointInBounds(d,H)||vk.pointInBounds(k,H)||0<q(H,d,k).length){const sa=xd.sub(d,la),Ha=xd.sub(k,la);return g(sa,Ha,fa).didIntersect||!!fa.find(Ta=>5>xd.dist(sa,Ta)||5>xd.dist(Ha,Ta))}return!1});fb(this,"hitTestBounds",d=>{const {rotatedBounds:k,props:{points:H,point:fa}}=this,la=Bf.translateBounds(d,xd.neg(fa));return Bf.boundsContain(d,k)||H.every(sa=>
vk.pointInBounds(sa,la))||Bf.boundsCollide(d,k)&&0<D([la.minX,la.minY],[la.width,la.height],H).length});Jg(this)}get pointBounds(){const {props:{points:a}}=this;return Bf.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:k},center:H}=this;if(!k)return d;const fa=xd.sub(H,a);return d.map(la=>xd.rotWith(la,fa,k))}};fb(Bt,"id","draw");fb(Bt,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});$d([Jf],Bt.prototype,"pointBounds",1);
$d([Jf],Bt.prototype,"rotatedPoints",1);var wx=class extends on{constructor(a={}){super(a);fb(this,"getBounds",()=>{const {props:{point:[d,k],size:[H,fa]}}=this;return Bf.getRotatedEllipseBounds(d,k,H/2,fa/2,0)});fb(this,"getRotatedBounds",()=>{const {props:{point:[d,k],size:[H,fa],rotation:la}}=this;return Bf.getRotatedEllipseBounds(d,k,H/2,fa/2,la)});fb(this,"hitTestPoint",d=>{const {props:{size:k,rotation:H},center:fa}=this;return vk.pointInEllipse(d,fa,k[0],k[1],H||0)});fb(this,"hitTestLineSegment",
(d,k)=>{const {props:{size:[H,fa],rotation:la=0},center:sa}=this;return h(d,k,sa,H,fa,la).didIntersect});fb(this,"hitTestBounds",d=>{const {props:{size:[k,H],rotation:fa=0},rotatedBounds:la}=this;var sa;if(!(sa=Bf.boundsContain(d,la))){const {minX:Ha,minY:Ta,width:Xa,height:eb}=d;sa=0<t(this.center,k/2,H/2,fa,[Ha,Ta],[Xa,eb]).length}return sa});Jg(this)}};fb(wx,"id","ellipse");fb(wx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var xx=class extends on{constructor(a=
{}){super(a);fb(this,"onResetBounds",d=>{const {clipping:k,size:H,point:fa}=this.props;if(k){const [la,sa,Ha,Ta]=Array.isArray(k)?k:[k,k,k,k];return this.update({clipping:0,point:[fa[0]-Ta,fa[1]-la],size:[H[0]+(Ta-sa),H[1]+(la-Ha)]})}if(d.asset){const {size:[la,sa]}=d.asset;this.update({clipping:0,point:[fa[0]+H[0]/2-la/2,fa[1]+H[1]/2-sa/2],size:[la,sa]})}return this});fb(this,"onResize",(d,k)=>{const {bounds:H,clip:fa,scale:la}=k;({clipping:k}=this.props);const {clipping:sa}=d;if(fa){const {point:[Ha,
Ta],size:[Xa,eb]}=d,[ib,Db,Ob,Hb]=sa?Array.isArray(sa)?sa:[sa,sa,sa,sa]:[0,0,0,0];k=[ib+(H.minY-Ta),Db+(H.maxX-(Ha+Xa)),Ob+(H.maxY-(Ta+eb)),Hb+(H.minX-Ha)]}else void 0!==sa&&(k=Array.isArray(sa)?sa:[sa,sa,sa,sa],k=[k[0]*la[1],k[1]*la[0],k[2]*la[1],k[3]*la[0]]);if(k&&Array.isArray(k)){const Ha=k;Ha.every((Ta,Xa)=>0===Xa||Ta===Ha[Xa-1])&&(k=Ha[0])}return this.update({point:[H.minX,H.minY],size:[Math.max(1,H.width),Math.max(1,H.height)],clipping:k})});Jg(this)}};fb(xx,"id","ellipse");fb(xx,"defaultProps",
{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Mz=class extends lm{constructor(a={}){super(a);fb(this,"getBounds",()=>{const {points:d,props:{point:k}}=this;return Bf.translateBounds(Bf.getBoundsFromPoints(d),k)});fb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,props:{point:k}}=this;return Bf.translateBounds(Bf.getBoundsFromPoints(d),k)});fb(this,"normalizedHandles",[]);fb(this,"onResizeStart",()=>{var d;const {props:{handles:k},
bounds:H}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const fa=[H.width,H.height];this.normalizedHandles=Object.values(k).map(la=>xd.divV(la.point,fa));return this});fb(this,"onResize",(d,k)=>{const {bounds:H,scale:[fa,la]}=k,{props:{handles:sa},normalizedHandles:Ha}=this,Ta=[H.width,H.height];d=[...this.scale];0>fa&&(d[0]*=-1);0>la&&(d[1]*=-1);return this.update({point:[H.minX,H.minY],handles:Object.values(sa).map((Xa,eb)=>lf(he({},Xa),{point:xd.mulV(Ha[eb],Ta)})),scale:d})});fb(this,
"hitTestPoint",d=>{const {points:k}=this;return vk.pointNearToPolyline(xd.sub(d,this.props.point),k)});fb(this,"hitTestLineSegment",(d,k)=>{const {bounds:H,points:fa,props:{point:la}}=this;if(vk.pointInBounds(d,H)||vk.pointInBounds(k,H)||0<q(H,d,k).length){const sa=xd.sub(d,la),Ha=xd.sub(k,la);return g(sa,Ha,fa).didIntersect||!!fa.find(Ta=>5>xd.dist(sa,Ta)||5>xd.dist(Ha,Ta))}return!1});fb(this,"hitTestBounds",d=>{const {rotatedBounds:k,points:H,props:{point:fa}}=this,la=Bf.translateBounds(d,xd.neg(fa));
return Bf.boundsContain(d,k)||H.every(sa=>vk.pointInBounds(sa,la))||Bf.boundsCollide(d,k)&&0<D([la.minX,la.minY],[la.width,la.height],H).length});fb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Mz.defaultProps.handles);return d});Jg(this)}get points(){return Object.values(this.props.handles).map(a=>a.point)}get centroid(){const {points:a}=this;return bl.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,
rotation:k}}=this;return k?Object.values(d).map(H=>xd.rotWith(H.point,a,k)):this.points}},Ct=Mz;fb(Ct,"id","polyline");fb(Ct,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});$d([Jf],Ct.prototype,"points",1);$d([Jf],Ct.prototype,"centroid",1);$d([Jf],Ct.prototype,"rotatedPoints",1);var Nz=class extends Ct{constructor(a={}){super(a);fb(this,"hideResizeHandles",!0);fb(this,"hideRotateHandle",!0);fb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&
1>Object.values(d.handles).length&&(d.handles=Nz.defaultProps.handles);return d});fb(this,"getHandlesChange",(d,k)=>{var H=pj(d.handles,k);H=pj(H,{start:{point:ce.toFixed(H.start.point)},end:{point:ce.toFixed(H.end.point)}});if(!ce.isEqual(H.start.point,H.end.point)){k={point:d.point,handles:Is(H)};d=d.point;H=Bf.translateBounds(Bf.getBoundsFromPoints(Object.values(H).map(la=>la.point)),k.point);var fa=ce.sub([H.minX,H.minY],d);ce.isEqual(fa,[0,0])||(Object.values(k.handles).forEach(la=>{la.point=
ce.toFixed(ce.sub(la.point,fa))}),k.point=ce.toFixed(ce.add(k.point,fa)));return k}});Jg(this)}},Iu=Nz;fb(Iu,"id","line");fb(Iu,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Br=class extends on{constructor(a={}){super(a);fb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,props:{point:k},offset:H}=this;return Bf.translateBounds(Bf.getBoundsFromPoints(d),xd.add(k,H))});fb(this,"hitTestPoint",
d=>{const {vertices:k}=this;return vk.pointInPolygon(xd.add(d,this.props.point),k)});fb(this,"hitTestLineSegment",(d,k)=>{const {vertices:H,props:{point:fa}}=this;return g(xd.sub(d,fa),xd.sub(k,fa),H).didIntersect});fb(this,"hitTestBounds",d=>{const {rotatedBounds:k,offset:H,rotatedVertices:fa,props:{point:la}}=this,sa=Bf.translateBounds(d,xd.neg(xd.add(la,H)));return Bf.boundsContain(d,k)||fa.every(Ha=>vk.pointInBounds(Ha,sa))||0<z([sa.minX,sa.minY],[sa.width,sa.height],fa).length});fb(this,"validateProps",
d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});Jg(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},vertices:d}=this;return d.map(k=>xd.add(k,a))}get centroid(){const {vertices:a}=this;return bl.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:k}}=this;return k?a.map(H=>xd.rotWith(H,d,k)):a}get offset(){const {props:{size:[a,d]}}=this,k=Bf.getBoundsCenter(Bf.getBoundsFromPoints(this.vertices));
return xd.sub(xd.div([a,d],2),k)}getVertices(a=0){const {ratio:d,sides:k,size:H}=this.props;return 3===k?bl.getTriangleVertices(H,a,d):bl.getPolygonVertices(H,k,a,d)}};fb(Br,"id","polygon");fb(Br,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});$d([Jf],Br.prototype,"vertices",1);$d([Jf],Br.prototype,"pageVertices",1);$d([Jf],Br.prototype,"centroid",1);$d([Jf],Br.prototype,"rotatedVertices",1);$d([Jf],Br.prototype,"offset",1);var yx=
class extends on{constructor(a={}){super(a);fb(this,"canEdit",!0);fb(this,"canFlip",!1);Jg(this)}};fb(yx,"id","text");fb(yx,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Wv=class extends on{constructor(a={}){super(a);fb(this,"canEdit",!1);fb(this,"canFlip",!1);fb(this,"getBounds",()=>0===this.shapes.length?(He().deleteShapes([this.id]),{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):Bf.getCommonBounds(this.shapes.map(d=>d.getBounds())));
Jg(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};fb(Wv,"id","group");fb(Wv,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});$d([Jf],Wv.prototype,"shapes",1);var Dt=class{constructor(){fb(this,"_id");fb(this,"_initial");fb(this,"_states");fb(this,"_isActive",!1);fb(this,"cursor");fb(this,"_disposables",[]);fb(this,"children",new Map([]));fb(this,"registerStates",k=>{k.forEach(H=>
this.children.set(H.id,new H(this,this)));return this});fb(this,"deregisterStates",k=>{k.forEach(H=>{var fa;null==(fa=this.children.get(H.id))?void 0:fa.dispose();this.children.delete(H.id)});return this});fb(this,"currentState",{});fb(this,"transition",(k,H={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${k}.`);const fa=this.children.get(k),la=this.currentState;if(!fa)throw Error(`Could not find a state named ${k}.`);fd(()=>{this.currentState?(la._events.onExit(lf(he({},
H),{toId:k})),la.dispose(),this.setCurrentState(fa),this._events.onTransition(lf(he({},H),{fromId:la.id,toId:k})),fa._events.onEnter(lf(he({},H),{fromId:la.id}))):(this.currentState=fa,fa._events.onEnter(lf(he({},H),{fromId:""})))});return this});fb(this,"isIn",k=>{k=k.split(".").reverse();let H=this;for(;0<k.length;){const fa=k.pop();if(!fa)return!0;if(H.currentState.id===fa){if(0===k.length)return!0;H=H.currentState}else break}return!1});fb(this,"isInAny",(...k)=>k.some(this.isIn));fb(this,"forwardEvent",
(k,...H)=>{var fa,la;(null==(la=null==(fa=this.currentState)?void 0:fa._events)?0:la[k])&&fd(()=>{var sa;return null==(sa=this.currentState._events)?void 0:sa[k](...H)})});fb(this,"_events",{onTransition:k=>{var H;null==(H=this.onTransition)?void 0:H.call(this,k)},onEnter:k=>{var H;this._isActive=!0;this.initial&&this.transition(this.initial,k);null==(H=this.onEnter)?void 0:H.call(this,k)},onExit:k=>{var H,fa,la;this._isActive=!1;null==(fa=null==(H=this.currentState)?void 0:H.onExit)?void 0:fa.call(H,
{toId:"parent"});null==(la=this.onExit)?void 0:la.call(this,k)},onPointerDown:(k,H)=>{var fa;null==(fa=this.onPointerDown)?void 0:fa.call(this,k,H);this.forwardEvent("onPointerDown",k,H)},onPointerUp:(k,H)=>{var fa;null==(fa=this.onPointerUp)?void 0:fa.call(this,k,H);this.forwardEvent("onPointerUp",k,H)},onPointerMove:(k,H)=>{var fa;null==(fa=this.onPointerMove)?void 0:fa.call(this,k,H);this.forwardEvent("onPointerMove",k,H)},onPointerEnter:(k,H)=>{var fa;null==(fa=this.onPointerEnter)?void 0:fa.call(this,
k,H);this.forwardEvent("onPointerEnter",k,H)},onPointerLeave:(k,H)=>{var fa;null==(fa=this.onPointerLeave)?void 0:fa.call(this,k,H);this.forwardEvent("onPointerLeave",k,H)},onDoubleClick:(k,H)=>{var fa;null==(fa=this.onDoubleClick)?void 0:fa.call(this,k,H);this.forwardEvent("onDoubleClick",k,H)},onKeyDown:(k,H)=>{var fa;this._events.onModifierKey(k,H);null==(fa=this.onKeyDown)?void 0:fa.call(this,k,H);this.forwardEvent("onKeyDown",k,H)},onKeyUp:(k,H)=>{var fa;this._events.onModifierKey(k,H);null==
(fa=this.onKeyUp)?void 0:fa.call(this,k,H);this.forwardEvent("onKeyUp",k,H)},onPinchStart:(k,H)=>{var fa;null==(fa=this.onPinchStart)?void 0:fa.call(this,k,H);this.forwardEvent("onPinchStart",k,H)},onPinch:(k,H)=>{var fa;null==(fa=this.onPinch)?void 0:fa.call(this,k,H);this.forwardEvent("onPinch",k,H)},onPinchEnd:(k,H)=>{var fa;null==(fa=this.onPinchEnd)?void 0:fa.call(this,k,H);this.forwardEvent("onPinchEnd",k,H)},onModifierKey:(k,H)=>{switch(H.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(k,
H)}}});fb(this,"onEnter");fb(this,"onExit");fb(this,"onTransition");fb(this,"onPointerDown");fb(this,"onPointerUp");fb(this,"onPointerMove");fb(this,"onPointerEnter");fb(this,"onPointerLeave");fb(this,"onDoubleClick");fb(this,"onKeyDown");fb(this,"onKeyUp");fb(this,"onPinchStart");fb(this,"onPinch");fb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=a}};fb(Dt,"id");fb(Dt,"shortcuts");$d([Te],Dt.prototype,"currentState",2);$d([Ig],Dt.prototype,"setCurrentState",1);var zx=class extends Dt{constructor(a,d){var k,H;super();fb(this,"_root");fb(this,
"_parent");fb(this,"children",new Map([]));fb(this,"registerStates",fa=>{fa.forEach(la=>this.children.set(la.id,new la(this,this._root)));return this});fb(this,"deregisterStates",fa=>{fa.forEach(la=>{var sa;null==(sa=this.children.get(la.id))?void 0:sa.dispose();this.children.delete(la.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(k=this.initial)?k:this.states[0].id,k=this.children.get(a))&&(this.setCurrentState(k),null==
(H=this.currentState)?void 0:H._events.onEnter({fromId:"initial"}));Jg(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};fb(zx,"cursor");var Cr=class extends zx{constructor(){super(...arguments);fb(this,"isLocked",!1);fb(this,"previous");fb(this,"onEnter",({fromId:a})=>{this.previous=a;this.cursor&&this.app.cursors.setCursor(this.cursor)});fb(this,"onTransition",
a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Vi=class extends zx{get app(){return this.root}get tool(){return this.parent}},Oz=class extends Vi{constructor(){super(...arguments);fb(this,"cursor","crosshair");fb(this,"creatingShape");fb(this,"aspectRatio");fb(this,"initialBounds",{});fb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:k}}=
this.app;var {Shape:H}=this.tool;H=new H({id:gk(),type:H.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:ce.abs(ce.sub(k,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};H.canChangeAspectRatio||(H.aspectRatio?(this.aspectRatio=H.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);
this.creatingShape=H;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(H);this.app.setSelectedShapes([H])});fb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:d}=this,{currentPoint:k,originPoint:H,shiftKey:fa}=this.app.inputs;a=fa||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio;d=Bf.getTransformedBoundingBox(d,"bottom_right_corner",ce.sub(k,
H),0,a);this.app.settings.snapToGrid&&!a&&(d=Bf.snapBoundsToGrid(d,8));this.creatingShape.update({point:[d.minX,d.minY],size:[d.width,d.height]})}});fb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);
this.tool.transition("idle")}})}};fb(Oz,"id","creating");var Pz=class extends Vi{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});fb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};fb(Pz,"id","idle");var Qz=class extends Vi{constructor(){super(...arguments);
fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<xd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});fb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};fb(Qz,"id","pointing");var Oq=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","crosshair")}};fb(Oq,"id","box");fb(Oq,"states",[Pz,Qz,Oz]);fb(Oq,"initial","idle");var Rz=class extends Vi{constructor(){super(...arguments);
fb(this,"shape",{});fb(this,"points",[[0,0,.5]]);fb(this,"persistDebounced",dl(this.app.persist,200));fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:k}=this.tool;var {originPoint:H}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&k){this.shape=k;var {shape:fa}=this;var la=fa.props.points[fa.props.points.length-1];const Ha=xd.sub(H,fa.props.point).concat(null!=(a=H[2])?a:.5);this.points=
[...fa.props.points,la,la];const Ta=Math.ceil(xd.dist(la,H)/16);for(let Xa=0,eb=Xa/(Ta-1);Xa<Ta;Xa++){a=this.points;H=a.push;fa=xd.lrp(la,Ha,eb);var sa=la[2];H.call(a,fa.concat.call(fa,sa+(Ha[2]-sa)*eb))}this.addNextPoint(Ha)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(la=H[2])?la:.5]],this.shape=new d({id:gk(),type:d.id,parentId:this.app.currentPage.id,point:H.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),
this.app.currentPage.addShapes(this.shape)});fb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:k}=this.app.inputs;xd.isEqual(k,d)||this.addNextPoint(xd.sub(d,a.props.point).concat(d[2]))});fb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?vk.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;
this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,k=xd.min(a,[0,0]);this.points.push(a);0>k[0]||0>k[1]?(this.points=this.points.map(H=>xd.sub(H,k).concat(H[2])),d.update({point:xd.add(d.props.point,
k),points:this.points})):d.update({points:this.points})}};fb(Rz,"id","creating");var Sz=class extends Vi{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};fb(Sz,"id","idle");var Tz=class extends Vi{constructor(){super(...arguments);fb(this,"origin",
[0,0]);fb(this,"prevDelta",[0,0]);fb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});fb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});fb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};fb(Tz,"id","pinching");var Ju=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","crosshair");fb(this,"simplify",!0);fb(this,"simplifyTolerance",1);fb(this,"previousShape");fb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,
event:d})})}};fb(Ju,"id","draw");fb(Ju,"states",[Sz,Rz,Tz]);fb(Ju,"initial","idle");var Uz=class extends Vi{constructor(){super(...arguments);fb(this,"points",[[0,0,.5]]);fb(this,"hitShapes",new Set);fb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});fb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;xd.isEqual(d,a)||(this.points.push(a),this.app.shapesInViewport.filter(k=>k.hitTestLineSegment(d,a)).forEach(k=>this.hitShapes.add(k)),
this.app.setErasingShapes(Array.from(this.hitShapes.values())))});fb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};fb(Uz,"id","erasing");var Vz=class extends Vi{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});fb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",
{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};fb(Vz,"id","idle");var Wz=class extends Vi{constructor(){super(...arguments);fb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>d.hitTestPoint(a)))});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;
5<xd.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});fb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};fb(Wz,"id","pointing");var Xv=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","crosshair")}};fb(Xv,"id","erase");fb(Xv,"states",[Vz,Wz,Uz]);fb(Xv,"initial","idle");var Ax=class extends Vi{constructor(){super(...arguments);fb(this,"handle",{});fb(this,
"handleId","end");fb(this,"currentShape",{});fb(this,"initialShape",{});fb(this,"bindableShapeIds",[]);fb(this,"startBindingShapeId");fb(this,"newStartBindingId","");fb(this,"draggedBindingId","");fb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:k,currentPoint:H,modKey:fa,altKey:la},settings:{snapToGrid:sa}}=this.app;var Ha=this.app.getShapeById(this.initialShape.id),{handles:Ta}=this.initialShape,Xa=this.handleId,eb="start"===this.handleId?"end":"start";if(!ce.isEqual(d,
H)){var ib=ce.sub(H,k);if(a){var Db=Ta[eb].point,Ob=ce.add(Ta[Xa].point,ib),Hb=ce.angle(Db,Ob);Db=ce.rotWith(Ob,Db,gm.snapAngleToSegments(Hb,24)-Hb);ib=ce.add(ib,ce.sub(Db,Ob))}ib=ce.add(Ta[Xa].point,ib);Ta={[Xa]:lf(he({},Ta[Xa]),{point:sa?ce.snap(ib,8):ce.toFixed(ib),bindingId:void 0})};var cc=this.currentShape.getHandlesChange(this.initialShape,Ta);if(cc){Ta=pj(Ha.props,cc);var sc={},Ub;Xa=Ta.handles[Xa];eb=Ta.handles[eb];if(this.startBindingShapeId){var kc;if(ib=this.app.getShapeById(this.startBindingShapeId)){Ob=
ib.getCenter();Db=Ta.handles.end;var ec=ce.add(Ta.handles.start.point,Ta.point);ce.isEqual(ec,Ob)&&ec[1]++;Hb=ib.hitTestPoint(H);ec=ce.uni(ce.sub(ec,Ob));const Mc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];fa||ib.hitTestPoint(ce.add(Ta.point,Db.point))||(kc=jc(Ha.props,ib,"start",this.newStartBindingId,Ob,Ob,ec,Hb));kc&&!Mc?(sc[this.newStartBindingId]=kc,Ta.handles.start.bindingId=kc.id):!kc&&Mc&&(console.log("removing start binding"),delete sc[this.newStartBindingId],Ta.handles.start.bindingId=
void 0)}}if(!fa){kc=ce.add(eb.point,Ta.point);eb=ce.add(Xa.point,Ta.point);Xa=ce.uni(ce.sub(eb,kc));const Mc=ce.add(Ta.point,Ta.handles.start.point),Oc=ce.add(Ta.point,Ta.handles.end.point);ib=this.bindableShapeIds.map(vd=>this.app.getShapeById(vd)).sort((vd,Kd)=>Kd.nonce-vd.nonce).filter(vd=>![Mc,Oc].every(Kd=>vd.hitTestPoint(Kd)));for(const vd of ib)if(Ub=jc(Ha.props,vd,this.handleId,this.draggedBindingId,eb,kc,Xa,la))break}Ub?(sc[this.draggedBindingId]=Ub,Ta=pj(Ta,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):
(Ha=Ha.props.handles[this.handleId].bindingId,void 0!==Ha&&(delete sc[Ha],Ta=pj(Ta,{handles:{[this.handleId]:{bindingId:void 0}}})));cc=this.currentShape.getHandlesChange(Ta,Ta.handles);fd(()=>{var Mc;if(cc){this.currentShape.update(cc);this.app.currentPage.updateBindings(sc);const Oc=Object.values(null!=(Mc=cc.handles)?Mc:{}).map(vd=>vd.bindingId).map(vd=>this.app.currentPage.bindings[vd]).filter(Boolean).flatMap(vd=>[vd.toId,vd.fromId].filter(Boolean));this.app.setBindingShapes(Oc)}})}}});fb(this,
"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});fb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};fb(Ax,"id","creating");var Xz=class extends Ax{constructor(){super(...arguments);fb(this,"onEnter",()=>{var a;
this.app.history.pause();this.newStartBindingId=gk();this.draggedBindingId=gk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:k}=this.app.inputs;d=new d(lf(he({},d.defaultProps),{id:gk(),type:d.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?ce.snap(k,8):k,fill:this.app.settings.color,stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=zc(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);
this.app.setSelectedShapes([d]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(H=>this.app.getShapeById(H)).filter(H=>vk.pointInBounds(k,H.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};fb(Xz,"id","creating");var Yz=class extends Vi{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});fb(this,"onPinchStart",
(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});fb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});fb(this,"onPointerLeave",a=>{a.order||
"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};fb(Yz,"id","idle");var Zz=class extends Vi{constructor(){super(...arguments);fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<xd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};fb(Zz,"id","pointing");var Yv=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","crosshair")}};fb(Yv,"id","line");fb(Yv,
"states",[Yz,Zz,Xz]);fb(Yv,"initial","idle");var $z=class extends Vi{constructor(){super(...arguments);fb(this,"cursor","crosshair");fb(this,"creatingShape");fb(this,"aspectRatio");fb(this,"initialBounds",{});fb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:k}=this.tool,H=new k({id:gk(),type:k.id,parentId:a.id,point:[...d],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=H;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);
fd(()=>{this.app.currentPage.addShapes(H);const fa=this.app.settings.snapToGrid?ce.snap([...d],8):d,{bounds:la}=H;H.update({point:ce.sub(fa,[la.width/2,la.height/2])});this.app.transition("select");this.app.setSelectedShapes([H]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};fb($z,"id","creating");var aA=class extends Vi{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});
fb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};fb(aA,"id","idle");var Zv=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","crosshair")}};fb(Zv,"id","box");fb(Zv,"states",[aA,$z]);fb(Zv,"initial","idle");var vE=yf(jm()),wE=class extends vE.default{constructor(){super(...arguments);
fb(this,"toBBox",a=>a.rotatedBounds)}},bA=class extends Vi{constructor(){super(...arguments);fb(this,"initialSelectedIds",[]);fb(this,"initialSelectedShapes",[]);fb(this,"tree",new wE);fb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:k}=this.app;this.initialSelectedIds=Array.from(k.values());this.initialSelectedShapes=Array.from(a.values());this.tree.load(d.shapes)});fb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});fb(this,"onPointerMove",
()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:k,currentPoint:H}}=this.app,fa=Bf.getBoundsFromPoints([H,k],0);this.app.setBrush(fa);const la=[...(new Set(this.tree.search(fa).filter(sa=>d?Bf.boundsContain(fa,sa.rotatedBounds):sa.hitTestBounds(fa)).filter(sa=>"group"!==sa.type).map(sa=>{var Ha;return null!=(Ha=this.app.getParentGroup(sa))?Ha:sa})))];a?la.every(sa=>this.initialSelectedShapes.includes(sa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(sa=>!la.includes(sa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,
...la]))]):this.app.setSelectedShapes(la);this.app.viewport.panToPointWhenNearBounds(H)});fb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});fb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};fb(bA,"id","brushing");var cA=class extends Vi{constructor(){super(...arguments);fb(this,"onEnter",a=>{var d;const {selectedIds:k,inputs:{shiftKey:H}}=
this.app;if("shape"===a.type&&!k.has(a.shape.id)){const fa=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;H?this.app.setSelectedShapes([...Array.from(k.values()),fa.id]):this.app.setSelectedShapes([fa])}});fb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};fb(cA,"id","contextMenu");var dA=class extends Vi{constructor(){super(...arguments);fb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});fb(this,"onExit",()=>{});fb(this,
"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});fb(this,"onPointerDown",(a,d)=>{const {selectedShapes:k,inputs:{ctrlKey:H}}=this.app;if(2===d.button)this.tool.transition("contextMenu",a);else if(H)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;
case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(k.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:fa,inputs:la}=this.app;fa&&vk.pointInBounds(la.currentPoint,fa)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",
a);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",he(he({},d),a))}});fb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});fb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};fb(dA,"id","idle");var eA=class extends Vi{constructor(){super(...arguments);fb(this,"onEnter",
a=>{var d;const {selectedIds:k,inputs:{shiftKey:H}}=this.app,fa=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;H?this.app.setSelectedShapes([...Array.from(k.values()),fa.id]):this.app.setSelectedShapes([fa])});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<xd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});fb(this,"onPointerUp",()=>{this.tool.transition("idle")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,
event:d})})}};fb(eA,"id","pointingShape");var fA=class extends Vi{constructor(){super(...arguments);fb(this,"cursor","move");fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<xd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});fb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};fb(fA,"id","pointingBoundsBackground");var gA=
class extends Vi{constructor(){super(...arguments);fb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<xd.dist(a,d)&&this.tool.transition("brushing")});fb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});fb(this,"onPinchStart",
(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};fb(gA,"id","pointingCanvas");var hA=class extends Vi{constructor(){super(...arguments);fb(this,"cursor","move");fb(this,"isCloning",!1);fb(this,"didClone",!1);fb(this,"initialPoints",{});fb(this,"initialShapePoints",{});fb(this,"initialClonePoints",{});fb(this,"clones",[]);fb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,
inputs:k}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(d.map(({id:H,props:{point:fa}})=>[H,fa.slice()]));document.querySelectorAll("input,textarea").forEach(H=>H.blur());null==(a=document.getSelection())?void 0:a.empty();k.altKey?this.startCloning():this.moveSelectedShapesToPointer()});fb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});fb(this,"onPointerMove",
()=>{const {inputs:{currentPoint:a}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});fb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});fb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(k=>{k.update({point:this.initialPoints[k.id]})}),
this.tool.transition("idle")}});fb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:k,allSelectedShapes:H}=this.app;k.removeShapes(...H);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:k}}=this.app,{initialPoints:H}=this,fa=xd.sub(k,
d);a&&(Math.abs(fa[0])<Math.abs(fa[1])?fa[0]=0:fa[1]=0);fd(()=>{this.app.allSelectedShapesArray.filter(la=>!la.props.isLocked).forEach(la=>{let sa=xd.add(H[la.id],fa);this.app.settings.snapToGrid&&(sa=xd.snap(sa,8));la.update({point:sa})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d(lf(he({},a.serialized),{id:gk(),type:a.type,point:this.initialPoints[a.id],
rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};fb(hA,"id","translating");var iA=class extends Vi{constructor(){super(...arguments);
fb(this,"pointedSelectedShape");fb(this,"onEnter",a=>{this.pointedSelectedShape=a.shape});fb(this,"onExit",()=>{this.pointedSelectedShape=void 0});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<xd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});fb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:k}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:k}=
this.app),k=Array.from(k.values()),k.splice(k.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(k);else{if(1===k.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof on&&vk.pointInBounds(d,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});
fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};fb(iA,"id","pointingSelectedShape");var jA=class extends Vi{constructor(){super(...arguments);fb(this,"info",{});fb(this,"onEnter",a=>{this.info=a;this.updateCursor()});fb(this,"onExit",()=>{this.app.cursors.reset()});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<xd.dist(a,d)&&this.tool.transition("resizing",this.info)});fb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",
this.info)});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(lt[this.info.handle],this.app.selectionBounds.rotation)}};fb(jA,"id","pointingResizeHandle");var kA=class extends Vi{constructor(){super(...arguments);fb(this,"isSingle",!1);fb(this,"handle","bottom_right_corner");fb(this,"snapshots",{});fb(this,"initialCommonBounds",{});fb(this,"selectionRotation",0);fb(this,"resizeType","corner");fb(this,"onEnter",a=>{var d,k;
const {history:H,selectedShapesArray:fa,selectionBounds:la}=this.app;if(!la)throw Error("Expected a selected bounds.");this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";this.app.cursors.setCursor(kA.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);H.pause();const sa=Bf.getBoundsFromPoints(fa.map(Ha=>Bf.getBoundsCenter(Ha.bounds)));this.selectionRotation=
(this.isSingle=1===fa.length)?null!=(k=fa[0].props.rotation)?k:0:0;this.initialCommonBounds=he({},la);this.snapshots=Object.fromEntries(fa.map(Ha=>{const Ta=he({},Ha.bounds),[Xa,eb]=Bf.getBoundsCenter(Ta);return[Ha.id,{props:Ha.serialized,bounds:Ta,transformOrigin:[(Xa-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(eb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(Xa-sa.minX)/sa.width,(eb-sa.minY)/sa.height],isAspectRatioLocked:Ha.props.isAspectRatioLocked||
!(Ha.canChangeAspectRatio&&!Ha.props.rotation)}]}));fa.forEach(Ha=>{var Ta;null==(Ta=Ha.onResizeStart)?void 0:Ta.call(Ha,{isSingle:this.isSingle})})});fb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});fb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:k,originPoint:H,currentPoint:fa}}=this.app,{handle:la,snapshots:sa,initialCommonBounds:Ha}=this;let Ta=xd.sub(fa,H);a&&(Ta=xd.mul(Ta,
2));const Xa=this.app.selectedShapes.values().next().value;let eb=Bf.getTransformedBoundingBox(Ha,la,Ta,this.selectionRotation,d||this.isSingle&&(k?!("clipping"in Xa.props):!Xa.canChangeAspectRatio||Xa.props.isAspectRatioLocked));a&&(eb=he(he({},eb),Bf.centerBounds(eb,Bf.getBoundsCenter(Ha))));const {scaleX:ib,scaleY:Db}=eb;this.app.selectedShapes.forEach(Ob=>{var Hb,cc;const {isAspectRatioLocked:sc,props:Ub,bounds:kc,transformOrigin:ec}=sa[Ob.id];let Mc=Bf.getRelativeTransformedBoundingBox(eb,Ha,
kc,0>ib,0>Db);if(Ob.canResize.some(Kd=>Kd)||Ob.props.isSizeLocked||!this.isSingle){var Oc=[ib,Db],vd=null!=(Hb=Ub.rotation)?Hb:0;Hb=Bf.getBoundsCenter(Mc);Ob.canFlip||(Oc=xd.abs(Oc));Ob.canScale||(Oc=null!=(cc=Ub.scale)?cc:[1,1]);if(vd&&0>ib&&0<=Db||0>Db&&0<=ib)vd*=-1;this.app.settings.snapToGrid&&!sc&&(Mc=Bf.snapBoundsToGrid(Mc,8));Ob.onResize(Ub,{center:Hb,rotation:vd,scale:Oc,bounds:Mc,type:la,clip:k,transformOrigin:ec})}});this.updateCursor(ib,Db);this.app.viewport.panToPointWhenNearBounds(fa)});
fb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(k=>{k.update(he({},this.snapshots[k.id].props))}),this.tool.transition("idle")}})}updateCursor(a,d){var k,H,fa,la;const sa=0>a&&0<=d;a=0>d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":sa||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(k=
this.app.selectionBounds)?void 0:k.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(H=this.app.selectionBounds)?void 0:H.rotation);break;case "top_right_corner":case "bottom_left_corner":sa||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(fa=this.app.selectionBounds)?void 0:fa.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(la=this.app.selectionBounds)?void 0:
la.rotation)}}},Bx=kA;fb(Bx,"id","resizing");fb(Bx,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var lA=class extends Vi{constructor(){super(...arguments);fb(this,"cursor","rotate");fb(this,"handle","");fb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});fb(this,"onPointerMove",
()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<xd.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});fb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(lt[this.handle],this.app.selectionRotation)}};fb(lA,"id","pointingRotateHandle");var mA=class extends Vi{constructor(){super(...arguments);fb(this,
"info",{});fb(this,"onEnter",a=>{this.info=a});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<xd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});fb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})})}};fb(mA,"id","pointingShapeBehindBounds");var Cx=class extends Vi{constructor(){super(...arguments);fb(this,"cursor","rotate");fb(this,"snapshot",{});fb(this,"initialCommonCenter",[0,0]);fb(this,"initialCommonBounds",{});fb(this,"initialAngle",0);fb(this,"initialSelectionRotation",0);fb(this,"handle","");fb(this,"onEnter",a=>{const {history:d,selectedShapesArray:k,selectionBounds:H}=this.app;if(!H)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=
this.app.selectionRotation;this.initialCommonBounds=he({},H);this.initialCommonCenter=Bf.getBoundsCenter(H);this.initialAngle=xd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(k.map(fa=>[fa.id,{point:[...fa.props.point],center:[...fa.center],rotation:fa.props.rotation,handles:"handles"in fa?Is(fa.handles):void 0}]));this.updateCursor()});fb(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});fb(this,"onPointerMove",()=>{const {selectedShapes:a,
inputs:{shiftKey:d,currentPoint:k}}=this.app,{snapshot:H,initialCommonCenter:fa,initialAngle:la,initialSelectionRotation:sa}=this;let Ha=xd.angle(fa,k)-la;d&&(Ha=gm.snapAngleToSegments(Ha,24));a.forEach(Xa=>{var eb=H[Xa.id];let ib=0;if(d){var {rotation:Db=0}=eb;ib=gm.snapAngleToSegments(Db,24)-Db}const Ob=xd.sub(eb.center,eb.point);Db=xd.rotWith(eb.center,fa,Ha);if("handles"in Xa){eb=eb.handles;const Hb=eb.map(sc=>xd.rotWith(sc.point,Ob,Ha)),cc=Bf.getCommonTopLeft(Hb);Xa.update({point:xd.add(cc,xd.sub(Db,
Ob)),handles:eb.map((sc,Ub)=>lf(he({},sc),{point:xd.sub(Hb[Ub],cc)}))})}else Xa.update({point:xd.sub(Db,Ob),rotation:gm.clampRadians((eb.rotation||0)+Ha+ib)})});const Ta=gm.clampRadians(sa+Ha);this.app.setSelectionRotation(d?gm.snapAngleToSegments(Ta,24):Ta);this.updateCursor()});fb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(k=>{k.update(this.snapshot[k.id])}),
this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(lt[this.handle],this.app.selectionRotation)}};fb(Cx,"id","rotating");var nA=class extends Vi{constructor(){super(...arguments);fb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});fb(this,"onPinchEnd",()=>{this.tool.transition("idle")});fb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};fb(nA,"id","pinching");var oA=class extends Ax{constructor(){super(...arguments);fb(this,"cursor",
"grabbing");fb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=gk();this.draggedBindingId=gk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=zc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};fb(oA,"id","translatingHandle");var pA=class extends Vi{constructor(){super(...arguments);fb(this,"cursor","grabbing");fb(this,"info",{});fb(this,"onEnter",a=>{this.info=a});fb(this,
"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<xd.dist(a,d)&&this.tool.transition("translatingHandle",this.info)});fb(this,"onPointerUp",()=>{this.tool.transition("idle")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};fb(pA,"id","pointingHandle");var qA=class extends Vi{constructor(){super(...arguments);fb(this,"handle");fb(this,"onEnter",a=>{var d;this.app.cursors.setCursor(lt[a.handle],null!=(d=this.app.selectionBounds.rotation)?
d:0);this.handle=a.handle});fb(this,"onExit",()=>{this.app.cursors.reset()});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",a);break;default:this.tool.transition("pointingResizeHandle",
a)}}});fb(this,"onPointerLeave",()=>{this.tool.transition("idle")});fb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var k=this.app.selectedShapes.values().next().value;if(!k.canEdit||this.app.readOnly||k.props.isLocked)k.onResetBounds({asset:k.props.assetId?this.app.assets[k.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":null==(d=
k.onResetBounds)?void 0:d.call(k,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:k})}}})}};fb(qA,"id","hoveringSelectionHandle");var rA=class extends Vi{constructor(){super(...arguments);fb(this,"editingShape",{});fb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});fb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=this.editingShape.props.text.trim();
""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",a);break;case "canvas":a.order||
this.tool.transition("idle",a)}});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":fd(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};fb(rA,"id","editingShape");var sA=class extends Vi{constructor(){super(...arguments);fb(this,"minimapZoom",1);fb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});fb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");var k=document.querySelector(".tl-preview-minimap #minimap-camera-rect");
if(d&&k){const H=d.getBoundingClientRect();this.minimapRect.height=H.height;this.minimapRect.width=H.width;this.minimapRect.minX=H.left;this.minimapRect.minY=H.top;this.minimapRect.maxX=H.right;this.minimapRect.maxY=H.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=xd.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);k=k.getBoundingClientRect();k=xd.mul(xd.sub(a,[k.left+k.width/2,k.top+k.height/2]),this.minimapZoom);return xd.sub(this.app.viewport.camera.point,k)}});
fb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});fb(this,"onPointerMove",(a,d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});fb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};fb(sA,"id","pointingMinimap");var Et=class extends Cr{constructor(){super(...arguments);fb(this,"returnTo","");fb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};
fb(Et,"id","select");fb(Et,"initial","idle");fb(Et,"shortcut","whiteboard/select");fb(Et,"states",[dA,bA,cA,gA,eA,mA,iA,fA,qA,jA,lA,sA,pA,oA,hA,Bx,Cx,Cx,nA,rA]);var tA=class extends Vi{constructor(){super(...arguments);fb(this,"cursor","grabbing");fb(this,"originalScreenPoint",[]);fb(this,"originalCameraPoint",[]);fb(this,"prevState","idle");fb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});
fb(this,"onPointerMove",(a,d)=>{a=ce.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:ce.sub(this.originalCameraPoint,ce.div(a,this.app.viewport.camera.zoom))})});fb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};fb(tA,"id","panning");var uA=class extends Vi{constructor(){super(...arguments);fb(this,"onEnter",a=>{this.parent.prevTool&&a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();
this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});fb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};fb(uA,"id","idle");var vA=class extends Vi{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};fb(vA,"id","idleHold");var wA=class extends Vi{constructor(){super(...arguments);fb(this,"origin",[0,0]);
fb(this,"prevDelta",[0,0]);fb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});fb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});fb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};fb(wA,"id","pinching");var Ft=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","grab");fb(this,"prevTool",null);fb(this,"onEnter",a=>{this.prevTool=null==a?void 0:a.prevTool});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});
fb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};fb(Ft,"id","move");fb(Ft,"shortcut","whiteboard/pan");fb(Ft,"states",[uA,vA,tA,wA]);fb(Ft,"initial","idle");var mm=class{constructor(a,d={}){fb(this,"lastShapesNounces",null);fb(this,"app");fb(this,"id");fb(this,"name");fb(this,"shapes",[]);fb(this,"bindings",{});fb(this,"nonce",0);fb(this,"bringForward",Ha=>{const Ta=this.parseShapesArg(Ha);Ta.sort((Xa,eb)=>this.shapes.indexOf(eb)-this.shapes.indexOf(Xa)).map(Xa=>this.shapes.indexOf(Xa)).forEach(Xa=>
{if(Xa!==this.shapes.length-1&&!Ta.includes(this.shapes[Xa+1])){var eb=this.shapes[Xa];this.shapes[Xa]=this.shapes[Xa+1];this.shapes[Xa+1]=eb}});this.app.persist();return this});fb(this,"sendBackward",Ha=>{const Ta=this.parseShapesArg(Ha);Ta.sort((Xa,eb)=>this.shapes.indexOf(Xa)-this.shapes.indexOf(eb)).map(Xa=>this.shapes.indexOf(Xa)).forEach(Xa=>{if(0!==Xa&&!Ta.includes(this.shapes[Xa-1])){var eb=this.shapes[Xa];this.shapes[Xa]=this.shapes[Xa-1];this.shapes[Xa-1]=eb}});this.app.persist();return this});
fb(this,"bringToFront",Ha=>{const Ta=this.parseShapesArg(Ha);this.shapes=this.shapes.filter(Xa=>!Ta.includes(Xa)).concat(Ta);this.app.persist();return this});fb(this,"sendToBack",Ha=>{const Ta=this.parseShapesArg(Ha);this.shapes=Ta.concat(this.shapes.filter(Xa=>!Ta.includes(Xa)));this.app.persist();return this});fb(this,"flip",(Ha,Ta)=>{Ha=this.parseShapesArg(Ha);const Xa=Bf.getCommonBounds(Ha.map(eb=>eb.bounds));Ha.forEach(eb=>{var ib;const Db=Bf.getRelativeTransformedBoundingBox(Xa,Xa,eb.bounds,
"horizontal"===Ta,"vertical"===Ta);if(eb.serialized)eb.onResize(eb.serialized,{bounds:Db,center:Bf.getBoundsCenter(Db),rotation:null!=(ib=eb.props.rotation)?ib:-0,type:"top_left_corner",scale:eb.canFlip&&eb.props.scale?"horizontal"===Ta?[-eb.props.scale[0],1]:[1,-eb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});fb(this,"getShapeById",Ha=>this.shapes.find(Ta=>Ta.id===Ha));fb(this,"cleanup",Ha=>{Ha=Fb(this.bindings,Ha);const Ta=new Set;let Xa=!1,eb=!1;const ib=
Is(this.bindings);Ha.forEach(Db=>{var Ob;if(this.bindings[Db.id]){var Hb=this.getShapeById(Db.toId),cc=this.getShapeById(Db.fromId);Hb&&cc?Ta.has(cc.id)||(Db=this.updateArrowBindings(cc),Ta.add(cc.id),Db&&(Hb=he(he({},cc.props),Db),Xa=!0,null==(Ob=this.getShapeById(Hb.id))?void 0:Ob.update(Hb,!1,(0,NE.default)(null==Db?void 0:Db.handles,null==cc?void 0:cc.props.handles)))):(delete ib[Db.id],eb=!0)}});Object.keys(ib).forEach(Db=>{const Ob=this.bindings[Db];0===this.shapes.filter(Hb=>Hb.id===Ob.fromId||
Hb.id===Ob.toId).length&&(delete ib[Db],eb=!0)});eb&&this.update({bindings:ib});(Xa||eb)&&this.app.persist(!0)});fb(this,"updateArrowBindings",Ha=>{var Ta,Xa,eb,ib={start:Is(Ha.props.handles.start),end:Is(Ha.props.handles.end)},Db={isBound:!1,handle:Ha.props.handles.start,point:ce.add(Ha.props.handles.start.point,Ha.props.point)},Ob={isBound:!1,handle:Ha.props.handles.end,point:ce.add(Ha.props.handles.end.point,Ha.props.point)};if(Ha.props.handles.start.bindingId){var Hb=void 0!==(null==(Ta=Ha.props.decorations)?
void 0:Ta.start);Ta=Ha.props.handles.start;var cc=this.bindings[Ha.props.handles.start.bindingId],sc=this.getShapeById(null==cc?void 0:cc.toId);if(sc){Db=sc.getBounds();var Ub=sc.getExpandedBounds(),kc=Bf.expandBounds(Db,Hb?cc.distance:1);const {minX:ec,minY:Mc,width:Oc,height:vd}=Ub,Kd=ce.add([ec,Mc],ce.mulV([Oc,vd],ce.rotWith(cc.point,[.5,.5],sc.props.rotation||0)));Db={isBound:!0,hasDecoration:Hb,binding:cc,handle:Ta,point:Kd,target:sc,bounds:Db,expandedBounds:Ub,intersectBounds:kc,center:sc.getCenter()}}}if(Ha.props.handles.end.bindingId&&
(Hb=void 0!==(null==(Xa=Ha.props.decorations)?void 0:Xa.end),Xa=Ha.props.handles.end,Ta=this.bindings[Ha.props.handles.end.bindingId],cc=this.getShapeById(null==Ta?void 0:Ta.toId))){Ob=cc.getBounds();sc=cc.getExpandedBounds();Ub=Hb?Bf.expandBounds(Ob,Ta.distance):Ob;const {minX:ec,minY:Mc,width:Oc,height:vd}=sc;kc=ce.add([ec,Mc],ce.mulV([Oc,vd],ce.rotWith(Ta.point,[.5,.5],cc.props.rotation||0)));Ob={isBound:!0,hasDecoration:Hb,binding:Ta,handle:Xa,point:kc,target:cc,bounds:Ob,expandedBounds:sc,intersectBounds:Ub,
center:cc.getCenter()}}for(const ec of["end","start"]){Xa="start"===ec?Db:Ob;const Mc="start"===ec?Ob:Db;if(Xa.isBound)if(Xa.binding.distance){if(Hb=ce.uni(ce.sub(Xa.point,Mc.point)),Ta=B(Mc.point,Hb,Xa.intersectBounds,Xa.target.props.rotation).filter(Oc=>Oc.didIntersect).map(Oc=>Oc.points[0]).sort((Oc,vd)=>ce.dist(Oc,Mc.point)-ce.dist(vd,Mc.point)),Ta[0])if(cc=void 0,Mc.isBound&&(cc=B(Mc.point,Hb,Mc.intersectBounds,Mc.target.props.rotation).filter(Oc=>Oc.didIntersect).map(Oc=>Oc.points[0]).sort((Oc,
vd)=>ce.dist(Oc,Mc.point)-ce.dist(vd,Mc.point))[0]),Mc.isBound&&(2>Ta.length||cc&&Ta[0]&&10>Math.ceil(ce.dist(Ta[0],cc))||Bf.boundsContain(Xa.expandedBounds,Mc.expandedBounds)||Bf.boundsCollide(Xa.expandedBounds,Mc.expandedBounds)))Hb=ce.uni(ce.sub(Mc.point,Xa.point)),Ta=B(Xa.point,Hb,Xa.bounds,Xa.target.props.rotation).filter(Oc=>Oc.didIntersect).map(Oc=>Oc.points[0]),Ta[0]&&(ib[ec].point=ce.toFixed(ce.sub(Ta[0],Ha.props.point)),ib["start"===ec?"end":"start"].point=ce.toFixed(ce.add(ce.sub(Ta[0],
Ha.props.point),ce.mul(Hb,Math.min(ce.dist(Ta[0],Mc.point),10*(Bf.boundsContain(Mc.bounds,Xa.intersectBounds)?-1:1))))));else{if(!Mc.isBound&&(Ta[0]&&10>ce.dist(Ta[0],Mc.point)||vk.pointInBounds(Mc.point,Xa.intersectBounds)))return ib=ce.uni(ce.sub(Xa.center,Mc.point)),null==(eb=Ha.getHandlesChange)?void 0:eb.call(Ha,Ha.props,{[ec]:lf(he({},Ha.props.handles[ec]),{point:ce.toFixed(ce.add(ce.sub(Mc.point,Ha.props.point),ce.mul(ib,10)))})});Ta[0]&&(ib[ec].point=ce.toFixed(ce.sub(Ta[0],Ha.props.point)))}}else ib[ec].point=
ce.sub(Xa.point,Ha.props.point)}return Ha.getHandlesChange(Ha.props,ib)});const {id:k,name:H,shapes:fa=[],bindings:la={},nonce:sa}=d;this.id=k;this.name=H;this.bindings=Object.assign({},la);this.app=a;this.nonce=sa||0;this.addShapes(...fa);Jg(this);zd(()=>{const Ha=0<this.shapes.length?Object.fromEntries(this.shapes.map(Ta=>[Ta.id,Ta.nonce])):null;if(this.lastShapesNounces&&Ha){const Ta=this.lastShapesNounces,Xa=[...(new Set([...Object.keys(Ha),...Object.keys(Ta)]))].filter(eb=>Ta[eb]!==Ha[eb]);requestAnimationFrame(()=>
{this.cleanup(Xa)})}Ha&&(this.lastShapesNounces=Ha)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>zc(a)),bindings:Is(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,k)=>a.indexOf(d.id)-a.indexOf(k.id));return this}addShapes(...a){if(0!==
a.length)return a="getBounds"in a[0]?a:a.map(d=>new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(k=>!d.includes(k));return d}getBindableShapes(){return this.shapes.filter(a=>a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};$d([Te],mm.prototype,"id",2);$d([Te],mm.prototype,"name",2);$d([Te],mm.prototype,"shapes",
2);$d([Te],mm.prototype,"bindings",2);$d([Jf],mm.prototype,"serialized",1);$d([Jf],mm.prototype,"shapesById",1);$d([Te],mm.prototype,"nonce",2);$d([Ig],mm.prototype,"update",1);$d([Ig],mm.prototype,"updateBindings",1);$d([Ig],mm.prototype,"updateShapesIndex",1);$d([Ig],mm.prototype,"addShapes",1);$d([Ig],mm.prototype,"removeShapes",1);$d([Ig],mm.prototype,"bringForward",2);$d([Ig],mm.prototype,"sendBackward",2);$d([Ig],mm.prototype,"bringToFront",2);$d([Ig],mm.prototype,"sendToBack",2);$d([Ig],mm.prototype,
"cleanup",2);var Nk=class{constructor(){fb(this,"shiftKey",!1);fb(this,"ctrlKey",!1);fb(this,"modKey",!1);fb(this,"altKey",!1);fb(this,"spaceKey",!1);fb(this,"isPinching",!1);fb(this,"currentScreenPoint",[0,0]);fb(this,"currentPoint",[0,0]);fb(this,"previousScreenPoint",[0,0]);fb(this,"previousPoint",[0,0]);fb(this,"originScreenPoint",[0,0]);fb(this,"originPoint",[0,0]);fb(this,"pointerIds",new Set);fb(this,"state","idle");fb(this,"containerOffset",[0,0]);fb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);
this.updateModifiers(d);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});fb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});fb(this,"onPointerUp",(a,d)=>{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});fb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});fb(this,"onKeyUp",
a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});fb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});fb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});fb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});Jg(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=
ce.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=xb()?a.metaKey:a.ctrlKey))}};$d([Te],Nk.prototype,"shiftKey",2);$d([Te],Nk.prototype,"ctrlKey",2);$d([Te],Nk.prototype,"modKey",2);$d([Te],Nk.prototype,"altKey",2);$d([Te],Nk.prototype,"spaceKey",2);$d([Te],Nk.prototype,"isPinching",2);$d([Te],Nk.prototype,"currentScreenPoint",2);$d([Te],Nk.prototype,"currentPoint",2);$d([Te],Nk.prototype,"previousScreenPoint",
2);$d([Te],Nk.prototype,"previousPoint",2);$d([Te],Nk.prototype,"originScreenPoint",2);$d([Te],Nk.prototype,"originPoint",2);$d([Te],Nk.prototype,"state",2);$d([Te],Nk.prototype,"containerOffset",2);$d([Ig],Nk.prototype,"updateContainerOffset",1);$d([Ig],Nk.prototype,"updateModifiers",1);$d([Ig],Nk.prototype,"onPointerDown",2);$d([Ig],Nk.prototype,"onPointerMove",2);$d([Ig],Nk.prototype,"onPointerUp",2);$d([Ig],Nk.prototype,"onKeyDown",2);$d([Ig],Nk.prototype,"onKeyUp",2);$d([Ig],Nk.prototype,"onPinchStart",
2);$d([Ig],Nk.prototype,"onPinch",2);$d([Ig],Nk.prototype,"onPinchEnd",2);var xE=(a,d=100)=>-(Math.cos(Math.PI*xd.clamp(a/d,0,1))-1)/2,Gs=class{constructor(){fb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});fb(this,"camera",{point:[0,0],zoom:1});fb(this,"updateBounds",a=>{this.bounds=a;return this});fb(this,"panCamera",a=>this.update({point:xd.sub(this.camera.point,xd.div(a,this.camera.zoom))}));fb(this,"panToPointWhenNearBounds",a=>{const d=xd.div([Gs.panThreshold,Gs.panThreshold],
this.camera.zoom),k=xd.sub([this.currentView.maxX,this.currentView.maxY],xd.add(a,d));a=xd.sub([this.currentView.minX,this.currentView.minY],xd.sub(a,d));this.panCamera(xd.mul([0>k[0]?k[0]:0<a[0]?a[0]:0,0>k[1]?k[1]:0<a[1]?a[1]:0],-Gs.panMultiplier*this.camera.zoom))});fb(this,"update",({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});fb(this,"getPagePoint",a=>{const {camera:d,bounds:k}=
this;return xd.sub(xd.div(xd.sub(a,[k.minX,k.minY]),d.zoom),d.point)});fb(this,"getScreenPoint",a=>{const {camera:d}=this;return xd.mul(xd.add(a,d.point),d.zoom)});fb(this,"onZoom",(a,d,k=!1)=>this.pinchZoom(a,[0,0],d,k));fb(this,"pinchZoom",(a,d,k,H=!1)=>{var {camera:fa}=this;d=xd.sub(fa.point,xd.div(d,fa.zoom));k=xd.clamp(k,Gs.minZoom,Gs.maxZoom);fa=xd.div(a,fa.zoom);a=xd.div(a,k);a=xd.toFixed(xd.add(d,xd.sub(a,fa)));H?this.animateCamera({point:a,zoom:k}):this.update({point:a,zoom:k});return this});
fb(this,"setZoom",(a,d=!1)=>{const {bounds:k}=this;this.onZoom([k.width/2,k.height/2],a,d)});fb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});fb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});fb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});fb(this,"animateCamera",({point:a,zoom:d})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/
d}));fb(this,"animateToViewport",a=>{const d=performance.now(),k=he({},this.currentView),H=()=>{var fa=performance.now()-d;fa=xE(fa);var la=k.minX+(a.minX-k.minX)*fa;this.update({point:[-la,-(k.minY+(a.minY-k.minY)*fa)],zoom:this.bounds.width/(k.maxX+(a.maxX-k.maxX)*fa-la)});1>fa&&requestAnimationFrame(H)};H()});fb(this,"zoomToBounds",({width:a,height:d,minX:k,minY:H})=>{const {bounds:fa,camera:la}=this;let sa=Math.min((fa.width-100)/a,(fa.height-100)/d);sa=Math.min(1,Math.max(Gs.minZoom,la.zoom===
sa||1>la.zoom?Math.min(1,sa):sa));a=xd.add([-k,-H],[(fa.width-a*sa)/2/sa,(fa.height-d*sa)/2/sa]);this.animateCamera({point:a,zoom:sa})});Jg(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:k}}=this,H=a.width/k,fa=a.height/k;return{minX:-d[0],minY:-d[1],maxX:H-d[0],maxY:fa-d[1],width:H,height:fa}}},bp=Gs;fb(bp,"minZoom",.1);fb(bp,"maxZoom",4);fb(bp,"panMultiplier",.05);fb(bp,"panThreshold",100);$d([Te],bp.prototype,"bounds",2);$d([Te],bp.prototype,"camera",2);$d([Ig],bp.prototype,"updateBounds",
2);$d([Ig],bp.prototype,"update",2);$d([Jf],bp.prototype,"currentView",1);var yE=class{constructor(a){fb(this,"app");fb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});fb(this,"hoverShape",d=>{this.app.setHoveredShape(d);return this});fb(this,"createShapes",(...d)=>{this.app.createShapes(d);return this});fb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);return this});fb(this,"deleteShapes",(...d)=>
{this.app.deleteShapes(d.length?d:this.app.selectedShapesArray);return this});fb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});fb(this,"deselectShapes",(...d)=>{const k="string"===typeof d[0]?d:d.map(H=>H.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(H=>!k.includes(H.id)));return this});fb(this,"flipHorizontal",(...d)=>{this.app.flipHorizontal(d);return this});fb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);return this});fb(this,"selectAll",
()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>!this.app.shapesInGroups().includes(d)));return this});fb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});fb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});fb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});fb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});fb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Bf.getCommonBounds(d.map(k=>
k.bounds));this.app.viewport.zoomToBounds(d);return this});fb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Bf.getCommonBounds(d.map(k=>k.bounds));this.app.viewport.update({point:ce.add(ce.neg(Bf.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});fb(this,"zoomToSelection",()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);return this});fb(this,"resetZoomToCursor",
()=>{this.app.viewport.animateCamera({zoom:1,point:ce.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});fb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});fb(this,"toggleSnapToGrid",()=>{const {settings:d}=this.app;d.update({snapToGrid:!d.snapToGrid});return this});fb(this,"setColor",d=>{const {settings:k}=this.app;k.update({color:d});this.app.selectedShapesArray.forEach(H=>{H.props.isLocked||H.update({fill:d,stroke:d})});
this.app.persist();return this});fb(this,"setScaleLevel",d=>{const {settings:k}=this.app;k.update({scaleLevel:d});this.app.selectedShapes.forEach(H=>{H.props.isLocked||H.setScaleLevel(d)});this.app.persist();return this});fb(this,"undo",()=>{this.app.undo();return this});fb(this,"redo",()=>{this.app.redo();return this});fb(this,"persist",()=>{this.app.persist();return this});fb(this,"createNewLineBinding",(d,k)=>this.app.createNewLineBinding(d,k));fb(this,"cloneShapes",({shapes:d,assets:k,bindings:H,
point:fa=[0,0]})=>{const la=Bf.getCommonBounds(d.filter(Ta=>"group"!==Ta.type).map(Ta=>{var Xa,eb,ib,Db,Ob,Hb,cc,sc,Ub,kc,ec,Mc,Oc,vd,Kd,We;return{minX:null!=(eb=null==(Xa=Ta.point)?void 0:Xa[0])?eb:fa[0],minY:null!=(Db=null==(ib=Ta.point)?void 0:ib[1])?Db:fa[1],width:null!=(Hb=null==(Ob=Ta.size)?void 0:Ob[0])?Hb:4,height:null!=(sc=null==(cc=Ta.size)?void 0:cc[1])?sc:4,maxX:(null!=(kc=null==(Ub=Ta.point)?void 0:Ub[0])?kc:fa[0])+(null!=(Mc=null==(ec=Ta.size)?void 0:ec[0])?Mc:4),maxY:(null!=(vd=null==
(Oc=Ta.point)?void 0:Oc[1])?vd:fa[1])+(null!=(We=null==(Kd=Ta.size)?void 0:Kd[1])?We:4)}})),sa=d.map(Ta=>lf(he({},Ta),{id:gk(),point:[fa[0]+Ta.point[0]-la.minX,fa[1]+Ta.point[1]-la.minY]}));sa.forEach(Ta=>{var Xa;Ta.children&&0<(null==(Xa=Ta.children)?void 0:Xa.length)&&(Ta.children=Ta.children.map(eb=>{var ib;return null==(ib=sa[d.findIndex(Db=>Db.id===eb)])?void 0:ib.id}).filter(pc))});const Ha=[];sa.flatMap(Ta=>{var Xa;return Object.values(null!=(Xa=Ta.handles)?Xa:{})}).forEach(Ta=>{if(Ta.bindingId){var Xa=
H[Ta.bindingId];if(Xa){var eb=d.findIndex(Db=>Db.id===Xa.fromId);const ib=d.findIndex(Db=>Db.id===Xa.toId);Xa&&-1!==eb&&-1!==ib?(eb=lf(he({},Xa),{id:gk(),fromId:sa[eb].id,toId:sa[ib].id}),Ha.push(eb),Ta.bindingId=eb.id):Ta.bindingId=void 0}else console.warn("binding not found",Ta.bindingId)}});k=k.filter(Ta=>sa.some(Xa=>Xa.assetId===Ta.id));return{shapes:sa,assets:k,bindings:Ha}});fb(this,"getClonedShapesFromTldrString",(d,k)=>{try{{var H;const Xa=null==(H=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?
void 0:H[1];if(Xa){try{var fa=JSON.parse(Xa)}catch(eb){fa=null}var la=fa}else la=void 0}d=la;if(!d)return null;const {shapes:sa,bindings:Ha,assets:Ta}=d;return this.cloneShapes({shapes:sa,bindings:Ha,assets:Ta,point:k})}catch(sa){console.log(sa)}return null});fb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});fb(this,"addClonedShapes",d=>{const {shapes:k,assets:H,bindings:fa}=d;0<H.length&&this.app.createAssets(H);0<k.length&&this.app.createShapes(k);
this.app.currentPage.updateBindings(Object.fromEntries(fa.map(la=>[la.id,la])));this.app.selectedTool.transition("idle");return this});fb(this,"addClonedShapesFromTldrString",(d,k)=>{(d=this.getClonedShapesFromTldrString(d,k))&&this.addClonedShapes(d);return this});fb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var k=[...d.filter(H=>"group"===H.type),...d.map(H=>this.app.getParentGroup(H))].filter(pc);this.app.currentPage.removeShapes(...k);d=d.filter(H=>"group"!==
H.type);1<d.length&&(k=this.app.getShapeClass("group"),k=new k({id:gk(),type:k.id,parentId:this.app.currentPage.id,children:d.map(H=>H.id)}),this.app.currentPage.addShapes(k),this.app.setSelectedShapes([k]),this.app.bringForward(d));this.app.persist()}});fb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(H=>"group"===H.type),...d.map(H=>this.app.getParentGroup(H))].filter(pc);var k=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),
this.app.persist(),this.app.setSelectedShapes(k))}});fb(this,"convertShapes",(d,k=this.app.allSelectedShapesArray)=>{const H=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...k);k=k.map(fa=>new H(lf(he({},fa.serialized),{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...k);this.app.persist();this.app.setSelectedShapes(k)});fb(this,"setCollapsed",(d,k=this.app.allSelectedShapesArray)=>{k.forEach(H=>{"logseq-portal"===H.props.type&&H.setCollapsed(d)});this.app.persist()});this.app=
a}},Gt=class{constructor(){fb(this,"cursor","default");fb(this,"rotation",0);fb(this,"reset",()=>{this.cursor="default"});fb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});fb(this,"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});Jg(this)}};$d([Te],Gt.prototype,"cursor",2);$d([Te],Gt.prototype,"rotation",2);$d([Ig],Gt.prototype,"reset",2);$d([Ig],Gt.prototype,"setCursor",2);$d([Ig],Gt.prototype,"setRotation",2);var Ht=class{constructor(a){fb(this,
"app");fb(this,"stack",[]);fb(this,"isPaused",!0);fb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});fb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});fb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:d})});fb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});fb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});
fb(this,"instantiateShape",d=>new (this.app.getShapeClass(d.type))(d));fb(this,"deserialize",d=>{fd(()=>{var k,{pages:H}=d;const fa=this.isPaused;this.pause();const la=[...this.app.selectedIds];try{const sa=new Map(this.app.pages),Ha=[];for(const Ta of H){const Xa=sa.get(Ta.id);if(void 0!==Xa){const eb=new Map(Xa.shapes.map(ib=>[ib.props.id,ib]));H=[];for(const ib of Ta.shapes){const Db=eb.get(ib.id);void 0!==Db?(Db.nonce!==ib.nonce&&(Db.update(ib,!0),Db.nonce=ib.nonce,Db.setLastSerialized(ib)),eb.delete(ib.id)):
H.push(this.instantiateShape(ib))}0<eb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&Xa.removeShapes(...eb.values());0<H.length&&Xa.addShapes(...H);sa.delete(Ta.id);Xa.updateBindings(Ta.bindings);Xa.nonce=null!=(k=Ta.nonce)?k:0}else{const {id:eb,name:ib,shapes:Db,bindings:Ob,nonce:Hb}=Ta;Ha.push(new mm(this.app,{id:eb,name:ib,nonce:Hb,bindings:Ob,shapes:Db.map(cc=>this.instantiateShape(cc))}))}}0<Ha.length&&this.app.addPages(Ha);0<sa.size&&this.app.removePages(Array.from(sa.values()));
this.app.setSelectedShapes(la).setErasingShapes([])}catch(sa){console.warn(sa)}fa||this.resume()})});this.app=a;Jg(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};$d([Te],Ht.prototype,"stack",2);$d([Ig],Ht.prototype,"persist",2);$d([Ig],Ht.prototype,"undo",2);$d([Ig],Ht.prototype,"redo",2);$d([Ig],Ht.prototype,"deserialize",2);var Hs=class{constructor(){fb(this,"mode","light");fb(this,"showGrid",!0);fb(this,"snapToGrid",!0);fb(this,"scaleLevel","md");fb(this,"color",
"");Jg(this)}update(a){Object.assign(this,a)}};$d([Te],Hs.prototype,"mode",2);$d([Te],Hs.prototype,"showGrid",2);$d([Te],Hs.prototype,"snapToGrid",2);$d([Te],Hs.prototype,"scaleLevel",2);$d([Te],Hs.prototype,"color",2);$d([Ig],Hs.prototype,"update",1);var Dh=class extends Dt{constructor(a,d,k,H){var fa,la;super();fb(this,"uuid",gk());fb(this,"readOnly");fb(this,"api");fb(this,"inputs",new Nk);fb(this,"cursors",new Gt);fb(this,"viewport",new bp);fb(this,"settings",new Hs);fb(this,"Tools",[]);fb(this,
"history",new Ht(this));fb(this,"persist",this.history.persist);fb(this,"undo",this.history.undo);fb(this,"redo",this.history.redo);fb(this,"saving",!1);fb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});fb(this,"load",()=>{this.notify("load",null);return this});fb(this,"save",()=>{this.notify("save",null);return this});fb(this,"pages",new Map([["page",new mm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));
fb(this,"getPageById",sa=>{const Ha=this.pages.get(sa);if(!Ha)throw Error(`Could not find a page named ${sa}.`);return Ha});fb(this,"getShapeById",(sa,Ha=this.currentPage.id)=>{var Ta;return null==(Ta=this.getPageById(Ha))?void 0:Ta.shapesById[sa]});fb(this,"createShapes",sa=>{if(this.readOnly)return this;(sa=this.currentPage.addShapes(...sa))&&this.notify("create-shapes",sa);this.persist();return this});fb(this,"updateShapes",sa=>{if(this.readOnly)return this;sa.forEach(Ha=>{const Ta=this.getShapeById(Ha.id);
null==Ta?void 0:Ta.update(Ha);Ha.type!==(null==Ta?void 0:Ta.type)&&this.api.convertShapes(Ha.type,[Ta])});this.persist();return this});fb(this,"deleteShapes",sa=>{if(0===sa.length||this.readOnly)return this;sa=sa.map(eb=>"string"===typeof eb?this.getShapeById(eb):eb).filter(pc).filter(eb=>!eb.props.isLocked);const Ha=this.shapesInGroups(sa);sa.forEach(eb=>{this.getParentGroup(eb)&&Ha.push(eb)});let Ta=new Set([...sa,...Ha].map(eb=>eb.id));Ha.forEach(eb=>{var ib;const Db=this.getParentGroup(eb);if(Db){const Ob=
null==(ib=Db.props.children)?void 0:ib.filter(Hb=>Hb!==eb.id);!Ob||1>=(null==Ob?void 0:Ob.length)?Ta.add(Db.id):Db.update({children:Ob})}});const Xa=(eb,ib)=>{var Db;[...Ta].includes(eb)&&"line"===(null==(Db=this.getShapeById(ib))?void 0:Db.type)&&Ta.add(ib)};this.currentPage.shapes.filter(eb=>!eb.props.isLocked).flatMap(eb=>{var ib;return Object.values(null!=(ib=eb.props.handles)?ib:{})}).flatMap(eb=>eb.bindingId).filter(pc).map(eb=>{var ib,Db;const Ob=null==(ib=this.currentPage.bindings[eb])?void 0:
ib.toId;eb=null==(Db=this.currentPage.bindings[eb])?void 0:Db.fromId;Ob&&eb&&(Xa(Ob,eb),Xa(eb,Ob))});sa=[...Ta].map(eb=>this.getShapeById(eb));this.setSelectedShapes(this.selectedShapesArray.filter(eb=>!Ta.has(eb.id)));(sa=this.currentPage.removeShapes(...sa))&&this.notify("delete-shapes",sa);this.persist();return this});fb(this,"bringForward",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.bringForward(sa);return this});fb(this,"sendBackward",(sa=this.selectedShapesArray)=>
{0<sa.length&&!this.readOnly&&this.currentPage.sendBackward(sa);return this});fb(this,"sendToBack",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.sendToBack(sa);return this});fb(this,"bringToFront",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.bringToFront(sa);return this});fb(this,"flipHorizontal",(sa=this.selectedShapesArray)=>{this.currentPage.flip(sa,"horizontal");return this});fb(this,"flipVertical",(sa=this.selectedShapesArray)=>
{this.currentPage.flip(sa,"vertical");return this});fb(this,"align",(sa,Ha=this.selectedShapesArray)=>{if(2>Ha.length||this.readOnly)return this;const Ta=Ha.map(Ob=>{const Hb=Ob.getBounds();return{id:Ob.id,point:[Hb.minX,Hb.minY],bounds:Hb}}),Xa=Bf.getCommonBounds(Ta.map(({bounds:Ob})=>Ob)),eb=Xa.minX+Xa.width/2,ib=Xa.minY+Xa.height/2,Db=Object.fromEntries(Ta.map(({id:Ob,point:Hb,bounds:cc})=>[Ob,{prev:Hb,next:{top:[Hb[0],Xa.minY],centerVertical:[Hb[0],ib-cc.height/2],bottom:[Hb[0],Xa.maxY-cc.height],
left:[Xa.minX,Hb[1]],centerHorizontal:[eb-cc.width/2,Hb[1]],right:[Xa.maxX-cc.width,Hb[1]]}[sa]}]));Ha.forEach(Ob=>{Db[Ob.id]&&Ob.update({point:Db[Ob.id].next})});this.persist();return this});fb(this,"distribute",(sa,Ha=this.selectedShapesArray)=>{if(2>Ha.length||this.readOnly)return this;const Ta=Object.fromEntries(Bf.getDistributions(Ha,sa).map(Xa=>[Xa.id,Xa]));Ha.forEach(Xa=>{Ta[Xa.id]&&Xa.update({point:Ta[Xa.id].next})});this.persist();return this});fb(this,"packIntoRectangle",(sa=this.selectedShapesArray)=>
{if(2>sa.length||this.readOnly)return this;const Ha=Object.fromEntries(Bf.getPackedDistributions(sa).map(Ta=>[Ta.id,Ta]));sa.forEach(Ta=>{Ha[Ta.id]&&Ta.update({point:Ha[Ta.id].next})});this.persist();return this});fb(this,"setLocked",sa=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(Ha=>{Ha.update({isLocked:sa})});this.persist();return this});fb(this,"assets",{});fb(this,"removeUnusedAssets",()=>{const sa=this.getCleanUpAssets();Object.keys(this.assets).forEach(Ha=>
{sa.some(Ta=>Ta.id===Ha)||delete this.assets[Ha]});this.persist();return this});fb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const Ha=this.allSelectedShapesArray;var sa=JSON.stringify({shapes:Ha.map(Xa=>Xa.serialized),assets:this.getCleanUpAssets().filter(Xa=>Ha.some(eb=>eb.props.assetId===Xa.id)),bindings:zc(this.currentPage.bindings)});sa=encodeURIComponent(`<whiteboard-tldr>${sa}</whiteboard-tldr>`);const Ta=this.selectedShapesArray.map(Xa=>`((${Xa.props.id}))`).join(" ");
this.notify("copy",{text:Ta,html:sa})}});fb(this,"paste",(sa,Ha)=>{var Ta;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!Ha,dataTransfer:null!=(Ta=null==sa?void 0:sa.clipboardData)?Ta:void 0})});fb(this,"cut",()=>{this.copy();this.api.deleteShapes()});fb(this,"drop",(sa,Ha)=>{this.notify("drop",{dataTransfer:sa,point:Ha?this.viewport.getPagePoint(Ha):Bf.getBoundsCenter(this.viewport.currentView)})});fb(this,"selectTool",(sa,Ha={})=>{this.readOnly&&
!["select","move"].includes(sa)||this.transition(sa,Ha)});fb(this,"editingId");fb(this,"setEditingShape",sa=>{this.editingId="string"===typeof sa?sa:null==sa?void 0:sa.id;return this});fb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});fb(this,"hoveredId");fb(this,"setHoveredShape",sa=>{this.hoveredId="string"===typeof sa?sa:null==sa?void 0:sa.id;return this});fb(this,"selectedIds",new Set);fb(this,"selectedShapes",new Set);fb(this,"selectionRotation",
0);fb(this,"setSelectedShapes",sa=>{var Ha;const {selectedIds:Ta,selectedShapes:Xa}=this;Ta.clear();Xa.clear();sa[0]&&"string"===typeof sa[0]?sa.forEach(ib=>Ta.add(ib)):sa.forEach(ib=>Ta.add(ib.id));const eb=this.currentPage.shapes.filter(ib=>Ta.has(ib.id));eb.forEach(ib=>Xa.add(ib));this.selectionRotation=1===eb.length?null!=(Ha=eb[0].props.rotation)?Ha:0:0;0===sa.length&&this.setEditingShape();return this});fb(this,"erasingIds",new Set);fb(this,"erasingShapes",new Set);fb(this,"setErasingShapes",
sa=>{const {erasingIds:Ha,erasingShapes:Ta}=this;Ha.clear();Ta.clear();sa[0]&&"string"===typeof sa[0]?sa.forEach(Xa=>Ha.add(Xa)):sa.forEach(Xa=>Ha.add(Xa.id));this.currentPage.shapes.filter(Xa=>Ha.has(Xa.id)).forEach(Xa=>Ta.add(Xa));return this});fb(this,"bindingIds");fb(this,"setBindingShapes",sa=>{this.bindingIds=sa;return this});fb(this,"clearBindingShape",()=>this.setBindingShapes());fb(this,"createNewLineBinding",(sa,Ha)=>{sa="string"===typeof sa?this.getShapeById(sa):sa;Ha="string"===typeof Ha?
this.getShapeById(Ha):Ha;if((null==sa?0:sa.canBind)&&(null==Ha?0:Ha.canBind)&&(Ha=Lc(sa,Ha))){const [Ta,Xa]=Ha;this.createShapes([Ta]);this.currentPage.updateBindings(Object.fromEntries(Xa.map(eb=>[eb.id,eb])));this.persist();return!0}return!1});fb(this,"brush");fb(this,"setBrush",sa=>{this.brush=sa;return this});fb(this,"setCamera",(sa,Ha)=>{this.viewport.update({point:sa,zoom:Ha});return this});fb(this,"getPagePoint",sa=>{const {camera:Ha}=this.viewport;return xd.sub(xd.div(sa,Ha.zoom),Ha.point)});
fb(this,"getScreenPoint",sa=>{const {camera:Ha}=this.viewport;return xd.mul(xd.add(sa,Ha.point),Ha.zoom)});fb(this,"Shapes",new Map);fb(this,"registerShapes",sa=>{sa.forEach(Ha=>{if("group"===Ha.id){const Ta=this;Ha.prototype.getShapes=function(){var Xa,eb;return null!=(eb=null==(Xa=this.props.children)?void 0:Xa.map(ib=>Ta.getShapeById(ib)).filter(Boolean))?eb:[]}}return this.Shapes.set(Ha.id,Ha)})});fb(this,"deregisterShapes",sa=>{sa.forEach(Ha=>this.Shapes.delete(Ha.id))});fb(this,"getShapeClass",
sa=>{if(!sa)throw Error("No shape type provided.");const Ha=this.Shapes.get(sa);if(!Ha)throw Error(`Could not find shape class for ${sa}`);return Ha});fb(this,"wrapUpdate",sa=>{fd(()=>{const Ha=!this.history.isPaused;Ha&&this.history.pause();sa();Ha&&(this.history.resume(),this.persist())})});fb(this,"subscriptions",new Set([]));fb(this,"subscribe",(sa,Ha)=>{if(void 0===Ha)throw Error("Callback is required.");const Ta={event:sa,callback:Ha};this.subscriptions.add(Ta);return()=>this.unsubscribe(Ta)});
fb(this,"unsubscribe",sa=>{this.subscriptions.delete(sa);return this});fb(this,"notify",(sa,Ha)=>{this.subscriptions.forEach(Ta=>{Ta.event===sa&&Ta.callback(this,Ha)});return this});fb(this,"onTransition",()=>{});fb(this,"onPointerDown",(sa,Ha)=>{if(!this.editingShape&&1===Ha.button&&!this.isIn("move"))this.temporaryTransitionToMove(Ha);else if(2===Ha.button&&!this.editingShape)Ha.preventDefault(),this.transition("select");else if("clientX"in Ha)this.inputs.onPointerDown([...this.viewport.getPagePoint([Ha.clientX,
Ha.clientY]),Ha.pressure],Ha)});fb(this,"onPointerUp",(sa,Ha)=>{if(!this.editingShape&&1===Ha.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ha.stopPropagation(),Ha.preventDefault();else if("clientX"in Ha)this.inputs.onPointerUp([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});fb(this,"onPointerMove",(sa,Ha)=>{if("clientX"in Ha)this.inputs.onPointerMove([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});fb(this,"onKeyDown",
(sa,Ha)=>{if(this.editingShape||" "!==Ha.key||this.isIn("move"))this.inputs.onKeyDown(Ha);else this.temporaryTransitionToMove(Ha)});fb(this,"onKeyUp",(sa,Ha)=>{if(!this.editingShape&&" "===Ha.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ha.stopPropagation(),Ha.preventDefault();else this.inputs.onKeyUp(Ha)});fb(this,"onPinchStart",(sa,Ha)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(sa.point),.5],Ha)});fb(this,"onPinch",(sa,Ha)=>{this.inputs.onPinch([...this.viewport.getPagePoint(sa.point),
.5],Ha)});fb(this,"onPinchEnd",(sa,Ha)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(sa.point),.5],Ha)});this._states=[Et,Ft];this.readOnly=H;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),H=null!=(fa=this.initial)?fa:this.states[0].id,fa=this.children.get(H))&&(this.currentState=fa,null==(la=this.currentState)?void 0:la._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);k&&this.registerTools(k);this.history.resume();a&&this.history.deserialize(a);
this.api=new yE(this);Jg(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>
d.props.children).filter(pc).map(d=>this.getShapeById(d)).filter(pc)}getParentGroup(a){return this.shapes.find(d=>{var k;return null==(k=d.props.children)?void 0:k.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):a.forEach(d=>delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(k=>{k.props.assetId&&this.assets[k.props.assetId]&&
a.add(this.assets[k.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=this;return a?d.shapes.find(k=>k.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(k=>k.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=
this;return a?this.shapes.find(d=>{var k;return"group"===d.type&&(null==(k=d.props.children)?void 0:k.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;
const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(H=>{var fa;return Object.values(null!=(fa=H.props.handles)?fa:{})}).flatMap(H=>H.bindingId).filter(pc).flatMap(H=>{var fa,la;return[null==(fa=this.currentPage.bindings[H])?void 0:fa.fromId,null==(la=this.currentPage.bindings[H])?void 0:la.toId]}).filter(pc):[],k=[...(null!=(a=this.bindingIds)?a:[]),...d];return k?this.currentPage.shapes.filter(H=>null==k?void 0:k.includes(H.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;
return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:d,viewport:{currentView:k}}=this;return d.shapes.filter(H=>!H.canUnmount||a.has(H)||Bf.boundsContain(k,H.rotatedBounds)||Bf.boundsCollide(k,H.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!Bf.boundsContain(d,a)&&!Bf.boundsCollide(d,a)){var k=Bf.getBoundsCenter(a);return xd.clampV([(k[0]-
d.minX-d.width/2)/d.width,(k[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?lf(he({},a[0].bounds),{rotation:a[0].props.rotation}):Bf.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}temporaryTransitionToMove(a){a.stopPropagation();
a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};fb(Dh,"id","app");fb(Dh,"initial","select");$d([Jf],Dh.prototype,"serialized",1);$d([Te],Dh.prototype,"pages",2);$d([Jf],Dh.prototype,"currentPageId",1);$d([Jf],Dh.prototype,"currentPage",1);$d([Ig],Dh.prototype,"addPages",1);$d([Ig],Dh.prototype,"removePages",1);$d([Ig],Dh.prototype,"createShapes",2);$d([Ig],Dh.prototype,"updateShapes",2);$d([Ig],Dh.prototype,"deleteShapes",2);$d([Te],
Dh.prototype,"assets",2);$d([Ig],Dh.prototype,"addAssets",1);$d([Ig],Dh.prototype,"removeAssets",1);$d([Ig],Dh.prototype,"removeUnusedAssets",2);$d([Jf],Dh.prototype,"selectedTool",1);$d([Te],Dh.prototype,"editingId",2);$d([Jf],Dh.prototype,"editingShape",1);$d([Ig],Dh.prototype,"setEditingShape",2);$d([Te],Dh.prototype,"hoveredId",2);$d([Jf],Dh.prototype,"hoveredShape",1);$d([Jf],Dh.prototype,"hoveredGroup",1);$d([Ig],Dh.prototype,"setHoveredShape",2);$d([Te],Dh.prototype,"selectedIds",2);$d([Te],
Dh.prototype,"selectedShapes",2);$d([Te],Dh.prototype,"selectionRotation",2);$d([Jf],Dh.prototype,"selectedShapesArray",1);$d([Jf],Dh.prototype,"allSelectedShapes",1);$d([Jf],Dh.prototype,"allSelectedShapesArray",1);$d([Ig],Dh.prototype,"setSelectedShapes",2);$d([Ig],Dh.prototype,"setSelectionRotation",1);$d([Te],Dh.prototype,"erasingIds",2);$d([Te],Dh.prototype,"erasingShapes",2);$d([Jf],Dh.prototype,"erasingShapesArray",1);$d([Ig],Dh.prototype,"setErasingShapes",2);$d([Te],Dh.prototype,"bindingIds",
2);$d([Jf],Dh.prototype,"bindingShapes",1);$d([Ig],Dh.prototype,"setBindingShapes",2);$d([Ig],Dh.prototype,"createNewLineBinding",2);$d([Te],Dh.prototype,"brush",2);$d([Ig],Dh.prototype,"setBrush",2);$d([Ig],Dh.prototype,"setCamera",2);$d([Jf],Dh.prototype,"currentGrid",1);$d([Jf],Dh.prototype,"shapes",1);$d([Jf],Dh.prototype,"shapesInViewport",1);$d([Jf],Dh.prototype,"selectionDirectionHint",1);$d([Jf],Dh.prototype,"selectionBounds",1);$d([Jf],Dh.prototype,"showSelection",1);$d([Jf],Dh.prototype,
"showSelectionDetail",1);$d([Jf],Dh.prototype,"showSelectionRotation",1);$d([Jf],Dh.prototype,"showContextBar",1);$d([Jf],Dh.prototype,"showRotateHandles",1);$d([Jf],Dh.prototype,"showResizeHandles",1);var zE=Function.prototype.toString,Dx=Object.create,AE=Object.prototype.toString,BE=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,k){this._keys.push(d);
this._values.push(k)};return a}(),CE="undefined"!==typeof WeakMap?be:Vc,DE="g"===/test/g.flags?Ze:Ue,EE="undefined"!==typeof Symbol?Pe:uf,FE=Object.defineProperty,GE=Object.getOwnPropertyDescriptor,xA=Object.getOwnPropertyNames,Ex=Object.getOwnPropertySymbols,yA=Object.prototype,zA=yA.hasOwnProperty,HE=yA.propertyIsEnumerable,AA="function"===typeof Ex,IE=AA?lg:xA,JE=Array.isArray,Fx=Object.assign,KE=Object.getPrototypeOf,BA={array:function(a,d){var k=new d.Constructor;d.cache.set(a,k);for(var H=0,
fa=a.length;H<fa;++H)k[H]=d.copier(a[H],d);return k},arrayBuffer:function(a,d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,d){return new d.Constructor(a.getTime())},error:ih,map:Lg,object:AA?Og:gg,regExp:function(a,d){d=new d.Constructor(a.source,DE(a));d.lastIndex=a.lastIndex;return d},set:Ci},LE=Fx({},BA,{array:function(a,d){var k=new d.Constructor;d.cache.set(a,k);return eg(a,k,d)},map:function(a,
d){return eg(a,Lg(a,d),d)},object:function(a,d){var k=Id(d.prototype);d.cache.set(a,k);return eg(a,k,d)},set:function(a,d){return eg(a,Ci(a,d),d)}});Ki(Fx({},LE,{}));var ME=Ki({}),NE=yf(kt()),OE=yf(or()),Is=ME,Bo=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const k=a.ownerDocument,H=k.activeElement;H!==a&&a.focus();k.execCommand("insertText",
!1,d)||Bo.insertTextFirefox(a,d);H===k.body?a.blur():H instanceof HTMLElement&&H!==a&&H.focus()}static set(a,d){a.select();Bo.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:k}=a;return a.value.slice(d?d:void 0,k?k:void 0)}static wrapSelection(a,d,k){const {selectionStart:H,selectionEnd:fa}=a,la=Bo.getSelection(a);Bo.insert(a,d+la+(null!=k?k:d));a.selectionStart=(H||0)+d.length;a.selectionEnd=(fa||0)+d.length}static replace(a,d,k){let H=0;a.value.replace(d,(...fa)=>{const la=
H+fa[fa.length-2],sa=fa[0].length;a.selectionStart=la;a.selectionEnd=la+sa;fa="string"===typeof k?k:k(...fa);Bo.insert(a,fa);a.selectionStart=la;H+=fa.length-sa;return fa})}static findLineEnd(a,d){const k=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(k)?d:k+1}static indent(a){var d;const {selectionStart:k,selectionEnd:H,value:fa}=a;var la=fa.slice(k,H);if((la=null==(d=/\n/g.exec(la))?void 0:d.length)&&0<la){d=fa.lastIndexOf("\n",k-1)+1;var sa=a.value.slice(d,H-1);la=sa.replace(/^|\n/g,`$&${Bo.INDENT}`);
sa=la.length-sa.length;a.setSelectionRange(d,H-1);Bo.insert(a,la);a.setSelectionRange(k+1,H+sa)}else Bo.insert(a,Bo.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:k,value:H}=a;var fa=H.lastIndexOf("\n",d-1)+1;const la=Bo.findLineEnd(H,k);var sa=a.value.slice(fa,la);const Ha=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-Ha.length;a.setSelectionRange(fa,la);Bo.insert(a,Ha);fa=(fa=/\t| {1,2}/.exec(H.slice(fa,d)))?fa[0].length:0;a.setSelectionRange(d-fa,Math.max(d-fa,k-sa))}static normalizeText(a){return a.replace(Bo.fixNewLines,
"\n")}},It=Bo;fb(It,"fixNewLines",/\r?\n|\r/g);fb(It,"INDENT","  ");var Dr;"undefined"!==typeof window&&(Dr=Xk());var Gx=new Map,CA=xb()?"⌘":"ctrl",PE=class extends Dh{},DA=yf(da(22)),QE=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var EA=yf(da(22)),Hx={},Ku=yf(da(22)),RE=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},
Ix=yf(da(22)),Jx=new Map,SE={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},TE=((a,...d)=>a.reduce((k,H,fa)=>k+H+(fa<d.length?d[fa]:""),
""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,FA=yf(da(22)),GA=yf(da(22)),Kx={},Ok={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},HA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},UE=["enter","leave"],VE=["gotpointercapture","lostpointercapture"],
IA=class{constructor(a,d,k){this.ctrl=a;this.args=d;this.key=k;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:k,args:H}=this;d[k]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=H;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,k=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=k.from?Cg(k.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:k,shared:H}=this;d.args=this.args;var fa=0;if(a){d.event=a;k.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;H.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;H.locked=!!document.pointerLockElement;fa=Object;var la=fa.assign,sa={};"buttons"in a&&(sa.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:Mc,altKey:Oc,metaKey:vd,ctrlKey:Kd}=a;Object.assign(sa,{shiftKey:Mc,altKey:Oc,metaKey:vd,ctrlKey:Kd})}la.call(fa,H,sa);H.down=H.pressed=1===H.buttons%2||0<H.touches;fa=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(la=d._delta.map(Math.abs),Ok.addTo(d._distance,la));this.axisIntent&&
this.axisIntent(a);const [Ha,Ta]=d._movement,[Xa,eb]=k.threshold,{_step:ib,values:Db}=d;k.hasCustomTransform?(!1===ib[0]&&(ib[0]=Math.abs(Ha)>=Xa&&Db[0]),!1===ib[1]&&(ib[1]=Math.abs(Ta)>=eb&&Db[1])):(!1===ib[0]&&(ib[0]=Math.abs(Ha)>=Xa&&Math.sign(Ha)*Xa),!1===ib[1]&&(ib[1]=Math.abs(Ta)>=eb&&Math.sign(Ta)*eb));d.intentional=!1!==ib[0]||!1!==ib[1];if(d.intentional){la=[0,0];if(k.hasCustomTransform){const [Mc,Oc]=Db;la[0]=!1!==ib[0]?Mc-ib[0]:0;la[1]=!1!==ib[1]?Oc-ib[1]:0}else la[0]=!1!==ib[0]?Ha-ib[0]:
0,la[1]=!1!==ib[1]?Ta-ib[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(la);sa=d.offset;var Ob=d._active&&!d._blocked||d.active;Ob&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=H[this.ingKey]=d._active,a&&(d.first&&("bounds"in k&&(d._bounds=Cg(k.bounds,d)),this.setup&&this.setup()),d.movement=la,this.computeOffset()));var [Hb,cc]=d.offset,[[sc,Ub],[kc,ec]]=d._bounds;d.overflow=[Hb<sc?-1:Hb>Ub?1:0,cc<kc?-1:cc>ec?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?
d._movement[0]:d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=hg(d._bounds,d.offset,d._active?k.rubberband||[0,0]:[0,0]);d.delta=Ok.sub(d.offset,sa);this.computeMovement();Ob&&(!d.last||32<fa)&&(d.delta=Ok.sub(d.offset,sa),a=d.delta.map(Math.abs),Ok.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<fa&&(d.velocity=[a[0]/fa,a[1]/fa]))}}emit(){const a=this.state;var d=
this.shared;const k=this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||k.triggerAllEvents)d=this.handler(xf(xf(xf({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Lu=class extends IA{constructor(...a){super(...a);sg(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ok.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=Ok.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,k=this.config;!d.axis&&a&&(a="object"===typeof k.axisThreshold?k.axisThreshold[Pg(a)]:k.axisThreshold,d.axis=jj(d._movement,a));d._blocked=(k.lockDirection||!!k.axis)&&!d.axis||!!k.axis&&k.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},WE=a=>a,JA={enabled(a=!0){return a},
eventOptions(a,d,k){return xf(xf({},k.shared.eventOptions),a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return Ok.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return Ok.toVector(a)},transform(a,d,k){a=a||k.shared.transform;this.hasCustomTransform=!!a;return a||WE},threshold(a){return Ok.toVector(a,0)}},Js=xf(xf({},JA),{},{axis(a,d,{axis:k}){this.lockDirection="lock"===k;if(!this.lockDirection)return k},
axisThreshold(a=0){return a},bounds(a={}){if("function"===typeof a)return la=>Js.bounds(a(la));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:k=Infinity,top:H=-Infinity,bottom:fa=Infinity}=a;return[[d,k],[H,fa]]}}),KA={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},XE=class extends Lu{constructor(...a){super(...a);sg(this,"ingKey","dragging")}reset(){super.reset();
const a=this.state;a._pointerId=void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),k=a.currentTarget.getBoundingClientRect();a._bounds=Js.bounds({left:d.left-k.left+a.offset[0],right:d.right-k.right+a.offset[0],top:d.top-k.top+a.offset[1],bottom:d.bottom-k.bottom+a.offset[1]})}}cancel(){const a=
this.state;a.canceled||(a.canceled=!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,k=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var H=this.ctrl.setEventIds(a);
d.pointerCapture&&a.target.setPointerCapture(a.pointerId);H&&1<H.size&&k._pointerActive||(this.start(a),this.setupPointer(a),k._pointerId=rh(a),k._pointerActive=!0,this.computeValues(Rf(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==Pg(a)?(k._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);
this.emit()}pointerMove(a){const d=this.state,k=this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var H=rh(a);if(void 0===d._pointerId||H===d._pointerId)H=Rf(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=Ok.sub(H,d._values),this.computeValues(H)),Ok.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):k.preventScrollAxis&&!d._preventScroll?
d.axis&&(d.axis===k.preventScrollAxis||"xy"===k.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(sa){}const d=this.state,k=this.config;if(d._active&&d._pointerActive){var H=rh(a);if(void 0===d._pointerId||H===d._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(a);var [fa,la]=d._distance;d.tap=fa<=k.tapsThreshold&&la<=k.tapsThreshold;if(d.tap&&k.filterTaps)d._force=!0;else{const [sa,Ha]=d.direction,[Ta,Xa]=d.velocity,[eb,ib]=d.movement,[Db,Ob]=k.swipe.velocity,[Hb,cc]=k.swipe.distance;d.elapsedTime<k.swipe.duration&&(Math.abs(Ta)>Db&&Math.abs(eb)>Hb&&(d.swipe[0]=sa),Math.abs(Xa)>Ob&&Math.abs(ib)>cc&&(d.swipe[1]=Ha))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,
k=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,k,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,k,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,k,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&
a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=KA[a.key];if(d){const k=this.state,H=a.shiftKey?10:a.altKey?.1:1;this.start(a);k._delta=d(H);k._keyboardActive=!0;Ok.addTo(k._movement,k._delta);this.compute(a);this.emit()}}keyUp(a){a.key in KA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Ks="undefined"!==typeof window&&window.document&&window.document.createElement;try{var LA="constructor"in GestureEvent}catch(a){LA=!1}var YE=
LA,Mu=Ks&&"ontouchstart"in window||Ks&&1<window.navigator.maxTouchPoints,MA=Ks&&"ontouchstart"in window||Ks&&1<window.navigator.maxTouchPoints,NA=Ks&&"onpointerdown"in window,ZE=Ks&&"exitPointerLock"in window.document,OA={mouse:0,touch:0,pen:8},$E=xf(xf({},Js),{},{device(a,d,{pointer:{touch:k=!1,lock:H=!1,mouse:fa=!1}={}}){this.pointerLock=H&&ZE;return Mu&&k?"touch":this.pointerLock?"mouse":NA&&!fa?"pointer":Mu?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:k}){this.preventScrollDelay="number"===
typeof k?k:k||void 0===k&&a?250:void 0;if(MA&&!1!==k)return a?a:void 0!==k?"y":void 0},pointerCapture(a,d,{pointer:{capture:k=!0,buttons:H=1,keys:fa=!0}={}}){this.pointerButtons=H;this.keys=fa;return!this.pointerLock&&"pointer"===this.device&&k},threshold(a,d,{filterTaps:k=!1,tapsThreshold:H=3,axis:fa}){a=Ok.toVector(a,k?H:fa?1:0);this.filterTaps=k;this.tapsThreshold=H;return a},swipe({velocity:a=.5,distance:d=50,duration:k=250}={}){return{velocity:this.transform(Ok.toVector(a)),distance:this.transform(Ok.toVector(d)),
duration:k}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;default:return a}},axisThreshold(a){return a?xf(xf({},OA),a):OA}}),aF=class extends IA{constructor(...a){super(...a);sg(this,"ingKey","pinching");sg(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:k}=
this.state;this.state.offset="wheel"===a?Ok.add(d,k):[(1+d[0])*k[0],d[1]+k[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,k]=a._movement;if(!a.axis){const H=30*Math.abs(d)-Math.abs(k);0>H?a.axis="angle":0<H&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=
!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);var d=this.state;const k=this.ctrl.touchIds;d._active&&d._touchIds.every(H=>k.has(H))||2>k.size||(this.start(a),d._touchIds=Array.from(k).slice(0,2),d=jf(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,k=d._pointerEvents,H=this.ctrl.pointerIds;d._active&&Array.from(k.keys()).every(fa=>H.has(fa))||
(2>k.size&&k.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=ff(...Array.from(k.values())),this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=jf(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=ff(...Array.from(d.values())),this.pinchMove(a,
d))}pinchMove(a,d){const k=this.state,H=d.angle-k._values[1];let fa=0;270<Math.abs(H)&&(fa+=Math.sign(H));this.computeValues([d.distance,d.angle-360*fa]);k.origin=d.origin;k.turns=fa;k._movement=[k._values[0]/k._initial[0]-1,k._values[1]-k._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);
try{a.target.releasePointerCapture(a.pointerId)}catch(k){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,
a.rotation]);d.origin=[a.clientX,a.clientY];var k=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=Ok.sub(d._movement,k);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();
const d=this.state;d._delta=[-sh(a)[1]/100*d.offset[0],0];Ok.addTo(d._movement,d._delta);Ql(d);this.state.origin=[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),
{passive:!1})}},bF=xf(xf({},JA),{},{device(a,d,{shared:k,pointer:{touch:H=!1}={}}){if(k.target&&!Mu&&YE)return"gesture";if(Mu&&H)return"touch";if(MA){if(NA)return"pointer";if(Mu)return"touch"}},bounds(a,d,{scaleBounds:k={},angleBounds:H={}}){const fa=sa=>{sa=Cg(k,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]},la=sa=>{sa=Cg(H,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]};return"function"!==typeof k&&"function"!==typeof H?[fa(),
la()]:sa=>[fa(sa),la(sa)]},threshold(a,d,k){this.lockDirection="lock"===k.axis;return Ok.toVector(a,this.lockDirection?[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),cF=class extends Lu{constructor(...a){super(...a);sg(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(Rf(a));
this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=Rf(a),k=this.state;k._delta=Ok.sub(d,k._values);Ok.addTo(k._movement,k._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},dF=xf(xf({},Js),{},{mouseOnly:(a=!0)=>a}),eF=class extends Lu{constructor(...a){super(...a);sg(this,
"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var k,H;const {scrollX:fa,scrollY:la,scrollLeft:sa,scrollTop:Ha}=a.currentTarget;var Ta=[null!==(k=null!==fa&&void 0!==fa?fa:sa)&&void 0!==k?k:0,null!==(H=null!==la&&void 0!==la?la:Ha)&&void 0!==H?H:0];d._delta=Ok.sub(Ta,d._values);Ok.addTo(d._movement,d._delta);this.computeValues(Ta);
this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll","",this.scroll.bind(this))}},fF=Js,gF=class extends Lu{constructor(...a){super(...a);sg(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=sh(a);Ok.addTo(d._movement,d._delta);Ql(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&
(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},hF=Js,iF=class extends Lu{constructor(...a){super(...a);sg(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(Rf(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var k=Rf(a);d._movement=d._delta=Ok.sub(k,d._values);this.computeValues(k);this.compute(a);
d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},jF=xf(xf({},Js),{},{mouseOnly:(a=!0)=>a}),Lx=new Map,Mx=new Map,kF={key:"drag",engine:XE,resolver:$E},lF={key:"hover",engine:iF,resolver:jF},mF={key:"move",engine:cF,resolver:dF},nF={key:"pinch",engine:aF,resolver:bF},oF={key:"scroll",engine:eF,resolver:fF},pF={key:"wheel",engine:gF,resolver:hF},Nx=yf(da(22)),qF={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=
!0){return a},window(a=Ks?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},rF=["target","eventOptions","window","enabled","transform"],PA=class{constructor(a,d){sg(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,k,H,fa){const la=this._listeners,sa=mi(d,k),Ha=xf(xf({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),fa);a.addEventListener(sa,H,Ha);const Ta=()=>{a.removeEventListener(sa,
H,Ha);la.delete(Ta)};la.add(Ta);return Ta}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},sF=class{constructor(){sg(this,"_timeouts",new Map)}add(a,d,k=140,...H){this.remove(a);this._timeouts.set(a,window.setTimeout(d,k,...H))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},tF=class{constructor(a){sg(this,"gestures",new Set);sg(this,"_targetEventStore",new PA(this));sg(this,"gestureEventStores",
{});sg(this,"gestureTimeoutStores",{});sg(this,"handlers",{});sg(this,"config",{});sg(this,"pointerIds",new Set);sg(this,"touchIds",new Set);sg(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&ij(this,"drag");a.wheel&&ij(this,"wheel");a.scroll&&ij(this,"scroll");a.move&&ij(this,"move");a.pinch&&ij(this,"pinch");a.hover&&ij(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(ef(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?
this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=d}applyConfig(a,d){this.config=Hj(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const k={};let H;if(d.target&&
(H=d.target(),!H))return;if(d.enabled){for(const fa of this.gestures){const la=this.config[fa],sa=QA(k,la.eventOptions,!!H);la.enabled&&(new (Lx.get(fa))(this,a,fa)).bind(sa)}d=QA(k,d.eventOptions,!!H);for(const fa in this.nativeHandlers)d(fa,"",la=>this.nativeHandlers[fa](xf(xf({},this.state.shared),{},{event:la,args:a})),void 0,!0)}for(const fa in k)k[fa]=di(...k[fa]);if(!H)return k;for(const fa in k){const {device:la,capture:sa,passive:Ha}=Df(fa);this._targetEventStore.add(H,la,"",k[fa],{capture:sa,
passive:Ha})}}},QA=(a,d,k)=>(H,fa,la,sa={},Ha=!1)=>{var Ta,Xa;const eb=null!==(Ta=sa.capture)&&void 0!==Ta?Ta:d.capture;sa=null!==(Xa=sa.passive)&&void 0!==Xa?Xa:d.passive;H=Ha?H:Gg(H,fa,eb);k&&sa&&(H+="Passive");a[H]=a[H]||[];a[H].push(la)},uF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,$v=yf(da(22)),Ox=yf(da(22)),RA=yf(da(22)),SA=yf(da(22)),vF=yf(da(22)),wF=yf(da(22)),xF=yf(da(22)),yF=yf(da(22)),zF={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",
move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>Jj('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>Jj("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>Jj("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>Jj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>Jj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>Jj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>Jj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>Jj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>Jj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>Jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>Jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>Jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>Jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>Jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},AF=yf(da(22));yf(da(22));var TA=da(22),UA=yf(da(22));if(!da(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!Jg)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var BF=da(31),Nu=yf(da(22)),VA="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,CF=1E4,DF=function(a){var d="function"===typeof Symbol&&Symbol.iterator,k=d&&a[d],H=0;if(k)return k.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&
H>=a.length&&(a=void 0);return{value:a&&a[H++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},WA=VA?xi(VA):ln(),EF=WA.addReactionToTrack,FF=WA.recordReactionAsCommitted,XA=function(a,d){var k="function"===typeof Symbol&&a[Symbol.iterator];if(!k)return a;a=k.call(a);var H,fa=[];try{for(;(void 0===d||0<d--)&&!(H=a.next()).done;)fa.push(H.value)}catch(sa){var la={error:sa}}finally{try{H&&!H.done&&(k=a["return"])&&k.call(a)}finally{if(la)throw la.error;
}}return fa},GF=function(){return function(){}}(),Jt=da(22),YA="function"===typeof Symbol&&Symbol.for,ZA=YA?Symbol.for("react.forward_ref"):"function"===typeof Jt.forwardRef&&(0,Jt.forwardRef)(function(a){return null}).$$typeof,$A=YA?Symbol.for("react.memo"):"function"===typeof Jt.memo&&(0,Jt.memo)(function(a){return null}).$$typeof,HF={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};uk.displayName="Observer";da(22);da(22);da(22);(function(a){a||=zn;Ic({reactionScheduler:a})})(BF.unstable_batchedUpdates);
var IF=yf(da(22)),Px=da(590),Co=IF.forwardRef(function(a,d){var {children:k,opacity:H,centered:fa,className:la=""}=a,sa=Mf(a,["children","opacity","centered","className"]);return(0,Px.jsx)(uk,{children:()=>(0,Px.jsx)("div",{ref:d,className:`tl-positioned-div ${la}`,style:H?{opacity:H}:void 0,draggable:!1,children:(0,Px.jsx)("div",lf(he({className:`tl-positioned-inner ${fa?"tl-centered":""}`},sa),{children:k}))})})}),JF=yf(da(22)),Qx=da(590),cp=JF.forwardRef(function(a,d){var {id:k,className:H="",
style:fa,children:la}=a,sa=Mf(a,["id","className","style","children"]);return(0,Qx.jsx)(uk,{children:()=>(0,Qx.jsx)("svg",{ref:d,style:fa,className:`tl-positioned-svg ${H}`,children:(0,Qx.jsx)("g",lf(he({id:k,className:"tl-centered-g"},sa),{children:la}))})})}),Ou=yf(da(22)),aB=yf(da(22)),aw=yf(da(22)),KF=da(590),Er=rf(function(a){var {id:d,bounds:k,zIndex:H,rotation:fa=0,className:la="",children:sa}=a;a=Mf(a,"id bounds zIndex rotation className children".split(" "));const Ha=aw.useRef(null);aw.useLayoutEffect(()=>
{Ha.current.style.transform=`translate(
        calc(${k.minX}px - var(--tl-padding)),
        calc(${k.minY}px - var(--tl-padding)))
        rotate(${fa+(k.rotation||0)}rad)`},[k.minX,k.minY,fa,k.rotation]);aw.useLayoutEffect(()=>{const Ta=Ha.current;Ta.style.width=`calc(${Math.floor(k.width)}px + (var(--tl-padding) * 2))`;Ta.style.height=`calc(${Math.floor(k.height)}px + (var(--tl-padding) * 2))`},[k.width,k.height]);aw.useLayoutEffect(()=>{const Ta=Ha.current;void 0!==H&&(Ta.style.zIndex=H.toString())},[H]);return(0,KF.jsx)("div",lf(he({id:d,ref:Ha,className:`tl-positioned ${la}`,"aria-label":"container"},a),{children:sa}))}),
LF=yf(da(22)),bB=da(590),MF=rf(function({shapes:a,hidden:d,bounds:k,rotation:H=0}){const {components:{ContextBar:fa},viewport:{bounds:la,camera:{point:[sa,Ha],zoom:Ta}}}=Cc(),Xa=LF.useRef(null);var eb=Bf.getRotatedBounds(k,H);eb=Bf.multiplyBounds(eb,Ta);ek(Xa,k,H,10005);if(!fa)throw Error("Expected a ContextBar component.");const ib=Bf.translateBounds(eb,[sa*Ta,Ha*Ta]);return(0,bB.jsx)("div",{ref:Xa,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,bB.jsx)(fa,{hidden:d,shapes:a,bounds:k,offsets:{left:ib.minX,right:la.width-ib.maxX,top:ib.minY,bottom:la.height-ib.maxY,width:ib.width,height:ib.height},scaledBounds:eb,rotation:H})})}),cB=yf(da(22)),NF=da(590),dB=rf(function({children:a}){const d=cB.useRef(null),{viewport:k}=Cc(),H=d.current,{zoom:fa,point:la}=k.camera;cB.useEffect(()=>{H&&(H.style.transform=`scale(${fa}) translate3d(${la[0]}px, ${la[1]}px, 0)`)},[fa,la,H]);return(0,NF.jsx)("div",{ref:d,className:"tl-absolute tl-layer",
children:a})}),bw=da(590),eB=rf(function({shape:a,isHovered:d=!1,isSelected:k=!1,isBinding:H=!1,isEditing:fa=!1,isLocked:la=!1,meta:sa}){const {bounds:Ha,props:{scale:Ta,rotation:Xa=0},ReactIndicator:eb}=a;return(0,bw.jsx)(Er,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:Ha,rotation:Xa,scale:Ta,zIndex:fa?1E3:1E4,children:(0,bw.jsx)(cp,{children:(0,bw.jsx)("g",{className:`tl-indicator-container ${k?"tl-selected":"tl-hovered"} ${la?"tl-locked":""}`,children:(0,bw.jsx)(eb,{isEditing:fa,
isBinding:H,isHovered:d,isLocked:la,isSelected:k,isErasing:!1,meta:sa})})})})}),fB=yf(da(22)),cw=da(590),OF=rf(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:k}},components:{QuickLinks:H}}=Cc();var fa=He();const la=Hl(d);if(!H)throw Error("Expected a QuickLinks component.");fa=50>a.height*k||!fa.selectedShapesArray.includes(d);return(0,cw.jsx)(Er,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,cw.jsx)(Co,{children:(0,cw.jsx)("span",lf(he({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},la),{onPointerDown:sa=>sa.stopPropagation(),children:(0,cw.jsx)(H,{className:"tl-backlinks-count "+(fa?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})}),dw=da(590),PF=rf(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:k}},components:{BacklinksCount:H}}=Cc();var fa=He();if(!H)throw Error("Expected a BacklinksCount component.");const la=sa=>sa.stopPropagation();
fa=50>a.height*k||!fa.selectedShapesArray.includes(d)||d.hideSelection;return(0,dw.jsx)(Er,{bounds:a,className:"tl-backlinks-count-container",children:(0,dw.jsx)(Co,{children:(0,dw.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:la,onWheelCapture:la,onKeyDown:la,title:"Shape Backlinks",children:(0,dw.jsx)(H,{className:"tl-backlinks-count "+(fa?"tl-backlinks-count-rounded":""),id:d.id,
shape:d})})})})}),QF=yf(da(22)),gB=da(590),RF=rf(function({bounds:a,hidden:d,shapes:k,rotation:H=0,detail:fa="size"}){const {components:{SelectionDetail:la},viewport:{camera:{zoom:sa}}}=Cc(),Ha=QF.useRef(null),Ta=Bf.multiplyBounds(a,sa);ek(Ha,a,H,10003);if(!la)throw Error("Expected a SelectionDetail component.");return(0,gB.jsx)("div",{ref:Ha,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,gB.jsx)(la,
{shapes:k,bounds:a,scaledBounds:Ta,zoom:sa,rotation:H,detail:fa})})}),hB=da(590),SF=rf(function({shape:a,isHovered:d=!1,isSelected:k=!1,isBinding:H=!1,isErasing:fa=!1,isEditing:la=!1,onEditingEnd:sa,asset:Ha,meta:Ta,zIndex:Xa}){const {bounds:eb,props:{rotation:ib,scale:Db},ReactComponent:Ob}=a,Hb=He(),cc=Hl(a);var sc=Hb.getParentGroup(a);sc=Hb.selectedIds.has(null==sc?void 0:sc.id);return(0,hB.jsx)(Er,{"data-shape-id":a.id,"data-html2canvas-ignore":!k&&!sc&&0!==Hb.selectedShapes.size||null,zIndex:Xa,
"data-type":"Shape",bounds:eb,rotation:ib,scale:Db,children:(0,hB.jsx)(Ob,{meta:Ta,isEditing:la,isBinding:H,isHovered:d,isSelected:k,isErasing:fa,events:cc,asset:Ha,onEditingEnd:sa})})}),Kt=da(590),iB=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],TF=rf(function({size:a}){const {viewport:{camera:{point:d,zoom:k}}}=Cc();return(0,Kt.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,Kt.jsx)("defs",{children:iB.map(([H,fa,
la],sa)=>{la=la*a*k;var Ha=d[0]*k,Ta=d[1]*k;Ha=0<Ha?Ha%la:la+Ha%la;Ta=0<Ta?Ta%la:la+Ta%la;H=Vj(k,[H,fa],[0,1]);return(0,Kt.jsx)("pattern",{id:`grid-${sa}`,width:la,height:la,patternUnits:"userSpaceOnUse",children:!(2<H||.1>H)&&(0,Kt.jsx)("circle",{className:"tl-grid-dot",cx:Ha,cy:Ta,r:1.5,opacity:Math.max(0,Math.min(H,1))})},`grid-pattern-${sa}`)})}),iB.map((H,fa)=>(0,Kt.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${fa})`},`grid-rect-${fa}`))]})}),jB=rf(function({size:a}){return(0,Kt.jsx)(TF,
{size:a})}),kB=da(590),lB=rf(function({bounds:a}){const d=Nd("background");return(0,kB.jsx)(cp,lf(he({"data-html2canvas-ignore":"true"},d),{children:(0,kB.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});da(22);var mB=da(590),nB=rf(function({scaledBounds:a,shapes:d,detail:k="size",rotation:H=0}){var fa;const la=1===d.length?H:null!=(fa=a.rotation)?fa:0;return(0,mB.jsx)(Co,{centered:!0,children:(0,mB.jsx)("div",{className:"tl-bounds-detail",
style:{transform:la<Bn||la>3*Bn?`rotate(${la}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+la}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${ce.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===k?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${gm.radiansToDegrees(gm.clampRadians(H)).toFixed()}\xB0`})})}),Rx=da(590),UF={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},ew=rf(function({cx:a,cy:d,size:k,targetSize:H,corner:fa,isHidden:la}){const sa=Nd(fa);return(0,Rx.jsxs)("g",lf(he({opacity:la?0:1},sa),{children:[(0,Rx.jsx)("rect",{className:"tl-transparent "+(la?"":UF[fa]),"aria-label":`${fa} target`,x:a-1.25*H,y:d-1.25*H,width:2.5*H,height:2.5*H,pointerEvents:la?"none":"all"}),(0,Rx.jsx)("rect",{className:"tl-corner-handle","aria-label":`${fa} handle`,x:a-k/2,y:d-k/2,width:k,height:k,pointerEvents:"none"})]}))}),
VF=da(590),WF={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},fw=rf(function({x:a,y:d,width:k,height:H,targetSize:fa,edge:la,disabled:sa,isHidden:Ha}){const Ta=Nd(la);return(0,VF.jsx)("rect",he({pointerEvents:Ha||sa?"none":"all",className:"tl-transparent tl-edge-handle "+(Ha?"":WF[la]),"aria-label":`${la} target`,opacity:Ha?0:1,x:a-fa,y:d-fa,width:Math.max(1,k+2*fa),height:Math.max(1,H+2*fa)},Ta))}),Sx=da(590);rf(function({cx:a,cy:d,size:k,targetSize:H,
isHidden:fa}){const la=Nd("rotate");return(0,Sx.jsxs)("g",lf(he({opacity:fa?0:1},la),{children:[(0,Sx.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:H,pointerEvents:fa?"none":"all"}),(0,Sx.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:k/2,pointerEvents:"none"})]}))});da(22);var oB=da(590),gw=rf(function({cx:a,cy:d,targetSize:k,corner:H,isHidden:fa}){const la=Nd(H);return(0,oB.jsx)("g",lf(he({opacity:fa?0:1},la),{children:(0,oB.jsx)("rect",
{className:"tl-transparent","aria-label":`${H} target`,x:a-2.5*k,y:d-2.5*k,width:3*k,height:3*k,pointerEvents:fa?"none":"all"})}))}),Dm=da(590),pB=rf(function({bounds:a,showResizeHandles:d,showRotateHandles:k,shapes:H}){var fa,la;const sa=He();let {width:Ha,height:Ta}=a;var Xa=sa.viewport.camera.zoom;a=8/Xa;Xa=6/Xa;const eb=1===H.length?H[0].canResize:[!0,!0],ib=null!=(la=null==(fa=sa.editingShape)?void 0:fa.props.borderRadius)?la:0;return(0,Dm.jsx)(Dm.Fragment,{children:0<H.length&&(0,Dm.jsxs)(cp,
{children:[!sa.editingShape&&(0,Dm.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ha,1),height:Math.max(Ta,1),rx:ib,ry:ib,pointerEvents:"none"}),(0,Dm.jsx)(fw,{x:2*Xa,y:0,width:Ha-4*Xa,height:0,targetSize:Xa,edge:"top_edge",disabled:!eb[1],isHidden:!d}),(0,Dm.jsx)(fw,{x:Ha,y:2*Xa,width:0,height:Ta-4*Xa,targetSize:Xa,edge:"right_edge",disabled:!eb[0],isHidden:!d}),(0,Dm.jsx)(fw,{x:2*Xa,y:Ta,width:Ha-4*Xa,height:0,targetSize:Xa,edge:"bottom_edge",disabled:!eb[1],isHidden:!d}),(0,Dm.jsx)(fw,{x:0,
y:2*Xa,width:0,height:Ta-4*Xa,targetSize:Xa,edge:"left_edge",disabled:!eb[0],isHidden:!d}),(0,Dm.jsx)(gw,{cx:0,cy:0,targetSize:Xa,corner:"top_left_resize_corner",isHidden:!k}),(0,Dm.jsx)(gw,{cx:Ha+2*Xa,cy:0,targetSize:Xa,corner:"top_right_resize_corner",isHidden:!k}),(0,Dm.jsx)(gw,{cx:Ha+2*Xa,cy:Ta+2*Xa,targetSize:Xa,corner:"bottom_right_resize_corner",isHidden:!k}),(0,Dm.jsx)(gw,{cx:0,cy:Ta+2*Xa,targetSize:Xa,corner:"bottom_left_resize_corner",isHidden:!k}),(null==eb?void 0:eb.every(Db=>Db))&&(0,Dm.jsxs)(Dm.Fragment,
{children:[(0,Dm.jsx)(ew,{cx:0,cy:0,size:a,targetSize:Xa,corner:"top_left_corner",isHidden:!d}),(0,Dm.jsx)(ew,{cx:Ha,cy:0,size:a,targetSize:Xa,corner:"top_right_corner",isHidden:!d}),(0,Dm.jsx)(ew,{cx:Ha,cy:Ta,size:a,targetSize:Xa,corner:"bottom_right_corner",isHidden:!d}),(0,Dm.jsx)(ew,{cx:0,cy:Ta,size:a,targetSize:Xa,corner:"bottom_left_corner",isHidden:!d})]})]})})}),Tx=da(590),qB=rf(function({bounds:a}){return(0,Tx.jsx)(Er,{bounds:a,zIndex:10001,children:(0,Tx.jsx)(cp,{children:(0,Tx.jsx)("rect",
{className:"tl-brush",x:0,y:0,width:a.width,height:a.height})})})}),rB=da(590);rf(function(){return(0,rB.jsx)(rB.Fragment,{})});var Ux=da(590),sB=rf(function({shape:a,handle:d,id:k}){a=tp(a,k);const [H,fa]=d.point;return(0,Ux.jsxs)("g",lf(he({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${H}, ${fa})`,children:[(0,Ux.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,Ux.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),tB=
yf(da(22)),Vx=da(590),Wx=rf(function({direction:a}){const {viewport:{bounds:d}}=Cc(),k=tB.useRef(null);tB.useLayoutEffect(()=>{const H=k.current;if(H){var fa=[d.width/2,d.height/2],la=Bf.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[sa,Ha]]of la)la=u(fa,a,sa,Ha),la.didIntersect&&(la=la.points[0],H.style.transform=`translate(${la[0]-6}px,${la[1]-6}px) rotate(${ce.toAngle(a)}rad)`)}},[a,d]);return(0,Vx.jsx)("div",{ref:k,className:"tl-direction-indicator","data-html2canvas-ignore":"true",
children:(0,Vx.jsx)("svg",{height:12,width:12,children:(0,Vx.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),Pk=da(590),XF=rf(function({id:a,className:d,brush:k,shapes:H,assets:fa,bindingShapes:la,editingShape:sa,hoveredShape:Ha,hoveredGroup:Ta,selectionBounds:Xa,selectedShapes:eb,erasingShapes:ib,selectionDirectionHint:Db,cursor:Ob="default",cursorRotation:Hb=0,selectionRotation:cc=0,showSelection:sc=!0,showHandles:Ub=!0,showSelectionRotation:kc=!1,showResizeHandles:ec=!0,showRotateHandles:Mc=!0,
showSelectionDetail:Oc=!0,showContextBar:vd=!0,showGrid:Kd=!0,gridSize:We=8,onEditingEnd:ie=QE,theme:Je=Iq,children:Hf}){var Se;const Xe=Ou.useRef(null),{viewport:Pd,components:ld,meta:Qd}=Cc(),hd=He(),Dd=Ou.useCallback(If=>{hd.inputs.updateContainerOffset([If.minX,If.minY])},[]);we(Je,a);yn(Xe);le(Xe,Pd,Dd);qj(Xe);Rl();wm(Xe,Ob,Hb);Gk(Xe);An(Xe);a=Qe();const Me=(Ob=1===(null==eb?void 0:eb.length)&&eb[0])&&"handles"in Ob.props?null==eb?void 0:eb[0]:void 0,nf=Ou.useMemo(()=>new Set(eb||[]),[eb]),Vf=
Ou.useMemo(()=>new Set(ib||[]),[ib]);Ob=1===(null==eb?void 0:eb.length)?eb[0]:void 0;Ta=[...(new Set([Ta,Ha]))].filter(pc);return(0,Pk.jsxs)("div",{ref:Xe,className:`tl-container ${null!=d?d:""}`,children:[(0,Pk.jsxs)("div",lf(he({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[Kd&&ld.Grid&&(0,Pk.jsx)(ld.Grid,{size:We}),(0,Pk.jsxs)(dB,{children:[ld.SelectionBackground&&eb&&Xa&&sc&&(0,Pk.jsx)(Er,{"data-type":"SelectionBackground",bounds:Xa,zIndex:2,"data-html2canvas-ignore":"true",children:(0,Pk.jsx)(ld.SelectionBackground,
{shapes:eb,bounds:Xa,showResizeHandles:ec,showRotateHandles:Mc})}),H&&H.map((If,kg)=>(0,Pk.jsx)(SF,{shape:If,asset:fa&&If.props.assetId?fa[If.props.assetId]:void 0,isEditing:If===sa,isHovered:If===Ha,isBinding:null==la?void 0:la.includes(If),isSelected:nf.has(If),isErasing:Vf.has(If),meta:Qd,zIndex:1E3+kg,onEditingEnd:ie},"shape_"+If.id)),!hd.isIn("select.pinching")&&(null==eb?void 0:eb.map(If=>(0,Pk.jsx)(eB,{shape:If,isEditing:If===sa,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:If.props.isLocked},
"selected_indicator_"+If.id))),Ta.map(If=>If!==sa&&(0,Pk.jsx)(eB,{shape:If},"hovered_indicator_"+If.id)),Ob&&ld.BacklinksCount&&(0,Pk.jsx)(PF,{hidden:!1,bounds:Ob.bounds,shape:Ob}),Ha&&Ha!==Ob&&ld.QuickLinks&&(0,Pk.jsx)(OF,{hidden:!1,bounds:Ha.bounds,shape:Ha}),k&&ld.Brush&&(0,Pk.jsx)(ld.Brush,{bounds:k}),eb&&Xa&&(0,Pk.jsxs)(Pk.Fragment,{children:[sc&&ld.SelectionForeground&&(0,Pk.jsx)(Er,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:Xa,zIndex:sa&&eb.includes(sa)?1002:
10002,children:(0,Pk.jsx)(ld.SelectionForeground,{shapes:eb.filter(If=>!If.props.isLocked),bounds:Xa,showResizeHandles:ec,showRotateHandles:Mc})}),Ub&&Me&&ld.Handle&&(0,Pk.jsx)(Er,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:Xa,zIndex:10003,children:(0,Pk.jsx)(cp,{children:Object.entries(null!=(Se=Me.props.handles)?Se:{}).map(([If,kg])=>Ou.createElement(ld.Handle,{key:`${kg.id}_handle_${kg.id}`,shape:Me,handle:kg,id:If}))})}),eb&&ld.SelectionDetail&&(0,Pk.jsx)(RF,
{"data-html2canvas-ignore":"true",shapes:eb,bounds:Xa,detail:kc?"rotation":"size",hidden:!Oc,rotation:cc},"detail"+eb.map(If=>If.id).join(""))]})]}),Db&&Xa&&eb&&(0,Pk.jsx)(Wx,{direction:Db,bounds:Xa,shapes:eb}),(0,Pk.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,Pk.jsx)(dB,{children:eb&&Xa&&(0,Pk.jsx)(Pk.Fragment,{children:eb&&ld.ContextBar&&(0,Pk.jsx)(MF,{shapes:eb.filter(If=>!If.props.isLocked),hidden:!vd,bounds:Ob?Ob.bounds:Xa,rotation:Ob?Ob.props.rotation:
0},"context"+eb.map(If=>If.id).join(""))})}),Hf]})}),uB=yf(da(22)),vB=yf(da(22)),wB=da(590);rf(function({children:a}){const d=vB.useRef(null),{viewport:k}=Cc();vB.useEffect(()=>zd(()=>{const H=d.current;if(H){var {zoom:fa,point:la}=k.camera;H.style.transform=`scale(${fa}) translateX(${la[0]}px) translateY(${la[1]}px)`}}),[]);return(0,wB.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,wB.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});var YF=da(590),ZF=rf(function(a){const d=
Xn(a),k=Ee(a.id);Ek(d,a);Wn(d,a);return(0,YF.jsx)(k.Provider,{value:d,children:a.children})}),$F=da(590),aG=rf(function({id:a="noid",viewport:d,inputs:k,callbacks:H=Iq,meta:fa=Iq,components:la=Iq,children:sa}){const [Ha,Ta]=uB.useState(()=>{const {Brush:eb,ContextBar:ib,DirectionIndicator:Db,Grid:Ob,Handle:Hb,SelectionBackground:cc,SelectionDetail:sc,SelectionForeground:Ub}=la,kc=Mf(la,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));
return{id:a,viewport:d,inputs:k,callbacks:H,meta:fa,components:lf(he({},kc),{Brush:null===eb?void 0:qB,ContextBar:ib,DirectionIndicator:null===Db?void 0:Wx,Grid:null===Ob?void 0:jB,Handle:null===Hb?void 0:sB,SelectionBackground:null===cc?void 0:lB,SelectionDetail:null===sc?void 0:nB,SelectionForeground:null===Ub?void 0:pB})}});uB.useLayoutEffect(()=>{const {Brush:eb,ContextBar:ib,DirectionIndicator:Db,Grid:Ob,Handle:Hb,SelectionBackground:cc,SelectionDetail:sc,SelectionForeground:Ub}=la,kc=Mf(la,
"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return zd(()=>{Ta({id:a,viewport:d,inputs:k,callbacks:H,meta:fa,components:lf(he({},kc),{Brush:null===eb?void 0:qB,ContextBar:ib,DirectionIndicator:null===Db?void 0:Wx,Grid:null===Ob?void 0:jB,Handle:null===Hb?void 0:sB,SelectionBackground:null===cc?void 0:lB,SelectionDetail:null===sc?void 0:nB,SelectionForeground:null===Ub?void 0:pB})})})},[]);const Xa=Dc(a);return(0,$F.jsx)(Xa.Provider,
{value:Ha,children:sa})}),xB=da(590),bG=da(590),cG=rf(function(a){const d=He();return(0,bG.jsx)(Ul,he({viewport:d.viewport,inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,
showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},a))});da(590);var Lt=yf(da(22)),Ls=yf(da(22)),dG=da(590),eG="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),
Ph=a=>{var {name:d,className:k}=a;a=Mf(a,["name","className"]);const H=eG.includes(d)?"tie tie-":"ti ti-";return(0,dG.jsx)("i",he({className:[H+d,k].join(" ")},a))},Eh=da(22),fG=da(22),Ms=da(22),$n=da(22),Xx=da(22),gG=da(31),Wm=da(22),kq=(0,Wm.forwardRef)((a,d)=>{var {children:k}=a;a=Mf(a,["children"]);const H=Wm.Children.toArray(k),fa=H.find(Qg);if(fa){const la=fa.props.children;k=H.map(sa=>sa===fa?1<Wm.Children.count(la)?Wm.Children.only(null):(0,Wm.isValidElement)(la)?la.props.children:null:sa);
return(0,Wm.createElement)(Yx,gf({},a,{ref:d}),(0,Wm.isValidElement)(la)?(0,Wm.cloneElement)(la,void 0,k):null)}return(0,Wm.createElement)(Yx,gf({},a,{ref:d}),k)});kq.displayName="Slot";var Yx=(0,Wm.forwardRef)((a,d)=>{const {children:k}=a;a=Mf(a,["children"]);return(0,Wm.isValidElement)(k)?(0,Wm.cloneElement)(k,lf(he({},rl(a,k.props)),{ref:dh(d,k.ref)})):1<Wm.Children.count(k)?Wm.Children.only(null):null});Yx.displayName="SlotClone";var yB=({children:a})=>(0,Wm.createElement)(Wm.Fragment,null,a),
al="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const k=(0,Xx.forwardRef)((H,fa)=>{var {asChild:la}=H;H=Mf(H,["asChild"]);la=la?kq:d;(0,Xx.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Xx.createElement)(la,gf({},H,{ref:fa}))});k.displayName=`Primitive.${d}`;return lf(he({},a),{[d]:k})},{}),Zx=da(22),hG=da(22),zB,iG=(0,$n.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$x=(0,$n.forwardRef)((a,d)=>
{var k;const {disableOutsidePointerEvents:H=!1,onEscapeKeyDown:fa,onPointerDownOutside:la,onFocusOutside:sa,onInteractOutside:Ha,onDismiss:Ta}=a,Xa=Mf(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),eb=(0,$n.useContext)(iG),[ib,Db]=(0,$n.useState)(null),Ob=null!==(k=null===ib||void 0===ib?void 0:ib.ownerDocument)&&void 0!==k?k:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Hb]=(0,$n.useState)({});d=uh(d,
ec=>Db(ec));k=Array.from(eb.layers);var [cc]=[...eb.layersWithOutsidePointerEventsDisabled].slice(-1);cc=k.indexOf(cc);const sc=ib?k.indexOf(ib):-1;k=0<eb.layersWithOutsidePointerEventsDisabled.size;const Ub=sc>=cc;cc=Ij(ec=>{const Mc=ec.target,Oc=[...eb.branches].some(vd=>vd.contains(Mc));Ub&&!Oc&&(null===la||void 0===la||la(ec),null===Ha||void 0===Ha||Ha(ec),ec.defaultPrevented||null===Ta||void 0===Ta||Ta())},Ob);const kc=qk(ec=>{const Mc=ec.target;[...eb.branches].some(Oc=>Oc.contains(Mc))||(null===
sa||void 0===sa||sa(ec),null===Ha||void 0===Ha||Ha(ec),ec.defaultPrevented||null===Ta||void 0===Ta||Ta())},Ob);Zk(ec=>{sc===eb.layers.size-1&&(null===fa||void 0===fa||fa(ec),!ec.defaultPrevented&&Ta&&(ec.preventDefault(),Ta()))},Ob);(0,$n.useEffect)(()=>{if(ib)return H&&(0===eb.layersWithOutsidePointerEventsDisabled.size&&(zB=Ob.body.style.pointerEvents,Ob.body.style.pointerEvents="none"),eb.layersWithOutsidePointerEventsDisabled.add(ib)),eb.layers.add(ib),dk(),()=>{H&&1===eb.layersWithOutsidePointerEventsDisabled.size&&
(Ob.body.style.pointerEvents=zB)}},[ib,Ob,H,eb]);(0,$n.useEffect)(()=>()=>{ib&&(eb.layers.delete(ib),eb.layersWithOutsidePointerEventsDisabled.delete(ib),dk())},[ib,eb]);(0,$n.useEffect)(()=>{const ec=()=>Hb({});document.addEventListener("dismissableLayer.update",ec);return()=>document.removeEventListener("dismissableLayer.update",ec)},[]);return(0,$n.createElement)(al.div,gf({},Xa,{ref:d,style:he({pointerEvents:k?Ub?"auto":"none":void 0},a.style),onFocusCapture:ig(a.onFocusCapture,kc.onFocusCapture),
onBlurCapture:ig(a.onBlurCapture,kc.onBlurCapture),onPointerDownCapture:ig(a.onPointerDownCapture,cc.onPointerDownCapture)}))}),AB=yf(da(22)),jG=da(22),Em=(null===globalThis||void 0===globalThis?0:globalThis.document)?jG.useLayoutEffect:()=>{},kG=AB["useId".toString()]||(()=>{}),lG=0,$l=da(22),mG=(a,d,k)=>oi(void 0,null,function*(){const {placement:H="bottom",strategy:fa="absolute",middleware:la=[],platform:sa}=k,Ha=yield null==sa.isRTL?void 0:sa.isRTL(d);let Ta=yield sa.getElementRects({reference:a,
floating:d,strategy:fa}),{x:Xa,y:eb}=yj(Ta,H,Ha),ib=H,Db={},Ob=0;for(let Hb=0;Hb<la.length;Hb++){const {name:cc,fn:sc}=la[Hb],{x:Ub,y:kc,data:ec,reset:Mc}=yield sc({x:Xa,y:eb,initialPlacement:H,placement:ib,strategy:fa,middlewareData:Db,rects:Ta,platform:sa,elements:{reference:a,floating:d}});Xa=null!=Ub?Ub:Xa;eb=null!=kc?kc:eb;Db=lf(he({},Db),{[cc]:he(he({},Db[cc]),ec)});Mc&&50>=Ob&&(Ob++,"object"==typeof Mc&&(Mc.placement&&(ib=Mc.placement),Mc.rects&&(Ta=!0===Mc.rects?yield sa.getElementRects({reference:a,
floating:d,strategy:fa}):Mc.rects),{x:Xa,y:eb}=yj(Ta,ib,Ha)),Hb=-1)}return{x:Xa,y:eb,placement:ib,strategy:fa,middlewareData:Db}}),ay=Math.min,Pq=Math.max,BB=a=>({name:"arrow",options:a,fn(d){return oi(this,null,function*(){const {element:k,padding:H=0}=null!=a?a:{},{x:fa,y:la,placement:sa,rects:Ha,platform:Ta}=d;if(null==k)return{};const Xa=ym(H),eb={x:fa,y:la},ib=pl(sa),Db=sa.split("-")[1],Ob=$k(ib);var Hb=yield Ta.getDimensions(k);const cc="y"===ib?"top":"left",sc="y"===ib?"bottom":"right";var Ub=
Ha.reference[Ob]+Ha.reference[ib]-eb[ib]-Ha.floating[Ob];const kc=eb[ib]-Ha.reference[ib];var ec=yield null==Ta.getOffsetParent?void 0:Ta.getOffsetParent(k);let Mc=ec?"y"===ib?ec.clientHeight||0:ec.clientWidth||0:0;0===Mc&&(Mc=Ha.floating[Ob]);ec=Xa[cc];const Oc=Mc-Hb[Ob]-Xa[sc];Hb=Mc/2-Hb[Ob]/2+(Ub/2-kc/2);Ub=Pq(ec,ay(Hb,Oc));return{[ib]:eb[ib]-(0<("start"===Db?Xa[cc]:Xa[sc])&&Hb!==Ub&&Ha.reference[Ob]<=Ha.floating[Ob]?Hb<ec?ec-Hb:Oc-Hb:0),data:{[ib]:Ub,centerOffset:Hb-Ub}}})}}),nG={left:"right",
right:"left",bottom:"top",top:"bottom"},oG={start:"end",end:"start"},CB=["top","right","bottom","left"];CB.reduce((a,d)=>a.concat(d,d+"-start",d+"-end"),[]);var DB=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return oi(this,null,function*(){var k;const {placement:H,middlewareData:fa,rects:la,initialPlacement:sa,platform:Ha,elements:Ta}=d;var Xa=a;const {mainAxis:eb=!0,crossAxis:ib=!0,fallbackPlacements:Db,fallbackStrategy:Ob="bestFit",flipAlignment:Hb=!0}=Xa;Xa=Mf(Xa,["mainAxis",
"crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const cc=cj(H);var sc=Db||(cc!==sa&&Hb?function(vd){const Kd=Pm(vd);return[Cn(vd),Kd,Cn(Kd)]}(sa):[Pm(sa)]);sc=[sa,...sc];const Ub=yield Yk(d,Xa),kc=[];Xa=(null==(k=fa.flip)?void 0:k.overflows)||[];if(eb&&kc.push(Ub[cc]),ib){const {main:vd,cross:Kd}=Vl(H,la,yield null==Ha.isRTL?void 0:Ha.isRTL(Ta.floating));kc.push(Ub[vd],Ub[Kd])}if(Xa=[...Xa,{placement:H,overflows:kc}],!kc.every(vd=>0>=vd)){var ec,Mc;k=(null!=(ec=null==(Mc=fa.flip)?
void 0:Mc.index)?ec:0)+1;if(ec=sc[k])return{data:{index:k,overflows:Xa},reset:{placement:ec}};ec="bottom";switch(Ob){case "bestFit":var Oc;(Mc=null==(Oc=Xa.map(vd=>[vd,vd.overflows.filter(Kd=>0<Kd).reduce((Kd,We)=>Kd+We,0)]).sort((vd,Kd)=>vd[1]-Kd[1])[0])?void 0:Oc[0].placement)&&(ec=Mc);break;case "initialPlacement":ec=sa}if(H!==ec)return{reset:{placement:ec}}}return{}})}}},EB=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,k=Mf(a,["strategy"]);return{name:"hide",fn(H){return oi(this,
null,function*(){var {rects:fa}=H;switch(d){case "referenceHidden":return fa=Rb(yield Yk(H,lf(he({},k),{elementContext:"reference"})),fa.reference),{data:{referenceHiddenOffsets:fa,referenceHidden:Sa(fa)}};case "escaped":return fa=Rb(yield Yk(H,lf(he({},k),{altBoundary:!0})),fa.floating),{data:{escapedOffsets:fa,escaped:Sa(fa)}};default:return{}}})}}},FB=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return oi(this,null,function*(){const {x:k,y:H}=d,fa=yield function(la,sa){return oi(this,
null,function*(){const {placement:Ha,platform:Ta,elements:Xa}=la;var eb=yield null==Ta.isRTL?void 0:Ta.isRTL(Xa.floating),ib=cj(Ha);const Db=Ha.split("-")[1],Ob="x"===pl(Ha);ib=["left","top"].includes(ib)?-1:1;eb=eb&&Ob?-1:1;const Hb="function"==typeof sa?sa(la):sa;let {mainAxis:cc,crossAxis:sc,alignmentAxis:Ub}="number"==typeof Hb?{mainAxis:Hb,crossAxis:0,alignmentAxis:null}:he({mainAxis:0,crossAxis:0,alignmentAxis:null},Hb);return Db&&"number"==typeof Ub&&(sc="end"===Db?-1*Ub:Ub),Ob?{x:sc*eb,y:cc*
ib}:{x:cc*ib,y:sc*eb}})}(d,a);return{x:k+fa.x,y:H+fa.y,data:fa}})}}},GB=function(a){return void 0===a&&(a={}),{name:"shift",options:a,fn(d){return oi(this,null,function*(){const {x:k,y:H,placement:fa}=d;var la=a;const {mainAxis:sa=!0,crossAxis:Ha=!1,limiter:Ta={fn:Ob=>{let {x:Hb,y:cc}=Ob;return{x:Hb,y:cc}}}}=la;var Xa=Mf(la,["mainAxis","crossAxis","limiter"]);la={x:k,y:H};Xa=yield Yk(d,Xa);const eb=pl(cj(fa)),ib="x"===eb?"y":"x";let Db=la[eb];la=la[ib];sa&&(Db=Pq(Db+Xa["y"===eb?"top":"left"],ay(Db,
Db-Xa["y"===eb?"bottom":"right"])));Ha&&(la=Pq(la+Xa["y"===ib?"top":"left"],ay(la,la-Xa["y"===ib?"bottom":"right"])));la=Ta.fn(lf(he({},d),{[eb]:Db,[ib]:la}));return lf(he({},la),{data:{x:la.x-k,y:la.y-H}})})}}},HB=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:k,y:H,placement:fa,rects:la,middlewareData:sa}=d,{offset:Ha=0,mainAxis:Ta=!0,crossAxis:Xa=!0}=a;var eb={x:k,y:H};d=pl(fa);const ib="x"===d?"y":"x";let Db=eb[d];eb=eb[ib];var Ob="function"==typeof Ha?Ha(lf(he({},la),{placement:fa})):
Ha;Ob="number"==typeof Ob?{mainAxis:Ob,crossAxis:0}:he({mainAxis:0,crossAxis:0},Ob);if(Ta){var Hb="y"===d?"height":"width",cc=la.reference[d]-la.floating[Hb]+Ob.mainAxis;Hb=la.reference[d]+la.reference[Hb]-Ob.mainAxis;Db<cc?Db=cc:Db>Hb&&(Db=Hb)}if(Xa){var sc,Ub,kc,ec;const Mc="y"===d?"width":"height";cc=["top","left"].includes(cj(fa));Hb=la.reference[ib]-la.floating[Mc]+(cc&&null!=(sc=null==(Ub=sa.offset)?void 0:Ub[ib])?sc:0)+(cc?0:Ob.crossAxis);sc=la.reference[ib]+la.reference[Mc]+(cc?0:null!=(kc=
null==(ec=sa.offset)?void 0:ec[ib])?kc:0)-(cc?Ob.crossAxis:0);eb<Hb?eb=Hb:eb>sc&&(eb=sc)}return{[d]:Db,[ib]:eb}}}},pG=function(a){return void 0===a&&(a={}),{name:"size",options:a,fn(d){return oi(this,null,function*(){const {placement:k,rects:H,platform:fa,elements:la}=d;var sa=a,{apply:Ha}=sa;sa=Mf(sa,["apply"]);sa=yield Yk(d,sa);var Ta=cj(k),Xa=k.split("-")[1],eb,ib;"top"===Ta||"bottom"===Ta?(eb=Ta,ib=Xa===((yield null==fa.isRTL?void 0:fa.isRTL(la.floating))?"start":"end")?"left":"right"):(ib=Ta,
eb="end"===Xa?"top":"bottom");Ta=Pq(sa.left,0);Xa=Pq(sa.right,0);const Db=Pq(sa.top,0),Ob=Pq(sa.bottom,0);ib={availableHeight:H.floating.height-(["left","right"].includes(k)?2*(0!==Db||0!==Ob?Db+Ob:Pq(sa.top,sa.bottom)):sa[eb]),availableWidth:H.floating.width-(["top","bottom"].includes(k)?2*(0!==Ta||0!==Xa?Ta+Xa:Pq(sa.left,sa.right)):sa[ib])};eb=yield fa.getDimensions(la.floating);null==Ha||Ha(he(he({},d),ib));Ha=yield fa.getDimensions(la.floating);return eb.width!==Ha.width||eb.height!==Ha.height?
{reset:{rects:!0}}:{}})}}},IB=Math.min,Pu=Math.max,hw=Math.round,qG={getClippingRect:function(a){let {element:d,boundary:k,rootBoundary:H,strategy:fa}=a;a=[...("clippingAncestors"===k?pg(d):[].concat(k)),H];a=a.reduce((la,sa)=>{sa=oh(d,sa,fa);return la.top=Pu(sa.top,la.top),la.right=IB(sa.right,la.right),la.bottom=IB(sa.bottom,la.bottom),la.left=Pu(sa.left,la.left),la},oh(d,a[0],fa));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,
offsetParent:k,strategy:H}=a;var fa=nc(k);const la=qd(k);if(k===la)return d;a={scrollLeft:0,scrollTop:0};var sa=0,Ha=0;(fa||!fa&&"fixed"!==H)&&(("body"!==Tb(k)||gc(la))&&(a=Wd(k)),nc(k))&&(fa=Zc(k,!0),sa=fa.x+k.clientLeft,Ha=fa.y+k.clientTop);return lf(he({},d),{x:d.x-a.scrollLeft+sa,y:d.y-a.scrollTop+Ha})},isElement:Mb,getDimensions:Kf,getOffsetParent:zf,getDocumentElement:qd,getElementRects:a=>{let {reference:d,floating:k,strategy:H}=a;a=zf(k);var fa=nc(a);const la=qd(a);var sa;if(sa=fa)sa=Zc(a),
sa=hw(sa.width)!==a.offsetWidth||hw(sa.height)!==a.offsetHeight;sa=Zc(d,sa,"fixed"===H);let Ha={scrollLeft:0,scrollTop:0};var Ta=0,Xa=0;if(fa||!fa&&"fixed"!==H)(("body"!==Tb(a)||gc(la))&&(Ha=Wd(a)),nc(a))?(fa=Zc(a,!0),Ta=fa.x+a.clientLeft,Xa=fa.y+a.clientTop):la&&(Ta=De(la));return{reference:{x:sa.left+Ha.scrollLeft-Ta,y:sa.top+Ha.scrollTop-Xa,width:sa.width,height:sa.height},floating:lf(he({},Kf(k)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===tc(a).direction},rG=
(a,d,k)=>mG(a,d,he({platform:qG},k)),Do=yf(da(22),1),JB=da(22),sG=yf(da(31),1),by="undefined"!==typeof document?JB.useLayoutEffect:JB.useEffect,KB=a=>{const {element:d,padding:k}=a;return{name:"arrow",options:a,fn(H){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=d.current)return BB({element:d.current,padding:k}).fn(H)}else if(d)return BB({element:d,padding:k}).fn(H);return{}}}},cy=da(22),tG=(0,cy.forwardRef)((a,d)=>{const {children:k,width:H=10,height:fa=5}=a,la=Mf(a,["children",
"width","height"]);return(0,cy.createElement)(al.svg,gf({},la,{ref:d,width:H,height:fa,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?k:(0,cy.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),uG=da(22),[dy,Mt]=Dj("Popper"),[vG,LB]=dy("Popper"),ey=(0,$l.forwardRef)((a,d)=>{const {__scopePopper:k,virtualRef:H}=a;a=Mf(a,["__scopePopper","virtualRef"]);const fa=LB("PopperAnchor",k),la=(0,$l.useRef)(null);d=uh(d,la);(0,$l.useEffect)(()=>{fa.onAnchorChange((null===H||void 0===H?void 0:
H.current)||la.current)});return H?null:(0,$l.createElement)(al.div,gf({},a,{ref:d}))}),[wG,xG]=dy("PopperContent"),[yG,zG]=dy("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),fy=(0,$l.forwardRef)((a,d)=>{var k,H,fa,la,sa,Ha,Ta,Xa;const {__scopePopper:eb,side:ib="bottom",sideOffset:Db=0,align:Ob="center",alignOffset:Hb=0,arrowPadding:cc=0,collisionBoundary:sc=[],collisionPadding:Ub=0,sticky:kc="partial",hideWhenDetached:ec=!1,avoidCollisions:Mc=!0}=a;a=Mf(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));
const Oc=LB("PopperContent",eb),[vd,Kd]=(0,$l.useState)(null);d=uh(d,Vk=>Kd(Vk));const [We,ie]=(0,$l.useState)(null);var Je=yi(We),Hf=null!==(k=null===Je||void 0===Je?void 0:Je.width)&&void 0!==k?k:0;k=null!==(H=null===Je||void 0===Je?void 0:Je.height)&&void 0!==H?H:0;H=ib+("center"!==Ob?"-"+Ob:"");Je="number"===typeof Ub?Ub:he({top:0,right:0,bottom:0,left:0},Ub);const Se=Array.isArray(sc)?sc:[sc],Xe=0<Se.length;Je={padding:Je,boundary:Se.filter(Bg),altBoundary:Xe};const {reference:Pd,floating:ld,
strategy:Qd,x:hd,y:Dd,placement:Me,middlewareData:nf,update:Vf}=rg({strategy:"fixed",placement:H,whileElementsMounted:mg,middleware:[FB({mainAxis:Db+k,alignmentAxis:Hb}),Mc?GB(he({mainAxis:!0,crossAxis:!1,limiter:"partial"===kc?HB():void 0},Je)):void 0,We?KB({element:We,padding:cc}):void 0,Mc?DB(he({},Je)):void 0,BG({arrowWidth:Hf,arrowHeight:k}),ec?EB({strategy:"referenceHidden"}):void 0].filter(hk)});Em(()=>{Pd(Oc.anchor)},[Pd,Oc.anchor]);const If=null!==hd&&null!==Dd,[kg,hh]=Yi(Me);Hf=null===(fa=
nf.arrow)||void 0===fa?void 0:fa.x;fa=null===(la=nf.arrow)||void 0===la?void 0:la.y;la=0!==(null===(sa=nf.arrow)||void 0===sa?void 0:sa.centerOffset);const [Qf,ch]=(0,$l.useState)();Em(()=>{vd&&ch(window.getComputedStyle(vd).zIndex)},[vd]);const {hasParent:Hh,positionUpdateFns:nj}=zG("PopperContent",eb),Dk=!Hh;(0,$l.useLayoutEffect)(()=>{if(!Dk)return nj.add(Vf),()=>{nj.delete(Vf)}},[Dk,nj,Vf]);(0,$l.useLayoutEffect)(()=>{Dk&&If&&Array.from(nj).reverse().forEach(Vk=>requestAnimationFrame(Vk))},[Dk,
If,nj]);sa=lf(he({"data-side":kg,"data-align":hh},a),{ref:d,style:lf(he({},a.style),{animation:If?void 0:"none",opacity:null!==(Ha=nf.hide)&&void 0!==Ha&&Ha.referenceHidden?0:void 0})});return(0,$l.createElement)("div",{ref:ld,"data-radix-popper-content-wrapper":"",style:{position:Qd,left:0,top:0,transform:If?`translate3d(${Math.round(hd)}px, ${Math.round(Dd)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Qf,["--radix-popper-transform-origin"]:[null===(Ta=nf.transformOrigin)||void 0===
Ta?void 0:Ta.x,null===(Xa=nf.transformOrigin)||void 0===Xa?void 0:Xa.y].join(" ")}},(0,$l.createElement)(wG,{scope:eb,placedSide:kg,onArrowChange:ie,arrowX:Hf,arrowY:fa,shouldHideArrow:la},Dk?(0,$l.createElement)(yG,{scope:eb,hasParent:!0,positionUpdateFns:nj},(0,$l.createElement)(al.div,sa)):(0,$l.createElement)(al.div,sa)))}),AG={top:"bottom",right:"left",bottom:"top",left:"right"},MB=(0,$l.forwardRef)(function(a,d){var {__scopePopper:k}=a;a=Mf(a,["__scopePopper"]);k=xG("PopperArrow",k);return(0,$l.createElement)("span",
{ref:k.onArrowChange,style:{position:"absolute",left:k.arrowX,top:k.arrowY,[AG[k.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[k.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[k.placedSide],visibility:k.shouldHideArrow?"hidden":void 0}},(0,$l.createElement)(tG,gf({},a,{ref:d,style:lf(he({},a.style),{display:"block"})})))}),BG=a=>
({name:"transformOrigin",options:a,fn(d){var k,H,fa,la,sa;const {placement:Ha,rects:Ta,middlewareData:Xa}=d,eb=(d=0!==(null===(k=Xa.arrow)||void 0===k?void 0:k.centerOffset))?0:a.arrowWidth;k=d?0:a.arrowHeight;const [ib,Db]=Yi(Ha),Ob={start:"0%",center:"50%",end:"100%"}[Db],Hb=(null!==(H=null===(fa=Xa.arrow)||void 0===fa?void 0:fa.x)&&void 0!==H?H:0)+eb/2;H=(null!==(la=null===(sa=Xa.arrow)||void 0===sa?void 0:sa.y)&&void 0!==la?la:0)+k/2;sa=la="";"bottom"===ib?(la=d?Ob:`${Hb}px`,sa=`${-k}px`):"top"===
ib?(la=d?Ob:`${Hb}px`,sa=`${Ta.floating.height+k}px`):"right"===ib?(la=`${-k}px`,sa=d?Ob:`${H}px`):"left"===ib&&(la=`${Ta.floating.width+k}px`,sa=d?Ob:`${H}px`);return{data:{x:la,y:sa}}}}),gy=a=>{const {__scopePopper:d,children:k}=a,[H,fa]=(0,$l.useState)(null);return(0,$l.createElement)(vG,{scope:d,anchor:H,onAnchorChange:fa},k)},NB=da(22),CG=yf(da(31)),DG=(0,NB.forwardRef)((a,d)=>{var k;const {container:H=null===globalThis||void 0===globalThis?void 0:null===(k=globalThis.document)||void 0===k?void 0:
k.body}=a;a=Mf(a,["container"]);return H?CG.default.createPortal((0,NB.createElement)(al.div,gf({},a,{ref:d})),H):null}),Qq=da(22),EG=da(31),Qu=a=>{const {present:d,children:k}=a;a=Ti(d);const H="function"===typeof k?k({present:a.isPresent}):Qq.Children.only(k),fa=uh(a.ref,H.ref);return"function"===typeof k||a.isPresent?(0,Qq.cloneElement)(H,{ref:fa}):null};Qu.displayName="Presence";var iw=da(22),OB=da(22),FG=(0,OB.forwardRef)((a,d)=>(0,OB.createElement)(al.span,gf({},a,{ref:d,style:he({position:"absolute",
border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[jw]=Dj("Tooltip",[Mt]),kw=Mt(),[GG,hy]=jw("TooltipProvider"),[HG,Ru]=jw("Tooltip"),IG=(0,Eh.forwardRef)((a,d)=>{var {__scopeTooltip:k}=a;const H=Mf(a,["__scopeTooltip"]),fa=Ru("TooltipTrigger",k),la=hy("TooltipTrigger",k);k=kw(k);const sa=(0,Eh.useRef)(null);d=uh(d,sa,fa.onTriggerChange);const Ha=(0,Eh.useRef)(!1),Ta=(0,Eh.useRef)(!1),Xa=(0,Eh.useCallback)(()=>
Ha.current=!1,[]);(0,Eh.useEffect)(()=>()=>document.removeEventListener("pointerup",Xa),[Xa]);return(0,Eh.createElement)(ey,gf({asChild:!0},k),(0,Eh.createElement)(al.button,gf({"aria-describedby":fa.open?fa.contentId:void 0,"data-state":fa.stateAttribute},H,{ref:d,onPointerMove:ig(a.onPointerMove,eb=>{"touch"===eb.pointerType||Ta.current||la.isPointerInTransitRef.current||(fa.onTriggerEnter(),Ta.current=!0)}),onPointerLeave:ig(a.onPointerLeave,()=>{fa.onTriggerLeave();Ta.current=!1}),onPointerDown:ig(a.onPointerDown,
()=>{Ha.current=!0;document.addEventListener("pointerup",Xa,{once:!0})}),onFocus:ig(a.onFocus,()=>{if(!Ha.current)fa.onOpen()}),onBlur:ig(a.onBlur,fa.onClose),onClick:ig(a.onClick,fa.onClose)})))}),[JG,KG]=jw("TooltipPortal",{forceMount:void 0}),LG=(0,Eh.forwardRef)((a,d)=>{var k=KG("TooltipContent",a.__scopeTooltip);const {forceMount:H=k.forceMount,side:fa="top"}=a;k=Mf(a,["forceMount","side"]);a=Ru("TooltipContent",a.__scopeTooltip);return(0,Eh.createElement)(Qu,{present:H||a.open},a.disableHoverableContent?
(0,Eh.createElement)(PB,gf({side:fa},k,{ref:d})):(0,Eh.createElement)(MG,gf({side:fa},k,{ref:d})))}),MG=(0,Eh.forwardRef)((a,d)=>{const k=Ru("TooltipContent",a.__scopeTooltip),H=hy("TooltipContent",a.__scopeTooltip),fa=(0,Eh.useRef)(null);d=uh(d,fa);const [la,sa]=(0,Eh.useState)(null),{trigger:Ha,onClose:Ta}=k,Xa=fa.current,{onPointerInTransitChange:eb}=H,ib=(0,Eh.useCallback)(()=>{sa(null);eb(!1)},[eb]),Db=(0,Eh.useCallback)((Ob,Hb)=>{const cc=rm({x:Ob.clientX,y:Ob.clientY},Ob.currentTarget.getBoundingClientRect()),
sc="right"===cc||"bottom"===cc?-5:5;Ob="right"===cc||"left"===cc?{x:Ob.clientX+sc,y:Ob.clientY}:{x:Ob.clientX,y:Ob.clientY+sc};Hb=Hb.getBoundingClientRect();const {top:Ub,right:kc,bottom:ec,left:Mc}=Hb;Hb=Kh([Ob,{x:Mc,y:Ub},{x:kc,y:Ub},{x:kc,y:ec},{x:Mc,y:ec}]);sa(Hb);eb(!0)},[eb]);(0,Eh.useEffect)(()=>()=>ib(),[ib]);(0,Eh.useEffect)(()=>{if(Ha&&Xa){const Ob=cc=>Db(cc,Xa),Hb=cc=>Db(cc,Ha);Ha.addEventListener("pointerleave",Ob);Xa.addEventListener("pointerleave",Hb);return()=>{Ha.removeEventListener("pointerleave",
Ob);Xa.removeEventListener("pointerleave",Hb)}}},[Ha,Xa,Db,ib]);(0,Eh.useEffect)(()=>{if(la){const Ob=Hb=>{var cc=Hb.target;Hb={x:Hb.clientX,y:Hb.clientY};cc=(null===Ha||void 0===Ha?void 0:Ha.contains(cc))||(null===Xa||void 0===Xa?void 0:Xa.contains(cc));const {x:sc,y:Ub}=Hb;Hb=!1;for(let kc=0,ec=la.length-1;kc<la.length;ec=kc++){const Mc=la[kc].x,Oc=la[kc].y,vd=la[ec].x,Kd=la[ec].y;Oc>Ub!==Kd>Ub&&sc<(vd-Mc)*(Ub-Oc)/(Kd-Oc)+Mc&&(Hb=!Hb)}Hb=!Hb;cc?ib():Hb&&(ib(),Ta())};document.addEventListener("pointermove",
Ob);return()=>document.removeEventListener("pointermove",Ob)}},[Ha,Xa,la,Ta,ib]);return(0,Eh.createElement)(PB,gf({},a,{ref:d}))}),[NG,OG]=jw("Tooltip",{isInside:!1}),PB=(0,Eh.forwardRef)((a,d)=>{const {__scopeTooltip:k,children:H,"aria-label":fa,onEscapeKeyDown:la,onPointerDownOutside:sa}=a;a=Mf(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Ha=Ru("TooltipContent",k),Ta=kw(k),{onClose:Xa}=Ha;(0,Eh.useEffect)(()=>{document.addEventListener("tooltip.open",
Xa);return()=>document.removeEventListener("tooltip.open",Xa)},[Xa]);(0,Eh.useEffect)(()=>{if(Ha.trigger){const eb=ib=>{ib=ib.target;null!==ib&&void 0!==ib&&ib.contains(Ha.trigger)&&Xa()};window.addEventListener("scroll",eb,{capture:!0});return()=>window.removeEventListener("scroll",eb,{capture:!0})}},[Ha.trigger,Xa]);return(0,Eh.createElement)($x,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:la,onPointerDownOutside:sa,onFocusOutside:eb=>eb.preventDefault(),onDismiss:Xa},(0,Eh.createElement)(fy,
gf({"data-state":Ha.stateAttribute},Ta,a,{ref:d,style:lf(he({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,Eh.createElement)(yB,null,H),(0,Eh.createElement)(NG,{scope:k,isInside:!0},(0,Eh.createElement)(FG,{id:Ha.contentId,role:"tooltip"},fa||H))))}),PG=(0,Eh.forwardRef)((a,d)=>{const {__scopeTooltip:k}=a;a=Mf(a,["__scopeTooltip"]);const H=kw(k);return OG("TooltipArrow",k).isInside?null:(0,Eh.createElement)(MB,gf({},H,a,{ref:d}))}),QG=a=>{const {__scopeTooltip:d,
delayDuration:k=700,skipDelayDuration:H=300,disableHoverableContent:fa=!1,children:la}=a,[sa,Ha]=(0,Eh.useState)(!0),Ta=(0,Eh.useRef)(!1),Xa=(0,Eh.useRef)(0);(0,Eh.useEffect)(()=>{const eb=Xa.current;return()=>window.clearTimeout(eb)},[]);return(0,Eh.createElement)(GG,{scope:d,isOpenDelayed:sa,delayDuration:k,onOpen:(0,Eh.useCallback)(()=>{window.clearTimeout(Xa.current);Ha(!1)},[]),onClose:(0,Eh.useCallback)(()=>{window.clearTimeout(Xa.current);Xa.current=window.setTimeout(()=>Ha(!0),H)},[H]),isPointerInTransitRef:Ta,
onPointerInTransitChange:(0,Eh.useCallback)(eb=>{Ta.current=eb},[]),disableHoverableContent:fa},la)},RG=a=>{const {__scopeTooltip:d,children:k,open:H,defaultOpen:fa=!1,onOpenChange:la,disableHoverableContent:sa,delayDuration:Ha}=a,Ta=hy("Tooltip",a.__scopeTooltip);a=kw(d);const [Xa,eb]=(0,Eh.useState)(null),ib=ni(),Db=(0,Eh.useRef)(0),Ob=null!==sa&&void 0!==sa?sa:Ta.disableHoverableContent,Hb=null!==Ha&&void 0!==Ha?Ha:Ta.delayDuration,cc=(0,Eh.useRef)(!1),[sc=!1,Ub]=pi({prop:H,defaultProp:fa,onChange:vd=>
{if(vd)Ta.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else Ta.onClose();null===la||void 0===la||la(vd)}}),kc=(0,Eh.useMemo)(()=>sc?cc.current?"delayed-open":"instant-open":"closed",[sc]),ec=(0,Eh.useCallback)(()=>{window.clearTimeout(Db.current);cc.current=!1;Ub(!0)},[Ub]),Mc=(0,Eh.useCallback)(()=>{window.clearTimeout(Db.current);Ub(!1)},[Ub]),Oc=(0,Eh.useCallback)(()=>{window.clearTimeout(Db.current);Db.current=window.setTimeout(()=>{cc.current=!0;Ub(!0)},Hb)},[Hb,Ub]);(0,Eh.useEffect)(()=>
()=>window.clearTimeout(Db.current),[]);return(0,Eh.createElement)(gy,a,(0,Eh.createElement)(HG,{scope:d,contentId:ib,open:sc,stateAttribute:kc,trigger:Xa,onTriggerChange:eb,onTriggerEnter:(0,Eh.useCallback)(()=>{Ta.isOpenDelayed?Oc():ec()},[Ta.isOpenDelayed,Oc,ec]),onTriggerLeave:(0,Eh.useCallback)(()=>{Ob?Mc():window.clearTimeout(Db.current)},[Mc,Ob]),onOpen:ec,onClose:Mc,disableHoverableContent:Ob},k))},SG=IG,TG=a=>{const {__scopeTooltip:d,forceMount:k,children:H,container:fa}=a;a=Ru("TooltipPortal",
d);return(0,Eh.createElement)(JG,{scope:d,forceMount:k},(0,Eh.createElement)(Qu,{present:k||a.open},(0,Eh.createElement)(DG,{asChild:!0,container:fa},H)))},UG=LG,VG=PG,Fr=da(590),QB=da(590),iy=da(590),WG=({style:a,icon:d,onClick:k})=>(0,iy.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:k,children:(0,iy.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,iy.jsx)(Ph,{name:d})})}),RB=da(22),SB=(0,RB.forwardRef)((a,d)=>{const {pressed:k,
defaultPressed:H=!1,onPressedChange:fa}=a,la=Mf(a,["pressed","defaultPressed","onPressedChange"]),[sa=!1,Ha]=pi({prop:k,onChange:fa,defaultProp:H});return(0,RB.createElement)(al.button,gf({type:"button","aria-pressed":sa,"data-state":sa?"on":"off","data-disabled":a.disabled?"":void 0},la,{ref:d,onClick:ig(a.onClick,()=>{a.disabled||Ha(!sa)})}))}),XG=SB,jy=da(590),dp=da(22),lh=da(22),lq=yf(da(22)),TB=da(22),YG=(0,TB.createContext)(void 0),ZG=da(22),ky=0,Gr=da(22),UB={bubbles:!1,cancelable:!0},VB=(0,Gr.forwardRef)((a,
d)=>{const {loop:k=!1,trapped:H=!1,onMountAutoFocus:fa,onUnmountAutoFocus:la}=a;a=Mf(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [sa,Ha]=(0,Gr.useState)(null),Ta=Mi(fa),Xa=Mi(la),eb=(0,Gr.useRef)(null);d=uh(d,Ob=>Ha(Ob));const ib=(0,Gr.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Gr.useEffect)(()=>{if(H){let Ob=function(cc){!ib.paused&&sa&&(cc=cc.target,sa.contains(cc)?eb.current=cc:sj(eb.current,{select:!0}))},Hb=function(cc){!ib.paused&&
sa&&(sa.contains(cc.relatedTarget)||sj(eb.current,{select:!0}))};document.addEventListener("focusin",Ob);document.addEventListener("focusout",Hb);return()=>{document.removeEventListener("focusin",Ob);document.removeEventListener("focusout",Hb)}}},[H,sa,ib.paused]);(0,Gr.useEffect)(()=>{if(sa){WB.add(ib);const Ob=document.activeElement;if(!sa.contains(Ob)){const Hb=new CustomEvent("focusScope.autoFocusOnMount",UB);sa.addEventListener("focusScope.autoFocusOnMount",Ta);sa.dispatchEvent(Hb);Hb.defaultPrevented||
(Rj(qp(ik(sa)),{select:!0}),document.activeElement===Ob&&sj(sa))}return()=>{sa.removeEventListener("focusScope.autoFocusOnMount",Ta);setTimeout(()=>{const Hb=new CustomEvent("focusScope.autoFocusOnUnmount",UB);sa.addEventListener("focusScope.autoFocusOnUnmount",Xa);sa.dispatchEvent(Hb);Hb.defaultPrevented||sj(null!==Ob&&void 0!==Ob?Ob:document.body,{select:!0});sa.removeEventListener("focusScope.autoFocusOnUnmount",Xa);WB.remove(ib)},0)}}},[sa,Ta,Xa,ib]);const Db=(0,Gr.useCallback)(Ob=>{if((k||H)&&
!ib.paused){var Hb=document.activeElement;if("Tab"===Ob.key&&!Ob.altKey&&!Ob.ctrlKey&&!Ob.metaKey&&Hb){const sc=Ob.currentTarget;var cc=sc;const Ub=ik(cc),kc=zi(Ub,cc);cc=zi(Ub.reverse(),cc);const [ec,Mc]=[kc,cc];ec&&Mc?Ob.shiftKey||Hb!==Mc?Ob.shiftKey&&Hb===ec&&(Ob.preventDefault(),k&&sj(Mc,{select:!0})):(Ob.preventDefault(),k&&sj(ec,{select:!0})):Hb===sc&&Ob.preventDefault()}}},[k,H,ib.paused]);return(0,Gr.createElement)(al.div,gf({tabIndex:-1},a,{ref:d,onKeyDown:Db}))}),WB=function(){let a=[];
return{add(d){const k=a[0];d===k||null!==k&&void 0!==k&&k.pause();a=Mm(a,d);a.unshift(d)},remove(d){var k;a=Mm(a,d);null===(k=a[0])||void 0===k||k.resume()}}}(),am=da(22),$G={bubbles:!1,cancelable:!0},[ly,XB,aH]=jl("RovingFocusGroup"),[bH,lw]=Dj("RovingFocusGroup",[aH]),[cH,dH]=bH("RovingFocusGroup"),YB=(0,am.forwardRef)((a,d)=>(0,am.createElement)(ly.Provider,{scope:a.__scopeRovingFocusGroup},(0,am.createElement)(ly.Slot,{scope:a.__scopeRovingFocusGroup},(0,am.createElement)(eH,gf({},a,{ref:d}))))),
eH=(0,am.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:k,orientation:H,loop:fa=!1,dir:la,currentTabStopId:sa,defaultCurrentTabStopId:Ha,onCurrentTabStopIdChange:Ta,onEntryFocus:Xa}=a,eb=Mf(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),ib=(0,am.useRef)(null);d=uh(d,ib);const Db=ko(la),[Ob=null,Hb]=pi({prop:sa,defaultProp:Ha,onChange:Ta}),[cc,sc]=(0,am.useState)(!1),Ub=Mi(Xa),kc=XB(k),ec=(0,am.useRef)(!1),
[Mc,Oc]=(0,am.useState)(0);(0,am.useEffect)(()=>{const vd=ib.current;if(vd)return vd.addEventListener("rovingFocusGroup.onEntryFocus",Ub),()=>vd.removeEventListener("rovingFocusGroup.onEntryFocus",Ub)},[Ub]);return(0,am.createElement)(cH,{scope:k,orientation:H,dir:Db,loop:fa,currentTabStopId:Ob,onItemFocus:(0,am.useCallback)(vd=>Hb(vd),[Hb]),onItemShiftTab:(0,am.useCallback)(()=>sc(!0),[]),onFocusableItemAdd:(0,am.useCallback)(()=>Oc(vd=>vd+1),[]),onFocusableItemRemove:(0,am.useCallback)(()=>Oc(vd=>
vd-1),[])},(0,am.createElement)(al.div,gf({tabIndex:cc||0===Mc?-1:0,"data-orientation":H},eb,{ref:d,style:he({outline:"none"},a.style),onMouseDown:ig(a.onMouseDown,()=>{ec.current=!0}),onFocus:ig(a.onFocus,vd=>{var Kd=!ec.current;if(vd.target===vd.currentTarget&&Kd&&!cc&&(Kd=new CustomEvent("rovingFocusGroup.onEntryFocus",$G),vd.currentTarget.dispatchEvent(Kd),!Kd.defaultPrevented)){vd=kc().filter(ie=>ie.focusable);Kd=vd.find(ie=>ie.active);const We=vd.find(ie=>ie.id===Ob);vd=[Kd,We,...vd].filter(Boolean).map(ie=>
ie.ref.current);li(vd)}ec.current=!1}),onBlur:ig(a.onBlur,()=>sc(!1))})))}),ZB=(0,am.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:k,focusable:H=!0,active:fa=!1}=a,la=Mf(a,["__scopeRovingFocusGroup","focusable","active"]),sa=ni(),Ha=dH("RovingFocusGroupItem",k),Ta=Ha.currentTabStopId===sa,Xa=XB(k),{onFocusableItemAdd:eb,onFocusableItemRemove:ib}=Ha;(0,am.useEffect)(()=>{if(H)return eb(),()=>ib()},[H,eb,ib]);return(0,am.createElement)(ly.ItemSlot,{scope:k,id:sa,focusable:H,active:fa},(0,am.createElement)(al.span,
gf({tabIndex:Ta?0:-1,"data-orientation":Ha.orientation},la,{ref:d,onMouseDown:ig(a.onMouseDown,Db=>{if(H)Ha.onItemFocus(sa);else Db.preventDefault()}),onFocus:ig(a.onFocus,()=>Ha.onItemFocus(sa)),onKeyDown:ig(a.onKeyDown,Db=>{if("Tab"===Db.key&&Db.shiftKey)Ha.onItemShiftTab();else if(Db.target===Db.currentTarget){var Ob=cn(Db,Ha.orientation,Ha.dir);if(void 0!==Ob){Db.preventDefault();let Hb=Xa().filter(cc=>cc.focusable).map(cc=>cc.ref.current);if("last"===Ob)Hb.reverse();else if("prev"===Ob||"next"===
Ob)"prev"===Ob&&Hb.reverse(),Db=Hb.indexOf(Db.currentTarget),Hb=Ha.loop?Xh(Hb,Db+1):Hb.slice(Db+1);setTimeout(()=>li(Hb))}}})})))}),fH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},gH=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},Nt=new WeakMap,mw=new WeakMap,nw={},my=0,ny=function(a,d,k){void 0===d&&(d=gH(a));void 0===k&&(k="data-aria-hidden");var H=Array.isArray(a)?
a:[a];nw[k]||(nw[k]=new WeakMap);var fa=nw[k],la=[],sa=new Set,Ha=function(Xa){Xa&&!sa.has(Xa)&&(sa.add(Xa),Ha(Xa.parentNode))};H.forEach(Ha);var Ta=function(Xa){!Xa||0<=H.indexOf(Xa)||Array.prototype.forEach.call(Xa.children,function(eb){if(sa.has(eb))Ta(eb);else{var ib=eb.getAttribute("aria-hidden");ib=null!==ib&&"false"!==ib;var Db=(Nt.get(eb)||0)+1,Ob=(fa.get(eb)||0)+1;Nt.set(eb,Db);fa.set(eb,Ob);la.push(eb);1===Db&&ib&&mw.set(eb,!0);1===Ob&&eb.setAttribute(k,"true");ib||eb.setAttribute("aria-hidden",
"true")}})};Ta(d);sa.clear();my++;return function(){la.forEach(function(Xa){var eb=Nt.get(Xa)-1,ib=fa.get(Xa)-1;Nt.set(Xa,eb);fa.set(Xa,ib);eb||(mw.has(Xa)||Xa.removeAttribute("aria-hidden"),mw.delete(Xa));ib||Xa.removeAttribute(k)});my--;my||(Nt=new WeakMap,Nt=new WeakMap,mw=new WeakMap,nw={})}},hH=yf(fs(),1),{__assign:Hr,__rest:$B,__spreadArray:iH}=hH.default,ep=yf(da(22)),Rq=yf(da(22)),jH=da(22),kH=yf(da(22)),oy=function(a){var d=a.sideCar;a=$B(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");
d=d.read();if(!d)throw Error("Sidecar medium not found");return kH.createElement(d,Hr({},a))};oy.isSideCarExport=!0;var Tm=function(a){void 0===a&&(a={});var d=Dl(null);d.options=Hr({async:!0,ssr:!1},a);return d}(),Hn=function(){},mt=Rq.forwardRef(function(a,d){var k=Rq.useRef(null),H=Rq.useState({onScrollCapture:Hn,onWheelCapture:Hn,onTouchMoveCapture:Hn}),fa=H[0];H=H[1];var la=a.forwardProps,sa=a.children,Ha=a.className,Ta=a.removeScrollBar,Xa=a.enabled,eb=a.shards,ib=a.sideCar,Db=a.noIsolation,
Ob=a.inert,Hb=a.allowPinchZoom,cc=a.as;cc=void 0===cc?"div":cc;a=$B(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));d=lo([k,d]);fa=Hr(Hr({},a),fa);return Rq.createElement(Rq.Fragment,null,Xa&&Rq.createElement(ib,{sideCar:Tm,removeScrollBar:Ta,shards:eb,noIsolation:Db,inert:Ob,setCallbacks:H,allowPinchZoom:!!Hb,lockRef:k}),la?Rq.cloneElement(Rq.Children.only(sa),Hr(Hr({},fa),{ref:d})):Rq.createElement(cc,Hr({},fa,{className:Ha,
ref:d}),sa))});mt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mt.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var km=yf(da(22)),yz=yf(da(22)),zz=yf(da(22)),WD=function(){var a=0,d=null;return{add:function(k){if(0==a){if(document){var H=document.createElement("style");H.type="text/css";var fa="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;fa&&H.setAttribute("nonce",fa)}else H=null;if(d=H)H=d,H.styleSheet?H.styleSheet.cssText=k:H.appendChild(document.createTextNode(k)),
k=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(k)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),d=null)}}},nt=function(){var a=WD();return function(d,k){zz.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&k])}},Ov=function(){var a=nt();return function(d){a(d.styles,d.dynamic);return null}},lH={left:0,top:0,right:0,gap:0},aC=Ov(),bC=function(a,d,k,H){var fa=a.left,la=a.top,sa=a.right;a=a.gap;void 0===k&&(k="margin");return"\n  .".concat("with-scroll-bars-hidden",
" {\n   overflow: hidden ").concat(H,";\n   padding-right: ").concat(a,"px ").concat(H,";\n  }\n  body {\n    overflow: hidden ").concat(H,";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(H,";"),"margin"===k&&"\n    padding-left: ".concat(fa,"px;\n    padding-top: ").concat(la,"px;\n    padding-right: ").concat(sa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(H,";\n    "),"padding"===k&&"padding-right: ".concat(a,"px ").concat(H,
";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(H,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(H,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(H,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(H,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",
": ").concat(a,"px;\n  }\n")},cC=function(a){var d=a.noRelative,k=a.noImportant;a=a.gapMode;var H=void 0===a?"margin":a;a=yz.useMemo(function(){var fa=H;void 0===fa&&(fa="margin");if("undefined"===typeof window)fa=lH;else{var la=window.getComputedStyle(document.body),sa=la["padding"===fa?"paddingTop":"marginTop"],Ha=la["padding"===fa?"paddingRight":"marginRight"];fa=[parseInt(la["padding"===fa?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(sa||"",10)||0,parseInt(Ha||"",10)||0];fa={left:fa[0],top:fa[1],
right:fa[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+fa[2]-fa[0])}}return fa},[H]);return yz.createElement(aC,{styles:bC(a,!d,H,k?"":"!important")})},ow=!1;if("undefined"!==typeof window)try{var Pv=Object.defineProperty({},"passive",{get:function(){return ow=!0}});window.addEventListener("test",Pv,Pv);window.removeEventListener("test",Pv,Pv)}catch(a){ow=!1}var Nq=ow?{passive:!1}:!1,sx=function(a,d){var k=window.getComputedStyle(a);return"hidden"!==k[d]&&!(k.overflowY===
k.overflowX&&"TEXTAREA"!==a.tagName&&"visible"===k[d])},rx=function(a,d){do{"undefined"!==typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(dC(a,d)){var k=eC(a,d);if(k[1]>k[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},dC=function(a,d){return"v"===a?sx(d,"overflowY"):sx(d,"overflowX")},eC=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},pw=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,
a.changedTouches[0].clientY]:[0,0]},py=function(a){return a&&"current"in a?a.current:a},qy=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},Qk=0,pn=[];Tm.useMedium(function(a){var d=km.useRef([]),k=km.useRef([0,0]),H=km.useRef(),fa=km.useState(Qk++)[0],la=km.useState(function(){return Ov()})[0],sa=km.useRef(a);km.useEffect(function(){sa.current=a},[a]);km.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(fa));
var Hb=iH([a.lockRef.current],(a.shards||[]).map(py),!0).filter(Boolean);Hb.forEach(function(cc){return cc.classList.add("allow-interactivity-".concat(fa))});return function(){document.body.classList.remove("block-interactivity-".concat(fa));Hb.forEach(function(cc){return cc.classList.remove("allow-interactivity-".concat(fa))})}}},[a.inert,a.lockRef.current,a.shards]);var Ha=km.useCallback(function(Hb,cc){if("touches"in Hb&&2===Hb.touches.length)return!sa.current.allowPinchZoom;var sc=pw(Hb),Ub=k.current,
kc="deltaX"in Hb?Hb.deltaX:Ub[0]-sc[0];Ub="deltaY"in Hb?Hb.deltaY:Ub[1]-sc[1];var ec=Hb.target,Mc=Math.abs(kc)>Math.abs(Ub)?"h":"v";if("touches"in Hb&&"h"===Mc&&"range"===ec.type)return!1;var Oc=rx(Mc,ec);if(!Oc)return!0;Oc?sc=Mc:(sc="v"===Mc?"h":"v",Oc=rx(Mc,ec));if(!Oc)return!1;!H.current&&"changedTouches"in Hb&&(kc||Ub)&&(H.current=sc);if(!sc)return!0;sc=H.current||sc;Ub="h"===sc?kc:Ub;kc=window.getComputedStyle(cc).direction;kc="h"===sc&&"rtl"===kc?-1:1;Mc=kc*Ub;Hb=Hb.target;Ub=cc.contains(Hb);
ec=!1;Mc=0<Mc;var vd=Oc=0;do{var Kd=eC(sc,Hb),We=Kd[0];Kd=Kd[1]-Kd[2]-kc*We;(We||Kd)&&dC(sc,Hb)&&(Oc+=Kd,vd+=We);Hb=Hb.parentNode}while(!Ub&&Hb!==document.body||Ub&&(cc.contains(Hb)||cc===Hb));Mc&&0===Oc?ec=!0:Mc||0!==vd||(ec=!0);return ec},[]),Ta=km.useCallback(function(Hb){if(pn.length&&pn[pn.length-1]===la){var cc="deltaY"in Hb?[Hb.deltaX,Hb.deltaY]:pw(Hb),sc=d.current.filter(function(Ub){var kc;if(kc=Ub.name===Hb.type&&Ub.target===Hb.target)Ub=Ub.delta,kc=Ub[0]===cc[0]&&Ub[1]===cc[1];return kc})[0];
sc&&sc.should?Hb.cancelable&&Hb.preventDefault():sc||(sc=(sa.current.shards||[]).map(py).filter(Boolean).filter(function(Ub){return Ub.contains(Hb.target)}),(0<sc.length?Ha(Hb,sc[0]):!sa.current.noIsolation)&&Hb.cancelable&&Hb.preventDefault())}},[]),Xa=km.useCallback(function(Hb,cc,sc,Ub){var kc={name:Hb,delta:cc,target:sc,should:Ub};d.current.push(kc);setTimeout(function(){d.current=d.current.filter(function(ec){return ec!==kc})},1)},[]),eb=km.useCallback(function(Hb){k.current=pw(Hb);H.current=
void 0},[]),ib=km.useCallback(function(Hb){Xa(Hb.type,[Hb.deltaX,Hb.deltaY],Hb.target,Ha(Hb,a.lockRef.current))},[]),Db=km.useCallback(function(Hb){Xa(Hb.type,pw(Hb),Hb.target,Ha(Hb,a.lockRef.current))},[]);km.useEffect(function(){pn.push(la);a.setCallbacks({onScrollCapture:ib,onWheelCapture:ib,onTouchMoveCapture:Db});document.addEventListener("wheel",Ta,Nq);document.addEventListener("touchmove",Ta,Nq);document.addEventListener("touchstart",eb,Nq);return function(){pn=pn.filter(function(Hb){return Hb!==
la});document.removeEventListener("wheel",Ta,Nq);document.removeEventListener("touchmove",Ta,Nq);document.removeEventListener("touchstart",eb,Nq)}},[]);var Ob=a.removeScrollBar;return km.createElement(km.Fragment,null,a.inert?km.createElement(la,{styles:qy(fa)}):null,Ob?km.createElement(cC,{gapMode:"margin"}):null)});var Rk=ep.forwardRef(function(a,d){return ep.createElement(mt,Hr({},a,{ref:d,sideCar:oy}))});Rk.classNames=mt.classNames;var Sq=["Enter"," "],nm=["ArrowUp","PageDown","End"],Eo=["ArrowDown",
"PageUp","Home",...nm];[...Sq];[...Sq];var [dj,fC,qw]=jl("Menu"),[mq,Ot]=Dj("Menu",[qw,Mt,lw]),rw=Mt(),sw=lw(),[mj,Pt]=mq("Menu"),[ry,Su]=mq("Menu"),Ns=(0,lh.forwardRef)((a,d)=>{var {__scopeMenu:k}=a;a=Mf(a,["__scopeMenu"]);k=rw(k);return(0,lh.createElement)(ey,gf({},k,a,{ref:d}))}),[,gC]=mq("MenuPortal",{forceMount:void 0}),[Os,hC]=mq("MenuContent"),Tu=(0,lh.forwardRef)((a,d)=>{var k=gC("MenuContent",a.__scopeMenu);({forceMount:k=k.forceMount}=a);const H=Mf(a,["forceMount"]),fa=Pt("MenuContent",
a.__scopeMenu),la=Su("MenuContent",a.__scopeMenu);return(0,lh.createElement)(dj.Provider,{scope:a.__scopeMenu},(0,lh.createElement)(Qu,{present:k||fa.open},(0,lh.createElement)(dj.Slot,{scope:a.__scopeMenu},la.modal?(0,lh.createElement)(tw,gf({},H,{ref:d})):(0,lh.createElement)(sy,gf({},H,{ref:d})))))}),tw=(0,lh.forwardRef)((a,d)=>{const k=Pt("MenuContent",a.__scopeMenu),H=(0,lh.useRef)(null);d=uh(d,H);(0,lh.useEffect)(()=>{const fa=H.current;if(fa)return ny(fa)},[]);return(0,lh.createElement)(Qt,
gf({},a,{ref:d,trapFocus:k.open,disableOutsidePointerEvents:k.open,disableOutsideScroll:!0,onFocusOutside:ig(a.onFocusOutside,fa=>fa.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>k.onOpenChange(!1)}))}),sy=(0,lh.forwardRef)((a,d)=>{const k=Pt("MenuContent",a.__scopeMenu);return(0,lh.createElement)(Qt,gf({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>k.onOpenChange(!1)}))}),Qt=(0,lh.forwardRef)((a,d)=>{const {__scopeMenu:k,loop:H=!1,trapFocus:fa,
onOpenAutoFocus:la,onCloseAutoFocus:sa,disableOutsidePointerEvents:Ha,onEscapeKeyDown:Ta,onPointerDownOutside:Xa,onFocusOutside:eb,onInteractOutside:ib,onDismiss:Db,disableOutsideScroll:Ob}=a,Hb=Mf(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),cc=Pt("MenuContent",k),sc=Su("MenuContent",k),Ub=rw(k),kc=sw(k),ec=fC(k),[Mc,Oc]=(0,lh.useState)(null),
vd=(0,lh.useRef)(null);d=uh(d,vd,cc.onContentChange);const Kd=(0,lh.useRef)(0),We=(0,lh.useRef)(""),ie=(0,lh.useRef)(0),Je=(0,lh.useRef)(null),Hf=(0,lh.useRef)("right"),Se=(0,lh.useRef)(0),Xe=Ob?Rk:lh.Fragment,Pd=Ob?{as:kq,allowPinchZoom:!0}:void 0,ld=hd=>{var Dd,Me;hd=We.current+hd;const nf=ec().filter(Qf=>!Qf.disabled),Vf=document.activeElement,If=null===(Dd=nf.find(Qf=>Qf.ref.current===Vf))||void 0===Dd?void 0:Dd.textValue;Dd=nf.map(Qf=>Qf.textValue);const kg=ck(Dd,hd,If),hh=null===(Me=nf.find(Qf=>
Qf.textValue===kg))||void 0===Me?void 0:Me.ref.current;(function Hh(ch){We.current=ch;window.clearTimeout(Kd.current);""!==ch&&(Kd.current=window.setTimeout(()=>Hh(""),1E3))})(hd);hh&&setTimeout(()=>hh.focus())};(0,lh.useEffect)(()=>()=>window.clearTimeout(Kd.current),[]);ki();const Qd=(0,lh.useCallback)(hd=>{var Dd,Me,nf;if(nf=Hf.current===(null===(Dd=Je.current)||void 0===Dd?void 0:Dd.side)){if(Dd=null===(Me=Je.current)||void 0===Me?void 0:Me.area){const {x:Vf,y:If}={x:hd.clientX,y:hd.clientY};
hd=!1;for(let kg=0,hh=Dd.length-1;kg<Dd.length;hh=kg++){Me=Dd[kg].x;nf=Dd[kg].y;const Qf=Dd[hh].x,ch=Dd[hh].y;nf>If!==ch>If&&Vf<(Qf-Me)*(If-nf)/(ch-nf)+Me&&(hd=!hd)}Dd=hd}else Dd=!1;nf=Dd}return nf},[]);return(0,lh.createElement)(Os,{scope:k,searchRef:We,onItemEnter:(0,lh.useCallback)(hd=>{Qd(hd)&&hd.preventDefault()},[Qd]),onItemLeave:(0,lh.useCallback)(hd=>{var Dd;Qd(hd)||(null===(Dd=vd.current)||void 0===Dd||Dd.focus(),Oc(null))},[Qd]),onTriggerLeave:(0,lh.useCallback)(hd=>{Qd(hd)&&hd.preventDefault()},
[Qd]),pointerGraceTimerRef:ie,onPointerGraceIntentChange:(0,lh.useCallback)(hd=>{Je.current=hd},[])},(0,lh.createElement)(Xe,Pd,(0,lh.createElement)(VB,{asChild:!0,trapped:fa,onMountAutoFocus:ig(la,hd=>{var Dd;hd.preventDefault();null===(Dd=vd.current)||void 0===Dd||Dd.focus()}),onUnmountAutoFocus:sa},(0,lh.createElement)($x,{asChild:!0,disableOutsidePointerEvents:Ha,onEscapeKeyDown:Ta,onPointerDownOutside:Xa,onFocusOutside:eb,onInteractOutside:ib,onDismiss:Db},(0,lh.createElement)(YB,gf({asChild:!0},
kc,{dir:sc.dir,orientation:"vertical",loop:H,currentTabStopId:Mc,onCurrentTabStopIdChange:Oc,onEntryFocus:hd=>{sc.isUsingKeyboardRef.current||hd.preventDefault()}}),(0,lh.createElement)(fy,gf({role:"menu","aria-orientation":"vertical","data-state":cc.open?"open":"closed","data-radix-menu-content":"",dir:sc.dir},Ub,Hb,{ref:d,style:he({outline:"none"},Hb.style),onKeyDown:ig(Hb.onKeyDown,hd=>{var Dd=hd.target.closest("[data-radix-menu-content]")===hd.currentTarget;const Me=hd.ctrlKey||hd.altKey||hd.metaKey,
nf=1===hd.key.length;Dd&&("Tab"===hd.key&&hd.preventDefault(),!Me&&nf&&ld(hd.key));hd.target===vd.current&&Eo.includes(hd.key)&&(hd.preventDefault(),Dd=ec().filter(Vf=>!Vf.disabled).map(Vf=>Vf.ref.current),nm.includes(hd.key)&&Dd.reverse(),mo(Dd))}),onBlur:ig(a.onBlur,hd=>{hd.currentTarget.contains(hd.target)||(window.clearTimeout(Kd.current),We.current="")}),onPointerMove:ig(a.onPointerMove,Rm(hd=>{const Dd=Se.current!==hd.clientX;hd.currentTarget.contains(hd.target)&&Dd&&(Hf.current=hd.clientX>
Se.current?"right":"left",Se.current=hd.clientX)}))})))))))}),uw=(0,lh.forwardRef)((a,d)=>{const {disabled:k=!1,onSelect:H}=a,fa=Mf(a,["disabled","onSelect"]),la=(0,lh.useRef)(null),sa=Su("MenuItem",a.__scopeMenu),Ha=hC("MenuItem",a.__scopeMenu);d=uh(d,la);const Ta=(0,lh.useRef)(!1);return(0,lh.createElement)(Uu,gf({},fa,{ref:d,disabled:k,onClick:ig(a.onClick,()=>{const Xa=la.current;if(!k&&Xa){const eb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});Xa.addEventListener("menu.itemSelect",
ib=>null===H||void 0===H?void 0:H(ib),{once:!0});el(Xa,eb);if(eb.defaultPrevented)Ta.current=!1;else sa.onClose()}}),onPointerDown:Xa=>{var eb;null===(eb=a.onPointerDown)||void 0===eb||eb.call(a,Xa);Ta.current=!0},onPointerUp:ig(a.onPointerUp,Xa=>{var eb;Ta.current||null===(eb=Xa.currentTarget)||void 0===eb||eb.click()}),onKeyDown:ig(a.onKeyDown,Xa=>{const eb=""!==Ha.searchRef.current;k||eb&&" "===Xa.key||!Sq.includes(Xa.key)||(Xa.currentTarget.click(),Xa.preventDefault())})}))}),Uu=(0,lh.forwardRef)((a,
d)=>{const {__scopeMenu:k,disabled:H=!1,textValue:fa}=a,la=Mf(a,["__scopeMenu","disabled","textValue"]),sa=hC("MenuItem",k),Ha=sw(k),Ta=(0,lh.useRef)(null);d=uh(d,Ta);const [Xa,eb]=(0,lh.useState)(!1),[ib,Db]=(0,lh.useState)("");(0,lh.useEffect)(()=>{const Ob=Ta.current;if(Ob){var Hb;Db((null!==(Hb=Ob.textContent)&&void 0!==Hb?Hb:"").trim())}},[la.children]);return(0,lh.createElement)(dj.ItemSlot,{scope:k,disabled:H,textValue:null!==fa&&void 0!==fa?fa:ib},(0,lh.createElement)(ZB,gf({asChild:!0},Ha,
{focusable:!H}),(0,lh.createElement)(al.div,gf({role:"menuitem","data-highlighted":Xa?"":void 0,"aria-disabled":H||void 0,"data-disabled":H?"":void 0},la,{ref:d,onPointerMove:ig(a.onPointerMove,Rm(Ob=>{if(H)sa.onItemLeave(Ob);else sa.onItemEnter(Ob),Ob.defaultPrevented||Ob.currentTarget.focus()})),onPointerLeave:ig(a.onPointerLeave,Rm(Ob=>sa.onItemLeave(Ob))),onFocus:ig(a.onFocus,()=>eb(!0)),onBlur:ig(a.onBlur,()=>eb(!1))}))))});mq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});mq("MenuItemIndicator",
{checked:!1});var iC=(0,lh.forwardRef)((a,d)=>{a=Mf(a,["__scopeMenu"]);return(0,lh.createElement)(al.div,gf({role:"separator","aria-orientation":"horizontal"},a,{ref:d}))});mq("MenuSub");var ty=a=>{const {__scopeMenu:d,open:k=!1,children:H,dir:fa,onOpenChange:la,modal:sa=!0}=a;a=rw(d);const [Ha,Ta]=(0,lh.useState)(null),Xa=(0,lh.useRef)(!1),eb=Mi(la),ib=ko(fa);(0,lh.useEffect)(()=>{const Db=()=>{Xa.current=!0;document.addEventListener("pointerdown",Ob,{capture:!0,once:!0});document.addEventListener("pointermove",
Ob,{capture:!0,once:!0})},Ob=()=>Xa.current=!1;document.addEventListener("keydown",Db,{capture:!0});return()=>{document.removeEventListener("keydown",Db,{capture:!0});document.removeEventListener("pointerdown",Ob,{capture:!0});document.removeEventListener("pointermove",Ob,{capture:!0})}},[]);return(0,lh.createElement)(gy,a,(0,lh.createElement)(mj,{scope:d,open:k,onOpenChange:eb,content:Ha,onContentChange:Ta},(0,lh.createElement)(ry,{scope:d,onClose:(0,lh.useCallback)(()=>eb(!1),[eb]),isUsingKeyboardRef:Xa,
dir:ib,modal:sa},H)))},[mH]=Dj("DropdownMenu",[Ot]),Tq=Ot(),[Vu,Wu]=mH("DropdownMenu"),vw=(0,dp.forwardRef)((a,d)=>{const {__scopeDropdownMenu:k,disabled:H=!1}=a,fa=Mf(a,["__scopeDropdownMenu","disabled"]),la=Wu("DropdownMenuTrigger",k),sa=Tq(k);return(0,dp.createElement)(Ns,gf({asChild:!0},sa),(0,dp.createElement)(al.button,gf({type:"button",id:la.triggerId,"aria-haspopup":"menu","aria-expanded":la.open,"aria-controls":la.open?la.contentId:void 0,"data-state":la.open?"open":"closed","data-disabled":H?
"":void 0,disabled:H},fa,{ref:dh(d,la.triggerRef),onPointerDown:ig(a.onPointerDown,Ha=>{H||0!==Ha.button||!1!==Ha.ctrlKey||(la.onOpenToggle(),la.open||Ha.preventDefault())}),onKeyDown:ig(a.onKeyDown,Ha=>{if(!H){if(["Enter"," "].includes(Ha.key))la.onOpenToggle();if("ArrowDown"===Ha.key)la.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Ha.key)&&Ha.preventDefault()}})})))}),jC=(0,dp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:k}=a;const H=Mf(a,["__scopeDropdownMenu"]),fa=Wu("DropdownMenuContent",
k);k=Tq(k);const la=(0,dp.useRef)(!1);return(0,dp.createElement)(Tu,gf({id:fa.contentId,"aria-labelledby":fa.triggerId},k,H,{ref:d,onCloseAutoFocus:ig(a.onCloseAutoFocus,sa=>{var Ha;la.current||null===(Ha=fa.triggerRef.current)||void 0===Ha||Ha.focus();la.current=!1;sa.preventDefault()}),onInteractOutside:ig(a.onInteractOutside,sa=>{sa=sa.detail.originalEvent;const Ha=0===sa.button&&!0===sa.ctrlKey;sa=2===sa.button||Ha;if(!fa.modal||sa)la.current=!0}),style:lf(he({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Ir=(0,dp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:k}=a;a=Mf(a,["__scopeDropdownMenu"]);k=Tq(k);return(0,dp.createElement)(uw,gf({},k,a,{ref:d}))}),nH=a=>{const {__scopeDropdownMenu:d,children:k,dir:H,open:fa,defaultOpen:la,onOpenChange:sa,modal:Ha=!0}=a;a=Tq(d);const Ta=(0,dp.useRef)(null),[Xa=!1,eb]=pi({prop:fa,defaultProp:la,onChange:sa});return(0,dp.createElement)(Vu,{scope:d,triggerId:ni(),triggerRef:Ta,contentId:ni(),open:Xa,onOpenChange:eb,onOpenToggle:(0,dp.useCallback)(()=>eb(ib=>!ib),
[eb]),modal:Ha},(0,dp.createElement)(ty,gf({},a,{open:Xa,onOpenChange:eb,dir:H,modal:Ha}),k))},ej=yf(da(22)).default.createContext({}),oH=yf(da(22)),uy=da(590),Xm=a=>{var {action:d}=a;a=Mf(a,["action"]);var {renderers:k}=oH.useContext(ej);k=null==k?void 0:k.KeyboardShortcut;return(0,uy.jsx)("div",lf(he({className:"tl-menu-right-slot"},a),{children:(0,uy.jsx)(k,{action:d})}))};da(22);var Ym=da(590),Ps=rf(function(){const a=He(),d=k=>{k.preventDefault()};return(0,Ym.jsxs)(nH,{children:[(0,Ym.jsx)(vw,
{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,Ym.jsxs)(jC,{onCloseAutoFocus:k=>k.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,Ym.jsxs)(Ir,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,Ym.jsx)(Xm,{action:"whiteboard/zoom-to-fit"})]}),(0,Ym.jsxs)(Ir,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,
children:["Zoom to fit selection",(0,Ym.jsx)(Xm,{action:"whiteboard/zoom-to-selection"})]}),(0,Ym.jsxs)(Ir,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomIn,children:["Zoom in",(0,Ym.jsx)(Xm,{action:"whiteboard/zoom-in"})]}),(0,Ym.jsxs)(Ir,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,Ym.jsx)(Xm,{action:"whiteboard/zoom-out"})]}),(0,Ym.jsxs)(Ir,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,Ym.jsx)(Xm,{action:"whiteboard/reset-zoom"})]})]})]})}),
vy=da(22),ww=["horizontal","vertical"],Jr=(0,vy.forwardRef)((a,d)=>{const {decorative:k,orientation:H="horizontal"}=a;a=Mf(a,["decorative","orientation"]);const fa=ww.includes(H)?H:"horizontal";return(0,vy.createElement)(al.div,gf({"data-orientation":fa},k?{role:"none"}:{"aria-orientation":"vertical"===fa?fa:void 0,role:"separator"},a,{ref:d}))});Jr.propTypes={orientation(a,d,k){a=a[d];d=String(a);return a&&!ww.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${k}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var Jl=da(590),kC=rf(function(){const a=He(),{handlers:{t:d}}=Ls.useContext(ej),k=Ls.useCallback(()=>{a.api.undo()},[a]),H=Ls.useCallback(()=>{a.api.redo()},[a]),fa=Ls.useCallback(()=>{a.api.zoomIn()},[a]),la=Ls.useCallback(()=>{a.api.zoomOut()},[a]),sa=Ls.useCallback(()=>{a.api.toggleGrid()},[a]),Ha=Ls.useCallback(()=>{a.api.toggleSnapToGrid()},[a]);return(0,Jl.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",children:[!a.readOnly&&
(0,Jl.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,Jl.jsx)(Fg,{tooltip:d("whiteboard/undo"),onClick:k,children:(0,Jl.jsx)(Ph,{name:"arrow-back-up"})}),(0,Jl.jsx)(Fg,{tooltip:d("whiteboard/redo"),onClick:H,children:(0,Jl.jsx)(Ph,{name:"arrow-forward-up"})})]}),(0,Jl.jsxs)("div",{className:`tl-toolbar tl-zoom-bar ${a.readOnly?"":"ml-4"}`,children:[(0,Jl.jsx)(Fg,{tooltip:d("whiteboard/zoom-in"),onClick:fa,id:"tl-zoom-in",children:(0,Jl.jsx)(Ph,{name:"plus"})}),(0,Jl.jsx)(Fg,{tooltip:d("whiteboard/zoom-out"),
onClick:la,id:"tl-zoom-out",children:(0,Jl.jsx)(Ph,{name:"minus"})}),(0,Jl.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Jl.jsx)(Ps,{})]}),(0,Jl.jsxs)("div",{className:"tl-toolbar tl-grid-bar ml-4",children:[(0,Jl.jsx)(kj,{tooltip:d("whiteboard/toggle-grid"),className:"tl-button",pressed:a.settings.showGrid,id:"tl-show-grid",onPressedChange:sa,children:(0,Jl.jsx)(Ph,{name:"grid-dots"})}),!a.readOnly&&(0,Jl.jsx)(kj,{tooltip:d("whiteboard/snap-to-grid"),className:"tl-button",
pressed:a.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:Ha,children:(0,Jl.jsx)(Ph,{name:a.settings.snapToGrid?"magnet":"magnet-off"})})]})]})}),xw=yf(da(22)),Xu=yf(da(31)),Yu=da(590),Zu=a=>`[${a.map(d=>{var k;return null!=(k=null==d?void 0:d.toFixed(2))?k:"-"}).join(", ")}]`,Fo=rf(()=>{var a;const {viewport:{bounds:d,camera:{point:k,zoom:H}},inputs:fa}=Cc(),la=xw.default.useRef();xw.default.useEffect(()=>{const Ha=document.getElementById("tl-statusbar-anchor");la.current=Ha},[]);const sa=
[["Z",null!=(a=null==H?void 0:H.toFixed(2))?a:"null"],["MP",Zu(fa.currentPoint)],["MS",Zu(fa.currentScreenPoint)],["VP",Zu(k)],["VBR",Zu([d.maxX,d.maxY])]].map(Ha=>Ha.join("")).join("|");a=la.current?Xu.default.createPortal((0,Yu.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:sa}),la.current):null;return(0,Yu.jsx)(Yu.Fragment,{children:a})}),om=yf(da(22)),Go=da(590),Ap=rf(a=>{var {id:d,icon:k,tooltip:H,tooltipSide:fa="left",handleClick:la}=a;a=Mf(a,["id","icon","tooltip","tooltipSide",
"handleClick"]);var sa;const Ha=He(),Ta=null==(sa=[...Ha.Tools,Et,Ft])?void 0:sa.find(Xa=>Xa.id===d);sa=(sa=null==Ta?void 0:Ta.shortcut)&&H?(0,Go.jsxs)("div",{className:"flex",children:[H,(0,Go.jsx)(Xm,{action:sa})]}):H;return(0,Go.jsx)(Fg,lf(he({},a),{tooltipSide:fa,tooltip:sa,"data-tool":d,"data-selected":d===Ha.selectedTool.id,onClick:la,children:"string"===typeof k?(0,Go.jsx)(Ph,{name:k}):k}))}),Lj=da(22),[wy]=Dj("Popover",[Mt]),$u=Mt(),[xy,Qs]=wy("Popover"),yw=(0,Lj.forwardRef)((a,d)=>{var {__scopePopover:k}=
a;const H=Mf(a,["__scopePopover"]),fa=Qs("PopoverTrigger",k);k=$u(k);d=uh(d,fa.triggerRef);a=(0,Lj.createElement)(al.button,gf({type:"button","aria-haspopup":"dialog","aria-expanded":fa.open,"aria-controls":fa.contentId,"data-state":fa.open?"open":"closed"},H,{ref:d,onClick:ig(a.onClick,fa.onOpenToggle)}));return fa.hasCustomAnchor?a:(0,Lj.createElement)(ey,gf({asChild:!0},k),a)}),[,lC]=wy("PopoverPortal",{forceMount:void 0}),zw=(0,Lj.forwardRef)((a,d)=>{var k=lC("PopoverContent",a.__scopePopover);
({forceMount:k=k.forceMount}=a);const H=Mf(a,["forceMount"]);a=Qs("PopoverContent",a.__scopePopover);return(0,Lj.createElement)(Qu,{present:k||a.open},a.modal?(0,Lj.createElement)(mC,gf({},H,{ref:d})):(0,Lj.createElement)(Rt,gf({},H,{ref:d})))}),mC=(0,Lj.forwardRef)((a,d)=>{const k=Qs("PopoverContent",a.__scopePopover),H=(0,Lj.useRef)(null);d=uh(d,H);const fa=(0,Lj.useRef)(!1);(0,Lj.useEffect)(()=>{const la=H.current;if(la)return ny(la)},[]);return(0,Lj.createElement)(Rk,{as:kq,allowPinchZoom:!0},
(0,Lj.createElement)(yy,gf({},a,{ref:d,trapFocus:k.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ig(a.onCloseAutoFocus,la=>{var sa;la.preventDefault();fa.current||null===(sa=k.triggerRef.current)||void 0===sa||sa.focus()}),onPointerDownOutside:ig(a.onPointerDownOutside,la=>{la=la.detail.originalEvent;const sa=0===la.button&&!0===la.ctrlKey;fa.current=2===la.button||sa},{checkForDefaultPrevented:!1}),onFocusOutside:ig(a.onFocusOutside,la=>la.preventDefault(),{checkForDefaultPrevented:!1})})))}),
Rt=(0,Lj.forwardRef)((a,d)=>{const k=Qs("PopoverContent",a.__scopePopover),H=(0,Lj.useRef)(!1);return(0,Lj.createElement)(yy,gf({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:fa=>{var la;null===(la=a.onCloseAutoFocus)||void 0===la||la.call(a,fa);if(!fa.defaultPrevented){var sa;H.current||null===(sa=k.triggerRef.current)||void 0===sa||sa.focus();fa.preventDefault()}H.current=!1},onInteractOutside:fa=>{var la,sa;null===(la=a.onInteractOutside)||void 0===la||la.call(a,fa);fa.defaultPrevented||
(H.current=!0);la=fa.target;(null===(sa=k.triggerRef.current)||void 0===sa?0:sa.contains(la))&&fa.preventDefault()}}))}),yy=(0,Lj.forwardRef)((a,d)=>{const {__scopePopover:k,trapFocus:H,onOpenAutoFocus:fa,onCloseAutoFocus:la,disableOutsidePointerEvents:sa,onEscapeKeyDown:Ha,onPointerDownOutside:Ta,onFocusOutside:Xa,onInteractOutside:eb}=a;a=Mf(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));
const ib=Qs("PopoverContent",k),Db=$u(k);ki();return(0,Lj.createElement)(VB,{asChild:!0,loop:!0,trapped:H,onMountAutoFocus:fa,onUnmountAutoFocus:la},(0,Lj.createElement)($x,{asChild:!0,disableOutsidePointerEvents:sa,onInteractOutside:eb,onEscapeKeyDown:Ha,onPointerDownOutside:Ta,onFocusOutside:Xa,onDismiss:()=>ib.onOpenChange(!1)},(0,Lj.createElement)(fy,gf({"data-state":ib.open?"open":"closed",role:"dialog",id:ib.contentId},Db,a,{ref:d,style:lf(he({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),
nC=(0,Lj.forwardRef)((a,d)=>{var {__scopePopover:k}=a;a=Mf(a,["__scopePopover"]);k=$u(k);return(0,Lj.createElement)(MB,gf({},k,a,{ref:d}))}),Rs=a=>{const {__scopePopover:d,children:k,open:H,defaultOpen:fa,onOpenChange:la,modal:sa=!1}=a;a=$u(d);const Ha=(0,Lj.useRef)(null),[Ta,Xa]=(0,Lj.useState)(!1),[eb=!1,ib]=pi({prop:H,defaultProp:fa,onChange:la});return(0,Lj.createElement)(gy,a,(0,Lj.createElement)(xy,{scope:d,contentId:ni(),triggerRef:Ha,open:eb,onOpenChange:ib,onOpenToggle:(0,Lj.useCallback)(()=>
ib(Db=>!Db),[ib]),hasCustomAnchor:Ta,onCustomAnchorAdd:(0,Lj.useCallback)(()=>Xa(!0),[]),onCustomAnchorRemove:(0,Lj.useCallback)(()=>Xa(!1),[]),modal:sa},k))},zy=yf(da(22)),nq=da(590),Ay=rf(function(a){var {popoverSide:d="left",setGeometry:k,activeGeometry:H,chevron:fa=!0}=a;a=Mf(a,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:la}}=zy.default.useContext(ej);const sa=[{id:"box",icon:"square",tooltip:la("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:la("whiteboard/circle")},
{id:"polygon",icon:"triangle",tooltip:la("whiteboard/triangle")}];la={id:"shapes",icon:"triangle-square-circle",tooltip:la("whiteboard/shape")};la=H?sa.find(Ha=>Ha.id===H):la;return(0,nq.jsxs)(Rs,{children:[(0,nq.jsx)(yw,{asChild:!0,children:(0,nq.jsxs)("div",lf(he({},a),{className:"tl-geometry-tools-pane-anchor",children:[(0,nq.jsx)(Ap,lf(he({},la),{tooltipSide:d})),fa&&(0,nq.jsx)(Ph,{"data-selected":H,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,nq.jsxs)(zw,{className:"tl-popover-content",
side:d,sideOffset:15,children:[(0,nq.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":"flex-row"}`,children:sa.map(Ha=>(0,nq.jsx)(Ap,{id:Ha.id,icon:Ha.icon,tooltip:H?Ha.tooltip:"",handleClick:k,tooltipSide:d},Ha.id))}),(0,nq.jsx)(nC,{className:"tl-popover-arrow"})]})]})}),Ei=da(22),By=da(22),Cy=["PageUp","PageDown"],Dy=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],av={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown",
"ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[Aw,pH,qH]=jl("Slider"),[Ey]=Dj("Slider",[qH]),[Uq,fp]=Ey("Slider"),St=(0,Ei.forwardRef)((a,d)=>{function k(Se){const Xe=Tn(ie,Se);la(Se,Xe)}function H(Se){la(Se,vd.current)}function fa(){ie[vd.current]!==Hf.current[vd.current]&&sc(ie)}function la(Se,Xe,{commit:Pd}={commit:!1}){const ld=(String(Xa).split(".")[1]||"").length;Se=sm(Math.round((Se-Ha)/Xa)*Xa+Ha,ld);
const Qd=nn(Se,[Ha,Ta]);Je((hd=[])=>{const Dd=Ii(hd,Qd,Xe);var Me=Db*Xa;if(0<Me){const nf=En(Dd);Me=Math.min(...nf)>=Me}else Me=!0;return Me?(vd.current=Dd.indexOf(Qd),(Me=String(Dd)!==String(hd))&&Pd&&sc(Dd),Me?Dd:hd):hd})}const {name:sa,min:Ha=0,max:Ta=100,step:Xa=1,orientation:eb="horizontal",disabled:ib=!1,minStepsBetweenThumbs:Db=0,defaultValue:Ob=[Ha],value:Hb,onValueChange:cc=()=>{},onValueCommit:sc=()=>{},inverted:Ub=!1}=a,kc=Mf(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),
[ec,Mc]=(0,Ei.useState)(null);d=uh(d,Se=>Mc(Se));const Oc=(0,Ei.useRef)(new Set),vd=(0,Ei.useRef)(0);var Kd="horizontal"===eb;const We=ec?!!ec.closest("form"):!0;Kd=Kd?rH:sH;const [ie=[],Je]=pi({prop:Hb,defaultProp:Ob,onChange:Se=>{var Xe;null===(Xe=[...Oc.current][vd.current])||void 0===Xe||Xe.focus();cc(Se)}}),Hf=(0,Ei.useRef)(ie);return(0,Ei.createElement)(Uq,{scope:a.__scopeSlider,disabled:ib,min:Ha,max:Ta,valueIndexToChangeRef:vd,thumbs:Oc.current,values:ie,orientation:eb},(0,Ei.createElement)(Aw.Provider,
{scope:a.__scopeSlider},(0,Ei.createElement)(Aw.Slot,{scope:a.__scopeSlider},(0,Ei.createElement)(Kd,gf({"aria-disabled":ib,"data-disabled":ib?"":void 0},kc,{ref:d,onPointerDown:ig(kc.onPointerDown,()=>{ib||(Hf.current=ie)}),min:Ha,max:Ta,inverted:Ub,onSlideStart:ib?void 0:k,onSlideMove:ib?void 0:H,onSlideEnd:ib?void 0:fa,onHomeKeyDown:()=>!ib&&la(Ha,0,{commit:!0}),onEndKeyDown:()=>!ib&&la(Ta,ie.length-1,{commit:!0}),onStepKeyDown:({event:Se,direction:Xe})=>{if(!ib){Se=Cy.includes(Se.key)||Se.shiftKey&&
Dy.includes(Se.key);const Pd=vd.current;la(ie[Pd]+Xa*(Se?10:1)*Xe,Pd,{commit:!0})}}})))),We&&ie.map((Se,Xe)=>(0,Ei.createElement)(Ho,{key:Xe,name:sa?sa+(1<ie.length?"[]":""):void 0,value:Se})))}),[Kr,Fy]=Ey("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),rH=(0,Ei.forwardRef)((a,d)=>{function k(kc){const ec=Hb.current||Db.getBoundingClientRect(),Mc=Gl([0,ec.width],Ub?[H,fa]:[fa,H]);Hb.current=ec;return Mc(kc-ec.left)}const {min:H,max:fa,dir:la,inverted:sa,onSlideStart:Ha,onSlideMove:Ta,
onSlideEnd:Xa,onStepKeyDown:eb}=a,ib=Mf(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Db,Ob]=(0,Ei.useState)(null);d=uh(d,kc=>Ob(kc));const Hb=(0,Ei.useRef)(),cc=ko(la),sc="ltr"===cc,Ub=sc&&!sa||!sc&&sa;return(0,Ei.createElement)(Kr,{scope:a.__scopeSlider,startEdge:Ub?"left":"right",endEdge:Ub?"right":"left",direction:Ub?1:-1,size:"width"},(0,Ei.createElement)(Gy,gf({dir:cc,"data-orientation":"horizontal"},ib,{ref:d,style:lf(he({},ib.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),
onSlideStart:kc=>{kc=k(kc.clientX);null===Ha||void 0===Ha||Ha(kc)},onSlideMove:kc=>{kc=k(kc.clientX);null===Ta||void 0===Ta||Ta(kc)},onSlideEnd:()=>{Hb.current=void 0;null===Xa||void 0===Xa||Xa()},onStepKeyDown:kc=>{const ec=av[Ub?"from-left":"from-right"].includes(kc.key);null===eb||void 0===eb||eb({event:kc,direction:ec?-1:1})}})))}),sH=(0,Ei.forwardRef)((a,d)=>{function k(Hb){const cc=Db.current||ib.current.getBoundingClientRect(),sc=Gl([0,cc.height],Ob?[fa,H]:[H,fa]);Db.current=cc;return sc(Hb-
cc.top)}const {min:H,max:fa,inverted:la,onSlideStart:sa,onSlideMove:Ha,onSlideEnd:Ta,onStepKeyDown:Xa}=a,eb=Mf(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),ib=(0,Ei.useRef)(null);d=uh(d,ib);const Db=(0,Ei.useRef)(),Ob=!la;return(0,Ei.createElement)(Kr,{scope:a.__scopeSlider,startEdge:Ob?"bottom":"top",endEdge:Ob?"top":"bottom",size:"height",direction:Ob?1:-1},(0,Ei.createElement)(Gy,gf({"data-orientation":"vertical"},eb,{ref:d,style:lf(he({},eb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),
onSlideStart:Hb=>{Hb=k(Hb.clientY);null===sa||void 0===sa||sa(Hb)},onSlideMove:Hb=>{Hb=k(Hb.clientY);null===Ha||void 0===Ha||Ha(Hb)},onSlideEnd:()=>{Db.current=void 0;null===Ta||void 0===Ta||Ta()},onStepKeyDown:Hb=>{const cc=av[Ob?"from-bottom":"from-top"].includes(Hb.key);null===Xa||void 0===Xa||Xa({event:Hb,direction:cc?-1:1})}})))}),Gy=(0,Ei.forwardRef)((a,d)=>{const {__scopeSlider:k,onSlideStart:H,onSlideMove:fa,onSlideEnd:la,onHomeKeyDown:sa,onEndKeyDown:Ha,onStepKeyDown:Ta}=a,Xa=Mf(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
eb=fp("Slider",k);return(0,Ei.createElement)(al.span,gf({},Xa,{ref:d,onKeyDown:ig(a.onKeyDown,ib=>{"Home"===ib.key?(sa(ib),ib.preventDefault()):"End"===ib.key?(Ha(ib),ib.preventDefault()):Cy.concat(Dy).includes(ib.key)&&(Ta(ib),ib.preventDefault())}),onPointerDown:ig(a.onPointerDown,ib=>{const Db=ib.target;Db.setPointerCapture(ib.pointerId);ib.preventDefault();eb.thumbs.has(Db)?Db.focus():H(ib)}),onPointerMove:ig(a.onPointerMove,ib=>{ib.target.hasPointerCapture(ib.pointerId)&&fa(ib)}),onPointerUp:ig(a.onPointerUp,
ib=>{const Db=ib.target;Db.hasPointerCapture(ib.pointerId)&&(Db.releasePointerCapture(ib.pointerId),la(ib))})}))}),cf=(0,Ei.forwardRef)((a,d)=>{var {__scopeSlider:k}=a;a=Mf(a,["__scopeSlider"]);k=fp("SliderTrack",k);return(0,Ei.createElement)(al.span,gf({"data-disabled":k.disabled?"":void 0,"data-orientation":k.orientation},a,{ref:d}))}),yg=(0,Ei.forwardRef)((a,d)=>{var {__scopeSlider:k}=a;const H=Mf(a,["__scopeSlider"]),fa=fp("SliderRange",k);k=Fy("SliderRange",k);var la=(0,Ei.useRef)(null);d=uh(d,
la);var sa=fa.values.length;la=fa.values.map(Ha=>oj(Ha,fa.min,fa.max));sa=1<sa?Math.min(...la):0;la=100-Math.max(...la);return(0,Ei.createElement)(al.span,gf({"data-orientation":fa.orientation,"data-disabled":fa.disabled?"":void 0},H,{ref:d,style:lf(he({},a.style),{[k.startEdge]:sa+"%",[k.endEdge]:la+"%"})}))}),kf=(0,Ei.forwardRef)((a,d)=>{const k=pH(a.__scopeSlider),[H,fa]=(0,Ei.useState)(null);d=uh(d,sa=>fa(sa));const la=(0,Ei.useMemo)(()=>H?k().findIndex(sa=>sa.ref.current===H):-1,[k,H]);return(0,Ei.createElement)(Zf,
gf({},a,{ref:d,index:la}))}),Zf=(0,Ei.forwardRef)((a,d)=>{const {__scopeSlider:k,index:H}=a,fa=Mf(a,["__scopeSlider","index"]),la=fp("SliderThumb",k),sa=Fy("SliderThumb",k),[Ha,Ta]=(0,Ei.useState)(null);d=uh(d,Ob=>Ta(Ob));var Xa=yi(Ha);const eb=la.values[H],ib=void 0===eb?0:oj(eb,la.min,la.max),Db=pp(H,la.values.length);Xa=(Xa=null===Xa||void 0===Xa?void 0:Xa[sa.size])?Fl(Xa,ib,sa.direction):0;(0,Ei.useEffect)(()=>{if(Ha)return la.thumbs.add(Ha),()=>{la.thumbs.delete(Ha)}},[Ha,la.thumbs]);return(0,Ei.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[sa.startEdge]:`calc(${ib}% + ${Xa}px)`}},(0,Ei.createElement)(Aw.ItemSlot,{scope:a.__scopeSlider},(0,Ei.createElement)(al.span,gf({role:"slider","aria-label":a["aria-label"]||Db,"aria-valuemin":la.min,"aria-valuenow":eb,"aria-valuemax":la.max,"aria-orientation":la.orientation,"data-orientation":la.orientation,"data-disabled":la.disabled?"":void 0,tabIndex:la.disabled?void 0:0},fa,{ref:d,style:void 0===eb?{display:"none"}:
a.style,onFocus:ig(a.onFocus,()=>{la.valueIndexToChangeRef.current=H})}))))}),Ho=a=>{const {value:d}=a;a=Mf(a,["value"]);const k=(0,Ei.useRef)(null),H=Dn(d);(0,Ei.useEffect)(()=>{const fa=k.current,la=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(H!==d&&la){const sa=new Event("input",{bubbles:!0});la.call(fa,d);fa.dispatchEvent(sa)}},[H,d]);return(0,Ei.createElement)("input",gf({style:{display:"none"}},a,{ref:k,defaultValue:d}))},wl=St,bv=cf,xk=yg,oq=kf,Oe=yf(da(22)),
cg=da(590),In=rf(a=>{var {side:d,align:k,alignOffset:H,label:fa,arrow:la,children:sa,border:Ha}=a;a=Mf(a,"side align alignOffset label arrow children border".split(" "));const Ta=Oe.useRef(null),[Xa,eb]=Oe.useState(!1),{viewport:{bounds:ib,camera:{point:Db,zoom:Ob}}}=He(),[Hb,cc]=Oe.useState(0);Oe.useEffect(()=>{if(Ta.current&&Xa){var sc=Ta.current.getBoundingClientRect();Bf.boundsContain(ib,{minX:sc.x,minY:sc.y,maxX:sc.right,maxY:sc.bottom,width:sc.width,height:sc.height})||cc(Ub=>Ub+1)}},[Db[0],
Db[1],Ob,Xa]);return(0,cg.jsxs)(Rs,{onOpenChange:sc=>eb(sc),children:[(0,cg.jsx)(yw,lf(he({},a),{"data-border":Ha,className:"tl-button tl-popover-trigger-button",children:fa})),(0,cg.jsxs)(zw,{ref:Ta,className:"tl-popover-content",align:k,alignOffset:H,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[sa,la&&(0,cg.jsx)(nC,{className:"tl-popover-arrow"})]},"popover-content-"+Hb)]})}),Le=yf(da(22)),Sk=da(590),oC=yf(da(22)),Ff=da(22),Tt=da(31),il=yf(da(22)),Kl=
da(22),cv=da(22),Jn=da(31),xl="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const k=(0,cv.forwardRef)((H,fa)=>{var {asChild:la}=H;H=Mf(H,["asChild"]);la=la?kq:d;(0,cv.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,cv.createElement)(la,gf({},H,{ref:fa}))});k.displayName=`Primitive.${d}`;return lf(he({},a),{[d]:k})},{}),Vq,Bp=(0,Kl.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xg=(0,Kl.forwardRef)((a,
d)=>{var k;const {disableOutsidePointerEvents:H=!1,onEscapeKeyDown:fa,onPointerDownOutside:la,onFocusOutside:sa,onInteractOutside:Ha,onDismiss:Ta}=a,Xa=Mf(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),eb=(0,Kl.useContext)(Bp),[ib,Db]=(0,Kl.useState)(null),Ob=null!==(k=null===ib||void 0===ib?void 0:ib.ownerDocument)&&void 0!==k?k:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Hb]=(0,Kl.useState)({});
d=uh(d,ec=>Db(ec));k=Array.from(eb.layers);var [cc]=[...eb.layersWithOutsidePointerEventsDisabled].slice(-1);cc=k.indexOf(cc);const sc=ib?k.indexOf(ib):-1;k=0<eb.layersWithOutsidePointerEventsDisabled.size;const Ub=sc>=cc;cc=Qo(ec=>{const Mc=ec.target,Oc=[...eb.branches].some(vd=>vd.contains(Mc));Ub&&!Oc&&(null===la||void 0===la||la(ec),null===Ha||void 0===Ha||Ha(ec),ec.defaultPrevented||null===Ta||void 0===Ta||Ta())},Ob);const kc=kl(ec=>{const Mc=ec.target;[...eb.branches].some(Oc=>Oc.contains(Mc))||
(null===sa||void 0===sa||sa(ec),null===Ha||void 0===Ha||Ha(ec),ec.defaultPrevented||null===Ta||void 0===Ta||Ta())},Ob);Zk(ec=>{sc===eb.layers.size-1&&(null===fa||void 0===fa||fa(ec),!ec.defaultPrevented&&Ta&&(ec.preventDefault(),Ta()))},Ob);(0,Kl.useEffect)(()=>{if(ib)return H&&(0===eb.layersWithOutsidePointerEventsDisabled.size&&(Vq=Ob.body.style.pointerEvents,Ob.body.style.pointerEvents="none"),eb.layersWithOutsidePointerEventsDisabled.add(ib)),eb.layers.add(ib),tm(),()=>{H&&1===eb.layersWithOutsidePointerEventsDisabled.size&&
(Ob.body.style.pointerEvents=Vq)}},[ib,Ob,H,eb]);(0,Kl.useEffect)(()=>()=>{ib&&(eb.layers.delete(ib),eb.layersWithOutsidePointerEventsDisabled.delete(ib),tm())},[ib,eb]);(0,Kl.useEffect)(()=>{const ec=()=>Hb({});document.addEventListener("dismissableLayer.update",ec);return()=>document.removeEventListener("dismissableLayer.update",ec)},[]);return(0,Kl.createElement)(xl.div,gf({},Xa,{ref:d,style:he({pointerEvents:k?Ub?"auto":"none":void 0},a.style),onFocusCapture:ig(a.onFocusCapture,kc.onFocusCapture),
onBlurCapture:ig(a.onBlurCapture,kc.onBlurCapture),onPointerDownCapture:ig(a.onPointerDownCapture,cc.onPointerDownCapture)}))}),yl=da(22),pq={bubbles:!1,cancelable:!0},pC=(0,yl.forwardRef)((a,d)=>{const {loop:k=!1,trapped:H=!1,onMountAutoFocus:fa,onUnmountAutoFocus:la}=a;a=Mf(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [sa,Ha]=(0,yl.useState)(null),Ta=Mi(fa),Xa=Mi(la),eb=(0,yl.useRef)(null);d=uh(d,Ob=>Ha(Ob));const ib=(0,yl.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,yl.useEffect)(()=>{if(H){let Ob=function(cc){!ib.paused&&sa&&(cc=cc.target,sa.contains(cc)?eb.current=cc:Ml(eb.current,{select:!0}))},Hb=function(cc){!ib.paused&&sa&&(sa.contains(cc.relatedTarget)||Ml(eb.current,{select:!0}))};document.addEventListener("focusin",Ob);document.addEventListener("focusout",Hb);return()=>{document.removeEventListener("focusin",Ob);document.removeEventListener("focusout",Hb)}}},[H,sa,ib.paused]);(0,yl.useEffect)(()=>{if(sa){Lr.add(ib);const Ob=document.activeElement;
if(!sa.contains(Ob)){const Hb=new CustomEvent("focusScope.autoFocusOnMount",pq);sa.addEventListener("focusScope.autoFocusOnMount",Ta);sa.dispatchEvent(Hb);Hb.defaultPrevented||(en(Ug(Np(sa)),{select:!0}),document.activeElement===Ob&&Ml(sa))}return()=>{sa.removeEventListener("focusScope.autoFocusOnMount",Ta);setTimeout(()=>{const Hb=new CustomEvent("focusScope.autoFocusOnUnmount",pq);sa.addEventListener("focusScope.autoFocusOnUnmount",Xa);sa.dispatchEvent(Hb);Hb.defaultPrevented||Ml(null!==Ob&&void 0!==
Ob?Ob:document.body,{select:!0});sa.removeEventListener("focusScope.autoFocusOnUnmount",Xa);Lr.remove(ib)},0)}}},[sa,Ta,Xa,ib]);const Db=(0,yl.useCallback)(Ob=>{if((k||H)&&!ib.paused){var Hb=document.activeElement;if("Tab"===Ob.key&&!Ob.altKey&&!Ob.ctrlKey&&!Ob.metaKey&&Hb){const sc=Ob.currentTarget;var cc=sc;const Ub=Np(cc),kc=oo(Ub,cc);cc=oo(Ub.reverse(),cc);const [ec,Mc]=[kc,cc];ec&&Mc?Ob.shiftKey||Hb!==Mc?Ob.shiftKey&&Hb===ec&&(Ob.preventDefault(),k&&Ml(Mc,{select:!0})):(Ob.preventDefault(),k&&
Ml(ec,{select:!0})):Hb===sc&&Ob.preventDefault()}}},[k,H,ib.paused]);return(0,yl.createElement)(xl.div,gf({tabIndex:-1},a,{ref:d,onKeyDown:Db}))}),Lr=function(){let a=[];return{add(d){const k=a[0];d===k||null!==k&&void 0!==k&&k.pause();a=tn(a,d);a.unshift(d)},remove(d){var k;a=tn(a,d);null===(k=a[0])||void 0===k||k.resume()}}}(),vg=da(22),[Bw,qq]=Dj("Popper"),[gh,Ut]=Bw("Popper"),lk=(0,vg.forwardRef)((a,d)=>{const {__scopePopper:k,virtualRef:H}=a;a=Mf(a,["__scopePopper","virtualRef"]);const fa=Ut("PopperAnchor",
k),la=(0,vg.useRef)(null);d=uh(d,la);(0,vg.useEffect)(()=>{fa.onAnchorChange((null===H||void 0===H?void 0:H.current)||la.current)});return H?null:(0,vg.createElement)(xl.div,gf({},a,{ref:d}))}),[zl]=Bw("PopperContent"),[Vt,dv]=Bw("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Hy=(0,vg.forwardRef)((a,d)=>{var k,H,fa,la,sa,Ha,Ta,Xa;const {__scopePopper:eb,side:ib="bottom",sideOffset:Db=0,align:Ob="center",alignOffset:Hb=0,arrowPadding:cc=0,collisionBoundary:sc=[],collisionPadding:Ub=0,sticky:kc=
"partial",hideWhenDetached:ec=!1,avoidCollisions:Mc=!0,onPlaced:Oc}=a,vd=Mf(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),Kd=Ut("PopperContent",eb),[We,ie]=(0,vg.useState)(null);d=uh(d,wq=>ie(wq));const [Je,Hf]=(0,vg.useState)(null);var Se=yi(Je),Xe=null!==(k=null===Se||void 0===Se?void 0:Se.width)&&void 0!==k?k:0;k=null!==(H=null===Se||void 0===Se?void 0:Se.height)&&void 0!==H?H:0;H=
ib+("center"!==Ob?"-"+Ob:"");Se="number"===typeof Ub?Ub:he({top:0,right:0,bottom:0,left:0},Ub);const Pd=Array.isArray(sc)?sc:[sc],ld=0<Pd.length;Se={padding:Se,boundary:Pd.filter(Op),altBoundary:ld};const {reference:Qd,floating:hd,strategy:Dd,x:Me,y:nf,placement:Vf,middlewareData:If,update:kg}=rg({strategy:"fixed",placement:H,whileElementsMounted:mg,middleware:[Wt(),FB({mainAxis:Db+k,alignmentAxis:Hb}),Mc?GB(he({mainAxis:!0,crossAxis:!1,limiter:"partial"===kc?HB():void 0},Se)):void 0,Je?KB({element:Je,
padding:cc}):void 0,Mc?DB(he({},Se)):void 0,pG(lf(he({},Se),{apply:({elements:wq,availableWidth:tu,availableHeight:DD})=>{wq.floating.style.setProperty("--radix-popper-available-width",`${tu}px`);wq.floating.style.setProperty("--radix-popper-available-height",`${DD}px`)}})),bm({arrowWidth:Xe,arrowHeight:k}),ec?EB({strategy:"referenceHidden"}):void 0].filter(Pp)});Em(()=>{Qd(Kd.anchor)},[Qd,Kd.anchor]);const hh=null!==Me&&null!==nf,[Qf,ch]=un(Vf),Hh=Mi(Oc);Em(()=>{hh&&(null===Hh||void 0===Hh||Hh())},
[hh,Hh]);Xe=null===(fa=If.arrow)||void 0===fa?void 0:fa.x;fa=null===(la=If.arrow)||void 0===la?void 0:la.y;la=0!==(null===(sa=If.arrow)||void 0===sa?void 0:sa.centerOffset);const [nj,Dk]=(0,vg.useState)();Em(()=>{We&&Dk(window.getComputedStyle(We).zIndex)},[We]);const {hasParent:Vk,positionUpdateFns:Mp}=dv("PopperContent",eb),hr=!Vk;(0,vg.useLayoutEffect)(()=>{if(!hr)return Mp.add(kg),()=>{Mp.delete(kg)}},[hr,Mp,kg]);Em(()=>{hr&&hh&&Array.from(Mp).reverse().forEach(wq=>requestAnimationFrame(wq))},
[hr,hh,Mp]);sa=lf(he({"data-side":Qf,"data-align":ch},vd),{ref:d,style:lf(he({},vd.style),{animation:hh?void 0:"none",opacity:null!==(Ha=If.hide)&&void 0!==Ha&&Ha.referenceHidden?0:void 0})});return(0,vg.createElement)("div",{ref:hd,"data-radix-popper-content-wrapper":"",style:{position:Dd,left:0,top:0,transform:hh?`translate3d(${Math.round(Me)}px, ${Math.round(nf)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:nj,["--radix-popper-transform-origin"]:[null===(Ta=If.transformOrigin)||
void 0===Ta?void 0:Ta.x,null===(Xa=If.transformOrigin)||void 0===Xa?void 0:Xa.y].join(" ")},dir:a.dir},(0,vg.createElement)(zl,{scope:eb,placedSide:Qf,onArrowChange:Hf,arrowX:Xe,arrowY:fa,shouldHideArrow:la},hr?(0,vg.createElement)(Vt,{scope:eb,hasParent:!0,positionUpdateFns:Mp},(0,vg.createElement)(xl.div,sa)):(0,vg.createElement)(xl.div,sa)))}),Wt=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:k}=a,{width:H,height:fa}=d.reference;k.floating.style.setProperty("--radix-popper-anchor-width",
`${H}px`);k.floating.style.setProperty("--radix-popper-anchor-height",`${fa}px`);return{}}}),bm=a=>({name:"transformOrigin",options:a,fn(d){var k,H,fa,la,sa;const {placement:Ha,rects:Ta,middlewareData:Xa}=d,eb=(d=0!==(null===(k=Xa.arrow)||void 0===k?void 0:k.centerOffset))?0:a.arrowWidth;k=d?0:a.arrowHeight;const [ib,Db]=un(Ha),Ob={start:"0%",center:"50%",end:"100%"}[Db],Hb=(null!==(H=null===(fa=Xa.arrow)||void 0===fa?void 0:fa.x)&&void 0!==H?H:0)+eb/2;H=(null!==(la=null===(sa=Xa.arrow)||void 0===
sa?void 0:sa.y)&&void 0!==la?la:0)+k/2;sa=la="";"bottom"===ib?(la=d?Ob:`${Hb}px`,sa=`${-k}px`):"top"===ib?(la=d?Ob:`${Hb}px`,sa=`${Ta.floating.height+k}px`):"right"===ib?(la=`${-k}px`,sa=d?Ob:`${H}px`):"left"===ib&&(la=`${Ta.floating.width+k}px`,sa=d?Ob:`${H}px`);return{data:{x:la,y:sa}}}}),qC=a=>{const {__scopePopper:d,children:k}=a,[H,fa]=(0,vg.useState)(null);return(0,vg.createElement)(gh,{scope:d,anchor:H,onAnchorChange:fa},k)},rC=da(22),tH=yf(da(31)),uH=(0,rC.forwardRef)((a,d)=>{var k;const {container:H=
null===globalThis||void 0===globalThis?void 0:null===(k=globalThis.document)||void 0===k?void 0:k.body}=a;a=Mf(a,["container"]);return H?tH.default.createPortal((0,rC.createElement)(xl.div,gf({},a,{ref:d})),H):null}),Wq=da(22),Mr=(0,Wq.forwardRef)((a,d)=>(0,Wq.createElement)(xl.span,gf({},a,{ref:d,style:he({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),Zj=[" ","Enter","ArrowUp","ArrowDown"],
sC=[" ","Enter"],[Xt,Cw,Nr]=function(a){var d=a+"CollectionProvider";const [k,H]=Dj(d),[fa,la]=k(d,{collectionRef:{current:null},itemMap:new Map}),sa=eb=>{const {scope:ib,children:Db}=eb;eb=il.default.useRef(null);const Ob=il.default.useRef(new Map).current;return il.default.createElement(fa,{scope:ib,itemMap:Ob,collectionRef:eb},Db)};Object.assign(sa,{displayName:d});const Ha=a+"CollectionSlot";d=il.default.forwardRef((eb,ib)=>{const {scope:Db,children:Ob}=eb;eb=la(Ha,Db);ib=uh(ib,eb.collectionRef);
return il.default.createElement(kq,{ref:ib},Ob)});Object.assign(d,{displayName:Ha});const Ta=a+"CollectionItemSlot",Xa=il.default.forwardRef((eb,ib)=>{const {scope:Db,children:Ob}=eb,Hb=Mf(eb,["scope","children"]),cc=il.default.useRef(null);eb=uh(ib,cc);const sc=la(Ta,Db);il.default.useEffect(()=>{sc.itemMap.set(cc,he({ref:cc},Hb));return()=>void sc.itemMap.delete(cc)});return il.default.createElement(kq,{["data-radix-collection-item"]:"",ref:eb},Ob)});Object.assign(Xa,{displayName:Ta});return[{Provider:sa,
Slot:d,ItemSlot:Xa},function(eb){const ib=la(a+"CollectionConsumer",eb);return il.default.useCallback(()=>{const Db=ib.collectionRef.current;if(!Db)return[];const Ob=Array.from(Db.querySelectorAll("[data-radix-collection-item]"));return Array.from(ib.itemMap.values()).sort((Hb,cc)=>Ob.indexOf(Hb.ref.current)-Ob.indexOf(cc.ref.current))},[ib.collectionRef,ib.itemMap])},H]}("Select"),[Yt]=Dj("Select",[Nr,qq]),Zt=qq(),[vH,rq]=Yt("Select"),[Iy,Jy]=Yt("Select"),Ky=(0,Ff.forwardRef)((a,d)=>{const {__scopeSelect:k,
disabled:H=!1}=a;a=Mf(a,["__scopeSelect","disabled"]);const fa=Zt(k),la=rq("SelectTrigger",k),sa=la.disabled||H;d=uh(d,la.onTriggerChange);const Ha=Cw(k),[Ta,Xa,eb]=Pl(ib=>{const Db=Ha().filter(Hb=>!Hb.disabled),Ob=Db.find(Hb=>Hb.value===la.value);ib=em(Db,ib,Ob);if(void 0!==ib)la.onValueChange(ib.value)});return(0,Ff.createElement)(lk,gf({asChild:!0},fa),(0,Ff.createElement)(xl.button,gf({type:"button",role:"combobox","aria-controls":la.contentId,"aria-expanded":la.open,"aria-required":la.required,
"aria-autocomplete":"none",dir:la.dir,"data-state":la.open?"open":"closed",disabled:sa,"data-disabled":sa?"":void 0,"data-placeholder":void 0===la.value?"":void 0},a,{ref:d,onClick:ig(a.onClick,ib=>{ib.currentTarget.focus()}),onPointerDown:ig(a.onPointerDown,ib=>{const Db=ib.target;Db.hasPointerCapture(ib.pointerId)&&Db.releasePointerCapture(ib.pointerId);0===ib.button&&!1===ib.ctrlKey&&(sa||(la.onOpenChange(!0),eb()),la.triggerPointerDownPosRef.current={x:Math.round(ib.pageX),y:Math.round(ib.pageY)},
ib.preventDefault())}),onKeyDown:ig(a.onKeyDown,ib=>{const Db=""!==Ta.current;ib.ctrlKey||ib.altKey||ib.metaKey||1!==ib.key.length||Xa(ib.key);Db&&" "===ib.key||!Zj.includes(ib.key)||(sa||(la.onOpenChange(!0),eb()),ib.preventDefault())})})))}),tC=(0,Ff.forwardRef)((a,d)=>{const {__scopeSelect:k,children:H,placeholder:fa}=a;a=Mf(a,["__scopeSelect","className","style","children","placeholder"]);const la=rq("SelectValue",k),{onValueNodeHasChildrenChange:sa}=la,Ha=void 0!==H;d=uh(d,la.onValueNodeChange);
Em(()=>{sa(Ha)},[sa,Ha]);return(0,Ff.createElement)(xl.span,gf({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===la.value&&void 0!==fa?fa:H)}),uC=(0,Ff.forwardRef)((a,d)=>{const {children:k}=a;a=Mf(a,["__scopeSelect","children"]);return(0,Ff.createElement)(xl.span,gf({"aria-hidden":!0},a,{ref:d}),k||"▼")}),vC=(0,Ff.forwardRef)((a,d)=>{const k=rq("SelectContent",a.__scopeSelect),[H,fa]=(0,Ff.useState)();Em(()=>{fa(new DocumentFragment)},[]);return k.open?(0,Ff.createElement)(Ly,gf({},a,{ref:d})):
H?(0,Tt.createPortal)((0,Ff.createElement)(Or,{scope:a.__scopeSelect},(0,Ff.createElement)(Xt.Slot,{scope:a.__scopeSelect},(0,Ff.createElement)("div",null,a.children))),H):null}),[Or,Io]=Yt("SelectContent"),Ly=(0,Ff.forwardRef)((a,d)=>{const {__scopeSelect:k,position:H="item-aligned",onCloseAutoFocus:fa,onEscapeKeyDown:la,onPointerDownOutside:sa,side:Ha,sideOffset:Ta,align:Xa,alignOffset:eb,arrowPadding:ib,collisionBoundary:Db,collisionPadding:Ob,sticky:Hb,hideWhenDetached:cc,avoidCollisions:sc}=
a;a=Mf(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Ub=rq("SelectContent",k),[kc,ec]=(0,Ff.useState)(null),[Mc,Oc]=(0,Ff.useState)(null);d=uh(d,Qf=>ec(Qf));const [vd,Kd]=(0,Ff.useState)(null),[We,ie]=(0,Ff.useState)(null),Je=Cw(k),[Hf,Se]=(0,Ff.useState)(!1),Xe=(0,Ff.useRef)(!1);(0,Ff.useEffect)(()=>{if(kc)return ny(kc)},[kc]);
ki();const Pd=(0,Ff.useCallback)(Qf=>{const [ch,...Hh]=Je().map(Vk=>Vk.ref.current),[nj]=Hh.slice(-1),Dk=document.activeElement;for(const Vk of Qf){if(Vk===Dk)break;null===Vk||void 0===Vk||Vk.scrollIntoView({block:"nearest"});Vk===ch&&Mc&&(Mc.scrollTop=0);Vk===nj&&Mc&&(Mc.scrollTop=Mc.scrollHeight);null===Vk||void 0===Vk||Vk.focus();if(document.activeElement!==Dk)break}},[Je,Mc]),ld=(0,Ff.useCallback)(()=>Pd([vd,kc]),[Pd,vd,kc]);(0,Ff.useEffect)(()=>{Hf&&ld()},[Hf,ld]);const {onOpenChange:Qd,triggerPointerDownPosRef:hd}=
Ub;(0,Ff.useEffect)(()=>{if(kc){var Qf=0,ch=0;const Hh=Dk=>{var Vk,Mp,hr,wq;Qf=Math.abs(Math.round(Dk.pageX)-(null!==(Vk=null===(Mp=hd.current)||void 0===Mp?void 0:Mp.x)&&void 0!==Vk?Vk:0));ch=Math.abs(Math.round(Dk.pageY)-(null!==(hr=null===(wq=hd.current)||void 0===wq?void 0:wq.y)&&void 0!==hr?hr:0))},nj=Dk=>{10>=Qf&&10>=ch?Dk.preventDefault():kc.contains(Dk.target)||Qd(!1);document.removeEventListener("pointermove",Hh);hd.current=null};null!==hd.current&&(document.addEventListener("pointermove",
Hh),document.addEventListener("pointerup",nj,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Hh);document.removeEventListener("pointerup",nj,{capture:!0})}}},[kc,Qd,hd]);(0,Ff.useEffect)(()=>{const Qf=()=>Qd(!1);window.addEventListener("blur",Qf);window.addEventListener("resize",Qf);return()=>{window.removeEventListener("blur",Qf);window.removeEventListener("resize",Qf)}},[Qd]);const [Dd,Me]=Pl(Qf=>{const ch=Je().filter(Dk=>!Dk.disabled),Hh=ch.find(Dk=>Dk.ref.current===
document.activeElement),nj=em(ch,Qf,Hh);nj&&setTimeout(()=>nj.ref.current.focus())}),nf=(0,Ff.useCallback)((Qf,ch,Hh)=>{Hh=!Xe.current&&!Hh;if(void 0!==Ub.value&&Ub.value===ch||Hh)Kd(Qf),Hh&&(Xe.current=!0)},[Ub.value]),Vf=(0,Ff.useCallback)(()=>null===kc||void 0===kc?void 0:kc.focus(),[kc]),If=(0,Ff.useCallback)((Qf,ch,Hh)=>{Hh=!Xe.current&&!Hh;(void 0!==Ub.value&&Ub.value===ch||Hh)&&ie(Qf)},[Ub.value]),kg="popper"===H?My:wC,hh=kg===My?{side:Ha,sideOffset:Ta,align:Xa,alignOffset:eb,arrowPadding:ib,
collisionBoundary:Db,collisionPadding:Ob,sticky:Hb,hideWhenDetached:cc,avoidCollisions:sc}:{};return(0,Ff.createElement)(Or,{scope:k,content:kc,viewport:Mc,onViewportChange:Oc,itemRefCallback:nf,selectedItem:vd,onItemLeave:Vf,itemTextRefCallback:If,focusSelectedItem:ld,selectedItemText:We,position:H,isPositioned:Hf,searchRef:Dd},(0,Ff.createElement)(Rk,{as:kq,allowPinchZoom:!0},(0,Ff.createElement)(pC,{asChild:!0,trapped:Ub.open,onMountAutoFocus:Qf=>{Qf.preventDefault()},onUnmountAutoFocus:ig(fa,
Qf=>{var ch;null===(ch=Ub.trigger)||void 0===ch||ch.focus({preventScroll:!0});Qf.preventDefault()})},(0,Ff.createElement)(Xg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:la,onPointerDownOutside:sa,onFocusOutside:Qf=>Qf.preventDefault(),onDismiss:()=>Ub.onOpenChange(!1)},(0,Ff.createElement)(kg,gf({role:"listbox",id:Ub.contentId,"data-state":Ub.open?"open":"closed",dir:Ub.dir,onContextMenu:Qf=>Qf.preventDefault()},a,hh,{onPlaced:()=>Se(!0),ref:d,style:he({display:"flex",flexDirection:"column",
outline:"none"},a.style),onKeyDown:ig(a.onKeyDown,Qf=>{var ch=Qf.ctrlKey||Qf.altKey||Qf.metaKey;"Tab"===Qf.key&&Qf.preventDefault();ch||1!==Qf.key.length||Me(Qf.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Qf.key)){let Hh=Je().filter(nj=>!nj.disabled).map(nj=>nj.ref.current);["ArrowUp","End"].includes(Qf.key)&&(Hh=Hh.slice().reverse());["ArrowUp","ArrowDown"].includes(Qf.key)&&(ch=Hh.indexOf(Qf.target),Hh=Hh.slice(ch+1));setTimeout(()=>Pd(Hh));Qf.preventDefault()}})}))))))}),wC=(0,Ff.forwardRef)((a,
d)=>{const {__scopeSelect:k,onPlaced:H}=a;a=Mf(a,["__scopeSelect","onPlaced"]);const fa=rq("SelectContent",k);var la=Io("SelectContent",k);const [sa,Ha]=(0,Ff.useState)(null),[Ta,Xa]=(0,Ff.useState)(null);d=uh(d,Mc=>Xa(Mc));const eb=Cw(k),ib=(0,Ff.useRef)(!1),Db=(0,Ff.useRef)(!0),{viewport:Ob,selectedItem:Hb,selectedItemText:cc,focusSelectedItem:sc}=la,Ub=(0,Ff.useCallback)(()=>{if(fa.trigger&&fa.valueNode&&sa&&Ta&&Ob&&Hb&&cc){var Mc=fa.trigger.getBoundingClientRect(),Oc=Ta.getBoundingClientRect(),
vd=fa.valueNode.getBoundingClientRect(),Kd=cc.getBoundingClientRect();"rtl"!==fa.dir?(Kd=vd.left-(Kd.left-Oc.left),vd=Mc.width+(Mc.left-Kd),Oc=nn(Kd,[10,window.innerWidth-10-Math.max(vd,Oc.width)]),sa.style.minWidth=vd+"px",sa.style.left=Oc+"px"):(Kd=window.innerWidth-vd.right-(Oc.right-Kd.right),vd=Mc.width+(window.innerWidth-Mc.right-Kd),Oc=nn(Kd,[10,window.innerWidth-10-Math.max(vd,Oc.width)]),sa.style.minWidth=vd+"px",sa.style.right=Oc+"px");const Xe=eb();Oc=window.innerHeight-20;var We=Ob.scrollHeight,
ie=window.getComputedStyle(Ta);vd=parseInt(ie.borderTopWidth,10);var Je=parseInt(ie.paddingTop,10);Kd=parseInt(ie.borderBottomWidth,10);ie=parseInt(ie.paddingBottom,10);var Hf=vd+Je+We+ie+Kd;We=Math.min(5*Hb.offsetHeight,Hf);var Se=window.getComputedStyle(Ob);ie=parseInt(Se.paddingTop,10);Se=parseInt(Se.paddingBottom,10);const Pd=Mc.top+Mc.height/2-10,ld=Oc-Pd;Mc=Hb.offsetHeight/2;Je=vd+Je+(Hb.offsetTop+Mc);Hf-=Je;Je<=Pd?(vd=Hb===Xe[Xe.length-1].ref.current,sa.style.bottom="0px",sa.style.height=Je+
Math.max(ld,Mc+(vd?Se:0)+(Ta.clientHeight-Ob.offsetTop-Ob.offsetHeight)+Kd)+"px"):(Kd=Hb===Xe[0].ref.current,sa.style.top="0px",sa.style.height=Math.max(Pd,vd+Ob.offsetTop+(Kd?ie:0)+Mc)+Hf+"px",Ob.scrollTop=Je-Pd+Ob.offsetTop);sa.style.margin="10px 0";sa.style.minHeight=We+"px";sa.style.maxHeight=Oc+"px";null===H||void 0===H||H();requestAnimationFrame(()=>ib.current=!0)}},[eb,fa.trigger,fa.valueNode,sa,Ta,Ob,Hb,cc,fa.dir,H]);Em(()=>Ub(),[Ub]);const [kc,ec]=(0,Ff.useState)();Em(()=>{Ta&&ec(window.getComputedStyle(Ta).zIndex)},
[Ta]);la=(0,Ff.useCallback)(Mc=>{Mc&&!0===Db.current&&(Ub(),null===sc||void 0===sc||sc(),Db.current=!1)},[Ub,sc]);return(0,Ff.createElement)($t,{scope:k,contentWrapper:sa,shouldExpandOnScrollRef:ib,onScrollButtonChange:la},(0,Ff.createElement)("div",{ref:Ha,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:kc}},(0,Ff.createElement)(xl.div,gf({},a,{ref:d,style:he({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),My=(0,Ff.forwardRef)((a,d)=>{const {__scopeSelect:k,align:H=
"start",collisionPadding:fa=10}=a;a=Mf(a,["__scopeSelect","align","collisionPadding"]);const la=Zt(k);return(0,Ff.createElement)(Hy,gf({},la,a,{ref:d,align:H,collisionPadding:fa,style:lf(he({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)",
"--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[$t,Pr]=Yt("SelectContent",{}),ev=(0,Ff.forwardRef)((a,d)=>{const {__scopeSelect:k}=a;a=Mf(a,["__scopeSelect"]);const H=Io("SelectViewport",k),fa=Pr("SelectViewport",k);d=uh(d,H.onViewportChange);const la=(0,Ff.useRef)(0);return(0,Ff.createElement)(Ff.Fragment,null,(0,Ff.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,Ff.createElement)(Xt.Slot,{scope:k},(0,Ff.createElement)(xl.div,gf({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:he({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:ig(a.onScroll,sa=>{sa=sa.currentTarget;const {contentWrapper:Ha,shouldExpandOnScrollRef:Ta}=fa;if(null!==Ta&&void 0!==Ta&&Ta.current&&Ha){var Xa=Math.abs(la.current-sa.scrollTop);if(0<Xa){var eb=window.innerHeight-20,ib=parseFloat(Ha.style.minHeight);const Db=parseFloat(Ha.style.height);ib=Math.max(ib,
Db);ib<eb&&(Xa=ib+Xa,eb=Math.min(eb,Xa),Xa-=eb,Ha.style.height=eb+"px","0px"===Ha.style.bottom&&(sa.scrollTop=0<Xa?Xa:0,Ha.style.justifyContent="flex-end"))}}la.current=sa.scrollTop})}))))});Yt("SelectGroup");var [fv,gv]=Yt("SelectItem"),Qr=(0,Ff.forwardRef)((a,d)=>{const {__scopeSelect:k,value:H,disabled:fa=!1,textValue:la}=a;a=Mf(a,["__scopeSelect","value","disabled","textValue"]);const sa=rq("SelectItem",k),Ha=Io("SelectItem",k),Ta=sa.value===H,[Xa,eb]=(0,Ff.useState)(null!==la&&void 0!==la?la:
""),[ib,Db]=(0,Ff.useState)(!1);d=uh(d,cc=>{var sc;return null===(sc=Ha.itemRefCallback)||void 0===sc?void 0:sc.call(Ha,cc,H,fa)});const Ob=ni(),Hb=()=>{fa||(sa.onValueChange(H),sa.onOpenChange(!1))};return(0,Ff.createElement)(fv,{scope:k,value:H,disabled:fa,textId:Ob,isSelected:Ta,onItemTextChange:(0,Ff.useCallback)(cc=>{eb(sc=>{var Ub;return sc||(null!==(Ub=null===cc||void 0===cc?void 0:cc.textContent)&&void 0!==Ub?Ub:"").trim()})},[])},(0,Ff.createElement)(Xt.ItemSlot,{scope:k,value:H,disabled:fa,
textValue:Xa},(0,Ff.createElement)(xl.div,gf({role:"option","aria-labelledby":Ob,"data-highlighted":ib?"":void 0,"aria-selected":Ta&&ib,"data-state":Ta?"checked":"unchecked","aria-disabled":fa||void 0,"data-disabled":fa?"":void 0,tabIndex:fa?void 0:-1},a,{ref:d,onFocus:ig(a.onFocus,()=>Db(!0)),onBlur:ig(a.onBlur,()=>Db(!1)),onPointerUp:ig(a.onPointerUp,Hb),onPointerMove:ig(a.onPointerMove,cc=>{if(fa){var sc;null===(sc=Ha.onItemLeave)||void 0===sc||sc.call(Ha)}else cc.currentTarget.focus({preventScroll:!0})}),
onPointerLeave:ig(a.onPointerLeave,cc=>{if(cc.currentTarget===document.activeElement){var sc;null===(sc=Ha.onItemLeave)||void 0===sc||sc.call(Ha)}}),onKeyDown:ig(a.onKeyDown,cc=>{var sc;if(""===(null===(sc=Ha.searchRef)||void 0===sc?void 0:sc.current)||" "!==cc.key)sC.includes(cc.key)&&Hb()," "===cc.key&&cc.preventDefault()})}))))}),gp=(0,Ff.forwardRef)((a,d)=>{var {__scopeSelect:k}=a;a=Mf(a,["__scopeSelect","className","style"]);const H=rq("SelectItemText",k),fa=Io("SelectItemText",k),la=gv("SelectItemText",
k);k=Jy("SelectItemText",k);const [sa,Ha]=(0,Ff.useState)(null);d=uh(d,Db=>Ha(Db),la.onItemTextChange,Db=>{var Ob;return null===(Ob=fa.itemTextRefCallback)||void 0===Ob?void 0:Ob.call(fa,Db,la.value,la.disabled)});const Ta=null===sa||void 0===sa?void 0:sa.textContent,Xa=(0,Ff.useMemo)(()=>(0,Ff.createElement)("option",{key:la.value,value:la.value,disabled:la.disabled},Ta),[la.disabled,la.value,Ta]),{onNativeOptionAdd:eb,onNativeOptionRemove:ib}=k;Em(()=>{eb(Xa);return()=>ib(Xa)},[eb,ib,Xa]);return(0,Ff.createElement)(Ff.Fragment,
null,(0,Ff.createElement)(xl.span,gf({id:la.textId},a,{ref:d})),la.isSelected&&H.valueNode&&!H.valueNodeHasChildren?(0,Tt.createPortal)(a.children,H.valueNode):null)}),xC=(0,Ff.forwardRef)((a,d)=>{const k=Io("SelectScrollUpButton",a.__scopeSelect),H=Pr("SelectScrollUpButton",a.__scopeSelect),[fa,la]=(0,Ff.useState)(!1);d=uh(d,H.onScrollButtonChange);Em(()=>{if(k.viewport&&k.isPositioned){let sa=function(){la(0<Ha.scrollTop)};const Ha=k.viewport;sa();Ha.addEventListener("scroll",sa);return()=>Ha.removeEventListener("scroll",
sa)}},[k.viewport,k.isPositioned]);return fa?(0,Ff.createElement)(Ss,gf({},a,{ref:d,onAutoScroll:()=>{const {viewport:sa,selectedItem:Ha}=k;sa&&Ha&&(sa.scrollTop-=Ha.offsetHeight)}})):null}),Jo=(0,Ff.forwardRef)((a,d)=>{const k=Io("SelectScrollDownButton",a.__scopeSelect),H=Pr("SelectScrollDownButton",a.__scopeSelect),[fa,la]=(0,Ff.useState)(!1);d=uh(d,H.onScrollButtonChange);Em(()=>{if(k.viewport&&k.isPositioned){let sa=function(){la(Math.ceil(Ha.scrollTop)<Ha.scrollHeight-Ha.clientHeight)};const Ha=
k.viewport;sa();Ha.addEventListener("scroll",sa);return()=>Ha.removeEventListener("scroll",sa)}},[k.viewport,k.isPositioned]);return fa?(0,Ff.createElement)(Ss,gf({},a,{ref:d,onAutoScroll:()=>{const {viewport:sa,selectedItem:Ha}=k;sa&&Ha&&(sa.scrollTop+=Ha.offsetHeight)}})):null}),Ss=(0,Ff.forwardRef)((a,d)=>{const {__scopeSelect:k,onAutoScroll:H}=a;a=Mf(a,["__scopeSelect","onAutoScroll"]);const fa=Io("SelectScrollButton",k),la=(0,Ff.useRef)(null),sa=Cw(k),Ha=(0,Ff.useCallback)(()=>{null!==la.current&&
(window.clearInterval(la.current),la.current=null)},[]);(0,Ff.useEffect)(()=>()=>Ha(),[Ha]);Em(()=>{var Ta;const Xa=sa().find(eb=>eb.ref.current===document.activeElement);null===Xa||void 0===Xa||null===(Ta=Xa.ref.current)||void 0===Ta||Ta.scrollIntoView({block:"nearest"})},[sa]);return(0,Ff.createElement)(xl.div,gf({"aria-hidden":!0},a,{ref:d,style:he({flexShrink:0},a.style),onPointerMove:ig(a.onPointerMove,()=>{var Ta;null===(Ta=fa.onItemLeave)||void 0===Ta||Ta.call(fa);null===la.current&&(la.current=
window.setInterval(H,50))}),onPointerLeave:ig(a.onPointerLeave,()=>{Ha()})}))}),hv=(0,Ff.forwardRef)((a,d)=>{const {value:k}=a;a=Mf(a,["value"]);const H=(0,Ff.useRef)(null);d=uh(d,H);const fa=Dn(k);(0,Ff.useEffect)(()=>{const la=H.current,sa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(fa!==k&&sa){const Ha=new Event("change",{bubbles:!0});sa.call(la,k);la.dispatchEvent(Ha)}},[fa,k]);return(0,Ff.createElement)(Mr,{asChild:!0},(0,Ff.createElement)("select",gf({},
a,{ref:d,defaultValue:k})))});hv.displayName="BubbleSelect";var Rr=a=>{const {__scopeSelect:d,children:k,open:H,defaultOpen:fa,onOpenChange:la,value:sa,defaultValue:Ha,onValueChange:Ta,dir:Xa,name:eb,autoComplete:ib,disabled:Db,required:Ob}=a,Hb=Zt(d),[cc,sc]=(0,Ff.useState)(null),[Ub,kc]=(0,Ff.useState)(null),[ec,Mc]=(0,Ff.useState)(!1),Oc=ko(Xa),[vd=!1,Kd]=pi({prop:H,defaultProp:fa,onChange:la}),[We,ie]=pi({prop:sa,defaultProp:Ha,onChange:Ta}),Je=(0,Ff.useRef)(null),Hf=cc?!!cc.closest("form"):!0,
[Se,Xe]=(0,Ff.useState)(new Set),Pd=Array.from(Se).map(ld=>ld.props.value).join(";");return(0,Ff.createElement)(qC,Hb,(0,Ff.createElement)(vH,{required:Ob,scope:d,trigger:cc,onTriggerChange:sc,valueNode:Ub,onValueNodeChange:kc,valueNodeHasChildren:ec,onValueNodeHasChildrenChange:Mc,contentId:ni(),value:We,onValueChange:ie,open:vd,onOpenChange:Kd,dir:Oc,triggerPointerDownPosRef:Je,disabled:Db},(0,Ff.createElement)(Xt.Provider,{scope:d},(0,Ff.createElement)(Iy,{scope:a.__scopeSelect,onNativeOptionAdd:(0,Ff.useCallback)(ld=>
{Xe(Qd=>(new Set(Qd)).add(ld))},[]),onNativeOptionRemove:(0,Ff.useCallback)(ld=>{Xe(Qd=>{Qd=new Set(Qd);Qd.delete(ld);return Qd})},[])},k)),Hf?(0,Ff.createElement)(hv,{key:Pd,"aria-hidden":!0,required:Ob,tabIndex:-1,name:eb,autoComplete:ib,value:We,onChange:ld=>ie(ld.target.value),disabled:Db},void 0===We?(0,Ff.createElement)("option",{value:""}):null,Array.from(Se)):null))},yC=Ky,AC=tC,BC=uC,Fm=a=>(0,Ff.createElement)(uH,gf({asChild:!0},a)),Ny=vC,zC=ev,ao=Qr,Cd=gp,CC=xC,ii=Jo,mh=da(590),DC=yf(da(22)),
iv=da(590),Gm=da(590),EC=rf(function(){const a=He(),{handlers:{t:d}}=om.useContext(ej),k=om.useCallback(sa=>{a.api.setColor(sa)},[]),H=om.useCallback(sa=>{(sa=sa.currentTarget.dataset.tool)&&a.selectTool(sa)},[]),[fa,la]=om.useState(()=>{var sa;return null!=(sa=Object.values(pr).find(Ha=>Ha===a.selectedTool.id))?sa:Object.values(pr)[0]});om.useEffect(()=>{la(sa=>{var Ha;return null!=(Ha=Object.values(pr).find(Ta=>Ta===a.selectedTool.id))?Ha:sa})},[a.selectedTool.id]);return(0,Gm.jsx)("div",{className:"tl-primary-tools",
"data-html2canvas-ignore":"true",children:(0,Gm.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,Gm.jsx)(Ap,{handleClick:()=>a.selectTool("select"),tooltip:d("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,Gm.jsx)(Ap,{handleClick:()=>a.selectTool("move"),tooltip:d("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,Gm.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,Gm.jsx)(Ap,{handleClick:()=>a.selectTool("logseq-portal"),
tooltip:d("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,Gm.jsx)(Ap,{handleClick:()=>a.selectTool("pencil"),tooltip:d("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,Gm.jsx)(Ap,{handleClick:()=>a.selectTool("highlighter"),tooltip:d("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,Gm.jsx)(Ap,{handleClick:()=>a.selectTool("erase"),tooltip:d("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,Gm.jsx)(Ap,{handleClick:()=>a.selectTool("line"),tooltip:d("whiteboard/connector"),
id:"line",icon:"connector"}),(0,Gm.jsx)(Ap,{handleClick:()=>a.selectTool("text"),tooltip:d("whiteboard/text"),id:"text",icon:"text"}),(0,Gm.jsx)(Ay,{activeGeometry:fa,setGeometry:H}),(0,Gm.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,Gm.jsx)(Fn,{popoverSide:"left",color:a.settings.color,setColor:k}),(0,Gm.jsx)(Un,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),Oy=da(590),Dw=rf(function(){const a=He();return(0,Oy.jsxs)("div",
{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,Oy.jsx)("div",{style:{flex:1}}),(0,Oy.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),Ts=da(590),FC=rf(function(){const a=He();return(0,Ts.jsxs)(Ts.Fragment,{children:[Sb()&&(0,Ts.jsx)(Dw,{}),Sb()&&(0,Ts.jsx)(Fo,{}),!a.readOnly&&(0,Ts.jsx)(EC,{}),(0,Ts.jsx)(kC,{})]})}),Ko=yf(da(22)),cm=yf(da(22)),Py=yf(da(22)),GC=yf(da(22)),Xq=da(590),Qy=({id:a,showReferenceContent:d=
!1})=>{var k;const {handlers:{isWhiteboardPage:H,redirectToPage:fa,sidebarAddBlock:la,queryBlockByUUID:sa},renderers:{Breadcrumb:Ha,PageName:Ta}}=GC.default.useContext(ej);var Xa="";let eb=pk(a)?"B":"P",ib="";if(pk(a)){Xa=sa(a);if(!Xa)return(0,Xq.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});ib=Xa.content;Xa="whiteboard-shape"===(null==(k=Xa.properties)?void 0:k["ls-type"])?"link-to-whiteboard":"link-to-block"}else Xa=H(a)?"link-to-whiteboard":"link-to-page";k=ib&&
23<ib.length?ib.slice(0,20)+"...":ib;return(0,Xq.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Db=>{Db.stopPropagation();Db.shiftKey?la(a,"B"===eb?"block":"page"):fa(a)},children:[(0,Xq.jsx)(Ph,{name:Xa}),(0,Xq.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===eb?(0,Xq.jsx)(Ta,{pageName:a}):(0,Xq.jsxs)(Xq.Fragment,{children:[(0,Xq.jsx)(Ha,{levelLimit:1,blockId:a,endSeparator:d}),d&&k]})})]})},Tk=yf(da(22)),Kn=da(22),HC=["children"],
au="undefined"!==typeof document?Kn.useLayoutEffect:Kn.useEffect,Fh=yf(da(22)),$h=da(22),IC=da(31),jv,Ll,wH="undefined"!=typeof document?$h.useLayoutEffect:$h.useEffect;!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(Ll||={});var JC=((jv={})[Ll.DEBUG]="debug",jv[Ll.INFO]="log",jv[Ll.WARN]="warn",jv[Ll.ERROR]="error",jv),Yq=si(function(){var a=og(Ll.ERROR);return{log:og(function(d,k,H){var fa;void 0===H&&(H=Ll.INFO);H>=(null!=(fa=("undefined"==typeof globalThis?
window:globalThis).VIRTUOSO_LOG_LEVEL)?fa:a(4))&&console[JC[H]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",d,k)}),logLevel:a}},[],{singleton:!0}),Ln=si(function(){var a=Zg(),d=Zg(),k=og(0),H=Zg(),fa=og(0),la=Zg(),sa=Zg(),Ha=og(0),Ta=og(0),Xa=og(0),eb=og(0),ib=Zg(),Db=Zg(),Ob=og(!1),Hb=og(!1);return dg(wf(a,tg(function(cc){return cc.scrollTop})),d),dg(wf(a,tg(function(cc){return cc.scrollHeight})),sa),dg(d,fa),{scrollContainerState:a,scrollTop:d,viewportHeight:la,
headerHeight:Ha,fixedHeaderHeight:Ta,fixedFooterHeight:Xa,footerHeight:eb,scrollHeight:sa,smoothScrollTargetReached:H,react18ConcurrentRendering:Hb,scrollTo:ib,scrollBy:Db,statefulScrollTop:fa,deviation:k,scrollingInProgress:Ob}},[],{singleton:!0}),aj={lvl:0},Ry=si(function(){return{recalcInProgress:og(!1)}},[],{singleton:!0}),xH={offsetHeight:"height",offsetWidth:"width"},Zq=si(function(a){var d=a[0].log,k=a[1].recalcInProgress;a=Zg();var H=Zg(),fa=uj(H,0),la=Zg(),sa=Zg(),Ha=og(0),Ta=og([]),Xa=og(void 0),
eb=og(void 0),ib=og(function(kc,ec){return El(kc,xH[ec])}),Db=og(void 0),Ob=og(0),Hb={offsetTree:[],sizeTree:aj,groupOffsetTree:aj,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},cc=uj(wf(a,ph(Ta,d,Ob),Xl(Qi,Hb),Ui()),Hb);dg(wf(Ta,Yh(function(kc){return 0<kc.length}),ph(cc,Ob),tg(function(kc){var ec=kc[0],Mc=kc[1],Oc=kc[2];kc=ec.reduce(function(vd,Kd,We){return Ga(vd,Kd,xh(Kd,Mc.offsetTree,Oc)||We)},aj);return Mh({},Mc,{groupIndices:ec,groupOffsetTree:kc})})),cc);dg(wf(H,ph(cc),Yh(function(kc){return kc[0]<
kc[1].lastIndex}),tg(function(kc){var ec=kc[1];return[{startIndex:kc[0],endIndex:ec.lastIndex,size:ec.lastSize}]})),a);dg(Xa,eb);var sc=uj(wf(Xa,tg(function(kc){return void 0===kc})),!0);dg(wf(eb,Yh(function(kc){return void 0!==kc&&cc(4).sizeTree===aj}),tg(function(kc){return[{startIndex:0,endIndex:0,size:kc}]})),a);Hb=nk(wf(a,ph(cc),Xl(function(kc,ec){ec=ec[1];return{changed:ec!==kc.sizes,sizes:ec}},{changed:!1,sizes:Hb}),tg(function(kc){return kc.changed})));Uh(wf(Ha,Xl(function(kc,ec){return{diff:kc.prev-
ec,prev:ec}},{diff:0,prev:0}),tg(function(kc){return kc.diff})),function(kc){0<kc?(k(0,!0),la(0,kc)):0>kc&&sa(0,kc)});Uh(wf(Ha,ph(d)),function(kc){0>kc[0]&&(0,kc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:Ha},Ll.ERROR)});d=nk(la);dg(wf(la,ph(cc),tg(function(kc){var ec=kc[0];kc=kc[1];if(0<kc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return lb(kc.sizeTree).reduce(function(Mc,
Oc){var vd=Oc.k;Oc=Oc.v;return{ranges:[].concat(Mc.ranges,[{startIndex:Mc.prevIndex,endIndex:vd+ec-1,size:Mc.prevSize}]),prevIndex:vd+ec,prevSize:Oc}},{ranges:[],prevIndex:0,prevSize:kc.lastSize}).ranges})),a);var Ub=nk(wf(sa,ph(cc,Ob),tg(function(kc){return xh(-kc[0],kc[1].offsetTree,kc[2])})));return dg(wf(sa,ph(cc,Ob),tg(function(kc){var ec=kc[0],Mc=kc[1];kc=kc[2];if(0<Mc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Oc=lb(Mc.sizeTree).reduce(function(vd,
Kd){return Ga(vd,Math.max(0,Kd.k+ec),Kd.v)},aj);return Mh({},Mc,{sizeTree:Oc},hj(Mc.offsetTree,0,Oc,kc))})),cc),{data:Db,totalCount:H,sizeRanges:a,groupIndices:Ta,defaultItemSize:eb,fixedItemSize:Xa,unshiftWith:la,shiftWith:sa,shiftWithOffset:Ub,beforeUnshiftWith:d,firstItemIndex:Ha,gap:Ob,sizes:cc,listRefresh:Hb,statefulTotalCount:fa,trackItemSizes:sc,itemSize:ib}},tj(Yq,Ry),{singleton:!0}),yH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,kv=si(function(a){function d(){sc&&
(sc(),sc=null);kc&&(kc(),kc=null);Ub&&(clearTimeout(Ub),Ub=null);Ha(0,!1)}var k=a[0],H=k.sizes,fa=k.totalCount,la=k.listRefresh;k=k.gap;var sa=a[1],Ha=sa.scrollingInProgress,Ta=sa.viewportHeight,Xa=sa.scrollTo,eb=sa.smoothScrollTargetReached,ib=sa.headerHeight,Db=sa.footerHeight,Ob=sa.fixedHeaderHeight;sa=sa.fixedFooterHeight;a=a[2].log;var Hb=Zg(),cc=og(0),sc=null,Ub=null,kc=null;return dg(wf(Hb,ph(H,Ta,fa,cc,ib,Db,a),ph(k,Ob,sa),tg(function(ec){var Mc=ec[0],Oc=Mc[0],vd=Mc[1],Kd=Mc[2],We=Mc[3],ie=
Mc[4],Je=Mc[5],Hf=Mc[6],Se=Mc[7],Xe=ec[1];Mc=ec[2];ec=ec[3];var Pd=gi(Oc),ld=Pd.align,Qd=Pd.behavior,hd=Pd.offset;--We;Pd=Bi(Pd,vd,We);Je=xh(Pd,vd.offsetTree,Xe)+Je;"end"===ld?(Je+=Mc+xa(vd.sizeTree,Pd)[1]-Kd+ec,Pd===We&&(Je+=Hf)):"center"===ld?Je+=(Mc+xa(vd.sizeTree,Pd)[1]-Kd+ec)/2:Je-=ie;hd&&(Je+=hd);var Dd=function(nf){d();nf?(Se("retrying to scroll to",{location:Oc},Ll.DEBUG),Hb(0,Oc)):Se("list did not change, scroll successful",{},Ll.DEBUG)};if(d(),"smooth"===Qd){var Me=!1;kc=Uh(la,function(nf){Me=
Me||nf});sc=Sj(eb,function(){Dd(Me)})}else sc=Sj(wf(la,function(nf){var Vf=setTimeout(function(){nf(!1)},150);return function(If){If&&(nf(!0),clearTimeout(Vf))}}),Dd);Ub=setTimeout(function(){d()},1200);Ha(0,!0);return Se("scrolling from index to",{index:Pd,top:Je,behavior:Qd},Ll.DEBUG),{top:Je,behavior:Qd}})),Xa),{scrollToIndex:Hb,topListHeight:cc}},tj(Zq,Ln,Yq),{singleton:!0}),zH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},
lv=si(function(a){var d=a[0],k=d.scrollContainerState;a=d.scrollTop;var H=d.viewportHeight,fa=d.headerHeight,la=d.footerHeight,sa=d.scrollBy;d=og(!1);var Ha=og(!0),Ta=Zg(),Xa=Zg(),eb=og(4),ib=og(0),Db=uj(wf(zo(wf(ci(a),Kj(1),um(!0)),wf(ci(a),Kj(1),um(!1),Sm(100))),Ui()),!1),Ob=uj(wf(zo(wf(sa,um(!0)),wf(sa,um(!1),Sm(200))),Ui()),!1);dg(wf(Xj(ci(a),ci(ib)),tg(function(Hb){return Hb[0]<=Hb[1]}),Ui()),Ha);dg(wf(Ha,Bm(50)),Xa);H=nk(wf(Xj(k,ci(H),ci(fa),ci(la),ci(eb)),Xl(function(Hb,cc){var sc,Ub,kc=cc[0],
ec=kc.scrollTop;kc=kc.scrollHeight;var Mc=cc[1],Oc={viewportHeight:Mc,scrollTop:ec,scrollHeight:kc};return ec+Mc-kc>-cc[4]?(ec>Hb.state.scrollTop?(sc="SCROLLED_DOWN",Ub=Hb.state.scrollTop-ec):(sc="SIZE_DECREASED",Ub=Hb.state.scrollTop-ec||Hb.scrollTopDelta),{atBottom:!0,state:Oc,atBottomBecause:sc,scrollTopDelta:Ub}):{atBottom:!1,notAtBottomBecause:Oc.scrollHeight>Hb.state.scrollHeight?"SIZE_INCREASED":Mc<Hb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":ec<Hb.state.scrollTop?"SCROLLING_UPWARDS":
"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Oc}},zH),Ui(function(Hb,cc){return Hb&&Hb.atBottom===cc.atBottom})));fa=uj(wf(k,Xl(function(Hb,cc){var sc=cc.scrollTop,Ub=cc.scrollHeight;cc=cc.viewportHeight;return 1.01>Math.abs(Hb.scrollHeight-Ub)?{scrollTop:sc,scrollHeight:Ub,jump:0,changed:!1}:Hb.scrollTop!==sc&&1>Ub-(sc+cc)?{scrollHeight:Ub,scrollTop:sc,jump:Hb.scrollTop-sc,changed:!0}:{scrollHeight:Ub,scrollTop:sc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Yh(function(Hb){return Hb.changed}),
tg(function(Hb){return Hb.jump})),0);dg(wf(H,tg(function(Hb){return Hb.atBottom})),d);dg(wf(d,Bm(50)),Ta);la=og("down");dg(wf(k,tg(function(Hb){return Hb.scrollTop}),Ui(),Xl(function(Hb,cc){return Ob(4)?{direction:Hb.direction,prevScrollTop:cc}:{direction:cc<Hb.prevScrollTop?"up":"down",prevScrollTop:cc}},{direction:"down",prevScrollTop:0}),tg(function(Hb){return Hb.direction})),la);dg(wf(k,Bm(50),um("none")),la);k=og(0);return dg(wf(Db,Yh(function(Hb){return!Hb}),um(0)),k),dg(wf(a,Bm(100),ph(Db),
Yh(function(Hb){return!!Hb[1]}),Xl(function(Hb,cc){return[Hb[1],cc[0]]},[0,0]),tg(function(Hb){return Hb[1]-Hb[0]})),k),{isScrolling:Db,isAtTop:Ha,isAtBottom:d,atBottomState:H,atTopStateChange:Xa,atBottomStateChange:Ta,scrollDirection:la,atBottomThreshold:eb,atTopThreshold:ib,scrollVelocity:k,lastJumpDueToItemResize:fa}},tj(Ln)),Us=si(function(a){var d=a[0].log;a=og(!1);var k=nk(wf(a,Yh(function(H){return H}),Ui()));return Uh(a,function(H){H&&d(4)("props updated",{},Ll.DEBUG)}),{propsReady:a,didMount:k}},
tj(Yq),{singleton:!0}),Ew=si(function(a){var d=a[0],k=d.sizes,H=d.listRefresh;d=d.defaultItemSize;var fa=a[1].scrollTop,la=a[2].scrollToIndex;a=a[3].didMount;var sa=og(!0),Ha=og(0);return dg(wf(a,ph(Ha),Yh(function(Ta){return!!Ta[1]}),um(!1)),sa),Uh(wf(Xj(H,a),ph(sa,k,d),Yh(function(Ta){var Xa=Ta[1],eb=Ta[3];return Ta[0][1]&&(Ta[2].sizeTree!==aj||void 0!==eb)&&!Xa}),ph(Ha)),function(Ta){var Xa=Ta[1];setTimeout(function(){Sj(fa,function(){sa(0,!0)});la(0,Xa)})}),{scrolledToInitialItem:sa,initialTopMostItemIndex:Ha}},
tj(Zq,Ln,kv,Us),{singleton:!0}),KC=si(function(a){function d(cc){Ta(0,{index:"LAST",align:"end",behavior:cc})}function k(cc){var sc=Sj(Ha,function(Ub){!cc||Ub.atBottom||"SIZE_INCREASED"!==Ub.notAtBottomBecause||Hb||(ib(4)("scrolling to bottom due to increased size",{},Ll.DEBUG),d("auto"))});setTimeout(sc,100)}var H=a[0],fa=H.totalCount,la=H.listRefresh,sa=a[1];H=sa.isAtBottom;var Ha=sa.atBottomState,Ta=a[2].scrollToIndex;sa=a[3].scrolledToInitialItem;var Xa=a[4],eb=Xa.propsReady;Xa=Xa.didMount;var ib=
a[5].log;a=a[6].scrollingInProgress;var Db=og(!1),Ob=Zg(),Hb=null;return Uh(wf(Xj(wf(ci(fa),Kj(1)),Xa),ph(ci(Db),H,sa,a),tg(function(cc){var sc=cc[0],Ub=sc[0];sc=sc[1]&&cc[3];var kc="auto";sc&&(kc=cc[1],cc=cc[2]||cc[4],kc="function"==typeof kc?Kk(kc(cc)):cc&&Kk(kc),sc=sc&&!!kc);return{totalCount:Ub,shouldFollow:sc,followOutputBehavior:kc}}),Yh(function(cc){return cc.shouldFollow})),function(cc){var sc=cc.totalCount,Ub=cc.followOutputBehavior;Hb&&(Hb(),Hb=null);Hb=Sj(la,function(){ib(4)("following output to ",
{totalCount:sc},Ll.DEBUG);d(Ub);Hb=null})}),Uh(wf(Xj(ci(Db),fa,eb),Yh(function(cc){return cc[0]&&cc[2]}),Xl(function(cc,sc){sc=sc[1];return{refreshed:cc.value===sc,value:sc}},{refreshed:!1,value:0}),Yh(function(cc){return cc.refreshed}),ph(Db,fa)),function(cc){k(!1!==cc[1])}),Uh(Ob,function(){k(!1!==Db(4))}),Uh(Xj(ci(Db),Ha),function(cc){var sc=cc[1];cc[0]&&!sc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===sc.notAtBottomBecause&&d("auto")}),{followOutput:Db,autoscrollToBottom:Ob}},tj(Zq,lv,kv,Ew,Us,Yq,
Ln)),Sy=si(function(a){var d=a[0],k=d.totalCount,H=d.groupIndices;d=d.sizes;var fa=a[1];a=fa.scrollTop;fa=fa.headerHeight;var la=Zg(),sa=Zg(),Ha=nk(wf(la,tg(Hk)));return dg(wf(Ha,tg(function(Ta){return Ta.totalCount})),k),dg(wf(Ha,tg(function(Ta){return Ta.groupIndices})),H),dg(wf(Xj(a,d,fa),Yh(function(Ta){return Ta[1].groupOffsetTree!==aj}),tg(function(Ta){return xa(Ta[1].groupOffsetTree,Math.max(Ta[0]-Ta[2],0),"v")[0]}),Ui(),tg(function(Ta){return[Ta]})),sa),{groupCounts:la,topItemsIndexes:sa}},
tj(Zq,Ln)),Ty=si(function(a){var d=a[0];a=d.scrollTop;var k=d.viewportHeight,H=d.deviation,fa=d.headerHeight,la=d.fixedHeaderHeight;d=Zg();var sa=og(0),Ha=og(0),Ta=og(0);a=uj(wf(Xj(ci(a),ci(k),ci(fa),ci(d,ok),ci(Ta),ci(sa),ci(la),ci(H),ci(Ha)),tg(function(Xa){var eb=Xa[0],ib=Xa[1],Db=Xa[2],Ob=Xa[3],Hb=Ob[0];Ob=Ob[1];var cc=Xa[4],sc=Xa[6],Ub=Xa[7],kc=Xa[8],ec=eb-Ub;Xa=Xa[5]+sc;var Mc=Math.max(Db-ec,0),Oc="none",vd="number"==typeof kc?kc:kc.top||0;kc="number"==typeof kc?kc:kc.bottom||0;return Hb-=Ub,
Ob+=Db+sc,Hb+(Db+sc)>eb+Xa-vd&&(Oc="up"),Ob-Ub<eb-Mc+ib+kc&&(Oc="down"),"none"!==Oc?[Math.max(ec-Db-mn(cc,"top",Oc)-vd,0),ec-Mc-sc+ib+mn(cc,"bottom",Oc)+kc]:null}),Yh(function(Xa){return null!=Xa}),Ui(ok)),[0,0]);return{listBoundary:d,overscan:Ta,topListHeight:sa,increaseViewportBy:Ha,visibleRange:a}},tj(Ln),{singleton:!0}),LC={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},bu=si(function(a){var d=a[0],k=d.sizes,H=d.totalCount,fa=d.data,
la=d.firstItemIndex,sa=d.gap,Ha=a[1],Ta=a[2],Xa=Ta.visibleRange;d=Ta.listBoundary;Ta=Ta.topListHeight;var eb=a[3],ib=eb.scrolledToInitialItem,Db=eb.initialTopMostItemIndex;eb=a[4].topListHeight;var Ob=a[5],Hb=a[6].didMount,cc=a[7].recalcInProgress;a=og([]);var sc=Zg();dg(Ha.topItemsIndexes,a);k=uj(wf(Xj(Hb,cc,ci(Xa,ok),ci(H),ci(k),ci(Db),ib,ci(a),ci(la),ci(sa),fa),Yh(function(Ub){return Ub[0]&&!Ub[1]}),tg(function(Ub){var kc=Ub[2],ec=kc[0],Mc=kc[1];kc=Ub[3];var Oc=Ub[5],vd=Ub[6],Kd=Ub[7],We=Ub[8],
ie=Ub[9],Je=Ub[10];Ub=Ub[4];var Hf=Ub.sizeTree,Se=Ub.offsetTree;if(0===kc||0===ec&&0===Mc)return Mh({},LC,{totalCount:kc});if(Hf===aj)return Gq(function(If,kg,hh){return kg.groupOffsetTree!==aj?(If=ri(If,kg),[{index:xa(kg.groupOffsetTree,If)[0],size:0,offset:0},{index:If,size:0,offset:0,data:hh&&hh[0]}]):[{index:If,size:0,offset:0,data:hh&&hh[0]}]}("number"==typeof Oc?Oc:"LAST"===Oc.index?kc-1:Oc.index,Ub,Je),[],kc,ie,Ub,We);Oc=[];if(0<Kd.length){var Xe,Pd=Kd[0],ld=Kd[Kd.length-1],Qd=0;for(Hf=Tj(Gd(Hf,
Pd,ld));!(Xe=Hf()).done;){var hd=Xe.value;Xe=hd.value;var Dd=Math.min(hd.end,ld);for(hd=Math.max(hd.start,Pd);hd<=Dd;hd++)Oc.push({index:hd,size:Xe,offset:Qd,data:Je&&Je[hd]}),Qd+=Xe}}if(!vd)return Gq([],Oc,kc,ie,Ub,We);var Me=0<Kd.length?Kd[Kd.length-1]+1:0,nf=function(If,kg,hh,Qf){return void 0===Qf&&(Qf=0),0<Qf&&(kg=Math.max(kg,If[$g(If,Qf,Sg)].offset)),Hd((Hh=hh,Dk=$g(ch=If,kg,nj=bi),Vk=$g(ch,Hh,nj,Dk),ch.slice(Dk,Vk+1)),Xi);var ch,Hh,nj,Dk,Vk}(Se,ec,Mc,Me);if(0===nf.length)return null;var Vf=
kc-1;return Gq(cl([],function(If){for(var kg,hh=Tj(nf);!(kg=hh()).done;){var Qf=kg.value,ch=Qf.value;kg=ch.offset;var Hh=Qf.start,nj=ch.size;ch.offset<ec&&(ch=(Hh+=Math.floor((ec-ch.offset+ie)/(nj+ie)))-Qf.start,kg+=ch*nj+ch*ie);Hh<Me&&(kg+=(Me-Hh)*nj,Hh=Me);for(Qf=Math.min(Qf.end,Vf);Hh<=Qf&&!(kg>=Mc);Hh++)If.push({index:Hh,size:nj,offset:kg,data:Je&&Je[Hh]}),kg+=nj+ie}}),Oc,kc,ie,Ub,We)}),Yh(function(Ub){return null!==Ub}),Ui()),LC);return dg(wf(fa,Yh(function(Ub){return void 0!==Ub}),tg(function(Ub){return Ub.length})),
H),dg(wf(k,tg(function(Ub){return Ub.topListHeight})),eb),dg(eb,Ta),dg(wf(k,tg(function(Ub){return[Ub.top,Ub.bottom]})),d),dg(wf(k,tg(function(Ub){return Ub.items})),sc),Mh({listState:k,topItemsIndexes:a,endReached:nk(wf(k,Yh(function(Ub){return 0<Ub.items.length}),ph(H,fa),Yh(function(Ub){var kc=Ub[0].items;return kc[kc.length-1].originalIndex===Ub[1]-1}),tg(function(Ub){return[Ub[1]-1,Ub[2]]}),Ui(ok),tg(function(Ub){return Ub[0]}))),startReached:nk(wf(k,Bm(200),Yh(function(Ub){var kc=Ub.items;return 0<
kc.length&&kc[0].originalIndex===Ub.topItems.length}),tg(function(Ub){return Ub.items[0].index}),Ui())),rangeChanged:nk(wf(k,Yh(function(Ub){return 0<Ub.items.length}),tg(function(Ub){Ub=Ub.items;for(var kc=0,ec=Ub.length-1;"group"===Ub[kc].type&&kc<ec;)kc++;for(;"group"===Ub[ec].type&&ec>kc;)ec--;return{startIndex:Ub[kc].index,endIndex:Ub[ec].index}}),Ui(gn))),itemsRendered:sc},Ob)},tj(Zq,Sy,Ty,Ew,kv,lv,Us,Ry),{singleton:!0}),AH=si(function(a){var d=a[0],k=d.sizes,H=d.firstItemIndex,fa=d.data;d=
d.gap;var la=a[1].listState;a=a[2].didMount;var sa=og(0);return dg(wf(a,ph(sa),Yh(function(Ha){return 0!==Ha[1]}),ph(k,H,d,fa),tg(function(Ha){var Ta=Ha[0][1],Xa=Ha[1],eb=Ha[2],ib=Ha[3];Ha=Ha[4];var Db=void 0===Ha?[]:Ha;Ha=0;if(0<Xa.groupIndices.length)for(var Ob,Hb=Tj(Xa.groupIndices);!((Ob=Hb()).done||Ob.value-Ha>=Ta);)Ha++;Ta+=Ha;return Gq(Array.from({length:Ta}).map(function(cc,sc){return{index:sc,size:0,offset:0,data:Db[sc]}}),[],Ta,ib,Xa,eb)})),la),{initialItemCount:sa}},tj(Zq,bu,Us),{singleton:!0}),
sq=si(function(a){a=a[0].scrollVelocity;var d=og(!1),k=Zg(),H=og(!1);return dg(wf(a,ph(H,d,k),Yh(function(fa){return!!fa[1]}),tg(function(fa){var la=fa[0],sa=fa[1],Ha=fa[2];fa=fa[3];var Ta=sa.enter;if(Ha){if((0,sa.exit)(la,fa))return!1}else if(Ta(la,fa))return!0;return Ha}),Ui()),d),Uh(wf(Xj(d,a,k),ph(H)),function(fa){var la=fa[0];fa=fa[1];return la[0]&&fa&&fa.change&&fa.change(la[1],la[2])}),{isSeeking:d,scrollSeekConfiguration:H,scrollVelocity:a,scrollSeekRangeChanged:k}},tj(lv),{singleton:!0}),
Uy=si(function(a){a=a[0].topItemsIndexes;var d=og(0);return dg(wf(d,Yh(function(k){return 0<k}),tg(function(k){return Array.from({length:k}).map(function(H,fa){return fa})})),a),{topItemCount:d}},tj(bu)),cu=si(function(a){var d=a[0],k=d.footerHeight,H=d.headerHeight,fa=d.fixedHeaderHeight;d=d.fixedFooterHeight;var la=a[1].listState;a=Zg();k=uj(wf(Xj(k,d,H,fa,la),tg(function(sa){var Ha=sa[4];return sa[0]+sa[1]+sa[2]+sa[3]+Ha.offsetBottom+Ha.bottom})),0);return dg(ci(k),a),{totalListHeight:k,totalListHeightChanged:a}},
tj(Ln,bu),{singleton:!0}),Fw=Uo(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),Vy=si(function(a){function d(sc){0<sc?(H(0,{top:-sc,behavior:"auto"}),la(0,0)):(la(0,0),H(0,{top:-sc,behavior:"auto"}))}var k=a[0],H=k.scrollBy,fa=k.scrollTop,la=k.deviation,sa=k.scrollingInProgress,Ha=a[1];k=Ha.isScrolling;var Ta=Ha.isAtBottom,Xa=Ha.scrollDirection,eb=a[3],ib=eb.beforeUnshiftWith,Db=eb.shiftWithOffset,Ob=eb.sizes;eb=eb.gap;var Hb=a[4].log,cc=a[5].recalcInProgress;
a=nk(wf(a[2].listState,ph(Ha.lastJumpDueToItemResize),Xl(function(sc,Ub){var kc=sc[1],ec=Ub[0],Mc=ec.items,Oc=ec.totalCount;ec=ec.bottom+ec.offsetBottom;var vd=0;return sc[2]===Oc&&0<kc.length&&0<Mc.length&&(0===Mc[0].originalIndex&&0===kc[0].originalIndex||0!=(vd=ec-sc[3])&&(vd+=Ub[1])),[vd,Mc,Oc,ec]},[0,[],0,0]),Yh(function(sc){return 0!==sc[0]}),ph(fa,Xa,sa,Ta,Hb),Yh(function(sc){return!sc[3]&&0!==sc[1]&&"up"===sc[2]}),tg(function(sc){var Ub=sc[0][0];return(0,sc[5])("Upward scrolling compensation",
{amount:Ub},Ll.DEBUG),Ub})));return Uh(wf(a,ph(la,k)),function(sc){var Ub=sc[0],kc=sc[1];sc[2]&&Fw()?la(0,kc-Ub):d(-Ub)}),Uh(wf(Xj(uj(k,!1),la,cc),Yh(function(sc){return!sc[0]&&!sc[2]&&0!==sc[1]}),tg(function(sc){return sc[1]}),Bm(1)),d),dg(wf(Db,tg(function(sc){return{top:-sc}})),H),Uh(wf(ib,ph(Ob,eb),tg(function(sc){var Ub=sc[0];return Ub*sc[1].lastSize+Ub*sc[2]})),function(sc){la(0,sc);requestAnimationFrame(function(){vn(H,{top:sc});requestAnimationFrame(function(){la(0,0);cc(0,!1)})})}),{deviation:la}},
tj(Ln,lv,bu,Zq,Yq,Ry)),MC=si(function(a){var d=a[0].totalListHeight,k=a[1].didMount,H=a[2].scrollTo;a=og(0);return Uh(wf(k,ph(a),Yh(function(fa){return 0!==fa[1]}),tg(function(fa){return{top:fa[1]}})),function(fa){Sj(wf(d,Yh(function(la){return 0!==la})),function(){setTimeout(function(){H(0,fa)})})}),{initialScrollTop:a}},tj(cu,Us,Ln),{singleton:!0}),Wy=si(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var k=og(!1);return{alignToBottom:k,paddingTopAddition:uj(wf(Xj(k,d,a),Yh(function(H){return H[0]}),
tg(function(H){return Math.max(0,H[1]-H[2])}),Ui()),0)}},tj(Ln,cu),{singleton:!0}),Gw=si(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var k=Zg(),H=Zg(),fa=Zg(),la=og(!1),sa=og(void 0);return dg(wf(Xj(k,H),tg(function(Ha){var Ta=Ha[0];return{scrollTop:Math.max(0,Ta.scrollTop-Ha[1].offsetTop),scrollHeight:Ta.scrollHeight,viewportHeight:Ta.viewportHeight}})),d),dg(wf(a,ph(H),tg(function(Ha){var Ta=Ha[0];return Mh({},Ta,{top:Ta.top+Ha[1].offsetTop})})),fa),{useWindowScroll:la,customScrollParent:sa,
windowScrollContainerState:k,windowViewportRect:H,windowScrollTo:fa}},tj(Ln)),Vs=["done","behavior","align"],Sr=si(function(a){var d=a[0],k=d.sizes,H=d.totalCount;d=d.gap;var fa=a[1],la=fa.scrollTop,sa=fa.viewportHeight,Ha=fa.headerHeight,Ta=fa.fixedHeaderHeight,Xa=fa.fixedFooterHeight,eb=fa.scrollingInProgress;a=a[2].scrollToIndex;fa=Zg();return dg(wf(fa,ph(k,sa,H,Ha,Ta,Xa,la),ph(d),tg(function(ib){var Db=ib[0],Ob=Db[0],Hb=Db[1],cc=Db[2],sc=Db[3],Ub=Db[4],kc=Db[5],ec=Db[6];Db=Db[7];var Mc=ib[1];
ib=Ob.done;var Oc=Ob.behavior,vd=Ob.align,Kd=fn(Ob,Vs),We=null;Ob=Bi(Ob,Hb,sc-1);Ub=xh(Ob,Hb.offsetTree,Mc)+Ub+kc;return Ub<Db+kc?We=Mh({},Kd,{behavior:Oc,align:null!=vd?vd:"start"}):Ub+xa(Hb.sizeTree,Ob)[1]>Db+cc-ec&&(We=Mh({},Kd,{behavior:Oc,align:null!=vd?vd:"end"})),We?ib&&Sj(wf(eb,Kj(1),Yh(function(ie){return!1===ie})),ib):ib&&ib(),We}),Yh(function(ib){return null!==ib})),a),{scrollIntoView:fa}},tj(Zq,Ln,kv,bu,Yq),{singleton:!0}),Xy=["listState","topItemsIndexes"],NC=si(function(a){return Mh({},
a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},tj(Ty,AH,Us,sq,cu,MC,Wy,Gw,Sr)),du=si(function(a){var d=a[0],k=d.totalCount,H=d.sizeRanges,fa=d.fixedItemSize,la=d.defaultItemSize,sa=d.trackItemSizes,Ha=d.itemSize,Ta=d.data,Xa=d.firstItemIndex,eb=d.groupIndices,ib=d.statefulTotalCount;d=d.gap;var Db=a[1],Ob=Db.initialTopMostItemIndex;Db=Db.scrolledToInitialItem;var Hb=a[2],cc=a[3],sc=a[4],Ub=sc.listState,kc=sc.topItemsIndexes;sc=fn(sc,Xy);var ec=a[5].scrollToIndex,Mc=a[7].topItemCount,Oc=a[8].groupCounts,
vd=a[9];a=a[10];return dg(sc.rangeChanged,vd.scrollSeekRangeChanged),dg(wf(vd.windowViewportRect,tg(function(Kd){return Kd.visibleHeight})),Hb.viewportHeight),Mh({totalCount:k,data:Ta,firstItemIndex:Xa,sizeRanges:H,initialTopMostItemIndex:Ob,scrolledToInitialItem:Db,topItemsIndexes:kc,topItemCount:Mc,groupCounts:Oc,fixedItemHeight:fa,defaultItemHeight:la,gap:d},cc,{statefulTotalCount:ib,listState:Ub,scrollToIndex:ec,trackItemSizes:sa,itemSize:Ha,groupIndices:eb},sc,vd,Hb,a)},tj(Zq,Ew,Ln,KC,bu,kv,
Vy,Uy,Sy,NC,Yq)),OC=Uo(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),mv=Fh.createContext(void 0),Cp=Fh.createContext(void 0),PC=["placeholder"],Yy=["style","children"],QC=["style","children"],RC=si(function(){var a=og(function(Ta){return"Item "+Ta}),d=og(null),k=og(function(Ta){return"Group "+Ta}),H=og({}),fa=og(Zp),la=og("div"),sa=og(wj),Ha=function(Ta,
Xa){return void 0===Xa&&(Xa=null),uj(wf(H,tg(function(eb){return eb[Ta]}),Ui()),Xa)};return{context:d,itemContent:a,groupContent:k,components:H,computeItemKey:fa,headerFooterTag:la,scrollerRef:sa,FooterComponent:Ha("Footer"),HeaderComponent:Ha("Header"),TopItemListComponent:Ha("TopItemList"),ListComponent:Ha("List","div"),ItemComponent:Ha("Item","div"),GroupComponent:Ha("Group","div"),ScrollerComponent:Ha("Scroller","div"),EmptyPlaceholder:Ha("EmptyPlaceholder"),ScrollSeekPlaceholder:Ha("ScrollSeekPlaceholder")}}),
Hw=si(function(a){function d(fa,la,sa){dg(wf(fa,ph(H.components),tg(function(Ha){var Ta,Xa=Ha[0];Ha=Ha[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+la+" instead."),Mh({},Ha,((Ta={})[la]=Xa,Ta))})),H.components)}var k=a[0],H=a[1];a={item:Wk(H.itemContent,"Rename the %citem%c prop to %citemContent."),group:Wk(H.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Wk(k.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Wk(k.fixedItemHeight,
"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Wk(k.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Zg(),maxHeightCacheSize:Zg(),footer:Zg(),header:Zg(),HeaderContainer:Zg(),FooterContainer:Zg(),ItemContainer:Zg(),ScrollContainer:Zg(),GroupContainer:Zg(),ListContainer:Zg(),emptyComponent:Zg(),scrollSeek:Zg()};return Uh(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.",
"color: red;","color: inherit;","color: blue;")}),Uh(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),Uh(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),Uh(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),
Uh(a.scrollSeek,function(fa){var la=fa.placeholder;fa=fn(fa,PC);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=Mh({},(0,H.components)(4),{ScrollSeekPlaceholder:la});(0,H.components)(0,la);(0,k.scrollSeekConfiguration)(0,fa)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,
"Scroller","ScrollContainer"),d(a.emptyComponent,"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),Mh({},k,H,a)},tj(du,RC)),SC=function(a){return Fh.createElement("div",{style:{height:a.height}})},Mn={position:OC(),zIndex:1,overflowAnchor:"none"},BH={overflowAnchor:"none"},eu=Fh.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=Ai("listState"),k=bo("sizeRanges"),H=Ai("useWindowScroll"),fa=Ai("customScrollParent"),la=bo("windowScrollContainerState"),sa=bo("scrollContainerState");
H=fa||H?la:sa;var Ha=Ai("itemContent"),Ta=Ai("context"),Xa=Ai("groupContent");la=Ai("trackItemSizes");sa=Ai("itemSize");var eb=Ai("log"),ib=bo("gap");k=qr(k,sa,la,a?wj:H,eb,ib,fa).callbackRef;fa=Fh.useState(0);var Db=fa[0],Ob=fa[1];lj("deviation",function(Mc){Db!==Mc&&Ob(Mc)});fa=Ai("EmptyPlaceholder");var Hb=Ai("ScrollSeekPlaceholder")||SC;H=Ai("ListComponent");var cc=Ai("ItemComponent"),sc=Ai("GroupComponent"),Ub=Ai("computeItemKey"),kc=Ai("isSeeking"),ec=0<Ai("groupIndices").length;la=Ai("paddingTopAddition");
la=a?{}:{boxSizing:"border-box",paddingTop:d.offsetTop+la,paddingBottom:d.offsetBottom,marginTop:Db};return!a&&0===d.totalCount&&fa?(0,$h.createElement)(fa,Uj(fa,Ta)):(0,$h.createElement)(H,Mh({},Uj(H,Ta),{ref:k,style:la,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function(Mc){var Oc=Mc.originalIndex,vd=Ub(Oc+d.firstItemIndex,Mc.data,Ta);return kc?(0,$h.createElement)(Hb,Mh({},Uj(Hb,Ta),{key:vd,index:Mc.index,height:Mc.size,type:Mc.type||"item"},"group"===
Mc.type?{}:{groupIndex:Mc.groupIndex})):"group"===Mc.type?(0,$h.createElement)(sc,Mh({},Uj(sc,Ta),{key:vd,"data-index":Oc,"data-known-size":Mc.size,"data-item-index":Mc.index,style:Mn}),Xa(Mc.index)):(0,$h.createElement)(cc,Mh({},Uj(cc,Ta),{key:vd,"data-index":Oc,"data-known-size":Mc.size,"data-item-index":Mc.index,"data-item-group-index":Mc.groupIndex,style:BH}),ec?Ha(Mc.index,Mc.groupIndex,Mc.data,Ta):Ha(Mc.index,Mc.data,Ta))}))}),CH={height:"100%",outline:"none",overflowY:"auto",position:"relative",
WebkitOverflowScrolling:"touch"},fu={width:"100%",height:"100%",position:"absolute",top:0},TC={width:"100%",position:OC(),top:0},Iw=Fh.memo(function(){var a=Ai("HeaderComponent"),d=bo("headerHeight"),k=Ai("headerFooterTag"),H=Ri(function(la){return d(El(la,"height"))}),fa=Ai("context");return a?(0,$h.createElement)(k,{ref:H},(0,$h.createElement)(a,Uj(a,fa))):null}),Jw=Fh.memo(function(){var a=Ai("FooterComponent"),d=bo("footerHeight"),k=Ai("headerFooterTag"),H=Ri(function(la){return d(El(la,"height"))}),
fa=Ai("context");return a?(0,$h.createElement)(k,{ref:H},(0,$h.createElement)(a,Uj(a,fa))):null}),DH=function(a){a=a.children;var d=(0,$h.useContext)(mv),k=bo("viewportHeight"),H=bo("fixedItemHeight"),fa=Ri(Ol(k,function(la){return El(la,"height")}));return Fh.useEffect(function(){d&&(k(d.viewportHeight),H(d.itemHeight))},[d,k,H]),Fh.createElement("div",{style:fu,ref:fa,"data-viewport-type":"element"},a)},UC=function(a){a=a.children;var d=(0,$h.useContext)(mv),k=bo("windowViewportRect"),H=bo("fixedItemHeight"),
fa=Ai("customScrollParent");fa=Nh(k,fa);return Fh.useEffect(function(){d&&(H(d.itemHeight),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,k,H]),Fh.createElement("div",{ref:fa,style:fu,"data-viewport-type":"window"},a)},VC=function(a){a=a.children;var d=Ai("TopItemListComponent"),k=Ai("headerHeight");k=Mh({},TC,{marginTop:k+"px"});var H=Ai("context");return(0,$h.createElement)(d||"div",{style:k,context:H},a)},nv=Pj(Hw,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Fh.memo(function(a){var d=Ai("useWindowScroll"),k=0<Ai("topItemsIndexes").length,H=Ai("customScrollParent"),fa=H||d?UC:DH;return Fh.createElement(H||d?ov:Tr,Mh({},a),Fh.createElement(fa,null,Fh.createElement(Iw,null),Fh.createElement(eu,null),Fh.createElement(Jw,
null)),k&&Fh.createElement(VC,null,Fh.createElement(eu,{showTopList:!0})))})),Zy=nv.Component,bo=nv.usePublisher,Ai=nv.useEmitterValue,lj=nv.useEmitter,Tr=qo({usePublisher:bo,useEmitterValue:Ai,useEmitter:lj}),ov=Rp({usePublisher:bo,useEmitterValue:Ai,useEmitter:lj}),pv={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},co={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},$y=Math.round,Kw=Math.ceil,qv=Math.floor,az=Math.min,fj=Math.max,
gu=si(function(a){var d=a[0],k=d.overscan,H=d.visibleRange,fa=d.listBoundary,la=a[1];d=la.scrollTop;var sa=la.viewportHeight,Ha=la.scrollBy,Ta=la.scrollTo,Xa=la.smoothScrollTargetReached,eb=la.scrollContainerState,ib=la.footerHeight;la=la.headerHeight;var Db=a[2],Ob=a[3],Hb=a[4],cc=Hb.propsReady,sc=Hb.didMount,Ub=a[5];Hb=Ub.windowViewportRect;var kc=Ub.windowScrollTo,ec=Ub.useWindowScroll,Mc=Ub.customScrollParent;Ub=Ub.windowScrollContainerState;a=a[6];var Oc=og(0),vd=og(0),Kd=og(pv),We=og({height:0,
width:0}),ie=og({height:0,width:0}),Je=Zg(),Hf=Zg(),Se=og(0),Xe=og(void 0),Pd=og({row:0,column:0});dg(wf(Xj(sc,vd,Xe),Yh(function(ld){return 0!==ld[1]}),tg(function(ld){return{items:Sp(0,ld[1]-1,ld[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Kd);dg(wf(Xj(ci(Oc),H,ci(Pd,wn),ci(ie,function(ld,Qd){return ld&&ld.width===Qd.width&&ld.height===Qd.height}),Xe),ph(We),tg(function(ld){var Qd=ld[0],hd=Qd[0],Dd=Qd[1],Me=Dd[0],nf=Dd[1],Vf=Qd[2],If=Qd[3],kg=Qd[4],hh=ld[1];ld=Vf.row;
var Qf=Vf.column;Qd=If.height;Dd=If.width;var ch=hh.width;if(0===hd||0===ch)return pv;if(0===Dd)return Mh({},co,{items:Sp(0,0,kg)});Qf=fj(1,qv((ch+Qf)/(Dd+Qf)));Me=Qf*qv((Me+ld)/(Qd+ld));nf=Qf*Kw((nf+ld)/(Qd+ld))-1;nf=az(hd-1,fj(nf,Qf-1));Me=Sp(az(nf,fj(0,Me)),nf,kg);If=so(hh,Vf,If,Me);Vf=If.top;If=If.bottom;hd=Kw(hd/Qf);return{items:Me,offsetTop:Vf,offsetBottom:hd*Qd+(hd-1)*ld-If,top:Vf,bottom:If,itemHeight:Qd,itemWidth:Dd}})),Kd);dg(wf(Xe,Yh(function(ld){return void 0!==ld}),tg(function(ld){return ld.length})),
Oc);dg(wf(We,tg(function(ld){return ld.height})),sa);dg(wf(Xj(We,ie,Kd,Pd),tg(function(ld){ld=so(ld[0],ld[3],ld[1],ld[2].items);return[ld.top,ld.bottom]}),Ui(ok)),fa);H=nk(wf(ci(Kd),Yh(function(ld){return 0<ld.items.length}),ph(Oc),Yh(function(ld){var Qd=ld[0].items;return Qd[Qd.length-1].index===ld[1]-1}),tg(function(ld){return ld[1]-1}),Ui()));fa=nk(wf(ci(Kd),Yh(function(ld){ld=ld.items;return 0<ld.length&&0===ld[0].index}),um(0),Ui()));sa=nk(wf(ci(Kd),Yh(function(ld){return 0<ld.items.length}),
tg(function(ld){ld=ld.items;return{startIndex:ld[0].index,endIndex:ld[ld.length-1].index}}),Ui(gn)));dg(sa,Ob.scrollSeekRangeChanged);dg(wf(Je,ph(We,ie,Oc,Pd),tg(function(ld){var Qd=ld[1],hd=ld[2],Dd=ld[3],Me=ld[4],nf=gi(ld[0]);ld=nf.align;var Vf=nf.behavior,If=nf.offset;nf=nf.index;"LAST"===nf&&(nf=Dd-1);Dd=ll(Qd,Me,hd,fj(0,nf,az(Dd-1,nf)));return"end"===ld?Dd=$y(Dd-Qd.height+hd.height):"center"===ld&&(Dd=$y(Dd-Qd.height/2+hd.height/2)),If&&(Dd+=If),{top:Dd,behavior:Vf}})),Ta);sc=uj(wf(Kd,tg(function(ld){return ld.offsetBottom+
ld.bottom})),0);return dg(wf(Hb,tg(function(ld){return{width:ld.visibleWidth,height:ld.visibleHeight}})),We),Mh({data:Xe,totalCount:Oc,viewportDimensions:We,itemDimensions:ie,scrollTop:d,scrollHeight:Hf,overscan:k,scrollBy:Ha,scrollTo:Ta,scrollToIndex:Je,smoothScrollTargetReached:Xa,windowViewportRect:Hb,windowScrollTo:kc,useWindowScroll:ec,customScrollParent:Mc,windowScrollContainerState:Ub,deviation:Se,scrollContainerState:eb,footerHeight:ib,headerHeight:la,initialItemCount:vd,gap:Pd},Ob,{gridState:Kd,
totalListHeight:sc},Db,{startReached:fa,endReached:H,rangeChanged:sa,propsReady:cc},a)},tj(Ty,Ln,lv,sq,Us,Gw,Yq)),rv=["placeholder"],EH=si(function(){var a=og(function(Xa){return"Item "+Xa}),d=og({}),k=og(null),H=og("virtuoso-grid-item"),fa=og("virtuoso-grid-list"),la=og(Zp),sa=og("div"),Ha=og(wj),Ta=function(Xa,eb){return void 0===eb&&(eb=null),uj(wf(d,tg(function(ib){return ib[Xa]}),Ui()),eb)};return{context:k,itemContent:a,components:d,computeItemKey:la,itemClassName:H,listClassName:fa,headerFooterTag:sa,
scrollerRef:Ha,FooterComponent:Ta("Footer"),HeaderComponent:Ta("Header"),ListComponent:Ta("List","div"),ItemComponent:Ta("Item","div"),ScrollerComponent:Ta("Scroller","div"),ScrollSeekPlaceholder:Ta("ScrollSeekPlaceholder","div")}}),yk=si(function(a){function d(fa,la,sa){dg(wf(fa,ph(H.components),tg(function(Ha){var Ta,Xa=Ha[0];Ha=Ha[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+la+" instead."),Mh({},Ha,((Ta={})[la]=Xa,Ta))})),H.components)}var k=a[0],H=
a[1];a={item:Wk(H.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Zg(),ScrollContainer:Zg(),ListContainer:Zg(),emptyComponent:Zg(),scrollSeek:Zg()};return Uh(a.scrollSeek,function(fa){var la=fa.placeholder;fa=fn(fa,rv);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=Mh({},(0,H.components)(4),{ScrollSeekPlaceholder:la});(0,H.components)(0,la);(0,k.scrollSeekConfiguration)(0,
fa)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),Mh({},k,H,a)},tj(gu,EH)),Ws=Fh.memo(function(){var a=zk("gridState"),d=zk("listClassName"),k=zk("itemClassName"),H=zk("itemContent"),fa=zk("computeItemKey"),la=zk("isSeeking"),sa=Zm("scrollHeight"),Ha=zk("ItemComponent"),Ta=zk("ListComponent"),Xa=zk("ScrollSeekPlaceholder"),eb=zk("context"),ib=Zm("itemDimensions"),Db=Zm("gap"),Ob=zk("log"),Hb=Ri(function(cc){sa(cc.parentElement.parentElement.scrollHeight);
var sc=cc.firstChild;sc&&ib(sc.getBoundingClientRect());Db({row:im("row-gap",getComputedStyle(cc).rowGap,Ob),column:im("column-gap",getComputedStyle(cc).columnGap,Ob)})});return(0,$h.createElement)(Ta,Mh({ref:Hb,className:d},Uj(Ta,eb),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(cc){var sc=fa(cc.index,cc.data,eb);return la?(0,$h.createElement)(Xa,Mh({key:sc},Uj(Xa,eb),{index:cc.index,height:a.itemHeight,width:a.itemWidth})):(0,$h.createElement)(Ha,Mh({},Uj(Ha,
eb),{className:k,"data-index":cc.index,key:sc}),H(cc.index,cc.data,eb))}))}),WC=Fh.memo(function(){var a=zk("HeaderComponent"),d=Zm("headerHeight"),k=zk("headerFooterTag"),H=Ri(function(la){return d(El(la,"height"))}),fa=zk("context");return a?(0,$h.createElement)(k,{ref:H},(0,$h.createElement)(a,Uj(a,fa))):null}),XC=Fh.memo(function(){var a=zk("FooterComponent"),d=Zm("footerHeight"),k=zk("headerFooterTag"),H=Ri(function(la){return d(El(la,"height"))}),fa=zk("context");return a?(0,$h.createElement)(k,
{ref:H},(0,$h.createElement)(a,Uj(a,fa))):null}),nh=function(a){a=a.children;var d=(0,$h.useContext)(Cp),k=Zm("itemDimensions"),H=Zm("viewportDimensions"),fa=Ri(function(la){H(la.getBoundingClientRect())});return Fh.useEffect(function(){d&&(H({height:d.viewportHeight,width:d.viewportWidth}),k({height:d.itemHeight,width:d.itemWidth}))},[d,H,k]),Fh.createElement("div",{style:fu,ref:fa},a)},Lw=function(a){a=a.children;var d=(0,$h.useContext)(Cp),k=Zm("windowViewportRect"),H=Zm("itemDimensions"),fa=zk("customScrollParent");
fa=Nh(k,fa);return Fh.useEffect(function(){d&&(H({height:d.itemHeight,width:d.itemWidth}),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,k,H]),Fh.createElement("div",{ref:fa,style:fu},a)},eo=Pj(yk,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},Fh.memo(function(a){a=Mh({},a);var d=zk("useWindowScroll"),k=zk("customScrollParent"),H=k||d?Lw:nh;return Fh.createElement(k||d?hu:YC,Mh({},a),Fh.createElement(H,null,Fh.createElement(WC,null),Fh.createElement(Ws,null),Fh.createElement(XC,null)))})),Zm=eo.usePublisher,zk=eo.useEmitterValue,Mw=eo.useEmitter,YC=qo({usePublisher:Zm,useEmitterValue:zk,useEmitter:Mw}),hu=Rp({usePublisher:Zm,useEmitterValue:zk,useEmitter:Mw}),Nw=si(function(){var a=og(function(Ta){return Fh.createElement("td",
null,"Item $",Ta)}),d=og(null),k=og(null),H=og(null),fa=og({}),la=og(Zp),sa=og(wj),Ha=function(Ta,Xa){return void 0===Xa&&(Xa=null),uj(wf(fa,tg(function(eb){return eb[Ta]}),Ui()),Xa)};return{context:d,itemContent:a,fixedHeaderContent:k,fixedFooterContent:H,components:fa,computeItemKey:la,scrollerRef:sa,TableComponent:Ha("Table","table"),TableHeadComponent:Ha("TableHead","thead"),TableFooterComponent:Ha("TableFoot","tfoot"),TableBodyComponent:Ha("TableBody","tbody"),TableRowComponent:Ha("TableRow",
"tr"),ScrollerComponent:Ha("Scroller","div"),EmptyPlaceholder:Ha("EmptyPlaceholder"),ScrollSeekPlaceholder:Ha("ScrollSeekPlaceholder"),FillerRow:Ha("FillerRow")}}),iu=si(function(a){return Mh({},a[0],a[1])},tj(du,Nw)),ZC=function(a){return Fh.createElement("tr",null,Fh.createElement("td",{style:{height:a.height}}))},$C=function(a){return Fh.createElement("tr",null,Fh.createElement("td",{style:{height:a.height,padding:0,border:0}}))},Nn=Fh.memo(function(){var a=Mj("listState"),d=hp("sizeRanges"),k=
Mj("useWindowScroll"),H=Mj("customScrollParent"),fa=hp("windowScrollContainerState"),la=hp("scrollContainerState");k=H||k?fa:la;var sa=Mj("itemContent");fa=Mj("trackItemSizes");H=qr(d,Mj("itemSize"),fa,k,Mj("log"),void 0,H);d=H.callbackRef;var Ha=H.ref;H=Fh.useState(0);var Ta=H[0],Xa=H[1];Pw("deviation",function(Ub){Ta!==Ub&&(Ha.current.style.marginTop=Ub+"px",Xa(Ub))});fa=Mj("EmptyPlaceholder");var eb=Mj("ScrollSeekPlaceholder")||ZC;k=Mj("FillerRow")||$C;H=Mj("TableBodyComponent");var ib=Mj("TableRowComponent"),
Db=Mj("computeItemKey"),Ob=Mj("isSeeking");la=Mj("paddingTopAddition");var Hb=Mj("firstItemIndex"),cc=Mj("statefulTotalCount"),sc=Mj("context");if(0===cc&&fa)return(0,$h.createElement)(fa,Uj(fa,sc));fa=a.offsetTop+la+Ta;la=a.offsetBottom;fa=0<fa?Fh.createElement(k,{height:fa,key:"padding-top"}):null;k=0<la?Fh.createElement(k,{height:la,key:"padding-bottom"}):null;a=a.items.map(function(Ub){var kc=Ub.originalIndex,ec=Db(kc+Hb,Ub.data,sc);return Ob?(0,$h.createElement)(eb,Mh({},Uj(eb,sc),{key:ec,index:Ub.index,
height:Ub.size,type:Ub.type||"item"})):(0,$h.createElement)(ib,Mh({},Uj(ib,sc),{key:ec,"data-index":kc,"data-known-size":Ub.size,"data-item-index":Ub.index,style:{overflowAnchor:"none"}}),sa(Ub.index,Ub.data,sc))});return(0,$h.createElement)(H,Mh({ref:d,"data-test-id":"virtuoso-item-list"},Uj(H,sc)),[fa].concat(a,[k]))}),Ow=function(a){a=a.children;var d=(0,$h.useContext)(mv),k=hp("viewportHeight"),H=hp("fixedItemHeight"),fa=Ri(Ol(k,function(la){return El(la,"height")}));return Fh.useEffect(function(){d&&
(k(d.viewportHeight),H(d.itemHeight))},[d,k,H]),Fh.createElement("div",{style:fu,ref:fa,"data-viewport-type":"element"},a)},bz=function(a){a=a.children;var d=(0,$h.useContext)(mv),k=hp("windowViewportRect"),H=hp("fixedItemHeight"),fa=Mj("customScrollParent");fa=Nh(k,fa);return Fh.useEffect(function(){d&&(H(d.itemHeight),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,k,H]),Fh.createElement("div",{ref:fa,style:fu,"data-viewport-type":"window"},a)},sv=Pj(iu,{required:{},optional:{context:"context",
followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",
fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},
events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Fh.memo(function(a){var d=Mj("useWindowScroll"),k=Mj("customScrollParent"),H=hp("fixedHeaderHeight"),fa=hp("fixedFooterHeight"),la=Mj("fixedHeaderContent"),sa=Mj("fixedFooterContent"),Ha=Mj("context");
H=Ri(Ol(H,function(ib){return El(ib,"height")}));var Ta=Ri(Ol(fa,function(ib){return El(ib,"height")}));fa=k||d?aD:FH;d=k||d?bz:Ow;k=Mj("TableComponent");var Xa=Mj("TableHeadComponent"),eb=Mj("TableFooterComponent");la=la?Fh.createElement(Xa,Mh({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:H},Uj(Xa,Ha)),la()):null;sa=sa?Fh.createElement(eb,Mh({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Ta},Uj(eb,Ha)),sa()):null;return Fh.createElement(fa,Mh({},a),Fh.createElement(d,
null,Fh.createElement(k,Mh({style:{borderSpacing:0}},Uj(k,Ha)),[la,Fh.createElement(Nn,{key:"TableBody"}),sa])))})),hp=sv.usePublisher,Mj=sv.useEmitterValue,Pw=sv.useEmitter,FH=qo({usePublisher:hp,useEmitterValue:Mj,useEmitter:Pw}),aD=Rp({usePublisher:hp,useEmitterValue:Mj,useEmitter:Pw}),ju=yf(da(22)),$m=function(a){function d(k){k=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+k+" for more information.")||this;if(void 0===
k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}Yp(d,a);return d}(Aq(Error)),Qw={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",
floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",
lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",
mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",
sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},bD=/^#[a-fA-F0-9]{6}$/,cD=/^#[a-fA-F0-9]{8}$/,cz=/^#[a-fA-F0-9]{3}$/,Lo=/^#[a-fA-F0-9]{4}$/,Xs=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,
pm=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Rw=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,tv=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,fo=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},Gj=kr(lr,lr.length,[]),ku=
da(590),Hm=yf(da(22)),go=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const k=a.ownerDocument,H=k.activeElement;H!==a&&a.focus();k.execCommand("insertText",!1,d)||go.insertTextFirefox(a,d);H===k.body?a.blur():H instanceof HTMLElement&&H!==a&&H.focus()}static set(a,d){a.select();go.insert(a,d)}static getSelection(a){const {selectionStart:d,
selectionEnd:k}=a;return a.value.slice(d?d:void 0,k?k:void 0)}static wrapSelection(a,d,k){const {selectionStart:H,selectionEnd:fa}=a,la=go.getSelection(a);go.insert(a,d+la+(null!=k?k:d));a.selectionStart=(H||0)+d.length;a.selectionEnd=(fa||0)+d.length}static replace(a,d,k){let H=0;a.value.replace(d,(...fa)=>{const la=H+fa[fa.length-2],sa=fa[0].length;a.selectionStart=la;a.selectionEnd=la+sa;fa="string"===typeof k?k:k(...fa);go.insert(a,fa);a.selectionStart=la;H+=fa.length-sa;return fa})}static findLineEnd(a,
d){const k=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(k)?d:k+1}static indent(a){var d;const {selectionStart:k,selectionEnd:H,value:fa}=a;var la=fa.slice(k,H);if((la=null==(d=/\n/g.exec(la))?void 0:d.length)&&0<la){d=fa.lastIndexOf("\n",k-1)+1;var sa=a.value.slice(d,H-1);la=sa.replace(/^|\n/g,"$\x26  ");sa=la.length-sa.length;a.setSelectionRange(d,H-1);go.insert(a,la);a.setSelectionRange(k+1,H+sa)}else go.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:k,value:H}=a;var fa=
H.lastIndexOf("\n",d-1)+1;const la=go.findLineEnd(H,k);var sa=a.value.slice(fa,la);const Ha=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-Ha.length;a.setSelectionRange(fa,la);go.insert(a,Ha);fa=(fa=/\t| {1,2}/.exec(H.slice(fa,d)))?fa[0].length:0;a.setSelectionRange(d-fa,Math.max(d-fa,k-sa))}},Sw=da(590),lu=a=>a.stopPropagation(),mu=Hm.memo(function({font:a,text:d,color:k,fontStyle:H,fontSize:fa,fontWeight:la,offsetX:sa=0,offsetY:Ha=0,scale:Ta=1,isEditing:Xa=!1,pointerEvents:eb=!1,onBlur:ib,onChange:Db}){const Ob=
Hm.useRef(null),Hb=Hm.useRef(!1),cc=Hm.useCallback(Oc=>{Db(It.normalizeText(Oc.currentTarget.value))},[Db]),sc=Hm.useCallback(Oc=>{if("Escape"!==Oc.key)if("Tab"===Oc.key&&0===d.length)Oc.preventDefault();else{if("Meta"!==Oc.key&&!Oc.metaKey)Oc.stopPropagation();else if("z"===Oc.key&&Oc.metaKey){document.execCommand(Oc.shiftKey?"redo":"undo",!1);Oc.stopPropagation();Oc.preventDefault();return}"Tab"===Oc.key&&(Oc.preventDefault(),Oc.shiftKey?go.unindent(Oc.currentTarget):go.indent(Oc.currentTarget),
null==Db?void 0:Db(It.normalizeText(Oc.currentTarget.value)))}},[Db]),Ub=Hm.useCallback(Oc=>{Xa&&(Oc.currentTarget.setSelectionRange(0,0),null==ib?void 0:ib())},[ib]),kc=Hm.useCallback(Oc=>{Xa&&Hb.current&&document.activeElement===Oc.currentTarget&&Oc.currentTarget.select()},[Xa]),ec=Hm.useCallback(Oc=>{Xa&&Oc.stopPropagation()},[Xa]);Hm.useEffect(()=>{Xa&&requestAnimationFrame(()=>{Hb.current=!0;const Oc=Ob.current;Oc&&(Oc.focus(),Oc.select())})},[Xa,ib]);const Mc=Hm.useRef(null);Hm.useLayoutEffect(()=>
{const Oc=Mc.current;if(Oc){var vd=Wj(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:fa,lineHeight:1,fontWeight:la},4);Oc.style.transform=`scale(${Ta}, ${Ta}) translate(${sa}px, ${Ha}px)`;Oc.style.width=vd[0]+1+"px";Oc.style.height=vd[1]+1+"px"}},[d,la,fa,Ha,sa,Ta]);return(0,Sw.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Sw.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Mc,style:{font:a,fontStyle:H,fontSize:fa,fontWeight:la,color:k,pointerEvents:eb?"all":"none",
userSelect:Xa?"text":"none"},children:[Xa?(0,Sw.jsx)("textarea",{ref:Ob,style:{font:a,color:k,fontStyle:H,fontSize:fa,fontWeight:la},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:k,onFocus:kc,onChange:cc,onKeyDown:sc,onBlur:Ub,onPointerDown:ec,onContextMenu:lu,onCopy:lu,onPaste:lu,onCut:lu}):
d,"​"]})})}),ip=da(590),ho={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},On=class extends on{constructor(){super(...arguments);fb(this,"canEdit",!0);fb(this,"ReactComponent",rf(({events:a,isErasing:d,isBinding:k,isSelected:H,isEditing:fa,onEditingEnd:la})=>{const {props:{size:[sa,Ha],stroke:Ta,fill:Xa,noFill:eb,strokeWidth:ib,strokeType:Db,borderRadius:Ob,opacity:Hb,label:cc,italic:sc,fontWeight:Ub,fontSize:kc}}=this;var ec=cc||fa?Wj(cc,{fontFamily:"var(--ls-font-family)",fontSize:kc,lineHeight:1,fontWeight:Ub},
4):[0,0];const Mc=ce.mul(this.props.size,.5);ec=Math.max(.5,Math.min(1,sa/ec[0],Ha/ec[1]));const Oc=this.getBounds(),vd=ju.useMemo(()=>ce.sub(Mc,ce.toFixed([Oc.width/2,Oc.height/2])),[Oc,ec,Mc]),Kd=ju.useCallback(We=>{var ie;null==(ie=this.update)?void 0:ie.call(this,{label:We})},[cc]);return(0,ip.jsxs)("div",lf(he({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,ip.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:cc,color:zh(Ta,"text"),offsetX:vd[0],
offsetY:vd[1],fontSize:kc,scale:ec,isEditing:fa,onChange:Kd,onBlur:la,fontStyle:sc?"italic":"normal",fontWeight:Ub,pointerEvents:!!cc}),(0,ip.jsxs)(cp,{opacity:d?.2:Hb,children:[k&&(0,ip.jsx)(is,{mode:"svg",strokeWidth:ib,size:[sa,Ha]}),(0,ip.jsx)("rect",{className:H||!eb?"tl-hitarea-fill":"tl-hitarea-stroke",x:ib/2,y:ib/2,rx:Ob,ry:Ob,width:Math.max(.01,sa-ib),height:Math.max(.01,Ha-ib),pointerEvents:"all"}),(0,ip.jsx)("rect",{x:ib/2,y:ib/2,rx:Ob,ry:Ob,width:Math.max(.01,sa-ib),height:Math.max(.01,
Ha-ib),strokeWidth:ib,stroke:zh(Ta,"stroke"),strokeDasharray:"dashed"===Db?"8 2":void 0,fill:eb?"none":zh(Xa,"background")})]})]}))}));fb(this,"setScaleLevel",a=>oi(this,null,function*(){this.update({scaleLevel:a,fontSize:ho[null!=a?a:"md"],strokeWidth:ho[null!=a?a:"md"]/10});this.onResetBounds()}));fb(this,"ReactIndicator",rf(()=>{const {props:{size:[a,d],borderRadius:k,isLocked:H}}=this;return(0,ip.jsx)("g",{children:(0,ip.jsx)("rect",{width:a,height:d,rx:k,ry:k,fill:"transparent",strokeDasharray:H?
"8 2":void 0})})}));fb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return Qm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};fb(On,"id","box");fb(On,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,
opacity:1,label:""});$d([Jf],On.prototype,"scaleLevel",1);$d([Ig],On.prototype,"setScaleLevel",2);var Tw=yf(da(22)),jp=da(590),uv={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Ys=class extends wx{constructor(){super(...arguments);fb(this,"canEdit",!0);fb(this,"ReactComponent",rf(({isSelected:a,isErasing:d,events:k,isEditing:H,onEditingEnd:fa})=>{const {size:[la,sa],stroke:Ha,fill:Ta,noFill:Xa,strokeWidth:eb,strokeType:ib,opacity:Db,label:Ob,italic:Hb,fontWeight:cc,fontSize:sc}=this.props;var Ub=Ob||H?Wj(Ob,
{fontFamily:"var(--ls-font-family)",fontSize:sc,lineHeight:1,fontWeight:cc},4):[0,0];const kc=ce.mul(this.props.size,.5);Ub=Math.max(.5,Math.min(1,la/Ub[0],sa/Ub[1]));const ec=this.getBounds(),Mc=Tw.useMemo(()=>ce.sub(kc,ce.toFixed([ec.width/2,ec.height/2])),[ec,Ub,kc]),Oc=Tw.useCallback(vd=>{var Kd;null==(Kd=this.update)?void 0:Kd.call(this,{label:vd})},[Ob]);return(0,jp.jsxs)("div",lf(he({},k),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,jp.jsx)(mu,
{font:"18px / 1 var(--ls-font-family)",text:Ob,color:zh(Ha,"text"),offsetX:Mc[0],offsetY:Mc[1],scale:Ub,isEditing:H,onChange:Oc,onBlur:fa,fontStyle:Hb?"italic":"normal",fontSize:sc,fontWeight:cc,pointerEvents:!!Ob}),(0,jp.jsxs)(cp,lf(he({},k),{opacity:d?.2:Db,children:[(0,jp.jsx)("ellipse",{className:a||!Xa?"tl-hitarea-fill":"tl-hitarea-stroke",cx:la/2,cy:sa/2,rx:Math.max(.01,(la-eb)/2),ry:Math.max(.01,(sa-eb)/2)}),(0,jp.jsx)("ellipse",{cx:la/2,cy:sa/2,rx:Math.max(.01,(la-eb)/2),ry:Math.max(.01,(sa-
eb)/2),strokeWidth:eb,stroke:zh(Ha,"stroke"),strokeDasharray:"dashed"===ib?"8 2":void 0,fill:Xa?"none":zh(Ta,"background")})]}))]}))}));fb(this,"setScaleLevel",a=>oi(this,null,function*(){this.update({scaleLevel:a,fontSize:uv[null!=a?a:"md"],strokeWidth:uv[null!=a?a:"md"]/10});this.onResetBounds()}));fb(this,"ReactIndicator",rf(()=>{const {size:[a,d],isLocked:k}=this.props;return(0,jp.jsx)("g",{children:(0,jp.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:k?
"8 2":"undefined"})})}));fb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return Qm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,k],stroke:H,fill:fa,noFill:la,strokeWidth:sa,strokeType:Ha,opacity:Ta}=this.props;return(0,jp.jsxs)("g",{opacity:Ta,children:[(0,jp.jsx)("ellipse",{className:la?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:k/2,rx:Math.max(.01,(d-sa)/2),ry:Math.max(.01,
(k-sa)/2)}),(0,jp.jsx)("ellipse",{cx:d/2,cy:k/2,rx:Math.max(.01,(d-sa)/2),ry:Math.max(.01,(k-sa)/2),strokeWidth:sa,stroke:zh(H,"stroke"),strokeDasharray:"dashed"===Ha?"8 2":void 0,fill:la?"none":zh(fa,"background")})]})}};fb(Ys,"id","ellipse");fb(Ys,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});$d([Jf],Ys.prototype,"scaleLevel",1);$d([Ig],Ys.prototype,
"setScaleLevel",2);var Ur=da(590),Uw=class extends Wv{constructor(){super(...arguments);fb(this,"ReactComponent",rf(({events:a})=>{const d=this.getBounds(),k=He(),H=k.selectedShapesArray.some(la=>k.shapesInGroups([this]).includes(la)),fa=this.ReactIndicator;return(0,Ur.jsxs)(cp,lf(he({},a),{className:"tl-group-container",children:[(0,Ur.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),H&&(0,Ur.jsx)("g",{stroke:"var(--color-selectedFill)",
children:(0,Ur.jsx)(fa,{})})]}))}));fb(this,"ReactIndicator",rf(()=>{const a=this.getBounds();return(0,Ur.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};fb(Uw,"id","group");fb(Uw,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var vv=da(590),dz={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Vr=class extends Bt{constructor(a={}){super(a);fb(this,"ReactComponent",rf(({events:d,isErasing:k})=>{const {pointsPath:H,
props:{stroke:fa,strokeWidth:la,opacity:sa}}=this;return(0,vv.jsx)(cp,lf(he({},d),{opacity:k?.2:1,children:(0,vv.jsx)("path",{d:H,strokeWidth:16*la,stroke:zh(fa,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:sa})}))}));fb(this,"setScaleLevel",d=>oi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:dz[null!=d?d:"md"]});this.onResetBounds()}));fb(this,"ReactIndicator",rf(()=>{const {pointsPath:d,props:k}=this;return(0,vv.jsx)("path",{d,fill:"none",
strokeDasharray:k.isLocked?"8 2":"undefined"})}));fb(this,"validateProps",d=>{d=Qm(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});Jg(this)}get pointsPath(){const {points:a}=this.props;return wu.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:k,opacity:H}}=this;return(0,vv.jsx)("path",{d:a,strokeWidth:16*k,stroke:zh(d,"stroke"),fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:H})}};fb(Vr,"id","highlighter");fb(Vr,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});$d([Jf],Vr.prototype,"pointsPath",1);$d([Jf],Vr.prototype,"scaleLevel",1);$d([Ig],Vr.prototype,"setScaleLevel",2);var Zs=yf(da(22)),mf=da(590),eh={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Dp=class extends on{constructor(){super(...arguments);
fb(this,"canChangeAspectRatio",!0);fb(this,"canFlip",!1);fb(this,"canEdit",!0);fb(this,"htmlAnchorRef",Zs.createRef());fb(this,"setScaleLevel",a=>oi(this,null,function*(){var d;const k=ce.mul(this.props.size,eh[null!=a?a:"md"]/eh[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield dc();this.update({size:k})}));fb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const k=this.htmlAnchorRef.current.getBoundingClientRect(),[H,fa]=ce.div([k.width,k.height],null!=(d=
null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(H||400,1400),10),Math.max(Math.min(fa||400,1400),10)]})}return this});fb(this,"ReactComponent",rf(({events:a,isErasing:d,isEditing:k})=>{const {props:{html:H,scaleLevel:fa}}=this,la=jn(),sa=He(),Ha=sa.selectedIds.has(this.id),Ta=la||Ha&&!k||"select"!==sa.selectedTool.id,Xa=Zs.useCallback(ib=>{Ta||ib.stopPropagation()},[Ta]),eb=eh[null!=fa?fa:"md"];Zs.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:sa.viewport.camera.zoom}),
sa.persist(!0))},[]);return(0,mf.jsx)(Co,lf(he({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,mf.jsx)("div",{onWheelCapture:Xa,onPointerDown:Xa,onPointerUp:Xa,className:"tl-html-container",style:{pointerEvents:la||!k&&!Ha?"none":"all",overflow:k?"auto":"hidden",width:`calc(100% / ${eb})`,height:`calc(100% / ${eb})`,transform:`scale(${eb})`},children:(0,mf.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:H.trim()}})})}))}));
fb(this,"ReactIndicator",rf(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,mf.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}));fb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return Qm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};fb(Dp,"id","html");fb(Dp,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});$d([Jf],
Dp.prototype,"scaleLevel",1);$d([Ig],Dp.prototype,"setScaleLevel",2);var ez=yf(da(22)),nu=da(590),Wr=class extends on{constructor(){super(...arguments);fb(this,"frameRef",ez.createRef());fb(this,"canEdit",!0);fb(this,"onIFrameSourceChange",a=>{this.update({url:a})});fb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});fb(this,"ReactComponent",rf(({events:a,isErasing:d,isEditing:k})=>{ez.useRef(null);const H=
He();return(0,nu.jsx)(Co,lf(he({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,nu.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:k||H.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,nu.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,nu.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));
fb(this,"ReactIndicator",rf(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,nu.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}))}};fb(Wr,"id","iframe");fb(Wr,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});$d([Ig],Wr.prototype,"onIFrameSourceChange",2);$d([Ig],Wr.prototype,"reload",2);var fz=yf(da(22)),$s=da(590),wv=class extends xx{constructor(){super(...arguments);fb(this,"ReactComponent",rf(({events:a,
isErasing:d,isBinding:k,asset:H})=>{const {props:{opacity:fa,objectFit:la,clipping:sa,size:[Ha,Ta]}}=this,[Xa,eb,ib,Db]=Array.isArray(sa)?sa:[sa,sa,sa,sa],{handlers:Ob}=fz.useContext(ej);return(0,$s.jsxs)(Co,lf(he({},a),{opacity:d?.2:fa,children:[k&&(0,$s.jsx)(is,{mode:"html",strokeWidth:4,size:[Ha,Ta]}),(0,$s.jsx)("div",{"data-asset-loaded":!!H,className:"tl-image-shape-container",children:H?(0,$s.jsx)("img",{src:Ob?Ob.makeAssetUrl(H.src):H.src,draggable:!1,style:{position:"relative",top:-Xa,left:-Db,
width:Ha+(Db-eb),height:Ta+(Xa-ib),objectFit:la}}):"Asset is missing"})]}))}));fb(this,"ReactIndicator",rf(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,$s.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,k;const H=this.getBounds(),{assetId:fa,clipping:la}=this.props;if(a=a.find(sa=>sa.id===fa)){Array.isArray(la);const sa=null==(k=null==(d=window.logseq)?void 0:d.api)?void 0:k.make_asset_url;return(0,$s.jsx)("image",
{width:H.width,height:H.height,href:sa?sa(a.src):a.src})}return super.getShapeSVGJsx({})}};fb(wv,"id","image");fb(wv,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var gj=yf(da(22)),dD=yf(da(22)),Vw=da(590),$q=da(590),eD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ou=dD.memo(function({style:a,start:d,end:k,decorationStart:H,decorationEnd:fa,scaleLevel:la}){const sa=ce.dist(d,k);if(2>sa)return null;
const {strokeWidth:Ha}=a,Ta=1+Ha*eD[null!=la?la:"md"]/10,Xa="M"+ce.toFixed(d)+"L"+ce.toFixed(k);la=Math.min(sa/3,Ha*eD[null!=la?la:"md"]);H=H?Bq(d,k,la):null;fa=fa?Bq(k,d,la):null;return(0,$q.jsxs)($q.Fragment,{children:[(0,$q.jsx)("path",{className:"tl-stroke-hitarea",d:Xa}),(0,$q.jsx)("path",{d:Xa,strokeWidth:Ta,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),H&&(0,$q.jsx)(zq,{left:H.left,middle:d,right:H.right,
stroke:a.stroke,strokeWidth:Ta}),fa&&(0,$q.jsx)(zq,{left:fa.left,middle:k,right:fa.right,stroke:a.stroke,strokeWidth:Ta})]})}),xv=da(590),Pn=da(590),Xr={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},at=class extends Iu{constructor(){super(...arguments);fb(this,"hideSelection",!0);fb(this,"canEdit",!0);fb(this,"ReactComponent",rf(({events:a,isErasing:d,isEditing:k,onEditingEnd:H})=>{const {stroke:fa,handles:{start:la,end:sa},opacity:Ha,label:Ta,italic:Xa,fontWeight:eb,fontSize:ib,id:Db}=this.props,Ob=Ta||
k?Wj(Ta||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:ib,lineHeight:1,fontWeight:eb},6):[0,0],Hb=ce.med(la.point,sa.point);var cc=ce.dist(la.point,sa.point);cc=Math.max(.5,Math.min(1,Math.max(cc/(Ob[1]+128),cc/(Ob[0]+128))));const sc=this.getBounds(),Ub=gj.useMemo(()=>ce.sub(Hb,ce.toFixed([sc.width/2,sc.height/2])),[sc,cc,Hb]),kc=gj.useCallback(ec=>{var Mc;null==(Mc=this.update)?void 0:Mc.call(this,{label:ec})},[Ta]);return(0,Pn.jsxs)("div",lf(he({},a),{style:{width:"100%",height:"100%",
overflow:"hidden"},className:"tl-line-container",children:[(0,Pn.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:Ta,fontSize:ib,color:zh(fa,"text"),offsetX:Ub[0],offsetY:Ub[1],scale:cc,isEditing:k,onChange:kc,onBlur:H,fontStyle:Xa?"italic":"normal",fontWeight:eb,pointerEvents:!!Ta}),(0,Pn.jsxs)(cp,{opacity:d?.2:Ha,id:Db+"_svg",children:[(0,Pn.jsx)(gs,{id:Db,bounds:sc,labelSize:Ob,offset:Ub,scale:cc}),(0,Pn.jsx)("g",{pointerEvents:"none",mask:Ta||k?`url(#${Db}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));
fb(this,"setScaleLevel",a=>oi(this,null,function*(){this.update({scaleLevel:a,fontSize:Xr[null!=a?a:"md"]});this.onResetBounds()}));fb(this,"ReactIndicator",rf(({isEditing:a})=>{const {id:d,decorations:k,label:H,strokeWidth:fa,fontSize:la,fontWeight:sa,handles:{start:Ha,end:Ta},isLocked:Xa}=this.props,eb=this.getBounds(),ib=H||a?Wj(H,{fontFamily:"var(--ls-font-family)",fontSize:la,lineHeight:1,fontWeight:sa},6):[0,0],Db=ce.med(Ha.point,Ta.point);var Ob=ce.dist(Ha.point,Ta.point);Ob=Math.max(.5,Math.min(1,
Math.max(Ob/(ib[1]+128),Ob/(ib[0]+128))));const Hb=gj.useMemo(()=>ce.sub(Db,ce.toFixed([eb.width/2,eb.height/2])),[eb,Ob,Db]);return(0,Pn.jsxs)("g",{children:[(0,Pn.jsx)("path",{mask:H?`url(#${d}_clip)`:"",d:Tl({strokeWidth:fa},Ha.point,Ta.point,null==k?void 0:k.start,null==k?void 0:k.end),strokeDasharray:Xa?"8 2":"undefined"}),H&&!a&&(0,Pn.jsx)("rect",{x:eb.width/2-ib[0]/2*Ob+Hb[0],y:eb.height/2-ib[1]/2*Ob+Hb[1],width:ib[0]*Ob,height:ib[1]*Ob,rx:4*Ob,ry:4*Ob,fill:"transparent"})]})}));fb(this,"validateProps",
a=>Qm(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,fill:k,strokeWidth:H,strokeType:fa,decorations:la,label:sa,scaleLevel:Ha,handles:{start:Ta,end:Xa}}=this.props,eb=ce.med(Ta.point,Xa.point);return(0,Pn.jsxs)(Pn.Fragment,{children:[(0,Pn.jsx)(ou,{style:{stroke:zh(d,"text"),fill:k,strokeWidth:H,strokeType:fa},scaleLevel:Ha,start:Ta.point,end:Xa.point,decorationStart:null==la?void 0:la.start,decorationEnd:null==la?void 0:la.end}),
a&&(0,Pn.jsx)(Pn.Fragment,{children:(0,Pn.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${eb[0]}, ${eb[1]})`,textAnchor:"middle",fill:zh(d,"text"),stroke:zh(d,"text"),children:sa})})]})}};fb(at,"id","line");fb(at,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",
strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});$d([Jf],at.prototype,"scaleLevel",1);$d([Ig],at.prototype,"setScaleLevel",2);var Qn=yf(da(22)),Bj=da(590),kp={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Ep=rf(({type:a,fill:d,opacity:k,children:H})=>{const fa="var(--ls-secondary-background-color)"!==d?zh(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?bj(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,Bj.jsxs)("div",
{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,Bj.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:k,background:"P"===a?fa:`linear-gradient(0deg, ${d}, ${fa})`}}),(0,Bj.jsx)("div",{className:"relative",children:H})]})}),Uk=class extends on{constructor(a={}){var d;super(a);fb(this,"hideRotateHandle",!0);fb(this,"canChangeAspectRatio",!0);fb(this,"canFlip",!0);fb(this,"canEdit",!0);fb(this,"persist",null);fb(this,
"initialHeightCalculated",!0);fb(this,"getInnerHeight",null);fb(this,"setCollapsed",k=>oi(this,null,function*(){var H;if("B"===this.props.blockType){if(this.update({compact:k}),this.canResize[1]=!k,!k)this.onResetBounds()}else{const fa=this.props.size[1];this.canResize[1]=!k;this.update({isAutoResizing:!k,collapsed:k,size:[this.props.size[0],k?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:k?fa:this.props.collapsedHeight})}null==(H=this.persist)?void 0:H.call(this)}));fb(this,
"setScaleLevel",k=>oi(this,null,function*(){var H;const fa=ce.mul(this.props.size,kp[null!=k?k:"md"]/kp[null!=(H=this.props.scaleLevel)?H:"md"]);this.update({scaleLevel:k});yield dc();this.update({size:fa})}));fb(this,"onResetBounds",k=>{k=this.getAutoResizeHeight();null!==k&&1<Math.abs(k-this.props.size[1])&&(this.update({size:[this.props.size[0],k]}),this.initialHeightCalculated=!0);return this});fb(this,"onResize",(k,H)=>{var fa;const {bounds:la,rotation:sa,scale:[Ha,Ta]}=H;k=[...this.scale];0>
Ha&&(k[0]*=-1);0>Ta&&(k[1]*=-1);H=la.height;this.props.isAutoResizing&&(H=null!=(fa=this.getAutoResizeHeight())?fa:H);return this.update({point:[la.minX,la.minY],size:[Math.max(1,la.width),Math.max(1,H)],scale:k,rotation:sa})});fb(this,"PortalComponent",rf(({})=>{const {props:{pageId:k,fill:H,opacity:fa}}=this,{renderers:la}=Qn.useContext(ej),sa=He(),Ha=Qn.useRef(null),[,Ta]=this.useComponentSize(Ha,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");
if(null==la||!la.Page)return null;const {Page:Xa,Block:eb}=la,[ib,Db]=Qn.useState(!1);Qn.useEffect(()=>{var Ob,Hb;if(this.props.isAutoResizing){const cc=(null!=(Hb=null==(Ob=this.getInnerHeight)?void 0:Ob.call(this))?Hb:Ta)+this.getHeaderHeight();Ta&&1<Math.abs(cc-this.props.size[1])&&(this.update({size:[this.props.size[0],cc]}),ib&&sa.persist(!0))}},[Ta,this.props.isAutoResizing]);Qn.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();sa.persist(!0)})},[this.initialHeightCalculated]);
Qn.useEffect(()=>{setTimeout(function(){Db(!0)})},[]);return(0,Bj.jsxs)(Bj.Fragment,{children:[(0,Bj.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>sa.viewport.camera.zoom?"optimizeSpeed":"auto",background:H&&"var(--ls-secondary-background-color)"!==H?bj(H)?`var(--ls-highlight-color-${H})`:H:"var(--ls-secondary-background-color)",opacity:fa}}),(0,Bj.jsx)("div",{ref:Ha,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?
"visible":"auto"},children:(ib||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,Bj.jsx)(eb,{blockId:k}):(0,Bj.jsx)(Xa,{pageName:k}))})]})}));fb(this,"ReactComponent",rf(k=>{var H;const {events:fa,isErasing:la,isEditing:sa,isBinding:Ha}=k,{props:{opacity:Ta,pageId:Xa,fill:eb,scaleLevel:ib,strokeWidth:Db,size:Ob}}=this,Hb=He(),{renderers:cc,handlers:sc}=Qn.useContext(ej);this.persist=()=>Hb.persist();const Ub=jn(),kc=Hb.selectedIds.has(this.id)&&1===Hb.selectedIds.size,
ec=Hb.isIn("logseq-portal.creating")&&!Xa,Mc=(Ub||kc&&!sa||"select"!==Hb.selectedTool.id)&&!ec,Oc=Qn.useCallback(ld=>{Mc||ld.stopPropagation()},[Mc]),vd=1===Hb.selectedShapesArray.length&&Hb.selectedShapesArray.some(ld=>"logseq-portal"===ld.type&&ld.props.id!==this.props.id&&Xa&&ld.props.pageId===Xa),Kd=kp[null!=ib?ib:"md"];Qn.useEffect(()=>this.props.collapsed&&sa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):
()=>{},[sa,this.props.collapsed]);Qn.useEffect(()=>{if(ec){const ld=[Hb.viewport.bounds.width,Hb.viewport.bounds.height],Qd=Hb.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(Qd[0]>ld[0]-400||Qd[1]>ld[1]-240||1.5<Hb.viewport.camera.zoom||.5>Hb.viewport.camera.zoom)&&Hb.viewport.zoomToBounds(lf(he({},this.bounds),{minY:this.bounds.maxY+25}))}},[Hb.viewport.bounds.height.toFixed(2)]);const We=Qn.useCallback(ld=>{this.initialHeightCalculated=!1;const Qd=pk(ld)?"B":"P";this.update({pageId:ld,
size:[400,320],blockType:Qd,compact:"B"===Qd});Hb.selectTool("select");Hb.history.resume();Hb.history.persist()},[]),ie=this.PortalComponent;var Je=Qn.useMemo(()=>{var ld;if(Xa&&"B"===this.props.blockType)return null==(ld=null==sc?void 0:sc.queryBlockByUUID(Xa))?void 0:ld.content},[null==sc?void 0:sc.queryBlockByUUID,Xa]);Je="B"===this.props.blockType&&"string"!==typeof Je;const Hf=(!this.props.collapsed||sa)&&!Je;if(null==cc||!cc.Page)return null;const {Breadcrumb:Se,PageName:Xe}=cc,Pd={width:`calc(100% / ${Kd})`,
height:`calc(100% / ${Kd})`,opacity:la?.2:1};1!==Kd&&(Pd.transform=`scale(${Kd})`);return(0,Bj.jsxs)(Co,lf(he({style:{pointerEvents:"all"}},fa),{children:[Ha&&(0,Bj.jsx)(is,{mode:"html",strokeWidth:Db,size:Ob}),(0,Bj.jsx)("div",{"data-inner-events":!Mc,onWheelCapture:Oc,onPointerDown:Oc,onPointerUp:Oc,style:{width:"100%",height:"100%",pointerEvents:Ub||!sa&&!kc?"none":"all"},children:ec?(0,Bj.jsx)(ft,{onChange:We,onAddBlock:ld=>{setTimeout(()=>{var Qd,hd,Dd;Hb.api.editShape(this);null==(Dd=null==
(hd=null==(Qd=window.logseq)?void 0:Qd.api)?void 0:hd.edit_block)?void 0:Dd.call(hd,ld)})},placeholder:"Create or search your graph..."}):(0,Bj.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":Xa,"data-portal-selected":vd,"data-editing":sa,style:Pd,children:[!this.props.compact&&!Je&&(0,Bj.jsx)(Ep,{type:null!=(H=this.props.blockType)?H:"P",fill:eb,opacity:Ta,children:"P"===this.props.blockType?(0,Bj.jsx)(Xe,{pageName:Xa}):(0,Bj.jsx)(Se,{blockId:Xa})}),
Je&&(0,Bj.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),Hf&&(0,Bj.jsx)(ie,he({},k))]})})]}))}));fb(this,"ReactIndicator",rf(()=>{const k=this.getBounds();return(0,Bj.jsx)("rect",{width:k.width,height:k.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));fb(this,"validateProps",k=>{var H;if(void 0!==k.size){const fa=kp[null!=(H=this.props.scaleLevel)?H:"md"];k.size[0]=Math.max(k.size[0],60*fa);k.size[1]=Math.max(k.size[1],40*fa)}return Qm(this,
k)});Jg(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [k,H]=Qn.useState([0,0]),fa=He();Qn.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const la=
d?a.current.querySelector(d):a.current;if(la){const sa=()=>{const {width:Ta,height:Xa}=la.getBoundingClientRect(),eb=ce.div([Ta,Xa],fa.viewport.camera.zoom);H(eb);return eb};sa();this.getInnerHeight=()=>sa()[1];const Ha=new ResizeObserver(()=>{sa()});Ha.observe(la);return()=>{Ha.disconnect()}}}return()=>{}},10)},[a,d]);return k}getHeaderHeight(){var a;const d=kp[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+
this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,k;const H=this.getBounds();return(0,Bj.jsxs)(Bj.Fragment,{children:[(0,Bj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?bj(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:zh(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:H.width,rx:8,ry:8,
height:H.height}),!this.props.compact&&(0,Bj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?zh(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(k=this.props.opacity)?k:.2,x:1,y:1,width:H.width-2,height:38,rx:8,ry:8}),(0,Bj.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${H.width/2}, ${10+H.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",
stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};fb(Uk,"id","logseq-portal");fb(Uk,"defaultSearchQuery","");fb(Uk,"defaultSearchFilter",null);fb(Uk,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});$d([Jf],Uk.prototype,"collapsed",
1);$d([Ig],Uk.prototype,"setCollapsed",2);$d([Jf],Uk.prototype,"scaleLevel",1);$d([Ig],Uk.prototype,"setScaleLevel",2);var {min:Fp,PI:fD}=Math,ar=fD+1E-4,yv=da(590),Gp={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},bt={easing:a=>Math.sin(a*Math.PI/2),simulatePressure:!0},gz={easing:a=>a*a,simulatePressure:!1},Mg=class extends Bt{constructor(a={}){super(a);fb(this,"ReactComponent",rf(({events:d,isErasing:k})=>{const {props:{opacity:H}}=this;return(0,yv.jsx)(cp,lf(he({},d),{opacity:k?.2:H,children:this.getShapeSVGJsx()}))}));
fb(this,"setScaleLevel",d=>oi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:Gp[null!=d?d:"md"]});this.onResetBounds()}));fb(this,"ReactIndicator",rf(()=>{const {pointsPath:d}=this;return(0,yv.jsx)("path",{d,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));fb(this,"validateProps",d=>{d=Qm(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});Jg(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=lf(he({size:1+1.5*a.strokeWidth,
thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?bt:gz),{last:a.isComplete}),a=tk(a.points,d),d=wu.getSvgPathFromStroke(Dq(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:k,strokeType:H}}=this;return(0,yv.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:k/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:zh(d,"text"),fill:zh(d,"text"),strokeDasharray:"dashed"===H?"12 4":void 0})}};
fb(Mg,"id","pencil");fb(Mg,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});$d([Jf],Mg.prototype,"pointsPath",1);$d([Jf],Mg.prototype,"scaleLevel",1);$d([Ig],Mg.prototype,"setScaleLevel",2);var zv=yf(da(22)),Mo=da(590),br={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},No=class extends Br{constructor(){super(...arguments);fb(this,"canEdit",!0);fb(this,"ReactComponent",rf(({events:a,isErasing:d,
isSelected:k,isEditing:H,onEditingEnd:fa})=>{const {offset:[la,sa],props:{stroke:Ha,fill:Ta,noFill:Xa,strokeWidth:eb,opacity:ib,strokeType:Db,label:Ob,italic:Hb,fontWeight:cc,fontSize:sc}}=this,Ub=this.getVertices(eb/2).join();var kc=Ob||H?Wj(Ob,{fontFamily:"var(--ls-font-family)",fontSize:sc,lineHeight:1,fontWeight:cc},4):[0,0];const ec=[this.props.size[0]/2,2*this.props.size[1]/3];kc=Math.max(.5,Math.min(1,this.props.size[0]/(2*kc[0]),this.props.size[1]/(2*kc[1])));const Mc=this.getBounds(),Oc=
zv.useMemo(()=>ce.sub(ec,ce.toFixed([Mc.width/2,Mc.height/2])),[Mc,kc,ec]),vd=zv.useCallback(Kd=>{var We;null==(We=this.update)?void 0:We.call(this,{label:Kd})},[Ob]);return(0,Mo.jsxs)("div",lf(he({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Mo.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:Ob,fontSize:sc,color:zh(Ha,"text"),offsetX:Oc[0],offsetY:Oc[1]/kc,scale:kc,isEditing:H,onChange:vd,onBlur:fa,fontStyle:Hb?"italic":"normal",fontWeight:cc,pointerEvents:!!Ob}),(0,Mo.jsx)(cp,
{opacity:d?.2:ib,children:(0,Mo.jsxs)("g",{transform:`translate(${la}, ${sa})`,children:[(0,Mo.jsx)("polygon",{className:k||!Xa?"tl-hitarea-fill":"tl-hitarea-stroke",points:Ub}),(0,Mo.jsx)("polygon",{points:Ub,stroke:zh(Ha,"stroke"),fill:Xa?"none":zh(Ta,"background"),strokeWidth:eb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Db?"8 2":void 0})]})})]}))}));fb(this,"setScaleLevel",a=>oi(this,null,function*(){this.update({scaleLevel:a,fontSize:br[null!=a?a:"md"],strokeWidth:br[null!=a?
a:"md"]/10});this.onResetBounds()}));fb(this,"ReactIndicator",rf(()=>{const {offset:[a,d],props:{strokeWidth:k,isLocked:H}}=this;return(0,Mo.jsx)("g",{children:(0,Mo.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(k/2).join(),strokeDasharray:H?"8 2":"undefined"})})}));fb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return Qm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,k],props:{stroke:H,
fill:fa,noFill:la,strokeWidth:sa,opacity:Ha,strokeType:Ta}}=this;a=this.getVertices(sa/2).join();return(0,Mo.jsxs)("g",{transform:`translate(${d}, ${k})`,opacity:Ha,children:[(0,Mo.jsx)("polygon",{className:la?"tl-hitarea-stroke":"tl-hitarea-fill",points:a}),(0,Mo.jsx)("polygon",{points:a,stroke:zh(H,"stroke"),fill:la?"none":zh(fa,"background"),strokeWidth:sa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Ta?"8 2":void 0})]})}};fb(No,"id","polygon");fb(No,"defaultProps",{id:"polygon",
parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});$d([Jf],No.prototype,"scaleLevel",1);$d([Ig],No.prototype,"setScaleLevel",2);var lp=yf(da(22)),Im=da(590),gD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},an=class extends yx{constructor(){super(...arguments);fb(this,"ReactComponent",rf(({events:a,isErasing:d,isEditing:k,onEditingEnd:H})=>{const {props:{opacity:fa,
fontFamily:la,fontSize:sa,fontWeight:Ha,italic:Ta,lineHeight:Xa,text:eb,stroke:ib,padding:Db}}=this,Ob=lp.useRef(null),Hb=lp.useRef(!1),cc=lp.useRef(null),sc=lp.useCallback(Oc=>{const {isSizeLocked:vd}=this.props;Oc=It.normalizeText(Oc.currentTarget.value);vd?this.update({text:Oc,size:this.getAutoSizedBoundingBox({text:Oc})}):this.update({text:Oc})},[]),Ub=lp.useCallback(Oc=>{if("Escape"!==Oc.key)if("Tab"===Oc.key&&0===eb.length)Oc.preventDefault();else{if("Meta"!==Oc.key&&!Oc.metaKey)Oc.stopPropagation();
else if("z"===Oc.key&&Oc.metaKey){Oc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Oc.stopPropagation();Oc.preventDefault();return}"Tab"===Oc.key&&(Oc.preventDefault(),Oc.shiftKey?go.unindent(Oc.currentTarget):go.indent(Oc.currentTarget),this.update({text:It.normalizeText(Oc.currentTarget.value)}))}},[]),kc=lp.useCallback(Oc=>{k&&(null==H?void 0:H())},[H]),ec=lp.useCallback(Oc=>{k&&Hb.current&&document.activeElement===Oc.currentTarget&&Oc.currentTarget.select()},[k]),Mc=
lp.useCallback(Oc=>{k&&Oc.stopPropagation()},[k]);lp.useEffect(()=>{k&&requestAnimationFrame(()=>{Hb.current=!0;const Oc=Ob.current;Oc&&(Oc.focus(),Oc.select())})},[k,H]);lp.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,Im.jsx)(Co,lf(he({},a),{opacity:d?.2:fa,children:(0,Im.jsx)("div",{ref:cc,className:"tl-text-shape-wrapper","data-hastext":!!eb,"data-isediting":k,style:{fontFamily:la,fontStyle:Ta?"italic":"normal",fontSize:sa,fontWeight:Ha,
padding:Db,lineHeight:Xa,color:zh(ib,"text")},children:k?(0,Im.jsx)("textarea",{ref:Ob,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:eb,onFocus:ec,onChange:sc,onKeyDown:Ub,onBlur:kc,onPointerDown:Mc}):(0,Im.jsxs)(Im.Fragment,{children:[eb,"​"]})})}))}));fb(this,"setScaleLevel",a=>oi(this,null,function*(){this.update({scaleLevel:a,
fontSize:gD[null!=a?a:"md"]});this.onResetBounds()}));fb(this,"ReactIndicator",rf(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:k},bounds:H}=this;return a?null:(0,Im.jsx)("rect",{width:H.width,height:H.height,rx:d,ry:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}));fb(this,"validateProps",a=>Qm(this,a));fb(this,"getBounds",()=>{const [a,d]=this.props.point,[k,H]=this.props.size;return{minX:a,minY:d,maxX:a+k,maxY:d+H,width:k,height:H}});fb(this,"onResizeStart",({isSingle:a})=>
{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});fb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:k=this.props.fontFamily,fontSize:H=this.props.fontSize,fontWeight:fa=this.props.fontWeight,lineHeight:la=this.props.lineHeight,padding:sa=
this.props.padding}=a,[Ha,Ta]=Wj(d,{fontFamily:k,fontSize:H,lineHeight:la,fontWeight:fa},sa);return[Ha,Ta]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:d,stroke:k,fontSize:H,fontFamily:fa}}=this;a=this.getBounds();return(0,Im.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,Im.jsx)("div",{style:{color:zh(k,"text"),fontSize:H,fontFamily:fa,display:"contents"},children:d})})}};
fb(an,"id","text");fb(an,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});$d([Jf],an.prototype,"scaleLevel",1);$d([Ig],an.prototype,"setScaleLevel",2);var ct=yf(da(22)),pu=da(590),Yr=class extends on{constructor(){super(...arguments);fb(this,"canFlip",!1);fb(this,"canEdit",
!0);fb(this,"canChangeAspectRatio",!1);fb(this,"ReactComponent",rf(({events:a,isErasing:d,asset:k,isEditing:H})=>{const {props:{opacity:fa}}=this,la=jn();var sa=He();const Ha=sa.selectedIds.has(this.id),Ta=la||Ha&&!H||"select"!==sa.selectedTool.id;sa=ct.useCallback(eb=>{Ta||eb.stopPropagation()},[Ta]);const {handlers:Xa}=ct.useContext(ej);return(0,pu.jsx)(Co,lf(he({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:fa}},a),{children:(0,pu.jsx)("div",{onWheelCapture:sa,onPointerDown:sa,onPointerUp:sa,
className:"tl-video-container",style:{pointerEvents:la||!H&&!Ha?"none":"all",overflow:H?"auto":"hidden"},children:k&&(0,pu.jsx)("video",{controls:!0,src:Xa?Xa.makeAssetUrl(k.src):k.src})})}))}));fb(this,"ReactIndicator",rf(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,pu.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}))}};fb(Yr,"id","video");fb(Yr,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",
clipping:0,isAspectRatioLocked:!0});var dm=da(590),Av=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,Ww=class extends on{constructor(){super(...arguments);fb(this,"aspectRatio",480/853);fb(this,"canChangeAspectRatio",!1);fb(this,"canFlip",!1);fb(this,"canEdit",!0);fb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:Ww.defaultProps.size})});fb(this,"ReactComponent",rf(({events:a,isErasing:d,isEditing:k})=>{const H=He();return(0,dm.jsx)(Co,
lf(he({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,dm.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:k||H.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,dm.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,dm.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",
width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,dm.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,dm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,dm.jsxs)("g",
{children:[(0,dm.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,dm.jsx)("g",{children:(0,dm.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,dm.jsxs)("g",{fill:"#fff",children:[(0,dm.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,dm.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));fb(this,"ReactIndicator",rf(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,dm.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}));fb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return Qm(this,a)})}get embedId(){var a,d;const k=this.props.url,
H=k.match(Av);return null!=(d=null!=(a=null==H?void 0:H[1])?a:k)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,dm.jsxs)("g",{children:[(0,dm.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,dm.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,dm.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},cr=Ww;fb(cr,"id","youtube");fb(cr,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});$d([Jf],cr.prototype,"embedId",1);$d([Ig],cr.prototype,"onYoutubeLinkChange",2);var Zr=yf(da(22)),tq=da(590),Xw=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,hz=class extends on{constructor(){super(...arguments);fb(this,"canFlip",!1);fb(this,"canEdit",!0);fb(this,"initialHeightCalculated",
!0);fb(this,"getInnerHeight",null);fb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:hz.defaultProps.size})});fb(this,"ReactComponent",rf(({events:a,isErasing:d,isEditing:k})=>{const {renderers:{Tweet:H}}=Zr.useContext(ej),fa=He(),la=Zr.useRef(null),[,sa]=this.useComponentSize(la);Zr.useEffect(()=>{var Ha,Ta;const Xa=null!=(Ta=null==(Ha=this.getInnerHeight)?void 0:Ha.call(this))?Ta:sa;sa&&1<Math.abs(Xa-this.props.size[1])&&(this.update({size:[this.props.size[0],Xa]}),fa.persist(!0))},[sa]);
Zr.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();fa.persist(!0)})},[this.initialHeightCalculated]);return(0,tq.jsx)(Co,lf(he({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,tq.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:k||fa.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,tq.jsx)("div",{ref:la,children:(0,tq.jsx)(H,{tweetId:this.embedId})}):null})}))}));
fb(this,"ReactIndicator",rf(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,tq.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}));fb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});fb(this,"onResize",(a,d)=>{var k;const {bounds:H,rotation:fa,scale:[la,sa]}=d;a=[...this.scale];0>la&&(a[0]*=-1);0>sa&&(a[1]*=
-1);d=null!=(k=this.getAutoResizeHeight())?k:H.height;return this.update({point:[H.minX,H.minY],size:[Math.max(1,H.width),Math.max(1,d)],scale:a,rotation:fa})});fb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return Qm(this,a)})}get embedId(){var a,d;const k=this.props.url,H=k.match(Xw);return null!=(d=null!=(a=null==H?void 0:H[1])?a:k)?d:""}useComponentSize(a,d=""){const [k,H]=Zr.useState([0,0]),fa=He();Zr.useEffect(()=>
{if(null==a?0:a.current){const la=d?a.current.querySelector(d):a.current;if(la){const sa=()=>{const {width:Ta,height:Xa}=la.getBoundingClientRect(),eb=ce.div([Ta,Xa],fa.viewport.camera.zoom);H(eb);return eb};sa();this.getInnerHeight=()=>sa()[1];const Ha=new ResizeObserver(()=>{sa()});Ha.observe(la);return()=>{Ha.disconnect()}}}return()=>{}},[a,d]);return k}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,tq.jsxs)("g",
{children:[(0,tq.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,tq.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,tq.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},dt=hz;fb(dt,"id","tweet");fb(dt,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});$d([Jf],dt.prototype,"embedId",1);$d([Ig],dt.prototype,"onTwitterLinkChange",2);var Yw=yf(da(22)),Bv=da(590),Hp=class extends on{constructor(){super(...arguments);fb(this,"frameRef",Yw.createRef());fb(this,"canChangeAspectRatio",!0);fb(this,"canFlip",!0);fb(this,"canEdit",!0);fb(this,"ReactComponent",
rf(({events:a,asset:d,isErasing:k,isEditing:H})=>{Yw.useRef(null);const {handlers:fa}=Yw.useContext(ej);He();const la=jn();return(0,Bv.jsx)(Co,lf(he({style:{overflow:"hidden",pointerEvents:"all",opacity:k?.2:1}},a),{children:d?(0,Bv.jsx)("embed",{src:fa?fa.inflateAsset(d.src).url:d.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!la&&H?"all":"none"}}):null}))}));fb(this,"ReactIndicator",rf(()=>{const {props:{size:[a,
d],isLocked:k}}=this;return(0,Bv.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}))}};fb(Hp,"id","pdf");fb(Hp,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});da(590);var Zw=[On,Ys,Vr,wv,Yr,at,Mg,No,an,cr,dt,Wr,Dp,Hp,Uk,Uw],Jm=class extends Oq{constructor(){super(...arguments);fb(this,"Shape",On)}};fb(Jm,"id","box");fb(Jm,"shortcut","whiteboard/rectangle");var et=class extends Oq{constructor(){super(...arguments);
fb(this,"Shape",Ys)}};fb(et,"id","ellipse");fb(et,"shortcut","whiteboard/ellipse");var bn=class extends Xv{};fb(bn,"id","erase");fb(bn,"shortcut","whiteboard/eraser");var iz=class extends Ju{constructor(){super(...arguments);fb(this,"Shape",Vr);fb(this,"simplify",!0);fb(this,"simplifyTolerance",.618)}};fb(iz,"id","highlighter");fb(iz,"shortcut","whiteboard/highlighter");var Km=class extends Yv{constructor(){super(...arguments);fb(this,"Shape",at)}};fb(Km,"id","line");fb(Km,"shortcut","whiteboard/connector");
var mp=class extends Ju{constructor(){super(...arguments);fb(this,"Shape",Mg);fb(this,"simplify",!1)}};fb(mp,"id","pencil");fb(mp,"shortcut","whiteboard/pencil");var jz=class extends Oq{constructor(){super(...arguments);fb(this,"Shape",No)}};fb(jz,"id","polygon");var kz=class extends Zv{constructor(){super(...arguments);fb(this,"Shape",an)}};fb(kz,"id","text");fb(kz,"shortcut","whiteboard/text");var hD=class extends Oq{constructor(){super(...arguments);fb(this,"Shape",cr)}};fb(hD,"id","youtube");
var Al=class extends Vi{constructor(){super(...arguments);fb(this,"creatingShape");fb(this,"offset",[0,0]);fb(this,"onEnter",()=>{this.app.history.pause();fd(()=>{var a=ce.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(a=ce.snap(a,8));this.creatingShape=a=new Uk({id:gk(),parentId:this.app.currentPage.id,point:a,size:Uk.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});
fb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});fb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};fb(Al,"id","creating");var dr=class extends Vi{constructor(){super(...arguments);
fb(this,"cursor","crosshair");fb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};fb(dr,"id","idle");var qn=class extends Cr{constructor(){super(...arguments);fb(this,"Shape",Uk);fb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};fb(qn,"id","logseq-portal");fb(qn,"shortcut","whiteboard/portal");fb(qn,"states",[dr,Al]);fb(qn,"initial","idle");var $w=class extends Oq{constructor(){super(...arguments);fb(this,"Shape",Dp)}};fb($w,"id","youtube");var ai=class extends Oq{constructor(){super(...arguments);
fb(this,"Shape",Wr)}};fb(ai,"id","iframe");var GH=yf(da(593)),np=da(590),iD=new Map(Zw.map(a=>[a.id,a])),Wh=class{constructor(a){fb(this,"shapes");fb(this,"pageId");fb(this,"assets");a&&this.load(a)}load(a){var d;const k=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==k?void 0:k.id;this.assets=a.assets;this.shapes=null==k?void 0:k.shapes.map(H=>{var fa=H.type;if(!fa)throw Error("No shape type provided.");const la=iD.get(fa);if(!la)throw Error(`Could not find shape class for ${fa}`);
return new la(H)}).filter(H=>"group"!==H.type)}generatePreviewJsx(a,d){var k,H;const fa=[...(null!=(k=this.shapes)?k:[]).map(Xa=>Xa.getRotatedBounds())];(k=null==a?void 0:a.currentView)&&fa.push(k);let la=Bf.getCommonBounds(fa);if(!la)return null;la=Bf.expandBounds(la,16);la=d?Bf.ensureRatio(la,d):la;const sa=Xa=>[(Xa[0]-la.minX).toFixed(2),(Xa[1]-la.minY).toFixed(2)],[Ha,Ta]=k?sa([k.minX,k.minY]):[0,0];return la&&(0,np.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":la.minX.toFixed(2),
"data-common-bound-y":la.minY.toFixed(2),"data-common-bound-width":la.width.toFixed(2),"data-common-bound-height":la.height.toFixed(2),viewBox:[0,0,la.width,la.height].join(" "),children:[(0,np.jsx)("defs",{children:k&&(0,np.jsxs)(np.Fragment,{children:[(0,np.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Ha}, ${Ta})`,width:k.width,height:k.height}),(0,np.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,np.jsx)("rect",{width:la.width,height:la.height,fill:"white"}),(0,np.jsx)("use",
{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,np.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(H=this.shapes)?void 0:H.map(Xa=>{var eb,ib;const {bounds:Db,props:{rotation:Ob}}=Xa,[Hb,cc]=sa([Db.minX,Db.minY]),sc=+(180*((null!=Ob?Ob:0)+(null!=(eb=Db.rotation)?eb:0))/Math.PI).toFixed(2),[Ub,kc]=[(Db.width/2).toFixed(2),(Db.height/2).toFixed(2)];return(0,np.jsx)("g",{transform:[`translate(${Hb}, ${cc})`,`rotate(${sc}, ${Ub}, ${kc})`].join(" "),children:Xa.getShapeSVGJsx({assets:null!=
(ib=this.assets)?ib:[]})},Xa.id)})}),(0,np.jsx)("rect",{mask:k?`url(#${this.pageId}-camera-mask)`:"",width:la.width,height:la.height,fill:"transparent"}),k&&(0,np.jsx)("use",{id:"minimap-camera-rect","data-x":Ha,"data-y":Ta,"data-width":k.width,"data-height":k.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?GH.default.renderToString(a):""}},qu=yf(da(22)),Oo=da(590),Ip=qu.forwardRef((a,
d)=>{var {value:k,className:H}=a;a=Mf(a,["autoResize","value","className"]);return(0,Oo.jsx)("div",{className:"tl-input"+(H?" "+H:""),children:(0,Oo.jsxs)("div",{className:"tl-input-sizer",children:[(0,Oo.jsx)("div",{className:"tl-input-hidden",children:k}),(0,Oo.jsx)("input",he({ref:d,value:k,className:"tl-text-input",type:"text"},a))]})})}),ji=da(590),Jp=({type:a,active:d})=>(0,ji.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,ji.jsx)("i",{className:`tie tie-${({B:"block",P:"page",
WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),jD=(a,d)=>(0,ji.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((k,H)=>1===H%2?(0,ji.jsx)("mark",{className:"tl-highlighted",children:k}):k).map((k,H)=>(0,ji.jsx)(Tk.default.Fragment,{children:k},H))}),HH=(a,d)=>{const {handlers:k}=Tk.default.useContext(ej),[H,fa]=Tk.default.useState(null),la=wo(a,200);Tk.default.useEffect(()=>{let sa=
!1;if(0<la.length){const Ha={"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?Ha["pages?"]=!1:"P"===d&&(Ha["blocks?"]=!1);k.search(la,Ha).then(Ta=>{sa||fa(Ta)})}else fa(null);return()=>{sa=!0}},[la,null==k?void 0:k.search]);return H},ft=rf(({className:a,style:d,placeholder:k,onChange:H,onBlur:fa,onAddBlock:la})=>{const [sa,Ha]=Tk.default.useState(Uk.defaultSearchQuery),[Ta,Xa]=Tk.default.useState(Uk.defaultSearchFilter),eb=Tk.default.useRef(null),{handlers:ib,renderers:Db}=Tk.default.useContext(ej),
Ob=ib.t,Hb=Tk.default.useCallback(ie=>{var Je;setTimeout(()=>H(ie));null==(Je=eb.current)?void 0:Je.blur();ie&&(Uk.defaultSearchQuery="",Uk.defaultSearchFilter=null)},[]),cc=Tk.default.useCallback(ie=>{if(ie=null==ib?void 0:ib.addNewBlock(ie))Hb(ie),null==la?void 0:la(ie);return ie},[la]),sc=Tk.default.useRef(null),[Ub,kc]=Tk.default.useState(0),ec=HH(sa,Ta),[Mc,Oc]=Tk.default.useState("circle-plus"),[vd,Kd]=Tk.default.useState(!1);Tk.default.useEffect(()=>{setTimeout(()=>{var ie;null==(ie=eb.current)?
void 0:ie.focus()})},[Ta]);Tk.default.useEffect(()=>{Uk.defaultSearchQuery=sa;Uk.defaultSearchFilter=Ta},[sa,Ta]);const We=Tk.default.useMemo(()=>{var ie;const Je=[],Hf=null==Db?void 0:Db.Breadcrumb;if(!Hf||!ib)return[];la&&Je.push({actionIcon:"circle-plus",onChosen:()=>!!cc(sa),element:(0,ji.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ji.jsx)(Jp,{active:!0,type:"BA"}),0<sa.length?(0,ji.jsxs)(ji.Fragment,{children:[(0,ji.jsx)("strong",{children:Ob("whiteboard/new-block")}),sa]}):
(0,ji.jsx)("strong",{children:Ob("whiteboard/new-block-no-colon")})]})});(null==(ie=null==ec?void 0:ec.pages)?0:ie.some(Se=>Se.toLowerCase()===sa.toLowerCase()))||!sa||Je.push({actionIcon:"circle-plus",onChosen:()=>{Hb(sa);return!0},element:(0,ji.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ji.jsx)(Jp,{active:!0,type:"PA"}),(0,ji.jsx)("strong",{children:Ob("whiteboard/new-page")}),sa]})},{actionIcon:"circle-plus",onChosen:()=>{null==ib?void 0:ib.addNewWhiteboard(sa);Hb(sa);return!0},
element:(0,ji.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ji.jsx)(Jp,{active:!0,type:"WA"}),(0,ji.jsx)("strong",{children:Ob("whiteboard/new-whiteboard")}),sa]})});0===sa.length&&null===Ta&&Je.push({actionIcon:"search",onChosen:()=>{Xa("B");return!0},element:(0,ji.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ji.jsx)(Jp,{type:"BS"}),Ob("whiteboard/search-only-blocks")]})},{actionIcon:"search",onChosen:()=>{Xa("P");return!0},element:(0,ji.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,ji.jsx)(Jp,{type:"PS"}),Ob("whiteboard/search-only-pages")]})});Ta&&"P"!==Ta||!ec||!ec.pages||Je.push(...ec.pages.map(Se=>({actionIcon:"search",onChosen:()=>{Hb(Se);return!0},element:(0,ji.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ji.jsx)(Jp,{type:ib.isWhiteboardPage(Se)?"WP":"P"}),jD(Se,sa)]})})));Ta&&"B"!==Ta||!ec||!ec.blocks||Je.push(...ec.blocks.filter(Se=>Se.content&&Se.uuid).map(({content:Se,uuid:Xe})=>{const Pd=ib.queryBlockByUUID(Xe);return{actionIcon:"search",
onChosen:()=>{var ld,Qd,hd;return Pd?(Hb(Xe),null==(hd=null==(Qd=null==(ld=window.logseq)?void 0:ld.api)?void 0:Qd.set_blocks_id)?void 0:hd.call(Qd,[Xe]),!0):!1},element:Pd?(0,ji.jsxs)(ji.Fragment,{children:[(0,ji.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ji.jsx)(Jp,{type:"B"}),(0,ji.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,ji.jsx)(Hf,{blockId:Xe})})]}),(0,ji.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ji.jsx)("div",{className:"tl-quick-search-option-placeholder"}),
jD(Se,sa)]})]}):(0,ji.jsx)("div",{className:"tl-quick-search-option-row",children:Ob("whiteboard/cache-outdated")})}}));return Je},[sa,Ta,ec,null==Db?void 0:Db.Breadcrumb,ib]);Tk.default.useEffect(()=>{const ie=Je=>{var Hf,Se;let Xe=Ub;"ArrowDown"===Je.key?Xe=Math.min(We.length-1,Ub+1):"ArrowUp"===Je.key?Xe=Math.max(0,Ub-1):"Enter"===Je.key?(null==(Hf=We[Ub])?void 0:Hf.onChosen(),Je.stopPropagation(),Je.preventDefault()):"Backspace"===Je.key&&0===sa.length?Xa(null):"Escape"===Je.key&&Hb("");Xe!==
Ub&&(Hf=We[Xe],kc(Xe),Oc(Hf.actionIcon),Je.stopPropagation(),Je.preventDefault(),(Je=null==(Se=sc.current)?void 0:Se.querySelector(".tl-quick-search-option:nth-child("+(Xe+1)+")"))&&(null==Je?void 0:Je.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",ie,!0);return()=>{document.removeEventListener("keydown",ie,!0)}},[We,Ub,sa]);return(0,ji.jsxs)("div",{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,ji.jsx)(WG,{icon:Mc,onClick:()=>{var ie;null==(ie=We[Ub])?void 0:
ie.onChosen()}}),(0,ji.jsxs)("div",{className:"tl-quick-search-input-container",children:[Ta&&(0,ji.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,ji.jsx)(Jp,{type:Ta}),"B"===Ta?"Search blocks":"Search pages",(0,ji.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>Xa(null),children:(0,ji.jsx)(Ph,{name:"x"})})]}),(0,ji.jsx)(Ip,{ref:eb,type:"text",value:sa,className:"tl-quick-search-input",placeholder:null!=k?k:"Create or search your graph...",onChange:ie=>
Ha(ie.target.value),onKeyDown:ie=>{"Enter"===ie.key&&Hb(sa);ie.stopPropagation()},onFocus:()=>{Kd(!0)},onBlur:()=>{Kd(!1);null==fa?void 0:fa()}})]}),0<We.length&&(0,ji.jsx)("div",{onWheelCapture:ie=>ie.stopPropagation(),className:"tl-quick-search-options",ref:sc,style:{visibility:vd?"visible":"hidden",pointerEvents:vd?"all":"none"},children:(0,ji.jsx)(Zy,{style:{height:40*Math.min(Math.max(1,We.length),12)},totalCount:We.length,itemContent:ie=>{const {actionIcon:Je,onChosen:Hf,element:Se}=We[ie];
return(0,ji.jsx)("div",{"data-focused":ie===Ub,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Oc(Je);kc(ie)},onPointerDownCapture:Xe=>{Hf()&&(Xe.stopPropagation(),Xe.preventDefault())},children:Se},ie)}})})]})}),Wi=da(590),ax=rf(function(a){var {pageId:d,portalType:k,refs:H,side:fa,onRefsChange:la}=a;a=Mf(a,"pageId portalType shapeType refs side onRefsChange".split(" "));const {handlers:{t:sa}}=Py.default.useContext(ej),Ha=H.length+(d?1:0),Ta=0===H.length,Xa=ib=>{ib&&!H.includes(ib)&&
Ta&&la([...H,ib])},eb=!(!d||!k);return(0,Wi.jsx)(In,lf(he({},a),{side:fa,align:"start",alignOffset:-6,label:(0,Wi.jsx)(mk,{content:sa("whiteboard/link"),sideOffset:14,children:(0,Wi.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,Wi.jsx)(Ph,{name:0<Ha?"link":"add-link"}),0<Ha&&(0,Wi.jsx)("div",{className:"tl-shape-links-count",children:Ha})]})}),children:(0,Wi.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":eb,children:[eb&&(0,Wi.jsxs)("div",
{className:"tl-shape-links-reference-panel",children:[(0,Wi.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Wi.jsx)(Ph,{className:"opacity-50",name:"internal-link"}),sa("whiteboard/references")]}),(0,Wi.jsx)(Om,{type:k,id:d})]}),(0,Wi.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,Wi.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Wi.jsx)(Ph,{className:"opacity-50",name:"add-link"}),sa("whiteboard/link-to-any-page-or-block")]}),
Ta&&(0,Wi.jsx)(ft,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:sa("whiteboard/start-typing-to-search"),onChange:Xa}),0<H.length&&(0,Wi.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:H.map((ib,Db)=>(0,Wi.jsx)(Om,{id:ib,type:pk(ib)?"B":"P",onRemove:()=>{la(H.filter((Ob,Hb)=>Db!==Hb))},showContent:!0},ib))})]})]})}))}),Ak=yf(da(22)),[Cv]=Dj("ToggleGroup",[lw]),Dv=lw(),kD=Ak.default.forwardRef((a,d)=>{const {type:k}=a;a=Mf(a,["type"]);if("single"===k)return Ak.default.createElement(IH,
gf({},a,{ref:d}));if("multiple"===k)return Ak.default.createElement(JH,gf({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[lz,Kp]=Cv("ToggleGroup"),IH=Ak.default.forwardRef((a,d)=>{const {value:k,defaultValue:H,onValueChange:fa=()=>{}}=a,la=Mf(a,["value","defaultValue","onValueChange"]),[sa,Ha]=pi({prop:k,defaultProp:H,onChange:fa});return Ak.default.createElement(lz,{scope:a.__scopeToggleGroup,type:"single",value:sa?[sa]:[],onItemActivate:Ha,onItemDeactivate:Ak.default.useCallback(()=>
Ha(""),[Ha])},Ak.default.createElement(mD,gf({},la,{ref:d})))}),JH=Ak.default.forwardRef((a,d)=>{const {value:k,defaultValue:H,onValueChange:fa=()=>{}}=a,la=Mf(a,["value","defaultValue","onValueChange"]),[sa=[],Ha]=pi({prop:k,defaultProp:H,onChange:fa}),Ta=Ak.default.useCallback(eb=>Ha((ib=[])=>[...ib,eb]),[Ha]),Xa=Ak.default.useCallback(eb=>Ha((ib=[])=>ib.filter(Db=>Db!==eb)),[Ha]);return Ak.default.createElement(lz,{scope:a.__scopeToggleGroup,type:"multiple",value:sa,onItemActivate:Ta,onItemDeactivate:Xa},
Ak.default.createElement(mD,gf({},la,{ref:d})))}),[KH,lD]=Cv("ToggleGroup"),mD=Ak.default.forwardRef((a,d)=>{const {__scopeToggleGroup:k,disabled:H=!1,rovingFocus:fa=!0,orientation:la,dir:sa,loop:Ha=!0}=a;var Ta=Mf(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=Dv(k);const Xa=ko(sa);Ta=he({role:"group",dir:Xa},Ta);return Ak.default.createElement(KH,{scope:k,rovingFocus:fa,disabled:H},fa?Ak.default.createElement(YB,gf({asChild:!0},a,{orientation:la,dir:Xa,loop:Ha}),
Ak.default.createElement(al.div,gf({},Ta,{ref:d}))):Ak.default.createElement(al.div,gf({},Ta,{ref:d})))}),Ev=Ak.default.forwardRef((a,d)=>{var k=Kp("ToggleGroupItem",a.__scopeToggleGroup);const H=lD("ToggleGroupItem",a.__scopeToggleGroup),fa=Dv(a.__scopeToggleGroup);k=k.value.includes(a.value);const la=H.disabled||a.disabled;a=lf(he({},a),{pressed:k,disabled:la});const sa=Ak.default.useRef(null);return H.rovingFocus?Ak.default.createElement(ZB,gf({asChild:!0},fa,{focusable:!la,active:k,ref:sa}),Ak.default.createElement(nD,
gf({},a,{ref:d}))):Ak.default.createElement(nD,gf({},a,{ref:d}))}),nD=Ak.default.forwardRef((a,d)=>{const {__scopeToggleGroup:k,value:H}=a,fa=Mf(a,["__scopeToggleGroup","value"]),la=Kp("ToggleGroupItem",k);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return Ak.default.createElement(SB,gf({},"single"===la.type?a:void 0,fa,{ref:d,onPressedChange:sa=>{if(sa)la.onItemActivate(H);else la.onItemDeactivate(H)}}))}),oD=kD,pD=Ev,er=da(590),qi=da(590),Fv="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),
qD=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],Rn=new Map,mz={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),
line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},LH=Object.entries(mz).filter(([,a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),MH=rf(()=>{const a=He(),{handlers:{t:d}}=cm.default.useContext(ej),k=Va("AutoResizing"),H=k.every(fa=>
fa.props.isAutoResizing);return(0,qi.jsx)(kj,{tooltip:d("whiteboard/auto-resize"),toggle:k.every(fa=>"logseq-portal"===fa.props.type),className:"tl-button",pressed:H,onPressedChange:fa=>{k.forEach(la=>{if("logseq-portal"===la.props.type)la.update({isAutoResizing:fa});else la.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},children:(0,qi.jsx)(Ph,{name:"dimensions"})})}),NH=rf(()=>{const a=He();var {handlers:{t:d}}=cm.default.useContext(ej);const k=Va("LogseqPortalViewMode"),H=k.every(fa=>
fa.collapsed);if(!H&&!k.every(fa=>!fa.collapsed))return null;d=(0,qi.jsxs)("div",{className:"flex",children:[H?d("whiteboard/expand"):d("whiteboard/collapse"),(0,qi.jsx)(Xm,{action:H?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,qi.jsx)(kj,{tooltip:d,toggle:k.every(fa=>"logseq-portal"===fa.props.type),className:"tl-button",pressed:H,onPressedChange:()=>a.api.setCollapsed(!H),children:(0,qi.jsx)(Ph,{name:H?"object-expanded":"object-compact"})})}),OH=rf(()=>{const {handlers:{isMobile:a}}=
cm.default.useContext(ej);var d=Va("ScaleLevel");d=1<(new Set(d.map(k=>k.scaleLevel))).size?"":d[0].scaleLevel;return(0,qi.jsx)(Un,{scaleLevel:d,compact:a()})}),PH=rf(()=>{const a=He(),{handlers:{t:d}}=cm.default.useContext(ej),k=Va("IFrameSource")[0],H=cm.default.useCallback(la=>{k.onIFrameSourceChange(la.target.value.trim().toLowerCase());a.persist()},[]),fa=cm.default.useCallback(()=>{k.reload()},[]);return(0,qi.jsxs)("span",{className:"flex gap-3",children:[(0,qi.jsx)(Fg,{tooltip:d("whiteboard/reload"),
type:"button",onClick:fa,children:(0,qi.jsx)(Ph,{name:"refresh"})}),(0,qi.jsx)(Ip,{title:d("whiteboard/website-url"),className:"tl-iframe-src",value:`${k.props.url}`,onChange:H}),(0,qi.jsx)(Fg,{tooltip:d("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(k.props.url),children:(0,qi.jsx)(Ph,{name:"external-link"})})]})}),uq=rf(()=>{const a=He(),{handlers:{t:d}}=cm.default.useContext(ej),k=Va("YoutubeLink")[0],H=cm.default.useCallback(fa=>{k.onYoutubeLinkChange(fa.target.value);a.persist()},
[]);return(0,qi.jsxs)("span",{className:"flex gap-3",children:[(0,qi.jsx)(Ip,{title:d("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${k.props.url}`,onChange:H}),(0,qi.jsx)(Fg,{tooltip:d("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var fa,la,sa;return null==(sa=null==(la=null==(fa=window.logseq)?void 0:fa.api)?void 0:la.open_external_link)?void 0:sa.call(la,k.props.url)},children:(0,qi.jsx)(Ph,{name:"external-link"})})]})}),QH=rf(()=>{const a=He(),{handlers:{t:d}}=cm.default.useContext(ej),
k=Va("TwitterLink")[0],H=cm.default.useCallback(fa=>{k.onTwitterLinkChange(fa.target.value);a.persist()},[]);return(0,qi.jsxs)("span",{className:"flex gap-3",children:[(0,qi.jsx)(Ip,{title:d("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${k.props.url}`,onChange:H}),(0,qi.jsx)(Fg,{tooltip:d("whiteboard/open-twitter-url"),type:"button",onClick:()=>{var fa,la,sa;return null==(sa=null==(la=null==(fa=window.logseq)?void 0:fa.api)?void 0:la.open_external_link)?void 0:sa.call(la,k.props.url)},
children:(0,qi.jsx)(Ph,{name:"external-link"})})]})}),RH=rf(()=>{const a=He(),{handlers:{t:d,setCurrentPdf:k}}=cm.default.useContext(ej),H=a.selectedShapesArray[0];return(0,qi.jsx)(Fg,{tooltip:d("whiteboard/edit-pdf"),type:"button",onClick:()=>k(a.assets[H.props.assetId].src),children:(0,qi.jsx)(Ph,{name:"edit"})})}),SH=rf(()=>{const a=He(),{handlers:{t:d}}=cm.default.useContext(ej);var k=Va("NoFill");const H=cm.default.useCallback(fa=>{a.selectedShapesArray.forEach(la=>la.update({noFill:fa}));a.persist()},
[]);k=k.every(fa=>fa.props.noFill);return(0,qi.jsx)(kj,{tooltip:d("whiteboard/fill"),className:"tl-button",pressed:k,onPressedChange:H,children:(0,qi.jsx)(Ph,{name:k?"droplet-off":"droplet"})})}),TH=rf(()=>{const a=He(),d=Va("Swatch"),k=cm.default.useCallback(fa=>{a.selectedShapesArray.forEach(la=>{la.update({fill:fa,stroke:fa})});a.persist()},[]),H=cm.default.useCallback(fa=>{a.selectedShapesArray.forEach(la=>{la.update({opacity:fa})});a.persist()},[]);return(0,qi.jsx)(Fn,{popoverSide:"top",color:d[0].props.noFill?
d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:H,setColor:k})}),UH=rf(()=>{const a=He(),d=cm.default.useCallback(k=>{a.api.convertShapes(k.currentTarget.dataset.tool)},[]);return(0,qi.jsx)(Ay,{popoverSide:"top",chevron:!1,setGeometry:d})}),VH=rf(()=>{const a=He(),{handlers:{t:d}}=cm.default.useContext(ej),k=Va("StrokeType"),H=k.every(fa=>"dashed"===fa.props.strokeType)?"dashed":k.every(fa=>"line"===fa.props.strokeType)?"line":"mixed";return(0,qi.jsx)(ia,{title:d("whiteboard/stroke-type"),
options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:H,onValueChange:fa=>{k.forEach(la=>{la.update({strokeType:fa})});a.persist()}})}),rD=rf(()=>{const a=He(),{handlers:{t:d}}=cm.default.useContext(ej),k=Va("ArrowMode");var H=k.every(la=>{var sa;return"arrow"===(null==(sa=la.props.decorations)?void 0:sa.start)});const fa=k.every(la=>{var sa;return"arrow"===(null==(sa=la.props.decorations)?void 0:sa.end)});H=[H?"start":null,fa?"end":null].filter(pc);
return(0,qi.jsx)(Ba,{title:d("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:H,onValueChange:la=>{k.forEach(sa=>{var Ha=sa.update;var Ta={start:la.includes("start")?"arrow":null,end:la.includes("end")?"arrow":null};Ha.call(sa,{decorations:Ta})});a.persist()}})}),WH=rf(()=>{const a=He(),{handlers:{t:d}}=cm.default.useContext(ej),k=Va("TextStyle"),H=k.every(la=>500<la.props.fontWeight),fa=k.every(la=>la.props.italic);return(0,qi.jsxs)("span",
{className:"flex gap-1",children:[(0,qi.jsx)(kj,{tooltip:d("whiteboard/bold"),className:"tl-button",pressed:H,onPressedChange:la=>{k.forEach(sa=>{sa.update({fontWeight:la?700:400});sa.onResetBounds()});a.persist()},children:(0,qi.jsx)(Ph,{name:"bold"})}),(0,qi.jsx)(kj,{tooltip:d("whiteboard/italic"),className:"tl-button",pressed:fa,onPressedChange:la=>{k.forEach(sa=>{sa.update({italic:la});sa.onResetBounds()});a.persist()},children:(0,qi.jsx)(Ph,{name:"italic"})})]})}),XH=rf(()=>{var a;const d=He(),
k=d.selectedShapesArray[0];return(0,qi.jsx)(ax,{onRefsChange:H=>{k.update({refs:H});d.persist()},refs:null!=(a=k.props.refs)?a:[],shapeType:k.props.type,side:"right",pageId:"logseq-portal"===k.props.type?k.props.pageId:void 0,portalType:"logseq-portal"===k.props.type?k.props.blockType:void 0})});Rn.set("Geometry",UH);Rn.set("AutoResizing",MH);Rn.set("LogseqPortalViewMode",NH);Rn.set("ScaleLevel",OH);Rn.set("YoutubeLink",uq);Rn.set("TwitterLink",QH);Rn.set("IFrameSource",PH);Rn.set("NoFill",SH);Rn.set("Swatch",
TH);Rn.set("StrokeType",VH);Rn.set("ArrowMode",rD);Rn.set("TextStyle",WH);Rn.set("Links",XH);Rn.set("EditPdf",RH);var sD=a=>{var d;return(null!=(d=mz[a])?d:[]).filter(pc)},tD=a=>{const d=a.map(H=>H.props.type),k=new Set(0<a.length?sD(d[0]):[]);for(let H=1;H<d.length&&0<k.size;H++){const fa=sD(d[H]);k.forEach(la=>{fa.includes(la)||k.delete(la)})}1<a.length&&qD.forEach(H=>{k.has(H)&&k.delete(H)});return Array.from(k).sort((H,fa)=>Fv.indexOf(H)-Fv.indexOf(fa)).map(H=>Rn.get(H))},Gv=da(590),YH=rf(({shapes:a,
offsets:d,hidden:k})=>{const H=He(),fa=Ko.useRef(null),la=Ko.useRef(null);Ko.useLayoutEffect(()=>{setTimeout(()=>{const Ha=la.current;if(Ha){var {offsetWidth:Ta,offsetHeight:Xa}=Ha;fa.current=[Ta,Xa]}})});Ko.useLayoutEffect(()=>{var Ha;const Ta=la.current;if(Ta){var Xa=null!=(Ha=fa.current)?Ha:[0,0];Ha=0;if(116>d.top){var eb=d.height/2+40;140>d.bottom&&(eb+=d.bottom-140)}else eb=-(d.height/2+40);16>d.left+d.width/2-Xa[0]/2?Ha+=-(d.left+d.width/2-Xa[0]/2-16):16>d.right+d.width/2-Xa[0]/2&&(Ha+=d.right+
d.width/2-Xa[0]/2-16);var [ib,Db]=[Ha,eb];Ta.style.transform=`translateX(${ib}px) translateY(${Db}px)`}},[d]);if(!H)return null;const sa=tD(a);return(0,Gv.jsx)(Co,{centered:!0,children:0<sa.length&&(0,Gv.jsx)("div",{ref:la,className:"tl-toolbar tl-context-bar",style:{visibility:k?"hidden":"visible",pointerEvents:k?"none":"all"},children:sa.map((Ha,Ta)=>(0,Gv.jsxs)(Ko.Fragment,{children:[(0,Gv.jsx)(Ha,{}),Ta<sa.length-1&&(0,Gv.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"vertical"})]},Ta))})})}),
bx=yf(da(22)),Bl=da(22),[ZH]=Dj("ContextMenu",[Ot]),ru=Ot(),[uD,su]=ZH("ContextMenu"),Hv=(0,Bl.forwardRef)((a,d)=>{const {__scopeContextMenu:k,disabled:H=!1}=a,fa=Mf(a,["__scopeContextMenu","disabled"]),la=su("ContextMenuTrigger",k),sa=ru(k),Ha=(0,Bl.useRef)({x:0,y:0}),Ta=(0,Bl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(he({width:0,height:0},Ha.current))}),Xa=(0,Bl.useRef)(0),eb=(0,Bl.useCallback)(()=>window.clearTimeout(Xa.current),[]);(0,Bl.useEffect)(()=>eb,[eb]);(0,Bl.useEffect)(()=>
void(H&&eb()),[H,eb]);return(0,Bl.createElement)(Bl.Fragment,null,(0,Bl.createElement)(Ns,gf({},sa,{virtualRef:Ta})),(0,Bl.createElement)(al.span,gf({"data-state":la.open?"open":"closed","data-disabled":H?"":void 0},fa,{ref:d,style:he({WebkitTouchCallout:"none"},a.style),onContextMenu:H?a.onContextMenu:ig(a.onContextMenu,ib=>{eb();Ha.current={x:ib.clientX,y:ib.clientY};la.onOpenChange(!0);ib.preventDefault()}),onPointerDown:H?a.onPointerDown:ig(a.onPointerDown,Pb(ib=>{eb();Xa.current=window.setTimeout(()=>
{Ha.current={x:ib.clientX,y:ib.clientY};la.onOpenChange(!0)},700)})),onPointerMove:H?a.onPointerMove:ig(a.onPointerMove,Pb(eb)),onPointerCancel:H?a.onPointerCancel:ig(a.onPointerCancel,Pb(eb)),onPointerUp:H?a.onPointerUp:ig(a.onPointerUp,Pb(eb))})))}),nz=(0,Bl.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;const H=Mf(a,["__scopeContextMenu"]),fa=su("ContextMenuContent",k);k=ru(k);const la=(0,Bl.useRef)(!1);return(0,Bl.createElement)(Tu,gf({},k,H,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:sa=>
{var Ha;null===(Ha=a.onCloseAutoFocus)||void 0===Ha||Ha.call(a,sa);!sa.defaultPrevented&&la.current&&sa.preventDefault();la.current=!1},onInteractOutside:sa=>{var Ha;null===(Ha=a.onInteractOutside)||void 0===Ha||Ha.call(a,sa);sa.defaultPrevented||fa.modal||(la.current=!0)},style:lf(he({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Cl=(0,Bl.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;a=Mf(a,["__scopeContextMenu"]);k=ru(k);return(0,Bl.createElement)(uw,
gf({},k,a,{ref:d}))}),fr=(0,Bl.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;a=Mf(a,["__scopeContextMenu"]);k=ru(k);return(0,Bl.createElement)(iC,gf({},k,a,{ref:d}))}),$H=a=>{const {__scopeContextMenu:d,children:k,onOpenChange:H,dir:fa,modal:la=!0}=a,[sa,Ha]=(0,Bl.useState)(!1);a=ru(d);const Ta=Mi(H),Xa=(0,Bl.useCallback)(eb=>{Ha(eb);Ta(eb)},[Ta]);return(0,Bl.createElement)(uD,{scope:d,open:sa,onOpenChange:Xa,modal:la},(0,Bl.createElement)(ty,gf({},a,{dir:fa,open:sa,onOpenChange:Xa,modal:la}),
k))},Of=da(590),$r=rf(function({children:a,collisionRef:d}){var k,H,fa,la,sa,Ha,Ta,Xa,eb,ib,Db,Ob,Hb,cc,sc,Ub,kc;const ec=He(),{handlers:Mc}=bx.useContext(ej),Oc=Mc.t,vd=bx.useRef(null),Kd=ie=>{ie();ec.transition("select")},We=bx.useMemo(()=>Sb(),[]);return(0,Of.jsxs)($H,{onOpenChange:ie=>{ie&&!ec.isIn("select.contextMenu")?ec.transition("select").selectedTool.transition("contextMenu"):!ie&&ec.isIn("select.contextMenu")&&ec.selectedTool.transition("idle")},children:[(0,Of.jsx)(Hv,{disabled:ec.editingShape&&
0!==Object.keys(ec.editingShape).length,children:a}),(0,Of.jsx)(nz,{className:"tl-menu tl-context-menu",ref:vd,onEscapeKeyDown:()=>ec.transition("select"),collisionBoundary:d.current,asChild:!0,tabIndex:-1,children:(0,Of.jsxs)("div",{children:[1<(null==(k=ec.selectedShapes)?void 0:k.size)&&!ec.readOnly&&(null==(H=ec.selectedShapesArray)?void 0:H.some(ie=>!ie.props.isLocked))&&(0,Of.jsxs)(Of.Fragment,{children:[(0,Of.jsxs)(Cl,{children:[(0,Of.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,Of.jsx)(Fg,
{tooltip:Oc("whiteboard/align-left"),onClick:()=>Kd(()=>ec.align("left")),children:(0,Of.jsx)(Ph,{name:"layout-align-left"})}),(0,Of.jsx)(Fg,{tooltip:Oc("whiteboard/align-center-horizontally"),onClick:()=>Kd(()=>ec.align("centerHorizontal")),children:(0,Of.jsx)(Ph,{name:"layout-align-center"})}),(0,Of.jsx)(Fg,{tooltip:Oc("whiteboard/align-right"),onClick:()=>Kd(()=>ec.align("right")),children:(0,Of.jsx)(Ph,{name:"layout-align-right"})}),(0,Of.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"vertical"}),
(0,Of.jsx)(Fg,{tooltip:Oc("whiteboard/distribute-horizontally"),onClick:()=>Kd(()=>ec.distribute("horizontal")),children:(0,Of.jsx)(Ph,{name:"layout-distribute-vertical"})})]}),(0,Of.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,Of.jsx)(Fg,{tooltip:Oc("whiteboard/align-top"),onClick:()=>Kd(()=>ec.align("top")),children:(0,Of.jsx)(Ph,{name:"layout-align-top"})}),(0,Of.jsx)(Fg,{tooltip:Oc("whiteboard/align-center-vertically"),onClick:()=>Kd(()=>ec.align("centerVertical")),children:(0,Of.jsx)(Ph,
{name:"layout-align-middle"})}),(0,Of.jsx)(Fg,{tooltip:Oc("whiteboard/align-bottom"),onClick:()=>Kd(()=>ec.align("bottom")),children:(0,Of.jsx)(Ph,{name:"layout-align-bottom"})}),(0,Of.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Of.jsx)(Fg,{tooltip:Oc("whiteboard/distribute-vertically"),onClick:()=>Kd(()=>ec.distribute("vertical")),children:(0,Of.jsx)(Ph,{name:"layout-distribute-horizontal"})})]})]}),(0,Of.jsx)(fr,{className:"menu-separator"}),(0,Of.jsxs)(Cl,{className:"tl-menu-item",
onClick:()=>Kd(ec.packIntoRectangle),children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"layout-grid"}),Oc("whiteboard/pack-into-rectangle")]}),(0,Of.jsx)(fr,{className:"menu-separator"})]}),0<(null==(fa=ec.selectedShapes)?void 0:fa.size)&&(0,Of.jsxs)(Of.Fragment,{children:[(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(ec.api.zoomToSelection),children:[Oc("whiteboard/zoom-to-fit"),(0,Of.jsx)(Xm,{action:"whiteboard/zoom-to-fit"})]}),(0,Of.jsx)(fr,{className:"menu-separator"})]}),(ec.selectedShapesArray.some(ie=>
"group"===ie.type||ec.getParentGroup(ie))||1<ec.selectedShapesArray.length)&&(null==(la=ec.selectedShapesArray)?void 0:la.some(ie=>!ie.props.isLocked))&&!ec.readOnly&&(0,Of.jsxs)(Of.Fragment,{children:[ec.selectedShapesArray.some(ie=>"group"===ie.type||ec.getParentGroup(ie))&&(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(ec.api.unGroup),children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"ungroup"}),Oc("whiteboard/ungroup"),(0,Of.jsx)(Xm,{action:"whiteboard/ungroup"})]}),1<ec.selectedShapesArray.length&&
(null==(sa=ec.selectedShapesArray)?void 0:sa.some(ie=>!ie.props.isLocked))&&(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(ec.api.doGroup),children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"group"}),Oc("whiteboard/group"),(0,Of.jsx)(Xm,{action:"whiteboard/group"})]}),(0,Of.jsx)(fr,{className:"menu-separator"})]}),0<(null==(Ha=ec.selectedShapes)?void 0:Ha.size)&&(null==(Ta=ec.selectedShapesArray)?void 0:Ta.some(ie=>!ie.props.isLocked))&&(0,Of.jsxs)(Of.Fragment,{children:[!ec.readOnly&&
(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(ec.cut),children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"cut"}),Oc("whiteboard/cut")]}),(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(ec.copy),children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"copy"}),Oc("whiteboard/copy"),(0,Of.jsx)(Xm,{action:"editor/copy"})]})]}),!ec.readOnly&&(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(ec.paste),children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"clipboard"}),Oc("whiteboard/paste"),
(0,Of.jsx)("div",{className:"tl-menu-right-slot",children:(0,Of.jsx)("span",{className:"keyboard-shortcut",children:(0,Of.jsxs)("code",{children:[CA,"+v"]})})})]}),1===(null==(Xa=ec.selectedShapes)?void 0:Xa.size)&&!ec.readOnly&&(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(()=>ec.paste(void 0,!0)),children:[Oc("whiteboard/paste-as-link"),(0,Of.jsx)("div",{className:"tl-menu-right-slot",children:(0,Of.jsx)("span",{className:"keyboard-shortcut",children:(0,Of.jsxs)("code",{children:[CA,"+⇧+v"]})})})]}),
0<(null==(eb=ec.selectedShapes)?void 0:eb.size)&&(0,Of.jsxs)(Of.Fragment,{children:[(0,Of.jsx)(fr,{className:"menu-separator"}),(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(()=>{var ie,Je;return Mc.exportToImage(ec.currentPageId,{x:ec.selectionBounds.minX+ec.viewport.camera.point[0]-8,y:ec.selectionBounds.minY+ec.viewport.camera.point[1]-8,width:(null==(ie=ec.selectionBounds)?void 0:ie.width)+16,height:(null==(Je=ec.selectionBounds)?void 0:Je.height)+16,zoom:ec.viewport.camera.zoom})}),
children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"file-export"}),Oc("whiteboard/export"),(0,Of.jsx)("div",{className:"tl-menu-right-slot",children:(0,Of.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,Of.jsx)(fr,{className:"menu-separator"}),(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(ec.api.selectAll),children:[Oc("whiteboard/select-all"),(0,Of.jsx)(Xm,{action:"editor/select-parent"})]}),1<(null==(ib=ec.selectedShapes)?void 0:ib.size)&&(0,Of.jsx)(Cl,{className:"tl-menu-item",
onClick:()=>Kd(ec.api.deselectAll),children:Oc("whiteboard/deselect-all")}),!ec.readOnly&&0<(null==(Db=ec.selectedShapes)?void 0:Db.size)&&(null==(Ob=ec.selectedShapesArray)?void 0:Ob.some(ie=>!ie.props.isLocked))&&(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(()=>ec.setLocked(!0)),children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"lock"}),Oc("whiteboard/lock"),(0,Of.jsx)(Xm,{action:"whiteboard/lock"})]}),!ec.readOnly&&0<(null==(Hb=ec.selectedShapes)?void 0:Hb.size)&&(null==(cc=ec.selectedShapesArray)?
void 0:cc.some(ie=>ie.props.isLocked))&&(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(()=>ec.setLocked(!1)),children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"lock-open"}),Oc("whiteboard/unlock"),(0,Of.jsx)(Xm,{action:"whiteboard/unlock"})]}),0<(null==(sc=ec.selectedShapes)?void 0:sc.size)&&!ec.readOnly&&(null==(Ub=ec.selectedShapesArray)?void 0:Ub.some(ie=>!ie.props.isLocked))&&(0,Of.jsxs)(Of.Fragment,{children:[(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(ec.api.deleteShapes),
children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"backspace"}),Oc("whiteboard/delete"),(0,Of.jsx)(Xm,{action:"editor/delete"})]}),1<(null==(kc=ec.selectedShapes)?void 0:kc.size)&&!ec.readOnly&&(0,Of.jsxs)(Of.Fragment,{children:[(0,Of.jsx)(fr,{className:"menu-separator"}),(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(ec.flipHorizontal),children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"flip-horizontal"}),Oc("whiteboard/flip-horizontally")]}),(0,Of.jsxs)(Cl,{className:"tl-menu-item",
onClick:()=>Kd(ec.flipVertical),children:[(0,Of.jsx)(Ph,{className:"tl-menu-icon",name:"flip-vertical"}),Oc("whiteboard/flip-vertically")]})]}),!ec.readOnly&&(0,Of.jsxs)(Of.Fragment,{children:[(0,Of.jsx)(fr,{className:"menu-separator"}),(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(ec.bringToFront),children:[Oc("whiteboard/move-to-front"),(0,Of.jsx)(Xm,{action:"whiteboard/bring-to-front"})]}),(0,Of.jsxs)(Cl,{className:"tl-menu-item",onClick:()=>Kd(ec.sendToBack),children:[Oc("whiteboard/move-to-back"),
(0,Of.jsx)(Xm,{action:"whiteboard/send-to-back"})]})]}),We&&(0,Of.jsx)(Cl,{className:"tl-menu-item",onClick:()=>{1===ec.selectedShapesArray.length?console.log(zc(ec.selectedShapesArray[0].serialized)):console.log(ec.selectedShapesArray.map(ie=>zc(ie.serialized)))},children:Oc("whiteboard/dev-print-shape-props")})]})]})})]})}),vq=yf(da(22)),cx=da(590),vD=rf(({shape:a})=>{const d=He(),{handlers:k}=vq.default.useContext(ej),H=k.t,fa=vq.default.useMemo(()=>{var la;const sa=[...(null!=(la=a.props.refs)?
la:[])].map(Ha=>[Ha,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&sa.unshift([a.props.pageId,!1]);return sa.filter(Ha=>Ha[0].toLowerCase()!==d.currentPage.name&&k.getBlockPageName(Ha[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===fa.length?null:(0,cx.jsx)("div",{className:"tl-quick-links",title:H("whiteboard/shape-quick-links"),children:fa.map(([la,sa])=>(0,cx.jsx)("div",{className:"tl-quick-links-row",children:(0,cx.jsx)(Qy,{id:la,showReferenceContent:sa})},
la))})}),aI=yf(da(22)),wD=yf(da(22)),gr={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},xD=(a,d,k)=>oi(void 0,[a,d,k],function*(H,{point:fa,shiftKey:la,dataTransfer:sa,fromDrop:Ha},Ta){function Xa(hd,Dd){return oi(this,null,function*(){const Me=Object.values(H.assets).find(nf=>nf.src===hd);return Me?Me:{id:gk(),type:Dd,src:hd,size:yield xj(Ta.makeAssetUrl(hd),Dd)}})}function eb(hd){return oi(this,null,function*(){const Dd=hd.filter(Me=>"unknown"!==qc(Me.name)).map(Me=>
oi(this,null,function*(){try{const nf=yield Ta.saveAsset(Me);return yield Xa(nf,qc(Me.name))}catch(nf){console.error(nf)}return null}));return(yield Promise.all(Dd)).filter(pc)})}function ib(hd){return[lf(he({},Dp.defaultProps),{html:hd,point:[fa[0],fa[1]]})]}function Db(hd){return oi(this,null,function*(){return Hc(Hb,cc,kc,Ub,ec,sc,We)(hd)})}function Ob(){return oi(this,null,function*(){const hd=yield navigator.clipboard.read(),Dd=Hc(ec,sc,We);return(yield Promise.all(hd.map(Me=>Dd(Me)))).flat().filter(pc)})}
function Hb(hd){return oi(this,null,function*(){var Dd=hd.getData("file");if(!Dd)return null;const Me=yield Xa(Dd,"pdf");H.addAssets([Me]);Dd=lf(he({},Hp.defaultProps),{id:gk(),assetId:Me.id,url:Dd,opacity:1});Me.size&&Object.assign(Dd,{point:[fa[0]-Me.size[0]/4+16,fa[1]-Me.size[1]/4+16],size:ce.div(Me.size,2)});return[Dd]})}function cc(hd){return oi(this,null,function*(){var Dd=Array.from(hd.files);return 0<Dd.length?(Hf=Dd=yield eb(Dd),Dd.map((Me,nf)=>{switch(Me.type){case "video":var Vf=Yr.defaultProps;
break;case "image":Vf=wv.defaultProps;break;case "pdf":Vf=Hp.defaultProps;break;default:return null}Vf=lf(he({},Vf),{id:gk(),assetId:Me.id,opacity:1});Me.size&&Object.assign(Vf,{point:[fa[0]-Me.size[0]/4+16*nf,fa[1]-Me.size[1]/4+16*nf],size:ce.div(Me.size,2)});return Vf})):null})}function sc(hd){return oi(this,null,function*(){if(hd.types.includes("text/plain")&&(la||Ha))return null;const Dd=yield rd(hd,"text/html");return Dd?Hc(Mc,ib)(Dd):null})}function Ub(hd){return oi(this,null,function*(){var Dd,
Me,nf,Vf,If,kg,hh=hd.getData("block-uuid");if(hh){hh=hh.trim();const Qf=null==(nf=null==(Me=null==(Dd=window.logseq)?void 0:Dd.api)?void 0:Me.get_selected_blocks)?void 0:nf.call(Me);Dd=Qf&&1<(null==Qf?void 0:Qf.length)?Qf.map(ch=>ch.uuid):[hh];null==(kg=null==(If=null==(Vf=window.logseq)?void 0:Vf.api)?void 0:If.set_blocks_id)?void 0:kg.call(If,Dd);Vf=Dd.map(ch=>Kd(`((${ch}))`));return(yield Promise.all(Vf)).flat().filter(pc).map((ch,Hh)=>lf(he({},ch),{point:[fa[0]+(Uk.defaultProps.size[0]+16)*Hh,
fa[1]]}))}return null})}function kc(hd){return oi(this,null,function*(){var Dd=hd.getData("page-name");return Dd?(Dd=Dd.trim(),Kd(`[[${Dd}]]`)):null})}function ec(hd){return oi(this,null,function*(){var Dd=yield rd(hd,"text/plain");return Dd?(Dd=Dd.trim(),Hc(Oc,vd)(Dd)):null})}function Mc(hd){if(hd=H.api.getClonedShapesFromTldrString(decodeURIComponent(hd),fa)){const {shapes:Dd,assets:Me,bindings:nf}=hd;Se.push(...Me);Xe.push(...nf);return Dd}return null}function Oc(hd){return oi(this,null,function*(){try{const Me=
new URL(hd);var Dd=Me.host&&["http:","https:"].includes(Me.protocol)}catch(Me){Dd=!1}return Dd&&!la?Av.test(hd)?[lf(he({},cr.defaultProps),{url:hd,point:[fa[0],fa[1]]})]:Xw.test(hd)?[lf(he({},dt.defaultProps),{url:hd,point:[fa[0],fa[1]]})]:[lf(he({},Wr.defaultProps),{url:hd,point:[fa[0],fa[1]]})]:null})}function vd(hd){return hd.startsWith("\x3ciframe")?[lf(he({},Dp.defaultProps),{html:hd,point:[fa[0],fa[1]]})]:null}function Kd(hd){return oi(this,null,function*(){if(/^\(\(.*\)\)$/.test(hd)&&40===
hd.length){var Dd=hd.slice(2,-2);if(pk(Dd))return[lf(he({},Uk.defaultProps),{point:[fa[0],fa[1]],size:[400,0],pageId:Dd,fill:H.settings.color,stroke:H.settings.color,scaleLevel:H.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(hd))return Dd=hd.slice(2,-2),[lf(he({},Uk.defaultProps),{point:[fa[0],fa[1]],size:[400,0],pageId:Dd,fill:H.settings.color,stroke:H.settings.color,scaleLevel:H.settings.scaleLevel,blockType:"P"})];return null})}function We(hd){return oi(this,null,function*(){var Dd=
yield rd(hd,"text/plain");return Dd&&(Dd=Dd.trim(),Dd=null==Ta?void 0:Ta.addNewBlock(Dd))?[lf(he({},Uk.defaultProps),{size:[400,0],point:[fa[0],fa[1]],pageId:Dd,fill:H.settings.color,stroke:H.settings.color,scaleLevel:H.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var ie,Je;let Hf=[],Se=[];const Xe=[];H.cursors.setCursor("progress");let Pd=[];try{sa?Pd.push(...(null!=(ie=yield Db(sa))?ie:[])):Pd.push(...(null!=(Je=yield Ob())?Je:[]))}catch(hd){console.error(hd)}const ld=Pd.map(hd=>lf(he({},
hd),{parentId:H.currentPageId,isLocked:!1,id:pk(hd.id)?hd.id:gk()})),Qd=null==sa?void 0:sa.types.every(hd=>"Files"===hd);H.wrapUpdate(()=>{var hd=[...Hf,...Se];0<hd.length&&H.createAssets(hd);0<ld.length&&H.createShapes(ld);H.currentPage.updateBindings(Object.fromEntries(Xe.map(Dd=>[Dd.id,Dd])));if(1===H.selectedShapesArray.length&&1===ld.length&&Ha){hd=H.selectedShapesArray[0];const Dd=H.getShapeById(ld[0].id);H.createNewLineBinding(hd,Dd)}H.setSelectedShapes(ld.map(Dd=>Dd.id));H.selectedTool.transition("idle");
H.cursors.setCursor("default");(Ha||Qd)&&H.packIntoRectangle()})}),dx=yf(da(22)),ex=yf(da(22)),Lp=da(590),yD=[Jm,et,jz,bn,iz,Km,mp,kz,hD,ai,$w,qn],zD=a=>{const {renderers:d}=Lt.useContext(ej);return(0,Lp.jsx)(d.BacklinksCount,lf(he({},a),{options:{"portal?":!1}}))},AD=()=>{const a=Lt.useRef(null),d=He(),k=Lt.useMemo(()=>({ContextBar:YH,BacklinksCount:zD,QuickLinks:vD}),[]);return(0,Lp.jsx)($r,{collisionRef:a,children:(0,Lp.jsx)("div",{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":d.uuid,
children:(0,Lp.jsx)(cG,{components:k,children:(0,Lp.jsx)(FC,{})})})})},BD=a=>{var {onPersist:d,readOnly:k,model:H}=a;a=Mf(a,["onPersist","readOnly","model"]);const fa=fe(),la=Ld(),sa=Ae(),Ha=k?null:af(),Ta=Lt.useCallback((Xa,eb)=>{null==d?void 0:d(Xa,eb)},[H]);return(0,Lp.jsx)(ZF,lf(he({Shapes:Zw,Tools:yD,onDrop:fa,onPaste:la,onCopy:sa,readOnly:k,onCanvasDBClick:Ha,onPersist:Ta,model:H},a),{children:(0,Lp.jsx)(AD,{})}))},CD=function(a){var {renderers:d,handlers:k}=a;a=Mf(a,["renderers","handlers"]);
const H={renderers:Lt.useMemo(()=>Object.fromEntries(Object.entries(d).map(([fa,la])=>[fa,Lt.memo(la)])),[]),handlers:k};return(0,Lp.jsx)(ej.Provider,{value:H,children:(0,Lp.jsx)(BD,he({},a))})}};
'use strict';var $Ed=function(a){return a},aFd=function(a,b){var c=$APP.B.j("db",$APP.e2a($APP.imb))?$APP.gB.C($APP.cD.C(new $APP.N(null,2,5,$APP.O,[$APP.Gq,"logseq.tldraw.shape"],null))):$APP.wC;return $APP.Fl.j(function(d){var e=$APP.Ef(d);d=$APP.G.j(e,$APP.gB);e=$APP.G.j(e,$APP.KD);e=$APP.G.j(e,c);return $APP.n(e)?new $APP.m(null,2,[$APP.Pl,$APP.u.C(d),$APP.$Rb,$APP.$Rb.C(e)],null):null},$APP.d5a(a,b,new $APP.m(null,1,[$APP.Bs,new $APP.N(null,2,5,$APP.O,[$APP.gB,$APP.KD],null)],null)))},bFd=function(a){return $APP.Yp.G(a,
$APP.F([$APP.Zp,!0]))},cFd=function(a,b,c,d){var e=$APP.XE(a);b=new $APP.m(null,2,[$APP.xC,$APP.Sqb,$APP.yC,new $APP.m(null,6,[$APP.Pl,$APP.ra(b,"id"),$APP.zp,$APP.ra(b,"name"),$APP.JF,bFd($APP.ra(b,"bindings")),$APP.$Rb,$APP.ra(b,"nonce"),$APP.aSb,bFd(c),$APP.YRb,d],null)],null);c=$APP.Mv();e=$APP.OC.C(e);e=$APP.n(e)?e:$APP.Mv();return new $APP.m(null,5,[$APP.Gq,a,$APP.FD,"whiteboard",$APP.KD,b,$APP.PC,c,$APP.OC,e],null)},dFd=function(a,b,c,d,e,f){a=bFd(a.getCleanUpAssets());var g=b.shapes,h=$APP.di.j(function(E){return $APP.ra(E,
"id")},g),l=$APP.Ih(h,$APP.fk.C(g.length));g=$APP.Dh($APP.di.j(function(E){E=$APP.Ef(E);E=$APP.G.j(E,$APP.Pl);return $APP.P.F(bFd(b.getShapeById(E).serialized),$APP.Gw,$APP.G.j(l,E))},$APP.Wy.j(c,d)));d=$APP.Dh($APP.di.j($APP.Pl,d));var p=$APP.Dh($APP.di.j($APP.Pl,c)),q=$APP.Dh($APP.Sm.j($APP.Ck,$APP.Wy.j(p,d)));c=$APP.Dh($APP.qg.j(function(E){E=$APP.Pl.C(E);return q.C?q.C(E):q.call(null,E)},g));var r=$APP.Sm.j($APP.Ck,$APP.Wy.j(d,p)),t=$APP.eA();d=$APP.x(r)?$APP.di.j(function(E){return $APP.sI(E,
$APP.wC)},function(){var E=new $APP.N(null,1,5,$APP.O,[$APP.Xx],null),H=$APP.ek.j(function(K){return new $APP.N(null,2,5,$APP.O,[$APP.gB,$APP.Ii(K)],null)},r);return $APP.eD?$APP.eD(t,E,H):$APP.fD.call(null,t,E,H)}()):null;p=$APP.ek.j(function(E){return new $APP.N(null,2,5,$APP.O,[$APP.NNa,new $APP.N(null,2,5,$APP.O,[$APP.gB,$APP.Ii(E)],null)],null)},r);var y=$APP.Wy.j(g,c),z=$APP.x(y)?function(){var E=new $APP.N(null,1,5,$APP.O,[$APP.Xx],null),H=$APP.ek.j(function(K){return new $APP.N(null,2,5,$APP.O,
[$APP.gB,$APP.Ii($APP.Pl.C(K))],null)},y);return $APP.eD?$APP.eD(t,E,H):$APP.fD.call(null,t,E,H)}():null;return new $APP.m(null,4,[$APP.rIc,cFd(e,b,a,h),$APP.LYc,$APP.di.j(function(E){return $APP.de(q,$APP.u.C($APP.gB.C(E)))?$APP.P.F(E,$APP.PC,$APP.Mv()):$APP.lBb(E)},$APP.di.j(function(E){E=new $APP.m(null,2,[$APP.xC,$APP.tI,$APP.wC,E],null);E=new $APP.m(null,3,[$APP.aD,new $APP.m(null,1,[$APP.Gq,$APP.Fq.C?$APP.Fq.C(e):$APP.Fq.call(null,e)],null),$APP.oD,new $APP.m(null,1,[$APP.Gq,e],null),$APP.KD,
E],null);var H=$APP.Yqb(E,e);return $APP.gm.G($APP.F([E,H]))},g)),$APP.XL,p,$APP.A9b,new $APP.m(null,3,[$APP.ONb,$APP.wb(f),$APP.bAb,f,$APP.Wu,new $APP.m(null,5,[$APP.KJ,e,$APP.qSb,d,$APP.rSb,c,$APP.sSb,y,$APP.tSb,z],null)],null)],null)},eFd=function(a,b,c){var d=$APP.Tc($APP.A(b.pages)),e=d.shapes,f=$APP.XE(a);f=$APP.sI(f,$APP.yC);f=$APP.YRb.C(f);var g=$APP.Ih(f,$APP.fk.C($APP.Pc(f)));e=$APP.Dh($APP.En.j(function(q,r){var t=r.id;return new $APP.m(null,2,[$APP.Pl,t,$APP.$Rb,$APP.B.j(q,$APP.G.j(g,
t))?r.nonce:Date.now()],null)},e));var h=$APP.eA();f=function(){var q=$APP.nx.j($APP.v($APP.Uod),new $APP.N(null,2,5,$APP.O,[h,a],null));return $APP.n(q)?q:$APP.Dh($APP.di.j(function(r){return $APP.Pq.F(r,$APP.Pl,$APP.u)},aFd(h,a)))}();b=dFd(b,d,e,f,a,c);f=$APP.Ef(b);d=$APP.G.j(f,$APP.rIc);b=$APP.G.j(f,$APP.LYc);c=$APP.G.j(f,$APP.XL);f=$APP.G.j(f,$APP.A9b);d=$APP.sl.G(c,new $APP.N(null,1,5,$APP.O,[d],null),$APP.F([b]));var l=$APP.nx.j(f,new $APP.N(null,2,5,$APP.O,[$APP.Wu,$APP.rSb],null)),p=$APP.nx.j(f,
new $APP.N(null,2,5,$APP.O,[$APP.Wu,$APP.qSb],null));l=$APP.n($APP.Uf(function(q){return $APP.B.j("group",$APP.Um.C(q))},l))?$APP.P.F(f,$APP.uSb,$APP.Ou):$APP.n(function(){var q=$APP.Hf(p);return $APP.n(q)?$APP.Sf(function(r){return $APP.B.j("group",$APP.Um.C(r))},p):q}())?$APP.P.F(f,$APP.uSb,$APP.CJc):$APP.n($APP.Uf(function(q){return $APP.B.j("line",$APP.Um.C(q))&&$APP.B.j("arrow ",$APP.ro.C($APP.kHc.C(q)))},l))?$APP.P.F(f,$APP.uSb,$APP.IUc):f;b=$APP.x($APP.sl.j(b,c))?l:$APP.P.F(f,$APP.Zzb,!0);
$APP.oi.O($APP.Uod,$APP.uu,new $APP.N(null,2,5,$APP.O,[h,a],null),e);if($APP.de(new $APP.zh(null,new $APP.m(null,1,[$APP.IUc,null],null),null),$APP.uSb.C(b)))return $APP.fA($APP.Y$c,new $APP.m(null,2,[$APP.rx,d,$APP.A9b,b],null));e=$APP.Y$c.C($APP.v($APP.bA));$APP.sl.j($APP.rx.C(e),d);$APP.gm.G($APP.F([b,$APP.A9b.C(e)]));$APP.fA($APP.Y$c,$APP.Df);return null},fFd=function(a){a=$APP.b5a(a);return $APP.Sm.j($APP.snb,a)},gFd=function(a){var b=$APP.sx.C($APP.XE(a));a=fFd(a);a=$APP.qg.j(function(d){return $APP.B.j(b,
$APP.sx.C($APP.oD.C(d)))},a);var c=$APP.Dh($APP.Sm.j($APP.rb,$APP.di.j(function(d){return $APP.nx.F(d,new $APP.N(null,2,5,$APP.O,[$APP.pD,$APP.sx],null),null)},a)));a=$APP.Sm.j(function(d){d=$APP.sx.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},hFd=function(){return $APP.vm(null,function(){return $APP.vm(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.vm(a.text(),function(b){return $APP.vm($APP.Mq($APP.Df,b),function(c){return $APP.pm(c)})})})})},iFd=function(a){var b=
$APP.Z6a();return($APP.nd(b)||$APP.B.j(1,$APP.Pc(b))&&$APP.B.j(a,$APP.Gq.C($APP.A(b))))&&$APP.wb($APP.nx.j($APP.v($APP.bA),new $APP.N(null,1,5,$APP.O,[$APP.CYa],null)))},jFd=function(a){return null!=a?$APP.ym($APP.vm(null,function(){return $APP.vm(hFd(),function(b){var c=$APP.Ef(b);b=$APP.G.j(c,$APP.kF);c=$APP.G.j(c,$APP.Jv);var d=$APP.A(b);b=$APP.ZRb(d,c);d=$APP.sI(d,$APP.yC);c=$APP.aSb.C(d);d=$APP.JF.C(d);a.cloneShapesIntoCurrentPage($APP.uj(new $APP.m(null,3,[$APP.iSb,b,$APP.aSb,c,$APP.JF,d],null)));
b=$APP.EYa();return $APP.pm(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},kFd=function(a){a.cleanup($APP.di.j(function(b){return b.id},a.shapes))},nFd=function(a,b){b=$APP.Yp.G(b,$APP.F([new $APP.m(null,1,[$APP.Zp,!0],null)]));b=$APP.Ef(b);var c=$APP.G.j(b,lFd),d=$APP.G.j(b,$APP.bH),e=$APP.G.j(b,mFd),f=$APP.eA();return $APP.vm(null,function(){return $APP.vm($APP.n(d)?$APP.Zlb(f,a,new $APP.m(null,1,[$APP.kw,100],null)):null,function(g){return $APP.vm($APP.n(c)?
$APP.dmb(a,10):null,function(h){return $APP.vm($APP.n(e)?$APP.fmb(a,100):null,function(l){return $APP.pm($APP.uj(new $APP.m(null,3,[$APP.kF,h,$APP.Jv,g,$APP.GH,l],null)))})})})})},oFd=function(a){return $APP.um($APP.RKb($APP.eA(),new $APP.N(null,1,5,$APP.O,[$APP.Yp.C(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.C.F(c,0,null),$APP.C.F(c,1,null),c=$APP.C.F(c,2,null),$APP.TKb($APP.n(c)?c:b)):null})},pFd=function(){return $APP.SNb(null)},qFd=function(){return $APP.UNb(null)},
HFd=function(a){return $APP.lh([rFd,sFd,tFd,uFd,vFd,wFd,xFd,yFd,$APP.BB,zFd,AFd,BFd,CFd,$APP.BS,DFd,EFd,FFd,GFd],[function(b){return $APP.Gq.C($APP.h5a($APP.eA(),$APP.mj(b)))},function(b){return $APP.uj($APP.J6b(b))},function(b){return $APP.YE(b,!1)},function(b){return $APP.NYa($APP.n(b)?$APP.J6b(b):null)},function(b){return $APP.bSb(b)},$APP.gw,function(b){return $APP.LJb(b,new $APP.m(null,1,[$APP.mO,!1],null))},$APP.iF,nFd,oFd,$Ed,function(b,c){return $APP.VJa(b,$APP.F([$APP.Iv,c]))},function(b){var c=
$APP.u,d=c.C,e=$APP.uz(),f=$APP.XE(a),g=gFd(a);b=new $APP.m(null,6,[$APP.pD,$APP.yh($APP.n(g)?g:f,new $APP.N(null,1,5,$APP.O,[$APP.sx],null)),$APP.gB,e,$APP.dB,$APP.n(b)?b:"",$APP.SD,$APP.Hq,$APP.aD,new $APP.m(null,2,[$APP.Gq,$APP.Fq.C?$APP.Fq.C(a):$APP.Fq.call(null,a),$APP.Rv,a],null),$APP.oD,new $APP.m(null,1,[$APP.Gq,a],null)],null);$APP.gD(new $APP.N(null,1,5,$APP.O,[b],null));return d.call(c,e)},function(b){return $APP.bI.G($APP.F([$APP.ei.C(b)]))},function(b,c){return $APP.xB(function(){return(0,$APP.b3b)(b,
$APP.gm.G($APP.F([$APP.Yp.G(c,$APP.F([$APP.Zp,!0])),new $APP.m(null,1,[$APP.oO,!0],null)])))})},function(b,c){return $APP.bB($APP.eA(),$APP.sx.C($APP.XE(b)),$APP.ei.C(c))},function(b){var c=$APP.kv(b)?$APP.Gq.C($APP.h5a($APP.eA(),$APP.mj(b))):null;c=$APP.n(c)?c:b;var d=$APP.TE(c),e=$APP.iF(c);return $APP.n(d)?$APP.n(e)?$APP.vJ(c,new $APP.m(null,1,[$APP.uJ,b],null)):$APP.tJ($APP.YE(b,!1)):null},function(b){return $APP.uj($APP.q4a($APP.mj(b)))}])},GFd=new $APP.J(null,"queryBlockByUUID","queryBlockByUUID",
2091812895),DFd=new $APP.J(null,"exportToImage","exportToImage",-154356643),CFd=new $APP.J(null,"addNewBlock","addNewBlock",1426762680),IFd=new $APP.J(null,"KeyboardShortcut","KeyboardShortcut",1250004264),mFd=new $APP.J(null,"files?","files?",-1267491104),rFd=new $APP.J(null,"getBlockPageName","getBlockPageName",-1656908032),JFd=new $APP.J(null,"renderers","renderers",-1460292282),KFd=new $APP.J(null,"model","model",331153215),tFd=new $APP.J(null,"getRedirectPageName","getRedirectPageName",-1858136925),
wFd=new $APP.J(null,"isMobile","isMobile",-2043133877),uFd=new $APP.J(null,"setCurrentPdf","setCurrentPdf",-63289336),LFd=new $APP.J(null,"onMount","onMount",-876858467),xFd=new $APP.J(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),AFd=new $APP.J(null,"makeAssetUrl","makeAssetUrl",217779988),MFd=new $APP.J(null,"onPersist","onPersist",-1848738852),NFd=new $APP.J(null,"Breadcrumb","Breadcrumb",-1351298906),BFd=new $APP.J(null,"copyToClipboard","copyToClipboard",1092115063),FFd=new $APP.J(null,
"redirectToPage","redirectToPage",87147838),vFd=new $APP.J(null,"addNewWhiteboard","addNewWhiteboard",554297706),zFd=new $APP.J(null,"saveAsset","saveAsset",-668047853),OFd=new $APP.J(null,"BacklinksCount","BacklinksCount",364670631),PFd=new $APP.J(null,"Block","Block",-1959785792),EFd=new $APP.J(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),QFd=new $APP.J(null,"Page","Page",-1267059506),lFd=new $APP.J(null,"pages?","pages?",-2065014049),RFd=new $APP.J(null,"PageName","PageName",-164991013),
SFd=new $APP.J(null,"Tweet","Tweet",-452258680),yFd=new $APP.J(null,"isWhiteboardPage","isWhiteboardPage",-134150579),TFd=new $APP.J(null,"BlockReference","BlockReference",-120254741),sFd=new $APP.J(null,"inflateAsset","inflateAsset",-1449040639);$APP.gda("tldraw");var UFd=$APP.Fm(594);var VFd,WFd;$APP.Avd={};VFd=$APP.PO($APP.ra(UFd,"App"));$APP.Dvd=$APP.ra(UFd,"generateJSXFromModel");
WFd=new $APP.m(null,8,[QFd,$APP.hr($APP.lr,function(a){return(0,$APP.IU)(new $APP.m(null,2,[$APP.KJ,$APP.YE($APP.ra(a,"pageName"),!1),$APP.oO,!0],null))},null,"frontend.extensions.tldraw/page-cp"),PFd,$APP.hr($APP.lr,function(a){a=$APP.Ii($APP.ra(a,"blockId"));var b=$APP.PXa($APP.Fmc);a=b.C?b.C(a):b.call(null,a);return $APP.Vq(a)},null,"frontend.extensions.tldraw/block-cp"),NFd,$APP.hr($APP.lr,function(a){return $APP.Vq($APP.wR(new $APP.m(null,1,[$APP.SV,!0],null),$APP.eA(),$APP.Ii($APP.ra(a,"blockId")),
new $APP.m(null,2,[$APP.rac,$APP.ra(a,"endSeparator"),$APP.sac,$APP.ra(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),SFd,$APP.hr($APP.lr,function(a){return(0,$APP.m$b)($APP.ra(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),RFd,$APP.hr($APP.lr,function(a){return(0,$APP.hR)(new $APP.m(null,1,[$APP.SV,!0],null),new $APP.m(null,1,[$APP.Gq,$APP.ra(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),OFd,function(a){return $APP.Wf.j($APP.Gvd,$APP.di.j(function(b){return $APP.Yp.G($APP.ra(a,
b),$APP.F([new $APP.m(null,1,[$APP.Zp,!0],null)]))},new $APP.N(null,3,5,$APP.O,["id","className","options"],null)))},TFd,$APP.hr($APP.lr,function(a){return(0,$APP.w9b)($APP.Df,$APP.ra(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),IFd,$APP.hr($APP.lr,function(a){a=$APP.WO($APP.ei.C($APP.ra(a,"action")));return"string"===typeof a?$APP.Vq($APP.TO(a)):$APP.Vq($APP.Yo.j(" | ",$APP.di.j($APP.TO,a)))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);
$APP.Bvd=$APP.hr($APP.lr,function(a,b){function c(l){if($APP.n(l)){l.appUndo=pFd;l.appRedo=qFd;var p=$APP.ra(l,"api");return $APP.n(p)?$APP.um(d?jFd(p):null,function(){kFd(l.currentPage);$APP.OYa(l,b);return h.C?h.C(l):h.call(null,l)}):null}return null}var d=iFd(a),e=$APP.jSb(a),f=$APP.sr(null),g=$APP.C.F(f,0,null),h=$APP.C.F(f,1,null);$APP.tr(function(){$APP.n($APP.n(g)?b:g)&&$APP.OYa(g,b);return function(){return $APP.sc}},new $APP.N(null,2,5,$APP.O,[b,g],null));return $APP.n(e)?$APP.V("div",{style:{overscrollBehavior:"none"},
onBlur:function(l){l=$APP.ra(l,"target").tagName;var p=new $APP.zh(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.fB():null},onWheel:$APP.Cv,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.wb(g)?$APP.V("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.Vq($APP.$O("Loading onboarding whiteboard ..."))]):null,$APP.Vq(function(){var l=new $APP.m(null,6,[JFd,WFd,$APP.vSa,
HFd(a),LFd,c,$APP.r_c,!0,MFd,function(p,q){$APP.fA(new $APP.N(null,2,5,$APP.O,[$APP.v1c,$APP.eA()],null),$APP.Mv());return $APP.n(!1)?(console.time("tldraw persist"),p=eFd(a,p,q.replace),console.timeEnd("tldraw persist"),p):eFd(a,p,q.replace)},KFd,e],null);return VFd.C?VFd.C(l):VFd.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Qa.aj();
}).call(this);