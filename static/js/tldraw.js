(function(){
shadow$provide[611]=function(xa,ba,Ta,D){function u(v,x,A){var B,K={},g=null,k=null;void 0!==A&&(g=""+A);void 0!==x.key&&(g=""+x.key);void 0!==x.ref&&(k=x.ref);for(B in x)q.call(x,B)&&!b.hasOwnProperty(B)&&(K[B]=x[B]);if(v&&v.defaultProps)for(B in x=v.defaultProps,x)void 0===K[B]&&(K[B]=x[B]);return{$$typeof:W,type:v,key:g,ref:k,props:K,_owner:y.current}}ba(19);xa=ba(22);var W=60103;D.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(ba=Symbol.for,W=ba("react.element"),D.Fragment=ba("react.fragment"));
var y=xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};D.jsx=u;D.jsxs=u};
shadow$provide[613]=function(xa,ba,Ta,D){Ta.exports=ba(611)};
shadow$provide[614]=function(xa,ba,Ta,D){function u(Bb){for(var Dc="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+Bb,Lc=1;Lc<arguments.length;Lc++)Dc+="\x26args[]\x3d"+encodeURIComponent(arguments[Lc]);return"Minified React error #"+Bb+"; visit "+Dc+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function W(Bb){if(null==Bb)return null;if("function"===typeof Bb)return Bb.displayName||Bb.name||null;if("string"===typeof Bb)return Bb;
switch(Bb){case U:return"Fragment";case V:return"Portal";case E:return"Profiler";case J:return"StrictMode";case ka:return"Suspense";case S:return"SuspenseList"}if("object"===typeof Bb)switch(Bb.$$typeof){case Q:return(Bb.displayName||"Context")+".Consumer";case M:return(Bb._context.displayName||"Context")+".Provider";case O:var Dc=Bb.render;Dc=Dc.displayName||Dc.name||"";return Bb.displayName||(""!==Dc?"ForwardRef("+Dc+")":"ForwardRef");case aa:return W(Bb.type);case T:return W(Bb._render);case X:Dc=
Bb._payload;Bb=Bb._init;try{return W(Bb(Dc))}catch(Lc){}}return null}function y(Bb,Dc){for(var Lc=Bb._threadCount|0;Lc<=Dc;Lc++)Bb[Lc]=Bb._currentValue2,Bb._threadCount=Lc+1}function q(Bb,Dc,Lc,Cc){if(Cc&&(Cc=Bb.contextType,"object"===typeof Cc&&null!==Cc))return y(Cc,Lc),Cc[Lc];if(Bb=Bb.contextTypes){Lc={};for(var Zc in Bb)Lc[Zc]=Dc[Zc];Dc=Lc}else Dc=wa;return Dc}function b(Bb){if(Ka.call(Xa,Bb))return!0;if(Ka.call(Pa,Bb))return!1;if(Ba.test(Bb))return Xa[Bb]=!0;Pa[Bb]=!0;return!1}function v(Bb,
Dc,Lc,Cc){if(null!==Lc&&0===Lc.type)return!1;switch(typeof Dc){case "function":case "symbol":return!0;case "boolean":if(Cc)return!1;if(null!==Lc)return!Lc.acceptsBooleans;Bb=Bb.toLowerCase().slice(0,5);return"data-"!==Bb&&"aria-"!==Bb;default:return!1}}function x(Bb,Dc,Lc,Cc){if(null===Dc||"undefined"===typeof Dc||v(Bb,Dc,Lc,Cc))return!0;if(Cc)return!1;if(null!==Lc)switch(Lc.type){case 3:return!Dc;case 4:return!1===Dc;case 5:return isNaN(Dc);case 6:return isNaN(Dc)||1>Dc}return!1}function A(Bb,Dc,
Lc,Cc,Zc,kd,gd){this.acceptsBooleans=2===Dc||3===Dc||4===Dc;this.attributeName=Cc;this.attributeNamespace=Zc;this.mustUseProperty=Lc;this.propertyName=Bb;this.type=Dc;this.sanitizeURL=kd;this.removeEmptyString=gd}function B(Bb){return Bb[1].toUpperCase()}function K(Bb){if("boolean"===typeof Bb||"number"===typeof Bb)return""+Bb;Bb=""+Bb;var Dc=Ma.exec(Bb);if(Dc){var Lc="",Cc,Zc=0;for(Cc=Dc.index;Cc<Bb.length;Cc++){switch(Bb.charCodeAt(Cc)){case 34:Dc="\x26quot;";break;case 38:Dc="\x26amp;";break;case 39:Dc=
"\x26#x27;";break;case 60:Dc="\x26lt;";break;case 62:Dc="\x26gt;";break;default:continue}Zc!==Cc&&(Lc+=Bb.substring(Zc,Cc));Zc=Cc+1;Lc+=Dc}Bb=Zc!==Cc?Lc+Bb.substring(Zc,Cc):Lc}return Bb}function g(Bb,Dc){var Lc=Ya.hasOwnProperty(Bb)?Ya[Bb]:null,Cc;if(Cc="style"!==Bb)Cc=null!==Lc?0===Lc.type:!(2<Bb.length)||"o"!==Bb[0]&&"O"!==Bb[0]||"n"!==Bb[1]&&"N"!==Bb[1]?!1:!0;if(Cc||x(Bb,Dc,Lc,!1))return"";if(null!==Lc){Bb=Lc.attributeName;Cc=Lc.type;if(3===Cc||4===Cc&&!0===Dc)return Bb+'\x3d""';Lc.sanitizeURL&&
(Dc=""+Dc);return Bb+'\x3d"'+(K(Dc)+'"')}return b(Bb)?Bb+'\x3d"'+(K(Dc)+'"'):""}function k(Bb,Dc){return Bb===Dc&&(0!==Bb||1/Bb===1/Dc)||Bb!==Bb&&Dc!==Dc}function c(){if(null===ja)throw Error(u(321));return ja}function h(){if(0<Va)throw Error(u(312));return{memoizedState:null,queue:null,next:null}}function l(){null===ia?null===oa?(sa=!1,oa=ia=h()):(sa=!0,ia=oa):null===ia.next?(sa=!1,ia=ia.next=h()):(sa=!0,ia=ia.next);return ia}function n(Bb,Dc,Lc,Cc){for(;Fa;)Fa=!1,Va+=1,ia=null,Lc=Bb(Dc,Cc);F();
return Lc}function F(){ja=null;Fa=!1;oa=null;Va=0;ia=Qa=null}function w(Bb,Dc){return"function"===typeof Dc?Dc(Bb):Dc}function t(Bb,Dc,Lc){ja=c();ia=l();if(sa){var Cc=ia.queue;Dc=Cc.dispatch;if(null!==Qa&&(Lc=Qa.get(Cc),void 0!==Lc)){Qa.delete(Cc);Cc=ia.memoizedState;do Cc=Bb(Cc,Lc.action),Lc=Lc.next;while(null!==Lc);ia.memoizedState=Cc;return[Cc,Dc]}return[ia.memoizedState,Dc]}Bb=Bb===w?"function"===typeof Dc?Dc():Dc:void 0!==Lc?Lc(Dc):Dc;ia.memoizedState=Bb;Bb=ia.queue={last:null,dispatch:null};
Bb=Bb.dispatch=f.bind(null,ja,Bb);return[ia.memoizedState,Bb]}function r(Bb,Dc){ja=c();ia=l();Dc=void 0===Dc?null:Dc;if(null!==ia){var Lc=ia.memoizedState;if(null!==Lc&&null!==Dc){var Cc=Lc[1];a:if(null===Cc)Cc=!1;else{for(var Zc=0;Zc<Cc.length&&Zc<Dc.length;Zc++)if(!ma(Dc[Zc],Cc[Zc])){Cc=!1;break a}Cc=!0}if(Cc)return Lc[0]}}Bb=Bb();ia.memoizedState=[Bb,Dc];return Bb}function f(Bb,Dc,Lc){if(!(25>Va))throw Error(u(301));if(Bb===ja)if(Fa=!0,Bb={action:Lc,next:null},null===Qa&&(Qa=new Map),Lc=Qa.get(Dc),
void 0===Lc)Qa.set(Dc,Bb);else{for(Dc=Lc;null!==Dc.next;)Dc=Dc.next;Dc.next=Bb}}function G(){}function C(Bb){switch(Bb){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function H(Bb){if(void 0===Bb||null===Bb)return Bb;var Dc="";P.Children.forEach(Bb,function(Lc){null!=Lc&&(Dc+=Lc)});return Dc}function Z(Bb,Dc){if(void 0===Bb)throw Error(u(152,W(Dc)||"Component"));}function I(Bb,Dc,Lc){function Cc(gd,
sd){var Ib=sd.prototype&&sd.prototype.isReactComponent,dc=q(sd,Dc,Lc,Ib),Zb=[],pb=!1,wb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Zb)return null},enqueueReplaceState:function(de,cf){pb=!0;Zb=[cf]},enqueueSetState:function(de,cf){if(null===Zb)return null;Zb.push(cf)}};if(Ib){if(Ib=new sd(gd.props,dc,wb),"function"===typeof sd.getDerivedStateFromProps){var ec=sd.getDerivedStateFromProps.call(null,gd.props,Ib.state);null!=ec&&(Ib.state=R({},Ib.state,ec))}}else if(ja={},
Ib=sd(gd.props,dc,wb),Ib=n(sd,gd.props,Ib,dc),null==Ib||null==Ib.render){Bb=Ib;Z(Bb,sd);return}Ib.props=gd.props;Ib.context=dc;Ib.updater=wb;wb=Ib.state;void 0===wb&&(Ib.state=wb=null);if("function"===typeof Ib.UNSAFE_componentWillMount||"function"===typeof Ib.componentWillMount)if("function"===typeof Ib.componentWillMount&&"function"!==typeof sd.getDerivedStateFromProps&&Ib.componentWillMount(),"function"===typeof Ib.UNSAFE_componentWillMount&&"function"!==typeof sd.getDerivedStateFromProps&&Ib.UNSAFE_componentWillMount(),
Zb.length){wb=Zb;var Nc=pb;Zb=null;pb=!1;if(Nc&&1===wb.length)Ib.state=wb[0];else{ec=Nc?wb[0]:Ib.state;var od=!0;for(Nc=Nc?1:0;Nc<wb.length;Nc++){var wd=wb[Nc];wd="function"===typeof wd?wd.call(Ib,ec,gd.props,dc):wd;null!=wd&&(od?(od=!1,ec=R({},ec,wd)):R(ec,wd))}Ib.state=ec}}else Zb=null;Bb=Ib.render();Z(Bb,sd);if("function"===typeof Ib.getChildContext&&(gd=sd.childContextTypes,"object"===typeof gd)){var Id=Ib.getChildContext(),ne;for(ne in Id)if(!(ne in gd))throw Error(u(108,W(sd)||"Unknown",ne));
}Id&&(Dc=R({},Dc,Id))}for(;P.isValidElement(Bb);){var Zc=Bb,kd=Zc.type;if("function"!==typeof kd)break;Cc(Zc,kd)}return{child:Bb,context:Dc}}var R=ba(19),P=ba(22),V=60106,U=60107,J=60108,E=60114,M=60109,Q=60110,O=60112,ka=60113,S=60120,aa=60115,X=60116,T=60121,ca=60117,Y=60119,pa=60129,va=60131;"function"===typeof Symbol&&Symbol.for&&(xa=Symbol.for,V=xa("react.portal"),U=xa("react.fragment"),J=xa("react.strict_mode"),E=xa("react.profiler"),M=xa("react.provider"),Q=xa("react.context"),O=xa("react.forward_ref"),
ka=xa("react.suspense"),S=xa("react.suspense_list"),aa=xa("react.memo"),X=xa("react.lazy"),T=xa("react.block"),ca=xa("react.fundamental"),Y=xa("react.scope"),pa=xa("react.debug_trace_mode"),va=xa("react.legacy_hidden"));xa=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var wa={},Ca=new Uint16Array(16);for(ba=0;15>ba;ba++)Ca[ba]=ba+1;Ca[15]=0;var Ba=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ka=Object.prototype.hasOwnProperty,Pa={},Xa={},Ya={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Bb){Ya[Bb]=new A(Bb,0,!1,Bb,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Bb){var Dc=Bb[0];Ya[Dc]=new A(Dc,1,!1,Bb[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Bb){Ya[Bb]=
new A(Bb,2,!1,Bb.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Bb){Ya[Bb]=new A(Bb,2,!1,Bb,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Bb){Ya[Bb]=new A(Bb,3,!1,Bb.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(Bb){Ya[Bb]=new A(Bb,3,!0,Bb,null,!1,!1)});["capture","download"].forEach(function(Bb){Ya[Bb]=new A(Bb,4,!1,Bb,null,!1,!1)});["cols","rows","size","span"].forEach(function(Bb){Ya[Bb]=new A(Bb,6,!1,Bb,null,!1,!1)});["rowSpan","start"].forEach(function(Bb){Ya[Bb]=new A(Bb,5,!1,Bb.toLowerCase(),null,!1,!1)});var Wa=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Bb){var Dc=
Bb.replace(Wa,B);Ya[Dc]=new A(Dc,1,!1,Bb,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Bb){var Dc=Bb.replace(Wa,B);Ya[Dc]=new A(Dc,1,!1,Bb,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Bb){var Dc=Bb.replace(Wa,B);Ya[Dc]=new A(Dc,1,!1,Bb,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Bb){Ya[Bb]=new A(Bb,1,!1,Bb.toLowerCase(),null,!1,!1)});
Ya.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Bb){Ya[Bb]=new A(Bb,1,!1,Bb.toLowerCase(),null,!0,!0)});var Ma=/["'&<>]/,ma="function"===typeof Object.is?Object.is:k,ja=null,oa=null,ia=null,sa=!1,Fa=!1,Qa=null,Va=0,Oa=null,eb={readContext:function(Bb){var Dc=Oa.threadID;y(Bb,Dc);return Bb[Dc]},useContext:function(Bb){c();var Dc=Oa.threadID;y(Bb,Dc);return Bb[Dc]},useMemo:r,useReducer:t,useRef:function(Bb){ja=
c();ia=l();var Dc=ia.memoizedState;return null===Dc?(Bb={current:Bb},ia.memoizedState=Bb):Dc},useState:function(Bb){return t(w,Bb)},useLayoutEffect:function(){},useCallback:function(Bb,Dc){return r(function(){return Bb},Dc)},useImperativeHandle:G,useEffect:G,useDebugValue:G,useDeferredValue:function(Bb){c();return Bb},useTransition:function(){c();return[function(Bb){Bb()},!1]},useOpaqueIdentifier:function(){return(Oa.identifierPrefix||"")+"R:"+(Oa.uniqueID++).toString(36)},useMutableSource:function(Bb,
Dc){c();return Dc(Bb._source)}},ob={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Lb=R({menuitem:!0},ob),Cb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sb=["Webkit","ms","Moz","O"];Object.keys(Cb).forEach(function(Bb){sb.forEach(function(Dc){Dc=Dc+Bb.charAt(0).toUpperCase()+Bb.substring(1);Cb[Dc]=Cb[Bb]})});var Ja=/([A-Z])/g,cb=/^ms-/,lb=P.Children.toArray,
Rb=xa.ReactCurrentDispatcher,zb={listing:!0,pre:!0,textarea:!0},bc=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,fc={},Ec={},qc=Object.prototype.hasOwnProperty,Gb={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},nc=function(){function Bb(Lc,Cc,Zc){P.isValidElement(Lc)?Lc.type!==U?Lc=[Lc]:(Lc=Lc.props.children,Lc=P.isValidElement(Lc)?[Lc]:lb(Lc)):Lc=lb(Lc);Lc={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:Lc,childIndex:0,context:wa,footer:""};
var kd=Ca[0];if(0===kd){var gd=Ca;kd=gd.length;var sd=2*kd;if(!(65536>=sd))throw Error(u(304));var Ib=new Uint16Array(sd);Ib.set(gd);Ca=Ib;Ca[0]=kd+1;for(gd=kd;gd<sd-1;gd++)Ca[gd]=gd+1;Ca[sd-1]=0}else Ca[0]=Ca[kd];this.threadID=kd;this.stack=[Lc];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Cc;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=Zc&&Zc.identifierPrefix||""}
var Dc=Bb.prototype;Dc.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var Lc=this.threadID;Ca[Lc]=Ca[0];Ca[0]=Lc}};Dc.pushProvider=function(Lc){var Cc=++this.contextIndex,Zc=Lc.type._context,kd=this.threadID;y(Zc,kd);var gd=Zc[kd];this.contextStack[Cc]=Zc;this.contextValueStack[Cc]=gd;Zc[kd]=Lc.props.value};Dc.popProvider=function(){var Lc=this.contextIndex,Cc=this.contextStack[Lc],Zc=this.contextValueStack[Lc];this.contextStack[Lc]=null;this.contextValueStack[Lc]=
null;this.contextIndex--;Cc[this.threadID]=Zc};Dc.clearProviders=function(){for(var Lc=this.contextIndex;0<=Lc;Lc--)this.contextStack[Lc][this.threadID]=this.contextValueStack[Lc]};Dc.read=function(Lc){if(this.exhausted)return null;var Cc=Oa;Oa=this;var Zc=Rb.current;Rb.current=eb;try{for(var kd=[""],gd=!1;kd[0].length<Lc;){if(0===this.stack.length){this.exhausted=!0;var sd=this.threadID;Ca[sd]=Ca[0];Ca[0]=sd;break}var Ib=this.stack[this.stack.length-1];if(gd||Ib.childIndex>=Ib.children.length){var dc=
Ib.footer;""!==dc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Ib.type)this.currentSelectValue=null;else if(null!=Ib.type&&null!=Ib.type.type&&Ib.type.type.$$typeof===M)this.popProvider(Ib.type);else if(Ib.type===ka){this.suspenseDepth--;var Zb=kd.pop();if(gd){gd=!1;var pb=Ib.fallbackFrame;if(!pb)throw Error(u(303));this.stack.push(pb);kd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else kd[this.suspenseDepth]+=Zb}kd[this.suspenseDepth]+=dc}else{var wb=Ib.children[Ib.childIndex++],
ec="";try{ec+=this.render(wb,Ib.context,Ib.domNamespace)}catch(Nc){if(null!=Nc&&"function"===typeof Nc.then)throw Error(u(294));throw Nc;}finally{}kd.length<=this.suspenseDepth&&kd.push("");kd[this.suspenseDepth]+=ec}}return kd[0]}finally{Rb.current=Zc,Oa=Cc,F()}};Dc.render=function(Lc,Cc,Zc){if("string"===typeof Lc||"number"===typeof Lc){Zc=""+Lc;if(""===Zc)return"";if(this.makeStaticMarkup)return K(Zc);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+K(Zc);this.previousWasTextNode=!0;return K(Zc)}Cc=
I(Lc,Cc,this.threadID);Lc=Cc.child;Cc=Cc.context;if(null===Lc||!1===Lc)return"";if(!P.isValidElement(Lc)){if(null!=Lc&&null!=Lc.$$typeof){Zc=Lc.$$typeof;if(Zc===V)throw Error(u(257));throw Error(u(258,Zc.toString()));}Lc=lb(Lc);this.stack.push({type:null,domNamespace:Zc,children:Lc,childIndex:0,context:Cc,footer:""});return""}var kd=Lc.type;if("string"===typeof kd)return this.renderDOM(Lc,Cc,Zc);switch(kd){case va:case pa:case J:case E:case S:case U:return Lc=lb(Lc.props.children),this.stack.push({type:null,
domNamespace:Zc,children:Lc,childIndex:0,context:Cc,footer:""}),"";case ka:throw Error(u(294));case Y:throw Error(u(343));}if("object"===typeof kd&&null!==kd)switch(kd.$$typeof){case O:ja={};var gd=kd.render(Lc.props,Lc.ref);gd=n(kd.render,Lc.props,gd,Lc.ref);gd=lb(gd);this.stack.push({type:null,domNamespace:Zc,children:gd,childIndex:0,context:Cc,footer:""});return"";case aa:return Lc=[P.createElement(kd.type,R({ref:Lc.ref},Lc.props))],this.stack.push({type:null,domNamespace:Zc,children:Lc,childIndex:0,
context:Cc,footer:""}),"";case M:return kd=lb(Lc.props.children),Zc={type:Lc,domNamespace:Zc,children:kd,childIndex:0,context:Cc,footer:""},this.pushProvider(Lc),this.stack.push(Zc),"";case Q:kd=Lc.type;gd=Lc.props;var sd=this.threadID;y(kd,sd);kd=lb(gd.children(kd[sd]));this.stack.push({type:Lc,domNamespace:Zc,children:kd,childIndex:0,context:Cc,footer:""});return"";case ca:throw Error(u(338));case X:return kd=Lc.type,gd=kd._init,kd=gd(kd._payload),Lc=[P.createElement(kd,R({ref:Lc.ref},Lc.props))],
this.stack.push({type:null,domNamespace:Zc,children:Lc,childIndex:0,context:Cc,footer:""}),""}throw Error(u(130,null==kd?kd:typeof kd,""));};Dc.renderDOM=function(Lc,Cc,Zc){var kd=Lc.type.toLowerCase();"http://www.w3.org/1999/xhtml"===Zc&&C(kd);if(!fc.hasOwnProperty(kd)){if(!bc.test(kd))throw Error(u(65,kd));fc[kd]=!0}var gd=Lc.props;if("input"===kd)gd=R({type:void 0},gd,{defaultChecked:void 0,defaultValue:void 0,value:null!=gd.value?gd.value:gd.defaultValue,checked:null!=gd.checked?gd.checked:gd.defaultChecked});
else if("textarea"===kd){var sd=gd.value;if(null==sd){sd=gd.defaultValue;var Ib=gd.children;if(null!=Ib){if(null!=sd)throw Error(u(92));if(Array.isArray(Ib)){if(!(1>=Ib.length))throw Error(u(93));Ib=Ib[0]}sd=""+Ib}null==sd&&(sd="")}gd=R({},gd,{value:void 0,children:""+sd})}else if("select"===kd)this.currentSelectValue=null!=gd.value?gd.value:gd.defaultValue,gd=R({},gd,{value:void 0});else if("option"===kd){Ib=this.currentSelectValue;var dc=H(gd.children);if(null!=Ib){var Zb=null!=gd.value?gd.value+
"":dc;sd=!1;if(Array.isArray(Ib))for(var pb=0;pb<Ib.length;pb++){if(""+Ib[pb]===Zb){sd=!0;break}}else sd=""+Ib===Zb;gd=R({selected:void 0,children:void 0},gd,{selected:sd,children:dc})}}if(sd=gd){if(Lb[kd]&&(null!=sd.children||null!=sd.dangerouslySetInnerHTML))throw Error(u(137,kd));if(null!=sd.dangerouslySetInnerHTML){if(null!=sd.children)throw Error(u(60));if(!("object"===typeof sd.dangerouslySetInnerHTML&&"__html"in sd.dangerouslySetInnerHTML))throw Error(u(61));}if(null!=sd.style&&"object"!==
typeof sd.style)throw Error(u(62));}sd=gd;Ib=this.makeStaticMarkup;dc=1===this.stack.length;Zb="\x3c"+Lc.type;a:if(-1===kd.indexOf("-"))pb="string"===typeof sd.is;else switch(kd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":pb=!1;break a;default:pb=!0}for(cf in sd)if(qc.call(sd,cf)){var wb=sd[cf];if(null!=wb){if("style"===cf){var ec=void 0,Nc="",od="";for(ec in wb)if(wb.hasOwnProperty(ec)){var wd=
0===ec.indexOf("--"),Id=wb[ec];if(null!=Id){if(wd)var ne=ec;else if(ne=ec,Ec.hasOwnProperty(ne))ne=Ec[ne];else{var de=ne.replace(Ja,"-$1").toLowerCase().replace(cb,"-ms-");ne=Ec[ne]=de}Nc+=od+ne+":";od=ec;wd=null==Id||"boolean"===typeof Id||""===Id?"":wd||"number"!==typeof Id||0===Id||Cb.hasOwnProperty(od)&&Cb[od]?(""+Id).trim():Id+"px";Nc+=wd;od=";"}}wb=Nc||null}ec=null;pb?Gb.hasOwnProperty(cf)||(ec=cf,ec=b(ec)&&null!=wb?ec+'\x3d"'+(K(wb)+'"'):""):ec=g(cf,wb);ec&&(Zb+=" "+ec)}}Ib||dc&&(Zb+=' data-reactroot\x3d""');
var cf=Zb;sd="";ob.hasOwnProperty(kd)?cf+="/\x3e":(cf+="\x3e",sd="\x3c/"+Lc.type+"\x3e");a:{Ib=gd.dangerouslySetInnerHTML;if(null!=Ib){if(null!=Ib.__html){Ib=Ib.__html;break a}}else if(Ib=gd.children,"string"===typeof Ib||"number"===typeof Ib){Ib=K(Ib);break a}Ib=null}null!=Ib?(gd=[],zb.hasOwnProperty(kd)&&"\n"===Ib.charAt(0)&&(cf+="\n"),cf+=Ib):gd=lb(gd.children);Lc=Lc.type;Zc=null==Zc||"http://www.w3.org/1999/xhtml"===Zc?C(Lc):"http://www.w3.org/2000/svg"===Zc&&"foreignObject"===Lc?"http://www.w3.org/1999/xhtml":
Zc;this.stack.push({domNamespace:Zc,type:kd,children:gd,childIndex:0,context:Cc,footer:sd});this.previousWasTextNode=!1;return cf};return Bb}();D.renderToNodeStream=function(){throw Error(u(207));};D.renderToStaticMarkup=function(Bb,Dc){Bb=new nc(Bb,!0,Dc);try{return Bb.read(Infinity)}finally{Bb.destroy()}};D.renderToStaticNodeStream=function(){throw Error(u(208));};D.renderToString=function(Bb,Dc){Bb=new nc(Bb,!1,Dc);try{return Bb.read(Infinity)}finally{Bb.destroy()}};D.version="17.0.2"};
shadow$provide[616]=function(xa,ba,Ta,D){Ta.exports=ba(614)};
shadow$provide[617]=function(xa,ba,Ta,D){function u(){if(!lr&&(lr="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!lr))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lr(Bu)}function W(a,d=0){return(pl[a[d+0]]+pl[a[d+1]]+pl[a[d+2]]+pl[a[d+3]]+"-"+pl[a[d+4]]+pl[a[d+5]]+"-"+pl[a[d+6]]+pl[a[d+7]]+"-"+pl[a[d+8]]+pl[a[d+9]]+"-"+pl[a[d+10]]+pl[a[d+11]]+pl[a[d+12]]+pl[a[d+13]]+pl[a[d+14]]+
pl[a[d+15]]).toLowerCase()}function y(a){let d=0;var m=0;for(var L of a)d+=L.w*L.h,m=Math.max(m,L.w);a.sort((ua,Ha)=>Ha.h-ua.h);m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),m),h:Infinity}];let ha=L=0;for(const ua of a)for(a=m.length-1;0<=a;a--){var na=m[a];if(!(ua.w>na.w||ua.h>na.h)){ua.x=na.x;ua.y=na.y;ha=Math.max(ha,ua.y+ua.h);L=Math.max(L,ua.x+ua.w);ua.w===na.w&&ua.h===na.h?(na=m.pop(),a<m.length&&(m[a]=na)):ua.h===na.h?(na.x+=ua.w,na.w-=ua.w):(ua.w!==na.w&&m.push({x:na.x+ua.w,y:na.y,w:na.w-
ua.w,h:ua.h}),na.y+=ua.h,na.h-=ua.h);break}}return{w:L,h:ha,fill:d/(L*ha)||0}}function q(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function b(a,d,m=0){const L=[a[0]+d[0]/2,a[1]+d[1]/2],ha=Hd.rotWith(a,L,m),na=Hd.rotWith(Hd.add(a,[d[0],0]),L,m),ua=Hd.rotWith(Hd.add(a,d),L,m);a=Hd.rotWith(Hd.add(a,[0,d[1]]),L,m);return[["top",[ha,na]],["right",[na,ua]],["bottom",[ua,a]],["left",[a,ha]]]}function v(a,d,m,L){const [ha,na]=a,[ua,Ha]=d,[Ua,$a]=m,[jb,mb]=L;return Ha/ua!==(mb-$a)/(jb-Ua)&&
(d=ua*(mb-$a)-Ha*(jb-Ua),0!==d&&(a=((na-$a)*(jb-Ua)-(ha-Ua)*(mb-$a))/d,d=((na-$a)*ua-(ha-Ua)*Ha)/d,0<=a&&0<=d&&1>=d))?q("intersection",[ha+a*ua,na+a*Ha]):q("no intersection")}function x(a,d,m,L,ha=0){return c(m,L,ha,a,d)}function A(a,d,m,L=0){const {minX:ha,minY:na,width:ua,height:Ha}=m;return x(a,d,[ha,na],[ua,Ha],L)}function B(a,d,m,L){var ha=Hd.sub(a,m);m=Hd.sub(L,m);d=Hd.sub(d,a);L=m[0]*ha[1]-m[1]*ha[0];ha=d[0]*ha[1]-d[1]*ha[0];m=m[1]*d[0]-m[0]*d[1];return 0===L||0===ha?q("coincident"):0===m?
q("parallel"):0!==m&&(L/=m,ha/=m,0<=L&&1>=L&&0<=ha&&1>=ha)?q("intersection",Hd.add(a,Hd.mul(d,L))):q("no intersection")}function K(a,d,m,L){var ha=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),na=2*((d[0]-a[0])*(a[0]-m[0])+(d[1]-a[1])*(a[1]-m[1]));m=na*na-4*ha*(m[0]*m[0]+m[1]*m[1]+a[0]*a[0]+a[1]*a[1]-2*(m[0]*a[0]+m[1]*a[1])-L*L);if(0>m)return q("outside");if(0===m)return q("tangent");L=Math.sqrt(m);m=(-na+L)/(2*ha);ha=(-na-L)/(2*ha);if((0>m||1<m)&&(0>ha||1<ha))return 0>m&&0>ha||1<m&&1<ha?q("outside"):
q("inside");na=[];0<=m&&1>=m&&na.push(Hd.lrp(a,d,m));0<=ha&&1>=ha&&na.push(Hd.lrp(a,d,ha));return q("intersection",...na)}function g(a,d,m,L,ha,na=0){if(0===L||0===ha||Hd.isEqual(a,d))return q("no intersection");L=0>L?L:-L;ha=0>ha?ha:-ha;a=Hd.sub(Hd.rotWith(a,m,-na),m);d=Hd.sub(Hd.rotWith(d,m,-na),m);var ua=Hd.sub(d,a),Ha=ua[0]*ua[0]/L/L+ua[1]*ua[1]/ha/ha;ua=2*a[0]*ua[0]/L/L+2*a[1]*ua[1]/ha/ha;const Ua=[];L=ua*ua-4*Ha*(a[0]*a[0]/L/L+a[1]*a[1]/ha/ha-1);0===L?Ua.push(-ua/2/Ha):0<L&&(L=Math.sqrt(L),
Ua.push((-ua+L)/2/Ha),Ua.push((-ua-L)/2/Ha));Ha=Ua.filter($a=>0<=$a&&1>=$a).map($a=>Hd.add(m,Hd.add(a,Hd.mul(Hd.sub(d,a),$a)))).map($a=>Hd.rotWith($a,m,na));return q("intersection",...Ha)}function k(a,d,m){const L=[];for(let ha=1;ha<m.length;ha++){const na=B(a,d,m[ha-1],m[ha]);na&&L.push(...na.points)}return 0===L.length?q("no intersection"):q("intersection",...m)}function c(a,d,m,L,ha){return b(a,d,m).reduce((na,[ua,[Ha,Ua]])=>{(Ha=v(L,ha,Ha,Ua))&&na.push(q(ua,...Ha.points));return na},[]).filter(na=>
na.didIntersect)}function h(a,d,m,L){return b(a,d).reduce((ha,[na,[ua,Ha]])=>{(ua=B(m,L,ua,Ha))&&ha.push(q(na,...ua.points));return ha},[]).filter(ha=>ha.didIntersect)}function l(a,d,m,L){return b(a,d).reduce((ha,[na,[ua,Ha]])=>{(ua=K(ua,Ha,m,L))&&ha.push(Cf(qe({},ua),{message:na}));return ha},[]).filter(ha=>ha.didIntersect)}function n(a,d,m,L,ha,na=0){return b(a,d).reduce((ua,[Ha,[Ua,$a]])=>{(Ua=g(Ua,$a,m,L,ha,na))&&ua.push(Cf(qe({},Ua),{message:Ha}));return ua},[]).filter(ua=>ua.didIntersect)}function F(a,
d,m){return b(a,d).reduce((L,[ha,[na,ua]])=>{na=k(na,ua,m);na.didIntersect&&L.push(q(ha,...na.points));return L},[]).filter(L=>L.didIntersect)}function w(a,d,m){return b(a,d).reduce((L,[ha,[na,ua]])=>{{const Ha=[];for(let Ua=1;Ua<m.length+1;Ua++){const $a=B(na,ua,m[Ua-1],m[Ua%m.length]);$a&&Ha.push(...$a.points)}na=0===Ha.length?q("no intersection"):q("intersection",...m)}na.didIntersect&&L.push(q(ha,...na.points));return L},[]).filter(L=>L.didIntersect)}function t(a,d,m,L=0,ha,na){return d===m?l(ha,
na,a,d):n(ha,na,a,d,m,L)}function r(a,d,m){const {minX:L,minY:ha,width:na,height:ua}=a;return h([L,ha],[na,ua],d,m)}function f(a){for(var d=arguments.length,m=Array(1<d?d-1:0),L=1;L<d;L++)m[L-1]=arguments[L];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(m.length?" "+m.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function G(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?
window:"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:nx}function C(){Ga||f("Proxy not available")}function H(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function Z(a){return"function"===typeof a}function I(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function R(a){return null!==a&&"object"===typeof a}function P(a){if(!R(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&
a.constructor;return"function"===typeof a&&a.toString()===hb}function V(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function U(a,d,m){yp(a,d,{enumerable:!1,writable:!0,configurable:!0,value:m})}function J(a,d,m){yp(a,d,{enumerable:!1,writable:!1,configurable:!0,value:m})}function E(a,d){var m="isMobX"+a;d.prototype[m]=!0;return function(L){return R(L)&&!0===L[m]}}function M(a){return a instanceof Map}function Q(a){return a instanceof
Set}function O(a){var d=Object.keys(a);if(!oc)return d;var m=Object.getOwnPropertySymbols(a);return m.length?[].concat(d,m.filter(function(L){return $p.propertyIsEnumerable.call(a,L)})):d}function ka(a){return null===a?null:"object"===typeof a?""+a:a}function S(a,d){return $p.hasOwnProperty.call(a,d)}function aa(a,d){for(var m=0;m<d.length;m++){var L=d[m];L.enumerable=L.enumerable||!1;L.configurable=!0;"value"in L&&(L.writable=!0);Object.defineProperty(a,L.key,L)}}function X(a,d,m){d&&aa(a.prototype,
d);m&&aa(a,m);Object.defineProperty(a,"prototype",{writable:!1});return a}function T(){T=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var m=arguments[d],L;for(L in m)Object.prototype.hasOwnProperty.call(m,L)&&(a[L]=m[L])}return a};return T.apply(this,arguments)}function ca(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;Y(a,d)}function Y(a,d){Y=Object.setPrototypeOf||function(m,L){m.__proto__=L;return m};return Y(a,d)}function pa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function va(a,d){if(a){if("string"===typeof a)return wa(a,d);var m=Object.prototype.toString.call(a).slice(8,-1);"Object"===m&&a.constructor&&(m=a.constructor.name);if("Map"===m||"Set"===m)return Array.from(a);if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return wa(a,d)}}function wa(a,d){if(null==d||d>a.length)d=a.length;for(var m=0,L=Array(d);m<d;m++)L[m]=a[m];return L}function Ca(a,d){var m="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(m)return(m=
m.call(a)).next.bind(m);if(Array.isArray(a)||(m=va(a))||d&&a&&"number"===typeof a.length){m&&(a=m);var L=0;return function(){return L>=a.length?{done:!0}:{done:!1,value:a[L++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ba(a){return Object.assign(function(d,m){Ka(d,m,a)},a)}function Ka(a,d,m){S(a,Nd)||U(a,Nd,T({},a[Nd]));m.annotationType_!==lh&&(a[Nd][d]=m)}function Pa(a){S(a,
Nd)||U(a,Nd,T({},a[Nd]));return a[Nd]}function Xa(a,d,m){void 0===d&&(d=Eb);void 0===m&&(m=Eb);a=new Ng(a);d!==Eb&&id(hE,a,d,void 0);m!==Eb&&he(a,m);return a}function Ya(a,d,m){return td(a)?a:Array.isArray(a)?ef.array(a,{name:m}):P(a)?ef.object(a,void 0,{name:m}):M(a)?ef.map(a,{name:m}):Q(a)?ef.set(a,{name:m}):"function"!==typeof a||wd(a)||Pd(a)?a:V(a)?Lu(a):Ku(m,a)}function Wa(a){return a}function Ma(a,d){return{annotationType_:a,options_:d,make_:ma,extend_:ja}}function ma(a,d,m,L){var ha;if(null!=
(ha=this.options_)&&ha.bound)return null===this.extend_(a,d,m,!1)?0:1;if(L===a.target_)return null===this.extend_(a,d,m,!1)?0:2;if(wd(m.value))return 1;a=oa(a,this,d,m,!1);yp(L,d,a);return 2}function ja(a,d,m,L){m=oa(a,this,d,m);return a.defineProperty_(d,m,L)}function oa(a,d,m,L,ha){var na,ua,Ha,Ua,$a,jb,mb;void 0===ha&&(ha=ig.safeDescriptors);L=L.value;if(null!=(na=d.options_)&&na.bound){var Kb;L=L.bind(null!=(Kb=a.proxy_)?Kb:a.target_)}return{value:zb(null!=(ua=null==(Ha=d.options_)?void 0:Ha.name)?
ua:m.toString(),L,null!=(Ua=null==($a=d.options_)?void 0:$a.autoAction)?Ua:!1,null!=(jb=d.options_)&&jb.bound?null!=(mb=a.proxy_)?mb:a.target_:void 0),configurable:ha?a.isPlainObject_:!0,enumerable:!1,writable:ha?!1:!0}}function ia(a,d){return{annotationType_:a,options_:d,make_:sa,extend_:Fa}}function sa(a,d,m,L){var ha;if(L===a.target_)return null===this.extend_(a,d,m,!1)?0:2;if(null!=(ha=this.options_)&&ha.bound&&(!S(a.target_,d)||!Pd(a.target_[d]))&&null===this.extend_(a,d,m,!1))return 0;if(Pd(m.value))return 1;
a=Qa(a,this,d,m,!1,!1);yp(L,d,a);return 2}function Fa(a,d,m,L){var ha;m=Qa(a,this,d,m,null==(ha=this.options_)?void 0:ha.bound);return a.defineProperty_(d,m,L)}function Qa(a,d,m,L,ha,na){void 0===na&&(na=ig.safeDescriptors);d=L.value;Pd(d)||(d=Lu(d));if(ha){var ua;d=d.bind(null!=(ua=a.proxy_)?ua:a.target_);d.isMobXFlow=!0}return{value:d,configurable:na?a.isPlainObject_:!0,enumerable:!1,writable:na?!1:!0}}function Va(a,d){return{annotationType_:a,options_:d,make_:Oa,extend_:eb}}function Oa(a,d,m){return null===
this.extend_(a,d,m,!1)?0:1}function eb(a,d,m,L){return a.defineComputedProperty_(d,T({},this.options_,{get:m.get,set:m.set}),L)}function ob(a,d){return{annotationType_:a,options_:d,make_:Lb,extend_:Cb}}function Lb(a,d,m){return null===this.extend_(a,d,m,!1)?0:1}function Cb(a,d,m,L){var ha,na;return a.defineObservableProperty_(d,m.value,null!=(ha=null==(na=this.options_)?void 0:na.enhancer)?ha:Ya,L)}function sb(a){return{annotationType_:"true",options_:a,make_:Ja,extend_:cb}}function Ja(a,d,m,L){var ha,
na;if(m.get)return Xf.make_(a,d,m,L);if(m.set){m=zb(d.toString(),m.set);if(L===a.target_)return null===a.defineProperty_(d,{configurable:ig.safeDescriptors?a.isPlainObject_:!0,set:m})?0:2;yp(L,d,{configurable:!0,set:m});return 2}if(L!==a.target_&&"function"===typeof m.value){var ua;if(V(m.value)){var Ha;return(null!=(Ha=this.options_)&&Ha.autoBind?Lu.bound:Lu).make_(a,d,m,L)}return(null!=(ua=this.options_)&&ua.autoBind?Ku.bound:Ku).make_(a,d,m,L)}ua=!1===(null==(ha=this.options_)?void 0:ha.deep)?
ef.ref:ef;if("function"===typeof m.value&&null!=(na=this.options_)&&na.autoBind){var Ua;m.value=m.value.bind(null!=(Ua=a.proxy_)?Ua:a.target_)}return ua.make_(a,d,m,L)}function cb(a,d,m,L){var ha,na;if(m.get)return Xf.extend_(a,d,m,L);if(m.set)return a.defineProperty_(d,{configurable:ig.safeDescriptors?a.isPlainObject_:!0,set:zb(d.toString(),m.set)},L);if("function"===typeof m.value&&null!=(ha=this.options_)&&ha.autoBind){var ua;m.value=m.value.bind(null!=(ua=a.proxy_)?ua:a.target_)}return(!1===(null==
(na=this.options_)?void 0:na.deep)?ef.ref:ef).extend_(a,d,m,L)}function lb(a){if(!0===a.deep)var d=Ya;else{if(!1===a.deep)a=Wa;else{a=a.defaultDecorator;var m;a=a?null!=(d=null==(m=a.options_)?void 0:m.enhancer)?d:Ya:Ya}d=a}return d}function Rb(a,d,m){if(I(d))Ka(a,d,ve);else return td(a)?a:P(a)?ef.object(a,d,m):Array.isArray(a)?ef.array(a,d):M(a)?ef.map(a,d):Q(a)?ef.set(a,d):"object"===typeof a&&null!==a?a:ef.box(a,d)}function zb(a,d,m,L){function ha(){a:{var na=L||this,ua=arguments,Ha=ig.trackingDerivation,
Ua=!m||!Ha;gd();var $a=ig.allowStateChanges;Ua&&(Bb(),$a=fc(!0));var jb=Dc(!0),mb=ZD++,Kb=Jv;Jv=mb;try{var Vb=d.apply(na,ua);break a}catch(kc){var Ob=kc;throw kc;}finally{Jv!==mb&&f(30),Jv=Kb,void 0!==Ob&&(ig.suppressReactionErrors=!0),ig.allowStateChanges=$a,ig.allowStateReads=jb,sd(),Ua&&(ig.trackingDerivation=Ha),ig.suppressReactionErrors=!1}Vb=void 0}return Vb}void 0===m&&(m=!1);ha.isMobxAction=!0;$D&&(Iz.value=a,Object.defineProperty(ha,"name",Iz));return ha}function bc(a,d){a=fc(a);try{return d()}finally{ig.allowStateChanges=
a}}function fc(a){var d=ig.allowStateChanges;ig.allowStateChanges=a;return d}function Ec(a){switch(a.dependenciesState_){case Ej.UP_TO_DATE_:return!1;case Ej.NOT_TRACKING_:case Ej.STALE_:return!0;case Ej.POSSIBLY_STALE_:for(var d=Dc(!0),m=Bb(),L=a.observing_,ha=L.length,na=0;na<ha;na++){var ua=L[na];if(Ju(ua)){if(ig.disableErrorBoundaries)ua.get();else try{ua.get()}catch(Ha){return ig.trackingDerivation=m,ig.allowStateReads=d,!0}if(a.dependenciesState_===Ej.STALE_)return ig.trackingDerivation=m,ig.allowStateReads=
d,!0}}Lc(a);ig.trackingDerivation=m;ig.allowStateReads=d;return!1}}function qc(a,d,m){var L=Dc(!0);Lc(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++ig.runId;var ha=ig.trackingDerivation;ig.trackingDerivation=a;ig.inBatch++;if(!0===ig.disableErrorBoundaries)var na=d.call(m);else try{na=d.call(m)}catch(jb){na=new Gs(jb)}ig.inBatch--;ig.trackingDerivation=ha;var ua=a.observing_;d=a.observing_=a.newObserving_;m=Ej.UP_TO_DATE_;ha=0;for(var Ha=a.unboundDepsCount_,Ua=
0;Ua<Ha;Ua++){var $a=d[Ua];0===$a.diffValue_&&($a.diffValue_=1,ha!==Ua&&(d[ha]=$a),ha++);$a.dependenciesState_>m&&(m=$a.dependenciesState_)}d.length=ha;a.newObserving_=null;for(Ha=ua.length;Ha--;)Ua=ua[Ha],0===Ua.diffValue_&&Zc(Ua,a),Ua.diffValue_=0;for(;ha--;)ua=d[ha],1===ua.diffValue_&&(ua.diffValue_=0,Ha=a,ua.observers_.add(Ha),ua.lowestObserverState_>Ha.dependenciesState_&&(ua.lowestObserverState_=Ha.dependenciesState_));m!==Ej.UP_TO_DATE_&&(a.dependenciesState_=m,a.onBecomeStale_());ig.allowStateReads=
L;return na}function Gb(a){var d=a.observing_;a.observing_=[];for(var m=d.length;m--;)Zc(d[m],a);a.dependenciesState_=Ej.NOT_TRACKING_}function nc(a){var d=Bb();try{return a()}finally{ig.trackingDerivation=d}}function Bb(){var a=ig.trackingDerivation;ig.trackingDerivation=null;return a}function Dc(a){var d=ig.allowStateReads;ig.allowStateReads=a;return d}function Lc(a){if(a.dependenciesState_!==Ej.UP_TO_DATE_){a.dependenciesState_=Ej.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
Ej.UP_TO_DATE_}}function Cc(){(ig.pendingReactions.length||ig.inBatch||ig.isRunningReactions)&&f(36);Jz=!0;if(Lv){var a=G();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);ig=new Kv}}function Zc(a,d){a.observers_["delete"](d);0===a.observers_.size&&kd(a)}function kd(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,ig.pendingUnobservations.push(a))}function gd(){ig.inBatch++}function sd(){if(0===--ig.inBatch){0<ig.inBatch||ig.isRunningReactions||Mv(wb);for(var a=ig.pendingUnobservations,
d=0;d<a.length;d++){var m=a[d];m.isPendingUnobservation_=!1;0===m.observers_.size&&(m.isBeingObserved_&&(m.isBeingObserved_=!1,m.onBUO()),m instanceof Iu&&m.suspend_())}ig.pendingUnobservations=[]}}function Ib(a){var d=ig.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&ig.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<ig.inBatch&&kd(a);return!1}
function dc(a){a.lowestObserverState_!==Ej.STALE_&&(a.lowestObserverState_=Ej.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===Ej.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=Ej.STALE_}))}function Zb(a){a.lowestObserverState_!==Ej.STALE_&&(a.lowestObserverState_=Ej.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Ej.POSSIBLY_STALE_?d.dependenciesState_=Ej.STALE_:d.dependenciesState_===Ej.UP_TO_DATE_&&(a.lowestObserverState_=Ej.UP_TO_DATE_)}))}function pb(a){a.lowestObserverState_===
Ej.UP_TO_DATE_&&(a.lowestObserverState_=Ej.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Ej.UP_TO_DATE_&&(d.dependenciesState_=Ej.POSSIBLY_STALE_,d.onBecomeStale_())}))}function wb(){ig.isRunningReactions=!0;for(var a=ig.pendingReactions,d=0;0<a.length;){++d===dE&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var m=a.splice(0),L=0,ha=m.length;L<ha;L++)m[L].runReaction_()}ig.isRunningReactions=!1}function ec(a){var d=Mv;Mv=function(m){return a(function(){return d(m)})}}
function Nc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function od(a){return function(d,m){if(Z(d))return zb(d.name||"\x3cunnamed action\x3e",d,a);if(Z(m))return zb(d,m,a);if(I(m))return Ka(d,m,a?Mz:Lz);if(I(d))return Ba(Ma(a?"autoAction":Kz,{name:d,autoAction:a}))}}function wd(a){return Z(a)&&!0===a.isMobxAction}function Id(a,d){function m(){a(Ua)}var L,ha;void 0===d&&(d=qa);var na=null!=(L=null==(ha=d)?void 0:ha.name)?L:"Autorun";if(d.scheduler||d.delay){var ua=
ne(d),Ha=!1;var Ua=new zt(na,function(){Ha||(Ha=!0,ua(function(){Ha=!1;Ua.isDisposed_||Ua.track(m)}))},d.onError,d.requiresObservable)}else Ua=new zt(na,function(){this.track(m)},d.onError,d.requiresObservable);Ua.schedule_();return Ua.getDisposer_()}function ne(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:gE}function de(a,d,m){function L(){jb=!1;if(!Ob.isDisposed_){var kc=!1;Ob.track(function(){var xc=bc(!1,function(){return a(Ob)});kc=$a||!Vb(mb,xc);Kb=mb;
mb=xc});$a&&m.fireImmediately?ua(mb,Kb,Ob):!$a&&kc&&ua(mb,Kb,Ob);$a=!1}}var ha;void 0===m&&(m=qa);var na=null!=(ha=m.name)?ha:"Reaction",ua=Tg(na,m.onError?cf(m.onError,d):d),Ha=!m.scheduler&&!m.delay,Ua=ne(m),$a=!0,jb=!1,mb,Kb,Vb=m.compareStructural?Ef.structural:m.equals||Ef["default"],Ob=new zt(na,function(){$a||Ha?L():jb||(jb=!0,Ua(L))},m.onError,m.requiresObservable);Ob.schedule_();return Ob.getDisposer_()}function cf(a,d){return function(){try{return d.apply(this,arguments)}catch(m){a.call(this,
m)}}}function he(a,d,m){return id(iE,a,d,m)}function id(a,d,m,L){var ha="function"===typeof L?Of(d,m):Of(d),na=Z(L)?L:m,ua=a+"L";ha[ua]?ha[ua].add(na):ha[ua]=new Set([na]);return function(){var Ha=ha[ua];Ha&&(Ha["delete"](na),0===Ha.size&&delete ha[ua])}}function nb(a){!0===a.isolateGlobalState&&Cc();var d=a.useProxies,m=a.enforceActions;void 0!==d&&(ig.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(ig.verifyProxies=!0);void 0!==m&&(d="always"===m?"always":
"observed"===m,ig.enforceActions=d,ig.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(L){L in a&&(ig[L]=!!a[L])});ig.allowStateReads=!ig.observableRequiresReaction;a.reactionScheduler&&ec(a.reactionScheduler)}function yc(a,d,m,L){var ha=ed(d),na=ld(a,L)[ke];gd();try{Qc(ha).forEach(function(ua){na.extend_(ua,ha[ua],m?ua in m?m[ua]:!0:!0)})}finally{sd()}return a}
function zd(a){var d={name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(zd));return d}function ie(){this.message="FLOW_CANCELLED"}function Pd(a){return!0===(null==a?void 0:a.isMobXFlow)}function td(a,d){return a?void 0!==d?fe(a)?a[ke].values_.has(d):!1:fe(a)||!!a[ke]||ei(a)||Nv(a)||Ju(a):!1}function Od(a){if(fe(a))return a[ke].ownKeys_();f(38)}function Ye(a,d,m){a.set(d,m);return m}function of(a,d){if(null==a||"object"!==typeof a||a instanceof
Date||!td(a))return a;if(bE(a)||Ju(a))return of(a.get(),d);if(d.has(a))return d.get(a);if(Vc(a)){var m=Ye(d,a,Array(a.length));a.forEach(function(ua,Ha){m[Ha]=of(ua,d)});return m}if(Hs(a)){var L=Ye(d,a,new Set);a.forEach(function(ua){L.add(of(ua,d))});return L}if(yr(a)){var ha=Ye(d,a,new Map);a.forEach(function(ua,Ha){ha.set(Ha,of(ua,d))});return ha}var na=Ye(d,a,{});Od(a).forEach(function(ua){$p.propertyIsEnumerable.call(a,ua)&&(na[ua]=of(a[ua],d))});return na}function uc(a,d){return of(a,new Map)}
function Ve(){f("trace() is not available in production builds");for(var a=!1,d=arguments.length,m=Array(d),L=0;L<d;L++)m[L]=arguments[L];"boolean"===typeof m[m.length-1]&&(a=m.pop());a:{switch(m.length){case 0:d=ig.trackingDerivation;break a;case 1:d=Of(m[0]);break a;case 2:d=Of(m[0],m[1]);break a}d=void 0}if(!d)return f("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===yt.NONE&&console.log("[mobx.trace] '"+
d.name_+"' tracing enabled");d.isTracing_=a?yt.BREAK:yt.LOG}function bd(a,d){void 0===d&&(d=void 0);gd();try{return a.apply(d)}finally{sd()}}function Fb(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function Qb(a,d){var m=a.interceptors_||(a.interceptors_=[]);m.push(d);return H(function(){var L=m.indexOf(d);-1!==L&&m.splice(L,1)})}function Ra(a,d){var m=Bb();try{var L=[].concat(a.interceptors_||[]);a=0;for(var ha=L.length;a<ha&&((d=L[a](d))&&!d.type&&f(14),d);a++);return d}finally{ig.trackingDerivation=
m}}function Pb(a){return void 0!==a.changeListeners_&&0<a.changeListeners_.length}function tc(a,d){var m=a.changeListeners_||(a.changeListeners_=[]);m.push(d);return H(function(){var L=m.indexOf(d);-1!==L&&m.splice(L,1)})}function Jc(a,d){var m=Bb();if(a=a.changeListeners_){a=a.slice();for(var L=0,ha=a.length;L<ha;L++)a[L](d);ig.trackingDerivation=m}}function cd(a,d,m){var L=ld(a,m)[ke];gd();try{var ha;null!=(ha=d)?ha:d=Pa(a);Qc(d).forEach(function(na){return L.make_(na,d[na])})}finally{sd()}return a}
function ab(a,d,m,L){void 0===m&&(m="ObservableArray");void 0===L&&(L=!1);C();d=new sx(m,d,L,!1);J(d.values_,ke,d);m=new Proxy(d.values_,mE);d.proxy_=m;a&&a.length&&(L=fc(!0),d.spliceWithArray_(0,0,a),ig.allowStateChanges=L);return m}function ib(a,d){"function"===typeof Array.prototype[a]&&(Ov[a]=d(a))}function fb(a){return function(){var d=this[ke];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function vb(a){return function(d,m){var L=this,ha=this[ke];ha.atom_.reportObserved();
return ha.dehanceValues_(ha.values_)[a](function(na,ua){return d.call(m,na,ua,L)})}}function xb(a){return function(){var d=this,m=this[ke];m.atom_.reportObserved();m=m.dehanceValues_(m.values_);var L=arguments[0];arguments[0]=function(ha,na,ua){return L(ha,na,ua,d)};return m[a].apply(m,arguments)}}function Vc(a){return R(a)&&nE(a[ke])}function Wc(a){if(M(a)||yr(a))return a;if(Array.isArray(a))return new Map(a);if(P(a)){var d=new Map,m;for(m in a)d.set(m,a[m]);return d}return f(21,a)}function ld(a,
d){var m;if(S(a,ke))return a;var L=null!=(m=null==d?void 0:d.name)?m:"ObservableObject";m=Rz;var ha=new Map;L=String(L);var na;var ua=d?null!=(na=d.defaultDecorator)?na:sb(d):void 0;d=new m(a,ha,L,ua);U(a,ke,d);return a}function Ld(a){return Qz[a]||(Qz[a]={get:function(){return this[ke].getObservablePropValue_(a)},set:function(d){return this[ke].setObservablePropValue_(a,d)}})}function fe(a){return R(a)?uE(a[ke]):!1}function ye(a){return{enumerable:!1,configurable:!0,get:function(){return this[ke].get_(a)},
set:function(d){this[ke].set_(a,d)}}}function ge(a){if(a>tx){for(var d=tx;d<a+100;d++)yp(ux.prototype,""+d,ye(d));tx=a}}function Ne(a,d,m){return new ux(a,d,m)}function Of(a,d){if("object"===typeof a&&null!==a){if(Vc(a))return void 0!==d&&f(23),a[ke].atom_;if(Hs(a))return a[ke];if(yr(a)){if(void 0===d)return a.keysAtom_;var m=a.data_.get(d)||a.hasMap_.get(d);m||f(25,d,ub(a));return m}if(fe(a)){if(!d)return f(26);(m=a[ke].values_.get(d))||f(27,d,ub(a));return m}if(ei(a)||Ju(a)||Nv(a))return a}else if(Z(a)&&
Nv(a[ke]))return a[ke];f(28)}function eg(a,d){a||f(29);if(void 0!==d)return eg(Of(a,d));if(ei(a)||Ju(a)||Nv(a)||yr(a)||Hs(a))return a;if(a[ke])return a[ke];f(24,a)}function ub(a,d){if(void 0!==d)a=Of(a,d);else{if(wd(a))return a.name;a=fe(a)||yr(a)||Hs(a)?eg(a):Of(a)}return a.name_}function ya(a,d,m){void 0===m&&(m=-1);return da(a,d,m)}function da(a,d,m,L,ha){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var na=typeof a;if("function"!==na&&"object"!==na&&"object"!=
typeof d)return!1;na=Tz.call(a);if(na!==Tz.call(d))return!1;switch(na){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=m&&m++}a=ta(a);d=ta(d);na="[object Array]"===na;if(!na){if("object"!=typeof a||"object"!=
typeof d)return!1;var ua=a.constructor,Ha=d.constructor;if(ua!==Ha&&!(Z(ua)&&ua instanceof ua&&Z(Ha)&&Ha instanceof Ha)&&"constructor"in a&&"constructor"in d)return!1}if(0===m)return!1;0>m&&(m=-1);L=L||[];ha=ha||[];for(ua=L.length;ua--;)if(L[ua]===a)return ha[ua]===d;L.push(a);ha.push(d);if(na){ua=a.length;if(ua!==d.length)return!1;for(;ua--;)if(!da(a[ua],d[ua],m-1,L,ha))return!1}else{na=Object.keys(a);ua=na.length;if(Object.keys(d).length!==ua)return!1;for(;ua--;)if(Ha=na[ua],!S(d,Ha)||!da(a[Ha],
d[Ha],m-1,L,ha))return!1}L.pop();ha.pop();return!0}function ta(a){return Vc(a)?a.slice():M(a)||yr(a)||Q(a)||Hs(a)?Array.from(a.entries()):a}function La(a){a[Symbol.iterator]=bb;return a}function bb(){return this}function Hb(a,d){const m=new Set(d),L=Object.values(a),ha=new Set(L.filter(na=>m.has(na.toId)||m.has(na.fromId)));a=ha.size;for(d=-1;0!==d;)ha.forEach(na=>{na=na.fromId;for(const ua of L)ua.fromId===na&&ha.add(ua),ua.toId===na&&ha.add(ua)}),d=ha.size-a,a=ha.size;return Array.from(ha.values())}
function jc(a,d,m,L,ha,na,ua,Ha){if(ha=d.getBindingPoint(ha,na,ua,Ha))return{id:L,type:"line",fromId:a.id,toId:d.id,handleId:m,point:me.toFixed(ha.point),distance:ha.distance}}function Kc(a,d){const m=a.getCenter(),L=d.getCenter();var ha=hk();ha=Cf(qe({},Mu.defaultProps),{id:ha,type:Mu.id,parentId:a.props.parentId,point:m});a=jc(ha,a,"start",hk(),m,m,me.uni(me.sub(L,m)),!1);d=jc(ha,d,"end",hk(),L,L,me.uni(me.sub(m,L)),!1);return a&&d?(ha.handles.start.point=[0,0],ha.handles.end.point=me.sub(L,m),
ha.handles.start.bindingId=a.id,ha.handles.end.bindingId=d.id,[ha,[a,d]]):null}function Yc(){return new DE}function Ud(){return new WeakMap}function Fd(a){if(!a)return Cx(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:Cx(a);if(~BE.call(d).indexOf("[native code]"))try{return new d}catch(m){}return Cx(a)}function Oe(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function Te(a){return a.flags}function jf(a){a=
CE.call(a);return a.substring(8,a.length-1)}function He(a){return a[Symbol.toStringTag]||jf(a)}function Bf(a){return FA(a).concat(Dx(a))}function Tf(a,d,m){for(var L=KE(a),ha=0,na=L.length,ua,Ha;ha<na;++ha)if(ua=L[ha],"callee"!==ua&&"caller"!==ua)if(Ha=IE(a,ua)){Ha.get||Ha.set||(Ha.value=m.copier(Ha.value,m));try{HE(d,ua,Ha)}catch(Ua){d[ua]=Ha.value}}else d[ua]=m.copier(a[ua],m);return d}function jg(a,d){var m=new d.Constructor;d.cache.set(a,m);a.forEach(function(L,ha){m.set(ha,d.copier(L,d))});return m}
function Yf(a,d){var m=Fd(d.prototype);d.cache.set(a,m);for(var L in a)HA.call(a,L)&&(m[L]=d.copier(a[L],d));return m}function vg(a,d){var m=Fd(d.prototype);d.cache.set(a,m);for(var L in a)HA.call(a,L)&&(m[L]=d.copier(a[L],d));L=Dx(a);for(var ha=0,na=L.length,ua;ha<na;++ha)ua=L[ha],JE.call(a,ua)&&(m[ua]=d.copier(a[ua],d));return m}function zh(a,d){return new d.Constructor(a.valueOf())}function Og(a,d){return a}function Hh(a,d){var m=new d.Constructor;d.cache.set(a,m);a.forEach(function(L){m.add(d.copier(L,
d))});return m}function Ih(a){function d(na,ua){ua.prototype=ua.Constructor=void 0;if(!na||"object"!==typeof na)return na;if(ua.cache.has(na))return ua.cache.get(na);ua.prototype=na.__proto__||ME(na);ua.Constructor=ua.prototype&&ua.prototype.constructor;if(!ua.Constructor||ua.Constructor===Object)return ha(na,ua);if(LE(na))return L(na,ua);var Ha=m[GE(na)];return Ha?Ha(na,ua):"function"===typeof na.then?na:ha(na,ua)}a=Ex({},JA,a);var m={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,
Boolean:zh,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,Int32Array:a.arrayBuffer,Map:a.map,Number:zh,Object:a.object,Promise:Og,RegExp:a.regExp,Set:a.set,String:zh,WeakMap:Og,WeakSet:Og,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},L=m.Array,ha=m.Object;return function(na){return d(na,{Constructor:void 0,cache:EE(),
copier:d,prototype:void 0})}}function Ci(a,d){return(0,QE.default)(a,d,{arrayMerge:(m,L,ha)=>L})}function Mi(a,d,m,L=!1){const [ha,na]=d,[ua,Ha]=m;a=ua+(a-ha)/(na-ha)*(Ha-ua);return L?ua<Ha?Math.max(Math.min(a,Ha),ua):Math.max(Math.min(a,ua),Ha):a}function Ni(a,d){return new Promise((m,L)=>{if("video"===d){const ha=document.createElement("video");ha.addEventListener("loadedmetadata",function(){m([this.videoWidth,this.videoHeight])},!1);ha.src=a}else if("image"===d){const ha=new Image;ha.onload=()=>
m([ha.width,ha.height]);ha.src=a;ha.onerror=na=>L(na)}else"pdf"===d&&m([595,842])})}function uf(a){return Object.values(hs).includes(a)}function xf(a,d){return uf(a)||null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:a}function lg(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",
padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);return a}function Vg(a,d,m=0){var L,ha,na;if(!a)return[16,32];let ua;ua="string"===typeof d?d:`${null!=(L=d.fontStyle)?L:"normal"} ${null!=(ha=d.fontVariant)?ha:"normal"} ${null!=(na=d.fontWeight)?na:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!Fx.has(`${a}-${ua}-${m}`)){if(!Cr)return[10,
10];Cr.parentNode||document.body.appendChild(Cr);Cr.innerHTML=`${a}&#8203;`;Cr.style.font=ua;Cr.style.padding=m+"px";d=Cr.getBoundingClientRect();Fx.set(`${a}-${ua}-${m}`,[Math.ceil(d.width||1),Math.ceil(d.height||1)])}return Fx.get(`${a}-${ua}-${m}`)}function Wg(a){try{if("string"!==typeof a||!$g.test(a))throw TypeError("Invalid UUID");let d;const m=new Uint8Array(16);m[0]=(d=parseInt(a.slice(0,8),16))>>>24;m[1]=d>>>16&255;m[2]=d>>>8&255;m[3]=d&255;m[4]=(d=parseInt(a.slice(9,13),16))>>>8;m[5]=d&
255;m[6]=(d=parseInt(a.slice(14,18),16))>>>8;m[7]=d&255;m[8]=(d=parseInt(a.slice(19,23),16))>>>8;m[9]=d&255;m[10]=(d=parseInt(a.slice(24,36),16))/1099511627776&255;m[11]=d/4294967296&255;m[12]=d>>>24&255;m[13]=d>>>16&255;m[14]=d>>>8&255;m[15]=d&255;return!0}catch(d){return!1}}function Dg(a,d=0,m){let L;return function(...ha){null==m?void 0:m(...ha);clearTimeout(L);L=setTimeout(()=>a.apply(ha),d)}}function yb(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function Mb(){var a,d,m;return(null==
(m=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:m.call(d,"ui/developer-mode?"))||!1}function ic(a){return!!a}function gc(a=0){return new Promise(d=>setTimeout(d,a))}function Hc(a="noid"){Gx[a]||(Gx[a]=MA.createContext({}));return Gx[a]}function Gc(a="noid"){return MA.useContext(Hc(a))}function Cd(a){const {callbacks:d}=Gc(),m=LA.useRef(-1);return LA.useMemo(()=>{const L=ha=>{var na,ua;const {order:Ha=0}=ha;if(!Ha){var Ua=ha.target;Ua.removeEventListener("pointerup",
L);Ua.releasePointerCapture(ha.pointerId);null==(na=d.onPointerUp)?void 0:na.call(d,{type:"selection",handle:a,order:Ha},ha);na=Date.now();Ua=na-m.current;300<Ua?m.current=na:300>=Ua&&(null==(ua=d.onDoubleClick)?void 0:ua.call(d,{type:"selection",handle:a,order:Ha},ha),m.current=-1);ha.order=Ha+1}};return{onPointerDown:ha=>{var na;const {order:ua=0}=ha;if(!ua){var Ha=Vd(ha.currentTarget);Ha.setPointerCapture(ha.pointerId);Ha.addEventListener("pointerup",L);null==(na=d.onPointerDown)?void 0:na.call(d,
{type:"selection",handle:a,order:ua},ha);ha.order=ua+1}},onPointerMove:ha=>{var na;const {order:ua=0}=ha;ua||(null==(na=d.onPointerMove)?void 0:na.call(d,{type:"selection",handle:a,order:ua},ha),ha.order=ua+1)},onPointerEnter:ha=>{var na;const {order:ua=0}=ha;ua||(null==(na=d.onPointerEnter)?void 0:na.call(d,{type:"selection",handle:a,order:ua},ha),ha.order=ua+1)},onPointerLeave:ha=>{var na;const {order:ua=0}=ha;ua||(null==(na=d.onPointerLeave)?void 0:na.call(d,{type:"selection",handle:a,order:ua},
ha),ha.order=ua+1)},onKeyDown:ha=>{var na;null==(na=d.onKeyDown)?void 0:na.call(d,{type:"selection",handle:a,order:-1},ha)},onKeyUp:ha=>{var na;null==(na=d.onKeyUp)?void 0:na.call(d,{type:"selection",handle:a,order:-1},ha)}}},[d])}function Vd(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return Vd(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function ae(a,d,m){const L=Ou.useRef(!1),ha=Ou.useCallback(()=>{var na;if(L.current){const ua=
null==(na=a.current)?void 0:na.getBoundingClientRect();ua&&(na={minX:ua.left,maxX:ua.left+ua.width,minY:ua.top,maxY:ua.top+ua.height,width:ua.width,height:ua.height},d.updateBounds(na),null==m?void 0:m(na))}else L.current=!0},[a,m]);Ou.useEffect(()=>{const na=a.current?TE(a.current):document,ua=Dg(ha,100);na.addEventListener("scroll",ua);window.addEventListener("resize",ua);return()=>{na.removeEventListener("scroll",ua);window.removeEventListener("resize",ua)}},[]);Ou.useLayoutEffect(()=>{const na=
new ResizeObserver(ua=>{ua[0].contentRect&&ha()});a.current&&na.observe(a.current);return()=>{na.disconnect()}},[a]);Ou.useEffect(()=>{ha();setTimeout(()=>{var na,ua;null==(ua=null==(na=a.current)?void 0:na.querySelector(".tl-canvas"))?void 0:ua.focus()})},[a])}function Fe(a,d){return Object.keys(d).reduce((m,L)=>{const ha=d[L];return ha?m+`${`--${a}-${L}`}: ${ha};
`:m},"")}function ud(a,d,m=".logseq-tldraw"){Hx.useLayoutEffect(()=>{const L=document.createElement("style"),ha=Fe(a,d);L.setAttribute("id",`${a}-theme`);L.setAttribute("data-selector",m);L.innerHTML=`
        ${m} {
          ${ha}
        }
      `;document.head.appendChild(L);return()=>{L&&document.head.contains(L)&&document.head.removeChild(L)}},[a,d,m])}function Pe(a,d){Hx.useLayoutEffect(()=>{if(Ix.get(a))return()=>{};const m=document.createElement("style");m.innerHTML=d;m.setAttribute("id",a);document.head.appendChild(m);Ix.set(a,m);return()=>{m&&document.head.contains(m)&&(document.head.removeChild(m),Ix.delete(a))}},[a,d])}function xe(a,d){const m=Hx.useMemo(()=>qe(qe({},UE),a),[a]);ud("tl",m,d);Pe("tl-canvas",VE)}function Be(a=
"noid"){Jx[a]||(Jx[a]=OA.createContext({}));return Jx[a]}function Ie(a="noid"){return OA.useContext(Be(a))}function Ze(){const a=Ie(),{callbacks:d}=Gc(),m=NA.useRef(-1);return NA.useMemo(()=>({onPointerDown:L=>{var ha,na,ua;if(!a.settings.penMode||"pen"===L.pointerType&&L.isPrimary){var {order:Ha=0}=L;Ha||(null==(ha=L.currentTarget)?void 0:ha.setPointerCapture(L.pointerId));L.isPrimary&&(null==(na=d.onPointerDown)?void 0:na.call(d,{type:"canvas",order:Ha},L),ha=Date.now(),na=ha-m.current,300<na?m.current=
ha:300>=na&&(null==(ua=d.onDoubleClick)?void 0:ua.call(d,{type:"canvas",order:Ha},L),m.current=-1))}},onPointerMove:L=>{var ha;if(!a.settings.penMode||"pen"===L.pointerType&&L.isPrimary){var {order:na=0}=L;null==(ha=d.onPointerMove)?void 0:ha.call(d,{type:"canvas",order:na},L)}},onPointerUp:L=>{var ha,na;if(!a.settings.penMode||"pen"===L.pointerType&&L.isPrimary){var {order:ua=0}=L;ua||(null==(ha=L.currentTarget)?void 0:ha.releasePointerCapture(L.pointerId));null==(na=d.onPointerUp)?void 0:na.call(d,
{type:"canvas",order:ua},L)}},onPointerEnter:L=>{var ha;if(!a.settings.penMode||"pen"===L.pointerType&&L.isPrimary){var {order:na=0}=L;null==(ha=d.onPointerEnter)?void 0:ha.call(d,{type:"canvas",order:na},L)}},onPointerLeave:L=>{var ha;if(!a.settings.penMode||"pen"===L.pointerType&&L.isPrimary){var {order:na=0}=L;null==(ha=d.onPointerLeave)?void 0:ha.call(d,{type:"canvas",order:na},L)}},onDrop:L=>ui(this,null,function*(){L.preventDefault();"clientX"in L&&a.drop(L.dataTransfer,[L.clientX,L.clientY])}),
onDragOver:L=>{L.preventDefault()},onTouchEnd:L=>{let ha=a.selectedTool.id;"pencil"!==ha&&"highlighter"!==ha||L.preventDefault()}}),[d])}function pf(a,d,m){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*m):a*d*m/(d+m*a)}function Pf(a,d,m,L=.15){return 0===L?Math.max(d,Math.min(a,m)):a<d?-pf(d-a,m-d,L)+d:a>m?+pf(a-m,m-d,L)+m:a}function qf(a,[d,m],[L,ha]){const [[na,ua],[Ha,Ua]]=a;return[Pf(d,na,ua,L),Pf(m,Ha,Ua,ha)]}function Zf(a,d,m){d in a?Object.defineProperty(a,d,{value:m,enumerable:!0,configurable:!0,
writable:!0}):a[d]=m;return a}function Xg(a,d){var m=Object.keys(a);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(a);d&&(L=L.filter(function(ha){return Object.getOwnPropertyDescriptor(a,ha).enumerable}));m.push.apply(m,L)}return m}function zf(a){for(var d=1;d<arguments.length;d++){var m=null!=arguments[d]?arguments[d]:{};d%2?Xg(Object(m),!0).forEach(function(L){Zf(a,L,m[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(m)):Xg(Object(m)).forEach(function(L){Object.defineProperty(a,
L,Object.getOwnPropertyDescriptor(m,L))})}return a}function Cg(a){return a?a[0].toUpperCase()+a.slice(1):""}function wh(a=!1,d){return a&&!WE.includes(d)}function Sg(a,d="",m=!1){const L=PA[a];d=L?L[d]||d:d;return"on"+Cg(a)+Cg(d)+(wh(m,d)?"Capture":"")}function Nf(a){a=a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var m=XE.includes(a)?"capturecapture":"capture";(m=!!~a.indexOf(m))&&(a=a.replace("capture",""));return{device:a,capture:m,passive:d}}function ki(a,
d=""){const m=PA[a];return a+(m?m[d]||d:d)}function Zg(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function ti(a){return Array.from(a.touches).filter(d=>{var m,L;return d.target===a.currentTarget||(null===(m=a.currentTarget)||void 0===m?void 0:null===(L=m.contains)||void 0===L?void 0:L.call(m,d.target))})}function mh(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function mf(a,d){const m=d.clientX-a.clientX,L=d.clientY-
a.clientY;return{angle:-(180*Math.atan2(m,L))/Math.PI,distance:Math.hypot(m,L),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function ff(a){return ti(a).map(d=>d.identifier)}function vf(a,d){const [m,L]=Array.from(a.touches).filter(ha=>d.includes(ha.identifier));return mf(m,L)}function nh(a){const d=mh(a);return"touches"in a?d.identifier:d.pointerId}function hg(a){a=mh(a);return[a.clientX,a.clientY]}function li(a){let {deltaX:d,deltaY:m,deltaMode:L}=a;1===L?(d*=40,m*=40):2===L&&(d*=800,
m*=800);return[d,m]}function Kg(a,...d){return"function"===typeof a?a(...d):a}function Ah(){}function Th(...a){return 0===a.length?Ah:1===a.length?a[0]:function(){let d;for(const m of a)d=m.apply(this,arguments)||d;return d}}function pj([a,d],m){a=Math.abs(a);d=Math.abs(d);if(a>d&&a>m)return"x";if(d>a&&d>m)return"y"}function Hl(a){const [d,m]=a.overflow,[L,ha]=a._delta,[na,ua]=a._direction;if(0>d&&0<L&&0>na||0<d&&0>L&&0<na)a._movement[0]=a._movementBound[0];if(0>m&&0<ha&&0>ua||0<m&&0>ha&&0<ua)a._movement[1]=
a._movementBound[1]}function Sh(a){Kx.set(a.key,a.engine);Lx.set(a.key,a.resolver)}function Rk(a={},d){const m={};for(const [L,ha]of Object.entries(d))switch(typeof ha){case "function":m[L]=ha.call(m,a[L],L,a);break;case "object":m[L]=Rk(a[L],ha);break;case "boolean":ha&&(m[L]=a[L])}return m}function uj(a,d,m={}){const {target:L,eventOptions:ha,window:na,enabled:ua,transform:Ha}=a;var Ua=tF;if(null==a)a={};else{if(null==a)var $a={};else{$a={};var jb=Object.keys(a),mb;for(mb=0;mb<jb.length;mb++){var Kb=
jb[mb];0<=Ua.indexOf(Kb)||($a[Kb]=a[Kb])}}if(Object.getOwnPropertySymbols)for(mb=Object.getOwnPropertySymbols(a),Kb=0;Kb<mb.length;Kb++)jb=mb[Kb],0<=Ua.indexOf(jb)||Object.prototype.propertyIsEnumerable.call(a,jb)&&($a[jb]=a[jb]);a=$a}m.shared=Rk({target:L,eventOptions:ha,window:na,enabled:ua,transform:Ha},sF);if(d){var Vb=Lx.get(d);m[d]=Rk(zf({shared:m.shared},a),Vb)}else for(Vb in a)(d=Lx.get(Vb))&&(m[Vb]=Rk(zf({shared:m.shared},a[Vb]),d));return m}function oj(a,d){a.gestures.add(d);a.gestureEventStores[d]=
new XA(a,d);a.gestureTimeoutStores[d]=new uF}function ij(a,d,m,L,ha,na){if(a.has(m)&&Kx.has(L)){var ua=m+"Start",Ha=m+"End";ha[L]=Ua=>{let $a=void 0;if(Ua.first&&ua in d)d[ua](Ua);m in d&&($a=d[m](Ua));if(Ua.last&&Ha in d)d[Ha](Ua);return $a};na[L]=na[L]||{}}}function Ke(a,d={},m,L){const ha=Mx.default.useMemo(()=>new vF(a),[]);ha.applyHandlers(a,L);ha.applyConfig(d,m);Mx.default.useEffect(ha.effect.bind(ha));Mx.default.useEffect(()=>ha.clean.bind(ha),[]);if(void 0===d.target)return ha.bind.bind(ha)}
function sh(a){a.forEach(Sh);return function(d,m){m=m||{};const L={},ha={},na=new Set;for(let Kb in d)wF.test(Kb)?(na.add(RegExp.lastMatch),ha[Kb]=d[Kb]):L[Kb]=d[Kb];const [ua,Ha,Ua]=[ha,L,na];d={};ij(Ua,ua,"onDrag","drag",d,m);ij(Ua,ua,"onWheel","wheel",d,m);ij(Ua,ua,"onScroll","scroll",d,m);ij(Ua,ua,"onPinch","pinch",d,m);ij(Ua,ua,"onMove","move",d,m);ij(Ua,ua,"onHover","hover",d,m);const {handlers:$a,nativeHandlers:jb,config:mb}={handlers:d,config:m,nativeHandlers:Ha};return Ke($a,mb,void 0,jb)}}
function Ri(a,d){return sh([mF,pF,qF,rF,oF,nF])(a,d||{})}function Lj(a){const {viewport:d,inputs:m,callbacks:L}=Gc(),ha=Tv.useRef(void 0),na=Tv.useRef([0,0]),ua=Tv.useRef(0),Ha=Tv.useMemo(()=>({onWheel:Ua=>{var $a;({event:Ua}=Ua);Ua.preventDefault();const {deltaY:jb,deltaX:mb}=Ua;var Kb=0;if(Ua.ctrlKey||Ua.metaKey){Kb=Math.sign(Ua.deltaY);let xc=jb;10<Math.abs(Ua.deltaY)&&(xc=10*Kb);Kb=xc}const [Vb,Ob,kc]=[mb,jb,Kb];"pinching"===m.state||ua.current>=Ua.timeStamp||(ua.current=Ua.timeStamp,(Ua.altKey||
Ua.ctrlKey||Ua.metaKey)&&0===Ua.buttons?(Kb=d.bounds,Ua=null!=($a=m.currentScreenPoint)?$a:[Kb.width/2,Kb.height/2],$a=d.camera.zoom,d.onZoom(Ua,$a-kc/100*$a)):($a=me.mul(Ua.shiftKey&&!yb()?[Ob,0]:[Vb,Ob],.8),me.isEqual($a,[0,0])||d.panCamera($a)))},onPinchStart:({event:Ua,delta:$a,offset:jb,origin:mb})=>{var Kb;const Vb=a.current;Ua instanceof WheelEvent||!(Ua.target===Vb||null!=Vb&&Vb.contains(Ua.target))||(null==(Kb=L.onPinchStart)?void 0:Kb.call(L,{type:"canvas",order:0,delta:[...$a,jb[0]],offset:jb,
point:me.sub(mb,m.containerOffset)},Ua),ha.current=mb,na.current=[0,0])},onPinchEnd:({event:Ua,offset:$a,origin:jb})=>{var mb;const Kb=a.current;Ua instanceof WheelEvent||!(Ua.target===Kb||null!=Kb&&Kb.contains(Ua.target))||"pinching"!==m.state||(null==(mb=L.onPinchEnd)?void 0:mb.call(L,{type:"canvas",order:0,delta:[0,0,$a[0]],offset:$a,point:me.sub(jb,m.containerOffset)},Ua),na.current=[0,0])},onPinch:({event:Ua,offset:$a,origin:jb})=>{var mb,Kb=a.current;if(!(Ua instanceof WheelEvent)&&(Ua.target===
Kb||null!=Kb&&Kb.contains(Ua.target))){ha.current||(ha.current=jb);Kb=me.sub(ha.current,jb);var Vb=me.sub(Kb,na.current);null==(mb=L.onPinch)?void 0:mb.call(L,{type:"canvas",order:0,delta:[...Vb,$a[0]],offset:$a,point:me.sub(jb,m.containerOffset)},Ua);na.current=Kb}}}),[L]);Ri(Ha,{target:a,eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:fp.maxZoom,min:fp.minZoom})}})}function Yj(a,d,m,L){Nx.useLayoutEffect(()=>{a.current.style.transform=
`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,m,d.rotation]);Nx.useLayoutEffect(()=>{const ha=a.current;ha.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;ha.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);Nx.useLayoutEffect(()=>{const ha=a.current;void 0!==L&&(ha.style.zIndex=L.toString())},[L])}function Fn(a,d){const {onPersist:m,onError:L,onMount:ha,onCreateAssets:na,onCreateShapes:ua,onDeleteAssets:Ha,onDeleteShapes:Ua,onDrop:$a,
onPaste:jb,onCopy:mb,onCanvasDBClick:Kb}=d;ZA.useLayoutEffect(()=>{const Vb=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,ha&&ha(a,null),()=>{Vb.forEach(Ob=>Ob());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);ZA.useLayoutEffect(()=>{const Vb=[];m&&Vb.push(a.subscribe("persist",m));L&&Vb.push(a.subscribe("error",L));ua&&Vb.push(a.subscribe("create-shapes",ua));na&&Vb.push(a.subscribe("create-assets",na));Ua&&Vb.push(a.subscribe("delete-shapes",Ua));Ha&&Vb.push(a.subscribe("delete-assets",
Ha));$a&&Vb.push(a.subscribe("drop",$a));jb&&Vb.push(a.subscribe("paste",jb));mb&&Vb.push(a.subscribe("copy",mb));Kb&&Vb.push(a.subscribe("canvas-dbclick",Kb));return()=>Vb.forEach(Ob=>Ob())},[a,m,L])}function Zn(a){if("app"in a)return a.app;const [d]=$A.useState(()=>new RE(a.model,a.Shapes,a.Tools,a.readOnly));$A.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function Zk(a,d){xF.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function Vm(a){const d=Gc(),{viewport:{bounds:m}}=
d;yF.useEffect(()=>{const L=ua=>{ua.preventDefault()},ha=ua=>{if(0!==ua.touches.length){var Ha=ua.touches[0].pageX,Ua=ua.touches[0].radiusX||0;(10>Ha-Ua||Ha+Ua>m.width-10)&&ua.preventDefault()}},na=a.current;if(!na)return()=>{};na.addEventListener("touchstart",L,{passive:!0});na.addEventListener("gestureend",L,{passive:!0});na.addEventListener("gesturechange",L,{passive:!0});na.addEventListener("gesturestart",L,{passive:!0});na.addEventListener("touchstart",ha,{passive:!0});return()=>{na&&(na.removeEventListener("touchstart",
L),na.removeEventListener("gestureend",L),na.removeEventListener("gesturechange",L),na.removeEventListener("gesturestart",L),na.removeEventListener("touchstart",ha))}},[a,m.width])}function up(a,d){const {inputs:m,callbacks:L}=Gc();return zF.useMemo(()=>({onPointerDown:ha=>{var na,ua;const {order:Ha=0}=ha;Ha||(null==(na=ha.currentTarget)?void 0:na.setPointerCapture(ha.pointerId));na=a.props.handles[d];null==(ua=L.onPointerDown)?void 0:ua.call(L,{type:"handle",shape:a,handle:na,id:d,order:Ha},ha);
ha.order=Ha+1},onPointerMove:ha=>{var na;const {order:ua=0}=ha,Ha=a.props.handles[d];null==(na=L.onPointerMove)?void 0:na.call(L,{type:"handle",shape:a,handle:Ha,id:d,order:ua},ha);ha.order=ua+1},onPointerUp:ha=>{var na,ua;const {order:Ha=0}=ha;Ha||(null==(na=ha.currentTarget)?void 0:na.releasePointerCapture(ha.pointerId));na=a.props.handles[d];null==(ua=L.onPointerUp)?void 0:ua.call(L,{type:"handle",shape:a,handle:na,id:d,order:Ha},ha);ha.order=Ha+1},onPointerEnter:ha=>{var na;const {order:ua=0}=
ha,Ha=a.props.handles[d];null==(na=L.onPointerEnter)?void 0:na.call(L,{type:"handle",shape:a,handle:Ha,id:d,order:ua},ha);ha.order=ua+1},onPointerLeave:ha=>{var na;const {order:ua=0}=ha,Ha=a.props.handles[d];null==(na=L.onPointerLeave)?void 0:na.call(L,{type:"handle",shape:a,handle:Ha,id:d,order:ua},ha);ha.order=ua+1},onKeyUp:ha=>{var na;const ua=a.props.handles[d];null==(na=L.onKeyUp)?void 0:na.call(L,{type:"handle",shape:a,handle:ua,id:d,order:-1},ha)},onKeyDown:ha=>{var na;const ua=a.props.handles[d];
null==(na=L.onKeyDown)?void 0:na.call(L,{type:"handle",shape:a,handle:ua,id:d,order:-1},ha)}}),[a.id,m,L])}function sk(a,d,m=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${m?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Il(a,d,m=0){AF.useEffect(()=>{const L=a.current;L&&(L.style.cursor=
BF[d](cm.radiansToDegrees(m)))},[d,m])}function Tk(a){const {viewport:d}=Gc(),m=Ie();CF.useLayoutEffect(()=>Id(()=>{const L=Dg(()=>{var ha;null==(ha=a.current)?void 0:ha.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==m.inputs.state&&null!=d.camera.zoom&&L()}),[])}function Gn(a,d=0){const [m,L]=(0,aB.useState)(a);(0,aB.useEffect)(()=>{let ha=!1;const na=setTimeout(()=>{ha||L(a)},d);return()=>{ha=!0;clearTimeout(na)}},[a,d]);return m}function fm(){const a=Ie();bB.useEffect(()=>
{de(()=>qe({},a.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);bB.useEffect(()=>{var d;const m=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");m?a.viewport.update(m):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function Wm(a){a()}function Dk(a){return zd(Of(a,void 0))}function Xm(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,
cleanAt:Date.now()+EF}}function Ch(a){var d=new Map,m=1,L=new a(function(ha){var na=d.get(ha);na&&(na.reaction.dispose(),d.delete(ha))});return{addReactionToTrack:function(ha,na,ua){var Ha=m++;L.register(ua,Ha,ha);ha.current=Xm(na);ha.current.finalizationRegistryCleanupToken=Ha;d.set(Ha,ha.current);return ha.current},recordReactionAsCommitted:function(ha){L.unregister(ha);ha.current&&ha.current.finalizationRegistryCleanupToken&&d.delete(ha.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function Am(){function a(){void 0===L&&(L=setTimeout(d,1E4))}function d(){L=void 0;var ha=Date.now();m.forEach(function(na){var ua=na.current;ua&&ha>=ua.cleanAt&&(ua.reaction.dispose(),na.current=null,m.delete(na))});0<m.size&&a()}var m=new Set,L;return{addReactionToTrack:function(ha,na,ua){ha.current=Xm(na);m.add(ha);a();return ha.current},recordReactionAsCommitted:function(ha){m.delete(ha)},forceCleanupTimerToRunNowForTests:function(){L&&(clearTimeout(L),
d())},resetCleanupScheduleForTests:function(){var ha;if(0<m.size){try{for(var na=FF(m),ua=na.next();!ua.done;ua=na.next()){var Ha=ua.value,Ua=Ha.current;Ua&&(Ua.reaction.dispose(),Ha.current=null)}}catch(jb){var $a={error:jb}}finally{try{ua&&!ua.done&&(ha=na.return)&&ha.call(na)}finally{if($a)throw $a.error;}}m.clear()}L&&(clearTimeout(L),L=void 0)}}}function hi(){return new IF}function Tj(a,d){void 0===d&&(d="observed");var m=eB(Ru.default.useState(hi),1)[0],L=eB(Ru.default.useState(),2)[1],ha=Ru.default.useRef(null);
if(!ha.current)var na=new zt("observer".concat(d),function(){ua.mounted?L([]):ua.changedBeforeMount=!0}),ua=GF(ha,na,m);m=ha.current.reaction;Ru.default.useDebugValue(m,Dk);Ru.default.useEffect(function(){HF(ha);ha.current?(ha.current.mounted=!0,ha.current.changedBeforeMount&&(ha.current.changedBeforeMount=!1,L([]))):(ha.current={reaction:new zt("observer".concat(d),function(){L([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},L([]));return function(){ha.current.reaction.dispose();ha.current=
null}},[]);var Ha,Ua;m.track(function(){try{Ha=a()}catch($a){Ua=$a}});if(Ua)throw Ua;return Ha}function If(a,d){var m;if(hB&&a.$$typeof===hB)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(m=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==m?m:!1;var L=a,ha=a.displayName||a.name;if(gB&&a.$$typeof===gB&&(d=!0,L=a.render,"function"!==typeof L))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
m=function(na,ua){return Tj(function(){return L(na,ua)},ha)};""!==ha&&(m.displayName=ha);a.contextTypes&&(m.contextTypes=a.contextTypes);d&&(m=(0,It.forwardRef)(m));m=(0,It.memo)(m);vj(a,m);return m}function vj(a,d){Object.keys(a).forEach(function(m){JF[m]||Object.defineProperty(d,m,Object.getOwnPropertyDescriptor(a,m))})}function Zj(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:Tj(a)}function Hn(a){const d=Ie(),{callbacks:m}=Gc(),L=iB.useRef(!1);iB.useEffect(()=>{const ha=Ua=>
{var $a,jb;if(null==($a=a.current)?0:$a.contains(document.activeElement))null==(jb=m.onKeyDown)?void 0:jb.call(m,{type:"canvas",order:-1},Ua),L.current=Ua.shiftKey},na=Ua=>{var $a,jb;if(null==($a=a.current)?0:$a.contains(document.activeElement))null==(jb=m.onKeyUp)?void 0:jb.call(m,{type:"canvas",order:-1},Ua),L.current=Ua.shiftKey},ua=Ua=>{var $a,jb,mb;!d.editingShape&&(null==($a=a.current)?0:$a.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(mb=null==(jb=document.activeElement)?
void 0:jb.tagName)?mb:"")&&(Ua.preventDefault(),d.paste(Ua,L.current))},Ha=Ua=>{var $a,jb,mb;!d.editingShape&&0<d.selectedShapes.size&&(null==($a=a.current)?0:$a.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(mb=null==(jb=document.activeElement)?void 0:jb.tagName)?mb:"")&&(Ua.preventDefault(),d.copy())};window.addEventListener("keydown",ha);window.addEventListener("keyup",na);document.addEventListener("paste",ua);document.addEventListener("copy",Ha);return()=>{window.removeEventListener("keydown",
ha);window.removeEventListener("keyup",na);document.removeEventListener("paste",ua);document.removeEventListener("copy",Ha)}},[])}function Jl(a){const d=Ie(),{inputs:m,callbacks:L}=Gc(),ha=nB.useRef(-1);return nB.useMemo(()=>({onPointerDown:na=>{var ua,Ha;if(!d.settings.penMode||"pen"===na.pointerType&&na.isPrimary){var {order:Ua=0}=na;Ua||(null==(ua=na.currentTarget)?void 0:ua.setPointerCapture(na.pointerId));null==(Ha=L.onPointerDown)?void 0:Ha.call(L,{type:"shape",shape:a,order:Ua},na);na.order=
Ua+1}},onPointerMove:na=>{var ua;if(!d.settings.penMode||"pen"===na.pointerType&&na.isPrimary){var {order:Ha=0}=na;null==(ua=L.onPointerMove)?void 0:ua.call(L,{type:"shape",shape:a,order:Ha},na);na.order=Ha+1}},onPointerUp:na=>{var ua,Ha,Ua;if(!d.settings.penMode||"pen"===na.pointerType&&na.isPrimary){var {order:$a=0}=na;$a||(null==(ua=na.currentTarget)?void 0:ua.releasePointerCapture(na.pointerId));null==(Ha=L.onPointerUp)?void 0:Ha.call(L,{type:"shape",shape:a,order:$a},na);ua=Date.now();Ha=ua-
ha.current;300<Ha?ha.current=ua:300>=Ha&&(null==(Ua=L.onDoubleClick)?void 0:Ua.call(L,{type:"shape",shape:a,order:$a},na),ha.current=-1);na.order=$a+1}},onPointerEnter:na=>{var ua;if(!d.settings.penMode||"pen"===na.pointerType&&na.isPrimary){var {order:Ha=0}=na;null==(ua=L.onPointerEnter)?void 0:ua.call(L,{type:"shape",shape:a,order:Ha},na);na.order=Ha+1}},onPointerLeave:na=>{var ua;if(!d.settings.penMode||"pen"===na.pointerType&&na.isPrimary){var {order:Ha=0}=na;null==(ua=L.onPointerLeave)?void 0:
ua.call(L,{type:"shape",shape:a,order:Ha},na);na.order=Ha+1}},onKeyUp:na=>{var ua;null==(ua=L.onKeyUp)?void 0:ua.call(L,{type:"shape",shape:a,order:-1},na)},onKeyDown:na=>{var ua;null==(ua=L.onKeyDown)?void 0:ua.call(L,{type:"shape",shape:a,order:-1},na)}}),[a.id,m,L])}function sn(a){var {viewport:d,inputs:m,callbacks:L,components:ha}=a;a=bg(a,["viewport","inputs","callbacks","components"]);return(0,FB.jsx)(cG,{id:a.id,viewport:d,inputs:m,callbacks:L,components:ha,meta:a.meta,children:(0,FB.jsx)(ZF,
qe({},a))})}function nf(){nf=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var m=arguments[d],L;for(L in m)Object.prototype.hasOwnProperty.call(m,L)&&(a[L]=m[L])}return a};return nf.apply(this,arguments)}function xg(a,d,{checkForDefaultPrevented:m=!0}={}){return function(L){null===a||void 0===a||a(L);if(!1===m||!L.defaultPrevented)return null===d||void 0===d?void 0:d(L)}}function ih(...a){return d=>a.forEach(m=>{"function"===typeof m?m(d):null!==m&&void 0!==m&&
(m.current=d)})}function Uh(...a){return(0,hG.useCallback)(ih(...a),a)}function jj(a,d=[]){let m=[];const L=()=>{const ha=m.map(na=>(0,Ms.createContext)(na));return function(na){const ua=(null===na||void 0===na?void 0:na[a])||ha;return(0,Ms.useMemo)(()=>({[`__scope${a}`]:Cf(qe({},na),{[a]:ua})}),[na,ua])}};L.scopeName=a;return[function(ha,na){function ua($a){const {scope:jb,children:mb}=$a,Kb=bg($a,["scope","children"]);$a=(null===jb||void 0===jb?void 0:jb[a][Ua])||Ha;const Vb=(0,Ms.useMemo)(()=>
Kb,Object.values(Kb));return(0,Ms.createElement)($a.Provider,{value:Vb},mb)}const Ha=(0,Ms.createContext)(na),Ua=m.length;m=[...m,na];ua.displayName=ha+"Provider";return[ua,function($a,jb){if(jb=(0,Ms.useContext)((null===jb||void 0===jb?void 0:jb[a][Ua])||Ha))return jb;if(void 0!==na)return na;throw Error(`\`${$a}\` must be used within \`${ha}\``);}]},ql(L,...d)]}function ql(...a){const d=a[0];if(1===a.length)return d;const m=()=>{const L=a.map(ha=>({useScope:ha(),scopeName:ha.scopeName}));return function(ha){const na=
L.reduce((ua,{useScope:Ha,scopeName:Ua})=>{Ha=Ha(ha)[`__scope${Ua}`];return qe(qe({},ua),Ha)},{});return(0,Ms.useMemo)(()=>({[`__scope${d.scopeName}`]:na}),[na])}};m.scopeName=d.scopeName;return m}function Yg(a){return(0,en.isValidElement)(a)&&a.type===GB}function rl(a,d){const m=qe({},d);for(const L in d){const ha=a[L],na=d[L];/^on[A-Z]/.test(L)?ha&&na?m[L]=(...ua)=>{na(...ua);ha(...ua)}:ha&&(m[L]=ha):"style"===L?m[L]=qe(qe({},ha),na):"className"===L&&(m[L]=[ha,na].filter(Boolean).join(" "))}return qe(qe({},
a),m)}function $k(a,d){a&&(0,iG.flushSync)(()=>a.dispatchEvent(d))}function gj(a){const d=(0,Yx.useRef)(a);(0,Yx.useEffect)(()=>{d.current=a});return(0,Yx.useMemo)(()=>(...m)=>{var L;return null===(L=d.current)||void 0===L?void 0:L.call(d,...m)},[])}function Uk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=gj(a);(0,jG.useEffect)(()=>{const L=ha=>{"Escape"===ha.key&&m(ha)};d.addEventListener("keydown",L);return()=>d.removeEventListener("keydown",L)},[m,d])}function Kj(a,
d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=gj(a),L=(0,ao.useRef)(!1),ha=(0,ao.useRef)(()=>{});(0,ao.useEffect)(()=>{const na=Ha=>{if(Ha.target&&!L.current){let Ua=function(){al("dismissableLayer.pointerDownOutside",m,$a,{discrete:!0})};const $a={originalEvent:Ha};"touch"===Ha.pointerType?(d.removeEventListener("click",ha.current),ha.current=Ua,d.addEventListener("click",ha.current,{once:!0})):Ua()}L.current=!1},ua=window.setTimeout(()=>{d.addEventListener("pointerdown",
na)},0);return()=>{window.clearTimeout(ua);d.removeEventListener("pointerdown",na);d.removeEventListener("click",ha.current)}},[d,m]);return{onPointerDownCapture:()=>L.current=!0}}function Jj(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=gj(a),L=(0,ao.useRef)(!1);(0,ao.useEffect)(()=>{const ha=na=>{na.target&&!L.current&&al("dismissableLayer.focusOutside",m,{originalEvent:na},{discrete:!1})};d.addEventListener("focusin",ha);return()=>d.removeEventListener("focusin",
ha)},[d,m]);return{onFocusCapture:()=>L.current=!0,onBlurCapture:()=>L.current=!1}}function nl(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function al(a,d,m,{discrete:L}){const ha=m.originalEvent.target;m=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:m});d&&ha.addEventListener(a,d,{once:!0});L?$k(ha,m):ha.dispatchEvent(m)}function xi(a){const [d,m]=IB.useState(mG());Im(()=>{a||m(L=>null!==L&&void 0!==L?L:String(nG++))},[a]);return a||(d?`radix-${d}`:"")}function Yi(a){return a.split("-")[0]}
function ol(a){return["top","bottom"].includes(Yi(a))?"x":"y"}function bl(a){return"y"===a?"height":"width"}function xj(a,d,m){let {reference:L,floating:ha}=a;var na=L.x+L.width/2-ha.width/2;const ua=L.y+L.height/2-ha.height/2;a=ol(d);var Ha=bl(a);Ha=L[Ha]/2-ha[Ha]/2;const Ua="x"===a;switch(Yi(d)){case "top":na={x:na,y:L.y-ha.height};break;case "bottom":na={x:na,y:L.y+L.height};break;case "right":na={x:L.x+L.width,y:ua};break;case "left":na={x:L.x-ha.width,y:ua};break;default:na={x:L.x,y:L.y}}switch(d.split("-")[1]){case "start":na[a]-=
Ha*(m&&Ua?-1:1);break;case "end":na[a]+=Ha*(m&&Ua?-1:1)}return na}function im(a){return"number"!=typeof a?qe({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function Bm(a){return Cf(qe({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function Sk(a,d){return ui(this,null,function*(){var m;void 0===d&&(d={});const {x:L,y:ha,platform:na,rects:ua,elements:Ha,strategy:Ua}=a,{boundary:$a="clippingAncestors",rootBoundary:jb="viewport",elementContext:mb="floating",altBoundary:Kb=
!1,padding:Vb=0}=d,Ob=im(Vb),kc=Ha[Kb?"floating"===mb?"reference":"floating":mb],xc=Bm(yield na.getClippingRect({element:null==(m=yield null==na.isElement?void 0:na.isElement(kc))||m?kc:kc.contextElement||(yield null==na.getDocumentElement?void 0:na.getDocumentElement(Ha.floating)),boundary:$a,rootBoundary:jb,strategy:Ua}));m=Bm(na.convertOffsetParentRelativeRectToViewportRelativeRect?yield na.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===mb?Cf(qe({},ua.floating),{x:L,y:ha}):
ua.reference,offsetParent:yield null==na.getOffsetParent?void 0:na.getOffsetParent(Ha.floating),strategy:Ua}):ua[mb]);return{top:xc.top-m.top+Ob.top,bottom:m.bottom-xc.bottom+Ob.bottom,left:xc.left-m.left+Ob.left,right:m.right-xc.right+Ob.right}})}function Ym(a){return a.replace(/left|right|bottom|top/g,d=>pG[d])}function Jn(a,d,m){void 0===m&&(m=!1);const L=a.split("-")[1],ha=ol(a);a=bl(ha);m="x"===ha?L===(m?"end":"start")?"right":"left":"start"===L?"bottom":"top";return d.reference[a]>d.floating[a]&&
(m=Ym(m)),{main:m,cross:Ym(m)}}function hm(a){return a.replace(/start|end/g,d=>qG[d])}function Xb(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function Sa(a){return KB.some(d=>0<=a[d])}function Bc(a){return null==a?window:a&&a.document&&a.location&&a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function Ac(a){return Bc(a).getComputedStyle(a)}function Yb(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||
"").toLowerCase():""}function wc(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function rc(a){return a instanceof Bc(a).HTMLElement}function Tb(a){return a instanceof Bc(a).Element}function Sb(a){return"undefined"==typeof ShadowRoot?!1:a instanceof Bc(a).ShadowRoot||a instanceof ShadowRoot}function mc(a){const {overflow:d,overflowX:m,overflowY:L}=Ac(a);return/auto|scroll|overlay|hidden/.test(d+L+m)}function Tc(a){const d=
/firefox/i.test(wc());a=Ac(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function ad(){return!/^((?!chrome|android).)*safari/i.test(wc())}function fd(a,d,m){var L,ha,na,ua;void 0===d&&(d=!1);void 0===m&&(m=!1);var Ha=a.getBoundingClientRect();let Ua=1,$a=1;d&&rc(a)&&(Ua=0<a.offsetWidth&&aw(Ha.width)/a.offsetWidth||1,$a=0<a.offsetHeight&&aw(Ha.height)/a.offsetHeight||
1);a=Tb(a)?Bc(a):window;d=!ad()&&m;m=(Ha.left+(d&&null!=(L=null==(ha=a.visualViewport)?void 0:ha.offsetLeft)?L:0))/Ua;L=(Ha.top+(d&&null!=(na=null==(ua=a.visualViewport)?void 0:ua.offsetTop)?na:0))/$a;na=Ha.width/Ua;Ha=Ha.height/$a;return{width:na,height:Ha,top:L,right:m+na,bottom:L+Ha,left:m,x:m,y:L}}function xd(a){return(d=a,(d instanceof Bc(d).Node?a.ownerDocument:a.document)||window.document).documentElement;var d}function je(a){return Tb(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,
scrollTop:a.pageYOffset}}function Qe(a){return fd(xd(a)).left+je(a).scrollLeft}function ue(a){return"html"===Yb(a)?a:a.assignedSlot||a.parentNode||(Sb(a)?a.host:null)||xd(a)}function Ee(a){return rc(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}function Kf(a){for(var d=Bc(a),m=Ee(a);m&&["table","td","th"].includes(Yb(m))&&"static"===getComputedStyle(m).position;)m=Ee(m);if(!m||"html"!==Yb(m)&&("body"!==Yb(m)||"static"!==getComputedStyle(m).position||Tc(m))){if(!m)a:{a=ue(a);for(Sb(a)&&
(a=a.host);rc(a)&&!["html","body"].includes(Yb(a));){if(Tc(a)){m=a;break a}a=a.parentNode}m=null}d=m||d}return d}function Wf(a){if(rc(a))return{width:a.offsetWidth,height:a.offsetHeight};a=fd(a);return{width:a.width,height:a.height}}function Ge(a){const d=ue(a);return["html","body","#document"].includes(Yb(d))?a.ownerDocument.body:rc(d)&&mc(d)?d:Ge(d)}function bh(a,d){var m;void 0===d&&(d=[]);var L=Ge(a);a=L===(null==(m=a.ownerDocument)?void 0:m.body);m=Bc(L);L=a?[m].concat(m.visualViewport||[],mc(L)?
L:[]):L;d=d.concat(L);return a?d:d.concat(bh(L))}function Bh(a,d,m){return"viewport"===d?Bm(function(L,ha){var na=Bc(L),ua=xd(L);na=na.visualViewport;L=ua.clientWidth;ua=ua.clientHeight;let Ha=0,Ua=0;if(na){L=na.width;ua=na.height;const $a=ad();($a||!$a&&"fixed"===ha)&&(Ha=na.offsetLeft,Ua=na.offsetTop)}return{width:L,height:ua,x:Ha,y:Ua}}(a,m)):Tb(d)?function(L,ha){var na=fd(L,!1,"fixed"===ha);ha=na.top+L.clientTop;na=na.left+L.clientLeft;return{top:ha,left:na,x:na,y:ha,right:na+L.clientWidth,bottom:ha+
L.clientHeight,width:L.clientWidth,height:L.clientHeight}}(d,m):Bm(function(L){var ha;const na=xd(L);var ua=je(L);const Ha=null==(ha=L.ownerDocument)?void 0:ha.body;ha=Tu(na.scrollWidth,na.clientWidth,Ha?Ha.scrollWidth:0,Ha?Ha.clientWidth:0);const Ua=Tu(na.scrollHeight,na.clientHeight,Ha?Ha.scrollHeight:0,Ha?Ha.clientHeight:0);L=-ua.scrollLeft+Qe(L);ua=-ua.scrollTop;return"rtl"===Ac(Ha||na).direction&&(L+=Tu(na.clientWidth,Ha?Ha.clientWidth:0)-ha),{width:ha,height:Ua,x:L,y:ua}}(xd(a)))}function zg(a){const d=
bh(a),m=["absolute","fixed"].includes(Ac(a).position)&&rc(a)?Kf(a):a;return Tb(m)?d.filter(L=>{var ha;if(ha=Tb(L))a:if(ha=null==m.getRootNode?void 0:m.getRootNode(),L.contains(m))ha=!0;else{if(ha&&Sb(ha)){ha=m;do{if(ha&&L===ha){ha=!0;break a}ha=ha.parentNode||ha.host}while(ha)}ha=!1}return ha&&"body"!==Yb(L)}):[]}function Ag(a,d,m,L){void 0===L&&(L={});const {ancestorScroll:ha=!0,ancestorResize:na=!0,elementResize:ua=!0,animationFrame:Ha=!1}=L,Ua=ha&&!Ha,$a=na&&!Ha,jb=Ua||$a?[...(Tb(a)?bh(a):[]),
...bh(d)]:[];jb.forEach(Ob=>{Ua&&Ob.addEventListener("scroll",m,{passive:!0});$a&&Ob.addEventListener("resize",m)});let mb,Kb=null;if(ua){let Ob=!0;Kb=new ResizeObserver(()=>{Ob||m();Ob=!1});Tb(a)&&!Ha&&Kb.observe(a);Kb.observe(d)}let Vb=Ha?fd(a):null;return Ha&&function kc(){const xc=fd(a);!Vb||xc.x===Vb.x&&xc.y===Vb.y&&xc.width===Vb.width&&xc.height===Vb.height||m();Vb=xc;mb=requestAnimationFrame(kc)}(),m(),()=>{var kc;jb.forEach(xc=>{Ua&&xc.removeEventListener("scroll",m);$a&&xc.removeEventListener("resize",
m)});null==(kc=Kb)||kc.disconnect();Kb=null;Ha&&cancelAnimationFrame(mb)}}function th(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let m,L;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var ha=a.length;if(ha!=d.length)return!1;for(m=ha;0!==m--;)if(!th(a[m],d[m]))return!1;return!0}L=Object.keys(a);ha=L.length;if(ha!==Object.keys(d).length)return!1;for(m=ha;0!==m--;)if(!Object.prototype.hasOwnProperty.call(d,L[m]))return!1;
for(m=ha;0!==m--;)if(ha=L[m],!("_owner"===ha&&a.$$typeof||th(a[ha],d[ha])))return!1;return!0}return a!==a&&d!==d}function Jh(a){const d=Fo.useRef(a);ay(()=>{d.current=a});return d}function Eg(a){let {middleware:d,placement:m="bottom",strategy:L="absolute",whileElementsMounted:ha}=void 0===a?{}:a;const na=Fo.useRef(null),ua=Fo.useRef(null),Ha=Jh(ha),Ua=Fo.useRef(null),[$a,jb]=Fo.useState({x:null,y:null,strategy:L,placement:m,middlewareData:{}}),[mb,Kb]=Fo.useState(d);th(null==mb?void 0:mb.map(lc=>
{({options:lc}=lc);return lc}),null==d?void 0:d.map(lc=>{({options:lc}=lc);return lc}))||Kb(d);const Vb=Fo.useCallback(()=>{na.current&&ua.current&&tG(na.current,ua.current,{middleware:mb,placement:m,strategy:L}).then(lc=>{Ob.current&&uG.flushSync(()=>{jb(lc)})})},[mb,m,L]);ay(()=>{Ob.current&&Vb()},[Vb]);const Ob=Fo.useRef(!1);ay(()=>{Ob.current=!0;return()=>{Ob.current=!1}},[]);const kc=Fo.useCallback(()=>{"function"===typeof Ua.current&&(Ua.current(),Ua.current=null);if(na.current&&ua.current)if(Ha.current){const lc=
Ha.current(na.current,ua.current,Vb);Ua.current=lc}else Vb()},[Vb,Ha]),xc=Fo.useCallback(lc=>{na.current=lc;kc()},[kc]),$b=Fo.useCallback(lc=>{ua.current=lc;kc()},[kc]),pc=Fo.useMemo(()=>({reference:na,floating:ua}),[]);return Fo.useMemo(()=>Cf(qe({},$a),{update:Vb,refs:pc,reference:xc,floating:$b}),[$a,Vb,pc,xc,$b])}function vi(a){const [d,m]=(0,wG.useState)(void 0);Im(()=>{if(a){m({width:a.offsetWidth,height:a.offsetHeight});const L=new ResizeObserver(ha=>{if(Array.isArray(ha)&&ha.length){ha=ha[0];
if("borderBoxSize"in ha){ha=ha.borderBoxSize;var na=Array.isArray(ha)?ha[0]:ha;ha=na.inlineSize;na=na.blockSize}else ha=a.offsetWidth,na=a.offsetHeight;m({width:ha,height:na})}});L.observe(a,{box:"border-box"});return()=>L.unobserve(a)}m(void 0)},[a]);return d}function ik(a){return void 0!==a}function Lg(a){return null!==a}function Zi(a){const [d,m="center"]=a.split("-");return[d,m]}function jm(a,d){return(0,Mq.useReducer)((m,L)=>{L=d[m][L];return null!==L&&void 0!==L?L:m},a)}function jh(a){const [d,
m]=(0,Mq.useState)(),L=(0,Mq.useRef)({}),ha=(0,Mq.useRef)(a),na=(0,Mq.useRef)("none"),[ua,Ha]=jm(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Mq.useEffect)(()=>{const Ua=kj(L.current);na.current="mounted"===ua?Ua:"none"},[ua]);Im(()=>{const Ua=L.current,$a=ha.current;if($a!==a){const jb=na.current,mb=kj(Ua);a?Ha("MOUNT"):"none"===mb||"none"===(null===Ua||void 0===
Ua?void 0:Ua.display)?Ha("UNMOUNT"):$a&&jb!==mb?Ha("ANIMATION_OUT"):Ha("UNMOUNT");ha.current=a}},[a,Ha]);Im(()=>{if(d){const Ua=jb=>{const mb=kj(L.current).includes(jb.animationName);jb.target===d&&mb&&(0,GG.flushSync)(()=>Ha("ANIMATION_END"))},$a=jb=>{jb.target===d&&(na.current=kj(L.current))};d.addEventListener("animationstart",$a);d.addEventListener("animationcancel",Ua);d.addEventListener("animationend",Ua);return()=>{d.removeEventListener("animationstart",$a);d.removeEventListener("animationcancel",
Ua);d.removeEventListener("animationend",Ua)}}Ha("ANIMATION_END")},[d,Ha]);return{isPresent:["mounted","unmountSuspended"].includes(ua),ref:(0,Mq.useCallback)(Ua=>{Ua&&(L.current=getComputedStyle(Ua));m(Ua)},[])}}function kj(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}function mi({prop:a,defaultProp:d,onChange:m=()=>{}}){const [L,ha]=Kl({defaultProp:d,onChange:m}),na=void 0!==a;d=na?a:L;const ua=gj(m);m=(0,bw.useCallback)(Ha=>{na?(Ha="function"===typeof Ha?Ha(a):Ha,Ha!==a&&ua(Ha)):
ha(Ha)},[na,a,ha,ua]);return[d,m]}function Kl({defaultProp:a,onChange:d}){a=(0,bw.useState)(a);const [m]=a,L=(0,bw.useRef)(m),ha=gj(d);(0,bw.useEffect)(()=>{L.current!==m&&(ha(m),L.current=m)},[m,L,ha]);return a}function um(a,d){const m=Math.abs(d.top-a.y),L=Math.abs(d.bottom-a.y),ha=Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(m,L,ha,a)){case a:return"left";case ha:return"right";case m:return"top";case L:return"bottom";default:return null}}function Yh(a){a=a.slice();a.sort((d,m)=>
d.x<m.x?-1:d.x>m.x?1:d.y<m.y?-1:d.y>m.y?1:0);return gk(a)}function gk(a){if(1>=a.length)return a.slice();const d=[];for(var m=0;m<a.length;m++){for(var L=a[m];2<=d.length;){var ha=d[d.length-1],na=d[d.length-2];if((ha.x-na.x)*(L.y-na.y)>=(ha.y-na.y)*(L.x-na.x))d.pop();else break}d.push(L)}d.pop();m=[];for(L=a.length-1;0<=L;L--){for(ha=a[L];2<=m.length;){na=m[m.length-1];const ua=m[m.length-2];if((na.x-ua.x)*(ha.y-ua.y)>=(na.y-ua.y)*(ha.x-ua.x))m.pop();else break}m.push(ha)}m.pop();return 1===d.length&&
1===m.length&&d[0].x===m[0].x&&d[0].y===m[0].y?d:d.concat(m)}function fk(a){var {side:d,content:m,sideOffset:L=10}=a;a=bg(a,["side","content","sideOffset"]);return m?(0,Fr.jsx)(SG,{delayDuration:300,children:(0,Fr.jsxs)(TG,{children:[(0,Fr.jsx)(UG,{asChild:!0,children:a.children}),(0,Fr.jsx)(VG,{children:(0,Fr.jsxs)(WG,Cf(qe({className:"tl-tooltip-content",sideOffset:L,side:d},a),{children:[m,(0,Fr.jsx)(XG,{className:"tl-tooltip-arrow"})]}))})]})}):(0,Fr.jsx)(Fr.Fragment,{children:a.children})}function Ug(a){var {className:d,
tooltip:m,tooltipSide:L}=a;a=bg(a,["className","tooltip","tooltipSide"]);return(0,YB.jsx)(fk,{content:m,side:L,children:(0,YB.jsx)("button",qe({className:"tl-button "+(null!=d?d:"")},a))})}function $i(a){var {toggle:d=!0,pressed:m,onPressedChange:L,className:ha,tooltip:na}=a;a=bg(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,iy.jsx)(fk,{content:na,children:(0,iy.jsx)("div",{className:"inline-block",children:(0,iy.jsx)(ZG,Cf(qe({},a),{"data-toggle":d,className:"tl-toggle-input"+
(ha?" "+ha:""),pressed:m,onPressedChange:L}))})})}function gl(a){var d=a+"CollectionProvider";const [m,L]=jj(d),[ha,na]=m(d,{collectionRef:{current:null},itemMap:new Map}),ua=jb=>{const {scope:mb,children:Kb}=jb;jb=jq.default.useRef(null);const Vb=jq.default.useRef(new Map).current;return jq.default.createElement(ha,{scope:mb,itemMap:Vb,collectionRef:jb},Kb)};Object.assign(ua,{displayName:d});const Ha=a+"CollectionSlot";d=jq.default.forwardRef((jb,mb)=>{const {scope:Kb,children:Vb}=jb;jb=na(Ha,Kb);
mb=Uh(mb,jb.collectionRef);return jq.default.createElement(iq,{ref:mb},Vb)});Object.assign(d,{displayName:Ha});const Ua=a+"CollectionItemSlot",$a=jq.default.forwardRef((jb,mb)=>{const {scope:Kb,children:Vb}=jb,Ob=bg(jb,["scope","children"]),kc=jq.default.useRef(null);jb=Uh(mb,kc);const xc=na(Ua,Kb);jq.default.useEffect(()=>{xc.itemMap.set(kc,qe({ref:kc},Ob));return()=>void xc.itemMap.delete(kc)});return jq.default.createElement(iq,{["data-radix-collection-item"]:"",ref:jb},Vb)});Object.assign($a,
{displayName:Ua});return[{Provider:ua,Slot:d,ItemSlot:$a},function(jb){const mb=na(a+"CollectionConsumer",jb);return jq.default.useCallback(()=>{const Kb=mb.collectionRef.current;if(!Kb)return[];const Vb=Array.from(Kb.querySelectorAll("[data-radix-collection-item]"));return Array.from(mb.itemMap.values()).sort((Ob,kc)=>Vb.indexOf(Ob.ref.current)-Vb.indexOf(kc.ref.current))},[mb.collectionRef,mb.itemMap])},L]}function Wn(a){const d=(0,aC.useContext)($G);return a||d||"ltr"}function Pi(){(0,aH.useEffect)(()=>
{var a,d;const m=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=m[0])&&void 0!==a?a:jn());document.body.insertAdjacentElement("beforeend",null!==(d=m[1])&&void 0!==d?d:jn());jy++;return()=>{1===jy&&document.querySelectorAll("[data-radix-focus-guard]").forEach(L=>L.remove());jy--}},[])}function jn(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";
return a}function Bk(a,{select:d=!1}={}){const m=document.activeElement;for(const L of a)if(Ck(L,{select:d}),document.activeElement!==m)break}function Mj(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:m=>{const L="INPUT"===m.tagName&&"hidden"===m.type;return m.disabled||m.hidden||L?NodeFilter.FILTER_SKIP:0<=m.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function jk(a,d){for(const m of a)if(!qk(m,{upTo:d}))return m}
function qk(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Ck(a,{select:d=!1}={}){if(a&&a.focus){const m=document.activeElement;a.focus({preventScroll:!0});a!==m&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function Nk(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function rp(a){return a.filter(d=>"A"!==d.tagName)}function lo(a,d,m){a=
a.key;m="rtl"!==m?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(m))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(m))return hH[m]}function An(a){const d=document.activeElement;for(const m of a){if(m===d)break;m.focus();if(document.activeElement!==d)break}}function Fh(a,d){return a.map((m,L)=>a[(d+L)%a.length])}function Wi(a,d){var m=(0,lH.useState)(function(){return{value:a,callback:d,facade:{get current(){return m.value},
set current(L){var ha=m.value;ha!==L&&(m.value=L,m.callback(L,ha))}}}})[0];m.callback=d;return m.facade}function Wj(a,d){return Wi(d||null,function(m){return a.forEach(function(L){"function"===typeof L?L(m):L&&(L.current=m);return L})})}function To(a){return a}function tm(a,d){void 0===d&&(d=To);var m=[],L=!1;return{read:function(){if(L)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return m.length?m[m.length-1]:a},useMedium:function(ha){var na=
d(ha,L);m.push(na);return function(){m=m.filter(function(ua){return ua!==na})}},assignSyncMedium:function(ha){for(L=!0;m.length;){var na=m;m=[];na.forEach(ha)}m={push:function(ua){return ha(ua)},filter:function(){return m}}},assignMedium:function(ha){L=!0;var na=[];if(m.length){var ua=m;m=[];ua.forEach(ha);na=m}var Ha=function(){var Ua=na;na=[];Ua.forEach(ha)};Promise.resolve().then(Ha);m={push:function(Ua){na.push(Ua);Promise.resolve().then(Ha)},filter:function(Ua){na=na.filter(Ua);return m}}}}}
function Uo(a){const d=document.activeElement;for(const m of a){if(m===d)break;m.focus();if(document.activeElement!==d)break}}function El(a,d){return a.map((m,L)=>a[(d+L)%a.length])}function Ij(a,d,m){const L=1<d.length&&Array.from(d).every(na=>na===d[0])?d[0]:d,ha=m?a.indexOf(m):-1;a=El(a,Math.max(ha,0));1===L.length&&(a=a.filter(na=>na!==m));a=a.find(na=>na.toLowerCase().startsWith(L.toLowerCase()));return a!==m?a:void 0}function xo(a){return d=>"mouse"===d.pointerType?a(d):void 0}function yo(a,
[d,m]){return Math.min(m,Math.max(d,a))}function Kn(a){const d=(0,Ey.useRef)({value:a,previous:a});return(0,Ey.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function yj(a=[],d,m){a=[...a];a[m]=d;return a.sort((L,ha)=>L-ha)}function Vi(a,d,m){return 100/(m-d)*(a-d)}function hl(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function wq(a,d){if(1===a.length)return 0;a=a.map(L=>Math.abs(L-d));
const m=Math.min(...a);return a.indexOf(m)}function Tl(a,d,m){a/=2;const L=rn([0,50],[0,a]);return(a-L(d)*m)*m}function Dm(a){return a.slice(0,-1).map((d,m)=>a[m+1]-d)}function rn(a,d){return m=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(m-a[0])}function kn(a,d){d=Math.pow(10,d);return Math.round(a*d)/d}function an(a){function d($a){return $a?(0,De.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:$a},children:(0,De.jsx)("div",{className:`w-full h-full bg-${$a}-500`})}):
(0,De.jsx)("div",{className:"tl-color-bg",children:(0,De.jsx)(Xh,{name:"color-swatch"})})}var {color:m,opacity:L,popoverSide:ha,setColor:na,setOpacity:ua}=a;a=bg(a,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:Ha}}=Mn.default.useContext(rj),Ua=Mn.default.useMemo(()=>{let $a="";return Dg(jb=>{na($a)},100,jb=>{$a=jb.target.value})},[]);return(0,De.jsx)(tg,Cf(qe({},a),{border:!0,arrow:!0,side:ha,label:(0,De.jsx)(fk,{content:Ha("whiteboard/color"),side:ha,sideOffset:14,
children:d(m)}),children:(0,De.jsxs)("div",{className:"p-1",children:[(0,De.jsx)("div",{className:"tl-color-palette",children:Object.values(hs).map($a=>(0,De.jsx)("button",{className:`tl-color-drip m-1${$a===m?" active":""}`,onClick:()=>na($a),children:d($a)},$a))}),(0,De.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,De.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${uf(m)?"":"active"}`,children:(0,De.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,De.jsx)("input",
qe({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(m)?m:"#000000",onChange:Ua,style:{opacity:uf(m)?0:1}},a))})}),(0,De.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:Ha("whiteboard/select-custom-color")})]}),ua&&(0,De.jsx)("div",{className:"mx-1 my-2",children:(0,De.jsxs)(Ho,{defaultValue:[null!=L?L:0],onValueCommit:$a=>ua($a[0]),max:1,step:.1,"aria-label":Ha("whiteboard/opacity"),className:"tl-slider-root",
children:[(0,De.jsx)(xl,{className:"tl-slider-track",children:(0,De.jsx)(bv,{className:"tl-slider-range"})}),(0,De.jsx)(vk,{className:"tl-slider-thumb"})]})})]})}))}function Qi(a,d){a&&(0,Iy.flushSync)(()=>a.dispatchEvent(d))}function mo(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=gj(a),L=(0,mk.useRef)(!1),ha=(0,mk.useRef)(()=>{});(0,mk.useEffect)(()=>{const na=Ha=>{if(Ha.target&&!L.current){let Ua=function(){vm("dismissableLayer.pointerDownOutside",m,$a,{discrete:!0})};
const $a={originalEvent:Ha};"touch"===Ha.pointerType?(d.removeEventListener("click",ha.current),ha.current=Ua,d.addEventListener("click",ha.current,{once:!0})):Ua()}L.current=!1},ua=window.setTimeout(()=>{d.addEventListener("pointerdown",na)},0);return()=>{window.clearTimeout(ua);d.removeEventListener("pointerdown",na);d.removeEventListener("click",ha.current)}},[d,m]);return{onPointerDownCapture:()=>L.current=!0}}function Ol(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=
gj(a),L=(0,mk.useRef)(!1);(0,mk.useEffect)(()=>{const ha=na=>{na.target&&!L.current&&vm("dismissableLayer.focusOutside",m,{originalEvent:na},{discrete:!1})};d.addEventListener("focusin",ha);return()=>d.removeEventListener("focusin",ha)},[d,m]);return{onFocusCapture:()=>L.current=!0,onBlurCapture:()=>L.current=!1}}function bm(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function vm(a,d,m,{discrete:L}){const ha=m.originalEvent.target;m=new CustomEvent(a,{bubbles:!1,
cancelable:!0,detail:m});d&&ha.addEventListener(a,d,{once:!0});L?Qi(ha,m):ha.dispatchEvent(m)}function Bn(a,{select:d=!1}={}){const m=document.activeElement;for(const L of a)if(Pl(L,{select:d}),document.activeElement!==m)break}function Xn(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:m=>{const L="INPUT"===m.tagName&&"hidden"===m.type;return m.disabled||m.hidden||L?NodeFilter.FILTER_SKIP:0<=m.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);
return d}function nn(a,d){for(const m of a)if(!Em(m,{upTo:d}))return m}function Em(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Pl(a,{select:d=!1}={}){if(a&&a.focus){const m=document.activeElement;a.focus({preventScroll:!0});a!==m&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function ln(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function no(a){return a.filter(d=>
"A"!==d.tagName)}function oo(a){return void 0!==a}function ph(a){return null!==a}function po(a){const [d,m="center"]=a.split("-");return[d,m]}function Ql(a){const d=gj(a),m=(0,Vf.useRef)(""),L=(0,Vf.useRef)(0);a=(0,Vf.useCallback)(na=>{na=m.current+na;d(na);(function Ua(Ha){m.current=Ha;window.clearTimeout(L.current);""!==Ha&&(L.current=window.setTimeout(()=>Ua(""),1E3))})(na)},[d]);const ha=(0,Vf.useCallback)(()=>{m.current="";window.clearTimeout(L.current)},[]);(0,Vf.useEffect)(()=>()=>window.clearTimeout(L.current),
[]);return[m,a,ha]}function Fl(a,d,m){const L=1<d.length&&Array.from(d).every(na=>na===d[0])?d[0]:d,ha=m?a.indexOf(m):-1;a=il(a,Math.max(ha,0));1===L.length&&(a=a.filter(na=>na!==m));a=a.find(na=>na.textValue.toLowerCase().startsWith(L.toLowerCase()));return a!==m?a:void 0}function il(a,d){return a.map((m,L)=>a[(d+L)%a.length])}function Rm(a){var {options:d,tooltip:m,popoverSide:L,chevron:ha=!0,value:na,onValueChange:ua}=a;a=bg(a,"options tooltip popoverSide chevron value onValueChange".split(" "));
const [Ha,Ua]=Ss.useState(!1);return(0,uh.jsx)("div",Cf(qe({},a),{className:"tl-select-input",children:(0,uh.jsxs)(ww,{open:Ha,onOpenChange:Ua,value:na,onValueChange:ua,children:[(0,uh.jsx)(fk,{content:m,side:L,children:(0,uh.jsxs)(Rr,{className:"tl-select-input-trigger",children:[(0,uh.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,uh.jsx)(JC,{})}),ha&&(0,uh.jsx)(LC,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,uh.jsx)(Xh,{name:Ha?"chevron-up":"chevron-down"})})]})}),
(0,uh.jsx)(MC,{className:"tl-select-input-portal",children:(0,uh.jsxs)(Mm,{className:"tl-select-input-content",side:L,position:"popper",sideOffset:14,align:"center",onKeyDown:$a=>$a.stopPropagation(),children:[(0,uh.jsx)(Kd,{}),(0,uh.jsx)(Uy,{className:"tl-select-input-viewport",children:d.map($a=>(0,uh.jsx)(KC,{className:"tl-select-input-select-item",value:$a.value,children:(0,uh.jsx)(fo,{children:$a.label})},$a.value))}),(0,uh.jsx)(NC,{})]})})]})}))}function Vo(a){var {scaleLevel:d,compact:m,popoverSide:L}=
a;bg(a,["scaleLevel","compact","popoverSide"]);const ha=Ie();({handlers:{t:a}}=zi.default.useContext(rj));const na=[{label:m?"XS":a("whiteboard/extra-small"),value:"xs"},{label:m?"SM":a("whiteboard/small"),value:"sm"},{label:m?"MD":a("whiteboard/medium"),value:"md"},{label:m?"LG":a("whiteboard/large"),value:"lg"},{label:m?"XL":a("whiteboard/extra-large"),value:"xl"},{label:m?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,OC.jsx)(Rm,{tooltip:a("whiteboard/scale-level"),options:na,value:d,popoverSide:L,
chevron:!m,onValueChange:ua=>{ha.api.setScaleLevel(ua)}})}function Sm(a,d){return function(m){return a(d(m))}}function qo(a,d){return d(a)}function Tm(a,d){return function(m){return a(d,m)}}function Gl(a,d){return function(){return a(d)}}function mj(a,d){d(a);return a}function nj(){for(var a=arguments.length,d=Array(a),m=0;m<a;m++)d[m]=arguments[m];return d}function ym(a){a()}function Mp(a){return function(){return a}}function xq(){for(var a=arguments.length,d=Array(a),m=0;m<a;m++)d[m]=arguments[m];
return function(){d.map(ym)}}function Ki(){}function Rh(a,d){return a(1,d)}function Lp(a,d){a(0,d)}function js(a){a(2)}function zo(a){return a(4)}function ug(a,d){return Rh(a,Tm(d,0))}function Yk(a,d){var m=a(1,function(L){m();d(L)});return m}function hh(){var a=[];return function(d,m){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(m),function(){var L=a.indexOf(m);-1<L&&a.splice(L,1)};case 0:a.slice().forEach(function(L){L(m)});break;default:throw Error("unrecognized action "+d);
}}}function rg(a){var d=a,m=hh();return function(L,ha){switch(L){case 1:ha(d);break;case 0:d=ha;break;case 4:return d}return m(L,ha)}}function mn(a){var d,m;return function(L,ha){switch(L){case 1:if(ha){if(m===ha)break;d&&d();m=ha;return d=a(1,ha)}d&&d();return Ki;case 2:d&&d();m=null;break;default:throw Error("unrecognized action "+L);}}}function Ok(a){return mj(hh(),function(d){return ug(a,d)})}function Rj(a,d){return mj(rg(d),function(m){return ug(a,m)})}function Rl(){for(var a=arguments.length,
d=Array(a),m=0;m<a;m++)d[m]=arguments[m];return function(L){return d.reduceRight(qo,L)}}function ag(a){for(var d=arguments.length,m=Array(1<d?d-1:0),L=1;L<d;L++)m[L-1]=arguments[L];var ha=Rl.apply(void 0,m);return function(na,ua){switch(na){case 1:return Rh(a,ha(ua));case 2:a(2);break;default:throw Error("unrecognized action "+na);}}}function dm(a,d){return a===d}function ni(a){void 0===a&&(a=dm);var d;return function(m){return function(L){a(d,L)||(d=L,m(L))}}}function Jg(a){return function(d){return function(m){a(m)&&
d(m)}}}function Mg(a){return function(d){return Sm(d,a)}}function Cn(a){return function(d){return function(){return d(a)}}}function kk(a,d){return function(m){return function(L){return m(d=a(d,L))}}}function Vl(a){return function(d){return function(m){0<a?a--:d(m)}}}function bn(a){var d,m;return function(L){return function(ha){d=ha;m||=setTimeout(function(){m=void 0;L(d)},a)}}}function Nj(a){var d,m;return function(L){return function(ha){d=ha;m&&clearTimeout(m);m=setTimeout(function(){L(d)},a)}}}
function fi(){for(var a=arguments.length,d=Array(a),m=0;m<a;m++)d[m]=arguments[m];var L=Array(d.length),ha=0,na=null,ua=Math.pow(2,d.length)-1;d.forEach(function(Ha,Ua){var $a=Math.pow(2,Ua);Rh(Ha,function(jb){var mb=ha;ha|=$a;L[Ua]=jb;mb!==ua&&ha===ua&&na&&(na(),na=null)})});return function(Ha){return function(Ua){var $a=function(){return Ha([Ua].concat(L))};ha===ua?$a():na=$a}}}function Wp(){for(var a=arguments.length,d=Array(a),m=0;m<a;m++)d[m]=arguments[m];return function(L,ha){switch(L){case 1:return xq.apply(void 0,
d.map(function(na){return na(1,ha)}));case 2:break;default:throw Error("unrecognized action "+L);}}}function bi(a,d){void 0===d&&(d=dm);return ag(a,ni(d))}function ak(){for(var a=hh(),d=arguments.length,m=Array(d),L=0;L<d;L++)m[L]=arguments[L];var ha=Array(m.length),na=0,ua=Math.pow(2,m.length)-1;m.forEach(function(Ha,Ua){var $a=Math.pow(2,Ua);Rh(Ha,function(jb){ha[Ua]=jb;na|=$a;na===ua&&a(0,ha)})});return function(Ha,Ua){switch(Ha){case 1:return na===ua&&Ua(ha),a(1,Ua);case 2:a(2);break;default:throw Error("unrecognized action "+
Ha);}}}function Bi(a,d,m){void 0===d&&(d=[]);m=(void 0===m?{singleton:!0}:m).singleton;return{id:Symbol(),constructor:a,dependencies:d,singleton:m}}function wp(a){var d=new Map;return function ha(L){var na=L.id,ua=L.constructor,Ha=L.dependencies;if((L=L.singleton)&&d.has(na))return d.get(na);ua=ua(Ha.map(function(Ua){return ha(Ua)}));L&&d.set(na,ua);return ua}(a)}function Wo(a,d){if(null==a)return{};var m={},L=Object.keys(a),ha;for(ha=0;ha<L.length;ha++){var na=L[ha];0<=d.indexOf(na)||(m[na]=a[na])}return m}
function xp(a,d){if(a){if("string"===typeof a)return Np(a,d);var m=Object.prototype.toString.call(a).slice(8,-1);"Object"===m&&a.constructor&&(m=a.constructor.name);if("Map"===m||"Set"===m)return Array.from(a);if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Np(a,d)}}function Np(a,d){if(null==d||d>a.length)d=a.length;for(var m=0,L=Array(d);m<d;m++)L[m]=a[m];return L}function Ao(a,d){var m="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(m)return(m=m.call(a)).next.bind(m);
if(Array.isArray(a)||(m=xp(a))||d&&a&&"number"===typeof a.length){m&&(a=m);var L=0;return function(){return L>=a.length?{done:!0}:{done:!1,value:a[L++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function sp(a,d){for(var m={},L={},ha=0,na=a.length;ha<na;)L[a[ha]]=1,ha+=1;for(var ua in d)L.hasOwnProperty(ua)||(m[ua]=d[ua]);return m}function bk(a,d,m){function L(mb,Kb){mb.propsReady&&
(0,mb.propsReady)(0,!1);for(var Vb=Ao(ua),Ob;!(Ob=Vb()).done;)Ob=Ob.value,(0,mb[d.required[Ob]])(0,Kb[Ob]);for(Vb=Ao(Ha);!(Ob=Vb()).done;)if(Ob=Ob.value,Ob in Kb)(0,mb[d.optional[Ob]])(0,Kb[Ob]);mb.propsReady&&(0,mb.propsReady)(0,!0)}function ha(mb){return Ua.reduce(function(Kb,Vb){Kb[Vb]=function(Ob){(0,mb[d.methods[Vb]])(0,Ob)};return Kb},{})}function na(mb){return $a.reduce(function(Kb,Vb){Kb[Vb]=mn(mb[d.events[Vb]]);return Kb},{})}var ua=Object.keys(d.required||{}),Ha=Object.keys(d.optional||
{}),Ua=Object.keys(d.methods||{}),$a=Object.keys(d.events||{}),jb=(0,Nl.createContext)({});return{Component:(0,Nl.forwardRef)(function(mb,Kb){var Vb=mb.children,Ob=Wo(mb,RC),kc=(0,Nl.useState)(function(){return mj(wp(a),function($b){return L($b,Ob)})})[0],xc=(0,Nl.useState)(Gl(na,kc))[0];iv(function(){for(var $b=Ao($a),pc;!(pc=$b()).done;)if(pc=pc.value,pc in Ob)(0,xc[pc])(1,Ob[pc]);return function(){Object.values(xc).map(js)}},[Ob,xc,kc]);iv(function(){L(kc,Ob)});(0,Nl.useImperativeHandle)(Kb,Mp(ha(kc)));
return(0,Nl.createElement)(jb.Provider,{value:kc},m?(0,Nl.createElement)(m,sp([].concat(ua,Ha,$a),Ob),Vb):Vb)}),usePublisher:function(mb){return(0,Nl.useCallback)(Tm(Lp,(0,Nl.useContext)(jb)[mb]),[mb])},useEmitterValue:function(mb){var Kb=(0,Nl.useContext)(jb)[mb];mb=(0,Nl.useState)(Gl(zo,Kb));var Vb=mb[0],Ob=mb[1];iv(function(){return Rh(Kb,function(kc){kc!==Vb&&Ob(Mp(kc))})},[Kb,Vb]);return Vb},useEmitter:function(mb,Kb){var Vb=(0,Nl.useContext)(jb)[mb];iv(function(){return Vb(1,Kb)},[Kb,Vb])}}}
function Mh(){return Mh=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var m=arguments[d],L;for(L in m)Object.prototype.hasOwnProperty.call(m,L)&&(a[L]=m[L])}return a},Mh.apply(this,arguments)}function wm(a,d){if(null==a)return{};var m,L,ha={},na=Object.keys(a);for(L=0;L<na.length;L++)0<=d.indexOf(m=na[L])||(ha[m]=a[m]);return ha}function Bo(a,d){(null==d||d>a.length)&&(d=a.length);for(var m=0,L=Array(d);m<d;m++)L[m]=a[m];return L}function xm(a,d){var m="undefined"!=typeof Symbol&&
a[Symbol.iterator]||a["@@iterator"];if(m)return(m=m.call(a)).next.bind(m);if(Array.isArray(a)||(m=function(ha,na){if(ha){if("string"==typeof ha)return Bo(ha,na);var ua=Object.prototype.toString.call(ha).slice(8,-1);return"Object"===ua&&ha.constructor&&(ua=ha.constructor.name),"Map"===ua||"Set"===ua?Array.from(ha):"Arguments"===ua||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ua)?Bo(ha,na):void 0}}(a))||d&&a&&"number"==typeof a.length){m&&(a=m);var L=0;return function(){return L>=a.length?{done:!0}:
{done:!1,value:a[L++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function $o(a,d){void 0===d&&(d=!0);var m=(0,Fi.useRef)(null),L=function(na){};if("undefined"!=typeof ResizeObserver){var ha=new ResizeObserver(function(na){na=na[0].target;null!==na.offsetParent&&a(na)});L=function(na){na&&d?(ha.observe(na),m.current=na):(m.current&&ha.unobserve(m.current),m.current=null)}}return{ref:m,
callbackRef:L}}function Hj(a,d){return void 0===d&&(d=!0),$o(a,d).callbackRef}function aj(a,d,m,L,ha,na,ua){return $o(function(Ha){for(var Ua=function(mb,Kb,Vb,Ob){Vb=mb.length;if(0===Vb)return null;for(var kc=[],xc=0;xc<Vb;xc++){var $b=mb.item(xc);if($b&&void 0!==$b.dataset.index){var pc=parseInt($b.dataset.index),lc=parseFloat($b.dataset.knownSize),Rc=Kb($b,"offsetHeight");if(0===Rc&&Ob("Zero-sized element, this should not happen",{child:$b},qm.ERROR),Rc!==lc)$b=kc[kc.length-1],0===kc.length||$b.size!==
Rc||$b.endIndex!==pc-1?kc.push({startIndex:pc,endIndex:pc,size:Rc}):kc[kc.length-1].endIndex++}}return kc}(Ha.children,d,0,ha),$a=Ha.parentElement;!$a.dataset.virtuosoScroller;)$a=$a.parentElement;var jb="window"===$a.firstElementChild.dataset.viewportType;L({scrollTop:Math.max(ua?ua.scrollTop:jb?window.pageYOffset||document.documentElement.scrollTop:$a.scrollTop,0),scrollHeight:ua?ua.scrollHeight:jb?document.documentElement.scrollHeight:$a.scrollHeight,viewportHeight:ua?ua.offsetHeight:jb?window.innerHeight:
$a.offsetHeight});null==na||na(function(mb,Kb,Vb){return"normal"===Kb||null!=Kb&&Kb.endsWith("px")||Vb("row-gap was not resolved to pixel value correctly",Kb,qm.WARN),"normal"===Kb?0:parseInt(null!=Kb?Kb:"0",10)}(0,getComputedStyle(Ha).rowGap,ha));null!==Ua&&a(Ua)},m)}function Ti(a,d){return Math.round(a.getBoundingClientRect()[d])}function or(a,d,m,L,ha){void 0===L&&(L=Ki);var na=(0,Fi.useRef)(null),ua=(0,Fi.useRef)(null),Ha=(0,Fi.useRef)(null),Ua=(0,Fi.useRef)(!1),$a=(0,Fi.useCallback)(function(jb){jb=
jb.target;var mb=jb===window||jb===document,Kb=mb?window.pageYOffset||document.documentElement.scrollTop:jb.scrollTop,Vb=mb?document.documentElement.scrollHeight:jb.scrollHeight,Ob=mb?window.innerHeight:jb.offsetHeight;jb=function(){a({scrollTop:Math.max(Kb,0),scrollHeight:Vb,viewportHeight:Ob})};Ua.current?(0,$t.flushSync)(jb):jb();Ua.current=!1;null!==ua.current&&(Kb===ua.current||0>=Kb||Kb===Vb-Ob)&&(ua.current=null,d(!0),Ha.current&&(clearTimeout(Ha.current),Ha.current=null))},[a,d]);return(0,Fi.useEffect)(function(){var jb=
ha||na.current;return L(ha||na.current),$a({target:jb}),jb.addEventListener("scroll",$a,{passive:!0}),function(){L(null);jb.removeEventListener("scroll",$a)}},[na,$a,m,L,ha]),{scrollerRef:na,scrollByCallback:function(jb){Ua.current=!0;na.current.scrollBy(jb)},scrollToCallback:function(jb){var mb=na.current;if(mb&&!("offsetHeight"in mb&&0===mb.offsetHeight)){var Kb,Vb,Ob,kc="smooth"===jb.behavior;if(mb===window?(Vb=Math.max(Ti(document.documentElement,"height"),document.documentElement.scrollHeight),
Kb=window.innerHeight,Ob=document.documentElement.scrollTop):(Vb=mb.scrollHeight,Kb=Ti(mb,"height"),Ob=mb.scrollTop),jb.top=Math.ceil(Math.max(Math.min(Vb-Kb,jb.top),0)),1.01>Math.abs(Kb-Vb)||jb.top===Ob)return a({scrollTop:Ob,scrollHeight:Vb,viewportHeight:Kb}),void(kc&&d(!0));kc?(ua.current=jb.top,Ha.current&&clearTimeout(Ha.current),Ha.current=setTimeout(function(){Ha.current=null;ua.current=null;d(!0)},1E3)):ua.current=null;mb.scrollTo(jb)}}}}function Xo(a,d,m,L,ha){return void 0===L&&(L=ej),
void 0===ha&&(ha=ej),{k:a,v:d,lvl:m,l:L,r:ha}}function z(a,d){if(a===ej)return ej;var m=a.k,L=a.l,ha=a.r;if(d===m){if(L===ej)return ha;if(ha===ej)return L;d=db(L);return Ic(tb(a,{k:d[0],v:d[1],l:qb(L)}))}return Ic(tb(a,d<m?{l:z(L,d)}:{r:z(ha,d)}))}function ea(a,d,m){return(void 0===m&&(m="k"),a===ej)?[-Infinity,void 0]:a[m]===d?[a.k,a.v]:a[m]<d?(d=ea(a.r,d,m),-Infinity===d[0]?[a.k,a.v]:d):ea(a.l,d,m)}function Aa(a,d,m){return a===ej?Xo(d,m,1):d===a.k?tb(a,{k:d,v:m}):Jd(Qd(tb(a,d<a.k?{l:Aa(a.l,d,m)}:
{r:Aa(a.r,d,m)})))}function za(a,d,m){if(a===ej)return[];var L=a.k,ha=a.v,na=a.r,ua=[];return L>d&&(ua=ua.concat(za(a.l,d,m))),L>=d&&L<=m&&ua.push({k:L,v:ha}),L<=m&&(ua=ua.concat(za(na,d,m))),ua}function Ia(a){return a===ej?[]:[].concat(Ia(a.l),[{k:a.k,v:a.v}],Ia(a.r))}function db(a){return a.r===ej?[a.k,a.v]:db(a.r)}function qb(a){return a.r===ej?a.l:Ic(tb(a,{r:qb(a.r)}))}function tb(a,d){return Xo(void 0!==d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==
d.r?d.r:a.r)}function ac(a){return a===ej||a.lvl>a.r.lvl}function Ic(a){var d=a.l,m=a.r,L=a.lvl;if(m.lvl>=L-1&&d.lvl>=L-1)return a;if(L>m.lvl+1){if(ac(d))return Qd(tb(a,{lvl:L-1}));if(d===ej||d.r===ej)throw Error("Unexpected empty nodes");return tb(d.r,{l:tb(d,{r:d.r.l}),r:tb(a,{l:d.r.r,lvl:L-1}),lvl:L})}if(ac(a))return Jd(tb(a,{lvl:L-1}));if(m===ej||m.l===ej)throw Error("Unexpected empty nodes");d=m.l;var ha=ac(d)?m.lvl-1:m.lvl;return tb(d,{l:tb(a,{r:d.l,lvl:L-1}),r:Jd(tb(m,{l:d.r,lvl:ha})),lvl:d.lvl+
1})}function Xc(a,d,m){return a===ej?[]:Ed(za(a,ea(a,d)[0],m),function(L){return{index:L.k,value:L.v}})}function Ed(a,d){var m=a.length;if(0===m)return[];var L=d(a[0]),ha=L.index;L=L.value;for(var na=[],ua=1;ua<m;ua++){var Ha=d(a[ua]),Ua=Ha.index;Ha=Ha.value;na.push({start:ha,end:Ua-1,value:L});ha=Ua;L=Ha}return na.push({start:ha,end:Infinity,value:L}),na}function Jd(a){var d=a.r,m=a.lvl;return d===ej||d.r===ej||d.lvl!==m||d.r.lvl!==m?a:tb(d,{l:tb(a,{r:d.l}),lvl:m+1})}function Qd(a){var d=a.l;return d===
ej||d.lvl!==a.lvl?a:tb(d,{r:tb(a,{l:d.r})})}function Me(a,d,m,L){void 0===L&&(L=0);for(var ha=a.length-1;L<=ha;){var na=Math.floor((L+ha)/2),ua=m(a[na],d);if(0===ua)return na;if(-1===ua){if(2>ha-L)return na-1;ha=na-1}else{if(ha===L)return na;L=na+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);}function og(a){var d=a.size,m=a.startIndex,L=a.endIndex;return function(ha){return ha.start===m&&(ha.end===L||Infinity===ha.end)&&ha.value===d}}function oh(a,d){a=
a.index;return d===a?0:d<a?-1:1}function Xi(a,d){a=a.offset;return d===a?0:d<a?-1:1}function eh(a){return{index:a.index,value:a}}function fj(a,d,m,L){var ha=0,na=0,ua=0,Ha;0!==d?(ua=a[Ha=Me(a,d-1,oh)].offset,na=ea(m,d-1),ha=na[0],na=na[1],a.length&&a[Ha].size===ea(m,d)[1]&&--Ha,a=a.slice(0,Ha+1)):a=[];for(d=xm(Xc(m,d,Infinity));!(m=d()).done;)Ha=m.value,m=Ha.start,Ha=Ha.value,ha=m-ha,ua=ha*na+ua+ha*L,a.push({offset:ua,size:Ha,index:m}),ha=m,na=Ha;return{offsetTree:a,lastIndex:ha,lastOffset:ua,lastSize:na}}
function Ai(a,d){var m=d[0],L=d[1],ha=d[3];0<m.length&&(0,d[2])("received item sizes",m,qm.DEBUG);var na=a.sizeTree;d=na;var ua=0;if(0<L.length&&na===ej&&2===m.length){var Ha=m[0].size,Ua=m[1].size;d=L.reduce(function(jb,mb){return Aa(Aa(jb,mb,Ha),mb+1,Ua)},d)}else m=function(jb,mb){var Kb,Vb=jb===ej?0:Infinity;for(mb=xm(mb);!(Kb=mb()).done;){var Ob=Kb.value;Kb=Ob.size;var kc=Ob.startIndex,xc=Ob.endIndex;if(Vb=Math.min(Vb,kc),jb===ej)jb=Aa(jb,0,Kb);else{var $b=Xc(jb,kc-1,xc+1);if(!$b.some(og(Ob))){var pc,
lc=Ob=!1;for($b=xm($b);!(pc=$b()).done;){var Rc=pc.value;pc=Rc.start;var Uc=Rc.end;Rc=Rc.value;Ob?(xc>=pc||Kb===Rc)&&(jb=z(jb,pc)):(lc=Rc!==Kb,Ob=!0);Uc>xc&&xc>=pc&&Rc!==Kb&&(jb=Aa(jb,xc+1,Rc))}lc&&(jb=Aa(jb,kc,Kb))}}}return[jb,Vb]}(d,m),d=m[0],ua=m[1];if(d===na)return a;a=fj(a.offsetTree,ua,d,ha);var $a=a.offsetTree;return{sizeTree:d,offsetTree:$a,lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:L.reduce(function(jb,mb){return Aa(jb,mb,wi(mb,$a,ha))},ej),groupIndices:L}}
function wi(a,d,m){if(0===d.length)return 0;d=d[Me(d,a,oh)];a-=d.index;a=d.size*a+(a-1)*m+d.offset;return 0<a?a+m:a}function Ji(a,d,m){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+1;a=di("LAST"===a.index?m:a.index,d);return Math.max(0,a,Math.min(m,a))}function di(a,d){if(d.groupOffsetTree===ej)return a;for(var m=0;d.groupIndices[m]<=a+m;)m++;return a+m}function Di(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&wH||(a.behavior="auto"),a.offset||(a.offset=
0),a}function Ei(a){return!!a&&("smooth"===a?"smooth":"auto")}function Hi(a){return a.reduce(function(d,m){return d.groupIndices.push(d.totalCount),d.totalCount+=m+1,d},{totalCount:0,groupIndices:[]})}function Sj(a,d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function Pk(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function tl(a,d,m){return"number"==typeof a?"up"===m&&"top"===d||"down"===m&&"bottom"===d?a:0:"up"===m?"top"===d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function un(a,
d,m){if(0===a.length)return[];if(d.groupOffsetTree===ej)return a.map(function(Ua){return Mh({},Ua,{index:Ua.index+m,originalIndex:Ua.index})});var L,ha=[],na=Xc(d.groupOffsetTree,a[0].index,a[a.length-1].index),ua=void 0,Ha=0;for(a=xm(a);!(L=a()).done;)L=L.value,(!ua||ua.end<L.index)&&(ua=na.shift(),Ha=d.groupIndices.indexOf(ua.start)),ha.push(Mh({},L.index===ua.start?{type:"group",index:Ha}:{index:L.index-(Ha+1)+m,groupIndex:Ha},{size:L.size,offset:L.offset,originalIndex:L.index,data:L.data}));return ha}
function $m(a,d,m,L,ha,na){var ua=0,Ha=0;0<a.length&&(ua=a[0].offset,Ha=a[a.length-1],Ha=Ha.offset+Ha.size);var Ua=m-ha.lastIndex,$a=ua;L=ha.lastOffset+Ua*ha.lastSize+(Ua-1)*L-Ha;return{items:un(a,ha,na),topItems:un(d,ha,na),topListHeight:d.reduce(function(jb,mb){return mb.size+jb},0),offsetTop:ua,offsetBottom:L,top:$a,bottom:Ha,totalCount:m,firstItemIndex:na}}function tn(a){var d,m=!1;return function(){return m||(m=!0,d=a()),d}}function $h(a,d){var m=(0,Fi.useRef)(null),L=(0,Fi.useCallback)(function(Ua){if(null!==
Ua&&Ua.offsetParent){var $a=Ua.getBoundingClientRect();Ua=$a.width;if(d){var jb=d.getBoundingClientRect();$a=$a.top-jb.top;jb=jb.height-Math.max(0,$a);$a+=d.scrollTop}else jb=window.innerHeight-Math.max(0,$a.top),$a=$a.top+window.pageYOffset;m.current={offsetTop:$a,visibleHeight:jb,visibleWidth:Ua};a(m.current)}},[a,d]),ha=$o(L),na=ha.callbackRef,ua=ha.ref,Ha=(0,Fi.useCallback)(function(){L(ua.current)},[L,ua]);return(0,Fi.useEffect)(function(){if(d){d.addEventListener("scroll",Ha);var Ua=new ResizeObserver(Ha);
return Ua.observe(d),function(){d.removeEventListener("scroll",Ha);Ua.unobserve(d)}}return window.addEventListener("scroll",Ha),window.addEventListener("resize",Ha),function(){window.removeEventListener("scroll",Ha);window.removeEventListener("resize",Ha)}},[Ha,d]),na}function Xp(a){return a}function Qk(a,d){var m=hh();return Rh(m,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),ug(m,a),m}function Xj(a,d){if("string"!=
typeof a)return{context:d}}function ro(a){var d=a.usePublisher,m=a.useEmitter,L=a.useEmitterValue;return Dh.memo(function(ha){var na=ha.style,ua=ha.children;ha=wm(ha,WC);var Ha=d("scrollContainerState"),Ua=L("ScrollerComponent"),$a=d("smoothScrollTargetReached"),jb=L("scrollerRef"),mb=L("context");Ha=or(Ha,$a,Ua,jb);$a=Ha.scrollerRef;jb=Ha.scrollByCallback;return m("scrollTo",Ha.scrollToCallback),m("scrollBy",jb),(0,Fi.createElement)(Ua,Mh({ref:$a,style:Mh({},mv,na),"data-test-id":"virtuoso-scroller",
"data-virtuoso-scroller":!0,tabIndex:0},ha,Xj(Ua,mb)),ua)})}function Op(a){var d=a.usePublisher,m=a.useEmitter,L=a.useEmitterValue;return Dh.memo(function(ha){var na=ha.style,ua=ha.children;ha=wm(ha,ez);var Ha=d("windowScrollContainerState"),Ua=L("ScrollerComponent"),$a=d("smoothScrollTargetReached"),jb=L("totalListHeight"),mb=L("deviation"),Kb=L("customScrollParent"),Vb=L("context");$a=or(Ha,$a,Ua,Ki,Kb);var Ob=$a.scrollerRef;Ha=$a.scrollByCallback;$a=$a.scrollToCallback;return Xy(function(){return Ob.current=
Kb||window,function(){Ob.current=null}},[Ob,Kb]),m("windowScrollTo",$a),m("scrollBy",Ha),(0,Fi.createElement)(Ua,Mh({style:Mh({position:"relative"},na,0!==jb?{height:jb+mb}:{}),"data-virtuoso-scroller":!0},ha,Xj(Ua,Vb)),ua)})}function Pp(a,d,m){return Array.from({length:d-a+1}).map(function(L,ha){return{index:ha+a,data:null==m?void 0:m[ha+a]}})}function Dn(a,d){return a&&a.column===d.column&&a.row===d.row}function so(a,d,m,L){var ha=m.height;return void 0===ha||0===L.length?{top:0,bottom:0}:{top:jl(a,
d,m,L[0].index),bottom:jl(a,d,m,L[L.length-1].index)+ha}}function jl(a,d,m,L){var ha=d.column;a=gu(1,fu((a.width+ha)/(m.width+ha)));L=fu(L/a);m=L*m.height+gu(0,L-1)*d.row;return 0<m?m+d.row:m}function em(a,d,m){return"normal"===d||null!=d&&d.endsWith("px")||m(a+" was not resolved to pixel value correctly",d,qm.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function on(a,d){on=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,L){m.__proto__=L;return m};return on(a,d)}function Vp(a,d){a.prototype=
Object.create(d.prototype);a.prototype.constructor=a;on(a,d)}function wo(a){wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return wo(a)}function Au(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function yq(a,d,m){yq=Au()?Reflect.construct.bind():function(L,
ha,na){var ua=[null];ua.push.apply(ua,ha);L=new (Function.bind.apply(L,ua));na&&on(L,na.prototype);return L};return yq.apply(null,arguments)}function Aq(a){var d="function"===typeof Map?new Map:void 0;Aq=function(m){function L(){return yq(m,arguments,wo(this).constructor)}if(null===m||-1===Function.toString.call(m).indexOf("[native code]"))return m;if("function"!==typeof m)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof d){if(d.has(m))return d.get(m);
d.set(m,L)}L.prototype=Object.create(m.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}});return on(L,m)};return Aq(a)}function Cu(a,d,m){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*m)}function Yp(a,d,m,L){void 0===L&&(L=Cu);if(0===d)return L(m,m,m);a=(a%360+360)%360/60;var ha=(1-Math.abs(2*m-1))*d,na=ha*(1-Math.abs(a%2-1)),ua=d=0,Ha=0;0<=a&&1>a?(d=ha,ua=na):1<=a&&2>a?(d=na,ua=ha):2<=a&&3>a?(ua=ha,Ha=na):3<=a&&4>a?(ua=na,Ha=ha):4<=a&&5>a?(d=na,Ha=ha):
5<=a&&6>a&&(d=ha,Ha=na);m-=ha/2;return L(d+m,ua+m,Ha+m)}function ks(a){if("string"!==typeof a)throw new ho(3);if("string"===typeof a){var d=a.toLowerCase();a=Xq[d]?"#"+Xq[d]:a}if(a.match(iz))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(jD))return d=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};if(a.match(kD))return{red:parseInt(""+
a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(jz))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d};if(d=Rn.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)};if(d=qv.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:1<parseFloat(""+
d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var m=rm.exec(a);if(m){d=parseInt(""+m[1],10);var L=parseInt(""+m[2],10)/100;m=parseInt(""+m[3],10)/100;d="rgb("+Yp(d,L,m)+")";L=Rn.exec(d);if(!L)throw new ho(4,a,d);return{red:parseInt(""+L[1],10),green:parseInt(""+L[2],10),blue:parseInt(""+L[3],10)}}if(d=Nw.exec(a.substring(0,50))){L=parseInt(""+d[1],10);m=parseInt(""+d[2],10)/100;var ha=parseInt(""+d[3],10)/100;L="rgb("+Yp(L,m,ha)+")";m=Rn.exec(L);if(!m)throw new ho(4,a,L);return{red:parseInt(""+
m[1],10),green:parseInt(""+m[2],10),blue:parseInt(""+m[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new ho(5);}function to(a){a=a.toString(16);return 1===a.length?"0"+a:a}function Qp(a,d,m){return Zs("#"+to(Math.round(255*a))+to(Math.round(255*d))+to(Math.round(255*m)))}function es(a,d,m){if("number"===typeof a&&"number"===typeof d&&"number"===typeof m)return Zs("#"+to(a)+to(d)+to(m));if("object"===typeof a&&void 0===d&&void 0===m)return Zs("#"+to(a.red)+to(a.green)+
to(a.blue));throw new ho(6);}function ht(a){if("object"!==typeof a)throw new ho(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?es(a.red,a.green,a.blue):"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new ho(7);return a}if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return es(a);if("number"===
typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?Yp(a.hue,a.saturation,a.lightness,Qp):"rgba("+Yp(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new ho(2);return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=Yp(a.hue,a.saturation,a.lightness,Qp);else throw new ho(1);
return a}throw new ho(8);}function ir(a,d,m){return function(){var L=m.concat(Array.prototype.slice.call(arguments));return L.length>=d?a.apply(this,L):ir(a,d,L)}}function jr(a,d){if("transparent"===d)return d;d=ks(d);var m=d.red/255,L=d.green/255,ha=d.blue/255,na=Math.max(m,L,ha),ua=Math.min(m,L,ha),Ha=(na+ua)/2;if(na===ua)d=void 0!==d.alpha?{hue:0,saturation:0,lightness:Ha,alpha:d.alpha}:{hue:0,saturation:0,lightness:Ha};else{var Ua=na-ua;ua=.5<Ha?Ua/(2-na-ua):Ua/(na+ua);switch(na){case m:m=(L-
ha)/Ua+(L<ha?6:0);break;case L:m=(ha-m)/Ua+2;break;default:m=(m-L)/Ua+4}m*=60;d=void 0!==d.alpha?{hue:m,saturation:ua,lightness:Ha,alpha:d.alpha}:{hue:m,saturation:ua,lightness:Ha}}Ha=nf;a=d.lightness-parseFloat(a);return ht(Ha({},d,{lightness:Math.max(0,Math.min(1,a))}))}function Zm(a,d){var m;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let L=null!=(m=d.fill)?m:a.props.fill;void 0===L||uf(L)||"var(--ls-secondary-background-color)"===
L||d.noFill||!KH.includes(a.props.type)||(a=lp(.3,L),d.stroke=a);return d}function is({strokeWidth:a,size:d,mode:m}){return"svg"===m?(0,Bj.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,d[1]-2*a),strokeWidth:4*a}):(0,Bj.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function pn(){const a=Ie();return"panning"===a.inputs.state||
"pinching"===a.inputs.state}function zq({left:a,middle:d,right:m,stroke:L,strokeWidth:ha}){return(0,Sw.jsxs)("g",{children:[(0,Sw.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${m}`}),(0,Sw.jsx)("path",{d:`M ${a} L ${d} ${m}`,fill:"none",stroke:L,strokeWidth:ha,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Bq(a,d,m){d=K(a,d,a,m).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(m=d[0])?me.rotWith(m,
a,Math.PI/6):a;a=m?me.rotWith(m,a,-Math.PI/6):a;return{left:d,right:a}}function ls(a,d,m){const {left:L,right:ha}=Bq(a,d,m);return`M ${L} L ${a} ${ha}`}function Ul(a,d,m,L,ha){a=a.strokeWidth;var na=me.dist(d,m);a=Math.min(na/3,16*a);na=[];na.push(`M ${d} L ${m}`);L&&na.push(ls(d,m,a));ha&&na.push(ls(m,d,a));return na.join(" ")}function gs({id:a,bounds:d,labelSize:m,offset:L,scale:ha=1}){return(0,$q.jsx)("defs",{children:(0,$q.jsxs)("mask",{id:a+"_clip",children:[(0,$q.jsx)("rect",{x:-100,y:-100,
width:d.width+200,height:d.height+200,fill:"white"}),(0,$q.jsx)("rect",{x:d.width/2-m[0]/2*ha+((null==L?void 0:L[0])||0),y:d.height/2-m[1]/2*ha+((null==L?void 0:L[1])||0),width:m[0]*ha,height:m[1]*ha,rx:4*ha,ry:4*ha,fill:"black"})]})})}function Rp(a,d,m,L=ha=>ha){return a*L(.5-d*(.5-m))}function Sp(a){return[-a[0],-a[1]]}function ll(a,d){return[a[0]+d[0],a[1]+d[1]]}function kl(a,d){return[a[0]-d[0],a[1]-d[1]]}function ml(a,d){return[a[0]*d,a[1]*d]}function Tp(a){return[a[1],-a[0]]}function kr(a,d){return a[0]===
d[0]&&a[1]===d[1]}function Cq(a){return a[0]*a[0]+a[1]*a[1]}function Eq(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function it(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function uo(a,d,m){let L=Math.sin(m);m=Math.cos(m);let ha=a[0]-d[0];a=a[1]-d[1];return[ha*m-a*L+d[0],ha*L+a*m+d[1]]}function qn(a,d,m){return ll(a,ml(kl(d,a),m))}function Up(a,d,m){return ll(a,ml(d,m))}function Dq(a,d={}){let {size:m=16,smoothing:L=.5,thinning:ha=.5,simulatePressure:na=!0,easing:ua=Zd=>Zd,start:Ha={},end:Ua=
{},last:$a=!1}=d,{cap:jb=!0,easing:mb=Zd=>Zd*(2-Zd)}=Ha,{cap:Kb=!0,easing:Vb=Zd=>--Zd*Zd*Zd+1}=Ua;if(0===a.length||0>=m)return[];var Ob=a[a.length-1].runningLength;let kc=!1===Ha.taper?0:!0===Ha.taper?Math.max(m,Ob):Ha.taper,xc=!1===Ua.taper?0:!0===Ua.taper?Math.max(m,Ob):Ua.taper;var $b=Math.pow(m*L,2);d=[];let pc=[];var lc=a.slice(0,10).reduce((Zd,pd)=>{var Md=pd.pressure;na&&(pd=ar(1,pd.distance/m),Md=ar(1,1-pd),Md=ar(1,Zd+.275*(Md-Zd)*pd));return(Zd+Md)/2},a[0].pressure),Rc=Rp(m,ha,a[a.length-
1].pressure,ua),Uc;let Dd=a[0].vector;var Td=a[0].point;let lf=Td;var re=Td;let We=lf;var Uf=!1;for(var hf=0;hf<a.length;hf++){var {pressure:wf}=a[hf];let {point:Zd,vector:pd,distance:Md,runningLength:Se}=a[hf];if(hf<a.length-1&&3>Ob-Se)continue;ha?(na&&(Rc=ar(1,Md/m),wf=ar(1,1-Rc),wf=ar(1,lc+.275*(wf-lc)*Rc)),Rc=Rp(m,ha,wf,ua)):Rc=m/2;void 0===Uc&&(Uc=Rc);var Sd=Se<kc?mb(Se/kc):1,qd=Ob-Se<xc?Vb((Ob-Se)/xc):1;Rc=Math.max(.01,Rc*Math.min(Sd,qd));qd=(hf<a.length-1?a[hf+1]:a[hf]).vector;let Gf=hf<a.length-
1?pd[0]*qd[0]+pd[1]*qd[1]:1;Sd=null!==Gf&&0>Gf;if(0>pd[0]*Dd[0]+pd[1]*Dd[1]&&!Uf||Sd){Td=ml(Tp(Dd),Rc);for(let sg=1/13,Mf=0;1>=Mf;Mf+=sg)re=uo(kl(Zd,Td),Zd,su*Mf),d.push(re),We=uo(ll(Zd,Td),Zd,su*-Mf),pc.push(We);Td=re;lf=We;Sd&&(Uf=!0)}else(Uf=!1,hf===a.length-1)?(wf=ml(Tp(pd),Rc),d.push(kl(Zd,wf)),pc.push(ll(Zd,wf))):(lc=ml(Tp(qn(qd,pd,Gf)),Rc),re=kl(Zd,lc),(1>=hf||Cq(kl(Td,re))>$b)&&(d.push(re),Td=re),We=ll(Zd,lc),(1>=hf||Cq(kl(lf,We))>$b)&&(pc.push(We),lf=We),lc=wf,Dd=pd)}Ob=a[0].point.slice(0,
2);$b=1<a.length?a[a.length-1].point.slice(0,2):ll(a[0].point,[1,1]);re=[];Uf=[];if(1===a.length){if(!kc&&!xc||$a){a=Up(Ob,Eq(Tp(kl(Ob,$b))),-(Uc||Rc));d=[];for(let Zd=1/13,pd=Zd;1>=pd;pd+=Zd)d.push(uo(a,Ob,2*su*pd));return d}}else{if(!(kc||xc&&1===a.length))if(jb)for(let Zd=1/13,pd=Zd;1>=pd;pd+=Zd)Uc=uo(pc[0],Ob,su*pd),re.push(Uc);else hf=kl(d[0],pc[0]),Uc=ml(hf,.5),hf=ml(hf,.51),re.push(kl(Ob,Uc),kl(Ob,hf),ll(Ob,hf),ll(Ob,Uc));Uc=Tp(Sp(a[a.length-1].vector));if(xc||kc&&1===a.length)Uf.push($b);
else if(Kb){a=Up($b,Uc,Rc);for(let Zd=1/29,pd=Zd;1>pd;pd+=Zd)Uf.push(uo(a,$b,3*su*pd))}else Uf.push(ll($b,ml(Uc,Rc)),ll($b,ml(Uc,.99*Rc)),kl($b,ml(Uc,.99*Rc)),kl($b,ml(Uc,Rc)))}return d.concat(Uf,pc.reverse(),re)}function rk(a,d={}){var m;let {streamline:L=.5,size:ha=16,last:na=!1}=d;if(0===a.length)return[];d=.15+.85*(1-L);a=Array.isArray(a[0])?a:a.map(({x:mb,y:Kb,pressure:Vb=.5})=>[mb,Kb,Vb]);if(2===a.length){var ua=a[1];a=a.slice(0,-1);for(var Ha=1;5>Ha;Ha++)a.push(qn(a[0],ua,Ha/4))}1===a.length&&
(a=[...a,[...ll(a[0],[1,1]),...a[0].slice(2)]]);ua=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ha=!1;let Ua=0,$a=ua[0],jb=a.length-1;for(let mb=1;mb<a.length;mb++){let Kb=na&&mb===jb?a[mb].slice(0,2):qn($a.point,a[mb],d);if(kr($a.point,Kb))continue;let Vb=it(Kb,$a.point);if(Ua+=Vb,mb<jb&&!Ha){if(Ua<ha)continue;Ha=!0}$a={point:Kb,pressure:0<=a[mb][2]?a[mb][2]:.5,vector:Eq(kl($a.point,Kb)),distance:Vb,runningLength:Ua};ua.push($a)}return ua[0].vector=
(null==(m=ua[1])?void 0:m.vector)||[0,0],ua}function En(a,d=4/3){return(new $w(a)).exportAsSVG(d)}function Yn(a,d=4/3){return(new $w(a)).generatePreviewJsx(void 0,d)}function Um({id:a,type:d,onRemove:m,showContent:L}){const ha=Ie(),{handlers:na}=Vy.default.useContext(rj),ua=na.t;return(0,Gj.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,Gj.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,Gj.jsx)(Wy,{id:a,showReferenceContent:L})}),
(0,Gj.jsx)("div",{className:"flex-1"}),na.getBlockPageName(a)!==ha.currentPage.name&&(0,Gj.jsx)(Ug,{tooltip:ua("whiteboard/open-page"),type:"button",onClick:()=>null==na?void 0:na.redirectToPage(a),children:(0,Gj.jsx)(Xh,{name:"open-as-page"})}),(0,Gj.jsx)(Ug,{tooltip:ua("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==na?void 0:na.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,Gj.jsx)(Xh,{name:"move-to-sidebar-right"})}),m&&(0,Gj.jsx)(Ug,{className:"tl-shape-links-panel-item-remove-button",
tooltip:ua("whiteboard/remove-link"),type:"button",onClick:m,children:(0,Gj.jsx)(Xh,{name:"x",className:"!translate-y-0"})})]})}function la({options:a,value:d,onValueChange:m}){return(0,$r.jsx)(rD,{className:"tl-toggle-group-input",type:"single",value:d,onValueChange:m,children:a.map(L=>(0,$r.jsx)(fk,{content:L.tooltip,children:(0,$r.jsx)("div",{className:"inline-block",children:(0,$r.jsx)(sD,{className:"tl-toggle-group-input-button",value:L.value,disabled:L.value===d,children:(0,$r.jsx)(Xh,{name:L.icon})})})},
L.value))})}function Da({options:a,value:d,onValueChange:m}){return(0,$r.jsx)(rD,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:m,children:a.map(L=>(0,$r.jsx)(sD,{className:"tl-toggle-group-input-button",value:L.value,children:(0,$r.jsx)(Xh,{name:L.icon})},L.value))})}function Za(a){return Ie().selectedShapesArray.filter(d=>!d.props.isLocked).filter(d=>{var m;return null==(m=qz[d.props.type])?void 0:m.includes(a)})}function Wb(a){return d=>"mouse"!==d.pointerType?a(d):void 0}
function vc(a){var d;a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";const m=a[0].toLowerCase();[a]=null!=(d=Object.entries($H).find(([,L])=>L.includes(m)))?d:["unknown",null];return a}function Oc(...a){return(...d)=>ui(this,null,function*(){for(const m of a){const L=yield m(...d);if(L&&0<L.length)return L}return null})}function yd(a,d){return ui(this,null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():null})}function Wd(){const {handlers:a}=
AD.useContext(rj);return AD.useCallback((d,m)=>ui(this,null,function*(){if(m.shiftKey&&1===d.selectedShapesArray.length){var L=yield navigator.clipboard.read();let ha;0<L.length&&(L=(yield(yield L[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(L)&&40===L.length?(L=L.slice(2,-2),Wg(L)&&(ha=L)):/^\[\[.*\]\]$/.test(L)&&(ha=L.slice(2,-2)));if(ha){d.selectedShapesArray[0].update({refs:[ha]});d.persist();return}}gr(d,m,a)}),[])}function pe(){const a=Wd();return zD.useCallback((d,m)=>ui(this,
[d,m],function*(L,{dataTransfer:ha,point:na}){a(L,{point:na,shiftKey:!1,dataTransfer:ha,fromDrop:!0})}),[])}function Je(){const {handlers:a}=tz.useContext(rj);return tz.useCallback((d,{text:m,html:L})=>{a.copyToClipboard(m,L)},[])}function rf(){return uz.default.useCallback(a=>ui(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var pg=Object.create,Bg=Object.defineProperty,gi=Object.defineProperties,Lh=Object.getOwnPropertyDescriptor,
Ek=Object.getOwnPropertyDescriptors,vo=Object.getOwnPropertyNames,Sl=Object.getOwnPropertySymbols,Gi=Object.getPrototypeOf,Fk=Object.prototype.hasOwnProperty,Cm=Object.prototype.propertyIsEnumerable,Yo=(a,d,m)=>d in a?Bg(a,d,{enumerable:!0,configurable:!0,writable:!0,value:m}):a[d]=m,qe=(a,d)=>{for(var m in d||={})Fk.call(d,m)&&Yo(a,m,d[m]);if(Sl)for(m of Sl(d))Cm.call(d,m)&&Yo(a,m,d[m]);return a},Cf=(a,d)=>gi(a,Ek(d)),bg=(a,d)=>{var m={},L;for(L in a)Fk.call(a,L)&&0>d.indexOf(L)&&(m[L]=a[L]);if(null!=
a&&Sl)for(L of Sl(a))0>d.indexOf(L)&&Cm.call(a,L)&&(m[L]=a[L]);return m},Zh=(a,d)=>function(){return d||(0,a[vo(a)[0]])((d={exports:{}}).exports,d),d.exports},zm=(a,d,m,L)=>{if(d&&"object"===typeof d||"function"===typeof d)for(let ha of vo(d))Fk.call(a,ha)||ha===m||Bg(a,ha,{get:()=>d[ha],enumerable:!(L=Lh(d,ha))||L.enumerable});return a},Jf=(a,d,m)=>(m=null!=a?pg(Gi(a)):{},zm(!d&&a&&a.__esModule?m:Bg(m,"default",{value:a,enumerable:!0}),a)),le=(a,d,m,L)=>{for(var ha=1<L?void 0:L?Lh(d,m):d,na=a.length-
1,ua;0<=na;na--)if(ua=a[na])ha=(L?ua(d,m,ha):ua(ha))||ha;L&&ha&&Bg(d,m,ha);return ha},kb=(a,d,m)=>{Yo(a,"symbol"!==typeof d?d+"":d,m);return m},ui=(a,d,m)=>new Promise((L,ha)=>{var na=Ua=>{try{Ha(m.next(Ua))}catch($a){ha($a)}},ua=Ua=>{try{Ha(m.throw(Ua))}catch($a){ha($a)}},Ha=Ua=>Ua.done?L(Ua.value):Promise.resolve(Ua.value).then(na,ua);Ha((m=m.apply(a,d)).next())}),gm=Zh({["../../node_modules/rbush/rbush.min.js"](a,d){!function(m,L){"object"==typeof a&&"undefined"!=typeof d?d.exports=L():"function"==
typeof define&&define.amd?define(L):(m=m||self).RBush=L()}(a,function(){function m($b,pc,lc,Rc,Uc){!function hf(Td,lf,re,We,Uf){for(;We>re;){if(600<We-re){var wf=We-re+1,Sd=lf-re+1,qd=Math.log(wf),Zd=.5*Math.exp(2*qd/3);qd=.5*Math.sqrt(qd*Zd*(wf-Zd)/wf)*(0>Sd-wf/2?-1:1);hf(Td,lf,Math.max(re,Math.floor(lf-Sd*Zd/wf+qd)),Math.min(We,Math.floor(lf+(wf-Sd)*Zd/wf+qd)),Uf)}wf=Td[lf];Sd=re;Zd=We;L(Td,re,lf);for(0<Uf(Td[We],wf)&&L(Td,re,We);Sd<Zd;){L(Td,Sd,Zd);Sd++;for(Zd--;0>Uf(Td[Sd],wf);)Sd++;for(;0<Uf(Td[Zd],
wf);)Zd--}0===Uf(Td[re],wf)?L(Td,re,Zd):L(Td,++Zd,We);Zd<=lf&&(re=Zd+1);lf<=Zd&&(We=Zd-1)}}($b,pc,lc||0,Rc||$b.length-1,Uc||ha)}function L($b,pc,lc){var Rc=$b[pc];$b[pc]=$b[lc];$b[lc]=Rc}function ha($b,pc){return $b<pc?-1:$b>pc?1:0}function na($b,pc){ua($b,0,$b.children.length,pc,$b)}function ua($b,pc,lc,Rc,Uc){Uc||=Ob(null);Uc.minX=1/0;Uc.minY=1/0;Uc.maxX=-1/0;for(Uc.maxY=-1/0;pc<lc;pc++){var Dd=$b.children[pc];Ha(Uc,$b.leaf?Rc(Dd):Dd)}return Uc}function Ha($b,pc){return $b.minX=Math.min($b.minX,
pc.minX),$b.minY=Math.min($b.minY,pc.minY),$b.maxX=Math.max($b.maxX,pc.maxX),$b.maxY=Math.max($b.maxY,pc.maxY),$b}function Ua($b,pc){return $b.minX-pc.minX}function $a($b,pc){return $b.minY-pc.minY}function jb($b){return($b.maxX-$b.minX)*($b.maxY-$b.minY)}function mb($b){return $b.maxX-$b.minX+($b.maxY-$b.minY)}function Kb($b,pc){return $b.minX<=pc.minX&&$b.minY<=pc.minY&&pc.maxX<=$b.maxX&&pc.maxY<=$b.maxY}function Vb($b,pc){return pc.minX<=$b.maxX&&pc.minY<=$b.maxY&&pc.maxX>=$b.minX&&pc.maxY>=$b.minY}
function Ob($b){return{children:$b,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function kc($b,pc,lc,Rc,Uc){for(var Dd=[pc,lc];Dd.length;)if(!((lc=Dd.pop())-(pc=Dd.pop())<=Rc)){var Td=pc+Math.ceil((lc-pc)/Rc/2)*Rc;m($b,Td,pc,lc,Uc);Dd.push(pc,Td,Td,lc)}}var xc=function($b){void 0===$b&&($b=9);this._maxEntries=Math.max(4,$b);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return xc.prototype.all=function(){return this._all(this.data,[])},xc.prototype.search=function($b){var pc=
this.data,lc=[];if(!Vb($b,pc))return lc;for(var Rc=this.toBBox,Uc=[];pc;){for(var Dd=0;Dd<pc.children.length;Dd++){var Td=pc.children[Dd],lf=pc.leaf?Rc(Td):Td;Vb($b,lf)&&(pc.leaf?lc.push(Td):Kb($b,lf)?this._all(Td,lc):Uc.push(Td))}pc=Uc.pop()}return lc},xc.prototype.collides=function($b){var pc=this.data;if(!Vb($b,pc))return!1;for(var lc=[];pc;){for(var Rc=0;Rc<pc.children.length;Rc++){var Uc=pc.children[Rc],Dd=pc.leaf?this.toBBox(Uc):Uc;if(Vb($b,Dd)){if(pc.leaf||Kb($b,Dd))return!0;lc.push(Uc)}}pc=
lc.pop()}return!1},xc.prototype.load=function($b){if(!$b||!$b.length)return this;if($b.length<this._minEntries){for(var pc=0;pc<$b.length;pc++)this.insert($b[pc]);return this}$b=this._build($b.slice(),0,$b.length-1,0);this.data.children.length?this.data.height===$b.height?this._splitRoot(this.data,$b):(this.data.height<$b.height&&(pc=this.data,this.data=$b,$b=pc),this._insert($b,this.data.height-$b.height-1,!0)):this.data=$b;return this},xc.prototype.insert=function($b){return $b&&this._insert($b,
this.data.height-1),this},xc.prototype.clear=function(){return this.data=Ob([]),this},xc.prototype.remove=function($b,pc){if(!$b)return this;for(var lc,Rc,Uc,Dd=this.data,Td=this.toBBox($b),lf=[],re=[];Dd||lf.length;){if(Dd||(Dd=lf.pop(),Rc=lf[lf.length-1],lc=re.pop(),Uc=!0),Dd.leaf){a:{var We=$b;var Uf=Dd.children,hf=pc;if(hf){for(var wf=0;wf<Uf.length;wf++)if(hf(We,Uf[wf])){We=wf;break a}We=-1}else We=Uf.indexOf(We)}if(-1!==We)return Dd.children.splice(We,1),lf.push(Dd),this._condense(lf),this}Uc||
Dd.leaf||!Kb(Dd,Td)?Rc?(lc++,Dd=Rc.children[lc],Uc=!1):Dd=null:(lf.push(Dd),re.push(lc),lc=0,Rc=Dd,Dd=Dd.children[0])}return this},xc.prototype.toBBox=function($b){return $b},xc.prototype.compareMinX=function($b,pc){return $b.minX-pc.minX},xc.prototype.compareMinY=function($b,pc){return $b.minY-pc.minY},xc.prototype.toJSON=function(){return this.data},xc.prototype.fromJSON=function($b){return this.data=$b,this},xc.prototype._all=function($b,pc){for(var lc=[];$b;)$b.leaf?pc.push.apply(pc,$b.children):
lc.push.apply(lc,$b.children),$b=lc.pop();return pc},xc.prototype._build=function($b,pc,lc,Rc){var Uc,Dd=lc-pc+1,Td=this._maxEntries;if(Dd<=Td)return na(Uc=Ob($b.slice(pc,lc+1)),this.toBBox),Uc;Rc||(Rc=Math.ceil(Math.log(Dd)/Math.log(Td)),Td=Math.ceil(Dd/Math.pow(Td,Rc-1)));(Uc=Ob([])).leaf=!1;Uc.height=Rc;Dd=Math.ceil(Dd/Td);Td=Dd*Math.ceil(Math.sqrt(Td));for(kc($b,pc,lc,Td,this.compareMinX);pc<=lc;pc+=Td){var lf=Math.min(pc+Td-1,lc);kc($b,pc,lf,Dd,this.compareMinY);for(var re=pc;re<=lf;re+=Dd)Uc.children.push(this._build($b,
re,Math.min(re+Dd-1,lf),Rc-1))}return na(Uc,this.toBBox),Uc},xc.prototype._chooseSubtree=function($b,pc,lc,Rc){for(;Rc.push(pc),!pc.leaf&&Rc.length-1!==lc;){for(var Uc=1/0,Dd=1/0,Td=void 0,lf=0;lf<pc.children.length;lf++){var re=pc.children[lf],We=jb(re),Uf=(hf=$b,wf=re,(Math.max(wf.maxX,hf.maxX)-Math.min(wf.minX,hf.minX))*(Math.max(wf.maxY,hf.maxY)-Math.min(wf.minY,hf.minY))-We);Uf<Dd?(Dd=Uf,Uc=We<Uc?We:Uc,Td=re):Uf===Dd&&We<Uc&&(Uc=We,Td=re)}pc=Td||pc.children[0]}var hf,wf;return pc},xc.prototype._insert=
function($b,pc,lc){lc=lc?$b:this.toBBox($b);var Rc=[],Uc=this._chooseSubtree(lc,this.data,pc,Rc);Uc.children.push($b);for(Ha(Uc,lc);0<=pc&&Rc[pc].children.length>this._maxEntries;)this._split(Rc,pc),pc--;this._adjustParentBBoxes(lc,Rc,pc)},xc.prototype._split=function($b,pc){var lc=$b[pc],Rc=lc.children.length,Uc=this._minEntries;this._chooseSplitAxis(lc,Uc,Rc);Rc=this._chooseSplitIndex(lc,Uc,Rc);Rc=Ob(lc.children.splice(Rc,lc.children.length-Rc));Rc.height=lc.height;Rc.leaf=lc.leaf;na(lc,this.toBBox);
na(Rc,this.toBBox);pc?$b[pc-1].children.push(Rc):this._splitRoot(lc,Rc)},xc.prototype._splitRoot=function($b,pc){this.data=Ob([$b,pc]);this.data.height=$b.height+1;this.data.leaf=!1;na(this.data,this.toBBox)},xc.prototype._chooseSplitIndex=function($b,pc,lc){for(var Rc,Uc,Dd,Td,lf,re,We,Uf=1/0,hf=1/0,wf=pc;wf<=lc-pc;wf++){var Sd=ua($b,0,wf,this.toBBox),qd=ua($b,wf,lc,this.toBBox),Zd=(Uc=Sd,Dd=qd,Td=void 0,lf=void 0,re=void 0,We=void 0,Td=Math.max(Uc.minX,Dd.minX),lf=Math.max(Uc.minY,Dd.minY),re=Math.min(Uc.maxX,
Dd.maxX),We=Math.min(Uc.maxY,Dd.maxY),Math.max(0,re-Td)*Math.max(0,We-lf));Sd=jb(Sd)+jb(qd);Zd<Uf?(Uf=Zd,Rc=wf,hf=Sd<hf?Sd:hf):Zd===Uf&&Sd<hf&&(hf=Sd,Rc=wf)}return Rc||lc-pc},xc.prototype._chooseSplitAxis=function($b,pc,lc){var Rc=$b.leaf?this.compareMinX:Ua,Uc=$b.leaf?this.compareMinY:$a;this._allDistMargin($b,pc,lc,Rc)<this._allDistMargin($b,pc,lc,Uc)&&$b.children.sort(Rc)},xc.prototype._allDistMargin=function($b,pc,lc,Rc){$b.children.sort(Rc);Rc=this.toBBox;for(var Uc=ua($b,0,pc,Rc),Dd=ua($b,lc-
pc,lc,Rc),Td=mb(Uc)+mb(Dd),lf=pc;lf<lc-pc;lf++){var re=$b.children[lf];Ha(Uc,$b.leaf?Rc(re):re);Td+=mb(Uc)}for(lc=lc-pc-1;lc>=pc;lc--)Uc=$b.children[lc],Ha(Dd,$b.leaf?Rc(Uc):Uc),Td+=mb(Dd);return Td},xc.prototype._adjustParentBBoxes=function($b,pc,lc){for(;0<=lc;lc--)Ha(pc[lc],$b)},xc.prototype._condense=function($b){for(var pc=$b.length-1,lc=void 0;0<=pc;pc--)0===$b[pc].children.length?0<pc?(lc=$b[pc-1].children).splice(lc.indexOf($b[pc]),1):this.clear():na($b[pc],this.toBBox)},xc})}}),kt=Zh({["../../node_modules/fast-deep-equal/index.js"](a,
d){d.exports=function na(L,ha){if(L===ha)return!0;if(L&&ha&&"object"==typeof L&&"object"==typeof ha){if(L.constructor!==ha.constructor)return!1;var ua;if(Array.isArray(L)){var Ha=L.length;if(Ha!=ha.length)return!1;for(ua=Ha;0!==ua--;)if(!na(L[ua],ha[ua]))return!1;return!0}if(L.constructor===RegExp)return L.source===ha.source&&L.flags===ha.flags;if(L.valueOf!==Object.prototype.valueOf)return L.valueOf()===ha.valueOf();if(L.toString!==Object.prototype.toString)return L.toString()===ha.toString();var Ua=
Object.keys(L);Ha=Ua.length;if(Ha!==Object.keys(ha).length)return!1;for(ua=Ha;0!==ua--;)if(!Object.prototype.hasOwnProperty.call(ha,Ua[ua]))return!1;for(ua=Ha;0!==ua--;)if(Ha=Ua[ua],!na(L[Ha],ha[Ha]))return!1;return!0}return L!==L&&ha!==ha}}}),mr=Zh({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function m(mb,Kb){return!1!==Kb.clone&&Kb.isMergeableObject(mb)?Ua(Array.isArray(mb)?[]:{},mb,Kb):mb}function L(mb,Kb,Vb){return mb.concat(Kb).map(function(Ob){return m(Ob,Vb)})}function ha(mb){return Object.getOwnPropertySymbols?
Object.getOwnPropertySymbols(mb).filter(function(Kb){return Object.propertyIsEnumerable.call(mb,Kb)}):[]}function na(mb){return Object.keys(mb).concat(ha(mb))}function ua(mb,Kb){try{return Kb in mb}catch(Vb){return!1}}function Ha(mb,Kb,Vb){var Ob={};Vb.isMergeableObject(mb)&&na(mb).forEach(function(kc){Ob[kc]=m(mb[kc],Vb)});na(Kb).forEach(function(kc){if(!ua(mb,kc)||Object.hasOwnProperty.call(mb,kc)&&Object.propertyIsEnumerable.call(mb,kc))if(ua(mb,kc)&&Vb.isMergeableObject(Kb[kc])){if(Vb.customMerge){var xc=
Vb.customMerge(kc);xc="function"===typeof xc?xc:Ua}else xc=Ua;Ob[kc]=xc(mb[kc],Kb[kc],Vb)}else Ob[kc]=m(Kb[kc],Vb)});return Ob}function Ua(mb,Kb,Vb){Vb=Vb||{};Vb.arrayMerge=Vb.arrayMerge||L;Vb.isMergeableObject=Vb.isMergeableObject||$a;Vb.cloneUnlessOtherwiseSpecified=m;var Ob=Array.isArray(Kb),kc=Array.isArray(mb);return Ob!==kc?m(Kb,Vb):Ob?Vb.arrayMerge(mb,Kb,Vb):Ha(mb,Kb,Vb)}var $a=function(mb){var Kb;if(Kb=!!mb&&"object"===typeof mb)Kb=Object.prototype.toString.call(mb),Kb=!("[object RegExp]"===
Kb||"[object Date]"===Kb||mb.$$typeof===jb);return Kb},jb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Ua.all=function(mb,Kb){if(!Array.isArray(mb))throw Error("first argument should be an array");return mb.reduce(function(Vb,Ob){return Ua(Vb,Ob,Kb)},{})};d.exports=Ua}}),fs=Zh({["../../node_modules/tslib/tslib.js"](a,d){var m,L,ha,na,ua,Ha,Ua,$a,jb,mb,Kb,Vb,Ob,kc,xc,$b,pc,lc,Rc,Uc,Dd,Td,lf,re,We;(function(Uf){function hf(Sd,qd){Sd!==wf&&("function"===typeof Object.create?
Object.defineProperty(Sd,"__esModule",{value:!0}):Sd.__esModule=!0);return function(Zd,pd){return Sd[Zd]=qd?qd(Zd,pd):pd}}var wf="object"===typeof xa?xa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Sd){Uf(hf(wf,hf(Sd)))}):"object"===typeof d&&"object"===typeof d.exports?Uf(hf(wf,hf(d.exports))):Uf(hf(wf))})(function(Uf){var hf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Sd,qd){Sd.__proto__=
qd}||function(Sd,qd){for(var Zd in qd)Object.prototype.hasOwnProperty.call(qd,Zd)&&(Sd[Zd]=qd[Zd])};m=function(Sd,qd){function Zd(){this.constructor=Sd}if("function"!==typeof qd&&null!==qd)throw new TypeError("Class extends value "+String(qd)+" is not a constructor or null");hf(Sd,qd);Sd.prototype=null===qd?Object.create(qd):(Zd.prototype=qd.prototype,new Zd)};L=Object.assign||function(Sd){for(var qd,Zd=1,pd=arguments.length;Zd<pd;Zd++){qd=arguments[Zd];for(var Md in qd)Object.prototype.hasOwnProperty.call(qd,
Md)&&(Sd[Md]=qd[Md])}return Sd};ha=function(Sd,qd){var Zd={},pd;for(pd in Sd)Object.prototype.hasOwnProperty.call(Sd,pd)&&0>qd.indexOf(pd)&&(Zd[pd]=Sd[pd]);if(null!=Sd&&"function"===typeof Object.getOwnPropertySymbols){var Md=0;for(pd=Object.getOwnPropertySymbols(Sd);Md<pd.length;Md++)0>qd.indexOf(pd[Md])&&Object.prototype.propertyIsEnumerable.call(Sd,pd[Md])&&(Zd[pd[Md]]=Sd[pd[Md]])}return Zd};na=function(Sd,qd,Zd,pd){var Md=arguments.length,Se=3>Md?qd:null===pd?pd=Object.getOwnPropertyDescriptor(qd,
Zd):pd,Gf;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)Se=Reflect.decorate(Sd,qd,Zd,pd);else for(var sg=Sd.length-1;0<=sg;sg--)if(Gf=Sd[sg])Se=(3>Md?Gf(Se):3<Md?Gf(qd,Zd,Se):Gf(qd,Zd))||Se;return 3<Md&&Se&&Object.defineProperty(qd,Zd,Se),Se};ua=function(Sd,qd){return function(Zd,pd){qd(Zd,pd,Sd)}};Ha=function(Sd,qd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Sd,qd)};Ua=function(Sd,qd,Zd,pd){function Md(Se){return Se instanceof Zd?
Se:new Zd(function(Gf){Gf(Se)})}return new (Zd||=Promise)(function(Se,Gf){function sg(Qh){try{qg(pd.next(Qh))}catch(dg){Gf(dg)}}function Mf(Qh){try{qg(pd["throw"](Qh))}catch(dg){Gf(dg)}}function qg(Qh){Qh.done?Se(Qh.value):Md(Qh.value).then(sg,Mf)}qg((pd=pd.apply(Sd,qd||[])).next())})};$a=function(Sd,qd){function Zd(qg){return function(Qh){return pd([qg,Qh])}}function pd(qg){if(Se)throw new TypeError("Generator is already executing.");for(;Md;)try{if(Se=1,Gf&&(sg=qg[0]&2?Gf["return"]:qg[0]?Gf["throw"]||
((sg=Gf["return"])&&sg.call(Gf),0):Gf.next)&&!(sg=sg.call(Gf,qg[1])).done)return sg;if(Gf=0,sg)qg=[qg[0]&2,sg.value];switch(qg[0]){case 0:case 1:sg=qg;break;case 4:return Md.label++,{value:qg[1],done:!1};case 5:Md.label++;Gf=qg[1];qg=[0];continue;case 7:qg=Md.ops.pop();Md.trys.pop();continue;default:if(!(sg=Md.trys,sg=0<sg.length&&sg[sg.length-1])&&(6===qg[0]||2===qg[0])){Md=0;continue}if(3===qg[0]&&(!sg||qg[1]>sg[0]&&qg[1]<sg[3]))Md.label=qg[1];else if(6===qg[0]&&Md.label<sg[1])Md.label=sg[1],sg=
qg;else if(sg&&Md.label<sg[2])Md.label=sg[2],Md.ops.push(qg);else{sg[2]&&Md.ops.pop();Md.trys.pop();continue}}qg=qd.call(Sd,Md)}catch(Qh){qg=[6,Qh],Gf=0}finally{Se=sg=0}if(qg[0]&5)throw qg[1];return{value:qg[0]?qg[1]:void 0,done:!0}}var Md={label:0,sent:function(){if(sg[0]&1)throw sg[1];return sg[1]},trys:[],ops:[]},Se,Gf,sg,Mf;return Mf={next:Zd(0),"throw":Zd(1),"return":Zd(2)},"function"===typeof Symbol&&(Mf[Symbol.iterator]=function(){return this}),Mf};jb=function(Sd,qd){for(var Zd in Sd)"default"===
Zd||Object.prototype.hasOwnProperty.call(qd,Zd)||We(qd,Sd,Zd)};We=Object.create?function(Sd,qd,Zd,pd){void 0===pd&&(pd=Zd);var Md=Object.getOwnPropertyDescriptor(qd,Zd);if(!Md||("get"in Md?!qd.__esModule:Md.writable||Md.configurable))Md={enumerable:!0,get:function(){return qd[Zd]}};Object.defineProperty(Sd,pd,Md)}:function(Sd,qd,Zd,pd){void 0===pd&&(pd=Zd);Sd[pd]=qd[Zd]};mb=function(Sd){var qd="function"===typeof Symbol&&Symbol.iterator,Zd=qd&&Sd[qd],pd=0;if(Zd)return Zd.call(Sd);if(Sd&&"number"===
typeof Sd.length)return{next:function(){Sd&&pd>=Sd.length&&(Sd=void 0);return{value:Sd&&Sd[pd++],done:!Sd}}};throw new TypeError(qd?"Object is not iterable.":"Symbol.iterator is not defined.");};Kb=function(Sd,qd){var Zd="function"===typeof Symbol&&Sd[Symbol.iterator];if(!Zd)return Sd;Sd=Zd.call(Sd);var pd,Md=[];try{for(;(void 0===qd||0<qd--)&&!(pd=Sd.next()).done;)Md.push(pd.value)}catch(Gf){var Se={error:Gf}}finally{try{pd&&!pd.done&&(Zd=Sd["return"])&&Zd.call(Sd)}finally{if(Se)throw Se.error;}}return Md};
Vb=function(){for(var Sd=[],qd=0;qd<arguments.length;qd++)Sd=Sd.concat(Kb(arguments[qd]));return Sd};Ob=function(){for(var Sd=0,qd=0,Zd=arguments.length;qd<Zd;qd++)Sd+=arguments[qd].length;Sd=Array(Sd);var pd=0;for(qd=0;qd<Zd;qd++)for(var Md=arguments[qd],Se=0,Gf=Md.length;Se<Gf;Se++,pd++)Sd[pd]=Md[Se];return Sd};kc=function(Sd,qd,Zd){if(Zd||2===arguments.length)for(var pd=0,Md=qd.length,Se;pd<Md;pd++)!Se&&pd in qd||(Se||=Array.prototype.slice.call(qd,0,pd),Se[pd]=qd[pd]);return Sd.concat(Se||Array.prototype.slice.call(qd))};
xc=function(Sd){return this instanceof xc?(this.v=Sd,this):new xc(Sd)};$b=function(Sd,qd,Zd){function pd(dg){Mf[dg]&&(qg[dg]=function(rh){return new Promise(function(Eh,tj){1<Qh.push([dg,rh,Eh,tj])||Md(dg,rh)})})}function Md(dg,rh){try{var Eh=Mf[dg](rh);Eh.value instanceof xc?Promise.resolve(Eh.value.v).then(Se,Gf):sg(Qh[0][2],Eh)}catch(tj){sg(Qh[0][3],tj)}}function Se(dg){Md("next",dg)}function Gf(dg){Md("throw",dg)}function sg(dg,rh){(dg(rh),Qh.shift(),Qh.length)&&Md(Qh[0][0],Qh[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var Mf=Zd.apply(Sd,qd||[]),qg,Qh=[];return qg={},pd("next"),pd("throw"),pd("return"),qg[Symbol.asyncIterator]=function(){return this},qg};pc=function(Sd){function qd(Md,Se){Zd[Md]=Sd[Md]?function(Gf){return(pd=!pd)?{value:xc(Sd[Md](Gf)),done:"return"===Md}:Se?Se(Gf):Gf}:Se}var Zd,pd;return Zd={},qd("next"),qd("throw",function(Md){throw Md;}),qd("return"),Zd[Symbol.iterator]=function(){return this},Zd};lc=function(Sd){function qd(Se){Md[Se]=Sd[Se]&&function(Gf){return new Promise(function(sg,Mf){Gf=
Sd[Se](Gf);Zd(sg,Mf,Gf.done,Gf.value)})}}function Zd(Se,Gf,sg,Mf){Promise.resolve(Mf).then(function(qg){Se({value:qg,done:sg})},Gf)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pd=Sd[Symbol.asyncIterator],Md;return pd?pd.call(Sd):(Sd="function"===typeof mb?mb(Sd):Sd[Symbol.iterator](),Md={},qd("next"),qd("throw"),qd("return"),Md[Symbol.asyncIterator]=function(){return this},Md)};Rc=function(Sd,qd){Object.defineProperty?Object.defineProperty(Sd,"raw",{value:qd}):
Sd.raw=qd;return Sd};var wf=Object.create?function(Sd,qd){Object.defineProperty(Sd,"default",{enumerable:!0,value:qd})}:function(Sd,qd){Sd["default"]=qd};Uc=function(Sd){if(Sd&&Sd.__esModule)return Sd;var qd={};if(null!=Sd)for(var Zd in Sd)"default"!==Zd&&Object.prototype.hasOwnProperty.call(Sd,Zd)&&We(qd,Sd,Zd);wf(qd,Sd);return qd};Dd=function(Sd){return Sd&&Sd.__esModule?Sd:{"default":Sd}};Td=function(Sd,qd,Zd,pd){if("a"===Zd&&!pd)throw new TypeError("Private accessor was defined without a getter");
if("function"===typeof qd?Sd!==qd||!pd:!qd.has(Sd))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===Zd?pd:"a"===Zd?pd.call(Sd):pd?pd.value:qd.get(Sd)};lf=function(Sd,qd,Zd,pd,Md){if("m"===pd)throw new TypeError("Private method is not writable");if("a"===pd&&!Md)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof qd?Sd!==qd||!Md:!qd.has(Sd))throw new TypeError("Cannot write private member to an object whose class did not declare it");
return"a"===pd?Md.call(Sd,Zd):Md?Md.value=Zd:qd.set(Sd,Zd),Zd};re=function(Sd,qd){if(null===qd||"object"!==typeof qd&&"function"!==typeof qd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Sd?qd===Sd:Sd.has(qd)};Uf("__extends",m);Uf("__assign",L);Uf("__rest",ha);Uf("__decorate",na);Uf("__param",ua);Uf("__metadata",Ha);Uf("__awaiter",Ua);Uf("__generator",$a);Uf("__exportStar",jb);Uf("__createBinding",We);Uf("__values",mb);Uf("__read",Kb);Uf("__spread",Vb);Uf("__spreadArrays",
Ob);Uf("__spreadArray",kc);Uf("__await",xc);Uf("__asyncGenerator",$b);Uf("__asyncDelegator",pc);Uf("__asyncValues",lc);Uf("__makeTemplateObject",Rc);Uf("__importStar",Uc);Uf("__importDefault",Dd);Uf("__classPrivateFieldGet",Td);Uf("__classPrivateFieldSet",lf);Uf("__classPrivateFieldIn",re)})}}),Fq={};((a,d)=>{for(var m in d)Bg(a,m,{get:d[m],enumerable:!0})})(Fq,{App:()=>ED,PreviewManager:()=>$w,generateJSXFromModel:()=>Yn,generateSVGFromModel:()=>En});Ta.exports=(a=>zm(Bg({},"__esModule",{value:!0}),
a))(Fq);var hs=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";a.Gray="gray";a.Default="";return a})(hs||{}),nr=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(nr||{}),lr,Bu=new Uint8Array(16),$g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,pl=[];for(let a=0;256>a;++a)pl.push((a+256).toString(16).slice(1));var jt,$n,Zo=0,Gq=0,hk=function(a,d,m){m=d&&m||0;const L=
d||Array(16);a=a||{};let ha=a.node||jt;var na=void 0!==a.clockseq?a.clockseq:$n;if(null==ha||null==na){var ua=a.random||(a.rng||u)();null==ha&&(ha=jt=[ua[0]|1,ua[1],ua[2],ua[3],ua[4],ua[5]]);null==na&&(na=$n=(ua[6]<<8|ua[7])&16383)}ua=void 0!==a.msecs?a.msecs:Date.now();let Ha=void 0!==a.nsecs?a.nsecs:Gq+1;const Ua=ua-Zo+(Ha-Gq)/1E4;0>Ua&&void 0===a.clockseq&&(na=na+1&16383);(0>Ua||ua>Zo)&&void 0===a.nsecs&&(Ha=0);if(1E4<=Ha)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Zo=ua;Gq=
Ha;$n=na;ua+=122192928E5;a=(1E4*(ua&268435455)+Ha)%4294967296;L[m++]=a>>>24&255;L[m++]=a>>>16&255;L[m++]=a>>>8&255;L[m++]=a&255;a=ua/4294967296*1E4&268435455;L[m++]=a>>>8&255;L[m++]=a&255;L[m++]=a>>>24&15|16;L[m++]=a>>>16&255;L[m++]=na>>>8|128;L[m++]=na&255;for(na=0;6>na;++na)L[m+na]=ha[na];return d||W(L)},Vh=class{static clamp(a,d,m){return Math.max(d,"undefined"!==typeof m?Math.min(a,m):a)}static clampV(a,d,m){return a.map(L=>m?Vh.clamp(L,d,m):Vh.clamp(L,d))}static cross(a,d,m){return(d[0]-a[0])*
(m[1]-a[1])-(m[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},Hd=Vh;Hd.neg=a=>[-a[0],-a[1]];Hd.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];Hd.addScalar=(a,d)=>[a[0]+d,a[1]+d];Hd.sub=(a,d)=>[a[0]-d[0],a[1]-d[1]];Hd.subScalar=(a,d)=>[a[0]-d,a[1]-d];Hd.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];Hd.mul=(a,d)=>[a[0]*d,a[1]*d];Hd.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];Hd.div=(a,d)=>[a[0]/d,a[1]/d];Hd.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];Hd.per=a=>[a[1],-a[0]];Hd.dpr=(a,d)=>a[0]*d[0]+a[1]*
d[1];Hd.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];Hd.len2=a=>a[0]*a[0]+a[1]*a[1];Hd.len=a=>Math.hypot(a[0],a[1]);Hd.pry=(a,d)=>Vh.dpr(a,d)/Vh.len(d);Hd.uni=a=>Vh.div(a,Vh.len(a));Hd.normalize=a=>Vh.uni(a);Hd.tangent=(a,d)=>Vh.uni(Vh.sub(a,d));Hd.dist2=(a,d)=>Vh.len2(Vh.sub(a,d));Hd.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);Hd.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let m=1/Math.max(d[0],d[1]);m*=1.29289-(d[0]+d[1])*m*.29289;return[a[0]*m,a[1]*m]};Hd.ang=(a,d)=>Math.atan2(Vh.cpr(a,
d),Vh.dpr(a,d));Hd.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);Hd.med=(a,d)=>Vh.mul(Vh.add(a,d),.5);Hd.rot=(a,d=0)=>[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];Hd.rotWith=(a,d,m=0)=>{if(0===m)return a;const L=Math.sin(m);m=Math.cos(m);const ha=a[0]-d[0];a=a[1]-d[1];return[ha*m-a*L+d[0],ha*L+a*m+d[1]]};Hd.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];Hd.lrp=(a,d,m)=>Vh.add(a,Vh.mul(Vh.sub(d,a),m));Hd.int=(a,d,m,L,ha=1)=>{m=(Vh.clamp(m,L)-m)/(L-m);return Vh.add(Vh.mul(a,1-m),Vh.mul(d,
ha))};Hd.ang3=(a,d,m)=>{a=Vh.vec(d,a);d=Vh.vec(d,m);return Vh.ang(a,d)};Hd.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];Hd.rescale=(a,d)=>{const m=Vh.len(a);return[d*a[0]/m,d*a[1]/m]};Hd.isLeft=(a,d,m)=>(d[0]-a[0])*(m[1]-a[1])-(m[0]-a[0])*(d[1]-a[1]);Hd.clockwise=(a,d,m)=>0<Vh.isLeft(a,d,m);Hd.toFixed=a=>a.map(d=>Math.round(100*d)/100);Hd.nearestPointOnLineThroughPoint=(a,d,m)=>Vh.add(a,Vh.mul(d,Vh.pry(Vh.sub(m,a),d)));Hd.distanceToLineThroughPoint=(a,d,m)=>Vh.dist(m,Vh.nearestPointOnLineThroughPoint(a,
d,m));Hd.nearestPointOnLineSegment=(a,d,m,L=!0)=>{const ha=Vh.uni(Vh.sub(d,a));m=Vh.add(a,Vh.mul(ha,Vh.pry(Vh.sub(m,a),ha)));if(L){if(m[0]<Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(m[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(m[1]<Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(m[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return m};Hd.distanceToLineSegment=(a,d,m,L=!0)=>Vh.dist(m,Vh.nearestPointOnLineSegment(a,d,m,L));Hd.nudge=(a,d,m)=>Vh.isEqual(a,d)?a:Vh.add(a,Vh.mul(Vh.uni(Vh.sub(d,a)),m));
Hd.nudgeAtAngle=(a,d,m)=>[Math.cos(d)*m+a[0],Math.sin(d)*m+a[1]];Hd.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];Hd.pointsBetween=(a,d,m=6)=>Array.from(Array(m)).map((L,ha)=>{L=ha/(m-1);ha=Math.min(1,.5+Math.abs(.5-L));return[...Vh.lrp(a,d,L),ha]});Hd.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);Hd.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};Hd.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];Hd.min=(...a)=>[Math.min(...a.map(d=>d[0])),
Math.min(...a.map(d=>d[1]))];var me=Hd,Qf=class{static getRectangleSides(a,d,m=0){const L=[a[0]+d[0]/2,a[1]+d[1]/2],ha=Hd.rotWith(a,L,m),na=Hd.rotWith(Hd.add(a,[d[0],0]),L,m),ua=Hd.rotWith(Hd.add(a,d),L,m);a=Hd.rotWith(Hd.add(a,[0,d[1]]),L,m);return[["top",[ha,na]],["right",[na,ua]],["bottom",[ua,a]],["left",[a,ha]]]}static getBoundsSides(a){return Qf.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+
2*d,height:a.height+2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return Qf.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let m=Infinity,L=Infinity,ha=
-Infinity,na=-Infinity;if(2>a.length)L=m=0,na=ha=1;else for(const ua of a)m=Math.min(ua[0],m),L=Math.min(ua[1],L),ha=Math.max(ua[0],ha),na=Math.max(ua[1],na);return 0!==d?Qf.getBoundsFromPoints(a.map(ua=>Hd.rotWith(ua,[(m+ha)/2,(L+na)/2],d))):{minX:m,minY:L,maxX:ha,maxY:na,width:Math.max(1,ha-m),height:Math.max(1,na-L)}}static centerBounds(a,d){const m=Qf.getBoundsCenter(a);return Qf.translateBounds(a,[d[0]-m[0],d[1]-m[1]])}static snapBoundsToGrid(a,d){const m=Math.round(a.minX/d)*d,L=Math.round(a.minY/
d)*d,ha=Math.round(a.maxX/d)*d;a=Math.round(a.maxY/d)*d;return{minX:m,minY:L,maxX:ha,maxY:a,width:Math.max(1,ha-m),height:Math.max(1,a-L)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+d[1],maxX:a.maxX+d[0],maxY:a.maxY+d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const m=Qf.getBoundsCenter(a);return Qf.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[m[0]*d,m[1]*d])}static divideBounds(a,d){const m=Qf.getBoundsCenter(a);
return Qf.centerBounds({minX:a.minX/d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[m[0]/d,m[1]/d])}static getRotatedBounds(a,d=0){a=Qf.getRotatedCorners(a,d);let m=d=Infinity,L=-Infinity,ha=-Infinity;for(const na of a)d=Math.min(na[0],d),m=Math.min(na[1],m),L=Math.max(na[0],L),ha=Math.max(na[1],ha);return{minX:d,minY:m,maxX:L,maxY:ha,width:Math.max(1,L-d),height:Math.max(1,ha-m),rotation:0}}static getRotatedEllipseBounds(a,d,m,L,ha=0){var na=Math.cos(ha);const ua=
Math.sin(ha);ha=Math.hypot(m*na,L*ua);na=Math.hypot(m*ua,L*na);return{minX:a+m-ha,minY:d+L-na,maxX:a+m+ha,maxY:d+L+na,width:2*ha,height:2*na}}static getExpandedBounds(a,d){const m=Math.min(a.minX,d.minX),L=Math.min(a.minY,d.minY),ha=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:m,minY:L,maxX:ha,maxY:a,width:Math.abs(ha-m),height:Math.abs(a-L)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let m=1;m<a.length;m++)d=Qf.getExpandedBounds(d,a[m]);return d}static getRotatedCorners(a,
d=0){const m=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(L=>Hd.rotWith(L,m,d)):a}static getTransformedBoundingBox(a,d,m,L=0,ha=!1){const [na,ua]=[a.minX,a.minY],[Ha,Ua]=[a.maxX,a.maxY];let [$a,jb]=[a.minX,a.minY],[mb,Kb]=[a.maxX,a.maxY];if("center"===d)return{minX:$a+m[0],minY:jb+m[1],maxX:mb+m[0],maxY:Kb+m[1],width:mb-$a,height:Kb-jb,scaleX:1,scaleY:1};const [Vb,Ob]=Hd.rot(m,-L);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":jb+=
Ob;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Kb+=Ob}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":$a+=Vb;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":mb+=Vb}var kc=Ha-na;const xc=Ua-ua;var $b=(mb-$a)/kc,pc=(Kb-jb)/xc;a=0>$b;m=0>pc;var lc=Math.abs(mb-$a),Rc=Math.abs(Kb-jb);if(ha)switch(ha=kc/xc,kc=ha<lc/Rc,pc=1/ha*(0>pc?1:-1)*lc,$b=Rc*(0>$b?1:-1)*ha,d){case "top_left_corner":kc?jb=Kb+pc:$a=mb+$b;break;case "top_right_corner":kc?
jb=Kb+pc:mb=$a-$b;break;case "bottom_right_corner":kc?Kb=jb-pc:mb=$a-$b;break;case "bottom_left_corner":kc?Kb=jb-pc:$a=mb+$b;break;case "bottom_edge":case "top_edge":lc=($a+mb)/2;Rc*=ha;$a=lc-Rc/2;mb=lc+Rc/2;break;case "left_edge":case "right_edge":Rc=(jb+Kb)/2,lc/=ha,jb=Rc-lc/2,Kb=Rc+lc/2}if(0!==L%(2*Math.PI)){lc=[0,0];Rc=Hd.med([na,ua],[Ha,Ua]);$b=Hd.med([$a,jb],[mb,Kb]);switch(d){case "top_left_corner":lc=Hd.sub(Hd.rotWith([mb,Kb],$b,L),Hd.rotWith([Ha,Ua],Rc,L));break;case "top_right_corner":lc=
Hd.sub(Hd.rotWith([$a,Kb],$b,L),Hd.rotWith([na,Ua],Rc,L));break;case "bottom_right_corner":lc=Hd.sub(Hd.rotWith([$a,jb],$b,L),Hd.rotWith([na,ua],Rc,L));break;case "bottom_left_corner":lc=Hd.sub(Hd.rotWith([mb,jb],$b,L),Hd.rotWith([Ha,ua],Rc,L));break;case "top_edge":lc=Hd.sub(Hd.rotWith(Hd.med([$a,Kb],[mb,Kb]),$b,L),Hd.rotWith(Hd.med([na,Ua],[Ha,Ua]),Rc,L));break;case "left_edge":lc=Hd.sub(Hd.rotWith(Hd.med([mb,jb],[mb,Kb]),$b,L),Hd.rotWith(Hd.med([Ha,ua],[Ha,Ua]),Rc,L));break;case "bottom_edge":lc=
Hd.sub(Hd.rotWith(Hd.med([$a,jb],[mb,jb]),$b,L),Hd.rotWith(Hd.med([na,ua],[Ha,ua]),Rc,L));break;case "right_edge":lc=Hd.sub(Hd.rotWith(Hd.med([$a,jb],[$a,Kb]),$b,L),Hd.rotWith(Hd.med([na,ua],[na,Ua]),Rc,L))}[$a,jb]=Hd.sub([$a,jb],lc);[mb,Kb]=Hd.sub([mb,Kb],lc)}mb<$a&&([mb,$a]=[$a,mb]);Kb<jb&&([Kb,jb]=[jb,Kb]);return{minX:$a,minY:jb,maxX:mb,maxY:Kb,width:mb-$a,height:Kb-jb,scaleX:(mb-$a)/(Ha-na||1)*(a?-1:1),scaleY:(Kb-jb)/(Ua-ua||1)*(m?-1:1)}}static getTransformAnchor(a,d,m){let L=a;switch(a){case "top_left_corner":L=
d&&m?"bottom_right_corner":d?"top_right_corner":m?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":L=d&&m?"bottom_left_corner":d?"top_left_corner":m?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":L=d&&m?"top_left_corner":d?"bottom_left_corner":m?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":L=d&&m?"top_right_corner":d?"bottom_right_corner":m?"top_left_corner":"top_right_corner"}return L}static getRelativeTransformedBoundingBox(a,
d,m,L,ha){L=a.minX+(L?d.maxX-m.maxX:m.minX-d.minX)/d.width*a.width;ha=a.minY+(ha?d.maxY-m.maxY:m.minY-d.minY)/d.height*a.height;const na=m.width/d.width*a.width;a=m.height/d.height*a.height;return{minX:L,minY:ha,maxX:L+na,maxY:ha+a,width:na,height:a}}static getRotatedSize(a,d){const m=Hd.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(L=>Hd.rotWith(L,m,d));a=Qf.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=
Qf.getBoundsCenter(a);return Cf(qe({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=[Infinity,Infinity];a.forEach(m=>{d[0]=Math.min(d[0],m[0]);d[1]=Math.min(d[1],m[1])});return d}static getTLSnapPoints(a,d,m){const L=qe({},a);a=[0,0];const ha=[],na={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},ua=["midX","minX","maxX"],Ha=["midY","minY","maxY"];d=d.map(Kb=>
{const Vb=ua.flatMap((kc,xc)=>ua.map(($b,pc)=>{const lc=L[kc]-Kb[$b];return{f:kc,t:$b,gap:lc,distance:Math.abs(lc),isCareful:0===xc||3===xc+pc}})),Ob=Ha.flatMap((kc,xc)=>Ha.map(($b,pc)=>{const lc=L[kc]-Kb[$b];return{f:kc,t:$b,gap:lc,distance:Math.abs(lc),isCareful:0===xc||3===xc+pc}}));return[Kb,Vb,Ob]});let Ua=Infinity,$a=Infinity,jb=Infinity,mb=Infinity;d.forEach(([,Kb,Vb])=>{Kb.forEach(Ob=>{Ob.distance<m&&Ob.distance<jb&&(jb=Ob.distance,Ua=Ob.gap)});Vb.forEach(Ob=>{Ob.distance<m&&Ob.distance<mb&&
(mb=Ob.distance,$a=Ob.gap)})});d.forEach(([Kb,Vb,Ob])=>{Infinity!==Ua&&Vb.forEach(kc=>{2>Math.abs(kc.gap-Ua)&&(na[kc.f]=Cf(qe({},na[kc.f]),{isSnapped:!0,to:Kb[kc.t],B:Kb,distance:kc.distance}))});Infinity!==$a&&Ob.forEach(kc=>{2>Math.abs(kc.gap-$a)&&(na[kc.f]=Cf(qe({},na[kc.f]),{isSnapped:!0,to:Kb[kc.t],B:Kb,distance:kc.distance}))})});a[0]=Infinity===Ua?0:Ua;a[1]=Infinity===$a?0:$a;L.minX-=a[0];L.midX-=a[0];L.maxX-=a[0];L.minY-=a[1];L.midY-=a[1];L.maxY-=a[1];ua.forEach(Kb=>{Kb=na[Kb];if(Kb.isSnapped){var {id:Vb,
B:Ob}=Kb;Kb=L[Vb];ha.push("minX"===Vb?[[Kb,L.midY],[Kb,Ob.minY],[Kb,Ob.maxY]]:[[Kb,L.minY],[Kb,L.maxY],[Kb,Ob.minY],[Kb,Ob.maxY]])}});Ha.forEach(Kb=>{Kb=na[Kb];if(Kb.isSnapped){var {id:Vb,B:Ob}=Kb;Kb=L[Vb];ha.push("midY"===Vb?[[L.midX,Kb],[Ob.minX,Kb],[Ob.maxX,Kb]]:[[L.minX,Kb],[L.maxX,Kb],[Ob.minX,Kb],[Ob.maxX,Kb]])}});return{offset:a,snapLines:ha}}static ensureRatio(a,d){const {width:m,height:L}=a,ha=qe({},a);m/L<d?(ha.width=L*d,ha.maxX+=m-a.width):(ha.height=m/d,ha.maxY+=L-a.height);return ha}static getDistributions(a,
d){var m=a.map(na=>{const ua=na.getBounds();return{id:na.id,point:[ua.minX,ua.minY],bounds:ua,center:na.getCenter()}});a=m.length;var L=Qf.getCommonBounds(m.map(({bounds:na})=>na));const ha=[];switch(d){case "horizontal":d=m.reduce((na,ua)=>na+ua.bounds.width,0);if(d>L.width){const na=m.sort(($a,jb)=>$a.bounds.minX-jb.bounds.minX)[0],ua=m.sort(($a,jb)=>jb.bounds.maxX-$a.bounds.maxX)[0];L=m.filter($a=>$a!==na&&$a!==ua).sort(($a,jb)=>$a.center[0]-jb.center[0]);const Ha=(ua.center[0]-na.center[0])/(a-
1),Ua=na.center[0]+Ha;L.forEach(({id:$a,point:jb,bounds:mb},Kb)=>{ha.push({id:$a,prev:jb,next:[Ua+Ha*Kb-mb.width/2,mb.minY]})})}else{m=m.sort((Ha,Ua)=>Ha.center[0]-Ua.center[0]);let na=L.minX;const ua=(L.width-d)/(a-1);m.forEach(({id:Ha,point:Ua,bounds:$a})=>{ha.push({id:Ha,prev:Ua,next:[na,$a.minY]});na+=$a.width+ua})}break;case "vertical":if(d=m.reduce((na,ua)=>na+ua.bounds.height,0),d>L.height){const na=m.sort(($a,jb)=>$a.bounds.minY-jb.bounds.minY)[0],ua=m.sort(($a,jb)=>jb.bounds.maxY-$a.bounds.maxY)[0];
L=m.filter($a=>$a!==na&&$a!==ua).sort(($a,jb)=>$a.center[1]-jb.center[1]);const Ha=(ua.center[1]-na.center[1])/(a-1),Ua=na.center[1]+Ha;L.forEach(({id:$a,point:jb,bounds:mb},Kb)=>{ha.push({id:$a,prev:jb,next:[mb.minX,Ua+Ha*Kb-mb.height/2]})})}else{m=m.sort((Ha,Ua)=>Ha.center[1]-Ua.center[1]);let na=L.minY;const ua=(L.height-d)/(a-1);m.forEach(({id:Ha,point:Ua,bounds:$a})=>{ha.push({id:Ha,prev:Ua,next:[$a.minX,na]});na+=$a.height+ua})}}return ha}static getPackedDistributions(a){const d=Qf.getCommonBounds(a.map(({bounds:ha})=>
ha)),m=[d.minX,d.minY],L=Object.fromEntries(a.map(ha=>[ha.id,[ha.bounds.minX,ha.bounds.minY]]));a=a.filter(ha=>{var na,ua,Ha,Ua;return!((null==(ua=null==(na=ha.props.handles)?void 0:na.start)?0:ua.bindingId)||(null==(Ua=null==(Ha=ha.props.handles)?void 0:Ha.end)?0:Ua.bindingId))}).map(ha=>{const na=ha.getBounds();return{id:ha.id,w:na.width+16,h:na.height+16,x:na.minX,y:na.minY}});y(a);return a.map(({id:ha,x:na,y:ua})=>({id:ha,prev:L[ha],next:[na+m[0],ua+m[1]]}))}},vp=class{static pointInCircle(a,
d,m){return Hd.dist(a,d)<=m}static pointInEllipse(a,d,m,L,ha=0){ha=ha||0;var na=Math.cos(ha);ha=Math.sin(ha);d=Hd.sub(a,d);a=na*d[0]+ha*d[1];na=ha*d[0]-na*d[1];return 1>=a*a/(m*m)+na*na/(L*L)}static pointInRect(a,d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let m=0;d.forEach((L,ha)=>{ha=d[(ha+1)%d.length];L[1]<=a[1]?ha[1]>a[1]&&0<Hd.cross(L,ha,a)&&(m+=1):ha[1]<=a[1]&&0>Hd.cross(L,ha,a)&&--m});return 0!==m}static pointInBounds(a,d){return!(a[0]<d.minX||
a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,m=3){for(let L=1;L<d.length;L++)if(Hd.distanceToLineSegment(d[L-1],d[L],a)<m)return!0;return!1}static _getSqSegDist(a,d,m){let L=d[0];d=d[1];let ha=m[0]-L,na=m[1]-d;if(0!==ha||0!==na){const ua=((a[0]-L)*ha+(a[1]-d)*na)/(ha*ha+na*na);1<ua?(L=m[0],d=m[1]):0<ua&&(L+=ha*ua,d+=na*ua)}ha=a[0]-L;na=a[1]-d;return ha*ha+na*na}static _simplifyStep(a,d,m,L,ha){let na=L,ua=-1;for(let Ha=d+1;Ha<m;Ha++){const Ua=vp._getSqSegDist(a[Ha],a[d],a[m]);
Ua>na&&(ua=Ha,na=Ua)}-1<ua&&na>L&&(1<ua-d&&vp._simplifyStep(a,d,ua,L,ha),ha.push(a[ua]),1<m-ua&&vp._simplifyStep(a,ua,m,L,ha))}static simplify2(a,d=1){if(2>=a.length)return a;d*=d;var m=a[0],L=a[1];const ha=[m];for(let na=1,ua=a.length;na<ua;na++)L=a[na],(L[0]-m[0])*(L[0]-m[0])+(L[1]-m[1])*(L[1]-m[1])>d&&(ha.push(L),m=L);m!==L&&ha.push(L);m=ha.length-1;L=[ha[0]];vp._simplifyStep(ha,0,m,d,L);L.push(ha[m],a[a.length-1]);return L}static pointNearToPolyline(a,d,m=8){const L=d.length;for(let ha=1;ha<L;ha++)if(Hd.distanceToLineSegment(d[ha-
1],d[ha],a)<m)return!0;return!1}},tk=vp;kb(tk,"simplify",(a,d=1)=>{var m=a.length;const L=a[0],ha=a[m-1],[na,ua]=L,[Ha,Ua]=ha;if(2<m){let $a=0,jb=0;const mb=Hd.len2([Ua-ua,Ha-na]);for(let Kb=1;Kb<m-1;Kb++){const [Vb,Ob]=a[Kb],kc=Math.pow(Vb*(Ua-ua)+na*(Ob-Ua)+Ha*(ua-Ob),2)/mb;$a>kc||($a=kc,jb=Kb)}if($a>d)return m=vp.simplify(a.slice(0,jb+1),d),a=vp.simplify(a.slice(jb+1),d),m.concat(a.slice(1))}return[L,ha]});var sl=Math.PI,In=sl/2,Gk=2*sl,Hq={},lt={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",
right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},cm=class{static circleFromThreePoints(a,d,m){const [L,ha]=a,[na,ua]=d,[Ha,Ua]=m;d=L*(ua-Ua)-ha*(na-Ha)+na*Ua-Ha*ua;a=-((L*L+ha*ha)*(Ua-ua)+(na*na+
ua*ua)*(ha-Ua)+(Ha*Ha+Ua*Ua)*(ua-ha))/(2*d);d=-((L*L+ha*ha)*(na-Ha)+(na*na+ua*ua)*(Ha-L)+(Ha*Ha+Ua*Ua)*(L-na))/(2*d);return[a,d,Math.hypot(a-L,d-ha)]}static perimeterOfEllipse(a,d){const m=Math.pow(a-d,2)/Math.pow(a+d,2);return sl*(a+d)*(1+3*m/(10+Math.sqrt(4-3*m)))}static shortAngleDist(a,d){a=(d-a)%Gk;return 2*a%Gk-a}static longAngleDist(a,d){return Gk-cm.shortAngleDist(a,d)}static lerpAngles(a,d,m){return a+cm.shortAngleDist(a,d)*m}static angleDelta(a,d){return cm.shortAngleDist(a,d)}static getSweep(a,
d,m){return cm.angleDelta(me.angle(a,d),me.angle(a,m))}static clampRadians(a){return(Gk+a)%Gk}static snapAngleToSegments(a,d){d=Gk/d;a=Math.floor((cm.clampRadians(a)+d/2)/d)*d%Gk;a<sl&&(a+=Gk);a>sl&&(a-=Gk);return a}static isAngleBetween(a,d,m){if(m===a||m===d)return!0;d=(d-a+In)%In;return d<=sl!==(m-a+In)%In>d}static degreesToRadians(a){return a*sl/180}static radiansToDegrees(a){return 180*a/sl}static getArcLength(a,d,m,L){a=cm.getSweep(a,m,L);return a/Gk*Gk*d}static getSweepFlag(a,d,m){m=me.angle(a,
m);return 0<(me.angle(a,d)-m+3*sl)%Gk-sl?0:1}static getLargeArcFlag(a,d,m){a=me.angle(m,a);d=(me.angle(m,d)-a+3*sl)%Gk-sl;return Math.abs(d)>In?0:1}static getArcDashOffset(a,d,m,L,ha){const na=cm.getSweepFlag(a,m,L);d=cm.getArcLength(a,d,m,L);return-(0>na?d:Gk*a[2]-d)/2+ha}static getEllipseDashOffset(a,d){return-(Gk*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},Xk=class{static getPolygonCentroid(a){var d=
a.map(m=>m[0]);a=a.map(m=>m[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+Math.max(...a);return[d?d/2:0,a?a/2:0]}};kb(Xk,"getEdges",a=>{const d=a.length;return a.map((m,L)=>[m,a[(L+1)%d]])});kb(Xk,"getEdgeOutwardNormal",(a,d)=>me.per(me.uni(me.sub(d,a))));kb(Xk,"getEdgeInwardNormal",(a,d)=>me.neg(Xk.getEdgeOutwardNormal(a,d)));kb(Xk,"getOffsetEdge",(a,d,m)=>{m=me.mul(me.per(me.uni(me.sub(d,a))),m);return[me.add(a,m),me.add(d,m)]});kb(Xk,"getOffsetEdges",(a,d)=>a.map(([m,L])=>Xk.getOffsetEdge(m,
L,d)));kb(Xk,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[me.add(a,[-d,-d]),me.add(a,[d,-d]),me.add(a,[d,d]),me.add(a,[-d,d])];if(2===a.length){const [m,L]=a;return[...Xk.getOffsetEdge(m,L,d),...Xk.getOffsetEdge(L,m,d)]}return Xk.getOffsetEdges(Xk.getEdges(a),d).flatMap((m,L,ha)=>{{L=ha[(L+1)%ha.length];const na=Hd.slope(m[0],m[1]);ha=Hd.slope(L[0],L[1]);na!==ha?Number.isNaN(na)&&!Number.isNaN(ha)?m=[m[0][0],(m[0][0]-L[0][0])*
ha+L[0][1]]:Number.isNaN(ha)&&!Number.isNaN(na)?m=[L[0][0],(L[0][0]-m[0][0])*na+m[0][1]]:(m=(na*m[0][0]-ha*L[0][0]+L[0][1]-m[0][1])/(na-ha),m=[m,ha*(m-L[0][0])+L[0][1]]):m=void 0}if(void 0===m)throw Error("Expected an intersection");return m})});kb(Xk,"getPolygonVertices",(a,d,m=0,L=1)=>{a=me.div(a,2);const [ha,na]=[Math.max(1,a[0]-m),Math.max(1,a[1]-m)];m=[];for(let $a=0,jb=Gk/d;$a<d;$a++){var ua=(-In+$a*jb)%Gk,Ha=(-In+($a+1)*jb)%Gk;ua=me.add(a,[ha*Math.cos(ua),na*Math.sin(ua)]);Ha=me.add(a,[ha*
Math.cos(Ha),na*Math.sin(Ha)]);var Ua=me.med(ua,Ha);Ua=me.nudge(Ua,a,me.dist(a,Ua)*(1-L));m.push(ua,Ua,Ha)}return m});kb(Xk,"getTriangleVertices",(a,d=0,m=1)=>{const [L,ha]=a;var na=1-m;a=[L/2,d/2];m=[L-d,ha-d];d=[d/2,ha-d];const ua=Xk.getPolygonCentroid([a,m,d]),Ha=me.med(a,m),Ua=me.med(m,d),$a=me.med(d,a),jb=me.dist(Ha,ua)*na,mb=me.dist(Ua,ua)*na;na*=me.dist($a,ua);return[a,jb?me.nudge(Ha,ua,jb):Ha,m,mb?me.nudge(Ua,ua,mb):Ua,d,na?me.nudge($a,ua,na):$a]});kb(Xk,"getStarVertices",(a,d,m,L=1)=>{const ha=
me.div(d,2),na=me.mul(ha,L/2),ua=Gk/m/2;return Array.from(Array(2*m)).map((Ha,Ua)=>{Ha=-In+Ua*ua;const [$a,jb]=Ua%2?na:ha;return me.add(a,[$a*Math.cos(Ha),jb*Math.sin(Ha)])})});var zu=class{static getCurvedPathForPolygon(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],m=a.length;for(let L=1;L<m;L++){const [ha,na]=a[L],[ua,Ha]=a[(L+1)%m];d.push(ha,na,(ha+ua)/2,(na+Ha)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>
a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],m=a.length;for(let L=1;L<m-1;L++){const [ha,na]=a[L],[ua,Ha]=a[L+1];d.push(ha,na,(ha+ua)/2,(na+Ha)/2)}return d.join(" ")}static getSvgPathFromStroke(a,d=!0){const m=a.length;if(4>m)return"";let L=a[0],ha=a[1];var na=a[2];na=`M${L[0].toFixed(2)},${L[1].toFixed(2)} Q${ha[0].toFixed(2)},${ha[1].toFixed(2)} ${((ha[0]+na[0])/2).toFixed(2)},${((ha[1]+na[1])/2).toFixed(2)} T`;for(let ua=2,Ha=m-1;ua<
Ha;ua++)L=a[ua],ha=a[ua+1],na+=`${((L[0]+ha[0])/2).toFixed(2)},${((L[1]+ha[1])/2).toFixed(2)} `;d&&(na+="Z");return na}static getSvgPathFromStrokePoints(a,d=!1){const m=a.length;if(4>m)return"";let L=a[0].point,ha=a[1].point;var na=a[2].point;na=`M${L[0].toFixed(2)},${L[1].toFixed(2)} Q${ha[0].toFixed(2)},${ha[1].toFixed(2)} ${((ha[0]+na[0])/2).toFixed(2)},${((ha[1]+na[1])/2).toFixed(2)} T`;for(let ua=2,Ha=m-1;ua<Ha;ua++)L=a[ua].point,ha=a[ua+1].point,na+=`${((L[0]+ha[0])/2).toFixed(2)},${((L[1]+
ha[1])/2).toFixed(2)} `;d&&(na+="Z");return na}};kb(zu,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var nx={},ox=Object.assign,Zp=Object.getOwnPropertyDescriptor,yp=Object.defineProperty,$p=Object.prototype,fa=[];Object.freeze(fa);var qa={};Object.freeze(qa);var Ga="undefined"!==typeof Proxy,hb=Object.toString(),Eb=function(){},oc="undefined"!==typeof Object.getOwnPropertySymbols,Qc="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:oc?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:
Object.getOwnPropertyNames,ed=Object.getOwnPropertyDescriptors||function(a){var d={};Qc(a).forEach(function(m){d[m]=Zp(a,m)});return d},Nd=Symbol("mobx-stored-annotations"),ke=Symbol("mobx administration"),Ng=function(){function a(m){void 0===m&&(m="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=Ej.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=m}var d=a.prototype;d.onBO=
function(){this.onBOL&&this.onBOL.forEach(function(m){return m()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};d.reportObserved=function(){return Ib(this)};d.reportChanged=function(){gd();dc(this);sd()};d.toString=function(){return this.name_};return a}(),ei=E("Atom",Ng),Ef={identity:function(a,d){return a===d},structural:function(a,d){return ya(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,
d){return ya(a,d,1)}},lh="override",ii=sb(),Gh={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Gh);var ve=ob("observable"),$d=ob("observable.ref",{enhancer:Wa}),te=ob("observable.shallow",{enhancer:function(a,d,m){if(void 0===a||null===a||fe(a)||Vc(a)||yr(a)||Hs(a))return a;if(Array.isArray(a))return ef.array(a,{name:m,deep:!1});if(P(a))return ef.object(a,void 0,{name:m,deep:!1});if(M(a))return ef.map(a,{name:m,deep:!1});if(Q(a))return ef.set(a,{name:m,deep:!1})}}),yf=ob("observable.struct",
{enhancer:function(a,d){return ya(a,d)?d:a}}),Hf=Ba(ve);Object.assign(Rb,Hf);var ri={box:function(a,d){d=d||Gh;return new Fs(a,lb(d),d.name,!0,d.equals)},array:function(a,d){d=d||Gh;return(!1===ig.useProxies||!1===d.proxy?Ne:ab)(a,lb(d),d.name)},map:function(a,d){d=d||Gh;return new Oz(a,lb(d),d.name)},set:function(a,d){d=d||Gh;return new Pz(a,lb(d),d.name)},object:function(a,d,m){if(!1===ig.useProxies||!1===(null==m?void 0:m.proxy))m=ld({},m);else{var L={},ha,na;C();L=ld(L,m);m=null!=(na=(ha=L[ke]).proxy_)?
na:ha.proxy_=new Proxy(L,lE)}return yc(m,a,d)},ref:Ba($d),shallow:Ba(te),deep:Hf,struct:Ba(yf)},ef=ox(Rb,ri),ji=Va("computed"),Li=Va("computed.struct",{equals:Ef.structural}),Xf=function(a,d){if(I(d))return Ka(a,d,ji);if(P(a))return Ba(Va("computed",a));d=P(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new Iu(d)};Object.assign(Xf,ji);Xf.struct=Ba(Li);var tp,Iv,Jv=0,ZD=1,$D=null!=(tp=null==(Iv=Zp(function(){},"name"))?void 0:Iv.configurable)?tp:!1,Iz={value:"action",configurable:!0,writable:!1,
enumerable:!1};var aE=Symbol.toPrimitive;var Fs=function(a){function d(L,ha,na,ua,Ha){void 0===na&&(na="ObservableValue");void 0===Ha&&(Ha=Ef["default"]);ua=a.call(this,na)||this;ua.enhancer=void 0;ua.hasUnreportedChange_=!1;ua.interceptors_=void 0;ua.changeListeners_=void 0;ua.value_=void 0;ua.dehancer=void 0;ua.enhancer=ha;ua.name_=na;ua.equals=Ha;ua.value_=ha(L,void 0,na);return ua}ca(d,a);var m=d.prototype;m.dehanceValue=function(L){return void 0!==this.dehancer?this.dehancer(L):L};m.set=function(L){L=
this.prepareNewValue_(L);L!==ig.UNCHANGED&&this.setNewValue_(L)};m.prepareNewValue_=function(L){if(Fb(this)){L=Ra(this,{object:this,type:hq,newValue:L});if(!L)return ig.UNCHANGED;L=L.newValue}L=this.enhancer(L,this.value_,this.name_);return this.equals(this.value_,L)?ig.UNCHANGED:L};m.setNewValue_=function(L){var ha=this.value_;this.value_=L;this.reportChanged();Pb(this)&&Jc(this,{type:hq,object:this,newValue:L,oldValue:ha})};m.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};
m.intercept_=function(L){return Qb(this,L)};m.observe_=function(L,ha){ha&&L({observableKind:"value",debugObjectName:this.name_,object:this,type:hq,newValue:this.value_,oldValue:void 0});return tc(this,L)};m.raw=function(){return this.value_};m.toJSON=function(){return this.get()};m.toString=function(){return this.name_+"["+this.value_+"]"};m.valueOf=function(){return ka(this.get())};m[aE]=function(){return this.valueOf()};return d}(Ng),bE=E("ObservableValue",Fs);var cE=Symbol.toPrimitive;var Iu=function(){function a(m){this.dependenciesState_=
Ej.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Ej.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Gs(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=yt.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=
void 0;m.get||f(31);this.derivation=m.get;this.name_=m.name||"ComputedValue";m.set&&(this.setter_=zb("ComputedValue-setter",m.set));this.equals_=m.equals||(m.compareStructural||m.struct?Ef.structural:Ef["default"]);this.scope_=m.context;this.requiresReaction_=m.requiresReaction;this.keepAlive_=!!m.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){pb(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(m){return m()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};
d.get=function(){this.isComputing_&&f(32,this.name_,this.derivation);if(0!==ig.inBatch||0!==this.observers_.size||this.keepAlive_){if(Ib(this),Ec(this)){var m=ig.trackingContext;this.keepAlive_&&!m&&(ig.trackingContext=this);this.trackAndCompute()&&Zb(this);ig.trackingContext=m}}else Ec(this)&&(this.warnAboutUntrackedRead_(),gd(),this.value_=this.computeValue_(!1),sd());m=this.value_;if(m instanceof Gs)throw m.cause;return m};d.set=function(m){if(this.setter_){this.isRunningSetter_&&f(33,this.name_);
this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,m)}finally{this.isRunningSetter_=!1}}else f(34,this.name_)};d.trackAndCompute=function(){var m=this.value_,L=this.dependenciesState_===Ej.NOT_TRACKING_,ha=this.computeValue_(!0);if(m=L||m instanceof Gs||ha instanceof Gs||!this.equals_(m,ha))this.value_=ha;return m};d.computeValue_=function(m){this.isComputing_=!0;var L=fc(!1);if(m)var ha=qc(this,this.derivation,this.scope_);else if(!0===ig.disableErrorBoundaries)ha=this.derivation.call(this.scope_);
else try{ha=this.derivation.call(this.scope_)}catch(na){ha=new Gs(na)}ig.allowStateChanges=L;this.isComputing_=!1;return ha};d.suspend_=function(){this.keepAlive_||(Gb(this),this.value_=void 0)};d.observe_=function(m,L){var ha=this,na=!0,ua=void 0;return Id(function(){var Ha=ha.get();if(!na||L){var Ua=Bb();m({observableKind:"computed",debugObjectName:ha.name_,type:hq,object:ha,newValue:Ha,oldValue:ua});ig.trackingDerivation=Ua}na=!1;ua=Ha})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+
"["+this.derivation.toString()+"]"};d.valueOf=function(){return ka(this.get())};d[cE]=function(){return this.valueOf()};return a}(),Ju=E("ComputedValue",Iu),Ej;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(Ej||={});var yt;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(yt||={});var Gs=function(a){this.cause=void 0;this.cause=a},Kv=function(){this.version=6;this.UNCHANGED=
{};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=
!0},Lv=!0,Jz=!1,ig=function(){var a=G();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&(Lv=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new Kv).version&&(Lv=!1);if(Lv){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED={}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new Kv}setTimeout(function(){Jz||f(35)},1);return new Kv}(),zt=function(){function a(m,L,ha,na){void 0===m&&(m="Reaction");this.requiresObservable_=this.errorHandler_=
this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Ej.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=yt.NONE;this.name_=m;this.onInvalidate_=L;this.errorHandler_=ha;this.requiresObservable_=na}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ig.pendingReactions.push(this),
0<ig.inBatch||ig.isRunningReactions||Mv(wb))};d.isScheduled=function(){return this.isScheduled_};d.runReaction_=function(){if(!this.isDisposed_){gd();this.isScheduled_=!1;var m=ig.trackingContext;ig.trackingContext=this;if(Ec(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(L){this.reportExceptionInDerivation_(L)}}ig.trackingContext=m;sd()}};d.track=function(m){if(!this.isDisposed_){gd();this.isRunning_=!0;var L=ig.trackingContext;ig.trackingContext=this;m=qc(this,m,void 0);ig.trackingContext=
L;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Gb(this);m instanceof Gs&&this.reportExceptionInDerivation_(m.cause);sd()}};d.reportExceptionInDerivation_=function(m){var L=this;if(this.errorHandler_)this.errorHandler_(m,this);else{if(ig.disableErrorBoundaries)throw m;ig.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",m);ig.globalReactionErrorHandlers.forEach(function(ha){return ha(m,L)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||
(gd(),Gb(this),sd()))};d.getDisposer_=function(){var m=this.dispose.bind(this);m[ke]=this;return m};d.toString=function(){return"Reaction["+this.name_+"]"};d.trace=function(m){void 0===m&&(m=!1);Ve(this,m)};return a}(),dE=100,Mv=function(a){return a()},Nv=E("Reaction",zt),Kz="action",Lz=Ma(Kz),eE=Ma("action.bound",{bound:!0}),Mz=Ma("autoAction",{autoAction:!0}),fE=Ma("autoAction.bound",{autoAction:!0,bound:!0}),Tg=od(!1);Object.assign(Tg,Lz);var Ku=od(!0);Object.assign(Ku,Mz);Tg.bound=Ba(eE);Ku.bound=
Ba(fE);var gE=function(a){return a()},hE="onBO",iE="onBUO",jE=0;ie.prototype=Object.create(Error.prototype);var Nz=ia("flow"),kE=ia("flow.bound",{bound:!0}),Lu=Object.assign(function(a,d){if(I(d))return Ka(a,d,Nz);var m=a.name||"\x3cunnamed flow\x3e";d=function(){var L=arguments,ha=++jE,na=Tg(m+" - runid: "+ha+" - init",a).apply(this,L),ua,Ha=void 0;L=new Promise(function(Ua,$a){function jb(Ob){Ha=void 0;try{var kc=Tg(m+" - runid: "+ha+" - yield "+Vb++,na.next).call(na,Ob)}catch(xc){return $a(xc)}Kb(kc)}
function mb(Ob){Ha=void 0;try{var kc=Tg(m+" - runid: "+ha+" - yield "+Vb++,na["throw"]).call(na,Ob)}catch(xc){return $a(xc)}Kb(kc)}function Kb(Ob){if(Z(null==Ob?void 0:Ob.then))Ob.then(Kb,$a);else{if(Ob.done)return Ua(Ob.value);Ha=Promise.resolve(Ob.value);return Ha.then(jb,mb)}}var Vb=0;ua=$a;jb(void 0)});L.cancel=Tg(m+" - runid: "+ha+" - cancel",function(){try{if(Ha){var Ua=Ha;Z(Ua.cancel)&&Ua.cancel()}var $a=na["return"](void 0),jb=Promise.resolve($a.value);jb.then(Eb,Eb);Z(jb.cancel)&&jb.cancel();
ua(new ie)}catch(mb){ua(mb)}});return L};d.isMobXFlow=!0;return d},Nz);Lu.bound=Ba(kE);var lE={has:function(a,d){return a[ke].has_(d)},get:function(a,d){return a[ke].get_(d)},set:function(a,d,m){var L;return I(d)?null!=(L=a[ke].set_(d,m,!0))?L:!0:!1},deleteProperty:function(a,d){var m;return I(d)?null!=(m=a[ke].delete_(d,!0))?m:!0:!1},defineProperty:function(a,d,m){var L;return null!=(L=a[ke].defineProperty_(d,m))?L:!0},ownKeys:function(a){return a[ke].ownKeys_()},preventExtensions:function(a){f(13)}},
hq="update",mE={get:function(a,d){var m=a[ke];return d===ke?m:"length"===d?m.getArrayLength_():"string"!==typeof d||isNaN(d)?S(Ov,d)?Ov[d]:a[d]:m.get_(parseInt(d))},set:function(a,d,m){var L=a[ke];"length"===d&&L.setArrayLength_(m);"symbol"===typeof d||isNaN(d)?a[d]=m:L.set_(parseInt(d),m);return!0},preventExtensions:function(){f(15)}},sx=function(){function a(m,L,ha,na){void 0===m&&(m="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=
this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=ha;this.legacyMode_=na;this.atom_=new Ng(m);this.enhancer_=function(ua,Ha){return L(ua,Ha,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};d.dehanceValues_=function(m){return void 0!==this.dehancer&&0<m.length?m.map(this.dehancer):m};d.intercept_=function(m){return Qb(this,m)};d.observe_=function(m,L){void 0===L&&(L=!1);L&&m({observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return tc(this,m)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(m){("number"!==typeof m||isNaN(m)||0>m)&&f("Out of range: "+m);var L=this.values_.length;if(m!==L)if(m>L){for(var ha=Array(m-L),na=0;na<m-L;na++)ha[na]=void 0;this.spliceWithArray_(L,0,ha)}else this.spliceWithArray_(m,
L-m)};d.updateArrayLength_=function(m,L){m!==this.lastKnownLength_&&f(16);this.lastKnownLength_+=L;this.legacyMode_&&0<L&&ge(m+L+1)};d.spliceWithArray_=function(m,L,ha){var na=this,ua=this.values_.length;void 0===m?m=0:m>ua?m=ua:0>m&&(m=Math.max(0,ua+m));L=1===arguments.length?ua-m:void 0===L||null===L?0:Math.max(0,Math.min(L,ua-m));void 0===ha&&(ha=fa);if(Fb(this)){var Ha=Ra(this,{object:this.proxy_,type:"splice",index:m,removedCount:L,added:ha});if(!Ha)return fa;L=Ha.removedCount;ha=Ha.added}ha=
0===ha.length?ha:ha.map(function(Ua){return na.enhancer_(Ua,void 0)});this.legacyMode_&&this.updateArrayLength_(ua,ha.length-L);ua=this.spliceItemsIntoValues_(m,L,ha);0===L&&0===ha.length||this.notifyArraySplice_(m,ha,ua);return this.dehanceValues_(ua)};d.spliceItemsIntoValues_=function(m,L,ha){if(1E4>ha.length){var na;return(na=this.values_).splice.apply(na,[m,L].concat(ha))}na=this.values_.slice(m,m+L);var ua=this.values_.slice(m+L);this.values_.length+=ha.length-L;for(L=0;L<ha.length;L++)this.values_[m+
L]=ha[L];for(L=0;L<ua.length;L++)this.values_[m+ha.length+L]=ua[L];return na};d.notifyArrayChildUpdate_=function(m,L,ha){var na=!this.owned_&&!1,ua=Pb(this);m=ua||na?{observableKind:"array",object:this.proxy_,type:hq,debugObjectName:this.atom_.name_,index:m,newValue:L,oldValue:ha}:null;this.atom_.reportChanged();ua&&Jc(this,m)};d.notifyArraySplice_=function(m,L,ha){var na=!this.owned_&&!1,ua=Pb(this);m=ua||na?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",
index:m,removed:ha,added:L,removedCount:ha.length,addedCount:L.length}:null;this.atom_.reportChanged();ua&&Jc(this,m)};d.get_=function(m){if(this.legacyMode_&&m>=this.values_.length)console.warn("[mobx] Out of bounds read: "+m);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[m])};d.set_=function(m,L){var ha=this.values_;this.legacyMode_&&m>ha.length&&f(17,m,ha.length);if(m<ha.length){var na=ha[m];if(Fb(this)){L=Ra(this,{type:hq,object:this.proxy_,index:m,newValue:L});if(!L)return;
L=L.newValue}L=this.enhancer_(L,na);L!==na&&(ha[m]=L,this.notifyArrayChildUpdate_(m,L,na))}else{m=Array(m+1-ha.length);for(na=0;na<m.length-1;na++)m[na]=void 0;m[m.length-1]=L;this.spliceWithArray_(ha.length,0,m)}};return a}(),Ov={clear:function(){return this.splice(0)},replace:function(a){var d=this[ke];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},splice:function(a,d){for(var m=arguments.length,L=Array(2<m?m-2:0),ha=2;ha<m;ha++)L[ha-2]=arguments[ha];m=this[ke];
switch(arguments.length){case 0:return[];case 1:return m.spliceWithArray_(a);case 2:return m.spliceWithArray_(a,d)}return m.spliceWithArray_(a,d,L)},spliceWithArray:function(a,d,m){return this[ke].spliceWithArray_(a,d,m)},push:function(){for(var a=this[ke],d=arguments.length,m=Array(d),L=0;L<d;L++)m[L]=arguments[L];a.spliceWithArray_(a.values_.length,0,m);return a.values_.length},pop:function(){return this.splice(Math.max(this[ke].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},
unshift:function(){for(var a=this[ke],d=arguments.length,m=Array(d),L=0;L<d;L++)m[L]=arguments[L];a.spliceWithArray_(0,0,m);return a.values_.length},reverse:function(){ig.trackingDerivation&&f(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){ig.trackingDerivation&&f(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[ke];a=d.dehanceValues_(d.values_).indexOf(a);return-1<a?(this.splice(a,1),!0):!1}};ib("concat",
fb);ib("flat",fb);ib("includes",fb);ib("indexOf",fb);ib("join",fb);ib("lastIndexOf",fb);ib("slice",fb);ib("toString",fb);ib("toLocaleString",fb);ib("every",vb);ib("filter",vb);ib("find",vb);ib("findIndex",vb);ib("flatMap",vb);ib("forEach",vb);ib("map",vb);ib("some",vb);ib("reduce",xb);ib("reduceRight",xb);var nE=E("ObservableArrayAdministration",sx),oE={};var pE=Symbol.iterator;var qE=Symbol.toStringTag;var Oz=function(){function a(m,L,ha){var na=this;void 0===L&&(L=Ya);void 0===ha&&(ha="ObservableMap");
this.name_=this.enhancer_=void 0;this[ke]=oE;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=L;this.name_=ha;Z(Map)||f(18);this.keysAtom_=Xa("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;bc(!0,function(){na.merge(m)})}var d=a.prototype;d.has_=function(m){return this.data_.has(m)};d.has=function(m){var L=this;if(!ig.trackingDerivation)return this.has_(m);var ha=this.hasMap_.get(m);if(!ha){var na=ha=new Fs(this.has_(m),
Wa,"ObservableMap.key?",!1);this.hasMap_.set(m,na);he(na,function(){return L.hasMap_["delete"](m)})}return ha.get()};d.set=function(m,L){var ha=this.has_(m);if(Fb(this)){L=Ra(this,{type:ha?hq:"add",object:this,newValue:L,name:m});if(!L)return this;L=L.newValue}ha?this.updateValue_(m,L):this.addValue_(m,L);return this};d["delete"]=function(m){var L=this;if(Fb(this)&&!Ra(this,{type:"delete",object:this,name:m}))return!1;if(this.has_(m)){var ha=Pb(this),na=ha?{observableKind:"map",debugObjectName:this.name_,
type:"delete",object:this,oldValue:this.data_.get(m).value_,name:m}:null;bd(function(){var ua;L.keysAtom_.reportChanged();null==(ua=L.hasMap_.get(m))?void 0:ua.setNewValue_(!1);L.data_.get(m).setNewValue_(void 0);L.data_["delete"](m)});ha&&Jc(this,na);return!0}return!1};d.updateValue_=function(m,L){var ha=this.data_.get(m);L=ha.prepareNewValue_(L);if(L!==ig.UNCHANGED){var na=Pb(this);m=na?{observableKind:"map",debugObjectName:this.name_,type:hq,object:this,oldValue:ha.value_,name:m,newValue:L}:null;
ha.setNewValue_(L);na&&Jc(this,m)}};d.addValue_=function(m,L){var ha=this;bd(function(){var Ha,Ua=new Fs(L,ha.enhancer_,"ObservableMap.key",!1);ha.data_.set(m,Ua);L=Ua.value_;null==(Ha=ha.hasMap_.get(m))?void 0:Ha.setNewValue_(!0);ha.keysAtom_.reportChanged()});var na=Pb(this),ua=na?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:m,newValue:L}:null;na&&Jc(this,ua)};d.get=function(m){return this.has(m)?this.dehanceValue_(this.data_.get(m).get()):this.dehanceValue_(void 0)};
d.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var m=this,L=this.keys();return La({next:function(){var ha=L.next(),na=ha.done;ha=ha.value;return{done:na,value:na?void 0:m.get(ha)}}})};d.entries=function(){var m=this,L=this.keys();return La({next:function(){var ha=L.next(),na=ha.done;ha=ha.value;return{done:na,value:na?void 0:[ha,m.get(ha)]}}})};d[pE]=function(){return this.entries()};
d.forEach=function(m,L){for(var ha=Ca(this),na;!(na=ha()).done;)na=na.value,m.call(L,na[1],na[0],this)};d.merge=function(m){var L=this;yr(m)&&(m=new Map(m));bd(function(){P(m)?O(m).forEach(function(ha){return L.set(ha,m[ha])}):Array.isArray(m)?m.forEach(function(ha){return L.set(ha[0],ha[1])}):M(m)?(m.constructor!==Map&&f(19,m),m.forEach(function(ha,na){return L.set(na,ha)})):null!==m&&void 0!==m&&f(20,m)});return this};d.clear=function(){var m=this;bd(function(){nc(function(){for(var L=Ca(m.keys()),
ha;!(ha=L()).done;)m["delete"](ha.value)})})};d.replace=function(m){var L=this;bd(function(){for(var ha=Wc(m),na=new Map,ua=!1,Ha=Ca(L.data_.keys()),Ua;!(Ua=Ha()).done;)if(Ua=Ua.value,!ha.has(Ua))if(L["delete"](Ua))ua=!0;else{var $a=L.data_.get(Ua);na.set(Ua,$a)}for(ha=Ca(ha.entries());!(Ha=ha()).done;)Ua=Ha.value,Ha=Ua[0],$a=Ua[1],Ua=L.data_.has(Ha),L.set(Ha,$a),L.data_.has(Ha)&&($a=L.data_.get(Ha),na.set(Ha,$a),Ua||(ua=!0));if(!ua)if(L.data_.size!==na.size)L.keysAtom_.reportChanged();else for(ua=
L.data_.keys(),ha=na.keys(),Ha=ua.next(),Ua=ha.next();!Ha.done;){if(Ha.value!==Ua.value){L.keysAtom_.reportChanged();break}Ha=ua.next();Ua=ha.next()}L.data_=na});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(m,L){return tc(this,m)};d.intercept_=function(m){return Qb(this,m)};X(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:qE,get:function(){return"Map"}}]);return a}(),
yr=E("ObservableMap",Oz),rE={};var sE=Symbol.iterator;var tE=Symbol.toStringTag;var Pz=function(){function a(m,L,ha){void 0===L&&(L=Ya);void 0===ha&&(ha="ObservableSet");this.name_=void 0;this[ke]=rE;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=ha;Z(Set)||f(22);this.atom_=Xa(this.name_);this.enhancer_=function(na,ua){return L(na,ua,ha)};m&&this.replace(m)}var d=a.prototype;d.dehanceValue_=function(m){return void 0!==this.dehancer?
this.dehancer(m):m};d.clear=function(){var m=this;bd(function(){nc(function(){for(var L=Ca(m.data_.values()),ha;!(ha=L()).done;)m["delete"](ha.value)})})};d.forEach=function(m,L){for(var ha=Ca(this),na;!(na=ha()).done;)na=na.value,m.call(L,na,na,this)};d.add=function(m){var L=this;if(Fb(this)&&!Ra(this,{type:"add",object:this,newValue:m}))return this;if(!this.has(m)){bd(function(){L.data_.add(L.enhancer_(m,void 0));L.atom_.reportChanged()});var ha=Pb(this),na=ha?{observableKind:"set",debugObjectName:this.name_,
type:"add",object:this,newValue:m}:null;ha&&Jc(this,na)}return this};d["delete"]=function(m){var L=this;if(Fb(this)&&!Ra(this,{type:"delete",object:this,oldValue:m}))return!1;if(this.has(m)){var ha=Pb(this),na=ha?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:m}:null;bd(function(){L.atom_.reportChanged();L.data_["delete"](m)});ha&&Jc(this,na);return!0}return!1};d.has=function(m){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(m))};d.entries=
function(){var m=0,L=Array.from(this.keys()),ha=Array.from(this.values());return La({next:function(){var na=m;m+=1;return na<ha.length?{value:[L[na],ha[na]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var m=this,L=0,ha=Array.from(this.data_.values());return La({next:function(){return L<ha.length?{value:m.dehanceValue_(ha[L++]),done:!1}:{done:!0}}})};d.replace=function(m){var L=this;Hs(m)&&(m=new Set(m));bd(function(){Array.isArray(m)?
(L.clear(),m.forEach(function(ha){return L.add(ha)})):Q(m)?(L.clear(),m.forEach(function(ha){return L.add(ha)})):null!==m&&void 0!==m&&f("Cannot initialize set from "+m)});return this};d.observe_=function(m,L){return tc(this,m)};d.intercept_=function(m){return Qb(this,m)};d.toJSON=function(){return Array.from(this)};d.toString=function(){return"[object ObservableSet]"};d[sE]=function(){return this.values()};X(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:tE,
get:function(){return"Set"}}]);return a}(),Hs=E("ObservableSet",Pz),Qz=Object.create(null),Rz=function(){function a(m,L,ha,na){void 0===L&&(L=new Map);void 0===na&&(na=ii);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=m;this.values_=L;this.name_=ha;this.defaultAnnotation_=na;this.keysAtom_=new Ng("ObservableObject.keys");this.isPlainObject_=P(this.target_)}
var d=a.prototype;d.getObservablePropValue_=function(m){return this.values_.get(m).get()};d.setObservablePropValue_=function(m,L){var ha=this.values_.get(m);if(ha instanceof Iu)return ha.set(L),!0;if(Fb(this)){L=Ra(this,{type:hq,object:this.proxy_||this.target_,name:m,newValue:L});if(!L)return null;L=L.newValue}L=ha.prepareNewValue_(L);if(L!==ig.UNCHANGED){var na=Pb(this);m=na?{type:hq,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:ha.value_,name:m,newValue:L}:
null;ha.setNewValue_(L);na&&Jc(this,m)}return!0};d.get_=function(m){ig.trackingDerivation&&!S(this.target_,m)&&this.has_(m);return this.target_[m]};d.set_=function(m,L,ha){void 0===ha&&(ha=!1);if(S(this.target_,m)){if(this.values_.has(m))return this.setObservablePropValue_(m,L);if(ha)return Reflect.set(this.target_,m,L);this.target_[m]=L;return!0}return this.extend_(m,{value:L,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,ha)};d.has_=function(m){if(!ig.trackingDerivation)return m in
this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var L=this.pendingKeys_.get(m);L||(L=new Fs(m in this.target_,Wa,"ObservableObject.key?",!1),this.pendingKeys_.set(m,L));return L.get()};d.make_=function(m,L){!0===L&&(L=this.defaultAnnotation_);if(!1!==L){if(!(m in this.target_)){var ha;if(null!=(ha=this.target_[Nd])&&ha[m])return;f(1,L.annotationType_,this.name_+"."+m.toString())}for(ha=this.target_;ha&&ha!==$p;){var na=Zp(ha,m);if(na){na=L.make_(this,m,na,ha);if(0===na)return;if(1===na)break}ha=
Object.getPrototypeOf(ha)}var ua;null==(ua=this.target_[Nd])?!0:delete ua[m]}};d.extend_=function(m,L,ha,na){void 0===na&&(na=!1);!0===ha&&(ha=this.defaultAnnotation_);if(!1===ha)return this.defineProperty_(m,L,na);if(L=ha.extend_(this,m,L,na)){var ua;null==(ua=this.target_[Nd])?!0:delete ua[m]}return L};d.defineProperty_=function(m,L,ha){void 0===ha&&(ha=!1);try{gd();var na=this.delete_(m);if(!na)return na;if(Fb(this)){var ua=Ra(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:L.value});
if(!ua)return null;var Ha=ua.newValue;L.value!==Ha&&(L=T({},L,{value:Ha}))}if(ha){if(!Reflect.defineProperty(this.target_,m,L))return!1}else yp(this.target_,m,L);this.notifyPropertyAddition_(m,L.value)}finally{sd()}return!0};d.defineObservableProperty_=function(m,L,ha,na){void 0===na&&(na=!1);try{gd();var ua=this.delete_(m);if(!ua)return ua;if(Fb(this)){var Ha=Ra(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:L});if(!Ha)return null;L=Ha.newValue}var Ua=Ld(m),$a={configurable:ig.safeDescriptors?
this.isPlainObject_:!0,enumerable:!0,get:Ua.get,set:Ua.set};if(na){if(!Reflect.defineProperty(this.target_,m,$a))return!1}else yp(this.target_,m,$a);var jb=new Fs(L,ha,"ObservableObject.key",!1);this.values_.set(m,jb);this.notifyPropertyAddition_(m,jb.value_)}finally{sd()}return!0};d.defineComputedProperty_=function(m,L,ha){void 0===ha&&(ha=!1);try{gd();var na=this.delete_(m);if(!na)return na;if(Fb(this)&&!Ra(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:void 0}))return null;L.name||
(L.name="ObservableObject.key");L.context=this.proxy_||this.target_;var ua=Ld(m),Ha={configurable:ig.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:ua.get,set:ua.set};if(ha){if(!Reflect.defineProperty(this.target_,m,Ha))return!1}else yp(this.target_,m,Ha);this.values_.set(m,new Iu(L));this.notifyPropertyAddition_(m,void 0)}finally{sd()}return!0};d.delete_=function(m,L){void 0===L&&(L=!1);if(!S(this.target_,m))return!0;if(Fb(this)&&!Ra(this,{object:this.proxy_||this.target_,name:m,type:"remove"}))return null;
try{var ha,na;gd();var ua=Pb(this),Ha=this.values_.get(m),Ua=void 0;if(!Ha&&ua){var $a;Ua=null==($a=Zp(this.target_,m))?void 0:$a.value}if(L){if(!Reflect.deleteProperty(this.target_,m))return!1}else delete this.target_[m];Ha&&(this.values_["delete"](m),Ha instanceof Fs&&(Ua=Ha.value_),dc(Ha));this.keysAtom_.reportChanged();null==(ha=this.pendingKeys_)?void 0:null==(na=ha.get(m))?void 0:na.set(m in this.target_);if(ua){var jb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,
debugObjectName:this.name_,oldValue:Ua,name:m};ua&&Jc(this,jb)}}finally{sd()}return!0};d.observe_=function(m,L){return tc(this,m)};d.intercept_=function(m){return Qb(this,m)};d.notifyPropertyAddition_=function(m,L){var ha,na,ua=Pb(this);ua&&(L=ua?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:m,newValue:L}:null,ua&&Jc(this,L));null==(ha=this.pendingKeys_)?void 0:null==(na=ha.get(m))?void 0:na.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=
function(){this.keysAtom_.reportObserved();return Qc(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return a}(),uE=E("ObservableObjectAdministration",Rz),vE=ye(0),tx=0,Sz=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,d):void 0!==a.prototype.__proto__?a.prototype.__proto__=d:a.prototype=d})(Sz,Array.prototype);var ux=function(a,d,m){function L(na,ua,Ha,Ua){void 0===Ha&&(Ha="ObservableArray");void 0===Ua&&(Ua=
!1);var $a=a.call(this)||this;ua=new sx(Ha,ua,Ua,!0);ua.proxy_=pa($a);J(pa($a),ke,ua);na&&na.length&&(ua=fc(!0),$a.spliceWithArray(0,0,na),ig.allowStateChanges=ua);Object.defineProperty(pa($a),"0",vE);return $a}ca(L,a);var ha=L.prototype;ha.concat=function(){this[ke].atom_.reportObserved();for(var na=arguments.length,ua=Array(na),Ha=0;Ha<na;Ha++)ua[Ha]=arguments[Ha];return Array.prototype.concat.apply(this.slice(),ua.map(function(Ua){return Vc(Ua)?Ua.slice():Ua}))};ha[m]=function(){var na=this,ua=
0;return La({next:function(){return ua<na.length?{value:na[ua++],done:!1}:{done:!0,value:void 0}}})};X(L,[{key:"length",get:function(){return this[ke].getArrayLength_()},set:function(na){this[ke].setArrayLength_(na)}},{key:d,get:function(){return"Array"}}]);return L}(Sz,Symbol.toStringTag,Symbol.iterator);Object.entries(Ov).forEach(function(a){var d=a[0];a=a[1];"concat"!==d&&U(ux.prototype,d,a)});ge(1E3);var Tz=$p.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof G()[a]&&f("MobX requires global '"+
a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Nc,extras:{getDebugName:ub},$mobx:ke});var wE=ba(613),km=class{constructor(a){kb(this,"props");kb(this,"aspectRatio");kb(this,"type");kb(this,"hideCloneHandles",!1);kb(this,"hideResizeHandles",!1);kb(this,"hideRotateHandle",!1);kb(this,"hideContextBar",!1);kb(this,"hideSelectionDetail",!1);kb(this,"hideSelection",!1);kb(this,"canChangeAspectRatio",!0);kb(this,"canUnmount",
!0);kb(this,"canResize",[!0,!0]);kb(this,"canScale",!0);kb(this,"canFlip",!0);kb(this,"canEdit",!1);kb(this,"canBind",!1);kb(this,"nonce");kb(this,"bindingDistance",4);kb(this,"isDirty",!1);kb(this,"lastSerialized");kb(this,"getCenter",()=>Qf.getBoundsCenter(this.bounds));kb(this,"getRotatedBounds",()=>{const {bounds:na,props:{rotation:ua}}=this;return ua?Qf.getBoundsFromPoints(Qf.getRotatedCorners(na,ua)):na});kb(this,"hitTestPoint",na=>{var ua=this.rotatedBounds;if(!this.props.rotation)return tk.pointInBounds(na,
ua);ua=Qf.getRotatedCorners(ua,this.props.rotation);return tk.pointInPolygon(na,ua)});kb(this,"hitTestLineSegment",(na,ua)=>{const Ha=Qf.getBoundsFromPoints([na,ua]),{rotatedBounds:Ua,props:{rotation:$a=0}}=this;return Qf.boundsContain(Ua,Ha)||$a?k(na,ua,Qf.getRotatedCorners(this.bounds)).didIntersect:0<r(Ua,na,ua).length});kb(this,"hitTestBounds",na=>{const {rotatedBounds:ua,props:{rotation:Ha=0}}=this,Ua=Qf.getRotatedCorners(this.bounds,Ha);return Qf.boundsContain(na,ua)||0<w([na.minX,na.minY],
[na.width,na.height],Ua).length});kb(this,"getExpandedBounds",()=>Qf.expandBounds(this.getBounds(),this.bindingDistance));kb(this,"getBindingPoint",(na,ua,Ha,Ua)=>{var $a=this.getBounds(),jb=this.getExpandedBounds();if(tk.pointInBounds(na,jb)){var mb=A(ua,Ha,jb).filter(Kb=>Kb.didIntersect).map(Kb=>Kb.points[0]);if(mb.length)return Ha=this.getCenter(),mb=mb.sort((Kb,Vb)=>me.dist(Vb,ua)-me.dist(Kb,ua))[0],mb=me.med(na,mb),Ua?(Ua=2>me.dist(na,Ha)?Ha:na,$a=0):(Ua=2>me.distanceToLineSegment(na,mb,Ha)?
Ha:mb,$a=tk.pointInBounds(na,$a)?this.bindingDistance:Math.max(this.bindingDistance,Qf.getBoundsSides($a).map(Kb=>me.distanceToLineSegment(Kb[1][0],Kb[1][1],na)).sort((Kb,Vb)=>Kb-Vb)[0])),jb=me.divV(me.sub(Ua,[jb.minX,jb.minY]),[jb.width,jb.height]),{point:me.clampV(jb,0,1),distance:$a}}});kb(this,"getSerialized",()=>uc(Cf(qe({},this.props),{type:this.type,nonce:this.nonce})));kb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||bd(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});
if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});kb(this,"validateProps",na=>na);kb(this,"update",(na,ua=!1,Ha=!1)=>{ua||this.isDirty||this.setIsDirty(!0);ua||Ha||this.incNonce();Object.assign(this.props,this.validateProps(na));return this});kb(this,"clone",()=>new this.constructor(this.serialized));kb(this,"onResetBounds",na=>this);kb(this,"scale",[1,1]);kb(this,"onResizeStart",na=>{var ua;this.scale=[...(null!=(ua=this.props.scale)?
ua:[1,1])];return this});kb(this,"onResize",(na,ua)=>{const {bounds:Ha,rotation:Ua,scale:[$a,jb]}=ua;na=[...this.scale];0>$a&&(na[0]*=-1);0>jb&&(na[1]*=-1);this.update({point:[Ha.minX,Ha.minY],scale:na,rotation:Ua});return this});kb(this,"onHandleChange",(na,{id:ua,delta:Ha})=>{if(void 0!==na.handles){var Ua=Js(na.handles);Ua[ua]=Cf(qe({},Ua[ua]),{point:me.add(Ha,na.handles[ua].point)});var $a=Qf.getCommonTopLeft(Object.values(Ua).map(jb=>jb.point));Object.values(Ua).forEach(jb=>{jb.point=me.sub(jb.point,
$a)});this.update({point:me.add(na.point,$a),handles:Ua})}});var d,m;const L=this.constructor.id,ha=null!=(d=this.constructor.defaultProps)?d:{};this.type=L;this.props=qe(qe({scale:[1,1]},ha),a);this.nonce=null!=(m=a.nonce)?m:Date.now();cd(this)}get id(){return this.props.id}setNonce(a){this.nonce=a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=
this.getBounds();const {stroke:d,strokeWidth:m,strokeType:L,opacity:ha,fill:na,noFill:ua,borderRadius:Ha}=this.props;return(0,wE.jsx)("rect",{fill:ua?"none":xf(na,"background"),stroke:xf(d,"stroke"),strokeWidth:null!=m?m:2,strokeDasharray:"dashed"===L?"8 2":void 0,fillOpacity:null!=ha?ha:.2,width:a.width,height:a.height,rx:Ha,ry:Ha})}};kb(km,"type");le([ef],km.prototype,"props",2);le([ef],km.prototype,"canResize",2);le([ef],km.prototype,"nonce",2);le([ef],km.prototype,"isDirty",2);le([ef],km.prototype,
"lastSerialized",2);le([Xf],km.prototype,"id",1);le([Tg],km.prototype,"setNonce",1);le([Tg],km.prototype,"incNonce",1);le([Tg],km.prototype,"setIsDirty",1);le([Tg],km.prototype,"setLastSerialized",1);le([Xf],km.prototype,"center",1);le([Xf],km.prototype,"bounds",1);le([Xf],km.prototype,"rotatedBounds",1);le([Xf],km.prototype,"serialized",1);le([Tg],km.prototype,"update",2);var vn=class extends km{constructor(a={}){super(a);kb(this,"canBind",!0);kb(this,"getBounds",()=>{const [d,m]=this.props.point,
[L,ha]=this.props.size;return{minX:d,minY:m,maxX:d+L,maxY:m+ha,width:L,height:ha}});kb(this,"getRotatedBounds",()=>Qf.getBoundsFromPoints(Qf.getRotatedCorners(this.bounds,this.props.rotation)));kb(this,"onResize",(d,m)=>{const {bounds:L,rotation:ha,scale:[na,ua]}=m;d=[...this.scale];0>na&&(d[0]*=-1);0>ua&&(d[1]*=-1);this.update({point:[L.minX,L.minY],scale:d,rotation:ha});return this.update({rotation:ha,point:[L.minX,L.minY],size:[Math.max(1,L.width),Math.max(1,L.height)],scale:d})});kb(this,"validateProps",
d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return d});cd(this)}};kb(vn,"id","box");kb(vn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var At=class extends km{constructor(a={}){super(a);kb(this,"getBounds",()=>{const {pointBounds:d,props:{point:m}}=this;return Qf.translateBounds(d,m)});kb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:m},bounds:L,rotatedPoints:ha}=this;return d?Qf.translateBounds(Qf.getBoundsFromPoints(ha),
m):L});kb(this,"normalizedPoints",[]);kb(this,"isResizeFlippedX",!1);kb(this,"isResizeFlippedY",!1);kb(this,"onResizeStart",()=>{var d;const {bounds:m,props:{points:L}}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const ha=[m.width,m.height];this.normalizedPoints=L.map(na=>Hd.divV(na,ha));return this});kb(this,"onResize",(d,m)=>{const {bounds:L,scale:[ha,na]}=m,ua=[L.width,L.height];d=[...this.scale];0>ha&&(d[0]*=-1);0>na&&(d[1]*=-1);return this.update(ha||na?{point:[L.minX,L.minY],points:this.normalizedPoints.map(Ha=>
Hd.mulV(Ha,ua).concat(Ha[2])),scale:d}:{point:[L.minX,L.minY],points:this.normalizedPoints.map(Ha=>Hd.mulV(Ha,ua).concat(Ha[2]))})});kb(this,"hitTestPoint",d=>{const {props:{points:m,point:L}}=this;return tk.pointNearToPolyline(Hd.sub(d,L),m)});kb(this,"hitTestLineSegment",(d,m)=>{const {bounds:L,props:{points:ha,point:na}}=this;if(tk.pointInBounds(d,L)||tk.pointInBounds(m,L)||0<r(L,d,m).length){const ua=Hd.sub(d,na),Ha=Hd.sub(m,na);return k(ua,Ha,ha).didIntersect||!!ha.find(Ua=>5>Hd.dist(ua,Ua)||
5>Hd.dist(Ha,Ua))}return!1});kb(this,"hitTestBounds",d=>{const {rotatedBounds:m,props:{points:L,point:ha}}=this,na=Qf.translateBounds(d,Hd.neg(ha));return Qf.boundsContain(d,m)||L.every(ua=>tk.pointInBounds(ua,na))||Qf.boundsCollide(d,m)&&0<F([na.minX,na.minY],[na.width,na.height],L).length});cd(this)}get pointBounds(){const {props:{points:a}}=this;return Qf.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:m},center:L}=this;if(!m)return d;const ha=Hd.sub(L,a);return d.map(na=>
Hd.rotWith(na,ha,m))}};kb(At,"id","draw");kb(At,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});le([Xf],At.prototype,"pointBounds",1);le([Xf],At.prototype,"rotatedPoints",1);var vx=class extends vn{constructor(a={}){super(a);kb(this,"getBounds",()=>{const {props:{point:[d,m],size:[L,ha]}}=this;return Qf.getRotatedEllipseBounds(d,m,L/2,ha/2,0)});kb(this,"getRotatedBounds",()=>{const {props:{point:[d,m],size:[L,ha],rotation:na}}=this;return Qf.getRotatedEllipseBounds(d,
m,L/2,ha/2,na)});kb(this,"hitTestPoint",d=>{const {props:{size:m,rotation:L},center:ha}=this;return tk.pointInEllipse(d,ha,m[0],m[1],L||0)});kb(this,"hitTestLineSegment",(d,m)=>{const {props:{size:[L,ha],rotation:na=0},center:ua}=this;return g(d,m,ua,L,ha,na).didIntersect});kb(this,"hitTestBounds",d=>{const {props:{size:[m,L],rotation:ha=0},rotatedBounds:na}=this;var ua;if(!(ua=Qf.boundsContain(d,na))){const {minX:Ha,minY:Ua,width:$a,height:jb}=d;ua=0<t(this.center,m/2,L/2,ha,[Ha,Ua],[$a,jb]).length}return ua});
cd(this)}};kb(vx,"id","ellipse");kb(vx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var wx=class extends vn{constructor(a={}){super(a);kb(this,"onResetBounds",d=>{const {clipping:m,size:L,point:ha}=this.props;if(m){const [na,ua,Ha,Ua]=Array.isArray(m)?m:[m,m,m,m];return this.update({clipping:0,point:[ha[0]-Ua,ha[1]-na],size:[L[0]+(Ua-ua),L[1]+(na-Ha)]})}if(d.asset){const {size:[na,ua]}=d.asset;this.update({clipping:0,point:[ha[0]+L[0]/2-na/2,ha[1]+L[1]/
2-ua/2],size:[na,ua]})}return this});kb(this,"onResize",(d,m)=>{const {bounds:L,clip:ha,scale:na}=m;({clipping:m}=this.props);const {clipping:ua}=d;if(ha){const {point:[Ha,Ua],size:[$a,jb]}=d,[mb,Kb,Vb,Ob]=ua?Array.isArray(ua)?ua:[ua,ua,ua,ua]:[0,0,0,0];m=[mb+(L.minY-Ua),Kb+(L.maxX-(Ha+$a)),Vb+(L.maxY-(Ua+jb)),Ob+(L.minX-Ha)]}else void 0!==ua&&(m=Array.isArray(ua)?ua:[ua,ua,ua,ua],m=[m[0]*na[1],m[1]*na[0],m[2]*na[1],m[3]*na[0]]);if(m&&Array.isArray(m)){const Ha=m;Ha.every((Ua,$a)=>0===$a||Ua===Ha[$a-
1])&&(m=Ha[0])}return this.update({point:[L.minX,L.minY],size:[Math.max(1,L.width),Math.max(1,L.height)],clipping:m})});cd(this)}};kb(wx,"id","ellipse");kb(wx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Uz=class extends km{constructor(a={}){super(a);kb(this,"getBounds",()=>{const {points:d,props:{point:m}}=this;return Qf.translateBounds(Qf.getBoundsFromPoints(d),m)});kb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,
props:{point:m}}=this;return Qf.translateBounds(Qf.getBoundsFromPoints(d),m)});kb(this,"normalizedHandles",[]);kb(this,"onResizeStart",()=>{var d;const {props:{handles:m},bounds:L}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const ha=[L.width,L.height];this.normalizedHandles=Object.values(m).map(na=>Hd.divV(na.point,ha));return this});kb(this,"onResize",(d,m)=>{const {bounds:L,scale:[ha,na]}=m,{props:{handles:ua},normalizedHandles:Ha}=this,Ua=[L.width,L.height];d=[...this.scale];0>ha&&
(d[0]*=-1);0>na&&(d[1]*=-1);return this.update({point:[L.minX,L.minY],handles:Object.values(ua).map(($a,jb)=>Cf(qe({},$a),{point:Hd.mulV(Ha[jb],Ua)})),scale:d})});kb(this,"hitTestPoint",d=>{const {points:m}=this;return tk.pointNearToPolyline(Hd.sub(d,this.props.point),m)});kb(this,"hitTestLineSegment",(d,m)=>{const {bounds:L,points:ha,props:{point:na}}=this;if(tk.pointInBounds(d,L)||tk.pointInBounds(m,L)||0<r(L,d,m).length){const ua=Hd.sub(d,na),Ha=Hd.sub(m,na);return k(ua,Ha,ha).didIntersect||!!ha.find(Ua=>
5>Hd.dist(ua,Ua)||5>Hd.dist(Ha,Ua))}return!1});kb(this,"hitTestBounds",d=>{const {rotatedBounds:m,points:L,props:{point:ha}}=this,na=Qf.translateBounds(d,Hd.neg(ha));return Qf.boundsContain(d,m)||L.every(ua=>tk.pointInBounds(ua,na))||Qf.boundsCollide(d,m)&&0<F([na.minX,na.minY],[na.width,na.height],L).length});kb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Uz.defaultProps.handles);return d});cd(this)}get points(){return Object.values(this.props.handles).map(a=>
a.point)}get centroid(){const {points:a}=this;return Xk.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,rotation:m}}=this;return m?Object.values(d).map(L=>Hd.rotWith(L.point,a,m)):this.points}},Bt=Uz;kb(Bt,"id","polyline");kb(Bt,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});le([Xf],Bt.prototype,"points",1);le([Xf],Bt.prototype,"centroid",1);le([Xf],Bt.prototype,"rotatedPoints",1);var Vz=class extends Bt{constructor(a={}){super(a);
kb(this,"hideResizeHandles",!0);kb(this,"hideRotateHandle",!0);kb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Vz.defaultProps.handles);return d});kb(this,"getHandlesChange",(d,m)=>{var L=Ci(d.handles,m);L=Ci(L,{start:{point:me.toFixed(L.start.point)},end:{point:me.toFixed(L.end.point)}});if(!me.isEqual(L.start.point,L.end.point)){m={point:d.point,handles:Js(L)};d=d.point;L=Qf.translateBounds(Qf.getBoundsFromPoints(Object.values(L).map(na=>
na.point)),m.point);var ha=me.sub([L.minX,L.minY],d);me.isEqual(ha,[0,0])||(Object.values(m.handles).forEach(na=>{na.point=me.toFixed(me.sub(na.point,ha))}),m.point=me.toFixed(me.add(m.point,ha)));return m}});cd(this)}},Mu=Vz;kb(Mu,"id","line");kb(Mu,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var zr=class extends vn{constructor(a={}){super(a);kb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,
props:{point:m},offset:L}=this;return Qf.translateBounds(Qf.getBoundsFromPoints(d),Hd.add(m,L))});kb(this,"hitTestPoint",d=>{const {vertices:m}=this;return tk.pointInPolygon(Hd.add(d,this.props.point),m)});kb(this,"hitTestLineSegment",(d,m)=>{const {vertices:L,props:{point:ha}}=this;return k(Hd.sub(d,ha),Hd.sub(m,ha),L).didIntersect});kb(this,"hitTestBounds",d=>{const {rotatedBounds:m,offset:L,rotatedVertices:ha,props:{point:na}}=this,ua=Qf.translateBounds(d,Hd.neg(Hd.add(na,L)));return Qf.boundsContain(d,
m)||ha.every(Ha=>tk.pointInBounds(Ha,ua))||0<w([ua.minX,ua.minY],[ua.width,ua.height],ha).length});kb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});cd(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},vertices:d}=this;return d.map(m=>Hd.add(m,a))}get centroid(){const {vertices:a}=this;return Xk.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:m}}=this;return m?a.map(L=>
Hd.rotWith(L,d,m)):a}get offset(){const {props:{size:[a,d]}}=this,m=Qf.getBoundsCenter(Qf.getBoundsFromPoints(this.vertices));return Hd.sub(Hd.div([a,d],2),m)}getVertices(a=0){const {ratio:d,sides:m,size:L}=this.props;return 3===m?Xk.getTriangleVertices(L,a,d):Xk.getPolygonVertices(L,m,a,d)}};kb(zr,"id","polygon");kb(zr,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});le([Xf],zr.prototype,"vertices",1);le([Xf],zr.prototype,"pageVertices",
1);le([Xf],zr.prototype,"centroid",1);le([Xf],zr.prototype,"rotatedVertices",1);le([Xf],zr.prototype,"offset",1);var xx=class extends vn{constructor(a={}){super(a);kb(this,"canEdit",!0);kb(this,"canFlip",!1);cd(this)}};kb(xx,"id","text");kb(xx,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Pv=class extends vn{constructor(a={}){super(a);kb(this,"canEdit",!1);kb(this,"canFlip",!1);kb(this,"getBounds",()=>0===this.shapes.length?(Ie().deleteShapes([this.id]),
{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):Qf.getCommonBounds(this.shapes.map(d=>d.getBounds())));cd(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};kb(Pv,"id","group");kb(Pv,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});le([Xf],Pv.prototype,"shapes",1);var Ct=class{constructor(){kb(this,"_id");kb(this,"_initial");kb(this,"_states");kb(this,"_isActive",!1);kb(this,"cursor");
kb(this,"_disposables",[]);kb(this,"children",new Map([]));kb(this,"registerStates",m=>{m.forEach(L=>this.children.set(L.id,new L(this,this)));return this});kb(this,"deregisterStates",m=>{m.forEach(L=>{var ha;null==(ha=this.children.get(L.id))?void 0:ha.dispose();this.children.delete(L.id)});return this});kb(this,"currentState",{});kb(this,"transition",(m,L={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${m}.`);const ha=this.children.get(m),na=this.currentState;
if(!ha)throw Error(`Could not find a state named ${m}.`);bd(()=>{this.currentState?(na._events.onExit(Cf(qe({},L),{toId:m})),na.dispose(),this.setCurrentState(ha),this._events.onTransition(Cf(qe({},L),{fromId:na.id,toId:m})),ha._events.onEnter(Cf(qe({},L),{fromId:na.id}))):(this.currentState=ha,ha._events.onEnter(Cf(qe({},L),{fromId:""})))});return this});kb(this,"isIn",m=>{m=m.split(".").reverse();let L=this;for(;0<m.length;){const ha=m.pop();if(!ha)return!0;if(L.currentState.id===ha){if(0===m.length)return!0;
L=L.currentState}else break}return!1});kb(this,"isInAny",(...m)=>m.some(this.isIn));kb(this,"forwardEvent",(m,...L)=>{var ha,na;(null==(na=null==(ha=this.currentState)?void 0:ha._events)?0:na[m])&&bd(()=>{var ua;return null==(ua=this.currentState._events)?void 0:ua[m](...L)})});kb(this,"_events",{onTransition:m=>{var L;null==(L=this.onTransition)?void 0:L.call(this,m)},onEnter:m=>{var L;this._isActive=!0;this.initial&&this.transition(this.initial,m);null==(L=this.onEnter)?void 0:L.call(this,m)},onExit:m=>
{var L,ha,na;this._isActive=!1;null==(ha=null==(L=this.currentState)?void 0:L.onExit)?void 0:ha.call(L,{toId:"parent"});null==(na=this.onExit)?void 0:na.call(this,m)},onPointerDown:(m,L)=>{var ha;null==(ha=this.onPointerDown)?void 0:ha.call(this,m,L);this.forwardEvent("onPointerDown",m,L)},onPointerUp:(m,L)=>{var ha;null==(ha=this.onPointerUp)?void 0:ha.call(this,m,L);this.forwardEvent("onPointerUp",m,L)},onPointerMove:(m,L)=>{var ha;null==(ha=this.onPointerMove)?void 0:ha.call(this,m,L);this.forwardEvent("onPointerMove",
m,L)},onPointerEnter:(m,L)=>{var ha;null==(ha=this.onPointerEnter)?void 0:ha.call(this,m,L);this.forwardEvent("onPointerEnter",m,L)},onPointerLeave:(m,L)=>{var ha;null==(ha=this.onPointerLeave)?void 0:ha.call(this,m,L);this.forwardEvent("onPointerLeave",m,L)},onDoubleClick:(m,L)=>{var ha;null==(ha=this.onDoubleClick)?void 0:ha.call(this,m,L);this.forwardEvent("onDoubleClick",m,L)},onKeyDown:(m,L)=>{var ha;this._events.onModifierKey(m,L);null==(ha=this.onKeyDown)?void 0:ha.call(this,m,L);this.forwardEvent("onKeyDown",
m,L)},onKeyUp:(m,L)=>{var ha;this._events.onModifierKey(m,L);null==(ha=this.onKeyUp)?void 0:ha.call(this,m,L);this.forwardEvent("onKeyUp",m,L)},onPinchStart:(m,L)=>{var ha;null==(ha=this.onPinchStart)?void 0:ha.call(this,m,L);this.forwardEvent("onPinchStart",m,L)},onPinch:(m,L)=>{var ha;null==(ha=this.onPinch)?void 0:ha.call(this,m,L);this.forwardEvent("onPinch",m,L)},onPinchEnd:(m,L)=>{var ha;null==(ha=this.onPinchEnd)?void 0:ha.call(this,m,L);this.forwardEvent("onPinchEnd",m,L)},onModifierKey:(m,
L)=>{switch(L.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(m,L)}}});kb(this,"onEnter");kb(this,"onExit");kb(this,"onTransition");kb(this,"onPointerDown");kb(this,"onPointerUp");kb(this,"onPointerMove");kb(this,"onPointerEnter");kb(this,"onPointerLeave");kb(this,"onDoubleClick");kb(this,"onKeyDown");kb(this,"onKeyUp");kb(this,"onPinchStart");kb(this,"onPinch");kb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;
this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=a}};kb(Ct,"id");kb(Ct,"shortcuts");le([ef],Ct.prototype,"currentState",2);le([Tg],Ct.prototype,"setCurrentState",
1);var yx=class extends Ct{constructor(a,d){var m,L;super();kb(this,"_root");kb(this,"_parent");kb(this,"children",new Map([]));kb(this,"registerStates",ha=>{ha.forEach(na=>this.children.set(na.id,new na(this,this._root)));return this});kb(this,"deregisterStates",ha=>{ha.forEach(na=>{var ua;null==(ua=this.children.get(na.id))?void 0:ua.dispose();this.children.delete(na.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(m=this.initial)?
m:this.states[0].id,m=this.children.get(a))&&(this.setCurrentState(m),null==(L=this.currentState)?void 0:L._events.onEnter({fromId:"initial"}));cd(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};kb(yx,"cursor");var Ar=class extends yx{constructor(){super(...arguments);kb(this,"isLocked",!1);kb(this,"previous");kb(this,"onEnter",({fromId:a})=>{this.previous=
a;this.cursor&&this.app.cursors.setCursor(this.cursor)});kb(this,"onTransition",a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Ui=class extends yx{get app(){return this.root}get tool(){return this.parent}},Wz=class extends Ui{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"creatingShape");kb(this,"aspectRatio");kb(this,"initialBounds",
{});kb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:m}}=this.app;var {Shape:L}=this.tool;L=new L({id:hk(),type:L.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:me.abs(me.sub(m,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};L.canChangeAspectRatio||(L.aspectRatio?(this.aspectRatio=L.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=
1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=L;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(L);this.app.setSelectedShapes([L])});kb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:d}=this,{currentPoint:m,originPoint:L,shiftKey:ha}=this.app.inputs;a=ha||this.creatingShape.props.isAspectRatioLocked||
!this.creatingShape.canChangeAspectRatio;d=Qf.getTransformedBoundingBox(d,"bottom_right_corner",me.sub(m,L),0,a);this.app.settings.snapToGrid&&!a&&(d=Qf.snapBoundsToGrid(d,8));this.creatingShape.update({point:[d.minX,d.minY],size:[d.width,d.height]})}});kb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});kb(this,"onKeyDown",(a,d)=>
{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};kb(Wz,"id","creating");var Xz=class extends Ui{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...a)=>{var d,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(d=this.app._events).onPinchStart)?void 0:m.call(d,...a)});
kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};kb(Xz,"id","idle");var Yz=class extends Ui{constructor(){super(...arguments);kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});kb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};kb(Yz,"id","pointing");var Kq=class extends Ar{constructor(){super(...arguments);
kb(this,"cursor","crosshair")}};kb(Kq,"id","box");kb(Kq,"states",[Xz,Yz,Wz]);kb(Kq,"initial","idle");var Zz=class extends Ui{constructor(){super(...arguments);kb(this,"shape",{});kb(this,"points",[[0,0,.5]]);kb(this,"persistDebounced",Dg(this.app.persist,200));kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:m}=this.tool;var {originPoint:L}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
m){this.shape=m;var {shape:ha}=this;var na=ha.props.points[ha.props.points.length-1];const Ha=Hd.sub(L,ha.props.point).concat(null!=(a=L[2])?a:.5);this.points=[...ha.props.points,na,na];const Ua=Math.ceil(Hd.dist(na,L)/16);for(let $a=0,jb=$a/(Ua-1);$a<Ua;$a++){a=this.points;L=a.push;ha=Hd.lrp(na,Ha,jb);var ua=na[2];L.call(a,ha.concat.call(ha,ua+(Ha[2]-ua)*jb))}this.addNextPoint(Ha)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(na=L[2])?na:.5]],this.shape=new d({id:hk(),type:d.id,parentId:this.app.currentPage.id,
point:L.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});kb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:m}=this.app.inputs;Hd.isEqual(m,d)||this.addNextPoint(Hd.sub(d,a.props.point).concat(d[2]))});kb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,
points:this.tool.simplify?tk.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,m=Hd.min(a,
[0,0]);this.points.push(a);0>m[0]||0>m[1]?(this.points=this.points.map(L=>Hd.sub(L,m).concat(L[2])),d.update({point:Hd.add(d.props.point,m),points:this.points})):d.update({points:this.points})}};kb(Zz,"id","creating");var $z=class extends Ui{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};
kb($z,"id","idle");var aA=class extends Ui{constructor(){super(...arguments);kb(this,"origin",[0,0]);kb(this,"prevDelta",[0,0]);kb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});kb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});kb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};kb(aA,"id","pinching");var Nu=class extends Ar{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"simplify",!0);kb(this,"simplifyTolerance",
1);kb(this,"previousShape");kb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};kb(Nu,"id","draw");kb(Nu,"states",[$z,Zz,aA]);kb(Nu,"initial","idle");var bA=class extends Ui{constructor(){super(...arguments);kb(this,"points",[[0,0,.5]]);kb(this,"hitShapes",new Set);kb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});kb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;Hd.isEqual(d,a)||(this.points.push(a),
this.app.shapesInViewport.filter(m=>m.hitTestLineSegment(d,a)).forEach(m=>this.hitShapes.add(m)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});kb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};kb(bA,"id","erasing");var cA=class extends Ui{constructor(){super(...arguments);kb(this,"onPointerDown",
(a,d)=>{a.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...a)=>{var d,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(d=this.app._events).onPinchStart)?void 0:m.call(d,...a)});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};kb(cA,"id","idle");var dA=class extends Ui{constructor(){super(...arguments);kb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>
d.hitTestPoint(a)))});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});kb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};kb(dA,"id","pointing");var Qv=class extends Ar{constructor(){super(...arguments);kb(this,"cursor","crosshair")}};kb(Qv,"id","erase");kb(Qv,"states",[cA,dA,bA]);kb(Qv,
"initial","idle");var zx=class extends Ui{constructor(){super(...arguments);kb(this,"handle",{});kb(this,"handleId","end");kb(this,"currentShape",{});kb(this,"initialShape",{});kb(this,"bindableShapeIds",[]);kb(this,"startBindingShapeId");kb(this,"newStartBindingId","");kb(this,"draggedBindingId","");kb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:m,currentPoint:L,modKey:ha,altKey:na},settings:{snapToGrid:ua}}=this.app;var Ha=this.app.getShapeById(this.initialShape.id),
{handles:Ua}=this.initialShape,$a=this.handleId,jb="start"===this.handleId?"end":"start";if(!me.isEqual(d,L)){var mb=me.sub(L,m);if(a){var Kb=Ua[jb].point,Vb=me.add(Ua[$a].point,mb),Ob=me.angle(Kb,Vb);Kb=me.rotWith(Vb,Kb,cm.snapAngleToSegments(Ob,24)-Ob);mb=me.add(mb,me.sub(Kb,Vb))}mb=me.add(Ua[$a].point,mb);Ua={[$a]:Cf(qe({},Ua[$a]),{point:ua?me.snap(mb,8):me.toFixed(mb),bindingId:void 0})};var kc=this.currentShape.getHandlesChange(this.initialShape,Ua);if(kc){Ua=Ci(Ha.props,kc);var xc={},$b;$a=
Ua.handles[$a];jb=Ua.handles[jb];if(this.startBindingShapeId){var pc;if(mb=this.app.getShapeById(this.startBindingShapeId)){Vb=mb.getCenter();Kb=Ua.handles.end;var lc=me.add(Ua.handles.start.point,Ua.point);me.isEqual(lc,Vb)&&lc[1]++;Ob=mb.hitTestPoint(L);lc=me.uni(me.sub(lc,Vb));const Rc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];ha||mb.hitTestPoint(me.add(Ua.point,Kb.point))||(pc=jc(Ha.props,mb,"start",this.newStartBindingId,Vb,Vb,lc,Ob));pc&&!Rc?(xc[this.newStartBindingId]=
pc,Ua.handles.start.bindingId=pc.id):!pc&&Rc&&(console.log("removing start binding"),delete xc[this.newStartBindingId],Ua.handles.start.bindingId=void 0)}}if(!ha){pc=me.add(jb.point,Ua.point);jb=me.add($a.point,Ua.point);$a=me.uni(me.sub(jb,pc));const Rc=me.add(Ua.point,Ua.handles.start.point),Uc=me.add(Ua.point,Ua.handles.end.point);mb=this.bindableShapeIds.map(Dd=>this.app.getShapeById(Dd)).sort((Dd,Td)=>Td.nonce-Dd.nonce).filter(Dd=>![Rc,Uc].every(Td=>Dd.hitTestPoint(Td)));for(const Dd of mb)if($b=
jc(Ha.props,Dd,this.handleId,this.draggedBindingId,jb,pc,$a,na))break}$b?(xc[this.draggedBindingId]=$b,Ua=Ci(Ua,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(Ha=Ha.props.handles[this.handleId].bindingId,void 0!==Ha&&(delete xc[Ha],Ua=Ci(Ua,{handles:{[this.handleId]:{bindingId:void 0}}})));kc=this.currentShape.getHandlesChange(Ua,Ua.handles);bd(()=>{var Rc;if(kc){this.currentShape.update(kc);this.app.currentPage.updateBindings(xc);const Uc=Object.values(null!=(Rc=kc.handles)?Rc:
{}).map(Dd=>Dd.bindingId).map(Dd=>this.app.currentPage.bindings[Dd]).filter(Boolean).flatMap(Dd=>[Dd.toId,Dd.fromId].filter(Boolean));this.app.setBindingShapes(Uc)}})}}});kb(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});kb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),
this.tool.transition("idle")}})}};kb(zx,"id","creating");var eA=class extends zx{constructor(){super(...arguments);kb(this,"onEnter",()=>{var a;this.app.history.pause();this.newStartBindingId=hk();this.draggedBindingId=hk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:m}=this.app.inputs;d=new d(Cf(qe({},d.defaultProps),{id:hk(),type:d.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?me.snap(m,8):m,fill:this.app.settings.color,
stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=uc(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);this.app.setSelectedShapes([d]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(L=>this.app.getShapeById(L)).filter(L=>tk.pointInBounds(m,L.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};kb(eA,"id","creating");
var fA=class extends Ui{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...a)=>{var d,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(d=this.app._events).onPinchStart)?void 0:m.call(d,...a)});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});kb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);
break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});kb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};kb(fA,"id","idle");var gA=class extends Ui{constructor(){super(...arguments);kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};
kb(gA,"id","pointing");var Rv=class extends Ar{constructor(){super(...arguments);kb(this,"cursor","crosshair")}};kb(Rv,"id","line");kb(Rv,"states",[fA,gA,eA]);kb(Rv,"initial","idle");var hA=class extends Ui{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"creatingShape");kb(this,"aspectRatio");kb(this,"initialBounds",{});kb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:m}=this.tool,L=new m({id:hk(),type:m.id,parentId:a.id,point:[...d],text:"",
size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=L;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);bd(()=>{this.app.currentPage.addShapes(L);const ha=this.app.settings.snapToGrid?me.snap([...d],8):d,{bounds:na}=L;L.update({point:me.sub(ha,[na.width/2,na.height/2])});this.app.transition("select");this.app.setSelectedShapes([L]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};
kb(hA,"id","creating");var iA=class extends Ui{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});kb(this,"onPinchStart",(...a)=>{var d,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(d=this.app._events).onPinchStart)?void 0:m.call(d,...a)});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};kb(iA,"id","idle");var Sv=class extends Ar{constructor(){super(...arguments);
kb(this,"cursor","crosshair")}};kb(Sv,"id","box");kb(Sv,"states",[iA,hA]);kb(Sv,"initial","idle");var xE=Jf(gm()),yE=class extends xE.default{constructor(){super(...arguments);kb(this,"toBBox",a=>a.rotatedBounds)}},jA=class extends Ui{constructor(){super(...arguments);kb(this,"initialSelectedIds",[]);kb(this,"initialSelectedShapes",[]);kb(this,"tree",new yE);kb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:m}=this.app;this.initialSelectedIds=Array.from(m.values());this.initialSelectedShapes=
Array.from(a.values());this.tree.load(d.shapes)});kb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});kb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:m,currentPoint:L}}=this.app,ha=Qf.getBoundsFromPoints([L,m],0);this.app.setBrush(ha);const na=[...(new Set(this.tree.search(ha).filter(ua=>d?Qf.boundsContain(ha,ua.rotatedBounds):ua.hitTestBounds(ha)).filter(ua=>"group"!==ua.type).map(ua=>{var Ha;return null!=(Ha=this.app.getParentGroup(ua))?
Ha:ua})))];a?na.every(ua=>this.initialSelectedShapes.includes(ua))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(ua=>!na.includes(ua))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...na]))]):this.app.setSelectedShapes(na);this.app.viewport.panToPointWhenNearBounds(L)});kb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});kb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),
this.tool.transition("idle")}})}};kb(jA,"id","brushing");var kA=class extends Ui{constructor(){super(...arguments);kb(this,"onEnter",a=>{var d;const {selectedIds:m,inputs:{shiftKey:L}}=this.app;if("shape"===a.type&&!m.has(a.shape.id)){const ha=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;L?this.app.setSelectedShapes([...Array.from(m.values()),ha.id]):this.app.setSelectedShapes([ha])}});kb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};kb(kA,"id","contextMenu");var lA=class extends Ui{constructor(){super(...arguments);
kb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});kb(this,"onExit",()=>{});kb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});kb(this,"onPointerDown",(a,d)=>{const {selectedShapes:m,inputs:{ctrlKey:L}}=this.app;
if(2===d.button)this.tool.transition("contextMenu",a);else if(L)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(m.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:ha,inputs:na}=this.app;
ha&&tk.pointInBounds(na.currentPoint,ha)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",a);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",qe(qe({},d),a))}});kb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})});kb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});kb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&
!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};kb(lA,"id","idle");var mA=class extends Ui{constructor(){super(...arguments);kb(this,"onEnter",a=>{var d;const {selectedIds:m,inputs:{shiftKey:L}}=this.app,ha=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;L?this.app.setSelectedShapes([...Array.from(m.values()),ha.id]):this.app.setSelectedShapes([ha])});kb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});kb(this,"onPointerUp",()=>{this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(mA,"id","pointingShape");var nA=class extends Ui{constructor(){super(...arguments);kb(this,"cursor","move");kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
kb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(nA,"id","pointingBoundsBackground");var oA=class extends Ui{constructor(){super(...arguments);kb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});kb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("brushing")});kb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};kb(oA,"id","pointingCanvas");var pA=class extends Ui{constructor(){super(...arguments);kb(this,"cursor","move");kb(this,
"isCloning",!1);kb(this,"didClone",!1);kb(this,"initialPoints",{});kb(this,"initialShapePoints",{});kb(this,"initialClonePoints",{});kb(this,"clones",[]);kb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,inputs:m}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(d.map(({id:L,props:{point:ha}})=>[L,ha.slice()]));document.querySelectorAll("input,textarea").forEach(L=>L.blur());null==(a=document.getSelection())?void 0:a.empty();m.altKey?this.startCloning():
this.moveSelectedShapesToPointer()});kb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});kb(this,"onPointerMove",()=>{const {inputs:{currentPoint:a}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});kb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onPointerUp",()=>{this.app.history.resume();
this.app.persist();this.tool.transition("idle")});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(m=>{m.update({point:this.initialPoints[m.id]})}),this.tool.transition("idle")}});kb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:m,allSelectedShapes:L}=this.app;m.removeShapes(...L);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));
this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:m}}=this.app,{initialPoints:L}=this,ha=Hd.sub(m,d);a&&(Math.abs(ha[0])<Math.abs(ha[1])?ha[0]=0:ha[1]=0);bd(()=>{this.app.allSelectedShapesArray.filter(na=>!na.props.isLocked).forEach(na=>{let ua=Hd.add(L[na.id],ha);this.app.settings.snapToGrid&&(ua=Hd.snap(ua,8));na.update({point:ua})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>
{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d(Cf(qe({},a.serialized),{id:hk(),type:a.type,point:this.initialPoints[a.id],rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);
this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};kb(pA,"id","translating");var qA=class extends Ui{constructor(){super(...arguments);kb(this,"pointedSelectedShape");kb(this,"onEnter",a=>{this.pointedSelectedShape=a.shape});kb(this,"onExit",()=>{this.pointedSelectedShape=void 0});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
kb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:m}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:m}=this.app),m=Array.from(m.values()),m.splice(m.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(m);else{if(1===m.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof vn&&tk.pointInBounds(d,
this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(qA,"id","pointingSelectedShape");var rA=class extends Ui{constructor(){super(...arguments);kb(this,"info",{});kb(this,"onEnter",a=>{this.info=a;this.updateCursor()});kb(this,"onExit",()=>{this.app.cursors.reset()});
kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("resizing",this.info)});kb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(lt[this.info.handle],this.app.selectionBounds.rotation)}};kb(rA,"id","pointingResizeHandle");var sA=class extends Ui{constructor(){super(...arguments);
kb(this,"isSingle",!1);kb(this,"handle","bottom_right_corner");kb(this,"snapshots",{});kb(this,"initialCommonBounds",{});kb(this,"selectionRotation",0);kb(this,"resizeType","corner");kb(this,"onEnter",a=>{var d,m;const {history:L,selectedShapesArray:ha,selectionBounds:na}=this.app;if(!na)throw Error("Expected a selected bounds.");this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";
this.app.cursors.setCursor(sA.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);L.pause();const ua=Qf.getBoundsFromPoints(ha.map(Ha=>Qf.getBoundsCenter(Ha.bounds)));this.selectionRotation=(this.isSingle=1===ha.length)?null!=(m=ha[0].props.rotation)?m:0:0;this.initialCommonBounds=qe({},na);this.snapshots=Object.fromEntries(ha.map(Ha=>{const Ua=qe({},Ha.bounds),[$a,jb]=Qf.getBoundsCenter(Ua);return[Ha.id,{props:Ha.serialized,bounds:Ua,transformOrigin:[($a-this.initialCommonBounds.minX)/
this.initialCommonBounds.width,(jb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[($a-ua.minX)/ua.width,(jb-ua.minY)/ua.height],isAspectRatioLocked:Ha.props.isAspectRatioLocked||!(Ha.canChangeAspectRatio&&!Ha.props.rotation)}]}));ha.forEach(Ha=>{var Ua;null==(Ua=Ha.onResizeStart)?void 0:Ua.call(Ha,{isSingle:this.isSingle})})});kb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});
kb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:m,originPoint:L,currentPoint:ha}}=this.app,{handle:na,snapshots:ua,initialCommonBounds:Ha}=this;let Ua=Hd.sub(ha,L);a&&(Ua=Hd.mul(Ua,2));const $a=this.app.selectedShapes.values().next().value;let jb=Qf.getTransformedBoundingBox(Ha,na,Ua,this.selectionRotation,d||this.isSingle&&(m?!("clipping"in $a.props):!$a.canChangeAspectRatio||$a.props.isAspectRatioLocked));a&&(jb=qe(qe({},jb),Qf.centerBounds(jb,Qf.getBoundsCenter(Ha))));const {scaleX:mb,
scaleY:Kb}=jb;this.app.selectedShapes.forEach(Vb=>{var Ob,kc;const {isAspectRatioLocked:xc,props:$b,bounds:pc,transformOrigin:lc}=ua[Vb.id];let Rc=Qf.getRelativeTransformedBoundingBox(jb,Ha,pc,0>mb,0>Kb);if(Vb.canResize.some(Td=>Td)||Vb.props.isSizeLocked||!this.isSingle){var Uc=[mb,Kb],Dd=null!=(Ob=$b.rotation)?Ob:0;Ob=Qf.getBoundsCenter(Rc);Vb.canFlip||(Uc=Hd.abs(Uc));Vb.canScale||(Uc=null!=(kc=$b.scale)?kc:[1,1]);if(Dd&&0>mb&&0<=Kb||0>Kb&&0<=mb)Dd*=-1;this.app.settings.snapToGrid&&!xc&&(Rc=Qf.snapBoundsToGrid(Rc,
8));Vb.onResize($b,{center:Ob,rotation:Dd,scale:Uc,bounds:Rc,type:na,clip:m,transformOrigin:lc})}});this.updateCursor(mb,Kb);this.app.viewport.panToPointWhenNearBounds(ha)});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(m=>{m.update(qe({},this.snapshots[m.id].props))}),this.tool.transition("idle")}})}updateCursor(a,d){var m,L,ha,na;const ua=0>a&&0<=d;a=0>
d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":ua||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(m=this.app.selectionBounds)?void 0:m.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(L=this.app.selectionBounds)?void 0:L.rotation);break;case "top_right_corner":case "bottom_left_corner":ua||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==
(ha=this.app.selectionBounds)?void 0:ha.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(na=this.app.selectionBounds)?void 0:na.rotation)}}},Ax=sA;kb(Ax,"id","resizing");kb(Ax,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var tA=class extends Ui{constructor(){super(...arguments);
kb(this,"cursor","rotate");kb(this,"handle","");kb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(lt[this.handle],
this.app.selectionRotation)}};kb(tA,"id","pointingRotateHandle");var uA=class extends Ui{constructor(){super(...arguments);kb(this,"info",{});kb(this,"onEnter",a=>{this.info=a});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});kb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(uA,"id","pointingShapeBehindBounds");var Bx=class extends Ui{constructor(){super(...arguments);kb(this,"cursor","rotate");kb(this,"snapshot",{});kb(this,"initialCommonCenter",[0,0]);kb(this,"initialCommonBounds",{});kb(this,"initialAngle",0);kb(this,"initialSelectionRotation",0);kb(this,"handle","");kb(this,"onEnter",a=>{const {history:d,selectedShapesArray:m,selectionBounds:L}=this.app;
if(!L)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=qe({},L);this.initialCommonCenter=Qf.getBoundsCenter(L);this.initialAngle=Hd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(m.map(ha=>[ha.id,{point:[...ha.props.point],center:[...ha.center],rotation:ha.props.rotation,handles:"handles"in ha?Js(ha.handles):void 0}]));this.updateCursor()});kb(this,
"onExit",()=>{this.app.history.resume();this.snapshot={}});kb(this,"onPointerMove",()=>{const {selectedShapes:a,inputs:{shiftKey:d,currentPoint:m}}=this.app,{snapshot:L,initialCommonCenter:ha,initialAngle:na,initialSelectionRotation:ua}=this;let Ha=Hd.angle(ha,m)-na;d&&(Ha=cm.snapAngleToSegments(Ha,24));a.forEach($a=>{var jb=L[$a.id];let mb=0;if(d){var {rotation:Kb=0}=jb;mb=cm.snapAngleToSegments(Kb,24)-Kb}const Vb=Hd.sub(jb.center,jb.point);Kb=Hd.rotWith(jb.center,ha,Ha);if("handles"in $a){jb=jb.handles;
const Ob=jb.map(xc=>Hd.rotWith(xc.point,Vb,Ha)),kc=Qf.getCommonTopLeft(Ob);$a.update({point:Hd.add(kc,Hd.sub(Kb,Vb)),handles:jb.map((xc,$b)=>Cf(qe({},xc),{point:Hd.sub(Ob[$b],kc)}))})}else $a.update({point:Hd.sub(Kb,Vb),rotation:cm.clampRadians((jb.rotation||0)+Ha+mb)})});const Ua=cm.clampRadians(ua+Ha);this.app.setSelectionRotation(d?cm.snapAngleToSegments(Ua,24):Ua);this.updateCursor()});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,
"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(m=>{m.update(this.snapshot[m.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(lt[this.handle],this.app.selectionRotation)}};kb(Bx,"id","rotating");var vA=class extends Ui{constructor(){super(...arguments);kb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});kb(this,"onPinchEnd",()=>{this.tool.transition("idle")});kb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
kb(vA,"id","pinching");var wA=class extends zx{constructor(){super(...arguments);kb(this,"cursor","grabbing");kb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=hk();this.draggedBindingId=hk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=uc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};kb(wA,"id","translatingHandle");var xA=class extends Ui{constructor(){super(...arguments);
kb(this,"cursor","grabbing");kb(this,"info",{});kb(this,"onEnter",a=>{this.info=a});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("translatingHandle",this.info)});kb(this,"onPointerUp",()=>{this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(xA,"id","pointingHandle");var yA=class extends Ui{constructor(){super(...arguments);kb(this,"handle");kb(this,"onEnter",
a=>{var d;this.app.cursors.setCursor(lt[a.handle],null!=(d=this.app.selectionBounds.rotation)?d:0);this.handle=a.handle});kb(this,"onExit",()=>{this.app.cursors.reset()});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
a);break;default:this.tool.transition("pointingResizeHandle",a)}}});kb(this,"onPointerLeave",()=>{this.tool.transition("idle")});kb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var m=this.app.selectedShapes.values().next().value;if(!m.canEdit||this.app.readOnly||m.props.isLocked)m.onResetBounds({asset:m.props.assetId?this.app.assets[m.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":null==(d=m.onResetBounds)?void 0:d.call(m,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:m})}}})}};kb(yA,"id","hoveringSelectionHandle");var zA=class extends Ui{constructor(){super(...arguments);kb(this,"editingShape",{});kb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});kb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=
this.editingShape.props.text.trim();""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",
a);break;case "canvas":a.order||this.tool.transition("idle",a)}});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":bd(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};kb(zA,"id","editingShape");var AA=class extends Ui{constructor(){super(...arguments);kb(this,"minimapZoom",1);kb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});kb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");
var m=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(d&&m){const L=d.getBoundingClientRect();this.minimapRect.height=L.height;this.minimapRect.width=L.width;this.minimapRect.minX=L.left;this.minimapRect.minY=L.top;this.minimapRect.maxX=L.right;this.minimapRect.maxY=L.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=Hd.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);m=m.getBoundingClientRect();m=Hd.mul(Hd.sub(a,[m.left+m.width/2,m.top+m.height/
2]),this.minimapZoom);return Hd.sub(this.app.viewport.camera.point,m)}});kb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});kb(this,"onPointerMove",(a,d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});kb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};kb(AA,"id","pointingMinimap");var Dt=class extends Ar{constructor(){super(...arguments);kb(this,"returnTo",
"");kb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};kb(Dt,"id","select");kb(Dt,"initial","idle");kb(Dt,"shortcut","whiteboard/select");kb(Dt,"states",[lA,jA,kA,oA,mA,uA,qA,nA,yA,rA,tA,AA,xA,wA,pA,Ax,Bx,Bx,vA,zA]);var BA=class extends Ui{constructor(){super(...arguments);kb(this,"cursor","grabbing");kb(this,"originalScreenPoint",[]);kb(this,"originalCameraPoint",[]);kb(this,"prevState","idle");kb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=
this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});kb(this,"onPointerMove",(a,d)=>{a=me.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:me.sub(this.originalCameraPoint,me.div(a,this.app.viewport.camera.zoom))})});kb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};kb(BA,"id","panning");var CA=class extends Ui{constructor(){super(...arguments);kb(this,"onEnter",a=>{this.parent.prevTool&&
a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};kb(CA,"id","idle");var DA=class extends Ui{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(DA,
"id","idleHold");var EA=class extends Ui{constructor(){super(...arguments);kb(this,"origin",[0,0]);kb(this,"prevDelta",[0,0]);kb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});kb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});kb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};kb(EA,"id","pinching");var Et=class extends Ar{constructor(){super(...arguments);kb(this,"cursor","grab");kb(this,"prevTool",null);kb(this,"onEnter",a=>{this.prevTool=
null==a?void 0:a.prevTool});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});kb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};kb(Et,"id","move");kb(Et,"shortcut","whiteboard/pan");kb(Et,"states",[CA,DA,BA,EA]);kb(Et,"initial","idle");var lm=class{constructor(a,d={}){kb(this,"lastShapesNounces",null);kb(this,"app");kb(this,"id");kb(this,"name");kb(this,"shapes",[]);kb(this,"bindings",{});kb(this,"nonce",0);kb(this,"bringForward",
Ha=>{const Ua=this.parseShapesArg(Ha);Ua.sort(($a,jb)=>this.shapes.indexOf(jb)-this.shapes.indexOf($a)).map($a=>this.shapes.indexOf($a)).forEach($a=>{if($a!==this.shapes.length-1&&!Ua.includes(this.shapes[$a+1])){var jb=this.shapes[$a];this.shapes[$a]=this.shapes[$a+1];this.shapes[$a+1]=jb}});this.app.persist();return this});kb(this,"sendBackward",Ha=>{const Ua=this.parseShapesArg(Ha);Ua.sort(($a,jb)=>this.shapes.indexOf($a)-this.shapes.indexOf(jb)).map($a=>this.shapes.indexOf($a)).forEach($a=>{if(0!==
$a&&!Ua.includes(this.shapes[$a-1])){var jb=this.shapes[$a];this.shapes[$a]=this.shapes[$a-1];this.shapes[$a-1]=jb}});this.app.persist();return this});kb(this,"bringToFront",Ha=>{const Ua=this.parseShapesArg(Ha);this.shapes=this.shapes.filter($a=>!Ua.includes($a)).concat(Ua);this.app.persist();return this});kb(this,"sendToBack",Ha=>{const Ua=this.parseShapesArg(Ha);this.shapes=Ua.concat(this.shapes.filter($a=>!Ua.includes($a)));this.app.persist();return this});kb(this,"flip",(Ha,Ua)=>{Ha=this.parseShapesArg(Ha);
const $a=Qf.getCommonBounds(Ha.map(jb=>jb.bounds));Ha.forEach(jb=>{var mb;const Kb=Qf.getRelativeTransformedBoundingBox($a,$a,jb.bounds,"horizontal"===Ua,"vertical"===Ua);if(jb.serialized)jb.onResize(jb.serialized,{bounds:Kb,center:Qf.getBoundsCenter(Kb),rotation:null!=(mb=jb.props.rotation)?mb:-0,type:"top_left_corner",scale:jb.canFlip&&jb.props.scale?"horizontal"===Ua?[-jb.props.scale[0],1]:[1,-jb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});kb(this,
"getShapeById",Ha=>this.shapes.find(Ua=>Ua.id===Ha));kb(this,"cleanup",Ha=>{Ha=Hb(this.bindings,Ha);const Ua=new Set;let $a=!1,jb=!1;const mb=Js(this.bindings);Ha.forEach(Kb=>{var Vb;if(this.bindings[Kb.id]){var Ob=this.getShapeById(Kb.toId),kc=this.getShapeById(Kb.fromId);Ob&&kc?Ua.has(kc.id)||(Kb=this.updateArrowBindings(kc),Ua.add(kc.id),Kb&&(Ob=qe(qe({},kc.props),Kb),$a=!0,null==(Vb=this.getShapeById(Ob.id))?void 0:Vb.update(Ob,!1,(0,PE.default)(null==Kb?void 0:Kb.handles,null==kc?void 0:kc.props.handles)))):
(delete mb[Kb.id],jb=!0)}});Object.keys(mb).forEach(Kb=>{const Vb=this.bindings[Kb];0===this.shapes.filter(Ob=>Ob.id===Vb.fromId||Ob.id===Vb.toId).length&&(delete mb[Kb],jb=!0)});jb&&this.update({bindings:mb});($a||jb)&&this.app.persist(!0)});kb(this,"updateArrowBindings",Ha=>{var Ua,$a,jb,mb={start:Js(Ha.props.handles.start),end:Js(Ha.props.handles.end)},Kb={isBound:!1,handle:Ha.props.handles.start,point:me.add(Ha.props.handles.start.point,Ha.props.point)},Vb={isBound:!1,handle:Ha.props.handles.end,
point:me.add(Ha.props.handles.end.point,Ha.props.point)};if(Ha.props.handles.start.bindingId){var Ob=void 0!==(null==(Ua=Ha.props.decorations)?void 0:Ua.start);Ua=Ha.props.handles.start;var kc=this.bindings[Ha.props.handles.start.bindingId],xc=this.getShapeById(null==kc?void 0:kc.toId);if(xc){Kb=xc.getBounds();var $b=xc.getExpandedBounds(),pc=Qf.expandBounds(Kb,Ob?kc.distance:1);const {minX:lc,minY:Rc,width:Uc,height:Dd}=$b,Td=me.add([lc,Rc],me.mulV([Uc,Dd],me.rotWith(kc.point,[.5,.5],xc.props.rotation||
0)));Kb={isBound:!0,hasDecoration:Ob,binding:kc,handle:Ua,point:Td,target:xc,bounds:Kb,expandedBounds:$b,intersectBounds:pc,center:xc.getCenter()}}}if(Ha.props.handles.end.bindingId&&(Ob=void 0!==(null==($a=Ha.props.decorations)?void 0:$a.end),$a=Ha.props.handles.end,Ua=this.bindings[Ha.props.handles.end.bindingId],kc=this.getShapeById(null==Ua?void 0:Ua.toId))){Vb=kc.getBounds();xc=kc.getExpandedBounds();$b=Ob?Qf.expandBounds(Vb,Ua.distance):Vb;const {minX:lc,minY:Rc,width:Uc,height:Dd}=xc;pc=me.add([lc,
Rc],me.mulV([Uc,Dd],me.rotWith(Ua.point,[.5,.5],kc.props.rotation||0)));Vb={isBound:!0,hasDecoration:Ob,binding:Ua,handle:$a,point:pc,target:kc,bounds:Vb,expandedBounds:xc,intersectBounds:$b,center:kc.getCenter()}}for(const lc of["end","start"]){$a="start"===lc?Kb:Vb;const Rc="start"===lc?Vb:Kb;if($a.isBound)if($a.binding.distance){if(Ob=me.uni(me.sub($a.point,Rc.point)),Ua=A(Rc.point,Ob,$a.intersectBounds,$a.target.props.rotation).filter(Uc=>Uc.didIntersect).map(Uc=>Uc.points[0]).sort((Uc,Dd)=>me.dist(Uc,
Rc.point)-me.dist(Dd,Rc.point)),Ua[0])if(kc=void 0,Rc.isBound&&(kc=A(Rc.point,Ob,Rc.intersectBounds,Rc.target.props.rotation).filter(Uc=>Uc.didIntersect).map(Uc=>Uc.points[0]).sort((Uc,Dd)=>me.dist(Uc,Rc.point)-me.dist(Dd,Rc.point))[0]),Rc.isBound&&(2>Ua.length||kc&&Ua[0]&&10>Math.ceil(me.dist(Ua[0],kc))||Qf.boundsContain($a.expandedBounds,Rc.expandedBounds)||Qf.boundsCollide($a.expandedBounds,Rc.expandedBounds)))Ob=me.uni(me.sub(Rc.point,$a.point)),Ua=A($a.point,Ob,$a.bounds,$a.target.props.rotation).filter(Uc=>
Uc.didIntersect).map(Uc=>Uc.points[0]),Ua[0]&&(mb[lc].point=me.toFixed(me.sub(Ua[0],Ha.props.point)),mb["start"===lc?"end":"start"].point=me.toFixed(me.add(me.sub(Ua[0],Ha.props.point),me.mul(Ob,Math.min(me.dist(Ua[0],Rc.point),10*(Qf.boundsContain(Rc.bounds,$a.intersectBounds)?-1:1))))));else{if(!Rc.isBound&&(Ua[0]&&10>me.dist(Ua[0],Rc.point)||tk.pointInBounds(Rc.point,$a.intersectBounds)))return mb=me.uni(me.sub($a.center,Rc.point)),null==(jb=Ha.getHandlesChange)?void 0:jb.call(Ha,Ha.props,{[lc]:Cf(qe({},
Ha.props.handles[lc]),{point:me.toFixed(me.add(me.sub(Rc.point,Ha.props.point),me.mul(mb,10)))})});Ua[0]&&(mb[lc].point=me.toFixed(me.sub(Ua[0],Ha.props.point)))}}else mb[lc].point=me.sub($a.point,Ha.props.point)}return Ha.getHandlesChange(Ha.props,mb)});const {id:m,name:L,shapes:ha=[],bindings:na={},nonce:ua}=d;this.id=m;this.name=L;this.bindings=Object.assign({},na);this.app=a;this.nonce=ua||0;this.addShapes(...ha);cd(this);Id(()=>{const Ha=0<this.shapes.length?Object.fromEntries(this.shapes.map(Ua=>
[Ua.id,Ua.nonce])):null;if(this.lastShapesNounces&&Ha){const Ua=this.lastShapesNounces,$a=[...(new Set([...Object.keys(Ha),...Object.keys(Ua)]))].filter(jb=>Ua[jb]!==Ha[jb]);requestAnimationFrame(()=>{this.cleanup($a)})}Ha&&(this.lastShapesNounces=Ha)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>uc(a)),bindings:Js(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,
a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,m)=>a.indexOf(d.id)-a.indexOf(m.id));return this}addShapes(...a){if(0!==a.length)return a="getBounds"in a[0]?a:a.map(d=>new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(m=>!d.includes(m));return d}getBindableShapes(){return this.shapes.filter(a=>
a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};le([ef],lm.prototype,"id",2);le([ef],lm.prototype,"name",2);le([ef],lm.prototype,"shapes",2);le([ef],lm.prototype,"bindings",2);le([Xf],lm.prototype,"serialized",1);le([Xf],lm.prototype,"shapesById",1);le([ef],lm.prototype,"nonce",2);le([Tg],lm.prototype,"update",1);le([Tg],lm.prototype,"updateBindings",1);le([Tg],lm.prototype,"updateShapesIndex",1);le([Tg],lm.prototype,"addShapes",1);le([Tg],lm.prototype,"removeShapes",1);le([Tg],lm.prototype,
"bringForward",2);le([Tg],lm.prototype,"sendBackward",2);le([Tg],lm.prototype,"bringToFront",2);le([Tg],lm.prototype,"sendToBack",2);le([Tg],lm.prototype,"cleanup",2);var Jk=class{constructor(){kb(this,"shiftKey",!1);kb(this,"ctrlKey",!1);kb(this,"modKey",!1);kb(this,"altKey",!1);kb(this,"spaceKey",!1);kb(this,"isPinching",!1);kb(this,"currentScreenPoint",[0,0]);kb(this,"currentPoint",[0,0]);kb(this,"previousScreenPoint",[0,0]);kb(this,"previousPoint",[0,0]);kb(this,"originScreenPoint",[0,0]);kb(this,
"originPoint",[0,0]);kb(this,"pointerIds",new Set);kb(this,"state","idle");kb(this,"containerOffset",[0,0]);kb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);this.updateModifiers(d);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});kb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});kb(this,"onPointerUp",(a,d)=>
{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});kb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});kb(this,"onKeyUp",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});kb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});kb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});kb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});
cd(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=me.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=yb()?a.metaKey:a.ctrlKey))}};le([ef],Jk.prototype,"shiftKey",2);le([ef],Jk.prototype,"ctrlKey",2);le([ef],Jk.prototype,"modKey",2);le([ef],Jk.prototype,"altKey",
2);le([ef],Jk.prototype,"spaceKey",2);le([ef],Jk.prototype,"isPinching",2);le([ef],Jk.prototype,"currentScreenPoint",2);le([ef],Jk.prototype,"currentPoint",2);le([ef],Jk.prototype,"previousScreenPoint",2);le([ef],Jk.prototype,"previousPoint",2);le([ef],Jk.prototype,"originScreenPoint",2);le([ef],Jk.prototype,"originPoint",2);le([ef],Jk.prototype,"state",2);le([ef],Jk.prototype,"containerOffset",2);le([Tg],Jk.prototype,"updateContainerOffset",1);le([Tg],Jk.prototype,"updateModifiers",1);le([Tg],Jk.prototype,
"onPointerDown",2);le([Tg],Jk.prototype,"onPointerMove",2);le([Tg],Jk.prototype,"onPointerUp",2);le([Tg],Jk.prototype,"onKeyDown",2);le([Tg],Jk.prototype,"onKeyUp",2);le([Tg],Jk.prototype,"onPinchStart",2);le([Tg],Jk.prototype,"onPinch",2);le([Tg],Jk.prototype,"onPinchEnd",2);var zE=(a,d=100)=>-(Math.cos(Math.PI*Hd.clamp(a/d,0,1))-1)/2,Is=class{constructor(){kb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});kb(this,"camera",{point:[0,0],zoom:1});kb(this,"updateBounds",a=>
{this.bounds=a;return this});kb(this,"panCamera",a=>this.update({point:Hd.sub(this.camera.point,Hd.div(a,this.camera.zoom))}));kb(this,"panToPointWhenNearBounds",a=>{const d=Hd.div([Is.panThreshold,Is.panThreshold],this.camera.zoom),m=Hd.sub([this.currentView.maxX,this.currentView.maxY],Hd.add(a,d));a=Hd.sub([this.currentView.minX,this.currentView.minY],Hd.sub(a,d));this.panCamera(Hd.mul([0>m[0]?m[0]:0<a[0]?a[0]:0,0>m[1]?m[1]:0<a[1]?a[1]:0],-Is.panMultiplier*this.camera.zoom))});kb(this,"update",
({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});kb(this,"getPagePoint",a=>{const {camera:d,bounds:m}=this;return Hd.sub(Hd.div(Hd.sub(a,[m.minX,m.minY]),d.zoom),d.point)});kb(this,"getScreenPoint",a=>{const {camera:d}=this;return Hd.mul(Hd.add(a,d.point),d.zoom)});kb(this,"onZoom",(a,d,m=!1)=>this.pinchZoom(a,[0,0],d,m));kb(this,"pinchZoom",(a,d,m,L=!1)=>{var {camera:ha}=this;d=Hd.sub(ha.point,
Hd.div(d,ha.zoom));m=Hd.clamp(m,Is.minZoom,Is.maxZoom);ha=Hd.div(a,ha.zoom);a=Hd.div(a,m);a=Hd.toFixed(Hd.add(d,Hd.sub(a,ha)));L?this.animateCamera({point:a,zoom:m}):this.update({point:a,zoom:m});return this});kb(this,"setZoom",(a,d=!1)=>{const {bounds:m}=this;this.onZoom([m.width/2,m.height/2],a,d)});kb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});kb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});kb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});
kb(this,"animateCamera",({point:a,zoom:d})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/d}));kb(this,"animateToViewport",a=>{const d=performance.now(),m=qe({},this.currentView),L=()=>{var ha=performance.now()-d;ha=zE(ha);var na=m.minX+(a.minX-m.minX)*ha;this.update({point:[-na,-(m.minY+(a.minY-m.minY)*ha)],zoom:this.bounds.width/(m.maxX+(a.maxX-m.maxX)*ha-na)});1>ha&&requestAnimationFrame(L)};
L()});kb(this,"zoomToBounds",({width:a,height:d,minX:m,minY:L})=>{const {bounds:ha,camera:na}=this;let ua=Math.min((ha.width-100)/a,(ha.height-100)/d);ua=Math.min(1,Math.max(Is.minZoom,na.zoom===ua||1>na.zoom?Math.min(1,ua):ua));a=Hd.add([-m,-L],[(ha.width-a*ua)/2/ua,(ha.height-d*ua)/2/ua]);this.animateCamera({point:a,zoom:ua})});cd(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:m}}=this,L=a.width/m,ha=a.height/m;return{minX:-d[0],minY:-d[1],maxX:L-d[0],maxY:ha-d[1],width:L,height:ha}}},
fp=Is;kb(fp,"minZoom",.1);kb(fp,"maxZoom",4);kb(fp,"panMultiplier",.05);kb(fp,"panThreshold",100);le([ef],fp.prototype,"bounds",2);le([ef],fp.prototype,"camera",2);le([Tg],fp.prototype,"updateBounds",2);le([Tg],fp.prototype,"update",2);le([Xf],fp.prototype,"currentView",1);var AE=class{constructor(a){kb(this,"app");kb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});kb(this,"hoverShape",d=>{this.app.setHoveredShape(d);
return this});kb(this,"createShapes",(...d)=>{this.app.createShapes(d);return this});kb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);return this});kb(this,"deleteShapes",(...d)=>{this.app.deleteShapes(d.length?d:this.app.selectedShapesArray);return this});kb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});kb(this,"deselectShapes",(...d)=>{const m="string"===typeof d[0]?d:d.map(L=>L.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(L=>!m.includes(L.id)));
return this});kb(this,"flipHorizontal",(...d)=>{this.app.flipHorizontal(d);return this});kb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);return this});kb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>!this.app.shapesInGroups().includes(d)));return this});kb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});kb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});kb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});
kb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});kb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Qf.getCommonBounds(d.map(m=>m.bounds));this.app.viewport.zoomToBounds(d);return this});kb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Qf.getCommonBounds(d.map(m=>m.bounds));this.app.viewport.update({point:me.add(me.neg(Qf.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/
2])});return this});kb(this,"zoomToSelection",()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);return this});kb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:me.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});kb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});kb(this,"toggleSnapToGrid",()=>{const {settings:d}=this.app;d.update({snapToGrid:!d.snapToGrid});
return this});kb(this,"togglePenMode",()=>{const {settings:d}=this.app;d.update({penMode:!d.penMode});return this});kb(this,"setColor",d=>{const {settings:m}=this.app;m.update({color:d});this.app.selectedShapesArray.forEach(L=>{L.props.isLocked||L.update({fill:d,stroke:d})});this.app.persist();return this});kb(this,"setScaleLevel",d=>{const {settings:m}=this.app;m.update({scaleLevel:d});this.app.selectedShapes.forEach(L=>{L.props.isLocked||L.setScaleLevel(d)});this.app.persist();return this});kb(this,
"undo",()=>{this.app.undo();return this});kb(this,"redo",()=>{this.app.redo();return this});kb(this,"persist",()=>{this.app.persist();return this});kb(this,"createNewLineBinding",(d,m)=>this.app.createNewLineBinding(d,m));kb(this,"cloneShapes",({shapes:d,assets:m,bindings:L,point:ha=[0,0]})=>{const na=Qf.getCommonBounds(d.filter(Ua=>"group"!==Ua.type).map(Ua=>{var $a,jb,mb,Kb,Vb,Ob,kc,xc,$b,pc,lc,Rc,Uc,Dd,Td,lf;return{minX:null!=(jb=null==($a=Ua.point)?void 0:$a[0])?jb:ha[0],minY:null!=(Kb=null==
(mb=Ua.point)?void 0:mb[1])?Kb:ha[1],width:null!=(Ob=null==(Vb=Ua.size)?void 0:Vb[0])?Ob:4,height:null!=(xc=null==(kc=Ua.size)?void 0:kc[1])?xc:4,maxX:(null!=(pc=null==($b=Ua.point)?void 0:$b[0])?pc:ha[0])+(null!=(Rc=null==(lc=Ua.size)?void 0:lc[0])?Rc:4),maxY:(null!=(Dd=null==(Uc=Ua.point)?void 0:Uc[1])?Dd:ha[1])+(null!=(lf=null==(Td=Ua.size)?void 0:Td[1])?lf:4)}})),ua=d.map(Ua=>Cf(qe({},Ua),{id:hk(),point:[ha[0]+Ua.point[0]-na.minX,ha[1]+Ua.point[1]-na.minY]}));ua.forEach(Ua=>{var $a;Ua.children&&
0<(null==($a=Ua.children)?void 0:$a.length)&&(Ua.children=Ua.children.map(jb=>{var mb;return null==(mb=ua[d.findIndex(Kb=>Kb.id===jb)])?void 0:mb.id}).filter(ic))});const Ha=[];ua.flatMap(Ua=>{var $a;return Object.values(null!=($a=Ua.handles)?$a:{})}).forEach(Ua=>{if(Ua.bindingId){var $a=L[Ua.bindingId];if($a){var jb=d.findIndex(Kb=>Kb.id===$a.fromId);const mb=d.findIndex(Kb=>Kb.id===$a.toId);$a&&-1!==jb&&-1!==mb?(jb=Cf(qe({},$a),{id:hk(),fromId:ua[jb].id,toId:ua[mb].id}),Ha.push(jb),Ua.bindingId=
jb.id):Ua.bindingId=void 0}else console.warn("binding not found",Ua.bindingId)}});m=m.filter(Ua=>ua.some($a=>$a.assetId===Ua.id));return{shapes:ua,assets:m,bindings:Ha}});kb(this,"getClonedShapesFromTldrString",(d,m)=>{try{{var L;const $a=null==(L=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:L[1];if($a){try{var ha=JSON.parse($a)}catch(jb){ha=null}var na=ha}else na=void 0}d=na;if(!d)return null;const {shapes:ua,bindings:Ha,assets:Ua}=d;return this.cloneShapes({shapes:ua,bindings:Ha,
assets:Ua,point:m})}catch(ua){console.log(ua)}return null});kb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});kb(this,"addClonedShapes",d=>{const {shapes:m,assets:L,bindings:ha}=d;0<L.length&&this.app.createAssets(L);0<m.length&&this.app.createShapes(m);this.app.currentPage.updateBindings(Object.fromEntries(ha.map(na=>[na.id,na])));this.app.selectedTool.transition("idle");return this});kb(this,"addClonedShapesFromTldrString",(d,m)=>{(d=this.getClonedShapesFromTldrString(d,
m))&&this.addClonedShapes(d);return this});kb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var m=[...d.filter(L=>"group"===L.type),...d.map(L=>this.app.getParentGroup(L))].filter(ic);this.app.currentPage.removeShapes(...m);d=d.filter(L=>"group"!==L.type);1<d.length&&(m=this.app.getShapeClass("group"),m=new m({id:hk(),type:m.id,parentId:this.app.currentPage.id,children:d.map(L=>L.id)}),this.app.currentPage.addShapes(m),this.app.setSelectedShapes([m]),this.app.bringForward(d));
this.app.persist()}});kb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(L=>"group"===L.type),...d.map(L=>this.app.getParentGroup(L))].filter(ic);var m=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),this.app.persist(),this.app.setSelectedShapes(m))}});kb(this,"convertShapes",(d,m=this.app.allSelectedShapesArray)=>{const L=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...m);m=m.map(ha=>new L(Cf(qe({},ha.serialized),
{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...m);this.app.persist();this.app.setSelectedShapes(m)});kb(this,"setCollapsed",(d,m=this.app.allSelectedShapesArray)=>{m.forEach(L=>{"logseq-portal"===L.props.type&&L.setCollapsed(d)});this.app.persist()});this.app=a}},Ft=class{constructor(){kb(this,"cursor","default");kb(this,"rotation",0);kb(this,"reset",()=>{this.cursor="default"});kb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});kb(this,
"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});cd(this)}};le([ef],Ft.prototype,"cursor",2);le([ef],Ft.prototype,"rotation",2);le([Tg],Ft.prototype,"reset",2);le([Tg],Ft.prototype,"setCursor",2);le([Tg],Ft.prototype,"setRotation",2);var Gt=class{constructor(a){kb(this,"app");kb(this,"stack",[]);kb(this,"isPaused",!0);kb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});kb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});kb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",
{replace:d})});kb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});kb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});kb(this,"instantiateShape",d=>new (this.app.getShapeClass(d.type))(d));kb(this,"deserialize",d=>{bd(()=>{var m,{pages:L}=d;const ha=this.isPaused;this.pause();const na=[...this.app.selectedIds];try{const ua=new Map(this.app.pages),Ha=[];for(const Ua of L){const $a=
ua.get(Ua.id);if(void 0!==$a){const jb=new Map($a.shapes.map(mb=>[mb.props.id,mb]));L=[];for(const mb of Ua.shapes){const Kb=jb.get(mb.id);void 0!==Kb?(Kb.nonce!==mb.nonce&&(Kb.update(mb,!0),Kb.nonce=mb.nonce,Kb.setLastSerialized(mb)),jb.delete(mb.id)):L.push(this.instantiateShape(mb))}0<jb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&$a.removeShapes(...jb.values());0<L.length&&$a.addShapes(...L);ua.delete(Ua.id);$a.updateBindings(Ua.bindings);$a.nonce=null!=(m=Ua.nonce)?m:0}else{const {id:jb,
name:mb,shapes:Kb,bindings:Vb,nonce:Ob}=Ua;Ha.push(new lm(this.app,{id:jb,name:mb,nonce:Ob,bindings:Vb,shapes:Kb.map(kc=>this.instantiateShape(kc))}))}}0<Ha.length&&this.app.addPages(Ha);0<ua.size&&this.app.removePages(Array.from(ua.values()));this.app.setSelectedShapes(na).setErasingShapes([])}catch(ua){console.warn(ua)}ha||this.resume()})});this.app=a;cd(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};le([ef],Gt.prototype,"stack",2);le([Tg],Gt.prototype,"persist",
2);le([Tg],Gt.prototype,"undo",2);le([Tg],Gt.prototype,"redo",2);le([Tg],Gt.prototype,"deserialize",2);var Br=class{constructor(){kb(this,"mode","light");kb(this,"showGrid",!0);kb(this,"snapToGrid",!0);kb(this,"penMode",!1);kb(this,"scaleLevel","md");kb(this,"color","");cd(this)}update(a){Object.assign(this,a)}};le([ef],Br.prototype,"mode",2);le([ef],Br.prototype,"showGrid",2);le([ef],Br.prototype,"snapToGrid",2);le([ef],Br.prototype,"penMode",2);le([ef],Br.prototype,"scaleLevel",2);le([ef],Br.prototype,
"color",2);le([Tg],Br.prototype,"update",1);var Oh=class extends Ct{constructor(a,d,m,L){var ha,na;super();kb(this,"uuid",hk());kb(this,"readOnly");kb(this,"api");kb(this,"inputs",new Jk);kb(this,"cursors",new Ft);kb(this,"viewport",new fp);kb(this,"settings",new Br);kb(this,"Tools",[]);kb(this,"history",new Gt(this));kb(this,"persist",this.history.persist);kb(this,"undo",this.history.undo);kb(this,"redo",this.history.redo);kb(this,"saving",!1);kb(this,"saveState",()=>{this.history.isPaused||(this.saving=
!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});kb(this,"load",()=>{this.notify("load",null);return this});kb(this,"save",()=>{this.notify("save",null);return this});kb(this,"pages",new Map([["page",new lm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));kb(this,"getPageById",ua=>{const Ha=this.pages.get(ua);if(!Ha)throw Error(`Could not find a page named ${ua}.`);return Ha});kb(this,"getShapeById",(ua,Ha=this.currentPage.id)=>{var Ua;return null==(Ua=this.getPageById(Ha))?
void 0:Ua.shapesById[ua]});kb(this,"createShapes",ua=>{if(this.readOnly)return this;(ua=this.currentPage.addShapes(...ua))&&this.notify("create-shapes",ua);this.persist();return this});kb(this,"updateShapes",ua=>{if(this.readOnly)return this;ua.forEach(Ha=>{const Ua=this.getShapeById(Ha.id);null==Ua?void 0:Ua.update(Ha);Ha.type!==(null==Ua?void 0:Ua.type)&&this.api.convertShapes(Ha.type,[Ua])});this.persist();return this});kb(this,"deleteShapes",ua=>{if(0===ua.length||this.readOnly)return this;ua=
ua.map(jb=>"string"===typeof jb?this.getShapeById(jb):jb).filter(ic).filter(jb=>!jb.props.isLocked);const Ha=this.shapesInGroups(ua);ua.forEach(jb=>{this.getParentGroup(jb)&&Ha.push(jb)});let Ua=new Set([...ua,...Ha].map(jb=>jb.id));Ha.forEach(jb=>{var mb;const Kb=this.getParentGroup(jb);if(Kb){const Vb=null==(mb=Kb.props.children)?void 0:mb.filter(Ob=>Ob!==jb.id);!Vb||1>=(null==Vb?void 0:Vb.length)?Ua.add(Kb.id):Kb.update({children:Vb})}});const $a=(jb,mb)=>{var Kb;[...Ua].includes(jb)&&"line"===
(null==(Kb=this.getShapeById(mb))?void 0:Kb.type)&&Ua.add(mb)};this.currentPage.shapes.filter(jb=>!jb.props.isLocked).flatMap(jb=>{var mb;return Object.values(null!=(mb=jb.props.handles)?mb:{})}).flatMap(jb=>jb.bindingId).filter(ic).map(jb=>{var mb,Kb;const Vb=null==(mb=this.currentPage.bindings[jb])?void 0:mb.toId;jb=null==(Kb=this.currentPage.bindings[jb])?void 0:Kb.fromId;Vb&&jb&&($a(Vb,jb),$a(jb,Vb))});ua=[...Ua].map(jb=>this.getShapeById(jb));this.setSelectedShapes(this.selectedShapesArray.filter(jb=>
!Ua.has(jb.id)));(ua=this.currentPage.removeShapes(...ua))&&this.notify("delete-shapes",ua);this.persist();return this});kb(this,"bringForward",(ua=this.selectedShapesArray)=>{0<ua.length&&!this.readOnly&&this.currentPage.bringForward(ua);return this});kb(this,"sendBackward",(ua=this.selectedShapesArray)=>{0<ua.length&&!this.readOnly&&this.currentPage.sendBackward(ua);return this});kb(this,"sendToBack",(ua=this.selectedShapesArray)=>{0<ua.length&&!this.readOnly&&this.currentPage.sendToBack(ua);return this});
kb(this,"bringToFront",(ua=this.selectedShapesArray)=>{0<ua.length&&!this.readOnly&&this.currentPage.bringToFront(ua);return this});kb(this,"flipHorizontal",(ua=this.selectedShapesArray)=>{this.currentPage.flip(ua,"horizontal");return this});kb(this,"flipVertical",(ua=this.selectedShapesArray)=>{this.currentPage.flip(ua,"vertical");return this});kb(this,"align",(ua,Ha=this.selectedShapesArray)=>{if(2>Ha.length||this.readOnly)return this;const Ua=Ha.map(Vb=>{const Ob=Vb.getBounds();return{id:Vb.id,
point:[Ob.minX,Ob.minY],bounds:Ob}}),$a=Qf.getCommonBounds(Ua.map(({bounds:Vb})=>Vb)),jb=$a.minX+$a.width/2,mb=$a.minY+$a.height/2,Kb=Object.fromEntries(Ua.map(({id:Vb,point:Ob,bounds:kc})=>[Vb,{prev:Ob,next:{top:[Ob[0],$a.minY],centerVertical:[Ob[0],mb-kc.height/2],bottom:[Ob[0],$a.maxY-kc.height],left:[$a.minX,Ob[1]],centerHorizontal:[jb-kc.width/2,Ob[1]],right:[$a.maxX-kc.width,Ob[1]]}[ua]}]));Ha.forEach(Vb=>{Kb[Vb.id]&&Vb.update({point:Kb[Vb.id].next})});this.persist();return this});kb(this,"distribute",
(ua,Ha=this.selectedShapesArray)=>{if(2>Ha.length||this.readOnly)return this;const Ua=Object.fromEntries(Qf.getDistributions(Ha,ua).map($a=>[$a.id,$a]));Ha.forEach($a=>{Ua[$a.id]&&$a.update({point:Ua[$a.id].next})});this.persist();return this});kb(this,"packIntoRectangle",(ua=this.selectedShapesArray)=>{if(2>ua.length||this.readOnly)return this;const Ha=Object.fromEntries(Qf.getPackedDistributions(ua).map(Ua=>[Ua.id,Ua]));ua.forEach(Ua=>{Ha[Ua.id]&&Ua.update({point:Ha[Ua.id].next})});this.persist();
return this});kb(this,"setLocked",ua=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(Ha=>{Ha.update({isLocked:ua})});this.persist();return this});kb(this,"assets",{});kb(this,"removeUnusedAssets",()=>{const ua=this.getCleanUpAssets();Object.keys(this.assets).forEach(Ha=>{ua.some(Ua=>Ua.id===Ha)||delete this.assets[Ha]});this.persist();return this});kb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const Ha=this.allSelectedShapesArray;
var ua=JSON.stringify({shapes:Ha.map($a=>$a.serialized),assets:this.getCleanUpAssets().filter($a=>Ha.some(jb=>jb.props.assetId===$a.id)),bindings:uc(this.currentPage.bindings)});ua=encodeURIComponent(`<whiteboard-tldr>${ua}</whiteboard-tldr>`);const Ua=this.selectedShapesArray.map($a=>`((${$a.props.id}))`).join(" ");this.notify("copy",{text:Ua,html:ua})}});kb(this,"paste",(ua,Ha)=>{var Ua;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!Ha,dataTransfer:null!=
(Ua=null==ua?void 0:ua.clipboardData)?Ua:void 0})});kb(this,"cut",()=>{this.copy();this.api.deleteShapes()});kb(this,"drop",(ua,Ha)=>{this.notify("drop",{dataTransfer:ua,point:Ha?this.viewport.getPagePoint(Ha):Qf.getBoundsCenter(this.viewport.currentView)})});kb(this,"selectTool",(ua,Ha={})=>{this.readOnly&&!["select","move"].includes(ua)||this.transition(ua,Ha)});kb(this,"editingId");kb(this,"setEditingShape",ua=>{this.editingId="string"===typeof ua?ua:null==ua?void 0:ua.id;return this});kb(this,
"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});kb(this,"hoveredId");kb(this,"setHoveredShape",ua=>{this.hoveredId="string"===typeof ua?ua:null==ua?void 0:ua.id;return this});kb(this,"selectedIds",new Set);kb(this,"selectedShapes",new Set);kb(this,"selectionRotation",0);kb(this,"setSelectedShapes",ua=>{var Ha;const {selectedIds:Ua,selectedShapes:$a}=this;Ua.clear();$a.clear();ua[0]&&"string"===typeof ua[0]?ua.forEach(mb=>Ua.add(mb)):ua.forEach(mb=>Ua.add(mb.id));
const jb=this.currentPage.shapes.filter(mb=>Ua.has(mb.id));jb.forEach(mb=>$a.add(mb));this.selectionRotation=1===jb.length?null!=(Ha=jb[0].props.rotation)?Ha:0:0;0===ua.length&&this.setEditingShape();return this});kb(this,"erasingIds",new Set);kb(this,"erasingShapes",new Set);kb(this,"setErasingShapes",ua=>{const {erasingIds:Ha,erasingShapes:Ua}=this;Ha.clear();Ua.clear();ua[0]&&"string"===typeof ua[0]?ua.forEach($a=>Ha.add($a)):ua.forEach($a=>Ha.add($a.id));this.currentPage.shapes.filter($a=>Ha.has($a.id)).forEach($a=>
Ua.add($a));return this});kb(this,"bindingIds");kb(this,"setBindingShapes",ua=>{this.bindingIds=ua;return this});kb(this,"clearBindingShape",()=>this.setBindingShapes());kb(this,"createNewLineBinding",(ua,Ha)=>{ua="string"===typeof ua?this.getShapeById(ua):ua;Ha="string"===typeof Ha?this.getShapeById(Ha):Ha;if((null==ua?0:ua.canBind)&&(null==Ha?0:Ha.canBind)&&(Ha=Kc(ua,Ha))){const [Ua,$a]=Ha;this.createShapes([Ua]);this.currentPage.updateBindings(Object.fromEntries($a.map(jb=>[jb.id,jb])));this.persist();
return!0}return!1});kb(this,"brush");kb(this,"setBrush",ua=>{this.brush=ua;return this});kb(this,"setCamera",(ua,Ha)=>{this.viewport.update({point:ua,zoom:Ha});return this});kb(this,"getPagePoint",ua=>{const {camera:Ha}=this.viewport;return Hd.sub(Hd.div(ua,Ha.zoom),Ha.point)});kb(this,"getScreenPoint",ua=>{const {camera:Ha}=this.viewport;return Hd.mul(Hd.add(ua,Ha.point),Ha.zoom)});kb(this,"Shapes",new Map);kb(this,"registerShapes",ua=>{ua.forEach(Ha=>{if("group"===Ha.id){const Ua=this;Ha.prototype.getShapes=
function(){var $a,jb;return null!=(jb=null==($a=this.props.children)?void 0:$a.map(mb=>Ua.getShapeById(mb)).filter(Boolean))?jb:[]}}return this.Shapes.set(Ha.id,Ha)})});kb(this,"deregisterShapes",ua=>{ua.forEach(Ha=>this.Shapes.delete(Ha.id))});kb(this,"getShapeClass",ua=>{if(!ua)throw Error("No shape type provided.");const Ha=this.Shapes.get(ua);if(!Ha)throw Error(`Could not find shape class for ${ua}`);return Ha});kb(this,"wrapUpdate",ua=>{bd(()=>{const Ha=!this.history.isPaused;Ha&&this.history.pause();
ua();Ha&&(this.history.resume(),this.persist())})});kb(this,"subscriptions",new Set([]));kb(this,"subscribe",(ua,Ha)=>{if(void 0===Ha)throw Error("Callback is required.");const Ua={event:ua,callback:Ha};this.subscriptions.add(Ua);return()=>this.unsubscribe(Ua)});kb(this,"unsubscribe",ua=>{this.subscriptions.delete(ua);return this});kb(this,"notify",(ua,Ha)=>{this.subscriptions.forEach(Ua=>{Ua.event===ua&&Ua.callback(this,Ha)});return this});kb(this,"onTransition",()=>{});kb(this,"onPointerDown",(ua,
Ha)=>{if(!this.editingShape&&1===Ha.button&&!this.isIn("move"))this.temporaryTransitionToMove(Ha);else if(2===Ha.button&&!this.editingShape)Ha.preventDefault(),this.transition("select");else if("clientX"in Ha)this.inputs.onPointerDown([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});kb(this,"onPointerUp",(ua,Ha)=>{if(!this.editingShape&&1===Ha.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ha.stopPropagation(),Ha.preventDefault();else if("clientX"in
Ha)this.inputs.onPointerUp([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});kb(this,"onPointerMove",(ua,Ha)=>{if("clientX"in Ha)this.inputs.onPointerMove([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});kb(this,"onKeyDown",(ua,Ha)=>{if(this.editingShape||" "!==Ha.key||this.isIn("move"))this.inputs.onKeyDown(Ha);else this.temporaryTransitionToMove(Ha)});kb(this,"onKeyUp",(ua,Ha)=>{if(!this.editingShape&&" "===Ha.key&&this.isIn("move"))this.selectedTool.transition("idle",
{exit:!0}),Ha.stopPropagation(),Ha.preventDefault();else this.inputs.onKeyUp(Ha)});kb(this,"onPinchStart",(ua,Ha)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(ua.point),.5],Ha)});kb(this,"onPinch",(ua,Ha)=>{this.inputs.onPinch([...this.viewport.getPagePoint(ua.point),.5],Ha)});kb(this,"onPinchEnd",(ua,Ha)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(ua.point),.5],Ha)});this._states=[Dt,Et];this.readOnly=L;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),
L=null!=(ha=this.initial)?ha:this.states[0].id,ha=this.children.get(L))&&(this.currentState=ha,null==(na=this.currentState)?void 0:na._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);m&&this.registerTools(m);this.history.resume();a&&this.history.deserialize(a);this.api=new AE(this);cd(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>
this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>d.props.children).filter(ic).map(d=>this.getShapeById(d)).filter(ic)}getParentGroup(a){return this.shapes.find(d=>{var m;return null==(m=d.props.children)?void 0:m.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):a.forEach(d=>
delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(m=>{m.props.assetId&&this.assets[m.props.assetId]&&a.add(this.assets[m.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=this;
return a?d.shapes.find(m=>m.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(m=>m.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=this;return a?this.shapes.find(d=>{var m;return"group"===d.type&&(null==(m=d.props.children)?void 0:m.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=
this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(L=>{var ha;return Object.values(null!=(ha=L.props.handles)?ha:{})}).flatMap(L=>L.bindingId).filter(ic).flatMap(L=>{var ha,na;return[null==(ha=this.currentPage.bindings[L])?void 0:ha.fromId,null==(na=this.currentPage.bindings[L])?
void 0:na.toId]}).filter(ic):[],m=[...(null!=(a=this.bindingIds)?a:[]),...d];return m?this.currentPage.shapes.filter(L=>null==m?void 0:m.includes(L.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:d,viewport:{currentView:m}}=this;return d.shapes.filter(L=>!L.canUnmount||a.has(L)||Qf.boundsContain(m,L.rotatedBounds)||Qf.boundsCollide(m,
L.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!Qf.boundsContain(d,a)&&!Qf.boundsCollide(d,a)){var m=Qf.getBoundsCenter(a);return Hd.clampV([(m[0]-d.minX-d.width/2)/d.width,(m[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?Cf(qe({},a[0].bounds),{rotation:a[0].props.rotation}):Qf.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;
const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}temporaryTransitionToMove(a){a.stopPropagation();a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};kb(Oh,"id","app");kb(Oh,"initial","select");le([Xf],Oh.prototype,"serialized",1);le([ef],Oh.prototype,"pages",2);le([Xf],Oh.prototype,
"currentPageId",1);le([Xf],Oh.prototype,"currentPage",1);le([Tg],Oh.prototype,"addPages",1);le([Tg],Oh.prototype,"removePages",1);le([Tg],Oh.prototype,"createShapes",2);le([Tg],Oh.prototype,"updateShapes",2);le([Tg],Oh.prototype,"deleteShapes",2);le([ef],Oh.prototype,"assets",2);le([Tg],Oh.prototype,"addAssets",1);le([Tg],Oh.prototype,"removeAssets",1);le([Tg],Oh.prototype,"removeUnusedAssets",2);le([Xf],Oh.prototype,"selectedTool",1);le([ef],Oh.prototype,"editingId",2);le([Xf],Oh.prototype,"editingShape",
1);le([Tg],Oh.prototype,"setEditingShape",2);le([ef],Oh.prototype,"hoveredId",2);le([Xf],Oh.prototype,"hoveredShape",1);le([Xf],Oh.prototype,"hoveredGroup",1);le([Tg],Oh.prototype,"setHoveredShape",2);le([ef],Oh.prototype,"selectedIds",2);le([ef],Oh.prototype,"selectedShapes",2);le([ef],Oh.prototype,"selectionRotation",2);le([Xf],Oh.prototype,"selectedShapesArray",1);le([Xf],Oh.prototype,"allSelectedShapes",1);le([Xf],Oh.prototype,"allSelectedShapesArray",1);le([Tg],Oh.prototype,"setSelectedShapes",
2);le([Tg],Oh.prototype,"setSelectionRotation",1);le([ef],Oh.prototype,"erasingIds",2);le([ef],Oh.prototype,"erasingShapes",2);le([Xf],Oh.prototype,"erasingShapesArray",1);le([Tg],Oh.prototype,"setErasingShapes",2);le([ef],Oh.prototype,"bindingIds",2);le([Xf],Oh.prototype,"bindingShapes",1);le([Tg],Oh.prototype,"setBindingShapes",2);le([Tg],Oh.prototype,"createNewLineBinding",2);le([ef],Oh.prototype,"brush",2);le([Tg],Oh.prototype,"setBrush",2);le([Tg],Oh.prototype,"setCamera",2);le([Xf],Oh.prototype,
"currentGrid",1);le([Xf],Oh.prototype,"shapes",1);le([Xf],Oh.prototype,"shapesInViewport",1);le([Xf],Oh.prototype,"selectionDirectionHint",1);le([Xf],Oh.prototype,"selectionBounds",1);le([Xf],Oh.prototype,"showSelection",1);le([Xf],Oh.prototype,"showSelectionDetail",1);le([Xf],Oh.prototype,"showSelectionRotation",1);le([Xf],Oh.prototype,"showContextBar",1);le([Xf],Oh.prototype,"showRotateHandles",1);le([Xf],Oh.prototype,"showResizeHandles",1);var BE=Function.prototype.toString,Cx=Object.create,CE=
Object.prototype.toString,DE=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,m){this._keys.push(d);this._values.push(m)};return a}(),EE="undefined"!==typeof WeakMap?Ud:Yc,FE="g"===/test/g.flags?Te:Oe,GE="undefined"!==typeof Symbol?He:jf,HE=Object.defineProperty,IE=Object.getOwnPropertyDescriptor,FA=Object.getOwnPropertyNames,Dx=Object.getOwnPropertySymbols,
GA=Object.prototype,HA=GA.hasOwnProperty,JE=GA.propertyIsEnumerable,IA="function"===typeof Dx,KE=IA?Bf:FA,LE=Array.isArray,Ex=Object.assign,ME=Object.getPrototypeOf,JA={array:function(a,d){var m=new d.Constructor;d.cache.set(a,m);for(var L=0,ha=a.length;L<ha;++L)m[L]=d.copier(a[L],d);return m},arrayBuffer:function(a,d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,d){return new d.Constructor(a.getTime())},
error:Og,map:jg,object:IA?vg:Yf,regExp:function(a,d){d=new d.Constructor(a.source,FE(a));d.lastIndex=a.lastIndex;return d},set:Hh},NE=Ex({},JA,{array:function(a,d){var m=new d.Constructor;d.cache.set(a,m);return Tf(a,m,d)},map:function(a,d){return Tf(a,jg(a,d),d)},object:function(a,d){var m=Fd(d.prototype);d.cache.set(a,m);return Tf(a,m,d)},set:function(a,d){return Tf(a,Hh(a,d),d)}});Ih(Ex({},NE,{}));var OE=Ih({}),PE=Jf(kt()),QE=Jf(mr()),Js=OE,Do=class{static insertTextFirefox(a,d){a.setRangeText(d,
a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const m=a.ownerDocument,L=m.activeElement;L!==a&&a.focus();m.execCommand("insertText",!1,d)||Do.insertTextFirefox(a,d);L===m.body?a.blur():L instanceof HTMLElement&&L!==a&&L.focus()}static set(a,d){a.select();Do.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:m}=a;return a.value.slice(d?d:void 0,m?m:void 0)}static wrapSelection(a,
d,m){const {selectionStart:L,selectionEnd:ha}=a,na=Do.getSelection(a);Do.insert(a,d+na+(null!=m?m:d));a.selectionStart=(L||0)+d.length;a.selectionEnd=(ha||0)+d.length}static replace(a,d,m){let L=0;a.value.replace(d,(...ha)=>{const na=L+ha[ha.length-2],ua=ha[0].length;a.selectionStart=na;a.selectionEnd=na+ua;ha="string"===typeof m?m:m(...ha);Do.insert(a,ha);a.selectionStart=na;L+=ha.length-ua;return ha})}static findLineEnd(a,d){const m=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(m)?d:m+1}static indent(a){var d;
const {selectionStart:m,selectionEnd:L,value:ha}=a;var na=ha.slice(m,L);if((na=null==(d=/\n/g.exec(na))?void 0:d.length)&&0<na){d=ha.lastIndexOf("\n",m-1)+1;var ua=a.value.slice(d,L-1);na=ua.replace(/^|\n/g,`$&${Do.INDENT}`);ua=na.length-ua.length;a.setSelectionRange(d,L-1);Do.insert(a,na);a.setSelectionRange(m+1,L+ua)}else Do.insert(a,Do.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:m,value:L}=a;var ha=L.lastIndexOf("\n",d-1)+1;const na=Do.findLineEnd(L,m);var ua=a.value.slice(ha,
na);const Ha=ua.replace(/(^|\n)(\t| {1,2})/g,"$1");ua=ua.length-Ha.length;a.setSelectionRange(ha,na);Do.insert(a,Ha);ha=(ha=/\t| {1,2}/.exec(L.slice(ha,d)))?ha[0].length:0;a.setSelectionRange(d-ha,Math.max(d-ha,m-ua))}static normalizeText(a){return a.replace(Do.fixNewLines,"\n")}},Ht=Do;kb(Ht,"fixNewLines",/\r?\n|\r/g);kb(Ht,"INDENT","  ");var Cr;"undefined"!==typeof window&&(Cr=lg());var Fx=new Map,KA=yb()?"":"ctrl",RE=class extends Oh{},LA=Jf(ba(22)),SE=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var MA=Jf(ba(22)),Gx={},Ou=Jf(ba(22)),TE=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},Hx=Jf(ba(22)),Ix=new Map,UE={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",
binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},VE=((a,...d)=>a.reduce((m,L,ha)=>m+L+(ha<d.length?d[ha]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,NA=Jf(ba(22)),OA=Jf(ba(22)),Jx={},Kk={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},PA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},WE=["enter","leave"],XE=["gotpointercapture","lostpointercapture"],
QA=class{constructor(a,d,m){this.ctrl=a;this.args=d;this.key=m;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:m,args:L}=this;d[m]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=L;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,m=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=m.from?Kg(m.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:m,shared:L}=this;d.args=this.args;var ha=0;if(a){d.event=a;m.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;L.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;L.locked=!!document.pointerLockElement;ha=Object;var na=ha.assign,ua={};"buttons"in a&&(ua.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:Rc,altKey:Uc,metaKey:Dd,ctrlKey:Td}=a;Object.assign(ua,{shiftKey:Rc,altKey:Uc,metaKey:Dd,ctrlKey:Td})}na.call(ha,L,ua);L.down=L.pressed=1===L.buttons%2||0<L.touches;ha=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(na=d._delta.map(Math.abs),Kk.addTo(d._distance,na));this.axisIntent&&
this.axisIntent(a);const [Ha,Ua]=d._movement,[$a,jb]=m.threshold,{_step:mb,values:Kb}=d;m.hasCustomTransform?(!1===mb[0]&&(mb[0]=Math.abs(Ha)>=$a&&Kb[0]),!1===mb[1]&&(mb[1]=Math.abs(Ua)>=jb&&Kb[1])):(!1===mb[0]&&(mb[0]=Math.abs(Ha)>=$a&&Math.sign(Ha)*$a),!1===mb[1]&&(mb[1]=Math.abs(Ua)>=jb&&Math.sign(Ua)*jb));d.intentional=!1!==mb[0]||!1!==mb[1];if(d.intentional){na=[0,0];if(m.hasCustomTransform){const [Rc,Uc]=Kb;na[0]=!1!==mb[0]?Rc-mb[0]:0;na[1]=!1!==mb[1]?Uc-mb[1]:0}else na[0]=!1!==mb[0]?Ha-mb[0]:
0,na[1]=!1!==mb[1]?Ua-mb[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(na);ua=d.offset;var Vb=d._active&&!d._blocked||d.active;Vb&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=L[this.ingKey]=d._active,a&&(d.first&&("bounds"in m&&(d._bounds=Kg(m.bounds,d)),this.setup&&this.setup()),d.movement=na,this.computeOffset()));var [Ob,kc]=d.offset,[[xc,$b],[pc,lc]]=d._bounds;d.overflow=[Ob<xc?-1:Ob>$b?1:0,kc<pc?-1:kc>lc?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?
d._movement[0]:d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=qf(d._bounds,d.offset,d._active?m.rubberband||[0,0]:[0,0]);d.delta=Kk.sub(d.offset,ua);this.computeMovement();Vb&&(!d.last||32<ha)&&(d.delta=Kk.sub(d.offset,ua),a=d.delta.map(Math.abs),Kk.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<ha&&(d.velocity=[a[0]/ha,a[1]/ha]))}}emit(){const a=this.state;var d=
this.shared;const m=this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||m.triggerAllEvents)d=this.handler(zf(zf(zf({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Pu=class extends QA{constructor(...a){super(...a);Zf(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Kk.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=Kk.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,m=this.config;!d.axis&&a&&(a="object"===typeof m.axisThreshold?m.axisThreshold[Zg(a)]:m.axisThreshold,d.axis=pj(d._movement,a));d._blocked=(m.lockDirection||!!m.axis)&&!d.axis||!!m.axis&&m.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},YE=a=>a,RA={enabled(a=!0){return a},
eventOptions(a,d,m){return zf(zf({},m.shared.eventOptions),a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return Kk.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return Kk.toVector(a)},transform(a,d,m){a=a||m.shared.transform;this.hasCustomTransform=!!a;return a||YE},threshold(a){return Kk.toVector(a,0)}},Ks=zf(zf({},RA),{},{axis(a,d,{axis:m}){this.lockDirection="lock"===m;if(!this.lockDirection)return m},
axisThreshold(a=0){return a},bounds(a={}){if("function"===typeof a)return na=>Ks.bounds(a(na));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:m=Infinity,top:L=-Infinity,bottom:ha=Infinity}=a;return[[d,m],[L,ha]]}}),SA={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},ZE=class extends Pu{constructor(...a){super(...a);Zf(this,"ingKey","dragging")}reset(){super.reset();
const a=this.state;a._pointerId=void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),m=a.currentTarget.getBoundingClientRect();a._bounds=Ks.bounds({left:d.left-m.left+a.offset[0],right:d.right-m.right+a.offset[0],top:d.top-m.top+a.offset[1],bottom:d.bottom-m.bottom+a.offset[1]})}}cancel(){const a=
this.state;a.canceled||(a.canceled=!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,m=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var L=this.ctrl.setEventIds(a);
d.pointerCapture&&a.target.setPointerCapture(a.pointerId);L&&1<L.size&&m._pointerActive||(this.start(a),this.setupPointer(a),m._pointerId=nh(a),m._pointerActive=!0,this.computeValues(hg(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==Zg(a)?(m._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);
this.emit()}pointerMove(a){const d=this.state,m=this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var L=nh(a);if(void 0===d._pointerId||L===d._pointerId)L=hg(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=Kk.sub(L,d._values),this.computeValues(L)),Kk.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):m.preventScrollAxis&&!d._preventScroll?
d.axis&&(d.axis===m.preventScrollAxis||"xy"===m.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(ua){}const d=this.state,m=this.config;if(d._active&&d._pointerActive){var L=nh(a);if(void 0===d._pointerId||L===d._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(a);var [ha,na]=d._distance;d.tap=ha<=m.tapsThreshold&&na<=m.tapsThreshold;if(d.tap&&m.filterTaps)d._force=!0;else{const [ua,Ha]=d.direction,[Ua,$a]=d.velocity,[jb,mb]=d.movement,[Kb,Vb]=m.swipe.velocity,[Ob,kc]=m.swipe.distance;d.elapsedTime<m.swipe.duration&&(Math.abs(Ua)>Kb&&Math.abs(jb)>Ob&&(d.swipe[0]=ua),Math.abs($a)>Vb&&Math.abs(mb)>kc&&(d.swipe[1]=Ha))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,
m=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,m,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&
a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=SA[a.key];if(d){const m=this.state,L=a.shiftKey?10:a.altKey?.1:1;this.start(a);m._delta=d(L);m._keyboardActive=!0;Kk.addTo(m._movement,m._delta);this.compute(a);this.emit()}}keyUp(a){a.key in SA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Ls="undefined"!==typeof window&&window.document&&window.document.createElement;try{var TA="constructor"in GestureEvent}catch(a){TA=!1}var $E=
TA,Qu=Ls&&"ontouchstart"in window||Ls&&1<window.navigator.maxTouchPoints,UA=Ls&&"ontouchstart"in window||Ls&&1<window.navigator.maxTouchPoints,VA=Ls&&"onpointerdown"in window,aF=Ls&&"exitPointerLock"in window.document,WA={mouse:0,touch:0,pen:8},bF=zf(zf({},Ks),{},{device(a,d,{pointer:{touch:m=!1,lock:L=!1,mouse:ha=!1}={}}){this.pointerLock=L&&aF;return Qu&&m?"touch":this.pointerLock?"mouse":VA&&!ha?"pointer":Qu?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:m}){this.preventScrollDelay="number"===
typeof m?m:m||void 0===m&&a?250:void 0;if(UA&&!1!==m)return a?a:void 0!==m?"y":void 0},pointerCapture(a,d,{pointer:{capture:m=!0,buttons:L=1,keys:ha=!0}={}}){this.pointerButtons=L;this.keys=ha;return!this.pointerLock&&"pointer"===this.device&&m},threshold(a,d,{filterTaps:m=!1,tapsThreshold:L=3,axis:ha}){a=Kk.toVector(a,m?L:ha?1:0);this.filterTaps=m;this.tapsThreshold=L;return a},swipe({velocity:a=.5,distance:d=50,duration:m=250}={}){return{velocity:this.transform(Kk.toVector(a)),distance:this.transform(Kk.toVector(d)),
duration:m}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;default:return a}},axisThreshold(a){return a?zf(zf({},WA),a):WA}}),cF=class extends QA{constructor(...a){super(...a);Zf(this,"ingKey","pinching");Zf(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:m}=
this.state;this.state.offset="wheel"===a?Kk.add(d,m):[(1+d[0])*m[0],d[1]+m[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,m]=a._movement;if(!a.axis){const L=30*Math.abs(d)-Math.abs(m);0>L?a.axis="angle":0<L&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=
!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);var d=this.state;const m=this.ctrl.touchIds;d._active&&d._touchIds.every(L=>m.has(L))||2>m.size||(this.start(a),d._touchIds=Array.from(m).slice(0,2),d=vf(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,m=d._pointerEvents,L=this.ctrl.pointerIds;d._active&&Array.from(m.keys()).every(ha=>L.has(ha))||
(2>m.size&&m.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=mf(...Array.from(m.values())),this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=vf(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=mf(...Array.from(d.values())),this.pinchMove(a,
d))}pinchMove(a,d){const m=this.state,L=d.angle-m._values[1];let ha=0;270<Math.abs(L)&&(ha+=Math.sign(L));this.computeValues([d.distance,d.angle-360*ha]);m.origin=d.origin;m.turns=ha;m._movement=[m._values[0]/m._initial[0]-1,m._values[1]-m._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);
try{a.target.releasePointerCapture(a.pointerId)}catch(m){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,
a.rotation]);d.origin=[a.clientX,a.clientY];var m=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=Kk.sub(d._movement,m);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();
const d=this.state;d._delta=[-li(a)[1]/100*d.offset[0],0];Kk.addTo(d._movement,d._delta);Hl(d);this.state.origin=[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),
{passive:!1})}},dF=zf(zf({},RA),{},{device(a,d,{shared:m,pointer:{touch:L=!1}={}}){if(m.target&&!Qu&&$E)return"gesture";if(Qu&&L)return"touch";if(UA){if(VA)return"pointer";if(Qu)return"touch"}},bounds(a,d,{scaleBounds:m={},angleBounds:L={}}){const ha=ua=>{ua=Kg(m,ua);ua=Object.assign({},{min:-Infinity,max:Infinity},ua||{});return[ua.min,ua.max]},na=ua=>{ua=Kg(L,ua);ua=Object.assign({},{min:-Infinity,max:Infinity},ua||{});return[ua.min,ua.max]};return"function"!==typeof m&&"function"!==typeof L?[ha(),
na()]:ua=>[ha(ua),na(ua)]},threshold(a,d,m){this.lockDirection="lock"===m.axis;return Kk.toVector(a,this.lockDirection?[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),eF=class extends Pu{constructor(...a){super(...a);Zf(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(hg(a));
this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=hg(a),m=this.state;m._delta=Kk.sub(d,m._values);Kk.addTo(m._movement,m._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},fF=zf(zf({},Ks),{},{mouseOnly:(a=!0)=>a}),gF=class extends Pu{constructor(...a){super(...a);Zf(this,
"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var m,L;const {scrollX:ha,scrollY:na,scrollLeft:ua,scrollTop:Ha}=a.currentTarget;var Ua=[null!==(m=null!==ha&&void 0!==ha?ha:ua)&&void 0!==m?m:0,null!==(L=null!==na&&void 0!==na?na:Ha)&&void 0!==L?L:0];d._delta=Kk.sub(Ua,d._values);Kk.addTo(d._movement,d._delta);this.computeValues(Ua);
this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll","",this.scroll.bind(this))}},hF=Ks,iF=class extends Pu{constructor(...a){super(...a);Zf(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=li(a);Kk.addTo(d._movement,d._delta);Hl(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&
(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},jF=Ks,kF=class extends Pu{constructor(...a){super(...a);Zf(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(hg(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var m=hg(a);d._movement=d._delta=Kk.sub(m,d._values);this.computeValues(m);this.compute(a);
d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},lF=zf(zf({},Ks),{},{mouseOnly:(a=!0)=>a}),Kx=new Map,Lx=new Map,mF={key:"drag",engine:ZE,resolver:bF},nF={key:"hover",engine:kF,resolver:lF},oF={key:"move",engine:eF,resolver:fF},pF={key:"pinch",engine:cF,resolver:dF},qF={key:"scroll",engine:gF,resolver:hF},rF={key:"wheel",engine:iF,resolver:jF},Mx=Jf(ba(22)),sF={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=
!0){return a},window(a=Ls?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},tF=["target","eventOptions","window","enabled","transform"],XA=class{constructor(a,d){Zf(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,m,L,ha){const na=this._listeners,ua=ki(d,m),Ha=zf(zf({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),ha);a.addEventListener(ua,L,Ha);const Ua=()=>{a.removeEventListener(ua,
L,Ha);na.delete(Ua)};na.add(Ua);return Ua}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},uF=class{constructor(){Zf(this,"_timeouts",new Map)}add(a,d,m=140,...L){this.remove(a);this._timeouts.set(a,window.setTimeout(d,m,...L))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},vF=class{constructor(a){Zf(this,"gestures",new Set);Zf(this,"_targetEventStore",new XA(this));Zf(this,"gestureEventStores",
{});Zf(this,"gestureTimeoutStores",{});Zf(this,"handlers",{});Zf(this,"config",{});Zf(this,"pointerIds",new Set);Zf(this,"touchIds",new Set);Zf(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&oj(this,"drag");a.wheel&&oj(this,"wheel");a.scroll&&oj(this,"scroll");a.move&&oj(this,"move");a.pinch&&oj(this,"pinch");a.hover&&oj(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(ff(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?
this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=d}applyConfig(a,d){this.config=uj(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const m={};let L;if(d.target&&
(L=d.target(),!L))return;if(d.enabled){for(const ha of this.gestures){const na=this.config[ha],ua=YA(m,na.eventOptions,!!L);na.enabled&&(new (Kx.get(ha))(this,a,ha)).bind(ua)}d=YA(m,d.eventOptions,!!L);for(const ha in this.nativeHandlers)d(ha,"",na=>this.nativeHandlers[ha](zf(zf({},this.state.shared),{},{event:na,args:a})),void 0,!0)}for(const ha in m)m[ha]=Th(...m[ha]);if(!L)return m;for(const ha in m){const {device:na,capture:ua,passive:Ha}=Nf(ha);this._targetEventStore.add(L,na,"",m[ha],{capture:ua,
passive:Ha})}}},YA=(a,d,m)=>(L,ha,na,ua={},Ha=!1)=>{var Ua,$a;const jb=null!==(Ua=ua.capture)&&void 0!==Ua?Ua:d.capture;ua=null!==($a=ua.passive)&&void 0!==$a?$a:d.passive;L=Ha?L:Sg(L,ha,jb);m&&ua&&(L+="Passive");a[L]=a[L]||[];a[L].push(na)},wF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,Tv=Jf(ba(22)),Nx=Jf(ba(22)),ZA=Jf(ba(22)),$A=Jf(ba(22)),xF=Jf(ba(22)),yF=Jf(ba(22)),zF=Jf(ba(22)),AF=Jf(ba(22)),BF={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",
move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>sk('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>sk("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>sk("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>sk("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>sk("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>sk("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>sk("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>sk("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>sk("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>sk('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>sk('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>sk('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>sk('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>sk('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},CF=Jf(ba(22));Jf(ba(22));var aB=ba(22),bB=Jf(ba(22));if(!ba(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!cd)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var DF=ba(31),Ru=Jf(ba(22)),cB="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,EF=1E4,FF=function(a){var d="function"===typeof Symbol&&Symbol.iterator,m=d&&a[d],L=0;if(m)return m.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&
L>=a.length&&(a=void 0);return{value:a&&a[L++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},dB=cB?Ch(cB):Am(),GF=dB.addReactionToTrack,HF=dB.recordReactionAsCommitted,eB=function(a,d){var m="function"===typeof Symbol&&a[Symbol.iterator];if(!m)return a;a=m.call(a);var L,ha=[];try{for(;(void 0===d||0<d--)&&!(L=a.next()).done;)ha.push(L.value)}catch(ua){var na={error:ua}}finally{try{L&&!L.done&&(m=a["return"])&&m.call(a)}finally{if(na)throw na.error;
}}return ha},IF=function(){return function(){}}(),It=ba(22),fB="function"===typeof Symbol&&Symbol.for,gB=fB?Symbol.for("react.forward_ref"):"function"===typeof It.forwardRef&&(0,It.forwardRef)(function(a){return null}).$$typeof,hB=fB?Symbol.for("react.memo"):"function"===typeof It.memo&&(0,It.memo)(function(a){return null}).$$typeof,JF={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Zj.displayName="Observer";ba(22);ba(22);ba(22);(function(a){a||=Wm;nb({reactionScheduler:a})})(DF.unstable_batchedUpdates);
var KF=Jf(ba(22)),Ox=ba(613),Eo=KF.forwardRef(function(a,d){var {children:m,opacity:L,centered:ha,className:na=""}=a,ua=bg(a,["children","opacity","centered","className"]);return(0,Ox.jsx)(Zj,{children:()=>(0,Ox.jsx)("div",{ref:d,className:`tl-positioned-div ${na}`,style:L?{opacity:L}:void 0,draggable:!1,children:(0,Ox.jsx)("div",Cf(qe({className:`tl-positioned-inner ${ha?"tl-centered":""}`},ua),{children:m}))})})}),LF=Jf(ba(22)),Px=ba(613),gp=LF.forwardRef(function(a,d){var {id:m,className:L="",
style:ha,children:na}=a,ua=bg(a,["id","className","style","children"]);return(0,Px.jsx)(Zj,{children:()=>(0,Px.jsx)("svg",{ref:d,style:ha,className:`tl-positioned-svg ${L}`,children:(0,Px.jsx)("g",Cf(qe({id:m,className:"tl-centered-g"},ua),{children:na}))})})}),Su=Jf(ba(22)),iB=Jf(ba(22)),Uv=Jf(ba(22)),MF=ba(613),Dr=If(function(a){var {id:d,bounds:m,zIndex:L,rotation:ha=0,className:na="",children:ua}=a;a=bg(a,"id bounds zIndex rotation className children".split(" "));const Ha=Uv.useRef(null);Uv.useLayoutEffect(()=>
{Ha.current.style.transform=`translate(
        calc(${m.minX}px - var(--tl-padding)),
        calc(${m.minY}px - var(--tl-padding)))
        rotate(${ha+(m.rotation||0)}rad)`},[m.minX,m.minY,ha,m.rotation]);Uv.useLayoutEffect(()=>{const Ua=Ha.current;Ua.style.width=`calc(${Math.floor(m.width)}px + (var(--tl-padding) * 2))`;Ua.style.height=`calc(${Math.floor(m.height)}px + (var(--tl-padding) * 2))`},[m.width,m.height]);Uv.useLayoutEffect(()=>{const Ua=Ha.current;void 0!==L&&(Ua.style.zIndex=L.toString())},[L]);return(0,MF.jsx)("div",Cf(qe({id:d,ref:Ha,className:`tl-positioned ${na}`,"aria-label":"container"},a),{children:ua}))}),
NF=Jf(ba(22)),jB=ba(613),OF=If(function({shapes:a,hidden:d,bounds:m,rotation:L=0}){const {components:{ContextBar:ha},viewport:{bounds:na,camera:{point:[ua,Ha],zoom:Ua}}}=Gc(),$a=NF.useRef(null);var jb=Qf.getRotatedBounds(m,L);jb=Qf.multiplyBounds(jb,Ua);Yj($a,m,L,10005);if(!ha)throw Error("Expected a ContextBar component.");const mb=Qf.translateBounds(jb,[ua*Ua,Ha*Ua]);return(0,jB.jsx)("div",{ref:$a,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,jB.jsx)(ha,{hidden:d,shapes:a,bounds:m,offsets:{left:mb.minX,right:na.width-mb.maxX,top:mb.minY,bottom:na.height-mb.maxY,width:mb.width,height:mb.height},scaledBounds:jb,rotation:L})})}),kB=Jf(ba(22)),PF=ba(613),lB=If(function({children:a}){const d=kB.useRef(null),{viewport:m}=Gc(),L=d.current,{zoom:ha,point:na}=m.camera;kB.useEffect(()=>{L&&(L.style.transform=`scale(${ha}) translate3d(${na[0]}px, ${na[1]}px, 0)`)},[ha,na,L]);return(0,PF.jsx)("div",{ref:d,className:"tl-absolute tl-layer",
children:a})}),Vv=ba(613),mB=If(function({shape:a,isHovered:d=!1,isSelected:m=!1,isBinding:L=!1,isEditing:ha=!1,isLocked:na=!1,meta:ua}){const {bounds:Ha,props:{scale:Ua,rotation:$a=0},ReactIndicator:jb}=a;return(0,Vv.jsx)(Dr,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:Ha,rotation:$a,scale:Ua,zIndex:ha?1E3:1E4,children:(0,Vv.jsx)(gp,{children:(0,Vv.jsx)("g",{className:`tl-indicator-container ${m?"tl-selected":"tl-hovered"} ${na?"tl-locked":""}`,children:(0,Vv.jsx)(jb,{isEditing:ha,
isBinding:L,isHovered:d,isLocked:na,isSelected:m,isErasing:!1,meta:ua})})})})}),nB=Jf(ba(22)),Wv=ba(613),QF=If(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:m}},components:{QuickLinks:L}}=Gc();var ha=Ie();const na=Jl(d);if(!L)throw Error("Expected a QuickLinks component.");ha=50>a.height*m||!ha.selectedShapesArray.includes(d);return(0,Wv.jsx)(Dr,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,Wv.jsx)(Eo,{children:(0,Wv.jsx)("span",Cf(qe({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},na),{onPointerDown:ua=>ua.stopPropagation(),children:(0,Wv.jsx)(L,{className:"tl-backlinks-count "+(ha?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})}),Xv=ba(613),RF=If(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:m}},components:{BacklinksCount:L}}=Gc();var ha=Ie();if(!L)throw Error("Expected a BacklinksCount component.");const na=ua=>ua.stopPropagation();
ha=50>a.height*m||!ha.selectedShapesArray.includes(d)||d.hideSelection;return(0,Xv.jsx)(Dr,{bounds:a,className:"tl-backlinks-count-container",children:(0,Xv.jsx)(Eo,{children:(0,Xv.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:na,onWheelCapture:na,onKeyDown:na,title:"Shape Backlinks",children:(0,Xv.jsx)(L,{className:"tl-backlinks-count "+(ha?"tl-backlinks-count-rounded":""),id:d.id,
shape:d})})})})}),SF=Jf(ba(22)),oB=ba(613),TF=If(function({bounds:a,hidden:d,shapes:m,rotation:L=0,detail:ha="size"}){const {components:{SelectionDetail:na},viewport:{camera:{zoom:ua}}}=Gc(),Ha=SF.useRef(null),Ua=Qf.multiplyBounds(a,ua);Yj(Ha,a,L,10003);if(!na)throw Error("Expected a SelectionDetail component.");return(0,oB.jsx)("div",{ref:Ha,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,oB.jsx)(na,
{shapes:m,bounds:a,scaledBounds:Ua,zoom:ua,rotation:L,detail:ha})})}),pB=ba(613),UF=If(function({shape:a,isHovered:d=!1,isSelected:m=!1,isBinding:L=!1,isErasing:ha=!1,isEditing:na=!1,onEditingEnd:ua,asset:Ha,meta:Ua,zIndex:$a}){const {bounds:jb,props:{rotation:mb,scale:Kb},ReactComponent:Vb}=a,Ob=Ie(),kc=Jl(a);var xc=Ob.getParentGroup(a);xc=Ob.selectedIds.has(null==xc?void 0:xc.id);return(0,pB.jsx)(Dr,{"data-shape-id":a.id,"data-html2canvas-ignore":!m&&!xc&&0!==Ob.selectedShapes.size||null,zIndex:$a,
"data-type":"Shape",bounds:jb,rotation:mb,scale:Kb,children:(0,pB.jsx)(Vb,{meta:Ua,isEditing:na,isBinding:L,isHovered:d,isSelected:m,isErasing:ha,events:kc,asset:Ha,onEditingEnd:ua})})}),Jt=ba(613),qB=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],VF=If(function({size:a}){const {viewport:{camera:{point:d,zoom:m}}}=Gc();return(0,Jt.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,Jt.jsx)("defs",{children:qB.map(([L,ha,
na],ua)=>{na=na*a*m;var Ha=d[0]*m,Ua=d[1]*m;Ha=0<Ha?Ha%na:na+Ha%na;Ua=0<Ua?Ua%na:na+Ua%na;L=Mi(m,[L,ha],[0,1]);return(0,Jt.jsx)("pattern",{id:`grid-${ua}`,width:na,height:na,patternUnits:"userSpaceOnUse",children:!(2<L||.1>L)&&(0,Jt.jsx)("circle",{className:"tl-grid-dot",cx:Ha,cy:Ua,r:1.5,opacity:Math.max(0,Math.min(L,1))})},`grid-pattern-${ua}`)})}),qB.map((L,ha)=>(0,Jt.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${ha})`},`grid-rect-${ha}`))]})}),rB=If(function({size:a}){return(0,Jt.jsx)(VF,
{size:a})}),sB=ba(613),tB=If(function({bounds:a}){const d=Cd("background");return(0,sB.jsx)(gp,Cf(qe({"data-html2canvas-ignore":"true"},d),{children:(0,sB.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});ba(22);var uB=ba(613),vB=If(function({scaledBounds:a,shapes:d,detail:m="size",rotation:L=0}){var ha;const na=1===d.length?L:null!=(ha=a.rotation)?ha:0;return(0,uB.jsx)(Eo,{centered:!0,children:(0,uB.jsx)("div",{className:"tl-bounds-detail",
style:{transform:na<In||na>3*In?`rotate(${na}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+na}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${me.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===m?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${cm.radiansToDegrees(cm.clampRadians(L)).toFixed()}\xB0`})})}),Qx=ba(613),WF={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Yv=If(function({cx:a,cy:d,size:m,targetSize:L,corner:ha,isHidden:na}){const ua=Cd(ha);return(0,Qx.jsxs)("g",Cf(qe({opacity:na?0:1},ua),{children:[(0,Qx.jsx)("rect",{className:"tl-transparent "+(na?"":WF[ha]),"aria-label":`${ha} target`,x:a-1.25*L,y:d-1.25*L,width:2.5*L,height:2.5*L,pointerEvents:na?"none":"all"}),(0,Qx.jsx)("rect",{className:"tl-corner-handle","aria-label":`${ha} handle`,x:a-m/2,y:d-m/2,width:m,height:m,pointerEvents:"none"})]}))}),
XF=ba(613),YF={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},Zv=If(function({x:a,y:d,width:m,height:L,targetSize:ha,edge:na,disabled:ua,isHidden:Ha}){const Ua=Cd(na);return(0,XF.jsx)("rect",qe({pointerEvents:Ha||ua?"none":"all",className:"tl-transparent tl-edge-handle "+(Ha?"":YF[na]),"aria-label":`${na} target`,opacity:Ha?0:1,x:a-ha,y:d-ha,width:Math.max(1,m+2*ha),height:Math.max(1,L+2*ha)},Ua))}),Rx=ba(613);If(function({cx:a,cy:d,size:m,targetSize:L,
isHidden:ha}){const na=Cd("rotate");return(0,Rx.jsxs)("g",Cf(qe({opacity:ha?0:1},na),{children:[(0,Rx.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:L,pointerEvents:ha?"none":"all"}),(0,Rx.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:m/2,pointerEvents:"none"})]}))});ba(22);var wB=ba(613),$v=If(function({cx:a,cy:d,targetSize:m,corner:L,isHidden:ha}){const na=Cd(L);return(0,wB.jsx)("g",Cf(qe({opacity:ha?0:1},na),{children:(0,wB.jsx)("rect",
{className:"tl-transparent","aria-label":`${L} target`,x:a-2.5*m,y:d-2.5*m,width:3*m,height:3*m,pointerEvents:ha?"none":"all"})}))}),Hm=ba(613),xB=If(function({bounds:a,showResizeHandles:d,showRotateHandles:m,shapes:L}){var ha,na;const ua=Ie();let {width:Ha,height:Ua}=a;var $a=ua.viewport.camera.zoom;a=8/$a;$a=6/$a;const jb=1===L.length?L[0].canResize:[!0,!0],mb=null!=(na=null==(ha=ua.editingShape)?void 0:ha.props.borderRadius)?na:0;return(0,Hm.jsx)(Hm.Fragment,{children:0<L.length&&(0,Hm.jsxs)(gp,
{children:[!ua.editingShape&&(0,Hm.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ha,1),height:Math.max(Ua,1),rx:mb,ry:mb,pointerEvents:"none"}),(0,Hm.jsx)(Zv,{x:2*$a,y:0,width:Ha-4*$a,height:0,targetSize:$a,edge:"top_edge",disabled:!jb[1],isHidden:!d}),(0,Hm.jsx)(Zv,{x:Ha,y:2*$a,width:0,height:Ua-4*$a,targetSize:$a,edge:"right_edge",disabled:!jb[0],isHidden:!d}),(0,Hm.jsx)(Zv,{x:2*$a,y:Ua,width:Ha-4*$a,height:0,targetSize:$a,edge:"bottom_edge",disabled:!jb[1],isHidden:!d}),(0,Hm.jsx)(Zv,{x:0,
y:2*$a,width:0,height:Ua-4*$a,targetSize:$a,edge:"left_edge",disabled:!jb[0],isHidden:!d}),(0,Hm.jsx)($v,{cx:0,cy:0,targetSize:$a,corner:"top_left_resize_corner",isHidden:!m}),(0,Hm.jsx)($v,{cx:Ha+2*$a,cy:0,targetSize:$a,corner:"top_right_resize_corner",isHidden:!m}),(0,Hm.jsx)($v,{cx:Ha+2*$a,cy:Ua+2*$a,targetSize:$a,corner:"bottom_right_resize_corner",isHidden:!m}),(0,Hm.jsx)($v,{cx:0,cy:Ua+2*$a,targetSize:$a,corner:"bottom_left_resize_corner",isHidden:!m}),(null==jb?void 0:jb.every(Kb=>Kb))&&(0,Hm.jsxs)(Hm.Fragment,
{children:[(0,Hm.jsx)(Yv,{cx:0,cy:0,size:a,targetSize:$a,corner:"top_left_corner",isHidden:!d}),(0,Hm.jsx)(Yv,{cx:Ha,cy:0,size:a,targetSize:$a,corner:"top_right_corner",isHidden:!d}),(0,Hm.jsx)(Yv,{cx:Ha,cy:Ua,size:a,targetSize:$a,corner:"bottom_right_corner",isHidden:!d}),(0,Hm.jsx)(Yv,{cx:0,cy:Ua,size:a,targetSize:$a,corner:"bottom_left_corner",isHidden:!d})]})]})})}),Sx=ba(613),yB=If(function({bounds:a}){return(0,Sx.jsx)(Dr,{bounds:a,zIndex:10001,children:(0,Sx.jsx)(gp,{children:(0,Sx.jsx)("rect",
{className:"tl-brush",x:0,y:0,width:a.width,height:a.height})})})}),zB=ba(613);If(function(){return(0,zB.jsx)(zB.Fragment,{})});var Tx=ba(613),AB=If(function({shape:a,handle:d,id:m}){a=up(a,m);const [L,ha]=d.point;return(0,Tx.jsxs)("g",Cf(qe({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${L}, ${ha})`,children:[(0,Tx.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,Tx.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),BB=
Jf(ba(22)),Ux=ba(613),Vx=If(function({direction:a}){const {viewport:{bounds:d}}=Gc(),m=BB.useRef(null);BB.useLayoutEffect(()=>{const L=m.current;if(L){var ha=[d.width/2,d.height/2],na=Qf.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[ua,Ha]]of na)na=v(ha,a,ua,Ha),na.didIntersect&&(na=na.points[0],L.style.transform=`translate(${na[0]-6}px,${na[1]-6}px) rotate(${me.toAngle(a)}rad)`)}},[a,d]);return(0,Ux.jsx)("div",{ref:m,className:"tl-direction-indicator","data-html2canvas-ignore":"true",
children:(0,Ux.jsx)("svg",{height:12,width:12,children:(0,Ux.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),Lk=ba(613),ZF=If(function({id:a,className:d,brush:m,shapes:L,assets:ha,bindingShapes:na,editingShape:ua,hoveredShape:Ha,hoveredGroup:Ua,selectionBounds:$a,selectedShapes:jb,erasingShapes:mb,selectionDirectionHint:Kb,cursor:Vb="default",cursorRotation:Ob=0,selectionRotation:kc=0,showSelection:xc=!0,showHandles:$b=!0,showSelectionRotation:pc=!1,showResizeHandles:lc=!0,showRotateHandles:Rc=!0,
showSelectionDetail:Uc=!0,showContextBar:Dd=!0,showGrid:Td=!0,gridSize:lf=8,onEditingEnd:re=SE,theme:We=Hq,children:Uf}){var hf;const wf=Su.useRef(null),{viewport:Sd,components:qd,meta:Zd}=Gc(),pd=Ie(),Md=Su.useCallback(Mf=>{pd.inputs.updateContainerOffset([Mf.minX,Mf.minY])},[]);xe(We,a);Vm(wf);ae(wf,Sd,Md);Lj(wf);fm();Il(wf,Vb,Ob);Tk(wf);Hn(wf);a=Ze();const Se=(Vb=1===(null==jb?void 0:jb.length)&&jb[0])&&"handles"in Vb.props?null==jb?void 0:jb[0]:void 0,Gf=Su.useMemo(()=>new Set(jb||[]),[jb]),sg=
Su.useMemo(()=>new Set(mb||[]),[mb]);Vb=1===(null==jb?void 0:jb.length)?jb[0]:void 0;Ua=[...(new Set([Ua,Ha]))].filter(ic);return(0,Lk.jsxs)("div",{ref:wf,className:`tl-container ${null!=d?d:""}`,children:[(0,Lk.jsxs)("div",Cf(qe({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[Td&&qd.Grid&&(0,Lk.jsx)(qd.Grid,{size:lf}),(0,Lk.jsxs)(lB,{children:[qd.SelectionBackground&&jb&&$a&&xc&&(0,Lk.jsx)(Dr,{"data-type":"SelectionBackground",bounds:$a,zIndex:2,"data-html2canvas-ignore":"true",children:(0,Lk.jsx)(qd.SelectionBackground,
{shapes:jb,bounds:$a,showResizeHandles:lc,showRotateHandles:Rc})}),L&&L.map((Mf,qg)=>(0,Lk.jsx)(UF,{shape:Mf,asset:ha&&Mf.props.assetId?ha[Mf.props.assetId]:void 0,isEditing:Mf===ua,isHovered:Mf===Ha,isBinding:null==na?void 0:na.includes(Mf),isSelected:Gf.has(Mf),isErasing:sg.has(Mf),meta:Zd,zIndex:1E3+qg,onEditingEnd:re},"shape_"+Mf.id)),!pd.isIn("select.pinching")&&(null==jb?void 0:jb.map(Mf=>(0,Lk.jsx)(mB,{shape:Mf,isEditing:Mf===ua,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:Mf.props.isLocked},
"selected_indicator_"+Mf.id))),Ua.map(Mf=>Mf!==ua&&(0,Lk.jsx)(mB,{shape:Mf},"hovered_indicator_"+Mf.id)),Vb&&qd.BacklinksCount&&(0,Lk.jsx)(RF,{hidden:!1,bounds:Vb.bounds,shape:Vb}),Ha&&Ha!==Vb&&qd.QuickLinks&&(0,Lk.jsx)(QF,{hidden:!1,bounds:Ha.bounds,shape:Ha}),m&&qd.Brush&&(0,Lk.jsx)(qd.Brush,{bounds:m}),jb&&$a&&(0,Lk.jsxs)(Lk.Fragment,{children:[xc&&qd.SelectionForeground&&(0,Lk.jsx)(Dr,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:$a,zIndex:ua&&jb.includes(ua)?1002:
10002,children:(0,Lk.jsx)(qd.SelectionForeground,{shapes:jb.filter(Mf=>!Mf.props.isLocked),bounds:$a,showResizeHandles:lc,showRotateHandles:Rc})}),$b&&Se&&qd.Handle&&(0,Lk.jsx)(Dr,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:$a,zIndex:10003,children:(0,Lk.jsx)(gp,{children:Object.entries(null!=(hf=Se.props.handles)?hf:{}).map(([Mf,qg])=>Su.createElement(qd.Handle,{key:`${qg.id}_handle_${qg.id}`,shape:Se,handle:qg,id:Mf}))})}),jb&&qd.SelectionDetail&&(0,Lk.jsx)(TF,
{"data-html2canvas-ignore":"true",shapes:jb,bounds:$a,detail:pc?"rotation":"size",hidden:!Uc,rotation:kc},"detail"+jb.map(Mf=>Mf.id).join(""))]})]}),Kb&&$a&&jb&&(0,Lk.jsx)(Vx,{direction:Kb,bounds:$a,shapes:jb}),(0,Lk.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,Lk.jsx)(lB,{children:jb&&$a&&(0,Lk.jsx)(Lk.Fragment,{children:jb&&qd.ContextBar&&(0,Lk.jsx)(OF,{shapes:jb.filter(Mf=>!Mf.props.isLocked),hidden:!Dd,bounds:Vb?Vb.bounds:$a,rotation:Vb?Vb.props.rotation:
0},"context"+jb.map(Mf=>Mf.id).join(""))})}),Uf]})}),CB=Jf(ba(22)),DB=Jf(ba(22)),EB=ba(613);If(function({children:a}){const d=DB.useRef(null),{viewport:m}=Gc();DB.useEffect(()=>Id(()=>{const L=d.current;if(L){var {zoom:ha,point:na}=m.camera;L.style.transform=`scale(${ha}) translateX(${na[0]}px) translateY(${na[1]}px)`}}),[]);return(0,EB.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,EB.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});var $F=ba(613),aG=If(function(a){const d=
Zn(a),m=Be(a.id);Zk(d,a);Fn(d,a);return(0,$F.jsx)(m.Provider,{value:d,children:a.children})}),bG=ba(613),cG=If(function({id:a="noid",viewport:d,inputs:m,callbacks:L=Hq,meta:ha=Hq,components:na=Hq,children:ua}){const [Ha,Ua]=CB.useState(()=>{const {Brush:jb,ContextBar:mb,DirectionIndicator:Kb,Grid:Vb,Handle:Ob,SelectionBackground:kc,SelectionDetail:xc,SelectionForeground:$b}=na,pc=bg(na,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));
return{id:a,viewport:d,inputs:m,callbacks:L,meta:ha,components:Cf(qe({},pc),{Brush:null===jb?void 0:yB,ContextBar:mb,DirectionIndicator:null===Kb?void 0:Vx,Grid:null===Vb?void 0:rB,Handle:null===Ob?void 0:AB,SelectionBackground:null===kc?void 0:tB,SelectionDetail:null===xc?void 0:vB,SelectionForeground:null===$b?void 0:xB})}});CB.useLayoutEffect(()=>{const {Brush:jb,ContextBar:mb,DirectionIndicator:Kb,Grid:Vb,Handle:Ob,SelectionBackground:kc,SelectionDetail:xc,SelectionForeground:$b}=na,pc=bg(na,
"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return Id(()=>{Ua({id:a,viewport:d,inputs:m,callbacks:L,meta:ha,components:Cf(qe({},pc),{Brush:null===jb?void 0:yB,ContextBar:mb,DirectionIndicator:null===Kb?void 0:Vx,Grid:null===Vb?void 0:rB,Handle:null===Ob?void 0:AB,SelectionBackground:null===kc?void 0:tB,SelectionDetail:null===xc?void 0:vB,SelectionForeground:null===$b?void 0:xB})})})},[]);const $a=Hc(a);return(0,bG.jsx)($a.Provider,
{value:Ha,children:ua})}),FB=ba(613),dG=ba(613),eG=If(function(a){const d=Ie();return(0,dG.jsx)(sn,qe({viewport:d.viewport,inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,
penMode:d.settings.penMode,showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},a))});ba(613);var Kt=Jf(ba(22)),Er=Jf(ba(22)),fG=ba(613),gG="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),
Xh=a=>{var {name:d,className:m}=a;a=bg(a,["name","className"]);const L=gG.includes(d)?"tie tie-":"ti ti-";return(0,fG.jsx)("i",qe({className:[L+d,m].join(" ")},a))},Ph=ba(22),hG=ba(22),Ms=ba(22),ao=ba(22),Wx=ba(22),iG=ba(31),en=ba(22),iq=(0,en.forwardRef)((a,d)=>{var {children:m}=a;a=bg(a,["children"]);const L=en.Children.toArray(m),ha=L.find(Yg);if(ha){const na=ha.props.children;m=L.map(ua=>ua===ha?1<en.Children.count(na)?en.Children.only(null):(0,en.isValidElement)(na)?na.props.children:null:ua);
return(0,en.createElement)(Xx,nf({},a,{ref:d}),(0,en.isValidElement)(na)?(0,en.cloneElement)(na,void 0,m):null)}return(0,en.createElement)(Xx,nf({},a,{ref:d}),m)});iq.displayName="Slot";var Xx=(0,en.forwardRef)((a,d)=>{const {children:m}=a;a=bg(a,["children"]);return(0,en.isValidElement)(m)?(0,en.cloneElement)(m,Cf(qe({},rl(a,m.props)),{ref:ih(d,m.ref)})):1<en.Children.count(m)?en.Children.only(null):null});Xx.displayName="SlotClone";var GB=({children:a})=>(0,en.createElement)(en.Fragment,null,a),
Vk="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const m=(0,Wx.forwardRef)((L,ha)=>{var {asChild:na}=L;L=bg(L,["asChild"]);na=na?iq:d;(0,Wx.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Wx.createElement)(na,nf({},L,{ref:ha}))});m.displayName=`Primitive.${d}`;return Cf(qe({},a),{[d]:m})},{}),Yx=ba(22),jG=ba(22),HB,kG=(0,ao.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zx=(0,ao.forwardRef)((a,d)=>
{var m;const {disableOutsidePointerEvents:L=!1,onEscapeKeyDown:ha,onPointerDownOutside:na,onFocusOutside:ua,onInteractOutside:Ha,onDismiss:Ua}=a,$a=bg(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),jb=(0,ao.useContext)(kG),[mb,Kb]=(0,ao.useState)(null),Vb=null!==(m=null===mb||void 0===mb?void 0:mb.ownerDocument)&&void 0!==m?m:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Ob]=(0,ao.useState)({});d=Uh(d,
lc=>Kb(lc));m=Array.from(jb.layers);var [kc]=[...jb.layersWithOutsidePointerEventsDisabled].slice(-1);kc=m.indexOf(kc);const xc=mb?m.indexOf(mb):-1;m=0<jb.layersWithOutsidePointerEventsDisabled.size;const $b=xc>=kc;kc=Kj(lc=>{const Rc=lc.target,Uc=[...jb.branches].some(Dd=>Dd.contains(Rc));$b&&!Uc&&(null===na||void 0===na||na(lc),null===Ha||void 0===Ha||Ha(lc),lc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Vb);const pc=Jj(lc=>{const Rc=lc.target;[...jb.branches].some(Uc=>Uc.contains(Rc))||(null===
ua||void 0===ua||ua(lc),null===Ha||void 0===Ha||Ha(lc),lc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Vb);Uk(lc=>{xc===jb.layers.size-1&&(null===ha||void 0===ha||ha(lc),!lc.defaultPrevented&&Ua&&(lc.preventDefault(),Ua()))},Vb);(0,ao.useEffect)(()=>{if(mb)return L&&(0===jb.layersWithOutsidePointerEventsDisabled.size&&(HB=Vb.body.style.pointerEvents,Vb.body.style.pointerEvents="none"),jb.layersWithOutsidePointerEventsDisabled.add(mb)),jb.layers.add(mb),nl(),()=>{L&&1===jb.layersWithOutsidePointerEventsDisabled.size&&
(Vb.body.style.pointerEvents=HB)}},[mb,Vb,L,jb]);(0,ao.useEffect)(()=>()=>{mb&&(jb.layers.delete(mb),jb.layersWithOutsidePointerEventsDisabled.delete(mb),nl())},[mb,jb]);(0,ao.useEffect)(()=>{const lc=()=>Ob({});document.addEventListener("dismissableLayer.update",lc);return()=>document.removeEventListener("dismissableLayer.update",lc)},[]);return(0,ao.createElement)(Vk.div,nf({},$a,{ref:d,style:qe({pointerEvents:m?$b?"auto":"none":void 0},a.style),onFocusCapture:xg(a.onFocusCapture,pc.onFocusCapture),
onBlurCapture:xg(a.onBlurCapture,pc.onBlurCapture),onPointerDownCapture:xg(a.onPointerDownCapture,kc.onPointerDownCapture)}))}),IB=Jf(ba(22)),lG=ba(22),Im=(null===globalThis||void 0===globalThis?0:globalThis.document)?lG.useLayoutEffect:()=>{},mG=IB["useId".toString()]||(()=>{}),nG=0,Yl=ba(22),oG=(a,d,m)=>ui(void 0,null,function*(){const {placement:L="bottom",strategy:ha="absolute",middleware:na=[],platform:ua}=m,Ha=yield null==ua.isRTL?void 0:ua.isRTL(d);let Ua=yield ua.getElementRects({reference:a,
floating:d,strategy:ha}),{x:$a,y:jb}=xj(Ua,L,Ha),mb=L,Kb={},Vb=0;for(let Ob=0;Ob<na.length;Ob++){const {name:kc,fn:xc}=na[Ob],{x:$b,y:pc,data:lc,reset:Rc}=yield xc({x:$a,y:jb,initialPlacement:L,placement:mb,strategy:ha,middlewareData:Kb,rects:Ua,platform:ua,elements:{reference:a,floating:d}});$a=null!=$b?$b:$a;jb=null!=pc?pc:jb;Kb=Cf(qe({},Kb),{[kc]:qe(qe({},Kb[kc]),lc)});Rc&&50>=Vb&&(Vb++,"object"==typeof Rc&&(Rc.placement&&(mb=Rc.placement),Rc.rects&&(Ua=!0===Rc.rects?yield ua.getElementRects({reference:a,
floating:d,strategy:ha}):Rc.rects),{x:$a,y:jb}=xj(Ua,mb,Ha)),Ob=-1)}return{x:$a,y:jb,placement:mb,strategy:ha,middlewareData:Kb}}),$x=Math.min,Lq=Math.max,JB=a=>({name:"arrow",options:a,fn(d){return ui(this,null,function*(){const {element:m,padding:L=0}=null!=a?a:{},{x:ha,y:na,placement:ua,rects:Ha,platform:Ua}=d;if(null==m)return{};const $a=im(L),jb={x:ha,y:na},mb=ol(ua),Kb=ua.split("-")[1],Vb=bl(mb);var Ob=yield Ua.getDimensions(m);const kc="y"===mb?"top":"left",xc="y"===mb?"bottom":"right";var $b=
Ha.reference[Vb]+Ha.reference[mb]-jb[mb]-Ha.floating[Vb];const pc=jb[mb]-Ha.reference[mb];var lc=yield null==Ua.getOffsetParent?void 0:Ua.getOffsetParent(m);let Rc=lc?"y"===mb?lc.clientHeight||0:lc.clientWidth||0:0;0===Rc&&(Rc=Ha.floating[Vb]);lc=$a[kc];const Uc=Rc-Ob[Vb]-$a[xc];Ob=Rc/2-Ob[Vb]/2+($b/2-pc/2);$b=Lq(lc,$x(Ob,Uc));return{[mb]:jb[mb]-(0<("start"===Kb?$a[kc]:$a[xc])&&Ob!==$b&&Ha.reference[Vb]<=Ha.floating[Vb]?Ob<lc?lc-Ob:Uc-Ob:0),data:{[mb]:$b,centerOffset:Ob-$b}}})}}),pG={left:"right",
right:"left",bottom:"top",top:"bottom"},qG={start:"end",end:"start"},KB=["top","right","bottom","left"];KB.reduce((a,d)=>a.concat(d,d+"-start",d+"-end"),[]);var LB=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return ui(this,null,function*(){var m;const {placement:L,middlewareData:ha,rects:na,initialPlacement:ua,platform:Ha,elements:Ua}=d;var $a=a;const {mainAxis:jb=!0,crossAxis:mb=!0,fallbackPlacements:Kb,fallbackStrategy:Vb="bestFit",flipAlignment:Ob=!0}=$a;$a=bg($a,["mainAxis",
"crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const kc=Yi(L);var xc=Kb||(kc!==ua&&Ob?function(Dd){const Td=Ym(Dd);return[hm(Dd),Td,hm(Td)]}(ua):[Ym(ua)]);xc=[ua,...xc];const $b=yield Sk(d,$a),pc=[];$a=(null==(m=ha.flip)?void 0:m.overflows)||[];if(jb&&pc.push($b[kc]),mb){const {main:Dd,cross:Td}=Jn(L,na,yield null==Ha.isRTL?void 0:Ha.isRTL(Ua.floating));pc.push($b[Dd],$b[Td])}if($a=[...$a,{placement:L,overflows:pc}],!pc.every(Dd=>0>=Dd)){var lc,Rc;m=(null!=(lc=null==(Rc=ha.flip)?
void 0:Rc.index)?lc:0)+1;if(lc=xc[m])return{data:{index:m,overflows:$a},reset:{placement:lc}};lc="bottom";switch(Vb){case "bestFit":var Uc;(Rc=null==(Uc=$a.map(Dd=>[Dd,Dd.overflows.filter(Td=>0<Td).reduce((Td,lf)=>Td+lf,0)]).sort((Dd,Td)=>Dd[1]-Td[1])[0])?void 0:Uc[0].placement)&&(lc=Rc);break;case "initialPlacement":lc=ua}if(L!==lc)return{reset:{placement:lc}}}return{}})}}},MB=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,m=bg(a,["strategy"]);return{name:"hide",fn(L){return ui(this,
null,function*(){var {rects:ha}=L;switch(d){case "referenceHidden":return ha=Xb(yield Sk(L,Cf(qe({},m),{elementContext:"reference"})),ha.reference),{data:{referenceHiddenOffsets:ha,referenceHidden:Sa(ha)}};case "escaped":return ha=Xb(yield Sk(L,Cf(qe({},m),{altBoundary:!0})),ha.floating),{data:{escapedOffsets:ha,escaped:Sa(ha)}};default:return{}}})}}},NB=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return ui(this,null,function*(){const {x:m,y:L}=d,ha=yield function(na,ua){return ui(this,
null,function*(){const {placement:Ha,platform:Ua,elements:$a}=na;var jb=yield null==Ua.isRTL?void 0:Ua.isRTL($a.floating),mb=Yi(Ha);const Kb=Ha.split("-")[1],Vb="x"===ol(Ha);mb=["left","top"].includes(mb)?-1:1;jb=jb&&Vb?-1:1;const Ob="function"==typeof ua?ua(na):ua;let {mainAxis:kc,crossAxis:xc,alignmentAxis:$b}="number"==typeof Ob?{mainAxis:Ob,crossAxis:0,alignmentAxis:null}:qe({mainAxis:0,crossAxis:0,alignmentAxis:null},Ob);return Kb&&"number"==typeof $b&&(xc="end"===Kb?-1*$b:$b),Vb?{x:xc*jb,y:kc*
mb}:{x:kc*mb,y:xc*jb}})}(d,a);return{x:m+ha.x,y:L+ha.y,data:ha}})}}},OB=function(a){return void 0===a&&(a={}),{name:"shift",options:a,fn(d){return ui(this,null,function*(){const {x:m,y:L,placement:ha}=d;var na=a;const {mainAxis:ua=!0,crossAxis:Ha=!1,limiter:Ua={fn:Vb=>{let {x:Ob,y:kc}=Vb;return{x:Ob,y:kc}}}}=na;var $a=bg(na,["mainAxis","crossAxis","limiter"]);na={x:m,y:L};$a=yield Sk(d,$a);const jb=ol(Yi(ha)),mb="x"===jb?"y":"x";let Kb=na[jb];na=na[mb];ua&&(Kb=Lq(Kb+$a["y"===jb?"top":"left"],$x(Kb,
Kb-$a["y"===jb?"bottom":"right"])));Ha&&(na=Lq(na+$a["y"===mb?"top":"left"],$x(na,na-$a["y"===mb?"bottom":"right"])));na=Ua.fn(Cf(qe({},d),{[jb]:Kb,[mb]:na}));return Cf(qe({},na),{data:{x:na.x-m,y:na.y-L}})})}}},PB=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:m,y:L,placement:ha,rects:na,middlewareData:ua}=d,{offset:Ha=0,mainAxis:Ua=!0,crossAxis:$a=!0}=a;var jb={x:m,y:L};d=ol(ha);const mb="x"===d?"y":"x";let Kb=jb[d];jb=jb[mb];var Vb="function"==typeof Ha?Ha(Cf(qe({},na),{placement:ha})):
Ha;Vb="number"==typeof Vb?{mainAxis:Vb,crossAxis:0}:qe({mainAxis:0,crossAxis:0},Vb);if(Ua){var Ob="y"===d?"height":"width",kc=na.reference[d]-na.floating[Ob]+Vb.mainAxis;Ob=na.reference[d]+na.reference[Ob]-Vb.mainAxis;Kb<kc?Kb=kc:Kb>Ob&&(Kb=Ob)}if($a){var xc,$b,pc,lc;const Rc="y"===d?"width":"height";kc=["top","left"].includes(Yi(ha));Ob=na.reference[mb]-na.floating[Rc]+(kc&&null!=(xc=null==($b=ua.offset)?void 0:$b[mb])?xc:0)+(kc?0:Vb.crossAxis);xc=na.reference[mb]+na.reference[Rc]+(kc?0:null!=(pc=
null==(lc=ua.offset)?void 0:lc[mb])?pc:0)-(kc?Vb.crossAxis:0);jb<Ob?jb=Ob:jb>xc&&(jb=xc)}return{[d]:Kb,[mb]:jb}}}},rG=function(a){return void 0===a&&(a={}),{name:"size",options:a,fn(d){return ui(this,null,function*(){const {placement:m,rects:L,platform:ha,elements:na}=d;var ua=a,{apply:Ha}=ua;ua=bg(ua,["apply"]);ua=yield Sk(d,ua);var Ua=Yi(m),$a=m.split("-")[1],jb,mb;"top"===Ua||"bottom"===Ua?(jb=Ua,mb=$a===((yield null==ha.isRTL?void 0:ha.isRTL(na.floating))?"start":"end")?"left":"right"):(mb=Ua,
jb="end"===$a?"top":"bottom");Ua=Lq(ua.left,0);$a=Lq(ua.right,0);const Kb=Lq(ua.top,0),Vb=Lq(ua.bottom,0);mb={availableHeight:L.floating.height-(["left","right"].includes(m)?2*(0!==Kb||0!==Vb?Kb+Vb:Lq(ua.top,ua.bottom)):ua[jb]),availableWidth:L.floating.width-(["top","bottom"].includes(m)?2*(0!==Ua||0!==$a?Ua+$a:Lq(ua.left,ua.right)):ua[mb])};jb=yield ha.getDimensions(na.floating);null==Ha||Ha(qe(qe({},d),mb));Ha=yield ha.getDimensions(na.floating);return jb.width!==Ha.width||jb.height!==Ha.height?
{reset:{rects:!0}}:{}})}}},QB=Math.min,Tu=Math.max,aw=Math.round,sG={getClippingRect:function(a){let {element:d,boundary:m,rootBoundary:L,strategy:ha}=a;a=[...("clippingAncestors"===m?zg(d):[].concat(m)),L];a=a.reduce((na,ua)=>{ua=Bh(d,ua,ha);return na.top=Tu(ua.top,na.top),na.right=QB(ua.right,na.right),na.bottom=QB(ua.bottom,na.bottom),na.left=Tu(ua.left,na.left),na},Bh(d,a[0],ha));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,
offsetParent:m,strategy:L}=a;var ha=rc(m);const na=xd(m);if(m===na)return d;a={scrollLeft:0,scrollTop:0};var ua=0,Ha=0;(ha||!ha&&"fixed"!==L)&&(("body"!==Yb(m)||mc(na))&&(a=je(m)),rc(m))&&(ha=fd(m,!0),ua=ha.x+m.clientLeft,Ha=ha.y+m.clientTop);return Cf(qe({},d),{x:d.x-a.scrollLeft+ua,y:d.y-a.scrollTop+Ha})},isElement:Tb,getDimensions:Wf,getOffsetParent:Kf,getDocumentElement:xd,getElementRects:a=>{let {reference:d,floating:m,strategy:L}=a;a=Kf(m);var ha=rc(a);const na=xd(a);var ua;if(ua=ha)ua=fd(a),
ua=aw(ua.width)!==a.offsetWidth||aw(ua.height)!==a.offsetHeight;ua=fd(d,ua,"fixed"===L);let Ha={scrollLeft:0,scrollTop:0};var Ua=0,$a=0;if(ha||!ha&&"fixed"!==L)(("body"!==Yb(a)||mc(na))&&(Ha=je(a)),rc(a))?(ha=fd(a,!0),Ua=ha.x+a.clientLeft,$a=ha.y+a.clientTop):na&&(Ua=Qe(na));return{reference:{x:ua.left+Ha.scrollLeft-Ua,y:ua.top+Ha.scrollTop-$a,width:ua.width,height:ua.height},floating:Cf(qe({},Wf(m)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===Ac(a).direction},tG=
(a,d,m)=>oG(a,d,qe({platform:sG},m)),Fo=Jf(ba(22),1),RB=ba(22),uG=Jf(ba(31),1),ay="undefined"!==typeof document?RB.useLayoutEffect:RB.useEffect,SB=a=>{const {element:d,padding:m}=a;return{name:"arrow",options:a,fn(L){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=d.current)return JB({element:d.current,padding:m}).fn(L)}else if(d)return JB({element:d,padding:m}).fn(L);return{}}}},by=ba(22),vG=(0,by.forwardRef)((a,d)=>{const {children:m,width:L=10,height:ha=5}=a,na=bg(a,["children",
"width","height"]);return(0,by.createElement)(Vk.svg,nf({},na,{ref:d,width:L,height:ha,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?m:(0,by.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),wG=ba(22),[cy,Lt]=jj("Popper"),[xG,TB]=cy("Popper"),dy=(0,Yl.forwardRef)((a,d)=>{const {__scopePopper:m,virtualRef:L}=a;a=bg(a,["__scopePopper","virtualRef"]);const ha=TB("PopperAnchor",m),na=(0,Yl.useRef)(null);d=Uh(d,na);(0,Yl.useEffect)(()=>{ha.onAnchorChange((null===L||void 0===L?void 0:
L.current)||na.current)});return L?null:(0,Yl.createElement)(Vk.div,nf({},a,{ref:d}))}),[yG,zG]=cy("PopperContent"),[AG,BG]=cy("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),ey=(0,Yl.forwardRef)((a,d)=>{var m,L,ha,na,ua,Ha,Ua,$a;const {__scopePopper:jb,side:mb="bottom",sideOffset:Kb=0,align:Vb="center",alignOffset:Ob=0,arrowPadding:kc=0,collisionBoundary:xc=[],collisionPadding:$b=0,sticky:pc="partial",hideWhenDetached:lc=!1,avoidCollisions:Rc=!0}=a;a=bg(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));
const Uc=TB("PopperContent",jb),[Dd,Td]=(0,Yl.useState)(null);d=Uh(d,Ak=>Td(Ak));const [lf,re]=(0,Yl.useState)(null);var We=vi(lf),Uf=null!==(m=null===We||void 0===We?void 0:We.width)&&void 0!==m?m:0;m=null!==(L=null===We||void 0===We?void 0:We.height)&&void 0!==L?L:0;L=mb+("center"!==Vb?"-"+Vb:"");We="number"===typeof $b?$b:qe({top:0,right:0,bottom:0,left:0},$b);const hf=Array.isArray(xc)?xc:[xc],wf=0<hf.length;We={padding:We,boundary:hf.filter(Lg),altBoundary:wf};const {reference:Sd,floating:qd,
strategy:Zd,x:pd,y:Md,placement:Se,middlewareData:Gf,update:sg}=Eg({strategy:"fixed",placement:L,whileElementsMounted:Ag,middleware:[NB({mainAxis:Kb+m,alignmentAxis:Ob}),Rc?OB(qe({mainAxis:!0,crossAxis:!1,limiter:"partial"===pc?PB():void 0},We)):void 0,lf?SB({element:lf,padding:kc}):void 0,Rc?LB(qe({},We)):void 0,DG({arrowWidth:Uf,arrowHeight:m}),lc?MB({strategy:"referenceHidden"}):void 0].filter(ik)});Im(()=>{Sd(Uc.anchor)},[Sd,Uc.anchor]);const Mf=null!==pd&&null!==Md,[qg,Qh]=Zi(Se);Uf=null===(ha=
Gf.arrow)||void 0===ha?void 0:ha.x;ha=null===(na=Gf.arrow)||void 0===na?void 0:na.y;na=0!==(null===(ua=Gf.arrow)||void 0===ua?void 0:ua.centerOffset);const [dg,rh]=(0,Yl.useState)();Im(()=>{Dd&&rh(window.getComputedStyle(Dd).zIndex)},[Dd]);const {hasParent:Eh,positionUpdateFns:tj}=BG("PopperContent",jb),Mk=!Eh;(0,Yl.useLayoutEffect)(()=>{if(!Mk)return tj.add(sg),()=>{tj.delete(sg)}},[Mk,tj,sg]);(0,Yl.useLayoutEffect)(()=>{Mk&&Mf&&Array.from(tj).reverse().forEach(Ak=>requestAnimationFrame(Ak))},[Mk,
Mf,tj]);ua=Cf(qe({"data-side":qg,"data-align":Qh},a),{ref:d,style:Cf(qe({},a.style),{animation:Mf?void 0:"none",opacity:null!==(Ha=Gf.hide)&&void 0!==Ha&&Ha.referenceHidden?0:void 0})});return(0,Yl.createElement)("div",{ref:qd,"data-radix-popper-content-wrapper":"",style:{position:Zd,left:0,top:0,transform:Mf?`translate3d(${Math.round(pd)}px, ${Math.round(Md)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:dg,["--radix-popper-transform-origin"]:[null===(Ua=Gf.transformOrigin)||void 0===
Ua?void 0:Ua.x,null===($a=Gf.transformOrigin)||void 0===$a?void 0:$a.y].join(" ")}},(0,Yl.createElement)(yG,{scope:jb,placedSide:qg,onArrowChange:re,arrowX:Uf,arrowY:ha,shouldHideArrow:na},Mk?(0,Yl.createElement)(AG,{scope:jb,hasParent:!0,positionUpdateFns:tj},(0,Yl.createElement)(Vk.div,ua)):(0,Yl.createElement)(Vk.div,ua)))}),CG={top:"bottom",right:"left",bottom:"top",left:"right"},UB=(0,Yl.forwardRef)(function(a,d){var {__scopePopper:m}=a;a=bg(a,["__scopePopper"]);m=zG("PopperArrow",m);return(0,Yl.createElement)("span",
{ref:m.onArrowChange,style:{position:"absolute",left:m.arrowX,top:m.arrowY,[CG[m.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[m.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[m.placedSide],visibility:m.shouldHideArrow?"hidden":void 0}},(0,Yl.createElement)(vG,nf({},a,{ref:d,style:Cf(qe({},a.style),{display:"block"})})))}),DG=a=>
({name:"transformOrigin",options:a,fn(d){var m,L,ha,na,ua;const {placement:Ha,rects:Ua,middlewareData:$a}=d,jb=(d=0!==(null===(m=$a.arrow)||void 0===m?void 0:m.centerOffset))?0:a.arrowWidth;m=d?0:a.arrowHeight;const [mb,Kb]=Zi(Ha),Vb={start:"0%",center:"50%",end:"100%"}[Kb],Ob=(null!==(L=null===(ha=$a.arrow)||void 0===ha?void 0:ha.x)&&void 0!==L?L:0)+jb/2;L=(null!==(na=null===(ua=$a.arrow)||void 0===ua?void 0:ua.y)&&void 0!==na?na:0)+m/2;ua=na="";"bottom"===mb?(na=d?Vb:`${Ob}px`,ua=`${-m}px`):"top"===
mb?(na=d?Vb:`${Ob}px`,ua=`${Ua.floating.height+m}px`):"right"===mb?(na=`${-m}px`,ua=d?Vb:`${L}px`):"left"===mb&&(na=`${Ua.floating.width+m}px`,ua=d?Vb:`${L}px`);return{data:{x:na,y:ua}}}}),fy=a=>{const {__scopePopper:d,children:m}=a,[L,ha]=(0,Yl.useState)(null);return(0,Yl.createElement)(xG,{scope:d,anchor:L,onAnchorChange:ha},m)},VB=ba(22),EG=Jf(ba(31)),FG=(0,VB.forwardRef)((a,d)=>{var m;const {container:L=null===globalThis||void 0===globalThis?void 0:null===(m=globalThis.document)||void 0===m?void 0:
m.body}=a;a=bg(a,["container"]);return L?EG.default.createPortal((0,VB.createElement)(Vk.div,nf({},a,{ref:d})),L):null}),Mq=ba(22),GG=ba(31),Uu=a=>{const {present:d,children:m}=a;a=jh(d);const L="function"===typeof m?m({present:a.isPresent}):Mq.Children.only(m),ha=Uh(a.ref,L.ref);return"function"===typeof m||a.isPresent?(0,Mq.cloneElement)(L,{ref:ha}):null};Uu.displayName="Presence";var bw=ba(22),WB=ba(22),HG=(0,WB.forwardRef)((a,d)=>(0,WB.createElement)(Vk.span,nf({},a,{ref:d,style:qe({position:"absolute",
border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[cw]=jj("Tooltip",[Lt]),dw=Lt(),[IG,gy]=cw("TooltipProvider"),[JG,Vu]=cw("Tooltip"),KG=(0,Ph.forwardRef)((a,d)=>{var {__scopeTooltip:m}=a;const L=bg(a,["__scopeTooltip"]),ha=Vu("TooltipTrigger",m),na=gy("TooltipTrigger",m);m=dw(m);const ua=(0,Ph.useRef)(null);d=Uh(d,ua,ha.onTriggerChange);const Ha=(0,Ph.useRef)(!1),Ua=(0,Ph.useRef)(!1),$a=(0,Ph.useCallback)(()=>
Ha.current=!1,[]);(0,Ph.useEffect)(()=>()=>document.removeEventListener("pointerup",$a),[$a]);return(0,Ph.createElement)(dy,nf({asChild:!0},m),(0,Ph.createElement)(Vk.button,nf({"aria-describedby":ha.open?ha.contentId:void 0,"data-state":ha.stateAttribute},L,{ref:d,onPointerMove:xg(a.onPointerMove,jb=>{"touch"===jb.pointerType||Ua.current||na.isPointerInTransitRef.current||(ha.onTriggerEnter(),Ua.current=!0)}),onPointerLeave:xg(a.onPointerLeave,()=>{ha.onTriggerLeave();Ua.current=!1}),onPointerDown:xg(a.onPointerDown,
()=>{Ha.current=!0;document.addEventListener("pointerup",$a,{once:!0})}),onFocus:xg(a.onFocus,()=>{if(!Ha.current)ha.onOpen()}),onBlur:xg(a.onBlur,ha.onClose),onClick:xg(a.onClick,ha.onClose)})))}),[LG,MG]=cw("TooltipPortal",{forceMount:void 0}),NG=(0,Ph.forwardRef)((a,d)=>{var m=MG("TooltipContent",a.__scopeTooltip);const {forceMount:L=m.forceMount,side:ha="top"}=a;m=bg(a,["forceMount","side"]);a=Vu("TooltipContent",a.__scopeTooltip);return(0,Ph.createElement)(Uu,{present:L||a.open},a.disableHoverableContent?
(0,Ph.createElement)(XB,nf({side:ha},m,{ref:d})):(0,Ph.createElement)(OG,nf({side:ha},m,{ref:d})))}),OG=(0,Ph.forwardRef)((a,d)=>{const m=Vu("TooltipContent",a.__scopeTooltip),L=gy("TooltipContent",a.__scopeTooltip),ha=(0,Ph.useRef)(null);d=Uh(d,ha);const [na,ua]=(0,Ph.useState)(null),{trigger:Ha,onClose:Ua}=m,$a=ha.current,{onPointerInTransitChange:jb}=L,mb=(0,Ph.useCallback)(()=>{ua(null);jb(!1)},[jb]),Kb=(0,Ph.useCallback)((Vb,Ob)=>{const kc=um({x:Vb.clientX,y:Vb.clientY},Vb.currentTarget.getBoundingClientRect()),
xc="right"===kc||"bottom"===kc?-5:5;Vb="right"===kc||"left"===kc?{x:Vb.clientX+xc,y:Vb.clientY}:{x:Vb.clientX,y:Vb.clientY+xc};Ob=Ob.getBoundingClientRect();const {top:$b,right:pc,bottom:lc,left:Rc}=Ob;Ob=Yh([Vb,{x:Rc,y:$b},{x:pc,y:$b},{x:pc,y:lc},{x:Rc,y:lc}]);ua(Ob);jb(!0)},[jb]);(0,Ph.useEffect)(()=>()=>mb(),[mb]);(0,Ph.useEffect)(()=>{if(Ha&&$a){const Vb=kc=>Kb(kc,$a),Ob=kc=>Kb(kc,Ha);Ha.addEventListener("pointerleave",Vb);$a.addEventListener("pointerleave",Ob);return()=>{Ha.removeEventListener("pointerleave",
Vb);$a.removeEventListener("pointerleave",Ob)}}},[Ha,$a,Kb,mb]);(0,Ph.useEffect)(()=>{if(na){const Vb=Ob=>{var kc=Ob.target;Ob={x:Ob.clientX,y:Ob.clientY};kc=(null===Ha||void 0===Ha?void 0:Ha.contains(kc))||(null===$a||void 0===$a?void 0:$a.contains(kc));const {x:xc,y:$b}=Ob;Ob=!1;for(let pc=0,lc=na.length-1;pc<na.length;lc=pc++){const Rc=na[pc].x,Uc=na[pc].y,Dd=na[lc].x,Td=na[lc].y;Uc>$b!==Td>$b&&xc<(Dd-Rc)*($b-Uc)/(Td-Uc)+Rc&&(Ob=!Ob)}Ob=!Ob;kc?mb():Ob&&(mb(),Ua())};document.addEventListener("pointermove",
Vb);return()=>document.removeEventListener("pointermove",Vb)}},[Ha,$a,na,Ua,mb]);return(0,Ph.createElement)(XB,nf({},a,{ref:d}))}),[PG,QG]=cw("Tooltip",{isInside:!1}),XB=(0,Ph.forwardRef)((a,d)=>{const {__scopeTooltip:m,children:L,"aria-label":ha,onEscapeKeyDown:na,onPointerDownOutside:ua}=a;a=bg(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Ha=Vu("TooltipContent",m),Ua=dw(m),{onClose:$a}=Ha;(0,Ph.useEffect)(()=>{document.addEventListener("tooltip.open",
$a);return()=>document.removeEventListener("tooltip.open",$a)},[$a]);(0,Ph.useEffect)(()=>{if(Ha.trigger){const jb=mb=>{mb=mb.target;null!==mb&&void 0!==mb&&mb.contains(Ha.trigger)&&$a()};window.addEventListener("scroll",jb,{capture:!0});return()=>window.removeEventListener("scroll",jb,{capture:!0})}},[Ha.trigger,$a]);return(0,Ph.createElement)(Zx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:na,onPointerDownOutside:ua,onFocusOutside:jb=>jb.preventDefault(),onDismiss:$a},(0,Ph.createElement)(ey,
nf({"data-state":Ha.stateAttribute},Ua,a,{ref:d,style:Cf(qe({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,Ph.createElement)(GB,null,L),(0,Ph.createElement)(PG,{scope:m,isInside:!0},(0,Ph.createElement)(HG,{id:Ha.contentId,role:"tooltip"},ha||L))))}),RG=(0,Ph.forwardRef)((a,d)=>{const {__scopeTooltip:m}=a;a=bg(a,["__scopeTooltip"]);const L=dw(m);return QG("TooltipArrow",m).isInside?null:(0,Ph.createElement)(UB,nf({},L,a,{ref:d}))}),SG=a=>{const {__scopeTooltip:d,
delayDuration:m=700,skipDelayDuration:L=300,disableHoverableContent:ha=!1,children:na}=a,[ua,Ha]=(0,Ph.useState)(!0),Ua=(0,Ph.useRef)(!1),$a=(0,Ph.useRef)(0);(0,Ph.useEffect)(()=>{const jb=$a.current;return()=>window.clearTimeout(jb)},[]);return(0,Ph.createElement)(IG,{scope:d,isOpenDelayed:ua,delayDuration:m,onOpen:(0,Ph.useCallback)(()=>{window.clearTimeout($a.current);Ha(!1)},[]),onClose:(0,Ph.useCallback)(()=>{window.clearTimeout($a.current);$a.current=window.setTimeout(()=>Ha(!0),L)},[L]),isPointerInTransitRef:Ua,
onPointerInTransitChange:(0,Ph.useCallback)(jb=>{Ua.current=jb},[]),disableHoverableContent:ha},na)},TG=a=>{const {__scopeTooltip:d,children:m,open:L,defaultOpen:ha=!1,onOpenChange:na,disableHoverableContent:ua,delayDuration:Ha}=a,Ua=gy("Tooltip",a.__scopeTooltip);a=dw(d);const [$a,jb]=(0,Ph.useState)(null),mb=xi(),Kb=(0,Ph.useRef)(0),Vb=null!==ua&&void 0!==ua?ua:Ua.disableHoverableContent,Ob=null!==Ha&&void 0!==Ha?Ha:Ua.delayDuration,kc=(0,Ph.useRef)(!1),[xc=!1,$b]=mi({prop:L,defaultProp:ha,onChange:Dd=>
{if(Dd)Ua.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else Ua.onClose();null===na||void 0===na||na(Dd)}}),pc=(0,Ph.useMemo)(()=>xc?kc.current?"delayed-open":"instant-open":"closed",[xc]),lc=(0,Ph.useCallback)(()=>{window.clearTimeout(Kb.current);kc.current=!1;$b(!0)},[$b]),Rc=(0,Ph.useCallback)(()=>{window.clearTimeout(Kb.current);$b(!1)},[$b]),Uc=(0,Ph.useCallback)(()=>{window.clearTimeout(Kb.current);Kb.current=window.setTimeout(()=>{kc.current=!0;$b(!0)},Ob)},[Ob,$b]);(0,Ph.useEffect)(()=>
()=>window.clearTimeout(Kb.current),[]);return(0,Ph.createElement)(fy,a,(0,Ph.createElement)(JG,{scope:d,contentId:mb,open:xc,stateAttribute:pc,trigger:$a,onTriggerChange:jb,onTriggerEnter:(0,Ph.useCallback)(()=>{Ua.isOpenDelayed?Uc():lc()},[Ua.isOpenDelayed,Uc,lc]),onTriggerLeave:(0,Ph.useCallback)(()=>{Vb?Rc():window.clearTimeout(Kb.current)},[Rc,Vb]),onOpen:lc,onClose:Rc,disableHoverableContent:Vb},m))},UG=KG,VG=a=>{const {__scopeTooltip:d,forceMount:m,children:L,container:ha}=a;a=Vu("TooltipPortal",
d);return(0,Ph.createElement)(LG,{scope:d,forceMount:m},(0,Ph.createElement)(Uu,{present:m||a.open},(0,Ph.createElement)(FG,{asChild:!0,container:ha},L)))},WG=NG,XG=RG,Fr=ba(613),YB=ba(613),hy=ba(613),YG=({style:a,icon:d,onClick:m})=>(0,hy.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:m,children:(0,hy.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,hy.jsx)(Xh,{name:d})})}),ZB=ba(22),$B=(0,ZB.forwardRef)((a,d)=>{const {pressed:m,
defaultPressed:L=!1,onPressedChange:ha}=a,na=bg(a,["pressed","defaultPressed","onPressedChange"]),[ua=!1,Ha]=mi({prop:m,onChange:ha,defaultProp:L});return(0,ZB.createElement)(Vk.button,nf({type:"button","aria-pressed":ua,"data-state":ua?"on":"off","data-disabled":a.disabled?"":void 0},na,{ref:d,onClick:xg(a.onClick,()=>{a.disabled||Ha(!ua)})}))}),ZG=$B,iy=ba(613),hp=ba(22),xh=ba(22),jq=Jf(ba(22)),aC=ba(22),$G=(0,aC.createContext)(void 0),aH=ba(22),jy=0,Gr=ba(22),bC={bubbles:!1,cancelable:!0},cC=(0,Gr.forwardRef)((a,
d)=>{const {loop:m=!1,trapped:L=!1,onMountAutoFocus:ha,onUnmountAutoFocus:na}=a;a=bg(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [ua,Ha]=(0,Gr.useState)(null),Ua=gj(ha),$a=gj(na),jb=(0,Gr.useRef)(null);d=Uh(d,Vb=>Ha(Vb));const mb=(0,Gr.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Gr.useEffect)(()=>{if(L){let Vb=function(kc){!mb.paused&&ua&&(kc=kc.target,ua.contains(kc)?jb.current=kc:Ck(jb.current,{select:!0}))},Ob=function(kc){!mb.paused&&
ua&&(ua.contains(kc.relatedTarget)||Ck(jb.current,{select:!0}))};document.addEventListener("focusin",Vb);document.addEventListener("focusout",Ob);return()=>{document.removeEventListener("focusin",Vb);document.removeEventListener("focusout",Ob)}}},[L,ua,mb.paused]);(0,Gr.useEffect)(()=>{if(ua){dC.add(mb);const Vb=document.activeElement;if(!ua.contains(Vb)){const Ob=new CustomEvent("focusScope.autoFocusOnMount",bC);ua.addEventListener("focusScope.autoFocusOnMount",Ua);ua.dispatchEvent(Ob);Ob.defaultPrevented||
(Bk(rp(Mj(ua)),{select:!0}),document.activeElement===Vb&&Ck(ua))}return()=>{ua.removeEventListener("focusScope.autoFocusOnMount",Ua);setTimeout(()=>{const Ob=new CustomEvent("focusScope.autoFocusOnUnmount",bC);ua.addEventListener("focusScope.autoFocusOnUnmount",$a);ua.dispatchEvent(Ob);Ob.defaultPrevented||Ck(null!==Vb&&void 0!==Vb?Vb:document.body,{select:!0});ua.removeEventListener("focusScope.autoFocusOnUnmount",$a);dC.remove(mb)},0)}}},[ua,Ua,$a,mb]);const Kb=(0,Gr.useCallback)(Vb=>{if((m||L)&&
!mb.paused){var Ob=document.activeElement;if("Tab"===Vb.key&&!Vb.altKey&&!Vb.ctrlKey&&!Vb.metaKey&&Ob){const xc=Vb.currentTarget;var kc=xc;const $b=Mj(kc),pc=jk($b,kc);kc=jk($b.reverse(),kc);const [lc,Rc]=[pc,kc];lc&&Rc?Vb.shiftKey||Ob!==Rc?Vb.shiftKey&&Ob===lc&&(Vb.preventDefault(),m&&Ck(Rc,{select:!0})):(Vb.preventDefault(),m&&Ck(lc,{select:!0})):Ob===xc&&Vb.preventDefault()}}},[m,L,mb.paused]);return(0,Gr.createElement)(Vk.div,nf({tabIndex:-1},a,{ref:d,onKeyDown:Kb}))}),dC=function(){let a=[];
return{add(d){const m=a[0];d===m||null!==m&&void 0!==m&&m.pause();a=Nk(a,d);a.unshift(d)},remove(d){var m;a=Nk(a,d);null===(m=a[0])||void 0===m||m.resume()}}}(),Zl=ba(22),bH={bubbles:!1,cancelable:!0},[ky,eC,cH]=gl("RovingFocusGroup"),[dH,ew]=jj("RovingFocusGroup",[cH]),[eH,fH]=dH("RovingFocusGroup"),fC=(0,Zl.forwardRef)((a,d)=>(0,Zl.createElement)(ky.Provider,{scope:a.__scopeRovingFocusGroup},(0,Zl.createElement)(ky.Slot,{scope:a.__scopeRovingFocusGroup},(0,Zl.createElement)(gH,nf({},a,{ref:d}))))),
gH=(0,Zl.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:m,orientation:L,loop:ha=!1,dir:na,currentTabStopId:ua,defaultCurrentTabStopId:Ha,onCurrentTabStopIdChange:Ua,onEntryFocus:$a}=a,jb=bg(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),mb=(0,Zl.useRef)(null);d=Uh(d,mb);const Kb=Wn(na),[Vb=null,Ob]=mi({prop:ua,defaultProp:Ha,onChange:Ua}),[kc,xc]=(0,Zl.useState)(!1),$b=gj($a),pc=eC(m),lc=(0,Zl.useRef)(!1),
[Rc,Uc]=(0,Zl.useState)(0);(0,Zl.useEffect)(()=>{const Dd=mb.current;if(Dd)return Dd.addEventListener("rovingFocusGroup.onEntryFocus",$b),()=>Dd.removeEventListener("rovingFocusGroup.onEntryFocus",$b)},[$b]);return(0,Zl.createElement)(eH,{scope:m,orientation:L,dir:Kb,loop:ha,currentTabStopId:Vb,onItemFocus:(0,Zl.useCallback)(Dd=>Ob(Dd),[Ob]),onItemShiftTab:(0,Zl.useCallback)(()=>xc(!0),[]),onFocusableItemAdd:(0,Zl.useCallback)(()=>Uc(Dd=>Dd+1),[]),onFocusableItemRemove:(0,Zl.useCallback)(()=>Uc(Dd=>
Dd-1),[])},(0,Zl.createElement)(Vk.div,nf({tabIndex:kc||0===Rc?-1:0,"data-orientation":L},jb,{ref:d,style:qe({outline:"none"},a.style),onMouseDown:xg(a.onMouseDown,()=>{lc.current=!0}),onFocus:xg(a.onFocus,Dd=>{var Td=!lc.current;if(Dd.target===Dd.currentTarget&&Td&&!kc&&(Td=new CustomEvent("rovingFocusGroup.onEntryFocus",bH),Dd.currentTarget.dispatchEvent(Td),!Td.defaultPrevented)){Dd=pc().filter(re=>re.focusable);Td=Dd.find(re=>re.active);const lf=Dd.find(re=>re.id===Vb);Dd=[Td,lf,...Dd].filter(Boolean).map(re=>
re.ref.current);An(Dd)}lc.current=!1}),onBlur:xg(a.onBlur,()=>xc(!1))})))}),gC=(0,Zl.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:m,focusable:L=!0,active:ha=!1}=a,na=bg(a,["__scopeRovingFocusGroup","focusable","active"]),ua=xi(),Ha=fH("RovingFocusGroupItem",m),Ua=Ha.currentTabStopId===ua,$a=eC(m),{onFocusableItemAdd:jb,onFocusableItemRemove:mb}=Ha;(0,Zl.useEffect)(()=>{if(L)return jb(),()=>mb()},[L,jb,mb]);return(0,Zl.createElement)(ky.ItemSlot,{scope:m,id:ua,focusable:L,active:ha},(0,Zl.createElement)(Vk.span,
nf({tabIndex:Ua?0:-1,"data-orientation":Ha.orientation},na,{ref:d,onMouseDown:xg(a.onMouseDown,Kb=>{if(L)Ha.onItemFocus(ua);else Kb.preventDefault()}),onFocus:xg(a.onFocus,()=>Ha.onItemFocus(ua)),onKeyDown:xg(a.onKeyDown,Kb=>{if("Tab"===Kb.key&&Kb.shiftKey)Ha.onItemShiftTab();else if(Kb.target===Kb.currentTarget){var Vb=lo(Kb,Ha.orientation,Ha.dir);if(void 0!==Vb){Kb.preventDefault();let Ob=$a().filter(kc=>kc.focusable).map(kc=>kc.ref.current);if("last"===Vb)Ob.reverse();else if("prev"===Vb||"next"===
Vb)"prev"===Vb&&Ob.reverse(),Kb=Ob.indexOf(Kb.currentTarget),Ob=Ha.loop?Fh(Ob,Kb+1):Ob.slice(Kb+1);setTimeout(()=>An(Ob))}}})})))}),hH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},iH=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},Mt=new WeakMap,fw=new WeakMap,gw={},ly=0,my=function(a,d,m){void 0===d&&(d=iH(a));void 0===m&&(m="data-aria-hidden");var L=Array.isArray(a)?
a:[a];gw[m]||(gw[m]=new WeakMap);var ha=gw[m],na=[],ua=new Set,Ha=function($a){$a&&!ua.has($a)&&(ua.add($a),Ha($a.parentNode))};L.forEach(Ha);var Ua=function($a){!$a||0<=L.indexOf($a)||Array.prototype.forEach.call($a.children,function(jb){if(ua.has(jb))Ua(jb);else{var mb=jb.getAttribute("aria-hidden");mb=null!==mb&&"false"!==mb;var Kb=(Mt.get(jb)||0)+1,Vb=(ha.get(jb)||0)+1;Mt.set(jb,Kb);ha.set(jb,Vb);na.push(jb);1===Kb&&mb&&fw.set(jb,!0);1===Vb&&jb.setAttribute(m,"true");mb||jb.setAttribute("aria-hidden",
"true")}})};Ua(d);ua.clear();ly++;return function(){na.forEach(function($a){var jb=Mt.get($a)-1,mb=ha.get($a)-1;Mt.set($a,jb);ha.set($a,mb);jb||(fw.has($a)||$a.removeAttribute("aria-hidden"),fw.delete($a));mb||$a.removeAttribute(m)});ly--;ly||(Mt=new WeakMap,Mt=new WeakMap,fw=new WeakMap,gw={})}},jH=Jf(fs(),1),{__assign:Hr,__rest:hC,__spreadArray:kH}=jH.default,iC=Jf(ba(22)),mm=Jf(ba(22)),lH=ba(22),mH=Jf(ba(22)),jC=function(a){var d=a.sideCar;a=hC(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");
d=d.read();if(!d)throw Error("Sidecar medium not found");return mH.createElement(d,Hr({},a))};jC.isSideCarExport=!0;var ny=function(a){void 0===a&&(a={});var d=tm(null);d.options=Hr({async:!0,ssr:!1},a);return d}(),Fm=function(){},wn=mm.forwardRef(function(a,d){var m=mm.useRef(null),L=mm.useState({onScrollCapture:Fm,onWheelCapture:Fm,onTouchMoveCapture:Fm}),ha=L[0];L=L[1];var na=a.forwardProps,ua=a.children,Ha=a.className,Ua=a.removeScrollBar,$a=a.enabled,jb=a.shards,mb=a.sideCar,Kb=a.noIsolation,
Vb=a.inert,Ob=a.allowPinchZoom,kc=a.as;kc=void 0===kc?"div":kc;a=hC(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));d=Wj([m,d]);ha=Hr(Hr({},a),ha);return mm.createElement(mm.Fragment,null,$a&&mm.createElement(mb,{sideCar:ny,removeScrollBar:Ua,shards:jb,noIsolation:Kb,inert:Vb,setCallbacks:L,allowPinchZoom:!!Ob,lockRef:m}),na?mm.cloneElement(mm.Children.only(ua),Hr(Hr({},ha),{ref:d})):mm.createElement(kc,Hr({},ha,{className:Ha,
ref:d}),ua))});wn.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wn.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var Ll=Jf(ba(22)),Gz=Jf(ba(22)),XD=Jf(ba(22)),Hz=function(){var a=0,d=null;return{add:function(m){if(0==a){if(document){var L=document.createElement("style");L.type="text/css";var ha="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;ha&&L.setAttribute("nonce",ha)}else L=null;if(d=L)L=d,L.styleSheet?L.styleSheet.cssText=m:L.appendChild(document.createTextNode(m)),
m=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(m)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),d=null)}}},YD=function(){var a=Hz();return function(d,m){XD.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&m])}},ms=function(){var a=YD();return function(d){a(d.styles,d.dynamic);return null}},px={left:0,top:0,right:0,gap:0},nH=ms(),kC=function(a,d,m,L){var ha=a.left,na=a.top,ua=a.right;a=a.gap;void 0===m&&(m="margin");return"\n  .".concat("with-scroll-bars-hidden",
" {\n   overflow: hidden ").concat(L,";\n   padding-right: ").concat(a,"px ").concat(L,";\n  }\n  body {\n    overflow: hidden ").concat(L,";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(L,";"),"margin"===m&&"\n    padding-left: ".concat(ha,"px;\n    padding-top: ").concat(na,"px;\n    padding-right: ").concat(ua,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(L,";\n    "),"padding"===m&&"padding-right: ".concat(a,"px ").concat(L,
";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(L,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(L,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(L,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(L,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",
": ").concat(a,"px;\n  }\n")},lC=function(a){var d=a.noRelative,m=a.noImportant;a=a.gapMode;var L=void 0===a?"margin":a;a=Gz.useMemo(function(){var ha=L;void 0===ha&&(ha="margin");if("undefined"===typeof window)ha=px;else{var na=window.getComputedStyle(document.body),ua=na["padding"===ha?"paddingTop":"marginTop"],Ha=na["padding"===ha?"paddingRight":"marginRight"];ha=[parseInt(na["padding"===ha?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(ua||"",10)||0,parseInt(Ha||"",10)||0];ha={left:ha[0],top:ha[1],
right:ha[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+ha[2]-ha[0])}}return ha},[L]);return Gz.createElement(nH,{styles:kC(a,!d,L,m?"":"!important")})},hw=!1;if("undefined"!==typeof window)try{var Wu=Object.defineProperty({},"passive",{get:function(){return hw=!0}});window.addEventListener("test",Wu,Wu);window.removeEventListener("test",Wu,Wu)}catch(a){hw=!1}var xt=hw?{passive:!1}:!1,Hu=function(a,d){var m=window.getComputedStyle(a);return"hidden"!==m[d]&&!(m.overflowY===
m.overflowX&&"TEXTAREA"!==a.tagName&&"visible"===m[d])},rx=function(a,d){do{"undefined"!==typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(qx(a,d)){var m=mC(a,d);if(m[1]>m[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},qx=function(a,d){return"v"===a?Hu(d,"overflowY"):Hu(d,"overflowX")},mC=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},iw=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,
a.changedTouches[0].clientY]:[0,0]},nC=function(a){return a&&"current"in a?a.current:a},oC=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},oy=0,Oj=[];ny.useMedium(function(a){var d=Ll.useRef([]),m=Ll.useRef([0,0]),L=Ll.useRef(),ha=Ll.useState(oy++)[0],na=Ll.useState(function(){return ms()})[0],ua=Ll.useRef(a);Ll.useEffect(function(){ua.current=a},[a]);Ll.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(ha));
var Ob=kH([a.lockRef.current],(a.shards||[]).map(nC),!0).filter(Boolean);Ob.forEach(function(kc){return kc.classList.add("allow-interactivity-".concat(ha))});return function(){document.body.classList.remove("block-interactivity-".concat(ha));Ob.forEach(function(kc){return kc.classList.remove("allow-interactivity-".concat(ha))})}}},[a.inert,a.lockRef.current,a.shards]);var Ha=Ll.useCallback(function(Ob,kc){if("touches"in Ob&&2===Ob.touches.length)return!ua.current.allowPinchZoom;var xc=iw(Ob),$b=m.current,
pc="deltaX"in Ob?Ob.deltaX:$b[0]-xc[0];$b="deltaY"in Ob?Ob.deltaY:$b[1]-xc[1];var lc=Ob.target,Rc=Math.abs(pc)>Math.abs($b)?"h":"v";if("touches"in Ob&&"h"===Rc&&"range"===lc.type)return!1;var Uc=rx(Rc,lc);if(!Uc)return!0;Uc?xc=Rc:(xc="v"===Rc?"h":"v",Uc=rx(Rc,lc));if(!Uc)return!1;!L.current&&"changedTouches"in Ob&&(pc||$b)&&(L.current=xc);if(!xc)return!0;xc=L.current||xc;$b="h"===xc?pc:$b;pc=window.getComputedStyle(kc).direction;pc="h"===xc&&"rtl"===pc?-1:1;Rc=pc*$b;Ob=Ob.target;$b=kc.contains(Ob);
lc=!1;Rc=0<Rc;var Dd=Uc=0;do{var Td=mC(xc,Ob),lf=Td[0];Td=Td[1]-Td[2]-pc*lf;(lf||Td)&&qx(xc,Ob)&&(Uc+=Td,Dd+=lf);Ob=Ob.parentNode}while(!$b&&Ob!==document.body||$b&&(kc.contains(Ob)||kc===Ob));Rc&&0===Uc?lc=!0:Rc||0!==Dd||(lc=!0);return lc},[]),Ua=Ll.useCallback(function(Ob){if(Oj.length&&Oj[Oj.length-1]===na){var kc="deltaY"in Ob?[Ob.deltaX,Ob.deltaY]:iw(Ob),xc=d.current.filter(function($b){var pc;if(pc=$b.name===Ob.type&&$b.target===Ob.target)$b=$b.delta,pc=$b[0]===kc[0]&&$b[1]===kc[1];return pc})[0];
xc&&xc.should?Ob.cancelable&&Ob.preventDefault():xc||(xc=(ua.current.shards||[]).map(nC).filter(Boolean).filter(function($b){return $b.contains(Ob.target)}),(0<xc.length?Ha(Ob,xc[0]):!ua.current.noIsolation)&&Ob.cancelable&&Ob.preventDefault())}},[]),$a=Ll.useCallback(function(Ob,kc,xc,$b){var pc={name:Ob,delta:kc,target:xc,should:$b};d.current.push(pc);setTimeout(function(){d.current=d.current.filter(function(lc){return lc!==pc})},1)},[]),jb=Ll.useCallback(function(Ob){m.current=iw(Ob);L.current=
void 0},[]),mb=Ll.useCallback(function(Ob){$a(Ob.type,[Ob.deltaX,Ob.deltaY],Ob.target,Ha(Ob,a.lockRef.current))},[]),Kb=Ll.useCallback(function(Ob){$a(Ob.type,iw(Ob),Ob.target,Ha(Ob,a.lockRef.current))},[]);Ll.useEffect(function(){Oj.push(na);a.setCallbacks({onScrollCapture:mb,onWheelCapture:mb,onTouchMoveCapture:Kb});document.addEventListener("wheel",Ua,xt);document.addEventListener("touchmove",Ua,xt);document.addEventListener("touchstart",jb,xt);return function(){Oj=Oj.filter(function(Ob){return Ob!==
na});document.removeEventListener("wheel",Ua,xt);document.removeEventListener("touchmove",Ua,xt);document.removeEventListener("touchstart",jb,xt)}},[]);var Vb=a.removeScrollBar;return Ll.createElement(Ll.Fragment,null,a.inert?Ll.createElement(na,{styles:oC(ha)}):null,Vb?Ll.createElement(lC,{gapMode:"margin"}):null)});var bo=iC.forwardRef(function(a,d){return iC.createElement(wn,Hr({},a,{ref:d,sideCar:jC}))});bo.classNames=wn.classNames;var Wk=["Enter"," "],Ir=["ArrowUp","PageDown","End"],Jm=["ArrowDown",
"PageUp","Home",...Ir];[...Wk];[...Wk];var [Ln,qj,pC]=gl("Menu"),[kq,Ns]=jj("Menu",[pC,Lt,ew]),Xu=Lt(),py=ew(),[qy,dj]=kq("Menu"),[ry,Yu]=kq("Menu"),jw=(0,xh.forwardRef)((a,d)=>{var {__scopeMenu:m}=a;a=bg(a,["__scopeMenu"]);m=Xu(m);return(0,xh.createElement)(dy,nf({},m,a,{ref:d}))}),[,Nt]=kq("MenuPortal",{forceMount:void 0}),[qC,Jr]=kq("MenuContent"),rC=(0,xh.forwardRef)((a,d)=>{var m=Nt("MenuContent",a.__scopeMenu);({forceMount:m=m.forceMount}=a);const L=bg(a,["forceMount"]),ha=dj("MenuContent",
a.__scopeMenu),na=Yu("MenuContent",a.__scopeMenu);return(0,xh.createElement)(Ln.Provider,{scope:a.__scopeMenu},(0,xh.createElement)(Uu,{present:m||ha.open},(0,xh.createElement)(Ln.Slot,{scope:a.__scopeMenu},na.modal?(0,xh.createElement)(kw,nf({},L,{ref:d})):(0,xh.createElement)(lw,nf({},L,{ref:d})))))}),kw=(0,xh.forwardRef)((a,d)=>{const m=dj("MenuContent",a.__scopeMenu),L=(0,xh.useRef)(null);d=Uh(d,L);(0,xh.useEffect)(()=>{const ha=L.current;if(ha)return my(ha)},[]);return(0,xh.createElement)(mw,
nf({},a,{ref:d,trapFocus:m.open,disableOutsidePointerEvents:m.open,disableOutsideScroll:!0,onFocusOutside:xg(a.onFocusOutside,ha=>ha.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>m.onOpenChange(!1)}))}),lw=(0,xh.forwardRef)((a,d)=>{const m=dj("MenuContent",a.__scopeMenu);return(0,xh.createElement)(mw,nf({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>m.onOpenChange(!1)}))}),mw=(0,xh.forwardRef)((a,d)=>{const {__scopeMenu:m,loop:L=!1,trapFocus:ha,
onOpenAutoFocus:na,onCloseAutoFocus:ua,disableOutsidePointerEvents:Ha,onEscapeKeyDown:Ua,onPointerDownOutside:$a,onFocusOutside:jb,onInteractOutside:mb,onDismiss:Kb,disableOutsideScroll:Vb}=a,Ob=bg(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),kc=dj("MenuContent",m),xc=Yu("MenuContent",m),$b=Xu(m),pc=py(m),lc=qj(m),[Rc,Uc]=(0,xh.useState)(null),
Dd=(0,xh.useRef)(null);d=Uh(d,Dd,kc.onContentChange);const Td=(0,xh.useRef)(0),lf=(0,xh.useRef)(""),re=(0,xh.useRef)(0),We=(0,xh.useRef)(null),Uf=(0,xh.useRef)("right"),hf=(0,xh.useRef)(0),wf=Vb?bo:xh.Fragment,Sd=Vb?{as:iq,allowPinchZoom:!0}:void 0,qd=pd=>{var Md,Se;pd=lf.current+pd;const Gf=lc().filter(dg=>!dg.disabled),sg=document.activeElement,Mf=null===(Md=Gf.find(dg=>dg.ref.current===sg))||void 0===Md?void 0:Md.textValue;Md=Gf.map(dg=>dg.textValue);const qg=Ij(Md,pd,Mf),Qh=null===(Se=Gf.find(dg=>
dg.textValue===qg))||void 0===Se?void 0:Se.ref.current;(function Eh(rh){lf.current=rh;window.clearTimeout(Td.current);""!==rh&&(Td.current=window.setTimeout(()=>Eh(""),1E3))})(pd);Qh&&setTimeout(()=>Qh.focus())};(0,xh.useEffect)(()=>()=>window.clearTimeout(Td.current),[]);Pi();const Zd=(0,xh.useCallback)(pd=>{var Md,Se,Gf;if(Gf=Uf.current===(null===(Md=We.current)||void 0===Md?void 0:Md.side)){if(Md=null===(Se=We.current)||void 0===Se?void 0:Se.area){const {x:sg,y:Mf}={x:pd.clientX,y:pd.clientY};
pd=!1;for(let qg=0,Qh=Md.length-1;qg<Md.length;Qh=qg++){Se=Md[qg].x;Gf=Md[qg].y;const dg=Md[Qh].x,rh=Md[Qh].y;Gf>Mf!==rh>Mf&&sg<(dg-Se)*(Mf-Gf)/(rh-Gf)+Se&&(pd=!pd)}Md=pd}else Md=!1;Gf=Md}return Gf},[]);return(0,xh.createElement)(qC,{scope:m,searchRef:lf,onItemEnter:(0,xh.useCallback)(pd=>{Zd(pd)&&pd.preventDefault()},[Zd]),onItemLeave:(0,xh.useCallback)(pd=>{var Md;Zd(pd)||(null===(Md=Dd.current)||void 0===Md||Md.focus(),Uc(null))},[Zd]),onTriggerLeave:(0,xh.useCallback)(pd=>{Zd(pd)&&pd.preventDefault()},
[Zd]),pointerGraceTimerRef:re,onPointerGraceIntentChange:(0,xh.useCallback)(pd=>{We.current=pd},[])},(0,xh.createElement)(wf,Sd,(0,xh.createElement)(cC,{asChild:!0,trapped:ha,onMountAutoFocus:xg(na,pd=>{var Md;pd.preventDefault();null===(Md=Dd.current)||void 0===Md||Md.focus()}),onUnmountAutoFocus:ua},(0,xh.createElement)(Zx,{asChild:!0,disableOutsidePointerEvents:Ha,onEscapeKeyDown:Ua,onPointerDownOutside:$a,onFocusOutside:jb,onInteractOutside:mb,onDismiss:Kb},(0,xh.createElement)(fC,nf({asChild:!0},
pc,{dir:xc.dir,orientation:"vertical",loop:L,currentTabStopId:Rc,onCurrentTabStopIdChange:Uc,onEntryFocus:pd=>{xc.isUsingKeyboardRef.current||pd.preventDefault()}}),(0,xh.createElement)(ey,nf({role:"menu","aria-orientation":"vertical","data-state":kc.open?"open":"closed","data-radix-menu-content":"",dir:xc.dir},$b,Ob,{ref:d,style:qe({outline:"none"},Ob.style),onKeyDown:xg(Ob.onKeyDown,pd=>{var Md=pd.target.closest("[data-radix-menu-content]")===pd.currentTarget;const Se=pd.ctrlKey||pd.altKey||pd.metaKey,
Gf=1===pd.key.length;Md&&("Tab"===pd.key&&pd.preventDefault(),!Se&&Gf&&qd(pd.key));pd.target===Dd.current&&Jm.includes(pd.key)&&(pd.preventDefault(),Md=lc().filter(sg=>!sg.disabled).map(sg=>sg.ref.current),Ir.includes(pd.key)&&Md.reverse(),Uo(Md))}),onBlur:xg(a.onBlur,pd=>{pd.currentTarget.contains(pd.target)||(window.clearTimeout(Td.current),lf.current="")}),onPointerMove:xg(a.onPointerMove,xo(pd=>{const Md=hf.current!==pd.clientX;pd.currentTarget.contains(pd.target)&&Md&&(Uf.current=pd.clientX>
hf.current?"right":"left",hf.current=pd.clientX)}))})))))))}),Ot=(0,xh.forwardRef)((a,d)=>{const {disabled:m=!1,onSelect:L}=a,ha=bg(a,["disabled","onSelect"]),na=(0,xh.useRef)(null),ua=Yu("MenuItem",a.__scopeMenu),Ha=Jr("MenuItem",a.__scopeMenu);d=Uh(d,na);const Ua=(0,xh.useRef)(!1);return(0,xh.createElement)(sy,nf({},ha,{ref:d,disabled:m,onClick:xg(a.onClick,()=>{const $a=na.current;if(!m&&$a){const jb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});$a.addEventListener("menu.itemSelect",
mb=>null===L||void 0===L?void 0:L(mb),{once:!0});$k($a,jb);if(jb.defaultPrevented)Ua.current=!1;else ua.onClose()}}),onPointerDown:$a=>{var jb;null===(jb=a.onPointerDown)||void 0===jb||jb.call(a,$a);Ua.current=!0},onPointerUp:xg(a.onPointerUp,$a=>{var jb;Ua.current||null===(jb=$a.currentTarget)||void 0===jb||jb.click()}),onKeyDown:xg(a.onKeyDown,$a=>{const jb=""!==Ha.searchRef.current;m||jb&&" "===$a.key||!Wk.includes($a.key)||($a.currentTarget.click(),$a.preventDefault())})}))}),sy=(0,xh.forwardRef)((a,
d)=>{const {__scopeMenu:m,disabled:L=!1,textValue:ha}=a,na=bg(a,["__scopeMenu","disabled","textValue"]),ua=Jr("MenuItem",m),Ha=py(m),Ua=(0,xh.useRef)(null);d=Uh(d,Ua);const [$a,jb]=(0,xh.useState)(!1),[mb,Kb]=(0,xh.useState)("");(0,xh.useEffect)(()=>{const Vb=Ua.current;if(Vb){var Ob;Kb((null!==(Ob=Vb.textContent)&&void 0!==Ob?Ob:"").trim())}},[na.children]);return(0,xh.createElement)(Ln.ItemSlot,{scope:m,disabled:L,textValue:null!==ha&&void 0!==ha?ha:mb},(0,xh.createElement)(gC,nf({asChild:!0},Ha,
{focusable:!L}),(0,xh.createElement)(Vk.div,nf({role:"menuitem","data-highlighted":$a?"":void 0,"aria-disabled":L||void 0,"data-disabled":L?"":void 0},na,{ref:d,onPointerMove:xg(a.onPointerMove,xo(Vb=>{if(L)ua.onItemLeave(Vb);else ua.onItemEnter(Vb),Vb.defaultPrevented||Vb.currentTarget.focus()})),onPointerLeave:xg(a.onPointerLeave,xo(Vb=>ua.onItemLeave(Vb))),onFocus:xg(a.onFocus,()=>jb(!0)),onBlur:xg(a.onBlur,()=>jb(!1))}))))});kq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});kq("MenuItemIndicator",
{checked:!1});var Zu=(0,xh.forwardRef)((a,d)=>{a=bg(a,["__scopeMenu"]);return(0,xh.createElement)(Vk.div,nf({role:"separator","aria-orientation":"horizontal"},a,{ref:d}))});kq("MenuSub");var ty=a=>{const {__scopeMenu:d,open:m=!1,children:L,dir:ha,onOpenChange:na,modal:ua=!0}=a;a=Xu(d);const [Ha,Ua]=(0,xh.useState)(null),$a=(0,xh.useRef)(!1),jb=gj(na),mb=Wn(ha);(0,xh.useEffect)(()=>{const Kb=()=>{$a.current=!0;document.addEventListener("pointerdown",Vb,{capture:!0,once:!0});document.addEventListener("pointermove",
Vb,{capture:!0,once:!0})},Vb=()=>$a.current=!1;document.addEventListener("keydown",Kb,{capture:!0});return()=>{document.removeEventListener("keydown",Kb,{capture:!0});document.removeEventListener("pointerdown",Vb,{capture:!0});document.removeEventListener("pointermove",Vb,{capture:!0})}},[]);return(0,xh.createElement)(fy,a,(0,xh.createElement)(qy,{scope:d,open:m,onOpenChange:jb,content:Ha,onContentChange:Ua},(0,xh.createElement)(ry,{scope:d,onClose:(0,xh.useCallback)(()=>jb(!1),[jb]),isUsingKeyboardRef:$a,
dir:mb,modal:ua},L)))},[sC]=jj("DropdownMenu",[Ns]),nw=Ns(),[Pt,Qt]=sC("DropdownMenu"),ow=(0,hp.forwardRef)((a,d)=>{const {__scopeDropdownMenu:m,disabled:L=!1}=a,ha=bg(a,["__scopeDropdownMenu","disabled"]),na=Qt("DropdownMenuTrigger",m),ua=nw(m);return(0,hp.createElement)(jw,nf({asChild:!0},ua),(0,hp.createElement)(Vk.button,nf({type:"button",id:na.triggerId,"aria-haspopup":"menu","aria-expanded":na.open,"aria-controls":na.open?na.contentId:void 0,"data-state":na.open?"open":"closed","data-disabled":L?
"":void 0,disabled:L},ha,{ref:ih(d,na.triggerRef),onPointerDown:xg(a.onPointerDown,Ha=>{L||0!==Ha.button||!1!==Ha.ctrlKey||(na.onOpenToggle(),na.open||Ha.preventDefault())}),onKeyDown:xg(a.onKeyDown,Ha=>{if(!L){if(["Enter"," "].includes(Ha.key))na.onOpenToggle();if("ArrowDown"===Ha.key)na.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Ha.key)&&Ha.preventDefault()}})})))}),pw=(0,hp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:m}=a;const L=bg(a,["__scopeDropdownMenu"]),ha=Qt("DropdownMenuContent",
m);m=nw(m);const na=(0,hp.useRef)(!1);return(0,hp.createElement)(rC,nf({id:ha.contentId,"aria-labelledby":ha.triggerId},m,L,{ref:d,onCloseAutoFocus:xg(a.onCloseAutoFocus,ua=>{var Ha;na.current||null===(Ha=ha.triggerRef.current)||void 0===Ha||Ha.focus();na.current=!1;ua.preventDefault()}),onInteractOutside:xg(a.onInteractOutside,ua=>{ua=ua.detail.originalEvent;const Ha=0===ua.button&&!0===ua.ctrlKey;ua=2===ua.button||Ha;if(!ha.modal||ua)na.current=!0}),style:Cf(qe({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Rt=(0,hp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:m}=a;a=bg(a,["__scopeDropdownMenu"]);m=nw(m);return(0,hp.createElement)(Ot,nf({},m,a,{ref:d}))}),qw=a=>{const {__scopeDropdownMenu:d,children:m,dir:L,open:ha,defaultOpen:na,onOpenChange:ua,modal:Ha=!0}=a;a=nw(d);const Ua=(0,hp.useRef)(null),[$a=!1,jb]=mi({prop:ha,defaultProp:na,onChange:ua});return(0,hp.createElement)(Pt,{scope:d,triggerId:xi(),triggerRef:Ua,contentId:xi(),open:$a,onOpenChange:jb,onOpenToggle:(0,hp.useCallback)(()=>jb(mb=>!mb),
[jb]),modal:Ha},(0,hp.createElement)(ty,nf({},a,{open:$a,onOpenChange:jb,dir:L,modal:Ha}),m))},rj=Jf(ba(22)).default.createContext({}),uy=Jf(ba(22)),tC=ba(613),Km=a=>{var {action:d}=a;a=bg(a,["action"]);var {renderers:m}=uy.useContext(rj);m=null==m?void 0:m.KeyboardShortcut;return(0,tC.jsx)("div",Cf(qe({className:"tl-menu-right-slot"},a),{children:(0,tC.jsx)(m,{action:d})}))};ba(22);var Go=ba(613),$u=If(function(){const a=Ie(),d=m=>{m.preventDefault()};return(0,Go.jsxs)(qw,{children:[(0,Go.jsx)(ow,
{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,Go.jsxs)(pw,{onCloseAutoFocus:m=>m.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,Go.jsxs)(Rt,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,Go.jsx)(Km,{action:"whiteboard/zoom-to-fit"})]}),(0,Go.jsxs)(Rt,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,
children:["Zoom to fit selection",(0,Go.jsx)(Km,{action:"whiteboard/zoom-to-selection"})]}),(0,Go.jsxs)(Rt,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomIn,children:["Zoom in",(0,Go.jsx)(Km,{action:"whiteboard/zoom-in"})]}),(0,Go.jsxs)(Rt,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,Go.jsx)(Km,{action:"whiteboard/zoom-out"})]}),(0,Go.jsxs)(Rt,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,Go.jsx)(Km,{action:"whiteboard/reset-zoom"})]})]})]})}),
Kr=ba(22),vy=["horizontal","vertical"],Nq=(0,Kr.forwardRef)((a,d)=>{const {decorative:m,orientation:L="horizontal"}=a;a=bg(a,["decorative","orientation"]);const ha=vy.includes(L)?L:"horizontal";return(0,Kr.createElement)(Vk.div,nf({"data-orientation":ha},m?{role:"none"}:{"aria-orientation":"vertical"===ha?ha:void 0,role:"separator"},a,{ref:d}))});Nq.propTypes={orientation(a,d,m){a=a[d];d=String(a);return a&&!vy.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${m}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var wl=ba(613),rw=If(function(){const a=Ie(),{handlers:{t:d}}=Er.useContext(rj),m=Er.useCallback(()=>{a.api.undo()},[a]),L=Er.useCallback(()=>{a.api.redo()},[a]),ha=Er.useCallback(()=>{a.api.zoomIn()},[a]),na=Er.useCallback(()=>{a.api.zoomOut()},[a]),ua=Er.useCallback(()=>{a.api.toggleGrid()},[a]),Ha=Er.useCallback(()=>{a.api.toggleSnapToGrid()},[a]),Ua=Er.useCallback(()=>{a.api.togglePenMode()},[a]);return(0,wl.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",
children:[!a.readOnly&&(0,wl.jsxs)("div",{className:"tl-toolbar tl-history-bar mr-2 mb-2",children:[(0,wl.jsx)(Ug,{tooltip:d("whiteboard/undo"),onClick:m,children:(0,wl.jsx)(Xh,{name:"arrow-back-up"})}),(0,wl.jsx)(Ug,{tooltip:d("whiteboard/redo"),onClick:L,children:(0,wl.jsx)(Xh,{name:"arrow-forward-up"})})]}),(0,wl.jsxs)("div",{className:"tl-toolbar tl-zoom-bar mr-2 mb-2",children:[(0,wl.jsx)(Ug,{tooltip:d("whiteboard/zoom-in"),onClick:ha,id:"tl-zoom-in",children:(0,wl.jsx)(Xh,{name:"plus"})}),(0,wl.jsx)(Ug,
{tooltip:d("whiteboard/zoom-out"),onClick:na,id:"tl-zoom-out",children:(0,wl.jsx)(Xh,{name:"minus"})}),(0,wl.jsx)(Nq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,wl.jsx)($u,{})]}),(0,wl.jsxs)("div",{className:"tl-toolbar tl-grid-bar mr-2 mb-2",children:[(0,wl.jsx)($i,{tooltip:d("whiteboard/toggle-grid"),className:"tl-button",pressed:a.settings.showGrid,id:"tl-show-grid",onPressedChange:ua,children:(0,wl.jsx)(Xh,{name:"grid-dots"})}),!a.readOnly&&(0,wl.jsx)($i,{tooltip:d("whiteboard/snap-to-grid"),
className:"tl-button",pressed:a.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:Ha,children:(0,wl.jsx)(Xh,{name:a.settings.snapToGrid?"magnet":"magnet-off"})})]}),!a.readOnly&&(0,wl.jsx)("div",{className:"tl-toolbar tl-pen-mode-bar mb-2",children:(0,wl.jsx)($i,{tooltip:d("whiteboard/toggle-pen-mode"),className:"tl-button",pressed:a.settings.penMode,id:"tl-toggle-pen-mode",onPressedChange:Ua,children:(0,wl.jsx)(Xh,{name:a.settings.penMode?"pencil":"pencil-off"})})})]})}),wy=Jf(ba(22)),xy=
Jf(ba(31)),Os=ba(613),St=a=>`[${a.map(d=>{var m;return null!=(m=null==d?void 0:d.toFixed(2))?m:"-"}).join(", ")}]`,uC=If(()=>{var a;const {viewport:{bounds:d,camera:{point:m,zoom:L}},inputs:ha}=Gc(),na=wy.default.useRef();wy.default.useEffect(()=>{const Ha=document.getElementById("tl-statusbar-anchor");na.current=Ha},[]);const ua=[["Z",null!=(a=null==L?void 0:L.toFixed(2))?a:"null"],["MP",St(ha.currentPoint)],["MS",St(ha.currentScreenPoint)],["VP",St(m)],["VBR",St([d.maxX,d.maxY])]].map(Ha=>Ha.join("")).join("|");
a=na.current?xy.default.createPortal((0,Os.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:ua}),na.current):null;return(0,Os.jsx)(Os.Fragment,{children:a})}),fn=Jf(ba(22)),Lm=ba(613),nm=If(a=>{var {id:d,icon:m,tooltip:L,tooltipSide:ha="left",handleClick:na}=a;a=bg(a,["id","icon","tooltip","tooltipSide","handleClick"]);var ua;const Ha=Ie(),Ua=null==(ua=[...Ha.Tools,Dt,Et])?void 0:ua.find($a=>$a.id===d);ua=(ua=null==Ua?void 0:Ua.shortcut)&&L?(0,Lm.jsxs)("div",{className:"flex",
children:[L,(0,Lm.jsx)(Km,{action:ua})]}):L;return(0,Lm.jsx)(Ug,Cf(qe({},a),{tooltipSide:ha,tooltip:ua,"data-tool":d,"data-selected":d===Ha.selectedTool.id,onClick:na,children:"string"===typeof m?(0,Lm.jsx)(Xh,{name:m}):m}))}),Pj=ba(22),[yy]=jj("Popover",[Lt]),av=Lt(),[vC,Ps]=yy("Popover"),sw=(0,Pj.forwardRef)((a,d)=>{var {__scopePopover:m}=a;const L=bg(a,["__scopePopover"]),ha=Ps("PopoverTrigger",m);m=av(m);d=Uh(d,ha.triggerRef);a=(0,Pj.createElement)(Vk.button,nf({type:"button","aria-haspopup":"dialog",
"aria-expanded":ha.open,"aria-controls":ha.contentId,"data-state":ha.open?"open":"closed"},L,{ref:d,onClick:xg(a.onClick,ha.onOpenToggle)}));return ha.hasCustomAnchor?a:(0,Pj.createElement)(dy,nf({asChild:!0},m),a)}),[,zy]=yy("PopoverPortal",{forceMount:void 0}),Ay=(0,Pj.forwardRef)((a,d)=>{var m=zy("PopoverContent",a.__scopePopover);({forceMount:m=m.forceMount}=a);const L=bg(a,["forceMount"]);a=Ps("PopoverContent",a.__scopePopover);return(0,Pj.createElement)(Uu,{present:m||a.open},a.modal?(0,Pj.createElement)(By,
nf({},L,{ref:d})):(0,Pj.createElement)(wC,nf({},L,{ref:d})))}),By=(0,Pj.forwardRef)((a,d)=>{const m=Ps("PopoverContent",a.__scopePopover),L=(0,Pj.useRef)(null);d=Uh(d,L);const ha=(0,Pj.useRef)(!1);(0,Pj.useEffect)(()=>{const na=L.current;if(na)return my(na)},[]);return(0,Pj.createElement)(bo,{as:iq,allowPinchZoom:!0},(0,Pj.createElement)(Qs,nf({},a,{ref:d,trapFocus:m.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xg(a.onCloseAutoFocus,na=>{var ua;na.preventDefault();ha.current||null===(ua=m.triggerRef.current)||
void 0===ua||ua.focus()}),onPointerDownOutside:xg(a.onPointerDownOutside,na=>{na=na.detail.originalEvent;const ua=0===na.button&&!0===na.ctrlKey;ha.current=2===na.button||ua},{checkForDefaultPrevented:!1}),onFocusOutside:xg(a.onFocusOutside,na=>na.preventDefault(),{checkForDefaultPrevented:!1})})))}),wC=(0,Pj.forwardRef)((a,d)=>{const m=Ps("PopoverContent",a.__scopePopover),L=(0,Pj.useRef)(!1);return(0,Pj.createElement)(Qs,nf({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:ha=>
{var na;null===(na=a.onCloseAutoFocus)||void 0===na||na.call(a,ha);if(!ha.defaultPrevented){var ua;L.current||null===(ua=m.triggerRef.current)||void 0===ua||ua.focus();ha.preventDefault()}L.current=!1},onInteractOutside:ha=>{var na,ua;null===(na=a.onInteractOutside)||void 0===na||na.call(a,ha);ha.defaultPrevented||(L.current=!0);na=ha.target;(null===(ua=m.triggerRef.current)||void 0===ua?0:ua.contains(na))&&ha.preventDefault()}}))}),Qs=(0,Pj.forwardRef)((a,d)=>{const {__scopePopover:m,trapFocus:L,
onOpenAutoFocus:ha,onCloseAutoFocus:na,disableOutsidePointerEvents:ua,onEscapeKeyDown:Ha,onPointerDownOutside:Ua,onFocusOutside:$a,onInteractOutside:jb}=a;a=bg(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const mb=Ps("PopoverContent",m),Kb=av(m);Pi();return(0,Pj.createElement)(cC,{asChild:!0,loop:!0,trapped:L,onMountAutoFocus:ha,onUnmountAutoFocus:na},(0,Pj.createElement)(Zx,
{asChild:!0,disableOutsidePointerEvents:ua,onInteractOutside:jb,onEscapeKeyDown:Ha,onPointerDownOutside:Ua,onFocusOutside:$a,onDismiss:()=>mb.onOpenChange(!1)},(0,Pj.createElement)(ey,nf({"data-state":mb.open?"open":"closed",role:"dialog",id:mb.contentId},Kb,a,{ref:d,style:Cf(qe({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),Cy=(0,Pj.forwardRef)((a,d)=>{var {__scopePopover:m}=a;a=bg(a,["__scopePopover"]);m=av(m);return(0,Pj.createElement)(UB,
nf({},m,a,{ref:d}))}),xC=a=>{const {__scopePopover:d,children:m,open:L,defaultOpen:ha,onOpenChange:na,modal:ua=!1}=a;a=av(d);const Ha=(0,Pj.useRef)(null),[Ua,$a]=(0,Pj.useState)(!1),[jb=!1,mb]=mi({prop:L,defaultProp:ha,onChange:na});return(0,Pj.createElement)(fy,a,(0,Pj.createElement)(vC,{scope:d,contentId:xi(),triggerRef:Ha,open:jb,onOpenChange:mb,onOpenToggle:(0,Pj.useCallback)(()=>mb(Kb=>!Kb),[mb]),hasCustomAnchor:Ua,onCustomAnchorAdd:(0,Pj.useCallback)(()=>$a(!0),[]),onCustomAnchorRemove:(0,Pj.useCallback)(()=>
$a(!1),[]),modal:ua},m))},Tt=Jf(ba(22)),Bp=ba(613),Dy=If(function(a){var {popoverSide:d="left",setGeometry:m,activeGeometry:L,chevron:ha=!0}=a;a=bg(a,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:na}}=Tt.default.useContext(rj);const ua=[{id:"box",icon:"square",tooltip:na("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:na("whiteboard/circle")},{id:"polygon",icon:"triangle",tooltip:na("whiteboard/triangle")}];na={id:"shapes",icon:"triangle-square-circle",tooltip:na("whiteboard/shape")};
na=L?ua.find(Ha=>Ha.id===L):na;return(0,Bp.jsxs)(xC,{children:[(0,Bp.jsx)(sw,{asChild:!0,children:(0,Bp.jsxs)("div",Cf(qe({},a),{className:"tl-geometry-tools-pane-anchor",children:[(0,Bp.jsx)(nm,Cf(qe({},na),{tooltipSide:d})),ha&&(0,Bp.jsx)(Xh,{"data-selected":L,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,Bp.jsxs)(Ay,{className:"tl-popover-content",side:d,sideOffset:15,children:[(0,Bp.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":
"flex-row"}`,children:ua.map(Ha=>(0,Bp.jsx)(nm,{id:Ha.id,icon:Ha.icon,tooltip:L?Ha.tooltip:"",handleClick:m,tooltipSide:d},Ha.id))}),(0,Bp.jsx)(Cy,{className:"tl-popover-arrow"})]})]})}),Ii=ba(22),Ey=ba(22),Fy=["PageUp","PageDown"],Gy=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Hy={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},
[Ut,yC,oH]=gl("Slider"),[zC]=jj("Slider",[oH]),[AC,ip]=zC("Slider"),Oq=(0,Ii.forwardRef)((a,d)=>{function m(hf){const wf=wq(re,hf);na(hf,wf)}function L(hf){na(hf,Dd.current)}function ha(){re[Dd.current]!==Uf.current[Dd.current]&&xc(re)}function na(hf,wf,{commit:Sd}={commit:!1}){const qd=(String($a).split(".")[1]||"").length;hf=kn(Math.round((hf-Ha)/$a)*$a+Ha,qd);const Zd=yo(hf,[Ha,Ua]);We((pd=[])=>{const Md=yj(pd,Zd,wf);var Se=Kb*$a;if(0<Se){const Gf=Dm(Md);Se=Math.min(...Gf)>=Se}else Se=!0;return Se?
(Dd.current=Md.indexOf(Zd),(Se=String(Md)!==String(pd))&&Sd&&xc(Md),Se?Md:pd):pd})}const {name:ua,min:Ha=0,max:Ua=100,step:$a=1,orientation:jb="horizontal",disabled:mb=!1,minStepsBetweenThumbs:Kb=0,defaultValue:Vb=[Ha],value:Ob,onValueChange:kc=()=>{},onValueCommit:xc=()=>{},inverted:$b=!1}=a,pc=bg(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[lc,Rc]=(0,Ii.useState)(null);d=Uh(d,hf=>Rc(hf));const Uc=(0,Ii.useRef)(new Set),
Dd=(0,Ii.useRef)(0);var Td="horizontal"===jb;const lf=lc?!!lc.closest("form"):!0;Td=Td?BC:pH;const [re=[],We]=mi({prop:Ob,defaultProp:Vb,onChange:hf=>{var wf;null===(wf=[...Uc.current][Dd.current])||void 0===wf||wf.focus();kc(hf)}}),Uf=(0,Ii.useRef)(re);return(0,Ii.createElement)(AC,{scope:a.__scopeSlider,disabled:mb,min:Ha,max:Ua,valueIndexToChangeRef:Dd,thumbs:Uc.current,values:re,orientation:jb},(0,Ii.createElement)(Ut.Provider,{scope:a.__scopeSlider},(0,Ii.createElement)(Ut.Slot,{scope:a.__scopeSlider},
(0,Ii.createElement)(Td,nf({"aria-disabled":mb,"data-disabled":mb?"":void 0},pc,{ref:d,onPointerDown:xg(pc.onPointerDown,()=>{mb||(Uf.current=re)}),min:Ha,max:Ua,inverted:$b,onSlideStart:mb?void 0:m,onSlideMove:mb?void 0:L,onSlideEnd:mb?void 0:ha,onHomeKeyDown:()=>!mb&&na(Ha,0,{commit:!0}),onEndKeyDown:()=>!mb&&na(Ua,re.length-1,{commit:!0}),onStepKeyDown:({event:hf,direction:wf})=>{if(!mb){hf=Fy.includes(hf.key)||hf.shiftKey&&Gy.includes(hf.key);const Sd=Dd.current;na(re[Sd]+$a*(hf?10:1)*wf,Sd,{commit:!0})}}})))),
lf&&re.map((hf,wf)=>(0,Ii.createElement)(ng,{key:wf,name:ua?ua+(1<re.length?"[]":""):void 0,value:hf})))}),[Rs,Lr]=zC("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),BC=(0,Ii.forwardRef)((a,d)=>{function m(pc){const lc=Ob.current||Kb.getBoundingClientRect(),Rc=rn([0,lc.width],$b?[L,ha]:[ha,L]);Ob.current=lc;return Rc(pc-lc.left)}const {min:L,max:ha,dir:na,inverted:ua,onSlideStart:Ha,onSlideMove:Ua,onSlideEnd:$a,onStepKeyDown:jb}=a,mb=bg(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
[Kb,Vb]=(0,Ii.useState)(null);d=Uh(d,pc=>Vb(pc));const Ob=(0,Ii.useRef)(),kc=Wn(na),xc="ltr"===kc,$b=xc&&!ua||!xc&&ua;return(0,Ii.createElement)(Rs,{scope:a.__scopeSlider,startEdge:$b?"left":"right",endEdge:$b?"right":"left",direction:$b?1:-1,size:"width"},(0,Ii.createElement)(CC,nf({dir:kc,"data-orientation":"horizontal"},mb,{ref:d,style:Cf(qe({},mb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:pc=>{pc=m(pc.clientX);null===Ha||void 0===Ha||Ha(pc)},onSlideMove:pc=>{pc=
m(pc.clientX);null===Ua||void 0===Ua||Ua(pc)},onSlideEnd:()=>{Ob.current=void 0;null===$a||void 0===$a||$a()},onStepKeyDown:pc=>{const lc=Hy[$b?"from-left":"from-right"].includes(pc.key);null===jb||void 0===jb||jb({event:pc,direction:lc?-1:1})}})))}),pH=(0,Ii.forwardRef)((a,d)=>{function m(Ob){const kc=Kb.current||mb.current.getBoundingClientRect(),xc=rn([0,kc.height],Vb?[ha,L]:[L,ha]);Kb.current=kc;return xc(Ob-kc.top)}const {min:L,max:ha,inverted:na,onSlideStart:ua,onSlideMove:Ha,onSlideEnd:Ua,
onStepKeyDown:$a}=a,jb=bg(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),mb=(0,Ii.useRef)(null);d=Uh(d,mb);const Kb=(0,Ii.useRef)(),Vb=!na;return(0,Ii.createElement)(Rs,{scope:a.__scopeSlider,startEdge:Vb?"bottom":"top",endEdge:Vb?"top":"bottom",size:"height",direction:Vb?1:-1},(0,Ii.createElement)(CC,nf({"data-orientation":"vertical"},jb,{ref:d,style:Cf(qe({},jb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Ob=>{Ob=m(Ob.clientY);null===
ua||void 0===ua||ua(Ob)},onSlideMove:Ob=>{Ob=m(Ob.clientY);null===Ha||void 0===Ha||Ha(Ob)},onSlideEnd:()=>{Kb.current=void 0;null===Ua||void 0===Ua||Ua()},onStepKeyDown:Ob=>{const kc=Hy[Vb?"from-bottom":"from-top"].includes(Ob.key);null===$a||void 0===$a||$a({event:Ob,direction:kc?-1:1})}})))}),CC=(0,Ii.forwardRef)((a,d)=>{const {__scopeSlider:m,onSlideStart:L,onSlideMove:ha,onSlideEnd:na,onHomeKeyDown:ua,onEndKeyDown:Ha,onStepKeyDown:Ua}=a,$a=bg(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
jb=ip("Slider",m);return(0,Ii.createElement)(Vk.span,nf({},$a,{ref:d,onKeyDown:xg(a.onKeyDown,mb=>{"Home"===mb.key?(ua(mb),mb.preventDefault()):"End"===mb.key?(Ha(mb),mb.preventDefault()):Fy.concat(Gy).includes(mb.key)&&(Ua(mb),mb.preventDefault())}),onPointerDown:xg(a.onPointerDown,mb=>{const Kb=mb.target;Kb.setPointerCapture(mb.pointerId);mb.preventDefault();jb.thumbs.has(Kb)?Kb.focus():L(mb)}),onPointerMove:xg(a.onPointerMove,mb=>{mb.target.hasPointerCapture(mb.pointerId)&&ha(mb)}),onPointerUp:xg(a.onPointerUp,
mb=>{const Kb=mb.target;Kb.hasPointerCapture(mb.pointerId)&&(Kb.releasePointerCapture(mb.pointerId),na(mb))})}))}),DC=(0,Ii.forwardRef)((a,d)=>{var {__scopeSlider:m}=a;a=bg(a,["__scopeSlider"]);m=ip("SliderTrack",m);return(0,Ii.createElement)(Vk.span,nf({"data-disabled":m.disabled?"":void 0,"data-orientation":m.orientation},a,{ref:d}))}),tf=(0,Ii.forwardRef)((a,d)=>{var {__scopeSlider:m}=a;const L=bg(a,["__scopeSlider"]),ha=ip("SliderRange",m);m=Lr("SliderRange",m);var na=(0,Ii.useRef)(null);d=Uh(d,
na);var ua=ha.values.length;na=ha.values.map(Ha=>Vi(Ha,ha.min,ha.max));ua=1<ua?Math.min(...na):0;na=100-Math.max(...na);return(0,Ii.createElement)(Vk.span,nf({"data-orientation":ha.orientation,"data-disabled":ha.disabled?"":void 0},L,{ref:d,style:Cf(qe({},a.style),{[m.startEdge]:ua+"%",[m.endEdge]:na+"%"})}))}),Gg=(0,Ii.forwardRef)((a,d)=>{const m=yC(a.__scopeSlider),[L,ha]=(0,Ii.useState)(null);d=Uh(d,ua=>ha(ua));const na=(0,Ii.useMemo)(()=>L?m().findIndex(ua=>ua.ref.current===L):-1,[m,L]);return(0,Ii.createElement)(Af,
nf({},a,{ref:d,index:na}))}),Af=(0,Ii.forwardRef)((a,d)=>{const {__scopeSlider:m,index:L}=a,ha=bg(a,["__scopeSlider","index"]),na=ip("SliderThumb",m),ua=Lr("SliderThumb",m),[Ha,Ua]=(0,Ii.useState)(null);d=Uh(d,Vb=>Ua(Vb));var $a=vi(Ha);const jb=na.values[L],mb=void 0===jb?0:Vi(jb,na.min,na.max),Kb=hl(L,na.values.length);$a=($a=null===$a||void 0===$a?void 0:$a[ua.size])?Tl($a,mb,ua.direction):0;(0,Ii.useEffect)(()=>{if(Ha)return na.thumbs.add(Ha),()=>{na.thumbs.delete(Ha)}},[Ha,na.thumbs]);return(0,Ii.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[ua.startEdge]:`calc(${mb}% + ${$a}px)`}},(0,Ii.createElement)(Ut.ItemSlot,{scope:a.__scopeSlider},(0,Ii.createElement)(Vk.span,nf({role:"slider","aria-label":a["aria-label"]||Kb,"aria-valuemin":na.min,"aria-valuenow":jb,"aria-valuemax":na.max,"aria-orientation":na.orientation,"data-orientation":na.orientation,"data-disabled":na.disabled?"":void 0,tabIndex:na.disabled?void 0:0},ha,{ref:d,style:void 0===jb?{display:"none"}:
a.style,onFocus:xg(a.onFocus,()=>{na.valueIndexToChangeRef.current=L})}))))}),ng=a=>{const {value:d}=a;a=bg(a,["value"]);const m=(0,Ii.useRef)(null),L=Kn(d);(0,Ii.useEffect)(()=>{const ha=m.current,na=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(L!==d&&na){const ua=new Event("input",{bubbles:!0});na.call(ha,d);ha.dispatchEvent(ua)}},[L,d]);return(0,Ii.createElement)("input",nf({style:{display:"none"}},a,{ref:m,defaultValue:d}))},Ho=Oq,xl=DC,bv=tf,vk=Gg,Io=Jf(ba(22)),
bf=ba(613),tg=If(a=>{var {side:d,align:m,alignOffset:L,label:ha,arrow:na,children:ua,border:Ha}=a;a=bg(a,"side align alignOffset label arrow children border".split(" "));const Ua=Io.useRef(null),[$a,jb]=Io.useState(!1),{viewport:{bounds:mb,camera:{point:Kb,zoom:Vb}}}=Ie(),[Ob,kc]=Io.useState(0);Io.useEffect(()=>{if(Ua.current&&$a){var xc=Ua.current.getBoundingClientRect();Qf.boundsContain(mb,{minX:xc.x,minY:xc.y,maxX:xc.right,maxY:xc.bottom,width:xc.width,height:xc.height})||kc($b=>$b+1)}},[Kb[0],
Kb[1],Vb,$a]);return(0,bf.jsxs)(xC,{onOpenChange:xc=>jb(xc),children:[(0,bf.jsx)(sw,Cf(qe({},a),{"data-border":Ha,className:"tl-button tl-popover-trigger-button",children:ha})),(0,bf.jsxs)(Ay,{ref:Ua,className:"tl-popover-content",align:m,alignOffset:L,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[ua,na&&(0,bf.jsx)(Cy,{className:"tl-popover-arrow"})]},"popover-content-"+Ob)]})}),Mn=Jf(ba(22)),De=ba(613),Ss=Jf(ba(22)),Vf=ba(22),tw=ba(31),co=Jf(ba(22)),mk=
ba(22),lq=ba(22),Iy=ba(31),Uj="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const m=(0,lq.forwardRef)((L,ha)=>{var {asChild:na}=L;L=bg(L,["asChild"]);na=na?iq:d;(0,lq.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,lq.createElement)(na,nf({},L,{ref:ha}))});m.displayName=`Primitive.${d}`;return Cf(qe({},a),{[d]:m})},{}),Pq,Mr=(0,mk.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cp=(0,mk.forwardRef)((a,
d)=>{var m;const {disableOutsidePointerEvents:L=!1,onEscapeKeyDown:ha,onPointerDownOutside:na,onFocusOutside:ua,onInteractOutside:Ha,onDismiss:Ua}=a,$a=bg(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),jb=(0,mk.useContext)(Mr),[mb,Kb]=(0,mk.useState)(null),Vb=null!==(m=null===mb||void 0===mb?void 0:mb.ownerDocument)&&void 0!==m?m:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Ob]=(0,mk.useState)({});
d=Uh(d,lc=>Kb(lc));m=Array.from(jb.layers);var [kc]=[...jb.layersWithOutsidePointerEventsDisabled].slice(-1);kc=m.indexOf(kc);const xc=mb?m.indexOf(mb):-1;m=0<jb.layersWithOutsidePointerEventsDisabled.size;const $b=xc>=kc;kc=mo(lc=>{const Rc=lc.target,Uc=[...jb.branches].some(Dd=>Dd.contains(Rc));$b&&!Uc&&(null===na||void 0===na||na(lc),null===Ha||void 0===Ha||Ha(lc),lc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Vb);const pc=Ol(lc=>{const Rc=lc.target;[...jb.branches].some(Uc=>Uc.contains(Rc))||
(null===ua||void 0===ua||ua(lc),null===Ha||void 0===Ha||Ha(lc),lc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Vb);Uk(lc=>{xc===jb.layers.size-1&&(null===ha||void 0===ha||ha(lc),!lc.defaultPrevented&&Ua&&(lc.preventDefault(),Ua()))},Vb);(0,mk.useEffect)(()=>{if(mb)return L&&(0===jb.layersWithOutsidePointerEventsDisabled.size&&(Pq=Vb.body.style.pointerEvents,Vb.body.style.pointerEvents="none"),jb.layersWithOutsidePointerEventsDisabled.add(mb)),jb.layers.add(mb),bm(),()=>{L&&1===jb.layersWithOutsidePointerEventsDisabled.size&&
(Vb.body.style.pointerEvents=Pq)}},[mb,Vb,L,jb]);(0,mk.useEffect)(()=>()=>{mb&&(jb.layers.delete(mb),jb.layersWithOutsidePointerEventsDisabled.delete(mb),bm())},[mb,jb]);(0,mk.useEffect)(()=>{const lc=()=>Ob({});document.addEventListener("dismissableLayer.update",lc);return()=>document.removeEventListener("dismissableLayer.update",lc)},[]);return(0,mk.createElement)(Uj.div,nf({},$a,{ref:d,style:qe({pointerEvents:m?$b?"auto":"none":void 0},a.style),onFocusCapture:xg(a.onFocusCapture,pc.onFocusCapture),
onBlurCapture:xg(a.onBlurCapture,pc.onBlurCapture),onPointerDownCapture:xg(a.onPointerDownCapture,kc.onPointerDownCapture)}))}),ah=ba(22),xn={bubbles:!1,cancelable:!0},Qq=(0,ah.forwardRef)((a,d)=>{const {loop:m=!1,trapped:L=!1,onMountAutoFocus:ha,onUnmountAutoFocus:na}=a;a=bg(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [ua,Ha]=(0,ah.useState)(null),Ua=gj(ha),$a=gj(na),jb=(0,ah.useRef)(null);d=Uh(d,Vb=>Ha(Vb));const mb=(0,ah.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,ah.useEffect)(()=>{if(L){let Vb=function(kc){!mb.paused&&ua&&(kc=kc.target,ua.contains(kc)?jb.current=kc:Pl(jb.current,{select:!0}))},Ob=function(kc){!mb.paused&&ua&&(ua.contains(kc.relatedTarget)||Pl(jb.current,{select:!0}))};document.addEventListener("focusin",Vb);document.addEventListener("focusout",Ob);return()=>{document.removeEventListener("focusin",Vb);document.removeEventListener("focusout",Ob)}}},[L,ua,mb.paused]);(0,ah.useEffect)(()=>{if(ua){Jy.add(mb);const Vb=document.activeElement;
if(!ua.contains(Vb)){const Ob=new CustomEvent("focusScope.autoFocusOnMount",xn);ua.addEventListener("focusScope.autoFocusOnMount",Ua);ua.dispatchEvent(Ob);Ob.defaultPrevented||(Bn(no(Xn(ua)),{select:!0}),document.activeElement===Vb&&Pl(ua))}return()=>{ua.removeEventListener("focusScope.autoFocusOnMount",Ua);setTimeout(()=>{const Ob=new CustomEvent("focusScope.autoFocusOnUnmount",xn);ua.addEventListener("focusScope.autoFocusOnUnmount",$a);ua.dispatchEvent(Ob);Ob.defaultPrevented||Pl(null!==Vb&&void 0!==
Vb?Vb:document.body,{select:!0});ua.removeEventListener("focusScope.autoFocusOnUnmount",$a);Jy.remove(mb)},0)}}},[ua,Ua,$a,mb]);const Kb=(0,ah.useCallback)(Vb=>{if((m||L)&&!mb.paused){var Ob=document.activeElement;if("Tab"===Vb.key&&!Vb.altKey&&!Vb.ctrlKey&&!Vb.metaKey&&Ob){const xc=Vb.currentTarget;var kc=xc;const $b=Xn(kc),pc=nn($b,kc);kc=nn($b.reverse(),kc);const [lc,Rc]=[pc,kc];lc&&Rc?Vb.shiftKey||Ob!==Rc?Vb.shiftKey&&Ob===lc&&(Vb.preventDefault(),m&&Pl(Rc,{select:!0})):(Vb.preventDefault(),m&&
Pl(lc,{select:!0})):Ob===xc&&Vb.preventDefault()}}},[m,L,mb.paused]);return(0,ah.createElement)(Uj.div,nf({tabIndex:-1},a,{ref:d,onKeyDown:Kb}))}),Jy=function(){let a=[];return{add(d){const m=a[0];d===m||null!==m&&void 0!==m&&m.pause();a=ln(a,d);a.unshift(d)},remove(d){var m;a=ln(a,d);null===(m=a[0])||void 0===m||m.resume()}}}(),yl=ba(22),[dh,Ky]=jj("Popper"),[Rq,qh]=dh("Popper"),cv=(0,yl.forwardRef)((a,d)=>{const {__scopePopper:m,virtualRef:L}=a;a=bg(a,["__scopePopper","virtualRef"]);const ha=qh("PopperAnchor",
m),na=(0,yl.useRef)(null);d=Uh(d,na);(0,yl.useEffect)(()=>{ha.onAnchorChange((null===L||void 0===L?void 0:L.current)||na.current)});return L?null:(0,yl.createElement)(Uj.div,nf({},a,{ref:d}))}),[nk]=dh("PopperContent"),[zl,Vt]=dh("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),dv=(0,yl.forwardRef)((a,d)=>{var m,L,ha,na,ua,Ha,Ua,$a;const {__scopePopper:jb,side:mb="bottom",sideOffset:Kb=0,align:Vb="center",alignOffset:Ob=0,arrowPadding:kc=0,collisionBoundary:xc=[],collisionPadding:$b=0,sticky:pc=
"partial",hideWhenDetached:lc=!1,avoidCollisions:Rc=!0,onPlaced:Uc}=a,Dd=bg(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),Td=qh("PopperContent",jb),[lf,re]=(0,yl.useState)(null);d=Uh(d,uq=>re(uq));const [We,Uf]=(0,yl.useState)(null);var hf=vi(We),wf=null!==(m=null===hf||void 0===hf?void 0:hf.width)&&void 0!==m?m:0;m=null!==(L=null===hf||void 0===hf?void 0:hf.height)&&void 0!==L?L:0;L=
mb+("center"!==Vb?"-"+Vb:"");hf="number"===typeof $b?$b:qe({top:0,right:0,bottom:0,left:0},$b);const Sd=Array.isArray(xc)?xc:[xc],qd=0<Sd.length;hf={padding:hf,boundary:Sd.filter(ph),altBoundary:qd};const {reference:Zd,floating:pd,strategy:Md,x:Se,y:Gf,placement:sg,middlewareData:Mf,update:qg}=Eg({strategy:"fixed",placement:L,whileElementsMounted:Ag,middleware:[Ly(),NB({mainAxis:Kb+m,alignmentAxis:Ob}),Rc?OB(qe({mainAxis:!0,crossAxis:!1,limiter:"partial"===pc?PB():void 0},hf)):void 0,We?SB({element:We,
padding:kc}):void 0,Rc?LB(qe({},hf)):void 0,rG(Cf(qe({},hf),{apply:({elements:uq,availableWidth:aI,availableHeight:wu})=>{uq.floating.style.setProperty("--radix-popper-available-width",`${aI}px`);uq.floating.style.setProperty("--radix-popper-available-height",`${wu}px`)}})),Wt({arrowWidth:wf,arrowHeight:m}),lc?MB({strategy:"referenceHidden"}):void 0].filter(oo)});Im(()=>{Zd(Td.anchor)},[Zd,Td.anchor]);const Qh=null!==Se&&null!==Gf,[dg,rh]=po(sg),Eh=gj(Uc);Im(()=>{Qh&&(null===Eh||void 0===Eh||Eh())},
[Qh,Eh]);wf=null===(ha=Mf.arrow)||void 0===ha?void 0:ha.x;ha=null===(na=Mf.arrow)||void 0===na?void 0:na.y;na=0!==(null===(ua=Mf.arrow)||void 0===ua?void 0:ua.centerOffset);const [tj,Mk]=(0,yl.useState)();Im(()=>{lf&&Mk(window.getComputedStyle(lf).zIndex)},[lf]);const {hasParent:Ak,positionUpdateFns:Kp}=Vt("PopperContent",jb),tq=!Ak;(0,yl.useLayoutEffect)(()=>{if(!tq)return Kp.add(qg),()=>{Kp.delete(qg)}},[tq,Kp,qg]);Im(()=>{tq&&Qh&&Array.from(Kp).reverse().forEach(uq=>requestAnimationFrame(uq))},
[tq,Qh,Kp]);ua=Cf(qe({"data-side":dg,"data-align":rh},Dd),{ref:d,style:Cf(qe({},Dd.style),{animation:Qh?void 0:"none",opacity:null!==(Ha=Mf.hide)&&void 0!==Ha&&Ha.referenceHidden?0:void 0})});return(0,yl.createElement)("div",{ref:pd,"data-radix-popper-content-wrapper":"",style:{position:Md,left:0,top:0,transform:Qh?`translate3d(${Math.round(Se)}px, ${Math.round(Gf)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:tj,["--radix-popper-transform-origin"]:[null===(Ua=Mf.transformOrigin)||
void 0===Ua?void 0:Ua.x,null===($a=Mf.transformOrigin)||void 0===$a?void 0:$a.y].join(" ")},dir:a.dir},(0,yl.createElement)(nk,{scope:jb,placedSide:dg,onArrowChange:Uf,arrowX:wf,arrowY:ha,shouldHideArrow:na},tq?(0,yl.createElement)(zl,{scope:jb,hasParent:!0,positionUpdateFns:Kp},(0,yl.createElement)(Uj.div,ua)):(0,yl.createElement)(Uj.div,ua)))}),Ly=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:m}=a,{width:L,height:ha}=d.reference;m.floating.style.setProperty("--radix-popper-anchor-width",
`${L}px`);m.floating.style.setProperty("--radix-popper-anchor-height",`${ha}px`);return{}}}),Wt=a=>({name:"transformOrigin",options:a,fn(d){var m,L,ha,na,ua;const {placement:Ha,rects:Ua,middlewareData:$a}=d,jb=(d=0!==(null===(m=$a.arrow)||void 0===m?void 0:m.centerOffset))?0:a.arrowWidth;m=d?0:a.arrowHeight;const [mb,Kb]=po(Ha),Vb={start:"0%",center:"50%",end:"100%"}[Kb],Ob=(null!==(L=null===(ha=$a.arrow)||void 0===ha?void 0:ha.x)&&void 0!==L?L:0)+jb/2;L=(null!==(na=null===(ua=$a.arrow)||void 0===
ua?void 0:ua.y)&&void 0!==na?na:0)+m/2;ua=na="";"bottom"===mb?(na=d?Vb:`${Ob}px`,ua=`${-m}px`):"top"===mb?(na=d?Vb:`${Ob}px`,ua=`${Ua.floating.height+m}px`):"right"===mb?(na=`${-m}px`,ua=d?Vb:`${L}px`):"left"===mb&&(na=`${Ua.floating.width+m}px`,ua=d?Vb:`${L}px`);return{data:{x:na,y:ua}}}}),$l=a=>{const {__scopePopper:d,children:m}=a,[L,ha]=(0,yl.useState)(null);return(0,yl.createElement)(Rq,{scope:d,anchor:L,onAnchorChange:ha},m)},My=ba(22),qH=Jf(ba(31)),rH=(0,My.forwardRef)((a,d)=>{var m;const {container:L=
null===globalThis||void 0===globalThis?void 0:null===(m=globalThis.document)||void 0===m?void 0:m.body}=a;a=bg(a,["container"]);return L?qH.default.createPortal((0,My.createElement)(Uj.div,nf({},a,{ref:d})),L):null}),EC=ba(22),Nr=(0,EC.forwardRef)((a,d)=>(0,EC.createElement)(Uj.span,nf({},a,{ref:d,style:qe({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),Or=[" ","Enter","ArrowUp","ArrowDown"],
dk=[" ","Enter"],[ev,Xt,sH]=function(a){var d=a+"CollectionProvider";const [m,L]=jj(d),[ha,na]=m(d,{collectionRef:{current:null},itemMap:new Map}),ua=jb=>{const {scope:mb,children:Kb}=jb;jb=co.default.useRef(null);const Vb=co.default.useRef(new Map).current;return co.default.createElement(ha,{scope:mb,itemMap:Vb,collectionRef:jb},Kb)};Object.assign(ua,{displayName:d});const Ha=a+"CollectionSlot";d=co.default.forwardRef((jb,mb)=>{const {scope:Kb,children:Vb}=jb;jb=na(Ha,Kb);mb=Uh(mb,jb.collectionRef);
return co.default.createElement(iq,{ref:mb},Vb)});Object.assign(d,{displayName:Ha});const Ua=a+"CollectionItemSlot",$a=co.default.forwardRef((jb,mb)=>{const {scope:Kb,children:Vb}=jb,Ob=bg(jb,["scope","children"]),kc=co.default.useRef(null);jb=Uh(mb,kc);const xc=na(Ua,Kb);co.default.useEffect(()=>{xc.itemMap.set(kc,qe({ref:kc},Ob));return()=>void xc.itemMap.delete(kc)});return co.default.createElement(iq,{["data-radix-collection-item"]:"",ref:jb},Vb)});Object.assign($a,{displayName:Ua});return[{Provider:ua,
Slot:d,ItemSlot:$a},function(jb){const mb=na(a+"CollectionConsumer",jb);return co.default.useCallback(()=>{const Kb=mb.collectionRef.current;if(!Kb)return[];const Vb=Array.from(Kb.querySelectorAll("[data-radix-collection-item]"));return Array.from(mb.itemMap.values()).sort((Ob,kc)=>Vb.indexOf(Ob.ref.current)-Vb.indexOf(kc.ref.current))},[mb.collectionRef,mb.itemMap])},L]}("Select"),[Jo]=jj("Select",[sH,Ky]),Ny=Ky(),[uw,Ts]=Jo("Select"),[vw,Oy]=Jo("Select"),Py=(0,Vf.forwardRef)((a,d)=>{const {__scopeSelect:m,
disabled:L=!1}=a;a=bg(a,["__scopeSelect","disabled"]);const ha=Ny(m),na=Ts("SelectTrigger",m),ua=na.disabled||L;d=Uh(d,na.onTriggerChange);const Ha=Xt(m),[Ua,$a,jb]=Ql(mb=>{const Kb=Ha().filter(Ob=>!Ob.disabled),Vb=Kb.find(Ob=>Ob.value===na.value);mb=Fl(Kb,mb,Vb);if(void 0!==mb)na.onValueChange(mb.value)});return(0,Vf.createElement)(cv,nf({asChild:!0},ha),(0,Vf.createElement)(Uj.button,nf({type:"button",role:"combobox","aria-controls":na.contentId,"aria-expanded":na.open,"aria-required":na.required,
"aria-autocomplete":"none",dir:na.dir,"data-state":na.open?"open":"closed",disabled:ua,"data-disabled":ua?"":void 0,"data-placeholder":void 0===na.value?"":void 0},a,{ref:d,onClick:xg(a.onClick,mb=>{mb.currentTarget.focus()}),onPointerDown:xg(a.onPointerDown,mb=>{const Kb=mb.target;Kb.hasPointerCapture(mb.pointerId)&&Kb.releasePointerCapture(mb.pointerId);0===mb.button&&!1===mb.ctrlKey&&(ua||(na.onOpenChange(!0),jb()),na.triggerPointerDownPosRef.current={x:Math.round(mb.pageX),y:Math.round(mb.pageY)},
mb.preventDefault())}),onKeyDown:xg(a.onKeyDown,mb=>{const Kb=""!==Ua.current;mb.ctrlKey||mb.altKey||mb.metaKey||1!==mb.key.length||$a(mb.key);Kb&&" "===mb.key||!Or.includes(mb.key)||(ua||(na.onOpenChange(!0),jb()),mb.preventDefault())})})))}),Qy=(0,Vf.forwardRef)((a,d)=>{const {__scopeSelect:m,children:L,placeholder:ha}=a;a=bg(a,["__scopeSelect","className","style","children","placeholder"]);const na=Ts("SelectValue",m),{onValueNodeHasChildrenChange:ua}=na,Ha=void 0!==L;d=Uh(d,na.onValueNodeChange);
Im(()=>{ua(Ha)},[ua,Ha]);return(0,Vf.createElement)(Uj.span,nf({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===na.value&&void 0!==ha?ha:L)}),FC=(0,Vf.forwardRef)((a,d)=>{const {children:m}=a;a=bg(a,["__scopeSelect","children"]);return(0,Vf.createElement)(Uj.span,nf({"aria-hidden":!0},a,{ref:d}),m||"")}),GC=(0,Vf.forwardRef)((a,d)=>{const m=Ts("SelectContent",a.__scopeSelect),[L,ha]=(0,Vf.useState)();Im(()=>{ha(new DocumentFragment)},[]);return m.open?(0,Vf.createElement)(Us,nf({},a,{ref:d})):
L?(0,tw.createPortal)((0,Vf.createElement)(Ry,{scope:a.__scopeSelect},(0,Vf.createElement)(ev.Slot,{scope:a.__scopeSelect},(0,Vf.createElement)("div",null,a.children))),L):null}),[Ry,Ko]=Jo("SelectContent"),Us=(0,Vf.forwardRef)((a,d)=>{const {__scopeSelect:m,position:L="item-aligned",onCloseAutoFocus:ha,onEscapeKeyDown:na,onPointerDownOutside:ua,side:Ha,sideOffset:Ua,align:$a,alignOffset:jb,arrowPadding:mb,collisionBoundary:Kb,collisionPadding:Vb,sticky:Ob,hideWhenDetached:kc,avoidCollisions:xc}=
a;a=bg(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const $b=Ts("SelectContent",m),[pc,lc]=(0,Vf.useState)(null),[Rc,Uc]=(0,Vf.useState)(null);d=Uh(d,dg=>lc(dg));const [Dd,Td]=(0,Vf.useState)(null),[lf,re]=(0,Vf.useState)(null),We=Xt(m),[Uf,hf]=(0,Vf.useState)(!1),wf=(0,Vf.useRef)(!1);(0,Vf.useEffect)(()=>{if(pc)return my(pc)},[pc]);
Pi();const Sd=(0,Vf.useCallback)(dg=>{const [rh,...Eh]=We().map(Ak=>Ak.ref.current),[tj]=Eh.slice(-1),Mk=document.activeElement;for(const Ak of dg){if(Ak===Mk)break;null===Ak||void 0===Ak||Ak.scrollIntoView({block:"nearest"});Ak===rh&&Rc&&(Rc.scrollTop=0);Ak===tj&&Rc&&(Rc.scrollTop=Rc.scrollHeight);null===Ak||void 0===Ak||Ak.focus();if(document.activeElement!==Mk)break}},[We,Rc]),qd=(0,Vf.useCallback)(()=>Sd([Dd,pc]),[Sd,Dd,pc]);(0,Vf.useEffect)(()=>{Uf&&qd()},[Uf,qd]);const {onOpenChange:Zd,triggerPointerDownPosRef:pd}=
$b;(0,Vf.useEffect)(()=>{if(pc){var dg=0,rh=0;const Eh=Mk=>{var Ak,Kp,tq,uq;dg=Math.abs(Math.round(Mk.pageX)-(null!==(Ak=null===(Kp=pd.current)||void 0===Kp?void 0:Kp.x)&&void 0!==Ak?Ak:0));rh=Math.abs(Math.round(Mk.pageY)-(null!==(tq=null===(uq=pd.current)||void 0===uq?void 0:uq.y)&&void 0!==tq?tq:0))},tj=Mk=>{10>=dg&&10>=rh?Mk.preventDefault():pc.contains(Mk.target)||Zd(!1);document.removeEventListener("pointermove",Eh);pd.current=null};null!==pd.current&&(document.addEventListener("pointermove",
Eh),document.addEventListener("pointerup",tj,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Eh);document.removeEventListener("pointerup",tj,{capture:!0})}}},[pc,Zd,pd]);(0,Vf.useEffect)(()=>{const dg=()=>Zd(!1);window.addEventListener("blur",dg);window.addEventListener("resize",dg);return()=>{window.removeEventListener("blur",dg);window.removeEventListener("resize",dg)}},[Zd]);const [Md,Se]=Ql(dg=>{const rh=We().filter(Mk=>!Mk.disabled),Eh=rh.find(Mk=>Mk.ref.current===
document.activeElement),tj=Fl(rh,dg,Eh);tj&&setTimeout(()=>tj.ref.current.focus())}),Gf=(0,Vf.useCallback)((dg,rh,Eh)=>{Eh=!wf.current&&!Eh;if(void 0!==$b.value&&$b.value===rh||Eh)Td(dg),Eh&&(wf.current=!0)},[$b.value]),sg=(0,Vf.useCallback)(()=>null===pc||void 0===pc?void 0:pc.focus(),[pc]),Mf=(0,Vf.useCallback)((dg,rh,Eh)=>{Eh=!wf.current&&!Eh;(void 0!==$b.value&&$b.value===rh||Eh)&&re(dg)},[$b.value]),qg="popper"===L?Ty:Sy,Qh=qg===Ty?{side:Ha,sideOffset:Ua,align:$a,alignOffset:jb,arrowPadding:mb,
collisionBoundary:Kb,collisionPadding:Vb,sticky:Ob,hideWhenDetached:kc,avoidCollisions:xc}:{};return(0,Vf.createElement)(Ry,{scope:m,content:pc,viewport:Rc,onViewportChange:Uc,itemRefCallback:Gf,selectedItem:Dd,onItemLeave:sg,itemTextRefCallback:Mf,focusSelectedItem:qd,selectedItemText:lf,position:L,isPositioned:Uf,searchRef:Md},(0,Vf.createElement)(bo,{as:iq,allowPinchZoom:!0},(0,Vf.createElement)(Qq,{asChild:!0,trapped:$b.open,onMountAutoFocus:dg=>{dg.preventDefault()},onUnmountAutoFocus:xg(ha,
dg=>{var rh;null===(rh=$b.trigger)||void 0===rh||rh.focus({preventScroll:!0});dg.preventDefault()})},(0,Vf.createElement)(Cp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:na,onPointerDownOutside:ua,onFocusOutside:dg=>dg.preventDefault(),onDismiss:()=>$b.onOpenChange(!1)},(0,Vf.createElement)(qg,nf({role:"listbox",id:$b.contentId,"data-state":$b.open?"open":"closed",dir:$b.dir,onContextMenu:dg=>dg.preventDefault()},a,Qh,{onPlaced:()=>hf(!0),ref:d,style:qe({display:"flex",flexDirection:"column",
outline:"none"},a.style),onKeyDown:xg(a.onKeyDown,dg=>{var rh=dg.ctrlKey||dg.altKey||dg.metaKey;"Tab"===dg.key&&dg.preventDefault();rh||1!==dg.key.length||Se(dg.key);if(["ArrowUp","ArrowDown","Home","End"].includes(dg.key)){let Eh=We().filter(tj=>!tj.disabled).map(tj=>tj.ref.current);["ArrowUp","End"].includes(dg.key)&&(Eh=Eh.slice().reverse());["ArrowUp","ArrowDown"].includes(dg.key)&&(rh=Eh.indexOf(dg.target),Eh=Eh.slice(rh+1));setTimeout(()=>Sd(Eh));dg.preventDefault()}})}))))))}),Sy=(0,Vf.forwardRef)((a,
d)=>{const {__scopeSelect:m,onPlaced:L}=a;a=bg(a,["__scopeSelect","onPlaced"]);const ha=Ts("SelectContent",m);var na=Ko("SelectContent",m);const [ua,Ha]=(0,Vf.useState)(null),[Ua,$a]=(0,Vf.useState)(null);d=Uh(d,Rc=>$a(Rc));const jb=Xt(m),mb=(0,Vf.useRef)(!1),Kb=(0,Vf.useRef)(!0),{viewport:Vb,selectedItem:Ob,selectedItemText:kc,focusSelectedItem:xc}=na,$b=(0,Vf.useCallback)(()=>{if(ha.trigger&&ha.valueNode&&ua&&Ua&&Vb&&Ob&&kc){var Rc=ha.trigger.getBoundingClientRect(),Uc=Ua.getBoundingClientRect(),
Dd=ha.valueNode.getBoundingClientRect(),Td=kc.getBoundingClientRect();"rtl"!==ha.dir?(Td=Dd.left-(Td.left-Uc.left),Dd=Rc.width+(Rc.left-Td),Uc=yo(Td,[10,window.innerWidth-10-Math.max(Dd,Uc.width)]),ua.style.minWidth=Dd+"px",ua.style.left=Uc+"px"):(Td=window.innerWidth-Dd.right-(Uc.right-Td.right),Dd=Rc.width+(window.innerWidth-Rc.right-Td),Uc=yo(Td,[10,window.innerWidth-10-Math.max(Dd,Uc.width)]),ua.style.minWidth=Dd+"px",ua.style.right=Uc+"px");const wf=jb();Uc=window.innerHeight-20;var lf=Vb.scrollHeight,
re=window.getComputedStyle(Ua);Dd=parseInt(re.borderTopWidth,10);var We=parseInt(re.paddingTop,10);Td=parseInt(re.borderBottomWidth,10);re=parseInt(re.paddingBottom,10);var Uf=Dd+We+lf+re+Td;lf=Math.min(5*Ob.offsetHeight,Uf);var hf=window.getComputedStyle(Vb);re=parseInt(hf.paddingTop,10);hf=parseInt(hf.paddingBottom,10);const Sd=Rc.top+Rc.height/2-10,qd=Uc-Sd;Rc=Ob.offsetHeight/2;We=Dd+We+(Ob.offsetTop+Rc);Uf-=We;We<=Sd?(Dd=Ob===wf[wf.length-1].ref.current,ua.style.bottom="0px",ua.style.height=We+
Math.max(qd,Rc+(Dd?hf:0)+(Ua.clientHeight-Vb.offsetTop-Vb.offsetHeight)+Td)+"px"):(Td=Ob===wf[0].ref.current,ua.style.top="0px",ua.style.height=Math.max(Sd,Dd+Vb.offsetTop+(Td?re:0)+Rc)+Uf+"px",Vb.scrollTop=We-Sd+Vb.offsetTop);ua.style.margin="10px 0";ua.style.minHeight=lf+"px";ua.style.maxHeight=Uc+"px";null===L||void 0===L||L();requestAnimationFrame(()=>mb.current=!0)}},[jb,ha.trigger,ha.valueNode,ua,Ua,Vb,Ob,kc,ha.dir,L]);Im(()=>$b(),[$b]);const [pc,lc]=(0,Vf.useState)();Im(()=>{Ua&&lc(window.getComputedStyle(Ua).zIndex)},
[Ua]);na=(0,Vf.useCallback)(Rc=>{Rc&&!0===Kb.current&&($b(),null===xc||void 0===xc||xc(),Kb.current=!1)},[$b,xc]);return(0,Vf.createElement)(HC,{scope:m,contentWrapper:ua,shouldExpandOnScrollRef:mb,onScrollButtonChange:na},(0,Vf.createElement)("div",{ref:Ha,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:pc}},(0,Vf.createElement)(Uj.div,nf({},a,{ref:d,style:qe({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),Ty=(0,Vf.forwardRef)((a,d)=>{const {__scopeSelect:m,align:L=
"start",collisionPadding:ha=10}=a;a=bg(a,["__scopeSelect","align","collisionPadding"]);const na=Ny(m);return(0,Vf.createElement)(dv,nf({},na,a,{ref:d,align:L,collisionPadding:ha,style:Cf(qe({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)",
"--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[HC,Pr]=Jo("SelectContent",{}),Yt=(0,Vf.forwardRef)((a,d)=>{const {__scopeSelect:m}=a;a=bg(a,["__scopeSelect"]);const L=Ko("SelectViewport",m),ha=Pr("SelectViewport",m);d=Uh(d,L.onViewportChange);const na=(0,Vf.useRef)(0);return(0,Vf.createElement)(Vf.Fragment,null,(0,Vf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,Vf.createElement)(ev.Slot,{scope:m},(0,Vf.createElement)(Uj.div,nf({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:qe({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:xg(a.onScroll,ua=>{ua=ua.currentTarget;const {contentWrapper:Ha,shouldExpandOnScrollRef:Ua}=ha;if(null!==Ua&&void 0!==Ua&&Ua.current&&Ha){var $a=Math.abs(na.current-ua.scrollTop);if(0<$a){var jb=window.innerHeight-20,mb=parseFloat(Ha.style.minHeight);const Kb=parseFloat(Ha.style.height);mb=Math.max(mb,
Kb);mb<jb&&($a=mb+$a,jb=Math.min(jb,$a),$a-=jb,Ha.style.height=jb+"px","0px"===Ha.style.bottom&&(ua.scrollTop=0<$a?$a:0,Ha.style.justifyContent="flex-end"))}}na.current=ua.scrollTop})}))))});Jo("SelectGroup");var [fv,gv]=Jo("SelectItem"),hv=(0,Vf.forwardRef)((a,d)=>{const {__scopeSelect:m,value:L,disabled:ha=!1,textValue:na}=a;a=bg(a,["__scopeSelect","value","disabled","textValue"]);const ua=Ts("SelectItem",m),Ha=Ko("SelectItem",m),Ua=ua.value===L,[$a,jb]=(0,Vf.useState)(null!==na&&void 0!==na?na:
""),[mb,Kb]=(0,Vf.useState)(!1);d=Uh(d,kc=>{var xc;return null===(xc=Ha.itemRefCallback)||void 0===xc?void 0:xc.call(Ha,kc,L,ha)});const Vb=xi(),Ob=()=>{ha||(ua.onValueChange(L),ua.onOpenChange(!1))};return(0,Vf.createElement)(fv,{scope:m,value:L,disabled:ha,textId:Vb,isSelected:Ua,onItemTextChange:(0,Vf.useCallback)(kc=>{jb(xc=>{var $b;return xc||(null!==($b=null===kc||void 0===kc?void 0:kc.textContent)&&void 0!==$b?$b:"").trim()})},[])},(0,Vf.createElement)(ev.ItemSlot,{scope:m,value:L,disabled:ha,
textValue:$a},(0,Vf.createElement)(Uj.div,nf({role:"option","aria-labelledby":Vb,"data-highlighted":mb?"":void 0,"aria-selected":Ua&&mb,"data-state":Ua?"checked":"unchecked","aria-disabled":ha||void 0,"data-disabled":ha?"":void 0,tabIndex:ha?void 0:-1},a,{ref:d,onFocus:xg(a.onFocus,()=>Kb(!0)),onBlur:xg(a.onBlur,()=>Kb(!1)),onPointerUp:xg(a.onPointerUp,Ob),onPointerMove:xg(a.onPointerMove,kc=>{if(ha){var xc;null===(xc=Ha.onItemLeave)||void 0===xc||xc.call(Ha)}else kc.currentTarget.focus({preventScroll:!0})}),
onPointerLeave:xg(a.onPointerLeave,kc=>{if(kc.currentTarget===document.activeElement){var xc;null===(xc=Ha.onItemLeave)||void 0===xc||xc.call(Ha)}}),onKeyDown:xg(a.onKeyDown,kc=>{var xc;if(""===(null===(xc=Ha.searchRef)||void 0===xc?void 0:xc.current)||" "!==kc.key)dk.includes(kc.key)&&Ob()," "===kc.key&&kc.preventDefault()})}))))}),Qr=(0,Vf.forwardRef)((a,d)=>{var {__scopeSelect:m}=a;a=bg(a,["__scopeSelect","className","style"]);const L=Ts("SelectItemText",m),ha=Ko("SelectItemText",m),na=gv("SelectItemText",
m);m=Oy("SelectItemText",m);const [ua,Ha]=(0,Vf.useState)(null);d=Uh(d,Kb=>Ha(Kb),na.onItemTextChange,Kb=>{var Vb;return null===(Vb=ha.itemTextRefCallback)||void 0===Vb?void 0:Vb.call(ha,Kb,na.value,na.disabled)});const Ua=null===ua||void 0===ua?void 0:ua.textContent,$a=(0,Vf.useMemo)(()=>(0,Vf.createElement)("option",{key:na.value,value:na.value,disabled:na.disabled},Ua),[na.disabled,na.value,Ua]),{onNativeOptionAdd:jb,onNativeOptionRemove:mb}=m;Im(()=>{jb($a);return()=>mb($a)},[jb,mb,$a]);return(0,Vf.createElement)(Vf.Fragment,
null,(0,Vf.createElement)(Uj.span,nf({id:na.textId},a,{ref:d})),na.isSelected&&L.valueNode&&!L.valueNodeHasChildren?(0,tw.createPortal)(a.children,L.valueNode):null)}),jp=(0,Vf.forwardRef)((a,d)=>{const m=Ko("SelectScrollUpButton",a.__scopeSelect),L=Pr("SelectScrollUpButton",a.__scopeSelect),[ha,na]=(0,Vf.useState)(!1);d=Uh(d,L.onScrollButtonChange);Im(()=>{if(m.viewport&&m.isPositioned){let ua=function(){na(0<Ha.scrollTop)};const Ha=m.viewport;ua();Ha.addEventListener("scroll",ua);return()=>Ha.removeEventListener("scroll",
ua)}},[m.viewport,m.isPositioned]);return ha?(0,Vf.createElement)(eo,nf({},a,{ref:d,onAutoScroll:()=>{const {viewport:ua,selectedItem:Ha}=m;ua&&Ha&&(ua.scrollTop-=Ha.offsetHeight)}})):null}),IC=(0,Vf.forwardRef)((a,d)=>{const m=Ko("SelectScrollDownButton",a.__scopeSelect),L=Pr("SelectScrollDownButton",a.__scopeSelect),[ha,na]=(0,Vf.useState)(!1);d=Uh(d,L.onScrollButtonChange);Im(()=>{if(m.viewport&&m.isPositioned){let ua=function(){na(Math.ceil(Ha.scrollTop)<Ha.scrollHeight-Ha.clientHeight)};const Ha=
m.viewport;ua();Ha.addEventListener("scroll",ua);return()=>Ha.removeEventListener("scroll",ua)}},[m.viewport,m.isPositioned]);return ha?(0,Vf.createElement)(eo,nf({},a,{ref:d,onAutoScroll:()=>{const {viewport:ua,selectedItem:Ha}=m;ua&&Ha&&(ua.scrollTop+=Ha.offsetHeight)}})):null}),eo=(0,Vf.forwardRef)((a,d)=>{const {__scopeSelect:m,onAutoScroll:L}=a;a=bg(a,["__scopeSelect","onAutoScroll"]);const ha=Ko("SelectScrollButton",m),na=(0,Vf.useRef)(null),ua=Xt(m),Ha=(0,Vf.useCallback)(()=>{null!==na.current&&
(window.clearInterval(na.current),na.current=null)},[]);(0,Vf.useEffect)(()=>()=>Ha(),[Ha]);Im(()=>{var Ua;const $a=ua().find(jb=>jb.ref.current===document.activeElement);null===$a||void 0===$a||null===(Ua=$a.ref.current)||void 0===Ua||Ua.scrollIntoView({block:"nearest"})},[ua]);return(0,Vf.createElement)(Uj.div,nf({"aria-hidden":!0},a,{ref:d,style:qe({flexShrink:0},a.style),onPointerMove:xg(a.onPointerMove,()=>{var Ua;null===(Ua=ha.onItemLeave)||void 0===Ua||Ua.call(ha);null===na.current&&(na.current=
window.setInterval(L,50))}),onPointerLeave:xg(a.onPointerLeave,()=>{Ha()})}))}),Vs=(0,Vf.forwardRef)((a,d)=>{const {value:m}=a;a=bg(a,["value"]);const L=(0,Vf.useRef)(null);d=Uh(d,L);const ha=Kn(m);(0,Vf.useEffect)(()=>{const na=L.current,ua=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(ha!==m&&ua){const Ha=new Event("change",{bubbles:!0});ua.call(na,m);na.dispatchEvent(Ha)}},[ha,m]);return(0,Vf.createElement)(Nr,{asChild:!0},(0,Vf.createElement)("select",nf({},
a,{ref:d,defaultValue:m})))});Vs.displayName="BubbleSelect";var ww=a=>{const {__scopeSelect:d,children:m,open:L,defaultOpen:ha,onOpenChange:na,value:ua,defaultValue:Ha,onValueChange:Ua,dir:$a,name:jb,autoComplete:mb,disabled:Kb,required:Vb}=a,Ob=Ny(d),[kc,xc]=(0,Vf.useState)(null),[$b,pc]=(0,Vf.useState)(null),[lc,Rc]=(0,Vf.useState)(!1),Uc=Wn($a),[Dd=!1,Td]=mi({prop:L,defaultProp:ha,onChange:na}),[lf,re]=mi({prop:ua,defaultProp:Ha,onChange:Ua}),We=(0,Vf.useRef)(null),Uf=kc?!!kc.closest("form"):!0,
[hf,wf]=(0,Vf.useState)(new Set),Sd=Array.from(hf).map(qd=>qd.props.value).join(";");return(0,Vf.createElement)($l,Ob,(0,Vf.createElement)(uw,{required:Vb,scope:d,trigger:kc,onTriggerChange:xc,valueNode:$b,onValueNodeChange:pc,valueNodeHasChildren:lc,onValueNodeHasChildrenChange:Rc,contentId:xi(),value:lf,onValueChange:re,open:Dd,onOpenChange:Td,dir:Uc,triggerPointerDownPosRef:We,disabled:Kb},(0,Vf.createElement)(ev.Provider,{scope:d},(0,Vf.createElement)(vw,{scope:a.__scopeSelect,onNativeOptionAdd:(0,Vf.useCallback)(qd=>
{wf(Zd=>(new Set(Zd)).add(qd))},[]),onNativeOptionRemove:(0,Vf.useCallback)(qd=>{wf(Zd=>{Zd=new Set(Zd);Zd.delete(qd);return Zd})},[])},m)),Uf?(0,Vf.createElement)(Vs,{key:Sd,"aria-hidden":!0,required:Vb,tabIndex:-1,name:jb,autoComplete:mb,value:lf,onChange:qd=>re(qd.target.value),disabled:Kb},void 0===lf?(0,Vf.createElement)("option",{value:""}):null,Array.from(hf)):null))},Rr=Py,JC=Qy,LC=FC,MC=a=>(0,Vf.createElement)(rH,nf({asChild:!0},a)),Mm=GC,Uy=Yt,KC=hv,fo=Qr,Kd=jp,NC=IC,uh=ba(613),zi=Jf(ba(22)),
OC=ba(613),om=ba(613),xw=If(function(){const a=Ie(),{handlers:{t:d}}=fn.useContext(rj),m=fn.useCallback(ua=>{a.api.setColor(ua)},[]),L=fn.useCallback(ua=>{(ua=ua.currentTarget.dataset.tool)&&a.selectTool(ua)},[]),[ha,na]=fn.useState(()=>{var ua;return null!=(ua=Object.values(nr).find(Ha=>Ha===a.selectedTool.id))?ua:Object.values(nr)[0]});fn.useEffect(()=>{na(ua=>{var Ha;return null!=(Ha=Object.values(nr).find(Ua=>Ua===a.selectedTool.id))?Ha:ua})},[a.selectedTool.id]);return(0,om.jsx)("div",{className:"tl-primary-tools",
"data-html2canvas-ignore":"true",children:(0,om.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,om.jsx)(nm,{handleClick:()=>a.selectTool("select"),tooltip:d("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,om.jsx)(nm,{handleClick:()=>a.selectTool("move"),tooltip:d("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,om.jsx)(Nq,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,om.jsx)(nm,{handleClick:()=>a.selectTool("logseq-portal"),
tooltip:d("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,om.jsx)(nm,{handleClick:()=>a.selectTool("pencil"),tooltip:d("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,om.jsx)(nm,{handleClick:()=>a.selectTool("highlighter"),tooltip:d("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,om.jsx)(nm,{handleClick:()=>a.selectTool("erase"),tooltip:d("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,om.jsx)(nm,{handleClick:()=>a.selectTool("line"),tooltip:d("whiteboard/connector"),
id:"line",icon:"connector"}),(0,om.jsx)(nm,{handleClick:()=>a.selectTool("text"),tooltip:d("whiteboard/text"),id:"text",icon:"text"}),(0,om.jsx)(Dy,{activeGeometry:ha,setGeometry:L}),(0,om.jsx)(Nq,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,om.jsx)(an,{popoverSide:"left",color:a.settings.color,setColor:m}),(0,om.jsx)(Vo,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),yw=ba(613),tH=If(function(){const a=Ie();return(0,yw.jsxs)("div",
{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,yw.jsx)("div",{style:{flex:1}}),(0,yw.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),Sq=ba(613),PC=If(function(){const a=Ie();return(0,Sq.jsxs)(Sq.Fragment,{children:[Mb()&&(0,Sq.jsx)(tH,{}),Mb()&&(0,Sq.jsx)(uC,{}),!a.readOnly&&(0,Sq.jsx)(xw,{}),(0,Sq.jsx)(rw,{})]})}),Zt=Jf(ba(22)),ok=Jf(ba(22)),Vy=Jf(ba(22)),QC=Jf(ba(22)),Tq=ba(613),Wy=({id:a,showReferenceContent:d=
!1})=>{var m;const {handlers:{isWhiteboardPage:L,redirectToPage:ha,sidebarAddBlock:na,queryBlockByUUID:ua},renderers:{Breadcrumb:Ha,PageName:Ua}}=QC.default.useContext(rj);var $a="";let jb=Wg(a)?"B":"P",mb="";if(Wg(a)){$a=ua(a);if(!$a)return(0,Tq.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});mb=$a.content;$a="whiteboard-shape"===(null==(m=$a.properties)?void 0:m["ls-type"])?"link-to-whiteboard":"link-to-block"}else $a=L(a)?"link-to-whiteboard":"link-to-page";m=mb&&
23<mb.length?mb.slice(0,20)+"...":mb;return(0,Tq.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Kb=>{Kb.stopPropagation();Kb.shiftKey?na(a,"B"===jb?"block":"page"):ha(a)},children:[(0,Tq.jsx)(Xh,{name:$a}),(0,Tq.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===jb?(0,Tq.jsx)(Ua,{pageName:a}):(0,Tq.jsxs)(Tq.Fragment,{children:[(0,Tq.jsx)(Ha,{levelLimit:1,blockId:a,endSeparator:d}),d&&m]})})]})},pm=Jf(ba(22)),Nl=ba(22),RC=["children"],
iv="undefined"!==typeof document?Nl.useLayoutEffect:Nl.useEffect,Dh=Jf(ba(22)),Fi=ba(22),$t=ba(31),au,qm,Xy="undefined"!=typeof document?Fi.useLayoutEffect:Fi.useEffect;!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(qm||={});var uH=((au={})[qm.DEBUG]="debug",au[qm.INFO]="log",au[qm.WARN]="warn",au[qm.ERROR]="error",au),Uq=Bi(function(){var a=rg(qm.ERROR);return{log:rg(function(d,m,L){var ha;void 0===L&&(L=qm.INFO);L>=(null!=(ha=("undefined"==typeof globalThis?
window:globalThis).VIRTUOSO_LOG_LEVEL)?ha:a(4))&&console[uH[L]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",d,m)}),logLevel:a}},[],{singleton:!0}),Nn=Bi(function(){var a=hh(),d=hh(),m=rg(0),L=hh(),ha=rg(0),na=hh(),ua=hh(),Ha=rg(0),Ua=rg(0),$a=rg(0),jb=rg(0),mb=hh(),Kb=hh(),Vb=rg(!1),Ob=rg(!1);return ug(ag(a,Mg(function(kc){return kc.scrollTop})),d),ug(ag(a,Mg(function(kc){return kc.scrollHeight})),ua),ug(d,ha),{scrollContainerState:a,scrollTop:d,viewportHeight:na,
headerHeight:Ha,fixedHeaderHeight:Ua,fixedFooterHeight:$a,footerHeight:jb,scrollHeight:ua,smoothScrollTargetReached:L,react18ConcurrentRendering:Ob,scrollTo:mb,scrollBy:Kb,statefulScrollTop:ha,deviation:m,scrollingInProgress:Vb}},[],{singleton:!0}),ej={lvl:0},zw=Bi(function(){return{recalcInProgress:rg(!1)}},[],{singleton:!0}),vH={offsetHeight:"height",offsetWidth:"width"},Vq=Bi(function(a){var d=a[0].log,m=a[1].recalcInProgress;a=hh();var L=hh(),ha=Rj(L,0),na=hh(),ua=hh(),Ha=rg(0),Ua=rg([]),$a=rg(void 0),
jb=rg(void 0),mb=rg(function(pc,lc){return Ti(pc,vH[lc])}),Kb=rg(void 0),Vb=rg(0),Ob={offsetTree:[],sizeTree:ej,groupOffsetTree:ej,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},kc=Rj(ag(a,fi(Ua,d,Vb),kk(Ai,Ob),ni()),Ob);ug(ag(Ua,Jg(function(pc){return 0<pc.length}),fi(kc,Vb),Mg(function(pc){var lc=pc[0],Rc=pc[1],Uc=pc[2];pc=lc.reduce(function(Dd,Td,lf){return Aa(Dd,Td,wi(Td,Rc.offsetTree,Uc)||lf)},ej);return Mh({},Rc,{groupIndices:lc,groupOffsetTree:pc})})),kc);ug(ag(L,fi(kc),Jg(function(pc){return pc[0]<
pc[1].lastIndex}),Mg(function(pc){var lc=pc[1];return[{startIndex:pc[0],endIndex:lc.lastIndex,size:lc.lastSize}]})),a);ug($a,jb);var xc=Rj(ag($a,Mg(function(pc){return void 0===pc})),!0);ug(ag(jb,Jg(function(pc){return void 0!==pc&&kc(4).sizeTree===ej}),Mg(function(pc){return[{startIndex:0,endIndex:0,size:pc}]})),a);Ob=Ok(ag(a,fi(kc),kk(function(pc,lc){lc=lc[1];return{changed:lc!==pc.sizes,sizes:lc}},{changed:!1,sizes:Ob}),Mg(function(pc){return pc.changed})));Rh(ag(Ha,kk(function(pc,lc){return{diff:pc.prev-
lc,prev:lc}},{diff:0,prev:0}),Mg(function(pc){return pc.diff})),function(pc){0<pc?(m(0,!0),na(0,pc)):0>pc&&ua(0,pc)});Rh(ag(Ha,fi(d)),function(pc){0>pc[0]&&(0,pc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:Ha},qm.ERROR)});d=Ok(na);ug(ag(na,fi(kc),Mg(function(pc){var lc=pc[0];pc=pc[1];if(0<pc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Ia(pc.sizeTree).reduce(function(Rc,
Uc){var Dd=Uc.k;Uc=Uc.v;return{ranges:[].concat(Rc.ranges,[{startIndex:Rc.prevIndex,endIndex:Dd+lc-1,size:Rc.prevSize}]),prevIndex:Dd+lc,prevSize:Uc}},{ranges:[],prevIndex:0,prevSize:pc.lastSize}).ranges})),a);var $b=Ok(ag(ua,fi(kc,Vb),Mg(function(pc){return wi(-pc[0],pc[1].offsetTree,pc[2])})));return ug(ag(ua,fi(kc,Vb),Mg(function(pc){var lc=pc[0],Rc=pc[1];pc=pc[2];if(0<Rc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Uc=Ia(Rc.sizeTree).reduce(function(Dd,
Td){return Aa(Dd,Math.max(0,Td.k+lc),Td.v)},ej);return Mh({},Rc,{sizeTree:Uc},fj(Rc.offsetTree,0,Uc,pc))})),kc),{data:Kb,totalCount:L,sizeRanges:a,groupIndices:Ua,defaultItemSize:jb,fixedItemSize:$a,unshiftWith:na,shiftWith:ua,shiftWithOffset:$b,beforeUnshiftWith:d,firstItemIndex:Ha,gap:Vb,sizes:kc,listRefresh:Ob,statefulTotalCount:ha,trackItemSizes:xc,itemSize:mb}},nj(Uq,zw),{singleton:!0}),wH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,jv=Bi(function(a){function d(){xc&&
(xc(),xc=null);pc&&(pc(),pc=null);$b&&(clearTimeout($b),$b=null);Ha(0,!1)}var m=a[0],L=m.sizes,ha=m.totalCount,na=m.listRefresh;m=m.gap;var ua=a[1],Ha=ua.scrollingInProgress,Ua=ua.viewportHeight,$a=ua.scrollTo,jb=ua.smoothScrollTargetReached,mb=ua.headerHeight,Kb=ua.footerHeight,Vb=ua.fixedHeaderHeight;ua=ua.fixedFooterHeight;a=a[2].log;var Ob=hh(),kc=rg(0),xc=null,$b=null,pc=null;return ug(ag(Ob,fi(L,Ua,ha,kc,mb,Kb,a),fi(m,Vb,ua),Mg(function(lc){var Rc=lc[0],Uc=Rc[0],Dd=Rc[1],Td=Rc[2],lf=Rc[3],re=
Rc[4],We=Rc[5],Uf=Rc[6],hf=Rc[7],wf=lc[1];Rc=lc[2];lc=lc[3];var Sd=Di(Uc),qd=Sd.align,Zd=Sd.behavior,pd=Sd.offset;--lf;Sd=Ji(Sd,Dd,lf);We=wi(Sd,Dd.offsetTree,wf)+We;"end"===qd?(We+=Rc+ea(Dd.sizeTree,Sd)[1]-Td+lc,Sd===lf&&(We+=Uf)):"center"===qd?We+=(Rc+ea(Dd.sizeTree,Sd)[1]-Td+lc)/2:We-=re;pd&&(We+=pd);var Md=function(Gf){d();Gf?(hf("retrying to scroll to",{location:Uc},qm.DEBUG),Ob(0,Uc)):hf("list did not change, scroll successful",{},qm.DEBUG)};if(d(),"smooth"===Zd){var Se=!1;pc=Rh(na,function(Gf){Se=
Se||Gf});xc=Yk(jb,function(){Md(Se)})}else xc=Yk(ag(na,function(Gf){var sg=setTimeout(function(){Gf(!1)},150);return function(Mf){Mf&&(Gf(!0),clearTimeout(sg))}}),Md);$b=setTimeout(function(){d()},1200);Ha(0,!0);return hf("scrolling from index to",{index:Sd,top:We,behavior:Zd},qm.DEBUG),{top:We,behavior:Zd}})),$a),{scrollToIndex:Ob,topListHeight:kc}},nj(Vq,Nn,Uq),{singleton:!0}),xH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},
kv=Bi(function(a){var d=a[0],m=d.scrollContainerState;a=d.scrollTop;var L=d.viewportHeight,ha=d.headerHeight,na=d.footerHeight,ua=d.scrollBy;d=rg(!1);var Ha=rg(!0),Ua=hh(),$a=hh(),jb=rg(4),mb=rg(0),Kb=Rj(ag(Wp(ag(bi(a),Vl(1),Cn(!0)),ag(bi(a),Vl(1),Cn(!1),Nj(100))),ni()),!1),Vb=Rj(ag(Wp(ag(ua,Cn(!0)),ag(ua,Cn(!1),Nj(200))),ni()),!1);ug(ag(ak(bi(a),bi(mb)),Mg(function(Ob){return Ob[0]<=Ob[1]}),ni()),Ha);ug(ag(Ha,bn(50)),$a);L=Ok(ag(ak(m,bi(L),bi(ha),bi(na),bi(jb)),kk(function(Ob,kc){var xc,$b,pc=kc[0],
lc=pc.scrollTop;pc=pc.scrollHeight;var Rc=kc[1],Uc={viewportHeight:Rc,scrollTop:lc,scrollHeight:pc};return lc+Rc-pc>-kc[4]?(lc>Ob.state.scrollTop?(xc="SCROLLED_DOWN",$b=Ob.state.scrollTop-lc):(xc="SIZE_DECREASED",$b=Ob.state.scrollTop-lc||Ob.scrollTopDelta),{atBottom:!0,state:Uc,atBottomBecause:xc,scrollTopDelta:$b}):{atBottom:!1,notAtBottomBecause:Uc.scrollHeight>Ob.state.scrollHeight?"SIZE_INCREASED":Rc<Ob.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":lc<Ob.state.scrollTop?"SCROLLING_UPWARDS":
"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Uc}},xH),ni(function(Ob,kc){return Ob&&Ob.atBottom===kc.atBottom})));ha=Rj(ag(m,kk(function(Ob,kc){var xc=kc.scrollTop,$b=kc.scrollHeight;kc=kc.viewportHeight;return 1.01>Math.abs(Ob.scrollHeight-$b)?{scrollTop:xc,scrollHeight:$b,jump:0,changed:!1}:Ob.scrollTop!==xc&&1>$b-(xc+kc)?{scrollHeight:$b,scrollTop:xc,jump:Ob.scrollTop-xc,changed:!0}:{scrollHeight:$b,scrollTop:xc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Jg(function(Ob){return Ob.changed}),
Mg(function(Ob){return Ob.jump})),0);ug(ag(L,Mg(function(Ob){return Ob.atBottom})),d);ug(ag(d,bn(50)),Ua);na=rg("down");ug(ag(m,Mg(function(Ob){return Ob.scrollTop}),ni(),kk(function(Ob,kc){return Vb(4)?{direction:Ob.direction,prevScrollTop:kc}:{direction:kc<Ob.prevScrollTop?"up":"down",prevScrollTop:kc}},{direction:"down",prevScrollTop:0}),Mg(function(Ob){return Ob.direction})),na);ug(ag(m,bn(50),Cn("none")),na);m=rg(0);return ug(ag(Kb,Jg(function(Ob){return!Ob}),Cn(0)),m),ug(ag(a,bn(100),fi(Kb),
Jg(function(Ob){return!!Ob[1]}),kk(function(Ob,kc){return[Ob[1],kc[0]]},[0,0]),Mg(function(Ob){return Ob[1]-Ob[0]})),m),{isScrolling:Kb,isAtTop:Ha,isAtBottom:d,atBottomState:L,atTopStateChange:$a,atBottomStateChange:Ua,scrollDirection:na,atBottomThreshold:jb,atTopThreshold:mb,scrollVelocity:m,lastJumpDueToItemResize:ha}},nj(Nn)),Ws=Bi(function(a){var d=a[0].log;a=rg(!1);var m=Ok(ag(a,Jg(function(L){return L}),ni()));return Rh(a,function(L){L&&d(4)("props updated",{},qm.DEBUG)}),{propsReady:a,didMount:m}},
nj(Uq),{singleton:!0}),Yy=Bi(function(a){var d=a[0],m=d.sizes,L=d.listRefresh;d=d.defaultItemSize;var ha=a[1].scrollTop,na=a[2].scrollToIndex;a=a[3].didMount;var ua=rg(!0),Ha=rg(0);return ug(ag(a,fi(Ha),Jg(function(Ua){return!!Ua[1]}),Cn(!1)),ua),Rh(ag(ak(L,a),fi(ua,m,d),Jg(function(Ua){var $a=Ua[1],jb=Ua[3];return Ua[0][1]&&(Ua[2].sizeTree!==ej||void 0!==jb)&&!$a}),fi(Ha)),function(Ua){var $a=Ua[1];setTimeout(function(){Yk(ha,function(){ua(0,!0)});na(0,$a)})}),{scrolledToInitialItem:ua,initialTopMostItemIndex:Ha}},
nj(Vq,Nn,jv,Ws),{singleton:!0}),SC=Bi(function(a){function d(kc){Ua(0,{index:"LAST",align:"end",behavior:kc})}function m(kc){var xc=Yk(Ha,function($b){!kc||$b.atBottom||"SIZE_INCREASED"!==$b.notAtBottomBecause||Ob||(mb(4)("scrolling to bottom due to increased size",{},qm.DEBUG),d("auto"))});setTimeout(xc,100)}var L=a[0],ha=L.totalCount,na=L.listRefresh,ua=a[1];L=ua.isAtBottom;var Ha=ua.atBottomState,Ua=a[2].scrollToIndex;ua=a[3].scrolledToInitialItem;var $a=a[4],jb=$a.propsReady;$a=$a.didMount;var mb=
a[5].log;a=a[6].scrollingInProgress;var Kb=rg(!1),Vb=hh(),Ob=null;return Rh(ag(ak(ag(bi(ha),Vl(1)),$a),fi(bi(Kb),L,ua,a),Mg(function(kc){var xc=kc[0],$b=xc[0];xc=xc[1]&&kc[3];var pc="auto";xc&&(pc=kc[1],kc=kc[2]||kc[4],pc="function"==typeof pc?Ei(pc(kc)):kc&&Ei(pc),xc=xc&&!!pc);return{totalCount:$b,shouldFollow:xc,followOutputBehavior:pc}}),Jg(function(kc){return kc.shouldFollow})),function(kc){var xc=kc.totalCount,$b=kc.followOutputBehavior;Ob&&(Ob(),Ob=null);Ob=Yk(na,function(){mb(4)("following output to ",
{totalCount:xc},qm.DEBUG);d($b);Ob=null})}),Rh(ag(ak(bi(Kb),ha,jb),Jg(function(kc){return kc[0]&&kc[2]}),kk(function(kc,xc){xc=xc[1];return{refreshed:kc.value===xc,value:xc}},{refreshed:!1,value:0}),Jg(function(kc){return kc.refreshed}),fi(Kb,ha)),function(kc){m(!1!==kc[1])}),Rh(Vb,function(){m(!1!==Kb(4))}),Rh(ak(bi(Kb),Ha),function(kc){var xc=kc[1];kc[0]&&!xc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===xc.notAtBottomBecause&&d("auto")}),{followOutput:Kb,autoscrollToBottom:Vb}},nj(Vq,kv,jv,Yy,Ws,Uq,
Nn)),Zy=Bi(function(a){var d=a[0],m=d.totalCount,L=d.groupIndices;d=d.sizes;var ha=a[1];a=ha.scrollTop;ha=ha.headerHeight;var na=hh(),ua=hh(),Ha=Ok(ag(na,Mg(Hi)));return ug(ag(Ha,Mg(function(Ua){return Ua.totalCount})),m),ug(ag(Ha,Mg(function(Ua){return Ua.groupIndices})),L),ug(ag(ak(a,d,ha),Jg(function(Ua){return Ua[1].groupOffsetTree!==ej}),Mg(function(Ua){return ea(Ua[1].groupOffsetTree,Math.max(Ua[0]-Ua[2],0),"v")[0]}),ni(),Mg(function(Ua){return[Ua]})),ua),{groupCounts:na,topItemsIndexes:ua}},
nj(Vq,Nn)),Aw=Bi(function(a){var d=a[0];a=d.scrollTop;var m=d.viewportHeight,L=d.deviation,ha=d.headerHeight,na=d.fixedHeaderHeight;d=hh();var ua=rg(0),Ha=rg(0),Ua=rg(0);a=Rj(ag(ak(bi(a),bi(m),bi(ha),bi(d,Sj),bi(Ua),bi(ua),bi(na),bi(L),bi(Ha)),Mg(function($a){var jb=$a[0],mb=$a[1],Kb=$a[2],Vb=$a[3],Ob=Vb[0];Vb=Vb[1];var kc=$a[4],xc=$a[6],$b=$a[7],pc=$a[8],lc=jb-$b;$a=$a[5]+xc;var Rc=Math.max(Kb-lc,0),Uc="none",Dd="number"==typeof pc?pc:pc.top||0;pc="number"==typeof pc?pc:pc.bottom||0;return Ob-=$b,
Vb+=Kb+xc,Ob+(Kb+xc)>jb+$a-Dd&&(Uc="up"),Vb-$b<jb-Rc+mb+pc&&(Uc="down"),"none"!==Uc?[Math.max(lc-Kb-tl(kc,"top",Uc)-Dd,0),lc-Rc-xc+mb+tl(kc,"bottom",Uc)+pc]:null}),Jg(function($a){return null!=$a}),ni(Sj)),[0,0]);return{listBoundary:d,overscan:Ua,topListHeight:ua,increaseViewportBy:Ha,visibleRange:a}},nj(Nn),{singleton:!0}),TC={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},bu=Bi(function(a){var d=a[0],m=d.sizes,L=d.totalCount,ha=d.data,
na=d.firstItemIndex,ua=d.gap,Ha=a[1],Ua=a[2],$a=Ua.visibleRange;d=Ua.listBoundary;Ua=Ua.topListHeight;var jb=a[3],mb=jb.scrolledToInitialItem,Kb=jb.initialTopMostItemIndex;jb=a[4].topListHeight;var Vb=a[5],Ob=a[6].didMount,kc=a[7].recalcInProgress;a=rg([]);var xc=hh();ug(Ha.topItemsIndexes,a);m=Rj(ag(ak(Ob,kc,bi($a,Sj),bi(L),bi(m),bi(Kb),mb,bi(a),bi(na),bi(ua),ha),Jg(function($b){return $b[0]&&!$b[1]}),Mg(function($b){var pc=$b[2],lc=pc[0],Rc=pc[1];pc=$b[3];var Uc=$b[5],Dd=$b[6],Td=$b[7],lf=$b[8],
re=$b[9],We=$b[10];$b=$b[4];var Uf=$b.sizeTree,hf=$b.offsetTree;if(0===pc||0===lc&&0===Rc)return Mh({},TC,{totalCount:pc});if(Uf===ej)return $m(function(Mf,qg,Qh){return qg.groupOffsetTree!==ej?(Mf=di(Mf,qg),[{index:ea(qg.groupOffsetTree,Mf)[0],size:0,offset:0},{index:Mf,size:0,offset:0,data:Qh&&Qh[0]}]):[{index:Mf,size:0,offset:0,data:Qh&&Qh[0]}]}("number"==typeof Uc?Uc:"LAST"===Uc.index?pc-1:Uc.index,$b,We),[],pc,re,$b,lf);Uc=[];if(0<Td.length){var wf,Sd=Td[0],qd=Td[Td.length-1],Zd=0;for(Uf=xm(Xc(Uf,
Sd,qd));!(wf=Uf()).done;){var pd=wf.value;wf=pd.value;var Md=Math.min(pd.end,qd);for(pd=Math.max(pd.start,Sd);pd<=Md;pd++)Uc.push({index:pd,size:wf,offset:Zd,data:We&&We[pd]}),Zd+=wf}}if(!Dd)return $m([],Uc,pc,re,$b,lf);var Se=0<Td.length?Td[Td.length-1]+1:0,Gf=function(Mf,qg,Qh,dg){return void 0===dg&&(dg=0),0<dg&&(qg=Math.max(qg,Mf[Me(Mf,dg,oh)].offset)),Ed((Eh=Qh,Mk=Me(rh=Mf,qg,tj=Xi),Ak=Me(rh,Eh,tj,Mk),rh.slice(Mk,Ak+1)),eh);var rh,Eh,tj,Mk,Ak}(hf,lc,Rc,Se);if(0===Gf.length)return null;var sg=
pc-1;return $m(mj([],function(Mf){for(var qg,Qh=xm(Gf);!(qg=Qh()).done;){var dg=qg.value,rh=dg.value;qg=rh.offset;var Eh=dg.start,tj=rh.size;rh.offset<lc&&(rh=(Eh+=Math.floor((lc-rh.offset+re)/(tj+re)))-dg.start,qg+=rh*tj+rh*re);Eh<Se&&(qg+=(Se-Eh)*tj,Eh=Se);for(dg=Math.min(dg.end,sg);Eh<=dg&&!(qg>=Rc);Eh++)Mf.push({index:Eh,size:tj,offset:qg,data:We&&We[Eh]}),qg+=tj+re}}),Uc,pc,re,$b,lf)}),Jg(function($b){return null!==$b}),ni()),TC);return ug(ag(ha,Jg(function($b){return void 0!==$b}),Mg(function($b){return $b.length})),
L),ug(ag(m,Mg(function($b){return $b.topListHeight})),jb),ug(jb,Ua),ug(ag(m,Mg(function($b){return[$b.top,$b.bottom]})),d),ug(ag(m,Mg(function($b){return $b.items})),xc),Mh({listState:m,topItemsIndexes:a,endReached:Ok(ag(m,Jg(function($b){return 0<$b.items.length}),fi(L,ha),Jg(function($b){var pc=$b[0].items;return pc[pc.length-1].originalIndex===$b[1]-1}),Mg(function($b){return[$b[1]-1,$b[2]]}),ni(Sj),Mg(function($b){return $b[0]}))),startReached:Ok(ag(m,bn(200),Jg(function($b){var pc=$b.items;return 0<
pc.length&&pc[0].originalIndex===$b.topItems.length}),Mg(function($b){return $b.items[0].index}),ni())),rangeChanged:Ok(ag(m,Jg(function($b){return 0<$b.items.length}),Mg(function($b){$b=$b.items;for(var pc=0,lc=$b.length-1;"group"===$b[pc].type&&pc<lc;)pc++;for(;"group"===$b[lc].type&&lc>pc;)lc--;return{startIndex:$b[pc].index,endIndex:$b[lc].index}}),ni(Pk))),itemsRendered:xc},Vb)},nj(Vq,Zy,Aw,Yy,jv,kv,Ws,zw),{singleton:!0}),yH=Bi(function(a){var d=a[0],m=d.sizes,L=d.firstItemIndex,ha=d.data;d=
d.gap;var na=a[1].listState;a=a[2].didMount;var ua=rg(0);return ug(ag(a,fi(ua),Jg(function(Ha){return 0!==Ha[1]}),fi(m,L,d,ha),Mg(function(Ha){var Ua=Ha[0][1],$a=Ha[1],jb=Ha[2],mb=Ha[3];Ha=Ha[4];var Kb=void 0===Ha?[]:Ha;Ha=0;if(0<$a.groupIndices.length)for(var Vb,Ob=xm($a.groupIndices);!((Vb=Ob()).done||Vb.value-Ha>=Ua);)Ha++;Ua+=Ha;return $m(Array.from({length:Ua}).map(function(kc,xc){return{index:xc,size:0,offset:0,data:Kb[xc]}}),[],Ua,mb,$a,jb)})),na),{initialItemCount:ua}},nj(Vq,bu,Ws),{singleton:!0}),
UC=Bi(function(a){a=a[0].scrollVelocity;var d=rg(!1),m=hh(),L=rg(!1);return ug(ag(a,fi(L,d,m),Jg(function(ha){return!!ha[1]}),Mg(function(ha){var na=ha[0],ua=ha[1],Ha=ha[2];ha=ha[3];var Ua=ua.enter;if(Ha){if((0,ua.exit)(na,ha))return!1}else if(Ua(na,ha))return!0;return Ha}),ni()),d),Rh(ag(ak(d,a,m),fi(L)),function(ha){var na=ha[0];ha=ha[1];return na[0]&&ha&&ha.change&&ha.change(na[1],na[2])}),{isSeeking:d,scrollSeekConfiguration:L,scrollVelocity:a,scrollSeekRangeChanged:m}},nj(kv),{singleton:!0}),
Wq=Bi(function(a){a=a[0].topItemsIndexes;var d=rg(0);return ug(ag(d,Jg(function(m){return 0<m}),Mg(function(m){return Array.from({length:m}).map(function(L,ha){return ha})})),a),{topItemCount:d}},nj(bu)),lv=Bi(function(a){var d=a[0],m=d.footerHeight,L=d.headerHeight,ha=d.fixedHeaderHeight;d=d.fixedFooterHeight;var na=a[1].listState;a=hh();m=Rj(ag(ak(m,d,L,ha,na),Mg(function(ua){var Ha=ua[4];return ua[0]+ua[1]+ua[2]+ua[3]+Ha.offsetBottom+Ha.bottom})),0);return ug(bi(m),a),{totalListHeight:m,totalListHeightChanged:a}},
nj(Nn,bu),{singleton:!0}),Bw=tn(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),Cw=Bi(function(a){function d(xc){0<xc?(L(0,{top:-xc,behavior:"auto"}),na(0,0)):(na(0,0),L(0,{top:-xc,behavior:"auto"}))}var m=a[0],L=m.scrollBy,ha=m.scrollTop,na=m.deviation,ua=m.scrollingInProgress,Ha=a[1];m=Ha.isScrolling;var Ua=Ha.isAtBottom,$a=Ha.scrollDirection,jb=a[3],mb=jb.beforeUnshiftWith,Kb=jb.shiftWithOffset,Vb=jb.sizes;jb=jb.gap;var Ob=a[4].log,kc=a[5].recalcInProgress;
a=Ok(ag(a[2].listState,fi(Ha.lastJumpDueToItemResize),kk(function(xc,$b){var pc=xc[1],lc=$b[0],Rc=lc.items,Uc=lc.totalCount;lc=lc.bottom+lc.offsetBottom;var Dd=0;return xc[2]===Uc&&0<pc.length&&0<Rc.length&&(0===Rc[0].originalIndex&&0===pc[0].originalIndex||0!=(Dd=lc-xc[3])&&(Dd+=$b[1])),[Dd,Rc,Uc,lc]},[0,[],0,0]),Jg(function(xc){return 0!==xc[0]}),fi(ha,$a,ua,Ua,Ob),Jg(function(xc){return!xc[3]&&0!==xc[1]&&"up"===xc[2]}),Mg(function(xc){var $b=xc[0][0];return(0,xc[5])("Upward scrolling compensation",
{amount:$b},qm.DEBUG),$b})));return Rh(ag(a,fi(na,m)),function(xc){var $b=xc[0],pc=xc[1];xc[2]&&Bw()?na(0,pc-$b):d(-$b)}),Rh(ag(ak(Rj(m,!1),na,kc),Jg(function(xc){return!xc[0]&&!xc[2]&&0!==xc[1]}),Mg(function(xc){return xc[1]}),bn(1)),d),ug(ag(Kb,Mg(function(xc){return{top:-xc}})),L),Rh(ag(mb,fi(Vb,jb),Mg(function(xc){var $b=xc[0];return $b*xc[1].lastSize+$b*xc[2]})),function(xc){na(0,xc);requestAnimationFrame(function(){Lp(L,{top:xc});requestAnimationFrame(function(){na(0,0);kc(0,!1)})})}),{deviation:na}},
nj(Nn,kv,bu,Vq,Uq,zw)),$y=Bi(function(a){var d=a[0].totalListHeight,m=a[1].didMount,L=a[2].scrollTo;a=rg(0);return Rh(ag(m,fi(a),Jg(function(ha){return 0!==ha[1]}),Mg(function(ha){return{top:ha[1]}})),function(ha){Yk(ag(d,Jg(function(na){return 0!==na})),function(){setTimeout(function(){L(0,ha)})})}),{initialScrollTop:a}},nj(lv,Ws,Nn),{singleton:!0}),VC=Bi(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var m=rg(!1);return{alignToBottom:m,paddingTopAddition:Rj(ag(ak(m,d,a),Jg(function(L){return L[0]}),
Mg(function(L){return Math.max(0,L[1]-L[2])}),ni()),0)}},nj(Nn,lv),{singleton:!0}),Dw=Bi(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var m=hh(),L=hh(),ha=hh(),na=rg(!1),ua=rg(void 0);return ug(ag(ak(m,L),Mg(function(Ha){var Ua=Ha[0];return{scrollTop:Math.max(0,Ua.scrollTop-Ha[1].offsetTop),scrollHeight:Ua.scrollHeight,viewportHeight:Ua.viewportHeight}})),d),ug(ag(a,fi(L),Mg(function(Ha){var Ua=Ha[0];return Mh({},Ua,{top:Ua.top+Ha[1].offsetTop})})),ha),{useWindowScroll:na,customScrollParent:ua,
windowScrollContainerState:m,windowViewportRect:L,windowScrollTo:ha}},nj(Nn)),az=["done","behavior","align"],Xs=Bi(function(a){var d=a[0],m=d.sizes,L=d.totalCount;d=d.gap;var ha=a[1],na=ha.scrollTop,ua=ha.viewportHeight,Ha=ha.headerHeight,Ua=ha.fixedHeaderHeight,$a=ha.fixedFooterHeight,jb=ha.scrollingInProgress;a=a[2].scrollToIndex;ha=hh();return ug(ag(ha,fi(m,ua,L,Ha,Ua,$a,na),fi(d),Mg(function(mb){var Kb=mb[0],Vb=Kb[0],Ob=Kb[1],kc=Kb[2],xc=Kb[3],$b=Kb[4],pc=Kb[5],lc=Kb[6];Kb=Kb[7];var Rc=mb[1];
mb=Vb.done;var Uc=Vb.behavior,Dd=Vb.align,Td=wm(Vb,az),lf=null;Vb=Ji(Vb,Ob,xc-1);$b=wi(Vb,Ob.offsetTree,Rc)+$b+pc;return $b<Kb+pc?lf=Mh({},Td,{behavior:Uc,align:null!=Dd?Dd:"start"}):$b+ea(Ob.sizeTree,Vb)[1]>Kb+kc-lc&&(lf=Mh({},Td,{behavior:Uc,align:null!=Dd?Dd:"end"})),lf?mb&&Yk(ag(jb,Vl(1),Jg(function(re){return!1===re})),mb):mb&&mb(),lf}),Jg(function(mb){return null!==mb})),a),{scrollIntoView:ha}},nj(Vq,Nn,jv,bu,Uq),{singleton:!0}),Sr=["listState","topItemsIndexes"],bz=Bi(function(a){return Mh({},
a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},nj(Aw,yH,Ws,UC,lv,$y,VC,Dw,Xs)),cz=Bi(function(a){var d=a[0],m=d.totalCount,L=d.sizeRanges,ha=d.fixedItemSize,na=d.defaultItemSize,ua=d.trackItemSizes,Ha=d.itemSize,Ua=d.data,$a=d.firstItemIndex,jb=d.groupIndices,mb=d.statefulTotalCount;d=d.gap;var Kb=a[1],Vb=Kb.initialTopMostItemIndex;Kb=Kb.scrolledToInitialItem;var Ob=a[2],kc=a[3],xc=a[4],$b=xc.listState,pc=xc.topItemsIndexes;xc=wm(xc,Sr);var lc=a[5].scrollToIndex,Rc=a[7].topItemCount,Uc=a[8].groupCounts,
Dd=a[9];a=a[10];return ug(xc.rangeChanged,Dd.scrollSeekRangeChanged),ug(ag(Dd.windowViewportRect,Mg(function(Td){return Td.visibleHeight})),Ob.viewportHeight),Mh({totalCount:m,data:Ua,firstItemIndex:$a,sizeRanges:L,initialTopMostItemIndex:Vb,scrolledToInitialItem:Kb,topItemsIndexes:pc,topItemCount:Rc,groupCounts:Uc,fixedItemHeight:ha,defaultItemHeight:na,gap:d},kc,{statefulTotalCount:mb,listState:$b,scrollToIndex:lc,trackItemSizes:ua,itemSize:Ha,groupIndices:jb},xc,Dd,Ob,a)},nj(Vq,Yy,Nn,SC,bu,jv,
Cw,Wq,Zy,bz,Uq)),cu=tn(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),Ew=Dh.createContext(void 0),dz=Dh.createContext(void 0),mq=["placeholder"],WC=["style","children"],ez=["style","children"],XC=Bi(function(){var a=rg(function(Ua){return"Item "+Ua}),d=rg(null),m=rg(function(Ua){return"Group "+Ua}),L=rg({}),ha=rg(Xp),na=rg("div"),ua=rg(Ki),Ha=function(Ua,
$a){return void 0===$a&&($a=null),Rj(ag(L,Mg(function(jb){return jb[Ua]}),ni()),$a)};return{context:d,itemContent:a,groupContent:m,components:L,computeItemKey:ha,headerFooterTag:na,scrollerRef:ua,FooterComponent:Ha("Footer"),HeaderComponent:Ha("Header"),TopItemListComponent:Ha("TopItemList"),ListComponent:Ha("List","div"),ItemComponent:Ha("Item","div"),GroupComponent:Ha("Group","div"),ScrollerComponent:Ha("Scroller","div"),EmptyPlaceholder:Ha("EmptyPlaceholder"),ScrollSeekPlaceholder:Ha("ScrollSeekPlaceholder")}}),
YC=Bi(function(a){function d(ha,na,ua){ug(ag(ha,fi(L.components),Mg(function(Ha){var Ua,$a=Ha[0];Ha=Ha[1];return console.warn("react-virtuoso: "+ua+" property is deprecated. Pass components."+na+" instead."),Mh({},Ha,((Ua={})[na]=$a,Ua))})),L.components)}var m=a[0],L=a[1];a={item:Qk(L.itemContent,"Rename the %citem%c prop to %citemContent."),group:Qk(L.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Qk(m.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Qk(m.fixedItemHeight,
"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Qk(m.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:hh(),maxHeightCacheSize:hh(),footer:hh(),header:hh(),HeaderContainer:hh(),FooterContainer:hh(),ItemContainer:hh(),ScrollContainer:hh(),GroupContainer:hh(),ListContainer:hh(),emptyComponent:hh(),scrollSeek:hh()};return Rh(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.",
"color: red;","color: inherit;","color: blue;")}),Rh(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),Rh(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),Rh(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),
Rh(a.scrollSeek,function(ha){var na=ha.placeholder;ha=wm(ha,mq);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");na=Mh({},(0,L.components)(4),{ScrollSeekPlaceholder:na});(0,L.components)(0,na);(0,m.scrollSeekConfiguration)(0,ha)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,
"Scroller","ScrollContainer"),d(a.emptyComponent,"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),Mh({},m,L,a)},nj(cz,XC)),Fw=function(a){return Dh.createElement("div",{style:{height:a.height}})},ZC={position:cu(),zIndex:1,overflowAnchor:"none"},On={overflowAnchor:"none"},$C=Dh.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=lj("listState"),m=go("sizeRanges"),L=lj("useWindowScroll"),ha=lj("customScrollParent"),na=go("windowScrollContainerState"),ua=go("scrollContainerState");
L=ha||L?na:ua;var Ha=lj("itemContent"),Ua=lj("context"),$a=lj("groupContent");na=lj("trackItemSizes");ua=lj("itemSize");var jb=lj("log"),mb=go("gap");m=aj(m,ua,na,a?Ki:L,jb,mb,ha).callbackRef;ha=Dh.useState(0);var Kb=ha[0],Vb=ha[1];kp("deviation",function(Rc){Kb!==Rc&&Vb(Rc)});ha=lj("EmptyPlaceholder");var Ob=lj("ScrollSeekPlaceholder")||Fw;L=lj("ListComponent");var kc=lj("ItemComponent"),xc=lj("GroupComponent"),$b=lj("computeItemKey"),pc=lj("isSeeking"),lc=0<lj("groupIndices").length;na=lj("paddingTopAddition");
na=a?{}:{boxSizing:"border-box",paddingTop:d.offsetTop+na,paddingBottom:d.offsetBottom,marginTop:Kb};return!a&&0===d.totalCount&&ha?(0,Fi.createElement)(ha,Xj(ha,Ua)):(0,Fi.createElement)(L,Mh({},Xj(L,Ua),{ref:m,style:na,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function(Rc){var Uc=Rc.originalIndex,Dd=$b(Uc+d.firstItemIndex,Rc.data,Ua);return pc?(0,Fi.createElement)(Ob,Mh({},Xj(Ob,Ua),{key:Dd,index:Rc.index,height:Rc.size,type:Rc.type||"item"},"group"===
Rc.type?{}:{groupIndex:Rc.groupIndex})):"group"===Rc.type?(0,Fi.createElement)(xc,Mh({},Xj(xc,Ua),{key:Dd,"data-index":Uc,"data-known-size":Rc.size,"data-item-index":Rc.index,style:ZC}),$a(Rc.index)):(0,Fi.createElement)(kc,Mh({},Xj(kc,Ua),{key:Dd,"data-index":Uc,"data-known-size":Rc.size,"data-item-index":Rc.index,"data-item-group-index":Rc.groupIndex,style:On}),lc?Ha(Rc.index,Rc.groupIndex,Rc.data,Ua):Ha(Rc.index,Rc.data,Ua))}))}),mv={height:"100%",outline:"none",overflowY:"auto",position:"relative",
WebkitOverflowScrolling:"touch"},du={width:"100%",height:"100%",position:"absolute",top:0},zH={width:"100%",position:cu(),top:0},aD=Dh.memo(function(){var a=lj("HeaderComponent"),d=go("headerHeight"),m=lj("headerFooterTag"),L=Hj(function(na){return d(Ti(na,"height"))}),ha=lj("context");return a?(0,Fi.createElement)(m,{ref:L},(0,Fi.createElement)(a,Xj(a,ha))):null}),Gw=Dh.memo(function(){var a=lj("FooterComponent"),d=go("footerHeight"),m=lj("headerFooterTag"),L=Hj(function(na){return d(Ti(na,"height"))}),
ha=lj("context");return a?(0,Fi.createElement)(m,{ref:L},(0,Fi.createElement)(a,Xj(a,ha))):null}),Hw=function(a){a=a.children;var d=(0,Fi.useContext)(Ew),m=go("viewportHeight"),L=go("fixedItemHeight"),ha=Hj(Sm(m,function(na){return Ti(na,"height")}));return Dh.useEffect(function(){d&&(m(d.viewportHeight),L(d.itemHeight))},[d,m,L]),Dh.createElement("div",{style:du,ref:ha,"data-viewport-type":"element"},a)},AH=function(a){a=a.children;var d=(0,Fi.useContext)(Ew),m=go("windowViewportRect"),L=go("fixedItemHeight"),
ha=lj("customScrollParent");ha=$h(m,ha);return Dh.useEffect(function(){d&&(L(d.itemHeight),m({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,m,L]),Dh.createElement("div",{ref:ha,style:du,"data-viewport-type":"window"},a)},bD=function(a){a=a.children;var d=lj("TopItemListComponent"),m=lj("headerHeight");m=Mh({},zH,{marginTop:m+"px"});var L=lj("context");return(0,Fi.createElement)(d||"div",{style:m,context:L},a)},nv=bk(YC,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Dh.memo(function(a){var d=lj("useWindowScroll"),m=0<lj("topItemsIndexes").length,L=lj("customScrollParent"),ha=L||d?AH:Hw;return Dh.createElement(L||d?Tr:wj,Mh({},a),Dh.createElement(ha,null,Dh.createElement(aD,null),Dh.createElement($C,null),Dh.createElement(Gw,
null)),m&&Dh.createElement(bD,null,Dh.createElement($C,{showTopList:!0})))})),cD=nv.Component,go=nv.usePublisher,lj=nv.useEmitterValue,kp=nv.useEmitter,wj=ro({usePublisher:go,useEmitterValue:lj,useEmitter:kp}),Tr=Op({usePublisher:go,useEmitterValue:lj,useEmitter:kp}),eu={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Iw={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Pn=Math.round,fz=Math.ceil,fu=Math.floor,Jw=Math.min,gu=Math.max,
Fj=Bi(function(a){var d=a[0],m=d.overscan,L=d.visibleRange,ha=d.listBoundary,na=a[1];d=na.scrollTop;var ua=na.viewportHeight,Ha=na.scrollBy,Ua=na.scrollTo,$a=na.smoothScrollTargetReached,jb=na.scrollContainerState,mb=na.footerHeight;na=na.headerHeight;var Kb=a[2],Vb=a[3],Ob=a[4],kc=Ob.propsReady,xc=Ob.didMount,$b=a[5];Ob=$b.windowViewportRect;var pc=$b.windowScrollTo,lc=$b.useWindowScroll,Rc=$b.customScrollParent;$b=$b.windowScrollContainerState;a=a[6];var Uc=rg(0),Dd=rg(0),Td=rg(eu),lf=rg({height:0,
width:0}),re=rg({height:0,width:0}),We=hh(),Uf=hh(),hf=rg(0),wf=rg(void 0),Sd=rg({row:0,column:0});ug(ag(ak(xc,Dd,wf),Jg(function(qd){return 0!==qd[1]}),Mg(function(qd){return{items:Pp(0,qd[1]-1,qd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Td);ug(ag(ak(bi(Uc),L,bi(Sd,Dn),bi(re,function(qd,Zd){return qd&&qd.width===Zd.width&&qd.height===Zd.height}),wf),fi(lf),Mg(function(qd){var Zd=qd[0],pd=Zd[0],Md=Zd[1],Se=Md[0],Gf=Md[1],sg=Zd[2],Mf=Zd[3],qg=Zd[4],Qh=qd[1];qd=sg.row;
var dg=sg.column;Zd=Mf.height;Md=Mf.width;var rh=Qh.width;if(0===pd||0===rh)return eu;if(0===Md)return Mh({},Iw,{items:Pp(0,0,qg)});dg=gu(1,fu((rh+dg)/(Md+dg)));Se=dg*fu((Se+qd)/(Zd+qd));Gf=dg*fz((Gf+qd)/(Zd+qd))-1;Gf=Jw(pd-1,gu(Gf,dg-1));Se=Pp(Jw(Gf,gu(0,Se)),Gf,qg);Mf=so(Qh,sg,Mf,Se);sg=Mf.top;Mf=Mf.bottom;pd=fz(pd/dg);return{items:Se,offsetTop:sg,offsetBottom:pd*Zd+(pd-1)*qd-Mf,top:sg,bottom:Mf,itemHeight:Zd,itemWidth:Md}})),Td);ug(ag(wf,Jg(function(qd){return void 0!==qd}),Mg(function(qd){return qd.length})),
Uc);ug(ag(lf,Mg(function(qd){return qd.height})),ua);ug(ag(ak(lf,re,Td,Sd),Mg(function(qd){qd=so(qd[0],qd[3],qd[1],qd[2].items);return[qd.top,qd.bottom]}),ni(Sj)),ha);L=Ok(ag(bi(Td),Jg(function(qd){return 0<qd.items.length}),fi(Uc),Jg(function(qd){var Zd=qd[0].items;return Zd[Zd.length-1].index===qd[1]-1}),Mg(function(qd){return qd[1]-1}),ni()));ha=Ok(ag(bi(Td),Jg(function(qd){qd=qd.items;return 0<qd.length&&0===qd[0].index}),Cn(0),ni()));ua=Ok(ag(bi(Td),Jg(function(qd){return 0<qd.items.length}),
Mg(function(qd){qd=qd.items;return{startIndex:qd[0].index,endIndex:qd[qd.length-1].index}}),ni(Pk)));ug(ua,Vb.scrollSeekRangeChanged);ug(ag(We,fi(lf,re,Uc,Sd),Mg(function(qd){var Zd=qd[1],pd=qd[2],Md=qd[3],Se=qd[4],Gf=Di(qd[0]);qd=Gf.align;var sg=Gf.behavior,Mf=Gf.offset;Gf=Gf.index;"LAST"===Gf&&(Gf=Md-1);Md=jl(Zd,Se,pd,gu(0,Gf,Jw(Md-1,Gf)));return"end"===qd?Md=Pn(Md-Zd.height+pd.height):"center"===qd&&(Md=Pn(Md-Zd.height/2+pd.height/2)),Mf&&(Md+=Mf),{top:Md,behavior:sg}})),Ua);xc=Rj(ag(Td,Mg(function(qd){return qd.offsetBottom+
qd.bottom})),0);return ug(ag(Ob,Mg(function(qd){return{width:qd.visibleWidth,height:qd.visibleHeight}})),lf),Mh({data:wf,totalCount:Uc,viewportDimensions:lf,itemDimensions:re,scrollTop:d,scrollHeight:Uf,overscan:m,scrollBy:Ha,scrollTo:Ua,scrollToIndex:We,smoothScrollTargetReached:$a,windowViewportRect:Ob,windowScrollTo:pc,useWindowScroll:lc,customScrollParent:Rc,windowScrollContainerState:$b,deviation:hf,scrollContainerState:jb,footerHeight:mb,headerHeight:na,initialItemCount:Dd,gap:Sd},Vb,{gridState:Td,
totalListHeight:xc},Kb,{startReached:ha,endReached:L,rangeChanged:ua,propsReady:kc},a)},nj(Aw,Nn,kv,UC,Ws,Dw,Uq)),hu=["placeholder"],ov=Bi(function(){var a=rg(function($a){return"Item "+$a}),d=rg({}),m=rg(null),L=rg("virtuoso-grid-item"),ha=rg("virtuoso-grid-list"),na=rg(Xp),ua=rg("div"),Ha=rg(Ki),Ua=function($a,jb){return void 0===jb&&(jb=null),Rj(ag(d,Mg(function(mb){return mb[$a]}),ni()),jb)};return{context:m,itemContent:a,components:d,computeItemKey:na,itemClassName:L,listClassName:ha,headerFooterTag:ua,
scrollerRef:Ha,FooterComponent:Ua("Footer"),HeaderComponent:Ua("Header"),ListComponent:Ua("List","div"),ItemComponent:Ua("Item","div"),ScrollerComponent:Ua("Scroller","div"),ScrollSeekPlaceholder:Ua("ScrollSeekPlaceholder","div")}}),BH=Bi(function(a){function d(ha,na,ua){ug(ag(ha,fi(L.components),Mg(function(Ha){var Ua,$a=Ha[0];Ha=Ha[1];return console.warn("react-virtuoso: "+ua+" property is deprecated. Pass components."+na+" instead."),Mh({},Ha,((Ua={})[na]=$a,Ua))})),L.components)}var m=a[0],L=
a[1];a={item:Qk(L.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:hh(),ScrollContainer:hh(),ListContainer:hh(),emptyComponent:hh(),scrollSeek:hh()};return Rh(a.scrollSeek,function(ha){var na=ha.placeholder;ha=wm(ha,hu);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");na=Mh({},(0,L.components)(4),{ScrollSeekPlaceholder:na});(0,L.components)(0,na);(0,m.scrollSeekConfiguration)(0,
ha)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),Mh({},m,L,a)},nj(Fj,ov)),wk=Dh.memo(function(){var a=ek("gridState"),d=ek("listClassName"),m=ek("itemClassName"),L=ek("itemContent"),ha=ek("computeItemKey"),na=ek("isSeeking"),ua=Al("scrollHeight"),Ha=ek("ItemComponent"),Ua=ek("ListComponent"),$a=ek("ScrollSeekPlaceholder"),jb=ek("context"),mb=Al("itemDimensions"),Kb=Al("gap"),Vb=ek("log"),Ob=Hj(function(kc){ua(kc.parentElement.parentElement.scrollHeight);
var xc=kc.firstChild;xc&&mb(xc.getBoundingClientRect());Kb({row:em("row-gap",getComputedStyle(kc).rowGap,Vb),column:em("column-gap",getComputedStyle(kc).columnGap,Vb)})});return(0,Fi.createElement)(Ua,Mh({ref:Ob,className:d},Xj(Ua,jb),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(kc){var xc=ha(kc.index,kc.data,jb);return na?(0,Fi.createElement)($a,Mh({key:xc},Xj($a,jb),{index:kc.index,height:a.itemHeight,width:a.itemWidth})):(0,Fi.createElement)(Ha,Mh({},Xj(Ha,
jb),{className:m,"data-index":kc.index,key:xc}),L(kc.index,kc.data,jb))}))}),Ys=Dh.memo(function(){var a=ek("HeaderComponent"),d=Al("headerHeight"),m=ek("headerFooterTag"),L=Hj(function(na){return d(Ti(na,"height"))}),ha=ek("context");return a?(0,Fi.createElement)(m,{ref:L},(0,Fi.createElement)(a,Xj(a,ha))):null}),dD=Dh.memo(function(){var a=ek("FooterComponent"),d=Al("footerHeight"),m=ek("headerFooterTag"),L=Hj(function(na){return d(Ti(na,"height"))}),ha=ek("context");return a?(0,Fi.createElement)(m,
{ref:L},(0,Fi.createElement)(a,Xj(a,ha))):null}),eD=function(a){a=a.children;var d=(0,Fi.useContext)(dz),m=Al("itemDimensions"),L=Al("viewportDimensions"),ha=Hj(function(na){L(na.getBoundingClientRect())});return Dh.useEffect(function(){d&&(L({height:d.viewportHeight,width:d.viewportWidth}),m({height:d.itemHeight,width:d.itemWidth}))},[d,L,m]),Dh.createElement("div",{style:du,ref:ha},a)},yh=function(a){a=a.children;var d=(0,Fi.useContext)(dz),m=Al("windowViewportRect"),L=Al("itemDimensions"),ha=ek("customScrollParent");
ha=$h(m,ha);return Dh.useEffect(function(){d&&(L({height:d.itemHeight,width:d.itemWidth}),m({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,m,L]),Dh.createElement("div",{ref:ha,style:du},a)},iu=bk(BH,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},Dh.memo(function(a){a=Mh({},a);var d=ek("useWindowScroll"),m=ek("customScrollParent"),L=m||d?yh:eD;return Dh.createElement(m||d?fD:gz,Mh({},a),Dh.createElement(L,null,Dh.createElement(Ys,null),Dh.createElement(wk,null),Dh.createElement(dD,null)))})),Al=iu.usePublisher,ek=iu.useEmitterValue,ju=iu.useEmitter,gz=ro({usePublisher:Al,useEmitterValue:ek,useEmitter:ju}),fD=Op({usePublisher:Al,useEmitterValue:ek,useEmitter:ju}),ku=Bi(function(){var a=rg(function(Ua){return Dh.createElement("td",
null,"Item $",Ua)}),d=rg(null),m=rg(null),L=rg(null),ha=rg({}),na=rg(Xp),ua=rg(Ki),Ha=function(Ua,$a){return void 0===$a&&($a=null),Rj(ag(ha,Mg(function(jb){return jb[Ua]}),ni()),$a)};return{context:d,itemContent:a,fixedHeaderContent:m,fixedFooterContent:L,components:ha,computeItemKey:na,scrollerRef:ua,TableComponent:Ha("Table","table"),TableHeadComponent:Ha("TableHead","thead"),TableFooterComponent:Ha("TableFoot","tfoot"),TableBodyComponent:Ha("TableBody","tbody"),TableRowComponent:Ha("TableRow",
"tr"),ScrollerComponent:Ha("Scroller","div"),EmptyPlaceholder:Ha("EmptyPlaceholder"),ScrollSeekPlaceholder:Ha("ScrollSeekPlaceholder"),FillerRow:Ha("FillerRow")}}),Kw=Bi(function(a){return Mh({},a[0],a[1])},nj(cz,ku)),lu=function(a){return Dh.createElement("tr",null,Dh.createElement("td",{style:{height:a.height}}))},gD=function(a){return Dh.createElement("tr",null,Dh.createElement("td",{style:{height:a.height,padding:0,border:0}}))},hD=Dh.memo(function(){var a=Qj("listState"),d=Lo("sizeRanges"),m=
Qj("useWindowScroll"),L=Qj("customScrollParent"),ha=Lo("windowScrollContainerState"),na=Lo("scrollContainerState");m=L||m?ha:na;var ua=Qj("itemContent");ha=Qj("trackItemSizes");L=aj(d,Qj("itemSize"),ha,m,Qj("log"),void 0,L);d=L.callbackRef;var Ha=L.ref;L=Dh.useState(0);var Ua=L[0],$a=L[1];Mw("deviation",function($b){Ua!==$b&&(Ha.current.style.marginTop=$b+"px",$a($b))});ha=Qj("EmptyPlaceholder");var jb=Qj("ScrollSeekPlaceholder")||lu;m=Qj("FillerRow")||gD;L=Qj("TableBodyComponent");var mb=Qj("TableRowComponent"),
Kb=Qj("computeItemKey"),Vb=Qj("isSeeking");na=Qj("paddingTopAddition");var Ob=Qj("firstItemIndex"),kc=Qj("statefulTotalCount"),xc=Qj("context");if(0===kc&&ha)return(0,Fi.createElement)(ha,Xj(ha,xc));ha=a.offsetTop+na+Ua;na=a.offsetBottom;ha=0<ha?Dh.createElement(m,{height:ha,key:"padding-top"}):null;m=0<na?Dh.createElement(m,{height:na,key:"padding-bottom"}):null;a=a.items.map(function($b){var pc=$b.originalIndex,lc=Kb(pc+Ob,$b.data,xc);return Vb?(0,Fi.createElement)(jb,Mh({},Xj(jb,xc),{key:lc,index:$b.index,
height:$b.size,type:$b.type||"item"})):(0,Fi.createElement)(mb,Mh({},Xj(mb,xc),{key:lc,"data-index":pc,"data-known-size":$b.size,"data-item-index":$b.index,style:{overflowAnchor:"none"}}),ua($b.index,$b.data,xc))});return(0,Fi.createElement)(L,Mh({ref:d,"data-test-id":"virtuoso-item-list"},Xj(L,xc)),[ha].concat(a,[m]))}),Qn=function(a){a=a.children;var d=(0,Fi.useContext)(Ew),m=Lo("viewportHeight"),L=Lo("fixedItemHeight"),ha=Hj(Sm(m,function(na){return Ti(na,"height")}));return Dh.useEffect(function(){d&&
(m(d.viewportHeight),L(d.itemHeight))},[d,m,L]),Dh.createElement("div",{style:du,ref:ha,"data-viewport-type":"element"},a)},Lw=function(a){a=a.children;var d=(0,Fi.useContext)(Ew),m=Lo("windowViewportRect"),L=Lo("fixedItemHeight"),ha=Qj("customScrollParent");ha=$h(m,ha);return Dh.useEffect(function(){d&&(L(d.itemHeight),m({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,m,L]),Dh.createElement("div",{ref:ha,style:du,"data-viewport-type":"window"},a)},pv=bk(Kw,{required:{},optional:{context:"context",
followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",
fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},
events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Dh.memo(function(a){var d=Qj("useWindowScroll"),m=Qj("customScrollParent"),L=Lo("fixedHeaderHeight"),ha=Lo("fixedFooterHeight"),na=Qj("fixedHeaderContent"),ua=Qj("fixedFooterContent"),Ha=Qj("context");
L=Hj(Sm(L,function(mb){return Ti(mb,"height")}));var Ua=Hj(Sm(ha,function(mb){return Ti(mb,"height")}));ha=m||d?CH:iD;d=m||d?Lw:Qn;m=Qj("TableComponent");var $a=Qj("TableHeadComponent"),jb=Qj("TableFooterComponent");na=na?Dh.createElement($a,Mh({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:L},Xj($a,Ha)),na()):null;ua=ua?Dh.createElement(jb,Mh({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Ua},Xj(jb,Ha)),ua()):null;return Dh.createElement(ha,Mh({},a),Dh.createElement(d,
null,Dh.createElement(m,Mh({style:{borderSpacing:0}},Xj(m,Ha)),[na,Dh.createElement(hD,{key:"TableBody"}),ua])))})),Lo=pv.usePublisher,Qj=pv.useEmitterValue,Mw=pv.useEmitter,iD=ro({usePublisher:Lo,useEmitterValue:Qj,useEmitter:Mw}),CH=Op({usePublisher:Lo,useEmitterValue:Qj,useEmitter:Mw}),hz=Jf(ba(22)),ho=function(a){function d(m){m=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+m+" for more information.")||this;if(void 0===
m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}Vp(d,a);return d}(Aq(Error)),Xq={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",
floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",
lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",
mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",
sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},iz=/^#[a-fA-F0-9]{6}$/,jD=/^#[a-fA-F0-9]{8}$/,kD=/^#[a-fA-F0-9]{3}$/,jz=/^#[a-fA-F0-9]{4}$/,Rn=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,
qv=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,rm=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,Nw=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Zs=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},lp=ir(jr,jr.length,[]),Bj=
ba(613),Sn=Jf(ba(22)),am=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const m=a.ownerDocument,L=m.activeElement;L!==a&&a.focus();m.execCommand("insertText",!1,d)||am.insertTextFirefox(a,d);L===m.body?a.blur():L instanceof HTMLElement&&L!==a&&L.focus()}static set(a,d){a.select();am.insert(a,d)}static getSelection(a){const {selectionStart:d,
selectionEnd:m}=a;return a.value.slice(d?d:void 0,m?m:void 0)}static wrapSelection(a,d,m){const {selectionStart:L,selectionEnd:ha}=a,na=am.getSelection(a);am.insert(a,d+na+(null!=m?m:d));a.selectionStart=(L||0)+d.length;a.selectionEnd=(ha||0)+d.length}static replace(a,d,m){let L=0;a.value.replace(d,(...ha)=>{const na=L+ha[ha.length-2],ua=ha[0].length;a.selectionStart=na;a.selectionEnd=na+ua;ha="string"===typeof m?m:m(...ha);am.insert(a,ha);a.selectionStart=na;L+=ha.length-ua;return ha})}static findLineEnd(a,
d){const m=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(m)?d:m+1}static indent(a){var d;const {selectionStart:m,selectionEnd:L,value:ha}=a;var na=ha.slice(m,L);if((na=null==(d=/\n/g.exec(na))?void 0:d.length)&&0<na){d=ha.lastIndexOf("\n",m-1)+1;var ua=a.value.slice(d,L-1);na=ua.replace(/^|\n/g,"$\x26  ");ua=na.length-ua.length;a.setSelectionRange(d,L-1);am.insert(a,na);a.setSelectionRange(m+1,L+ua)}else am.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:m,value:L}=a;var ha=
L.lastIndexOf("\n",d-1)+1;const na=am.findLineEnd(L,m);var ua=a.value.slice(ha,na);const Ha=ua.replace(/(^|\n)(\t| {1,2})/g,"$1");ua=ua.length-Ha.length;a.setSelectionRange(ha,na);am.insert(a,Ha);ha=(ha=/\t| {1,2}/.exec(L.slice(ha,d)))?ha[0].length:0;a.setSelectionRange(d-ha,Math.max(d-ha,m-ua))}},Ow=ba(613),rv=a=>a.stopPropagation(),mu=Sn.memo(function({font:a,text:d,color:m,fontStyle:L,fontSize:ha,fontWeight:na,offsetX:ua=0,offsetY:Ha=0,scale:Ua=1,isEditing:$a=!1,pointerEvents:jb=!1,onBlur:mb,onChange:Kb}){const Vb=
Sn.useRef(null),Ob=Sn.useRef(!1),kc=Sn.useCallback(Uc=>{Kb(Ht.normalizeText(Uc.currentTarget.value))},[Kb]),xc=Sn.useCallback(Uc=>{if("Escape"!==Uc.key)if("Tab"===Uc.key&&0===d.length)Uc.preventDefault();else{if("Meta"!==Uc.key&&!Uc.metaKey)Uc.stopPropagation();else if("z"===Uc.key&&Uc.metaKey){document.execCommand(Uc.shiftKey?"redo":"undo",!1);Uc.stopPropagation();Uc.preventDefault();return}"Tab"===Uc.key&&(Uc.preventDefault(),Uc.shiftKey?am.unindent(Uc.currentTarget):am.indent(Uc.currentTarget),
null==Kb?void 0:Kb(Ht.normalizeText(Uc.currentTarget.value)))}},[Kb]),$b=Sn.useCallback(Uc=>{$a&&(Uc.currentTarget.setSelectionRange(0,0),null==mb?void 0:mb())},[mb]),pc=Sn.useCallback(Uc=>{$a&&Ob.current&&document.activeElement===Uc.currentTarget&&Uc.currentTarget.select()},[$a]),lc=Sn.useCallback(Uc=>{$a&&Uc.stopPropagation()},[$a]);Sn.useEffect(()=>{$a&&requestAnimationFrame(()=>{Ob.current=!0;const Uc=Vb.current;Uc&&(Uc.focus(),Uc.select())})},[$a,mb]);const Rc=Sn.useRef(null);Sn.useLayoutEffect(()=>
{const Uc=Rc.current;if(Uc){var Dd=Vg(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:ha,lineHeight:1,fontWeight:na},4);Uc.style.transform=`scale(${Ua}, ${Ua}) translate(${ua}px, ${Ha}px)`;Uc.style.width=Dd[0]+1+"px";Uc.style.height=Dd[1]+1+"px"}},[d,na,ha,Ha,ua,Ua]);return(0,Ow.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Ow.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Rc,style:{font:a,fontStyle:L,fontSize:ha,fontWeight:na,color:m,pointerEvents:jb?"all":"none",
userSelect:$a?"text":"none"},children:[$a?(0,Ow.jsx)("textarea",{ref:Vb,style:{font:a,color:m,fontStyle:L,fontSize:ha,fontWeight:na},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:m,onFocus:pc,onChange:kc,onKeyDown:xc,onBlur:$b,onPointerDown:lc,onContextMenu:rv,onCopy:rv,onPaste:rv,onCut:rv}):
d,""]})})}),nq=ba(613),nu={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Nm=class extends vn{constructor(){super(...arguments);kb(this,"canEdit",!0);kb(this,"ReactComponent",If(({events:a,isErasing:d,isBinding:m,isSelected:L,isEditing:ha,onEditingEnd:na})=>{const {props:{size:[ua,Ha],stroke:Ua,fill:$a,noFill:jb,strokeWidth:mb,strokeType:Kb,borderRadius:Vb,opacity:Ob,label:kc,italic:xc,fontWeight:$b,fontSize:pc}}=this;var lc=kc||ha?Vg(kc,{fontFamily:"var(--ls-font-family)",fontSize:pc,lineHeight:1,fontWeight:$b},
4):[0,0];const Rc=me.mul(this.props.size,.5);lc=Math.max(.5,Math.min(1,ua/lc[0],Ha/lc[1]));const Uc=this.getBounds(),Dd=hz.useMemo(()=>me.sub(Rc,me.toFixed([Uc.width/2,Uc.height/2])),[Uc,lc,Rc]),Td=hz.useCallback(lf=>{var re;null==(re=this.update)?void 0:re.call(this,{label:lf})},[kc]);return(0,nq.jsxs)("div",Cf(qe({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,nq.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:kc,color:xf(Ua,"text"),offsetX:Dd[0],
offsetY:Dd[1],fontSize:pc,scale:lc,isEditing:ha,onChange:Td,onBlur:na,fontStyle:xc?"italic":"normal",fontWeight:$b,pointerEvents:!!kc}),(0,nq.jsxs)(gp,{opacity:d?.2:Ob,children:[m&&(0,nq.jsx)(is,{mode:"svg",strokeWidth:mb,size:[ua,Ha]}),(0,nq.jsx)("rect",{className:L||!jb?"tl-hitarea-fill":"tl-hitarea-stroke",x:mb/2,y:mb/2,rx:Vb,ry:Vb,width:Math.max(.01,ua-mb),height:Math.max(.01,Ha-mb),pointerEvents:"all"}),(0,nq.jsx)("rect",{x:mb/2,y:mb/2,rx:Vb,ry:Vb,width:Math.max(.01,ua-mb),height:Math.max(.01,
Ha-mb),strokeWidth:mb,stroke:xf(Ua,"stroke"),strokeDasharray:"dashed"===Kb?"8 2":void 0,fill:jb?"none":xf($a,"background")})]})]}))}));kb(this,"setScaleLevel",a=>ui(this,null,function*(){this.update({scaleLevel:a,fontSize:nu[null!=a?a:"md"],strokeWidth:nu[null!=a?a:"md"]/10});this.onResetBounds()}));kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],borderRadius:m,isLocked:L}}=this;return(0,nq.jsx)("g",{children:(0,nq.jsx)("rect",{width:a,height:d,rx:m,ry:m,fill:"transparent",strokeDasharray:L?
"8 2":void 0})})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return Zm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};kb(Nm,"id","box");kb(Nm,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,
opacity:1,label:""});le([Xf],Nm.prototype,"scaleLevel",1);le([Tg],Nm.prototype,"setScaleLevel",2);var Dp=Jf(ba(22)),mp=ba(613),Pw={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Yq=class extends vx{constructor(){super(...arguments);kb(this,"canEdit",!0);kb(this,"ReactComponent",If(({isSelected:a,isErasing:d,events:m,isEditing:L,onEditingEnd:ha})=>{const {size:[na,ua],stroke:Ha,fill:Ua,noFill:$a,strokeWidth:jb,strokeType:mb,opacity:Kb,label:Vb,italic:Ob,fontWeight:kc,fontSize:xc}=this.props;var $b=Vb||L?Vg(Vb,
{fontFamily:"var(--ls-font-family)",fontSize:xc,lineHeight:1,fontWeight:kc},4):[0,0];const pc=me.mul(this.props.size,.5);$b=Math.max(.5,Math.min(1,na/$b[0],ua/$b[1]));const lc=this.getBounds(),Rc=Dp.useMemo(()=>me.sub(pc,me.toFixed([lc.width/2,lc.height/2])),[lc,$b,pc]),Uc=Dp.useCallback(Dd=>{var Td;null==(Td=this.update)?void 0:Td.call(this,{label:Dd})},[Vb]);return(0,mp.jsxs)("div",Cf(qe({},m),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,mp.jsx)(mu,
{font:"18px / 1 var(--ls-font-family)",text:Vb,color:xf(Ha,"text"),offsetX:Rc[0],offsetY:Rc[1],scale:$b,isEditing:L,onChange:Uc,onBlur:ha,fontStyle:Ob?"italic":"normal",fontSize:xc,fontWeight:kc,pointerEvents:!!Vb}),(0,mp.jsxs)(gp,Cf(qe({},m),{opacity:d?.2:Kb,children:[(0,mp.jsx)("ellipse",{className:a||!$a?"tl-hitarea-fill":"tl-hitarea-stroke",cx:na/2,cy:ua/2,rx:Math.max(.01,(na-jb)/2),ry:Math.max(.01,(ua-jb)/2)}),(0,mp.jsx)("ellipse",{cx:na/2,cy:ua/2,rx:Math.max(.01,(na-jb)/2),ry:Math.max(.01,(ua-
jb)/2),strokeWidth:jb,stroke:xf(Ha,"stroke"),strokeDasharray:"dashed"===mb?"8 2":void 0,fill:$a?"none":xf(Ua,"background")})]}))]}))}));kb(this,"setScaleLevel",a=>ui(this,null,function*(){this.update({scaleLevel:a,fontSize:Pw[null!=a?a:"md"],strokeWidth:Pw[null!=a?a:"md"]/10});this.onResetBounds()}));kb(this,"ReactIndicator",If(()=>{const {size:[a,d],isLocked:m}=this.props;return(0,mp.jsx)("g",{children:(0,mp.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:m?
"8 2":"undefined"})})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return Zm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,m],stroke:L,fill:ha,noFill:na,strokeWidth:ua,strokeType:Ha,opacity:Ua}=this.props;return(0,mp.jsxs)("g",{opacity:Ua,children:[(0,mp.jsx)("ellipse",{className:na?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:m/2,rx:Math.max(.01,(d-ua)/2),ry:Math.max(.01,
(m-ua)/2)}),(0,mp.jsx)("ellipse",{cx:d/2,cy:m/2,rx:Math.max(.01,(d-ua)/2),ry:Math.max(.01,(m-ua)/2),strokeWidth:ua,stroke:xf(L,"stroke"),strokeDasharray:"dashed"===Ha?"8 2":void 0,fill:na?"none":xf(ha,"background")})]})}};kb(Yq,"id","ellipse");kb(Yq,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});le([Xf],Yq.prototype,"scaleLevel",1);le([Tg],Yq.prototype,
"setScaleLevel",2);var ou=ba(613),pu=class extends Pv{constructor(){super(...arguments);kb(this,"ReactComponent",If(({events:a})=>{const d=this.getBounds(),m=Ie(),L=m.selectedShapesArray.some(na=>m.shapesInGroups([this]).includes(na)),ha=this.ReactIndicator;return(0,ou.jsxs)(gp,Cf(qe({},a),{className:"tl-group-container",children:[(0,ou.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),L&&(0,ou.jsx)("g",{stroke:"var(--color-selectedFill)",
children:(0,ou.jsx)(ha,{})})]}))}));kb(this,"ReactIndicator",If(()=>{const a=this.getBounds();return(0,ou.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};kb(pu,"id","group");kb(pu,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var sv=ba(613),lD={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Zq=class extends At{constructor(a={}){super(a);kb(this,"ReactComponent",If(({events:d,isErasing:m})=>{const {pointsPath:L,
props:{stroke:ha,strokeWidth:na,opacity:ua}}=this;return(0,sv.jsx)(gp,Cf(qe({},d),{opacity:m?.2:1,children:(0,sv.jsx)("path",{d:L,strokeWidth:16*na,stroke:xf(ha,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:ua})}))}));kb(this,"setScaleLevel",d=>ui(this,null,function*(){this.update({scaleLevel:d,strokeWidth:lD[null!=d?d:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",If(()=>{const {pointsPath:d,props:m}=this;return(0,sv.jsx)("path",{d,fill:"none",
strokeDasharray:m.isLocked?"8 2":"undefined"})}));kb(this,"validateProps",d=>{d=Zm(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});cd(this)}get pointsPath(){const {points:a}=this.props;return zu.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:m,opacity:L}}=this;return(0,sv.jsx)("path",{d:a,strokeWidth:16*m,stroke:xf(d,"stroke"),fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:L})}};kb(Zq,"id","highlighter");kb(Zq,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});le([Xf],Zq.prototype,"pointsPath",1);le([Xf],Zq.prototype,"scaleLevel",1);le([Tg],Zq.prototype,"setScaleLevel",2);var Qw=Jf(ba(22)),Ur=ba(613),Ff={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},gh=class extends vn{constructor(){super(...arguments);
kb(this,"canChangeAspectRatio",!0);kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"htmlAnchorRef",Qw.createRef());kb(this,"setScaleLevel",a=>ui(this,null,function*(){var d;const m=me.mul(this.props.size,Ff[null!=a?a:"md"]/Ff[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield gc();this.update({size:m})}));kb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const m=this.htmlAnchorRef.current.getBoundingClientRect(),[L,ha]=me.div([m.width,m.height],null!=(d=
null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(L||400,1400),10),Math.max(Math.min(ha||400,1400),10)]})}return this});kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m})=>{const {props:{html:L,scaleLevel:ha}}=this,na=pn(),ua=Ie(),Ha=ua.selectedIds.has(this.id),Ua=na||Ha&&!m||"select"!==ua.selectedTool.id,$a=Qw.useCallback(mb=>{Ua||mb.stopPropagation()},[Ua]),jb=Ff[null!=ha?ha:"md"];Qw.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:ua.viewport.camera.zoom}),
ua.persist(!0))},[]);return(0,Ur.jsx)(Eo,Cf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Ur.jsx)("div",{onWheelCapture:$a,onPointerDown:$a,onPointerUp:$a,className:"tl-html-container",style:{pointerEvents:na||!m&&!Ha?"none":"all",overflow:m?"auto":"hidden",width:`calc(100% / ${jb})`,height:`calc(100% / ${jb})`,transform:`scale(${jb})`},children:(0,Ur.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:L.trim()}})})}))}));
kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,Ur.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:m?"8 2":"undefined"})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return Zm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};kb(gh,"id","html");kb(gh,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});le([Xf],
gh.prototype,"scaleLevel",1);le([Tg],gh.prototype,"setScaleLevel",2);var tv=Jf(ba(22)),qu=ba(613),Vr=class extends vn{constructor(){super(...arguments);kb(this,"frameRef",tv.createRef());kb(this,"canEdit",!0);kb(this,"onIFrameSourceChange",a=>{this.update({url:a})});kb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m})=>{tv.useRef(null);const L=
Ie();return(0,qu.jsx)(Eo,Cf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,qu.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:m||L.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,qu.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,qu.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));
kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,qu.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:m?"8 2":"undefined"})}))}};kb(Vr,"id","iframe");kb(Vr,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});le([Tg],Vr.prototype,"onIFrameSourceChange",2);le([Tg],Vr.prototype,"reload",2);var mD=Jf(ba(22)),Wr=ba(613),uv=class extends wx{constructor(){super(...arguments);kb(this,"ReactComponent",If(({events:a,
isErasing:d,isBinding:m,asset:L})=>{const {props:{opacity:ha,objectFit:na,clipping:ua,size:[Ha,Ua]}}=this,[$a,jb,mb,Kb]=Array.isArray(ua)?ua:[ua,ua,ua,ua],{handlers:Vb}=mD.useContext(rj);return(0,Wr.jsxs)(Eo,Cf(qe({},a),{opacity:d?.2:ha,children:[m&&(0,Wr.jsx)(is,{mode:"html",strokeWidth:4,size:[Ha,Ua]}),(0,Wr.jsx)("div",{"data-asset-loaded":!!L,className:"tl-image-shape-container",children:L?(0,Wr.jsx)("img",{src:Vb?Vb.makeAssetUrl(L.src):L.src,draggable:!1,style:{position:"relative",top:-$a,left:-Kb,
width:Ha+(Kb-jb),height:Ua+($a-mb),objectFit:na}}):"Asset is missing"})]}))}));kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,Wr.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:m?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,m;const L=this.getBounds(),{assetId:ha,clipping:na}=this.props;if(a=a.find(ua=>ua.id===ha)){Array.isArray(na);const ua=null==(m=null==(d=window.logseq)?void 0:d.api)?void 0:m.make_asset_url;return(0,Wr.jsx)("image",
{width:L.width,height:L.height,href:ua?ua(a.src):a.src})}return super.getShapeSVGJsx({})}};kb(uv,"id","image");kb(uv,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Rw=Jf(ba(22)),sj=Jf(ba(22)),Sw=ba(613),$s=ba(613),vv={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},DH=sj.memo(function({style:a,start:d,end:m,decorationStart:L,decorationEnd:ha,scaleLevel:na}){const ua=me.dist(d,m);if(2>ua)return null;
const {strokeWidth:Ha}=a,Ua=1+Ha*vv[null!=na?na:"md"]/10,$a="M"+me.toFixed(d)+"L"+me.toFixed(m);na=Math.min(ua/3,Ha*vv[null!=na?na:"md"]);L=L?Bq(d,m,na):null;ha=ha?Bq(m,d,na):null;return(0,$s.jsxs)($s.Fragment,{children:[(0,$s.jsx)("path",{className:"tl-stroke-hitarea",d:$a}),(0,$s.jsx)("path",{d:$a,strokeWidth:Ua,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),L&&(0,$s.jsx)(zq,{left:L.left,middle:d,right:L.right,
stroke:a.stroke,strokeWidth:Ua}),ha&&(0,$s.jsx)(zq,{left:ha.left,middle:m,right:ha.right,stroke:a.stroke,strokeWidth:Ua})]})}),$q=ba(613),Tn=ba(613),nD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Mo=class extends Mu{constructor(){super(...arguments);kb(this,"hideSelection",!0);kb(this,"canEdit",!0);kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m,onEditingEnd:L})=>{const {stroke:ha,handles:{start:na,end:ua},opacity:Ha,label:Ua,italic:$a,fontWeight:jb,fontSize:mb,id:Kb}=this.props,Vb=Ua||
m?Vg(Ua||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:mb,lineHeight:1,fontWeight:jb},6):[0,0],Ob=me.med(na.point,ua.point);var kc=me.dist(na.point,ua.point);kc=Math.max(.5,Math.min(1,Math.max(kc/(Vb[1]+128),kc/(Vb[0]+128))));const xc=this.getBounds(),$b=Rw.useMemo(()=>me.sub(Ob,me.toFixed([xc.width/2,xc.height/2])),[xc,kc,Ob]),pc=Rw.useCallback(lc=>{var Rc;null==(Rc=this.update)?void 0:Rc.call(this,{label:lc})},[Ua]);return(0,Tn.jsxs)("div",Cf(qe({},a),{style:{width:"100%",height:"100%",
overflow:"hidden"},className:"tl-line-container",children:[(0,Tn.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:Ua,fontSize:mb,color:xf(ha,"text"),offsetX:$b[0],offsetY:$b[1],scale:kc,isEditing:m,onChange:pc,onBlur:L,fontStyle:$a?"italic":"normal",fontWeight:jb,pointerEvents:!!Ua}),(0,Tn.jsxs)(gp,{opacity:d?.2:Ha,id:Kb+"_svg",children:[(0,Tn.jsx)(gs,{id:Kb,bounds:xc,labelSize:Vb,offset:$b,scale:kc}),(0,Tn.jsx)("g",{pointerEvents:"none",mask:Ua||m?`url(#${Kb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));
kb(this,"setScaleLevel",a=>ui(this,null,function*(){this.update({scaleLevel:a,fontSize:nD[null!=a?a:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",If(({isEditing:a})=>{const {id:d,decorations:m,label:L,strokeWidth:ha,fontSize:na,fontWeight:ua,handles:{start:Ha,end:Ua},isLocked:$a}=this.props,jb=this.getBounds(),mb=L||a?Vg(L,{fontFamily:"var(--ls-font-family)",fontSize:na,lineHeight:1,fontWeight:ua},6):[0,0],Kb=me.med(Ha.point,Ua.point);var Vb=me.dist(Ha.point,Ua.point);Vb=Math.max(.5,Math.min(1,
Math.max(Vb/(mb[1]+128),Vb/(mb[0]+128))));const Ob=Rw.useMemo(()=>me.sub(Kb,me.toFixed([jb.width/2,jb.height/2])),[jb,Vb,Kb]);return(0,Tn.jsxs)("g",{children:[(0,Tn.jsx)("path",{mask:L?`url(#${d}_clip)`:"",d:Ul({strokeWidth:ha},Ha.point,Ua.point,null==m?void 0:m.start,null==m?void 0:m.end),strokeDasharray:$a?"8 2":"undefined"}),L&&!a&&(0,Tn.jsx)("rect",{x:jb.width/2-mb[0]/2*Vb+Ob[0],y:jb.height/2-mb[1]/2*Vb+Ob[1],width:mb[0]*Vb,height:mb[1]*Vb,rx:4*Vb,ry:4*Vb,fill:"transparent"})]})}));kb(this,"validateProps",
a=>Zm(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,fill:m,strokeWidth:L,strokeType:ha,decorations:na,label:ua,scaleLevel:Ha,handles:{start:Ua,end:$a}}=this.props,jb=me.med(Ua.point,$a.point);return(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(DH,{style:{stroke:xf(d,"text"),fill:m,strokeWidth:L,strokeType:ha},scaleLevel:Ha,start:Ua.point,end:$a.point,decorationStart:null==na?void 0:na.start,decorationEnd:null==na?void 0:na.end}),
a&&(0,Tn.jsx)(Tn.Fragment,{children:(0,Tn.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${jb[0]}, ${jb[1]})`,textAnchor:"middle",fill:xf(d,"text"),stroke:xf(d,"text"),children:ua})})]})}};kb(Mo,"id","line");kb(Mo,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",
strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});le([Xf],Mo.prototype,"scaleLevel",1);le([Tg],Mo.prototype,"setScaleLevel",2);var Un=Jf(ba(22)),xk=ba(613),np={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Xr=If(({type:a,fill:d,opacity:m,children:L})=>{const ha="var(--ls-secondary-background-color)"!==d?xf(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?uf(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,xk.jsxs)("div",
{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,xk.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:m,background:"P"===a?ha:`linear-gradient(0deg, ${d}, ${ha})`}}),(0,xk.jsx)("div",{className:"relative",children:L})]})}),Cj=class extends vn{constructor(a={}){var d;super(a);kb(this,"hideRotateHandle",!0);kb(this,"canChangeAspectRatio",!0);kb(this,"canFlip",!0);kb(this,"canEdit",!0);kb(this,"persist",null);kb(this,
"initialHeightCalculated",!0);kb(this,"getInnerHeight",null);kb(this,"setCollapsed",m=>ui(this,null,function*(){var L;if("B"===this.props.blockType){if(this.update({compact:m}),this.canResize[1]=!m,!m)this.onResetBounds()}else{const ha=this.props.size[1];this.canResize[1]=!m;this.update({isAutoResizing:!m,collapsed:m,size:[this.props.size[0],m?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:m?ha:this.props.collapsedHeight})}null==(L=this.persist)?void 0:L.call(this)}));kb(this,
"setScaleLevel",m=>ui(this,null,function*(){var L;const ha=me.mul(this.props.size,np[null!=m?m:"md"]/np[null!=(L=this.props.scaleLevel)?L:"md"]);this.update({scaleLevel:m});yield gc();this.update({size:ha})}));kb(this,"onResetBounds",m=>{m=this.getAutoResizeHeight();null!==m&&1<Math.abs(m-this.props.size[1])&&(this.update({size:[this.props.size[0],m]}),this.initialHeightCalculated=!0);return this});kb(this,"onResize",(m,L)=>{var ha;const {bounds:na,rotation:ua,scale:[Ha,Ua]}=L;m=[...this.scale];0>
Ha&&(m[0]*=-1);0>Ua&&(m[1]*=-1);L=na.height;this.props.isAutoResizing&&(L=null!=(ha=this.getAutoResizeHeight())?ha:L);return this.update({point:[na.minX,na.minY],size:[Math.max(1,na.width),Math.max(1,L)],scale:m,rotation:ua})});kb(this,"PortalComponent",If(({})=>{const {props:{pageId:m,fill:L,opacity:ha}}=this,{renderers:na}=Un.useContext(rj),ua=Ie(),Ha=Un.useRef(null),[,Ua]=this.useComponentSize(Ha,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");
if(null==na||!na.Page)return null;const {Page:$a,Block:jb}=na,[mb,Kb]=Un.useState(!1);Un.useEffect(()=>{var Vb,Ob;if(this.props.isAutoResizing){const kc=(null!=(Ob=null==(Vb=this.getInnerHeight)?void 0:Vb.call(this))?Ob:Ua)+this.getHeaderHeight();Ua&&1<Math.abs(kc-this.props.size[1])&&(this.update({size:[this.props.size[0],kc]}),mb&&ua.persist(!0))}},[Ua,this.props.isAutoResizing]);Un.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ua.persist(!0)})},[this.initialHeightCalculated]);
Un.useEffect(()=>{setTimeout(function(){Kb(!0)})},[]);return(0,xk.jsxs)(xk.Fragment,{children:[(0,xk.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>ua.viewport.camera.zoom?"optimizeSpeed":"auto",background:L&&"var(--ls-secondary-background-color)"!==L?uf(L)?`var(--ls-highlight-color-${L})`:L:"var(--ls-secondary-background-color)",opacity:ha}}),(0,xk.jsx)("div",{ref:Ha,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?
"visible":"auto"},children:(mb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,xk.jsx)(jb,{blockId:m}):(0,xk.jsx)($a,{pageName:m}))})]})}));kb(this,"ReactComponent",If(m=>{var L;const {events:ha,isErasing:na,isEditing:ua,isBinding:Ha}=m,{props:{opacity:Ua,pageId:$a,fill:jb,scaleLevel:mb,strokeWidth:Kb,size:Vb}}=this,Ob=Ie(),{renderers:kc,handlers:xc}=Un.useContext(rj);this.persist=()=>Ob.persist();const $b=pn(),pc=Ob.selectedIds.has(this.id)&&1===Ob.selectedIds.size,
lc=Ob.isIn("logseq-portal.creating")&&!$a,Rc=($b||pc&&!ua||"select"!==Ob.selectedTool.id)&&!lc,Uc=Un.useCallback(qd=>{Rc||qd.stopPropagation()},[Rc]),Dd=1===Ob.selectedShapesArray.length&&Ob.selectedShapesArray.some(qd=>"logseq-portal"===qd.type&&qd.props.id!==this.props.id&&$a&&qd.props.pageId===$a),Td=np[null!=mb?mb:"md"];Un.useEffect(()=>this.props.collapsed&&ua?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):
()=>{},[ua,this.props.collapsed]);Un.useEffect(()=>{if(lc){const qd=[Ob.viewport.bounds.width,Ob.viewport.bounds.height],Zd=Ob.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(Zd[0]>qd[0]-400||Zd[1]>qd[1]-240||1.5<Ob.viewport.camera.zoom||.5>Ob.viewport.camera.zoom)&&Ob.viewport.zoomToBounds(Cf(qe({},this.bounds),{minY:this.bounds.maxY+25}))}},[Ob.viewport.bounds.height.toFixed(2)]);const lf=Un.useCallback(qd=>{this.initialHeightCalculated=!1;const Zd=Wg(qd)?"B":"P";this.update({pageId:qd,
size:[400,320],blockType:Zd,compact:"B"===Zd});Ob.selectTool("select");Ob.history.resume();Ob.history.persist()},[]),re=this.PortalComponent;var We=Un.useMemo(()=>{var qd;if($a&&"B"===this.props.blockType)return null==(qd=null==xc?void 0:xc.queryBlockByUUID($a))?void 0:qd.content},[null==xc?void 0:xc.queryBlockByUUID,$a]);We="B"===this.props.blockType&&"string"!==typeof We;const Uf=(!this.props.collapsed||ua)&&!We;if(null==kc||!kc.Page)return null;const {Breadcrumb:hf,PageName:wf}=kc,Sd={width:`calc(100% / ${Td})`,
height:`calc(100% / ${Td})`,opacity:na?.2:1};1!==Td&&(Sd.transform=`scale(${Td})`);return(0,xk.jsxs)(Eo,Cf(qe({style:{pointerEvents:"all"}},ha),{children:[Ha&&(0,xk.jsx)(is,{mode:"html",strokeWidth:Kb,size:Vb}),(0,xk.jsx)("div",{"data-inner-events":!Rc,onWheelCapture:Uc,onPointerDown:Uc,onPointerUp:Uc,style:{width:"100%",height:"100%",pointerEvents:$b||!ua&&!pc?"none":"all"},children:lc?(0,xk.jsx)(qD,{onChange:lf,onAddBlock:qd=>{setTimeout(()=>{var Zd,pd,Md;Ob.api.editShape(this);null==(Md=null==
(pd=null==(Zd=window.logseq)?void 0:Zd.api)?void 0:pd.edit_block)?void 0:Md.call(pd,qd)})},placeholder:"Create or search your graph..."}):(0,xk.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":$a,"data-portal-selected":Dd,"data-editing":ua,style:Sd,children:[!this.props.compact&&!We&&(0,xk.jsx)(Xr,{type:null!=(L=this.props.blockType)?L:"P",fill:jb,opacity:Ua,children:"P"===this.props.blockType?(0,xk.jsx)(wf,{pageName:$a}):(0,xk.jsx)(hf,{blockId:$a})}),
We&&(0,xk.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),Uf&&(0,xk.jsx)(re,qe({},m))]})})]}))}));kb(this,"ReactIndicator",If(()=>{const m=this.getBounds();return(0,xk.jsx)("rect",{width:m.width,height:m.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));kb(this,"validateProps",m=>{var L;if(void 0!==m.size){const ha=np[null!=(L=this.props.scaleLevel)?L:"md"];m.size[0]=Math.max(m.size[0],60*ha);m.size[1]=Math.max(m.size[1],40*ha)}return Zm(this,
m)});cd(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [m,L]=Un.useState([0,0]),ha=Ie();Un.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const na=
d?a.current.querySelector(d):a.current;if(na){const ua=()=>{const {width:Ua,height:$a}=na.getBoundingClientRect(),jb=me.div([Ua,$a],ha.viewport.camera.zoom);L(jb);return jb};ua();this.getInnerHeight=()=>ua()[1];const Ha=new ResizeObserver(()=>{ua()});Ha.observe(na);return()=>{Ha.disconnect()}}}return()=>{}},10)},[a,d]);return m}getHeaderHeight(){var a;const d=np[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+
this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,m;const L=this.getBounds();return(0,xk.jsxs)(xk.Fragment,{children:[(0,xk.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?uf(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:xf(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:L.width,rx:8,ry:8,
height:L.height}),!this.props.compact&&(0,xk.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?xf(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(m=this.props.opacity)?m:.2,x:1,y:1,width:L.width-2,height:38,rx:8,ry:8}),(0,xk.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${L.width/2}, ${10+L.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",
stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};kb(Cj,"id","logseq-portal");kb(Cj,"defaultSearchQuery","");kb(Cj,"defaultSearchFilter",null);kb(Cj,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});le([Xf],Cj.prototype,"collapsed",
1);le([Tg],Cj.prototype,"setCollapsed",2);le([Xf],Cj.prototype,"scaleLevel",1);le([Tg],Cj.prototype,"setScaleLevel",2);var {min:ar,PI:ru}=Math,su=ru+1E-4,at=ba(613),kz={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Ep={easing:a=>Math.sin(a*Math.PI/2),simulatePressure:!0},bt={easing:a=>a*a,simulatePressure:!1},br=class extends At{constructor(a={}){super(a);kb(this,"ReactComponent",If(({events:d,isErasing:m})=>{const {props:{opacity:L}}=this;return(0,at.jsx)(gp,Cf(qe({},d),{opacity:m?.2:L,children:this.getShapeSVGJsx()}))}));
kb(this,"setScaleLevel",d=>ui(this,null,function*(){this.update({scaleLevel:d,strokeWidth:kz[null!=d?d:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",If(()=>{const {pointsPath:d}=this;return(0,at.jsx)("path",{d,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));kb(this,"validateProps",d=>{d=Zm(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});cd(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=Cf(qe({size:1+1.5*a.strokeWidth,
thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?Ep:bt),{last:a.isComplete}),a=rk(a.points,d),d=zu.getSvgPathFromStroke(Dq(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:m,strokeType:L}}=this;return(0,at.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:m/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:xf(d,"text"),fill:xf(d,"text"),strokeDasharray:"dashed"===L?"12 4":void 0})}};
kb(br,"id","pencil");kb(br,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});le([Xf],br.prototype,"pointsPath",1);le([Xf],br.prototype,"scaleLevel",1);le([Tg],br.prototype,"setScaleLevel",2);var ch=Jf(ba(22)),io=ba(613),Tw={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},No=class extends zr{constructor(){super(...arguments);kb(this,"canEdit",!0);kb(this,"ReactComponent",If(({events:a,isErasing:d,
isSelected:m,isEditing:L,onEditingEnd:ha})=>{const {offset:[na,ua],props:{stroke:Ha,fill:Ua,noFill:$a,strokeWidth:jb,opacity:mb,strokeType:Kb,label:Vb,italic:Ob,fontWeight:kc,fontSize:xc}}=this,$b=this.getVertices(jb/2).join();var pc=Vb||L?Vg(Vb,{fontFamily:"var(--ls-font-family)",fontSize:xc,lineHeight:1,fontWeight:kc},4):[0,0];const lc=[this.props.size[0]/2,2*this.props.size[1]/3];pc=Math.max(.5,Math.min(1,this.props.size[0]/(2*pc[0]),this.props.size[1]/(2*pc[1])));const Rc=this.getBounds(),Uc=
ch.useMemo(()=>me.sub(lc,me.toFixed([Rc.width/2,Rc.height/2])),[Rc,pc,lc]),Dd=ch.useCallback(Td=>{var lf;null==(lf=this.update)?void 0:lf.call(this,{label:Td})},[Vb]);return(0,io.jsxs)("div",Cf(qe({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,io.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:Vb,fontSize:xc,color:xf(Ha,"text"),offsetX:Uc[0],offsetY:Uc[1]/pc,scale:pc,isEditing:L,onChange:Dd,onBlur:ha,fontStyle:Ob?"italic":"normal",fontWeight:kc,pointerEvents:!!Vb}),(0,io.jsx)(gp,
{opacity:d?.2:mb,children:(0,io.jsxs)("g",{transform:`translate(${na}, ${ua})`,children:[(0,io.jsx)("polygon",{className:m||!$a?"tl-hitarea-fill":"tl-hitarea-stroke",points:$b}),(0,io.jsx)("polygon",{points:$b,stroke:xf(Ha,"stroke"),fill:$a?"none":xf(Ua,"background"),strokeWidth:jb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Kb?"8 2":void 0})]})})]}))}));kb(this,"setScaleLevel",a=>ui(this,null,function*(){this.update({scaleLevel:a,fontSize:Tw[null!=a?a:"md"],strokeWidth:Tw[null!=a?
a:"md"]/10});this.onResetBounds()}));kb(this,"ReactIndicator",If(()=>{const {offset:[a,d],props:{strokeWidth:m,isLocked:L}}=this;return(0,io.jsx)("g",{children:(0,io.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(m/2).join(),strokeDasharray:L?"8 2":"undefined"})})}));kb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return Zm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,m],props:{stroke:L,
fill:ha,noFill:na,strokeWidth:ua,opacity:Ha,strokeType:Ua}}=this;a=this.getVertices(ua/2).join();return(0,io.jsxs)("g",{transform:`translate(${d}, ${m})`,opacity:Ha,children:[(0,io.jsx)("polygon",{className:na?"tl-hitarea-stroke":"tl-hitarea-fill",points:a}),(0,io.jsx)("polygon",{points:a,stroke:xf(L,"stroke"),fill:na?"none":xf(ha,"background"),strokeWidth:ua,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Ua?"8 2":void 0})]})}};kb(No,"id","polygon");kb(No,"defaultProps",{id:"polygon",
parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});le([Xf],No.prototype,"scaleLevel",1);le([Tg],No.prototype,"setScaleLevel",2);var gn=Jf(ba(22)),oq=ba(613),Fp={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ct=class extends xx{constructor(){super(...arguments);kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m,onEditingEnd:L})=>{const {props:{opacity:ha,
fontFamily:na,fontSize:ua,fontWeight:Ha,italic:Ua,lineHeight:$a,text:jb,stroke:mb,padding:Kb}}=this,Vb=gn.useRef(null),Ob=gn.useRef(!1),kc=gn.useRef(null),xc=gn.useCallback(Uc=>{const {isSizeLocked:Dd}=this.props;Uc=Ht.normalizeText(Uc.currentTarget.value);Dd?this.update({text:Uc,size:this.getAutoSizedBoundingBox({text:Uc})}):this.update({text:Uc})},[]),$b=gn.useCallback(Uc=>{if("Escape"!==Uc.key)if("Tab"===Uc.key&&0===jb.length)Uc.preventDefault();else{if("Meta"!==Uc.key&&!Uc.metaKey)Uc.stopPropagation();
else if("z"===Uc.key&&Uc.metaKey){Uc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Uc.stopPropagation();Uc.preventDefault();return}"Tab"===Uc.key&&(Uc.preventDefault(),Uc.shiftKey?am.unindent(Uc.currentTarget):am.indent(Uc.currentTarget),this.update({text:Ht.normalizeText(Uc.currentTarget.value)}))}},[]),pc=gn.useCallback(Uc=>{m&&(null==L?void 0:L())},[L]),lc=gn.useCallback(Uc=>{m&&Ob.current&&document.activeElement===Uc.currentTarget&&Uc.currentTarget.select()},[m]),Rc=
gn.useCallback(Uc=>{m&&Uc.stopPropagation()},[m]);gn.useEffect(()=>{m&&requestAnimationFrame(()=>{Ob.current=!0;const Uc=Vb.current;Uc&&(Uc.focus(),Uc.select())})},[m,L]);gn.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,oq.jsx)(Eo,Cf(qe({},a),{opacity:d?.2:ha,children:(0,oq.jsx)("div",{ref:kc,className:"tl-text-shape-wrapper","data-hastext":!!jb,"data-isediting":m,style:{fontFamily:na,fontStyle:Ua?"italic":"normal",fontSize:ua,fontWeight:Ha,
padding:Kb,lineHeight:$a,color:xf(mb,"text")},children:m?(0,oq.jsx)("textarea",{ref:Vb,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:jb,onFocus:lc,onChange:xc,onKeyDown:$b,onBlur:pc,onPointerDown:Rc}):(0,oq.jsxs)(oq.Fragment,{children:[jb,""]})})}))}));kb(this,"setScaleLevel",a=>ui(this,null,function*(){this.update({scaleLevel:a,
fontSize:Fp[null!=a?a:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",If(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:m},bounds:L}=this;return a?null:(0,oq.jsx)("rect",{width:L.width,height:L.height,rx:d,ry:d,fill:"transparent",strokeDasharray:m?"8 2":"undefined"})}));kb(this,"validateProps",a=>Zm(this,a));kb(this,"getBounds",()=>{const [a,d]=this.props.point,[m,L]=this.props.size;return{minX:a,minY:d,maxX:a+m,maxY:d+L,width:m,height:L}});kb(this,"onResizeStart",({isSingle:a})=>
{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});kb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:m=this.props.fontFamily,fontSize:L=this.props.fontSize,fontWeight:ha=this.props.fontWeight,lineHeight:na=this.props.lineHeight,padding:ua=
this.props.padding}=a,[Ha,Ua]=Vg(d,{fontFamily:m,fontSize:L,lineHeight:na,fontWeight:ha},ua);return[Ha,Ua]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:d,stroke:m,fontSize:L,fontFamily:ha}}=this;a=this.getBounds();return(0,oq.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,oq.jsx)("div",{style:{color:xf(m,"text"),fontSize:L,fontFamily:ha,display:"contents"},children:d})})}};
kb(ct,"id","text");kb(ct,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});le([Xf],ct.prototype,"scaleLevel",1);le([Tg],ct.prototype,"setScaleLevel",2);var Oo=Jf(ba(22)),cr=ba(613),tu=class extends vn{constructor(){super(...arguments);kb(this,"canFlip",!1);kb(this,"canEdit",
!0);kb(this,"canChangeAspectRatio",!1);kb(this,"ReactComponent",If(({events:a,isErasing:d,asset:m,isEditing:L})=>{const {props:{opacity:ha}}=this,na=pn();var ua=Ie();const Ha=ua.selectedIds.has(this.id),Ua=na||Ha&&!L||"select"!==ua.selectedTool.id;ua=Oo.useCallback(jb=>{Ua||jb.stopPropagation()},[Ua]);const {handlers:$a}=Oo.useContext(rj);return(0,cr.jsx)(Eo,Cf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:ha}},a),{children:(0,cr.jsx)("div",{onWheelCapture:ua,onPointerDown:ua,onPointerUp:ua,
className:"tl-video-container",style:{pointerEvents:na||!L&&!Ha?"none":"all",overflow:L?"auto":"hidden"},children:m&&(0,cr.jsx)("video",{controls:!0,src:$a?$a.makeAssetUrl(m.src):m.src})})}))}));kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,cr.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:m?"8 2":"undefined"})}))}};kb(tu,"id","video");kb(tu,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",
clipping:0,isAspectRatioLocked:!0});var Bl=ba(613),Uw=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,wv=class extends vn{constructor(){super(...arguments);kb(this,"aspectRatio",480/853);kb(this,"canChangeAspectRatio",!1);kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:wv.defaultProps.size})});kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m})=>{const L=Ie();return(0,Bl.jsx)(Eo,
Cf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Bl.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:m||L.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,Bl.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Bl.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",
width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,Bl.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,Bl.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,Bl.jsxs)("g",
{children:[(0,Bl.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,Bl.jsx)("g",{children:(0,Bl.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,Bl.jsxs)("g",{fill:"#fff",children:[(0,Bl.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,Bl.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,Bl.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:m?"8 2":"undefined"})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return Zm(this,a)})}get embedId(){var a,d;const m=this.props.url,
L=m.match(Uw);return null!=(d=null!=(a=null==L?void 0:L[1])?a:m)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,Bl.jsxs)("g",{children:[(0,Bl.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,Bl.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Bl.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},dr=wv;kb(dr,"id","youtube");kb(dr,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});le([Xf],dr.prototype,"embedId",1);le([Tg],dr.prototype,"onYoutubeLinkChange",2);var Yr=Jf(ba(22)),Gp=ba(613),lz=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,Vw=class extends vn{constructor(){super(...arguments);kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"initialHeightCalculated",
!0);kb(this,"getInnerHeight",null);kb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:Vw.defaultProps.size})});kb(this,"ReactComponent",If(({events:a,isErasing:d,isEditing:m})=>{const {renderers:{Tweet:L}}=Yr.useContext(rj),ha=Ie(),na=Yr.useRef(null),[,ua]=this.useComponentSize(na);Yr.useEffect(()=>{var Ha,Ua;const $a=null!=(Ua=null==(Ha=this.getInnerHeight)?void 0:Ha.call(this))?Ua:ua;ua&&1<Math.abs($a-this.props.size[1])&&(this.update({size:[this.props.size[0],$a]}),ha.persist(!0))},[ua]);
Yr.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ha.persist(!0)})},[this.initialHeightCalculated]);return(0,Gp.jsx)(Eo,Cf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Gp.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:m||ha.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,Gp.jsx)("div",{ref:na,children:(0,Gp.jsx)(L,{tweetId:this.embedId})}):null})}))}));
kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,d],isLocked:m}}=this;return(0,Gp.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:m?"8 2":"undefined"})}));kb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});kb(this,"onResize",(a,d)=>{var m;const {bounds:L,rotation:ha,scale:[na,ua]}=d;a=[...this.scale];0>na&&(a[0]*=-1);0>ua&&(a[1]*=
-1);d=null!=(m=this.getAutoResizeHeight())?m:L.height;return this.update({point:[L.minX,L.minY],size:[Math.max(1,L.width),Math.max(1,d)],scale:a,rotation:ha})});kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return Zm(this,a)})}get embedId(){var a,d;const m=this.props.url,L=m.match(lz);return null!=(d=null!=(a=null==L?void 0:L[1])?a:m)?d:""}useComponentSize(a,d=""){const [m,L]=Yr.useState([0,0]),ha=Ie();Yr.useEffect(()=>
{if(null==a?0:a.current){const na=d?a.current.querySelector(d):a.current;if(na){const ua=()=>{const {width:Ua,height:$a}=na.getBoundingClientRect(),jb=me.div([Ua,$a],ha.viewport.camera.zoom);L(jb);return jb};ua();this.getInnerHeight=()=>ua()[1];const Ha=new ResizeObserver(()=>{ua()});Ha.observe(na);return()=>{Ha.disconnect()}}}return()=>{}},[a,d]);return m}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,Gp.jsxs)("g",
{children:[(0,Gp.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,Gp.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Gp.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},dt=Vw;kb(dt,"id","tweet");kb(dt,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});le([Xf],dt.prototype,"embedId",1);le([Tg],dt.prototype,"onTwitterLinkChange",2);var Ww=Jf(ba(22)),Xw=ba(613),et=class extends vn{constructor(){super(...arguments);kb(this,"frameRef",Ww.createRef());kb(this,"canChangeAspectRatio",!0);kb(this,"canFlip",!0);kb(this,"canEdit",!0);kb(this,"ReactComponent",
If(({events:a,asset:d,isErasing:m,isEditing:L})=>{Ww.useRef(null);const {handlers:ha}=Ww.useContext(rj);Ie();const na=pn();return(0,Xw.jsx)(Eo,Cf(qe({style:{overflow:"hidden",pointerEvents:"all",opacity:m?.2:1}},a),{children:d?(0,Xw.jsx)("embed",{src:ha?ha.inflateAsset(d.src).url:d.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!na&&L?"all":"none"}}):null}))}));kb(this,"ReactIndicator",If(()=>{const {props:{size:[a,
d],isLocked:m}}=this;return(0,Xw.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:m?"8 2":"undefined"})}))}};kb(et,"id","pdf");kb(et,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});ba(613);var Zr=[Nm,Yq,Zq,uv,tu,Mo,br,No,ct,dr,dt,Vr,gh,et,Cj,pu],xv=class extends Kq{constructor(){super(...arguments);kb(this,"Shape",Nm)}};kb(xv,"id","box");kb(xv,"shortcut","whiteboard/rectangle");var Om=class extends Kq{constructor(){super(...arguments);
kb(this,"Shape",Yq)}};kb(Om,"id","ellipse");kb(Om,"shortcut","whiteboard/ellipse");var ft=class extends Qv{};kb(ft,"id","erase");kb(ft,"shortcut","whiteboard/eraser");var hn=class extends Nu{constructor(){super(...arguments);kb(this,"Shape",Zq);kb(this,"simplify",!0);kb(this,"simplifyTolerance",.618)}};kb(hn,"id","highlighter");kb(hn,"shortcut","whiteboard/highlighter");var mz=class extends Rv{constructor(){super(...arguments);kb(this,"Shape",Mo)}};kb(mz,"id","line");kb(mz,"shortcut","whiteboard/connector");
var Pm=class extends Nu{constructor(){super(...arguments);kb(this,"Shape",br);kb(this,"simplify",!1)}};kb(Pm,"id","pencil");kb(Pm,"shortcut","whiteboard/pencil");var Hp=class extends Kq{constructor(){super(...arguments);kb(this,"Shape",No)}};kb(Hp,"id","polygon");var Yw=class extends Sv{constructor(){super(...arguments);kb(this,"Shape",ct)}};kb(Yw,"id","text");kb(Yw,"shortcut","whiteboard/text");var oD=class extends Kq{constructor(){super(...arguments);kb(this,"Shape",dr)}};kb(oD,"id","youtube");
var pD=class extends Ui{constructor(){super(...arguments);kb(this,"creatingShape");kb(this,"offset",[0,0]);kb(this,"onEnter",()=>{this.app.history.pause();bd(()=>{var a=me.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(a=me.snap(a,8));this.creatingShape=a=new Cj({id:hk(),parentId:this.app.currentPage.id,point:a,size:Cj.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});
kb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});kb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};kb(pD,"id","creating");var Cl=class extends Ui{constructor(){super(...arguments);
kb(this,"cursor","crosshair");kb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};kb(Cl,"id","idle");var op=class extends Ar{constructor(){super(...arguments);kb(this,"Shape",Cj);kb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};kb(op,"id","logseq-portal");kb(op,"shortcut","whiteboard/portal");kb(op,"states",[Cl,pD]);kb(op,"initial","idle");var Po=class extends Kq{constructor(){super(...arguments);kb(this,"Shape",gh)}};kb(Po,"id","youtube");var Zw=class extends Kq{constructor(){super(...arguments);
kb(this,"Shape",Vr)}};kb(Zw,"id","iframe");var pi=Jf(ba(616)),pp=ba(613),EH=new Map(Zr.map(a=>[a.id,a])),$w=class{constructor(a){kb(this,"shapes");kb(this,"pageId");kb(this,"assets");a&&this.load(a)}load(a){var d;const m=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==m?void 0:m.id;this.assets=a.assets;this.shapes=null==m?void 0:m.shapes.map(L=>{var ha=L.type;if(!ha)throw Error("No shape type provided.");const na=EH.get(ha);if(!na)throw Error(`Could not find shape class for ${ha}`);
return new na(L)}).filter(L=>"group"!==L.type)}generatePreviewJsx(a,d){var m,L;const ha=[...(null!=(m=this.shapes)?m:[]).map($a=>$a.getRotatedBounds())];(m=null==a?void 0:a.currentView)&&ha.push(m);let na=Qf.getCommonBounds(ha);if(!na)return null;na=Qf.expandBounds(na,16);na=d?Qf.ensureRatio(na,d):na;const ua=$a=>[($a[0]-na.minX).toFixed(2),($a[1]-na.minY).toFixed(2)],[Ha,Ua]=m?ua([m.minX,m.minY]):[0,0];return na&&(0,pp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":na.minX.toFixed(2),
"data-common-bound-y":na.minY.toFixed(2),"data-common-bound-width":na.width.toFixed(2),"data-common-bound-height":na.height.toFixed(2),viewBox:[0,0,na.width,na.height].join(" "),children:[(0,pp.jsx)("defs",{children:m&&(0,pp.jsxs)(pp.Fragment,{children:[(0,pp.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Ha}, ${Ua})`,width:m.width,height:m.height}),(0,pp.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,pp.jsx)("rect",{width:na.width,height:na.height,fill:"white"}),(0,pp.jsx)("use",
{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,pp.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(L=this.shapes)?void 0:L.map($a=>{var jb,mb;const {bounds:Kb,props:{rotation:Vb}}=$a,[Ob,kc]=ua([Kb.minX,Kb.minY]),xc=+(180*((null!=Vb?Vb:0)+(null!=(jb=Kb.rotation)?jb:0))/Math.PI).toFixed(2),[$b,pc]=[(Kb.width/2).toFixed(2),(Kb.height/2).toFixed(2)];return(0,pp.jsx)("g",{transform:[`translate(${Ob}, ${kc})`,`rotate(${xc}, ${$b}, ${pc})`].join(" "),children:$a.getShapeSVGJsx({assets:null!=
(mb=this.assets)?mb:[]})},$a.id)})}),(0,pp.jsx)("rect",{mask:m?`url(#${this.pageId}-camera-mask)`:"",width:na.width,height:na.height,fill:"transparent"}),m&&(0,pp.jsx)("use",{id:"minimap-camera-rect","data-x":Ha,"data-y":Ua,"data-width":m.width,"data-height":m.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?pi.default.renderToString(a):""}},qi=Jf(ba(22)),er=ba(613),Qo=qi.forwardRef((a,
d)=>{var {value:m,className:L}=a;a=bg(a,["autoResize","value","className"]);return(0,er.jsx)("div",{className:"tl-input"+(L?" "+L:""),children:(0,er.jsxs)("div",{className:"tl-input-sizer",children:[(0,er.jsx)("div",{className:"tl-input-hidden",children:m}),(0,er.jsx)("input",qe({ref:d,value:m,className:"tl-text-input",type:"text"},a))]})})}),ci=ba(613),pq=({type:a,active:d})=>(0,ci.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,ci.jsx)("i",{className:`tie tie-${({B:"block",P:"page",
WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),yv=(a,d)=>(0,ci.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((m,L)=>1===L%2?(0,ci.jsx)("mark",{className:"tl-highlighted",children:m}):m).map((m,L)=>(0,ci.jsx)(pm.default.Fragment,{children:m},L))}),FH=(a,d)=>{const {handlers:m}=pm.default.useContext(rj),[L,ha]=pm.default.useState(null),na=Gn(a,200);pm.default.useEffect(()=>{let ua=
!1;if(0<na.length){const Ha={"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?Ha["pages?"]=!1:"P"===d&&(Ha["blocks?"]=!1);m.search(na,Ha).then(Ua=>{ua||ha(Ua)})}else ha(null);return()=>{ua=!0}},[na,null==m?void 0:m.search]);return L},qD=If(({className:a,style:d,placeholder:m,onChange:L,onBlur:ha,onAddBlock:na})=>{const [ua,Ha]=pm.default.useState(Cj.defaultSearchQuery),[Ua,$a]=pm.default.useState(Cj.defaultSearchFilter),jb=pm.default.useRef(null),{handlers:mb,renderers:Kb}=pm.default.useContext(rj),
Vb=mb.t,Ob=pm.default.useCallback(re=>{var We;setTimeout(()=>L(re));null==(We=jb.current)?void 0:We.blur();re&&(Cj.defaultSearchQuery="",Cj.defaultSearchFilter=null)},[]),kc=pm.default.useCallback(re=>{if(re=null==mb?void 0:mb.addNewBlock(re))Ob(re),null==na?void 0:na(re);return re},[na]),xc=pm.default.useRef(null),[$b,pc]=pm.default.useState(0),lc=FH(ua,Ua),[Rc,Uc]=pm.default.useState("circle-plus"),[Dd,Td]=pm.default.useState(!1);pm.default.useEffect(()=>{setTimeout(()=>{var re;null==(re=jb.current)?
void 0:re.focus()})},[Ua]);pm.default.useEffect(()=>{Cj.defaultSearchQuery=ua;Cj.defaultSearchFilter=Ua},[ua,Ua]);const lf=pm.default.useMemo(()=>{var re;const We=[],Uf=null==Kb?void 0:Kb.Breadcrumb;if(!Uf||!mb)return[];na&&We.push({actionIcon:"circle-plus",onChosen:()=>!!kc(ua),element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(pq,{active:!0,type:"BA"}),0<ua.length?(0,ci.jsxs)(ci.Fragment,{children:[(0,ci.jsx)("strong",{children:Vb("whiteboard/new-block")}),ua]}):
(0,ci.jsx)("strong",{children:Vb("whiteboard/new-block-no-colon")})]})});(null==(re=null==lc?void 0:lc.pages)?0:re.some(hf=>hf.toLowerCase()===ua.toLowerCase()))||!ua||We.push({actionIcon:"circle-plus",onChosen:()=>{Ob(ua);return!0},element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(pq,{active:!0,type:"PA"}),(0,ci.jsx)("strong",{children:Vb("whiteboard/new-page")}),ua]})},{actionIcon:"circle-plus",onChosen:()=>{null==mb?void 0:mb.addNewWhiteboard(ua);Ob(ua);return!0},
element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(pq,{active:!0,type:"WA"}),(0,ci.jsx)("strong",{children:Vb("whiteboard/new-whiteboard")}),ua]})});0===ua.length&&null===Ua&&We.push({actionIcon:"search",onChosen:()=>{$a("B");return!0},element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(pq,{type:"BS"}),Vb("whiteboard/search-only-blocks")]})},{actionIcon:"search",onChosen:()=>{$a("P");return!0},element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,ci.jsx)(pq,{type:"PS"}),Vb("whiteboard/search-only-pages")]})});Ua&&"P"!==Ua||!lc||!lc.pages||We.push(...lc.pages.map(hf=>({actionIcon:"search",onChosen:()=>{Ob(hf);return!0},element:(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(pq,{type:mb.isWhiteboardPage(hf)?"WP":"P"}),yv(hf,ua)]})})));Ua&&"B"!==Ua||!lc||!lc.blocks||We.push(...lc.blocks.filter(hf=>hf.content&&hf.uuid).map(({content:hf,uuid:wf})=>{const Sd=mb.queryBlockByUUID(wf);return{actionIcon:"search",
onChosen:()=>{var qd,Zd,pd;return Sd?(Ob(wf),null==(pd=null==(Zd=null==(qd=window.logseq)?void 0:qd.api)?void 0:Zd.set_blocks_id)?void 0:pd.call(Zd,[wf]),!0):!1},element:Sd?(0,ci.jsxs)(ci.Fragment,{children:[(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)(pq,{type:"B"}),(0,ci.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,ci.jsx)(Uf,{blockId:wf})})]}),(0,ci.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ci.jsx)("div",{className:"tl-quick-search-option-placeholder"}),
yv(hf,ua)]})]}):(0,ci.jsx)("div",{className:"tl-quick-search-option-row",children:Vb("whiteboard/cache-outdated")})}}));return We},[ua,Ua,lc,null==Kb?void 0:Kb.Breadcrumb,mb]);pm.default.useEffect(()=>{const re=We=>{var Uf,hf;let wf=$b;"ArrowDown"===We.key?wf=Math.min(lf.length-1,$b+1):"ArrowUp"===We.key?wf=Math.max(0,$b-1):"Enter"===We.key?(null==(Uf=lf[$b])?void 0:Uf.onChosen(),We.stopPropagation(),We.preventDefault()):"Backspace"===We.key&&0===ua.length?$a(null):"Escape"===We.key&&Ob("");wf!==
$b&&(Uf=lf[wf],pc(wf),Uc(Uf.actionIcon),We.stopPropagation(),We.preventDefault(),(We=null==(hf=xc.current)?void 0:hf.querySelector(".tl-quick-search-option:nth-child("+(wf+1)+")"))&&(null==We?void 0:We.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",re,!0);return()=>{document.removeEventListener("keydown",re,!0)}},[lf,$b,ua]);return(0,ci.jsxs)("div",{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,ci.jsx)(YG,{icon:Rc,onClick:()=>{var re;null==(re=lf[$b])?void 0:
re.onChosen()}}),(0,ci.jsxs)("div",{className:"tl-quick-search-input-container",children:[Ua&&(0,ci.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,ci.jsx)(pq,{type:Ua}),"B"===Ua?"Search blocks":"Search pages",(0,ci.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>$a(null),children:(0,ci.jsx)(Xh,{name:"x"})})]}),(0,ci.jsx)(Qo,{ref:jb,type:"text",value:ua,className:"tl-quick-search-input",placeholder:null!=m?m:"Create or search your graph...",onChange:re=>
Ha(re.target.value),onKeyDown:re=>{"Enter"===re.key&&Ob(ua);re.stopPropagation()},onFocus:()=>{Td(!0)},onBlur:()=>{Td(!1);null==ha?void 0:ha()}})]}),0<lf.length&&(0,ci.jsx)("div",{onWheelCapture:re=>re.stopPropagation(),className:"tl-quick-search-options",ref:xc,style:{visibility:Dd?"visible":"hidden",pointerEvents:Dd?"all":"none"},children:(0,ci.jsx)(cD,{style:{height:40*Math.min(Math.max(1,lf.length),12)},totalCount:lf.length,itemContent:re=>{const {actionIcon:We,onChosen:Uf,element:hf}=lf[re];
return(0,ci.jsx)("div",{"data-focused":re===$b,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Uc(We);pc(re)},onPointerDownCapture:wf=>{Uf()&&(wf.stopPropagation(),wf.preventDefault())},children:hf},re)}})})]})}),Gj=ba(613),Ro=If(function(a){var {pageId:d,portalType:m,refs:L,side:ha,onRefsChange:na}=a;a=bg(a,"pageId portalType shapeType refs side onRefsChange".split(" "));const {handlers:{t:ua}}=Vy.default.useContext(rj),Ha=L.length+(d?1:0),Ua=0===L.length,$a=mb=>{mb&&!L.includes(mb)&&
Ua&&na([...L,mb])},jb=!(!d||!m);return(0,Gj.jsx)(tg,Cf(qe({},a),{side:ha,align:"start",alignOffset:-6,label:(0,Gj.jsx)(fk,{content:ua("whiteboard/link"),sideOffset:14,children:(0,Gj.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,Gj.jsx)(Xh,{name:0<Ha?"link":"add-link"}),0<Ha&&(0,Gj.jsx)("div",{className:"tl-shape-links-count",children:Ha})]})}),children:(0,Gj.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":jb,children:[jb&&(0,Gj.jsxs)("div",
{className:"tl-shape-links-reference-panel",children:[(0,Gj.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Gj.jsx)(Xh,{className:"opacity-50",name:"internal-link"}),ua("whiteboard/references")]}),(0,Gj.jsx)(Um,{type:m,id:d})]}),(0,Gj.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,Gj.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,Gj.jsx)(Xh,{className:"opacity-50",name:"add-link"}),ua("whiteboard/link-to-any-page-or-block")]}),
Ua&&(0,Gj.jsx)(qD,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:ua("whiteboard/start-typing-to-search"),onChange:$a}),0<L.length&&(0,Gj.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:L.map((mb,Kb)=>(0,Gj.jsx)(Um,{id:mb,type:Wg(mb)?"B":"P",onRemove:()=>{na(L.filter((Vb,Ob)=>Kb!==Ob))},showContent:!0},mb))})]})]})}))}),pk=Jf(ba(22)),[ax]=jj("ToggleGroup",[ew]),zv=ew(),bx=pk.default.forwardRef((a,d)=>{const {type:m}=a;a=bg(a,["type"]);if("single"===m)return pk.default.createElement(qq,
nf({},a,{ref:d}));if("multiple"===m)return pk.default.createElement(GH,nf({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[nz,oz]=ax("ToggleGroup"),qq=pk.default.forwardRef((a,d)=>{const {value:m,defaultValue:L,onValueChange:ha=()=>{}}=a,na=bg(a,["value","defaultValue","onValueChange"]),[ua,Ha]=mi({prop:m,defaultProp:L,onChange:ha});return pk.default.createElement(nz,{scope:a.__scopeToggleGroup,type:"single",value:ua?[ua]:[],onItemActivate:Ha,onItemDeactivate:pk.default.useCallback(()=>
Ha(""),[Ha])},pk.default.createElement(pz,nf({},na,{ref:d})))}),GH=pk.default.forwardRef((a,d)=>{const {value:m,defaultValue:L,onValueChange:ha=()=>{}}=a,na=bg(a,["value","defaultValue","onValueChange"]),[ua=[],Ha]=mi({prop:m,defaultProp:L,onChange:ha}),Ua=pk.default.useCallback(jb=>Ha((mb=[])=>[...mb,jb]),[Ha]),$a=pk.default.useCallback(jb=>Ha((mb=[])=>mb.filter(Kb=>Kb!==jb)),[Ha]);return pk.default.createElement(nz,{scope:a.__scopeToggleGroup,type:"multiple",value:ua,onItemActivate:Ua,onItemDeactivate:$a},
pk.default.createElement(pz,nf({},na,{ref:d})))}),[HH,IH]=ax("ToggleGroup"),pz=pk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:m,disabled:L=!1,rovingFocus:ha=!0,orientation:na,dir:ua,loop:Ha=!0}=a;var Ua=bg(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=zv(m);const $a=Wn(ua);Ua=qe({role:"group",dir:$a},Ua);return pk.default.createElement(HH,{scope:m,rovingFocus:ha,disabled:L},ha?pk.default.createElement(fC,nf({asChild:!0},a,{orientation:na,dir:$a,loop:Ha}),
pk.default.createElement(Vk.div,nf({},Ua,{ref:d}))):pk.default.createElement(Vk.div,nf({},Ua,{ref:d})))}),JH=pk.default.forwardRef((a,d)=>{var m=oz("ToggleGroupItem",a.__scopeToggleGroup);const L=IH("ToggleGroupItem",a.__scopeToggleGroup),ha=zv(a.__scopeToggleGroup);m=m.value.includes(a.value);const na=L.disabled||a.disabled;a=Cf(qe({},a),{pressed:m,disabled:na});const ua=pk.default.useRef(null);return L.rovingFocus?pk.default.createElement(gC,nf({asChild:!0},ha,{focusable:!na,active:m,ref:ua}),pk.default.createElement(uu,
nf({},a,{ref:d}))):pk.default.createElement(uu,nf({},a,{ref:d}))}),uu=pk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:m,value:L}=a,ha=bg(a,["__scopeToggleGroup","value"]),na=oz("ToggleGroupItem",m);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return pk.default.createElement($B,nf({},"single"===na.type?a:void 0,ha,{ref:d,onPressedChange:ua=>{if(ua)na.onItemActivate(L);else na.onItemDeactivate(L)}}))}),rD=bx,sD=JH,$r=ba(613),hj=ba(613),Ip="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),
cx=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],yn=new Map,qz={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),
line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},KH=Object.entries(qz).filter(([,a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),LH=If(()=>{const a=Ie(),{handlers:{t:d}}=ok.default.useContext(rj),m=Za("AutoResizing"),L=m.every(ha=>
ha.props.isAutoResizing);return(0,hj.jsx)($i,{tooltip:d("whiteboard/auto-resize"),toggle:m.every(ha=>"logseq-portal"===ha.props.type),className:"tl-button",pressed:L,onPressedChange:ha=>{m.forEach(na=>{if("logseq-portal"===na.props.type)na.update({isAutoResizing:ha});else na.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},children:(0,hj.jsx)(Xh,{name:"dimensions"})})}),MH=If(()=>{const a=Ie();var {handlers:{t:d}}=ok.default.useContext(rj);const m=Za("LogseqPortalViewMode"),L=m.every(ha=>
ha.collapsed);if(!L&&!m.every(ha=>!ha.collapsed))return null;d=(0,hj.jsxs)("div",{className:"flex",children:[L?d("whiteboard/expand"):d("whiteboard/collapse"),(0,hj.jsx)(Km,{action:L?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,hj.jsx)($i,{tooltip:d,toggle:m.every(ha=>"logseq-portal"===ha.props.type),className:"tl-button",pressed:L,onPressedChange:()=>a.api.setCollapsed(!L),children:(0,hj.jsx)(Xh,{name:L?"object-expanded":"object-compact"})})}),NH=If(()=>{const {handlers:{isMobile:a}}=
ok.default.useContext(rj);var d=Za("ScaleLevel");d=1<(new Set(d.map(m=>m.scaleLevel))).size?"":d[0].scaleLevel;return(0,hj.jsx)(Vo,{scaleLevel:d,compact:a()})}),OH=If(()=>{const a=Ie(),{handlers:{t:d}}=ok.default.useContext(rj),m=Za("IFrameSource")[0],L=ok.default.useCallback(na=>{m.onIFrameSourceChange(na.target.value.trim().toLowerCase());a.persist()},[]),ha=ok.default.useCallback(()=>{m.reload()},[]);return(0,hj.jsxs)("span",{className:"flex gap-3",children:[(0,hj.jsx)(Ug,{tooltip:d("whiteboard/reload"),
type:"button",onClick:ha,children:(0,hj.jsx)(Xh,{name:"refresh"})}),(0,hj.jsx)(Qo,{title:d("whiteboard/website-url"),className:"tl-iframe-src",value:`${m.props.url}`,onChange:L}),(0,hj.jsx)(Ug,{tooltip:d("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(m.props.url),children:(0,hj.jsx)(Xh,{name:"external-link"})})]})}),PH=If(()=>{const a=Ie(),{handlers:{t:d}}=ok.default.useContext(rj),m=Za("YoutubeLink")[0],L=ok.default.useCallback(ha=>{m.onYoutubeLinkChange(ha.target.value);a.persist()},
[]);return(0,hj.jsxs)("span",{className:"flex gap-3",children:[(0,hj.jsx)(Qo,{title:d("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${m.props.url}`,onChange:L}),(0,hj.jsx)(Ug,{tooltip:d("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var ha,na,ua;return null==(ua=null==(na=null==(ha=window.logseq)?void 0:ha.api)?void 0:na.open_external_link)?void 0:ua.call(na,m.props.url)},children:(0,hj.jsx)(Xh,{name:"external-link"})})]})}),rq=If(()=>{const a=Ie(),{handlers:{t:d}}=ok.default.useContext(rj),
m=Za("TwitterLink")[0],L=ok.default.useCallback(ha=>{m.onTwitterLinkChange(ha.target.value);a.persist()},[]);return(0,hj.jsxs)("span",{className:"flex gap-3",children:[(0,hj.jsx)(Qo,{title:d("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${m.props.url}`,onChange:L}),(0,hj.jsx)(Ug,{tooltip:d("whiteboard/open-twitter-url"),type:"button",onClick:()=>{var ha,na,ua;return null==(ua=null==(na=null==(ha=window.logseq)?void 0:ha.api)?void 0:na.open_external_link)?void 0:ua.call(na,m.props.url)},
children:(0,hj.jsx)(Xh,{name:"external-link"})})]})}),QH=If(()=>{const a=Ie(),{handlers:{t:d,setCurrentPdf:m}}=ok.default.useContext(rj),L=a.selectedShapesArray[0];return(0,hj.jsx)(Ug,{tooltip:d("whiteboard/edit-pdf"),type:"button",onClick:()=>m(a.assets[L.props.assetId].src),children:(0,hj.jsx)(Xh,{name:"edit"})})}),RH=If(()=>{const a=Ie(),{handlers:{t:d}}=ok.default.useContext(rj);var m=Za("NoFill");const L=ok.default.useCallback(ha=>{a.selectedShapesArray.forEach(na=>na.update({noFill:ha}));a.persist()},
[]);m=m.every(ha=>ha.props.noFill);return(0,hj.jsx)($i,{tooltip:d("whiteboard/fill"),className:"tl-button",pressed:m,onPressedChange:L,children:(0,hj.jsx)(Xh,{name:m?"droplet-off":"droplet"})})}),SH=If(()=>{const a=Ie(),d=Za("Swatch"),m=ok.default.useCallback(ha=>{a.selectedShapesArray.forEach(na=>{na.update({fill:ha,stroke:ha})});a.persist()},[]),L=ok.default.useCallback(ha=>{a.selectedShapesArray.forEach(na=>{na.update({opacity:ha})});a.persist()},[]);return(0,hj.jsx)(an,{popoverSide:"top",color:d[0].props.noFill?
d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:L,setColor:m})}),TH=If(()=>{const a=Ie(),d=ok.default.useCallback(m=>{a.api.convertShapes(m.currentTarget.dataset.tool)},[]);return(0,hj.jsx)(Dy,{popoverSide:"top",chevron:!1,setGeometry:d})}),UH=If(()=>{const a=Ie(),{handlers:{t:d}}=ok.default.useContext(rj),m=Za("StrokeType"),L=m.every(ha=>"dashed"===ha.props.strokeType)?"dashed":m.every(ha=>"line"===ha.props.strokeType)?"line":"mixed";return(0,hj.jsx)(la,{title:d("whiteboard/stroke-type"),
options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:L,onValueChange:ha=>{m.forEach(na=>{na.update({strokeType:ha})});a.persist()}})}),VH=If(()=>{const a=Ie(),{handlers:{t:d}}=ok.default.useContext(rj),m=Za("ArrowMode");var L=m.every(na=>{var ua;return"arrow"===(null==(ua=na.props.decorations)?void 0:ua.start)});const ha=m.every(na=>{var ua;return"arrow"===(null==(ua=na.props.decorations)?void 0:ua.end)});L=[L?"start":null,ha?"end":null].filter(ic);
return(0,hj.jsx)(Da,{title:d("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:L,onValueChange:na=>{m.forEach(ua=>{var Ha=ua.update;var Ua={start:na.includes("start")?"arrow":null,end:na.includes("end")?"arrow":null};Ha.call(ua,{decorations:Ua})});a.persist()}})}),tD=If(()=>{const a=Ie(),{handlers:{t:d}}=ok.default.useContext(rj),m=Za("TextStyle"),L=m.every(na=>500<na.props.fontWeight),ha=m.every(na=>na.props.italic);return(0,hj.jsxs)("span",
{className:"flex gap-1",children:[(0,hj.jsx)($i,{tooltip:d("whiteboard/bold"),className:"tl-button",pressed:L,onPressedChange:na=>{m.forEach(ua=>{ua.update({fontWeight:na?700:400});ua.onResetBounds()});a.persist()},children:(0,hj.jsx)(Xh,{name:"bold"})}),(0,hj.jsx)($i,{tooltip:d("whiteboard/italic"),className:"tl-button",pressed:ha,onPressedChange:na=>{m.forEach(ua=>{ua.update({italic:na});ua.onResetBounds()});a.persist()},children:(0,hj.jsx)(Xh,{name:"italic"})})]})}),WH=If(()=>{var a;const d=Ie(),
m=d.selectedShapesArray[0];return(0,hj.jsx)(Ro,{onRefsChange:L=>{m.update({refs:L});d.persist()},refs:null!=(a=m.props.refs)?a:[],shapeType:m.props.type,side:"right",pageId:"logseq-portal"===m.props.type?m.props.pageId:void 0,portalType:"logseq-portal"===m.props.type?m.props.blockType:void 0})});yn.set("Geometry",TH);yn.set("AutoResizing",LH);yn.set("LogseqPortalViewMode",MH);yn.set("ScaleLevel",NH);yn.set("YoutubeLink",PH);yn.set("TwitterLink",rq);yn.set("IFrameSource",OH);yn.set("NoFill",RH);yn.set("Swatch",
SH);yn.set("StrokeType",UH);yn.set("ArrowMode",VH);yn.set("TextStyle",tD);yn.set("Links",WH);yn.set("EditPdf",QH);var uD=a=>{var d;return(null!=(d=qz[a])?d:[]).filter(ic)},XH=a=>{const d=a.map(L=>L.props.type),m=new Set(0<a.length?uD(d[0]):[]);for(let L=1;L<d.length&&0<m.size;L++){const ha=uD(d[L]);m.forEach(na=>{ha.includes(na)||m.delete(na)})}1<a.length&&cx.forEach(L=>{m.has(L)&&m.delete(L)});return Array.from(m).sort((L,ha)=>Ip.indexOf(L)-Ip.indexOf(ha)).map(L=>yn.get(L))},vu=ba(613),YH=If(({shapes:a,
offsets:d,hidden:m})=>{const L=Ie(),ha=Zt.useRef(null),na=Zt.useRef(null);Zt.useLayoutEffect(()=>{setTimeout(()=>{const Ha=na.current;if(Ha){var {offsetWidth:Ua,offsetHeight:$a}=Ha;ha.current=[Ua,$a]}})});Zt.useLayoutEffect(()=>{var Ha;const Ua=na.current;if(Ua){var $a=null!=(Ha=ha.current)?Ha:[0,0];Ha=0;if(116>d.top){var jb=d.height/2+40;140>d.bottom&&(jb+=d.bottom-140)}else jb=-(d.height/2+40);16>d.left+d.width/2-$a[0]/2?Ha+=-(d.left+d.width/2-$a[0]/2-16):16>d.right+d.width/2-$a[0]/2&&(Ha+=d.right+
d.width/2-$a[0]/2-16);var [mb,Kb]=[Ha,jb];Ua.style.transform=`translateX(${mb}px) translateY(${Kb}px)`}},[d]);if(!L)return null;const ua=XH(a);return(0,vu.jsx)(Eo,{centered:!0,children:0<ua.length&&(0,vu.jsx)("div",{ref:na,className:"tl-toolbar tl-context-bar",style:{visibility:m?"hidden":"visible",pointerEvents:m?"none":"all"},children:ua.map((Ha,Ua)=>(0,vu.jsxs)(Zt.Fragment,{children:[(0,vu.jsx)(Ha,{}),Ua<ua.length-1&&(0,vu.jsx)(Nq,{className:"tl-toolbar-separator",orientation:"vertical"})]},Ua))})})}),
rz=Jf(ba(22)),fl=ba(22),[ZH]=jj("ContextMenu",[Ns]),Av=Ns(),[vD,sz]=ZH("ContextMenu"),Bv=(0,fl.forwardRef)((a,d)=>{const {__scopeContextMenu:m,disabled:L=!1}=a,ha=bg(a,["__scopeContextMenu","disabled"]),na=sz("ContextMenuTrigger",m),ua=Av(m),Ha=(0,fl.useRef)({x:0,y:0}),Ua=(0,fl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(qe({width:0,height:0},Ha.current))}),$a=(0,fl.useRef)(0),jb=(0,fl.useCallback)(()=>window.clearTimeout($a.current),[]);(0,fl.useEffect)(()=>jb,[jb]);(0,fl.useEffect)(()=>
void(L&&jb()),[L,jb]);return(0,fl.createElement)(fl.Fragment,null,(0,fl.createElement)(jw,nf({},ua,{virtualRef:Ua})),(0,fl.createElement)(Vk.span,nf({"data-state":na.open?"open":"closed","data-disabled":L?"":void 0},ha,{ref:d,style:qe({WebkitTouchCallout:"none"},a.style),onContextMenu:L?a.onContextMenu:xg(a.onContextMenu,mb=>{jb();Ha.current={x:mb.clientX,y:mb.clientY};na.onOpenChange(!0);mb.preventDefault()}),onPointerDown:L?a.onPointerDown:xg(a.onPointerDown,Wb(mb=>{jb();$a.current=window.setTimeout(()=>
{Ha.current={x:mb.clientX,y:mb.clientY};na.onOpenChange(!0)},700)})),onPointerMove:L?a.onPointerMove:xg(a.onPointerMove,Wb(jb)),onPointerCancel:L?a.onPointerCancel:xg(a.onPointerCancel,Wb(jb)),onPointerUp:L?a.onPointerUp:xg(a.onPointerUp,Wb(jb))})))}),Cv=(0,fl.forwardRef)((a,d)=>{var {__scopeContextMenu:m}=a;const L=bg(a,["__scopeContextMenu"]),ha=sz("ContextMenuContent",m);m=Av(m);const na=(0,fl.useRef)(!1);return(0,fl.createElement)(rC,nf({},m,L,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:ua=>
{var Ha;null===(Ha=a.onCloseAutoFocus)||void 0===Ha||Ha.call(a,ua);!ua.defaultPrevented&&na.current&&ua.preventDefault();na.current=!1},onInteractOutside:ua=>{var Ha;null===(Ha=a.onInteractOutside)||void 0===Ha||Ha.call(a,ua);ua.defaultPrevented||ha.modal||(na.current=!0)},style:Cf(qe({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Dl=(0,fl.forwardRef)((a,d)=>{var {__scopeContextMenu:m}=a;a=bg(a,["__scopeContextMenu"]);m=Av(m);return(0,fl.createElement)(Ot,
nf({},m,a,{ref:d}))}),sq=(0,fl.forwardRef)((a,d)=>{var {__scopeContextMenu:m}=a;a=bg(a,["__scopeContextMenu"]);m=Av(m);return(0,fl.createElement)(Zu,nf({},m,a,{ref:d}))}),wD=a=>{const {__scopeContextMenu:d,children:m,onOpenChange:L,dir:ha,modal:na=!0}=a,[ua,Ha]=(0,fl.useState)(!1);a=Av(d);const Ua=gj(L),$a=(0,fl.useCallback)(jb=>{Ha(jb);Ua(jb)},[Ua]);return(0,fl.createElement)(vD,{scope:d,open:ua,onOpenChange:$a,modal:na},(0,fl.createElement)(ty,nf({},a,{dir:ha,open:ua,onOpenChange:$a,modal:na}),
m))},gg=ba(613),xD=If(function({children:a,collisionRef:d}){var m,L,ha,na,ua,Ha,Ua,$a,jb,mb,Kb,Vb,Ob,kc,xc,$b,pc;const lc=Ie(),{handlers:Rc}=rz.useContext(rj),Uc=Rc.t,Dd=rz.useRef(null),Td=re=>{re();lc.transition("select")},lf=rz.useMemo(()=>Mb(),[]);return(0,gg.jsxs)(wD,{onOpenChange:re=>{re&&!lc.isIn("select.contextMenu")?lc.transition("select").selectedTool.transition("contextMenu"):!re&&lc.isIn("select.contextMenu")&&lc.selectedTool.transition("idle")},children:[(0,gg.jsx)(Bv,{disabled:lc.editingShape&&
0!==Object.keys(lc.editingShape).length,children:a}),(0,gg.jsx)(Cv,{className:"tl-menu tl-context-menu",ref:Dd,onEscapeKeyDown:()=>lc.transition("select"),collisionBoundary:d.current,asChild:!0,tabIndex:-1,children:(0,gg.jsxs)("div",{children:[1<(null==(m=lc.selectedShapes)?void 0:m.size)&&!lc.readOnly&&(null==(L=lc.selectedShapesArray)?void 0:L.some(re=>!re.props.isLocked))&&(0,gg.jsxs)(gg.Fragment,{children:[(0,gg.jsxs)(Dl,{children:[(0,gg.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,gg.jsx)(Ug,
{tooltip:Uc("whiteboard/align-left"),onClick:()=>Td(()=>lc.align("left")),children:(0,gg.jsx)(Xh,{name:"layout-align-left"})}),(0,gg.jsx)(Ug,{tooltip:Uc("whiteboard/align-center-horizontally"),onClick:()=>Td(()=>lc.align("centerHorizontal")),children:(0,gg.jsx)(Xh,{name:"layout-align-center"})}),(0,gg.jsx)(Ug,{tooltip:Uc("whiteboard/align-right"),onClick:()=>Td(()=>lc.align("right")),children:(0,gg.jsx)(Xh,{name:"layout-align-right"})}),(0,gg.jsx)(Nq,{className:"tl-toolbar-separator",orientation:"vertical"}),
(0,gg.jsx)(Ug,{tooltip:Uc("whiteboard/distribute-horizontally"),onClick:()=>Td(()=>lc.distribute("horizontal")),children:(0,gg.jsx)(Xh,{name:"layout-distribute-vertical"})})]}),(0,gg.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,gg.jsx)(Ug,{tooltip:Uc("whiteboard/align-top"),onClick:()=>Td(()=>lc.align("top")),children:(0,gg.jsx)(Xh,{name:"layout-align-top"})}),(0,gg.jsx)(Ug,{tooltip:Uc("whiteboard/align-center-vertically"),onClick:()=>Td(()=>lc.align("centerVertical")),children:(0,gg.jsx)(Xh,
{name:"layout-align-middle"})}),(0,gg.jsx)(Ug,{tooltip:Uc("whiteboard/align-bottom"),onClick:()=>Td(()=>lc.align("bottom")),children:(0,gg.jsx)(Xh,{name:"layout-align-bottom"})}),(0,gg.jsx)(Nq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,gg.jsx)(Ug,{tooltip:Uc("whiteboard/distribute-vertically"),onClick:()=>Td(()=>lc.distribute("vertical")),children:(0,gg.jsx)(Xh,{name:"layout-distribute-horizontal"})})]})]}),(0,gg.jsx)(sq,{className:"menu-separator"}),(0,gg.jsxs)(Dl,{className:"tl-menu-item",
onClick:()=>Td(lc.packIntoRectangle),children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"layout-grid"}),Uc("whiteboard/pack-into-rectangle")]}),(0,gg.jsx)(sq,{className:"menu-separator"})]}),0<(null==(ha=lc.selectedShapes)?void 0:ha.size)&&(0,gg.jsxs)(gg.Fragment,{children:[(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(lc.api.zoomToSelection),children:[Uc("whiteboard/zoom-to-fit"),(0,gg.jsx)(Km,{action:"whiteboard/zoom-to-fit"})]}),(0,gg.jsx)(sq,{className:"menu-separator"})]}),(lc.selectedShapesArray.some(re=>
"group"===re.type||lc.getParentGroup(re))||1<lc.selectedShapesArray.length)&&(null==(na=lc.selectedShapesArray)?void 0:na.some(re=>!re.props.isLocked))&&!lc.readOnly&&(0,gg.jsxs)(gg.Fragment,{children:[lc.selectedShapesArray.some(re=>"group"===re.type||lc.getParentGroup(re))&&(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(lc.api.unGroup),children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"ungroup"}),Uc("whiteboard/ungroup"),(0,gg.jsx)(Km,{action:"whiteboard/ungroup"})]}),1<lc.selectedShapesArray.length&&
(null==(ua=lc.selectedShapesArray)?void 0:ua.some(re=>!re.props.isLocked))&&(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(lc.api.doGroup),children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"group"}),Uc("whiteboard/group"),(0,gg.jsx)(Km,{action:"whiteboard/group"})]}),(0,gg.jsx)(sq,{className:"menu-separator"})]}),0<(null==(Ha=lc.selectedShapes)?void 0:Ha.size)&&(null==(Ua=lc.selectedShapesArray)?void 0:Ua.some(re=>!re.props.isLocked))&&(0,gg.jsxs)(gg.Fragment,{children:[!lc.readOnly&&
(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(lc.cut),children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"cut"}),Uc("whiteboard/cut")]}),(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(lc.copy),children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"copy"}),Uc("whiteboard/copy"),(0,gg.jsx)(Km,{action:"editor/copy"})]})]}),!lc.readOnly&&(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(lc.paste),children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"clipboard"}),Uc("whiteboard/paste"),
(0,gg.jsx)("div",{className:"tl-menu-right-slot",children:(0,gg.jsx)("span",{className:"keyboard-shortcut",children:(0,gg.jsxs)("code",{children:[KA,"+v"]})})})]}),1===(null==($a=lc.selectedShapes)?void 0:$a.size)&&!lc.readOnly&&(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(()=>lc.paste(void 0,!0)),children:[Uc("whiteboard/paste-as-link"),(0,gg.jsx)("div",{className:"tl-menu-right-slot",children:(0,gg.jsx)("span",{className:"keyboard-shortcut",children:(0,gg.jsxs)("code",{children:[KA,"++v"]})})})]}),
0<(null==(jb=lc.selectedShapes)?void 0:jb.size)&&(0,gg.jsxs)(gg.Fragment,{children:[(0,gg.jsx)(sq,{className:"menu-separator"}),(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(()=>{var re,We;return Rc.exportToImage(lc.currentPageId,{x:lc.selectionBounds.minX+lc.viewport.camera.point[0]-8,y:lc.selectionBounds.minY+lc.viewport.camera.point[1]-8,width:(null==(re=lc.selectionBounds)?void 0:re.width)+16,height:(null==(We=lc.selectionBounds)?void 0:We.height)+16,zoom:lc.viewport.camera.zoom})}),
children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"file-export"}),Uc("whiteboard/export"),(0,gg.jsx)("div",{className:"tl-menu-right-slot",children:(0,gg.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,gg.jsx)(sq,{className:"menu-separator"}),(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(lc.api.selectAll),children:[Uc("whiteboard/select-all"),(0,gg.jsx)(Km,{action:"editor/select-parent"})]}),1<(null==(mb=lc.selectedShapes)?void 0:mb.size)&&(0,gg.jsx)(Dl,{className:"tl-menu-item",
onClick:()=>Td(lc.api.deselectAll),children:Uc("whiteboard/deselect-all")}),!lc.readOnly&&0<(null==(Kb=lc.selectedShapes)?void 0:Kb.size)&&(null==(Vb=lc.selectedShapesArray)?void 0:Vb.some(re=>!re.props.isLocked))&&(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(()=>lc.setLocked(!0)),children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"lock"}),Uc("whiteboard/lock"),(0,gg.jsx)(Km,{action:"whiteboard/lock"})]}),!lc.readOnly&&0<(null==(Ob=lc.selectedShapes)?void 0:Ob.size)&&(null==(kc=lc.selectedShapesArray)?
void 0:kc.some(re=>re.props.isLocked))&&(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(()=>lc.setLocked(!1)),children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"lock-open"}),Uc("whiteboard/unlock"),(0,gg.jsx)(Km,{action:"whiteboard/unlock"})]}),0<(null==(xc=lc.selectedShapes)?void 0:xc.size)&&!lc.readOnly&&(null==($b=lc.selectedShapesArray)?void 0:$b.some(re=>!re.props.isLocked))&&(0,gg.jsxs)(gg.Fragment,{children:[(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(lc.api.deleteShapes),
children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"backspace"}),Uc("whiteboard/delete"),(0,gg.jsx)(Km,{action:"editor/delete"})]}),1<(null==(pc=lc.selectedShapes)?void 0:pc.size)&&!lc.readOnly&&(0,gg.jsxs)(gg.Fragment,{children:[(0,gg.jsx)(sq,{className:"menu-separator"}),(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(lc.flipHorizontal),children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"flip-horizontal"}),Uc("whiteboard/flip-horizontally")]}),(0,gg.jsxs)(Dl,{className:"tl-menu-item",
onClick:()=>Td(lc.flipVertical),children:[(0,gg.jsx)(Xh,{className:"tl-menu-icon",name:"flip-vertical"}),Uc("whiteboard/flip-vertically")]})]}),!lc.readOnly&&(0,gg.jsxs)(gg.Fragment,{children:[(0,gg.jsx)(sq,{className:"menu-separator"}),(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(lc.bringToFront),children:[Uc("whiteboard/move-to-front"),(0,gg.jsx)(Km,{action:"whiteboard/bring-to-front"})]}),(0,gg.jsxs)(Dl,{className:"tl-menu-item",onClick:()=>Td(lc.sendToBack),children:[Uc("whiteboard/move-to-back"),
(0,gg.jsx)(Km,{action:"whiteboard/send-to-back"})]})]}),lf&&(0,gg.jsx)(Dl,{className:"tl-menu-item",onClick:()=>{1===lc.selectedShapesArray.length?console.log(uc(lc.selectedShapesArray[0].serialized)):console.log(lc.selectedShapesArray.map(re=>uc(re.serialized)))},children:Uc("whiteboard/dev-print-shape-props")})]})]})})]})}),fr=Jf(ba(22)),Jp=ba(613),yD=If(({shape:a})=>{const d=Ie(),{handlers:m}=fr.default.useContext(rj),L=m.t,ha=fr.default.useMemo(()=>{var na;const ua=[...(null!=(na=a.props.refs)?
na:[])].map(Ha=>[Ha,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&ua.unshift([a.props.pageId,!1]);return ua.filter(Ha=>Ha[0].toLowerCase()!==d.currentPage.name&&m.getBlockPageName(Ha[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===ha.length?null:(0,Jp.jsx)("div",{className:"tl-quick-links",title:L("whiteboard/shape-quick-links"),children:ha.map(([na,ua])=>(0,Jp.jsx)("div",{className:"tl-quick-links-row",children:(0,Jp.jsx)(Wy,{id:na,showReferenceContent:ua})},
na))})}),zD=Jf(ba(22)),AD=Jf(ba(22)),$H={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},gr=(a,d,m)=>ui(void 0,[a,d,m],function*(L,{point:ha,shiftKey:na,dataTransfer:ua,fromDrop:Ha},Ua){function $a(pd,Md){return ui(this,null,function*(){const Se=Object.values(L.assets).find(Gf=>Gf.src===pd);return Se?Se:{id:hk(),type:Md,src:pd,size:yield Ni(Ua.makeAssetUrl(pd),Md)}})}function jb(pd){return ui(this,null,function*(){const Md=pd.filter(Se=>"unknown"!==vc(Se.name)).map(Se=>
ui(this,null,function*(){try{const Gf=yield Ua.saveAsset(Se);return yield $a(Gf,vc(Se.name))}catch(Gf){console.error(Gf)}return null}));return(yield Promise.all(Md)).filter(ic)})}function mb(pd){return[Cf(qe({},gh.defaultProps),{html:pd,point:[ha[0],ha[1]]})]}function Kb(pd){return ui(this,null,function*(){return Oc(Ob,kc,pc,$b,lc,xc,lf)(pd)})}function Vb(){return ui(this,null,function*(){const pd=yield navigator.clipboard.read(),Md=Oc(lc,xc,lf);return(yield Promise.all(pd.map(Se=>Md(Se)))).flat().filter(ic)})}
function Ob(pd){return ui(this,null,function*(){var Md=pd.getData("file");if(!Md)return null;const Se=yield $a(Md,"pdf");L.addAssets([Se]);Md=Cf(qe({},et.defaultProps),{id:hk(),assetId:Se.id,url:Md,opacity:1});Se.size&&Object.assign(Md,{point:[ha[0]-Se.size[0]/4+16,ha[1]-Se.size[1]/4+16],size:me.div(Se.size,2)});return[Md]})}function kc(pd){return ui(this,null,function*(){var Md=Array.from(pd.files);return 0<Md.length?(Uf=Md=yield jb(Md),Md.map((Se,Gf)=>{switch(Se.type){case "video":var sg=tu.defaultProps;
break;case "image":sg=uv.defaultProps;break;case "pdf":sg=et.defaultProps;break;default:return null}sg=Cf(qe({},sg),{id:hk(),assetId:Se.id,opacity:1});Se.size&&Object.assign(sg,{point:[ha[0]-Se.size[0]/4+16*Gf,ha[1]-Se.size[1]/4+16*Gf],size:me.div(Se.size,2)});return sg})):null})}function xc(pd){return ui(this,null,function*(){if(pd.types.includes("text/plain")&&(na||Ha))return null;const Md=yield yd(pd,"text/html");return Md?Oc(Rc,mb)(Md):null})}function $b(pd){return ui(this,null,function*(){var Md,
Se,Gf,sg,Mf,qg,Qh=pd.getData("block-uuid");if(Qh){Qh=Qh.trim();const dg=null==(Gf=null==(Se=null==(Md=window.logseq)?void 0:Md.api)?void 0:Se.get_selected_blocks)?void 0:Gf.call(Se);Md=dg&&1<(null==dg?void 0:dg.length)?dg.map(rh=>rh.uuid):[Qh];null==(qg=null==(Mf=null==(sg=window.logseq)?void 0:sg.api)?void 0:Mf.set_blocks_id)?void 0:qg.call(Mf,Md);sg=Md.map(rh=>Td(`((${rh}))`));return(yield Promise.all(sg)).flat().filter(ic).map((rh,Eh)=>Cf(qe({},rh),{point:[ha[0]+(Cj.defaultProps.size[0]+16)*Eh,
ha[1]]}))}return null})}function pc(pd){return ui(this,null,function*(){var Md=pd.getData("page-name");return Md?(Md=Md.trim(),Td(`[[${Md}]]`)):null})}function lc(pd){return ui(this,null,function*(){var Md=yield yd(pd,"text/plain");return Md?(Md=Md.trim(),Oc(Uc,Dd)(Md)):null})}function Rc(pd){if(pd=L.api.getClonedShapesFromTldrString(decodeURIComponent(pd),ha)){const {shapes:Md,assets:Se,bindings:Gf}=pd;hf.push(...Se);wf.push(...Gf);return Md}return null}function Uc(pd){return ui(this,null,function*(){try{const Se=
new URL(pd);var Md=Se.host&&["http:","https:"].includes(Se.protocol)}catch(Se){Md=!1}return Md&&!na?Uw.test(pd)?[Cf(qe({},dr.defaultProps),{url:pd,point:[ha[0],ha[1]]})]:lz.test(pd)?[Cf(qe({},dt.defaultProps),{url:pd,point:[ha[0],ha[1]]})]:[Cf(qe({},Vr.defaultProps),{url:pd,point:[ha[0],ha[1]]})]:null})}function Dd(pd){return pd.startsWith("\x3ciframe")?[Cf(qe({},gh.defaultProps),{html:pd,point:[ha[0],ha[1]]})]:null}function Td(pd){return ui(this,null,function*(){if(/^\(\(.*\)\)$/.test(pd)&&40===
pd.length){var Md=pd.slice(2,-2);if(Wg(Md))return[Cf(qe({},Cj.defaultProps),{point:[ha[0],ha[1]],size:[400,0],pageId:Md,fill:L.settings.color,stroke:L.settings.color,scaleLevel:L.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(pd))return Md=pd.slice(2,-2),[Cf(qe({},Cj.defaultProps),{point:[ha[0],ha[1]],size:[400,0],pageId:Md,fill:L.settings.color,stroke:L.settings.color,scaleLevel:L.settings.scaleLevel,blockType:"P"})];return null})}function lf(pd){return ui(this,null,function*(){var Md=
yield yd(pd,"text/plain");return Md&&(Md=Md.trim(),Md=null==Ua?void 0:Ua.addNewBlock(Md))?[Cf(qe({},Cj.defaultProps),{size:[400,0],point:[ha[0],ha[1]],pageId:Md,fill:L.settings.color,stroke:L.settings.color,scaleLevel:L.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var re,We;let Uf=[],hf=[];const wf=[];L.cursors.setCursor("progress");let Sd=[];try{ua?Sd.push(...(null!=(re=yield Kb(ua))?re:[])):Sd.push(...(null!=(We=yield Vb())?We:[]))}catch(pd){console.error(pd)}const qd=Sd.map(pd=>Cf(qe({},
pd),{parentId:L.currentPageId,isLocked:!1,id:Wg(pd.id)?pd.id:hk()})),Zd=null==ua?void 0:ua.types.every(pd=>"Files"===pd);L.wrapUpdate(()=>{var pd=[...Uf,...hf];0<pd.length&&L.createAssets(pd);0<qd.length&&L.createShapes(qd);L.currentPage.updateBindings(Object.fromEntries(wf.map(Md=>[Md.id,Md])));if(1===L.selectedShapesArray.length&&1===qd.length&&Ha){pd=L.selectedShapesArray[0];const Md=L.getShapeById(qd[0].id);L.createNewLineBinding(pd,Md)}L.setSelectedShapes(qd.map(Md=>Md.id));L.selectedTool.transition("idle");
L.cursors.setCursor("default");(Ha||Zd)&&L.packIntoRectangle()})}),tz=Jf(ba(22)),uz=Jf(ba(22)),qp=ba(613),vz=[xv,Om,Hp,ft,hn,mz,Pm,Yw,oD,Zw,Po,op],BD=a=>{const {renderers:d}=Kt.useContext(rj);return(0,qp.jsx)(d.BacklinksCount,Cf(qe({},a),{options:{"portal?":!1}}))},CD=()=>{const a=Kt.useRef(null),d=Ie(),m=Kt.useMemo(()=>({ContextBar:YH,BacklinksCount:BD,QuickLinks:yD}),[]);return(0,qp.jsx)(xD,{collisionRef:a,children:(0,qp.jsx)("div",{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":d.uuid,
children:(0,qp.jsx)(eG,{components:m,children:(0,qp.jsx)(PC,{})})})})},DD=a=>{var {onPersist:d,readOnly:m,model:L}=a;a=bg(a,["onPersist","readOnly","model"]);const ha=pe(),na=Wd(),ua=Je(),Ha=m?null:rf(),Ua=Kt.useCallback(($a,jb)=>{null==d?void 0:d($a,jb)},[L]);return(0,qp.jsx)(aG,Cf(qe({Shapes:Zr,Tools:vz,onDrop:ha,onPaste:na,onCopy:ua,readOnly:m,onCanvasDBClick:Ha,onPersist:Ua,model:L},a),{children:(0,qp.jsx)(CD,{})}))},ED=function(a){var {renderers:d,handlers:m}=a;a=bg(a,["renderers","handlers"]);
const L={renderers:Kt.useMemo(()=>Object.fromEntries(Object.entries(d).map(([ha,na])=>[ha,Kt.memo(na)])),[]),handlers:m};return(0,qp.jsx)(rj.Provider,{value:L,children:(0,qp.jsx)(DD,qe({},a))})}};
'use strict';var TNd=function(a){return a},UNd=function(a){var b=$APP.A.j("db",$APP.F3a())?$APP.Wz.A($APP.uC.A(new $APP.O(null,2,5,$APP.Q,[$APP.Qp,"logseq.tldraw.shape"],null))):$APP.NB;a=$APP.uC.A(new $APP.O(null,2,5,$APP.Q,[$APP.Qp,$APP.Pp.A?$APP.Pp.A(a):$APP.Pp.call(null,a)],null));return $APP.Sk.j(function(c){var d=$APP.sf(c);c=$APP.H.j(d,$APP.Wz);d=$APP.H.j(d,$APP.$C);d=$APP.H.j(d,b);return $APP.n(d)?new $APP.m(null,2,[$APP.bl,$APP.t.A(c),$APP.DVb,$APP.DVb.A(d)],null):null},$APP.w8a.A(a))},VNd=
function(a){return $APP.kp.F(a,$APP.F([$APP.lp,!0]))},WNd=function(a,b,c,d){var e=$APP.qE(a);b=$APP.pf([$APP.nH($APP.OB),$APP.etb,$APP.nH($APP.QB),new $APP.m(null,6,[$APP.bl,$APP.pa(b,"id"),$APP.No,$APP.pa(b,"name"),$APP.eF,VNd($APP.pa(b,"bindings")),$APP.DVb,$APP.pa(b,"nonce"),$APP.EVb,VNd(c),$APP.BVb,d],null)]);c=$APP.Vu();e=$APP.fC.A(e);e=$APP.n(e)?e:$APP.Vu();return new $APP.m(null,5,[$APP.Qp,a,$APP.VC,"whiteboard",$APP.$C,b,$APP.gC,c,$APP.fC,e],null)},XNd=function(a,b,c,d,e,f){a=VNd(a.getCleanUpAssets());
var g=b.shapes,h=$APP.zh.j(function(D){return $APP.pa(D,"id")},g),k=$APP.eh(h,$APP.sj.A(g.length));g=$APP.bh($APP.zh.j(function(D){D=$APP.sf(D);D=$APP.H.j(D,$APP.bl);return $APP.T.C(VNd(b.getShapeById(D).serialized),$APP.Uv,$APP.H.j(k,D))},$APP.vv.j(c,d)));d=$APP.bh($APP.zh.j($APP.bl,d));var p=$APP.bh($APP.zh.j($APP.bl,c)),q=$APP.bh($APP.em.j($APP.Qj,$APP.vv.j(p,d)));c=$APP.bh($APP.ag.j(function(D){D=$APP.bl.A(D);return q.A?q.A(D):q.call(null,D)},g));var r=$APP.em.j($APP.Qj,$APP.vv.j(d,p)),u=$APP.qz();
d=$APP.y(r)?$APP.em.j($APP.pb,$APP.rj.j(function(D){return $APP.lH(D,$APP.NB)},function(){var D=new $APP.O(null,1,5,$APP.Q,[$APP.gx],null),G=$APP.rj.j(function(I){return new $APP.O(null,2,5,$APP.Q,[$APP.Wz,$APP.Yh(I)],null)},r);return $APP.wC?$APP.wC(u,D,G):$APP.xC.call(null,u,D,G)}())):null;p=$APP.rj.j(function(D){return new $APP.O(null,2,5,$APP.Q,[$APP.aPa,new $APP.O(null,2,5,$APP.Q,[$APP.Wz,$APP.Yh(D)],null)],null)},r);var x=$APP.vv.j(g,c),B=$APP.y(x)?function(){var D=new $APP.O(null,1,5,$APP.Q,
[$APP.gx],null),G=$APP.rj.j(function(I){return new $APP.O(null,2,5,$APP.Q,[$APP.Wz,$APP.Yh($APP.bl.A(I))],null)},x);return $APP.wC?$APP.wC(u,D,G):$APP.xC.call(null,u,D,G)}():null;return new $APP.m(null,4,[$APP.MOc,WNd(e,b,a,h),$APP.s4c,$APP.zh.j($APP.zHb,$APP.zh.j(function(D){var G=$APP.pf([$APP.nH($APP.OB),$APP.oH,$APP.nH($APP.NB),D]);D=new $APP.m(null,4,[$APP.Wz,$APP.$h($APP.bl.A(D))?$APP.bl.A(D):$APP.Yh($APP.bl.A(D)),$APP.sC,new $APP.m(null,1,[$APP.Qp,$APP.Pp.A?$APP.Pp.A(e):$APP.Pp.call(null,e)],
null),$APP.AC,new $APP.m(null,1,[$APP.Qp,e],null),$APP.$C,G],null);G=$APP.ktb(D,e);return $APP.ul.F($APP.F([D,G]))},g)),$APP.aM,p,$APP.Kcc,new $APP.m(null,3,[$APP.rRb,$APP.sb(f),$APP.dCb,f,$APP.iu,new $APP.m(null,5,[$APP.RJ,e,$APP.UVb,d,$APP.VVb,c,$APP.WVb,x,$APP.XVb,B],null)],null)],null)},YNd=function(a,b,c){var d=$APP.Pc($APP.z(b.pages)),e=d.shapes,f=$APP.qE(a);f=$APP.lH(f,$APP.QB);f=$APP.BVb.A(f);var g=$APP.eh(f,$APP.sj.A($APP.Ic(f)));e=$APP.bh($APP.Pm.j(function(q,r){var u=r.id;return new $APP.m(null,
2,[$APP.bl,u,$APP.DVb,$APP.A.j(q,$APP.H.j(g,u))?r.nonce:Date.now()],null)},e));var h=$APP.qz();f=function(){var q=$APP.Cw.j($APP.v($APP.$wd),new $APP.O(null,2,5,$APP.Q,[h,a],null));return $APP.n(q)?q:$APP.bh($APP.zh.j(function(r){return $APP.Zp.C(r,$APP.bl,$APP.t)},UNd(a)))}();b=XNd(b,d,e,f,a,c);f=$APP.sf(b);d=$APP.H.j(f,$APP.MOc);b=$APP.H.j(f,$APP.s4c);c=$APP.H.j(f,$APP.aM);f=$APP.H.j(f,$APP.Kcc);d=$APP.Hk.F(c,new $APP.O(null,1,5,$APP.Q,[d],null),$APP.F([b]));var k=$APP.Cw.j(f,new $APP.O(null,2,
5,$APP.Q,[$APP.iu,$APP.VVb],null)),p=$APP.Cw.j(f,new $APP.O(null,2,5,$APP.Q,[$APP.iu,$APP.UVb],null));k=$APP.n($APP.Bf(function(q){return $APP.A.j("group",$APP.gm.A(q))},k))?$APP.T.C(f,$APP.YVb,$APP.au):$APP.n(function(){var q=$APP.tf(p);return $APP.n(q)?$APP.Af(function(r){return $APP.A.j("group",$APP.gm.A(r))},p):q}())?$APP.T.C(f,$APP.YVb,$APP.$Pc):$APP.n($APP.Bf(function(q){return $APP.A.j("line",$APP.gm.A(q))&&$APP.A.j("arrow ",$APP.Dn.A($APP.BNc.A(q)))},k))?$APP.T.C(f,$APP.YVb,$APP.r0c):f;b=
$APP.y($APP.Hk.j(b,c))?k:$APP.T.C(f,$APP.YBb,!0);$APP.Kh.J($APP.$wd,$APP.Ht,new $APP.O(null,2,5,$APP.Q,[h,a],null),e);if($APP.Xd(new $APP.Wg(null,new $APP.m(null,1,[$APP.r0c,null],null),null),$APP.YVb.A(b)))return $APP.rz($APP.khd,new $APP.m(null,2,[$APP.Gw,d,$APP.Kcc,b],null));e=$APP.khd.A($APP.v($APP.nz));c=$APP.Hk.j($APP.Gw.A(e),d);e=$APP.ul.F($APP.F([b,$APP.Kcc.A(e)]));$APP.rz($APP.khd,$APP.rf);return $APP.KC.C(h,c,e)},ZNd=function(a){a=$APP.kO.A(a);return $APP.em.j($APP.sib,a)},$Nd=function(a){var b=
$APP.Hw.A($APP.qE(a));a=ZNd(a);a=$APP.ag.j(function(d){return $APP.A.j(b,$APP.Hw.A($APP.AC.A(d)))},a);var c=$APP.bh($APP.em.j($APP.pb,$APP.zh.j(function(d){return $APP.Cw.C(d,new $APP.O(null,2,5,$APP.Q,[$APP.BC,$APP.Hw],null),null)},a)));a=$APP.em.j(function(d){d=$APP.Hw.A(d);return c.A?c.A(d):c.call(null,d)},a);return $APP.y(a)?$APP.z(a):null},aOd=function(){return $APP.Hl(null,function(){return $APP.Hl(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.Hl(a.text(),function(b){return $APP.Hl($APP.Wp($APP.rf,
b),function(c){return $APP.Bl(c)})})})})},bOd=function(a){var b=$APP.C8a();return($APP.cd(b)||$APP.A.j(1,$APP.Ic(b))&&$APP.A.j(a,$APP.Qp.A($APP.z(b))))&&$APP.sb($APP.Cw.j($APP.v($APP.nz),new $APP.O(null,1,5,$APP.Q,[$APP.f_a],null)))},cOd=function(a){return null!=a?$APP.Kl($APP.Hl(null,function(){return $APP.Hl(aOd(),function(b){var c=$APP.sf(b);b=$APP.H.j(c,$APP.HE);c=$APP.H.j(c,$APP.Su);var d=$APP.z(b);b=$APP.CVb(d,c);d=$APP.lH(d,$APP.QB);c=$APP.EVb.A(d);d=$APP.eF.A(d);a.cloneShapesIntoCurrentPage($APP.Gi(new $APP.m(null,
3,[$APP.MVb,b,$APP.EVb,c,$APP.eF,d],null)));b=$APP.h_a();return $APP.Bl(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},dOd=function(a){a.cleanup($APP.zh.j(function(b){return b.id},a.shapes))},gOd=function(a,b){b=$APP.kp.F(b,$APP.F([new $APP.m(null,1,[$APP.lp,!0],null)]));b=$APP.sf(b);var c=$APP.H.j(b,eOd),d=$APP.H.j(b,$APP.AG),e=$APP.H.j(b,fOd),f=$APP.qz();return $APP.Hl(null,function(){return $APP.Hl($APP.n(d)?$APP.xob(f,a,new $APP.m(null,1,[$APP.sv,
100],null)):null,function(g){return $APP.Hl($APP.n(c)?$APP.Cob(a,10):null,function(h){return $APP.Hl($APP.n(e)?$APP.Eob(a,100):null,function(k){return $APP.Bl($APP.Gi(new $APP.m(null,3,[$APP.HE,h,$APP.Su,g,$APP.IH,k],null)))})})})})},hOd=function(a){return $APP.Gl($APP.xOb($APP.qz(),new $APP.O(null,1,5,$APP.Q,[$APP.kp.A(a)],null)),function(b){var c=(c=$APP.y(b))?$APP.z(b):c;return $APP.n(c)?(b=$APP.C.C(c,0,null),$APP.C.C(c,1,null),c=$APP.C.C(c,2,null),$APP.zOb($APP.n(c)?c:b)):null})},iOd=function(){return $APP.vRb(null)},
jOd=function(){return $APP.xRb(null)},AOd=function(a){return $APP.Kg([kOd,lOd,mOd,nOd,oOd,pOd,qOd,rOd,$APP.MA,sOd,tOd,uOd,vOd,$APP.rS,wOd,xOd,yOd,zOd],[function(b){return $APP.Qp.A($APP.I6a($APP.qz(),$APP.wi(b)))},function(b){return $APP.Gi($APP.T$b(b))},function(b){return $APP.rE(b,!1)},function(b){return $APP.q_a($APP.n(b)?$APP.T$b(b):null)},function(b){return $APP.FVb(b)},$APP.ov,function(b){return $APP.wNb(b,new $APP.m(null,1,[$APP.sO,!1],null))},$APP.FE,gOd,hOd,TNd,function(b,c){return $APP.YKa(b,
$APP.F([$APP.Ru,c]))},function(b){var c=$APP.t,d=c.A,e=$APP.Fy(),f=$APP.qE(a),g=$Nd(a);b=$APP.zHb(new $APP.m(null,6,[$APP.BC,$APP.Vg($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.Q,[$APP.Hw],null)),$APP.Wz,e,$APP.qA,$APP.n(b)?b:"",$APP.hC,$APP.Rp,$APP.sC,new $APP.m(null,2,[$APP.Qp,$APP.Pp.A?$APP.Pp.A(a):$APP.Pp.call(null,a),$APP.$u,a],null),$APP.AC,new $APP.m(null,1,[$APP.Qp,a],null)],null));$APP.KC.A(new $APP.O(null,1,5,$APP.Q,[b],null));return d.call(c,e)},function(b){return $APP.gI.F($APP.F([$APP.Ah.A(b)]))},
function(b,c){return $APP.IA(function(){return(0,$APP.I7b)(b,$APP.ul.F($APP.F([$APP.kp.F(c,$APP.F([$APP.lp,!0])),new $APP.m(null,1,[$APP.pO,!0],null)])))})},function(b,c){return $APP.pA($APP.qz(),$APP.Hw.A($APP.qE(b)),$APP.Ah.A(c))},function(b){var c=$APP.yu(b)?$APP.Qp.A($APP.I6a($APP.qz(),$APP.wi(b))):null;c=$APP.n(c)?c:b;var d=$APP.mE(c),e=$APP.FE(c);return $APP.n(d)?$APP.n(e)?$APP.BJ(c,new $APP.m(null,1,[$APP.AJ,b],null)):$APP.zJ($APP.rE(b,!1)):null},function(b){return $APP.Gi($APP.T5a($APP.wi(b)))}])},
zOd=new $APP.K(null,"queryBlockByUUID","queryBlockByUUID",2091812895),wOd=new $APP.K(null,"exportToImage","exportToImage",-154356643),vOd=new $APP.K(null,"addNewBlock","addNewBlock",1426762680),BOd=new $APP.K(null,"KeyboardShortcut","KeyboardShortcut",1250004264),fOd=new $APP.K(null,"files?","files?",-1267491104),kOd=new $APP.K(null,"getBlockPageName","getBlockPageName",-1656908032),COd=new $APP.K(null,"renderers","renderers",-1460292282),DOd=new $APP.K(null,"model","model",331153215),mOd=new $APP.K(null,
"getRedirectPageName","getRedirectPageName",-1858136925),pOd=new $APP.K(null,"isMobile","isMobile",-2043133877),nOd=new $APP.K(null,"setCurrentPdf","setCurrentPdf",-63289336),EOd=new $APP.K(null,"onMount","onMount",-876858467),qOd=new $APP.K(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),tOd=new $APP.K(null,"makeAssetUrl","makeAssetUrl",217779988),FOd=new $APP.K(null,"onPersist","onPersist",-1848738852),GOd=new $APP.K(null,"Breadcrumb","Breadcrumb",-1351298906),uOd=new $APP.K(null,
"copyToClipboard","copyToClipboard",1092115063),yOd=new $APP.K(null,"redirectToPage","redirectToPage",87147838),oOd=new $APP.K(null,"addNewWhiteboard","addNewWhiteboard",554297706),sOd=new $APP.K(null,"saveAsset","saveAsset",-668047853),HOd=new $APP.K(null,"BacklinksCount","BacklinksCount",364670631),IOd=new $APP.K(null,"Block","Block",-1959785792),xOd=new $APP.K(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),JOd=new $APP.K(null,"Page","Page",-1267059506),eOd=new $APP.K(null,"pages?","pages?",
-2065014049),KOd=new $APP.K(null,"PageName","PageName",-164991013),LOd=new $APP.K(null,"Tweet","Tweet",-452258680),rOd=new $APP.K(null,"isWhiteboardPage","isWhiteboardPage",-134150579),MOd=new $APP.K(null,"BlockReference","BlockReference",-120254741),lOd=new $APP.K(null,"inflateAsset","inflateAsset",-1449040639);$APP.oda("tldraw");var NOd=$APP.Rl(617);var OOd,POd;$APP.pEd={};OOd=$APP.UO($APP.pa(NOd,"App"));$APP.sEd=$APP.pa(NOd,"generateJSXFromModel");
POd=new $APP.m(null,8,[JOd,$APP.qq($APP.vq,function(a){return(0,$APP.aV)(new $APP.m(null,2,[$APP.RJ,$APP.rE($APP.pa(a,"pageName"),!1),$APP.pO,!0],null))},null,"frontend.extensions.tldraw/page-cp"),IOd,$APP.qq($APP.vq,function(a){a=$APP.Yh($APP.pa(a,"blockId"));var b=$APP.rZa($APP.nsc);a=b.A?b.A(a):b.call(null,a);return $APP.dq(a)},null,"frontend.extensions.tldraw/block-cp"),GOd,$APP.qq($APP.vq,function(a){return $APP.dq($APP.GR(new $APP.m(null,1,[$APP.lW,!0],null),$APP.qz(),$APP.Yh($APP.pa(a,"blockId")),
new $APP.m(null,2,[$APP.Aec,$APP.pa(a,"endSeparator"),$APP.Bec,$APP.pa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),LOd,$APP.qq($APP.vq,function(a){return(0,$APP.udc)($APP.pa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),KOd,$APP.qq($APP.vq,function(a){return(0,$APP.tR)(new $APP.m(null,1,[$APP.lW,!0],null),new $APP.m(null,1,[$APP.Qp,$APP.pa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),HOd,function(a){return $APP.Ff.j($APP.vEd,$APP.zh.j(function(b){return $APP.kp.F($APP.pa(a,
b),$APP.F([new $APP.m(null,1,[$APP.lp,!0],null)]))},new $APP.O(null,3,5,$APP.Q,["id","className","options"],null)))},MOd,$APP.qq($APP.vq,function(a){return(0,$APP.Hcc)($APP.rf,$APP.pa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),BOd,$APP.qq($APP.vq,function(a){a=$APP.lP($APP.Ah.A($APP.pa(a,"action")));return"string"===typeof a?$APP.dq($APP.iS(a)):$APP.dq($APP.jo.j(" | ",$APP.zh.j($APP.iS,a)))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);
$APP.qEd=$APP.qq($APP.vq,function(a,b){function c(k){if($APP.n(k)){k.appUndo=iOd;k.appRedo=jOd;var p=$APP.pa(k,"api");return $APP.n(p)?$APP.Gl(d?cOd(p):null,function(){dOd(k.currentPage);$APP.r_a(k,b);return h.A?h.A(k):h.call(null,k)}):null}return null}var d=bOd(a),e=$APP.NVb(a),f=$APP.Cq(null),g=$APP.C.C(f,0,null),h=$APP.C.C(f,1,null);$APP.Dq(function(){$APP.n($APP.n(g)?b:g)&&$APP.r_a(g,b);return function(){return $APP.qc}},new $APP.O(null,2,5,$APP.Q,[b,g],null));return $APP.n(e)?$APP.Y("div",{style:{overscrollBehavior:"none"},
onBlur:function(k){k=$APP.pa(k,"target").tagName;var p=new $APP.Wg(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);k=p.A?p.A(k):p.call(null,k);return $APP.n(k)?$APP.sA():null},onWheel:$APP.Lu,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.sb(g)?$APP.Y("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.dq($APP.qP("Loading onboarding whiteboard ..."))]):null,$APP.dq(function(){var k=new $APP.m(null,6,[COd,POd,$APP.PTa,
AOd(a),EOd,c,$APP.$5c,!0,FOd,function(p,q){$APP.rz(new $APP.O(null,2,5,$APP.Q,[$APP.f8c,$APP.qz()],null),$APP.Vu());return $APP.n(!1)?(console.time("tldraw persist"),p=YNd(a,p,q.replace),console.timeEnd("tldraw persist"),p):YNd(a,p,q.replace)},DOd,e],null);return OOd.A?OOd.A(k):OOd.call(null,k)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Pa.cj();
}).call(this);