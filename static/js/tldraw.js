(function(){
shadow$provide[586]=function(ya,ca,Sa,R){function w(u,A,y){var C,P={},g=null,h=null;void 0!==y&&(g=""+y);void 0!==A.key&&(g=""+A.key);void 0!==A.ref&&(h=A.ref);for(C in A)q.call(A,C)&&!c.hasOwnProperty(C)&&(P[C]=A[C]);if(u&&u.defaultProps)for(C in A=u.defaultProps,A)void 0===P[C]&&(P[C]=A[C]);return{$$typeof:Y,type:u,key:g,ref:h,props:P,_owner:z.current}}ca(158);ya=ca(19);var Y=60103;R.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(ca=Symbol.for,Y=ca("react.element"),R.Fragment=ca("react.fragment"));
var z=ya.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};R.jsx=w;R.jsxs=w};
shadow$provide[588]=function(ya,ca,Sa,R){Sa.exports=ca(586)};
shadow$provide[589]=function(ya,ca,Sa,R){function w(dc){for(var Nc="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+dc,Qc=1;Qc<arguments.length;Qc++)Nc+="\x26args[]\x3d"+encodeURIComponent(arguments[Qc]);return"Minified React error #"+dc+"; visit "+Nc+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Y(dc){if(null==dc)return null;if("function"===typeof dc)return dc.displayName||dc.name||null;if("string"===typeof dc)return dc;
switch(dc){case Q:return"Fragment";case T:return"Portal";case F:return"Profiler";case G:return"StrictMode";case ia:return"Suspense";case U:return"SuspenseList"}if("object"===typeof dc)switch(dc.$$typeof){case M:return(dc.displayName||"Context")+".Consumer";case O:return(dc._context.displayName||"Context")+".Provider";case I:var Nc=dc.render;Nc=Nc.displayName||Nc.name||"";return dc.displayName||(""!==Nc?"ForwardRef("+Nc+")":"ForwardRef");case Z:return Y(dc.type);case W:return Y(dc._render);case aa:Nc=
dc._payload;dc=dc._init;try{return Y(dc(Nc))}catch(Qc){}}return null}function z(dc,Nc){for(var Qc=dc._threadCount|0;Qc<=Nc;Qc++)dc[Qc]=dc._currentValue2,dc._threadCount=Qc+1}function q(dc,Nc,Qc,Bd){if(Bd&&(Bd=dc.contextType,"object"===typeof Bd&&null!==Bd))return z(Bd,Qc),Bd[Qc];if(dc=dc.contextTypes){Qc={};for(var Xc in dc)Qc[Xc]=Nc[Xc];Nc=Qc}else Nc=va;return Nc}function c(dc){if(Ga.call(Ya,dc))return!0;if(Ga.call(Ja,dc))return!1;if(xa.test(dc))return Ya[dc]=!0;Ja[dc]=!0;return!1}function u(dc,
Nc,Qc,Bd){if(null!==Qc&&0===Qc.type)return!1;switch(typeof Nc){case "function":case "symbol":return!0;case "boolean":if(Bd)return!1;if(null!==Qc)return!Qc.acceptsBooleans;dc=dc.toLowerCase().slice(0,5);return"data-"!==dc&&"aria-"!==dc;default:return!1}}function A(dc,Nc,Qc,Bd){if(null===Nc||"undefined"===typeof Nc||u(dc,Nc,Qc,Bd))return!0;if(Bd)return!1;if(null!==Qc)switch(Qc.type){case 3:return!Nc;case 4:return!1===Nc;case 5:return isNaN(Nc);case 6:return isNaN(Nc)||1>Nc}return!1}function y(dc,Nc,
Qc,Bd,Xc,sc,Sc){this.acceptsBooleans=2===Nc||3===Nc||4===Nc;this.attributeName=Bd;this.attributeNamespace=Xc;this.mustUseProperty=Qc;this.propertyName=dc;this.type=Nc;this.sanitizeURL=sc;this.removeEmptyString=Sc}function C(dc){return dc[1].toUpperCase()}function P(dc){if("boolean"===typeof dc||"number"===typeof dc)return""+dc;dc=""+dc;var Nc=Ba.exec(dc);if(Nc){var Qc="",Bd,Xc=0;for(Bd=Nc.index;Bd<dc.length;Bd++){switch(dc.charCodeAt(Bd)){case 34:Nc="\x26quot;";break;case 38:Nc="\x26amp;";break;case 39:Nc=
"\x26#x27;";break;case 60:Nc="\x26lt;";break;case 62:Nc="\x26gt;";break;default:continue}Xc!==Bd&&(Qc+=dc.substring(Xc,Bd));Xc=Bd+1;Qc+=Nc}dc=Xc!==Bd?Qc+dc.substring(Xc,Bd):Qc}return dc}function g(dc,Nc){var Qc=Fa.hasOwnProperty(dc)?Fa[dc]:null,Bd;if(Bd="style"!==dc)Bd=null!==Qc?0===Qc.type:!(2<dc.length)||"o"!==dc[0]&&"O"!==dc[0]||"n"!==dc[1]&&"N"!==dc[1]?!1:!0;if(Bd||A(dc,Nc,Qc,!1))return"";if(null!==Qc){dc=Qc.attributeName;Bd=Qc.type;if(3===Bd||4===Bd&&!0===Nc)return dc+'\x3d""';Qc.sanitizeURL&&
(Nc=""+Nc);return dc+'\x3d"'+(P(Nc)+'"')}return c(dc)?dc+'\x3d"'+(P(Nc)+'"'):""}function h(dc,Nc){return dc===Nc&&(0!==dc||1/dc===1/Nc)||dc!==dc&&Nc!==Nc}function b(){if(null===ka)throw Error(w(321));return ka}function l(){if(0<Va)throw Error(w(312));return{memoizedState:null,queue:null,next:null}}function m(){null===na?null===ua?(oa=!1,ua=na=l()):(oa=!0,na=ua):null===na.next?(oa=!1,na=na.next=l()):(oa=!0,na=na.next);return na}function p(dc,Nc,Qc,Bd){for(;La;)La=!1,Va+=1,na=null,Qc=dc(Nc,Bd);D();
return Qc}function D(){ka=null;La=!1;ua=null;Va=0;na=Oa=null}function v(dc,Nc){return"function"===typeof Nc?Nc(dc):Nc}function t(dc,Nc,Qc){ka=b();na=m();if(oa){var Bd=na.queue;Nc=Bd.dispatch;if(null!==Oa&&(Qc=Oa.get(Bd),void 0!==Qc)){Oa.delete(Bd);Bd=na.memoizedState;do Bd=dc(Bd,Qc.action),Qc=Qc.next;while(null!==Qc);na.memoizedState=Bd;return[Bd,Nc]}return[na.memoizedState,Nc]}dc=dc===v?"function"===typeof Nc?Nc():Nc:void 0!==Qc?Qc(Nc):Nc;na.memoizedState=dc;dc=na.queue={last:null,dispatch:null};
dc=dc.dispatch=f.bind(null,ka,dc);return[na.memoizedState,dc]}function r(dc,Nc){ka=b();na=m();Nc=void 0===Nc?null:Nc;if(null!==na){var Qc=na.memoizedState;if(null!==Qc&&null!==Nc){var Bd=Qc[1];a:if(null===Bd)Bd=!1;else{for(var Xc=0;Xc<Bd.length&&Xc<Nc.length;Xc++)if(!la(Nc[Xc],Bd[Xc])){Bd=!1;break a}Bd=!0}if(Bd)return Qc[0]}}dc=dc();na.memoizedState=[dc,Nc];return dc}function f(dc,Nc,Qc){if(!(25>Va))throw Error(w(301));if(dc===ka)if(La=!0,dc={action:Qc,next:null},null===Oa&&(Oa=new Map),Qc=Oa.get(Nc),
void 0===Qc)Oa.set(Nc,dc);else{for(Nc=Qc;null!==Nc.next;)Nc=Nc.next;Nc.next=dc}}function E(){}function B(dc){switch(dc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J(dc){if(void 0===dc||null===dc)return dc;var Nc="";L.Children.forEach(dc,function(Qc){null!=Qc&&(Nc+=Qc)});return Nc}function V(dc,Nc){if(void 0===dc)throw Error(w(152,Y(Nc)||"Component"));}function H(dc,Nc,Qc){function Bd(Sc,
Jb){var lb=Jb.prototype&&Jb.prototype.isReactComponent,Db=q(Jb,Nc,Qc,lb),Gb=[],db=!1,rb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Gb)return null},enqueueReplaceState:function(Rc,fd){db=!0;Gb=[fd]},enqueueSetState:function(Rc,fd){if(null===Gb)return null;Gb.push(fd)}};if(lb){if(lb=new Jb(Sc.props,Db,rb),"function"===typeof Jb.getDerivedStateFromProps){var Ob=Jb.getDerivedStateFromProps.call(null,Sc.props,lb.state);null!=Ob&&(lb.state=S({},lb.state,Ob))}}else if(ka={},
lb=Jb(Sc.props,Db,rb),lb=p(Jb,Sc.props,lb,Db),null==lb||null==lb.render){dc=lb;V(dc,Jb);return}lb.props=Sc.props;lb.context=Db;lb.updater=rb;rb=lb.state;void 0===rb&&(lb.state=rb=null);if("function"===typeof lb.UNSAFE_componentWillMount||"function"===typeof lb.componentWillMount)if("function"===typeof lb.componentWillMount&&"function"!==typeof Jb.getDerivedStateFromProps&&lb.componentWillMount(),"function"===typeof lb.UNSAFE_componentWillMount&&"function"!==typeof Jb.getDerivedStateFromProps&&lb.UNSAFE_componentWillMount(),
Gb.length){rb=Gb;var gc=db;Gb=null;db=!1;if(gc&&1===rb.length)lb.state=rb[0];else{Ob=gc?rb[0]:lb.state;var Bc=!0;for(gc=gc?1:0;gc<rb.length;gc++){var Jc=rb[gc];Jc="function"===typeof Jc?Jc.call(lb,Ob,Sc.props,Db):Jc;null!=Jc&&(Bc?(Bc=!1,Ob=S({},Ob,Jc)):S(Ob,Jc))}lb.state=Ob}}else Gb=null;dc=lb.render();V(dc,Jb);if("function"===typeof lb.getChildContext&&(Sc=Jb.childContextTypes,"object"===typeof Sc)){var ic=lb.getChildContext(),Oc;for(Oc in ic)if(!(Oc in Sc))throw Error(w(108,Y(Jb)||"Unknown",Oc));
}ic&&(Nc=S({},Nc,ic))}for(;L.isValidElement(dc);){var Xc=dc,sc=Xc.type;if("function"!==typeof sc)break;Bd(Xc,sc)}return{child:dc,context:Nc}}var S=ca(158),L=ca(19),T=60106,Q=60107,G=60108,F=60114,O=60109,M=60110,I=60112,ia=60113,U=60120,Z=60115,aa=60116,W=60121,fa=60117,X=60119,ea=60129,pa=60131;"function"===typeof Symbol&&Symbol.for&&(ya=Symbol.for,T=ya("react.portal"),Q=ya("react.fragment"),G=ya("react.strict_mode"),F=ya("react.profiler"),O=ya("react.provider"),M=ya("react.context"),I=ya("react.forward_ref"),
ia=ya("react.suspense"),U=ya("react.suspense_list"),Z=ya("react.memo"),aa=ya("react.lazy"),W=ya("react.block"),fa=ya("react.fundamental"),X=ya("react.scope"),ea=ya("react.debug_trace_mode"),pa=ya("react.legacy_hidden"));ya=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var va={},ta=new Uint16Array(16);for(ca=0;15>ca;ca++)ta[ca]=ca+1;ta[15]=0;var xa=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ga=Object.prototype.hasOwnProperty,Ja={},Ya={},Fa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(dc){Fa[dc]=new y(dc,0,!1,dc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(dc){var Nc=dc[0];Fa[Nc]=new y(Nc,1,!1,dc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(dc){Fa[dc]=
new y(dc,2,!1,dc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(dc){Fa[dc]=new y(dc,2,!1,dc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(dc){Fa[dc]=new y(dc,3,!1,dc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(dc){Fa[dc]=new y(dc,3,!0,dc,null,!1,!1)});["capture","download"].forEach(function(dc){Fa[dc]=new y(dc,4,!1,dc,null,!1,!1)});["cols","rows","size","span"].forEach(function(dc){Fa[dc]=new y(dc,6,!1,dc,null,!1,!1)});["rowSpan","start"].forEach(function(dc){Fa[dc]=new y(dc,5,!1,dc.toLowerCase(),null,!1,!1)});var Ka=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(dc){var Nc=
dc.replace(Ka,C);Fa[Nc]=new y(Nc,1,!1,dc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(dc){var Nc=dc.replace(Ka,C);Fa[Nc]=new y(Nc,1,!1,dc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(dc){var Nc=dc.replace(Ka,C);Fa[Nc]=new y(Nc,1,!1,dc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(dc){Fa[dc]=new y(dc,1,!1,dc.toLowerCase(),null,!1,!1)});
Fa.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(dc){Fa[dc]=new y(dc,1,!1,dc.toLowerCase(),null,!0,!0)});var Ba=/["'&<>]/,la="function"===typeof Object.is?Object.is:h,ka=null,ua=null,na=null,oa=!1,La=!1,Oa=null,Va=0,Ma=null,Ua={readContext:function(dc){var Nc=Ma.threadID;z(dc,Nc);return dc[Nc]},useContext:function(dc){b();var Nc=Ma.threadID;z(dc,Nc);return dc[Nc]},useMemo:r,useReducer:t,useRef:function(dc){ka=
b();na=m();var Nc=na.memoizedState;return null===Nc?(dc={current:dc},na.memoizedState=dc):Nc},useState:function(dc){return t(v,dc)},useLayoutEffect:function(){},useCallback:function(dc,Nc){return r(function(){return dc},Nc)},useImperativeHandle:E,useEffect:E,useDebugValue:E,useDeferredValue:function(dc){b();return dc},useTransition:function(){b();return[function(dc){dc()},!1]},useOpaqueIdentifier:function(){return(Ma.identifierPrefix||"")+"R:"+(Ma.uniqueID++).toString(36)},useMutableSource:function(dc,
Nc){b();return Nc(dc._source)}},ib={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},vb=S({menuitem:!0},ib),yb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wa=["Webkit","ms","Moz","O"];Object.keys(yb).forEach(function(dc){Wa.forEach(function(Nc){Nc=Nc+dc.charAt(0).toUpperCase()+dc.substring(1);yb[Nc]=yb[dc]})});var hb=/([A-Z])/g,ab=/^ms-/,Qa=L.Children.toArray,
bb=ya.ReactCurrentDispatcher,Pa={listing:!0,pre:!0,textarea:!0},Lb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,xc={},oc={},pc=Object.prototype.hasOwnProperty,Cc={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},bd=function(){function dc(Qc,Bd,Xc){L.isValidElement(Qc)?Qc.type!==Q?Qc=[Qc]:(Qc=Qc.props.children,Qc=L.isValidElement(Qc)?[Qc]:Qa(Qc)):Qc=Qa(Qc);Qc={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:Qc,childIndex:0,context:va,footer:""};
var sc=ta[0];if(0===sc){var Sc=ta;sc=Sc.length;var Jb=2*sc;if(!(65536>=Jb))throw Error(w(304));var lb=new Uint16Array(Jb);lb.set(Sc);ta=lb;ta[0]=sc+1;for(Sc=sc;Sc<Jb-1;Sc++)ta[Sc]=Sc+1;ta[Jb-1]=0}else ta[0]=ta[sc];this.threadID=sc;this.stack=[Qc];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Bd;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=Xc&&Xc.identifierPrefix||""}
var Nc=dc.prototype;Nc.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var Qc=this.threadID;ta[Qc]=ta[0];ta[0]=Qc}};Nc.pushProvider=function(Qc){var Bd=++this.contextIndex,Xc=Qc.type._context,sc=this.threadID;z(Xc,sc);var Sc=Xc[sc];this.contextStack[Bd]=Xc;this.contextValueStack[Bd]=Sc;Xc[sc]=Qc.props.value};Nc.popProvider=function(){var Qc=this.contextIndex,Bd=this.contextStack[Qc],Xc=this.contextValueStack[Qc];this.contextStack[Qc]=null;this.contextValueStack[Qc]=
null;this.contextIndex--;Bd[this.threadID]=Xc};Nc.clearProviders=function(){for(var Qc=this.contextIndex;0<=Qc;Qc--)this.contextStack[Qc][this.threadID]=this.contextValueStack[Qc]};Nc.read=function(Qc){if(this.exhausted)return null;var Bd=Ma;Ma=this;var Xc=bb.current;bb.current=Ua;try{for(var sc=[""],Sc=!1;sc[0].length<Qc;){if(0===this.stack.length){this.exhausted=!0;var Jb=this.threadID;ta[Jb]=ta[0];ta[0]=Jb;break}var lb=this.stack[this.stack.length-1];if(Sc||lb.childIndex>=lb.children.length){var Db=
lb.footer;""!==Db&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===lb.type)this.currentSelectValue=null;else if(null!=lb.type&&null!=lb.type.type&&lb.type.type.$$typeof===O)this.popProvider(lb.type);else if(lb.type===ia){this.suspenseDepth--;var Gb=sc.pop();if(Sc){Sc=!1;var db=lb.fallbackFrame;if(!db)throw Error(w(303));this.stack.push(db);sc[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else sc[this.suspenseDepth]+=Gb}sc[this.suspenseDepth]+=Db}else{var rb=lb.children[lb.childIndex++],
Ob="";try{Ob+=this.render(rb,lb.context,lb.domNamespace)}catch(gc){if(null!=gc&&"function"===typeof gc.then)throw Error(w(294));throw gc;}finally{}sc.length<=this.suspenseDepth&&sc.push("");sc[this.suspenseDepth]+=Ob}}return sc[0]}finally{bb.current=Xc,Ma=Bd,D()}};Nc.render=function(Qc,Bd,Xc){if("string"===typeof Qc||"number"===typeof Qc){Xc=""+Qc;if(""===Xc)return"";if(this.makeStaticMarkup)return P(Xc);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+P(Xc);this.previousWasTextNode=!0;return P(Xc)}Bd=
H(Qc,Bd,this.threadID);Qc=Bd.child;Bd=Bd.context;if(null===Qc||!1===Qc)return"";if(!L.isValidElement(Qc)){if(null!=Qc&&null!=Qc.$$typeof){Xc=Qc.$$typeof;if(Xc===T)throw Error(w(257));throw Error(w(258,Xc.toString()));}Qc=Qa(Qc);this.stack.push({type:null,domNamespace:Xc,children:Qc,childIndex:0,context:Bd,footer:""});return""}var sc=Qc.type;if("string"===typeof sc)return this.renderDOM(Qc,Bd,Xc);switch(sc){case pa:case ea:case G:case F:case U:case Q:return Qc=Qa(Qc.props.children),this.stack.push({type:null,
domNamespace:Xc,children:Qc,childIndex:0,context:Bd,footer:""}),"";case ia:throw Error(w(294));case X:throw Error(w(343));}if("object"===typeof sc&&null!==sc)switch(sc.$$typeof){case I:ka={};var Sc=sc.render(Qc.props,Qc.ref);Sc=p(sc.render,Qc.props,Sc,Qc.ref);Sc=Qa(Sc);this.stack.push({type:null,domNamespace:Xc,children:Sc,childIndex:0,context:Bd,footer:""});return"";case Z:return Qc=[L.createElement(sc.type,S({ref:Qc.ref},Qc.props))],this.stack.push({type:null,domNamespace:Xc,children:Qc,childIndex:0,
context:Bd,footer:""}),"";case O:return sc=Qa(Qc.props.children),Xc={type:Qc,domNamespace:Xc,children:sc,childIndex:0,context:Bd,footer:""},this.pushProvider(Qc),this.stack.push(Xc),"";case M:sc=Qc.type;Sc=Qc.props;var Jb=this.threadID;z(sc,Jb);sc=Qa(Sc.children(sc[Jb]));this.stack.push({type:Qc,domNamespace:Xc,children:sc,childIndex:0,context:Bd,footer:""});return"";case fa:throw Error(w(338));case aa:return sc=Qc.type,Sc=sc._init,sc=Sc(sc._payload),Qc=[L.createElement(sc,S({ref:Qc.ref},Qc.props))],
this.stack.push({type:null,domNamespace:Xc,children:Qc,childIndex:0,context:Bd,footer:""}),""}throw Error(w(130,null==sc?sc:typeof sc,""));};Nc.renderDOM=function(Qc,Bd,Xc){var sc=Qc.type.toLowerCase();"http://www.w3.org/1999/xhtml"===Xc&&B(sc);if(!xc.hasOwnProperty(sc)){if(!Lb.test(sc))throw Error(w(65,sc));xc[sc]=!0}var Sc=Qc.props;if("input"===sc)Sc=S({type:void 0},Sc,{defaultChecked:void 0,defaultValue:void 0,value:null!=Sc.value?Sc.value:Sc.defaultValue,checked:null!=Sc.checked?Sc.checked:Sc.defaultChecked});
else if("textarea"===sc){var Jb=Sc.value;if(null==Jb){Jb=Sc.defaultValue;var lb=Sc.children;if(null!=lb){if(null!=Jb)throw Error(w(92));if(Array.isArray(lb)){if(!(1>=lb.length))throw Error(w(93));lb=lb[0]}Jb=""+lb}null==Jb&&(Jb="")}Sc=S({},Sc,{value:void 0,children:""+Jb})}else if("select"===sc)this.currentSelectValue=null!=Sc.value?Sc.value:Sc.defaultValue,Sc=S({},Sc,{value:void 0});else if("option"===sc){lb=this.currentSelectValue;var Db=J(Sc.children);if(null!=lb){var Gb=null!=Sc.value?Sc.value+
"":Db;Jb=!1;if(Array.isArray(lb))for(var db=0;db<lb.length;db++){if(""+lb[db]===Gb){Jb=!0;break}}else Jb=""+lb===Gb;Sc=S({selected:void 0,children:void 0},Sc,{selected:Jb,children:Db})}}if(Jb=Sc){if(vb[sc]&&(null!=Jb.children||null!=Jb.dangerouslySetInnerHTML))throw Error(w(137,sc));if(null!=Jb.dangerouslySetInnerHTML){if(null!=Jb.children)throw Error(w(60));if(!("object"===typeof Jb.dangerouslySetInnerHTML&&"__html"in Jb.dangerouslySetInnerHTML))throw Error(w(61));}if(null!=Jb.style&&"object"!==
typeof Jb.style)throw Error(w(62));}Jb=Sc;lb=this.makeStaticMarkup;Db=1===this.stack.length;Gb="\x3c"+Qc.type;a:if(-1===sc.indexOf("-"))db="string"===typeof Jb.is;else switch(sc){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":db=!1;break a;default:db=!0}for(fd in Jb)if(pc.call(Jb,fd)){var rb=Jb[fd];if(null!=rb){if("style"===fd){var Ob=void 0,gc="",Bc="";for(Ob in rb)if(rb.hasOwnProperty(Ob)){var Jc=
0===Ob.indexOf("--"),ic=rb[Ob];if(null!=ic){if(Jc)var Oc=Ob;else if(Oc=Ob,oc.hasOwnProperty(Oc))Oc=oc[Oc];else{var Rc=Oc.replace(hb,"-$1").toLowerCase().replace(ab,"-ms-");Oc=oc[Oc]=Rc}gc+=Bc+Oc+":";Bc=Ob;Jc=null==ic||"boolean"===typeof ic||""===ic?"":Jc||"number"!==typeof ic||0===ic||yb.hasOwnProperty(Bc)&&yb[Bc]?(""+ic).trim():ic+"px";gc+=Jc;Bc=";"}}rb=gc||null}Ob=null;db?Cc.hasOwnProperty(fd)||(Ob=fd,Ob=c(Ob)&&null!=rb?Ob+'\x3d"'+(P(rb)+'"'):""):Ob=g(fd,rb);Ob&&(Gb+=" "+Ob)}}lb||Db&&(Gb+=' data-reactroot\x3d""');
var fd=Gb;Jb="";ib.hasOwnProperty(sc)?fd+="/\x3e":(fd+="\x3e",Jb="\x3c/"+Qc.type+"\x3e");a:{lb=Sc.dangerouslySetInnerHTML;if(null!=lb){if(null!=lb.__html){lb=lb.__html;break a}}else if(lb=Sc.children,"string"===typeof lb||"number"===typeof lb){lb=P(lb);break a}lb=null}null!=lb?(Sc=[],Pa.hasOwnProperty(sc)&&"\n"===lb.charAt(0)&&(fd+="\n"),fd+=lb):Sc=Qa(Sc.children);Qc=Qc.type;Xc=null==Xc||"http://www.w3.org/1999/xhtml"===Xc?B(Qc):"http://www.w3.org/2000/svg"===Xc&&"foreignObject"===Qc?"http://www.w3.org/1999/xhtml":
Xc;this.stack.push({domNamespace:Xc,type:sc,children:Sc,childIndex:0,context:Bd,footer:Jb});this.previousWasTextNode=!1;return fd};return dc}();R.renderToNodeStream=function(){throw Error(w(207));};R.renderToStaticMarkup=function(dc,Nc){dc=new bd(dc,!0,Nc);try{return dc.read(Infinity)}finally{dc.destroy()}};R.renderToStaticNodeStream=function(){throw Error(w(208));};R.renderToString=function(dc,Nc){dc=new bd(dc,!1,Nc);try{return dc.read(Infinity)}finally{dc.destroy()}};R.version="17.0.2"};
shadow$provide[591]=function(ya,ca,Sa,R){Sa.exports=ca(589)};
shadow$provide[592]=function(ya,ca,Sa,R){function w(){if(!Uu&&(Uu="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Uu))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Uu(PD)}function Y(a,d=0){return(Ll[a[d+0]]+Ll[a[d+1]]+Ll[a[d+2]]+Ll[a[d+3]]+"-"+Ll[a[d+4]]+Ll[a[d+5]]+"-"+Ll[a[d+6]]+Ll[a[d+7]]+"-"+Ll[a[d+8]]+Ll[a[d+9]]+"-"+Ll[a[d+10]]+Ll[a[d+11]]+Ll[a[d+12]]+Ll[a[d+13]]+Ll[a[d+14]]+
Ll[a[d+15]]).toLowerCase()}function z(a){let d=0;var k=0;for(var K of a)d+=K.w*K.h,k=Math.max(k,K.w);a.sort((qa,Ha)=>Ha.h-qa.h);k=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),k),h:Infinity}];let da=K=0;for(const qa of a)for(a=k.length-1;0<=a;a--){var ja=k[a];if(!(qa.w>ja.w||qa.h>ja.h)){qa.x=ja.x;qa.y=ja.y;da=Math.max(da,qa.y+qa.h);K=Math.max(K,qa.x+qa.w);qa.w===ja.w&&qa.h===ja.h?(ja=k.pop(),a<k.length&&(k[a]=ja)):qa.h===ja.h?(ja.x+=qa.w,ja.w-=qa.w):(qa.w!==ja.w&&k.push({x:ja.x+qa.w,y:ja.y,w:ja.w-
qa.w,h:qa.h}),ja.y+=qa.h,ja.h-=qa.h);break}}return{w:K,h:da,fill:d/(K*da)||0}}function q(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function c(a,d,k=0){const K=[a[0]+d[0]/2,a[1]+d[1]/2],da=yd.rotWith(a,K,k),ja=yd.rotWith(yd.add(a,[d[0],0]),K,k),qa=yd.rotWith(yd.add(a,d),K,k);a=yd.rotWith(yd.add(a,[0,d[1]]),K,k);return[["top",[da,ja]],["right",[ja,qa]],["bottom",[qa,a]],["left",[a,da]]]}function u(a,d,k,K){const [da,ja]=a,[qa,Ha]=d,[Ra,$a]=k,[fb,jb]=K;return Ha/qa!==(jb-$a)/(fb-Ra)&&
(d=qa*(jb-$a)-Ha*(fb-Ra),0!==d&&(a=((ja-$a)*(fb-Ra)-(da-Ra)*(jb-$a))/d,d=((ja-$a)*qa-(da-Ra)*Ha)/d,0<=a&&0<=d&&1>=d))?q("intersection",[da+a*qa,ja+a*Ha]):q("no intersection")}function A(a,d,k,K,da=0){return b(k,K,da,a,d)}function y(a,d,k,K=0){const {minX:da,minY:ja,width:qa,height:Ha}=k;return A(a,d,[da,ja],[qa,Ha],K)}function C(a,d,k,K){var da=yd.sub(a,k);k=yd.sub(K,k);d=yd.sub(d,a);K=k[0]*da[1]-k[1]*da[0];da=d[0]*da[1]-d[1]*da[0];k=k[1]*d[0]-k[0]*d[1];return 0===K||0===da?q("coincident"):0===k?
q("parallel"):0!==k&&(K/=k,da/=k,0<=K&&1>=K&&0<=da&&1>=da)?q("intersection",yd.add(a,yd.mul(d,K))):q("no intersection")}function P(a,d,k,K){var da=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),ja=2*((d[0]-a[0])*(a[0]-k[0])+(d[1]-a[1])*(a[1]-k[1]));k=ja*ja-4*da*(k[0]*k[0]+k[1]*k[1]+a[0]*a[0]+a[1]*a[1]-2*(k[0]*a[0]+k[1]*a[1])-K*K);if(0>k)return q("outside");if(0===k)return q("tangent");K=Math.sqrt(k);k=(-ja+K)/(2*da);da=(-ja-K)/(2*da);if((0>k||1<k)&&(0>da||1<da))return 0>k&&0>da||1<k&&1<da?q("outside"):
q("inside");ja=[];0<=k&&1>=k&&ja.push(yd.lrp(a,d,k));0<=da&&1>=da&&ja.push(yd.lrp(a,d,da));return q("intersection",...ja)}function g(a,d,k,K,da,ja=0){if(0===K||0===da||yd.isEqual(a,d))return q("no intersection");K=0>K?K:-K;da=0>da?da:-da;a=yd.sub(yd.rotWith(a,k,-ja),k);d=yd.sub(yd.rotWith(d,k,-ja),k);var qa=yd.sub(d,a),Ha=qa[0]*qa[0]/K/K+qa[1]*qa[1]/da/da;qa=2*a[0]*qa[0]/K/K+2*a[1]*qa[1]/da/da;const Ra=[];K=qa*qa-4*Ha*(a[0]*a[0]/K/K+a[1]*a[1]/da/da-1);0===K?Ra.push(-qa/2/Ha):0<K&&(K=Math.sqrt(K),
Ra.push((-qa+K)/2/Ha),Ra.push((-qa-K)/2/Ha));Ha=Ra.filter($a=>0<=$a&&1>=$a).map($a=>yd.add(k,yd.add(a,yd.mul(yd.sub(d,a),$a)))).map($a=>yd.rotWith($a,k,ja));return q("intersection",...Ha)}function h(a,d,k){const K=[];for(let da=1;da<k.length;da++){const ja=C(a,d,k[da-1],k[da]);ja&&K.push(...ja.points)}return 0===K.length?q("no intersection"):q("intersection",...k)}function b(a,d,k,K,da){return c(a,d,k).reduce((ja,[qa,[Ha,Ra]])=>{(Ha=u(K,da,Ha,Ra))&&ja.push(q(qa,...Ha.points));return ja},[]).filter(ja=>
ja.didIntersect)}function l(a,d,k,K){return c(a,d).reduce((da,[ja,[qa,Ha]])=>{(qa=C(k,K,qa,Ha))&&da.push(q(ja,...qa.points));return da},[]).filter(da=>da.didIntersect)}function m(a,d,k,K){return c(a,d).reduce((da,[ja,[qa,Ha]])=>{(qa=P(qa,Ha,k,K))&&da.push(hf(Yd({},qa),{message:ja}));return da},[]).filter(da=>da.didIntersect)}function p(a,d,k,K,da,ja=0){return c(a,d).reduce((qa,[Ha,[Ra,$a]])=>{(Ra=g(Ra,$a,k,K,da,ja))&&qa.push(hf(Yd({},Ra),{message:Ha}));return qa},[]).filter(qa=>qa.didIntersect)}function D(a,
d,k){return c(a,d).reduce((K,[da,[ja,qa]])=>{ja=h(ja,qa,k);ja.didIntersect&&K.push(q(da,...ja.points));return K},[]).filter(K=>K.didIntersect)}function v(a,d,k){return c(a,d).reduce((K,[da,[ja,qa]])=>{{const Ha=[];for(let Ra=1;Ra<k.length+1;Ra++){const $a=C(ja,qa,k[Ra-1],k[Ra%k.length]);$a&&Ha.push(...$a.points)}ja=0===Ha.length?q("no intersection"):q("intersection",...k)}ja.didIntersect&&K.push(q(da,...ja.points));return K},[]).filter(K=>K.didIntersect)}function t(a,d,k,K=0,da,ja){return d===k?m(da,
ja,a,d):p(da,ja,a,d,k,K)}function r(a,d,k){const {minX:K,minY:da,width:ja,height:qa}=a;return l([K,da],[ja,qa],d,k)}function f(a){for(var d=arguments.length,k=Array(1<d?d-1:0),K=1;K<d;K++)k[K-1]=arguments[K];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(k.length?" "+k.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function E(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?
window:"undefined"!==typeof ya?ya:"undefined"!==typeof self?self:RD}function B(){TD||f("Proxy not available")}function J(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function V(a){return"function"===typeof a}function H(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function S(a){return null!==a&&"object"===typeof a}function L(a){if(!S(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&
a.constructor;return"function"===typeof a&&a.toString()===UD}function T(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function Q(a,d,k){kp(a,d,{enumerable:!1,writable:!0,configurable:!0,value:k})}function G(a,d,k){kp(a,d,{enumerable:!1,writable:!1,configurable:!0,value:k})}function F(a,d){var k="isMobX"+a;d.prototype[k]=!0;return function(K){return S(K)&&!0===K[k]}}function O(a){return a instanceof Map}function M(a){return a instanceof
Set}function I(a){var d=Object.keys(a);if(!kz)return d;var k=Object.getOwnPropertySymbols(a);return k.length?[].concat(d,k.filter(function(K){return Gt.propertyIsEnumerable.call(a,K)})):d}function ia(a){return null===a?null:"object"===typeof a?""+a:a}function U(a,d){return Gt.hasOwnProperty.call(a,d)}function Z(a,d){for(var k=0;k<d.length;k++){var K=d[k];K.enumerable=K.enumerable||!1;K.configurable=!0;"value"in K&&(K.writable=!0);Object.defineProperty(a,K.key,K)}}function aa(a,d,k){d&&Z(a.prototype,
d);k&&Z(a,k);Object.defineProperty(a,"prototype",{writable:!1});return a}function W(){W=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],K;for(K in k)Object.prototype.hasOwnProperty.call(k,K)&&(a[K]=k[K])}return a};return W.apply(this,arguments)}function fa(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;X(a,d)}function X(a,d){X=Object.setPrototypeOf||function(k,K){k.__proto__=K;return k};return X(a,d)}function ea(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function pa(a,d){if(a){if("string"===typeof a)return va(a,d);var k=Object.prototype.toString.call(a).slice(8,-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return va(a,d)}}function va(a,d){if(null==d||d>a.length)d=a.length;for(var k=0,K=Array(d);k<d;k++)K[k]=a[k];return K}function ta(a,d){var k="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=
k.call(a)).next.bind(k);if(Array.isArray(a)||(k=pa(a))||d&&a&&"number"===typeof a.length){k&&(a=k);var K=0;return function(){return K>=a.length?{done:!0}:{done:!1,value:a[K++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function xa(a){return Object.assign(function(d,k){Ga(d,k,a)},a)}function Ga(a,d,k){U(a,go)||Q(a,go,W({},a[go]));k.annotationType_!==WD&&(a[go][d]=k)}function Ja(a){U(a,
go)||Q(a,go,W({},a[go]));return a[go]}function Ya(a,d,k){void 0===d&&(d=ms);void 0===k&&(k=ms);a=new Ht(a);d!==ms&&Ic(lE,a,d,void 0);k!==ms&&pd(a,k);return a}function Fa(a,d,k){return kd(a)?a:Array.isArray(a)?yg.array(a,{name:k}):L(a)?yg.object(a,void 0,{name:k}):O(a)?yg.map(a,{name:k}):M(a)?yg.set(a,{name:k}):"function"!==typeof a||Jc(a)||ue(a)?a:T(a)?Mt(a):Lt(k,a)}function Ka(a){return a}function Ba(a,d){return{annotationType_:a,options_:d,make_:la,extend_:ka}}function la(a,d,k,K){var da;if(null!=
(da=this.options_)&&da.bound)return null===this.extend_(a,d,k,!1)?0:1;if(K===a.target_)return null===this.extend_(a,d,k,!1)?0:2;if(Jc(k.value))return 1;a=ua(a,this,d,k,!1);kp(K,d,a);return 2}function ka(a,d,k,K){k=ua(a,this,d,k);return a.defineProperty_(d,k,K)}function ua(a,d,k,K,da){var ja,qa,Ha,Ra,$a,fb,jb;void 0===da&&(da=Af.safeDescriptors);K=K.value;if(null!=(ja=d.options_)&&ja.bound){var Kb;K=K.bind(null!=(Kb=a.proxy_)?Kb:a.target_)}return{value:Pa(null!=(qa=null==(Ha=d.options_)?void 0:Ha.name)?
qa:k.toString(),K,null!=(Ra=null==($a=d.options_)?void 0:$a.autoAction)?Ra:!1,null!=(fb=d.options_)&&fb.bound?null!=(jb=a.proxy_)?jb:a.target_:void 0),configurable:da?a.isPlainObject_:!0,enumerable:!1,writable:da?!1:!0}}function na(a,d){return{annotationType_:a,options_:d,make_:oa,extend_:La}}function oa(a,d,k,K){var da;if(K===a.target_)return null===this.extend_(a,d,k,!1)?0:2;if(null!=(da=this.options_)&&da.bound&&(!U(a.target_,d)||!ue(a.target_[d]))&&null===this.extend_(a,d,k,!1))return 0;if(ue(k.value))return 1;
a=Oa(a,this,d,k,!1,!1);kp(K,d,a);return 2}function La(a,d,k,K){var da;k=Oa(a,this,d,k,null==(da=this.options_)?void 0:da.bound);return a.defineProperty_(d,k,K)}function Oa(a,d,k,K,da,ja){void 0===ja&&(ja=Af.safeDescriptors);d=K.value;ue(d)||(d=Mt(d));if(da){var qa;d=d.bind(null!=(qa=a.proxy_)?qa:a.target_);d.isMobXFlow=!0}return{value:d,configurable:ja?a.isPlainObject_:!0,enumerable:!1,writable:ja?!1:!0}}function Va(a,d){return{annotationType_:a,options_:d,make_:Ma,extend_:Ua}}function Ma(a,d,k){return null===
this.extend_(a,d,k,!1)?0:1}function Ua(a,d,k,K){return a.defineComputedProperty_(d,W({},this.options_,{get:k.get,set:k.set}),K)}function ib(a,d){return{annotationType_:a,options_:d,make_:vb,extend_:yb}}function vb(a,d,k){return null===this.extend_(a,d,k,!1)?0:1}function yb(a,d,k,K){var da,ja;return a.defineObservableProperty_(d,k.value,null!=(da=null==(ja=this.options_)?void 0:ja.enhancer)?da:Fa,K)}function Wa(a){return{annotationType_:"true",options_:a,make_:hb,extend_:ab}}function hb(a,d,k,K){var da,
ja;if(k.get)return Eg.make_(a,d,k,K);if(k.set){k=Pa(d.toString(),k.set);if(K===a.target_)return null===a.defineProperty_(d,{configurable:Af.safeDescriptors?a.isPlainObject_:!0,set:k})?0:2;kp(K,d,{configurable:!0,set:k});return 2}if(K!==a.target_&&"function"===typeof k.value){var qa;if(T(k.value)){var Ha;return(null!=(Ha=this.options_)&&Ha.autoBind?Mt.bound:Mt).make_(a,d,k,K)}return(null!=(qa=this.options_)&&qa.autoBind?Lt.bound:Lt).make_(a,d,k,K)}qa=!1===(null==(da=this.options_)?void 0:da.deep)?
yg.ref:yg;if("function"===typeof k.value&&null!=(ja=this.options_)&&ja.autoBind){var Ra;k.value=k.value.bind(null!=(Ra=a.proxy_)?Ra:a.target_)}return qa.make_(a,d,k,K)}function ab(a,d,k,K){var da,ja;if(k.get)return Eg.extend_(a,d,k,K);if(k.set)return a.defineProperty_(d,{configurable:Af.safeDescriptors?a.isPlainObject_:!0,set:Pa(d.toString(),k.set)},K);if("function"===typeof k.value&&null!=(da=this.options_)&&da.autoBind){var qa;k.value=k.value.bind(null!=(qa=a.proxy_)?qa:a.target_)}return(!1===(null==
(ja=this.options_)?void 0:ja.deep)?yg.ref:yg).extend_(a,d,k,K)}function Qa(a){if(!0===a.deep)var d=Fa;else{if(!1===a.deep)a=Ka;else{a=a.defaultDecorator;var k;a=a?null!=(d=null==(k=a.options_)?void 0:k.enhancer)?d:Fa:Fa}d=a}return d}function bb(a,d,k){if(H(d))Ga(a,d,lz);else return kd(a)?a:L(a)?yg.object(a,d,k):Array.isArray(a)?yg.array(a,d):O(a)?yg.map(a,d):M(a)?yg.set(a,d):"object"===typeof a&&null!==a?a:yg.box(a,d)}function Pa(a,d,k,K){function da(){a:{var ja=K||this,qa=arguments,Ha=Af.trackingDerivation,
Ra=!k||!Ha;Sc();var $a=Af.allowStateChanges;Ra&&(dc(),$a=xc(!0));var fb=Nc(!0),jb=cE++,Kb=Zu;Zu=jb;try{var Nb=d.apply(ja,qa);break a}catch(fc){var Hb=fc;throw fc;}finally{Zu!==jb&&f(30),Zu=Kb,void 0!==Hb&&(Af.suppressReactionErrors=!0),Af.allowStateChanges=$a,Af.allowStateReads=fb,Jb(),Ra&&(Af.trackingDerivation=Ha),Af.suppressReactionErrors=!1}Nb=void 0}return Nb}void 0===k&&(k=!1);da.isMobxAction=!0;dE&&(qz.value=a,Object.defineProperty(da,"name",qz));return da}function Lb(a,d){a=xc(a);try{return d()}finally{Af.allowStateChanges=
a}}function xc(a){var d=Af.allowStateChanges;Af.allowStateChanges=a;return d}function oc(a){switch(a.dependenciesState_){case Ri.UP_TO_DATE_:return!1;case Ri.NOT_TRACKING_:case Ri.STALE_:return!0;case Ri.POSSIBLY_STALE_:for(var d=Nc(!0),k=dc(),K=a.observing_,da=K.length,ja=0;ja<da;ja++){var qa=K[ja];if(Kt(qa)){if(Af.disableErrorBoundaries)qa.get();else try{qa.get()}catch(Ha){return Af.trackingDerivation=k,Af.allowStateReads=d,!0}if(a.dependenciesState_===Ri.STALE_)return Af.trackingDerivation=k,Af.allowStateReads=
d,!0}}Qc(a);Af.trackingDerivation=k;Af.allowStateReads=d;return!1}}function pc(a,d,k){var K=Nc(!0);Qc(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++Af.runId;var da=Af.trackingDerivation;Af.trackingDerivation=a;Af.inBatch++;if(!0===Af.disableErrorBoundaries)var ja=d.call(k);else try{ja=d.call(k)}catch(fb){ja=new nr(fb)}Af.inBatch--;Af.trackingDerivation=da;var qa=a.observing_;d=a.observing_=a.newObserving_;k=Ri.UP_TO_DATE_;da=0;for(var Ha=a.unboundDepsCount_,Ra=
0;Ra<Ha;Ra++){var $a=d[Ra];0===$a.diffValue_&&($a.diffValue_=1,da!==Ra&&(d[da]=$a),da++);$a.dependenciesState_>k&&(k=$a.dependenciesState_)}d.length=da;a.newObserving_=null;for(Ha=qa.length;Ha--;)Ra=qa[Ha],0===Ra.diffValue_&&Xc(Ra,a),Ra.diffValue_=0;for(;da--;)qa=d[da],1===qa.diffValue_&&(qa.diffValue_=0,Ha=a,qa.observers_.add(Ha),qa.lowestObserverState_>Ha.dependenciesState_&&(qa.lowestObserverState_=Ha.dependenciesState_));k!==Ri.UP_TO_DATE_&&(a.dependenciesState_=k,a.onBecomeStale_());Af.allowStateReads=
K;return ja}function Cc(a){var d=a.observing_;a.observing_=[];for(var k=d.length;k--;)Xc(d[k],a);a.dependenciesState_=Ri.NOT_TRACKING_}function bd(a){var d=dc();try{return a()}finally{Af.trackingDerivation=d}}function dc(){var a=Af.trackingDerivation;Af.trackingDerivation=null;return a}function Nc(a){var d=Af.allowStateReads;Af.allowStateReads=a;return d}function Qc(a){if(a.dependenciesState_!==Ri.UP_TO_DATE_){a.dependenciesState_=Ri.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
Ri.UP_TO_DATE_}}function Bd(){(Af.pendingReactions.length||Af.inBatch||Af.isRunningReactions)&&f(36);rz=!0;if(av){var a=E();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);Af=new $u}}function Xc(a,d){a.observers_["delete"](d);0===a.observers_.size&&sc(a)}function sc(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,Af.pendingUnobservations.push(a))}function Sc(){Af.inBatch++}function Jb(){if(0===--Af.inBatch){0<Af.inBatch||Af.isRunningReactions||bv(rb);for(var a=Af.pendingUnobservations,
d=0;d<a.length;d++){var k=a[d];k.isPendingUnobservation_=!1;0===k.observers_.size&&(k.isBeingObserved_&&(k.isBeingObserved_=!1,k.onBUO()),k instanceof Jt&&k.suspend_())}Af.pendingUnobservations=[]}}function lb(a){var d=Af.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&Af.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<Af.inBatch&&sc(a);return!1}
function Db(a){a.lowestObserverState_!==Ri.STALE_&&(a.lowestObserverState_=Ri.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===Ri.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=Ri.STALE_}))}function Gb(a){a.lowestObserverState_!==Ri.STALE_&&(a.lowestObserverState_=Ri.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Ri.POSSIBLY_STALE_?d.dependenciesState_=Ri.STALE_:d.dependenciesState_===Ri.UP_TO_DATE_&&(a.lowestObserverState_=Ri.UP_TO_DATE_)}))}function db(a){a.lowestObserverState_===
Ri.UP_TO_DATE_&&(a.lowestObserverState_=Ri.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Ri.UP_TO_DATE_&&(d.dependenciesState_=Ri.POSSIBLY_STALE_,d.onBecomeStale_())}))}function rb(){Af.isRunningReactions=!0;for(var a=Af.pendingReactions,d=0;0<a.length;){++d===hE&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var k=a.splice(0),K=0,da=k.length;K<da;K++)k[K].runReaction_()}Af.isRunningReactions=!1}function Ob(a){var d=bv;bv=function(k){return a(function(){return d(k)})}}
function gc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Bc(a){return function(d,k){if(V(d))return Pa(d.name||"\x3cunnamed action\x3e",d,a);if(V(k))return Pa(d,k,a);if(H(k))return Ga(d,k,a?uz:tz);if(H(d))return xa(Ba(a?"autoAction":sz,{name:d,autoAction:a}))}}function Jc(a){return V(a)&&!0===a.isMobxAction}function ic(a,d){function k(){a(Ra)}var K,da;void 0===d&&(d=Rw);var ja=null!=(K=null==(da=d)?void 0:da.name)?K:"Autorun";if(d.scheduler||d.delay){var qa=
Oc(d),Ha=!1;var Ra=new ps(ja,function(){Ha||(Ha=!0,qa(function(){Ha=!1;Ra.isDisposed_||Ra.track(k)}))},d.onError,d.requiresObservable)}else Ra=new ps(ja,function(){this.track(k)},d.onError,d.requiresObservable);Ra.schedule_();return Ra.getDisposer_()}function Oc(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:kE}function Rc(a,d,k){function K(){fb=!1;if(!Hb.isDisposed_){var fc=!1;Hb.track(function(){var qc=Lb(!1,function(){return a(Hb)});fc=$a||!Nb(jb,qc);Kb=jb;
jb=qc});$a&&k.fireImmediately?qa(jb,Kb,Hb):!$a&&fc&&qa(jb,Kb,Hb);$a=!1}}var da;void 0===k&&(k=Rw);var ja=null!=(da=k.name)?da:"Reaction",qa=ig(ja,k.onError?fd(k.onError,d):d),Ha=!k.scheduler&&!k.delay,Ra=Oc(k),$a=!0,fb=!1,jb,Kb,Nb=k.compareStructural?ns.structural:k.equals||ns["default"],Hb=new ps(ja,function(){$a||Ha?K():fb||(fb=!0,Ra(K))},k.onError,k.requiresObservable);Hb.schedule_();return Hb.getDisposer_()}function fd(a,d){return function(){try{return d.apply(this,arguments)}catch(k){a.call(this,
k)}}}function pd(a,d,k){return Ic(mE,a,d,k)}function Ic(a,d,k,K){var da="function"===typeof K?ec(d,k):ec(d),ja=V(K)?K:k,qa=a+"L";da[qa]?da[qa].add(ja):da[qa]=new Set([ja]);return function(){var Ha=da[qa];Ha&&(Ha["delete"](ja),0===Ha.size&&delete da[qa])}}function wc(a){!0===a.isolateGlobalState&&Bd();var d=a.useProxies,k=a.enforceActions;void 0!==d&&(Af.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(Af.verifyProxies=!0);void 0!==k&&(d="always"===k?"always":
"observed"===k,Af.enforceActions=d,Af.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(K){K in a&&(Af[K]=!!a[K])});Af.allowStateReads=!Af.observableRequiresReaction;a.reactionScheduler&&Ob(a.reactionScheduler)}function je(a,d,k,K){var da=VD(d),ja=Hd(a,K)[jh];Sc();try{Yu(da).forEach(function(qa){ja.extend_(qa,da[qa],k?qa in k?k[qa]:!0:!0)})}finally{Jb()}return a}
function qf(a){var d={name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(qf));return d}function qe(){this.message="FLOW_CANCELLED"}function ue(a){return!0===(null==a?void 0:a.isMobXFlow)}function kd(a,d){return a?void 0!==d?ve(a)?a[jh].values_.has(d):!1:ve(a)||!!a[jh]||Sw(a)||cv(a)||Kt(a):!1}function Ae(a){if(ve(a))return a[jh].ownKeys_();f(38)}function Cf(a,d,k){a.set(d,k);return k}function fg(a,d){if(null==a||"object"!==typeof a||a instanceof
Date||!kd(a))return a;if(fE(a)||Kt(a))return fg(a.get(),d);if(d.has(a))return d.get(a);if(rd(a)){var k=Cf(d,a,Array(a.length));a.forEach(function(qa,Ha){k[Ha]=fg(qa,d)});return k}if(or(a)){var K=Cf(d,a,new Set);a.forEach(function(qa){K.add(fg(qa,d))});return K}if($p(a)){var da=Cf(d,a,new Map);a.forEach(function(qa,Ha){da.set(Ha,fg(qa,d))});return da}var ja=Cf(d,a,{});Ae(a).forEach(function(qa){Gt.propertyIsEnumerable.call(a,qa)&&(ja[qa]=fg(a[qa],d))});return ja}function jc(a,d){return fg(a,new Map)}
function Zc(){f("trace() is not available in production builds");for(var a=!1,d=arguments.length,k=Array(d),K=0;K<d;K++)k[K]=arguments[K];"boolean"===typeof k[k.length-1]&&(a=k.pop());a:{switch(k.length){case 0:d=Af.trackingDerivation;break a;case 1:d=ec(k[0]);break a;case 2:d=ec(k[0],k[1]);break a}d=void 0}if(!d)return f("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===os.NONE&&console.log("[mobx.trace] '"+
d.name_+"' tracing enabled");d.isTracing_=a?os.BREAK:os.LOG}function Gc(a,d){void 0===d&&(d=void 0);Sc();try{return a.apply(d)}finally{Jb()}}function ub(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function Bb(a,d){var k=a.interceptors_||(a.interceptors_=[]);k.push(d);return J(function(){var K=k.indexOf(d);-1!==K&&k.splice(K,1)})}function Eb(a,d){var k=dc();try{var K=[].concat(a.interceptors_||[]);a=0;for(var da=K.length;a<da&&((d=K[a](d))&&!d.type&&f(14),d);a++);return d}finally{Af.trackingDerivation=
k}}function hd(a){return void 0!==a.changeListeners_&&0<a.changeListeners_.length}function Td(a,d){var k=a.changeListeners_||(a.changeListeners_=[]);k.push(d);return J(function(){var K=k.indexOf(d);-1!==K&&k.splice(K,1)})}function Sd(a,d){var k=dc();if(a=a.changeListeners_){a=a.slice();for(var K=0,da=a.length;K<da;K++)a[K](d);Af.trackingDerivation=k}}function Ue(a,d,k){var K=Hd(a,k)[jh];Sc();try{var da;null!=(da=d)?da:d=Ja(a);Yu(d).forEach(function(ja){return K.make_(ja,d[ja])})}finally{Jb()}return a}
function kb(a,d,k,K){void 0===k&&(k="ObservableArray");void 0===K&&(K=!1);B();d=new Tw(k,d,K,!1);G(d.values_,jh,d);k=new Proxy(d.values_,qE);d.proxy_=k;a&&a.length&&(K=xc(!0),d.spliceWithArray_(0,0,a),Af.allowStateChanges=K);return k}function tb(a,d){"function"===typeof Array.prototype[a]&&(dv[a]=d(a))}function ob(a){return function(){var d=this[jh];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function Ub(a){return function(d,k){var K=this,da=this[jh];da.atom_.reportObserved();
return da.dehanceValues_(da.values_)[a](function(ja,qa){return d.call(k,ja,qa,K)})}}function Tb(a){return function(){var d=this,k=this[jh];k.atom_.reportObserved();k=k.dehanceValues_(k.values_);var K=arguments[0];arguments[0]=function(da,ja,qa){return K(da,ja,qa,d)};return k[a].apply(k,arguments)}}function rd(a){return S(a)&&rE(a[jh])}function td(a){if(O(a)||$p(a))return a;if(Array.isArray(a))return new Map(a);if(L(a)){var d=new Map,k;for(k in a)d.set(k,a[k]);return d}return f(21,a)}function Hd(a,
d){var k;if(U(a,jh))return a;var K=null!=(k=null==d?void 0:d.name)?k:"ObservableObject";k=zz;var da=new Map;K=String(K);var ja;var qa=d?null!=(ja=d.defaultDecorator)?ja:Wa(d):void 0;d=new k(a,da,K,qa);Q(a,jh,d);return a}function te(a){return yz[a]||(yz[a]={get:function(){return this[jh].getObservablePropValue_(a)},set:function(d){return this[jh].setObservablePropValue_(a,d)}})}function ve(a){return S(a)?yE(a[jh]):!1}function pe(a){return{enumerable:!1,configurable:!0,get:function(){return this[jh].get_(a)},
set:function(d){this[jh].set_(a,d)}}}function $d(a){if(a>Uw){for(var d=Uw;d<a+100;d++)kp(Vw.prototype,""+d,pe(d));Uw=a}}function Ab(a,d,k){return new Vw(a,d,k)}function ec(a,d){if("object"===typeof a&&null!==a){if(rd(a))return void 0!==d&&f(23),a[jh].atom_;if(or(a))return a[jh];if($p(a)){if(void 0===d)return a.keysAtom_;var k=a.data_.get(d)||a.hasMap_.get(d);k||f(25,d,Xa(a));return k}if(ve(a)){if(!d)return f(26);(k=a[jh].values_.get(d))||f(27,d,Xa(a));return k}if(Sw(a)||Kt(a)||cv(a))return a}else if(V(a)&&
cv(a[jh]))return a[jh];f(28)}function vc(a,d){a||f(29);if(void 0!==d)return vc(ec(a,d));if(Sw(a)||Kt(a)||cv(a)||$p(a)||or(a))return a;if(a[jh])return a[jh];f(24,a)}function Xa(a,d){if(void 0!==d)a=ec(a,d);else{if(Jc(a))return a.name;a=ve(a)||$p(a)||or(a)?vc(a):ec(a)}return a.name_}function sa(a,d,k){void 0===k&&(k=-1);return ra(a,d,k)}function ra(a,d,k,K,da){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var ja=typeof a;if("function"!==ja&&"object"!==ja&&"object"!=
typeof d)return!1;ja=Bz.call(a);if(ja!==Bz.call(d))return!1;switch(ja){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=k&&k++}a=Da(a);d=Da(d);ja="[object Array]"===ja;if(!ja){if("object"!=typeof a||"object"!=
typeof d)return!1;var qa=a.constructor,Ha=d.constructor;if(qa!==Ha&&!(V(qa)&&qa instanceof qa&&V(Ha)&&Ha instanceof Ha)&&"constructor"in a&&"constructor"in d)return!1}if(0===k)return!1;0>k&&(k=-1);K=K||[];da=da||[];for(qa=K.length;qa--;)if(K[qa]===a)return da[qa]===d;K.push(a);da.push(d);if(ja){qa=a.length;if(qa!==d.length)return!1;for(;qa--;)if(!ra(a[qa],d[qa],k-1,K,da))return!1}else{ja=Object.keys(a);qa=ja.length;if(Object.keys(d).length!==qa)return!1;for(;qa--;)if(Ha=ja[qa],!U(d,Ha)||!ra(a[Ha],
d[Ha],k-1,K,da))return!1}K.pop();da.pop();return!0}function Da(a){return rd(a)?a.slice():O(a)||$p(a)||M(a)||or(a)?Array.from(a.entries()):a}function Ta(a){a[Symbol.iterator]=wb;return a}function wb(){return this}function ac(a,d){const k=new Set(d),K=Object.values(a),da=new Set(K.filter(ja=>k.has(ja.toId)||k.has(ja.fromId)));a=da.size;for(d=-1;0!==d;)da.forEach(ja=>{ja=ja.fromId;for(const qa of K)qa.fromId===ja&&da.add(qa),qa.toId===ja&&da.add(qa)}),d=da.size-a,a=da.size;return Array.from(da.values())}
function Hc(a,d,k,K,da,ja,qa,Ha){if(da=d.getBindingPoint(da,ja,qa,Ha))return{id:K,type:"line",fromId:a.id,toId:d.id,handleId:k,point:be.toFixed(da.point),distance:da.distance}}function Wc(a,d){const k=a.getCenter(),K=d.getCenter();var da=tk();da=hf(Yd({},Nt.defaultProps),{id:da,type:Nt.id,parentId:a.props.parentId,point:k});a=Hc(da,a,"start",tk(),k,k,be.uni(be.sub(K,k)),!1);d=Hc(da,d,"end",tk(),K,K,be.uni(be.sub(k,K)),!1);return a&&d?(da.handles.start.point=[0,0],da.handles.end.point=be.sub(K,k),
da.handles.start.bindingId=a.id,da.handles.end.bindingId=d.id,[da,[a,d]]):null}function Vd(){return new HE}function re(){return new WeakMap}function xe(a){if(!a)return cx(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:cx(a);if(~FE.call(d).indexOf("[native code]"))try{return new d}catch(k){}return cx(a)}function Df(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function lf(a){return a.flags}function Ef(a){a=
GE.call(a);return a.substring(8,a.length-1)}function uf(a){return a[Symbol.toStringTag]||Ef(a)}function pg(a){return nA(a).concat(dx(a))}function hh(a,d,k){for(var K=OE(a),da=0,ja=K.length,qa,Ha;da<ja;++da)if(qa=K[da],"callee"!==qa&&"caller"!==qa)if(Ha=ME(a,qa)){Ha.get||Ha.set||(Ha.value=k.copier(Ha.value,k));try{LE(d,qa,Ha)}catch(Ra){d[qa]=Ha.value}}else d[qa]=k.copier(a[qa],k);return d}function kh(a,d){var k=new d.Constructor;d.cache.set(a,k);a.forEach(function(K,da){k.set(da,d.copier(K,d))});return k}
function Vf(a,d){var k=xe(d.prototype);d.cache.set(a,k);for(var K in a)pA.call(a,K)&&(k[K]=d.copier(a[K],d));return k}function ih(a,d){var k=xe(d.prototype);d.cache.set(a,k);for(var K in a)pA.call(a,K)&&(k[K]=d.copier(a[K],d));K=dx(a);for(var da=0,ja=K.length,qa;da<ja;++da)qa=K[da],NE.call(a,qa)&&(k[qa]=d.copier(a[qa],d));return k}function ti(a,d){return new d.Constructor(a.valueOf())}function gi(a,d){return a}function Mj(a,d){var k=new d.Constructor;d.cache.set(a,k);a.forEach(function(K){k.add(d.copier(K,
d))});return k}function Kk(a){function d(ja,qa){qa.prototype=qa.Constructor=void 0;if(!ja||"object"!==typeof ja)return ja;if(qa.cache.has(ja))return qa.cache.get(ja);qa.prototype=ja.__proto__||QE(ja);qa.Constructor=qa.prototype&&qa.prototype.constructor;if(!qa.Constructor||qa.Constructor===Object)return da(ja,qa);if(PE(ja))return K(ja,qa);var Ha=k[KE(ja)];return Ha?Ha(ja,qa):"function"===typeof ja.then?ja:da(ja,qa)}a=ex({},rA,a);var k={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,
Boolean:ti,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,Int32Array:a.arrayBuffer,Map:a.map,Number:ti,Object:a.object,Promise:gi,RegExp:a.regExp,Set:a.set,String:ti,WeakMap:gi,WeakSet:gi,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},K=k.Array,da=k.Object;return function(ja){return d(ja,{Constructor:void 0,cache:IE(),
copier:d,prototype:void 0})}}function Tl(a,d){return(0,UE.default)(a,d,{arrayMerge:(k,K,da)=>K})}function nk(a,d,k,K=!1){const [da,ja]=d,[qa,Ha]=k;a=qa+(a-da)/(ja-da)*(Ha-qa);return K?qa<Ha?Math.max(Math.min(a,Ha),qa):Math.max(Math.min(a,qa),Ha):a}function kj(a,d){return new Promise((k,K)=>{if("video"===d){const da=document.createElement("video");da.addEventListener("loadedmetadata",function(){k([this.videoWidth,this.videoHeight])},!1);da.src=a}else if("image"===d){const da=new Image;da.onload=()=>
k([da.width,da.height]);da.src=a;da.onerror=ja=>K(ja)}else"pdf"===d&&k([595,842])})}function Fi(a){return Object.values(Lw).includes(a)}function qh(a,d){return Fi(a)||null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:a}function Ul(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",
padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);return a}function Li(a,d,k=0){var K,da,ja;if(!a)return[16,32];let qa;qa="string"===typeof d?d:`${null!=(K=d.fontStyle)?K:"normal"} ${null!=(da=d.fontVariant)?da:"normal"} ${null!=(ja=d.fontWeight)?ja:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!fx.has(`${a}-${qa}-${k}`)){if(!dq)return[10,
10];dq.parentNode||document.body.appendChild(dq);dq.innerHTML=`${a}&#8203;`;dq.style.font=qa;dq.style.padding=k+"px";d=dq.getBoundingClientRect();fx.set(`${a}-${qa}-${k}`,[Math.ceil(d.width||1),Math.ceil(d.height||1)])}return fx.get(`${a}-${qa}-${k}`)}function Aj(a){try{if("string"!==typeof a||!QD.test(a))throw TypeError("Invalid UUID");let d;const k=new Uint8Array(16);k[0]=(d=parseInt(a.slice(0,8),16))>>>24;k[1]=d>>>16&255;k[2]=d>>>8&255;k[3]=d&255;k[4]=(d=parseInt(a.slice(9,13),16))>>>8;k[5]=d&
255;k[6]=(d=parseInt(a.slice(14,18),16))>>>8;k[7]=d&255;k[8]=(d=parseInt(a.slice(19,23),16))>>>8;k[9]=d&255;k[10]=(d=parseInt(a.slice(24,36),16))/1099511627776&255;k[11]=d/4294967296&255;k[12]=d>>>24&255;k[13]=d>>>16&255;k[14]=d>>>8&255;k[15]=d&255;return!0}catch(d){return!1}}function Uj(a,d=0,k){let K;return function(...da){null==k?void 0:k(...da);clearTimeout(K);K=setTimeout(()=>a.apply(da),d)}}function nh(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function wf(){var a,d,k;return(null==
(k=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:k.call(d,"ui/developer-mode?"))||!1}function bg(a){return!!a}function yk(a=0){return new Promise(d=>setTimeout(d,a))}function ol(a="noid"){gx[a]||(gx[a]=uA.createContext({}));return gx[a]}function dh(a="noid"){return uA.useContext(ol(a))}function ok(a){const {callbacks:d}=dh(),k=tA.useRef(-1);return tA.useMemo(()=>{const K=da=>{var ja,qa;const {order:Ha=0}=da;if(!Ha){var Ra=da.target;Ra.removeEventListener("pointerup",
K);Ra.releasePointerCapture(da.pointerId);null==(ja=d.onPointerUp)?void 0:ja.call(d,{type:"selection",handle:a,order:Ha},da);ja=Date.now();Ra=ja-k.current;300<Ra?k.current=ja:300>=Ra&&(null==(qa=d.onDoubleClick)?void 0:qa.call(d,{type:"selection",handle:a,order:Ha},da),k.current=-1);da.order=Ha+1}};return{onPointerDown:da=>{var ja;const {order:qa=0}=da;if(!qa){var Ha=al(da.currentTarget);Ha.setPointerCapture(da.pointerId);Ha.addEventListener("pointerup",K);null==(ja=d.onPointerDown)?void 0:ja.call(d,
{type:"selection",handle:a,order:qa},da);da.order=qa+1}},onPointerMove:da=>{var ja;const {order:qa=0}=da;qa||(null==(ja=d.onPointerMove)?void 0:ja.call(d,{type:"selection",handle:a,order:qa},da),da.order=qa+1)},onPointerEnter:da=>{var ja;const {order:qa=0}=da;qa||(null==(ja=d.onPointerEnter)?void 0:ja.call(d,{type:"selection",handle:a,order:qa},da),da.order=qa+1)},onPointerLeave:da=>{var ja;const {order:qa=0}=da;qa||(null==(ja=d.onPointerLeave)?void 0:ja.call(d,{type:"selection",handle:a,order:qa},
da),da.order=qa+1)},onKeyDown:da=>{var ja;null==(ja=d.onKeyDown)?void 0:ja.call(d,{type:"selection",handle:a,order:-1},da)},onKeyUp:da=>{var ja;null==(ja=d.onKeyUp)?void 0:ja.call(d,{type:"selection",handle:a,order:-1},da)}}},[d])}function al(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return al(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function lj(a,d,k){const K=Pt.useRef(!1),da=Pt.useCallback(()=>{var ja;if(K.current){const qa=
null==(ja=a.current)?void 0:ja.getBoundingClientRect();qa&&(ja={minX:qa.left,maxX:qa.left+qa.width,minY:qa.top,maxY:qa.top+qa.height,width:qa.width,height:qa.height},d.updateBounds(ja),null==k?void 0:k(ja))}else K.current=!0},[a,k]);Pt.useEffect(()=>{const ja=a.current?XE(a.current):document,qa=Uj(da,100);ja.addEventListener("scroll",qa);window.addEventListener("resize",qa);return()=>{ja.removeEventListener("scroll",qa);window.removeEventListener("resize",qa)}},[]);Pt.useLayoutEffect(()=>{const ja=
new ResizeObserver(qa=>{qa[0].contentRect&&da()});a.current&&ja.observe(a.current);return()=>{ja.disconnect()}},[a]);Pt.useEffect(()=>{da();setTimeout(()=>{var ja,qa;null==(qa=null==(ja=a.current)?void 0:ja.querySelector(".tl-canvas"))?void 0:qa.focus()})},[a])}function pl(a,d){return Object.keys(d).reduce((k,K)=>{const da=d[K];return da?k+`${`--${a}-${K}`}: ${da};
`:k},"")}function zh(a,d,k=".logseq-tldraw"){hx.useLayoutEffect(()=>{const K=document.createElement("style"),da=pl(a,d);K.setAttribute("id",`${a}-theme`);K.setAttribute("data-selector",k);K.innerHTML=`
        ${k} {
          ${da}
        }
      `;document.head.appendChild(K);return()=>{K&&document.head.contains(K)&&document.head.removeChild(K)}},[a,d,k])}function Vj(a,d){hx.useLayoutEffect(()=>{if(ix.get(a))return()=>{};const k=document.createElement("style");k.innerHTML=d;k.setAttribute("id",a);document.head.appendChild(k);ix.set(a,k);return()=>{k&&document.head.contains(k)&&(document.head.removeChild(k),ix.delete(a))}},[a,d])}function bl(a,d){const k=hx.useMemo(()=>Yd(Yd({},YE),a),[a]);zh("tl",k,d);Vj("tl-canvas",ZE)}function Bj(a=
"noid"){jx[a]||(jx[a]=wA.createContext({}));return jx[a]}function lg(a="noid"){return wA.useContext(Bj(a))}function gg(){const a=lg(),{callbacks:d}=dh(),k=vA.useRef(-1);return vA.useMemo(()=>({onPointerDown:K=>{var da,ja,qa;if(!a.settings.penMode||"pen"===K.pointerType&&K.isPrimary){var {order:Ha=0}=K;Ha||(null==(da=K.currentTarget)?void 0:da.setPointerCapture(K.pointerId));K.isPrimary&&(null==(ja=d.onPointerDown)?void 0:ja.call(d,{type:"canvas",order:Ha},K),da=Date.now(),ja=da-k.current,300<ja?k.current=
da:300>=ja&&(null==(qa=d.onDoubleClick)?void 0:qa.call(d,{type:"canvas",order:Ha},K),k.current=-1))}},onPointerMove:K=>{var da;if(!a.settings.penMode||"pen"===K.pointerType&&K.isPrimary){var {order:ja=0}=K;null==(da=d.onPointerMove)?void 0:da.call(d,{type:"canvas",order:ja},K)}},onPointerUp:K=>{var da,ja;if(!a.settings.penMode||"pen"===K.pointerType&&K.isPrimary){var {order:qa=0}=K;qa||(null==(da=K.currentTarget)?void 0:da.releasePointerCapture(K.pointerId));null==(ja=d.onPointerUp)?void 0:ja.call(d,
{type:"canvas",order:qa},K)}},onPointerEnter:K=>{var da;if(!a.settings.penMode||"pen"===K.pointerType&&K.isPrimary){var {order:ja=0}=K;null==(da=d.onPointerEnter)?void 0:da.call(d,{type:"canvas",order:ja},K)}},onPointerLeave:K=>{var da;if(!a.settings.penMode||"pen"===K.pointerType&&K.isPrimary){var {order:ja=0}=K;null==(da=d.onPointerLeave)?void 0:da.call(d,{type:"canvas",order:ja},K)}},onDrop:K=>Mh(this,null,function*(){K.preventDefault();"clientX"in K&&a.drop(K.dataTransfer,[K.clientX,K.clientY])}),
onDragOver:K=>{K.preventDefault()},onTouchEnd:K=>{let da=a.selectedTool.id;"pencil"!==da&&"highlighter"!==da||K.preventDefault()}}),[d])}function rf(a,d,k){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*k):a*d*k/(d+k*a)}function mj(a,d,k,K=.15){return 0===K?Math.max(d,Math.min(a,k)):a<d?-rf(d-a,k-d,K)+d:a>k?+rf(a-k,k-d,K)+k:a}function Zh(a,[d,k],[K,da]){const [[ja,qa],[Ha,Ra]]=a;return[mj(d,ja,qa,K),mj(k,Ha,Ra,da)]}function ui(a,d,k){d in a?Object.defineProperty(a,d,{value:k,enumerable:!0,configurable:!0,
writable:!0}):a[d]=k;return a}function nj(a,d){var k=Object.keys(a);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(a);d&&(K=K.filter(function(da){return Object.getOwnPropertyDescriptor(a,da).enumerable}));k.push.apply(k,K)}return k}function Sg(a){for(var d=1;d<arguments.length;d++){var k=null!=arguments[d]?arguments[d]:{};d%2?nj(Object(k),!0).forEach(function(K){ui(a,K,k[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(k)):nj(Object(k)).forEach(function(K){Object.defineProperty(a,
K,Object.getOwnPropertyDescriptor(k,K))})}return a}function $h(a){return a?a[0].toUpperCase()+a.slice(1):""}function ej(a=!1,d){return a&&!$E.includes(d)}function El(a,d="",k=!1){const K=xA[a];d=K?K[d]||d:d;return"on"+$h(a)+$h(d)+(ej(k,d)?"Capture":"")}function Mf(a){a=a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var k=aF.includes(a)?"capturecapture":"capture";(k=!!~a.indexOf(k))&&(a=a.replace("capture",""));return{device:a,capture:k,passive:d}}function Mi(a,
d=""){const k=xA[a];return a+(k?k[d]||d:d)}function uh(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function ql(a){return Array.from(a.touches).filter(d=>{var k,K;return d.target===a.currentTarget||(null===(k=a.currentTarget)||void 0===k?void 0:null===(K=k.contains)||void 0===K?void 0:K.call(k,d.target))})}function Nj(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function jm(a,d){const k=d.clientX-a.clientX,K=d.clientY-
a.clientY;return{angle:-(180*Math.atan2(k,K))/Math.PI,distance:Math.hypot(k,K),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function Cj(a){return ql(a).map(d=>d.identifier)}function Ni(a,d){const [k,K]=Array.from(a.touches).filter(da=>d.includes(da.identifier));return jm(k,K)}function Vi(a){const d=Nj(a);return"touches"in a?d.identifier:d.pointerId}function Mk(a){a=Nj(a);return[a.clientX,a.clientY]}function Nk(a){let {deltaX:d,deltaY:k,deltaMode:K}=a;1===K?(d*=40,k*=40):2===K&&(d*=800,
k*=800);return[d,k]}function $g(a,...d){return"function"===typeof a?a(...d):a}function ai(){}function Oh(...a){return 0===a.length?ai:1===a.length?a[0]:function(){let d;for(const k of a)d=k.apply(this,arguments)||d;return d}}function zk([a,d],k){a=Math.abs(a);d=Math.abs(d);if(a>d&&a>k)return"x";if(d>a&&d>k)return"y"}function cl(a){const [d,k]=a.overflow,[K,da]=a._delta,[ja,qa]=a._direction;if(0>d&&0<K&&0>ja||0<d&&0>K&&0<ja)a._movement[0]=a._movementBound[0];if(0>k&&0<da&&0>qa||0<k&&0>da&&0<qa)a._movement[1]=
a._movementBound[1]}function bi(a){kx.set(a.key,a.engine);lx.set(a.key,a.resolver)}function dl(a={},d){const k={};for(const [K,da]of Object.entries(d))switch(typeof da){case "function":k[K]=da.call(k,a[K],K,a);break;case "object":k[K]=dl(a[K],da);break;case "boolean":da&&(k[K]=a[K])}return k}function Di(a,d,k={}){const {target:K,eventOptions:da,window:ja,enabled:qa,transform:Ha}=a;var Ra=xF;if(null==a)a={};else{if(null==a)var $a={};else{$a={};var fb=Object.keys(a),jb;for(jb=0;jb<fb.length;jb++){var Kb=
fb[jb];0<=Ra.indexOf(Kb)||($a[Kb]=a[Kb])}}if(Object.getOwnPropertySymbols)for(jb=Object.getOwnPropertySymbols(a),Kb=0;Kb<jb.length;Kb++)fb=jb[Kb],0<=Ra.indexOf(fb)||Object.prototype.propertyIsEnumerable.call(a,fb)&&($a[fb]=a[fb]);a=$a}k.shared=dl({target:K,eventOptions:da,window:ja,enabled:qa,transform:Ha},wF);if(d){var Nb=lx.get(d);k[d]=dl(Sg({shared:k.shared},a),Nb)}else for(Nb in a)(d=lx.get(Nb))&&(k[Nb]=dl(Sg({shared:k.shared},a[Nb]),d));return k}function li(a,d){a.gestures.add(d);a.gestureEventStores[d]=
new FA(a,d);a.gestureTimeoutStores[d]=new yF}function Wj(a,d,k,K,da,ja){if(a.has(k)&&kx.has(K)){var qa=k+"Start",Ha=k+"End";da[K]=Ra=>{let $a=void 0;if(Ra.first&&qa in d)d[qa](Ra);k in d&&($a=d[k](Ra));if(Ra.last&&Ha in d)d[Ha](Ra);return $a};ja[K]=ja[K]||{}}}function mi(a,d={},k,K){const da=mx.default.useMemo(()=>new zF(a),[]);da.applyHandlers(a,K);da.applyConfig(d,k);mx.default.useEffect(da.effect.bind(da));mx.default.useEffect(()=>da.clean.bind(da),[]);if(void 0===d.target)return da.bind.bind(da)}
function Ah(a){a.forEach(bi);return function(d,k){k=k||{};const K={},da={},ja=new Set;for(let Kb in d)AF.test(Kb)?(ja.add(RegExp.lastMatch),da[Kb]=d[Kb]):K[Kb]=d[Kb];const [qa,Ha,Ra]=[da,K,ja];d={};Wj(Ra,qa,"onDrag","drag",d,k);Wj(Ra,qa,"onWheel","wheel",d,k);Wj(Ra,qa,"onScroll","scroll",d,k);Wj(Ra,qa,"onPinch","pinch",d,k);Wj(Ra,qa,"onMove","move",d,k);Wj(Ra,qa,"onHover","hover",d,k);const {handlers:$a,nativeHandlers:fb,config:jb}={handlers:d,config:k,nativeHandlers:Ha};return mi($a,jb,void 0,fb)}}
function vi(a,d){return Ah([qF,tF,uF,vF,sF,rF])(a,d||{})}function Wi(a){const {viewport:d,inputs:k,callbacks:K}=dh(),da=iv.useRef(void 0),ja=iv.useRef([0,0]),qa=iv.useRef(0),Ha=iv.useMemo(()=>({onWheel:Ra=>{var $a;({event:Ra}=Ra);Ra.preventDefault();const {deltaY:fb,deltaX:jb}=Ra;var Kb=0;if(Ra.ctrlKey||Ra.metaKey){Kb=Math.sign(Ra.deltaY);let qc=fb;10<Math.abs(Ra.deltaY)&&(qc=10*Kb);Kb=qc}const [Nb,Hb,fc]=[jb,fb,Kb];"pinching"===k.state||qa.current>=Ra.timeStamp||(qa.current=Ra.timeStamp,(Ra.altKey||
Ra.ctrlKey||Ra.metaKey)&&0===Ra.buttons?(Kb=d.bounds,Ra=null!=($a=k.currentScreenPoint)?$a:[Kb.width/2,Kb.height/2],$a=d.camera.zoom,d.onZoom(Ra,$a-fc/100*$a)):($a=be.mul(Ra.shiftKey&&!nh()?[Hb,0]:[Nb,Hb],.8),be.isEqual($a,[0,0])||d.panCamera($a)))},onPinchStart:({event:Ra,delta:$a,offset:fb,origin:jb})=>{var Kb;const Nb=a.current;Ra instanceof WheelEvent||!(Ra.target===Nb||null!=Nb&&Nb.contains(Ra.target))||(null==(Kb=K.onPinchStart)?void 0:Kb.call(K,{type:"canvas",order:0,delta:[...$a,fb[0]],offset:fb,
point:be.sub(jb,k.containerOffset)},Ra),da.current=jb,ja.current=[0,0])},onPinchEnd:({event:Ra,offset:$a,origin:fb})=>{var jb;const Kb=a.current;Ra instanceof WheelEvent||!(Ra.target===Kb||null!=Kb&&Kb.contains(Ra.target))||"pinching"!==k.state||(null==(jb=K.onPinchEnd)?void 0:jb.call(K,{type:"canvas",order:0,delta:[0,0,$a[0]],offset:$a,point:be.sub(fb,k.containerOffset)},Ra),ja.current=[0,0])},onPinch:({event:Ra,offset:$a,origin:fb})=>{var jb,Kb=a.current;if(!(Ra instanceof WheelEvent)&&(Ra.target===
Kb||null!=Kb&&Kb.contains(Ra.target))){da.current||(da.current=fb);Kb=be.sub(da.current,fb);var Nb=be.sub(Kb,ja.current);null==(jb=K.onPinch)?void 0:jb.call(K,{type:"canvas",order:0,delta:[...Nb,$a[0]],offset:$a,point:be.sub(fb,k.containerOffset)},Ra);ja.current=Kb}}}),[K]);vi(Ha,{target:a,eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:Gn.maxZoom,min:Gn.minZoom})}})}function pb(a,d,k,K){nx.useLayoutEffect(()=>{a.current.style.transform=
`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,k,d.rotation]);nx.useLayoutEffect(()=>{const da=a.current;da.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;da.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);nx.useLayoutEffect(()=>{const da=a.current;void 0!==K&&(da.style.zIndex=K.toString())},[K])}function mc(a,d){const {onPersist:k,onError:K,onMount:da,onCreateAssets:ja,onCreateShapes:qa,onDeleteAssets:Ha,onDeleteShapes:Ra,onDrop:$a,
onPaste:fb,onCopy:jb,onCanvasDBClick:Kb}=d;HA.useLayoutEffect(()=>{const Nb=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,da&&da(a,null),()=>{Nb.forEach(Hb=>Hb());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);HA.useLayoutEffect(()=>{const Nb=[];k&&Nb.push(a.subscribe("persist",k));K&&Nb.push(a.subscribe("error",K));qa&&Nb.push(a.subscribe("create-shapes",qa));ja&&Nb.push(a.subscribe("create-assets",ja));Ra&&Nb.push(a.subscribe("delete-shapes",Ra));Ha&&Nb.push(a.subscribe("delete-assets",
Ha));$a&&Nb.push(a.subscribe("drop",$a));fb&&Nb.push(a.subscribe("paste",fb));jb&&Nb.push(a.subscribe("copy",jb));Kb&&Nb.push(a.subscribe("canvas-dbclick",Kb));return()=>Nb.forEach(Hb=>Hb())},[a,k,K])}function yc(a){if("app"in a)return a.app;const [d]=IA.useState(()=>new VE(a.model,a.Shapes,a.Tools,a.readOnly));IA.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function Tc(a,d){BF.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function $c(a){const d=dh(),{viewport:{bounds:k}}=
d;CF.useEffect(()=>{const K=qa=>{qa.preventDefault()},da=qa=>{if(0!==qa.touches.length){var Ha=qa.touches[0].pageX,Ra=qa.touches[0].radiusX||0;(10>Ha-Ra||Ha+Ra>k.width-10)&&qa.preventDefault()}},ja=a.current;if(!ja)return()=>{};ja.addEventListener("touchstart",K,{passive:!0});ja.addEventListener("gestureend",K,{passive:!0});ja.addEventListener("gesturechange",K,{passive:!0});ja.addEventListener("gesturestart",K,{passive:!0});ja.addEventListener("touchstart",da,{passive:!0});return()=>{ja&&(ja.removeEventListener("touchstart",
K),ja.removeEventListener("gestureend",K),ja.removeEventListener("gesturechange",K),ja.removeEventListener("gesturestart",K),ja.removeEventListener("touchstart",da))}},[a,k.width])}function ld(a,d){const {inputs:k,callbacks:K}=dh();return DF.useMemo(()=>({onPointerDown:da=>{var ja,qa;const {order:Ha=0}=da;Ha||(null==(ja=da.currentTarget)?void 0:ja.setPointerCapture(da.pointerId));ja=a.props.handles[d];null==(qa=K.onPointerDown)?void 0:qa.call(K,{type:"handle",shape:a,handle:ja,id:d,order:Ha},da);
da.order=Ha+1},onPointerMove:da=>{var ja;const {order:qa=0}=da,Ha=a.props.handles[d];null==(ja=K.onPointerMove)?void 0:ja.call(K,{type:"handle",shape:a,handle:Ha,id:d,order:qa},da);da.order=qa+1},onPointerUp:da=>{var ja,qa;const {order:Ha=0}=da;Ha||(null==(ja=da.currentTarget)?void 0:ja.releasePointerCapture(da.pointerId));ja=a.props.handles[d];null==(qa=K.onPointerUp)?void 0:qa.call(K,{type:"handle",shape:a,handle:ja,id:d,order:Ha},da);da.order=Ha+1},onPointerEnter:da=>{var ja;const {order:qa=0}=
da,Ha=a.props.handles[d];null==(ja=K.onPointerEnter)?void 0:ja.call(K,{type:"handle",shape:a,handle:Ha,id:d,order:qa},da);da.order=qa+1},onPointerLeave:da=>{var ja;const {order:qa=0}=da,Ha=a.props.handles[d];null==(ja=K.onPointerLeave)?void 0:ja.call(K,{type:"handle",shape:a,handle:Ha,id:d,order:qa},da);da.order=qa+1},onKeyUp:da=>{var ja;const qa=a.props.handles[d];null==(ja=K.onKeyUp)?void 0:ja.call(K,{type:"handle",shape:a,handle:qa,id:d,order:-1},da)},onKeyDown:da=>{var ja;const qa=a.props.handles[d];
null==(ja=K.onKeyDown)?void 0:ja.call(K,{type:"handle",shape:a,handle:qa,id:d,order:-1},da)}}),[a.id,k,K])}function Ed(a,d,k=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${k?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Wd(a,d,k=0){EF.useEffect(()=>{const K=a.current;K&&(K.style.cursor=
FF[d](Ml.radiansToDegrees(k)))},[d,k])}function oe(a){const {viewport:d}=dh(),k=lg();GF.useLayoutEffect(()=>ic(()=>{const K=Uj(()=>{var da;null==(da=a.current)?void 0:da.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==k.inputs.state&&null!=d.camera.zoom&&K()}),[])}function ye(a,d=0){const [k,K]=(0,JA.useState)(a);(0,JA.useEffect)(()=>{let da=!1;const ja=setTimeout(()=>{da||K(a)},d);return()=>{da=!0;clearTimeout(ja)}},[a,d]);return k}function ie(){const a=lg();KA.useEffect(()=>
{Rc(()=>Yd({},a.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);KA.useEffect(()=>{var d;const k=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");k?a.viewport.update(k):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function se(a){a()}function Ke(a){return qf(ec(a,void 0))}function Te(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,
cleanAt:Date.now()+IF}}function Nd(a){var d=new Map,k=1,K=new a(function(da){var ja=d.get(da);ja&&(ja.reaction.dispose(),d.delete(da))});return{addReactionToTrack:function(da,ja,qa){var Ha=k++;K.register(qa,Ha,da);da.current=Te(ja);da.current.finalizationRegistryCleanupToken=Ha;d.set(Ha,da.current);return da.current},recordReactionAsCommitted:function(da){K.unregister(da);da.current&&da.current.finalizationRegistryCleanupToken&&d.delete(da.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function Le(){function a(){void 0===K&&(K=setTimeout(d,1E4))}function d(){K=void 0;var da=Date.now();k.forEach(function(ja){var qa=ja.current;qa&&da>=qa.cleanAt&&(qa.reaction.dispose(),ja.current=null,k.delete(ja))});0<k.size&&a()}var k=new Set,K;return{addReactionToTrack:function(da,ja,qa){da.current=Te(ja);k.add(da);a();return da.current},recordReactionAsCommitted:function(da){k.delete(da)},forceCleanupTimerToRunNowForTests:function(){K&&(clearTimeout(K),
d())},resetCleanupScheduleForTests:function(){var da;if(0<k.size){try{for(var ja=JF(k),qa=ja.next();!qa.done;qa=ja.next()){var Ha=qa.value,Ra=Ha.current;Ra&&(Ra.reaction.dispose(),Ha.current=null)}}catch(fb){var $a={error:fb}}finally{try{qa&&!qa.done&&(da=ja.return)&&da.call(ja)}finally{if($a)throw $a.error;}}k.clear()}K&&(clearTimeout(K),K=void 0)}}}function ne(){return new MF}function Of(a,d){void 0===d&&(d="observed");var k=NA(St.default.useState(ne),1)[0],K=NA(St.default.useState(),2)[1],da=St.default.useRef(null);
if(!da.current)var ja=new ps("observer".concat(d),function(){qa.mounted?K([]):qa.changedBeforeMount=!0}),qa=KF(da,ja,k);k=da.current.reaction;St.default.useDebugValue(k,Ke);St.default.useEffect(function(){LF(da);da.current?(da.current.mounted=!0,da.current.changedBeforeMount&&(da.current.changedBeforeMount=!1,K([]))):(da.current={reaction:new ps("observer".concat(d),function(){K([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},K([]));return function(){da.current.reaction.dispose();da.current=
null}},[]);var Ha,Ra;k.track(function(){try{Ha=a()}catch($a){Ra=$a}});if(Ra)throw Ra;return Ha}function ee(a,d){var k;if(QA&&a.$$typeof===QA)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(k=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==k?k:!1;var K=a,da=a.displayName||a.name;if(PA&&a.$$typeof===PA&&(d=!0,K=a.render,"function"!==typeof K))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
k=function(ja,qa){return Of(function(){return K(ja,qa)},da)};""!==da&&(k.displayName=da);a.contextTypes&&(k.contextTypes=a.contextTypes);d&&(k=(0,ys.forwardRef)(k));k=(0,ys.memo)(k);Pe(a,k);return k}function Pe(a,d){Object.keys(a).forEach(function(k){NF[k]||Object.defineProperty(d,k,Object.getOwnPropertyDescriptor(a,k))})}function sf(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:Of(a)}function qg(a){const d=lg(),{callbacks:k}=dh(),K=RA.useRef(!1);RA.useEffect(()=>{const da=Ra=>
{var $a,fb;if(null==($a=a.current)?0:$a.contains(document.activeElement))null==(fb=k.onKeyDown)?void 0:fb.call(k,{type:"canvas",order:-1},Ra),K.current=Ra.shiftKey},ja=Ra=>{var $a,fb;if(null==($a=a.current)?0:$a.contains(document.activeElement))null==(fb=k.onKeyUp)?void 0:fb.call(k,{type:"canvas",order:-1},Ra),K.current=Ra.shiftKey},qa=Ra=>{var $a,fb,jb;!d.editingShape&&(null==($a=a.current)?0:$a.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(jb=null==(fb=document.activeElement)?
void 0:fb.tagName)?jb:"")&&(Ra.preventDefault(),d.paste(Ra,K.current))},Ha=Ra=>{var $a,fb,jb;!d.editingShape&&0<d.selectedShapes.size&&(null==($a=a.current)?0:$a.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(jb=null==(fb=document.activeElement)?void 0:fb.tagName)?jb:"")&&(Ra.preventDefault(),d.copy())};window.addEventListener("keydown",da);window.addEventListener("keyup",ja);document.addEventListener("paste",qa);document.addEventListener("copy",Ha);return()=>{window.removeEventListener("keydown",
da);window.removeEventListener("keyup",ja);document.removeEventListener("paste",qa);document.removeEventListener("copy",Ha)}},[])}function Ig(a){const d=lg(),{inputs:k,callbacks:K}=dh(),da=WA.useRef(-1);return WA.useMemo(()=>({onPointerDown:ja=>{var qa,Ha;if(!d.settings.penMode||"pen"===ja.pointerType&&ja.isPrimary){var {order:Ra=0}=ja;Ra||(null==(qa=ja.currentTarget)?void 0:qa.setPointerCapture(ja.pointerId));null==(Ha=K.onPointerDown)?void 0:Ha.call(K,{type:"shape",shape:a,order:Ra},ja);ja.order=
Ra+1}},onPointerMove:ja=>{var qa;if(!d.settings.penMode||"pen"===ja.pointerType&&ja.isPrimary){var {order:Ha=0}=ja;null==(qa=K.onPointerMove)?void 0:qa.call(K,{type:"shape",shape:a,order:Ha},ja);ja.order=Ha+1}},onPointerUp:ja=>{var qa,Ha,Ra;if(!d.settings.penMode||"pen"===ja.pointerType&&ja.isPrimary){var {order:$a=0}=ja;$a||(null==(qa=ja.currentTarget)?void 0:qa.releasePointerCapture(ja.pointerId));null==(Ha=K.onPointerUp)?void 0:Ha.call(K,{type:"shape",shape:a,order:$a},ja);qa=Date.now();Ha=qa-
da.current;300<Ha?da.current=qa:300>=Ha&&(null==(Ra=K.onDoubleClick)?void 0:Ra.call(K,{type:"shape",shape:a,order:$a},ja),da.current=-1);ja.order=$a+1}},onPointerEnter:ja=>{var qa;if(!d.settings.penMode||"pen"===ja.pointerType&&ja.isPrimary){var {order:Ha=0}=ja;null==(qa=K.onPointerEnter)?void 0:qa.call(K,{type:"shape",shape:a,order:Ha},ja);ja.order=Ha+1}},onPointerLeave:ja=>{var qa;if(!d.settings.penMode||"pen"===ja.pointerType&&ja.isPrimary){var {order:Ha=0}=ja;null==(qa=K.onPointerLeave)?void 0:
qa.call(K,{type:"shape",shape:a,order:Ha},ja);ja.order=Ha+1}},onKeyUp:ja=>{var qa;null==(qa=K.onKeyUp)?void 0:qa.call(K,{type:"shape",shape:a,order:-1},ja)},onKeyDown:ja=>{var qa;null==(qa=K.onKeyDown)?void 0:qa.call(K,{type:"shape",shape:a,order:-1},ja)}}),[a.id,k,K])}function Kg(a){var {viewport:d,inputs:k,callbacks:K,components:da}=a;a=zf(a,["viewport","inputs","callbacks","components"]);return(0,nB.jsx)(gG,{id:a.id,viewport:d,inputs:k,callbacks:K,components:da,meta:a.meta,children:(0,nB.jsx)(cG,
Yd({},a))})}function Ge(){Ge=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],K;for(K in k)Object.prototype.hasOwnProperty.call(k,K)&&(a[K]=k[K])}return a};return Ge.apply(this,arguments)}function Sf(a,d,{checkForDefaultPrevented:k=!0}={}){return function(K){null===a||void 0===a||a(K);if(!1===k||!K.defaultPrevented)return null===d||void 0===d?void 0:d(K)}}function tg(...a){return d=>a.forEach(k=>{"function"===typeof k?k(d):null!==k&&void 0!==k&&
(k.current=d)})}function Zg(...a){return(0,lG.useCallback)(tg(...a),a)}function Bh(a,d=[]){let k=[];const K=()=>{const da=k.map(ja=>(0,tr.createContext)(ja));return function(ja){const qa=(null===ja||void 0===ja?void 0:ja[a])||da;return(0,tr.useMemo)(()=>({[`__scope${a}`]:hf(Yd({},ja),{[a]:qa})}),[ja,qa])}};K.scopeName=a;return[function(da,ja){function qa($a){const {scope:fb,children:jb}=$a,Kb=zf($a,["scope","children"]);$a=(null===fb||void 0===fb?void 0:fb[a][Ra])||Ha;const Nb=(0,tr.useMemo)(()=>
Kb,Object.values(Kb));return(0,tr.createElement)($a.Provider,{value:Nb},jb)}const Ha=(0,tr.createContext)(ja),Ra=k.length;k=[...k,ja];qa.displayName=da+"Provider";return[qa,function($a,fb){if(fb=(0,tr.useContext)((null===fb||void 0===fb?void 0:fb[a][Ra])||Ha))return fb;if(void 0!==ja)return ja;throw Error(`\`${$a}\` must be used within \`${da}\``);}]},Qk(K,...d)]}function Qk(...a){const d=a[0];if(1===a.length)return d;const k=()=>{const K=a.map(da=>({useScope:da(),scopeName:da.scopeName}));return function(da){const ja=
K.reduce((qa,{useScope:Ha,scopeName:Ra})=>{Ha=Ha(da)[`__scope${Ra}`];return Yd(Yd({},qa),Ha)},{});return(0,tr.useMemo)(()=>({[`__scope${d.scopeName}`]:ja}),[ja])}};k.scopeName=d.scopeName;return k}function sg(a){return(0,Nl.isValidElement)(a)&&a.type===oB}function Xl(a,d){const k=Yd({},d);for(const K in d){const da=a[K],ja=d[K];/^on[A-Z]/.test(K)?da&&ja?k[K]=(...qa)=>{ja(...qa);da(...qa)}:da&&(k[K]=da):"style"===K?k[K]=Yd(Yd({},da),ja):"className"===K&&(k[K]=[da,ja].filter(Boolean).join(" "))}return Yd(Yd({},
a),k)}function tl(a,d){a&&(0,mG.flushSync)(()=>a.dispatchEvent(d))}function Ii(a){const d=(0,zx.useRef)(a);(0,zx.useEffect)(()=>{d.current=a});return(0,zx.useMemo)(()=>(...k)=>{var K;return null===(K=d.current)||void 0===K?void 0:K.call(d,...k)},[])}function ul(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Ii(a);(0,nG.useEffect)(()=>{const K=da=>{"Escape"===da.key&&k(da)};d.addEventListener("keydown",K);return()=>d.removeEventListener("keydown",K)},[k,d])}function Il(a,
d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Ii(a),K=(0,Mm.useRef)(!1),da=(0,Mm.useRef)(()=>{});(0,Mm.useEffect)(()=>{const ja=Ha=>{if(Ha.target&&!K.current){let Ra=function(){Oj("dismissableLayer.pointerDownOutside",k,$a,{discrete:!0})};const $a={originalEvent:Ha};"touch"===Ha.pointerType?(d.removeEventListener("click",da.current),da.current=Ra,d.addEventListener("click",da.current,{once:!0})):Ra()}K.current=!1},qa=window.setTimeout(()=>{d.addEventListener("pointerdown",
ja)},0);return()=>{window.clearTimeout(qa);d.removeEventListener("pointerdown",ja);d.removeEventListener("click",da.current)}},[d,k]);return{onPointerDownCapture:()=>K.current=!0}}function vl(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Ii(a),K=(0,Mm.useRef)(!1);(0,Mm.useEffect)(()=>{const da=ja=>{ja.target&&!K.current&&Oj("dismissableLayer.focusOutside",k,{originalEvent:ja},{discrete:!1})};d.addEventListener("focusin",da);return()=>d.removeEventListener("focusin",
da)},[d,k]);return{onFocusCapture:()=>K.current=!0,onBlurCapture:()=>K.current=!1}}function Dn(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function Oj(a,d,k,{discrete:K}){const da=k.originalEvent.target;k=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:k});d&&da.addEventListener(a,d,{once:!0});K?tl(da,k):da.dispatchEvent(k)}function Ei(a){const [d,k]=qB.useState(qG());yl(()=>{a||k(K=>null!==K&&void 0!==K?K:String(rG++))},[a]);return a||(d?`radix-${d}`:"")}function Hh(a){return a.split("-")[0]}
function el(a){return["top","bottom"].includes(Hh(a))?"x":"y"}function Yl(a){return"y"===a?"height":"width"}function Bk(a,d,k){let {reference:K,floating:da}=a;var ja=K.x+K.width/2-da.width/2;const qa=K.y+K.height/2-da.height/2;a=el(d);var Ha=Yl(a);Ha=K[Ha]/2-da[Ha]/2;const Ra="x"===a;switch(Hh(d)){case "top":ja={x:ja,y:K.y-da.height};break;case "bottom":ja={x:ja,y:K.y+K.height};break;case "right":ja={x:K.x+K.width,y:qa};break;case "left":ja={x:K.x-da.width,y:qa};break;default:ja={x:K.x,y:K.y}}switch(d.split("-")[1]){case "start":ja[a]-=
Ha*(k&&Ra?-1:1);break;case "end":ja[a]+=Ha*(k&&Ra?-1:1)}return ja}function nm(a){return"number"!=typeof a?Yd({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function Zl(a){return hf(Yd({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function Jl(a,d){return Mh(this,null,function*(){var k;void 0===d&&(d={});const {x:K,y:da,platform:ja,rects:qa,elements:Ha,strategy:Ra}=a,{boundary:$a="clippingAncestors",rootBoundary:fb="viewport",elementContext:jb="floating",altBoundary:Kb=
!1,padding:Nb=0}=d,Hb=nm(Nb),fc=Ha[Kb?"floating"===jb?"reference":"floating":jb],qc=Zl(yield ja.getClippingRect({element:null==(k=yield null==ja.isElement?void 0:ja.isElement(fc))||k?fc:fc.contextElement||(yield null==ja.getDocumentElement?void 0:ja.getDocumentElement(Ha.floating)),boundary:$a,rootBoundary:fb,strategy:Ra}));k=Zl(ja.convertOffsetParentRelativeRectToViewportRelativeRect?yield ja.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===jb?hf(Yd({},qa.floating),{x:K,y:da}):
qa.reference,offsetParent:yield null==ja.getOffsetParent?void 0:ja.getOffsetParent(Ha.floating),strategy:Ra}):qa[jb]);return{top:qc.top-k.top+Hb.top,bottom:k.bottom-qc.bottom+Hb.bottom,left:qc.left-k.left+Hb.left,right:k.right-qc.right+Hb.right}})}function fl(a){return a.replace(/left|right|bottom|top/g,d=>tG[d])}function wl(a,d,k){void 0===k&&(k=!1);const K=a.split("-")[1],da=el(a);a=Yl(da);k="x"===da?K===(k?"end":"start")?"right":"left":"start"===K?"bottom":"top";return d.reference[a]>d.floating[a]&&
(k=fl(k)),{main:k,cross:fl(k)}}function xi(a){return a.replace(/start|end/g,d=>uG[d])}function ak(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function bk(a){return sB.some(d=>0<=a[d])}function sk(a){return null==a?window:a&&a.document&&a.location&&a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function Pi(a){return sk(a).getComputedStyle(a)}function Ci(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||
"").toLowerCase():""}function Ki(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function qj(a){return a instanceof sk(a).HTMLElement}function wk(a){return a instanceof sk(a).Element}function jj(a){return"undefined"==typeof ShadowRoot?!1:a instanceof sk(a).ShadowRoot||a instanceof ShadowRoot}function Ji(a){const {overflow:d,overflowX:k,overflowY:K}=Pi(a);return/auto|scroll|overlay|hidden/.test(d+K+k)}function Ik(a){const d=
/firefox/i.test(Ki());a=Pi(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function Jk(){return!/^((?!chrome|android).)*safari/i.test(Ki())}function mk(a,d,k){var K,da,ja,qa;void 0===d&&(d=!1);void 0===k&&(k=!1);var Ha=a.getBoundingClientRect();let Ra=1,$a=1;d&&qj(a)&&(Ra=0<a.offsetWidth&&rv(Ha.width)/a.offsetWidth||1,$a=0<a.offsetHeight&&rv(Ha.height)/a.offsetHeight||
1);a=wk(a)?sk(a):window;d=!Jk()&&k;k=(Ha.left+(d&&null!=(K=null==(da=a.visualViewport)?void 0:da.offsetLeft)?K:0))/Ra;K=(Ha.top+(d&&null!=(ja=null==(qa=a.visualViewport)?void 0:qa.offsetTop)?ja:0))/$a;ja=Ha.width/Ra;Ha=Ha.height/$a;return{width:ja,height:Ha,top:K,right:k+ja,bottom:K+Ha,left:k,x:k,y:K}}function zj(a){return(d=a,(d instanceof sk(d).Node?a.ownerDocument:a.document)||window.document).documentElement;var d}function $l(a){return wk(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,
scrollTop:a.pageYOffset}}function sn(a){return mk(zj(a)).left+$l(a).scrollLeft}function xk(a){return"html"===Ci(a)?a:a.assignedSlot||a.parentNode||(jj(a)?a.host:null)||zj(a)}function bj(a){return qj(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}function $i(a){for(var d=sk(a),k=bj(a);k&&["table","td","th"].includes(Ci(k))&&"static"===getComputedStyle(k).position;)k=bj(k);if(!k||"html"!==Ci(k)&&("body"!==Ci(k)||"static"!==getComputedStyle(k).position||Ik(k))){if(!k)a:{a=xk(a);for(jj(a)&&
(a=a.host);qj(a)&&!["html","body"].includes(Ci(a));){if(Ik(a)){k=a;break a}a=a.parentNode}k=null}d=k||d}return d}function Rl(a){if(qj(a))return{width:a.offsetWidth,height:a.offsetHeight};a=mk(a);return{width:a.width,height:a.height}}function om(a){const d=xk(a);return["html","body","#document"].includes(Ci(d))?a.ownerDocument.body:qj(d)&&Ji(d)?d:om(d)}function Im(a,d){var k;void 0===d&&(d=[]);var K=om(a);a=K===(null==(k=a.ownerDocument)?void 0:k.body);k=sk(K);K=a?[k].concat(k.visualViewport||[],Ji(K)?
K:[]):K;d=d.concat(K);return a?d:d.concat(Im(K))}function Yn(a,d,k){return"viewport"===d?Zl(function(K,da){var ja=sk(K),qa=zj(K);ja=ja.visualViewport;K=qa.clientWidth;qa=qa.clientHeight;let Ha=0,Ra=0;if(ja){K=ja.width;qa=ja.height;const $a=Jk();($a||!$a&&"fixed"===da)&&(Ha=ja.offsetLeft,Ra=ja.offsetTop)}return{width:K,height:qa,x:Ha,y:Ra}}(a,k)):wk(d)?function(K,da){var ja=mk(K,!1,"fixed"===da);da=ja.top+K.clientTop;ja=ja.left+K.clientLeft;return{top:da,left:ja,x:ja,y:da,right:ja+K.clientWidth,bottom:da+
K.clientHeight,width:K.clientWidth,height:K.clientHeight}}(d,k):Zl(function(K){var da;const ja=zj(K);var qa=$l(K);const Ha=null==(da=K.ownerDocument)?void 0:da.body;da=Ut(ja.scrollWidth,ja.clientWidth,Ha?Ha.scrollWidth:0,Ha?Ha.clientWidth:0);const Ra=Ut(ja.scrollHeight,ja.clientHeight,Ha?Ha.scrollHeight:0,Ha?Ha.clientHeight:0);K=-qa.scrollLeft+sn(K);qa=-qa.scrollTop;return"rtl"===Pi(Ha||ja).direction&&(K+=Ut(ja.clientWidth,Ha?Ha.clientWidth:0)-da),{width:da,height:Ra,x:K,y:qa}}(zj(a)))}function hp(a){const d=
Im(a),k=["absolute","fixed"].includes(Pi(a).position)&&qj(a)?$i(a):a;return wk(k)?d.filter(K=>{var da;if(da=wk(K))a:if(da=null==k.getRootNode?void 0:k.getRootNode(),K.contains(k))da=!0;else{if(da&&jj(da)){da=k;do{if(da&&K===da){da=!0;break a}da=da.parentNode||da.host}while(da)}da=!1}return da&&"body"!==Ci(K)}):[]}function Sb(a,d,k,K){void 0===K&&(K={});const {ancestorScroll:da=!0,ancestorResize:ja=!0,elementResize:qa=!0,animationFrame:Ha=!1}=K,Ra=da&&!Ha,$a=ja&&!Ha,fb=Ra||$a?[...(wk(a)?Im(a):[]),
...Im(d)]:[];fb.forEach(Hb=>{Ra&&Hb.addEventListener("scroll",k,{passive:!0});$a&&Hb.addEventListener("resize",k)});let jb,Kb=null;if(qa){let Hb=!0;Kb=new ResizeObserver(()=>{Hb||k();Hb=!1});wk(a)&&!Ha&&Kb.observe(a);Kb.observe(d)}let Nb=Ha?mk(a):null;return Ha&&function fc(){const qc=mk(a);!Nb||qc.x===Nb.x&&qc.y===Nb.y&&qc.width===Nb.width&&qc.height===Nb.height||k();Nb=qc;jb=requestAnimationFrame(fc)}(),k(),()=>{var fc;fb.forEach(qc=>{Ra&&qc.removeEventListener("scroll",k);$a&&qc.removeEventListener("resize",
k)});null==(fc=Kb)||fc.disconnect();Kb=null;Ha&&cancelAnimationFrame(jb)}}function Ea(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let k,K;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var da=a.length;if(da!=d.length)return!1;for(k=da;0!==k--;)if(!Ea(a[k],d[k]))return!1;return!0}K=Object.keys(a);da=K.length;if(da!==Object.keys(d).length)return!1;for(k=da;0!==k--;)if(!Object.prototype.hasOwnProperty.call(d,K[k]))return!1;
for(k=da;0!==k--;)if(da=K[k],!("_owner"===da&&a.$$typeof||Ea(a[da],d[da])))return!1;return!0}return a!==a&&d!==d}function $b(a){const d=jn.useRef(a);Cx(()=>{d.current=a});return d}function Xb(a){let {middleware:d,placement:k="bottom",strategy:K="absolute",whileElementsMounted:da}=void 0===a?{}:a;const ja=jn.useRef(null),qa=jn.useRef(null),Ha=$b(da),Ra=jn.useRef(null),[$a,fb]=jn.useState({x:null,y:null,strategy:K,placement:k,middlewareData:{}}),[jb,Kb]=jn.useState(d);Ea(null==jb?void 0:jb.map(hc=>
{({options:hc}=hc);return hc}),null==d?void 0:d.map(hc=>{({options:hc}=hc);return hc}))||Kb(d);const Nb=jn.useCallback(()=>{ja.current&&qa.current&&xG(ja.current,qa.current,{middleware:jb,placement:k,strategy:K}).then(hc=>{Hb.current&&yG.flushSync(()=>{fb(hc)})})},[jb,k,K]);Cx(()=>{Hb.current&&Nb()},[Nb]);const Hb=jn.useRef(!1);Cx(()=>{Hb.current=!0;return()=>{Hb.current=!1}},[]);const fc=jn.useCallback(()=>{"function"===typeof Ra.current&&(Ra.current(),Ra.current=null);if(ja.current&&qa.current)if(Ha.current){const hc=
Ha.current(ja.current,qa.current,Nb);Ra.current=hc}else Nb()},[Nb,Ha]),qc=jn.useCallback(hc=>{ja.current=hc;fc()},[fc]),Wb=jn.useCallback(hc=>{qa.current=hc;fc()},[fc]),kc=jn.useMemo(()=>({reference:ja,floating:qa}),[]);return jn.useMemo(()=>hf(Yd({},$a),{update:Nb,refs:kc,reference:qc,floating:Wb}),[$a,Nb,kc,qc,Wb])}function sb(a){const [d,k]=(0,AG.useState)(void 0);yl(()=>{if(a){k({width:a.offsetWidth,height:a.offsetHeight});const K=new ResizeObserver(da=>{if(Array.isArray(da)&&da.length){da=da[0];
if("borderBoxSize"in da){da=da.borderBoxSize;var ja=Array.isArray(da)?da[0]:da;da=ja.inlineSize;ja=ja.blockSize}else da=a.offsetWidth,ja=a.offsetHeight;k({width:da,height:ja})}});K.observe(a,{box:"border-box"});return()=>K.unobserve(a)}k(void 0)},[a]);return d}function cc(a){return void 0!==a}function Qb(a){return null!==a}function zb(a){const [d,k="center"]=a.split("-");return[d,k]}function xb(a,d){return(0,np.useReducer)((k,K)=>{K=d[k][K];return null!==K&&void 0!==K?K:k},a)}function Zb(a){const [d,
k]=(0,np.useState)(),K=(0,np.useRef)({}),da=(0,np.useRef)(a),ja=(0,np.useRef)("none"),[qa,Ha]=xb(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,np.useEffect)(()=>{const Ra=rc(K.current);ja.current="mounted"===qa?Ra:"none"},[qa]);yl(()=>{const Ra=K.current,$a=da.current;if($a!==a){const fb=ja.current,jb=rc(Ra);a?Ha("MOUNT"):"none"===jb||"none"===(null===Ra||void 0===
Ra?void 0:Ra.display)?Ha("UNMOUNT"):$a&&fb!==jb?Ha("ANIMATION_OUT"):Ha("UNMOUNT");da.current=a}},[a,Ha]);yl(()=>{if(d){const Ra=fb=>{const jb=rc(K.current).includes(fb.animationName);fb.target===d&&jb&&(0,KG.flushSync)(()=>Ha("ANIMATION_END"))},$a=fb=>{fb.target===d&&(ja.current=rc(K.current))};d.addEventListener("animationstart",$a);d.addEventListener("animationcancel",Ra);d.addEventListener("animationend",Ra);return()=>{d.removeEventListener("animationstart",$a);d.removeEventListener("animationcancel",
Ra);d.removeEventListener("animationend",Ra)}}Ha("ANIMATION_END")},[d,Ha]);return{isPresent:["mounted","unmountSuspended"].includes(qa),ref:(0,np.useCallback)(Ra=>{Ra&&(K.current=getComputedStyle(Ra));k(Ra)},[])}}function rc(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}function Dc({prop:a,defaultProp:d,onChange:k=()=>{}}){const [K,da]=Yc({defaultProp:d,onChange:k}),ja=void 0!==a;d=ja?a:K;const qa=Ii(k);k=(0,sv.useCallback)(Ha=>{ja?(Ha="function"===typeof Ha?Ha(a):Ha,Ha!==a&&qa(Ha)):
da(Ha)},[ja,a,da,qa]);return[d,k]}function Yc({defaultProp:a,onChange:d}){a=(0,sv.useState)(a);const [k]=a,K=(0,sv.useRef)(k),da=Ii(d);(0,sv.useEffect)(()=>{K.current!==k&&(da(k),K.current=k)},[k,K,da]);return a}function ed(a,d){const k=Math.abs(d.top-a.y),K=Math.abs(d.bottom-a.y),da=Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(k,K,da,a)){case a:return"left";case da:return"right";case k:return"top";case K:return"bottom";default:return null}}function od(a){a=a.slice();a.sort((d,k)=>
d.x<k.x?-1:d.x>k.x?1:d.y<k.y?-1:d.y>k.y?1:0);return Rd(a)}function Rd(a){if(1>=a.length)return a.slice();const d=[];for(var k=0;k<a.length;k++){for(var K=a[k];2<=d.length;){var da=d[d.length-1],ja=d[d.length-2];if((da.x-ja.x)*(K.y-ja.y)>=(da.y-ja.y)*(K.x-ja.x))d.pop();else break}d.push(K)}d.pop();k=[];for(K=a.length-1;0<=K;K--){for(da=a[K];2<=k.length;){ja=k[k.length-1];const qa=k[k.length-2];if((ja.x-qa.x)*(da.y-qa.y)>=(ja.y-qa.y)*(da.x-qa.x))k.pop();else break}k.push(da)}k.pop();return 1===d.length&&
1===k.length&&d[0].x===k[0].x&&d[0].y===k[0].y?d:d.concat(k)}function ce(a){var {side:d,content:k,sideOffset:K=10}=a;a=zf(a,["side","content","sideOffset"]);return k?(0,gq.jsx)(WG,{delayDuration:300,children:(0,gq.jsxs)(XG,{children:[(0,gq.jsx)(YG,{asChild:!0,children:a.children}),(0,gq.jsx)(ZG,{children:(0,gq.jsxs)($G,hf(Yd({className:"tl-tooltip-content",sideOffset:K,side:d},a),{children:[k,(0,gq.jsx)(aH,{className:"tl-tooltip-arrow"})]}))})]})}):(0,gq.jsx)(gq.Fragment,{children:a.children})}function Xd(a){var {className:d,
tooltip:k,tooltipSide:K}=a;a=zf(a,["className","tooltip","tooltipSide"]);return(0,GB.jsx)(ce,{content:k,side:K,children:(0,GB.jsx)("button",Yd({className:"tl-button "+(null!=d?d:"")},a))})}function Me(a){var {toggle:d=!0,pressed:k,onPressedChange:K,className:da,tooltip:ja}=a;a=zf(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,Kx.jsx)(ce,{content:ja,children:(0,Kx.jsx)("div",{className:"inline-block",children:(0,Kx.jsx)(cH,hf(Yd({},a),{"data-toggle":d,className:"tl-toggle-input"+
(da?" "+da:""),pressed:k,onPressedChange:K}))})})}function ag(a){var d=a+"CollectionProvider";const [k,K]=Bh(d),[da,ja]=k(d,{collectionRef:{current:null},itemMap:new Map}),qa=fb=>{const {scope:jb,children:Kb}=fb;fb=Lo.default.useRef(null);const Nb=Lo.default.useRef(new Map).current;return Lo.default.createElement(da,{scope:jb,itemMap:Nb,collectionRef:fb},Kb)};Object.assign(qa,{displayName:d});const Ha=a+"CollectionSlot";d=Lo.default.forwardRef((fb,jb)=>{const {scope:Kb,children:Nb}=fb;fb=ja(Ha,Kb);
jb=Zg(jb,fb.collectionRef);return Lo.default.createElement(Ko,{ref:jb},Nb)});Object.assign(d,{displayName:Ha});const Ra=a+"CollectionItemSlot",$a=Lo.default.forwardRef((fb,jb)=>{const {scope:Kb,children:Nb}=fb,Hb=zf(fb,["scope","children"]),fc=Lo.default.useRef(null);fb=Zg(jb,fc);const qc=ja(Ra,Kb);Lo.default.useEffect(()=>{qc.itemMap.set(fc,Yd({ref:fc},Hb));return()=>void qc.itemMap.delete(fc)});return Lo.default.createElement(Ko,{["data-radix-collection-item"]:"",ref:fb},Nb)});Object.assign($a,
{displayName:Ra});return[{Provider:qa,Slot:d,ItemSlot:$a},function(fb){const jb=ja(a+"CollectionConsumer",fb);return Lo.default.useCallback(()=>{const Kb=jb.collectionRef.current;if(!Kb)return[];const Nb=Array.from(Kb.querySelectorAll("[data-radix-collection-item]"));return Array.from(jb.itemMap.values()).sort((Hb,fc)=>Nb.indexOf(Hb.ref.current)-Nb.indexOf(fc.ref.current))},[jb.collectionRef,jb.itemMap])},K]}function ng(a){const d=(0,JB.useContext)(dH);return a||d||"ltr"}function Gf(){(0,eH.useEffect)(()=>
{var a,d;const k=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=k[0])&&void 0!==a?a:Uf());document.body.insertAdjacentElement("beforeend",null!==(d=k[1])&&void 0!==d?d:Uf());Lx++;return()=>{1===Lx&&document.querySelectorAll("[data-radix-focus-guard]").forEach(K=>K.remove());Lx--}},[])}function Uf(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";
return a}function of(a,{select:d=!1}={}){const k=document.activeElement;for(const K of a)if(jf(K,{select:d}),document.activeElement!==k)break}function bf(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:k=>{const K="INPUT"===k.tagName&&"hidden"===k.type;return k.disabled||k.hidden||K?NodeFilter.FILTER_SKIP:0<=k.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function xg(a,d){for(const k of a)if(!mg(k,{upTo:d}))return k}
function mg(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function jf(a,{select:d=!1}={}){if(a&&a.focus){const k=document.activeElement;a.focus({preventScroll:!0});a!==k&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function rh(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function vh(a){return a.filter(d=>"A"!==d.tagName)}function Ph(a,d,k){a=
a.key;k="rtl"!==k?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(k))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(k))return lH[k]}function Gg(a){const d=document.activeElement;for(const k of a){if(k===d)break;k.focus();if(document.activeElement!==d)break}}function rg(a,d){return a.map((k,K)=>a[(d+K)%a.length])}function Gh(a,d){var k=(0,RB.useState)(function(){return{value:a,callback:d,facade:{get current(){return k.value},
set current(K){var da=k.value;da!==K&&(k.value=K,k.callback(K,da))}}}})[0];k.callback=d;return k.facade}function Dj(a,d){return Gh(d||null,function(k){return a.forEach(function(K){"function"===typeof K?K(k):K&&(K.current=k);return K})})}function tn(a){return a}function Vl(a,d){void 0===d&&(d=tn);var k=[],K=!1;return{read:function(){if(K)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return k.length?k[k.length-1]:a},useMedium:function(da){var ja=
d(da,K);k.push(ja);return function(){k=k.filter(function(qa){return qa!==ja})}},assignSyncMedium:function(da){for(K=!0;k.length;){var ja=k;k=[];ja.forEach(da)}k={push:function(qa){return da(qa)},filter:function(){return k}}},assignMedium:function(da){K=!0;var ja=[];if(k.length){var qa=k;k=[];qa.forEach(da);ja=k}var Ha=function(){var Ra=ja;ja=[];Ra.forEach(da)};Promise.resolve().then(Ha);k={push:function(Ra){ja.push(Ra);Promise.resolve().then(Ha)},filter:function(Ra){ja=ja.filter(Ra);return k}}}}}
function to(a){const d=document.activeElement;for(const k of a){if(k===d)break;k.focus();if(document.activeElement!==d)break}}function Fl(a,d){return a.map((k,K)=>a[(d+K)%a.length])}function oj(a,d,k){const K=1<d.length&&Array.from(d).every(ja=>ja===d[0])?d[0]:d,da=k?a.indexOf(k):-1;a=Fl(a,Math.max(da,0));1===K.length&&(a=a.filter(ja=>ja!==k));a=a.find(ja=>ja.toLowerCase().startsWith(K.toLowerCase()));return a!==k?a:void 0}function uo(a){return d=>"mouse"===d.pointerType?a(d):void 0}function ap(a,
[d,k]){return Math.min(k,Math.max(d,a))}function Tn(a){const d=(0,ay.useRef)({value:a,previous:a});return(0,ay.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function Xm(a=[],d,k){a=[...a];a[k]=d;return a.sort((K,da)=>K-da)}function wi(a,d,k){return 100/(k-d)*(a-d)}function rl(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function mt(a,d){if(1===a.length)return 0;a=a.map(K=>Math.abs(K-d));
const k=Math.min(...a);return a.indexOf(k)}function Wl(a,d,k){a/=2;const K=an([0,50],[0,a]);return(a-K(d)*k)*k}function bn(a){return a.slice(0,-1).map((d,k)=>a[k+1]-d)}function an(a,d){return k=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(k-a[0])}function Do(a,d){d=Math.pow(10,d);return Math.round(a*d)/d}function lm(a){function d($a){return $a?(0,Gk.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:$a},children:(0,Gk.jsx)("div",{className:`w-full h-full bg-${$a}-500`})}):
(0,Gk.jsx)("div",{className:"tl-color-bg",children:(0,Gk.jsx)(bh,{name:"color-swatch"})})}var {color:k,opacity:K,popoverSide:da,setColor:ja,setOpacity:qa}=a;a=zf(a,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:Ha}}=dy.default.useContext(ri),Ra=dy.default.useMemo(()=>{let $a="";return Uj(fb=>{ja($a)},100,fb=>{$a=fb.target.value})},[]);return(0,Gk.jsx)(mq,hf(Yd({},a),{border:!0,arrow:!0,side:da,label:(0,Gk.jsx)(ce,{content:Ha("whiteboard/color"),side:da,sideOffset:14,
children:d(k)}),children:(0,Gk.jsxs)("div",{className:"p-1",children:[(0,Gk.jsx)("div",{className:"tl-color-palette",children:Object.values(Lw).map($a=>(0,Gk.jsx)("button",{className:`tl-color-drip m-1${$a===k?" active":""}`,onClick:()=>ja($a),children:d($a)},$a))}),(0,Gk.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,Gk.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${Fi(k)?"":"active"}`,children:(0,Gk.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,Gk.jsx)("input",
Yd({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(k)?k:"#000000",onChange:Ra,style:{opacity:Fi(k)?0:1}},a))})}),(0,Gk.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:Ha("whiteboard/select-custom-color")})]}),qa&&(0,Gk.jsx)("div",{className:"mx-1 my-2",children:(0,Gk.jsxs)(vj,{defaultValue:[null!=K?K:0],onValueCommit:$a=>qa($a[0]),max:1,step:.1,"aria-label":Ha("whiteboard/opacity"),className:"tl-slider-root",
children:[(0,Gk.jsx)(Qo,{className:"tl-slider-track",children:(0,Gk.jsx)(Ne,{className:"tl-slider-range"})}),(0,Gk.jsx)(Qf,{className:"tl-slider-thumb"})]})})]})}))}function ei(a,d){a&&(0,nq.flushSync)(()=>a.dispatchEvent(d))}function ep(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=Ii(a),K=(0,cj.useRef)(!1),da=(0,cj.useRef)(()=>{});(0,cj.useEffect)(()=>{const ja=Ha=>{if(Ha.target&&!K.current){let Ra=function(){km("dismissableLayer.pointerDownOutside",k,$a,{discrete:!0})};
const $a={originalEvent:Ha};"touch"===Ha.pointerType?(d.removeEventListener("click",da.current),da.current=Ra,d.addEventListener("click",da.current,{once:!0})):Ra()}K.current=!1},qa=window.setTimeout(()=>{d.addEventListener("pointerdown",ja)},0);return()=>{window.clearTimeout(qa);d.removeEventListener("pointerdown",ja);d.removeEventListener("click",da.current)}},[d,k]);return{onPointerDownCapture:()=>K.current=!0}}function Ym(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=
Ii(a),K=(0,cj.useRef)(!1);(0,cj.useEffect)(()=>{const da=ja=>{ja.target&&!K.current&&km("dismissableLayer.focusOutside",k,{originalEvent:ja},{discrete:!1})};d.addEventListener("focusin",da);return()=>d.removeEventListener("focusin",da)},[d,k]);return{onFocusCapture:()=>K.current=!0,onBlurCapture:()=>K.current=!1}}function vn(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function km(a,d,k,{discrete:K}){const da=k.originalEvent.target;k=new CustomEvent(a,{bubbles:!1,
cancelable:!0,detail:k});d&&da.addEventListener(a,d,{once:!0});K?ei(da,k):da.dispatchEvent(k)}function ar(a,{select:d=!1}={}){const k=document.activeElement;for(const K of a)if(Fm(K,{select:d}),document.activeElement!==k)break}function Bo(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:k=>{const K="INPUT"===k.tagName&&"hidden"===k.type;return k.disabled||k.hidden||K?NodeFilter.FILTER_SKIP:0<=k.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);
return d}function Bn(a,d){for(const k of a)if(!un(k,{upTo:d}))return k}function un(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Fm(a,{select:d=!1}={}){if(a&&a.focus){const k=document.activeElement;a.focus({preventScroll:!0});a!==k&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function Un(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function Kp(a){return a.filter(d=>
"A"!==d.tagName)}function bp(a){return void 0!==a}function Mg(a){return null!==a}function fp(a){const [d,k="center"]=a.split("-");return[d,k]}function gp(a){const d=Ii(a),k=(0,af.useRef)(""),K=(0,af.useRef)(0);a=(0,af.useCallback)(ja=>{ja=k.current+ja;d(ja);(function Ra(Ha){k.current=Ha;window.clearTimeout(K.current);""!==Ha&&(K.current=window.setTimeout(()=>Ra(""),1E3))})(ja)},[d]);const da=(0,af.useCallback)(()=>{k.current="";window.clearTimeout(K.current)},[]);(0,af.useEffect)(()=>()=>window.clearTimeout(K.current),
[]);return[k,a,da]}function Cn(a,d,k){const K=1<d.length&&Array.from(d).every(ja=>ja===d[0])?d[0]:d,da=k?a.indexOf(k):-1;a=$m(a,Math.max(da,0));1===K.length&&(a=a.filter(ja=>ja!==k));a=a.find(ja=>ja.textValue.toLowerCase().startsWith(K.toLowerCase()));return a!==k?a:void 0}function $m(a,d){return a.map((k,K)=>a[(d+K)%a.length])}function Up(a){var {options:d,tooltip:k,popoverSide:K,chevron:da=!0,value:ja,onValueChange:qa}=a;a=zf(a,"options tooltip popoverSide chevron value onValueChange".split(" "));
const [Ha,Ra]=eu.useState(!1);return(0,jl.jsx)("div",hf(Yd({},a),{className:"tl-select-input",children:(0,jl.jsxs)(sC,{open:Ha,onOpenChange:Ra,value:ja,onValueChange:qa,children:[(0,jl.jsx)(ce,{content:k,side:K,children:(0,jl.jsxs)(tC,{className:"tl-select-input-trigger",children:[(0,jl.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,jl.jsx)(Al,{})}),da&&(0,jl.jsx)(ky,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,jl.jsx)(bh,{name:Ha?"chevron-up":"chevron-down"})})]})}),
(0,jl.jsx)(rC,{className:"tl-select-input-portal",children:(0,jl.jsxs)(Pm,{className:"tl-select-input-content",side:K,position:"popper",sideOffset:14,align:"center",onKeyDown:$a=>$a.stopPropagation(),children:[(0,jl.jsx)(Eh,{}),(0,jl.jsx)(zd,{className:"tl-select-input-viewport",children:d.map($a=>(0,jl.jsx)(uC,{className:"tl-select-input-select-item",value:$a.value,children:(0,jl.jsx)(yh,{children:$a.label})},$a.value))}),(0,jl.jsx)(vC,{})]})})]})}))}function Tr(a){var {scaleLevel:d,compact:k,popoverSide:K}=
a;zf(a,["scaleLevel","compact","popoverSide"]);const da=lg();({handlers:{t:a}}=Nv.default.useContext(ri));const ja=[{label:k?"XS":a("whiteboard/extra-small"),value:"xs"},{label:k?"SM":a("whiteboard/small"),value:"sm"},{label:k?"MD":a("whiteboard/medium"),value:"md"},{label:k?"LG":a("whiteboard/large"),value:"lg"},{label:k?"XL":a("whiteboard/extra-large"),value:"xl"},{label:k?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,wC.jsx)(Up,{tooltip:a("whiteboard/scale-level"),options:ja,value:d,popoverSide:K,
chevron:!k,onValueChange:qa=>{da.api.setScaleLevel(qa)}})}function Xn(a,d){return function(k){return a(d(k))}}function Mq(a,d){return d(a)}function Em(a,d){return function(k){return a(d,k)}}function Dm(a,d){return function(){return a(d)}}function Ti(a,d){d(a);return a}function Qi(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return d}function mm(a){a()}function gr(a){return function(){return a}}function fs(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];
return function(){d.map(mm)}}function fi(){}function fh(a,d){return a(1,d)}function ds(a,d){a(0,d)}function rt(a){a(2)}function Zn(a){return a(4)}function Jg(a,d){return fh(a,Em(d,0))}function Gm(a,d){var k=a(1,function(K){k();d(K)});return k}function Dg(){var a=[];return function(d,k){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(k),function(){var K=a.indexOf(k);-1<K&&a.splice(K,1)};case 0:a.slice().forEach(function(K){K(k)});break;default:throw Error("unrecognized action "+d);
}}}function Pf(a){var d=a,k=Dg();return function(K,da){switch(K){case 1:da(d);break;case 0:d=da;break;case 4:return d}return k(K,da)}}function Hm(a){var d,k;return function(K,da){switch(K){case 1:if(da){if(k===da)break;d&&d();k=da;return d=a(1,da)}d&&d();return fi;case 2:d&&d();k=null;break;default:throw Error("unrecognized action "+K);}}}function rk(a){return Ti(Dg(),function(d){return Jg(a,d)})}function Pj(a,d){return Ti(Pf(d),function(k){return Jg(a,k)})}function $n(){for(var a=arguments.length,
d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(K){return d.reduceRight(Mq,K)}}function xf(a){for(var d=arguments.length,k=Array(1<d?d-1:0),K=1;K<d;K++)k[K-1]=arguments[K];var da=$n.apply(void 0,k);return function(ja,qa){switch(ja){case 1:return fh(a,da(qa));case 2:a(2);break;default:throw Error("unrecognized action "+ja);}}}function Jm(a,d){return a===d}function Rh(a){void 0===a&&(a=Jm);var d;return function(k){return function(K){a(d,K)||(d=K,k(K))}}}function kg(a){return function(d){return function(k){a(k)&&
d(k)}}}function og(a){return function(d){return Xn(d,a)}}function cn(a){return function(d){return function(){return d(a)}}}function ck(a,d){return function(k){return function(K){return k(d=a(d,K))}}}function am(a){return function(d){return function(k){0<a?a--:d(k)}}}function ao(a){var d,k;return function(K){return function(da){d=da;k||=setTimeout(function(){k=void 0;K(d)},a)}}}function Gj(a){var d,k;return function(K){return function(da){d=da;k&&clearTimeout(k);k=setTimeout(function(){K(d)},a)}}}
function th(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];var K=Array(d.length),da=0,ja=null,qa=Math.pow(2,d.length)-1;d.forEach(function(Ha,Ra){var $a=Math.pow(2,Ra);fh(Ha,function(fb){var jb=da;da|=$a;K[Ra]=fb;jb!==qa&&da===qa&&ja&&(ja(),ja=null)})});return function(Ha){return function(Ra){var $a=function(){return Ha([Ra].concat(K))};da===qa?$a():ja=$a}}}function Vp(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(K,da){switch(K){case 1:return fs.apply(void 0,
d.map(function(ja){return ja(1,da)}));case 2:break;default:throw Error("unrecognized action "+K);}}}function lh(a,d){void 0===d&&(d=Jm);return xf(a,Rh(d))}function rj(){for(var a=Dg(),d=arguments.length,k=Array(d),K=0;K<d;K++)k[K]=arguments[K];var da=Array(k.length),ja=0,qa=Math.pow(2,k.length)-1;k.forEach(function(Ha,Ra){var $a=Math.pow(2,Ra);fh(Ha,function(fb){da[Ra]=fb;ja|=$a;ja===qa&&a(0,da)})});return function(Ha,Ra){switch(Ha){case 1:return ja===qa&&Ra(da),a(1,Ra);case 2:a(2);break;default:throw Error("unrecognized action "+
Ha);}}}function Wh(a,d,k){void 0===d&&(d=[]);k=(void 0===k?{singleton:!0}:k).singleton;return{id:Symbol(),constructor:a,dependencies:d,singleton:k}}function ip(a){var d=new Map;return function da(K){var ja=K.id,qa=K.constructor,Ha=K.dependencies;if((K=K.singleton)&&d.has(ja))return d.get(ja);qa=qa(Ha.map(function(Ra){return da(Ra)}));K&&d.set(ja,qa);return qa}(a)}function Eo(a,d){if(null==a)return{};var k={},K=Object.keys(a),da;for(da=0;da<K.length;da++){var ja=K[da];0<=d.indexOf(ja)||(k[ja]=a[ja])}return k}
function jp(a,d){if(a){if("string"===typeof a)return Wp(a,d);var k=Object.prototype.toString.call(a).slice(8,-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return Wp(a,d)}}function Wp(a,d){if(null==d||d>a.length)d=a.length;for(var k=0,K=Array(d);k<d;k++)K[k]=a[k];return K}function bo(a,d){var k="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=k.call(a)).next.bind(k);
if(Array.isArray(a)||(k=jp(a))||d&&a&&"number"===typeof a.length){k&&(a=k);var K=0;return function(){return K>=a.length?{done:!0}:{done:!1,value:a[K++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Xp(a,d){for(var k={},K={},da=0,ja=a.length;da<ja;)K[a[da]]=1,da+=1;for(var qa in d)K.hasOwnProperty(qa)||(k[qa]=d[qa]);return k}function sj(a,d,k){function K(jb,Kb){jb.propsReady&&
(0,jb.propsReady)(0,!1);for(var Nb=bo(qa),Hb;!(Hb=Nb()).done;)Hb=Hb.value,(0,jb[d.required[Hb]])(0,Kb[Hb]);for(Nb=bo(Ha);!(Hb=Nb()).done;)if(Hb=Hb.value,Hb in Kb)(0,jb[d.optional[Hb]])(0,Kb[Hb]);jb.propsReady&&(0,jb.propsReady)(0,!0)}function da(jb){return Ra.reduce(function(Kb,Nb){Kb[Nb]=function(Hb){(0,jb[d.methods[Nb]])(0,Hb)};return Kb},{})}function ja(jb){return $a.reduce(function(Kb,Nb){Kb[Nb]=Hm(jb[d.events[Nb]]);return Kb},{})}var qa=Object.keys(d.required||{}),Ha=Object.keys(d.optional||
{}),Ra=Object.keys(d.methods||{}),$a=Object.keys(d.events||{}),fb=(0,fm.createContext)({});return{Component:(0,fm.forwardRef)(function(jb,Kb){var Nb=jb.children,Hb=Eo(jb,zH),fc=(0,fm.useState)(function(){return Ti(ip(a),function(Wb){return K(Wb,Hb)})})[0],qc=(0,fm.useState)(Dm(ja,fc))[0];vp(function(){for(var Wb=bo($a),kc;!(kc=Wb()).done;)if(kc=kc.value,kc in Hb)(0,qc[kc])(1,Hb[kc]);return function(){Object.values(qc).map(rt)}},[Hb,qc,fc]);vp(function(){K(fc,Hb)});(0,fm.useImperativeHandle)(Kb,gr(da(fc)));
return(0,fm.createElement)(fb.Provider,{value:fc},k?(0,fm.createElement)(k,Xp([].concat(qa,Ha,$a),Hb),Nb):Nb)}),usePublisher:function(jb){return(0,fm.useCallback)(Em(ds,(0,fm.useContext)(fb)[jb]),[jb])},useEmitterValue:function(jb){var Kb=(0,fm.useContext)(fb)[jb];jb=(0,fm.useState)(Dm(Zn,Kb));var Nb=jb[0],Hb=jb[1];vp(function(){return fh(Kb,function(fc){fc!==Nb&&Hb(gr(fc))})},[Kb,Nb]);return Nb},useEmitter:function(jb,Kb){var Nb=(0,fm.useContext)(fb)[jb];vp(function(){return Nb(1,Kb)},[Kb,Nb])}}}
function ah(){return ah=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],K;for(K in k)Object.prototype.hasOwnProperty.call(k,K)&&(a[K]=k[K])}return a},ah.apply(this,arguments)}function bm(a,d){if(null==a)return{};var k,K,da={},ja=Object.keys(a);for(K=0;K<ja.length;K++)0<=d.indexOf(k=ja[K])||(da[k]=a[k]);return da}function co(a,d){(null==d||d>a.length)&&(d=a.length);for(var k=0,K=Array(d);k<d;k++)K[k]=a[k];return K}function cm(a,d){var k="undefined"!=typeof Symbol&&
a[Symbol.iterator]||a["@@iterator"];if(k)return(k=k.call(a)).next.bind(k);if(Array.isArray(a)||(k=function(da,ja){if(da){if("string"==typeof da)return co(da,ja);var qa=Object.prototype.toString.call(da).slice(8,-1);return"Object"===qa&&da.constructor&&(qa=da.constructor.name),"Map"===qa||"Set"===qa?Array.from(da):"Arguments"===qa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qa)?co(da,ja):void 0}}(a))||d&&a&&"number"==typeof a.length){k&&(a=k);var K=0;return function(){return K>=a.length?{done:!0}:
{done:!1,value:a[K++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Fo(a,d){void 0===d&&(d=!0);var k=(0,Jh.useRef)(null),K=function(ja){};if("undefined"!=typeof ResizeObserver){var da=new ResizeObserver(function(ja){ja=ja[0].target;null!==ja.offsetParent&&a(ja)});K=function(ja){ja&&d?(da.observe(ja),k.current=ja):(k.current&&da.unobserve(k.current),k.current=null)}}return{ref:k,
callbackRef:K}}function gj(a,d){return void 0===d&&(d=!0),Fo(a,d).callbackRef}function ni(a,d,k,K,da,ja,qa){return Fo(function(Ha){for(var Ra=function(jb,Kb,Nb,Hb){Nb=jb.length;if(0===Nb)return null;for(var fc=[],qc=0;qc<Nb;qc++){var Wb=jb.item(qc);if(Wb&&void 0!==Wb.dataset.index){var kc=parseInt(Wb.dataset.index),hc=parseFloat(Wb.dataset.knownSize),Fc=Kb(Wb,"offsetHeight");if(0===Fc&&Hb("Zero-sized element, this should not happen",{child:Wb},Xk.ERROR),Fc!==hc)Wb=fc[fc.length-1],0===fc.length||Wb.size!==
Fc||Wb.endIndex!==kc-1?fc.push({startIndex:kc,endIndex:kc,size:Fc}):fc[fc.length-1].endIndex++}}return fc}(Ha.children,d,0,da),$a=Ha.parentElement;!$a.dataset.virtuosoScroller;)$a=$a.parentElement;var fb="window"===$a.firstElementChild.dataset.viewportType;K({scrollTop:Math.max(qa?qa.scrollTop:fb?window.pageYOffset||document.documentElement.scrollTop:$a.scrollTop,0),scrollHeight:qa?qa.scrollHeight:fb?document.documentElement.scrollHeight:$a.scrollHeight,viewportHeight:qa?qa.offsetHeight:fb?window.innerHeight:
$a.offsetHeight});null==ja||ja(function(jb,Kb,Nb){return"normal"===Kb||null!=Kb&&Kb.endsWith("px")||Nb("row-gap was not resolved to pixel value correctly",Kb,Xk.WARN),"normal"===Kb?0:parseInt(null!=Kb?Kb:"0",10)}(0,getComputedStyle(Ha).rowGap,da));null!==Ra&&a(Ra)},k)}function hi(a,d){return Math.round(a.getBoundingClientRect()[d])}function gs(a,d,k,K,da){void 0===K&&(K=fi);var ja=(0,Jh.useRef)(null),qa=(0,Jh.useRef)(null),Ha=(0,Jh.useRef)(null),Ra=(0,Jh.useRef)(!1),$a=(0,Jh.useCallback)(function(fb){fb=
fb.target;var jb=fb===window||fb===document,Kb=jb?window.pageYOffset||document.documentElement.scrollTop:fb.scrollTop,Nb=jb?document.documentElement.scrollHeight:fb.scrollHeight,Hb=jb?window.innerHeight:fb.offsetHeight;fb=function(){a({scrollTop:Math.max(Kb,0),scrollHeight:Nb,viewportHeight:Hb})};Ra.current?(0,ny.flushSync)(fb):fb();Ra.current=!1;null!==qa.current&&(Kb===qa.current||0>=Kb||Kb===Nb-Hb)&&(qa.current=null,d(!0),Ha.current&&(clearTimeout(Ha.current),Ha.current=null))},[a,d]);return(0,Jh.useEffect)(function(){var fb=
da||ja.current;return K(da||ja.current),$a({target:fb}),fb.addEventListener("scroll",$a,{passive:!0}),function(){K(null);fb.removeEventListener("scroll",$a)}},[ja,$a,k,K,da]),{scrollerRef:ja,scrollByCallback:function(fb){Ra.current=!0;ja.current.scrollBy(fb)},scrollToCallback:function(fb){var jb=ja.current;if(jb&&!("offsetHeight"in jb&&0===jb.offsetHeight)){var Kb,Nb,Hb,fc="smooth"===fb.behavior;if(jb===window?(Nb=Math.max(hi(document.documentElement,"height"),document.documentElement.scrollHeight),
Kb=window.innerHeight,Hb=document.documentElement.scrollTop):(Nb=jb.scrollHeight,Kb=hi(jb,"height"),Hb=jb.scrollTop),fb.top=Math.ceil(Math.max(Math.min(Nb-Kb,fb.top),0)),1.01>Math.abs(Kb-Nb)||fb.top===Hb)return a({scrollTop:Hb,scrollHeight:Nb,viewportHeight:Kb}),void(fc&&d(!0));fc?(qa.current=fb.top,Ha.current&&clearTimeout(Ha.current),Ha.current=setTimeout(function(){Ha.current=null;qa.current=null;d(!0)},1E3)):qa.current=null;jb.scrollTo(fb)}}}}function Go(a,d,k,K,da){return void 0===K&&(K=ji),
void 0===da&&(da=ji),{k:a,v:d,lvl:k,l:K,r:da}}function x(a,d){if(a===ji)return ji;var k=a.k,K=a.l,da=a.r;if(d===k){if(K===ji)return da;if(da===ji)return K;d=cb(K);return zc(qb(a,{k:d[0],v:d[1],l:nb(K)}))}return zc(qb(a,d<k?{l:x(K,d)}:{r:x(da,d)}))}function ba(a,d,k){return(void 0===k&&(k="k"),a===ji)?[-Infinity,void 0]:a[k]===d?[a.k,a.v]:a[k]<d?(d=ba(a.r,d,k),-Infinity===d[0]?[a.k,a.v]:d):ba(a.l,d,k)}function za(a,d,k){return a===ji?Go(d,k,1):d===a.k?qb(a,{k:d,v:k}):Cd(Id(qb(a,d<a.k?{l:za(a.l,d,k)}:
{r:za(a.r,d,k)})))}function wa(a,d,k){if(a===ji)return[];var K=a.k,da=a.v,ja=a.r,qa=[];return K>d&&(qa=qa.concat(wa(a.l,d,k))),K>=d&&K<=k&&qa.push({k:K,v:da}),K<=k&&(qa=qa.concat(wa(ja,d,k))),qa}function Ia(a){return a===ji?[]:[].concat(Ia(a.l),[{k:a.k,v:a.v}],Ia(a.r))}function cb(a){return a.r===ji?[a.k,a.v]:cb(a.r)}function nb(a){return a.r===ji?a.l:zc(qb(a,{r:nb(a.r)}))}function qb(a,d){return Go(void 0!==d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==
d.r?d.r:a.r)}function Vb(a){return a===ji||a.lvl>a.r.lvl}function zc(a){var d=a.l,k=a.r,K=a.lvl;if(k.lvl>=K-1&&d.lvl>=K-1)return a;if(K>k.lvl+1){if(Vb(d))return Id(qb(a,{lvl:K-1}));if(d===ji||d.r===ji)throw Error("Unexpected empty nodes");return qb(d.r,{l:qb(d,{r:d.r.l}),r:qb(a,{l:d.r.r,lvl:K-1}),lvl:K})}if(Vb(a))return Cd(qb(a,{lvl:K-1}));if(k===ji||k.l===ji)throw Error("Unexpected empty nodes");d=k.l;var da=Vb(d)?k.lvl-1:k.lvl;return qb(d,{l:qb(a,{r:d.l,lvl:K-1}),r:Cd(qb(k,{l:d.r,lvl:da})),lvl:d.lvl+
1})}function Pc(a,d,k){return a===ji?[]:wd(wa(a,ba(a,d)[0],k),function(K){return{index:K.k,value:K.v}})}function wd(a,d){var k=a.length;if(0===k)return[];var K=d(a[0]),da=K.index;K=K.value;for(var ja=[],qa=1;qa<k;qa++){var Ha=d(a[qa]),Ra=Ha.index;Ha=Ha.value;ja.push({start:da,end:Ra-1,value:K});da=Ra;K=Ha}return ja.push({start:da,end:Infinity,value:K}),ja}function Cd(a){var d=a.r,k=a.lvl;return d===ji||d.r===ji||d.lvl!==k||d.r.lvl!==k?a:qb(d,{l:qb(a,{r:d.l}),lvl:k+1})}function Id(a){var d=a.l;return d===
ji||d.lvl!==a.lvl?a:qb(d,{r:qb(a,{l:d.r})})}function Ce(a,d,k,K){void 0===K&&(K=0);for(var da=a.length-1;K<=da;){var ja=Math.floor((K+da)/2),qa=k(a[ja],d);if(0===qa)return ja;if(-1===qa){if(2>da-K)return ja-1;da=ja-1}else{if(da===K)return ja;K=ja+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);}function Kf(a){var d=a.size,k=a.startIndex,K=a.endIndex;return function(da){return da.start===k&&(da.end===K||Infinity===da.end)&&da.value===d}}function Ng(a,d){a=
a.index;return d===a?0:d<a?-1:1}function Qj(a,d){a=a.offset;return d===a?0:d<a?-1:1}function Bg(a){return{index:a.index,value:a}}function yi(a,d,k,K){var da=0,ja=0,qa=0,Ha;0!==d?(qa=a[Ha=Ce(a,d-1,Ng)].offset,ja=ba(k,d-1),da=ja[0],ja=ja[1],a.length&&a[Ha].size===ba(k,d)[1]&&--Ha,a=a.slice(0,Ha+1)):a=[];for(d=cm(Pc(k,d,Infinity));!(k=d()).done;)Ha=k.value,k=Ha.start,Ha=Ha.value,da=k-da,qa=da*ja+qa+da*K,a.push({offset:qa,size:Ha,index:k}),da=k,ja=Ha;return{offsetTree:a,lastIndex:da,lastOffset:qa,lastSize:ja}}
function oi(a,d){var k=d[0],K=d[1],da=d[3];0<k.length&&(0,d[2])("received item sizes",k,Xk.DEBUG);var ja=a.sizeTree;d=ja;var qa=0;if(0<K.length&&ja===ji&&2===k.length){var Ha=k[0].size,Ra=k[1].size;d=K.reduce(function(fb,jb){return za(za(fb,jb,Ha),jb+1,Ra)},d)}else k=function(fb,jb){var Kb,Nb=fb===ji?0:Infinity;for(jb=cm(jb);!(Kb=jb()).done;){var Hb=Kb.value;Kb=Hb.size;var fc=Hb.startIndex,qc=Hb.endIndex;if(Nb=Math.min(Nb,fc),fb===ji)fb=za(fb,0,Kb);else{var Wb=Pc(fb,fc-1,qc+1);if(!Wb.some(Kf(Hb))){var kc,
hc=Hb=!1;for(Wb=cm(Wb);!(kc=Wb()).done;){var Fc=kc.value;kc=Fc.start;var Mc=Fc.end;Fc=Fc.value;Hb?(qc>=kc||Kb===Fc)&&(fb=x(fb,kc)):(hc=Fc!==Kb,Hb=!0);Mc>qc&&qc>=kc&&Fc!==Kb&&(fb=za(fb,qc+1,Fc))}hc&&(fb=za(fb,fc,Kb))}}}return[fb,Nb]}(d,k),d=k[0],qa=k[1];if(d===ja)return a;a=yi(a.offsetTree,qa,d,da);var $a=a.offsetTree;return{sizeTree:d,offsetTree:$a,lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:K.reduce(function(fb,jb){return za(fb,jb,Sh(jb,$a,da))},ji),groupIndices:K}}
function Sh(a,d,k){if(0===d.length)return 0;d=d[Ce(d,a,Ng)];a-=d.index;a=d.size*a+(a-1)*k+d.offset;return 0<a?a+k:a}function zi(a,d,k){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+1;a=xh("LAST"===a.index?k:a.index,d);return Math.max(0,a,Math.min(k,a))}function xh(a,d){if(d.groupOffsetTree===ji)return a;for(var k=0;d.groupIndices[k]<=a+k;)k++;return a+k}function Th(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&BH||(a.behavior="auto"),a.offset||(a.offset=
0),a}function Xh(a){return!!a&&("smooth"===a?"smooth":"auto")}function pi(a){return a.reduce(function(d,k){return d.groupIndices.push(d.totalCount),d.totalCount+=k+1,d},{totalCount:0,groupIndices:[]})}function tj(a,d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function Ck(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function xl(a,d,k){return"number"==typeof a?"up"===k&&"top"===d||"down"===k&&"bottom"===d?a:0:"up"===k?"top"===d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function En(a,
d,k){if(0===a.length)return[];if(d.groupOffsetTree===ji)return a.map(function(Ra){return ah({},Ra,{index:Ra.index+k,originalIndex:Ra.index})});var K,da=[],ja=Pc(d.groupOffsetTree,a[0].index,a[a.length-1].index),qa=void 0,Ha=0;for(a=cm(a);!(K=a()).done;)K=K.value,(!qa||qa.end<K.index)&&(qa=ja.shift(),Ha=d.groupIndices.indexOf(qa.start)),da.push(ah({},K.index===qa.start?{type:"group",index:Ha}:{index:K.index-(Ha+1)+k,groupIndex:Ha},{size:K.size,offset:K.offset,originalIndex:K.index,data:K.data}));return da}
function Km(a,d,k,K,da,ja){var qa=0,Ha=0;0<a.length&&(qa=a[0].offset,Ha=a[a.length-1],Ha=Ha.offset+Ha.size);var Ra=k-da.lastIndex,$a=qa;K=da.lastOffset+Ra*da.lastSize+(Ra-1)*K-Ha;return{items:En(a,da,ja),topItems:En(d,da,ja),topListHeight:d.reduce(function(fb,jb){return jb.size+fb},0),offsetTop:qa,offsetBottom:K,top:$a,bottom:Ha,totalCount:k,firstItemIndex:ja}}function Lm(a){var d,k=!1;return function(){return k||(k=!0,d=a()),d}}function oh(a,d){var k=(0,Jh.useRef)(null),K=(0,Jh.useCallback)(function(Ra){if(null!==
Ra&&Ra.offsetParent){var $a=Ra.getBoundingClientRect();Ra=$a.width;if(d){var fb=d.getBoundingClientRect();$a=$a.top-fb.top;fb=fb.height-Math.max(0,$a);$a+=d.scrollTop}else fb=window.innerHeight-Math.max(0,$a.top),$a=$a.top+window.pageYOffset;k.current={offsetTop:$a,visibleHeight:fb,visibleWidth:Ra};a(k.current)}},[a,d]),da=Fo(K),ja=da.callbackRef,qa=da.ref,Ha=(0,Jh.useCallback)(function(){K(qa.current)},[K,qa]);return(0,Jh.useEffect)(function(){if(d){d.addEventListener("scroll",Ha);var Ra=new ResizeObserver(Ha);
return Ra.observe(d),function(){d.removeEventListener("scroll",Ha);Ra.unobserve(d)}}return window.addEventListener("scroll",Ha),window.addEventListener("resize",Ha),function(){window.removeEventListener("scroll",Ha);window.removeEventListener("resize",Ha)}},[Ha,d]),ja}function tt(a){return a}function pm(a,d){var k=Dg();return fh(k,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),Jg(k,a),k}function dk(a,d){if("string"!=
typeof a)return{context:d}}function hs(a){var d=a.usePublisher,k=a.useEmitter,K=a.useEmitterValue;return Vg.memo(function(da){var ja=da.style,qa=da.children;da=bm(da,HC);var Ha=d("scrollContainerState"),Ra=K("ScrollerComponent"),$a=d("smoothScrollTargetReached"),fb=K("scrollerRef"),jb=K("context");Ha=gs(Ha,$a,Ra,fb);$a=Ha.scrollerRef;fb=Ha.scrollByCallback;return k("scrollTo",Ha.scrollToCallback),k("scrollBy",fb),(0,Jh.createElement)(Ra,ah({ref:$a,style:ah({},KC,ja),"data-test-id":"virtuoso-scroller",
"data-virtuoso-scroller":!0,tabIndex:0},da,dk(Ra,jb)),qa)})}function hr(a){var d=a.usePublisher,k=a.useEmitter,K=a.useEmitterValue;return Vg.memo(function(da){var ja=da.style,qa=da.children;da=bm(da,Tv);var Ha=d("windowScrollContainerState"),Ra=K("ScrollerComponent"),$a=d("smoothScrollTargetReached"),fb=K("totalListHeight"),jb=K("deviation"),Kb=K("customScrollParent"),Nb=K("context");$a=gs(Ha,$a,Ra,fi,Kb);var Hb=$a.scrollerRef;Ha=$a.scrollByCallback;$a=$a.scrollToCallback;return BC(function(){return Hb.current=
Kb||window,function(){Hb.current=null}},[Hb,Kb]),k("windowScrollTo",$a),k("scrollBy",Ha),(0,Jh.createElement)(Ra,ah({style:ah({position:"relative"},ja,0!==fb?{height:fb+jb}:{}),"data-virtuoso-scroller":!0},da,dk(Ra,Nb)),qa)})}function is(a,d,k){return Array.from({length:d-a+1}).map(function(K,da){return{index:da+a,data:null==k?void 0:k[da+a]}})}function Yp(a,d){return a&&a.column===d.column&&a.row===d.row}function Ku(a,d,k,K){var da=k.height;return void 0===da||0===K.length?{top:0,bottom:0}:{top:ut(a,
d,k,K[0].index),bottom:ut(a,d,k,K[K.length-1].index)+da}}function ut(a,d,k,K){var da=d.column;a=To(1,Ai((a.width+da)/(k.width+da)));K=Ai(K/a);k=K*k.height+To(0,K-1)*d.row;return 0<k?k+d.row:k}function Lu(a,d,k){return"normal"===d||null!=d&&d.endsWith("px")||k(a+" was not resolved to pixel value correctly",d,Xk.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function Zp(a,d){Zp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,K){k.__proto__=K;return k};return Zp(a,d)}function js(a,d){a.prototype=
Object.create(d.prototype);a.prototype.constructor=a;Zp(a,d)}function vt(a){vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return vt(a)}function zw(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function wt(a,d,k){wt=zw()?Reflect.construct.bind():function(K,
da,ja){var qa=[null];qa.push.apply(qa,da);K=new (Function.bind.apply(K,qa));ja&&Zp(K,ja.prototype);return K};return wt.apply(null,arguments)}function xt(a){var d="function"===typeof Map?new Map:void 0;xt=function(k){function K(){return wt(k,arguments,vt(this).constructor)}if(null===k||-1===Function.toString.call(k).indexOf("[native code]"))return k;if("function"!==typeof k)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof d){if(d.has(k))return d.get(k);
d.set(k,K)}K.prototype=Object.create(k.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}});return Zp(K,k)};return xt(a)}function Aw(a,d,k){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*k)}function ir(a,d,k,K){void 0===K&&(K=Aw);if(0===d)return K(k,k,k);a=(a%360+360)%360/60;var da=(1-Math.abs(2*k-1))*d,ja=da*(1-Math.abs(a%2-1)),qa=d=0,Ha=0;0<=a&&1>a?(d=da,qa=ja):1<=a&&2>a?(d=ja,qa=da):2<=a&&3>a?(qa=da,Ha=ja):3<=a&&4>a?(qa=ja,Ha=da):4<=a&&5>a?(d=ja,Ha=da):
5<=a&&6>a&&(d=da,Ha=ja);k-=da/2;return K(d+k,qa+k,Ha+k)}function Bw(a){if("string"!==typeof a)throw new lo(3);if("string"===typeof a){var d=a.toLowerCase();a=By[d]?"#"+By[d]:a}if(a.match(Cy))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(nn))return d=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};if(a.match(qu))return{red:parseInt(""+
a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(ll))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d};if(d=Zs.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)};if(d=ru.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:1<parseFloat(""+
d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var k=Pn.exec(a);if(k){d=parseInt(""+k[1],10);var K=parseInt(""+k[2],10)/100;k=parseInt(""+k[3],10)/100;d="rgb("+ir(d,K,k)+")";K=Zs.exec(d);if(!K)throw new lo(4,a,d);return{red:parseInt(""+K[1],10),green:parseInt(""+K[2],10),blue:parseInt(""+K[3],10)}}if(d=Si.exec(a.substring(0,50))){K=parseInt(""+d[1],10);k=parseInt(""+d[2],10)/100;var da=parseInt(""+d[3],10)/100;K="rgb("+ir(K,k,da)+")";k=Zs.exec(K);if(!k)throw new lo(4,a,K);return{red:parseInt(""+
k[1],10),green:parseInt(""+k[2],10),blue:parseInt(""+k[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new lo(5);}function eo(a){a=a.toString(16);return 1===a.length?"0"+a:a}function yt(a,d,k){return Jr("#"+eo(Math.round(255*a))+eo(Math.round(255*d))+eo(Math.round(255*k)))}function Mu(a,d,k){if("number"===typeof a&&"number"===typeof d&&"number"===typeof k)return Jr("#"+eo(a)+eo(d)+eo(k));if("object"===typeof a&&void 0===d&&void 0===k)return Jr("#"+eo(a.red)+eo(a.green)+
eo(a.blue));throw new lo(6);}function Cw(a){if("object"!==typeof a)throw new lo(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?Mu(a.red,a.green,a.blue):"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new lo(7);return a}if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return Mu(a);if("number"===
typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?ir(a.hue,a.saturation,a.lightness,yt):"rgba("+ir(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new lo(2);return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=ir(a.hue,a.saturation,a.lightness,yt);else throw new lo(1);
return a}throw new lo(8);}function zt(a,d,k){return function(){var K=k.concat(Array.prototype.slice.call(arguments));return K.length>=d?a.apply(this,K):zt(a,d,K)}}function At(a,d){if("transparent"===d)return d;d=Bw(d);var k=d.red/255,K=d.green/255,da=d.blue/255,ja=Math.max(k,K,da),qa=Math.min(k,K,da),Ha=(ja+qa)/2;if(ja===qa)d=void 0!==d.alpha?{hue:0,saturation:0,lightness:Ha,alpha:d.alpha}:{hue:0,saturation:0,lightness:Ha};else{var Ra=ja-qa;qa=.5<Ha?Ra/(2-ja-qa):Ra/(ja+qa);switch(ja){case k:k=(K-
da)/Ra+(K<da?6:0);break;case K:k=(da-k)/Ra+2;break;default:k=(k-K)/Ra+4}k*=60;d=void 0!==d.alpha?{hue:k,saturation:qa,lightness:Ha,alpha:d.alpha}:{hue:k,saturation:qa,lightness:Ha}}Ha=Ge;a=d.lightness-parseFloat(a);return Cw(Ha({},d,{lightness:Math.max(0,Math.min(1,a))}))}function dn(a,d){var k;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let K=null!=(k=d.fill)?k:a.props.fill;void 0===K||Fi(K)||"var(--ls-secondary-background-color)"===
K||d.noFill||!NH.includes(a.props.type)||(a=wq(.3,K),d.stroke=a);return d}function Bt({strokeWidth:a,size:d,mode:k}){return"svg"===k?(0,Dy.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,d[1]-2*a),strokeWidth:4*a}):(0,Dy.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function ks(){const a=lg();return"panning"===a.inputs.state||
"pinching"===a.inputs.state}function Nu({left:a,middle:d,right:k,stroke:K,strokeWidth:da}){return(0,Fy.jsxs)("g",{children:[(0,Fy.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${k}`}),(0,Fy.jsx)("path",{d:`M ${a} L ${d} ${k}`,fill:"none",stroke:K,strokeWidth:da,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Ct(a,d,k){d=P(a,d,a,k).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(k=d[0])?be.rotWith(k,
a,Math.PI/6):a;a=k?be.rotWith(k,a,-Math.PI/6):a;return{left:d,right:a}}function Ou(a,d,k){const {left:K,right:da}=Ct(a,d,k);return`M ${K} L ${a} ${da}`}function Dw(a,d,k,K,da){a=a.strokeWidth;var ja=be.dist(d,k);a=Math.min(ja/3,16*a);ja=[];ja.push(`M ${d} L ${k}`);K&&ja.push(Ou(d,k,a));da&&ja.push(Ou(k,d,a));return ja.join(" ")}function Dt({id:a,bounds:d,labelSize:k,offset:K,scale:da=1}){return(0,oo.jsx)("defs",{children:(0,oo.jsxs)("mask",{id:a+"_clip",children:[(0,oo.jsx)("rect",{x:-100,y:-100,
width:d.width+200,height:d.height+200,fill:"white"}),(0,oo.jsx)("rect",{x:d.width/2-k[0]/2*da+((null==K?void 0:K[0])||0),y:d.height/2-k[1]/2*da+((null==K?void 0:K[1])||0),width:k[0]*da,height:k[1]*da,rx:4*da,ry:4*da,fill:"black"})]})})}function Et(a,d,k,K=da=>da){return a*K(.5-d*(.5-k))}function Ew(a){return[-a[0],-a[1]]}function en(a,d){return[a[0]+d[0],a[1]+d[1]]}function qm(a,d){return[a[0]-d[0],a[1]-d[1]]}function fn(a,d){return[a[0]*d,a[1]*d]}function jr(a){return[a[1],-a[0]]}function Fw(a,d){return a[0]===
d[0]&&a[1]===d[1]}function Pu(a){return a[0]*a[0]+a[1]*a[1]}function Qu(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function Gw(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function kr(a,d,k){let K=Math.sin(k);k=Math.cos(k);let da=a[0]-d[0];a=a[1]-d[1];return[da*k-a*K+d[0],da*K+a*k+d[1]]}function Ft(a,d,k){return en(a,fn(qm(d,a),k))}function Ru(a,d,k){return en(a,fn(d,k))}function Hw(a,d={}){let {size:k=16,smoothing:K=.5,thinning:da=.5,simulatePressure:ja=!0,easing:qa=Ad=>Ad,start:Ha={},end:Ra=
{},last:$a=!1}=d,{cap:fb=!0,easing:jb=Ad=>Ad*(2-Ad)}=Ha,{cap:Kb=!0,easing:Nb=Ad=>--Ad*Ad*Ad+1}=Ra;if(0===a.length||0>=k)return[];var Hb=a[a.length-1].runningLength;let fc=!1===Ha.taper?0:!0===Ha.taper?Math.max(k,Hb):Ha.taper,qc=!1===Ra.taper?0:!0===Ra.taper?Math.max(k,Hb):Ra.taper;var Wb=Math.pow(k*K,2);d=[];let kc=[];var hc=a.slice(0,10).reduce((Ad,id)=>{var Dd=id.pressure;ja&&(id=Uo(1,id.distance/k),Dd=Uo(1,1-id),Dd=Uo(1,Ad+.275*(Dd-Ad)*id));return(Ad+Dd)/2},a[0].pressure),Fc=Et(k,da,a[a.length-
1].pressure,qa),Mc;let ud=a[0].vector;var Jd=a[0].point;let Qe=Jd;var Zd=Jd;let Ee=Qe;var gf=!1;for(var Re=0;Re<a.length;Re++){var {pressure:cf}=a[Re];let {point:Ad,vector:id,distance:Dd,runningLength:De}=a[Re];if(Re<a.length-1&&3>Hb-De)continue;da?(ja&&(Fc=Uo(1,Dd/k),cf=Uo(1,1-Fc),cf=Uo(1,hc+.275*(cf-hc)*Fc)),Fc=Et(k,da,cf,qa)):Fc=k/2;void 0===Mc&&(Mc=Fc);var Gd=De<fc?jb(De/fc):1,nd=Hb-De<qc?Nb((Hb-De)/qc):1;Fc=Math.max(.01,Fc*Math.min(Gd,nd));nd=(Re<a.length-1?a[Re+1]:a[Re]).vector;let Ye=Re<a.length-
1?id[0]*nd[0]+id[1]*nd[1]:1;Gd=null!==Ye&&0>Ye;if(0>id[0]*ud[0]+id[1]*ud[1]&&!gf||Gd){Jd=fn(jr(ud),Fc);for(let Rf=1/13,eg=0;1>=eg;eg+=Rf)Zd=kr(qm(Ad,Jd),Ad,Am*eg),d.push(Zd),Ee=kr(en(Ad,Jd),Ad,Am*-eg),kc.push(Ee);Jd=Zd;Qe=Ee;Gd&&(gf=!0)}else(gf=!1,Re===a.length-1)?(cf=fn(jr(id),Fc),d.push(qm(Ad,cf)),kc.push(en(Ad,cf))):(hc=fn(jr(Ft(nd,id,Ye)),Fc),Zd=qm(Ad,hc),(1>=Re||Pu(qm(Jd,Zd))>Wb)&&(d.push(Zd),Jd=Zd),Ee=en(Ad,hc),(1>=Re||Pu(qm(Qe,Ee))>Wb)&&(kc.push(Ee),Qe=Ee),hc=cf,ud=id)}Hb=a[0].point.slice(0,
2);Wb=1<a.length?a[a.length-1].point.slice(0,2):en(a[0].point,[1,1]);Zd=[];gf=[];if(1===a.length){if(!fc&&!qc||$a){a=Ru(Hb,Qu(jr(qm(Hb,Wb))),-(Mc||Fc));d=[];for(let Ad=1/13,id=Ad;1>=id;id+=Ad)d.push(kr(a,Hb,2*Am*id));return d}}else{if(!(fc||qc&&1===a.length))if(fb)for(let Ad=1/13,id=Ad;1>=id;id+=Ad)Mc=kr(kc[0],Hb,Am*id),Zd.push(Mc);else Re=qm(d[0],kc[0]),Mc=fn(Re,.5),Re=fn(Re,.51),Zd.push(qm(Hb,Mc),qm(Hb,Re),en(Hb,Re),en(Hb,Mc));Mc=jr(Ew(a[a.length-1].vector));if(qc||fc&&1===a.length)gf.push(Wb);
else if(Kb){a=Ru(Wb,Mc,Fc);for(let Ad=1/29,id=Ad;1>id;id+=Ad)gf.push(kr(a,Wb,3*Am*id))}else gf.push(en(Wb,fn(Mc,Fc)),en(Wb,fn(Mc,.99*Fc)),qm(Wb,fn(Mc,.99*Fc)),qm(Wb,fn(Mc,Fc)))}return d.concat(gf,kc.reverse(),Zd)}function Iw(a,d={}){var k;let {streamline:K=.5,size:da=16,last:ja=!1}=d;if(0===a.length)return[];d=.15+.85*(1-K);a=Array.isArray(a[0])?a:a.map(({x:jb,y:Kb,pressure:Nb=.5})=>[jb,Kb,Nb]);if(2===a.length){var qa=a[1];a=a.slice(0,-1);for(var Ha=1;5>Ha;Ha++)a.push(Ft(a[0],qa,Ha/4))}1===a.length&&
(a=[...a,[...en(a[0],[1,1]),...a[0].slice(2)]]);qa=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ha=!1;let Ra=0,$a=qa[0],fb=a.length-1;for(let jb=1;jb<a.length;jb++){let Kb=ja&&jb===fb?a[jb].slice(0,2):Ft($a.point,a[jb],d);if(Fw($a.point,Kb))continue;let Nb=Gw(Kb,$a.point);if(Ra+=Nb,jb<fb&&!Ha){if(Ra<da)continue;Ha=!0}$a={point:Kb,pressure:0<=a[jb][2]?a[jb][2]:.5,vector:Qu(qm($a.point,Kb)),distance:Nb,runningLength:Ra};qa.push($a)}return qa[0].vector=
(null==(k=qa[1])?void 0:k.vector)||[0,0],qa}function Jw(a,d=4/3){return(new Sn(a)).exportAsSVG(d)}function Kw(a,d=4/3){return(new Sn(a)).generatePreviewJsx(void 0,d)}function Su({id:a,type:d,onRemove:k,showContent:K}){const da=lg(),{handlers:ja}=ly.default.useContext(ri),qa=ja.t;return(0,dj.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,dj.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,dj.jsx)(my,{id:a,showReferenceContent:K})}),
(0,dj.jsx)("div",{className:"flex-1"}),ja.getBlockPageName(a)!==da.currentPage.name&&(0,dj.jsx)(Xd,{tooltip:qa("whiteboard/open-page"),type:"button",onClick:()=>null==ja?void 0:ja.redirectToPage(a),children:(0,dj.jsx)(bh,{name:"open-as-page"})}),(0,dj.jsx)(Xd,{tooltip:qa("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==ja?void 0:ja.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,dj.jsx)(bh,{name:"move-to-sidebar-right"})}),k&&(0,dj.jsx)(Xd,{className:"tl-shape-links-panel-item-remove-button",
tooltip:qa("whiteboard/remove-link"),type:"button",onClick:k,children:(0,dj.jsx)(bh,{name:"x",className:"!translate-y-0"})})]})}function ha({options:a,value:d,onValueChange:k}){return(0,ro.jsx)(Py,{className:"tl-toggle-group-input",type:"single",value:d,onValueChange:k,children:a.map(K=>(0,ro.jsx)(ce,{content:K.tooltip,children:(0,ro.jsx)("div",{className:"inline-block",children:(0,ro.jsx)(qo,{className:"tl-toggle-group-input-button",value:K.value,disabled:K.value===d,children:(0,ro.jsx)(bh,{name:K.icon})})})},
K.value))})}function Aa({options:a,value:d,onValueChange:k}){return(0,ro.jsx)(Py,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:k,children:a.map(K=>(0,ro.jsx)(qo,{className:"tl-toggle-group-input-button",value:K.value,children:(0,ro.jsx)(bh,{name:K.icon})},K.value))})}function Za(a){return lg().selectedShapesArray.filter(d=>!d.props.isLocked).filter(d=>{var k;return null==(k=Qy[d.props.type])?void 0:k.includes(a)})}function Rb(a){return d=>"mouse"!==d.pointerType?a(d):void 0}
function tc(a){var d;a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";const k=a[0].toLowerCase();[a]=null!=(d=Object.entries(Wy).find(([,K])=>K.includes(k)))?d:["unknown",null];return a}function Kc(...a){return(...d)=>Mh(this,null,function*(){for(const k of a){const K=yield k(...d);if(K&&0<K.length)return K}return null})}function xd(a,d){return Mh(this,null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():null})}function Md(){const {handlers:a}=
Vy.useContext(ri);return Vy.useCallback((d,k)=>Mh(this,null,function*(){if(k.shiftKey&&1===d.selectedShapesArray.length){var K=yield navigator.clipboard.read();let da;0<K.length&&(K=(yield(yield K[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(K)&&40===K.length?(K=K.slice(2,-2),Aj(K)&&(da=K)):/^\[\[.*\]\]$/.test(K)&&(da=K.slice(2,-2)));if(da){d.selectedShapesArray[0].update({refs:[da]});d.persist();return}}nw(d,k,a)}),[])}function de(){const a=Md();return Ip.useCallback((d,k)=>Mh(this,
[d,k],function*(K,{dataTransfer:da,point:ja}){a(K,{point:ja,shiftKey:!1,dataTransfer:da,fromDrop:!0})}),[])}function Be(){const {handlers:a}=ow.useContext(ri);return ow.useCallback((d,{text:k,html:K})=>{a.copyToClipboard(k,K)},[])}function Xe(){return mD.default.useCallback(a=>Mh(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var Lf=Object.create,Wf=Object.defineProperty,ph=Object.defineProperties,Ih=Object.getOwnPropertyDescriptor,
Rk=Object.getOwnPropertyDescriptors,fo=Object.getOwnPropertyNames,Kl=Object.getOwnPropertySymbols,Uh=Object.getPrototypeOf,ek=Object.prototype.hasOwnProperty,dm=Object.prototype.propertyIsEnumerable,Ho=(a,d,k)=>d in a?Wf(a,d,{enumerable:!0,configurable:!0,writable:!0,value:k}):a[d]=k,Yd=(a,d)=>{for(var k in d||={})ek.call(d,k)&&Ho(a,k,d[k]);if(Kl)for(k of Kl(d))dm.call(d,k)&&Ho(a,k,d[k]);return a},hf=(a,d)=>ph(a,Rk(d)),zf=(a,d)=>{var k={},K;for(K in a)ek.call(a,K)&&0>d.indexOf(K)&&(k[K]=a[K]);if(null!=
a&&Kl)for(K of Kl(a))0>d.indexOf(K)&&dm.call(a,K)&&(k[K]=a[K]);return k},Tu=(a,d)=>function(){return d||(0,a[fo(a)[0]])((d={exports:{}}).exports,d),d.exports},hz=(a,d,k,K)=>{if(d&&"object"===typeof d||"function"===typeof d)for(let da of fo(d))ek.call(a,da)||da===k||Wf(a,da,{get:()=>d[da],enumerable:!(K=Ih(d,da))||K.enumerable});return a},Jf=(a,d,k)=>(k=null!=a?Lf(Uh(a)):{},hz(!d&&a&&a.__esModule?k:Wf(k,"default",{value:a,enumerable:!0}),a)),fe=(a,d,k,K)=>{for(var da=1<K?void 0:K?Ih(d,k):d,ja=a.length-
1,qa;0<=ja;ja--)if(qa=a[ja])da=(K?qa(d,k,da):qa(da))||da;K&&da&&Wf(d,k,da);return da},gb=(a,d,k)=>{Ho(a,"symbol"!==typeof d?d+"":d,k);return k},Mh=(a,d,k)=>new Promise((K,da)=>{var ja=Ra=>{try{Ha(k.next(Ra))}catch($a){da($a)}},qa=Ra=>{try{Ha(k.throw(Ra))}catch($a){da($a)}},Ha=Ra=>Ra.done?K(Ra.value):Promise.resolve(Ra.value).then(ja,qa);Ha((k=k.apply(a,d)).next())}),LD=Tu({["../../node_modules/rbush/rbush.min.js"](a,d){!function(k,K){"object"==typeof a&&"undefined"!=typeof d?d.exports=K():"function"==
typeof define&&define.amd?define(K):(k=k||self).RBush=K()}(a,function(){function k(Wb,kc,hc,Fc,Mc){!function Re(Jd,Qe,Zd,Ee,gf){for(;Ee>Zd;){if(600<Ee-Zd){var cf=Ee-Zd+1,Gd=Qe-Zd+1,nd=Math.log(cf),Ad=.5*Math.exp(2*nd/3);nd=.5*Math.sqrt(nd*Ad*(cf-Ad)/cf)*(0>Gd-cf/2?-1:1);Re(Jd,Qe,Math.max(Zd,Math.floor(Qe-Gd*Ad/cf+nd)),Math.min(Ee,Math.floor(Qe+(cf-Gd)*Ad/cf+nd)),gf)}cf=Jd[Qe];Gd=Zd;Ad=Ee;K(Jd,Zd,Qe);for(0<gf(Jd[Ee],cf)&&K(Jd,Zd,Ee);Gd<Ad;){K(Jd,Gd,Ad);Gd++;for(Ad--;0>gf(Jd[Gd],cf);)Gd++;for(;0<gf(Jd[Ad],
cf);)Ad--}0===gf(Jd[Zd],cf)?K(Jd,Zd,Ad):K(Jd,++Ad,Ee);Ad<=Qe&&(Zd=Ad+1);Qe<=Ad&&(Ee=Ad-1)}}(Wb,kc,hc||0,Fc||Wb.length-1,Mc||da)}function K(Wb,kc,hc){var Fc=Wb[kc];Wb[kc]=Wb[hc];Wb[hc]=Fc}function da(Wb,kc){return Wb<kc?-1:Wb>kc?1:0}function ja(Wb,kc){qa(Wb,0,Wb.children.length,kc,Wb)}function qa(Wb,kc,hc,Fc,Mc){Mc||=Hb(null);Mc.minX=1/0;Mc.minY=1/0;Mc.maxX=-1/0;for(Mc.maxY=-1/0;kc<hc;kc++){var ud=Wb.children[kc];Ha(Mc,Wb.leaf?Fc(ud):ud)}return Mc}function Ha(Wb,kc){return Wb.minX=Math.min(Wb.minX,
kc.minX),Wb.minY=Math.min(Wb.minY,kc.minY),Wb.maxX=Math.max(Wb.maxX,kc.maxX),Wb.maxY=Math.max(Wb.maxY,kc.maxY),Wb}function Ra(Wb,kc){return Wb.minX-kc.minX}function $a(Wb,kc){return Wb.minY-kc.minY}function fb(Wb){return(Wb.maxX-Wb.minX)*(Wb.maxY-Wb.minY)}function jb(Wb){return Wb.maxX-Wb.minX+(Wb.maxY-Wb.minY)}function Kb(Wb,kc){return Wb.minX<=kc.minX&&Wb.minY<=kc.minY&&kc.maxX<=Wb.maxX&&kc.maxY<=Wb.maxY}function Nb(Wb,kc){return kc.minX<=Wb.maxX&&kc.minY<=Wb.maxY&&kc.maxX>=Wb.minX&&kc.maxY>=Wb.minY}
function Hb(Wb){return{children:Wb,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function fc(Wb,kc,hc,Fc,Mc){for(var ud=[kc,hc];ud.length;)if(!((hc=ud.pop())-(kc=ud.pop())<=Fc)){var Jd=kc+Math.ceil((hc-kc)/Fc/2)*Fc;k(Wb,Jd,kc,hc,Mc);ud.push(kc,Jd,Jd,hc)}}var qc=function(Wb){void 0===Wb&&(Wb=9);this._maxEntries=Math.max(4,Wb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return qc.prototype.all=function(){return this._all(this.data,[])},qc.prototype.search=function(Wb){var kc=
this.data,hc=[];if(!Nb(Wb,kc))return hc;for(var Fc=this.toBBox,Mc=[];kc;){for(var ud=0;ud<kc.children.length;ud++){var Jd=kc.children[ud],Qe=kc.leaf?Fc(Jd):Jd;Nb(Wb,Qe)&&(kc.leaf?hc.push(Jd):Kb(Wb,Qe)?this._all(Jd,hc):Mc.push(Jd))}kc=Mc.pop()}return hc},qc.prototype.collides=function(Wb){var kc=this.data;if(!Nb(Wb,kc))return!1;for(var hc=[];kc;){for(var Fc=0;Fc<kc.children.length;Fc++){var Mc=kc.children[Fc],ud=kc.leaf?this.toBBox(Mc):Mc;if(Nb(Wb,ud)){if(kc.leaf||Kb(Wb,ud))return!0;hc.push(Mc)}}kc=
hc.pop()}return!1},qc.prototype.load=function(Wb){if(!Wb||!Wb.length)return this;if(Wb.length<this._minEntries){for(var kc=0;kc<Wb.length;kc++)this.insert(Wb[kc]);return this}Wb=this._build(Wb.slice(),0,Wb.length-1,0);this.data.children.length?this.data.height===Wb.height?this._splitRoot(this.data,Wb):(this.data.height<Wb.height&&(kc=this.data,this.data=Wb,Wb=kc),this._insert(Wb,this.data.height-Wb.height-1,!0)):this.data=Wb;return this},qc.prototype.insert=function(Wb){return Wb&&this._insert(Wb,
this.data.height-1),this},qc.prototype.clear=function(){return this.data=Hb([]),this},qc.prototype.remove=function(Wb,kc){if(!Wb)return this;for(var hc,Fc,Mc,ud=this.data,Jd=this.toBBox(Wb),Qe=[],Zd=[];ud||Qe.length;){if(ud||(ud=Qe.pop(),Fc=Qe[Qe.length-1],hc=Zd.pop(),Mc=!0),ud.leaf){a:{var Ee=Wb;var gf=ud.children,Re=kc;if(Re){for(var cf=0;cf<gf.length;cf++)if(Re(Ee,gf[cf])){Ee=cf;break a}Ee=-1}else Ee=gf.indexOf(Ee)}if(-1!==Ee)return ud.children.splice(Ee,1),Qe.push(ud),this._condense(Qe),this}Mc||
ud.leaf||!Kb(ud,Jd)?Fc?(hc++,ud=Fc.children[hc],Mc=!1):ud=null:(Qe.push(ud),Zd.push(hc),hc=0,Fc=ud,ud=ud.children[0])}return this},qc.prototype.toBBox=function(Wb){return Wb},qc.prototype.compareMinX=function(Wb,kc){return Wb.minX-kc.minX},qc.prototype.compareMinY=function(Wb,kc){return Wb.minY-kc.minY},qc.prototype.toJSON=function(){return this.data},qc.prototype.fromJSON=function(Wb){return this.data=Wb,this},qc.prototype._all=function(Wb,kc){for(var hc=[];Wb;)Wb.leaf?kc.push.apply(kc,Wb.children):
hc.push.apply(hc,Wb.children),Wb=hc.pop();return kc},qc.prototype._build=function(Wb,kc,hc,Fc){var Mc,ud=hc-kc+1,Jd=this._maxEntries;if(ud<=Jd)return ja(Mc=Hb(Wb.slice(kc,hc+1)),this.toBBox),Mc;Fc||(Fc=Math.ceil(Math.log(ud)/Math.log(Jd)),Jd=Math.ceil(ud/Math.pow(Jd,Fc-1)));(Mc=Hb([])).leaf=!1;Mc.height=Fc;ud=Math.ceil(ud/Jd);Jd=ud*Math.ceil(Math.sqrt(Jd));for(fc(Wb,kc,hc,Jd,this.compareMinX);kc<=hc;kc+=Jd){var Qe=Math.min(kc+Jd-1,hc);fc(Wb,kc,Qe,ud,this.compareMinY);for(var Zd=kc;Zd<=Qe;Zd+=ud)Mc.children.push(this._build(Wb,
Zd,Math.min(Zd+ud-1,Qe),Fc-1))}return ja(Mc,this.toBBox),Mc},qc.prototype._chooseSubtree=function(Wb,kc,hc,Fc){for(;Fc.push(kc),!kc.leaf&&Fc.length-1!==hc;){for(var Mc=1/0,ud=1/0,Jd=void 0,Qe=0;Qe<kc.children.length;Qe++){var Zd=kc.children[Qe],Ee=fb(Zd),gf=(Re=Wb,cf=Zd,(Math.max(cf.maxX,Re.maxX)-Math.min(cf.minX,Re.minX))*(Math.max(cf.maxY,Re.maxY)-Math.min(cf.minY,Re.minY))-Ee);gf<ud?(ud=gf,Mc=Ee<Mc?Ee:Mc,Jd=Zd):gf===ud&&Ee<Mc&&(Mc=Ee,Jd=Zd)}kc=Jd||kc.children[0]}var Re,cf;return kc},qc.prototype._insert=
function(Wb,kc,hc){hc=hc?Wb:this.toBBox(Wb);var Fc=[],Mc=this._chooseSubtree(hc,this.data,kc,Fc);Mc.children.push(Wb);for(Ha(Mc,hc);0<=kc&&Fc[kc].children.length>this._maxEntries;)this._split(Fc,kc),kc--;this._adjustParentBBoxes(hc,Fc,kc)},qc.prototype._split=function(Wb,kc){var hc=Wb[kc],Fc=hc.children.length,Mc=this._minEntries;this._chooseSplitAxis(hc,Mc,Fc);Fc=this._chooseSplitIndex(hc,Mc,Fc);Fc=Hb(hc.children.splice(Fc,hc.children.length-Fc));Fc.height=hc.height;Fc.leaf=hc.leaf;ja(hc,this.toBBox);
ja(Fc,this.toBBox);kc?Wb[kc-1].children.push(Fc):this._splitRoot(hc,Fc)},qc.prototype._splitRoot=function(Wb,kc){this.data=Hb([Wb,kc]);this.data.height=Wb.height+1;this.data.leaf=!1;ja(this.data,this.toBBox)},qc.prototype._chooseSplitIndex=function(Wb,kc,hc){for(var Fc,Mc,ud,Jd,Qe,Zd,Ee,gf=1/0,Re=1/0,cf=kc;cf<=hc-kc;cf++){var Gd=qa(Wb,0,cf,this.toBBox),nd=qa(Wb,cf,hc,this.toBBox),Ad=(Mc=Gd,ud=nd,Jd=void 0,Qe=void 0,Zd=void 0,Ee=void 0,Jd=Math.max(Mc.minX,ud.minX),Qe=Math.max(Mc.minY,ud.minY),Zd=Math.min(Mc.maxX,
ud.maxX),Ee=Math.min(Mc.maxY,ud.maxY),Math.max(0,Zd-Jd)*Math.max(0,Ee-Qe));Gd=fb(Gd)+fb(nd);Ad<gf?(gf=Ad,Fc=cf,Re=Gd<Re?Gd:Re):Ad===gf&&Gd<Re&&(Re=Gd,Fc=cf)}return Fc||hc-kc},qc.prototype._chooseSplitAxis=function(Wb,kc,hc){var Fc=Wb.leaf?this.compareMinX:Ra,Mc=Wb.leaf?this.compareMinY:$a;this._allDistMargin(Wb,kc,hc,Fc)<this._allDistMargin(Wb,kc,hc,Mc)&&Wb.children.sort(Fc)},qc.prototype._allDistMargin=function(Wb,kc,hc,Fc){Wb.children.sort(Fc);Fc=this.toBBox;for(var Mc=qa(Wb,0,kc,Fc),ud=qa(Wb,hc-
kc,hc,Fc),Jd=jb(Mc)+jb(ud),Qe=kc;Qe<hc-kc;Qe++){var Zd=Wb.children[Qe];Ha(Mc,Wb.leaf?Fc(Zd):Zd);Jd+=jb(Mc)}for(hc=hc-kc-1;hc>=kc;hc--)Mc=Wb.children[hc],Ha(ud,Wb.leaf?Fc(Mc):Mc),Jd+=jb(ud);return Jd},qc.prototype._adjustParentBBoxes=function(Wb,kc,hc){for(;0<=hc;hc--)Ha(kc[hc],Wb)},qc.prototype._condense=function(Wb){for(var kc=Wb.length-1,hc=void 0;0<=kc;kc--)0===Wb[kc].children.length?0<kc?(hc=Wb[kc-1].children).splice(hc.indexOf(Wb[kc]),1):this.clear():ja(Wb[kc],this.toBBox)},qc})}}),MD=Tu({["../../node_modules/fast-deep-equal/index.js"](a,
d){d.exports=function ja(K,da){if(K===da)return!0;if(K&&da&&"object"==typeof K&&"object"==typeof da){if(K.constructor!==da.constructor)return!1;var qa;if(Array.isArray(K)){var Ha=K.length;if(Ha!=da.length)return!1;for(qa=Ha;0!==qa--;)if(!ja(K[qa],da[qa]))return!1;return!0}if(K.constructor===RegExp)return K.source===da.source&&K.flags===da.flags;if(K.valueOf!==Object.prototype.valueOf)return K.valueOf()===da.valueOf();if(K.toString!==Object.prototype.toString)return K.toString()===da.toString();var Ra=
Object.keys(K);Ha=Ra.length;if(Ha!==Object.keys(da).length)return!1;for(qa=Ha;0!==qa--;)if(!Object.prototype.hasOwnProperty.call(da,Ra[qa]))return!1;for(qa=Ha;0!==qa--;)if(Ha=Ra[qa],!ja(K[Ha],da[Ha]))return!1;return!0}return K!==K&&da!==da}}}),ND=Tu({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function k(jb,Kb){return!1!==Kb.clone&&Kb.isMergeableObject(jb)?Ra(Array.isArray(jb)?[]:{},jb,Kb):jb}function K(jb,Kb,Nb){return jb.concat(Kb).map(function(Hb){return k(Hb,Nb)})}function da(jb){return Object.getOwnPropertySymbols?
Object.getOwnPropertySymbols(jb).filter(function(Kb){return Object.propertyIsEnumerable.call(jb,Kb)}):[]}function ja(jb){return Object.keys(jb).concat(da(jb))}function qa(jb,Kb){try{return Kb in jb}catch(Nb){return!1}}function Ha(jb,Kb,Nb){var Hb={};Nb.isMergeableObject(jb)&&ja(jb).forEach(function(fc){Hb[fc]=k(jb[fc],Nb)});ja(Kb).forEach(function(fc){if(!qa(jb,fc)||Object.hasOwnProperty.call(jb,fc)&&Object.propertyIsEnumerable.call(jb,fc))if(qa(jb,fc)&&Nb.isMergeableObject(Kb[fc])){if(Nb.customMerge){var qc=
Nb.customMerge(fc);qc="function"===typeof qc?qc:Ra}else qc=Ra;Hb[fc]=qc(jb[fc],Kb[fc],Nb)}else Hb[fc]=k(Kb[fc],Nb)});return Hb}function Ra(jb,Kb,Nb){Nb=Nb||{};Nb.arrayMerge=Nb.arrayMerge||K;Nb.isMergeableObject=Nb.isMergeableObject||$a;Nb.cloneUnlessOtherwiseSpecified=k;var Hb=Array.isArray(Kb),fc=Array.isArray(jb);return Hb!==fc?k(Kb,Nb):Hb?Nb.arrayMerge(jb,Kb,Nb):Ha(jb,Kb,Nb)}var $a=function(jb){var Kb;if(Kb=!!jb&&"object"===typeof jb)Kb=Object.prototype.toString.call(jb),Kb=!("[object RegExp]"===
Kb||"[object Date]"===Kb||jb.$$typeof===fb);return Kb},fb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Ra.all=function(jb,Kb){if(!Array.isArray(jb))throw Error("first argument should be an array");return jb.reduce(function(Nb,Hb){return Ra(Nb,Hb,Kb)},{})};d.exports=Ra}}),OD=Tu({["../../node_modules/tslib/tslib.js"](a,d){var k,K,da,ja,qa,Ha,Ra,$a,fb,jb,Kb,Nb,Hb,fc,qc,Wb,kc,hc,Fc,Mc,ud,Jd,Qe,Zd,Ee;(function(gf){function Re(Gd,nd){Gd!==cf&&("function"===typeof Object.create?
Object.defineProperty(Gd,"__esModule",{value:!0}):Gd.__esModule=!0);return function(Ad,id){return Gd[Ad]=nd?nd(Ad,id):id}}var cf="object"===typeof ya?ya:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Gd){gf(Re(cf,Re(Gd)))}):"object"===typeof d&&"object"===typeof d.exports?gf(Re(cf,Re(d.exports))):gf(Re(cf))})(function(gf){var Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Gd,nd){Gd.__proto__=
nd}||function(Gd,nd){for(var Ad in nd)Object.prototype.hasOwnProperty.call(nd,Ad)&&(Gd[Ad]=nd[Ad])};k=function(Gd,nd){function Ad(){this.constructor=Gd}if("function"!==typeof nd&&null!==nd)throw new TypeError("Class extends value "+String(nd)+" is not a constructor or null");Re(Gd,nd);Gd.prototype=null===nd?Object.create(nd):(Ad.prototype=nd.prototype,new Ad)};K=Object.assign||function(Gd){for(var nd,Ad=1,id=arguments.length;Ad<id;Ad++){nd=arguments[Ad];for(var Dd in nd)Object.prototype.hasOwnProperty.call(nd,
Dd)&&(Gd[Dd]=nd[Dd])}return Gd};da=function(Gd,nd){var Ad={},id;for(id in Gd)Object.prototype.hasOwnProperty.call(Gd,id)&&0>nd.indexOf(id)&&(Ad[id]=Gd[id]);if(null!=Gd&&"function"===typeof Object.getOwnPropertySymbols){var Dd=0;for(id=Object.getOwnPropertySymbols(Gd);Dd<id.length;Dd++)0>nd.indexOf(id[Dd])&&Object.prototype.propertyIsEnumerable.call(Gd,id[Dd])&&(Ad[id[Dd]]=Gd[id[Dd]])}return Ad};ja=function(Gd,nd,Ad,id){var Dd=arguments.length,De=3>Dd?nd:null===id?id=Object.getOwnPropertyDescriptor(nd,
Ad):id,Ye;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)De=Reflect.decorate(Gd,nd,Ad,id);else for(var Rf=Gd.length-1;0<=Rf;Rf--)if(Ye=Gd[Rf])De=(3>Dd?Ye(De):3<Dd?Ye(nd,Ad,De):Ye(nd,Ad))||De;return 3<Dd&&De&&Object.defineProperty(nd,Ad,De),De};qa=function(Gd,nd){return function(Ad,id){nd(Ad,id,Gd)}};Ha=function(Gd,nd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Gd,nd)};Ra=function(Gd,nd,Ad,id){function Dd(De){return De instanceof Ad?
De:new Ad(function(Ye){Ye(De)})}return new (Ad||=Promise)(function(De,Ye){function Rf(Ag){try{df(id.next(Ag))}catch(Bf){Ye(Bf)}}function eg(Ag){try{df(id["throw"](Ag))}catch(Bf){Ye(Bf)}}function df(Ag){Ag.done?De(Ag.value):Dd(Ag.value).then(Rf,eg)}df((id=id.apply(Gd,nd||[])).next())})};$a=function(Gd,nd){function Ad(df){return function(Ag){return id([df,Ag])}}function id(df){if(De)throw new TypeError("Generator is already executing.");for(;Dd;)try{if(De=1,Ye&&(Rf=df[0]&2?Ye["return"]:df[0]?Ye["throw"]||
((Rf=Ye["return"])&&Rf.call(Ye),0):Ye.next)&&!(Rf=Rf.call(Ye,df[1])).done)return Rf;if(Ye=0,Rf)df=[df[0]&2,Rf.value];switch(df[0]){case 0:case 1:Rf=df;break;case 4:return Dd.label++,{value:df[1],done:!1};case 5:Dd.label++;Ye=df[1];df=[0];continue;case 7:df=Dd.ops.pop();Dd.trys.pop();continue;default:if(!(Rf=Dd.trys,Rf=0<Rf.length&&Rf[Rf.length-1])&&(6===df[0]||2===df[0])){Dd=0;continue}if(3===df[0]&&(!Rf||df[1]>Rf[0]&&df[1]<Rf[3]))Dd.label=df[1];else if(6===df[0]&&Dd.label<Rf[1])Dd.label=Rf[1],Rf=
df;else if(Rf&&Dd.label<Rf[2])Dd.label=Rf[2],Dd.ops.push(df);else{Rf[2]&&Dd.ops.pop();Dd.trys.pop();continue}}df=nd.call(Gd,Dd)}catch(Ag){df=[6,Ag],Ye=0}finally{De=Rf=0}if(df[0]&5)throw df[1];return{value:df[0]?df[1]:void 0,done:!0}}var Dd={label:0,sent:function(){if(Rf[0]&1)throw Rf[1];return Rf[1]},trys:[],ops:[]},De,Ye,Rf,eg;return eg={next:Ad(0),"throw":Ad(1),"return":Ad(2)},"function"===typeof Symbol&&(eg[Symbol.iterator]=function(){return this}),eg};fb=function(Gd,nd){for(var Ad in Gd)"default"===
Ad||Object.prototype.hasOwnProperty.call(nd,Ad)||Ee(nd,Gd,Ad)};Ee=Object.create?function(Gd,nd,Ad,id){void 0===id&&(id=Ad);var Dd=Object.getOwnPropertyDescriptor(nd,Ad);if(!Dd||("get"in Dd?!nd.__esModule:Dd.writable||Dd.configurable))Dd={enumerable:!0,get:function(){return nd[Ad]}};Object.defineProperty(Gd,id,Dd)}:function(Gd,nd,Ad,id){void 0===id&&(id=Ad);Gd[id]=nd[Ad]};jb=function(Gd){var nd="function"===typeof Symbol&&Symbol.iterator,Ad=nd&&Gd[nd],id=0;if(Ad)return Ad.call(Gd);if(Gd&&"number"===
typeof Gd.length)return{next:function(){Gd&&id>=Gd.length&&(Gd=void 0);return{value:Gd&&Gd[id++],done:!Gd}}};throw new TypeError(nd?"Object is not iterable.":"Symbol.iterator is not defined.");};Kb=function(Gd,nd){var Ad="function"===typeof Symbol&&Gd[Symbol.iterator];if(!Ad)return Gd;Gd=Ad.call(Gd);var id,Dd=[];try{for(;(void 0===nd||0<nd--)&&!(id=Gd.next()).done;)Dd.push(id.value)}catch(Ye){var De={error:Ye}}finally{try{id&&!id.done&&(Ad=Gd["return"])&&Ad.call(Gd)}finally{if(De)throw De.error;}}return Dd};
Nb=function(){for(var Gd=[],nd=0;nd<arguments.length;nd++)Gd=Gd.concat(Kb(arguments[nd]));return Gd};Hb=function(){for(var Gd=0,nd=0,Ad=arguments.length;nd<Ad;nd++)Gd+=arguments[nd].length;Gd=Array(Gd);var id=0;for(nd=0;nd<Ad;nd++)for(var Dd=arguments[nd],De=0,Ye=Dd.length;De<Ye;De++,id++)Gd[id]=Dd[De];return Gd};fc=function(Gd,nd,Ad){if(Ad||2===arguments.length)for(var id=0,Dd=nd.length,De;id<Dd;id++)!De&&id in nd||(De||=Array.prototype.slice.call(nd,0,id),De[id]=nd[id]);return Gd.concat(De||Array.prototype.slice.call(nd))};
qc=function(Gd){return this instanceof qc?(this.v=Gd,this):new qc(Gd)};Wb=function(Gd,nd,Ad){function id(Bf){eg[Bf]&&(df[Bf]=function(Og){return new Promise(function(Yg,Bi){1<Ag.push([Bf,Og,Yg,Bi])||Dd(Bf,Og)})})}function Dd(Bf,Og){try{var Yg=eg[Bf](Og);Yg.value instanceof qc?Promise.resolve(Yg.value.v).then(De,Ye):Rf(Ag[0][2],Yg)}catch(Bi){Rf(Ag[0][3],Bi)}}function De(Bf){Dd("next",Bf)}function Ye(Bf){Dd("throw",Bf)}function Rf(Bf,Og){(Bf(Og),Ag.shift(),Ag.length)&&Dd(Ag[0][0],Ag[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var eg=Ad.apply(Gd,nd||[]),df,Ag=[];return df={},id("next"),id("throw"),id("return"),df[Symbol.asyncIterator]=function(){return this},df};kc=function(Gd){function nd(Dd,De){Ad[Dd]=Gd[Dd]?function(Ye){return(id=!id)?{value:qc(Gd[Dd](Ye)),done:"return"===Dd}:De?De(Ye):Ye}:De}var Ad,id;return Ad={},nd("next"),nd("throw",function(Dd){throw Dd;}),nd("return"),Ad[Symbol.iterator]=function(){return this},Ad};hc=function(Gd){function nd(De){Dd[De]=Gd[De]&&function(Ye){return new Promise(function(Rf,eg){Ye=
Gd[De](Ye);Ad(Rf,eg,Ye.done,Ye.value)})}}function Ad(De,Ye,Rf,eg){Promise.resolve(eg).then(function(df){De({value:df,done:Rf})},Ye)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var id=Gd[Symbol.asyncIterator],Dd;return id?id.call(Gd):(Gd="function"===typeof jb?jb(Gd):Gd[Symbol.iterator](),Dd={},nd("next"),nd("throw"),nd("return"),Dd[Symbol.asyncIterator]=function(){return this},Dd)};Fc=function(Gd,nd){Object.defineProperty?Object.defineProperty(Gd,"raw",{value:nd}):
Gd.raw=nd;return Gd};var cf=Object.create?function(Gd,nd){Object.defineProperty(Gd,"default",{enumerable:!0,value:nd})}:function(Gd,nd){Gd["default"]=nd};Mc=function(Gd){if(Gd&&Gd.__esModule)return Gd;var nd={};if(null!=Gd)for(var Ad in Gd)"default"!==Ad&&Object.prototype.hasOwnProperty.call(Gd,Ad)&&Ee(nd,Gd,Ad);cf(nd,Gd);return nd};ud=function(Gd){return Gd&&Gd.__esModule?Gd:{"default":Gd}};Jd=function(Gd,nd,Ad,id){if("a"===Ad&&!id)throw new TypeError("Private accessor was defined without a getter");
if("function"===typeof nd?Gd!==nd||!id:!nd.has(Gd))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===Ad?id:"a"===Ad?id.call(Gd):id?id.value:nd.get(Gd)};Qe=function(Gd,nd,Ad,id,Dd){if("m"===id)throw new TypeError("Private method is not writable");if("a"===id&&!Dd)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof nd?Gd!==nd||!Dd:!nd.has(Gd))throw new TypeError("Cannot write private member to an object whose class did not declare it");
return"a"===id?Dd.call(Gd,Ad):Dd?Dd.value=Ad:nd.set(Gd,Ad),Ad};Zd=function(Gd,nd){if(null===nd||"object"!==typeof nd&&"function"!==typeof nd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Gd?nd===Gd:Gd.has(nd)};gf("__extends",k);gf("__assign",K);gf("__rest",da);gf("__decorate",ja);gf("__param",qa);gf("__metadata",Ha);gf("__awaiter",Ra);gf("__generator",$a);gf("__exportStar",fb);gf("__createBinding",Ee);gf("__values",jb);gf("__read",Kb);gf("__spread",Nb);gf("__spreadArrays",
Hb);gf("__spreadArray",fc);gf("__await",qc);gf("__asyncGenerator",Wb);gf("__asyncDelegator",kc);gf("__asyncValues",hc);gf("__makeTemplateObject",Fc);gf("__importStar",Mc);gf("__importDefault",ud);gf("__classPrivateFieldGet",Jd);gf("__classPrivateFieldSet",Qe);gf("__classPrivateFieldIn",Zd)})}}),iz={};((a,d)=>{for(var k in d)Wf(a,k,{get:d[k],enumerable:!0})})(iz,{App:()=>rD,PreviewManager:()=>Sn,generateJSXFromModel:()=>Kw,generateSVGFromModel:()=>Jw});Sa.exports=(a=>hz(Wf({},"__esModule",{value:!0}),
a))(iz);var Lw=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";a.Gray="gray";a.Default="";return a})(Lw||{}),ls=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(ls||{}),Uu,PD=new Uint8Array(16),QD=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ll=[];for(let a=0;256>a;++a)Ll.push((a+256).toString(16).slice(1));var jz,Mw,Nw=0,Ow=0,tk=function(a,d,k){k=d&&k||0;const K=
d||Array(16);a=a||{};let da=a.node||jz;var ja=void 0!==a.clockseq?a.clockseq:Mw;if(null==da||null==ja){var qa=a.random||(a.rng||w)();null==da&&(da=jz=[qa[0]|1,qa[1],qa[2],qa[3],qa[4],qa[5]]);null==ja&&(ja=Mw=(qa[6]<<8|qa[7])&16383)}qa=void 0!==a.msecs?a.msecs:Date.now();let Ha=void 0!==a.nsecs?a.nsecs:Ow+1;const Ra=qa-Nw+(Ha-Ow)/1E4;0>Ra&&void 0===a.clockseq&&(ja=ja+1&16383);(0>Ra||qa>Nw)&&void 0===a.nsecs&&(Ha=0);if(1E4<=Ha)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Nw=qa;Ow=
Ha;Mw=ja;qa+=122192928E5;a=(1E4*(qa&268435455)+Ha)%4294967296;K[k++]=a>>>24&255;K[k++]=a>>>16&255;K[k++]=a>>>8&255;K[k++]=a&255;a=qa/4294967296*1E4&268435455;K[k++]=a>>>8&255;K[k++]=a&255;K[k++]=a>>>24&15|16;K[k++]=a>>>16&255;K[k++]=ja>>>8|128;K[k++]=ja&255;for(ja=0;6>ja;++ja)K[k+ja]=da[ja];return d||Y(K)},mh=class{static clamp(a,d,k){return Math.max(d,"undefined"!==typeof k?Math.min(a,k):a)}static clampV(a,d,k){return a.map(K=>k?mh.clamp(K,d,k):mh.clamp(K,d))}static cross(a,d,k){return(d[0]-a[0])*
(k[1]-a[1])-(k[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},yd=mh;yd.neg=a=>[-a[0],-a[1]];yd.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];yd.addScalar=(a,d)=>[a[0]+d,a[1]+d];yd.sub=(a,d)=>[a[0]-d[0],a[1]-d[1]];yd.subScalar=(a,d)=>[a[0]-d,a[1]-d];yd.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];yd.mul=(a,d)=>[a[0]*d,a[1]*d];yd.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];yd.div=(a,d)=>[a[0]/d,a[1]/d];yd.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];yd.per=a=>[a[1],-a[0]];yd.dpr=(a,d)=>a[0]*d[0]+a[1]*
d[1];yd.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];yd.len2=a=>a[0]*a[0]+a[1]*a[1];yd.len=a=>Math.hypot(a[0],a[1]);yd.pry=(a,d)=>mh.dpr(a,d)/mh.len(d);yd.uni=a=>mh.div(a,mh.len(a));yd.normalize=a=>mh.uni(a);yd.tangent=(a,d)=>mh.uni(mh.sub(a,d));yd.dist2=(a,d)=>mh.len2(mh.sub(a,d));yd.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);yd.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let k=1/Math.max(d[0],d[1]);k*=1.29289-(d[0]+d[1])*k*.29289;return[a[0]*k,a[1]*k]};yd.ang=(a,d)=>Math.atan2(mh.cpr(a,
d),mh.dpr(a,d));yd.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);yd.med=(a,d)=>mh.mul(mh.add(a,d),.5);yd.rot=(a,d=0)=>[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];yd.rotWith=(a,d,k=0)=>{if(0===k)return a;const K=Math.sin(k);k=Math.cos(k);const da=a[0]-d[0];a=a[1]-d[1];return[da*k-a*K+d[0],da*K+a*k+d[1]]};yd.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];yd.lrp=(a,d,k)=>mh.add(a,mh.mul(mh.sub(d,a),k));yd.int=(a,d,k,K,da=1)=>{k=(mh.clamp(k,K)-k)/(K-k);return mh.add(mh.mul(a,1-k),mh.mul(d,
da))};yd.ang3=(a,d,k)=>{a=mh.vec(d,a);d=mh.vec(d,k);return mh.ang(a,d)};yd.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];yd.rescale=(a,d)=>{const k=mh.len(a);return[d*a[0]/k,d*a[1]/k]};yd.isLeft=(a,d,k)=>(d[0]-a[0])*(k[1]-a[1])-(k[0]-a[0])*(d[1]-a[1]);yd.clockwise=(a,d,k)=>0<mh.isLeft(a,d,k);yd.toFixed=a=>a.map(d=>Math.round(100*d)/100);yd.nearestPointOnLineThroughPoint=(a,d,k)=>mh.add(a,mh.mul(d,mh.pry(mh.sub(k,a),d)));yd.distanceToLineThroughPoint=(a,d,k)=>mh.dist(k,mh.nearestPointOnLineThroughPoint(a,
d,k));yd.nearestPointOnLineSegment=(a,d,k,K=!0)=>{const da=mh.uni(mh.sub(d,a));k=mh.add(a,mh.mul(da,mh.pry(mh.sub(k,a),da)));if(K){if(k[0]<Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(k[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(k[1]<Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(k[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return k};yd.distanceToLineSegment=(a,d,k,K=!0)=>mh.dist(k,mh.nearestPointOnLineSegment(a,d,k,K));yd.nudge=(a,d,k)=>mh.isEqual(a,d)?a:mh.add(a,mh.mul(mh.uni(mh.sub(d,a)),k));
yd.nudgeAtAngle=(a,d,k)=>[Math.cos(d)*k+a[0],Math.sin(d)*k+a[1]];yd.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];yd.pointsBetween=(a,d,k=6)=>Array.from(Array(k)).map((K,da)=>{K=da/(k-1);da=Math.min(1,.5+Math.abs(.5-K));return[...mh.lrp(a,d,K),da]});yd.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);yd.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};yd.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];yd.min=(...a)=>[Math.min(...a.map(d=>d[0])),
Math.min(...a.map(d=>d[1]))];var be=yd,tf=class{static getRectangleSides(a,d,k=0){const K=[a[0]+d[0]/2,a[1]+d[1]/2],da=yd.rotWith(a,K,k),ja=yd.rotWith(yd.add(a,[d[0],0]),K,k),qa=yd.rotWith(yd.add(a,d),K,k);a=yd.rotWith(yd.add(a,[0,d[1]]),K,k);return[["top",[da,ja]],["right",[ja,qa]],["bottom",[qa,a]],["left",[a,da]]]}static getBoundsSides(a){return tf.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+
2*d,height:a.height+2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return tf.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let k=Infinity,K=Infinity,da=
-Infinity,ja=-Infinity;if(2>a.length)K=k=0,ja=da=1;else for(const qa of a)k=Math.min(qa[0],k),K=Math.min(qa[1],K),da=Math.max(qa[0],da),ja=Math.max(qa[1],ja);return 0!==d?tf.getBoundsFromPoints(a.map(qa=>yd.rotWith(qa,[(k+da)/2,(K+ja)/2],d))):{minX:k,minY:K,maxX:da,maxY:ja,width:Math.max(1,da-k),height:Math.max(1,ja-K)}}static centerBounds(a,d){const k=tf.getBoundsCenter(a);return tf.translateBounds(a,[d[0]-k[0],d[1]-k[1]])}static snapBoundsToGrid(a,d){const k=Math.round(a.minX/d)*d,K=Math.round(a.minY/
d)*d,da=Math.round(a.maxX/d)*d;a=Math.round(a.maxY/d)*d;return{minX:k,minY:K,maxX:da,maxY:a,width:Math.max(1,da-k),height:Math.max(1,a-K)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+d[1],maxX:a.maxX+d[0],maxY:a.maxY+d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const k=tf.getBoundsCenter(a);return tf.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[k[0]*d,k[1]*d])}static divideBounds(a,d){const k=tf.getBoundsCenter(a);
return tf.centerBounds({minX:a.minX/d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[k[0]/d,k[1]/d])}static getRotatedBounds(a,d=0){a=tf.getRotatedCorners(a,d);let k=d=Infinity,K=-Infinity,da=-Infinity;for(const ja of a)d=Math.min(ja[0],d),k=Math.min(ja[1],k),K=Math.max(ja[0],K),da=Math.max(ja[1],da);return{minX:d,minY:k,maxX:K,maxY:da,width:Math.max(1,K-d),height:Math.max(1,da-k),rotation:0}}static getRotatedEllipseBounds(a,d,k,K,da=0){var ja=Math.cos(da);const qa=
Math.sin(da);da=Math.hypot(k*ja,K*qa);ja=Math.hypot(k*qa,K*ja);return{minX:a+k-da,minY:d+K-ja,maxX:a+k+da,maxY:d+K+ja,width:2*da,height:2*ja}}static getExpandedBounds(a,d){const k=Math.min(a.minX,d.minX),K=Math.min(a.minY,d.minY),da=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:k,minY:K,maxX:da,maxY:a,width:Math.abs(da-k),height:Math.abs(a-K)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let k=1;k<a.length;k++)d=tf.getExpandedBounds(d,a[k]);return d}static getRotatedCorners(a,
d=0){const k=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(K=>yd.rotWith(K,k,d)):a}static getTransformedBoundingBox(a,d,k,K=0,da=!1){const [ja,qa]=[a.minX,a.minY],[Ha,Ra]=[a.maxX,a.maxY];let [$a,fb]=[a.minX,a.minY],[jb,Kb]=[a.maxX,a.maxY];if("center"===d)return{minX:$a+k[0],minY:fb+k[1],maxX:jb+k[0],maxY:Kb+k[1],width:jb-$a,height:Kb-fb,scaleX:1,scaleY:1};const [Nb,Hb]=yd.rot(k,-K);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":fb+=
Hb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Kb+=Hb}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":$a+=Nb;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":jb+=Nb}var fc=Ha-ja;const qc=Ra-qa;var Wb=(jb-$a)/fc,kc=(Kb-fb)/qc;a=0>Wb;k=0>kc;var hc=Math.abs(jb-$a),Fc=Math.abs(Kb-fb);if(da)switch(da=fc/qc,fc=da<hc/Fc,kc=1/da*(0>kc?1:-1)*hc,Wb=Fc*(0>Wb?1:-1)*da,d){case "top_left_corner":fc?fb=Kb+kc:$a=jb+Wb;break;case "top_right_corner":fc?
fb=Kb+kc:jb=$a-Wb;break;case "bottom_right_corner":fc?Kb=fb-kc:jb=$a-Wb;break;case "bottom_left_corner":fc?Kb=fb-kc:$a=jb+Wb;break;case "bottom_edge":case "top_edge":hc=($a+jb)/2;Fc*=da;$a=hc-Fc/2;jb=hc+Fc/2;break;case "left_edge":case "right_edge":Fc=(fb+Kb)/2,hc/=da,fb=Fc-hc/2,Kb=Fc+hc/2}if(0!==K%(2*Math.PI)){hc=[0,0];Fc=yd.med([ja,qa],[Ha,Ra]);Wb=yd.med([$a,fb],[jb,Kb]);switch(d){case "top_left_corner":hc=yd.sub(yd.rotWith([jb,Kb],Wb,K),yd.rotWith([Ha,Ra],Fc,K));break;case "top_right_corner":hc=
yd.sub(yd.rotWith([$a,Kb],Wb,K),yd.rotWith([ja,Ra],Fc,K));break;case "bottom_right_corner":hc=yd.sub(yd.rotWith([$a,fb],Wb,K),yd.rotWith([ja,qa],Fc,K));break;case "bottom_left_corner":hc=yd.sub(yd.rotWith([jb,fb],Wb,K),yd.rotWith([Ha,qa],Fc,K));break;case "top_edge":hc=yd.sub(yd.rotWith(yd.med([$a,Kb],[jb,Kb]),Wb,K),yd.rotWith(yd.med([ja,Ra],[Ha,Ra]),Fc,K));break;case "left_edge":hc=yd.sub(yd.rotWith(yd.med([jb,fb],[jb,Kb]),Wb,K),yd.rotWith(yd.med([Ha,qa],[Ha,Ra]),Fc,K));break;case "bottom_edge":hc=
yd.sub(yd.rotWith(yd.med([$a,fb],[jb,fb]),Wb,K),yd.rotWith(yd.med([ja,qa],[Ha,qa]),Fc,K));break;case "right_edge":hc=yd.sub(yd.rotWith(yd.med([$a,fb],[$a,Kb]),Wb,K),yd.rotWith(yd.med([ja,qa],[ja,Ra]),Fc,K))}[$a,fb]=yd.sub([$a,fb],hc);[jb,Kb]=yd.sub([jb,Kb],hc)}jb<$a&&([jb,$a]=[$a,jb]);Kb<fb&&([Kb,fb]=[fb,Kb]);return{minX:$a,minY:fb,maxX:jb,maxY:Kb,width:jb-$a,height:Kb-fb,scaleX:(jb-$a)/(Ha-ja||1)*(a?-1:1),scaleY:(Kb-fb)/(Ra-qa||1)*(k?-1:1)}}static getTransformAnchor(a,d,k){let K=a;switch(a){case "top_left_corner":K=
d&&k?"bottom_right_corner":d?"top_right_corner":k?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":K=d&&k?"bottom_left_corner":d?"top_left_corner":k?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":K=d&&k?"top_left_corner":d?"bottom_left_corner":k?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":K=d&&k?"top_right_corner":d?"bottom_right_corner":k?"top_left_corner":"top_right_corner"}return K}static getRelativeTransformedBoundingBox(a,
d,k,K,da){K=a.minX+(K?d.maxX-k.maxX:k.minX-d.minX)/d.width*a.width;da=a.minY+(da?d.maxY-k.maxY:k.minY-d.minY)/d.height*a.height;const ja=k.width/d.width*a.width;a=k.height/d.height*a.height;return{minX:K,minY:da,maxX:K+ja,maxY:da+a,width:ja,height:a}}static getRotatedSize(a,d){const k=yd.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(K=>yd.rotWith(K,k,d));a=tf.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=
tf.getBoundsCenter(a);return hf(Yd({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=[Infinity,Infinity];a.forEach(k=>{d[0]=Math.min(d[0],k[0]);d[1]=Math.min(d[1],k[1])});return d}static getTLSnapPoints(a,d,k){const K=Yd({},a);a=[0,0];const da=[],ja={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},qa=["midX","minX","maxX"],Ha=["midY","minY","maxY"];d=d.map(Kb=>
{const Nb=qa.flatMap((fc,qc)=>qa.map((Wb,kc)=>{const hc=K[fc]-Kb[Wb];return{f:fc,t:Wb,gap:hc,distance:Math.abs(hc),isCareful:0===qc||3===qc+kc}})),Hb=Ha.flatMap((fc,qc)=>Ha.map((Wb,kc)=>{const hc=K[fc]-Kb[Wb];return{f:fc,t:Wb,gap:hc,distance:Math.abs(hc),isCareful:0===qc||3===qc+kc}}));return[Kb,Nb,Hb]});let Ra=Infinity,$a=Infinity,fb=Infinity,jb=Infinity;d.forEach(([,Kb,Nb])=>{Kb.forEach(Hb=>{Hb.distance<k&&Hb.distance<fb&&(fb=Hb.distance,Ra=Hb.gap)});Nb.forEach(Hb=>{Hb.distance<k&&Hb.distance<jb&&
(jb=Hb.distance,$a=Hb.gap)})});d.forEach(([Kb,Nb,Hb])=>{Infinity!==Ra&&Nb.forEach(fc=>{2>Math.abs(fc.gap-Ra)&&(ja[fc.f]=hf(Yd({},ja[fc.f]),{isSnapped:!0,to:Kb[fc.t],B:Kb,distance:fc.distance}))});Infinity!==$a&&Hb.forEach(fc=>{2>Math.abs(fc.gap-$a)&&(ja[fc.f]=hf(Yd({},ja[fc.f]),{isSnapped:!0,to:Kb[fc.t],B:Kb,distance:fc.distance}))})});a[0]=Infinity===Ra?0:Ra;a[1]=Infinity===$a?0:$a;K.minX-=a[0];K.midX-=a[0];K.maxX-=a[0];K.minY-=a[1];K.midY-=a[1];K.maxY-=a[1];qa.forEach(Kb=>{Kb=ja[Kb];if(Kb.isSnapped){var {id:Nb,
B:Hb}=Kb;Kb=K[Nb];da.push("minX"===Nb?[[Kb,K.midY],[Kb,Hb.minY],[Kb,Hb.maxY]]:[[Kb,K.minY],[Kb,K.maxY],[Kb,Hb.minY],[Kb,Hb.maxY]])}});Ha.forEach(Kb=>{Kb=ja[Kb];if(Kb.isSnapped){var {id:Nb,B:Hb}=Kb;Kb=K[Nb];da.push("midY"===Nb?[[K.midX,Kb],[Hb.minX,Kb],[Hb.maxX,Kb]]:[[K.minX,Kb],[K.maxX,Kb],[Hb.minX,Kb],[Hb.maxX,Kb]])}});return{offset:a,snapLines:da}}static ensureRatio(a,d){const {width:k,height:K}=a,da=Yd({},a);k/K<d?(da.width=K*d,da.maxX+=k-a.width):(da.height=k/d,da.maxY+=K-a.height);return da}static getDistributions(a,
d){var k=a.map(ja=>{const qa=ja.getBounds();return{id:ja.id,point:[qa.minX,qa.minY],bounds:qa,center:ja.getCenter()}});a=k.length;var K=tf.getCommonBounds(k.map(({bounds:ja})=>ja));const da=[];switch(d){case "horizontal":d=k.reduce((ja,qa)=>ja+qa.bounds.width,0);if(d>K.width){const ja=k.sort(($a,fb)=>$a.bounds.minX-fb.bounds.minX)[0],qa=k.sort(($a,fb)=>fb.bounds.maxX-$a.bounds.maxX)[0];K=k.filter($a=>$a!==ja&&$a!==qa).sort(($a,fb)=>$a.center[0]-fb.center[0]);const Ha=(qa.center[0]-ja.center[0])/(a-
1),Ra=ja.center[0]+Ha;K.forEach(({id:$a,point:fb,bounds:jb},Kb)=>{da.push({id:$a,prev:fb,next:[Ra+Ha*Kb-jb.width/2,jb.minY]})})}else{k=k.sort((Ha,Ra)=>Ha.center[0]-Ra.center[0]);let ja=K.minX;const qa=(K.width-d)/(a-1);k.forEach(({id:Ha,point:Ra,bounds:$a})=>{da.push({id:Ha,prev:Ra,next:[ja,$a.minY]});ja+=$a.width+qa})}break;case "vertical":if(d=k.reduce((ja,qa)=>ja+qa.bounds.height,0),d>K.height){const ja=k.sort(($a,fb)=>$a.bounds.minY-fb.bounds.minY)[0],qa=k.sort(($a,fb)=>fb.bounds.maxY-$a.bounds.maxY)[0];
K=k.filter($a=>$a!==ja&&$a!==qa).sort(($a,fb)=>$a.center[1]-fb.center[1]);const Ha=(qa.center[1]-ja.center[1])/(a-1),Ra=ja.center[1]+Ha;K.forEach(({id:$a,point:fb,bounds:jb},Kb)=>{da.push({id:$a,prev:fb,next:[jb.minX,Ra+Ha*Kb-jb.height/2]})})}else{k=k.sort((Ha,Ra)=>Ha.center[1]-Ra.center[1]);let ja=K.minY;const qa=(K.height-d)/(a-1);k.forEach(({id:Ha,point:Ra,bounds:$a})=>{da.push({id:Ha,prev:Ra,next:[$a.minX,ja]});ja+=$a.height+qa})}}return da}static getPackedDistributions(a){const d=tf.getCommonBounds(a.map(({bounds:da})=>
da)),k=[d.minX,d.minY],K=Object.fromEntries(a.map(da=>[da.id,[da.bounds.minX,da.bounds.minY]]));a=a.filter(da=>{var ja,qa,Ha,Ra;return!((null==(qa=null==(ja=da.props.handles)?void 0:ja.start)?0:qa.bindingId)||(null==(Ra=null==(Ha=da.props.handles)?void 0:Ha.end)?0:Ra.bindingId))}).map(da=>{const ja=da.getBounds();return{id:da.id,w:ja.width+16,h:ja.height+16,x:ja.minX,y:ja.minY}});z(a);return a.map(({id:da,x:ja,y:qa})=>({id:da,prev:K[da],next:[ja+k[0],qa+k[1]]}))}},lr=class{static pointInCircle(a,
d,k){return yd.dist(a,d)<=k}static pointInEllipse(a,d,k,K,da=0){da=da||0;var ja=Math.cos(da);da=Math.sin(da);d=yd.sub(a,d);a=ja*d[0]+da*d[1];ja=da*d[0]-ja*d[1];return 1>=a*a/(k*k)+ja*ja/(K*K)}static pointInRect(a,d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let k=0;d.forEach((K,da)=>{da=d[(da+1)%d.length];K[1]<=a[1]?da[1]>a[1]&&0<yd.cross(K,da,a)&&(k+=1):da[1]<=a[1]&&0>yd.cross(K,da,a)&&--k});return 0!==k}static pointInBounds(a,d){return!(a[0]<d.minX||
a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,k=3){for(let K=1;K<d.length;K++)if(yd.distanceToLineSegment(d[K-1],d[K],a)<k)return!0;return!1}static _getSqSegDist(a,d,k){let K=d[0];d=d[1];let da=k[0]-K,ja=k[1]-d;if(0!==da||0!==ja){const qa=((a[0]-K)*da+(a[1]-d)*ja)/(da*da+ja*ja);1<qa?(K=k[0],d=k[1]):0<qa&&(K+=da*qa,d+=ja*qa)}da=a[0]-K;ja=a[1]-d;return da*da+ja*ja}static _simplifyStep(a,d,k,K,da){let ja=K,qa=-1;for(let Ha=d+1;Ha<k;Ha++){const Ra=lr._getSqSegDist(a[Ha],a[d],a[k]);
Ra>ja&&(qa=Ha,ja=Ra)}-1<qa&&ja>K&&(1<qa-d&&lr._simplifyStep(a,d,qa,K,da),da.push(a[qa]),1<k-qa&&lr._simplifyStep(a,qa,k,K,da))}static simplify2(a,d=1){if(2>=a.length)return a;d*=d;var k=a[0],K=a[1];const da=[k];for(let ja=1,qa=a.length;ja<qa;ja++)K=a[ja],(K[0]-k[0])*(K[0]-k[0])+(K[1]-k[1])*(K[1]-k[1])>d&&(da.push(K),k=K);k!==K&&da.push(K);k=da.length-1;K=[da[0]];lr._simplifyStep(da,0,k,d,K);K.push(da[k],a[a.length-1]);return K}static pointNearToPolyline(a,d,k=8){const K=d.length;for(let da=1;da<K;da++)if(yd.distanceToLineSegment(d[da-
1],d[da],a)<k)return!0;return!1}},Dk=lr;gb(Dk,"simplify",(a,d=1)=>{var k=a.length;const K=a[0],da=a[k-1],[ja,qa]=K,[Ha,Ra]=da;if(2<k){let $a=0,fb=0;const jb=yd.len2([Ra-qa,Ha-ja]);for(let Kb=1;Kb<k-1;Kb++){const [Nb,Hb]=a[Kb],fc=Math.pow(Nb*(Ra-qa)+ja*(Hb-Ra)+Ha*(qa-Hb),2)/jb;$a>fc||($a=fc,fb=Kb)}if($a>d)return k=lr.simplify(a.slice(0,fb+1),d),a=lr.simplify(a.slice(fb+1),d),k.concat(a.slice(1))}return[K,da]});var Fn=Math.PI,Io=Fn/2,gl=2*Fn,Vu={},Wu={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",
right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Ml=class{static circleFromThreePoints(a,d,k){const [K,da]=a,[ja,qa]=d,[Ha,Ra]=k;d=K*(qa-Ra)-da*(ja-Ha)+ja*Ra-Ha*qa;a=-((K*K+da*da)*(Ra-qa)+(ja*ja+
qa*qa)*(da-Ra)+(Ha*Ha+Ra*Ra)*(qa-da))/(2*d);d=-((K*K+da*da)*(ja-Ha)+(ja*ja+qa*qa)*(Ha-K)+(Ha*Ha+Ra*Ra)*(K-ja))/(2*d);return[a,d,Math.hypot(a-K,d-da)]}static perimeterOfEllipse(a,d){const k=Math.pow(a-d,2)/Math.pow(a+d,2);return Fn*(a+d)*(1+3*k/(10+Math.sqrt(4-3*k)))}static shortAngleDist(a,d){a=(d-a)%gl;return 2*a%gl-a}static longAngleDist(a,d){return gl-Ml.shortAngleDist(a,d)}static lerpAngles(a,d,k){return a+Ml.shortAngleDist(a,d)*k}static angleDelta(a,d){return Ml.shortAngleDist(a,d)}static getSweep(a,
d,k){return Ml.angleDelta(be.angle(a,d),be.angle(a,k))}static clampRadians(a){return(gl+a)%gl}static snapAngleToSegments(a,d){d=gl/d;a=Math.floor((Ml.clampRadians(a)+d/2)/d)*d%gl;a<Fn&&(a+=gl);a>Fn&&(a-=gl);return a}static isAngleBetween(a,d,k){if(k===a||k===d)return!0;d=(d-a+Io)%Io;return d<=Fn!==(k-a+Io)%Io>d}static degreesToRadians(a){return a*Fn/180}static radiansToDegrees(a){return 180*a/Fn}static getArcLength(a,d,k,K){a=Ml.getSweep(a,k,K);return a/gl*gl*d}static getSweepFlag(a,d,k){k=be.angle(a,
k);return 0<(be.angle(a,d)-k+3*Fn)%gl-Fn?0:1}static getLargeArcFlag(a,d,k){a=be.angle(k,a);d=(be.angle(k,d)-a+3*Fn)%gl-Fn;return Math.abs(d)>Io?0:1}static getArcDashOffset(a,d,k,K,da){const ja=Ml.getSweepFlag(a,k,K);d=Ml.getArcLength(a,d,k,K);return-(0>ja?d:gl*a[2]-d)/2+da}static getEllipseDashOffset(a,d){return-(gl*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},Sk=class{static getPolygonCentroid(a){var d=
a.map(k=>k[0]);a=a.map(k=>k[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+Math.max(...a);return[d?d/2:0,a?a/2:0]}};gb(Sk,"getEdges",a=>{const d=a.length;return a.map((k,K)=>[k,a[(K+1)%d]])});gb(Sk,"getEdgeOutwardNormal",(a,d)=>be.per(be.uni(be.sub(d,a))));gb(Sk,"getEdgeInwardNormal",(a,d)=>be.neg(Sk.getEdgeOutwardNormal(a,d)));gb(Sk,"getOffsetEdge",(a,d,k)=>{k=be.mul(be.per(be.uni(be.sub(d,a))),k);return[be.add(a,k),be.add(d,k)]});gb(Sk,"getOffsetEdges",(a,d)=>a.map(([k,K])=>Sk.getOffsetEdge(k,
K,d)));gb(Sk,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[be.add(a,[-d,-d]),be.add(a,[d,-d]),be.add(a,[d,d]),be.add(a,[-d,d])];if(2===a.length){const [k,K]=a;return[...Sk.getOffsetEdge(k,K,d),...Sk.getOffsetEdge(K,k,d)]}return Sk.getOffsetEdges(Sk.getEdges(a),d).flatMap((k,K,da)=>{{K=da[(K+1)%da.length];const ja=yd.slope(k[0],k[1]);da=yd.slope(K[0],K[1]);ja!==da?Number.isNaN(ja)&&!Number.isNaN(da)?k=[k[0][0],(k[0][0]-K[0][0])*
da+K[0][1]]:Number.isNaN(da)&&!Number.isNaN(ja)?k=[K[0][0],(K[0][0]-k[0][0])*ja+k[0][1]]:(k=(ja*k[0][0]-da*K[0][0]+K[0][1]-k[0][1])/(ja-da),k=[k,da*(k-K[0][0])+K[0][1]]):k=void 0}if(void 0===k)throw Error("Expected an intersection");return k})});gb(Sk,"getPolygonVertices",(a,d,k=0,K=1)=>{a=be.div(a,2);const [da,ja]=[Math.max(1,a[0]-k),Math.max(1,a[1]-k)];k=[];for(let $a=0,fb=gl/d;$a<d;$a++){var qa=(-Io+$a*fb)%gl,Ha=(-Io+($a+1)*fb)%gl;qa=be.add(a,[da*Math.cos(qa),ja*Math.sin(qa)]);Ha=be.add(a,[da*
Math.cos(Ha),ja*Math.sin(Ha)]);var Ra=be.med(qa,Ha);Ra=be.nudge(Ra,a,be.dist(a,Ra)*(1-K));k.push(qa,Ra,Ha)}return k});gb(Sk,"getTriangleVertices",(a,d=0,k=1)=>{const [K,da]=a;var ja=1-k;a=[K/2,d/2];k=[K-d,da-d];d=[d/2,da-d];const qa=Sk.getPolygonCentroid([a,k,d]),Ha=be.med(a,k),Ra=be.med(k,d),$a=be.med(d,a),fb=be.dist(Ha,qa)*ja,jb=be.dist(Ra,qa)*ja;ja*=be.dist($a,qa);return[a,fb?be.nudge(Ha,qa,fb):Ha,k,jb?be.nudge(Ra,qa,jb):Ra,d,ja?be.nudge($a,qa,ja):$a]});gb(Sk,"getStarVertices",(a,d,k,K=1)=>{const da=
be.div(d,2),ja=be.mul(da,K/2),qa=gl/k/2;return Array.from(Array(2*k)).map((Ha,Ra)=>{Ha=-Io+Ra*qa;const [$a,fb]=Ra%2?ja:da;return be.add(a,[$a*Math.cos(Ha),fb*Math.sin(Ha)])})});var Pw=class{static getCurvedPathForPolygon(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],k=a.length;for(let K=1;K<k;K++){const [da,ja]=a[K],[qa,Ha]=a[(K+1)%k];d.push(da,ja,(da+qa)/2,(ja+Ha)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>
a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],k=a.length;for(let K=1;K<k-1;K++){const [da,ja]=a[K],[qa,Ha]=a[K+1];d.push(da,ja,(da+qa)/2,(ja+Ha)/2)}return d.join(" ")}static getSvgPathFromStroke(a,d=!0){const k=a.length;if(4>k)return"";let K=a[0],da=a[1];var ja=a[2];ja=`M${K[0].toFixed(2)},${K[1].toFixed(2)} Q${da[0].toFixed(2)},${da[1].toFixed(2)} ${((da[0]+ja[0])/2).toFixed(2)},${((da[1]+ja[1])/2).toFixed(2)} T`;for(let qa=2,Ha=k-1;qa<
Ha;qa++)K=a[qa],da=a[qa+1],ja+=`${((K[0]+da[0])/2).toFixed(2)},${((K[1]+da[1])/2).toFixed(2)} `;d&&(ja+="Z");return ja}static getSvgPathFromStrokePoints(a,d=!1){const k=a.length;if(4>k)return"";let K=a[0].point,da=a[1].point;var ja=a[2].point;ja=`M${K[0].toFixed(2)},${K[1].toFixed(2)} Q${da[0].toFixed(2)},${da[1].toFixed(2)} ${((da[0]+ja[0])/2).toFixed(2)},${((da[1]+ja[1])/2).toFixed(2)} T`;for(let qa=2,Ha=k-1;qa<Ha;qa++)K=a[qa].point,da=a[qa+1].point,ja+=`${((K[0]+da[0])/2).toFixed(2)},${((K[1]+
da[1])/2).toFixed(2)} `;d&&(ja+="Z");return ja}};gb(Pw,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var RD={},SD=Object.assign,Xu=Object.getOwnPropertyDescriptor,kp=Object.defineProperty,Gt=Object.prototype,Qw=[];Object.freeze(Qw);var Rw={};Object.freeze(Rw);var TD="undefined"!==typeof Proxy,UD=Object.toString(),ms=function(){},kz="undefined"!==typeof Object.getOwnPropertySymbols,Yu="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:kz?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:
Object.getOwnPropertyNames,VD=Object.getOwnPropertyDescriptors||function(a){var d={};Yu(a).forEach(function(k){d[k]=Xu(a,k)});return d},go=Symbol("mobx-stored-annotations"),jh=Symbol("mobx administration"),Ht=function(){function a(k){void 0===k&&(k="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=Ri.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=k}var d=a.prototype;d.onBO=
function(){this.onBOL&&this.onBOL.forEach(function(k){return k()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(k){return k()})};d.reportObserved=function(){return lb(this)};d.reportChanged=function(){Sc();Db(this);Jb()};d.toString=function(){return this.name_};return a}(),Sw=F("Atom",Ht),ns={identity:function(a,d){return a===d},structural:function(a,d){return sa(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,
d){return sa(a,d,1)}},WD="override",XD=Wa(),It={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(It);var lz=ib("observable"),YD=ib("observable.ref",{enhancer:Ka}),ZD=ib("observable.shallow",{enhancer:function(a,d,k){if(void 0===a||null===a||ve(a)||rd(a)||$p(a)||or(a))return a;if(Array.isArray(a))return yg.array(a,{name:k,deep:!1});if(L(a))return yg.object(a,void 0,{name:k,deep:!1});if(O(a))return yg.map(a,{name:k,deep:!1});if(M(a))return yg.set(a,{name:k,deep:!1})}}),$D=ib("observable.struct",
{enhancer:function(a,d){return sa(a,d)?d:a}}),mz=xa(lz);Object.assign(bb,mz);var aE={box:function(a,d){d=d||It;return new mr(a,Qa(d),d.name,!0,d.equals)},array:function(a,d){d=d||It;return(!1===Af.useProxies||!1===d.proxy?Ab:kb)(a,Qa(d),d.name)},map:function(a,d){d=d||It;return new wz(a,Qa(d),d.name)},set:function(a,d){d=d||It;return new xz(a,Qa(d),d.name)},object:function(a,d,k){if(!1===Af.useProxies||!1===(null==k?void 0:k.proxy))k=Hd({},k);else{var K={},da,ja;B();K=Hd(K,k);k=null!=(ja=(da=K[jh]).proxy_)?
ja:da.proxy_=new Proxy(K,pE)}return je(k,a,d)},ref:xa(YD),shallow:xa(ZD),deep:mz,struct:xa($D)},yg=SD(bb,aE),nz=Va("computed"),bE=Va("computed.struct",{equals:ns.structural}),Eg=function(a,d){if(H(d))return Ga(a,d,nz);if(L(a))return xa(Va("computed",a));d=L(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new Jt(d)};Object.assign(Eg,nz);Eg.struct=xa(bE);var oz,pz,Zu=0,cE=1,dE=null!=(oz=null==(pz=Xu(function(){},"name"))?void 0:pz.configurable)?oz:!1,qz={value:"action",configurable:!0,writable:!1,
enumerable:!1};var eE=Symbol.toPrimitive;var mr=function(a){function d(K,da,ja,qa,Ha){void 0===ja&&(ja="ObservableValue");void 0===Ha&&(Ha=ns["default"]);qa=a.call(this,ja)||this;qa.enhancer=void 0;qa.hasUnreportedChange_=!1;qa.interceptors_=void 0;qa.changeListeners_=void 0;qa.value_=void 0;qa.dehancer=void 0;qa.enhancer=da;qa.name_=ja;qa.equals=Ha;qa.value_=da(K,void 0,ja);return qa}fa(d,a);var k=d.prototype;k.dehanceValue=function(K){return void 0!==this.dehancer?this.dehancer(K):K};k.set=function(K){K=
this.prepareNewValue_(K);K!==Af.UNCHANGED&&this.setNewValue_(K)};k.prepareNewValue_=function(K){if(ub(this)){K=Eb(this,{object:this,type:Jo,newValue:K});if(!K)return Af.UNCHANGED;K=K.newValue}K=this.enhancer(K,this.value_,this.name_);return this.equals(this.value_,K)?Af.UNCHANGED:K};k.setNewValue_=function(K){var da=this.value_;this.value_=K;this.reportChanged();hd(this)&&Sd(this,{type:Jo,object:this,newValue:K,oldValue:da})};k.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};
k.intercept_=function(K){return Bb(this,K)};k.observe_=function(K,da){da&&K({observableKind:"value",debugObjectName:this.name_,object:this,type:Jo,newValue:this.value_,oldValue:void 0});return Td(this,K)};k.raw=function(){return this.value_};k.toJSON=function(){return this.get()};k.toString=function(){return this.name_+"["+this.value_+"]"};k.valueOf=function(){return ia(this.get())};k[eE]=function(){return this.valueOf()};return d}(Ht),fE=F("ObservableValue",mr);var gE=Symbol.toPrimitive;var Jt=function(){function a(k){this.dependenciesState_=
Ri.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Ri.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new nr(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=os.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=
void 0;k.get||f(31);this.derivation=k.get;this.name_=k.name||"ComputedValue";k.set&&(this.setter_=Pa("ComputedValue-setter",k.set));this.equals_=k.equals||(k.compareStructural||k.struct?ns.structural:ns["default"]);this.scope_=k.context;this.requiresReaction_=k.requiresReaction;this.keepAlive_=!!k.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){db(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(k){return k()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(k){return k()})};
d.get=function(){this.isComputing_&&f(32,this.name_,this.derivation);if(0!==Af.inBatch||0!==this.observers_.size||this.keepAlive_){if(lb(this),oc(this)){var k=Af.trackingContext;this.keepAlive_&&!k&&(Af.trackingContext=this);this.trackAndCompute()&&Gb(this);Af.trackingContext=k}}else oc(this)&&(this.warnAboutUntrackedRead_(),Sc(),this.value_=this.computeValue_(!1),Jb());k=this.value_;if(k instanceof nr)throw k.cause;return k};d.set=function(k){if(this.setter_){this.isRunningSetter_&&f(33,this.name_);
this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,k)}finally{this.isRunningSetter_=!1}}else f(34,this.name_)};d.trackAndCompute=function(){var k=this.value_,K=this.dependenciesState_===Ri.NOT_TRACKING_,da=this.computeValue_(!0);if(k=K||k instanceof nr||da instanceof nr||!this.equals_(k,da))this.value_=da;return k};d.computeValue_=function(k){this.isComputing_=!0;var K=xc(!1);if(k)var da=pc(this,this.derivation,this.scope_);else if(!0===Af.disableErrorBoundaries)da=this.derivation.call(this.scope_);
else try{da=this.derivation.call(this.scope_)}catch(ja){da=new nr(ja)}Af.allowStateChanges=K;this.isComputing_=!1;return da};d.suspend_=function(){this.keepAlive_||(Cc(this),this.value_=void 0)};d.observe_=function(k,K){var da=this,ja=!0,qa=void 0;return ic(function(){var Ha=da.get();if(!ja||K){var Ra=dc();k({observableKind:"computed",debugObjectName:da.name_,type:Jo,object:da,newValue:Ha,oldValue:qa});Af.trackingDerivation=Ra}ja=!1;qa=Ha})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+
"["+this.derivation.toString()+"]"};d.valueOf=function(){return ia(this.get())};d[gE]=function(){return this.valueOf()};return a}(),Kt=F("ComputedValue",Jt),Ri;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(Ri||={});var os;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(os||={});var nr=function(a){this.cause=void 0;this.cause=a},$u=function(){this.version=6;this.UNCHANGED=
{};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=
!0},av=!0,rz=!1,Af=function(){var a=E();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&(av=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new $u).version&&(av=!1);if(av){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED={}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new $u}setTimeout(function(){rz||f(35)},1);return new $u}(),ps=function(){function a(k,K,da,ja){void 0===k&&(k="Reaction");this.requiresObservable_=this.errorHandler_=
this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Ri.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=os.NONE;this.name_=k;this.onInvalidate_=K;this.errorHandler_=da;this.requiresObservable_=ja}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Af.pendingReactions.push(this),
0<Af.inBatch||Af.isRunningReactions||bv(rb))};d.isScheduled=function(){return this.isScheduled_};d.runReaction_=function(){if(!this.isDisposed_){Sc();this.isScheduled_=!1;var k=Af.trackingContext;Af.trackingContext=this;if(oc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(K){this.reportExceptionInDerivation_(K)}}Af.trackingContext=k;Jb()}};d.track=function(k){if(!this.isDisposed_){Sc();this.isRunning_=!0;var K=Af.trackingContext;Af.trackingContext=this;k=pc(this,k,void 0);Af.trackingContext=
K;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Cc(this);k instanceof nr&&this.reportExceptionInDerivation_(k.cause);Jb()}};d.reportExceptionInDerivation_=function(k){var K=this;if(this.errorHandler_)this.errorHandler_(k,this);else{if(Af.disableErrorBoundaries)throw k;Af.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",k);Af.globalReactionErrorHandlers.forEach(function(da){return da(k,K)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||
(Sc(),Cc(this),Jb()))};d.getDisposer_=function(){var k=this.dispose.bind(this);k[jh]=this;return k};d.toString=function(){return"Reaction["+this.name_+"]"};d.trace=function(k){void 0===k&&(k=!1);Zc(this,k)};return a}(),hE=100,bv=function(a){return a()},cv=F("Reaction",ps),sz="action",tz=Ba(sz),iE=Ba("action.bound",{bound:!0}),uz=Ba("autoAction",{autoAction:!0}),jE=Ba("autoAction.bound",{autoAction:!0,bound:!0}),ig=Bc(!1);Object.assign(ig,tz);var Lt=Bc(!0);Object.assign(Lt,uz);ig.bound=xa(iE);Lt.bound=
xa(jE);var kE=function(a){return a()},lE="onBO",mE="onBUO",nE=0;qe.prototype=Object.create(Error.prototype);var vz=na("flow"),oE=na("flow.bound",{bound:!0}),Mt=Object.assign(function(a,d){if(H(d))return Ga(a,d,vz);var k=a.name||"\x3cunnamed flow\x3e";d=function(){var K=arguments,da=++nE,ja=ig(k+" - runid: "+da+" - init",a).apply(this,K),qa,Ha=void 0;K=new Promise(function(Ra,$a){function fb(Hb){Ha=void 0;try{var fc=ig(k+" - runid: "+da+" - yield "+Nb++,ja.next).call(ja,Hb)}catch(qc){return $a(qc)}Kb(fc)}
function jb(Hb){Ha=void 0;try{var fc=ig(k+" - runid: "+da+" - yield "+Nb++,ja["throw"]).call(ja,Hb)}catch(qc){return $a(qc)}Kb(fc)}function Kb(Hb){if(V(null==Hb?void 0:Hb.then))Hb.then(Kb,$a);else{if(Hb.done)return Ra(Hb.value);Ha=Promise.resolve(Hb.value);return Ha.then(fb,jb)}}var Nb=0;qa=$a;fb(void 0)});K.cancel=ig(k+" - runid: "+da+" - cancel",function(){try{if(Ha){var Ra=Ha;V(Ra.cancel)&&Ra.cancel()}var $a=ja["return"](void 0),fb=Promise.resolve($a.value);fb.then(ms,ms);V(fb.cancel)&&fb.cancel();
qa(new qe)}catch(jb){qa(jb)}});return K};d.isMobXFlow=!0;return d},vz);Mt.bound=xa(oE);var pE={has:function(a,d){return a[jh].has_(d)},get:function(a,d){return a[jh].get_(d)},set:function(a,d,k){var K;return H(d)?null!=(K=a[jh].set_(d,k,!0))?K:!0:!1},deleteProperty:function(a,d){var k;return H(d)?null!=(k=a[jh].delete_(d,!0))?k:!0:!1},defineProperty:function(a,d,k){var K;return null!=(K=a[jh].defineProperty_(d,k))?K:!0},ownKeys:function(a){return a[jh].ownKeys_()},preventExtensions:function(a){f(13)}},
Jo="update",qE={get:function(a,d){var k=a[jh];return d===jh?k:"length"===d?k.getArrayLength_():"string"!==typeof d||isNaN(d)?U(dv,d)?dv[d]:a[d]:k.get_(parseInt(d))},set:function(a,d,k){var K=a[jh];"length"===d&&K.setArrayLength_(k);"symbol"===typeof d||isNaN(d)?a[d]=k:K.set_(parseInt(d),k);return!0},preventExtensions:function(){f(15)}},Tw=function(){function a(k,K,da,ja){void 0===k&&(k="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=
this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=da;this.legacyMode_=ja;this.atom_=new Ht(k);this.enhancer_=function(qa,Ha){return K(qa,Ha,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.dehanceValues_=function(k){return void 0!==this.dehancer&&0<k.length?k.map(this.dehancer):k};d.intercept_=function(k){return Bb(this,k)};d.observe_=function(k,K){void 0===K&&(K=!1);K&&k({observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Td(this,k)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(k){("number"!==typeof k||isNaN(k)||0>k)&&f("Out of range: "+k);var K=this.values_.length;if(k!==K)if(k>K){for(var da=Array(k-K),ja=0;ja<k-K;ja++)da[ja]=void 0;this.spliceWithArray_(K,0,da)}else this.spliceWithArray_(k,
K-k)};d.updateArrayLength_=function(k,K){k!==this.lastKnownLength_&&f(16);this.lastKnownLength_+=K;this.legacyMode_&&0<K&&$d(k+K+1)};d.spliceWithArray_=function(k,K,da){var ja=this,qa=this.values_.length;void 0===k?k=0:k>qa?k=qa:0>k&&(k=Math.max(0,qa+k));K=1===arguments.length?qa-k:void 0===K||null===K?0:Math.max(0,Math.min(K,qa-k));void 0===da&&(da=Qw);if(ub(this)){var Ha=Eb(this,{object:this.proxy_,type:"splice",index:k,removedCount:K,added:da});if(!Ha)return Qw;K=Ha.removedCount;da=Ha.added}da=
0===da.length?da:da.map(function(Ra){return ja.enhancer_(Ra,void 0)});this.legacyMode_&&this.updateArrayLength_(qa,da.length-K);qa=this.spliceItemsIntoValues_(k,K,da);0===K&&0===da.length||this.notifyArraySplice_(k,da,qa);return this.dehanceValues_(qa)};d.spliceItemsIntoValues_=function(k,K,da){if(1E4>da.length){var ja;return(ja=this.values_).splice.apply(ja,[k,K].concat(da))}ja=this.values_.slice(k,k+K);var qa=this.values_.slice(k+K);this.values_.length+=da.length-K;for(K=0;K<da.length;K++)this.values_[k+
K]=da[K];for(K=0;K<qa.length;K++)this.values_[k+da.length+K]=qa[K];return ja};d.notifyArrayChildUpdate_=function(k,K,da){var ja=!this.owned_&&!1,qa=hd(this);k=qa||ja?{observableKind:"array",object:this.proxy_,type:Jo,debugObjectName:this.atom_.name_,index:k,newValue:K,oldValue:da}:null;this.atom_.reportChanged();qa&&Sd(this,k)};d.notifyArraySplice_=function(k,K,da){var ja=!this.owned_&&!1,qa=hd(this);k=qa||ja?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",
index:k,removed:da,added:K,removedCount:da.length,addedCount:K.length}:null;this.atom_.reportChanged();qa&&Sd(this,k)};d.get_=function(k){if(this.legacyMode_&&k>=this.values_.length)console.warn("[mobx] Out of bounds read: "+k);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[k])};d.set_=function(k,K){var da=this.values_;this.legacyMode_&&k>da.length&&f(17,k,da.length);if(k<da.length){var ja=da[k];if(ub(this)){K=Eb(this,{type:Jo,object:this.proxy_,index:k,newValue:K});if(!K)return;
K=K.newValue}K=this.enhancer_(K,ja);K!==ja&&(da[k]=K,this.notifyArrayChildUpdate_(k,K,ja))}else{k=Array(k+1-da.length);for(ja=0;ja<k.length-1;ja++)k[ja]=void 0;k[k.length-1]=K;this.spliceWithArray_(da.length,0,k)}};return a}(),dv={clear:function(){return this.splice(0)},replace:function(a){var d=this[jh];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},splice:function(a,d){for(var k=arguments.length,K=Array(2<k?k-2:0),da=2;da<k;da++)K[da-2]=arguments[da];k=this[jh];
switch(arguments.length){case 0:return[];case 1:return k.spliceWithArray_(a);case 2:return k.spliceWithArray_(a,d)}return k.spliceWithArray_(a,d,K)},spliceWithArray:function(a,d,k){return this[jh].spliceWithArray_(a,d,k)},push:function(){for(var a=this[jh],d=arguments.length,k=Array(d),K=0;K<d;K++)k[K]=arguments[K];a.spliceWithArray_(a.values_.length,0,k);return a.values_.length},pop:function(){return this.splice(Math.max(this[jh].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},
unshift:function(){for(var a=this[jh],d=arguments.length,k=Array(d),K=0;K<d;K++)k[K]=arguments[K];a.spliceWithArray_(0,0,k);return a.values_.length},reverse:function(){Af.trackingDerivation&&f(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){Af.trackingDerivation&&f(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[jh];a=d.dehanceValues_(d.values_).indexOf(a);return-1<a?(this.splice(a,1),!0):!1}};tb("concat",
ob);tb("flat",ob);tb("includes",ob);tb("indexOf",ob);tb("join",ob);tb("lastIndexOf",ob);tb("slice",ob);tb("toString",ob);tb("toLocaleString",ob);tb("every",Ub);tb("filter",Ub);tb("find",Ub);tb("findIndex",Ub);tb("flatMap",Ub);tb("forEach",Ub);tb("map",Ub);tb("some",Ub);tb("reduce",Tb);tb("reduceRight",Tb);var rE=F("ObservableArrayAdministration",Tw),sE={};var tE=Symbol.iterator;var uE=Symbol.toStringTag;var wz=function(){function a(k,K,da){var ja=this;void 0===K&&(K=Fa);void 0===da&&(da="ObservableMap");
this.name_=this.enhancer_=void 0;this[jh]=sE;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=K;this.name_=da;V(Map)||f(18);this.keysAtom_=Ya("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Lb(!0,function(){ja.merge(k)})}var d=a.prototype;d.has_=function(k){return this.data_.has(k)};d.has=function(k){var K=this;if(!Af.trackingDerivation)return this.has_(k);var da=this.hasMap_.get(k);if(!da){var ja=da=new mr(this.has_(k),
Ka,"ObservableMap.key?",!1);this.hasMap_.set(k,ja);pd(ja,function(){return K.hasMap_["delete"](k)})}return da.get()};d.set=function(k,K){var da=this.has_(k);if(ub(this)){K=Eb(this,{type:da?Jo:"add",object:this,newValue:K,name:k});if(!K)return this;K=K.newValue}da?this.updateValue_(k,K):this.addValue_(k,K);return this};d["delete"]=function(k){var K=this;if(ub(this)&&!Eb(this,{type:"delete",object:this,name:k}))return!1;if(this.has_(k)){var da=hd(this),ja=da?{observableKind:"map",debugObjectName:this.name_,
type:"delete",object:this,oldValue:this.data_.get(k).value_,name:k}:null;Gc(function(){var qa;K.keysAtom_.reportChanged();null==(qa=K.hasMap_.get(k))?void 0:qa.setNewValue_(!1);K.data_.get(k).setNewValue_(void 0);K.data_["delete"](k)});da&&Sd(this,ja);return!0}return!1};d.updateValue_=function(k,K){var da=this.data_.get(k);K=da.prepareNewValue_(K);if(K!==Af.UNCHANGED){var ja=hd(this);k=ja?{observableKind:"map",debugObjectName:this.name_,type:Jo,object:this,oldValue:da.value_,name:k,newValue:K}:null;
da.setNewValue_(K);ja&&Sd(this,k)}};d.addValue_=function(k,K){var da=this;Gc(function(){var Ha,Ra=new mr(K,da.enhancer_,"ObservableMap.key",!1);da.data_.set(k,Ra);K=Ra.value_;null==(Ha=da.hasMap_.get(k))?void 0:Ha.setNewValue_(!0);da.keysAtom_.reportChanged()});var ja=hd(this),qa=ja?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:k,newValue:K}:null;ja&&Sd(this,qa)};d.get=function(k){return this.has(k)?this.dehanceValue_(this.data_.get(k).get()):this.dehanceValue_(void 0)};
d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var k=this,K=this.keys();return Ta({next:function(){var da=K.next(),ja=da.done;da=da.value;return{done:ja,value:ja?void 0:k.get(da)}}})};d.entries=function(){var k=this,K=this.keys();return Ta({next:function(){var da=K.next(),ja=da.done;da=da.value;return{done:ja,value:ja?void 0:[da,k.get(da)]}}})};d[tE]=function(){return this.entries()};
d.forEach=function(k,K){for(var da=ta(this),ja;!(ja=da()).done;)ja=ja.value,k.call(K,ja[1],ja[0],this)};d.merge=function(k){var K=this;$p(k)&&(k=new Map(k));Gc(function(){L(k)?I(k).forEach(function(da){return K.set(da,k[da])}):Array.isArray(k)?k.forEach(function(da){return K.set(da[0],da[1])}):O(k)?(k.constructor!==Map&&f(19,k),k.forEach(function(da,ja){return K.set(ja,da)})):null!==k&&void 0!==k&&f(20,k)});return this};d.clear=function(){var k=this;Gc(function(){bd(function(){for(var K=ta(k.keys()),
da;!(da=K()).done;)k["delete"](da.value)})})};d.replace=function(k){var K=this;Gc(function(){for(var da=td(k),ja=new Map,qa=!1,Ha=ta(K.data_.keys()),Ra;!(Ra=Ha()).done;)if(Ra=Ra.value,!da.has(Ra))if(K["delete"](Ra))qa=!0;else{var $a=K.data_.get(Ra);ja.set(Ra,$a)}for(da=ta(da.entries());!(Ha=da()).done;)Ra=Ha.value,Ha=Ra[0],$a=Ra[1],Ra=K.data_.has(Ha),K.set(Ha,$a),K.data_.has(Ha)&&($a=K.data_.get(Ha),ja.set(Ha,$a),Ra||(qa=!0));if(!qa)if(K.data_.size!==ja.size)K.keysAtom_.reportChanged();else for(qa=
K.data_.keys(),da=ja.keys(),Ha=qa.next(),Ra=da.next();!Ha.done;){if(Ha.value!==Ra.value){K.keysAtom_.reportChanged();break}Ha=qa.next();Ra=da.next()}K.data_=ja});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(k,K){return Td(this,k)};d.intercept_=function(k){return Bb(this,k)};aa(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:uE,get:function(){return"Map"}}]);return a}(),
$p=F("ObservableMap",wz),vE={};var wE=Symbol.iterator;var xE=Symbol.toStringTag;var xz=function(){function a(k,K,da){void 0===K&&(K=Fa);void 0===da&&(da="ObservableSet");this.name_=void 0;this[jh]=vE;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=da;V(Set)||f(22);this.atom_=Ya(this.name_);this.enhancer_=function(ja,qa){return K(ja,qa,da)};k&&this.replace(k)}var d=a.prototype;d.dehanceValue_=function(k){return void 0!==this.dehancer?
this.dehancer(k):k};d.clear=function(){var k=this;Gc(function(){bd(function(){for(var K=ta(k.data_.values()),da;!(da=K()).done;)k["delete"](da.value)})})};d.forEach=function(k,K){for(var da=ta(this),ja;!(ja=da()).done;)ja=ja.value,k.call(K,ja,ja,this)};d.add=function(k){var K=this;if(ub(this)&&!Eb(this,{type:"add",object:this,newValue:k}))return this;if(!this.has(k)){Gc(function(){K.data_.add(K.enhancer_(k,void 0));K.atom_.reportChanged()});var da=hd(this),ja=da?{observableKind:"set",debugObjectName:this.name_,
type:"add",object:this,newValue:k}:null;da&&Sd(this,ja)}return this};d["delete"]=function(k){var K=this;if(ub(this)&&!Eb(this,{type:"delete",object:this,oldValue:k}))return!1;if(this.has(k)){var da=hd(this),ja=da?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:k}:null;Gc(function(){K.atom_.reportChanged();K.data_["delete"](k)});da&&Sd(this,ja);return!0}return!1};d.has=function(k){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(k))};d.entries=
function(){var k=0,K=Array.from(this.keys()),da=Array.from(this.values());return Ta({next:function(){var ja=k;k+=1;return ja<da.length?{value:[K[ja],da[ja]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var k=this,K=0,da=Array.from(this.data_.values());return Ta({next:function(){return K<da.length?{value:k.dehanceValue_(da[K++]),done:!1}:{done:!0}}})};d.replace=function(k){var K=this;or(k)&&(k=new Set(k));Gc(function(){Array.isArray(k)?
(K.clear(),k.forEach(function(da){return K.add(da)})):M(k)?(K.clear(),k.forEach(function(da){return K.add(da)})):null!==k&&void 0!==k&&f("Cannot initialize set from "+k)});return this};d.observe_=function(k,K){return Td(this,k)};d.intercept_=function(k){return Bb(this,k)};d.toJSON=function(){return Array.from(this)};d.toString=function(){return"[object ObservableSet]"};d[wE]=function(){return this.values()};aa(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:xE,
get:function(){return"Set"}}]);return a}(),or=F("ObservableSet",xz),yz=Object.create(null),zz=function(){function a(k,K,da,ja){void 0===K&&(K=new Map);void 0===ja&&(ja=XD);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=k;this.values_=K;this.name_=da;this.defaultAnnotation_=ja;this.keysAtom_=new Ht("ObservableObject.keys");this.isPlainObject_=L(this.target_)}
var d=a.prototype;d.getObservablePropValue_=function(k){return this.values_.get(k).get()};d.setObservablePropValue_=function(k,K){var da=this.values_.get(k);if(da instanceof Jt)return da.set(K),!0;if(ub(this)){K=Eb(this,{type:Jo,object:this.proxy_||this.target_,name:k,newValue:K});if(!K)return null;K=K.newValue}K=da.prepareNewValue_(K);if(K!==Af.UNCHANGED){var ja=hd(this);k=ja?{type:Jo,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:da.value_,name:k,newValue:K}:
null;da.setNewValue_(K);ja&&Sd(this,k)}return!0};d.get_=function(k){Af.trackingDerivation&&!U(this.target_,k)&&this.has_(k);return this.target_[k]};d.set_=function(k,K,da){void 0===da&&(da=!1);if(U(this.target_,k)){if(this.values_.has(k))return this.setObservablePropValue_(k,K);if(da)return Reflect.set(this.target_,k,K);this.target_[k]=K;return!0}return this.extend_(k,{value:K,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,da)};d.has_=function(k){if(!Af.trackingDerivation)return k in
this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var K=this.pendingKeys_.get(k);K||(K=new mr(k in this.target_,Ka,"ObservableObject.key?",!1),this.pendingKeys_.set(k,K));return K.get()};d.make_=function(k,K){!0===K&&(K=this.defaultAnnotation_);if(!1!==K){if(!(k in this.target_)){var da;if(null!=(da=this.target_[go])&&da[k])return;f(1,K.annotationType_,this.name_+"."+k.toString())}for(da=this.target_;da&&da!==Gt;){var ja=Xu(da,k);if(ja){ja=K.make_(this,k,ja,da);if(0===ja)return;if(1===ja)break}da=
Object.getPrototypeOf(da)}var qa;null==(qa=this.target_[go])?!0:delete qa[k]}};d.extend_=function(k,K,da,ja){void 0===ja&&(ja=!1);!0===da&&(da=this.defaultAnnotation_);if(!1===da)return this.defineProperty_(k,K,ja);if(K=da.extend_(this,k,K,ja)){var qa;null==(qa=this.target_[go])?!0:delete qa[k]}return K};d.defineProperty_=function(k,K,da){void 0===da&&(da=!1);try{Sc();var ja=this.delete_(k);if(!ja)return ja;if(ub(this)){var qa=Eb(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:K.value});
if(!qa)return null;var Ha=qa.newValue;K.value!==Ha&&(K=W({},K,{value:Ha}))}if(da){if(!Reflect.defineProperty(this.target_,k,K))return!1}else kp(this.target_,k,K);this.notifyPropertyAddition_(k,K.value)}finally{Jb()}return!0};d.defineObservableProperty_=function(k,K,da,ja){void 0===ja&&(ja=!1);try{Sc();var qa=this.delete_(k);if(!qa)return qa;if(ub(this)){var Ha=Eb(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:K});if(!Ha)return null;K=Ha.newValue}var Ra=te(k),$a={configurable:Af.safeDescriptors?
this.isPlainObject_:!0,enumerable:!0,get:Ra.get,set:Ra.set};if(ja){if(!Reflect.defineProperty(this.target_,k,$a))return!1}else kp(this.target_,k,$a);var fb=new mr(K,da,"ObservableObject.key",!1);this.values_.set(k,fb);this.notifyPropertyAddition_(k,fb.value_)}finally{Jb()}return!0};d.defineComputedProperty_=function(k,K,da){void 0===da&&(da=!1);try{Sc();var ja=this.delete_(k);if(!ja)return ja;if(ub(this)&&!Eb(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:void 0}))return null;K.name||
(K.name="ObservableObject.key");K.context=this.proxy_||this.target_;var qa=te(k),Ha={configurable:Af.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:qa.get,set:qa.set};if(da){if(!Reflect.defineProperty(this.target_,k,Ha))return!1}else kp(this.target_,k,Ha);this.values_.set(k,new Jt(K));this.notifyPropertyAddition_(k,void 0)}finally{Jb()}return!0};d.delete_=function(k,K){void 0===K&&(K=!1);if(!U(this.target_,k))return!0;if(ub(this)&&!Eb(this,{object:this.proxy_||this.target_,name:k,type:"remove"}))return null;
try{var da,ja;Sc();var qa=hd(this),Ha=this.values_.get(k),Ra=void 0;if(!Ha&&qa){var $a;Ra=null==($a=Xu(this.target_,k))?void 0:$a.value}if(K){if(!Reflect.deleteProperty(this.target_,k))return!1}else delete this.target_[k];Ha&&(this.values_["delete"](k),Ha instanceof mr&&(Ra=Ha.value_),Db(Ha));this.keysAtom_.reportChanged();null==(da=this.pendingKeys_)?void 0:null==(ja=da.get(k))?void 0:ja.set(k in this.target_);if(qa){var fb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,
debugObjectName:this.name_,oldValue:Ra,name:k};qa&&Sd(this,fb)}}finally{Jb()}return!0};d.observe_=function(k,K){return Td(this,k)};d.intercept_=function(k){return Bb(this,k)};d.notifyPropertyAddition_=function(k,K){var da,ja,qa=hd(this);qa&&(K=qa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:k,newValue:K}:null,qa&&Sd(this,K));null==(da=this.pendingKeys_)?void 0:null==(ja=da.get(k))?void 0:ja.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=
function(){this.keysAtom_.reportObserved();return Yu(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return a}(),yE=F("ObservableObjectAdministration",zz),zE=pe(0),Uw=0,Az=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,d):void 0!==a.prototype.__proto__?a.prototype.__proto__=d:a.prototype=d})(Az,Array.prototype);var Vw=function(a,d,k){function K(ja,qa,Ha,Ra){void 0===Ha&&(Ha="ObservableArray");void 0===Ra&&(Ra=
!1);var $a=a.call(this)||this;qa=new Tw(Ha,qa,Ra,!0);qa.proxy_=ea($a);G(ea($a),jh,qa);ja&&ja.length&&(qa=xc(!0),$a.spliceWithArray(0,0,ja),Af.allowStateChanges=qa);Object.defineProperty(ea($a),"0",zE);return $a}fa(K,a);var da=K.prototype;da.concat=function(){this[jh].atom_.reportObserved();for(var ja=arguments.length,qa=Array(ja),Ha=0;Ha<ja;Ha++)qa[Ha]=arguments[Ha];return Array.prototype.concat.apply(this.slice(),qa.map(function(Ra){return rd(Ra)?Ra.slice():Ra}))};da[k]=function(){var ja=this,qa=
0;return Ta({next:function(){return qa<ja.length?{value:ja[qa++],done:!1}:{done:!0,value:void 0}}})};aa(K,[{key:"length",get:function(){return this[jh].getArrayLength_()},set:function(ja){this[jh].setArrayLength_(ja)}},{key:d,get:function(){return"Array"}}]);return K}(Az,Symbol.toStringTag,Symbol.iterator);Object.entries(dv).forEach(function(a){var d=a[0];a=a[1];"concat"!==d&&Q(Vw.prototype,d,a)});$d(1E3);var Bz=Gt.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof E()[a]&&f("MobX requires global '"+
a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:gc,extras:{getDebugName:Xa},$mobx:jh});var AE=ca(588),hl=class{constructor(a){gb(this,"props");gb(this,"aspectRatio");gb(this,"type");gb(this,"hideCloneHandles",!1);gb(this,"hideResizeHandles",!1);gb(this,"hideRotateHandle",!1);gb(this,"hideContextBar",!1);gb(this,"hideSelectionDetail",!1);gb(this,"hideSelection",!1);gb(this,"canChangeAspectRatio",!0);gb(this,"canUnmount",
!0);gb(this,"canResize",[!0,!0]);gb(this,"canScale",!0);gb(this,"canFlip",!0);gb(this,"canEdit",!1);gb(this,"canBind",!1);gb(this,"nonce");gb(this,"bindingDistance",4);gb(this,"isDirty",!1);gb(this,"lastSerialized");gb(this,"getCenter",()=>tf.getBoundsCenter(this.bounds));gb(this,"getRotatedBounds",()=>{const {bounds:ja,props:{rotation:qa}}=this;return qa?tf.getBoundsFromPoints(tf.getRotatedCorners(ja,qa)):ja});gb(this,"hitTestPoint",ja=>{var qa=this.rotatedBounds;if(!this.props.rotation)return Dk.pointInBounds(ja,
qa);qa=tf.getRotatedCorners(qa,this.props.rotation);return Dk.pointInPolygon(ja,qa)});gb(this,"hitTestLineSegment",(ja,qa)=>{const Ha=tf.getBoundsFromPoints([ja,qa]),{rotatedBounds:Ra,props:{rotation:$a=0}}=this;return tf.boundsContain(Ra,Ha)||$a?h(ja,qa,tf.getRotatedCorners(this.bounds)).didIntersect:0<r(Ra,ja,qa).length});gb(this,"hitTestBounds",ja=>{const {rotatedBounds:qa,props:{rotation:Ha=0}}=this,Ra=tf.getRotatedCorners(this.bounds,Ha);return tf.boundsContain(ja,qa)||0<v([ja.minX,ja.minY],
[ja.width,ja.height],Ra).length});gb(this,"getExpandedBounds",()=>tf.expandBounds(this.getBounds(),this.bindingDistance));gb(this,"getBindingPoint",(ja,qa,Ha,Ra)=>{var $a=this.getBounds(),fb=this.getExpandedBounds();if(Dk.pointInBounds(ja,fb)){var jb=y(qa,Ha,fb).filter(Kb=>Kb.didIntersect).map(Kb=>Kb.points[0]);if(jb.length)return Ha=this.getCenter(),jb=jb.sort((Kb,Nb)=>be.dist(Nb,qa)-be.dist(Kb,qa))[0],jb=be.med(ja,jb),Ra?(Ra=2>be.dist(ja,Ha)?Ha:ja,$a=0):(Ra=2>be.distanceToLineSegment(ja,jb,Ha)?
Ha:jb,$a=Dk.pointInBounds(ja,$a)?this.bindingDistance:Math.max(this.bindingDistance,tf.getBoundsSides($a).map(Kb=>be.distanceToLineSegment(Kb[1][0],Kb[1][1],ja)).sort((Kb,Nb)=>Kb-Nb)[0])),fb=be.divV(be.sub(Ra,[fb.minX,fb.minY]),[fb.width,fb.height]),{point:be.clampV(fb,0,1),distance:$a}}});gb(this,"getSerialized",()=>jc(hf(Yd({},this.props),{type:this.type,nonce:this.nonce})));gb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Gc(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});
if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});gb(this,"validateProps",ja=>ja);gb(this,"update",(ja,qa=!1,Ha=!1)=>{qa||this.isDirty||this.setIsDirty(!0);qa||Ha||this.incNonce();Object.assign(this.props,this.validateProps(ja));return this});gb(this,"clone",()=>new this.constructor(this.serialized));gb(this,"onResetBounds",ja=>this);gb(this,"scale",[1,1]);gb(this,"onResizeStart",ja=>{var qa;this.scale=[...(null!=(qa=this.props.scale)?
qa:[1,1])];return this});gb(this,"onResize",(ja,qa)=>{const {bounds:Ha,rotation:Ra,scale:[$a,fb]}=qa;ja=[...this.scale];0>$a&&(ja[0]*=-1);0>fb&&(ja[1]*=-1);this.update({point:[Ha.minX,Ha.minY],scale:ja,rotation:Ra});return this});gb(this,"onHandleChange",(ja,{id:qa,delta:Ha})=>{if(void 0!==ja.handles){var Ra=qr(ja.handles);Ra[qa]=hf(Yd({},Ra[qa]),{point:be.add(Ha,ja.handles[qa].point)});var $a=tf.getCommonTopLeft(Object.values(Ra).map(fb=>fb.point));Object.values(Ra).forEach(fb=>{fb.point=be.sub(fb.point,
$a)});this.update({point:be.add(ja.point,$a),handles:Ra})}});var d,k;const K=this.constructor.id,da=null!=(d=this.constructor.defaultProps)?d:{};this.type=K;this.props=Yd(Yd({scale:[1,1]},da),a);this.nonce=null!=(k=a.nonce)?k:Date.now();Ue(this)}get id(){return this.props.id}setNonce(a){this.nonce=a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=
this.getBounds();const {stroke:d,strokeWidth:k,strokeType:K,opacity:da,fill:ja,noFill:qa,borderRadius:Ha}=this.props;return(0,AE.jsx)("rect",{fill:qa?"none":qh(ja,"background"),stroke:qh(d,"stroke"),strokeWidth:null!=k?k:2,strokeDasharray:"dashed"===K?"8 2":void 0,fillOpacity:null!=da?da:.2,width:a.width,height:a.height,rx:Ha,ry:Ha})}};gb(hl,"type");fe([yg],hl.prototype,"props",2);fe([yg],hl.prototype,"canResize",2);fe([yg],hl.prototype,"nonce",2);fe([yg],hl.prototype,"isDirty",2);fe([yg],hl.prototype,
"lastSerialized",2);fe([Eg],hl.prototype,"id",1);fe([ig],hl.prototype,"setNonce",1);fe([ig],hl.prototype,"incNonce",1);fe([ig],hl.prototype,"setIsDirty",1);fe([ig],hl.prototype,"setLastSerialized",1);fe([Eg],hl.prototype,"center",1);fe([Eg],hl.prototype,"bounds",1);fe([Eg],hl.prototype,"rotatedBounds",1);fe([Eg],hl.prototype,"serialized",1);fe([ig],hl.prototype,"update",2);var em=class extends hl{constructor(a={}){super(a);gb(this,"canBind",!0);gb(this,"getBounds",()=>{const [d,k]=this.props.point,
[K,da]=this.props.size;return{minX:d,minY:k,maxX:d+K,maxY:k+da,width:K,height:da}});gb(this,"getRotatedBounds",()=>tf.getBoundsFromPoints(tf.getRotatedCorners(this.bounds,this.props.rotation)));gb(this,"onResize",(d,k)=>{const {bounds:K,rotation:da,scale:[ja,qa]}=k;d=[...this.scale];0>ja&&(d[0]*=-1);0>qa&&(d[1]*=-1);this.update({point:[K.minX,K.minY],scale:d,rotation:da});return this.update({rotation:da,point:[K.minX,K.minY],size:[Math.max(1,K.width),Math.max(1,K.height)],scale:d})});gb(this,"validateProps",
d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return d});Ue(this)}};gb(em,"id","box");gb(em,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var qs=class extends hl{constructor(a={}){super(a);gb(this,"getBounds",()=>{const {pointBounds:d,props:{point:k}}=this;return tf.translateBounds(d,k)});gb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:k},bounds:K,rotatedPoints:da}=this;return d?tf.translateBounds(tf.getBoundsFromPoints(da),
k):K});gb(this,"normalizedPoints",[]);gb(this,"isResizeFlippedX",!1);gb(this,"isResizeFlippedY",!1);gb(this,"onResizeStart",()=>{var d;const {bounds:k,props:{points:K}}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const da=[k.width,k.height];this.normalizedPoints=K.map(ja=>yd.divV(ja,da));return this});gb(this,"onResize",(d,k)=>{const {bounds:K,scale:[da,ja]}=k,qa=[K.width,K.height];d=[...this.scale];0>da&&(d[0]*=-1);0>ja&&(d[1]*=-1);return this.update(da||ja?{point:[K.minX,K.minY],points:this.normalizedPoints.map(Ha=>
yd.mulV(Ha,qa).concat(Ha[2])),scale:d}:{point:[K.minX,K.minY],points:this.normalizedPoints.map(Ha=>yd.mulV(Ha,qa).concat(Ha[2]))})});gb(this,"hitTestPoint",d=>{const {props:{points:k,point:K}}=this;return Dk.pointNearToPolyline(yd.sub(d,K),k)});gb(this,"hitTestLineSegment",(d,k)=>{const {bounds:K,props:{points:da,point:ja}}=this;if(Dk.pointInBounds(d,K)||Dk.pointInBounds(k,K)||0<r(K,d,k).length){const qa=yd.sub(d,ja),Ha=yd.sub(k,ja);return h(qa,Ha,da).didIntersect||!!da.find(Ra=>5>yd.dist(qa,Ra)||
5>yd.dist(Ha,Ra))}return!1});gb(this,"hitTestBounds",d=>{const {rotatedBounds:k,props:{points:K,point:da}}=this,ja=tf.translateBounds(d,yd.neg(da));return tf.boundsContain(d,k)||K.every(qa=>Dk.pointInBounds(qa,ja))||tf.boundsCollide(d,k)&&0<D([ja.minX,ja.minY],[ja.width,ja.height],K).length});Ue(this)}get pointBounds(){const {props:{points:a}}=this;return tf.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:k},center:K}=this;if(!k)return d;const da=yd.sub(K,a);return d.map(ja=>
yd.rotWith(ja,da,k))}};gb(qs,"id","draw");gb(qs,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});fe([Eg],qs.prototype,"pointBounds",1);fe([Eg],qs.prototype,"rotatedPoints",1);var Ww=class extends em{constructor(a={}){super(a);gb(this,"getBounds",()=>{const {props:{point:[d,k],size:[K,da]}}=this;return tf.getRotatedEllipseBounds(d,k,K/2,da/2,0)});gb(this,"getRotatedBounds",()=>{const {props:{point:[d,k],size:[K,da],rotation:ja}}=this;return tf.getRotatedEllipseBounds(d,
k,K/2,da/2,ja)});gb(this,"hitTestPoint",d=>{const {props:{size:k,rotation:K},center:da}=this;return Dk.pointInEllipse(d,da,k[0],k[1],K||0)});gb(this,"hitTestLineSegment",(d,k)=>{const {props:{size:[K,da],rotation:ja=0},center:qa}=this;return g(d,k,qa,K,da,ja).didIntersect});gb(this,"hitTestBounds",d=>{const {props:{size:[k,K],rotation:da=0},rotatedBounds:ja}=this;var qa;if(!(qa=tf.boundsContain(d,ja))){const {minX:Ha,minY:Ra,width:$a,height:fb}=d;qa=0<t(this.center,k/2,K/2,da,[Ha,Ra],[$a,fb]).length}return qa});
Ue(this)}};gb(Ww,"id","ellipse");gb(Ww,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var Xw=class extends em{constructor(a={}){super(a);gb(this,"onResetBounds",d=>{const {clipping:k,size:K,point:da}=this.props;if(k){const [ja,qa,Ha,Ra]=Array.isArray(k)?k:[k,k,k,k];return this.update({clipping:0,point:[da[0]-Ra,da[1]-ja],size:[K[0]+(Ra-qa),K[1]+(ja-Ha)]})}if(d.asset){const {size:[ja,qa]}=d.asset;this.update({clipping:0,point:[da[0]+K[0]/2-ja/2,da[1]+K[1]/
2-qa/2],size:[ja,qa]})}return this});gb(this,"onResize",(d,k)=>{const {bounds:K,clip:da,scale:ja}=k;({clipping:k}=this.props);const {clipping:qa}=d;if(da){const {point:[Ha,Ra],size:[$a,fb]}=d,[jb,Kb,Nb,Hb]=qa?Array.isArray(qa)?qa:[qa,qa,qa,qa]:[0,0,0,0];k=[jb+(K.minY-Ra),Kb+(K.maxX-(Ha+$a)),Nb+(K.maxY-(Ra+fb)),Hb+(K.minX-Ha)]}else void 0!==qa&&(k=Array.isArray(qa)?qa:[qa,qa,qa,qa],k=[k[0]*ja[1],k[1]*ja[0],k[2]*ja[1],k[3]*ja[0]]);if(k&&Array.isArray(k)){const Ha=k;Ha.every((Ra,$a)=>0===$a||Ra===Ha[$a-
1])&&(k=Ha[0])}return this.update({point:[K.minX,K.minY],size:[Math.max(1,K.width),Math.max(1,K.height)],clipping:k})});Ue(this)}};gb(Xw,"id","ellipse");gb(Xw,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Cz=class extends hl{constructor(a={}){super(a);gb(this,"getBounds",()=>{const {points:d,props:{point:k}}=this;return tf.translateBounds(tf.getBoundsFromPoints(d),k)});gb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,
props:{point:k}}=this;return tf.translateBounds(tf.getBoundsFromPoints(d),k)});gb(this,"normalizedHandles",[]);gb(this,"onResizeStart",()=>{var d;const {props:{handles:k},bounds:K}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const da=[K.width,K.height];this.normalizedHandles=Object.values(k).map(ja=>yd.divV(ja.point,da));return this});gb(this,"onResize",(d,k)=>{const {bounds:K,scale:[da,ja]}=k,{props:{handles:qa},normalizedHandles:Ha}=this,Ra=[K.width,K.height];d=[...this.scale];0>da&&
(d[0]*=-1);0>ja&&(d[1]*=-1);return this.update({point:[K.minX,K.minY],handles:Object.values(qa).map(($a,fb)=>hf(Yd({},$a),{point:yd.mulV(Ha[fb],Ra)})),scale:d})});gb(this,"hitTestPoint",d=>{const {points:k}=this;return Dk.pointNearToPolyline(yd.sub(d,this.props.point),k)});gb(this,"hitTestLineSegment",(d,k)=>{const {bounds:K,points:da,props:{point:ja}}=this;if(Dk.pointInBounds(d,K)||Dk.pointInBounds(k,K)||0<r(K,d,k).length){const qa=yd.sub(d,ja),Ha=yd.sub(k,ja);return h(qa,Ha,da).didIntersect||!!da.find(Ra=>
5>yd.dist(qa,Ra)||5>yd.dist(Ha,Ra))}return!1});gb(this,"hitTestBounds",d=>{const {rotatedBounds:k,points:K,props:{point:da}}=this,ja=tf.translateBounds(d,yd.neg(da));return tf.boundsContain(d,k)||K.every(qa=>Dk.pointInBounds(qa,ja))||tf.boundsCollide(d,k)&&0<D([ja.minX,ja.minY],[ja.width,ja.height],K).length});gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Cz.defaultProps.handles);return d});Ue(this)}get points(){return Object.values(this.props.handles).map(a=>
a.point)}get centroid(){const {points:a}=this;return Sk.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,rotation:k}}=this;return k?Object.values(d).map(K=>yd.rotWith(K.point,a,k)):this.points}},rs=Cz;gb(rs,"id","polyline");gb(rs,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});fe([Eg],rs.prototype,"points",1);fe([Eg],rs.prototype,"centroid",1);fe([Eg],rs.prototype,"rotatedPoints",1);var Dz=class extends rs{constructor(a={}){super(a);
gb(this,"hideResizeHandles",!0);gb(this,"hideRotateHandle",!0);gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Dz.defaultProps.handles);return d});gb(this,"getHandlesChange",(d,k)=>{var K=Tl(d.handles,k);K=Tl(K,{start:{point:be.toFixed(K.start.point)},end:{point:be.toFixed(K.end.point)}});if(!be.isEqual(K.start.point,K.end.point)){k={point:d.point,handles:qr(K)};d=d.point;K=tf.translateBounds(tf.getBoundsFromPoints(Object.values(K).map(ja=>
ja.point)),k.point);var da=be.sub([K.minX,K.minY],d);be.isEqual(da,[0,0])||(Object.values(k.handles).forEach(ja=>{ja.point=be.toFixed(be.sub(ja.point,da))}),k.point=be.toFixed(be.add(k.point,da)));return k}});Ue(this)}},Nt=Dz;gb(Nt,"id","line");gb(Nt,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var aq=class extends em{constructor(a={}){super(a);gb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,
props:{point:k},offset:K}=this;return tf.translateBounds(tf.getBoundsFromPoints(d),yd.add(k,K))});gb(this,"hitTestPoint",d=>{const {vertices:k}=this;return Dk.pointInPolygon(yd.add(d,this.props.point),k)});gb(this,"hitTestLineSegment",(d,k)=>{const {vertices:K,props:{point:da}}=this;return h(yd.sub(d,da),yd.sub(k,da),K).didIntersect});gb(this,"hitTestBounds",d=>{const {rotatedBounds:k,offset:K,rotatedVertices:da,props:{point:ja}}=this,qa=tf.translateBounds(d,yd.neg(yd.add(ja,K)));return tf.boundsContain(d,
k)||da.every(Ha=>Dk.pointInBounds(Ha,qa))||0<v([qa.minX,qa.minY],[qa.width,qa.height],da).length});gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});Ue(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},vertices:d}=this;return d.map(k=>yd.add(k,a))}get centroid(){const {vertices:a}=this;return Sk.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:k}}=this;return k?a.map(K=>
yd.rotWith(K,d,k)):a}get offset(){const {props:{size:[a,d]}}=this,k=tf.getBoundsCenter(tf.getBoundsFromPoints(this.vertices));return yd.sub(yd.div([a,d],2),k)}getVertices(a=0){const {ratio:d,sides:k,size:K}=this.props;return 3===k?Sk.getTriangleVertices(K,a,d):Sk.getPolygonVertices(K,k,a,d)}};gb(aq,"id","polygon");gb(aq,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});fe([Eg],aq.prototype,"vertices",1);fe([Eg],aq.prototype,"pageVertices",
1);fe([Eg],aq.prototype,"centroid",1);fe([Eg],aq.prototype,"rotatedVertices",1);fe([Eg],aq.prototype,"offset",1);var Yw=class extends em{constructor(a={}){super(a);gb(this,"canEdit",!0);gb(this,"canFlip",!1);Ue(this)}};gb(Yw,"id","text");gb(Yw,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var ev=class extends em{constructor(a={}){super(a);gb(this,"canEdit",!1);gb(this,"canFlip",!1);gb(this,"getBounds",()=>0===this.shapes.length?(lg().deleteShapes([this.id]),
{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):tf.getCommonBounds(this.shapes.map(d=>d.getBounds())));Ue(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};gb(ev,"id","group");gb(ev,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});fe([Eg],ev.prototype,"shapes",1);var ss=class{constructor(){gb(this,"_id");gb(this,"_initial");gb(this,"_states");gb(this,"_isActive",!1);gb(this,"cursor");
gb(this,"_disposables",[]);gb(this,"children",new Map([]));gb(this,"registerStates",k=>{k.forEach(K=>this.children.set(K.id,new K(this,this)));return this});gb(this,"deregisterStates",k=>{k.forEach(K=>{var da;null==(da=this.children.get(K.id))?void 0:da.dispose();this.children.delete(K.id)});return this});gb(this,"currentState",{});gb(this,"transition",(k,K={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${k}.`);const da=this.children.get(k),ja=this.currentState;
if(!da)throw Error(`Could not find a state named ${k}.`);Gc(()=>{this.currentState?(ja._events.onExit(hf(Yd({},K),{toId:k})),ja.dispose(),this.setCurrentState(da),this._events.onTransition(hf(Yd({},K),{fromId:ja.id,toId:k})),da._events.onEnter(hf(Yd({},K),{fromId:ja.id}))):(this.currentState=da,da._events.onEnter(hf(Yd({},K),{fromId:""})))});return this});gb(this,"isIn",k=>{k=k.split(".").reverse();let K=this;for(;0<k.length;){const da=k.pop();if(!da)return!0;if(K.currentState.id===da){if(0===k.length)return!0;
K=K.currentState}else break}return!1});gb(this,"isInAny",(...k)=>k.some(this.isIn));gb(this,"forwardEvent",(k,...K)=>{var da,ja;(null==(ja=null==(da=this.currentState)?void 0:da._events)?0:ja[k])&&Gc(()=>{var qa;return null==(qa=this.currentState._events)?void 0:qa[k](...K)})});gb(this,"_events",{onTransition:k=>{var K;null==(K=this.onTransition)?void 0:K.call(this,k)},onEnter:k=>{var K;this._isActive=!0;this.initial&&this.transition(this.initial,k);null==(K=this.onEnter)?void 0:K.call(this,k)},onExit:k=>
{var K,da,ja;this._isActive=!1;null==(da=null==(K=this.currentState)?void 0:K.onExit)?void 0:da.call(K,{toId:"parent"});null==(ja=this.onExit)?void 0:ja.call(this,k)},onPointerDown:(k,K)=>{var da;null==(da=this.onPointerDown)?void 0:da.call(this,k,K);this.forwardEvent("onPointerDown",k,K)},onPointerUp:(k,K)=>{var da;null==(da=this.onPointerUp)?void 0:da.call(this,k,K);this.forwardEvent("onPointerUp",k,K)},onPointerMove:(k,K)=>{var da;null==(da=this.onPointerMove)?void 0:da.call(this,k,K);this.forwardEvent("onPointerMove",
k,K)},onPointerEnter:(k,K)=>{var da;null==(da=this.onPointerEnter)?void 0:da.call(this,k,K);this.forwardEvent("onPointerEnter",k,K)},onPointerLeave:(k,K)=>{var da;null==(da=this.onPointerLeave)?void 0:da.call(this,k,K);this.forwardEvent("onPointerLeave",k,K)},onDoubleClick:(k,K)=>{var da;null==(da=this.onDoubleClick)?void 0:da.call(this,k,K);this.forwardEvent("onDoubleClick",k,K)},onKeyDown:(k,K)=>{var da;this._events.onModifierKey(k,K);null==(da=this.onKeyDown)?void 0:da.call(this,k,K);this.forwardEvent("onKeyDown",
k,K)},onKeyUp:(k,K)=>{var da;this._events.onModifierKey(k,K);null==(da=this.onKeyUp)?void 0:da.call(this,k,K);this.forwardEvent("onKeyUp",k,K)},onPinchStart:(k,K)=>{var da;null==(da=this.onPinchStart)?void 0:da.call(this,k,K);this.forwardEvent("onPinchStart",k,K)},onPinch:(k,K)=>{var da;null==(da=this.onPinch)?void 0:da.call(this,k,K);this.forwardEvent("onPinch",k,K)},onPinchEnd:(k,K)=>{var da;null==(da=this.onPinchEnd)?void 0:da.call(this,k,K);this.forwardEvent("onPinchEnd",k,K)},onModifierKey:(k,
K)=>{switch(K.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(k,K)}}});gb(this,"onEnter");gb(this,"onExit");gb(this,"onTransition");gb(this,"onPointerDown");gb(this,"onPointerUp");gb(this,"onPointerMove");gb(this,"onPointerEnter");gb(this,"onPointerLeave");gb(this,"onDoubleClick");gb(this,"onKeyDown");gb(this,"onKeyUp");gb(this,"onPinchStart");gb(this,"onPinch");gb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;
this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=a}};gb(ss,"id");gb(ss,"shortcuts");fe([yg],ss.prototype,"currentState",2);fe([ig],ss.prototype,"setCurrentState",
1);var Zw=class extends ss{constructor(a,d){var k,K;super();gb(this,"_root");gb(this,"_parent");gb(this,"children",new Map([]));gb(this,"registerStates",da=>{da.forEach(ja=>this.children.set(ja.id,new ja(this,this._root)));return this});gb(this,"deregisterStates",da=>{da.forEach(ja=>{var qa;null==(qa=this.children.get(ja.id))?void 0:qa.dispose();this.children.delete(ja.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(k=this.initial)?
k:this.states[0].id,k=this.children.get(a))&&(this.setCurrentState(k),null==(K=this.currentState)?void 0:K._events.onEnter({fromId:"initial"}));Ue(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};gb(Zw,"cursor");var bq=class extends Zw{constructor(){super(...arguments);gb(this,"isLocked",!1);gb(this,"previous");gb(this,"onEnter",({fromId:a})=>{this.previous=
a;this.cursor&&this.app.cursors.setCursor(this.cursor)});gb(this,"onTransition",a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Yh=class extends Zw{get app(){return this.root}get tool(){return this.parent}},Ez=class extends Yh{constructor(){super(...arguments);gb(this,"cursor","crosshair");gb(this,"creatingShape");gb(this,"aspectRatio");gb(this,"initialBounds",
{});gb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:k}}=this.app;var {Shape:K}=this.tool;K=new K({id:tk(),type:K.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:be.abs(be.sub(k,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};K.canChangeAspectRatio||(K.aspectRatio?(this.aspectRatio=K.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=
1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=K;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(K);this.app.setSelectedShapes([K])});gb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:d}=this,{currentPoint:k,originPoint:K,shiftKey:da}=this.app.inputs;a=da||this.creatingShape.props.isAspectRatioLocked||
!this.creatingShape.canChangeAspectRatio;d=tf.getTransformedBoundingBox(d,"bottom_right_corner",be.sub(k,K),0,a);this.app.settings.snapToGrid&&!a&&(d=tf.snapBoundsToGrid(d,8));this.creatingShape.update({point:[d.minX,d.minY],size:[d.width,d.height]})}});gb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});gb(this,"onKeyDown",(a,d)=>
{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};gb(Ez,"id","creating");var Fz=class extends Yh{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});
gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(Fz,"id","idle");var Gz=class extends Yh{constructor(){super(...arguments);gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<yd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});gb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};gb(Gz,"id","pointing");var lp=class extends bq{constructor(){super(...arguments);
gb(this,"cursor","crosshair")}};gb(lp,"id","box");gb(lp,"states",[Fz,Gz,Ez]);gb(lp,"initial","idle");var Hz=class extends Yh{constructor(){super(...arguments);gb(this,"shape",{});gb(this,"points",[[0,0,.5]]);gb(this,"persistDebounced",Uj(this.app.persist,200));gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:k}=this.tool;var {originPoint:K}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
k){this.shape=k;var {shape:da}=this;var ja=da.props.points[da.props.points.length-1];const Ha=yd.sub(K,da.props.point).concat(null!=(a=K[2])?a:.5);this.points=[...da.props.points,ja,ja];const Ra=Math.ceil(yd.dist(ja,K)/16);for(let $a=0,fb=$a/(Ra-1);$a<Ra;$a++){a=this.points;K=a.push;da=yd.lrp(ja,Ha,fb);var qa=ja[2];K.call(a,da.concat.call(da,qa+(Ha[2]-qa)*fb))}this.addNextPoint(Ha)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ja=K[2])?ja:.5]],this.shape=new d({id:tk(),type:d.id,parentId:this.app.currentPage.id,
point:K.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});gb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:k}=this.app.inputs;yd.isEqual(k,d)||this.addNextPoint(yd.sub(d,a.props.point).concat(d[2]))});gb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,
points:this.tool.simplify?Dk.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,k=yd.min(a,
[0,0]);this.points.push(a);0>k[0]||0>k[1]?(this.points=this.points.map(K=>yd.sub(K,k).concat(K[2])),d.update({point:yd.add(d.props.point,k),points:this.points})):d.update({points:this.points})}};gb(Hz,"id","creating");var Iz=class extends Yh{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};
gb(Iz,"id","idle");var Jz=class extends Yh{constructor(){super(...arguments);gb(this,"origin",[0,0]);gb(this,"prevDelta",[0,0]);gb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};gb(Jz,"id","pinching");var Ot=class extends bq{constructor(){super(...arguments);gb(this,"cursor","crosshair");gb(this,"simplify",!0);gb(this,"simplifyTolerance",
1);gb(this,"previousShape");gb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};gb(Ot,"id","draw");gb(Ot,"states",[Iz,Hz,Jz]);gb(Ot,"initial","idle");var Kz=class extends Yh{constructor(){super(...arguments);gb(this,"points",[[0,0,.5]]);gb(this,"hitShapes",new Set);gb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});gb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;yd.isEqual(d,a)||(this.points.push(a),
this.app.shapesInViewport.filter(k=>k.hitTestLineSegment(d,a)).forEach(k=>this.hitShapes.add(k)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});gb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};gb(Kz,"id","erasing");var Lz=class extends Yh{constructor(){super(...arguments);gb(this,"onPointerDown",
(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(Lz,"id","idle");var Mz=class extends Yh{constructor(){super(...arguments);gb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>
d.hitTestPoint(a)))});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<yd.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});gb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};gb(Mz,"id","pointing");var fv=class extends bq{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(fv,"id","erase");gb(fv,"states",[Lz,Mz,Kz]);gb(fv,
"initial","idle");var $w=class extends Yh{constructor(){super(...arguments);gb(this,"handle",{});gb(this,"handleId","end");gb(this,"currentShape",{});gb(this,"initialShape",{});gb(this,"bindableShapeIds",[]);gb(this,"startBindingShapeId");gb(this,"newStartBindingId","");gb(this,"draggedBindingId","");gb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:k,currentPoint:K,modKey:da,altKey:ja},settings:{snapToGrid:qa}}=this.app;var Ha=this.app.getShapeById(this.initialShape.id),
{handles:Ra}=this.initialShape,$a=this.handleId,fb="start"===this.handleId?"end":"start";if(!be.isEqual(d,K)){var jb=be.sub(K,k);if(a){var Kb=Ra[fb].point,Nb=be.add(Ra[$a].point,jb),Hb=be.angle(Kb,Nb);Kb=be.rotWith(Nb,Kb,Ml.snapAngleToSegments(Hb,24)-Hb);jb=be.add(jb,be.sub(Kb,Nb))}jb=be.add(Ra[$a].point,jb);Ra={[$a]:hf(Yd({},Ra[$a]),{point:qa?be.snap(jb,8):be.toFixed(jb),bindingId:void 0})};var fc=this.currentShape.getHandlesChange(this.initialShape,Ra);if(fc){Ra=Tl(Ha.props,fc);var qc={},Wb;$a=
Ra.handles[$a];fb=Ra.handles[fb];if(this.startBindingShapeId){var kc;if(jb=this.app.getShapeById(this.startBindingShapeId)){Nb=jb.getCenter();Kb=Ra.handles.end;var hc=be.add(Ra.handles.start.point,Ra.point);be.isEqual(hc,Nb)&&hc[1]++;Hb=jb.hitTestPoint(K);hc=be.uni(be.sub(hc,Nb));const Fc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];da||jb.hitTestPoint(be.add(Ra.point,Kb.point))||(kc=Hc(Ha.props,jb,"start",this.newStartBindingId,Nb,Nb,hc,Hb));kc&&!Fc?(qc[this.newStartBindingId]=
kc,Ra.handles.start.bindingId=kc.id):!kc&&Fc&&(console.log("removing start binding"),delete qc[this.newStartBindingId],Ra.handles.start.bindingId=void 0)}}if(!da){kc=be.add(fb.point,Ra.point);fb=be.add($a.point,Ra.point);$a=be.uni(be.sub(fb,kc));const Fc=be.add(Ra.point,Ra.handles.start.point),Mc=be.add(Ra.point,Ra.handles.end.point);jb=this.bindableShapeIds.map(ud=>this.app.getShapeById(ud)).sort((ud,Jd)=>Jd.nonce-ud.nonce).filter(ud=>![Fc,Mc].every(Jd=>ud.hitTestPoint(Jd)));for(const ud of jb)if(Wb=
Hc(Ha.props,ud,this.handleId,this.draggedBindingId,fb,kc,$a,ja))break}Wb?(qc[this.draggedBindingId]=Wb,Ra=Tl(Ra,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(Ha=Ha.props.handles[this.handleId].bindingId,void 0!==Ha&&(delete qc[Ha],Ra=Tl(Ra,{handles:{[this.handleId]:{bindingId:void 0}}})));fc=this.currentShape.getHandlesChange(Ra,Ra.handles);Gc(()=>{var Fc;if(fc){this.currentShape.update(fc);this.app.currentPage.updateBindings(qc);const Mc=Object.values(null!=(Fc=fc.handles)?Fc:
{}).map(ud=>ud.bindingId).map(ud=>this.app.currentPage.bindings[ud]).filter(Boolean).flatMap(ud=>[ud.toId,ud.fromId].filter(Boolean));this.app.setBindingShapes(Mc)}})}}});gb(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});gb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),
this.tool.transition("idle")}})}};gb($w,"id","creating");var Nz=class extends $w{constructor(){super(...arguments);gb(this,"onEnter",()=>{var a;this.app.history.pause();this.newStartBindingId=tk();this.draggedBindingId=tk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:k}=this.app.inputs;d=new d(hf(Yd({},d.defaultProps),{id:tk(),type:d.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?be.snap(k,8):k,fill:this.app.settings.color,
stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=jc(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);this.app.setSelectedShapes([d]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(K=>this.app.getShapeById(K)).filter(K=>Dk.pointInBounds(k,K.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};gb(Nz,"id","creating");
var Oz=class extends Yh{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});gb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);
break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});gb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};gb(Oz,"id","idle");var Pz=class extends Yh{constructor(){super(...arguments);gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<yd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};
gb(Pz,"id","pointing");var gv=class extends bq{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(gv,"id","line");gb(gv,"states",[Oz,Pz,Nz]);gb(gv,"initial","idle");var Qz=class extends Yh{constructor(){super(...arguments);gb(this,"cursor","crosshair");gb(this,"creatingShape");gb(this,"aspectRatio");gb(this,"initialBounds",{});gb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:k}=this.tool,K=new k({id:tk(),type:k.id,parentId:a.id,point:[...d],text:"",
size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=K;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);Gc(()=>{this.app.currentPage.addShapes(K);const da=this.app.settings.snapToGrid?be.snap([...d],8):d,{bounds:ja}=K;K.update({point:be.sub(da,[ja.width/2,ja.height/2])});this.app.transition("select");this.app.setSelectedShapes([K]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};
gb(Qz,"id","creating");var Rz=class extends Yh{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});gb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(Rz,"id","idle");var hv=class extends bq{constructor(){super(...arguments);
gb(this,"cursor","crosshair")}};gb(hv,"id","box");gb(hv,"states",[Rz,Qz]);gb(hv,"initial","idle");var BE=Jf(LD()),CE=class extends BE.default{constructor(){super(...arguments);gb(this,"toBBox",a=>a.rotatedBounds)}},Sz=class extends Yh{constructor(){super(...arguments);gb(this,"initialSelectedIds",[]);gb(this,"initialSelectedShapes",[]);gb(this,"tree",new CE);gb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:k}=this.app;this.initialSelectedIds=Array.from(k.values());this.initialSelectedShapes=
Array.from(a.values());this.tree.load(d.shapes)});gb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});gb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:k,currentPoint:K}}=this.app,da=tf.getBoundsFromPoints([K,k],0);this.app.setBrush(da);const ja=[...(new Set(this.tree.search(da).filter(qa=>d?tf.boundsContain(da,qa.rotatedBounds):qa.hitTestBounds(da)).filter(qa=>"group"!==qa.type).map(qa=>{var Ha;return null!=(Ha=this.app.getParentGroup(qa))?
Ha:qa})))];a?ja.every(qa=>this.initialSelectedShapes.includes(qa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(qa=>!ja.includes(qa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...ja]))]):this.app.setSelectedShapes(ja);this.app.viewport.panToPointWhenNearBounds(K)});gb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});gb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),
this.tool.transition("idle")}})}};gb(Sz,"id","brushing");var Tz=class extends Yh{constructor(){super(...arguments);gb(this,"onEnter",a=>{var d;const {selectedIds:k,inputs:{shiftKey:K}}=this.app;if("shape"===a.type&&!k.has(a.shape.id)){const da=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;K?this.app.setSelectedShapes([...Array.from(k.values()),da.id]):this.app.setSelectedShapes([da])}});gb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};gb(Tz,"id","contextMenu");var Uz=class extends Yh{constructor(){super(...arguments);
gb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});gb(this,"onExit",()=>{});gb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});gb(this,"onPointerDown",(a,d)=>{const {selectedShapes:k,inputs:{ctrlKey:K}}=this.app;
if(2===d.button)this.tool.transition("contextMenu",a);else if(K)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(k.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:da,inputs:ja}=this.app;
da&&Dk.pointInBounds(ja.currentPoint,da)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",a);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",Yd(Yd({},d),a))}});gb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})});gb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});gb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&
!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};gb(Uz,"id","idle");var Vz=class extends Yh{constructor(){super(...arguments);gb(this,"onEnter",a=>{var d;const {selectedIds:k,inputs:{shiftKey:K}}=this.app,da=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;K?this.app.setSelectedShapes([...Array.from(k.values()),da.id]):this.app.setSelectedShapes([da])});gb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<yd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(Vz,"id","pointingShape");var Wz=class extends Yh{constructor(){super(...arguments);gb(this,"cursor","move");gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<yd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
gb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(Wz,"id","pointingBoundsBackground");var Xz=class extends Yh{constructor(){super(...arguments);gb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});gb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<yd.dist(a,d)&&this.tool.transition("brushing")});gb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};gb(Xz,"id","pointingCanvas");var Yz=class extends Yh{constructor(){super(...arguments);gb(this,"cursor","move");gb(this,
"isCloning",!1);gb(this,"didClone",!1);gb(this,"initialPoints",{});gb(this,"initialShapePoints",{});gb(this,"initialClonePoints",{});gb(this,"clones",[]);gb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,inputs:k}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(d.map(({id:K,props:{point:da}})=>[K,da.slice()]));document.querySelectorAll("input,textarea").forEach(K=>K.blur());null==(a=document.getSelection())?void 0:a.empty();k.altKey?this.startCloning():
this.moveSelectedShapesToPointer()});gb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});gb(this,"onPointerMove",()=>{const {inputs:{currentPoint:a}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});gb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onPointerUp",()=>{this.app.history.resume();
this.app.persist();this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(k=>{k.update({point:this.initialPoints[k.id]})}),this.tool.transition("idle")}});gb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:k,allSelectedShapes:K}=this.app;k.removeShapes(...K);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));
this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:k}}=this.app,{initialPoints:K}=this,da=yd.sub(k,d);a&&(Math.abs(da[0])<Math.abs(da[1])?da[0]=0:da[1]=0);Gc(()=>{this.app.allSelectedShapesArray.filter(ja=>!ja.props.isLocked).forEach(ja=>{let qa=yd.add(K[ja.id],da);this.app.settings.snapToGrid&&(qa=yd.snap(qa,8));ja.update({point:qa})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>
{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d(hf(Yd({},a.serialized),{id:tk(),type:a.type,point:this.initialPoints[a.id],rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);
this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};gb(Yz,"id","translating");var Zz=class extends Yh{constructor(){super(...arguments);gb(this,"pointedSelectedShape");gb(this,"onEnter",a=>{this.pointedSelectedShape=a.shape});gb(this,"onExit",()=>{this.pointedSelectedShape=void 0});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<yd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
gb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:k}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:k}=this.app),k=Array.from(k.values()),k.splice(k.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(k);else{if(1===k.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof em&&Dk.pointInBounds(d,
this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(Zz,"id","pointingSelectedShape");var $z=class extends Yh{constructor(){super(...arguments);gb(this,"info",{});gb(this,"onEnter",a=>{this.info=a;this.updateCursor()});gb(this,"onExit",()=>{this.app.cursors.reset()});
gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<yd.dist(a,d)&&this.tool.transition("resizing",this.info)});gb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(Wu[this.info.handle],this.app.selectionBounds.rotation)}};gb($z,"id","pointingResizeHandle");var aA=class extends Yh{constructor(){super(...arguments);
gb(this,"isSingle",!1);gb(this,"handle","bottom_right_corner");gb(this,"snapshots",{});gb(this,"initialCommonBounds",{});gb(this,"selectionRotation",0);gb(this,"resizeType","corner");gb(this,"onEnter",a=>{var d,k;const {history:K,selectedShapesArray:da,selectionBounds:ja}=this.app;if(!ja)throw Error("Expected a selected bounds.");this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";
this.app.cursors.setCursor(aA.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);K.pause();const qa=tf.getBoundsFromPoints(da.map(Ha=>tf.getBoundsCenter(Ha.bounds)));this.selectionRotation=(this.isSingle=1===da.length)?null!=(k=da[0].props.rotation)?k:0:0;this.initialCommonBounds=Yd({},ja);this.snapshots=Object.fromEntries(da.map(Ha=>{const Ra=Yd({},Ha.bounds),[$a,fb]=tf.getBoundsCenter(Ra);return[Ha.id,{props:Ha.serialized,bounds:Ra,transformOrigin:[($a-this.initialCommonBounds.minX)/
this.initialCommonBounds.width,(fb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[($a-qa.minX)/qa.width,(fb-qa.minY)/qa.height],isAspectRatioLocked:Ha.props.isAspectRatioLocked||!(Ha.canChangeAspectRatio&&!Ha.props.rotation)}]}));da.forEach(Ha=>{var Ra;null==(Ra=Ha.onResizeStart)?void 0:Ra.call(Ha,{isSingle:this.isSingle})})});gb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});
gb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:k,originPoint:K,currentPoint:da}}=this.app,{handle:ja,snapshots:qa,initialCommonBounds:Ha}=this;let Ra=yd.sub(da,K);a&&(Ra=yd.mul(Ra,2));const $a=this.app.selectedShapes.values().next().value;let fb=tf.getTransformedBoundingBox(Ha,ja,Ra,this.selectionRotation,d||this.isSingle&&(k?!("clipping"in $a.props):!$a.canChangeAspectRatio||$a.props.isAspectRatioLocked));a&&(fb=Yd(Yd({},fb),tf.centerBounds(fb,tf.getBoundsCenter(Ha))));const {scaleX:jb,
scaleY:Kb}=fb;this.app.selectedShapes.forEach(Nb=>{var Hb,fc;const {isAspectRatioLocked:qc,props:Wb,bounds:kc,transformOrigin:hc}=qa[Nb.id];let Fc=tf.getRelativeTransformedBoundingBox(fb,Ha,kc,0>jb,0>Kb);if(Nb.canResize.some(Jd=>Jd)||Nb.props.isSizeLocked||!this.isSingle){var Mc=[jb,Kb],ud=null!=(Hb=Wb.rotation)?Hb:0;Hb=tf.getBoundsCenter(Fc);Nb.canFlip||(Mc=yd.abs(Mc));Nb.canScale||(Mc=null!=(fc=Wb.scale)?fc:[1,1]);if(ud&&0>jb&&0<=Kb||0>Kb&&0<=jb)ud*=-1;this.app.settings.snapToGrid&&!qc&&(Fc=tf.snapBoundsToGrid(Fc,
8));Nb.onResize(Wb,{center:Hb,rotation:ud,scale:Mc,bounds:Fc,type:ja,clip:k,transformOrigin:hc})}});this.updateCursor(jb,Kb);this.app.viewport.panToPointWhenNearBounds(da)});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(k=>{k.update(Yd({},this.snapshots[k.id].props))}),this.tool.transition("idle")}})}updateCursor(a,d){var k,K,da,ja;const qa=0>a&&0<=d;a=0>
d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":qa||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(k=this.app.selectionBounds)?void 0:k.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(K=this.app.selectionBounds)?void 0:K.rotation);break;case "top_right_corner":case "bottom_left_corner":qa||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==
(da=this.app.selectionBounds)?void 0:da.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ja=this.app.selectionBounds)?void 0:ja.rotation)}}},ax=aA;gb(ax,"id","resizing");gb(ax,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var bA=class extends Yh{constructor(){super(...arguments);
gb(this,"cursor","rotate");gb(this,"handle","");gb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<yd.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(Wu[this.handle],
this.app.selectionRotation)}};gb(bA,"id","pointingRotateHandle");var cA=class extends Yh{constructor(){super(...arguments);gb(this,"info",{});gb(this,"onEnter",a=>{this.info=a});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<yd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(cA,"id","pointingShapeBehindBounds");var bx=class extends Yh{constructor(){super(...arguments);gb(this,"cursor","rotate");gb(this,"snapshot",{});gb(this,"initialCommonCenter",[0,0]);gb(this,"initialCommonBounds",{});gb(this,"initialAngle",0);gb(this,"initialSelectionRotation",0);gb(this,"handle","");gb(this,"onEnter",a=>{const {history:d,selectedShapesArray:k,selectionBounds:K}=this.app;
if(!K)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=Yd({},K);this.initialCommonCenter=tf.getBoundsCenter(K);this.initialAngle=yd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(k.map(da=>[da.id,{point:[...da.props.point],center:[...da.center],rotation:da.props.rotation,handles:"handles"in da?qr(da.handles):void 0}]));this.updateCursor()});gb(this,
"onExit",()=>{this.app.history.resume();this.snapshot={}});gb(this,"onPointerMove",()=>{const {selectedShapes:a,inputs:{shiftKey:d,currentPoint:k}}=this.app,{snapshot:K,initialCommonCenter:da,initialAngle:ja,initialSelectionRotation:qa}=this;let Ha=yd.angle(da,k)-ja;d&&(Ha=Ml.snapAngleToSegments(Ha,24));a.forEach($a=>{var fb=K[$a.id];let jb=0;if(d){var {rotation:Kb=0}=fb;jb=Ml.snapAngleToSegments(Kb,24)-Kb}const Nb=yd.sub(fb.center,fb.point);Kb=yd.rotWith(fb.center,da,Ha);if("handles"in $a){fb=fb.handles;
const Hb=fb.map(qc=>yd.rotWith(qc.point,Nb,Ha)),fc=tf.getCommonTopLeft(Hb);$a.update({point:yd.add(fc,yd.sub(Kb,Nb)),handles:fb.map((qc,Wb)=>hf(Yd({},qc),{point:yd.sub(Hb[Wb],fc)}))})}else $a.update({point:yd.sub(Kb,Nb),rotation:Ml.clampRadians((fb.rotation||0)+Ha+jb)})});const Ra=Ml.clampRadians(qa+Ha);this.app.setSelectionRotation(d?Ml.snapAngleToSegments(Ra,24):Ra);this.updateCursor()});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,
"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(k=>{k.update(this.snapshot[k.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(Wu[this.handle],this.app.selectionRotation)}};gb(bx,"id","rotating");var dA=class extends Yh{constructor(){super(...arguments);gb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")});gb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
gb(dA,"id","pinching");var eA=class extends $w{constructor(){super(...arguments);gb(this,"cursor","grabbing");gb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=tk();this.draggedBindingId=tk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=jc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};gb(eA,"id","translatingHandle");var fA=class extends Yh{constructor(){super(...arguments);
gb(this,"cursor","grabbing");gb(this,"info",{});gb(this,"onEnter",a=>{this.info=a});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<yd.dist(a,d)&&this.tool.transition("translatingHandle",this.info)});gb(this,"onPointerUp",()=>{this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(fA,"id","pointingHandle");var gA=class extends Yh{constructor(){super(...arguments);gb(this,"handle");gb(this,"onEnter",
a=>{var d;this.app.cursors.setCursor(Wu[a.handle],null!=(d=this.app.selectionBounds.rotation)?d:0);this.handle=a.handle});gb(this,"onExit",()=>{this.app.cursors.reset()});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
a);break;default:this.tool.transition("pointingResizeHandle",a)}}});gb(this,"onPointerLeave",()=>{this.tool.transition("idle")});gb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var k=this.app.selectedShapes.values().next().value;if(!k.canEdit||this.app.readOnly||k.props.isLocked)k.onResetBounds({asset:k.props.assetId?this.app.assets[k.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":null==(d=k.onResetBounds)?void 0:d.call(k,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:k})}}})}};gb(gA,"id","hoveringSelectionHandle");var hA=class extends Yh{constructor(){super(...arguments);gb(this,"editingShape",{});gb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});gb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=
this.editingShape.props.text.trim();""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",
a);break;case "canvas":a.order||this.tool.transition("idle",a)}});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":Gc(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};gb(hA,"id","editingShape");var iA=class extends Yh{constructor(){super(...arguments);gb(this,"minimapZoom",1);gb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});gb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");
var k=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(d&&k){const K=d.getBoundingClientRect();this.minimapRect.height=K.height;this.minimapRect.width=K.width;this.minimapRect.minX=K.left;this.minimapRect.minY=K.top;this.minimapRect.maxX=K.right;this.minimapRect.maxY=K.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=yd.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);k=k.getBoundingClientRect();k=yd.mul(yd.sub(a,[k.left+k.width/2,k.top+k.height/
2]),this.minimapZoom);return yd.sub(this.app.viewport.camera.point,k)}});gb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});gb(this,"onPointerMove",(a,d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});gb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};gb(iA,"id","pointingMinimap");var ts=class extends bq{constructor(){super(...arguments);gb(this,"returnTo",
"");gb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};gb(ts,"id","select");gb(ts,"initial","idle");gb(ts,"shortcut","whiteboard/select");gb(ts,"states",[Uz,Sz,Tz,Xz,Vz,cA,Zz,Wz,gA,$z,bA,iA,fA,eA,Yz,ax,bx,bx,dA,hA]);var jA=class extends Yh{constructor(){super(...arguments);gb(this,"cursor","grabbing");gb(this,"originalScreenPoint",[]);gb(this,"originalCameraPoint",[]);gb(this,"prevState","idle");gb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=
this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});gb(this,"onPointerMove",(a,d)=>{a=be.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:be.sub(this.originalCameraPoint,be.div(a,this.app.viewport.camera.zoom))})});gb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};gb(jA,"id","panning");var kA=class extends Yh{constructor(){super(...arguments);gb(this,"onEnter",a=>{this.parent.prevTool&&
a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};gb(kA,"id","idle");var lA=class extends Yh{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(lA,
"id","idleHold");var mA=class extends Yh{constructor(){super(...arguments);gb(this,"origin",[0,0]);gb(this,"prevDelta",[0,0]);gb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};gb(mA,"id","pinching");var us=class extends bq{constructor(){super(...arguments);gb(this,"cursor","grab");gb(this,"prevTool",null);gb(this,"onEnter",a=>{this.prevTool=
null==a?void 0:a.prevTool});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});gb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};gb(us,"id","move");gb(us,"shortcut","whiteboard/pan");gb(us,"states",[kA,lA,jA,mA]);gb(us,"initial","idle");var il=class{constructor(a,d={}){gb(this,"lastShapesNounces",null);gb(this,"app");gb(this,"id");gb(this,"name");gb(this,"shapes",[]);gb(this,"bindings",{});gb(this,"nonce",0);gb(this,"bringForward",
Ha=>{const Ra=this.parseShapesArg(Ha);Ra.sort(($a,fb)=>this.shapes.indexOf(fb)-this.shapes.indexOf($a)).map($a=>this.shapes.indexOf($a)).forEach($a=>{if($a!==this.shapes.length-1&&!Ra.includes(this.shapes[$a+1])){var fb=this.shapes[$a];this.shapes[$a]=this.shapes[$a+1];this.shapes[$a+1]=fb}});this.app.persist();return this});gb(this,"sendBackward",Ha=>{const Ra=this.parseShapesArg(Ha);Ra.sort(($a,fb)=>this.shapes.indexOf($a)-this.shapes.indexOf(fb)).map($a=>this.shapes.indexOf($a)).forEach($a=>{if(0!==
$a&&!Ra.includes(this.shapes[$a-1])){var fb=this.shapes[$a];this.shapes[$a]=this.shapes[$a-1];this.shapes[$a-1]=fb}});this.app.persist();return this});gb(this,"bringToFront",Ha=>{const Ra=this.parseShapesArg(Ha);this.shapes=this.shapes.filter($a=>!Ra.includes($a)).concat(Ra);this.app.persist();return this});gb(this,"sendToBack",Ha=>{const Ra=this.parseShapesArg(Ha);this.shapes=Ra.concat(this.shapes.filter($a=>!Ra.includes($a)));this.app.persist();return this});gb(this,"flip",(Ha,Ra)=>{Ha=this.parseShapesArg(Ha);
const $a=tf.getCommonBounds(Ha.map(fb=>fb.bounds));Ha.forEach(fb=>{var jb;const Kb=tf.getRelativeTransformedBoundingBox($a,$a,fb.bounds,"horizontal"===Ra,"vertical"===Ra);if(fb.serialized)fb.onResize(fb.serialized,{bounds:Kb,center:tf.getBoundsCenter(Kb),rotation:null!=(jb=fb.props.rotation)?jb:-0,type:"top_left_corner",scale:fb.canFlip&&fb.props.scale?"horizontal"===Ra?[-fb.props.scale[0],1]:[1,-fb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});gb(this,
"getShapeById",Ha=>this.shapes.find(Ra=>Ra.id===Ha));gb(this,"cleanup",Ha=>{Ha=ac(this.bindings,Ha);const Ra=new Set;let $a=!1,fb=!1;const jb=qr(this.bindings);Ha.forEach(Kb=>{var Nb;if(this.bindings[Kb.id]){var Hb=this.getShapeById(Kb.toId),fc=this.getShapeById(Kb.fromId);Hb&&fc?Ra.has(fc.id)||(Kb=this.updateArrowBindings(fc),Ra.add(fc.id),Kb&&(Hb=Yd(Yd({},fc.props),Kb),$a=!0,null==(Nb=this.getShapeById(Hb.id))?void 0:Nb.update(Hb,!1,(0,TE.default)(null==Kb?void 0:Kb.handles,null==fc?void 0:fc.props.handles)))):
(delete jb[Kb.id],fb=!0)}});Object.keys(jb).forEach(Kb=>{const Nb=this.bindings[Kb];0===this.shapes.filter(Hb=>Hb.id===Nb.fromId||Hb.id===Nb.toId).length&&(delete jb[Kb],fb=!0)});fb&&this.update({bindings:jb});($a||fb)&&this.app.persist(!0)});gb(this,"updateArrowBindings",Ha=>{var Ra,$a,fb,jb={start:qr(Ha.props.handles.start),end:qr(Ha.props.handles.end)},Kb={isBound:!1,handle:Ha.props.handles.start,point:be.add(Ha.props.handles.start.point,Ha.props.point)},Nb={isBound:!1,handle:Ha.props.handles.end,
point:be.add(Ha.props.handles.end.point,Ha.props.point)};if(Ha.props.handles.start.bindingId){var Hb=void 0!==(null==(Ra=Ha.props.decorations)?void 0:Ra.start);Ra=Ha.props.handles.start;var fc=this.bindings[Ha.props.handles.start.bindingId],qc=this.getShapeById(null==fc?void 0:fc.toId);if(qc){Kb=qc.getBounds();var Wb=qc.getExpandedBounds(),kc=tf.expandBounds(Kb,Hb?fc.distance:1);const {minX:hc,minY:Fc,width:Mc,height:ud}=Wb,Jd=be.add([hc,Fc],be.mulV([Mc,ud],be.rotWith(fc.point,[.5,.5],qc.props.rotation||
0)));Kb={isBound:!0,hasDecoration:Hb,binding:fc,handle:Ra,point:Jd,target:qc,bounds:Kb,expandedBounds:Wb,intersectBounds:kc,center:qc.getCenter()}}}if(Ha.props.handles.end.bindingId&&(Hb=void 0!==(null==($a=Ha.props.decorations)?void 0:$a.end),$a=Ha.props.handles.end,Ra=this.bindings[Ha.props.handles.end.bindingId],fc=this.getShapeById(null==Ra?void 0:Ra.toId))){Nb=fc.getBounds();qc=fc.getExpandedBounds();Wb=Hb?tf.expandBounds(Nb,Ra.distance):Nb;const {minX:hc,minY:Fc,width:Mc,height:ud}=qc;kc=be.add([hc,
Fc],be.mulV([Mc,ud],be.rotWith(Ra.point,[.5,.5],fc.props.rotation||0)));Nb={isBound:!0,hasDecoration:Hb,binding:Ra,handle:$a,point:kc,target:fc,bounds:Nb,expandedBounds:qc,intersectBounds:Wb,center:fc.getCenter()}}for(const hc of["end","start"]){$a="start"===hc?Kb:Nb;const Fc="start"===hc?Nb:Kb;if($a.isBound)if($a.binding.distance){if(Hb=be.uni(be.sub($a.point,Fc.point)),Ra=y(Fc.point,Hb,$a.intersectBounds,$a.target.props.rotation).filter(Mc=>Mc.didIntersect).map(Mc=>Mc.points[0]).sort((Mc,ud)=>be.dist(Mc,
Fc.point)-be.dist(ud,Fc.point)),Ra[0])if(fc=void 0,Fc.isBound&&(fc=y(Fc.point,Hb,Fc.intersectBounds,Fc.target.props.rotation).filter(Mc=>Mc.didIntersect).map(Mc=>Mc.points[0]).sort((Mc,ud)=>be.dist(Mc,Fc.point)-be.dist(ud,Fc.point))[0]),Fc.isBound&&(2>Ra.length||fc&&Ra[0]&&10>Math.ceil(be.dist(Ra[0],fc))||tf.boundsContain($a.expandedBounds,Fc.expandedBounds)||tf.boundsCollide($a.expandedBounds,Fc.expandedBounds)))Hb=be.uni(be.sub(Fc.point,$a.point)),Ra=y($a.point,Hb,$a.bounds,$a.target.props.rotation).filter(Mc=>
Mc.didIntersect).map(Mc=>Mc.points[0]),Ra[0]&&(jb[hc].point=be.toFixed(be.sub(Ra[0],Ha.props.point)),jb["start"===hc?"end":"start"].point=be.toFixed(be.add(be.sub(Ra[0],Ha.props.point),be.mul(Hb,Math.min(be.dist(Ra[0],Fc.point),10*(tf.boundsContain(Fc.bounds,$a.intersectBounds)?-1:1))))));else{if(!Fc.isBound&&(Ra[0]&&10>be.dist(Ra[0],Fc.point)||Dk.pointInBounds(Fc.point,$a.intersectBounds)))return jb=be.uni(be.sub($a.center,Fc.point)),null==(fb=Ha.getHandlesChange)?void 0:fb.call(Ha,Ha.props,{[hc]:hf(Yd({},
Ha.props.handles[hc]),{point:be.toFixed(be.add(be.sub(Fc.point,Ha.props.point),be.mul(jb,10)))})});Ra[0]&&(jb[hc].point=be.toFixed(be.sub(Ra[0],Ha.props.point)))}}else jb[hc].point=be.sub($a.point,Ha.props.point)}return Ha.getHandlesChange(Ha.props,jb)});const {id:k,name:K,shapes:da=[],bindings:ja={},nonce:qa}=d;this.id=k;this.name=K;this.bindings=Object.assign({},ja);this.app=a;this.nonce=qa||0;this.addShapes(...da);Ue(this);ic(()=>{const Ha=0<this.shapes.length?Object.fromEntries(this.shapes.map(Ra=>
[Ra.id,Ra.nonce])):null;if(this.lastShapesNounces&&Ha){const Ra=this.lastShapesNounces,$a=[...(new Set([...Object.keys(Ha),...Object.keys(Ra)]))].filter(fb=>Ra[fb]!==Ha[fb]);requestAnimationFrame(()=>{this.cleanup($a)})}Ha&&(this.lastShapesNounces=Ha)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>jc(a)),bindings:qr(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,
a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,k)=>a.indexOf(d.id)-a.indexOf(k.id));return this}addShapes(...a){if(0!==a.length)return a="getBounds"in a[0]?a:a.map(d=>new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(k=>!d.includes(k));return d}getBindableShapes(){return this.shapes.filter(a=>
a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};fe([yg],il.prototype,"id",2);fe([yg],il.prototype,"name",2);fe([yg],il.prototype,"shapes",2);fe([yg],il.prototype,"bindings",2);fe([Eg],il.prototype,"serialized",1);fe([Eg],il.prototype,"shapesById",1);fe([yg],il.prototype,"nonce",2);fe([ig],il.prototype,"update",1);fe([ig],il.prototype,"updateBindings",1);fe([ig],il.prototype,"updateShapesIndex",1);fe([ig],il.prototype,"addShapes",1);fe([ig],il.prototype,"removeShapes",1);fe([ig],il.prototype,
"bringForward",2);fe([ig],il.prototype,"sendBackward",2);fe([ig],il.prototype,"bringToFront",2);fe([ig],il.prototype,"sendToBack",2);fe([ig],il.prototype,"cleanup",2);var Hj=class{constructor(){gb(this,"shiftKey",!1);gb(this,"ctrlKey",!1);gb(this,"modKey",!1);gb(this,"altKey",!1);gb(this,"spaceKey",!1);gb(this,"isPinching",!1);gb(this,"currentScreenPoint",[0,0]);gb(this,"currentPoint",[0,0]);gb(this,"previousScreenPoint",[0,0]);gb(this,"previousPoint",[0,0]);gb(this,"originScreenPoint",[0,0]);gb(this,
"originPoint",[0,0]);gb(this,"pointerIds",new Set);gb(this,"state","idle");gb(this,"containerOffset",[0,0]);gb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);this.updateModifiers(d);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});gb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});gb(this,"onPointerUp",(a,d)=>
{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});gb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});gb(this,"onKeyUp",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});gb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});gb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});gb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});
Ue(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=be.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=nh()?a.metaKey:a.ctrlKey))}};fe([yg],Hj.prototype,"shiftKey",2);fe([yg],Hj.prototype,"ctrlKey",2);fe([yg],Hj.prototype,"modKey",2);fe([yg],Hj.prototype,"altKey",
2);fe([yg],Hj.prototype,"spaceKey",2);fe([yg],Hj.prototype,"isPinching",2);fe([yg],Hj.prototype,"currentScreenPoint",2);fe([yg],Hj.prototype,"currentPoint",2);fe([yg],Hj.prototype,"previousScreenPoint",2);fe([yg],Hj.prototype,"previousPoint",2);fe([yg],Hj.prototype,"originScreenPoint",2);fe([yg],Hj.prototype,"originPoint",2);fe([yg],Hj.prototype,"state",2);fe([yg],Hj.prototype,"containerOffset",2);fe([ig],Hj.prototype,"updateContainerOffset",1);fe([ig],Hj.prototype,"updateModifiers",1);fe([ig],Hj.prototype,
"onPointerDown",2);fe([ig],Hj.prototype,"onPointerMove",2);fe([ig],Hj.prototype,"onPointerUp",2);fe([ig],Hj.prototype,"onKeyDown",2);fe([ig],Hj.prototype,"onKeyUp",2);fe([ig],Hj.prototype,"onPinchStart",2);fe([ig],Hj.prototype,"onPinch",2);fe([ig],Hj.prototype,"onPinchEnd",2);var DE=(a,d=100)=>-(Math.cos(Math.PI*yd.clamp(a/d,0,1))-1)/2,pr=class{constructor(){gb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});gb(this,"camera",{point:[0,0],zoom:1});gb(this,"updateBounds",a=>
{this.bounds=a;return this});gb(this,"panCamera",a=>this.update({point:yd.sub(this.camera.point,yd.div(a,this.camera.zoom))}));gb(this,"panToPointWhenNearBounds",a=>{const d=yd.div([pr.panThreshold,pr.panThreshold],this.camera.zoom),k=yd.sub([this.currentView.maxX,this.currentView.maxY],yd.add(a,d));a=yd.sub([this.currentView.minX,this.currentView.minY],yd.sub(a,d));this.panCamera(yd.mul([0>k[0]?k[0]:0<a[0]?a[0]:0,0>k[1]?k[1]:0<a[1]?a[1]:0],-pr.panMultiplier*this.camera.zoom))});gb(this,"update",
({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});gb(this,"getPagePoint",a=>{const {camera:d,bounds:k}=this;return yd.sub(yd.div(yd.sub(a,[k.minX,k.minY]),d.zoom),d.point)});gb(this,"getScreenPoint",a=>{const {camera:d}=this;return yd.mul(yd.add(a,d.point),d.zoom)});gb(this,"onZoom",(a,d,k=!1)=>this.pinchZoom(a,[0,0],d,k));gb(this,"pinchZoom",(a,d,k,K=!1)=>{var {camera:da}=this;d=yd.sub(da.point,
yd.div(d,da.zoom));k=yd.clamp(k,pr.minZoom,pr.maxZoom);da=yd.div(a,da.zoom);a=yd.div(a,k);a=yd.toFixed(yd.add(d,yd.sub(a,da)));K?this.animateCamera({point:a,zoom:k}):this.update({point:a,zoom:k});return this});gb(this,"setZoom",(a,d=!1)=>{const {bounds:k}=this;this.onZoom([k.width/2,k.height/2],a,d)});gb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});gb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});gb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});
gb(this,"animateCamera",({point:a,zoom:d})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/d}));gb(this,"animateToViewport",a=>{const d=performance.now(),k=Yd({},this.currentView),K=()=>{var da=performance.now()-d;da=DE(da);var ja=k.minX+(a.minX-k.minX)*da;this.update({point:[-ja,-(k.minY+(a.minY-k.minY)*da)],zoom:this.bounds.width/(k.maxX+(a.maxX-k.maxX)*da-ja)});1>da&&requestAnimationFrame(K)};
K()});gb(this,"zoomToBounds",({width:a,height:d,minX:k,minY:K})=>{const {bounds:da,camera:ja}=this;let qa=Math.min((da.width-100)/a,(da.height-100)/d);qa=Math.min(1,Math.max(pr.minZoom,ja.zoom===qa||1>ja.zoom?Math.min(1,qa):qa));a=yd.add([-k,-K],[(da.width-a*qa)/2/qa,(da.height-d*qa)/2/qa]);this.animateCamera({point:a,zoom:qa})});Ue(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:k}}=this,K=a.width/k,da=a.height/k;return{minX:-d[0],minY:-d[1],maxX:K-d[0],maxY:da-d[1],width:K,height:da}}},
Gn=pr;gb(Gn,"minZoom",.1);gb(Gn,"maxZoom",4);gb(Gn,"panMultiplier",.05);gb(Gn,"panThreshold",100);fe([yg],Gn.prototype,"bounds",2);fe([yg],Gn.prototype,"camera",2);fe([ig],Gn.prototype,"updateBounds",2);fe([ig],Gn.prototype,"update",2);fe([Eg],Gn.prototype,"currentView",1);var EE=class{constructor(a){gb(this,"app");gb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});gb(this,"hoverShape",d=>{this.app.setHoveredShape(d);
return this});gb(this,"createShapes",(...d)=>{this.app.createShapes(d);return this});gb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);return this});gb(this,"deleteShapes",(...d)=>{this.app.deleteShapes(d.length?d:this.app.selectedShapesArray);return this});gb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});gb(this,"deselectShapes",(...d)=>{const k="string"===typeof d[0]?d:d.map(K=>K.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(K=>!k.includes(K.id)));
return this});gb(this,"flipHorizontal",(...d)=>{this.app.flipHorizontal(d);return this});gb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);return this});gb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>!this.app.shapesInGroups().includes(d)));return this});gb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});gb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});gb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});
gb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});gb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=tf.getCommonBounds(d.map(k=>k.bounds));this.app.viewport.zoomToBounds(d);return this});gb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=tf.getCommonBounds(d.map(k=>k.bounds));this.app.viewport.update({point:be.add(be.neg(tf.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/
2])});return this});gb(this,"zoomToSelection",()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);return this});gb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:be.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});gb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});gb(this,"toggleSnapToGrid",()=>{const {settings:d}=this.app;d.update({snapToGrid:!d.snapToGrid});
return this});gb(this,"togglePenMode",()=>{const {settings:d}=this.app;d.update({penMode:!d.penMode});return this});gb(this,"setColor",d=>{const {settings:k}=this.app;k.update({color:d});this.app.selectedShapesArray.forEach(K=>{K.props.isLocked||K.update({fill:d,stroke:d})});this.app.persist();return this});gb(this,"setScaleLevel",d=>{const {settings:k}=this.app;k.update({scaleLevel:d});this.app.selectedShapes.forEach(K=>{K.props.isLocked||K.setScaleLevel(d)});this.app.persist();return this});gb(this,
"undo",()=>{this.app.undo();return this});gb(this,"redo",()=>{this.app.redo();return this});gb(this,"persist",()=>{this.app.persist();return this});gb(this,"createNewLineBinding",(d,k)=>this.app.createNewLineBinding(d,k));gb(this,"clone",d=>{if(!this.app.readOnly&&1===this.app.selectedShapesArray.length&&Object.values(ls).some(Kb=>Kb===this.app.selectedShapesArray[0].type)){var k=this.app.allSelectedShapesArray[0],K=this.app.getShapeClass(k.type),{minX:da,minY:ja,maxX:qa,maxY:Ha,width:Ra,height:$a}=
k.bounds,fb=[0,0];switch(d){case "down":fb=[da,Ha+100];break;case "up":fb=[da,ja-100-$a];break;case "left":fb=[da-100-Ra,ja];break;case "right":fb=[qa+100,ja]}var jb=new K(hf(Yd({},k.serialized),{id:tk(),nonce:Date.now(),refs:[],label:"",point:fb}));this.app.history.pause();this.app.currentPage.addShapes(jb);this.app.createNewLineBinding(k,jb);this.app.history.resume();this.app.persist();setTimeout(()=>this.editShape(jb))}});gb(this,"cloneShapes",({shapes:d,assets:k,bindings:K,point:da=[0,0]})=>{const ja=
tf.getCommonBounds(d.filter(Ra=>"group"!==Ra.type).map(Ra=>{var $a,fb,jb,Kb,Nb,Hb,fc,qc,Wb,kc,hc,Fc,Mc,ud,Jd,Qe;return{minX:null!=(fb=null==($a=Ra.point)?void 0:$a[0])?fb:da[0],minY:null!=(Kb=null==(jb=Ra.point)?void 0:jb[1])?Kb:da[1],width:null!=(Hb=null==(Nb=Ra.size)?void 0:Nb[0])?Hb:4,height:null!=(qc=null==(fc=Ra.size)?void 0:fc[1])?qc:4,maxX:(null!=(kc=null==(Wb=Ra.point)?void 0:Wb[0])?kc:da[0])+(null!=(Fc=null==(hc=Ra.size)?void 0:hc[0])?Fc:4),maxY:(null!=(ud=null==(Mc=Ra.point)?void 0:Mc[1])?
ud:da[1])+(null!=(Qe=null==(Jd=Ra.size)?void 0:Jd[1])?Qe:4)}})),qa=d.map(Ra=>hf(Yd({},Ra),{id:tk(),point:[da[0]+Ra.point[0]-ja.minX,da[1]+Ra.point[1]-ja.minY]}));qa.forEach(Ra=>{var $a;Ra.children&&0<(null==($a=Ra.children)?void 0:$a.length)&&(Ra.children=Ra.children.map(fb=>{var jb;return null==(jb=qa[d.findIndex(Kb=>Kb.id===fb)])?void 0:jb.id}).filter(bg))});const Ha=[];qa.flatMap(Ra=>{var $a;return Object.values(null!=($a=Ra.handles)?$a:{})}).forEach(Ra=>{if(Ra.bindingId){var $a=K[Ra.bindingId];
if($a){var fb=d.findIndex(Kb=>Kb.id===$a.fromId);const jb=d.findIndex(Kb=>Kb.id===$a.toId);$a&&-1!==fb&&-1!==jb?(fb=hf(Yd({},$a),{id:tk(),fromId:qa[fb].id,toId:qa[jb].id}),Ha.push(fb),Ra.bindingId=fb.id):Ra.bindingId=void 0}else console.warn("binding not found",Ra.bindingId)}});k=k.filter(Ra=>qa.some($a=>$a.assetId===Ra.id));return{shapes:qa,assets:k,bindings:Ha}});gb(this,"getClonedShapesFromTldrString",(d,k)=>{try{{var K;const $a=null==(K=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:
K[1];if($a){try{var da=JSON.parse($a)}catch(fb){da=null}var ja=da}else ja=void 0}d=ja;if(!d)return null;const {shapes:qa,bindings:Ha,assets:Ra}=d;return this.cloneShapes({shapes:qa,bindings:Ha,assets:Ra,point:k})}catch(qa){console.log(qa)}return null});gb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});gb(this,"addClonedShapes",d=>{const {shapes:k,assets:K,bindings:da}=d;0<K.length&&this.app.createAssets(K);0<k.length&&this.app.createShapes(k);
this.app.currentPage.updateBindings(Object.fromEntries(da.map(ja=>[ja.id,ja])));this.app.selectedTool.transition("idle");return this});gb(this,"addClonedShapesFromTldrString",(d,k)=>{(d=this.getClonedShapesFromTldrString(d,k))&&this.addClonedShapes(d);return this});gb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var k=[...d.filter(K=>"group"===K.type),...d.map(K=>this.app.getParentGroup(K))].filter(bg);this.app.currentPage.removeShapes(...k);d=d.filter(K=>"group"!==
K.type);1<d.length&&(k=this.app.getShapeClass("group"),k=new k({id:tk(),type:k.id,parentId:this.app.currentPage.id,children:d.map(K=>K.id)}),this.app.currentPage.addShapes(k),this.app.setSelectedShapes([k]),this.app.bringForward(d));this.app.persist()}});gb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(K=>"group"===K.type),...d.map(K=>this.app.getParentGroup(K))].filter(bg);var k=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),
this.app.persist(),this.app.setSelectedShapes(k))}});gb(this,"convertShapes",(d,k=this.app.allSelectedShapesArray)=>{const K=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...k);k=k.map(da=>new K(hf(Yd({},da.serialized),{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...k);this.app.persist();this.app.setSelectedShapes(k)});gb(this,"setCollapsed",(d,k=this.app.allSelectedShapesArray)=>{k.forEach(K=>{"logseq-portal"===K.props.type&&K.setCollapsed(d)});this.app.persist()});this.app=
a}},vs=class{constructor(){gb(this,"cursor","default");gb(this,"rotation",0);gb(this,"reset",()=>{this.cursor="default"});gb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});gb(this,"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});Ue(this)}};fe([yg],vs.prototype,"cursor",2);fe([yg],vs.prototype,"rotation",2);fe([ig],vs.prototype,"reset",2);fe([ig],vs.prototype,"setCursor",2);fe([ig],vs.prototype,"setRotation",2);var ws=class{constructor(a){gb(this,
"app");gb(this,"stack",[]);gb(this,"isPaused",!0);gb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});gb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});gb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:d})});gb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});gb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});
gb(this,"instantiateShape",d=>new (this.app.getShapeClass(d.type))(d));gb(this,"deserialize",d=>{Gc(()=>{var k,{pages:K}=d;const da=this.isPaused;this.pause();const ja=[...this.app.selectedIds];try{const qa=new Map(this.app.pages),Ha=[];for(const Ra of K){const $a=qa.get(Ra.id);if(void 0!==$a){const fb=new Map($a.shapes.map(jb=>[jb.props.id,jb]));K=[];for(const jb of Ra.shapes){const Kb=fb.get(jb.id);void 0!==Kb?(Kb.nonce!==jb.nonce&&(Kb.update(jb,!0),Kb.nonce=jb.nonce,Kb.setLastSerialized(jb)),fb.delete(jb.id)):
K.push(this.instantiateShape(jb))}0<fb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&$a.removeShapes(...fb.values());0<K.length&&$a.addShapes(...K);qa.delete(Ra.id);$a.updateBindings(Ra.bindings);$a.nonce=null!=(k=Ra.nonce)?k:0}else{const {id:fb,name:jb,shapes:Kb,bindings:Nb,nonce:Hb}=Ra;Ha.push(new il(this.app,{id:fb,name:jb,nonce:Hb,bindings:Nb,shapes:Kb.map(fc=>this.instantiateShape(fc))}))}}0<Ha.length&&this.app.addPages(Ha);0<qa.size&&this.app.removePages(Array.from(qa.values()));
this.app.setSelectedShapes(ja).setErasingShapes([])}catch(qa){console.warn(qa)}da||this.resume()})});this.app=a;Ue(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};fe([yg],ws.prototype,"stack",2);fe([ig],ws.prototype,"persist",2);fe([ig],ws.prototype,"undo",2);fe([ig],ws.prototype,"redo",2);fe([ig],ws.prototype,"deserialize",2);var cq=class{constructor(){gb(this,"mode","light");gb(this,"showGrid",!0);gb(this,"snapToGrid",!0);gb(this,"penMode",!1);gb(this,"scaleLevel",
"md");gb(this,"color","");Ue(this)}update(a){Object.assign(this,a)}};fe([yg],cq.prototype,"mode",2);fe([yg],cq.prototype,"showGrid",2);fe([yg],cq.prototype,"snapToGrid",2);fe([yg],cq.prototype,"penMode",2);fe([yg],cq.prototype,"scaleLevel",2);fe([yg],cq.prototype,"color",2);fe([ig],cq.prototype,"update",1);var Ug=class extends ss{constructor(a,d,k,K){var da,ja;super();gb(this,"uuid",tk());gb(this,"readOnly");gb(this,"api");gb(this,"inputs",new Hj);gb(this,"cursors",new vs);gb(this,"viewport",new Gn);
gb(this,"settings",new cq);gb(this,"Tools",[]);gb(this,"history",new ws(this));gb(this,"persist",this.history.persist);gb(this,"undo",this.history.undo);gb(this,"redo",this.history.redo);gb(this,"saving",!1);gb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});gb(this,"load",()=>{this.notify("load",null);return this});gb(this,"save",()=>{this.notify("save",null);return this});gb(this,"pages",new Map([["page",new il(this,
{id:"page",name:"page",shapes:[],bindings:{}})]]));gb(this,"getPageById",qa=>{const Ha=this.pages.get(qa);if(!Ha)throw Error(`Could not find a page named ${qa}.`);return Ha});gb(this,"getShapeById",(qa,Ha=this.currentPage.id)=>{var Ra;return null==(Ra=this.getPageById(Ha))?void 0:Ra.shapesById[qa]});gb(this,"createShapes",qa=>{if(this.readOnly)return this;(qa=this.currentPage.addShapes(...qa))&&this.notify("create-shapes",qa);this.persist();return this});gb(this,"updateShapes",qa=>{if(this.readOnly)return this;
qa.forEach(Ha=>{const Ra=this.getShapeById(Ha.id);null==Ra?void 0:Ra.update(Ha);Ha.type!==(null==Ra?void 0:Ra.type)&&this.api.convertShapes(Ha.type,[Ra])});this.persist();return this});gb(this,"deleteShapes",qa=>{if(0===qa.length||this.readOnly)return this;qa=qa.map(fb=>"string"===typeof fb?this.getShapeById(fb):fb).filter(bg).filter(fb=>!fb.props.isLocked);const Ha=this.shapesInGroups(qa);qa.forEach(fb=>{this.getParentGroup(fb)&&Ha.push(fb)});let Ra=new Set([...qa,...Ha].map(fb=>fb.id));Ha.forEach(fb=>
{var jb;const Kb=this.getParentGroup(fb);if(Kb){const Nb=null==(jb=Kb.props.children)?void 0:jb.filter(Hb=>Hb!==fb.id);!Nb||1>=(null==Nb?void 0:Nb.length)?Ra.add(Kb.id):Kb.update({children:Nb})}});const $a=(fb,jb)=>{var Kb;[...Ra].includes(fb)&&"line"===(null==(Kb=this.getShapeById(jb))?void 0:Kb.type)&&Ra.add(jb)};this.currentPage.shapes.filter(fb=>!fb.props.isLocked).flatMap(fb=>{var jb;return Object.values(null!=(jb=fb.props.handles)?jb:{})}).flatMap(fb=>fb.bindingId).filter(bg).map(fb=>{var jb,
Kb;const Nb=null==(jb=this.currentPage.bindings[fb])?void 0:jb.toId;fb=null==(Kb=this.currentPage.bindings[fb])?void 0:Kb.fromId;Nb&&fb&&($a(Nb,fb),$a(fb,Nb))});qa=[...Ra].map(fb=>this.getShapeById(fb));this.setSelectedShapes(this.selectedShapesArray.filter(fb=>!Ra.has(fb.id)));(qa=this.currentPage.removeShapes(...qa))&&this.notify("delete-shapes",qa);this.persist();return this});gb(this,"bringForward",(qa=this.selectedShapesArray)=>{0<qa.length&&!this.readOnly&&this.currentPage.bringForward(qa);
return this});gb(this,"sendBackward",(qa=this.selectedShapesArray)=>{0<qa.length&&!this.readOnly&&this.currentPage.sendBackward(qa);return this});gb(this,"sendToBack",(qa=this.selectedShapesArray)=>{0<qa.length&&!this.readOnly&&this.currentPage.sendToBack(qa);return this});gb(this,"bringToFront",(qa=this.selectedShapesArray)=>{0<qa.length&&!this.readOnly&&this.currentPage.bringToFront(qa);return this});gb(this,"flipHorizontal",(qa=this.selectedShapesArray)=>{this.currentPage.flip(qa,"horizontal");
return this});gb(this,"flipVertical",(qa=this.selectedShapesArray)=>{this.currentPage.flip(qa,"vertical");return this});gb(this,"align",(qa,Ha=this.selectedShapesArray)=>{if(2>Ha.length||this.readOnly)return this;const Ra=Ha.map(Nb=>{const Hb=Nb.getBounds();return{id:Nb.id,point:[Hb.minX,Hb.minY],bounds:Hb}}),$a=tf.getCommonBounds(Ra.map(({bounds:Nb})=>Nb)),fb=$a.minX+$a.width/2,jb=$a.minY+$a.height/2,Kb=Object.fromEntries(Ra.map(({id:Nb,point:Hb,bounds:fc})=>[Nb,{prev:Hb,next:{top:[Hb[0],$a.minY],
centerVertical:[Hb[0],jb-fc.height/2],bottom:[Hb[0],$a.maxY-fc.height],left:[$a.minX,Hb[1]],centerHorizontal:[fb-fc.width/2,Hb[1]],right:[$a.maxX-fc.width,Hb[1]]}[qa]}]));Ha.forEach(Nb=>{Kb[Nb.id]&&Nb.update({point:Kb[Nb.id].next})});this.persist();return this});gb(this,"distribute",(qa,Ha=this.selectedShapesArray)=>{if(2>Ha.length||this.readOnly)return this;const Ra=Object.fromEntries(tf.getDistributions(Ha,qa).map($a=>[$a.id,$a]));Ha.forEach($a=>{Ra[$a.id]&&$a.update({point:Ra[$a.id].next})});this.persist();
return this});gb(this,"packIntoRectangle",(qa=this.selectedShapesArray)=>{if(2>qa.length||this.readOnly)return this;const Ha=Object.fromEntries(tf.getPackedDistributions(qa).map(Ra=>[Ra.id,Ra]));qa.forEach(Ra=>{Ha[Ra.id]&&Ra.update({point:Ha[Ra.id].next})});this.persist();return this});gb(this,"setLocked",qa=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(Ha=>{Ha.update({isLocked:qa})});this.persist();return this});gb(this,"assets",{});gb(this,
"removeUnusedAssets",()=>{const qa=this.getCleanUpAssets();Object.keys(this.assets).forEach(Ha=>{qa.some(Ra=>Ra.id===Ha)||delete this.assets[Ha]});this.persist();return this});gb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const Ha=this.allSelectedShapesArray;var qa=JSON.stringify({shapes:Ha.map($a=>$a.serialized),assets:this.getCleanUpAssets().filter($a=>Ha.some(fb=>fb.props.assetId===$a.id)),bindings:jc(this.currentPage.bindings)});qa=encodeURIComponent(`<whiteboard-tldr>${qa}</whiteboard-tldr>`);
const Ra=this.selectedShapesArray.map($a=>`((${$a.props.id}))`).join(" ");this.notify("copy",{text:Ra,html:qa})}});gb(this,"paste",(qa,Ha)=>{var Ra;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!Ha,dataTransfer:null!=(Ra=null==qa?void 0:qa.clipboardData)?Ra:void 0})});gb(this,"cut",()=>{this.copy();this.api.deleteShapes()});gb(this,"drop",(qa,Ha)=>{this.notify("drop",{dataTransfer:qa,point:Ha?this.viewport.getPagePoint(Ha):tf.getBoundsCenter(this.viewport.currentView)})});
gb(this,"selectTool",(qa,Ha={})=>{this.readOnly&&!["select","move"].includes(qa)||this.transition(qa,Ha)});gb(this,"editingId");gb(this,"setEditingShape",qa=>{this.editingId="string"===typeof qa?qa:null==qa?void 0:qa.id;return this});gb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});gb(this,"hoveredId");gb(this,"setHoveredShape",qa=>{this.hoveredId="string"===typeof qa?qa:null==qa?void 0:qa.id;return this});gb(this,"selectedIds",new Set);gb(this,
"selectedShapes",new Set);gb(this,"selectionRotation",0);gb(this,"setSelectedShapes",qa=>{var Ha;const {selectedIds:Ra,selectedShapes:$a}=this;Ra.clear();$a.clear();qa[0]&&"string"===typeof qa[0]?qa.forEach(jb=>Ra.add(jb)):qa.forEach(jb=>Ra.add(jb.id));const fb=this.currentPage.shapes.filter(jb=>Ra.has(jb.id));fb.forEach(jb=>$a.add(jb));this.selectionRotation=1===fb.length?null!=(Ha=fb[0].props.rotation)?Ha:0:0;0===qa.length&&this.setEditingShape();return this});gb(this,"erasingIds",new Set);gb(this,
"erasingShapes",new Set);gb(this,"setErasingShapes",qa=>{const {erasingIds:Ha,erasingShapes:Ra}=this;Ha.clear();Ra.clear();qa[0]&&"string"===typeof qa[0]?qa.forEach($a=>Ha.add($a)):qa.forEach($a=>Ha.add($a.id));this.currentPage.shapes.filter($a=>Ha.has($a.id)).forEach($a=>Ra.add($a));return this});gb(this,"bindingIds");gb(this,"setBindingShapes",qa=>{this.bindingIds=qa;return this});gb(this,"clearBindingShape",()=>this.setBindingShapes());gb(this,"createNewLineBinding",(qa,Ha)=>{qa="string"===typeof qa?
this.getShapeById(qa):qa;Ha="string"===typeof Ha?this.getShapeById(Ha):Ha;if((null==qa?0:qa.canBind)&&(null==Ha?0:Ha.canBind)&&(Ha=Wc(qa,Ha))){const [Ra,$a]=Ha;this.createShapes([Ra]);this.currentPage.updateBindings(Object.fromEntries($a.map(fb=>[fb.id,fb])));this.persist();return!0}return!1});gb(this,"brush");gb(this,"setBrush",qa=>{this.brush=qa;return this});gb(this,"setCamera",(qa,Ha)=>{this.viewport.update({point:qa,zoom:Ha});return this});gb(this,"getPagePoint",qa=>{const {camera:Ha}=this.viewport;
return yd.sub(yd.div(qa,Ha.zoom),Ha.point)});gb(this,"getScreenPoint",qa=>{const {camera:Ha}=this.viewport;return yd.mul(yd.add(qa,Ha.point),Ha.zoom)});gb(this,"Shapes",new Map);gb(this,"registerShapes",qa=>{qa.forEach(Ha=>{if("group"===Ha.id){const Ra=this;Ha.prototype.getShapes=function(){var $a,fb;return null!=(fb=null==($a=this.props.children)?void 0:$a.map(jb=>Ra.getShapeById(jb)).filter(Boolean))?fb:[]}}return this.Shapes.set(Ha.id,Ha)})});gb(this,"deregisterShapes",qa=>{qa.forEach(Ha=>this.Shapes.delete(Ha.id))});
gb(this,"getShapeClass",qa=>{if(!qa)throw Error("No shape type provided.");const Ha=this.Shapes.get(qa);if(!Ha)throw Error(`Could not find shape class for ${qa}`);return Ha});gb(this,"wrapUpdate",qa=>{Gc(()=>{const Ha=!this.history.isPaused;Ha&&this.history.pause();qa();Ha&&(this.history.resume(),this.persist())})});gb(this,"subscriptions",new Set([]));gb(this,"subscribe",(qa,Ha)=>{if(void 0===Ha)throw Error("Callback is required.");const Ra={event:qa,callback:Ha};this.subscriptions.add(Ra);return()=>
this.unsubscribe(Ra)});gb(this,"unsubscribe",qa=>{this.subscriptions.delete(qa);return this});gb(this,"notify",(qa,Ha)=>{this.subscriptions.forEach(Ra=>{Ra.event===qa&&Ra.callback(this,Ha)});return this});gb(this,"onTransition",()=>{});gb(this,"onPointerDown",(qa,Ha)=>{if(!this.editingShape&&1===Ha.button&&!this.isIn("move"))this.temporaryTransitionToMove(Ha);else if(2===Ha.button&&!this.editingShape)Ha.preventDefault(),this.transition("select");else if("clientX"in Ha)this.inputs.onPointerDown([...this.viewport.getPagePoint([Ha.clientX,
Ha.clientY]),Ha.pressure],Ha)});gb(this,"onPointerUp",(qa,Ha)=>{if(!this.editingShape&&1===Ha.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ha.stopPropagation(),Ha.preventDefault();else if("clientX"in Ha)this.inputs.onPointerUp([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});gb(this,"onPointerMove",(qa,Ha)=>{if("clientX"in Ha)this.inputs.onPointerMove([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});gb(this,"onKeyDown",
(qa,Ha)=>{if(this.editingShape||" "!==Ha.key||this.isIn("move"))this.inputs.onKeyDown(Ha);else this.temporaryTransitionToMove(Ha)});gb(this,"onKeyUp",(qa,Ha)=>{if(!this.editingShape&&" "===Ha.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ha.stopPropagation(),Ha.preventDefault();else this.inputs.onKeyUp(Ha)});gb(this,"onPinchStart",(qa,Ha)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(qa.point),.5],Ha)});gb(this,"onPinch",(qa,Ha)=>{this.inputs.onPinch([...this.viewport.getPagePoint(qa.point),
.5],Ha)});gb(this,"onPinchEnd",(qa,Ha)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(qa.point),.5],Ha)});this._states=[ts,us];this.readOnly=K;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),K=null!=(da=this.initial)?da:this.states[0].id,da=this.children.get(K))&&(this.currentState=da,null==(ja=this.currentState)?void 0:ja._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);k&&this.registerTools(k);this.history.resume();a&&this.history.deserialize(a);
this.api=new EE(this);Ue(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>
d.props.children).filter(bg).map(d=>this.getShapeById(d)).filter(bg)}getParentGroup(a){return this.shapes.find(d=>{var k;return null==(k=d.props.children)?void 0:k.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):a.forEach(d=>delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(k=>{k.props.assetId&&this.assets[k.props.assetId]&&
a.add(this.assets[k.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=this;return a?d.shapes.find(k=>k.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(k=>k.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=
this;return a?this.shapes.find(d=>{var k;return"group"===d.type&&(null==(k=d.props.children)?void 0:k.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;
const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(K=>{var da;return Object.values(null!=(da=K.props.handles)?da:{})}).flatMap(K=>K.bindingId).filter(bg).flatMap(K=>{var da,ja;return[null==(da=this.currentPage.bindings[K])?void 0:da.fromId,null==(ja=this.currentPage.bindings[K])?void 0:ja.toId]}).filter(bg):[],k=[...(null!=(a=this.bindingIds)?a:[]),...d];return k?this.currentPage.shapes.filter(K=>null==k?void 0:k.includes(K.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;
return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:d,viewport:{currentView:k}}=this;return d.shapes.filter(K=>!K.canUnmount||a.has(K)||tf.boundsContain(k,K.rotatedBounds)||tf.boundsCollide(k,K.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!tf.boundsContain(d,a)&&!tf.boundsCollide(d,a)){var k=tf.getBoundsCenter(a);return yd.clampV([(k[0]-
d.minX-d.width/2)/d.width,(k[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?hf(Yd({},a[0].bounds),{rotation:a[0].props.rotation}):tf.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}get showCloneHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape")&&1===a.length&&Object.values(ls).some(d=>d===this.selectedShapesArray[0].type)&&!this.readOnly}temporaryTransitionToMove(a){a.stopPropagation();a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};gb(Ug,"id","app");gb(Ug,"initial","select");fe([Eg],Ug.prototype,"serialized",1);fe([yg],Ug.prototype,"pages",2);fe([Eg],
Ug.prototype,"currentPageId",1);fe([Eg],Ug.prototype,"currentPage",1);fe([ig],Ug.prototype,"addPages",1);fe([ig],Ug.prototype,"removePages",1);fe([ig],Ug.prototype,"createShapes",2);fe([ig],Ug.prototype,"updateShapes",2);fe([ig],Ug.prototype,"deleteShapes",2);fe([yg],Ug.prototype,"assets",2);fe([ig],Ug.prototype,"addAssets",1);fe([ig],Ug.prototype,"removeAssets",1);fe([ig],Ug.prototype,"removeUnusedAssets",2);fe([Eg],Ug.prototype,"selectedTool",1);fe([yg],Ug.prototype,"editingId",2);fe([Eg],Ug.prototype,
"editingShape",1);fe([ig],Ug.prototype,"setEditingShape",2);fe([yg],Ug.prototype,"hoveredId",2);fe([Eg],Ug.prototype,"hoveredShape",1);fe([Eg],Ug.prototype,"hoveredGroup",1);fe([ig],Ug.prototype,"setHoveredShape",2);fe([yg],Ug.prototype,"selectedIds",2);fe([yg],Ug.prototype,"selectedShapes",2);fe([yg],Ug.prototype,"selectionRotation",2);fe([Eg],Ug.prototype,"selectedShapesArray",1);fe([Eg],Ug.prototype,"allSelectedShapes",1);fe([Eg],Ug.prototype,"allSelectedShapesArray",1);fe([ig],Ug.prototype,"setSelectedShapes",
2);fe([ig],Ug.prototype,"setSelectionRotation",1);fe([yg],Ug.prototype,"erasingIds",2);fe([yg],Ug.prototype,"erasingShapes",2);fe([Eg],Ug.prototype,"erasingShapesArray",1);fe([ig],Ug.prototype,"setErasingShapes",2);fe([yg],Ug.prototype,"bindingIds",2);fe([Eg],Ug.prototype,"bindingShapes",1);fe([ig],Ug.prototype,"setBindingShapes",2);fe([ig],Ug.prototype,"createNewLineBinding",2);fe([yg],Ug.prototype,"brush",2);fe([ig],Ug.prototype,"setBrush",2);fe([ig],Ug.prototype,"setCamera",2);fe([Eg],Ug.prototype,
"currentGrid",1);fe([Eg],Ug.prototype,"shapes",1);fe([Eg],Ug.prototype,"shapesInViewport",1);fe([Eg],Ug.prototype,"selectionDirectionHint",1);fe([Eg],Ug.prototype,"selectionBounds",1);fe([Eg],Ug.prototype,"showSelection",1);fe([Eg],Ug.prototype,"showSelectionDetail",1);fe([Eg],Ug.prototype,"showSelectionRotation",1);fe([Eg],Ug.prototype,"showContextBar",1);fe([Eg],Ug.prototype,"showRotateHandles",1);fe([Eg],Ug.prototype,"showResizeHandles",1);fe([Eg],Ug.prototype,"showCloneHandles",1);var FE=Function.prototype.toString,
cx=Object.create,GE=Object.prototype.toString,HE=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,k){this._keys.push(d);this._values.push(k)};return a}(),IE="undefined"!==typeof WeakMap?re:Vd,JE="g"===/test/g.flags?lf:Df,KE="undefined"!==typeof Symbol?uf:Ef,LE=Object.defineProperty,ME=Object.getOwnPropertyDescriptor,nA=Object.getOwnPropertyNames,
dx=Object.getOwnPropertySymbols,oA=Object.prototype,pA=oA.hasOwnProperty,NE=oA.propertyIsEnumerable,qA="function"===typeof dx,OE=qA?pg:nA,PE=Array.isArray,ex=Object.assign,QE=Object.getPrototypeOf,rA={array:function(a,d){var k=new d.Constructor;d.cache.set(a,k);for(var K=0,da=a.length;K<da;++K)k[K]=d.copier(a[K],d);return k},arrayBuffer:function(a,d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,
d){return new d.Constructor(a.getTime())},error:gi,map:kh,object:qA?ih:Vf,regExp:function(a,d){d=new d.Constructor(a.source,JE(a));d.lastIndex=a.lastIndex;return d},set:Mj},RE=ex({},rA,{array:function(a,d){var k=new d.Constructor;d.cache.set(a,k);return hh(a,k,d)},map:function(a,d){return hh(a,kh(a,d),d)},object:function(a,d){var k=xe(d.prototype);d.cache.set(a,k);return hh(a,k,d)},set:function(a,d){return hh(a,Mj(a,d),d)}});Kk(ex({},RE,{}));var SE=Kk({}),TE=Jf(MD()),UE=Jf(ND()),qr=SE,gn=class{static insertTextFirefox(a,
d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const k=a.ownerDocument,K=k.activeElement;K!==a&&a.focus();k.execCommand("insertText",!1,d)||gn.insertTextFirefox(a,d);K===k.body?a.blur():K instanceof HTMLElement&&K!==a&&K.focus()}static set(a,d){a.select();gn.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:k}=a;return a.value.slice(d?d:void 0,k?k:void 0)}static wrapSelection(a,
d,k){const {selectionStart:K,selectionEnd:da}=a,ja=gn.getSelection(a);gn.insert(a,d+ja+(null!=k?k:d));a.selectionStart=(K||0)+d.length;a.selectionEnd=(da||0)+d.length}static replace(a,d,k){let K=0;a.value.replace(d,(...da)=>{const ja=K+da[da.length-2],qa=da[0].length;a.selectionStart=ja;a.selectionEnd=ja+qa;da="string"===typeof k?k:k(...da);gn.insert(a,da);a.selectionStart=ja;K+=da.length-qa;return da})}static findLineEnd(a,d){const k=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(k)?d:k+1}static indent(a){var d;
const {selectionStart:k,selectionEnd:K,value:da}=a;var ja=da.slice(k,K);if((ja=null==(d=/\n/g.exec(ja))?void 0:d.length)&&0<ja){d=da.lastIndexOf("\n",k-1)+1;var qa=a.value.slice(d,K-1);ja=qa.replace(/^|\n/g,`$&${gn.INDENT}`);qa=ja.length-qa.length;a.setSelectionRange(d,K-1);gn.insert(a,ja);a.setSelectionRange(k+1,K+qa)}else gn.insert(a,gn.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:k,value:K}=a;var da=K.lastIndexOf("\n",d-1)+1;const ja=gn.findLineEnd(K,k);var qa=a.value.slice(da,
ja);const Ha=qa.replace(/(^|\n)(\t| {1,2})/g,"$1");qa=qa.length-Ha.length;a.setSelectionRange(da,ja);gn.insert(a,Ha);da=(da=/\t| {1,2}/.exec(K.slice(da,d)))?da[0].length:0;a.setSelectionRange(d-da,Math.max(d-da,k-qa))}static normalizeText(a){return a.replace(gn.fixNewLines,"\n")}},xs=gn;gb(xs,"fixNewLines",/\r?\n|\r/g);gb(xs,"INDENT","  ");var dq;"undefined"!==typeof window&&(dq=Ul());var fx=new Map,sA=nh()?"":"ctrl",VE=class extends Ug{},tA=Jf(ca(19)),WE=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var uA=Jf(ca(19)),gx={},Pt=Jf(ca(19)),XE=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},hx=Jf(ca(19)),ix=new Map,YE={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",
binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},ZE=((a,...d)=>a.reduce((k,K,da)=>k+K+(da<d.length?d[da]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: calc(64px / var(--tl-zoom));;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle:hover {
    fill: var(--tl-selectStroke);
    cursor: pointer; 
  }

  .tl-clone-handle:hover line {
    stroke: var(--tl-background);
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,vA=Jf(ca(19)),wA=Jf(ca(19)),jx={},Ij={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},xA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},$E=["enter","leave"],aF=["gotpointercapture","lostpointercapture"],
yA=class{constructor(a,d,k){this.ctrl=a;this.args=d;this.key=k;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:k,args:K}=this;d[k]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=K;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,k=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=k.from?$g(k.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:k,shared:K}=this;d.args=this.args;var da=0;if(a){d.event=a;k.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;K.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;K.locked=!!document.pointerLockElement;da=Object;var ja=da.assign,qa={};"buttons"in a&&(qa.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:Fc,altKey:Mc,metaKey:ud,ctrlKey:Jd}=a;Object.assign(qa,{shiftKey:Fc,altKey:Mc,metaKey:ud,ctrlKey:Jd})}ja.call(da,K,qa);K.down=K.pressed=1===K.buttons%2||0<K.touches;da=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(ja=d._delta.map(Math.abs),Ij.addTo(d._distance,ja));this.axisIntent&&
this.axisIntent(a);const [Ha,Ra]=d._movement,[$a,fb]=k.threshold,{_step:jb,values:Kb}=d;k.hasCustomTransform?(!1===jb[0]&&(jb[0]=Math.abs(Ha)>=$a&&Kb[0]),!1===jb[1]&&(jb[1]=Math.abs(Ra)>=fb&&Kb[1])):(!1===jb[0]&&(jb[0]=Math.abs(Ha)>=$a&&Math.sign(Ha)*$a),!1===jb[1]&&(jb[1]=Math.abs(Ra)>=fb&&Math.sign(Ra)*fb));d.intentional=!1!==jb[0]||!1!==jb[1];if(d.intentional){ja=[0,0];if(k.hasCustomTransform){const [Fc,Mc]=Kb;ja[0]=!1!==jb[0]?Fc-jb[0]:0;ja[1]=!1!==jb[1]?Mc-jb[1]:0}else ja[0]=!1!==jb[0]?Ha-jb[0]:
0,ja[1]=!1!==jb[1]?Ra-jb[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(ja);qa=d.offset;var Nb=d._active&&!d._blocked||d.active;Nb&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=K[this.ingKey]=d._active,a&&(d.first&&("bounds"in k&&(d._bounds=$g(k.bounds,d)),this.setup&&this.setup()),d.movement=ja,this.computeOffset()));var [Hb,fc]=d.offset,[[qc,Wb],[kc,hc]]=d._bounds;d.overflow=[Hb<qc?-1:Hb>Wb?1:0,fc<kc?-1:fc>hc?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?
d._movement[0]:d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=Zh(d._bounds,d.offset,d._active?k.rubberband||[0,0]:[0,0]);d.delta=Ij.sub(d.offset,qa);this.computeMovement();Nb&&(!d.last||32<da)&&(d.delta=Ij.sub(d.offset,qa),a=d.delta.map(Math.abs),Ij.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<da&&(d.velocity=[a[0]/da,a[1]/da]))}}emit(){const a=this.state;var d=
this.shared;const k=this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||k.triggerAllEvents)d=this.handler(Sg(Sg(Sg({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Qt=class extends yA{constructor(...a){super(...a);ui(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ij.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=Ij.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,k=this.config;!d.axis&&a&&(a="object"===typeof k.axisThreshold?k.axisThreshold[uh(a)]:k.axisThreshold,d.axis=zk(d._movement,a));d._blocked=(k.lockDirection||!!k.axis)&&!d.axis||!!k.axis&&k.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},bF=a=>a,zA={enabled(a=!0){return a},
eventOptions(a,d,k){return Sg(Sg({},k.shared.eventOptions),a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return Ij.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return Ij.toVector(a)},transform(a,d,k){a=a||k.shared.transform;this.hasCustomTransform=!!a;return a||bF},threshold(a){return Ij.toVector(a,0)}},rr=Sg(Sg({},zA),{},{axis(a,d,{axis:k}){this.lockDirection="lock"===k;if(!this.lockDirection)return k},
axisThreshold(a=0){return a},bounds(a={}){if("function"===typeof a)return ja=>rr.bounds(a(ja));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:k=Infinity,top:K=-Infinity,bottom:da=Infinity}=a;return[[d,k],[K,da]]}}),AA={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},cF=class extends Qt{constructor(...a){super(...a);ui(this,"ingKey","dragging")}reset(){super.reset();
const a=this.state;a._pointerId=void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),k=a.currentTarget.getBoundingClientRect();a._bounds=rr.bounds({left:d.left-k.left+a.offset[0],right:d.right-k.right+a.offset[0],top:d.top-k.top+a.offset[1],bottom:d.bottom-k.bottom+a.offset[1]})}}cancel(){const a=
this.state;a.canceled||(a.canceled=!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,k=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var K=this.ctrl.setEventIds(a);
d.pointerCapture&&a.target.setPointerCapture(a.pointerId);K&&1<K.size&&k._pointerActive||(this.start(a),this.setupPointer(a),k._pointerId=Vi(a),k._pointerActive=!0,this.computeValues(Mk(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==uh(a)?(k._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);
this.emit()}pointerMove(a){const d=this.state,k=this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var K=Vi(a);if(void 0===d._pointerId||K===d._pointerId)K=Mk(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=Ij.sub(K,d._values),this.computeValues(K)),Ij.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):k.preventScrollAxis&&!d._preventScroll?
d.axis&&(d.axis===k.preventScrollAxis||"xy"===k.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(qa){}const d=this.state,k=this.config;if(d._active&&d._pointerActive){var K=Vi(a);if(void 0===d._pointerId||K===d._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(a);var [da,ja]=d._distance;d.tap=da<=k.tapsThreshold&&ja<=k.tapsThreshold;if(d.tap&&k.filterTaps)d._force=!0;else{const [qa,Ha]=d.direction,[Ra,$a]=d.velocity,[fb,jb]=d.movement,[Kb,Nb]=k.swipe.velocity,[Hb,fc]=k.swipe.distance;d.elapsedTime<k.swipe.duration&&(Math.abs(Ra)>Kb&&Math.abs(fb)>Hb&&(d.swipe[0]=qa),Math.abs($a)>Nb&&Math.abs(jb)>fc&&(d.swipe[1]=Ha))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,
k=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,k,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,k,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,k,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&
a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=AA[a.key];if(d){const k=this.state,K=a.shiftKey?10:a.altKey?.1:1;this.start(a);k._delta=d(K);k._keyboardActive=!0;Ij.addTo(k._movement,k._delta);this.compute(a);this.emit()}}keyUp(a){a.key in AA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},sr="undefined"!==typeof window&&window.document&&window.document.createElement;try{var BA="constructor"in GestureEvent}catch(a){BA=!1}var dF=
BA,Rt=sr&&"ontouchstart"in window||sr&&1<window.navigator.maxTouchPoints,CA=sr&&"ontouchstart"in window||sr&&1<window.navigator.maxTouchPoints,DA=sr&&"onpointerdown"in window,eF=sr&&"exitPointerLock"in window.document,EA={mouse:0,touch:0,pen:8},fF=Sg(Sg({},rr),{},{device(a,d,{pointer:{touch:k=!1,lock:K=!1,mouse:da=!1}={}}){this.pointerLock=K&&eF;return Rt&&k?"touch":this.pointerLock?"mouse":DA&&!da?"pointer":Rt?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:k}){this.preventScrollDelay="number"===
typeof k?k:k||void 0===k&&a?250:void 0;if(CA&&!1!==k)return a?a:void 0!==k?"y":void 0},pointerCapture(a,d,{pointer:{capture:k=!0,buttons:K=1,keys:da=!0}={}}){this.pointerButtons=K;this.keys=da;return!this.pointerLock&&"pointer"===this.device&&k},threshold(a,d,{filterTaps:k=!1,tapsThreshold:K=3,axis:da}){a=Ij.toVector(a,k?K:da?1:0);this.filterTaps=k;this.tapsThreshold=K;return a},swipe({velocity:a=.5,distance:d=50,duration:k=250}={}){return{velocity:this.transform(Ij.toVector(a)),distance:this.transform(Ij.toVector(d)),
duration:k}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;default:return a}},axisThreshold(a){return a?Sg(Sg({},EA),a):EA}}),gF=class extends yA{constructor(...a){super(...a);ui(this,"ingKey","pinching");ui(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:k}=
this.state;this.state.offset="wheel"===a?Ij.add(d,k):[(1+d[0])*k[0],d[1]+k[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,k]=a._movement;if(!a.axis){const K=30*Math.abs(d)-Math.abs(k);0>K?a.axis="angle":0<K&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=
!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);var d=this.state;const k=this.ctrl.touchIds;d._active&&d._touchIds.every(K=>k.has(K))||2>k.size||(this.start(a),d._touchIds=Array.from(k).slice(0,2),d=Ni(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,k=d._pointerEvents,K=this.ctrl.pointerIds;d._active&&Array.from(k.keys()).every(da=>K.has(da))||
(2>k.size&&k.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=jm(...Array.from(k.values())),this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=Ni(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=jm(...Array.from(d.values())),this.pinchMove(a,
d))}pinchMove(a,d){const k=this.state,K=d.angle-k._values[1];let da=0;270<Math.abs(K)&&(da+=Math.sign(K));this.computeValues([d.distance,d.angle-360*da]);k.origin=d.origin;k.turns=da;k._movement=[k._values[0]/k._initial[0]-1,k._values[1]-k._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);
try{a.target.releasePointerCapture(a.pointerId)}catch(k){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,
a.rotation]);d.origin=[a.clientX,a.clientY];var k=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=Ij.sub(d._movement,k);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();
const d=this.state;d._delta=[-Nk(a)[1]/100*d.offset[0],0];Ij.addTo(d._movement,d._delta);cl(d);this.state.origin=[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),
{passive:!1})}},hF=Sg(Sg({},zA),{},{device(a,d,{shared:k,pointer:{touch:K=!1}={}}){if(k.target&&!Rt&&dF)return"gesture";if(Rt&&K)return"touch";if(CA){if(DA)return"pointer";if(Rt)return"touch"}},bounds(a,d,{scaleBounds:k={},angleBounds:K={}}){const da=qa=>{qa=$g(k,qa);qa=Object.assign({},{min:-Infinity,max:Infinity},qa||{});return[qa.min,qa.max]},ja=qa=>{qa=$g(K,qa);qa=Object.assign({},{min:-Infinity,max:Infinity},qa||{});return[qa.min,qa.max]};return"function"!==typeof k&&"function"!==typeof K?[da(),
ja()]:qa=>[da(qa),ja(qa)]},threshold(a,d,k){this.lockDirection="lock"===k.axis;return Ij.toVector(a,this.lockDirection?[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),iF=class extends Qt{constructor(...a){super(...a);ui(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(Mk(a));
this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=Mk(a),k=this.state;k._delta=Ij.sub(d,k._values);Ij.addTo(k._movement,k._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},jF=Sg(Sg({},rr),{},{mouseOnly:(a=!0)=>a}),kF=class extends Qt{constructor(...a){super(...a);ui(this,
"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var k,K;const {scrollX:da,scrollY:ja,scrollLeft:qa,scrollTop:Ha}=a.currentTarget;var Ra=[null!==(k=null!==da&&void 0!==da?da:qa)&&void 0!==k?k:0,null!==(K=null!==ja&&void 0!==ja?ja:Ha)&&void 0!==K?K:0];d._delta=Ij.sub(Ra,d._values);Ij.addTo(d._movement,d._delta);this.computeValues(Ra);
this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll","",this.scroll.bind(this))}},lF=rr,mF=class extends Qt{constructor(...a){super(...a);ui(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=Nk(a);Ij.addTo(d._movement,d._delta);cl(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&
(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},nF=rr,oF=class extends Qt{constructor(...a){super(...a);ui(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(Mk(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var k=Mk(a);d._movement=d._delta=Ij.sub(k,d._values);this.computeValues(k);this.compute(a);
d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},pF=Sg(Sg({},rr),{},{mouseOnly:(a=!0)=>a}),kx=new Map,lx=new Map,qF={key:"drag",engine:cF,resolver:fF},rF={key:"hover",engine:oF,resolver:pF},sF={key:"move",engine:iF,resolver:jF},tF={key:"pinch",engine:gF,resolver:hF},uF={key:"scroll",engine:kF,resolver:lF},vF={key:"wheel",engine:mF,resolver:nF},mx=Jf(ca(19)),wF={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=
!0){return a},window(a=sr?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},xF=["target","eventOptions","window","enabled","transform"],FA=class{constructor(a,d){ui(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,k,K,da){const ja=this._listeners,qa=Mi(d,k),Ha=Sg(Sg({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),da);a.addEventListener(qa,K,Ha);const Ra=()=>{a.removeEventListener(qa,
K,Ha);ja.delete(Ra)};ja.add(Ra);return Ra}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},yF=class{constructor(){ui(this,"_timeouts",new Map)}add(a,d,k=140,...K){this.remove(a);this._timeouts.set(a,window.setTimeout(d,k,...K))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},zF=class{constructor(a){ui(this,"gestures",new Set);ui(this,"_targetEventStore",new FA(this));ui(this,"gestureEventStores",
{});ui(this,"gestureTimeoutStores",{});ui(this,"handlers",{});ui(this,"config",{});ui(this,"pointerIds",new Set);ui(this,"touchIds",new Set);ui(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&li(this,"drag");a.wheel&&li(this,"wheel");a.scroll&&li(this,"scroll");a.move&&li(this,"move");a.pinch&&li(this,"pinch");a.hover&&li(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(Cj(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?
this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=d}applyConfig(a,d){this.config=Di(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const k={};let K;if(d.target&&
(K=d.target(),!K))return;if(d.enabled){for(const da of this.gestures){const ja=this.config[da],qa=GA(k,ja.eventOptions,!!K);ja.enabled&&(new (kx.get(da))(this,a,da)).bind(qa)}d=GA(k,d.eventOptions,!!K);for(const da in this.nativeHandlers)d(da,"",ja=>this.nativeHandlers[da](Sg(Sg({},this.state.shared),{},{event:ja,args:a})),void 0,!0)}for(const da in k)k[da]=Oh(...k[da]);if(!K)return k;for(const da in k){const {device:ja,capture:qa,passive:Ha}=Mf(da);this._targetEventStore.add(K,ja,"",k[da],{capture:qa,
passive:Ha})}}},GA=(a,d,k)=>(K,da,ja,qa={},Ha=!1)=>{var Ra,$a;const fb=null!==(Ra=qa.capture)&&void 0!==Ra?Ra:d.capture;qa=null!==($a=qa.passive)&&void 0!==$a?$a:d.passive;K=Ha?K:El(K,da,fb);k&&qa&&(K+="Passive");a[K]=a[K]||[];a[K].push(ja)},AF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,iv=Jf(ca(19)),nx=Jf(ca(19)),HA=Jf(ca(19)),IA=Jf(ca(19)),BF=Jf(ca(19)),CF=Jf(ca(19)),DF=Jf(ca(19)),EF=Jf(ca(19)),FF={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",
move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>Ed('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>Ed("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>Ed("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>Ed("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>Ed("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>Ed("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>Ed("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>Ed("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>Ed("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>Ed('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>Ed('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>Ed('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>Ed('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>Ed('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},GF=Jf(ca(19));Jf(ca(19));var JA=ca(19),KA=Jf(ca(19));if(!ca(19).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!Ue)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var HF=ca(20),St=Jf(ca(19)),LA="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,IF=1E4,JF=function(a){var d="function"===typeof Symbol&&Symbol.iterator,k=d&&a[d],K=0;if(k)return k.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&
K>=a.length&&(a=void 0);return{value:a&&a[K++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},MA=LA?Nd(LA):Le(),KF=MA.addReactionToTrack,LF=MA.recordReactionAsCommitted,NA=function(a,d){var k="function"===typeof Symbol&&a[Symbol.iterator];if(!k)return a;a=k.call(a);var K,da=[];try{for(;(void 0===d||0<d--)&&!(K=a.next()).done;)da.push(K.value)}catch(qa){var ja={error:qa}}finally{try{K&&!K.done&&(k=a["return"])&&k.call(a)}finally{if(ja)throw ja.error;
}}return da},MF=function(){return function(){}}(),ys=ca(19),OA="function"===typeof Symbol&&Symbol.for,PA=OA?Symbol.for("react.forward_ref"):"function"===typeof ys.forwardRef&&(0,ys.forwardRef)(function(a){return null}).$$typeof,QA=OA?Symbol.for("react.memo"):"function"===typeof ys.memo&&(0,ys.memo)(function(a){return null}).$$typeof,NF={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};sf.displayName="Observer";ca(19);ca(19);ca(19);(function(a){a||=se;wc({reactionScheduler:a})})(HF.unstable_batchedUpdates);
var OF=Jf(ca(19)),ox=ca(588),hn=OF.forwardRef(function(a,d){var {children:k,opacity:K,centered:da,className:ja=""}=a,qa=zf(a,["children","opacity","centered","className"]);return(0,ox.jsx)(sf,{children:()=>(0,ox.jsx)("div",{ref:d,className:`tl-positioned-div ${ja}`,style:K?{opacity:K}:void 0,draggable:!1,children:(0,ox.jsx)("div",hf(Yd({className:`tl-positioned-inner ${da?"tl-centered":""}`},qa),{children:k}))})})}),PF=Jf(ca(19)),px=ca(588),Hn=PF.forwardRef(function(a,d){var {id:k,className:K="",
style:da,children:ja}=a,qa=zf(a,["id","className","style","children"]);return(0,px.jsx)(sf,{children:()=>(0,px.jsx)("svg",{ref:d,style:da,className:`tl-positioned-svg ${K}`,children:(0,px.jsx)("g",hf(Yd({id:k,className:"tl-centered-g"},qa),{children:ja}))})})}),Tt=Jf(ca(19)),RA=Jf(ca(19)),jv=Jf(ca(19)),QF=ca(588),eq=ee(function(a){var {id:d,bounds:k,zIndex:K,rotation:da=0,className:ja="",children:qa}=a;a=zf(a,"id bounds zIndex rotation className children".split(" "));const Ha=jv.useRef(null);jv.useLayoutEffect(()=>
{Ha.current.style.transform=`translate(
        calc(${k.minX}px - var(--tl-padding)),
        calc(${k.minY}px - var(--tl-padding)))
        rotate(${da+(k.rotation||0)}rad)`},[k.minX,k.minY,da,k.rotation]);jv.useLayoutEffect(()=>{const Ra=Ha.current;Ra.style.width=`calc(${Math.floor(k.width)}px + (var(--tl-padding) * 2))`;Ra.style.height=`calc(${Math.floor(k.height)}px + (var(--tl-padding) * 2))`},[k.width,k.height]);jv.useLayoutEffect(()=>{const Ra=Ha.current;void 0!==K&&(Ra.style.zIndex=K.toString())},[K]);return(0,QF.jsx)("div",hf(Yd({id:d,ref:Ha,className:`tl-positioned ${ja}`,"aria-label":"container"},a),{children:qa}))}),
RF=Jf(ca(19)),SA=ca(588),SF=ee(function({shapes:a,hidden:d,bounds:k,rotation:K=0}){const {components:{ContextBar:da},viewport:{bounds:ja,camera:{point:[qa,Ha],zoom:Ra}}}=dh(),$a=RF.useRef(null);var fb=tf.getRotatedBounds(k,K);fb=tf.multiplyBounds(fb,Ra);pb($a,k,K,10005);if(!da)throw Error("Expected a ContextBar component.");const jb=tf.translateBounds(fb,[qa*Ra,Ha*Ra]);return(0,SA.jsx)("div",{ref:$a,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,SA.jsx)(da,{hidden:d,shapes:a,bounds:k,offsets:{left:jb.minX,right:ja.width-jb.maxX,top:jb.minY,bottom:ja.height-jb.maxY,width:jb.width,height:jb.height},scaledBounds:fb,rotation:K})})}),TA=Jf(ca(19)),TF=ca(588),UA=ee(function({children:a}){const d=TA.useRef(null),{viewport:k}=dh(),K=d.current,{zoom:da,point:ja}=k.camera;TA.useEffect(()=>{K&&(K.style.transform=`scale(${da}) translate3d(${ja[0]}px, ${ja[1]}px, 0)`)},[da,ja,K]);return(0,TF.jsx)("div",{ref:d,className:"tl-absolute tl-layer",
children:a})}),kv=ca(588),VA=ee(function({shape:a,isHovered:d=!1,isSelected:k=!1,isBinding:K=!1,isEditing:da=!1,isLocked:ja=!1,meta:qa}){const {bounds:Ha,props:{scale:Ra,rotation:$a=0},ReactIndicator:fb}=a;return(0,kv.jsx)(eq,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:Ha,rotation:$a,scale:Ra,zIndex:da?1E3:1E4,children:(0,kv.jsx)(Hn,{children:(0,kv.jsx)("g",{className:`tl-indicator-container ${k?"tl-selected":"tl-hovered"} ${ja?"tl-locked":""}`,children:(0,kv.jsx)(fb,{isEditing:da,
isBinding:K,isHovered:d,isLocked:ja,isSelected:k,isErasing:!1,meta:qa})})})})}),WA=Jf(ca(19)),lv=ca(588),UF=ee(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:k}},components:{QuickLinks:K}}=dh();var da=lg();const ja=Ig(d);if(!K)throw Error("Expected a QuickLinks component.");da=50>a.height*k||!da.selectedShapesArray.includes(d);return(0,lv.jsx)(eq,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,lv.jsx)(hn,{children:(0,lv.jsx)("span",hf(Yd({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},ja),{onPointerDown:qa=>qa.stopPropagation(),children:(0,lv.jsx)(K,{className:"tl-backlinks-count "+(da?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})}),mv=ca(588),VF=ee(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:k}},components:{BacklinksCount:K}}=dh();var da=lg();if(!K)throw Error("Expected a BacklinksCount component.");const ja=qa=>qa.stopPropagation();
da=50>a.height*k||!da.selectedShapesArray.includes(d)||d.hideSelection;return(0,mv.jsx)(eq,{bounds:a,className:"tl-backlinks-count-container",children:(0,mv.jsx)(hn,{children:(0,mv.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:ja,onWheelCapture:ja,onKeyDown:ja,title:"Shape Backlinks",children:(0,mv.jsx)(K,{className:"tl-backlinks-count "+(da?"tl-backlinks-count-rounded":""),id:d.id,
shape:d})})})})}),WF=Jf(ca(19)),XA=ca(588),XF=ee(function({bounds:a,hidden:d,shapes:k,rotation:K=0,detail:da="size"}){const {components:{SelectionDetail:ja},viewport:{camera:{zoom:qa}}}=dh(),Ha=WF.useRef(null),Ra=tf.multiplyBounds(a,qa);pb(Ha,a,K,10003);if(!ja)throw Error("Expected a SelectionDetail component.");return(0,XA.jsx)("div",{ref:Ha,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,XA.jsx)(ja,
{shapes:k,bounds:a,scaledBounds:Ra,zoom:qa,rotation:K,detail:da})})}),YA=ca(588),YF=ee(function({shape:a,isHovered:d=!1,isSelected:k=!1,isBinding:K=!1,isErasing:da=!1,isEditing:ja=!1,onEditingEnd:qa,asset:Ha,meta:Ra,zIndex:$a}){const {bounds:fb,props:{rotation:jb,scale:Kb},ReactComponent:Nb}=a,Hb=lg(),fc=Ig(a);var qc=Hb.getParentGroup(a);qc=Hb.selectedIds.has(null==qc?void 0:qc.id);return(0,YA.jsx)(eq,{"data-shape-id":a.id,"data-html2canvas-ignore":!k&&!qc&&0!==Hb.selectedShapes.size||null,zIndex:$a,
"data-type":"Shape",bounds:fb,rotation:jb,scale:Kb,children:(0,YA.jsx)(Nb,{meta:Ra,isEditing:ja,isBinding:K,isHovered:d,isSelected:k,isErasing:da,events:fc,asset:Ha,onEditingEnd:qa})})}),zs=ca(588),ZA=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],ZF=ee(function({size:a}){const {viewport:{camera:{point:d,zoom:k}}}=dh();return(0,zs.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,zs.jsx)("defs",{children:ZA.map(([K,da,
ja],qa)=>{ja=ja*a*k;var Ha=d[0]*k,Ra=d[1]*k;Ha=0<Ha?Ha%ja:ja+Ha%ja;Ra=0<Ra?Ra%ja:ja+Ra%ja;K=nk(k,[K,da],[0,1]);return(0,zs.jsx)("pattern",{id:`grid-${qa}`,width:ja,height:ja,patternUnits:"userSpaceOnUse",children:!(2<K||.1>K)&&(0,zs.jsx)("circle",{className:"tl-grid-dot",cx:Ha,cy:Ra,r:1.5,opacity:Math.max(0,Math.min(K,1))})},`grid-pattern-${qa}`)})}),ZA.map((K,da)=>(0,zs.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${da})`},`grid-rect-${da}`))]})}),$A=ee(function({size:a}){return(0,zs.jsx)(ZF,
{size:a})}),aB=ca(588),bB=ee(function({bounds:a}){const d=ok("background");return(0,aB.jsx)(Hn,hf(Yd({"data-html2canvas-ignore":"true"},d),{children:(0,aB.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});ca(19);var cB=ca(588),dB=ee(function({scaledBounds:a,shapes:d,detail:k="size",rotation:K=0}){var da;const ja=1===d.length?K:null!=(da=a.rotation)?da:0;return(0,cB.jsx)(hn,{centered:!0,children:(0,cB.jsx)("div",{className:"tl-bounds-detail",
style:{transform:ja<Io||ja>3*Io?`rotate(${ja}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+ja}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${be.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===k?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${Ml.radiansToDegrees(Ml.clampRadians(K)).toFixed()}\xB0`})})}),qx=ca(588),$F={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},nv=ee(function({cx:a,cy:d,size:k,targetSize:K,corner:da,isHidden:ja}){const qa=ok(da);return(0,qx.jsxs)("g",hf(Yd({opacity:ja?0:1},qa),{children:[(0,qx.jsx)("rect",{className:"tl-transparent "+(ja?"":$F[da]),"aria-label":`${da} target`,x:a-1.25*K,y:d-1.25*K,width:2.5*K,height:2.5*K,pointerEvents:ja?"none":"all"}),(0,qx.jsx)("rect",{className:"tl-corner-handle","aria-label":`${da} handle`,x:a-k/2,y:d-k/2,width:k,height:k,pointerEvents:"none"})]}))}),
ov=ca(588),rx=ee(function({cx:a,cy:d,size:k,direction:K,isHidden:da}){const ja=lg();return(0,ov.jsxs)("g",{className:"tl-clone-handle",opacity:da?0:1,children:[(0,ov.jsx)("circle",{"aria-label":`${K} handle`,pointerEvents:"all",onPointerDown:qa=>ja.api.clone(K),cx:a,cy:d,r:k}),(0,ov.jsx)("line",{x1:a-k/2,y1:d,x2:a+k/2,y2:d}),(0,ov.jsx)("line",{x1:a,y1:d-k/2,x2:a,y2:d+k/2})]})}),aG=ca(588),bG={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},pv=
ee(function({x:a,y:d,width:k,height:K,targetSize:da,edge:ja,disabled:qa,isHidden:Ha}){const Ra=ok(ja);return(0,aG.jsx)("rect",Yd({pointerEvents:Ha||qa?"none":"all",className:"tl-transparent tl-edge-handle "+(Ha?"":bG[ja]),"aria-label":`${ja} target`,opacity:Ha?0:1,x:a-da,y:d-da,width:Math.max(1,k+2*da),height:Math.max(1,K+2*da)},Ra))}),sx=ca(588);ee(function({cx:a,cy:d,size:k,targetSize:K,isHidden:da}){const ja=ok("rotate");return(0,sx.jsxs)("g",hf(Yd({opacity:da?0:1},ja),{children:[(0,sx.jsx)("circle",
{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:K,pointerEvents:da?"none":"all"}),(0,sx.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:k/2,pointerEvents:"none"})]}))});ca(19);var eB=ca(588),qv=ee(function({cx:a,cy:d,targetSize:k,corner:K,isHidden:da}){const ja=ok(K);return(0,eB.jsx)("g",hf(Yd({opacity:da?0:1},ja),{children:(0,eB.jsx)("rect",{className:"tl-transparent","aria-label":`${K} target`,x:a-2.5*k,y:d-2.5*k,width:3*k,height:3*k,pointerEvents:da?
"none":"all"})}))}),Ek=ca(588),fB=ee(function({bounds:a,showResizeHandles:d,showRotateHandles:k,showCloneHandles:K,shapes:da}){var ja,qa;const Ha=lg();let {width:Ra,height:$a}=a;var fb=Ha.viewport.camera.zoom;a=8/fb;const jb=6/fb;fb=30/fb;const Kb=2*a,Nb=1===da.length?da[0].canResize:[!0,!0],Hb=null!=(qa=null==(ja=Ha.editingShape)?void 0:ja.props.borderRadius)?qa:0;return(0,Ek.jsx)(Ek.Fragment,{children:0<da.length&&(0,Ek.jsxs)(Hn,{children:[!Ha.editingShape&&(0,Ek.jsx)("rect",{className:"tl-bounds-fg",
width:Math.max(Ra,1),height:Math.max($a,1),rx:Hb,ry:Hb,pointerEvents:"none"}),(0,Ek.jsx)(pv,{x:2*jb,y:0,width:Ra-4*jb,height:0,targetSize:jb,edge:"top_edge",disabled:!Nb[1],isHidden:!d}),(0,Ek.jsx)(pv,{x:Ra,y:2*jb,width:0,height:$a-4*jb,targetSize:jb,edge:"right_edge",disabled:!Nb[0],isHidden:!d}),(0,Ek.jsx)(pv,{x:2*jb,y:$a,width:Ra-4*jb,height:0,targetSize:jb,edge:"bottom_edge",disabled:!Nb[1],isHidden:!d}),(0,Ek.jsx)(pv,{x:0,y:2*jb,width:0,height:$a-4*jb,targetSize:jb,edge:"left_edge",disabled:!Nb[0],
isHidden:!d}),(0,Ek.jsx)(qv,{cx:0,cy:0,targetSize:jb,corner:"top_left_resize_corner",isHidden:!k}),(0,Ek.jsx)(qv,{cx:Ra+2*jb,cy:0,targetSize:jb,corner:"top_right_resize_corner",isHidden:!k}),(0,Ek.jsx)(qv,{cx:Ra+2*jb,cy:$a+2*jb,targetSize:jb,corner:"bottom_right_resize_corner",isHidden:!k}),(0,Ek.jsx)(qv,{cx:0,cy:$a+2*jb,targetSize:jb,corner:"bottom_left_resize_corner",isHidden:!k}),(0,Ek.jsx)(rx,{cx:-fb,cy:$a/2,size:Kb,direction:"left",isHidden:!K}),(0,Ek.jsx)(rx,{cx:Ra+fb,cy:$a/2,size:Kb,direction:"right",
isHidden:!K}),(0,Ek.jsx)(rx,{cx:Ra/2,cy:$a+fb,size:Kb,direction:"down",isHidden:!K}),(null==Nb?void 0:Nb.every(fc=>fc))&&(0,Ek.jsxs)(Ek.Fragment,{children:[(0,Ek.jsx)(nv,{cx:0,cy:0,size:a,targetSize:jb,corner:"top_left_corner",isHidden:!d}),(0,Ek.jsx)(nv,{cx:Ra,cy:0,size:a,targetSize:jb,corner:"top_right_corner",isHidden:!d}),(0,Ek.jsx)(nv,{cx:Ra,cy:$a,size:a,targetSize:jb,corner:"bottom_right_corner",isHidden:!d}),(0,Ek.jsx)(nv,{cx:0,cy:$a,size:a,targetSize:jb,corner:"bottom_left_corner",isHidden:!d})]})]})})}),
tx=ca(588),gB=ee(function({bounds:a}){return(0,tx.jsx)(eq,{bounds:a,zIndex:10001,children:(0,tx.jsx)(Hn,{children:(0,tx.jsx)("rect",{className:"tl-brush",x:0,y:0,width:a.width,height:a.height})})})}),hB=ca(588);ee(function(){return(0,hB.jsx)(hB.Fragment,{})});var ux=ca(588),iB=ee(function({shape:a,handle:d,id:k}){a=ld(a,k);const [K,da]=d.point;return(0,ux.jsxs)("g",hf(Yd({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${K}, ${da})`,children:[(0,ux.jsx)("circle",{className:"tl-handle-bg",
pointerEvents:"all"}),(0,ux.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),jB=Jf(ca(19)),vx=ca(588),wx=ee(function({direction:a}){const {viewport:{bounds:d}}=dh(),k=jB.useRef(null);jB.useLayoutEffect(()=>{const K=k.current;if(K){var da=[d.width/2,d.height/2],ja=tf.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[qa,Ha]]of ja)ja=u(da,a,qa,Ha),ja.didIntersect&&(ja=ja.points[0],K.style.transform=`translate(${ja[0]-6}px,${ja[1]-6}px) rotate(${be.toAngle(a)}rad)`)}},
[a,d]);return(0,vx.jsx)("div",{ref:k,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,vx.jsx)("svg",{height:12,width:12,children:(0,vx.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),Jj=ca(588),cG=ee(function({id:a,className:d,brush:k,shapes:K,assets:da,bindingShapes:ja,editingShape:qa,hoveredShape:Ha,hoveredGroup:Ra,selectionBounds:$a,selectedShapes:fb,erasingShapes:jb,selectionDirectionHint:Kb,cursor:Nb="default",cursorRotation:Hb=0,selectionRotation:fc=0,showSelection:qc=
!0,showHandles:Wb=!0,showSelectionRotation:kc=!1,showResizeHandles:hc=!0,showRotateHandles:Fc=!0,showCloneHandles:Mc=!0,showSelectionDetail:ud=!0,showContextBar:Jd=!0,showGrid:Qe=!0,gridSize:Zd=8,onEditingEnd:Ee=WE,theme:gf=Vu,children:Re}){var cf;const Gd=Tt.useRef(null),{viewport:nd,components:Ad,meta:id}=dh(),Dd=lg(),De=Tt.useCallback(df=>{Dd.inputs.updateContainerOffset([df.minX,df.minY])},[]);bl(gf,a);$c(Gd);lj(Gd,nd,De);Wi(Gd);ie();Wd(Gd,Nb,Hb);oe(Gd);qg(Gd);a=gg();const Ye=(Nb=1===(null==fb?
void 0:fb.length)&&fb[0])&&"handles"in Nb.props?null==fb?void 0:fb[0]:void 0,Rf=Tt.useMemo(()=>new Set(fb||[]),[fb]),eg=Tt.useMemo(()=>new Set(jb||[]),[jb]);Nb=1===(null==fb?void 0:fb.length)?fb[0]:void 0;Ra=[...(new Set([Ra,Ha]))].filter(bg);return(0,Jj.jsxs)("div",{ref:Gd,className:`tl-container ${null!=d?d:""}`,children:[(0,Jj.jsxs)("div",hf(Yd({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[Qe&&Ad.Grid&&(0,Jj.jsx)(Ad.Grid,{size:Zd}),(0,Jj.jsxs)(UA,{children:[Ad.SelectionBackground&&
fb&&$a&&qc&&(0,Jj.jsx)(eq,{"data-type":"SelectionBackground",bounds:$a,zIndex:2,"data-html2canvas-ignore":"true",children:(0,Jj.jsx)(Ad.SelectionBackground,{shapes:fb,bounds:$a,showResizeHandles:hc,showRotateHandles:Fc})}),K&&K.map((df,Ag)=>(0,Jj.jsx)(YF,{shape:df,asset:da&&df.props.assetId?da[df.props.assetId]:void 0,isEditing:df===qa,isHovered:df===Ha,isBinding:null==ja?void 0:ja.includes(df),isSelected:Rf.has(df),isErasing:eg.has(df),meta:id,zIndex:1E3+Ag,onEditingEnd:Ee},"shape_"+df.id)),!Dd.isIn("select.pinching")&&
(null==fb?void 0:fb.map(df=>(0,Jj.jsx)(VA,{shape:df,isEditing:df===qa,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:df.props.isLocked},"selected_indicator_"+df.id))),Ra.map(df=>df!==qa&&(0,Jj.jsx)(VA,{shape:df},"hovered_indicator_"+df.id)),Nb&&Ad.BacklinksCount&&(0,Jj.jsx)(VF,{hidden:!1,bounds:Nb.bounds,shape:Nb}),Ha&&Ha!==Nb&&Ad.QuickLinks&&(0,Jj.jsx)(UF,{hidden:!1,bounds:Ha.bounds,shape:Ha}),k&&Ad.Brush&&(0,Jj.jsx)(Ad.Brush,{bounds:k}),fb&&$a&&(0,Jj.jsxs)(Jj.Fragment,{children:[qc&&Ad.SelectionForeground&&
(0,Jj.jsx)(eq,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:$a,zIndex:qa&&fb.includes(qa)?1002:10002,children:(0,Jj.jsx)(Ad.SelectionForeground,{shapes:fb.filter(df=>!df.props.isLocked),bounds:$a,showResizeHandles:hc,showRotateHandles:Fc,showCloneHandles:Mc})}),Wb&&Ye&&Ad.Handle&&(0,Jj.jsx)(eq,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:$a,zIndex:10003,children:(0,Jj.jsx)(Hn,{children:Object.entries(null!=(cf=Ye.props.handles)?cf:
{}).map(([df,Ag])=>Tt.createElement(Ad.Handle,{key:`${Ag.id}_handle_${Ag.id}`,shape:Ye,handle:Ag,id:df}))})}),fb&&Ad.SelectionDetail&&(0,Jj.jsx)(XF,{"data-html2canvas-ignore":"true",shapes:fb,bounds:$a,detail:kc?"rotation":"size",hidden:!ud,rotation:fc},"detail"+fb.map(df=>df.id).join(""))]})]}),Kb&&$a&&fb&&(0,Jj.jsx)(wx,{direction:Kb,bounds:$a,shapes:fb}),(0,Jj.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,Jj.jsx)(UA,{children:fb&&$a&&(0,Jj.jsx)(Jj.Fragment,
{children:fb&&Ad.ContextBar&&(0,Jj.jsx)(SF,{shapes:fb.filter(df=>!df.props.isLocked),hidden:!Jd,bounds:Nb?Nb.bounds:$a,rotation:Nb?Nb.props.rotation:0},"context"+fb.map(df=>df.id).join(""))})}),Re]})}),kB=Jf(ca(19)),lB=Jf(ca(19)),mB=ca(588);ee(function({children:a}){const d=lB.useRef(null),{viewport:k}=dh();lB.useEffect(()=>ic(()=>{const K=d.current;if(K){var {zoom:da,point:ja}=k.camera;K.style.transform=`scale(${da}) translateX(${ja[0]}px) translateY(${ja[1]}px)`}}),[]);return(0,mB.jsx)("svg",{className:"tl-absolute tl-overlay",
pointerEvents:"none",children:(0,mB.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});var dG=ca(588),eG=ee(function(a){const d=yc(a),k=Bj(a.id);Tc(d,a);mc(d,a);return(0,dG.jsx)(k.Provider,{value:d,children:a.children})}),fG=ca(588),gG=ee(function({id:a="noid",viewport:d,inputs:k,callbacks:K=Vu,meta:da=Vu,components:ja=Vu,children:qa}){const [Ha,Ra]=kB.useState(()=>{const {Brush:fb,ContextBar:jb,DirectionIndicator:Kb,Grid:Nb,Handle:Hb,SelectionBackground:fc,SelectionDetail:qc,SelectionForeground:Wb}=
ja,kc=zf(ja,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:a,viewport:d,inputs:k,callbacks:K,meta:da,components:hf(Yd({},kc),{Brush:null===fb?void 0:gB,ContextBar:jb,DirectionIndicator:null===Kb?void 0:wx,Grid:null===Nb?void 0:$A,Handle:null===Hb?void 0:iB,SelectionBackground:null===fc?void 0:bB,SelectionDetail:null===qc?void 0:dB,SelectionForeground:null===Wb?void 0:fB})}});kB.useLayoutEffect(()=>{const {Brush:fb,ContextBar:jb,
DirectionIndicator:Kb,Grid:Nb,Handle:Hb,SelectionBackground:fc,SelectionDetail:qc,SelectionForeground:Wb}=ja,kc=zf(ja,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return ic(()=>{Ra({id:a,viewport:d,inputs:k,callbacks:K,meta:da,components:hf(Yd({},kc),{Brush:null===fb?void 0:gB,ContextBar:jb,DirectionIndicator:null===Kb?void 0:wx,Grid:null===Nb?void 0:$A,Handle:null===Hb?void 0:iB,SelectionBackground:null===fc?void 0:bB,SelectionDetail:null===
qc?void 0:dB,SelectionForeground:null===Wb?void 0:fB})})})},[]);const $a=ol(a);return(0,fG.jsx)($a.Provider,{value:Ha,children:qa})}),nB=ca(588),hG=ca(588),iG=ee(function(a){const d=lg();return(0,hG.jsx)(Kg,Yd({viewport:d.viewport,inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,
erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,penMode:d.settings.penMode,showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,showCloneHandles:d.showCloneHandles,showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},
a))});ca(588);var As=Jf(ca(19)),fq=Jf(ca(19)),jG=ca(588),kG="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),bh=a=>{var {name:d,className:k}=a;a=zf(a,["name","className"]);const K=kG.includes(d)?"tie tie-":"ti ti-";return(0,jG.jsx)("i",Yd({className:[K+d,k].join(" ")},
a))},Xg=ca(19),lG=ca(19),tr=ca(19),Mm=ca(19),xx=ca(19),mG=ca(20),Nl=ca(19),Ko=(0,Nl.forwardRef)((a,d)=>{var {children:k}=a;a=zf(a,["children"]);const K=Nl.Children.toArray(k),da=K.find(sg);if(da){const ja=da.props.children;k=K.map(qa=>qa===da?1<Nl.Children.count(ja)?Nl.Children.only(null):(0,Nl.isValidElement)(ja)?ja.props.children:null:qa);return(0,Nl.createElement)(yx,Ge({},a,{ref:d}),(0,Nl.isValidElement)(ja)?(0,Nl.cloneElement)(ja,void 0,k):null)}return(0,Nl.createElement)(yx,Ge({},a,{ref:d}),
k)});Ko.displayName="Slot";var yx=(0,Nl.forwardRef)((a,d)=>{const {children:k}=a;a=zf(a,["children"]);return(0,Nl.isValidElement)(k)?(0,Nl.cloneElement)(k,hf(Yd({},Xl(a,k.props)),{ref:tg(d,k.ref)})):1<Nl.Children.count(k)?Nl.Children.only(null):null});yx.displayName="SlotClone";var oB=({children:a})=>(0,Nl.createElement)(Nl.Fragment,null,a),Rj="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const k=(0,xx.forwardRef)((K,da)=>{var {asChild:ja}=K;K=zf(K,["asChild"]);
ja=ja?Ko:d;(0,xx.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,xx.createElement)(ja,Ge({},K,{ref:da}))});k.displayName=`Primitive.${d}`;return hf(Yd({},a),{[d]:k})},{}),zx=ca(19),nG=ca(19),pB,oG=(0,Mm.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ax=(0,Mm.forwardRef)((a,d)=>{var k;const {disableOutsidePointerEvents:K=!1,onEscapeKeyDown:da,onPointerDownOutside:ja,onFocusOutside:qa,onInteractOutside:Ha,onDismiss:Ra}=a,$a=zf(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),
fb=(0,Mm.useContext)(oG),[jb,Kb]=(0,Mm.useState)(null),Nb=null!==(k=null===jb||void 0===jb?void 0:jb.ownerDocument)&&void 0!==k?k:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Hb]=(0,Mm.useState)({});d=Zg(d,hc=>Kb(hc));k=Array.from(fb.layers);var [fc]=[...fb.layersWithOutsidePointerEventsDisabled].slice(-1);fc=k.indexOf(fc);const qc=jb?k.indexOf(jb):-1;k=0<fb.layersWithOutsidePointerEventsDisabled.size;const Wb=qc>=fc;fc=Il(hc=>{const Fc=hc.target,Mc=[...fb.branches].some(ud=>
ud.contains(Fc));Wb&&!Mc&&(null===ja||void 0===ja||ja(hc),null===Ha||void 0===Ha||Ha(hc),hc.defaultPrevented||null===Ra||void 0===Ra||Ra())},Nb);const kc=vl(hc=>{const Fc=hc.target;[...fb.branches].some(Mc=>Mc.contains(Fc))||(null===qa||void 0===qa||qa(hc),null===Ha||void 0===Ha||Ha(hc),hc.defaultPrevented||null===Ra||void 0===Ra||Ra())},Nb);ul(hc=>{qc===fb.layers.size-1&&(null===da||void 0===da||da(hc),!hc.defaultPrevented&&Ra&&(hc.preventDefault(),Ra()))},Nb);(0,Mm.useEffect)(()=>{if(jb)return K&&
(0===fb.layersWithOutsidePointerEventsDisabled.size&&(pB=Nb.body.style.pointerEvents,Nb.body.style.pointerEvents="none"),fb.layersWithOutsidePointerEventsDisabled.add(jb)),fb.layers.add(jb),Dn(),()=>{K&&1===fb.layersWithOutsidePointerEventsDisabled.size&&(Nb.body.style.pointerEvents=pB)}},[jb,Nb,K,fb]);(0,Mm.useEffect)(()=>()=>{jb&&(fb.layers.delete(jb),fb.layersWithOutsidePointerEventsDisabled.delete(jb),Dn())},[jb,fb]);(0,Mm.useEffect)(()=>{const hc=()=>Hb({});document.addEventListener("dismissableLayer.update",
hc);return()=>document.removeEventListener("dismissableLayer.update",hc)},[]);return(0,Mm.createElement)(Rj.div,Ge({},$a,{ref:d,style:Yd({pointerEvents:k?Wb?"auto":"none":void 0},a.style),onFocusCapture:Sf(a.onFocusCapture,kc.onFocusCapture),onBlurCapture:Sf(a.onBlurCapture,kc.onBlurCapture),onPointerDownCapture:Sf(a.onPointerDownCapture,fc.onPointerDownCapture)}))}),qB=Jf(ca(19)),pG=ca(19),yl=(null===globalThis||void 0===globalThis?0:globalThis.document)?pG.useLayoutEffect:()=>{},qG=qB["useId".toString()]||
(()=>{}),rG=0,Tk=ca(19),sG=(a,d,k)=>Mh(void 0,null,function*(){const {placement:K="bottom",strategy:da="absolute",middleware:ja=[],platform:qa}=k,Ha=yield null==qa.isRTL?void 0:qa.isRTL(d);let Ra=yield qa.getElementRects({reference:a,floating:d,strategy:da}),{x:$a,y:fb}=Bk(Ra,K,Ha),jb=K,Kb={},Nb=0;for(let Hb=0;Hb<ja.length;Hb++){const {name:fc,fn:qc}=ja[Hb],{x:Wb,y:kc,data:hc,reset:Fc}=yield qc({x:$a,y:fb,initialPlacement:K,placement:jb,strategy:da,middlewareData:Kb,rects:Ra,platform:qa,elements:{reference:a,
floating:d}});$a=null!=Wb?Wb:$a;fb=null!=kc?kc:fb;Kb=hf(Yd({},Kb),{[fc]:Yd(Yd({},Kb[fc]),hc)});Fc&&50>=Nb&&(Nb++,"object"==typeof Fc&&(Fc.placement&&(jb=Fc.placement),Fc.rects&&(Ra=!0===Fc.rects?yield qa.getElementRects({reference:a,floating:d,strategy:da}):Fc.rects),{x:$a,y:fb}=Bk(Ra,jb,Ha)),Hb=-1)}return{x:$a,y:fb,placement:jb,strategy:da,middlewareData:Kb}}),Bx=Math.min,mp=Math.max,rB=a=>({name:"arrow",options:a,fn(d){return Mh(this,null,function*(){const {element:k,padding:K=0}=null!=a?a:{},{x:da,
y:ja,placement:qa,rects:Ha,platform:Ra}=d;if(null==k)return{};const $a=nm(K),fb={x:da,y:ja},jb=el(qa),Kb=qa.split("-")[1],Nb=Yl(jb);var Hb=yield Ra.getDimensions(k);const fc="y"===jb?"top":"left",qc="y"===jb?"bottom":"right";var Wb=Ha.reference[Nb]+Ha.reference[jb]-fb[jb]-Ha.floating[Nb];const kc=fb[jb]-Ha.reference[jb];var hc=yield null==Ra.getOffsetParent?void 0:Ra.getOffsetParent(k);let Fc=hc?"y"===jb?hc.clientHeight||0:hc.clientWidth||0:0;0===Fc&&(Fc=Ha.floating[Nb]);hc=$a[fc];const Mc=Fc-Hb[Nb]-
$a[qc];Hb=Fc/2-Hb[Nb]/2+(Wb/2-kc/2);Wb=mp(hc,Bx(Hb,Mc));return{[jb]:fb[jb]-(0<("start"===Kb?$a[fc]:$a[qc])&&Hb!==Wb&&Ha.reference[Nb]<=Ha.floating[Nb]?Hb<hc?hc-Hb:Mc-Hb:0),data:{[jb]:Wb,centerOffset:Hb-Wb}}})}}),tG={left:"right",right:"left",bottom:"top",top:"bottom"},uG={start:"end",end:"start"},sB=["top","right","bottom","left"];sB.reduce((a,d)=>a.concat(d,d+"-start",d+"-end"),[]);var tB=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return Mh(this,null,function*(){var k;const {placement:K,
middlewareData:da,rects:ja,initialPlacement:qa,platform:Ha,elements:Ra}=d;var $a=a;const {mainAxis:fb=!0,crossAxis:jb=!0,fallbackPlacements:Kb,fallbackStrategy:Nb="bestFit",flipAlignment:Hb=!0}=$a;$a=zf($a,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const fc=Hh(K);var qc=Kb||(fc!==qa&&Hb?function(ud){const Jd=fl(ud);return[xi(ud),Jd,xi(Jd)]}(qa):[fl(qa)]);qc=[qa,...qc];const Wb=yield Jl(d,$a),kc=[];$a=(null==(k=da.flip)?void 0:k.overflows)||[];if(fb&&kc.push(Wb[fc]),
jb){const {main:ud,cross:Jd}=wl(K,ja,yield null==Ha.isRTL?void 0:Ha.isRTL(Ra.floating));kc.push(Wb[ud],Wb[Jd])}if($a=[...$a,{placement:K,overflows:kc}],!kc.every(ud=>0>=ud)){var hc,Fc;k=(null!=(hc=null==(Fc=da.flip)?void 0:Fc.index)?hc:0)+1;if(hc=qc[k])return{data:{index:k,overflows:$a},reset:{placement:hc}};hc="bottom";switch(Nb){case "bestFit":var Mc;(Fc=null==(Mc=$a.map(ud=>[ud,ud.overflows.filter(Jd=>0<Jd).reduce((Jd,Qe)=>Jd+Qe,0)]).sort((ud,Jd)=>ud[1]-Jd[1])[0])?void 0:Mc[0].placement)&&(hc=
Fc);break;case "initialPlacement":hc=qa}if(K!==hc)return{reset:{placement:hc}}}return{}})}}},uB=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,k=zf(a,["strategy"]);return{name:"hide",fn(K){return Mh(this,null,function*(){var {rects:da}=K;switch(d){case "referenceHidden":return da=ak(yield Jl(K,hf(Yd({},k),{elementContext:"reference"})),da.reference),{data:{referenceHiddenOffsets:da,referenceHidden:bk(da)}};case "escaped":return da=ak(yield Jl(K,hf(Yd({},k),{altBoundary:!0})),da.floating),
{data:{escapedOffsets:da,escaped:bk(da)}};default:return{}}})}}},vB=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return Mh(this,null,function*(){const {x:k,y:K}=d,da=yield function(ja,qa){return Mh(this,null,function*(){const {placement:Ha,platform:Ra,elements:$a}=ja;var fb=yield null==Ra.isRTL?void 0:Ra.isRTL($a.floating),jb=Hh(Ha);const Kb=Ha.split("-")[1],Nb="x"===el(Ha);jb=["left","top"].includes(jb)?-1:1;fb=fb&&Nb?-1:1;const Hb="function"==typeof qa?qa(ja):qa;let {mainAxis:fc,
crossAxis:qc,alignmentAxis:Wb}="number"==typeof Hb?{mainAxis:Hb,crossAxis:0,alignmentAxis:null}:Yd({mainAxis:0,crossAxis:0,alignmentAxis:null},Hb);return Kb&&"number"==typeof Wb&&(qc="end"===Kb?-1*Wb:Wb),Nb?{x:qc*fb,y:fc*jb}:{x:fc*jb,y:qc*fb}})}(d,a);return{x:k+da.x,y:K+da.y,data:da}})}}},wB=function(a){return void 0===a&&(a={}),{name:"shift",options:a,fn(d){return Mh(this,null,function*(){const {x:k,y:K,placement:da}=d;var ja=a;const {mainAxis:qa=!0,crossAxis:Ha=!1,limiter:Ra={fn:Nb=>{let {x:Hb,
y:fc}=Nb;return{x:Hb,y:fc}}}}=ja;var $a=zf(ja,["mainAxis","crossAxis","limiter"]);ja={x:k,y:K};$a=yield Jl(d,$a);const fb=el(Hh(da)),jb="x"===fb?"y":"x";let Kb=ja[fb];ja=ja[jb];qa&&(Kb=mp(Kb+$a["y"===fb?"top":"left"],Bx(Kb,Kb-$a["y"===fb?"bottom":"right"])));Ha&&(ja=mp(ja+$a["y"===jb?"top":"left"],Bx(ja,ja-$a["y"===jb?"bottom":"right"])));ja=Ra.fn(hf(Yd({},d),{[fb]:Kb,[jb]:ja}));return hf(Yd({},ja),{data:{x:ja.x-k,y:ja.y-K}})})}}},xB=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:k,
y:K,placement:da,rects:ja,middlewareData:qa}=d,{offset:Ha=0,mainAxis:Ra=!0,crossAxis:$a=!0}=a;var fb={x:k,y:K};d=el(da);const jb="x"===d?"y":"x";let Kb=fb[d];fb=fb[jb];var Nb="function"==typeof Ha?Ha(hf(Yd({},ja),{placement:da})):Ha;Nb="number"==typeof Nb?{mainAxis:Nb,crossAxis:0}:Yd({mainAxis:0,crossAxis:0},Nb);if(Ra){var Hb="y"===d?"height":"width",fc=ja.reference[d]-ja.floating[Hb]+Nb.mainAxis;Hb=ja.reference[d]+ja.reference[Hb]-Nb.mainAxis;Kb<fc?Kb=fc:Kb>Hb&&(Kb=Hb)}if($a){var qc,Wb,kc,hc;const Fc=
"y"===d?"width":"height";fc=["top","left"].includes(Hh(da));Hb=ja.reference[jb]-ja.floating[Fc]+(fc&&null!=(qc=null==(Wb=qa.offset)?void 0:Wb[jb])?qc:0)+(fc?0:Nb.crossAxis);qc=ja.reference[jb]+ja.reference[Fc]+(fc?0:null!=(kc=null==(hc=qa.offset)?void 0:hc[jb])?kc:0)-(fc?Nb.crossAxis:0);fb<Hb?fb=Hb:fb>qc&&(fb=qc)}return{[d]:Kb,[jb]:fb}}}},vG=function(a){return void 0===a&&(a={}),{name:"size",options:a,fn(d){return Mh(this,null,function*(){const {placement:k,rects:K,platform:da,elements:ja}=d;var qa=
a,{apply:Ha}=qa;qa=zf(qa,["apply"]);qa=yield Jl(d,qa);var Ra=Hh(k),$a=k.split("-")[1],fb,jb;"top"===Ra||"bottom"===Ra?(fb=Ra,jb=$a===((yield null==da.isRTL?void 0:da.isRTL(ja.floating))?"start":"end")?"left":"right"):(jb=Ra,fb="end"===$a?"top":"bottom");Ra=mp(qa.left,0);$a=mp(qa.right,0);const Kb=mp(qa.top,0),Nb=mp(qa.bottom,0);jb={availableHeight:K.floating.height-(["left","right"].includes(k)?2*(0!==Kb||0!==Nb?Kb+Nb:mp(qa.top,qa.bottom)):qa[fb]),availableWidth:K.floating.width-(["top","bottom"].includes(k)?
2*(0!==Ra||0!==$a?Ra+$a:mp(qa.left,qa.right)):qa[jb])};fb=yield da.getDimensions(ja.floating);null==Ha||Ha(Yd(Yd({},d),jb));Ha=yield da.getDimensions(ja.floating);return fb.width!==Ha.width||fb.height!==Ha.height?{reset:{rects:!0}}:{}})}}},yB=Math.min,Ut=Math.max,rv=Math.round,wG={getClippingRect:function(a){let {element:d,boundary:k,rootBoundary:K,strategy:da}=a;a=[...("clippingAncestors"===k?hp(d):[].concat(k)),K];a=a.reduce((ja,qa)=>{qa=Yn(d,qa,da);return ja.top=Ut(qa.top,ja.top),ja.right=yB(qa.right,
ja.right),ja.bottom=yB(qa.bottom,ja.bottom),ja.left=Ut(qa.left,ja.left),ja},Yn(d,a[0],da));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,offsetParent:k,strategy:K}=a;var da=qj(k);const ja=zj(k);if(k===ja)return d;a={scrollLeft:0,scrollTop:0};var qa=0,Ha=0;(da||!da&&"fixed"!==K)&&(("body"!==Ci(k)||Ji(ja))&&(a=$l(k)),qj(k))&&(da=mk(k,!0),qa=da.x+k.clientLeft,Ha=da.y+k.clientTop);return hf(Yd({},d),{x:d.x-
a.scrollLeft+qa,y:d.y-a.scrollTop+Ha})},isElement:wk,getDimensions:Rl,getOffsetParent:$i,getDocumentElement:zj,getElementRects:a=>{let {reference:d,floating:k,strategy:K}=a;a=$i(k);var da=qj(a);const ja=zj(a);var qa;if(qa=da)qa=mk(a),qa=rv(qa.width)!==a.offsetWidth||rv(qa.height)!==a.offsetHeight;qa=mk(d,qa,"fixed"===K);let Ha={scrollLeft:0,scrollTop:0};var Ra=0,$a=0;if(da||!da&&"fixed"!==K)(("body"!==Ci(a)||Ji(ja))&&(Ha=$l(a)),qj(a))?(da=mk(a,!0),Ra=da.x+a.clientLeft,$a=da.y+a.clientTop):ja&&(Ra=
sn(ja));return{reference:{x:qa.left+Ha.scrollLeft-Ra,y:qa.top+Ha.scrollTop-$a,width:qa.width,height:qa.height},floating:hf(Yd({},Rl(k)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===Pi(a).direction},xG=(a,d,k)=>sG(a,d,Yd({platform:wG},k)),jn=Jf(ca(19),1),zB=ca(19),yG=Jf(ca(20),1),Cx="undefined"!==typeof document?zB.useLayoutEffect:zB.useEffect,AB=a=>{const {element:d,padding:k}=a;return{name:"arrow",options:a,fn(K){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=
d.current)return rB({element:d.current,padding:k}).fn(K)}else if(d)return rB({element:d,padding:k}).fn(K);return{}}}},Dx=ca(19),zG=(0,Dx.forwardRef)((a,d)=>{const {children:k,width:K=10,height:da=5}=a,ja=zf(a,["children","width","height"]);return(0,Dx.createElement)(Rj.svg,Ge({},ja,{ref:d,width:K,height:da,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?k:(0,Dx.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),AG=ca(19),[Ex,Bs]=Bh("Popper"),[BG,BB]=Ex("Popper"),Fx=(0,Tk.forwardRef)((a,
d)=>{const {__scopePopper:k,virtualRef:K}=a;a=zf(a,["__scopePopper","virtualRef"]);const da=BB("PopperAnchor",k),ja=(0,Tk.useRef)(null);d=Zg(d,ja);(0,Tk.useEffect)(()=>{da.onAnchorChange((null===K||void 0===K?void 0:K.current)||ja.current)});return K?null:(0,Tk.createElement)(Rj.div,Ge({},a,{ref:d}))}),[CG,DG]=Ex("PopperContent"),[EG,FG]=Ex("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Gx=(0,Tk.forwardRef)((a,d)=>{var k,K,da,ja,qa,Ha,Ra,$a;const {__scopePopper:fb,side:jb="bottom",sideOffset:Kb=
0,align:Nb="center",alignOffset:Hb=0,arrowPadding:fc=0,collisionBoundary:qc=[],collisionPadding:Wb=0,sticky:kc="partial",hideWhenDetached:hc=!1,avoidCollisions:Fc=!0}=a;a=zf(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Mc=BB("PopperContent",fb),[ud,Jd]=(0,Tk.useState)(null);d=Zg(d,Tj=>Jd(Tj));const [Qe,Zd]=(0,Tk.useState)(null);var Ee=sb(Qe),gf=null!==(k=null===Ee||void 0===Ee?void 0:Ee.width)&&
void 0!==k?k:0;k=null!==(K=null===Ee||void 0===Ee?void 0:Ee.height)&&void 0!==K?K:0;K=jb+("center"!==Nb?"-"+Nb:"");Ee="number"===typeof Wb?Wb:Yd({top:0,right:0,bottom:0,left:0},Wb);const Re=Array.isArray(qc)?qc:[qc],cf=0<Re.length;Ee={padding:Ee,boundary:Re.filter(Qb),altBoundary:cf};const {reference:Gd,floating:nd,strategy:Ad,x:id,y:Dd,placement:De,middlewareData:Ye,update:Rf}=Xb({strategy:"fixed",placement:K,whileElementsMounted:Sb,middleware:[vB({mainAxis:Kb+k,alignmentAxis:Hb}),Fc?wB(Yd({mainAxis:!0,
crossAxis:!1,limiter:"partial"===kc?xB():void 0},Ee)):void 0,Qe?AB({element:Qe,padding:fc}):void 0,Fc?tB(Yd({},Ee)):void 0,HG({arrowWidth:gf,arrowHeight:k}),hc?uB({strategy:"referenceHidden"}):void 0].filter(cc)});yl(()=>{Gd(Mc.anchor)},[Gd,Mc.anchor]);const eg=null!==id&&null!==Dd,[df,Ag]=zb(De);gf=null===(da=Ye.arrow)||void 0===da?void 0:da.x;da=null===(ja=Ye.arrow)||void 0===ja?void 0:ja.y;ja=0!==(null===(qa=Ye.arrow)||void 0===qa?void 0:qa.centerOffset);const [Bf,Og]=(0,Tk.useState)();yl(()=>
{ud&&Og(window.getComputedStyle(ud).zIndex)},[ud]);const {hasParent:Yg,positionUpdateFns:Bi}=FG("PopperContent",fb),Lj=!Yg;(0,Tk.useLayoutEffect)(()=>{if(!Lj)return Bi.add(Rf),()=>{Bi.delete(Rf)}},[Lj,Bi,Rf]);(0,Tk.useLayoutEffect)(()=>{Lj&&eg&&Array.from(Bi).reverse().forEach(Tj=>requestAnimationFrame(Tj))},[Lj,eg,Bi]);qa=hf(Yd({"data-side":df,"data-align":Ag},a),{ref:d,style:hf(Yd({},a.style),{animation:eg?void 0:"none",opacity:null!==(Ha=Ye.hide)&&void 0!==Ha&&Ha.referenceHidden?0:void 0})});return(0,Tk.createElement)("div",
{ref:nd,"data-radix-popper-content-wrapper":"",style:{position:Ad,left:0,top:0,transform:eg?`translate3d(${Math.round(id)}px, ${Math.round(Dd)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Bf,["--radix-popper-transform-origin"]:[null===(Ra=Ye.transformOrigin)||void 0===Ra?void 0:Ra.x,null===($a=Ye.transformOrigin)||void 0===$a?void 0:$a.y].join(" ")}},(0,Tk.createElement)(CG,{scope:fb,placedSide:df,onArrowChange:Zd,arrowX:gf,arrowY:da,shouldHideArrow:ja},Lj?(0,Tk.createElement)(EG,
{scope:fb,hasParent:!0,positionUpdateFns:Bi},(0,Tk.createElement)(Rj.div,qa)):(0,Tk.createElement)(Rj.div,qa)))}),GG={top:"bottom",right:"left",bottom:"top",left:"right"},CB=(0,Tk.forwardRef)(function(a,d){var {__scopePopper:k}=a;a=zf(a,["__scopePopper"]);k=DG("PopperArrow",k);return(0,Tk.createElement)("span",{ref:k.onArrowChange,style:{position:"absolute",left:k.arrowX,top:k.arrowY,[GG[k.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[k.placedSide],transform:{top:"translateY(100%)",
right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[k.placedSide],visibility:k.shouldHideArrow?"hidden":void 0}},(0,Tk.createElement)(zG,Ge({},a,{ref:d,style:hf(Yd({},a.style),{display:"block"})})))}),HG=a=>({name:"transformOrigin",options:a,fn(d){var k,K,da,ja,qa;const {placement:Ha,rects:Ra,middlewareData:$a}=d,fb=(d=0!==(null===(k=$a.arrow)||void 0===k?void 0:k.centerOffset))?0:a.arrowWidth;k=d?0:a.arrowHeight;const [jb,
Kb]=zb(Ha),Nb={start:"0%",center:"50%",end:"100%"}[Kb],Hb=(null!==(K=null===(da=$a.arrow)||void 0===da?void 0:da.x)&&void 0!==K?K:0)+fb/2;K=(null!==(ja=null===(qa=$a.arrow)||void 0===qa?void 0:qa.y)&&void 0!==ja?ja:0)+k/2;qa=ja="";"bottom"===jb?(ja=d?Nb:`${Hb}px`,qa=`${-k}px`):"top"===jb?(ja=d?Nb:`${Hb}px`,qa=`${Ra.floating.height+k}px`):"right"===jb?(ja=`${-k}px`,qa=d?Nb:`${K}px`):"left"===jb&&(ja=`${Ra.floating.width+k}px`,qa=d?Nb:`${K}px`);return{data:{x:ja,y:qa}}}}),Hx=a=>{const {__scopePopper:d,
children:k}=a,[K,da]=(0,Tk.useState)(null);return(0,Tk.createElement)(BG,{scope:d,anchor:K,onAnchorChange:da},k)},DB=ca(19),IG=Jf(ca(20)),JG=(0,DB.forwardRef)((a,d)=>{var k;const {container:K=null===globalThis||void 0===globalThis?void 0:null===(k=globalThis.document)||void 0===k?void 0:k.body}=a;a=zf(a,["container"]);return K?IG.default.createPortal((0,DB.createElement)(Rj.div,Ge({},a,{ref:d})),K):null}),np=ca(19),KG=ca(20),Vt=a=>{const {present:d,children:k}=a;a=Zb(d);const K="function"===typeof k?
k({present:a.isPresent}):np.Children.only(k),da=Zg(a.ref,K.ref);return"function"===typeof k||a.isPresent?(0,np.cloneElement)(K,{ref:da}):null};Vt.displayName="Presence";var sv=ca(19),EB=ca(19),LG=(0,EB.forwardRef)((a,d)=>(0,EB.createElement)(Rj.span,Ge({},a,{ref:d,style:Yd({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[tv]=Bh("Tooltip",[Bs]),uv=Bs(),[MG,Ix]=tv("TooltipProvider"),[NG,
Wt]=tv("Tooltip"),OG=(0,Xg.forwardRef)((a,d)=>{var {__scopeTooltip:k}=a;const K=zf(a,["__scopeTooltip"]),da=Wt("TooltipTrigger",k),ja=Ix("TooltipTrigger",k);k=uv(k);const qa=(0,Xg.useRef)(null);d=Zg(d,qa,da.onTriggerChange);const Ha=(0,Xg.useRef)(!1),Ra=(0,Xg.useRef)(!1),$a=(0,Xg.useCallback)(()=>Ha.current=!1,[]);(0,Xg.useEffect)(()=>()=>document.removeEventListener("pointerup",$a),[$a]);return(0,Xg.createElement)(Fx,Ge({asChild:!0},k),(0,Xg.createElement)(Rj.button,Ge({"aria-describedby":da.open?
da.contentId:void 0,"data-state":da.stateAttribute},K,{ref:d,onPointerMove:Sf(a.onPointerMove,fb=>{"touch"===fb.pointerType||Ra.current||ja.isPointerInTransitRef.current||(da.onTriggerEnter(),Ra.current=!0)}),onPointerLeave:Sf(a.onPointerLeave,()=>{da.onTriggerLeave();Ra.current=!1}),onPointerDown:Sf(a.onPointerDown,()=>{Ha.current=!0;document.addEventListener("pointerup",$a,{once:!0})}),onFocus:Sf(a.onFocus,()=>{if(!Ha.current)da.onOpen()}),onBlur:Sf(a.onBlur,da.onClose),onClick:Sf(a.onClick,da.onClose)})))}),
[PG,QG]=tv("TooltipPortal",{forceMount:void 0}),RG=(0,Xg.forwardRef)((a,d)=>{var k=QG("TooltipContent",a.__scopeTooltip);const {forceMount:K=k.forceMount,side:da="top"}=a;k=zf(a,["forceMount","side"]);a=Wt("TooltipContent",a.__scopeTooltip);return(0,Xg.createElement)(Vt,{present:K||a.open},a.disableHoverableContent?(0,Xg.createElement)(FB,Ge({side:da},k,{ref:d})):(0,Xg.createElement)(SG,Ge({side:da},k,{ref:d})))}),SG=(0,Xg.forwardRef)((a,d)=>{const k=Wt("TooltipContent",a.__scopeTooltip),K=Ix("TooltipContent",
a.__scopeTooltip),da=(0,Xg.useRef)(null);d=Zg(d,da);const [ja,qa]=(0,Xg.useState)(null),{trigger:Ha,onClose:Ra}=k,$a=da.current,{onPointerInTransitChange:fb}=K,jb=(0,Xg.useCallback)(()=>{qa(null);fb(!1)},[fb]),Kb=(0,Xg.useCallback)((Nb,Hb)=>{const fc=ed({x:Nb.clientX,y:Nb.clientY},Nb.currentTarget.getBoundingClientRect()),qc="right"===fc||"bottom"===fc?-5:5;Nb="right"===fc||"left"===fc?{x:Nb.clientX+qc,y:Nb.clientY}:{x:Nb.clientX,y:Nb.clientY+qc};Hb=Hb.getBoundingClientRect();const {top:Wb,right:kc,
bottom:hc,left:Fc}=Hb;Hb=od([Nb,{x:Fc,y:Wb},{x:kc,y:Wb},{x:kc,y:hc},{x:Fc,y:hc}]);qa(Hb);fb(!0)},[fb]);(0,Xg.useEffect)(()=>()=>jb(),[jb]);(0,Xg.useEffect)(()=>{if(Ha&&$a){const Nb=fc=>Kb(fc,$a),Hb=fc=>Kb(fc,Ha);Ha.addEventListener("pointerleave",Nb);$a.addEventListener("pointerleave",Hb);return()=>{Ha.removeEventListener("pointerleave",Nb);$a.removeEventListener("pointerleave",Hb)}}},[Ha,$a,Kb,jb]);(0,Xg.useEffect)(()=>{if(ja){const Nb=Hb=>{var fc=Hb.target;Hb={x:Hb.clientX,y:Hb.clientY};fc=(null===
Ha||void 0===Ha?void 0:Ha.contains(fc))||(null===$a||void 0===$a?void 0:$a.contains(fc));const {x:qc,y:Wb}=Hb;Hb=!1;for(let kc=0,hc=ja.length-1;kc<ja.length;hc=kc++){const Fc=ja[kc].x,Mc=ja[kc].y,ud=ja[hc].x,Jd=ja[hc].y;Mc>Wb!==Jd>Wb&&qc<(ud-Fc)*(Wb-Mc)/(Jd-Mc)+Fc&&(Hb=!Hb)}Hb=!Hb;fc?jb():Hb&&(jb(),Ra())};document.addEventListener("pointermove",Nb);return()=>document.removeEventListener("pointermove",Nb)}},[Ha,$a,ja,Ra,jb]);return(0,Xg.createElement)(FB,Ge({},a,{ref:d}))}),[TG,UG]=tv("Tooltip",{isInside:!1}),
FB=(0,Xg.forwardRef)((a,d)=>{const {__scopeTooltip:k,children:K,"aria-label":da,onEscapeKeyDown:ja,onPointerDownOutside:qa}=a;a=zf(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Ha=Wt("TooltipContent",k),Ra=uv(k),{onClose:$a}=Ha;(0,Xg.useEffect)(()=>{document.addEventListener("tooltip.open",$a);return()=>document.removeEventListener("tooltip.open",$a)},[$a]);(0,Xg.useEffect)(()=>{if(Ha.trigger){const fb=jb=>{jb=jb.target;null!==jb&&void 0!==jb&&jb.contains(Ha.trigger)&&
$a()};window.addEventListener("scroll",fb,{capture:!0});return()=>window.removeEventListener("scroll",fb,{capture:!0})}},[Ha.trigger,$a]);return(0,Xg.createElement)(Ax,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ja,onPointerDownOutside:qa,onFocusOutside:fb=>fb.preventDefault(),onDismiss:$a},(0,Xg.createElement)(Gx,Ge({"data-state":Ha.stateAttribute},Ra,a,{ref:d,style:hf(Yd({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,Xg.createElement)(oB,
null,K),(0,Xg.createElement)(TG,{scope:k,isInside:!0},(0,Xg.createElement)(LG,{id:Ha.contentId,role:"tooltip"},da||K))))}),VG=(0,Xg.forwardRef)((a,d)=>{const {__scopeTooltip:k}=a;a=zf(a,["__scopeTooltip"]);const K=uv(k);return UG("TooltipArrow",k).isInside?null:(0,Xg.createElement)(CB,Ge({},K,a,{ref:d}))}),WG=a=>{const {__scopeTooltip:d,delayDuration:k=700,skipDelayDuration:K=300,disableHoverableContent:da=!1,children:ja}=a,[qa,Ha]=(0,Xg.useState)(!0),Ra=(0,Xg.useRef)(!1),$a=(0,Xg.useRef)(0);(0,Xg.useEffect)(()=>
{const fb=$a.current;return()=>window.clearTimeout(fb)},[]);return(0,Xg.createElement)(MG,{scope:d,isOpenDelayed:qa,delayDuration:k,onOpen:(0,Xg.useCallback)(()=>{window.clearTimeout($a.current);Ha(!1)},[]),onClose:(0,Xg.useCallback)(()=>{window.clearTimeout($a.current);$a.current=window.setTimeout(()=>Ha(!0),K)},[K]),isPointerInTransitRef:Ra,onPointerInTransitChange:(0,Xg.useCallback)(fb=>{Ra.current=fb},[]),disableHoverableContent:da},ja)},XG=a=>{const {__scopeTooltip:d,children:k,open:K,defaultOpen:da=
!1,onOpenChange:ja,disableHoverableContent:qa,delayDuration:Ha}=a,Ra=Ix("Tooltip",a.__scopeTooltip);a=uv(d);const [$a,fb]=(0,Xg.useState)(null),jb=Ei(),Kb=(0,Xg.useRef)(0),Nb=null!==qa&&void 0!==qa?qa:Ra.disableHoverableContent,Hb=null!==Ha&&void 0!==Ha?Ha:Ra.delayDuration,fc=(0,Xg.useRef)(!1),[qc=!1,Wb]=Dc({prop:K,defaultProp:da,onChange:ud=>{if(ud)Ra.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else Ra.onClose();null===ja||void 0===ja||ja(ud)}}),kc=(0,Xg.useMemo)(()=>qc?fc.current?
"delayed-open":"instant-open":"closed",[qc]),hc=(0,Xg.useCallback)(()=>{window.clearTimeout(Kb.current);fc.current=!1;Wb(!0)},[Wb]),Fc=(0,Xg.useCallback)(()=>{window.clearTimeout(Kb.current);Wb(!1)},[Wb]),Mc=(0,Xg.useCallback)(()=>{window.clearTimeout(Kb.current);Kb.current=window.setTimeout(()=>{fc.current=!0;Wb(!0)},Hb)},[Hb,Wb]);(0,Xg.useEffect)(()=>()=>window.clearTimeout(Kb.current),[]);return(0,Xg.createElement)(Hx,a,(0,Xg.createElement)(NG,{scope:d,contentId:jb,open:qc,stateAttribute:kc,trigger:$a,
onTriggerChange:fb,onTriggerEnter:(0,Xg.useCallback)(()=>{Ra.isOpenDelayed?Mc():hc()},[Ra.isOpenDelayed,Mc,hc]),onTriggerLeave:(0,Xg.useCallback)(()=>{Nb?Fc():window.clearTimeout(Kb.current)},[Fc,Nb]),onOpen:hc,onClose:Fc,disableHoverableContent:Nb},k))},YG=OG,ZG=a=>{const {__scopeTooltip:d,forceMount:k,children:K,container:da}=a;a=Wt("TooltipPortal",d);return(0,Xg.createElement)(PG,{scope:d,forceMount:k},(0,Xg.createElement)(Vt,{present:k||a.open},(0,Xg.createElement)(JG,{asChild:!0,container:da},
K)))},$G=RG,aH=VG,gq=ca(588),GB=ca(588),Jx=ca(588),bH=({style:a,icon:d,onClick:k})=>(0,Jx.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:k,children:(0,Jx.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,Jx.jsx)(bh,{name:d})})}),HB=ca(19),IB=(0,HB.forwardRef)((a,d)=>{const {pressed:k,defaultPressed:K=!1,onPressedChange:da}=a,ja=zf(a,["pressed","defaultPressed","onPressedChange"]),[qa=!1,Ha]=Dc({prop:k,onChange:da,defaultProp:K});
return(0,HB.createElement)(Rj.button,Ge({type:"button","aria-pressed":qa,"data-state":qa?"on":"off","data-disabled":a.disabled?"":void 0},ja,{ref:d,onClick:Sf(a.onClick,()=>{a.disabled||Ha(!qa)})}))}),cH=IB,Kx=ca(588),In=ca(19),Pg=ca(19),Lo=Jf(ca(19)),JB=ca(19),dH=(0,JB.createContext)(void 0),eH=ca(19),Lx=0,hq=ca(19),KB={bubbles:!1,cancelable:!0},LB=(0,hq.forwardRef)((a,d)=>{const {loop:k=!1,trapped:K=!1,onMountAutoFocus:da,onUnmountAutoFocus:ja}=a;a=zf(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);
const [qa,Ha]=(0,hq.useState)(null),Ra=Ii(da),$a=Ii(ja),fb=(0,hq.useRef)(null);d=Zg(d,Nb=>Ha(Nb));const jb=(0,hq.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,hq.useEffect)(()=>{if(K){let Nb=function(fc){!jb.paused&&qa&&(fc=fc.target,qa.contains(fc)?fb.current=fc:jf(fb.current,{select:!0}))},Hb=function(fc){!jb.paused&&qa&&(qa.contains(fc.relatedTarget)||jf(fb.current,{select:!0}))};document.addEventListener("focusin",Nb);document.addEventListener("focusout",Hb);
return()=>{document.removeEventListener("focusin",Nb);document.removeEventListener("focusout",Hb)}}},[K,qa,jb.paused]);(0,hq.useEffect)(()=>{if(qa){MB.add(jb);const Nb=document.activeElement;if(!qa.contains(Nb)){const Hb=new CustomEvent("focusScope.autoFocusOnMount",KB);qa.addEventListener("focusScope.autoFocusOnMount",Ra);qa.dispatchEvent(Hb);Hb.defaultPrevented||(of(vh(bf(qa)),{select:!0}),document.activeElement===Nb&&jf(qa))}return()=>{qa.removeEventListener("focusScope.autoFocusOnMount",Ra);setTimeout(()=>
{const Hb=new CustomEvent("focusScope.autoFocusOnUnmount",KB);qa.addEventListener("focusScope.autoFocusOnUnmount",$a);qa.dispatchEvent(Hb);Hb.defaultPrevented||jf(null!==Nb&&void 0!==Nb?Nb:document.body,{select:!0});qa.removeEventListener("focusScope.autoFocusOnUnmount",$a);MB.remove(jb)},0)}}},[qa,Ra,$a,jb]);const Kb=(0,hq.useCallback)(Nb=>{if((k||K)&&!jb.paused){var Hb=document.activeElement;if("Tab"===Nb.key&&!Nb.altKey&&!Nb.ctrlKey&&!Nb.metaKey&&Hb){const qc=Nb.currentTarget;var fc=qc;const Wb=
bf(fc),kc=xg(Wb,fc);fc=xg(Wb.reverse(),fc);const [hc,Fc]=[kc,fc];hc&&Fc?Nb.shiftKey||Hb!==Fc?Nb.shiftKey&&Hb===hc&&(Nb.preventDefault(),k&&jf(Fc,{select:!0})):(Nb.preventDefault(),k&&jf(hc,{select:!0})):Hb===qc&&Nb.preventDefault()}}},[k,K,jb.paused]);return(0,hq.createElement)(Rj.div,Ge({tabIndex:-1},a,{ref:d,onKeyDown:Kb}))}),MB=function(){let a=[];return{add(d){const k=a[0];d===k||null!==k&&void 0!==k&&k.pause();a=rh(a,d);a.unshift(d)},remove(d){var k;a=rh(a,d);null===(k=a[0])||void 0===k||k.resume()}}}(),
Uk=ca(19),fH={bubbles:!1,cancelable:!0},[Mx,NB,gH]=ag("RovingFocusGroup"),[hH,vv]=Bh("RovingFocusGroup",[gH]),[iH,jH]=hH("RovingFocusGroup"),OB=(0,Uk.forwardRef)((a,d)=>(0,Uk.createElement)(Mx.Provider,{scope:a.__scopeRovingFocusGroup},(0,Uk.createElement)(Mx.Slot,{scope:a.__scopeRovingFocusGroup},(0,Uk.createElement)(kH,Ge({},a,{ref:d}))))),kH=(0,Uk.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:k,orientation:K,loop:da=!1,dir:ja,currentTabStopId:qa,defaultCurrentTabStopId:Ha,onCurrentTabStopIdChange:Ra,
onEntryFocus:$a}=a,fb=zf(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),jb=(0,Uk.useRef)(null);d=Zg(d,jb);const Kb=ng(ja),[Nb=null,Hb]=Dc({prop:qa,defaultProp:Ha,onChange:Ra}),[fc,qc]=(0,Uk.useState)(!1),Wb=Ii($a),kc=NB(k),hc=(0,Uk.useRef)(!1),[Fc,Mc]=(0,Uk.useState)(0);(0,Uk.useEffect)(()=>{const ud=jb.current;if(ud)return ud.addEventListener("rovingFocusGroup.onEntryFocus",Wb),()=>ud.removeEventListener("rovingFocusGroup.onEntryFocus",
Wb)},[Wb]);return(0,Uk.createElement)(iH,{scope:k,orientation:K,dir:Kb,loop:da,currentTabStopId:Nb,onItemFocus:(0,Uk.useCallback)(ud=>Hb(ud),[Hb]),onItemShiftTab:(0,Uk.useCallback)(()=>qc(!0),[]),onFocusableItemAdd:(0,Uk.useCallback)(()=>Mc(ud=>ud+1),[]),onFocusableItemRemove:(0,Uk.useCallback)(()=>Mc(ud=>ud-1),[])},(0,Uk.createElement)(Rj.div,Ge({tabIndex:fc||0===Fc?-1:0,"data-orientation":K},fb,{ref:d,style:Yd({outline:"none"},a.style),onMouseDown:Sf(a.onMouseDown,()=>{hc.current=!0}),onFocus:Sf(a.onFocus,
ud=>{var Jd=!hc.current;if(ud.target===ud.currentTarget&&Jd&&!fc&&(Jd=new CustomEvent("rovingFocusGroup.onEntryFocus",fH),ud.currentTarget.dispatchEvent(Jd),!Jd.defaultPrevented)){ud=kc().filter(Zd=>Zd.focusable);Jd=ud.find(Zd=>Zd.active);const Qe=ud.find(Zd=>Zd.id===Nb);ud=[Jd,Qe,...ud].filter(Boolean).map(Zd=>Zd.ref.current);Gg(ud)}hc.current=!1}),onBlur:Sf(a.onBlur,()=>qc(!1))})))}),PB=(0,Uk.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:k,focusable:K=!0,active:da=!1}=a,ja=zf(a,["__scopeRovingFocusGroup",
"focusable","active"]),qa=Ei(),Ha=jH("RovingFocusGroupItem",k),Ra=Ha.currentTabStopId===qa,$a=NB(k),{onFocusableItemAdd:fb,onFocusableItemRemove:jb}=Ha;(0,Uk.useEffect)(()=>{if(K)return fb(),()=>jb()},[K,fb,jb]);return(0,Uk.createElement)(Mx.ItemSlot,{scope:k,id:qa,focusable:K,active:da},(0,Uk.createElement)(Rj.span,Ge({tabIndex:Ra?0:-1,"data-orientation":Ha.orientation},ja,{ref:d,onMouseDown:Sf(a.onMouseDown,Kb=>{if(K)Ha.onItemFocus(qa);else Kb.preventDefault()}),onFocus:Sf(a.onFocus,()=>Ha.onItemFocus(qa)),
onKeyDown:Sf(a.onKeyDown,Kb=>{if("Tab"===Kb.key&&Kb.shiftKey)Ha.onItemShiftTab();else if(Kb.target===Kb.currentTarget){var Nb=Ph(Kb,Ha.orientation,Ha.dir);if(void 0!==Nb){Kb.preventDefault();let Hb=$a().filter(fc=>fc.focusable).map(fc=>fc.ref.current);if("last"===Nb)Hb.reverse();else if("prev"===Nb||"next"===Nb)"prev"===Nb&&Hb.reverse(),Kb=Hb.indexOf(Kb.currentTarget),Hb=Ha.loop?rg(Hb,Kb+1):Hb.slice(Kb+1);setTimeout(()=>Gg(Hb))}}})})))}),lH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",
PageUp:"first",Home:"first",PageDown:"last",End:"last"},mH=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},Cs=new WeakMap,wv=new WeakMap,xv={},Nx=0,Ox=function(a,d,k){void 0===d&&(d=mH(a));void 0===k&&(k="data-aria-hidden");var K=Array.isArray(a)?a:[a];xv[k]||(xv[k]=new WeakMap);var da=xv[k],ja=[],qa=new Set,Ha=function($a){$a&&!qa.has($a)&&(qa.add($a),Ha($a.parentNode))};K.forEach(Ha);var Ra=function($a){!$a||0<=K.indexOf($a)||Array.prototype.forEach.call($a.children,
function(fb){if(qa.has(fb))Ra(fb);else{var jb=fb.getAttribute("aria-hidden");jb=null!==jb&&"false"!==jb;var Kb=(Cs.get(fb)||0)+1,Nb=(da.get(fb)||0)+1;Cs.set(fb,Kb);da.set(fb,Nb);ja.push(fb);1===Kb&&jb&&wv.set(fb,!0);1===Nb&&fb.setAttribute(k,"true");jb||fb.setAttribute("aria-hidden","true")}})};Ra(d);qa.clear();Nx++;return function(){ja.forEach(function($a){var fb=Cs.get($a)-1,jb=da.get($a)-1;Cs.set($a,fb);da.set($a,jb);fb||(wv.has($a)||$a.removeAttribute("aria-hidden"),wv.delete($a));jb||$a.removeAttribute(k)});
Nx--;Nx||(Cs=new WeakMap,Cs=new WeakMap,wv=new WeakMap,xv={})}},nH=Jf(OD(),1),{__assign:iq,__rest:Jn,__spreadArray:oH}=nH.default,QB=Jf(ca(19)),op=Jf(ca(19)),RB=ca(19),Sl=Jf(ca(19)),Nm=function(a){var d=a.sideCar;a=Jn(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");d=d.read();if(!d)throw Error("Sidecar medium not found");return Sl.createElement(d,iq({},a))};Nm.isSideCarExport=!0;var Iu=function(a){void 0===a&&(a={});var d=Vl(null);d.options=iq({async:!0,
ssr:!1},a);return d}(),xw=function(){},Ju=op.forwardRef(function(a,d){var k=op.useRef(null),K=op.useState({onScrollCapture:xw,onWheelCapture:xw,onTouchMoveCapture:xw}),da=K[0];K=K[1];var ja=a.forwardProps,qa=a.children,Ha=a.className,Ra=a.removeScrollBar,$a=a.enabled,fb=a.shards,jb=a.sideCar,Kb=a.noIsolation,Nb=a.inert,Hb=a.allowPinchZoom,fc=a.as;fc=void 0===fc?"div":fc;a=Jn(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));
d=Dj([k,d]);da=iq(iq({},a),da);return op.createElement(op.Fragment,null,$a&&op.createElement(jb,{sideCar:Iu,removeScrollBar:Ra,shards:fb,noIsolation:Kb,inert:Nb,setCallbacks:K,allowPinchZoom:!!Hb,lockRef:k}),ja?op.cloneElement(op.Children.only(qa),iq(iq({},da),{ref:d})):op.createElement(fc,iq({},da,{className:Ha,ref:d}),qa))});Ju.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ju.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var Lk=Jf(ca(19)),gz=Jf(ca(19)),
Rr=Jf(ca(19)),yw=function(){var a=0,d=null;return{add:function(k){if(0==a){if(document){var K=document.createElement("style");K.type="text/css";var da="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;da&&K.setAttribute("nonce",da)}else K=null;if(d=K)K=d,K.styleSheet?K.styleSheet.cssText=k:K.appendChild(document.createTextNode(k)),k=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(k)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),
d=null)}}},pH=function(){var a=yw();return function(d,k){Rr.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&k])}},Px=function(){var a=pH();return function(d){a(d.styles,d.dynamic);return null}},SB={left:0,top:0,right:0,gap:0},TB=Px(),UB=function(a,d,k,K){var da=a.left,ja=a.top,qa=a.right;a=a.gap;void 0===k&&(k="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(K,";\n   padding-right: ").concat(a,"px ").concat(K,";\n  }\n  body {\n    overflow: hidden ").concat(K,
";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(K,";"),"margin"===k&&"\n    padding-left: ".concat(da,"px;\n    padding-top: ").concat(ja,"px;\n    padding-right: ").concat(qa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(K,";\n    "),"padding"===k&&"padding-right: ".concat(a,"px ").concat(K,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(K,
";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(K,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(K,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(K,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},KD=function(a){var d=a.noRelative,k=a.noImportant;
a=a.gapMode;var K=void 0===a?"margin":a;a=gz.useMemo(function(){var da=K;void 0===da&&(da="margin");if("undefined"===typeof window)da=SB;else{var ja=window.getComputedStyle(document.body),qa=ja["padding"===da?"paddingTop":"marginTop"],Ha=ja["padding"===da?"paddingRight":"marginRight"];da=[parseInt(ja["padding"===da?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(qa||"",10)||0,parseInt(Ha||"",10)||0];da={left:da[0],top:da[1],right:da[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+
da[2]-da[0])}}return da},[K]);return gz.createElement(TB,{styles:UB(a,!d,K,k?"":"!important")})},es=!1;if("undefined"!==typeof window)try{var st=Object.defineProperty({},"passive",{get:function(){return es=!0}});window.addEventListener("test",st,st);window.removeEventListener("test",st,st)}catch(a){es=!1}var fr=es?{passive:!1}:!1,VB=function(a,d){var k=window.getComputedStyle(a);return"hidden"!==k[d]&&!(k.overflowY===k.overflowX&&"TEXTAREA"!==a.tagName&&"visible"===k[d])},WB=function(a,d){do{"undefined"!==
typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(XB(a,d)){var k=Qx(a,d);if(k[1]>k[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},XB=function(a,d){return"v"===a?VB(d,"overflowY"):VB(d,"overflowX")},Qx=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},Ds=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},uj=function(a){return a&&"current"in a?a.current:a},
ho=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},uk=0,Kn=[];Iu.useMedium(function(a){var d=Lk.useRef([]),k=Lk.useRef([0,0]),K=Lk.useRef(),da=Lk.useState(uk++)[0],ja=Lk.useState(function(){return Px()})[0],qa=Lk.useRef(a);Lk.useEffect(function(){qa.current=a},[a]);Lk.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(da));var Hb=oH([a.lockRef.current],(a.shards||
[]).map(uj),!0).filter(Boolean);Hb.forEach(function(fc){return fc.classList.add("allow-interactivity-".concat(da))});return function(){document.body.classList.remove("block-interactivity-".concat(da));Hb.forEach(function(fc){return fc.classList.remove("allow-interactivity-".concat(da))})}}},[a.inert,a.lockRef.current,a.shards]);var Ha=Lk.useCallback(function(Hb,fc){if("touches"in Hb&&2===Hb.touches.length)return!qa.current.allowPinchZoom;var qc=Ds(Hb),Wb=k.current,kc="deltaX"in Hb?Hb.deltaX:Wb[0]-
qc[0];Wb="deltaY"in Hb?Hb.deltaY:Wb[1]-qc[1];var hc=Hb.target,Fc=Math.abs(kc)>Math.abs(Wb)?"h":"v";if("touches"in Hb&&"h"===Fc&&"range"===hc.type)return!1;var Mc=WB(Fc,hc);if(!Mc)return!0;Mc?qc=Fc:(qc="v"===Fc?"h":"v",Mc=WB(Fc,hc));if(!Mc)return!1;!K.current&&"changedTouches"in Hb&&(kc||Wb)&&(K.current=qc);if(!qc)return!0;qc=K.current||qc;Wb="h"===qc?kc:Wb;kc=window.getComputedStyle(fc).direction;kc="h"===qc&&"rtl"===kc?-1:1;Fc=kc*Wb;Hb=Hb.target;Wb=fc.contains(Hb);hc=!1;Fc=0<Fc;var ud=Mc=0;do{var Jd=
Qx(qc,Hb),Qe=Jd[0];Jd=Jd[1]-Jd[2]-kc*Qe;(Qe||Jd)&&XB(qc,Hb)&&(Mc+=Jd,ud+=Qe);Hb=Hb.parentNode}while(!Wb&&Hb!==document.body||Wb&&(fc.contains(Hb)||fc===Hb));Fc&&0===Mc?hc=!0:Fc||0!==ud||(hc=!0);return hc},[]),Ra=Lk.useCallback(function(Hb){if(Kn.length&&Kn[Kn.length-1]===ja){var fc="deltaY"in Hb?[Hb.deltaX,Hb.deltaY]:Ds(Hb),qc=d.current.filter(function(Wb){var kc;if(kc=Wb.name===Hb.type&&Wb.target===Hb.target)Wb=Wb.delta,kc=Wb[0]===fc[0]&&Wb[1]===fc[1];return kc})[0];qc&&qc.should?Hb.cancelable&&
Hb.preventDefault():qc||(qc=(qa.current.shards||[]).map(uj).filter(Boolean).filter(function(Wb){return Wb.contains(Hb.target)}),(0<qc.length?Ha(Hb,qc[0]):!qa.current.noIsolation)&&Hb.cancelable&&Hb.preventDefault())}},[]),$a=Lk.useCallback(function(Hb,fc,qc,Wb){var kc={name:Hb,delta:fc,target:qc,should:Wb};d.current.push(kc);setTimeout(function(){d.current=d.current.filter(function(hc){return hc!==kc})},1)},[]),fb=Lk.useCallback(function(Hb){k.current=Ds(Hb);K.current=void 0},[]),jb=Lk.useCallback(function(Hb){$a(Hb.type,
[Hb.deltaX,Hb.deltaY],Hb.target,Ha(Hb,a.lockRef.current))},[]),Kb=Lk.useCallback(function(Hb){$a(Hb.type,Ds(Hb),Hb.target,Ha(Hb,a.lockRef.current))},[]);Lk.useEffect(function(){Kn.push(ja);a.setCallbacks({onScrollCapture:jb,onWheelCapture:jb,onTouchMoveCapture:Kb});document.addEventListener("wheel",Ra,fr);document.addEventListener("touchmove",Ra,fr);document.addEventListener("touchstart",fb,fr);return function(){Kn=Kn.filter(function(Hb){return Hb!==ja});document.removeEventListener("wheel",Ra,fr);
document.removeEventListener("touchmove",Ra,fr);document.removeEventListener("touchstart",fb,fr)}},[]);var Nb=a.removeScrollBar;return Lk.createElement(Lk.Fragment,null,a.inert?Lk.createElement(ja,{styles:ho(da)}):null,Nb?Lk.createElement(KD,{gapMode:"margin"}):null)});var Fk=QB.forwardRef(function(a,d){return QB.createElement(Ju,iq({},a,{ref:d,sideCar:Nm}))});Fk.classNames=Ju.classNames;var rm=["Enter"," "],qi=["ArrowUp","PageDown","End"],YB=["ArrowDown","PageUp","Home",...qi];[...rm];[...rm];var [Es,
yv,Rx]=ag("Menu"),[jq,Fs]=Bh("Menu",[Rx,Bs,vv]),ii=Bs(),zv=vv(),[Sx,Gs]=jq("Menu"),[Hs,Av]=jq("Menu"),kq=(0,Pg.forwardRef)((a,d)=>{var {__scopeMenu:k}=a;a=zf(a,["__scopeMenu"]);k=ii(k);return(0,Pg.createElement)(Fx,Ge({},k,a,{ref:d}))}),[,qH]=jq("MenuPortal",{forceMount:void 0}),[Bv,Xt]=jq("MenuContent"),Cv=(0,Pg.forwardRef)((a,d)=>{var k=qH("MenuContent",a.__scopeMenu);({forceMount:k=k.forceMount}=a);const K=zf(a,["forceMount"]),da=Gs("MenuContent",a.__scopeMenu),ja=Av("MenuContent",a.__scopeMenu);
return(0,Pg.createElement)(Es.Provider,{scope:a.__scopeMenu},(0,Pg.createElement)(Vt,{present:k||da.open},(0,Pg.createElement)(Es.Slot,{scope:a.__scopeMenu},ja.modal?(0,Pg.createElement)(Yt,Ge({},K,{ref:d})):(0,Pg.createElement)(Tx,Ge({},K,{ref:d})))))}),Yt=(0,Pg.forwardRef)((a,d)=>{const k=Gs("MenuContent",a.__scopeMenu),K=(0,Pg.useRef)(null);d=Zg(d,K);(0,Pg.useEffect)(()=>{const da=K.current;if(da)return Ox(da)},[]);return(0,Pg.createElement)(Is,Ge({},a,{ref:d,trapFocus:k.open,disableOutsidePointerEvents:k.open,
disableOutsideScroll:!0,onFocusOutside:Sf(a.onFocusOutside,da=>da.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>k.onOpenChange(!1)}))}),Tx=(0,Pg.forwardRef)((a,d)=>{const k=Gs("MenuContent",a.__scopeMenu);return(0,Pg.createElement)(Is,Ge({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>k.onOpenChange(!1)}))}),Is=(0,Pg.forwardRef)((a,d)=>{const {__scopeMenu:k,loop:K=!1,trapFocus:da,onOpenAutoFocus:ja,onCloseAutoFocus:qa,disableOutsidePointerEvents:Ha,
onEscapeKeyDown:Ra,onPointerDownOutside:$a,onFocusOutside:fb,onInteractOutside:jb,onDismiss:Kb,disableOutsideScroll:Nb}=a,Hb=zf(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),fc=Gs("MenuContent",k),qc=Av("MenuContent",k),Wb=ii(k),kc=zv(k),hc=yv(k),[Fc,Mc]=(0,Pg.useState)(null),ud=(0,Pg.useRef)(null);d=Zg(d,ud,fc.onContentChange);const Jd=(0,Pg.useRef)(0),
Qe=(0,Pg.useRef)(""),Zd=(0,Pg.useRef)(0),Ee=(0,Pg.useRef)(null),gf=(0,Pg.useRef)("right"),Re=(0,Pg.useRef)(0),cf=Nb?Fk:Pg.Fragment,Gd=Nb?{as:Ko,allowPinchZoom:!0}:void 0,nd=id=>{var Dd,De;id=Qe.current+id;const Ye=hc().filter(Bf=>!Bf.disabled),Rf=document.activeElement,eg=null===(Dd=Ye.find(Bf=>Bf.ref.current===Rf))||void 0===Dd?void 0:Dd.textValue;Dd=Ye.map(Bf=>Bf.textValue);const df=oj(Dd,id,eg),Ag=null===(De=Ye.find(Bf=>Bf.textValue===df))||void 0===De?void 0:De.ref.current;(function Yg(Og){Qe.current=
Og;window.clearTimeout(Jd.current);""!==Og&&(Jd.current=window.setTimeout(()=>Yg(""),1E3))})(id);Ag&&setTimeout(()=>Ag.focus())};(0,Pg.useEffect)(()=>()=>window.clearTimeout(Jd.current),[]);Gf();const Ad=(0,Pg.useCallback)(id=>{var Dd,De,Ye;if(Ye=gf.current===(null===(Dd=Ee.current)||void 0===Dd?void 0:Dd.side)){if(Dd=null===(De=Ee.current)||void 0===De?void 0:De.area){const {x:Rf,y:eg}={x:id.clientX,y:id.clientY};id=!1;for(let df=0,Ag=Dd.length-1;df<Dd.length;Ag=df++){De=Dd[df].x;Ye=Dd[df].y;const Bf=
Dd[Ag].x,Og=Dd[Ag].y;Ye>eg!==Og>eg&&Rf<(Bf-De)*(eg-Ye)/(Og-Ye)+De&&(id=!id)}Dd=id}else Dd=!1;Ye=Dd}return Ye},[]);return(0,Pg.createElement)(Bv,{scope:k,searchRef:Qe,onItemEnter:(0,Pg.useCallback)(id=>{Ad(id)&&id.preventDefault()},[Ad]),onItemLeave:(0,Pg.useCallback)(id=>{var Dd;Ad(id)||(null===(Dd=ud.current)||void 0===Dd||Dd.focus(),Mc(null))},[Ad]),onTriggerLeave:(0,Pg.useCallback)(id=>{Ad(id)&&id.preventDefault()},[Ad]),pointerGraceTimerRef:Zd,onPointerGraceIntentChange:(0,Pg.useCallback)(id=>
{Ee.current=id},[])},(0,Pg.createElement)(cf,Gd,(0,Pg.createElement)(LB,{asChild:!0,trapped:da,onMountAutoFocus:Sf(ja,id=>{var Dd;id.preventDefault();null===(Dd=ud.current)||void 0===Dd||Dd.focus()}),onUnmountAutoFocus:qa},(0,Pg.createElement)(Ax,{asChild:!0,disableOutsidePointerEvents:Ha,onEscapeKeyDown:Ra,onPointerDownOutside:$a,onFocusOutside:fb,onInteractOutside:jb,onDismiss:Kb},(0,Pg.createElement)(OB,Ge({asChild:!0},kc,{dir:qc.dir,orientation:"vertical",loop:K,currentTabStopId:Fc,onCurrentTabStopIdChange:Mc,
onEntryFocus:id=>{qc.isUsingKeyboardRef.current||id.preventDefault()}}),(0,Pg.createElement)(Gx,Ge({role:"menu","aria-orientation":"vertical","data-state":fc.open?"open":"closed","data-radix-menu-content":"",dir:qc.dir},Wb,Hb,{ref:d,style:Yd({outline:"none"},Hb.style),onKeyDown:Sf(Hb.onKeyDown,id=>{var Dd=id.target.closest("[data-radix-menu-content]")===id.currentTarget;const De=id.ctrlKey||id.altKey||id.metaKey,Ye=1===id.key.length;Dd&&("Tab"===id.key&&id.preventDefault(),!De&&Ye&&nd(id.key));id.target===
ud.current&&YB.includes(id.key)&&(id.preventDefault(),Dd=hc().filter(Rf=>!Rf.disabled).map(Rf=>Rf.ref.current),qi.includes(id.key)&&Dd.reverse(),to(Dd))}),onBlur:Sf(a.onBlur,id=>{id.currentTarget.contains(id.target)||(window.clearTimeout(Jd.current),Qe.current="")}),onPointerMove:Sf(a.onPointerMove,uo(id=>{const Dd=Re.current!==id.clientX;id.currentTarget.contains(id.target)&&Dd&&(gf.current=id.clientX>Re.current?"right":"left",Re.current=id.clientX)}))})))))))}),Ux=(0,Pg.forwardRef)((a,d)=>{const {disabled:k=
!1,onSelect:K}=a,da=zf(a,["disabled","onSelect"]),ja=(0,Pg.useRef)(null),qa=Av("MenuItem",a.__scopeMenu),Ha=Xt("MenuItem",a.__scopeMenu);d=Zg(d,ja);const Ra=(0,Pg.useRef)(!1);return(0,Pg.createElement)(ZB,Ge({},da,{ref:d,disabled:k,onClick:Sf(a.onClick,()=>{const $a=ja.current;if(!k&&$a){const fb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});$a.addEventListener("menu.itemSelect",jb=>null===K||void 0===K?void 0:K(jb),{once:!0});tl($a,fb);if(fb.defaultPrevented)Ra.current=!1;else qa.onClose()}}),
onPointerDown:$a=>{var fb;null===(fb=a.onPointerDown)||void 0===fb||fb.call(a,$a);Ra.current=!0},onPointerUp:Sf(a.onPointerUp,$a=>{var fb;Ra.current||null===(fb=$a.currentTarget)||void 0===fb||fb.click()}),onKeyDown:Sf(a.onKeyDown,$a=>{const fb=""!==Ha.searchRef.current;k||fb&&" "===$a.key||!rm.includes($a.key)||($a.currentTarget.click(),$a.preventDefault())})}))}),ZB=(0,Pg.forwardRef)((a,d)=>{const {__scopeMenu:k,disabled:K=!1,textValue:da}=a,ja=zf(a,["__scopeMenu","disabled","textValue"]),qa=Xt("MenuItem",
k),Ha=zv(k),Ra=(0,Pg.useRef)(null);d=Zg(d,Ra);const [$a,fb]=(0,Pg.useState)(!1),[jb,Kb]=(0,Pg.useState)("");(0,Pg.useEffect)(()=>{const Nb=Ra.current;if(Nb){var Hb;Kb((null!==(Hb=Nb.textContent)&&void 0!==Hb?Hb:"").trim())}},[ja.children]);return(0,Pg.createElement)(Es.ItemSlot,{scope:k,disabled:K,textValue:null!==da&&void 0!==da?da:jb},(0,Pg.createElement)(PB,Ge({asChild:!0},Ha,{focusable:!K}),(0,Pg.createElement)(Rj.div,Ge({role:"menuitem","data-highlighted":$a?"":void 0,"aria-disabled":K||void 0,
"data-disabled":K?"":void 0},ja,{ref:d,onPointerMove:Sf(a.onPointerMove,uo(Nb=>{if(K)qa.onItemLeave(Nb);else qa.onItemEnter(Nb),Nb.defaultPrevented||Nb.currentTarget.focus()})),onPointerLeave:Sf(a.onPointerLeave,uo(Nb=>qa.onItemLeave(Nb))),onFocus:Sf(a.onFocus,()=>fb(!0)),onBlur:Sf(a.onBlur,()=>fb(!1))}))))});jq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});jq("MenuItemIndicator",{checked:!1});var rH=(0,Pg.forwardRef)((a,d)=>{a=zf(a,["__scopeMenu"]);return(0,Pg.createElement)(Rj.div,Ge({role:"separator",
"aria-orientation":"horizontal"},a,{ref:d}))});jq("MenuSub");var ur=a=>{const {__scopeMenu:d,open:k=!1,children:K,dir:da,onOpenChange:ja,modal:qa=!0}=a;a=ii(d);const [Ha,Ra]=(0,Pg.useState)(null),$a=(0,Pg.useRef)(!1),fb=Ii(ja),jb=ng(da);(0,Pg.useEffect)(()=>{const Kb=()=>{$a.current=!0;document.addEventListener("pointerdown",Nb,{capture:!0,once:!0});document.addEventListener("pointermove",Nb,{capture:!0,once:!0})},Nb=()=>$a.current=!1;document.addEventListener("keydown",Kb,{capture:!0});return()=>
{document.removeEventListener("keydown",Kb,{capture:!0});document.removeEventListener("pointerdown",Nb,{capture:!0});document.removeEventListener("pointermove",Nb,{capture:!0})}},[]);return(0,Pg.createElement)(Hx,a,(0,Pg.createElement)(Sx,{scope:d,open:k,onOpenChange:fb,content:Ha,onContentChange:Ra},(0,Pg.createElement)(Hs,{scope:d,onClose:(0,Pg.useCallback)(()=>fb(!1),[fb]),isUsingKeyboardRef:$a,dir:jb,modal:qa},K)))},[Zt]=Bh("DropdownMenu",[Fs]),vr=Fs(),[Dv,Vx]=Zt("DropdownMenu"),Ev=(0,In.forwardRef)((a,
d)=>{const {__scopeDropdownMenu:k,disabled:K=!1}=a,da=zf(a,["__scopeDropdownMenu","disabled"]),ja=Vx("DropdownMenuTrigger",k),qa=vr(k);return(0,In.createElement)(kq,Ge({asChild:!0},qa),(0,In.createElement)(Rj.button,Ge({type:"button",id:ja.triggerId,"aria-haspopup":"menu","aria-expanded":ja.open,"aria-controls":ja.open?ja.contentId:void 0,"data-state":ja.open?"open":"closed","data-disabled":K?"":void 0,disabled:K},da,{ref:tg(d,ja.triggerRef),onPointerDown:Sf(a.onPointerDown,Ha=>{K||0!==Ha.button||
!1!==Ha.ctrlKey||(ja.onOpenToggle(),ja.open||Ha.preventDefault())}),onKeyDown:Sf(a.onKeyDown,Ha=>{if(!K){if(["Enter"," "].includes(Ha.key))ja.onOpenToggle();if("ArrowDown"===Ha.key)ja.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Ha.key)&&Ha.preventDefault()}})})))}),sH=(0,In.forwardRef)((a,d)=>{var {__scopeDropdownMenu:k}=a;const K=zf(a,["__scopeDropdownMenu"]),da=Vx("DropdownMenuContent",k);k=vr(k);const ja=(0,In.useRef)(!1);return(0,In.createElement)(Cv,Ge({id:da.contentId,"aria-labelledby":da.triggerId},
k,K,{ref:d,onCloseAutoFocus:Sf(a.onCloseAutoFocus,qa=>{var Ha;ja.current||null===(Ha=da.triggerRef.current)||void 0===Ha||Ha.focus();ja.current=!1;qa.preventDefault()}),onInteractOutside:Sf(a.onInteractOutside,qa=>{qa=qa.detail.originalEvent;const Ha=0===qa.button&&!0===qa.ctrlKey;qa=2===qa.button||Ha;if(!da.modal||qa)ja.current=!0}),style:hf(Yd({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),wr=(0,In.forwardRef)((a,d)=>{var {__scopeDropdownMenu:k}=
a;a=zf(a,["__scopeDropdownMenu"]);k=vr(k);return(0,In.createElement)(Ux,Ge({},k,a,{ref:d}))}),tH=a=>{const {__scopeDropdownMenu:d,children:k,dir:K,open:da,defaultOpen:ja,onOpenChange:qa,modal:Ha=!0}=a;a=vr(d);const Ra=(0,In.useRef)(null),[$a=!1,fb]=Dc({prop:da,defaultProp:ja,onChange:qa});return(0,In.createElement)(Dv,{scope:d,triggerId:Ei(),triggerRef:Ra,contentId:Ei(),open:$a,onOpenChange:fb,onOpenToggle:(0,In.useCallback)(()=>fb(jb=>!jb),[fb]),modal:Ha},(0,In.createElement)(ur,Ge({},a,{open:$a,
onOpenChange:fb,dir:K,modal:Ha}),k))},ri=Jf(ca(19)).default.createContext({}),uH=Jf(ca(19)),Js=ca(588),fk=a=>{var {action:d}=a;a=zf(a,["action"]);var {renderers:k}=uH.useContext(ri);k=null==k?void 0:k.KeyboardShortcut;return(0,Js.jsx)("div",hf(Yd({className:"tl-menu-right-slot"},a),{children:(0,Js.jsx)(k,{action:d})}))};ca(19);var Om=ca(588),Wx=ee(function(){const a=lg(),d=k=>{k.preventDefault()};return(0,Om.jsxs)(tH,{children:[(0,Om.jsx)(Ev,{className:"tl-button text-sm px-2 important",id:"tl-zoom",
children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,Om.jsxs)(sH,{onCloseAutoFocus:k=>k.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,Om.jsxs)(wr,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,Om.jsx)(fk,{action:"whiteboard/zoom-to-fit"})]}),(0,Om.jsxs)(wr,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,children:["Zoom to fit selection",(0,Om.jsx)(fk,{action:"whiteboard/zoom-to-selection"})]}),
(0,Om.jsxs)(wr,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomIn,children:["Zoom in",(0,Om.jsx)(fk,{action:"whiteboard/zoom-in"})]}),(0,Om.jsxs)(wr,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,Om.jsx)(fk,{action:"whiteboard/zoom-out"})]}),(0,Om.jsxs)(wr,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,Om.jsx)(fk,{action:"whiteboard/reset-zoom"})]})]})]})}),Xx=ca(19),$t=["horizontal","vertical"],lq=(0,Xx.forwardRef)((a,
d)=>{const {decorative:k,orientation:K="horizontal"}=a;a=zf(a,["decorative","orientation"]);const da=$t.includes(K)?K:"horizontal";return(0,Xx.createElement)(Rj.div,Ge({"data-orientation":da},k?{role:"none"}:{"aria-orientation":"vertical"===da?da:void 0,role:"separator"},a,{ref:d}))});lq.propTypes={orientation(a,d,k){a=a[d];d=String(a);return a&&!$t.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${k}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var gk=ca(588),au=ee(function(){const a=lg(),{handlers:{t:d}}=fq.useContext(ri),k=fq.useCallback(()=>{a.api.undo()},[a]),K=fq.useCallback(()=>{a.api.redo()},[a]),da=fq.useCallback(()=>{a.api.zoomIn()},[a]),ja=fq.useCallback(()=>{a.api.zoomOut()},[a]),qa=fq.useCallback(()=>{a.api.toggleGrid()},[a]),Ha=fq.useCallback(()=>{a.api.toggleSnapToGrid()},[a]),Ra=fq.useCallback(()=>{a.api.togglePenMode()},[a]);return(0,gk.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",
children:[!a.readOnly&&(0,gk.jsxs)("div",{className:"tl-toolbar tl-history-bar mr-2 mb-2",children:[(0,gk.jsx)(Xd,{tooltip:d("whiteboard/undo"),onClick:k,children:(0,gk.jsx)(bh,{name:"arrow-back-up"})}),(0,gk.jsx)(Xd,{tooltip:d("whiteboard/redo"),onClick:K,children:(0,gk.jsx)(bh,{name:"arrow-forward-up"})})]}),(0,gk.jsxs)("div",{className:"tl-toolbar tl-zoom-bar mr-2 mb-2",children:[(0,gk.jsx)(Xd,{tooltip:d("whiteboard/zoom-in"),onClick:da,id:"tl-zoom-in",children:(0,gk.jsx)(bh,{name:"plus"})}),(0,gk.jsx)(Xd,
{tooltip:d("whiteboard/zoom-out"),onClick:ja,id:"tl-zoom-out",children:(0,gk.jsx)(bh,{name:"minus"})}),(0,gk.jsx)(lq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,gk.jsx)(Wx,{})]}),(0,gk.jsxs)("div",{className:"tl-toolbar tl-grid-bar mr-2 mb-2",children:[(0,gk.jsx)(Me,{tooltip:d("whiteboard/toggle-grid"),className:"tl-button",pressed:a.settings.showGrid,id:"tl-show-grid",onPressedChange:qa,children:(0,gk.jsx)(bh,{name:"grid-dots"})}),!a.readOnly&&(0,gk.jsx)(Me,{tooltip:d("whiteboard/snap-to-grid"),
className:"tl-button",pressed:a.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:Ha,children:(0,gk.jsx)(bh,{name:a.settings.snapToGrid?"magnet":"magnet-off"})})]}),!a.readOnly&&(0,gk.jsx)("div",{className:"tl-toolbar tl-pen-mode-bar mb-2",children:(0,gk.jsx)(Me,{tooltip:d("whiteboard/toggle-pen-mode"),className:"tl-button",pressed:a.settings.penMode,id:"tl-toggle-pen-mode",onPressedChange:Ra,children:(0,gk.jsx)(bh,{name:a.settings.penMode?"pencil":"pencil-off"})})})]})}),Fv=Jf(ca(19)),$B=
Jf(ca(20)),sm=ca(588),zl=a=>`[${a.map(d=>{var k;return null!=(k=null==d?void 0:d.toFixed(2))?k:"-"}).join(", ")}]`,Mo=ee(()=>{var a;const {viewport:{bounds:d,camera:{point:k,zoom:K}},inputs:da}=dh(),ja=Fv.default.useRef();Fv.default.useEffect(()=>{const Ha=document.getElementById("tl-statusbar-anchor");ja.current=Ha},[]);const qa=[["Z",null!=(a=null==K?void 0:K.toFixed(2))?a:"null"],["MP",zl(da.currentPoint)],["MS",zl(da.currentScreenPoint)],["VP",zl(k)],["VBR",zl([d.maxX,d.maxY])]].map(Ha=>Ha.join("")).join("|");
a=ja.current?$B.default.createPortal((0,sm.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:qa}),ja.current):null;return(0,sm.jsx)(sm.Fragment,{children:a})}),Ks=Jf(ca(19)),bu=ca(588),io=ee(a=>{var {id:d,icon:k,tooltip:K,tooltipSide:da="left",handleClick:ja}=a;a=zf(a,["id","icon","tooltip","tooltipSide","handleClick"]);var qa;const Ha=lg(),Ra=null==(qa=[...Ha.Tools,ts,us])?void 0:qa.find($a=>$a.id===d);qa=(qa=null==Ra?void 0:Ra.shortcut)&&K?(0,bu.jsxs)("div",{className:"flex",
children:[K,(0,bu.jsx)(fk,{action:qa})]}):K;return(0,bu.jsx)(Xd,hf(Yd({},a),{tooltipSide:da,tooltip:qa,"data-tool":d,"data-selected":d===Ha.selectedTool.id,onClick:ja,children:"string"===typeof k?(0,bu.jsx)(bh,{name:k}):k}))}),Ui=ca(19),[Gv]=Bh("Popover",[Bs]),Ls=Bs(),[Yx,Ms]=Gv("Popover"),Hv=(0,Ui.forwardRef)((a,d)=>{var {__scopePopover:k}=a;const K=zf(a,["__scopePopover"]),da=Ms("PopoverTrigger",k);k=Ls(k);d=Zg(d,da.triggerRef);a=(0,Ui.createElement)(Rj.button,Ge({type:"button","aria-haspopup":"dialog",
"aria-expanded":da.open,"aria-controls":da.contentId,"data-state":da.open?"open":"closed"},K,{ref:d,onClick:Sf(a.onClick,da.onOpenToggle)}));return da.hasCustomAnchor?a:(0,Ui.createElement)(Fx,Ge({asChild:!0},k),a)}),[,aC]=Gv("PopoverPortal",{forceMount:void 0}),xr=(0,Ui.forwardRef)((a,d)=>{var k=aC("PopoverContent",a.__scopePopover);({forceMount:k=k.forceMount}=a);const K=zf(a,["forceMount"]);a=Ms("PopoverContent",a.__scopePopover);return(0,Ui.createElement)(Vt,{present:k||a.open},a.modal?(0,Ui.createElement)(bC,
Ge({},K,{ref:d})):(0,Ui.createElement)(vH,Ge({},K,{ref:d})))}),bC=(0,Ui.forwardRef)((a,d)=>{const k=Ms("PopoverContent",a.__scopePopover),K=(0,Ui.useRef)(null);d=Zg(d,K);const da=(0,Ui.useRef)(!1);(0,Ui.useEffect)(()=>{const ja=K.current;if(ja)return Ox(ja)},[]);return(0,Ui.createElement)(Fk,{as:Ko,allowPinchZoom:!0},(0,Ui.createElement)(yr,Ge({},a,{ref:d,trapFocus:k.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Sf(a.onCloseAutoFocus,ja=>{var qa;ja.preventDefault();da.current||null===(qa=k.triggerRef.current)||
void 0===qa||qa.focus()}),onPointerDownOutside:Sf(a.onPointerDownOutside,ja=>{ja=ja.detail.originalEvent;const qa=0===ja.button&&!0===ja.ctrlKey;da.current=2===ja.button||qa},{checkForDefaultPrevented:!1}),onFocusOutside:Sf(a.onFocusOutside,ja=>ja.preventDefault(),{checkForDefaultPrevented:!1})})))}),vH=(0,Ui.forwardRef)((a,d)=>{const k=Ms("PopoverContent",a.__scopePopover),K=(0,Ui.useRef)(!1);return(0,Ui.createElement)(yr,Ge({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:da=>
{var ja;null===(ja=a.onCloseAutoFocus)||void 0===ja||ja.call(a,da);if(!da.defaultPrevented){var qa;K.current||null===(qa=k.triggerRef.current)||void 0===qa||qa.focus();da.preventDefault()}K.current=!1},onInteractOutside:da=>{var ja,qa;null===(ja=a.onInteractOutside)||void 0===ja||ja.call(a,da);da.defaultPrevented||(K.current=!0);ja=da.target;(null===(qa=k.triggerRef.current)||void 0===qa?0:qa.contains(ja))&&da.preventDefault()}}))}),yr=(0,Ui.forwardRef)((a,d)=>{const {__scopePopover:k,trapFocus:K,
onOpenAutoFocus:da,onCloseAutoFocus:ja,disableOutsidePointerEvents:qa,onEscapeKeyDown:Ha,onPointerDownOutside:Ra,onFocusOutside:$a,onInteractOutside:fb}=a;a=zf(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const jb=Ms("PopoverContent",k),Kb=Ls(k);Gf();return(0,Ui.createElement)(LB,{asChild:!0,loop:!0,trapped:K,onMountAutoFocus:da,onUnmountAutoFocus:ja},(0,Ui.createElement)(Ax,
{asChild:!0,disableOutsidePointerEvents:qa,onInteractOutside:fb,onEscapeKeyDown:Ha,onPointerDownOutside:Ra,onFocusOutside:$a,onDismiss:()=>jb.onOpenChange(!1)},(0,Ui.createElement)(Gx,Ge({"data-state":jb.open?"open":"closed",role:"dialog",id:jb.contentId},Kb,a,{ref:d,style:hf(Yd({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),Iv=(0,Ui.forwardRef)((a,d)=>{var {__scopePopover:k}=a;a=zf(a,["__scopePopover"]);k=Ls(k);return(0,Ui.createElement)(CB,
Ge({},k,a,{ref:d}))}),Zx=a=>{const {__scopePopover:d,children:k,open:K,defaultOpen:da,onOpenChange:ja,modal:qa=!1}=a;a=Ls(d);const Ha=(0,Ui.useRef)(null),[Ra,$a]=(0,Ui.useState)(!1),[fb=!1,jb]=Dc({prop:K,defaultProp:da,onChange:ja});return(0,Ui.createElement)(Hx,a,(0,Ui.createElement)(Yx,{scope:d,contentId:Ei(),triggerRef:Ha,open:fb,onOpenChange:jb,onOpenToggle:(0,Ui.useCallback)(()=>jb(Kb=>!Kb),[jb]),hasCustomAnchor:Ra,onCustomAnchorAdd:(0,Ui.useCallback)(()=>$a(!0),[]),onCustomAnchorRemove:(0,Ui.useCallback)(()=>
$a(!1),[]),modal:qa},k))},cC=Jf(ca(19)),No=ca(588),$x=ee(function(a){var {popoverSide:d="left",setGeometry:k,activeGeometry:K,chevron:da=!0}=a;a=zf(a,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:ja}}=cC.default.useContext(ri);const qa=[{id:"box",icon:"square",tooltip:ja("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:ja("whiteboard/circle")},{id:"polygon",icon:"triangle",tooltip:ja("whiteboard/triangle")}];ja={id:"shapes",icon:"triangle-square-circle",tooltip:ja("whiteboard/shape")};
ja=K?qa.find(Ha=>Ha.id===K):ja;return(0,No.jsxs)(Zx,{children:[(0,No.jsx)(Hv,{asChild:!0,children:(0,No.jsxs)("div",hf(Yd({},a),{className:"tl-geometry-tools-pane-anchor",children:[(0,No.jsx)(io,hf(Yd({},ja),{tooltipSide:d})),da&&(0,No.jsx)(bh,{"data-selected":K,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,No.jsxs)(xr,{className:"tl-popover-content",side:d,sideOffset:15,children:[(0,No.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":
"flex-row"}`,children:qa.map(Ha=>(0,No.jsx)(io,{id:Ha.id,icon:Ha.icon,tooltip:K?Ha.tooltip:"",handleClick:k,tooltipSide:d},Ha.id))}),(0,No.jsx)(Iv,{className:"tl-popover-arrow"})]})]})}),Kh=ca(19),ay=ca(19),cu=["PageUp","PageDown"],by=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dC={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},
[cy,eC,pp]=ag("Slider"),[Oo]=Bh("Slider",[pp]),[Ns,Po]=Oo("Slider"),fC=(0,Kh.forwardRef)((a,d)=>{function k(Re){const cf=mt(Zd,Re);ja(Re,cf)}function K(Re){ja(Re,ud.current)}function da(){Zd[ud.current]!==gf.current[ud.current]&&qc(Zd)}function ja(Re,cf,{commit:Gd}={commit:!1}){const nd=(String($a).split(".")[1]||"").length;Re=Do(Math.round((Re-Ha)/$a)*$a+Ha,nd);const Ad=ap(Re,[Ha,Ra]);Ee((id=[])=>{const Dd=Xm(id,Ad,cf);var De=Kb*$a;if(0<De){const Ye=bn(Dd);De=Math.min(...Ye)>=De}else De=!0;return De?
(ud.current=Dd.indexOf(Ad),(De=String(Dd)!==String(id))&&Gd&&qc(Dd),De?Dd:id):id})}const {name:qa,min:Ha=0,max:Ra=100,step:$a=1,orientation:fb="horizontal",disabled:jb=!1,minStepsBetweenThumbs:Kb=0,defaultValue:Nb=[Ha],value:Hb,onValueChange:fc=()=>{},onValueCommit:qc=()=>{},inverted:Wb=!1}=a,kc=zf(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[hc,Fc]=(0,Kh.useState)(null);d=Zg(d,Re=>Fc(Re));const Mc=(0,Kh.useRef)(new Set),
ud=(0,Kh.useRef)(0);var Jd="horizontal"===fb;const Qe=hc?!!hc.closest("form"):!0;Jd=Jd?iC:We;const [Zd=[],Ee]=Dc({prop:Hb,defaultProp:Nb,onChange:Re=>{var cf;null===(cf=[...Mc.current][ud.current])||void 0===cf||cf.focus();fc(Re)}}),gf=(0,Kh.useRef)(Zd);return(0,Kh.createElement)(Ns,{scope:a.__scopeSlider,disabled:jb,min:Ha,max:Ra,valueIndexToChangeRef:ud,thumbs:Mc.current,values:Zd,orientation:fb},(0,Kh.createElement)(cy.Provider,{scope:a.__scopeSlider},(0,Kh.createElement)(cy.Slot,{scope:a.__scopeSlider},
(0,Kh.createElement)(Jd,Ge({"aria-disabled":jb,"data-disabled":jb?"":void 0},kc,{ref:d,onPointerDown:Sf(kc.onPointerDown,()=>{jb||(gf.current=Zd)}),min:Ha,max:Ra,inverted:Wb,onSlideStart:jb?void 0:k,onSlideMove:jb?void 0:K,onSlideEnd:jb?void 0:da,onHomeKeyDown:()=>!jb&&ja(Ha,0,{commit:!0}),onEndKeyDown:()=>!jb&&ja(Ra,Zd.length-1,{commit:!0}),onStepKeyDown:({event:Re,direction:cf})=>{if(!jb){Re=cu.includes(Re.key)||Re.shiftKey&&by.includes(Re.key);const Gd=ud.current;ja(Zd[Gd]+$a*(Re?10:1)*cf,Gd,{commit:!0})}}})))),
Qe&&Zd.map((Re,cf)=>(0,Kh.createElement)(du,{key:cf,name:qa?qa+(1<Zd.length?"[]":""):void 0,value:Re})))}),[gC,hC]=Oo("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),iC=(0,Kh.forwardRef)((a,d)=>{function k(kc){const hc=Hb.current||Kb.getBoundingClientRect(),Fc=an([0,hc.width],Wb?[K,da]:[da,K]);Hb.current=hc;return Fc(kc-hc.left)}const {min:K,max:da,dir:ja,inverted:qa,onSlideStart:Ha,onSlideMove:Ra,onSlideEnd:$a,onStepKeyDown:fb}=a,jb=zf(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
[Kb,Nb]=(0,Kh.useState)(null);d=Zg(d,kc=>Nb(kc));const Hb=(0,Kh.useRef)(),fc=ng(ja),qc="ltr"===fc,Wb=qc&&!qa||!qc&&qa;return(0,Kh.createElement)(gC,{scope:a.__scopeSlider,startEdge:Wb?"left":"right",endEdge:Wb?"right":"left",direction:Wb?1:-1,size:"width"},(0,Kh.createElement)(Yf,Ge({dir:fc,"data-orientation":"horizontal"},jb,{ref:d,style:hf(Yd({},jb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:kc=>{kc=k(kc.clientX);null===Ha||void 0===Ha||Ha(kc)},onSlideMove:kc=>{kc=
k(kc.clientX);null===Ra||void 0===Ra||Ra(kc)},onSlideEnd:()=>{Hb.current=void 0;null===$a||void 0===$a||$a()},onStepKeyDown:kc=>{const hc=dC[Wb?"from-left":"from-right"].includes(kc.key);null===fb||void 0===fb||fb({event:kc,direction:hc?-1:1})}})))}),We=(0,Kh.forwardRef)((a,d)=>{function k(Hb){const fc=Kb.current||jb.current.getBoundingClientRect(),qc=an([0,fc.height],Nb?[da,K]:[K,da]);Kb.current=fc;return qc(Hb-fc.top)}const {min:K,max:da,inverted:ja,onSlideStart:qa,onSlideMove:Ha,onSlideEnd:Ra,
onStepKeyDown:$a}=a,fb=zf(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),jb=(0,Kh.useRef)(null);d=Zg(d,jb);const Kb=(0,Kh.useRef)(),Nb=!ja;return(0,Kh.createElement)(gC,{scope:a.__scopeSlider,startEdge:Nb?"bottom":"top",endEdge:Nb?"top":"bottom",size:"height",direction:Nb?1:-1},(0,Kh.createElement)(Yf,Ge({"data-orientation":"vertical"},fb,{ref:d,style:hf(Yd({},fb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Hb=>{Hb=k(Hb.clientY);null===
qa||void 0===qa||qa(Hb)},onSlideMove:Hb=>{Hb=k(Hb.clientY);null===Ha||void 0===Ha||Ha(Hb)},onSlideEnd:()=>{Kb.current=void 0;null===Ra||void 0===Ra||Ra()},onStepKeyDown:Hb=>{const fc=dC[Nb?"from-bottom":"from-top"].includes(Hb.key);null===$a||void 0===$a||$a({event:Hb,direction:fc?-1:1})}})))}),Yf=(0,Kh.forwardRef)((a,d)=>{const {__scopeSlider:k,onSlideStart:K,onSlideMove:da,onSlideEnd:ja,onHomeKeyDown:qa,onEndKeyDown:Ha,onStepKeyDown:Ra}=a,$a=zf(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
fb=Po("Slider",k);return(0,Kh.createElement)(Rj.span,Ge({},$a,{ref:d,onKeyDown:Sf(a.onKeyDown,jb=>{"Home"===jb.key?(qa(jb),jb.preventDefault()):"End"===jb.key?(Ha(jb),jb.preventDefault()):cu.concat(by).includes(jb.key)&&(Ra(jb),jb.preventDefault())}),onPointerDown:Sf(a.onPointerDown,jb=>{const Kb=jb.target;Kb.setPointerCapture(jb.pointerId);jb.preventDefault();fb.thumbs.has(Kb)?Kb.focus():K(jb)}),onPointerMove:Sf(a.onPointerMove,jb=>{jb.target.hasPointerCapture(jb.pointerId)&&da(jb)}),onPointerUp:Sf(a.onPointerUp,
jb=>{const Kb=jb.target;Kb.hasPointerCapture(jb.pointerId)&&(Kb.releasePointerCapture(jb.pointerId),ja(jb))})}))}),$e=(0,Kh.forwardRef)((a,d)=>{var {__scopeSlider:k}=a;a=zf(a,["__scopeSlider"]);k=Po("SliderTrack",k);return(0,Kh.createElement)(Rj.span,Ge({"data-disabled":k.disabled?"":void 0,"data-orientation":k.orientation},a,{ref:d}))}),Hf=(0,Kh.forwardRef)((a,d)=>{var {__scopeSlider:k}=a;const K=zf(a,["__scopeSlider"]),da=Po("SliderRange",k);k=hC("SliderRange",k);var ja=(0,Kh.useRef)(null);d=Zg(d,
ja);var qa=da.values.length;ja=da.values.map(Ha=>wi(Ha,da.min,da.max));qa=1<qa?Math.min(...ja):0;ja=100-Math.max(...ja);return(0,Kh.createElement)(Rj.span,Ge({"data-orientation":da.orientation,"data-disabled":da.disabled?"":void 0},K,{ref:d,style:hf(Yd({},a.style),{[k.startEdge]:qa+"%",[k.endEdge]:ja+"%"})}))}),kn=(0,Kh.forwardRef)((a,d)=>{const k=eC(a.__scopeSlider),[K,da]=(0,Kh.useState)(null);d=Zg(d,qa=>da(qa));const ja=(0,Kh.useMemo)(()=>K?k().findIndex(qa=>qa.ref.current===K):-1,[k,K]);return(0,Kh.createElement)(vk,
Ge({},a,{ref:d,index:ja}))}),vk=(0,Kh.forwardRef)((a,d)=>{const {__scopeSlider:k,index:K}=a,da=zf(a,["__scopeSlider","index"]),ja=Po("SliderThumb",k),qa=hC("SliderThumb",k),[Ha,Ra]=(0,Kh.useState)(null);d=Zg(d,Nb=>Ra(Nb));var $a=sb(Ha);const fb=ja.values[K],jb=void 0===fb?0:wi(fb,ja.min,ja.max),Kb=rl(K,ja.values.length);$a=($a=null===$a||void 0===$a?void 0:$a[qa.size])?Wl($a,jb,qa.direction):0;(0,Kh.useEffect)(()=>{if(Ha)return ja.thumbs.add(Ha),()=>{ja.thumbs.delete(Ha)}},[Ha,ja.thumbs]);return(0,Kh.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[qa.startEdge]:`calc(${jb}% + ${$a}px)`}},(0,Kh.createElement)(cy.ItemSlot,{scope:a.__scopeSlider},(0,Kh.createElement)(Rj.span,Ge({role:"slider","aria-label":a["aria-label"]||Kb,"aria-valuemin":ja.min,"aria-valuenow":fb,"aria-valuemax":ja.max,"aria-orientation":ja.orientation,"data-orientation":ja.orientation,"data-disabled":ja.disabled?"":void 0,tabIndex:ja.disabled?void 0:0},da,{ref:d,style:void 0===fb?{display:"none"}:
a.style,onFocus:Sf(a.onFocus,()=>{ja.valueIndexToChangeRef.current=K})}))))}),du=a=>{const {value:d}=a;a=zf(a,["value"]);const k=(0,Kh.useRef)(null),K=Tn(d);(0,Kh.useEffect)(()=>{const da=k.current,ja=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(K!==d&&ja){const qa=new Event("input",{bubbles:!0});ja.call(da,d);da.dispatchEvent(qa)}},[K,d]);return(0,Kh.createElement)("input",Ge({style:{display:"none"}},a,{ref:k,defaultValue:d}))},vj=fC,Qo=$e,Ne=Hf,Qf=kn,Ol=Jf(ca(19)),
He=ca(588),mq=ee(a=>{var {side:d,align:k,alignOffset:K,label:da,arrow:ja,children:qa,border:Ha}=a;a=zf(a,"side align alignOffset label arrow children border".split(" "));const Ra=Ol.useRef(null),[$a,fb]=Ol.useState(!1),{viewport:{bounds:jb,camera:{point:Kb,zoom:Nb}}}=lg(),[Hb,fc]=Ol.useState(0);Ol.useEffect(()=>{if(Ra.current&&$a){var qc=Ra.current.getBoundingClientRect();tf.boundsContain(jb,{minX:qc.x,minY:qc.y,maxX:qc.right,maxY:qc.bottom,width:qc.width,height:qc.height})||fc(Wb=>Wb+1)}},[Kb[0],
Kb[1],Nb,$a]);return(0,He.jsxs)(Zx,{onOpenChange:qc=>fb(qc),children:[(0,He.jsx)(Hv,hf(Yd({},a),{"data-border":Ha,className:"tl-button tl-popover-trigger-button",children:da})),(0,He.jsxs)(xr,{ref:Ra,className:"tl-popover-content",align:k,alignOffset:K,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[qa,ja&&(0,He.jsx)(Iv,{className:"tl-popover-arrow"})]},"popover-content-"+Hb)]})}),dy=Jf(ca(19)),Gk=ca(588),eu=Jf(ca(19)),af=ca(19),qp=ca(20),Ln=Jf(ca(19)),cj=
ca(19),Ro=ca(19),nq=ca(20),Kj="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const k=(0,Ro.forwardRef)((K,da)=>{var {asChild:ja}=K;K=zf(K,["asChild"]);ja=ja?Ko:d;(0,Ro.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Ro.createElement)(ja,Ge({},K,{ref:da}))});k.displayName=`Primitive.${d}`;return hf(Yd({},a),{[d]:k})},{}),wg,tm=(0,cj.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rp=(0,cj.forwardRef)((a,
d)=>{var k;const {disableOutsidePointerEvents:K=!1,onEscapeKeyDown:da,onPointerDownOutside:ja,onFocusOutside:qa,onInteractOutside:Ha,onDismiss:Ra}=a,$a=zf(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),fb=(0,cj.useContext)(tm),[jb,Kb]=(0,cj.useState)(null),Nb=null!==(k=null===jb||void 0===jb?void 0:jb.ownerDocument)&&void 0!==k?k:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Hb]=(0,cj.useState)({});
d=Zg(d,hc=>Kb(hc));k=Array.from(fb.layers);var [fc]=[...fb.layersWithOutsidePointerEventsDisabled].slice(-1);fc=k.indexOf(fc);const qc=jb?k.indexOf(jb):-1;k=0<fb.layersWithOutsidePointerEventsDisabled.size;const Wb=qc>=fc;fc=ep(hc=>{const Fc=hc.target,Mc=[...fb.branches].some(ud=>ud.contains(Fc));Wb&&!Mc&&(null===ja||void 0===ja||ja(hc),null===Ha||void 0===Ha||Ha(hc),hc.defaultPrevented||null===Ra||void 0===Ra||Ra())},Nb);const kc=Ym(hc=>{const Fc=hc.target;[...fb.branches].some(Mc=>Mc.contains(Fc))||
(null===qa||void 0===qa||qa(hc),null===Ha||void 0===Ha||Ha(hc),hc.defaultPrevented||null===Ra||void 0===Ra||Ra())},Nb);ul(hc=>{qc===fb.layers.size-1&&(null===da||void 0===da||da(hc),!hc.defaultPrevented&&Ra&&(hc.preventDefault(),Ra()))},Nb);(0,cj.useEffect)(()=>{if(jb)return K&&(0===fb.layersWithOutsidePointerEventsDisabled.size&&(wg=Nb.body.style.pointerEvents,Nb.body.style.pointerEvents="none"),fb.layersWithOutsidePointerEventsDisabled.add(jb)),fb.layers.add(jb),vn(),()=>{K&&1===fb.layersWithOutsidePointerEventsDisabled.size&&
(Nb.body.style.pointerEvents=wg)}},[jb,Nb,K,fb]);(0,cj.useEffect)(()=>()=>{jb&&(fb.layers.delete(jb),fb.layersWithOutsidePointerEventsDisabled.delete(jb),vn())},[jb,fb]);(0,cj.useEffect)(()=>{const hc=()=>Hb({});document.addEventListener("dismissableLayer.update",hc);return()=>document.removeEventListener("dismissableLayer.update",hc)},[]);return(0,cj.createElement)(Kj.div,Ge({},$a,{ref:d,style:Yd({pointerEvents:k?Wb?"auto":"none":void 0},a.style),onFocusCapture:Sf(a.onFocusCapture,kc.onFocusCapture),
onBlurCapture:Sf(a.onBlurCapture,kc.onBlurCapture),onPointerDownCapture:Sf(a.onPointerDownCapture,fc.onPointerDownCapture)}))}),sp=ca(19),oq={bubbles:!1,cancelable:!0},zg=(0,sp.forwardRef)((a,d)=>{const {loop:k=!1,trapped:K=!1,onMountAutoFocus:da,onUnmountAutoFocus:ja}=a;a=zf(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [qa,Ha]=(0,sp.useState)(null),Ra=Ii(da),$a=Ii(ja),fb=(0,sp.useRef)(null);d=Zg(d,Nb=>Ha(Nb));const jb=(0,sp.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,sp.useEffect)(()=>{if(K){let Nb=function(fc){!jb.paused&&qa&&(fc=fc.target,qa.contains(fc)?fb.current=fc:Fm(fb.current,{select:!0}))},Hb=function(fc){!jb.paused&&qa&&(qa.contains(fc.relatedTarget)||Fm(fb.current,{select:!0}))};document.addEventListener("focusin",Nb);document.addEventListener("focusout",Hb);return()=>{document.removeEventListener("focusin",Nb);document.removeEventListener("focusout",Hb)}}},[K,qa,jb.paused]);(0,sp.useEffect)(()=>{if(qa){ey.add(jb);const Nb=document.activeElement;
if(!qa.contains(Nb)){const Hb=new CustomEvent("focusScope.autoFocusOnMount",oq);qa.addEventListener("focusScope.autoFocusOnMount",Ra);qa.dispatchEvent(Hb);Hb.defaultPrevented||(ar(Kp(Bo(qa)),{select:!0}),document.activeElement===Nb&&Fm(qa))}return()=>{qa.removeEventListener("focusScope.autoFocusOnMount",Ra);setTimeout(()=>{const Hb=new CustomEvent("focusScope.autoFocusOnUnmount",oq);qa.addEventListener("focusScope.autoFocusOnUnmount",$a);qa.dispatchEvent(Hb);Hb.defaultPrevented||Fm(null!==Nb&&void 0!==
Nb?Nb:document.body,{select:!0});qa.removeEventListener("focusScope.autoFocusOnUnmount",$a);ey.remove(jb)},0)}}},[qa,Ra,$a,jb]);const Kb=(0,sp.useCallback)(Nb=>{if((k||K)&&!jb.paused){var Hb=document.activeElement;if("Tab"===Nb.key&&!Nb.altKey&&!Nb.ctrlKey&&!Nb.metaKey&&Hb){const qc=Nb.currentTarget;var fc=qc;const Wb=Bo(fc),kc=Bn(Wb,fc);fc=Bn(Wb.reverse(),fc);const [hc,Fc]=[kc,fc];hc&&Fc?Nb.shiftKey||Hb!==Fc?Nb.shiftKey&&Hb===hc&&(Nb.preventDefault(),k&&Fm(Fc,{select:!0})):(Nb.preventDefault(),k&&
Fm(hc,{select:!0})):Hb===qc&&Nb.preventDefault()}}},[k,K,jb.paused]);return(0,sp.createElement)(Kj.div,Ge({tabIndex:-1},a,{ref:d,onKeyDown:Kb}))}),ey=function(){let a=[];return{add(d){const k=a[0];d===k||null!==k&&void 0!==k&&k.pause();a=Un(a,d);a.unshift(d)},remove(d){var k;a=Un(a,d);null===(k=a[0])||void 0===k||k.resume()}}}(),Sj=ca(19),[Fg,Os]=Bh("Popper"),[hj,hk]=Fg("Popper"),Ps=(0,Sj.forwardRef)((a,d)=>{const {__scopePopper:k,virtualRef:K}=a;a=zf(a,["__scopePopper","virtualRef"]);const da=hk("PopperAnchor",
k),ja=(0,Sj.useRef)(null);d=Zg(d,ja);(0,Sj.useEffect)(()=>{da.onAnchorChange((null===K||void 0===K?void 0:K.current)||ja.current)});return K?null:(0,Sj.createElement)(Kj.div,Ge({},a,{ref:d}))}),[fu]=Fg("PopperContent"),[fy,Qs]=Fg("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Vk=(0,Sj.forwardRef)((a,d)=>{var k,K,da,ja,qa,Ha,Ra,$a;const {__scopePopper:fb,side:jb="bottom",sideOffset:Kb=0,align:Nb="center",alignOffset:Hb=0,arrowPadding:fc=0,collisionBoundary:qc=[],collisionPadding:Wb=0,sticky:kc=
"partial",hideWhenDetached:hc=!1,avoidCollisions:Fc=!0,onPlaced:Mc}=a,ud=zf(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),Jd=hk("PopperContent",fb),[Qe,Zd]=(0,Sj.useState)(null);d=Zg(d,so=>Zd(so));const [Ee,gf]=(0,Sj.useState)(null);var Re=sb(Ee),cf=null!==(k=null===Re||void 0===Re?void 0:Re.width)&&void 0!==k?k:0;k=null!==(K=null===Re||void 0===Re?void 0:Re.height)&&void 0!==K?K:0;K=
jb+("center"!==Nb?"-"+Nb:"");Re="number"===typeof Wb?Wb:Yd({top:0,right:0,bottom:0,left:0},Wb);const Gd=Array.isArray(qc)?qc:[qc],nd=0<Gd.length;Re={padding:Re,boundary:Gd.filter(Mg),altBoundary:nd};const {reference:Ad,floating:id,strategy:Dd,x:De,y:Ye,placement:Rf,middlewareData:eg,update:df}=Xb({strategy:"fixed",placement:K,whileElementsMounted:Sb,middleware:[jC(),vB({mainAxis:Kb+k,alignmentAxis:Hb}),Fc?wB(Yd({mainAxis:!0,crossAxis:!1,limiter:"partial"===kc?xB():void 0},Re)):void 0,Ee?AB({element:Ee,
padding:fc}):void 0,Fc?tB(Yd({},Re)):void 0,vG(hf(Yd({},Re),{apply:({elements:so,availableWidth:it,availableHeight:jt})=>{so.floating.style.setProperty("--radix-popper-available-width",`${it}px`);so.floating.style.setProperty("--radix-popper-available-height",`${jt}px`)}})),wH({arrowWidth:cf,arrowHeight:k}),hc?uB({strategy:"referenceHidden"}):void 0].filter(bp)});yl(()=>{Ad(Jd.anchor)},[Ad,Jd.anchor]);const Ag=null!==De&&null!==Ye,[Bf,Og]=fp(Rf),Yg=Ii(Mc);yl(()=>{Ag&&(null===Yg||void 0===Yg||Yg())},
[Ag,Yg]);cf=null===(da=eg.arrow)||void 0===da?void 0:da.x;da=null===(ja=eg.arrow)||void 0===ja?void 0:ja.y;ja=0!==(null===(qa=eg.arrow)||void 0===qa?void 0:qa.centerOffset);const [Bi,Lj]=(0,Sj.useState)();yl(()=>{Qe&&Lj(window.getComputedStyle(Qe).zIndex)},[Qe]);const {hasParent:Tj,positionUpdateFns:Zo}=Qs("PopperContent",fb),Vm=!Tj;(0,Sj.useLayoutEffect)(()=>{if(!Vm)return Zo.add(df),()=>{Zo.delete(df)}},[Vm,Zo,df]);yl(()=>{Vm&&Ag&&Array.from(Zo).reverse().forEach(so=>requestAnimationFrame(so))},
[Vm,Ag,Zo]);qa=hf(Yd({"data-side":Bf,"data-align":Og},ud),{ref:d,style:hf(Yd({},ud.style),{animation:Ag?void 0:"none",opacity:null!==(Ha=eg.hide)&&void 0!==Ha&&Ha.referenceHidden?0:void 0})});return(0,Sj.createElement)("div",{ref:id,"data-radix-popper-content-wrapper":"",style:{position:Dd,left:0,top:0,transform:Ag?`translate3d(${Math.round(De)}px, ${Math.round(Ye)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Bi,["--radix-popper-transform-origin"]:[null===(Ra=eg.transformOrigin)||
void 0===Ra?void 0:Ra.x,null===($a=eg.transformOrigin)||void 0===$a?void 0:$a.y].join(" ")},dir:a.dir},(0,Sj.createElement)(fu,{scope:fb,placedSide:Bf,onArrowChange:gf,arrowX:cf,arrowY:da,shouldHideArrow:ja},Vm?(0,Sj.createElement)(fy,{scope:fb,hasParent:!0,positionUpdateFns:Zo},(0,Sj.createElement)(Kj.div,qa)):(0,Sj.createElement)(Kj.div,qa)))}),jC=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:k}=a,{width:K,height:da}=d.reference;k.floating.style.setProperty("--radix-popper-anchor-width",
`${K}px`);k.floating.style.setProperty("--radix-popper-anchor-height",`${da}px`);return{}}}),wH=a=>({name:"transformOrigin",options:a,fn(d){var k,K,da,ja,qa;const {placement:Ha,rects:Ra,middlewareData:$a}=d,fb=(d=0!==(null===(k=$a.arrow)||void 0===k?void 0:k.centerOffset))?0:a.arrowWidth;k=d?0:a.arrowHeight;const [jb,Kb]=fp(Ha),Nb={start:"0%",center:"50%",end:"100%"}[Kb],Hb=(null!==(K=null===(da=$a.arrow)||void 0===da?void 0:da.x)&&void 0!==K?K:0)+fb/2;K=(null!==(ja=null===(qa=$a.arrow)||void 0===
qa?void 0:qa.y)&&void 0!==ja?ja:0)+k/2;qa=ja="";"bottom"===jb?(ja=d?Nb:`${Hb}px`,qa=`${-k}px`):"top"===jb?(ja=d?Nb:`${Hb}px`,qa=`${Ra.floating.height+k}px`):"right"===jb?(ja=`${-k}px`,qa=d?Nb:`${K}px`):"left"===jb&&(ja=`${Ra.floating.width+k}px`,qa=d?Nb:`${K}px`);return{data:{x:ja,y:qa}}}}),xH=a=>{const {__scopePopper:d,children:k}=a,[K,da]=(0,Sj.useState)(null);return(0,Sj.createElement)(hj,{scope:d,anchor:K,onAnchorChange:da},k)},kC=ca(19),pq=Jf(ca(20)),qq=(0,kC.forwardRef)((a,d)=>{var k;const {container:K=
null===globalThis||void 0===globalThis?void 0:null===(k=globalThis.document)||void 0===k?void 0:k.body}=a;a=zf(a,["container"]);return K?pq.default.createPortal((0,kC.createElement)(Kj.div,Ge({},a,{ref:d})),K):null}),Xi=ca(19),lC=(0,Xi.forwardRef)((a,d)=>(0,Xi.createElement)(Kj.span,Ge({},a,{ref:d,style:Yd({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),gy=[" ","Enter","ArrowUp","ArrowDown"],
yH=[" ","Enter"],[jo,Jv,Kv]=function(a){var d=a+"CollectionProvider";const [k,K]=Bh(d),[da,ja]=k(d,{collectionRef:{current:null},itemMap:new Map}),qa=fb=>{const {scope:jb,children:Kb}=fb;fb=Ln.default.useRef(null);const Nb=Ln.default.useRef(new Map).current;return Ln.default.createElement(da,{scope:jb,itemMap:Nb,collectionRef:fb},Kb)};Object.assign(qa,{displayName:d});const Ha=a+"CollectionSlot";d=Ln.default.forwardRef((fb,jb)=>{const {scope:Kb,children:Nb}=fb;fb=ja(Ha,Kb);jb=Zg(jb,fb.collectionRef);
return Ln.default.createElement(Ko,{ref:jb},Nb)});Object.assign(d,{displayName:Ha});const Ra=a+"CollectionItemSlot",$a=Ln.default.forwardRef((fb,jb)=>{const {scope:Kb,children:Nb}=fb,Hb=zf(fb,["scope","children"]),fc=Ln.default.useRef(null);fb=Zg(jb,fc);const qc=ja(Ra,Kb);Ln.default.useEffect(()=>{qc.itemMap.set(fc,Yd({ref:fc},Hb));return()=>void qc.itemMap.delete(fc)});return Ln.default.createElement(Ko,{["data-radix-collection-item"]:"",ref:fb},Nb)});Object.assign($a,{displayName:Ra});return[{Provider:qa,
Slot:d,ItemSlot:$a},function(fb){const jb=ja(a+"CollectionConsumer",fb);return Ln.default.useCallback(()=>{const Kb=jb.collectionRef.current;if(!Kb)return[];const Nb=Array.from(Kb.querySelectorAll("[data-radix-collection-item]"));return Array.from(jb.itemMap.values()).sort((Hb,fc)=>Nb.indexOf(Hb.ref.current)-Nb.indexOf(fc.ref.current))},[jb.collectionRef,jb.itemMap])},K]}("Select"),[Rs]=Bh("Select",[Kv,Os]),Ss=Os(),[hy,tp]=Rs("Select"),[iy,mC]=Rs("Select"),nC=(0,af.forwardRef)((a,d)=>{const {__scopeSelect:k,
disabled:K=!1}=a;a=zf(a,["__scopeSelect","disabled"]);const da=Ss(k),ja=tp("SelectTrigger",k),qa=ja.disabled||K;d=Zg(d,ja.onTriggerChange);const Ha=Jv(k),[Ra,$a,fb]=gp(jb=>{const Kb=Ha().filter(Hb=>!Hb.disabled),Nb=Kb.find(Hb=>Hb.value===ja.value);jb=Cn(Kb,jb,Nb);if(void 0!==jb)ja.onValueChange(jb.value)});return(0,af.createElement)(Ps,Ge({asChild:!0},da),(0,af.createElement)(Kj.button,Ge({type:"button",role:"combobox","aria-controls":ja.contentId,"aria-expanded":ja.open,"aria-required":ja.required,
"aria-autocomplete":"none",dir:ja.dir,"data-state":ja.open?"open":"closed",disabled:qa,"data-disabled":qa?"":void 0,"data-placeholder":void 0===ja.value?"":void 0},a,{ref:d,onClick:Sf(a.onClick,jb=>{jb.currentTarget.focus()}),onPointerDown:Sf(a.onPointerDown,jb=>{const Kb=jb.target;Kb.hasPointerCapture(jb.pointerId)&&Kb.releasePointerCapture(jb.pointerId);0===jb.button&&!1===jb.ctrlKey&&(qa||(ja.onOpenChange(!0),fb()),ja.triggerPointerDownPosRef.current={x:Math.round(jb.pageX),y:Math.round(jb.pageY)},
jb.preventDefault())}),onKeyDown:Sf(a.onKeyDown,jb=>{const Kb=""!==Ra.current;jb.ctrlKey||jb.altKey||jb.metaKey||1!==jb.key.length||$a(jb.key);Kb&&" "===jb.key||!gy.includes(jb.key)||(qa||(ja.onOpenChange(!0),fb()),jb.preventDefault())})})))}),oC=(0,af.forwardRef)((a,d)=>{const {__scopeSelect:k,children:K,placeholder:da}=a;a=zf(a,["__scopeSelect","className","style","children","placeholder"]);const ja=tp("SelectValue",k),{onValueNodeHasChildrenChange:qa}=ja,Ha=void 0!==K;d=Zg(d,ja.onValueNodeChange);
yl(()=>{qa(Ha)},[qa,Ha]);return(0,af.createElement)(Kj.span,Ge({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===ja.value&&void 0!==da?da:K)}),zr=(0,af.forwardRef)((a,d)=>{const {children:k}=a;a=zf(a,["__scopeSelect","children"]);return(0,af.createElement)(Kj.span,Ge({"aria-hidden":!0},a,{ref:d}),k||"")}),Ar=(0,af.forwardRef)((a,d)=>{const k=tp("SelectContent",a.__scopeSelect),[K,da]=(0,af.useState)();yl(()=>{da(new DocumentFragment)},[]);return k.open?(0,af.createElement)(pC,Ge({},a,{ref:d})):
K?(0,qp.createPortal)((0,af.createElement)(Lv,{scope:a.__scopeSelect},(0,af.createElement)(jo.Slot,{scope:a.__scopeSelect},(0,af.createElement)("div",null,a.children))),K):null}),[Lv,rq]=Rs("SelectContent"),pC=(0,af.forwardRef)((a,d)=>{const {__scopeSelect:k,position:K="item-aligned",onCloseAutoFocus:da,onEscapeKeyDown:ja,onPointerDownOutside:qa,side:Ha,sideOffset:Ra,align:$a,alignOffset:fb,arrowPadding:jb,collisionBoundary:Kb,collisionPadding:Nb,sticky:Hb,hideWhenDetached:fc,avoidCollisions:qc}=
a;a=zf(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Wb=tp("SelectContent",k),[kc,hc]=(0,af.useState)(null),[Fc,Mc]=(0,af.useState)(null);d=Zg(d,Bf=>hc(Bf));const [ud,Jd]=(0,af.useState)(null),[Qe,Zd]=(0,af.useState)(null),Ee=Jv(k),[gf,Re]=(0,af.useState)(!1),cf=(0,af.useRef)(!1);(0,af.useEffect)(()=>{if(kc)return Ox(kc)},[kc]);
Gf();const Gd=(0,af.useCallback)(Bf=>{const [Og,...Yg]=Ee().map(Tj=>Tj.ref.current),[Bi]=Yg.slice(-1),Lj=document.activeElement;for(const Tj of Bf){if(Tj===Lj)break;null===Tj||void 0===Tj||Tj.scrollIntoView({block:"nearest"});Tj===Og&&Fc&&(Fc.scrollTop=0);Tj===Bi&&Fc&&(Fc.scrollTop=Fc.scrollHeight);null===Tj||void 0===Tj||Tj.focus();if(document.activeElement!==Lj)break}},[Ee,Fc]),nd=(0,af.useCallback)(()=>Gd([ud,kc]),[Gd,ud,kc]);(0,af.useEffect)(()=>{gf&&nd()},[gf,nd]);const {onOpenChange:Ad,triggerPointerDownPosRef:id}=
Wb;(0,af.useEffect)(()=>{if(kc){var Bf=0,Og=0;const Yg=Lj=>{var Tj,Zo,Vm,so;Bf=Math.abs(Math.round(Lj.pageX)-(null!==(Tj=null===(Zo=id.current)||void 0===Zo?void 0:Zo.x)&&void 0!==Tj?Tj:0));Og=Math.abs(Math.round(Lj.pageY)-(null!==(Vm=null===(so=id.current)||void 0===so?void 0:so.y)&&void 0!==Vm?Vm:0))},Bi=Lj=>{10>=Bf&&10>=Og?Lj.preventDefault():kc.contains(Lj.target)||Ad(!1);document.removeEventListener("pointermove",Yg);id.current=null};null!==id.current&&(document.addEventListener("pointermove",
Yg),document.addEventListener("pointerup",Bi,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Yg);document.removeEventListener("pointerup",Bi,{capture:!0})}}},[kc,Ad,id]);(0,af.useEffect)(()=>{const Bf=()=>Ad(!1);window.addEventListener("blur",Bf);window.addEventListener("resize",Bf);return()=>{window.removeEventListener("blur",Bf);window.removeEventListener("resize",Bf)}},[Ad]);const [Dd,De]=gp(Bf=>{const Og=Ee().filter(Lj=>!Lj.disabled),Yg=Og.find(Lj=>Lj.ref.current===
document.activeElement),Bi=Cn(Og,Bf,Yg);Bi&&setTimeout(()=>Bi.ref.current.focus())}),Ye=(0,af.useCallback)((Bf,Og,Yg)=>{Yg=!cf.current&&!Yg;if(void 0!==Wb.value&&Wb.value===Og||Yg)Jd(Bf),Yg&&(cf.current=!0)},[Wb.value]),Rf=(0,af.useCallback)(()=>null===kc||void 0===kc?void 0:kc.focus(),[kc]),eg=(0,af.useCallback)((Bf,Og,Yg)=>{Yg=!cf.current&&!Yg;(void 0!==Wb.value&&Wb.value===Og||Yg)&&Zd(Bf)},[Wb.value]),df="popper"===K?Br:Ts,Ag=df===Br?{side:Ha,sideOffset:Ra,align:$a,alignOffset:fb,arrowPadding:jb,
collisionBoundary:Kb,collisionPadding:Nb,sticky:Hb,hideWhenDetached:fc,avoidCollisions:qc}:{};return(0,af.createElement)(Lv,{scope:k,content:kc,viewport:Fc,onViewportChange:Mc,itemRefCallback:Ye,selectedItem:ud,onItemLeave:Rf,itemTextRefCallback:eg,focusSelectedItem:nd,selectedItemText:Qe,position:K,isPositioned:gf,searchRef:Dd},(0,af.createElement)(Fk,{as:Ko,allowPinchZoom:!0},(0,af.createElement)(zg,{asChild:!0,trapped:Wb.open,onMountAutoFocus:Bf=>{Bf.preventDefault()},onUnmountAutoFocus:Sf(da,
Bf=>{var Og;null===(Og=Wb.trigger)||void 0===Og||Og.focus({preventScroll:!0});Bf.preventDefault()})},(0,af.createElement)(rp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:ja,onPointerDownOutside:qa,onFocusOutside:Bf=>Bf.preventDefault(),onDismiss:()=>Wb.onOpenChange(!1)},(0,af.createElement)(df,Ge({role:"listbox",id:Wb.contentId,"data-state":Wb.open?"open":"closed",dir:Wb.dir,onContextMenu:Bf=>Bf.preventDefault()},a,Ag,{onPlaced:()=>Re(!0),ref:d,style:Yd({display:"flex",flexDirection:"column",
outline:"none"},a.style),onKeyDown:Sf(a.onKeyDown,Bf=>{var Og=Bf.ctrlKey||Bf.altKey||Bf.metaKey;"Tab"===Bf.key&&Bf.preventDefault();Og||1!==Bf.key.length||De(Bf.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Bf.key)){let Yg=Ee().filter(Bi=>!Bi.disabled).map(Bi=>Bi.ref.current);["ArrowUp","End"].includes(Bf.key)&&(Yg=Yg.slice().reverse());["ArrowUp","ArrowDown"].includes(Bf.key)&&(Og=Yg.indexOf(Bf.target),Yg=Yg.slice(Og+1));setTimeout(()=>Gd(Yg));Bf.preventDefault()}})}))))))}),Ts=(0,af.forwardRef)((a,
d)=>{const {__scopeSelect:k,onPlaced:K}=a;a=zf(a,["__scopeSelect","onPlaced"]);const da=tp("SelectContent",k);var ja=rq("SelectContent",k);const [qa,Ha]=(0,af.useState)(null),[Ra,$a]=(0,af.useState)(null);d=Zg(d,Fc=>$a(Fc));const fb=Jv(k),jb=(0,af.useRef)(!1),Kb=(0,af.useRef)(!0),{viewport:Nb,selectedItem:Hb,selectedItemText:fc,focusSelectedItem:qc}=ja,Wb=(0,af.useCallback)(()=>{if(da.trigger&&da.valueNode&&qa&&Ra&&Nb&&Hb&&fc){var Fc=da.trigger.getBoundingClientRect(),Mc=Ra.getBoundingClientRect(),
ud=da.valueNode.getBoundingClientRect(),Jd=fc.getBoundingClientRect();"rtl"!==da.dir?(Jd=ud.left-(Jd.left-Mc.left),ud=Fc.width+(Fc.left-Jd),Mc=ap(Jd,[10,window.innerWidth-10-Math.max(ud,Mc.width)]),qa.style.minWidth=ud+"px",qa.style.left=Mc+"px"):(Jd=window.innerWidth-ud.right-(Mc.right-Jd.right),ud=Fc.width+(window.innerWidth-Fc.right-Jd),Mc=ap(Jd,[10,window.innerWidth-10-Math.max(ud,Mc.width)]),qa.style.minWidth=ud+"px",qa.style.right=Mc+"px");const cf=fb();Mc=window.innerHeight-20;var Qe=Nb.scrollHeight,
Zd=window.getComputedStyle(Ra);ud=parseInt(Zd.borderTopWidth,10);var Ee=parseInt(Zd.paddingTop,10);Jd=parseInt(Zd.borderBottomWidth,10);Zd=parseInt(Zd.paddingBottom,10);var gf=ud+Ee+Qe+Zd+Jd;Qe=Math.min(5*Hb.offsetHeight,gf);var Re=window.getComputedStyle(Nb);Zd=parseInt(Re.paddingTop,10);Re=parseInt(Re.paddingBottom,10);const Gd=Fc.top+Fc.height/2-10,nd=Mc-Gd;Fc=Hb.offsetHeight/2;Ee=ud+Ee+(Hb.offsetTop+Fc);gf-=Ee;Ee<=Gd?(ud=Hb===cf[cf.length-1].ref.current,qa.style.bottom="0px",qa.style.height=Ee+
Math.max(nd,Fc+(ud?Re:0)+(Ra.clientHeight-Nb.offsetTop-Nb.offsetHeight)+Jd)+"px"):(Jd=Hb===cf[0].ref.current,qa.style.top="0px",qa.style.height=Math.max(Gd,ud+Nb.offsetTop+(Jd?Zd:0)+Fc)+gf+"px",Nb.scrollTop=Ee-Gd+Nb.offsetTop);qa.style.margin="10px 0";qa.style.minHeight=Qe+"px";qa.style.maxHeight=Mc+"px";null===K||void 0===K||K();requestAnimationFrame(()=>jb.current=!0)}},[fb,da.trigger,da.valueNode,qa,Ra,Nb,Hb,fc,da.dir,K]);yl(()=>Wb(),[Wb]);const [kc,hc]=(0,af.useState)();yl(()=>{Ra&&hc(window.getComputedStyle(Ra).zIndex)},
[Ra]);ja=(0,af.useCallback)(Fc=>{Fc&&!0===Kb.current&&(Wb(),null===qc||void 0===qc||qc(),Kb.current=!1)},[Wb,qc]);return(0,af.createElement)(gu,{scope:k,contentWrapper:qa,shouldExpandOnScrollRef:jb,onScrollButtonChange:ja},(0,af.createElement)("div",{ref:Ha,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:kc}},(0,af.createElement)(Kj.div,Ge({},a,{ref:d,style:Yd({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),Br=(0,af.forwardRef)((a,d)=>{const {__scopeSelect:k,align:K=
"start",collisionPadding:da=10}=a;a=zf(a,["__scopeSelect","align","collisionPadding"]);const ja=Ss(k);return(0,af.createElement)(Vk,Ge({},ja,a,{ref:d,align:K,collisionPadding:da,style:hf(Yd({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)",
"--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[gu,Cr]=Rs("SelectContent",{}),hu=(0,af.forwardRef)((a,d)=>{const {__scopeSelect:k}=a;a=zf(a,["__scopeSelect"]);const K=rq("SelectViewport",k),da=Cr("SelectViewport",k);d=Zg(d,K.onViewportChange);const ja=(0,af.useRef)(0);return(0,af.createElement)(af.Fragment,null,(0,af.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,af.createElement)(jo.Slot,{scope:k},(0,af.createElement)(Kj.div,Ge({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:Yd({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:Sf(a.onScroll,qa=>{qa=qa.currentTarget;const {contentWrapper:Ha,shouldExpandOnScrollRef:Ra}=da;if(null!==Ra&&void 0!==Ra&&Ra.current&&Ha){var $a=Math.abs(ja.current-qa.scrollTop);if(0<$a){var fb=window.innerHeight-20,jb=parseFloat(Ha.style.minHeight);const Kb=parseFloat(Ha.style.height);jb=Math.max(jb,
Kb);jb<fb&&($a=jb+$a,fb=Math.min(fb,$a),$a-=fb,Ha.style.height=fb+"px","0px"===Ha.style.bottom&&(qa.scrollTop=0<$a?$a:0,Ha.style.justifyContent="flex-end"))}}ja.current=qa.scrollTop})}))))});Rs("SelectGroup");var [sq,Mn]=Rs("SelectItem"),qC=(0,af.forwardRef)((a,d)=>{const {__scopeSelect:k,value:K,disabled:da=!1,textValue:ja}=a;a=zf(a,["__scopeSelect","value","disabled","textValue"]);const qa=tp("SelectItem",k),Ha=rq("SelectItem",k),Ra=qa.value===K,[$a,fb]=(0,af.useState)(null!==ja&&void 0!==ja?ja:
""),[jb,Kb]=(0,af.useState)(!1);d=Zg(d,fc=>{var qc;return null===(qc=Ha.itemRefCallback)||void 0===qc?void 0:qc.call(Ha,fc,K,da)});const Nb=Ei(),Hb=()=>{da||(qa.onValueChange(K),qa.onOpenChange(!1))};return(0,af.createElement)(sq,{scope:k,value:K,disabled:da,textId:Nb,isSelected:Ra,onItemTextChange:(0,af.useCallback)(fc=>{fb(qc=>{var Wb;return qc||(null!==(Wb=null===fc||void 0===fc?void 0:fc.textContent)&&void 0!==Wb?Wb:"").trim()})},[])},(0,af.createElement)(jo.ItemSlot,{scope:k,value:K,disabled:da,
textValue:$a},(0,af.createElement)(Kj.div,Ge({role:"option","aria-labelledby":Nb,"data-highlighted":jb?"":void 0,"aria-selected":Ra&&jb,"data-state":Ra?"checked":"unchecked","aria-disabled":da||void 0,"data-disabled":da?"":void 0,tabIndex:da?void 0:-1},a,{ref:d,onFocus:Sf(a.onFocus,()=>Kb(!0)),onBlur:Sf(a.onBlur,()=>Kb(!1)),onPointerUp:Sf(a.onPointerUp,Hb),onPointerMove:Sf(a.onPointerMove,fc=>{if(da){var qc;null===(qc=Ha.onItemLeave)||void 0===qc||qc.call(Ha)}else fc.currentTarget.focus({preventScroll:!0})}),
onPointerLeave:Sf(a.onPointerLeave,fc=>{if(fc.currentTarget===document.activeElement){var qc;null===(qc=Ha.onItemLeave)||void 0===qc||qc.call(Ha)}}),onKeyDown:Sf(a.onKeyDown,fc=>{var qc;if(""===(null===(qc=Ha.searchRef)||void 0===qc?void 0:qc.current)||" "!==fc.key)yH.includes(fc.key)&&Hb()," "===fc.key&&fc.preventDefault()})}))))}),ln=(0,af.forwardRef)((a,d)=>{var {__scopeSelect:k}=a;a=zf(a,["__scopeSelect","className","style"]);const K=tp("SelectItemText",k),da=rq("SelectItemText",k),ja=Mn("SelectItemText",
k);k=mC("SelectItemText",k);const [qa,Ha]=(0,af.useState)(null);d=Zg(d,Kb=>Ha(Kb),ja.onItemTextChange,Kb=>{var Nb;return null===(Nb=da.itemTextRefCallback)||void 0===Nb?void 0:Nb.call(da,Kb,ja.value,ja.disabled)});const Ra=null===qa||void 0===qa?void 0:qa.textContent,$a=(0,af.useMemo)(()=>(0,af.createElement)("option",{key:ja.value,value:ja.value,disabled:ja.disabled},Ra),[ja.disabled,ja.value,Ra]),{onNativeOptionAdd:fb,onNativeOptionRemove:jb}=k;yl(()=>{fb($a);return()=>jb($a)},[fb,jb,$a]);return(0,af.createElement)(af.Fragment,
null,(0,af.createElement)(Kj.span,Ge({id:ja.textId},a,{ref:d})),ja.isSelected&&K.valueNode&&!K.valueNodeHasChildren?(0,qp.createPortal)(a.children,K.valueNode):null)}),Us=(0,af.forwardRef)((a,d)=>{const k=rq("SelectScrollUpButton",a.__scopeSelect),K=Cr("SelectScrollUpButton",a.__scopeSelect),[da,ja]=(0,af.useState)(!1);d=Zg(d,K.onScrollButtonChange);yl(()=>{if(k.viewport&&k.isPositioned){let qa=function(){ja(0<Ha.scrollTop)};const Ha=k.viewport;qa();Ha.addEventListener("scroll",qa);return()=>Ha.removeEventListener("scroll",
qa)}},[k.viewport,k.isPositioned]);return da?(0,af.createElement)(up,Ge({},a,{ref:d,onAutoScroll:()=>{const {viewport:qa,selectedItem:Ha}=k;qa&&Ha&&(qa.scrollTop-=Ha.offsetHeight)}})):null}),Mv=(0,af.forwardRef)((a,d)=>{const k=rq("SelectScrollDownButton",a.__scopeSelect),K=Cr("SelectScrollDownButton",a.__scopeSelect),[da,ja]=(0,af.useState)(!1);d=Zg(d,K.onScrollButtonChange);yl(()=>{if(k.viewport&&k.isPositioned){let qa=function(){ja(Math.ceil(Ha.scrollTop)<Ha.scrollHeight-Ha.clientHeight)};const Ha=
k.viewport;qa();Ha.addEventListener("scroll",qa);return()=>Ha.removeEventListener("scroll",qa)}},[k.viewport,k.isPositioned]);return da?(0,af.createElement)(up,Ge({},a,{ref:d,onAutoScroll:()=>{const {viewport:qa,selectedItem:Ha}=k;qa&&Ha&&(qa.scrollTop+=Ha.offsetHeight)}})):null}),up=(0,af.forwardRef)((a,d)=>{const {__scopeSelect:k,onAutoScroll:K}=a;a=zf(a,["__scopeSelect","onAutoScroll"]);const da=rq("SelectScrollButton",k),ja=(0,af.useRef)(null),qa=Jv(k),Ha=(0,af.useCallback)(()=>{null!==ja.current&&
(window.clearInterval(ja.current),ja.current=null)},[]);(0,af.useEffect)(()=>()=>Ha(),[Ha]);yl(()=>{var Ra;const $a=qa().find(fb=>fb.ref.current===document.activeElement);null===$a||void 0===$a||null===(Ra=$a.ref.current)||void 0===Ra||Ra.scrollIntoView({block:"nearest"})},[qa]);return(0,af.createElement)(Kj.div,Ge({"aria-hidden":!0},a,{ref:d,style:Yd({flexShrink:0},a.style),onPointerMove:Sf(a.onPointerMove,()=>{var Ra;null===(Ra=da.onItemLeave)||void 0===Ra||Ra.call(da);null===ja.current&&(ja.current=
window.setInterval(K,50))}),onPointerLeave:Sf(a.onPointerLeave,()=>{Ha()})}))}),jy=(0,af.forwardRef)((a,d)=>{const {value:k}=a;a=zf(a,["value"]);const K=(0,af.useRef)(null);d=Zg(d,K);const da=Tn(k);(0,af.useEffect)(()=>{const ja=K.current,qa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(da!==k&&qa){const Ha=new Event("change",{bubbles:!0});qa.call(ja,k);ja.dispatchEvent(Ha)}},[da,k]);return(0,af.createElement)(lC,{asChild:!0},(0,af.createElement)("select",Ge({},
a,{ref:d,defaultValue:k})))});jy.displayName="BubbleSelect";var sC=a=>{const {__scopeSelect:d,children:k,open:K,defaultOpen:da,onOpenChange:ja,value:qa,defaultValue:Ha,onValueChange:Ra,dir:$a,name:fb,autoComplete:jb,disabled:Kb,required:Nb}=a,Hb=Ss(d),[fc,qc]=(0,af.useState)(null),[Wb,kc]=(0,af.useState)(null),[hc,Fc]=(0,af.useState)(!1),Mc=ng($a),[ud=!1,Jd]=Dc({prop:K,defaultProp:da,onChange:ja}),[Qe,Zd]=Dc({prop:qa,defaultProp:Ha,onChange:Ra}),Ee=(0,af.useRef)(null),gf=fc?!!fc.closest("form"):!0,
[Re,cf]=(0,af.useState)(new Set),Gd=Array.from(Re).map(nd=>nd.props.value).join(";");return(0,af.createElement)(xH,Hb,(0,af.createElement)(hy,{required:Nb,scope:d,trigger:fc,onTriggerChange:qc,valueNode:Wb,onValueNodeChange:kc,valueNodeHasChildren:hc,onValueNodeHasChildrenChange:Fc,contentId:Ei(),value:Qe,onValueChange:Zd,open:ud,onOpenChange:Jd,dir:Mc,triggerPointerDownPosRef:Ee,disabled:Kb},(0,af.createElement)(jo.Provider,{scope:d},(0,af.createElement)(iy,{scope:a.__scopeSelect,onNativeOptionAdd:(0,af.useCallback)(nd=>
{cf(Ad=>(new Set(Ad)).add(nd))},[]),onNativeOptionRemove:(0,af.useCallback)(nd=>{cf(Ad=>{Ad=new Set(Ad);Ad.delete(nd);return Ad})},[])},k)),gf?(0,af.createElement)(jy,{key:Gd,"aria-hidden":!0,required:Nb,tabIndex:-1,name:fb,autoComplete:jb,value:Qe,onChange:nd=>Zd(nd.target.value),disabled:Kb},void 0===Qe?(0,af.createElement)("option",{value:""}):null,Array.from(Re)):null))},tC=nC,Al=oC,ky=zr,rC=a=>(0,af.createElement)(qq,Ge({asChild:!0},a)),Pm=Ar,zd=hu,uC=qC,yh=ln,Eh=Us,vC=Mv,jl=ca(588),Nv=Jf(ca(19)),
wC=ca(588),um=ca(588),Ov=ee(function(){const a=lg(),{handlers:{t:d}}=Ks.useContext(ri),k=Ks.useCallback(qa=>{a.api.setColor(qa)},[]),K=Ks.useCallback(qa=>{(qa=qa.currentTarget.dataset.tool)&&a.selectTool(qa)},[]),[da,ja]=Ks.useState(()=>{var qa;return null!=(qa=Object.values(ls).find(Ha=>Ha===a.selectedTool.id))?qa:Object.values(ls)[0]});Ks.useEffect(()=>{ja(qa=>{var Ha;return null!=(Ha=Object.values(ls).find(Ra=>Ra===a.selectedTool.id))?Ha:qa})},[a.selectedTool.id]);return(0,um.jsx)("div",{className:"tl-primary-tools",
"data-html2canvas-ignore":"true",children:(0,um.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,um.jsx)(io,{handleClick:()=>a.selectTool("select"),tooltip:d("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,um.jsx)(io,{handleClick:()=>a.selectTool("move"),tooltip:d("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,um.jsx)(lq,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,um.jsx)(io,{handleClick:()=>a.selectTool("logseq-portal"),
tooltip:d("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,um.jsx)(io,{handleClick:()=>a.selectTool("pencil"),tooltip:d("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,um.jsx)(io,{handleClick:()=>a.selectTool("highlighter"),tooltip:d("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,um.jsx)(io,{handleClick:()=>a.selectTool("erase"),tooltip:d("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,um.jsx)(io,{handleClick:()=>a.selectTool("line"),tooltip:d("whiteboard/connector"),
id:"line",icon:"connector"}),(0,um.jsx)(io,{handleClick:()=>a.selectTool("text"),tooltip:d("whiteboard/text"),id:"text",icon:"text"}),(0,um.jsx)($x,{activeGeometry:da,setGeometry:K}),(0,um.jsx)(lq,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,um.jsx)(lm,{popoverSide:"left",color:a.settings.color,setColor:k}),(0,um.jsx)(Tr,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),Pv=ca(588),xC=ee(function(){const a=lg();return(0,Pv.jsxs)("div",
{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,Pv.jsx)("div",{style:{flex:1}}),(0,Pv.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),Qm=ca(588),yC=ee(function(){const a=lg();return(0,Qm.jsxs)(Qm.Fragment,{children:[wf()&&(0,Qm.jsx)(xC,{}),wf()&&(0,Qm.jsx)(Mo,{}),!a.readOnly&&(0,Qm.jsx)(Ov,{}),(0,Qm.jsx)(au,{})]})}),Vs=Jf(ca(19)),Wk=Jf(ca(19)),ly=Jf(ca(19)),zC=Jf(ca(19)),vm=ca(588),my=({id:a,showReferenceContent:d=
!1})=>{var k;const {handlers:{isWhiteboardPage:K,redirectToPage:da,sidebarAddBlock:ja,queryBlockByUUID:qa},renderers:{Breadcrumb:Ha,PageName:Ra}}=zC.default.useContext(ri);var $a="";let fb=Aj(a)?"B":"P",jb="";if(Aj(a)){$a=qa(a);if(!$a)return(0,vm.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});jb=$a.content;$a="whiteboard-shape"===(null==(k=$a.properties)?void 0:k["ls-type"])?"link-to-whiteboard":"link-to-block"}else $a=K(a)?"link-to-whiteboard":"link-to-page";k=jb&&
23<jb.length?jb.slice(0,20)+"...":jb;return(0,vm.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Kb=>{Kb.stopPropagation();Kb.shiftKey?ja(a,"B"===fb?"block":"page"):da(a)},children:[(0,vm.jsx)(bh,{name:$a}),(0,vm.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===fb?(0,vm.jsx)(Ra,{pageName:a}):(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)(Ha,{levelLimit:1,blockId:a,endSeparator:d}),d&&k]})})]})},kl=Jf(ca(19)),fm=ca(19),zH=["children"],
vp="undefined"!==typeof document?fm.useLayoutEffect:fm.useEffect,Vg=Jf(ca(19)),Jh=ca(19),ny=ca(20),iu,Xk,BC="undefined"!=typeof document?Jh.useLayoutEffect:Jh.useEffect;!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(Xk||={});var AC=((iu={})[Xk.DEBUG]="debug",iu[Xk.INFO]="log",iu[Xk.WARN]="warn",iu[Xk.ERROR]="error",iu),wp=Wh(function(){var a=Pf(Xk.ERROR);return{log:Pf(function(d,k,K){var da;void 0===K&&(K=Xk.INFO);K>=(null!=(da=("undefined"==typeof globalThis?
window:globalThis).VIRTUOSO_LOG_LEVEL)?da:a(4))&&console[AC[K]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",d,k)}),logLevel:a}},[],{singleton:!0}),Rm=Wh(function(){var a=Dg(),d=Dg(),k=Pf(0),K=Dg(),da=Pf(0),ja=Dg(),qa=Dg(),Ha=Pf(0),Ra=Pf(0),$a=Pf(0),fb=Pf(0),jb=Dg(),Kb=Dg(),Nb=Pf(!1),Hb=Pf(!1);return Jg(xf(a,og(function(fc){return fc.scrollTop})),d),Jg(xf(a,og(function(fc){return fc.scrollHeight})),qa),Jg(d,da),{scrollContainerState:a,scrollTop:d,viewportHeight:ja,
headerHeight:Ha,fixedHeaderHeight:Ra,fixedFooterHeight:$a,footerHeight:fb,scrollHeight:qa,smoothScrollTargetReached:K,react18ConcurrentRendering:Hb,scrollTo:jb,scrollBy:Kb,statefulScrollTop:da,deviation:k,scrollingInProgress:Nb}},[],{singleton:!0}),ji={lvl:0},oy=Wh(function(){return{recalcInProgress:Pf(!1)}},[],{singleton:!0}),AH={offsetHeight:"height",offsetWidth:"width"},xp=Wh(function(a){var d=a[0].log,k=a[1].recalcInProgress;a=Dg();var K=Dg(),da=Pj(K,0),ja=Dg(),qa=Dg(),Ha=Pf(0),Ra=Pf([]),$a=Pf(void 0),
fb=Pf(void 0),jb=Pf(function(kc,hc){return hi(kc,AH[hc])}),Kb=Pf(void 0),Nb=Pf(0),Hb={offsetTree:[],sizeTree:ji,groupOffsetTree:ji,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},fc=Pj(xf(a,th(Ra,d,Nb),ck(oi,Hb),Rh()),Hb);Jg(xf(Ra,kg(function(kc){return 0<kc.length}),th(fc,Nb),og(function(kc){var hc=kc[0],Fc=kc[1],Mc=kc[2];kc=hc.reduce(function(ud,Jd,Qe){return za(ud,Jd,Sh(Jd,Fc.offsetTree,Mc)||Qe)},ji);return ah({},Fc,{groupIndices:hc,groupOffsetTree:kc})})),fc);Jg(xf(K,th(fc),kg(function(kc){return kc[0]<
kc[1].lastIndex}),og(function(kc){var hc=kc[1];return[{startIndex:kc[0],endIndex:hc.lastIndex,size:hc.lastSize}]})),a);Jg($a,fb);var qc=Pj(xf($a,og(function(kc){return void 0===kc})),!0);Jg(xf(fb,kg(function(kc){return void 0!==kc&&fc(4).sizeTree===ji}),og(function(kc){return[{startIndex:0,endIndex:0,size:kc}]})),a);Hb=rk(xf(a,th(fc),ck(function(kc,hc){hc=hc[1];return{changed:hc!==kc.sizes,sizes:hc}},{changed:!1,sizes:Hb}),og(function(kc){return kc.changed})));fh(xf(Ha,ck(function(kc,hc){return{diff:kc.prev-
hc,prev:hc}},{diff:0,prev:0}),og(function(kc){return kc.diff})),function(kc){0<kc?(k(0,!0),ja(0,kc)):0>kc&&qa(0,kc)});fh(xf(Ha,th(d)),function(kc){0>kc[0]&&(0,kc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:Ha},Xk.ERROR)});d=rk(ja);Jg(xf(ja,th(fc),og(function(kc){var hc=kc[0];kc=kc[1];if(0<kc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Ia(kc.sizeTree).reduce(function(Fc,
Mc){var ud=Mc.k;Mc=Mc.v;return{ranges:[].concat(Fc.ranges,[{startIndex:Fc.prevIndex,endIndex:ud+hc-1,size:Fc.prevSize}]),prevIndex:ud+hc,prevSize:Mc}},{ranges:[],prevIndex:0,prevSize:kc.lastSize}).ranges})),a);var Wb=rk(xf(qa,th(fc,Nb),og(function(kc){return Sh(-kc[0],kc[1].offsetTree,kc[2])})));return Jg(xf(qa,th(fc,Nb),og(function(kc){var hc=kc[0],Fc=kc[1];kc=kc[2];if(0<Fc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Mc=Ia(Fc.sizeTree).reduce(function(ud,
Jd){return za(ud,Math.max(0,Jd.k+hc),Jd.v)},ji);return ah({},Fc,{sizeTree:Mc},yi(Fc.offsetTree,0,Mc,kc))})),fc),{data:Kb,totalCount:K,sizeRanges:a,groupIndices:Ra,defaultItemSize:fb,fixedItemSize:$a,unshiftWith:ja,shiftWith:qa,shiftWithOffset:Wb,beforeUnshiftWith:d,firstItemIndex:Ha,gap:Nb,sizes:fc,listRefresh:Hb,statefulTotalCount:da,trackItemSizes:qc,itemSize:jb}},Qi(wp,oy),{singleton:!0}),BH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,ju=Wh(function(a){function d(){qc&&
(qc(),qc=null);kc&&(kc(),kc=null);Wb&&(clearTimeout(Wb),Wb=null);Ha(0,!1)}var k=a[0],K=k.sizes,da=k.totalCount,ja=k.listRefresh;k=k.gap;var qa=a[1],Ha=qa.scrollingInProgress,Ra=qa.viewportHeight,$a=qa.scrollTo,fb=qa.smoothScrollTargetReached,jb=qa.headerHeight,Kb=qa.footerHeight,Nb=qa.fixedHeaderHeight;qa=qa.fixedFooterHeight;a=a[2].log;var Hb=Dg(),fc=Pf(0),qc=null,Wb=null,kc=null;return Jg(xf(Hb,th(K,Ra,da,fc,jb,Kb,a),th(k,Nb,qa),og(function(hc){var Fc=hc[0],Mc=Fc[0],ud=Fc[1],Jd=Fc[2],Qe=Fc[3],Zd=
Fc[4],Ee=Fc[5],gf=Fc[6],Re=Fc[7],cf=hc[1];Fc=hc[2];hc=hc[3];var Gd=Th(Mc),nd=Gd.align,Ad=Gd.behavior,id=Gd.offset;--Qe;Gd=zi(Gd,ud,Qe);Ee=Sh(Gd,ud.offsetTree,cf)+Ee;"end"===nd?(Ee+=Fc+ba(ud.sizeTree,Gd)[1]-Jd+hc,Gd===Qe&&(Ee+=gf)):"center"===nd?Ee+=(Fc+ba(ud.sizeTree,Gd)[1]-Jd+hc)/2:Ee-=Zd;id&&(Ee+=id);var Dd=function(Ye){d();Ye?(Re("retrying to scroll to",{location:Mc},Xk.DEBUG),Hb(0,Mc)):Re("list did not change, scroll successful",{},Xk.DEBUG)};if(d(),"smooth"===Ad){var De=!1;kc=fh(ja,function(Ye){De=
De||Ye});qc=Gm(fb,function(){Dd(De)})}else qc=Gm(xf(ja,function(Ye){var Rf=setTimeout(function(){Ye(!1)},150);return function(eg){eg&&(Ye(!0),clearTimeout(Rf))}}),Dd);Wb=setTimeout(function(){d()},1200);Ha(0,!0);return Re("scrolling from index to",{index:Gd,top:Ee,behavior:Ad},Xk.DEBUG),{top:Ee,behavior:Ad}})),$a),{scrollToIndex:Hb,topListHeight:fc}},Qi(xp,Rm,wp),{singleton:!0}),CH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},
Ws=Wh(function(a){var d=a[0],k=d.scrollContainerState;a=d.scrollTop;var K=d.viewportHeight,da=d.headerHeight,ja=d.footerHeight,qa=d.scrollBy;d=Pf(!1);var Ha=Pf(!0),Ra=Dg(),$a=Dg(),fb=Pf(4),jb=Pf(0),Kb=Pj(xf(Vp(xf(lh(a),am(1),cn(!0)),xf(lh(a),am(1),cn(!1),Gj(100))),Rh()),!1),Nb=Pj(xf(Vp(xf(qa,cn(!0)),xf(qa,cn(!1),Gj(200))),Rh()),!1);Jg(xf(rj(lh(a),lh(jb)),og(function(Hb){return Hb[0]<=Hb[1]}),Rh()),Ha);Jg(xf(Ha,ao(50)),$a);K=rk(xf(rj(k,lh(K),lh(da),lh(ja),lh(fb)),ck(function(Hb,fc){var qc,Wb,kc=fc[0],
hc=kc.scrollTop;kc=kc.scrollHeight;var Fc=fc[1],Mc={viewportHeight:Fc,scrollTop:hc,scrollHeight:kc};return hc+Fc-kc>-fc[4]?(hc>Hb.state.scrollTop?(qc="SCROLLED_DOWN",Wb=Hb.state.scrollTop-hc):(qc="SIZE_DECREASED",Wb=Hb.state.scrollTop-hc||Hb.scrollTopDelta),{atBottom:!0,state:Mc,atBottomBecause:qc,scrollTopDelta:Wb}):{atBottom:!1,notAtBottomBecause:Mc.scrollHeight>Hb.state.scrollHeight?"SIZE_INCREASED":Fc<Hb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":hc<Hb.state.scrollTop?"SCROLLING_UPWARDS":
"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Mc}},CH),Rh(function(Hb,fc){return Hb&&Hb.atBottom===fc.atBottom})));da=Pj(xf(k,ck(function(Hb,fc){var qc=fc.scrollTop,Wb=fc.scrollHeight;fc=fc.viewportHeight;return 1.01>Math.abs(Hb.scrollHeight-Wb)?{scrollTop:qc,scrollHeight:Wb,jump:0,changed:!1}:Hb.scrollTop!==qc&&1>Wb-(qc+fc)?{scrollHeight:Wb,scrollTop:qc,jump:Hb.scrollTop-qc,changed:!0}:{scrollHeight:Wb,scrollTop:qc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),kg(function(Hb){return Hb.changed}),
og(function(Hb){return Hb.jump})),0);Jg(xf(K,og(function(Hb){return Hb.atBottom})),d);Jg(xf(d,ao(50)),Ra);ja=Pf("down");Jg(xf(k,og(function(Hb){return Hb.scrollTop}),Rh(),ck(function(Hb,fc){return Nb(4)?{direction:Hb.direction,prevScrollTop:fc}:{direction:fc<Hb.prevScrollTop?"up":"down",prevScrollTop:fc}},{direction:"down",prevScrollTop:0}),og(function(Hb){return Hb.direction})),ja);Jg(xf(k,ao(50),cn("none")),ja);k=Pf(0);return Jg(xf(Kb,kg(function(Hb){return!Hb}),cn(0)),k),Jg(xf(a,ao(100),th(Kb),
kg(function(Hb){return!!Hb[1]}),ck(function(Hb,fc){return[Hb[1],fc[0]]},[0,0]),og(function(Hb){return Hb[1]-Hb[0]})),k),{isScrolling:Kb,isAtTop:Ha,isAtBottom:d,atBottomState:K,atTopStateChange:$a,atBottomStateChange:Ra,scrollDirection:ja,atBottomThreshold:fb,atTopThreshold:jb,scrollVelocity:k,lastJumpDueToItemResize:da}},Qi(Rm)),tq=Wh(function(a){var d=a[0].log;a=Pf(!1);var k=rk(xf(a,kg(function(K){return K}),Rh()));return fh(a,function(K){K&&d(4)("props updated",{},Xk.DEBUG)}),{propsReady:a,didMount:k}},
Qi(wp),{singleton:!0}),Qv=Wh(function(a){var d=a[0],k=d.sizes,K=d.listRefresh;d=d.defaultItemSize;var da=a[1].scrollTop,ja=a[2].scrollToIndex;a=a[3].didMount;var qa=Pf(!0),Ha=Pf(0);return Jg(xf(a,th(Ha),kg(function(Ra){return!!Ra[1]}),cn(!1)),qa),fh(xf(rj(K,a),th(qa,k,d),kg(function(Ra){var $a=Ra[1],fb=Ra[3];return Ra[0][1]&&(Ra[2].sizeTree!==ji||void 0!==fb)&&!$a}),th(Ha)),function(Ra){var $a=Ra[1];setTimeout(function(){Gm(da,function(){qa(0,!0)});ja(0,$a)})}),{scrolledToInitialItem:qa,initialTopMostItemIndex:Ha}},
Qi(xp,Rm,ju,tq),{singleton:!0}),DH=Wh(function(a){function d(fc){Ra(0,{index:"LAST",align:"end",behavior:fc})}function k(fc){var qc=Gm(Ha,function(Wb){!fc||Wb.atBottom||"SIZE_INCREASED"!==Wb.notAtBottomBecause||Hb||(jb(4)("scrolling to bottom due to increased size",{},Xk.DEBUG),d("auto"))});setTimeout(qc,100)}var K=a[0],da=K.totalCount,ja=K.listRefresh,qa=a[1];K=qa.isAtBottom;var Ha=qa.atBottomState,Ra=a[2].scrollToIndex;qa=a[3].scrolledToInitialItem;var $a=a[4],fb=$a.propsReady;$a=$a.didMount;var jb=
a[5].log;a=a[6].scrollingInProgress;var Kb=Pf(!1),Nb=Dg(),Hb=null;return fh(xf(rj(xf(lh(da),am(1)),$a),th(lh(Kb),K,qa,a),og(function(fc){var qc=fc[0],Wb=qc[0];qc=qc[1]&&fc[3];var kc="auto";qc&&(kc=fc[1],fc=fc[2]||fc[4],kc="function"==typeof kc?Xh(kc(fc)):fc&&Xh(kc),qc=qc&&!!kc);return{totalCount:Wb,shouldFollow:qc,followOutputBehavior:kc}}),kg(function(fc){return fc.shouldFollow})),function(fc){var qc=fc.totalCount,Wb=fc.followOutputBehavior;Hb&&(Hb(),Hb=null);Hb=Gm(ja,function(){jb(4)("following output to ",
{totalCount:qc},Xk.DEBUG);d(Wb);Hb=null})}),fh(xf(rj(lh(Kb),da,fb),kg(function(fc){return fc[0]&&fc[2]}),ck(function(fc,qc){qc=qc[1];return{refreshed:fc.value===qc,value:qc}},{refreshed:!1,value:0}),kg(function(fc){return fc.refreshed}),th(Kb,da)),function(fc){k(!1!==fc[1])}),fh(Nb,function(){k(!1!==Kb(4))}),fh(rj(lh(Kb),Ha),function(fc){var qc=fc[1];fc[0]&&!qc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===qc.notAtBottomBecause&&d("auto")}),{followOutput:Kb,autoscrollToBottom:Nb}},Qi(xp,Ws,ju,Qv,tq,wp,
Rm)),CC=Wh(function(a){var d=a[0],k=d.totalCount,K=d.groupIndices;d=d.sizes;var da=a[1];a=da.scrollTop;da=da.headerHeight;var ja=Dg(),qa=Dg(),Ha=rk(xf(ja,og(pi)));return Jg(xf(Ha,og(function(Ra){return Ra.totalCount})),k),Jg(xf(Ha,og(function(Ra){return Ra.groupIndices})),K),Jg(xf(rj(a,d,da),kg(function(Ra){return Ra[1].groupOffsetTree!==ji}),og(function(Ra){return ba(Ra[1].groupOffsetTree,Math.max(Ra[0]-Ra[2],0),"v")[0]}),Rh(),og(function(Ra){return[Ra]})),qa),{groupCounts:ja,topItemsIndexes:qa}},
Qi(xp,Rm)),py=Wh(function(a){var d=a[0];a=d.scrollTop;var k=d.viewportHeight,K=d.deviation,da=d.headerHeight,ja=d.fixedHeaderHeight;d=Dg();var qa=Pf(0),Ha=Pf(0),Ra=Pf(0);a=Pj(xf(rj(lh(a),lh(k),lh(da),lh(d,tj),lh(Ra),lh(qa),lh(ja),lh(K),lh(Ha)),og(function($a){var fb=$a[0],jb=$a[1],Kb=$a[2],Nb=$a[3],Hb=Nb[0];Nb=Nb[1];var fc=$a[4],qc=$a[6],Wb=$a[7],kc=$a[8],hc=fb-Wb;$a=$a[5]+qc;var Fc=Math.max(Kb-hc,0),Mc="none",ud="number"==typeof kc?kc:kc.top||0;kc="number"==typeof kc?kc:kc.bottom||0;return Hb-=Wb,
Nb+=Kb+qc,Hb+(Kb+qc)>fb+$a-ud&&(Mc="up"),Nb-Wb<fb-Fc+jb+kc&&(Mc="down"),"none"!==Mc?[Math.max(hc-Kb-xl(fc,"top",Mc)-ud,0),hc-Fc-qc+jb+xl(fc,"bottom",Mc)+kc]:null}),kg(function($a){return null!=$a}),Rh(tj)),[0,0]);return{listBoundary:d,overscan:Ra,topListHeight:qa,increaseViewportBy:Ha,visibleRange:a}},Qi(Rm),{singleton:!0}),DC={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},Sm=Wh(function(a){var d=a[0],k=d.sizes,K=d.totalCount,da=d.data,
ja=d.firstItemIndex,qa=d.gap,Ha=a[1],Ra=a[2],$a=Ra.visibleRange;d=Ra.listBoundary;Ra=Ra.topListHeight;var fb=a[3],jb=fb.scrolledToInitialItem,Kb=fb.initialTopMostItemIndex;fb=a[4].topListHeight;var Nb=a[5],Hb=a[6].didMount,fc=a[7].recalcInProgress;a=Pf([]);var qc=Dg();Jg(Ha.topItemsIndexes,a);k=Pj(xf(rj(Hb,fc,lh($a,tj),lh(K),lh(k),lh(Kb),jb,lh(a),lh(ja),lh(qa),da),kg(function(Wb){return Wb[0]&&!Wb[1]}),og(function(Wb){var kc=Wb[2],hc=kc[0],Fc=kc[1];kc=Wb[3];var Mc=Wb[5],ud=Wb[6],Jd=Wb[7],Qe=Wb[8],
Zd=Wb[9],Ee=Wb[10];Wb=Wb[4];var gf=Wb.sizeTree,Re=Wb.offsetTree;if(0===kc||0===hc&&0===Fc)return ah({},DC,{totalCount:kc});if(gf===ji)return Km(function(eg,df,Ag){return df.groupOffsetTree!==ji?(eg=xh(eg,df),[{index:ba(df.groupOffsetTree,eg)[0],size:0,offset:0},{index:eg,size:0,offset:0,data:Ag&&Ag[0]}]):[{index:eg,size:0,offset:0,data:Ag&&Ag[0]}]}("number"==typeof Mc?Mc:"LAST"===Mc.index?kc-1:Mc.index,Wb,Ee),[],kc,Zd,Wb,Qe);Mc=[];if(0<Jd.length){var cf,Gd=Jd[0],nd=Jd[Jd.length-1],Ad=0;for(gf=cm(Pc(gf,
Gd,nd));!(cf=gf()).done;){var id=cf.value;cf=id.value;var Dd=Math.min(id.end,nd);for(id=Math.max(id.start,Gd);id<=Dd;id++)Mc.push({index:id,size:cf,offset:Ad,data:Ee&&Ee[id]}),Ad+=cf}}if(!ud)return Km([],Mc,kc,Zd,Wb,Qe);var De=0<Jd.length?Jd[Jd.length-1]+1:0,Ye=function(eg,df,Ag,Bf){return void 0===Bf&&(Bf=0),0<Bf&&(df=Math.max(df,eg[Ce(eg,Bf,Ng)].offset)),wd((Yg=Ag,Lj=Ce(Og=eg,df,Bi=Qj),Tj=Ce(Og,Yg,Bi,Lj),Og.slice(Lj,Tj+1)),Bg);var Og,Yg,Bi,Lj,Tj}(Re,hc,Fc,De);if(0===Ye.length)return null;var Rf=
kc-1;return Km(Ti([],function(eg){for(var df,Ag=cm(Ye);!(df=Ag()).done;){var Bf=df.value,Og=Bf.value;df=Og.offset;var Yg=Bf.start,Bi=Og.size;Og.offset<hc&&(Og=(Yg+=Math.floor((hc-Og.offset+Zd)/(Bi+Zd)))-Bf.start,df+=Og*Bi+Og*Zd);Yg<De&&(df+=(De-Yg)*Bi,Yg=De);for(Bf=Math.min(Bf.end,Rf);Yg<=Bf&&!(df>=Fc);Yg++)eg.push({index:Yg,size:Bi,offset:df,data:Ee&&Ee[Yg]}),df+=Bi+Zd}}),Mc,kc,Zd,Wb,Qe)}),kg(function(Wb){return null!==Wb}),Rh()),DC);return Jg(xf(da,kg(function(Wb){return void 0!==Wb}),og(function(Wb){return Wb.length})),
K),Jg(xf(k,og(function(Wb){return Wb.topListHeight})),fb),Jg(fb,Ra),Jg(xf(k,og(function(Wb){return[Wb.top,Wb.bottom]})),d),Jg(xf(k,og(function(Wb){return Wb.items})),qc),ah({listState:k,topItemsIndexes:a,endReached:rk(xf(k,kg(function(Wb){return 0<Wb.items.length}),th(K,da),kg(function(Wb){var kc=Wb[0].items;return kc[kc.length-1].originalIndex===Wb[1]-1}),og(function(Wb){return[Wb[1]-1,Wb[2]]}),Rh(tj),og(function(Wb){return Wb[0]}))),startReached:rk(xf(k,ao(200),kg(function(Wb){var kc=Wb.items;return 0<
kc.length&&kc[0].originalIndex===Wb.topItems.length}),og(function(Wb){return Wb.items[0].index}),Rh())),rangeChanged:rk(xf(k,kg(function(Wb){return 0<Wb.items.length}),og(function(Wb){Wb=Wb.items;for(var kc=0,hc=Wb.length-1;"group"===Wb[kc].type&&kc<hc;)kc++;for(;"group"===Wb[hc].type&&hc>kc;)hc--;return{startIndex:Wb[kc].index,endIndex:Wb[hc].index}}),Rh(Ck))),itemsRendered:qc},Nb)},Qi(xp,CC,py,Qv,ju,Ws,tq,oy),{singleton:!0}),qy=Wh(function(a){var d=a[0],k=d.sizes,K=d.firstItemIndex,da=d.data;d=
d.gap;var ja=a[1].listState;a=a[2].didMount;var qa=Pf(0);return Jg(xf(a,th(qa),kg(function(Ha){return 0!==Ha[1]}),th(k,K,d,da),og(function(Ha){var Ra=Ha[0][1],$a=Ha[1],fb=Ha[2],jb=Ha[3];Ha=Ha[4];var Kb=void 0===Ha?[]:Ha;Ha=0;if(0<$a.groupIndices.length)for(var Nb,Hb=cm($a.groupIndices);!((Nb=Hb()).done||Nb.value-Ha>=Ra);)Ha++;Ra+=Ha;return Km(Array.from({length:Ra}).map(function(fc,qc){return{index:qc,size:0,offset:0,data:Kb[qc]}}),[],Ra,jb,$a,fb)})),ja),{initialItemCount:qa}},Qi(xp,Sm,tq),{singleton:!0}),
ku=Wh(function(a){a=a[0].scrollVelocity;var d=Pf(!1),k=Dg(),K=Pf(!1);return Jg(xf(a,th(K,d,k),kg(function(da){return!!da[1]}),og(function(da){var ja=da[0],qa=da[1],Ha=da[2];da=da[3];var Ra=qa.enter;if(Ha){if((0,qa.exit)(ja,da))return!1}else if(Ra(ja,da))return!0;return Ha}),Rh()),d),fh(xf(rj(d,a,k),th(K)),function(da){var ja=da[0];da=da[1];return ja[0]&&da&&da.change&&da.change(ja[1],ja[2])}),{isSeeking:d,scrollSeekConfiguration:K,scrollVelocity:a,scrollSeekRangeChanged:k}},Qi(Ws),{singleton:!0}),
Rv=Wh(function(a){a=a[0].topItemsIndexes;var d=Pf(0);return Jg(xf(d,kg(function(k){return 0<k}),og(function(k){return Array.from({length:k}).map(function(K,da){return da})})),a),{topItemCount:d}},Qi(Sm)),lu=Wh(function(a){var d=a[0],k=d.footerHeight,K=d.headerHeight,da=d.fixedHeaderHeight;d=d.fixedFooterHeight;var ja=a[1].listState;a=Dg();k=Pj(xf(rj(k,d,K,da,ja),og(function(qa){var Ha=qa[4];return qa[0]+qa[1]+qa[2]+qa[3]+Ha.offsetBottom+Ha.bottom})),0);return Jg(lh(k),a),{totalListHeight:k,totalListHeightChanged:a}},
Qi(Rm,Sm),{singleton:!0}),EC=Lm(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),ry=Wh(function(a){function d(qc){0<qc?(K(0,{top:-qc,behavior:"auto"}),ja(0,0)):(ja(0,0),K(0,{top:-qc,behavior:"auto"}))}var k=a[0],K=k.scrollBy,da=k.scrollTop,ja=k.deviation,qa=k.scrollingInProgress,Ha=a[1];k=Ha.isScrolling;var Ra=Ha.isAtBottom,$a=Ha.scrollDirection,fb=a[3],jb=fb.beforeUnshiftWith,Kb=fb.shiftWithOffset,Nb=fb.sizes;fb=fb.gap;var Hb=a[4].log,fc=a[5].recalcInProgress;
a=rk(xf(a[2].listState,th(Ha.lastJumpDueToItemResize),ck(function(qc,Wb){var kc=qc[1],hc=Wb[0],Fc=hc.items,Mc=hc.totalCount;hc=hc.bottom+hc.offsetBottom;var ud=0;return qc[2]===Mc&&0<kc.length&&0<Fc.length&&(0===Fc[0].originalIndex&&0===kc[0].originalIndex||0!=(ud=hc-qc[3])&&(ud+=Wb[1])),[ud,Fc,Mc,hc]},[0,[],0,0]),kg(function(qc){return 0!==qc[0]}),th(da,$a,qa,Ra,Hb),kg(function(qc){return!qc[3]&&0!==qc[1]&&"up"===qc[2]}),og(function(qc){var Wb=qc[0][0];return(0,qc[5])("Upward scrolling compensation",
{amount:Wb},Xk.DEBUG),Wb})));return fh(xf(a,th(ja,k)),function(qc){var Wb=qc[0],kc=qc[1];qc[2]&&EC()?ja(0,kc-Wb):d(-Wb)}),fh(xf(rj(Pj(k,!1),ja,fc),kg(function(qc){return!qc[0]&&!qc[2]&&0!==qc[1]}),og(function(qc){return qc[1]}),ao(1)),d),Jg(xf(Kb,og(function(qc){return{top:-qc}})),K),fh(xf(jb,th(Nb,fb),og(function(qc){var Wb=qc[0];return Wb*qc[1].lastSize+Wb*qc[2]})),function(qc){ja(0,qc);requestAnimationFrame(function(){ds(K,{top:qc});requestAnimationFrame(function(){ja(0,0);fc(0,!1)})})}),{deviation:ja}},
Qi(Rm,Ws,Sm,xp,wp,oy)),sy=Wh(function(a){var d=a[0].totalListHeight,k=a[1].didMount,K=a[2].scrollTo;a=Pf(0);return fh(xf(k,th(a),kg(function(da){return 0!==da[1]}),og(function(da){return{top:da[1]}})),function(da){Gm(xf(d,kg(function(ja){return 0!==ja})),function(){setTimeout(function(){K(0,da)})})}),{initialScrollTop:a}},Qi(lu,tq,Rm),{singleton:!0}),Dr=Wh(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var k=Pf(!1);return{alignToBottom:k,paddingTopAddition:Pj(xf(rj(k,d,a),kg(function(K){return K[0]}),
og(function(K){return Math.max(0,K[1]-K[2])}),Rh()),0)}},Qi(Rm,lu),{singleton:!0}),yp=Wh(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var k=Dg(),K=Dg(),da=Dg(),ja=Pf(!1),qa=Pf(void 0);return Jg(xf(rj(k,K),og(function(Ha){var Ra=Ha[0];return{scrollTop:Math.max(0,Ra.scrollTop-Ha[1].offsetTop),scrollHeight:Ra.scrollHeight,viewportHeight:Ra.viewportHeight}})),d),Jg(xf(a,th(K),og(function(Ha){var Ra=Ha[0];return ah({},Ra,{top:Ra.top+Ha[1].offsetTop})})),da),{useWindowScroll:ja,customScrollParent:qa,
windowScrollContainerState:k,windowViewportRect:K,windowScrollTo:da}},Qi(Rm)),ty=["done","behavior","align"],FC=Wh(function(a){var d=a[0],k=d.sizes,K=d.totalCount;d=d.gap;var da=a[1],ja=da.scrollTop,qa=da.viewportHeight,Ha=da.headerHeight,Ra=da.fixedHeaderHeight,$a=da.fixedFooterHeight,fb=da.scrollingInProgress;a=a[2].scrollToIndex;da=Dg();return Jg(xf(da,th(k,qa,K,Ha,Ra,$a,ja),th(d),og(function(jb){var Kb=jb[0],Nb=Kb[0],Hb=Kb[1],fc=Kb[2],qc=Kb[3],Wb=Kb[4],kc=Kb[5],hc=Kb[6];Kb=Kb[7];var Fc=jb[1];
jb=Nb.done;var Mc=Nb.behavior,ud=Nb.align,Jd=bm(Nb,ty),Qe=null;Nb=zi(Nb,Hb,qc-1);Wb=Sh(Nb,Hb.offsetTree,Fc)+Wb+kc;return Wb<Kb+kc?Qe=ah({},Jd,{behavior:Mc,align:null!=ud?ud:"start"}):Wb+ba(Hb.sizeTree,Nb)[1]>Kb+fc-hc&&(Qe=ah({},Jd,{behavior:Mc,align:null!=ud?ud:"end"})),Qe?jb&&Gm(xf(fb,am(1),kg(function(Zd){return!1===Zd})),jb):jb&&jb(),Qe}),kg(function(jb){return null!==jb})),a),{scrollIntoView:da}},Qi(xp,Rm,ju,Sm,wp),{singleton:!0}),mu=["listState","topItemsIndexes"],EH=Wh(function(a){return ah({},
a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},Qi(py,qy,tq,ku,lu,sy,Dr,yp,FC)),uy=Wh(function(a){var d=a[0],k=d.totalCount,K=d.sizeRanges,da=d.fixedItemSize,ja=d.defaultItemSize,qa=d.trackItemSizes,Ha=d.itemSize,Ra=d.data,$a=d.firstItemIndex,fb=d.groupIndices,jb=d.statefulTotalCount;d=d.gap;var Kb=a[1],Nb=Kb.initialTopMostItemIndex;Kb=Kb.scrolledToInitialItem;var Hb=a[2],fc=a[3],qc=a[4],Wb=qc.listState,kc=qc.topItemsIndexes;qc=bm(qc,mu);var hc=a[5].scrollToIndex,Fc=a[7].topItemCount,Mc=a[8].groupCounts,
ud=a[9];a=a[10];return Jg(qc.rangeChanged,ud.scrollSeekRangeChanged),Jg(xf(ud.windowViewportRect,og(function(Jd){return Jd.visibleHeight})),Hb.viewportHeight),ah({totalCount:k,data:Ra,firstItemIndex:$a,sizeRanges:K,initialTopMostItemIndex:Nb,scrolledToInitialItem:Kb,topItemsIndexes:kc,topItemCount:Fc,groupCounts:Mc,fixedItemHeight:da,defaultItemHeight:ja,gap:d},fc,{statefulTotalCount:jb,listState:Wb,scrollToIndex:hc,trackItemSizes:qa,itemSize:Ha,groupIndices:fb},qc,ud,Hb,a)},Qi(xp,Qv,Rm,DH,Sm,ju,
ry,Rv,CC,EH,wp)),ko=Lm(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),nu=Vg.createContext(void 0),Sv=Vg.createContext(void 0),GC=["placeholder"],HC=["style","children"],Tv=["style","children"],IC=Wh(function(){var a=Pf(function(Ra){return"Item "+Ra}),d=Pf(null),k=Pf(function(Ra){return"Group "+Ra}),K=Pf({}),da=Pf(tt),ja=Pf("div"),qa=Pf(fi),Ha=function(Ra,
$a){return void 0===$a&&($a=null),Pj(xf(K,og(function(fb){return fb[Ra]}),Rh()),$a)};return{context:d,itemContent:a,groupContent:k,components:K,computeItemKey:da,headerFooterTag:ja,scrollerRef:qa,FooterComponent:Ha("Footer"),HeaderComponent:Ha("Header"),TopItemListComponent:Ha("TopItemList"),ListComponent:Ha("List","div"),ItemComponent:Ha("Item","div"),GroupComponent:Ha("Group","div"),ScrollerComponent:Ha("Scroller","div"),EmptyPlaceholder:Ha("EmptyPlaceholder"),ScrollSeekPlaceholder:Ha("ScrollSeekPlaceholder")}}),
wm=Wh(function(a){function d(da,ja,qa){Jg(xf(da,th(K.components),og(function(Ha){var Ra,$a=Ha[0];Ha=Ha[1];return console.warn("react-virtuoso: "+qa+" property is deprecated. Pass components."+ja+" instead."),ah({},Ha,((Ra={})[ja]=$a,Ra))})),K.components)}var k=a[0],K=a[1];a={item:pm(K.itemContent,"Rename the %citem%c prop to %citemContent."),group:pm(K.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:pm(k.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:pm(k.fixedItemHeight,
"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:pm(k.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Dg(),maxHeightCacheSize:Dg(),footer:Dg(),header:Dg(),HeaderContainer:Dg(),FooterContainer:Dg(),ItemContainer:Dg(),ScrollContainer:Dg(),GroupContainer:Dg(),ListContainer:Dg(),emptyComponent:Dg(),scrollSeek:Dg()};return fh(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.",
"color: red;","color: inherit;","color: blue;")}),fh(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),fh(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),fh(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),
fh(a.scrollSeek,function(da){var ja=da.placeholder;da=bm(da,GC);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ja=ah({},(0,K.components)(4),{ScrollSeekPlaceholder:ja});(0,K.components)(0,ja);(0,k.scrollSeekConfiguration)(0,da)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,
"Scroller","ScrollContainer"),d(a.emptyComponent,"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),ah({},k,K,a)},Qi(uy,IC)),FH=function(a){return Vg.createElement("div",{style:{height:a.height}})},ou={position:ko(),zIndex:1,overflowAnchor:"none"},GH={overflowAnchor:"none"},JC=Vg.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=Nh("listState"),k=Ch("sizeRanges"),K=Nh("useWindowScroll"),da=Nh("customScrollParent"),ja=Ch("windowScrollContainerState"),qa=Ch("scrollContainerState");
K=da||K?ja:qa;var Ha=Nh("itemContent"),Ra=Nh("context"),$a=Nh("groupContent");ja=Nh("trackItemSizes");qa=Nh("itemSize");var fb=Nh("log"),jb=Ch("gap");k=ni(k,qa,ja,a?fi:K,fb,jb,da).callbackRef;da=Vg.useState(0);var Kb=da[0],Nb=da[1];Er("deviation",function(Fc){Kb!==Fc&&Nb(Fc)});da=Nh("EmptyPlaceholder");var Hb=Nh("ScrollSeekPlaceholder")||FH;K=Nh("ListComponent");var fc=Nh("ItemComponent"),qc=Nh("GroupComponent"),Wb=Nh("computeItemKey"),kc=Nh("isSeeking"),hc=0<Nh("groupIndices").length;ja=Nh("paddingTopAddition");
ja=a?{}:{boxSizing:"border-box",paddingTop:d.offsetTop+ja,paddingBottom:d.offsetBottom,marginTop:Kb};return!a&&0===d.totalCount&&da?(0,Jh.createElement)(da,dk(da,Ra)):(0,Jh.createElement)(K,ah({},dk(K,Ra),{ref:k,style:ja,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function(Fc){var Mc=Fc.originalIndex,ud=Wb(Mc+d.firstItemIndex,Fc.data,Ra);return kc?(0,Jh.createElement)(Hb,ah({},dk(Hb,Ra),{key:ud,index:Fc.index,height:Fc.size,type:Fc.type||"item"},"group"===
Fc.type?{}:{groupIndex:Fc.groupIndex})):"group"===Fc.type?(0,Jh.createElement)(qc,ah({},dk(qc,Ra),{key:ud,"data-index":Mc,"data-known-size":Fc.size,"data-item-index":Fc.index,style:ou}),$a(Fc.index)):(0,Jh.createElement)(fc,ah({},dk(fc,Ra),{key:ud,"data-index":Mc,"data-known-size":Fc.size,"data-item-index":Fc.index,"data-item-group-index":Fc.groupIndex,style:GH}),hc?Ha(Fc.index,Fc.groupIndex,Fc.data,Ra):Ha(Fc.index,Fc.data,Ra))}))}),KC={height:"100%",outline:"none",overflowY:"auto",position:"relative",
WebkitOverflowScrolling:"touch"},zp={width:"100%",height:"100%",position:"absolute",top:0},Uv={width:"100%",position:ko(),top:0},HH=Vg.memo(function(){var a=Nh("HeaderComponent"),d=Ch("headerHeight"),k=Nh("headerFooterTag"),K=gj(function(ja){return d(hi(ja,"height"))}),da=Nh("context");return a?(0,Jh.createElement)(k,{ref:K},(0,Jh.createElement)(a,dk(a,da))):null}),LC=Vg.memo(function(){var a=Nh("FooterComponent"),d=Ch("footerHeight"),k=Nh("headerFooterTag"),K=gj(function(ja){return d(hi(ja,"height"))}),
da=Nh("context");return a?(0,Jh.createElement)(k,{ref:K},(0,Jh.createElement)(a,dk(a,da))):null}),MC=function(a){a=a.children;var d=(0,Jh.useContext)(nu),k=Ch("viewportHeight"),K=Ch("fixedItemHeight"),da=gj(Xn(k,function(ja){return hi(ja,"height")}));return Vg.useEffect(function(){d&&(k(d.viewportHeight),K(d.itemHeight))},[d,k,K]),Vg.createElement("div",{style:zp,ref:da,"data-viewport-type":"element"},a)},NC=function(a){a=a.children;var d=(0,Jh.useContext)(nu),k=Ch("windowViewportRect"),K=Ch("fixedItemHeight"),
da=Nh("customScrollParent");da=oh(k,da);return Vg.useEffect(function(){d&&(K(d.itemHeight),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,k,K]),Vg.createElement("div",{ref:da,style:zp,"data-viewport-type":"window"},a)},vy=function(a){a=a.children;var d=Nh("TopItemListComponent"),k=Nh("headerHeight");k=ah({},Uv,{marginTop:k+"px"});var K=Nh("context");return(0,Jh.createElement)(d||"div",{style:k,context:K},a)},Xs=sj(wm,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Vg.memo(function(a){var d=Nh("useWindowScroll"),k=0<Nh("topItemsIndexes").length,K=Nh("customScrollParent"),da=K||d?NC:MC;return Vg.createElement(K||d?Tm:Vv,ah({},a),Vg.createElement(da,null,Vg.createElement(HH,null),Vg.createElement(JC,null),Vg.createElement(LC,
null)),k&&Vg.createElement(vy,null,Vg.createElement(JC,{showTopList:!0})))})),So=Xs.Component,Ch=Xs.usePublisher,Nh=Xs.useEmitterValue,Er=Xs.useEmitter,Vv=hs({usePublisher:Ch,useEmitterValue:Nh,useEmitter:Er}),Tm=hr({usePublisher:Ch,useEmitterValue:Nh,useEmitter:Er}),wy={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},xy={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},yy=Math.round,OC=Math.ceil,Ai=Math.floor,uq=Math.min,To=Math.max,
IH=Wh(function(a){var d=a[0],k=d.overscan,K=d.visibleRange,da=d.listBoundary,ja=a[1];d=ja.scrollTop;var qa=ja.viewportHeight,Ha=ja.scrollBy,Ra=ja.scrollTo,$a=ja.smoothScrollTargetReached,fb=ja.scrollContainerState,jb=ja.footerHeight;ja=ja.headerHeight;var Kb=a[2],Nb=a[3],Hb=a[4],fc=Hb.propsReady,qc=Hb.didMount,Wb=a[5];Hb=Wb.windowViewportRect;var kc=Wb.windowScrollTo,hc=Wb.useWindowScroll,Fc=Wb.customScrollParent;Wb=Wb.windowScrollContainerState;a=a[6];var Mc=Pf(0),ud=Pf(0),Jd=Pf(wy),Qe=Pf({height:0,
width:0}),Zd=Pf({height:0,width:0}),Ee=Dg(),gf=Dg(),Re=Pf(0),cf=Pf(void 0),Gd=Pf({row:0,column:0});Jg(xf(rj(qc,ud,cf),kg(function(nd){return 0!==nd[1]}),og(function(nd){return{items:is(0,nd[1]-1,nd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Jd);Jg(xf(rj(lh(Mc),K,lh(Gd,Yp),lh(Zd,function(nd,Ad){return nd&&nd.width===Ad.width&&nd.height===Ad.height}),cf),th(Qe),og(function(nd){var Ad=nd[0],id=Ad[0],Dd=Ad[1],De=Dd[0],Ye=Dd[1],Rf=Ad[2],eg=Ad[3],df=Ad[4],Ag=nd[1];nd=Rf.row;
var Bf=Rf.column;Ad=eg.height;Dd=eg.width;var Og=Ag.width;if(0===id||0===Og)return wy;if(0===Dd)return ah({},xy,{items:is(0,0,df)});Bf=To(1,Ai((Og+Bf)/(Dd+Bf)));De=Bf*Ai((De+nd)/(Ad+nd));Ye=Bf*OC((Ye+nd)/(Ad+nd))-1;Ye=uq(id-1,To(Ye,Bf-1));De=is(uq(Ye,To(0,De)),Ye,df);eg=Ku(Ag,Rf,eg,De);Rf=eg.top;eg=eg.bottom;id=OC(id/Bf);return{items:De,offsetTop:Rf,offsetBottom:id*Ad+(id-1)*nd-eg,top:Rf,bottom:eg,itemHeight:Ad,itemWidth:Dd}})),Jd);Jg(xf(cf,kg(function(nd){return void 0!==nd}),og(function(nd){return nd.length})),
Mc);Jg(xf(Qe,og(function(nd){return nd.height})),qa);Jg(xf(rj(Qe,Zd,Jd,Gd),og(function(nd){nd=Ku(nd[0],nd[3],nd[1],nd[2].items);return[nd.top,nd.bottom]}),Rh(tj)),da);K=rk(xf(lh(Jd),kg(function(nd){return 0<nd.items.length}),th(Mc),kg(function(nd){var Ad=nd[0].items;return Ad[Ad.length-1].index===nd[1]-1}),og(function(nd){return nd[1]-1}),Rh()));da=rk(xf(lh(Jd),kg(function(nd){nd=nd.items;return 0<nd.length&&0===nd[0].index}),cn(0),Rh()));qa=rk(xf(lh(Jd),kg(function(nd){return 0<nd.items.length}),
og(function(nd){nd=nd.items;return{startIndex:nd[0].index,endIndex:nd[nd.length-1].index}}),Rh(Ck)));Jg(qa,Nb.scrollSeekRangeChanged);Jg(xf(Ee,th(Qe,Zd,Mc,Gd),og(function(nd){var Ad=nd[1],id=nd[2],Dd=nd[3],De=nd[4],Ye=Th(nd[0]);nd=Ye.align;var Rf=Ye.behavior,eg=Ye.offset;Ye=Ye.index;"LAST"===Ye&&(Ye=Dd-1);Dd=ut(Ad,De,id,To(0,Ye,uq(Dd-1,Ye)));return"end"===nd?Dd=yy(Dd-Ad.height+id.height):"center"===nd&&(Dd=yy(Dd-Ad.height/2+id.height/2)),eg&&(Dd+=eg),{top:Dd,behavior:Rf}})),Ra);qc=Pj(xf(Jd,og(function(nd){return nd.offsetBottom+
nd.bottom})),0);return Jg(xf(Hb,og(function(nd){return{width:nd.visibleWidth,height:nd.visibleHeight}})),Qe),ah({data:cf,totalCount:Mc,viewportDimensions:Qe,itemDimensions:Zd,scrollTop:d,scrollHeight:gf,overscan:k,scrollBy:Ha,scrollTo:Ra,scrollToIndex:Ee,smoothScrollTargetReached:$a,windowViewportRect:Hb,windowScrollTo:kc,useWindowScroll:hc,customScrollParent:Fc,windowScrollContainerState:Wb,deviation:Re,scrollContainerState:fb,footerHeight:jb,headerHeight:ja,initialItemCount:ud,gap:Gd},Nb,{gridState:Jd,
totalListHeight:qc},Kb,{startReached:da,endReached:K,rangeChanged:qa,propsReady:fc},a)},Qi(py,Rm,Ws,ku,tq,yp,wp)),wj=["placeholder"],Fr=Wh(function(){var a=Pf(function($a){return"Item "+$a}),d=Pf({}),k=Pf(null),K=Pf("virtuoso-grid-item"),da=Pf("virtuoso-grid-list"),ja=Pf(tt),qa=Pf("div"),Ha=Pf(fi),Ra=function($a,fb){return void 0===fb&&(fb=null),Pj(xf(d,og(function(jb){return jb[$a]}),Rh()),fb)};return{context:k,itemContent:a,components:d,computeItemKey:ja,itemClassName:K,listClassName:da,headerFooterTag:qa,
scrollerRef:Ha,FooterComponent:Ra("Footer"),HeaderComponent:Ra("Header"),ListComponent:Ra("List","div"),ItemComponent:Ra("Item","div"),ScrollerComponent:Ra("Scroller","div"),ScrollSeekPlaceholder:Ra("ScrollSeekPlaceholder","div")}}),PC=Wh(function(a){function d(da,ja,qa){Jg(xf(da,th(K.components),og(function(Ha){var Ra,$a=Ha[0];Ha=Ha[1];return console.warn("react-virtuoso: "+qa+" property is deprecated. Pass components."+ja+" instead."),ah({},Ha,((Ra={})[ja]=$a,Ra))})),K.components)}var k=a[0],K=
a[1];a={item:pm(K.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Dg(),ScrollContainer:Dg(),ListContainer:Dg(),emptyComponent:Dg(),scrollSeek:Dg()};return fh(a.scrollSeek,function(da){var ja=da.placeholder;da=bm(da,wj);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ja=ah({},(0,K.components)(4),{ScrollSeekPlaceholder:ja});(0,K.components)(0,ja);(0,k.scrollSeekConfiguration)(0,
da)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),ah({},k,K,a)},Qi(IH,Fr)),QC=Vg.memo(function(){var a=ik("gridState"),d=ik("listClassName"),k=ik("itemClassName"),K=ik("itemContent"),da=ik("computeItemKey"),ja=ik("isSeeking"),qa=mn("scrollHeight"),Ha=ik("ItemComponent"),Ra=ik("ListComponent"),$a=ik("ScrollSeekPlaceholder"),fb=ik("context"),jb=mn("itemDimensions"),Kb=mn("gap"),Nb=ik("log"),Hb=gj(function(fc){qa(fc.parentElement.parentElement.scrollHeight);
var qc=fc.firstChild;qc&&jb(qc.getBoundingClientRect());Kb({row:Lu("row-gap",getComputedStyle(fc).rowGap,Nb),column:Lu("column-gap",getComputedStyle(fc).columnGap,Nb)})});return(0,Jh.createElement)(Ra,ah({ref:Hb,className:d},dk(Ra,fb),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(fc){var qc=da(fc.index,fc.data,fb);return ja?(0,Jh.createElement)($a,ah({key:qc},dk($a,fb),{index:fc.index,height:a.itemHeight,width:a.itemWidth})):(0,Jh.createElement)(Ha,ah({},dk(Ha,
fb),{className:k,"data-index":fc.index,key:qc}),K(fc.index,fc.data,fb))}))}),Qg=Vg.memo(function(){var a=ik("HeaderComponent"),d=mn("headerHeight"),k=ik("headerFooterTag"),K=gj(function(ja){return d(hi(ja,"height"))}),da=ik("context");return a?(0,Jh.createElement)(k,{ref:K},(0,Jh.createElement)(a,dk(a,da))):null}),Wv=Vg.memo(function(){var a=ik("FooterComponent"),d=mn("footerHeight"),k=ik("headerFooterTag"),K=gj(function(ja){return d(hi(ja,"height"))}),da=ik("context");return a?(0,Jh.createElement)(k,
{ref:K},(0,Jh.createElement)(a,dk(a,da))):null}),Nn=function(a){a=a.children;var d=(0,Jh.useContext)(Sv),k=mn("itemDimensions"),K=mn("viewportDimensions"),da=gj(function(ja){K(ja.getBoundingClientRect())});return Vg.useEffect(function(){d&&(K({height:d.viewportHeight,width:d.viewportWidth}),k({height:d.itemHeight,width:d.itemWidth}))},[d,K,k]),Vg.createElement("div",{style:zp,ref:da},a)},Gr=function(a){a=a.children;var d=(0,Jh.useContext)(Sv),k=mn("windowViewportRect"),K=mn("itemDimensions"),da=ik("customScrollParent");
da=oh(k,da);return Vg.useEffect(function(){d&&(K({height:d.itemHeight,width:d.itemWidth}),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,k,K]),Vg.createElement("div",{ref:da,style:zp},a)},Hr=sj(PC,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},Vg.memo(function(a){a=ah({},a);var d=ik("useWindowScroll"),k=ik("customScrollParent"),K=k||d?Gr:Nn;return Vg.createElement(k||d?Ys:Xv,ah({},a),Vg.createElement(K,null,Vg.createElement(Qg,null),Vg.createElement(QC,null),Vg.createElement(Wv,null)))})),mn=Hr.usePublisher,ik=Hr.useEmitterValue,Ir=Hr.useEmitter,Xv=hs({usePublisher:mn,useEmitterValue:ik,useEmitter:Ir}),Ys=hr({usePublisher:mn,useEmitterValue:ik,useEmitter:Ir}),RC=Wh(function(){var a=Pf(function(Ra){return Vg.createElement("td",
null,"Item $",Ra)}),d=Pf(null),k=Pf(null),K=Pf(null),da=Pf({}),ja=Pf(tt),qa=Pf(fi),Ha=function(Ra,$a){return void 0===$a&&($a=null),Pj(xf(da,og(function(fb){return fb[Ra]}),Rh()),$a)};return{context:d,itemContent:a,fixedHeaderContent:k,fixedFooterContent:K,components:da,computeItemKey:ja,scrollerRef:qa,TableComponent:Ha("Table","table"),TableHeadComponent:Ha("TableHead","thead"),TableFooterComponent:Ha("TableFoot","tfoot"),TableBodyComponent:Ha("TableBody","tbody"),TableRowComponent:Ha("TableRow",
"tr"),ScrollerComponent:Ha("Scroller","div"),EmptyPlaceholder:Ha("EmptyPlaceholder"),ScrollSeekPlaceholder:Ha("ScrollSeekPlaceholder"),FillerRow:Ha("FillerRow")}}),SC=Wh(function(a){return ah({},a[0],a[1])},Qi(uy,RC)),xm=function(a){return Vg.createElement("tr",null,Vg.createElement("td",{style:{height:a.height}}))},Yv=function(a){return Vg.createElement("tr",null,Vg.createElement("td",{style:{height:a.height,padding:0,border:0}}))},zy=Vg.memo(function(){var a=Yi("listState"),d=On("sizeRanges"),k=
Yi("useWindowScroll"),K=Yi("customScrollParent"),da=On("windowScrollContainerState"),ja=On("scrollContainerState");k=K||k?da:ja;var qa=Yi("itemContent");da=Yi("trackItemSizes");K=ni(d,Yi("itemSize"),da,k,Yi("log"),void 0,K);d=K.callbackRef;var Ha=K.ref;K=Vg.useState(0);var Ra=K[0],$a=K[1];$v("deviation",function(Wb){Ra!==Wb&&(Ha.current.style.marginTop=Wb+"px",$a(Wb))});da=Yi("EmptyPlaceholder");var fb=Yi("ScrollSeekPlaceholder")||xm;k=Yi("FillerRow")||Yv;K=Yi("TableBodyComponent");var jb=Yi("TableRowComponent"),
Kb=Yi("computeItemKey"),Nb=Yi("isSeeking");ja=Yi("paddingTopAddition");var Hb=Yi("firstItemIndex"),fc=Yi("statefulTotalCount"),qc=Yi("context");if(0===fc&&da)return(0,Jh.createElement)(da,dk(da,qc));da=a.offsetTop+ja+Ra;ja=a.offsetBottom;da=0<da?Vg.createElement(k,{height:da,key:"padding-top"}):null;k=0<ja?Vg.createElement(k,{height:ja,key:"padding-bottom"}):null;a=a.items.map(function(Wb){var kc=Wb.originalIndex,hc=Kb(kc+Hb,Wb.data,qc);return Nb?(0,Jh.createElement)(fb,ah({},dk(fb,qc),{key:hc,index:Wb.index,
height:Wb.size,type:Wb.type||"item"})):(0,Jh.createElement)(jb,ah({},dk(jb,qc),{key:hc,"data-index":kc,"data-known-size":Wb.size,"data-item-index":Wb.index,style:{overflowAnchor:"none"}}),qa(Wb.index,Wb.data,qc))});return(0,Jh.createElement)(K,ah({ref:d,"data-test-id":"virtuoso-item-list"},dk(K,qc)),[da].concat(a,[k]))}),Ay=function(a){a=a.children;var d=(0,Jh.useContext)(nu),k=On("viewportHeight"),K=On("fixedItemHeight"),da=gj(Xn(k,function(ja){return hi(ja,"height")}));return Vg.useEffect(function(){d&&
(k(d.viewportHeight),K(d.itemHeight))},[d,k,K]),Vg.createElement("div",{style:zp,ref:da,"data-viewport-type":"element"},a)},TC=function(a){a=a.children;var d=(0,Jh.useContext)(nu),k=On("windowViewportRect"),K=On("fixedItemHeight"),da=Yi("customScrollParent");da=oh(k,da);return Vg.useEffect(function(){d&&(K(d.itemHeight),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,k,K]),Vg.createElement("div",{ref:da,style:zp,"data-viewport-type":"window"},a)},Zv=sj(SC,{required:{},optional:{context:"context",
followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",
fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},
events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Vg.memo(function(a){var d=Yi("useWindowScroll"),k=Yi("customScrollParent"),K=On("fixedHeaderHeight"),da=On("fixedFooterHeight"),ja=Yi("fixedHeaderContent"),qa=Yi("fixedFooterContent"),Ha=Yi("context");
K=gj(Xn(K,function(jb){return hi(jb,"height")}));var Ra=gj(Xn(da,function(jb){return hi(jb,"height")}));da=k||d?vq:pu;d=k||d?TC:Ay;k=Yi("TableComponent");var $a=Yi("TableHeadComponent"),fb=Yi("TableFooterComponent");ja=ja?Vg.createElement($a,ah({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:K},dk($a,Ha)),ja()):null;qa=qa?Vg.createElement(fb,ah({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Ra},dk(fb,Ha)),qa()):null;return Vg.createElement(da,ah({},a),Vg.createElement(d,
null,Vg.createElement(k,ah({style:{borderSpacing:0}},dk(k,Ha)),[ja,Vg.createElement(zy,{key:"TableBody"}),qa])))})),On=Zv.usePublisher,Yi=Zv.useEmitterValue,$v=Zv.useEmitter,pu=hs({usePublisher:On,useEmitterValue:Yi,useEmitter:$v}),vq=hr({usePublisher:On,useEmitterValue:Yi,useEmitter:$v}),aw=Jf(ca(19)),lo=function(a){function d(k){k=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+k+" for more information.")||this;if(void 0===
k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}js(d,a);return d}(xt(Error)),By={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",
floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",
lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",
mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",
sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Cy=/^#[a-fA-F0-9]{6}$/,nn=/^#[a-fA-F0-9]{8}$/,qu=/^#[a-fA-F0-9]{3}$/,ll=/^#[a-fA-F0-9]{4}$/,Zs=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,
ru=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Pn=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,Si=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Jr=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},wq=zt(At,At.length,[]),Dy=
ca(588),Qn=Jf(ca(19)),ym=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const k=a.ownerDocument,K=k.activeElement;K!==a&&a.focus();k.execCommand("insertText",!1,d)||ym.insertTextFirefox(a,d);K===k.body?a.blur():K instanceof HTMLElement&&K!==a&&K.focus()}static set(a,d){a.select();ym.insert(a,d)}static getSelection(a){const {selectionStart:d,
selectionEnd:k}=a;return a.value.slice(d?d:void 0,k?k:void 0)}static wrapSelection(a,d,k){const {selectionStart:K,selectionEnd:da}=a,ja=ym.getSelection(a);ym.insert(a,d+ja+(null!=k?k:d));a.selectionStart=(K||0)+d.length;a.selectionEnd=(da||0)+d.length}static replace(a,d,k){let K=0;a.value.replace(d,(...da)=>{const ja=K+da[da.length-2],qa=da[0].length;a.selectionStart=ja;a.selectionEnd=ja+qa;da="string"===typeof k?k:k(...da);ym.insert(a,da);a.selectionStart=ja;K+=da.length-qa;return da})}static findLineEnd(a,
d){const k=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(k)?d:k+1}static indent(a){var d;const {selectionStart:k,selectionEnd:K,value:da}=a;var ja=da.slice(k,K);if((ja=null==(d=/\n/g.exec(ja))?void 0:d.length)&&0<ja){d=da.lastIndexOf("\n",k-1)+1;var qa=a.value.slice(d,K-1);ja=qa.replace(/^|\n/g,"$\x26  ");qa=ja.length-qa.length;a.setSelectionRange(d,K-1);ym.insert(a,ja);a.setSelectionRange(k+1,K+qa)}else ym.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:k,value:K}=a;var da=
K.lastIndexOf("\n",d-1)+1;const ja=ym.findLineEnd(K,k);var qa=a.value.slice(da,ja);const Ha=qa.replace(/(^|\n)(\t| {1,2})/g,"$1");qa=qa.length-Ha.length;a.setSelectionRange(da,ja);ym.insert(a,Ha);da=(da=/\t| {1,2}/.exec(K.slice(da,d)))?da[0].length:0;a.setSelectionRange(d-da,Math.max(d-da,k-qa))}},su=ca(588),xq=a=>a.stopPropagation(),gm=Qn.memo(function({font:a,text:d,color:k,fontStyle:K,fontSize:da,fontWeight:ja,offsetX:qa=0,offsetY:Ha=0,scale:Ra=1,isEditing:$a=!1,pointerEvents:fb=!1,onBlur:jb,onChange:Kb}){const Nb=
Qn.useRef(null),Hb=Qn.useRef(!1),fc=Qn.useCallback(Mc=>{Kb(xs.normalizeText(Mc.currentTarget.value))},[Kb]),qc=Qn.useCallback(Mc=>{if("Escape"!==Mc.key)if("Tab"===Mc.key&&0===d.length)Mc.preventDefault();else{if("Meta"!==Mc.key&&!Mc.metaKey)Mc.stopPropagation();else if("z"===Mc.key&&Mc.metaKey){document.execCommand(Mc.shiftKey?"redo":"undo",!1);Mc.stopPropagation();Mc.preventDefault();return}"Tab"===Mc.key&&(Mc.preventDefault(),Mc.shiftKey?ym.unindent(Mc.currentTarget):ym.indent(Mc.currentTarget),
null==Kb?void 0:Kb(xs.normalizeText(Mc.currentTarget.value)))}},[Kb]),Wb=Qn.useCallback(Mc=>{$a&&(Mc.currentTarget.setSelectionRange(0,0),null==jb?void 0:jb())},[jb]),kc=Qn.useCallback(Mc=>{$a&&Hb.current&&document.activeElement===Mc.currentTarget&&Mc.currentTarget.select()},[$a]),hc=Qn.useCallback(Mc=>{$a&&Mc.stopPropagation()},[$a]);Qn.useEffect(()=>{$a&&requestAnimationFrame(()=>{Hb.current=!0;const Mc=Nb.current;Mc&&(Mc.focus(),Mc.select())})},[$a,jb]);const Fc=Qn.useRef(null);Qn.useLayoutEffect(()=>
{const Mc=Fc.current;if(Mc){var ud=Li(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:da,lineHeight:1,fontWeight:ja},4);Mc.style.transform=`scale(${Ra}, ${Ra}) translate(${qa}px, ${Ha}px)`;Mc.style.width=ud[0]+1+"px";Mc.style.height=ud[1]+1+"px"}},[d,ja,da,Ha,qa,Ra]);return(0,su.jsx)("div",{className:"tl-text-label-wrapper",children:(0,su.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Fc,style:{font:a,fontStyle:K,fontSize:da,fontWeight:ja,color:k,pointerEvents:fb?"all":"none",
userSelect:$a?"text":"none"},children:[$a?(0,su.jsx)("textarea",{ref:Nb,style:{font:a,color:k,fontStyle:K,fontSize:da,fontWeight:ja},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:k,onFocus:kc,onChange:fc,onKeyDown:qc,onBlur:Wb,onPointerDown:hc,onContextMenu:xq,onCopy:xq,onPaste:xq,onCut:xq}):
d,""]})})}),Pl=ca(588),bw={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},yq=class extends em{constructor(){super(...arguments);gb(this,"canEdit",!0);gb(this,"ReactComponent",ee(({events:a,isErasing:d,isBinding:k,isSelected:K,isEditing:da,onEditingEnd:ja})=>{const {props:{size:[qa,Ha],stroke:Ra,fill:$a,noFill:fb,strokeWidth:jb,strokeType:Kb,borderRadius:Nb,opacity:Hb,label:fc,italic:qc,fontWeight:Wb,fontSize:kc}}=this;var hc=fc||da?Li(fc,{fontFamily:"var(--ls-font-family)",fontSize:kc,lineHeight:1,fontWeight:Wb},
4):[0,0];const Fc=be.mul(this.props.size,.5);hc=Math.max(.5,Math.min(1,qa/hc[0],Ha/hc[1]));const Mc=this.getBounds(),ud=aw.useMemo(()=>be.sub(Fc,be.toFixed([Mc.width/2,Mc.height/2])),[Mc,hc,Fc]),Jd=aw.useCallback(Qe=>{var Zd;null==(Zd=this.update)?void 0:Zd.call(this,{label:Qe})},[fc]);return(0,Pl.jsxs)("div",hf(Yd({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,Pl.jsx)(gm,{font:"20px / 1 var(--ls-font-family)",text:fc,color:qh(Ra,"text"),offsetX:ud[0],
offsetY:ud[1],fontSize:kc,scale:hc,isEditing:da,onChange:Jd,onBlur:ja,fontStyle:qc?"italic":"normal",fontWeight:Wb,pointerEvents:!!fc}),(0,Pl.jsxs)(Hn,{opacity:d?.2:Hb,children:[k&&(0,Pl.jsx)(Bt,{mode:"svg",strokeWidth:jb,size:[qa,Ha]}),(0,Pl.jsx)("rect",{className:K||!fb?"tl-hitarea-fill":"tl-hitarea-stroke",x:jb/2,y:jb/2,rx:Nb,ry:Nb,width:Math.max(.01,qa-jb),height:Math.max(.01,Ha-jb),pointerEvents:"all"}),(0,Pl.jsx)("rect",{x:jb/2,y:jb/2,rx:Nb,ry:Nb,width:Math.max(.01,qa-jb),height:Math.max(.01,
Ha-jb),strokeWidth:jb,stroke:qh(Ra,"stroke"),strokeDasharray:"dashed"===Kb?"8 2":void 0,fill:fb?"none":qh($a,"background")})]})]}))}));gb(this,"setScaleLevel",a=>Mh(this,null,function*(){this.update({scaleLevel:a,fontSize:bw[null!=a?a:"md"],strokeWidth:bw[null!=a?a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",ee(()=>{const {props:{size:[a,d],borderRadius:k,isLocked:K}}=this;return(0,Pl.jsx)("g",{children:(0,Pl.jsx)("rect",{width:a,height:d,rx:k,ry:k,fill:"transparent",strokeDasharray:K?
"8 2":void 0})})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return dn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};gb(yq,"id","box");gb(yq,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,
opacity:1,label:""});fe([Eg],yq.prototype,"scaleLevel",1);fe([ig],yq.prototype,"setScaleLevel",2);var tu=Jf(ca(19)),mo=ca(588),uu={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Kr=class extends Ww{constructor(){super(...arguments);gb(this,"canEdit",!0);gb(this,"ReactComponent",ee(({isSelected:a,isErasing:d,events:k,isEditing:K,onEditingEnd:da})=>{const {size:[ja,qa],stroke:Ha,fill:Ra,noFill:$a,strokeWidth:fb,strokeType:jb,opacity:Kb,label:Nb,italic:Hb,fontWeight:fc,fontSize:qc}=this.props;var Wb=Nb||K?Li(Nb,
{fontFamily:"var(--ls-font-family)",fontSize:qc,lineHeight:1,fontWeight:fc},4):[0,0];const kc=be.mul(this.props.size,.5);Wb=Math.max(.5,Math.min(1,ja/Wb[0],qa/Wb[1]));const hc=this.getBounds(),Fc=tu.useMemo(()=>be.sub(kc,be.toFixed([hc.width/2,hc.height/2])),[hc,Wb,kc]),Mc=tu.useCallback(ud=>{var Jd;null==(Jd=this.update)?void 0:Jd.call(this,{label:ud})},[Nb]);return(0,mo.jsxs)("div",hf(Yd({},k),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,mo.jsx)(gm,
{font:"18px / 1 var(--ls-font-family)",text:Nb,color:qh(Ha,"text"),offsetX:Fc[0],offsetY:Fc[1],scale:Wb,isEditing:K,onChange:Mc,onBlur:da,fontStyle:Hb?"italic":"normal",fontSize:qc,fontWeight:fc,pointerEvents:!!Nb}),(0,mo.jsxs)(Hn,hf(Yd({},k),{opacity:d?.2:Kb,children:[(0,mo.jsx)("ellipse",{className:a||!$a?"tl-hitarea-fill":"tl-hitarea-stroke",cx:ja/2,cy:qa/2,rx:Math.max(.01,(ja-fb)/2),ry:Math.max(.01,(qa-fb)/2)}),(0,mo.jsx)("ellipse",{cx:ja/2,cy:qa/2,rx:Math.max(.01,(ja-fb)/2),ry:Math.max(.01,(qa-
fb)/2),strokeWidth:fb,stroke:qh(Ha,"stroke"),strokeDasharray:"dashed"===jb?"8 2":void 0,fill:$a?"none":qh(Ra,"background")})]}))]}))}));gb(this,"setScaleLevel",a=>Mh(this,null,function*(){this.update({scaleLevel:a,fontSize:uu[null!=a?a:"md"],strokeWidth:uu[null!=a?a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",ee(()=>{const {size:[a,d],isLocked:k}=this.props;return(0,mo.jsx)("g",{children:(0,mo.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:k?
"8 2":"undefined"})})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return dn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,k],stroke:K,fill:da,noFill:ja,strokeWidth:qa,strokeType:Ha,opacity:Ra}=this.props;return(0,mo.jsxs)("g",{opacity:Ra,children:[(0,mo.jsx)("ellipse",{className:ja?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:k/2,rx:Math.max(.01,(d-qa)/2),ry:Math.max(.01,
(k-qa)/2)}),(0,mo.jsx)("ellipse",{cx:d/2,cy:k/2,rx:Math.max(.01,(d-qa)/2),ry:Math.max(.01,(k-qa)/2),strokeWidth:qa,stroke:qh(K,"stroke"),strokeDasharray:"dashed"===Ha?"8 2":void 0,fill:ja?"none":qh(da,"background")})]})}};gb(Kr,"id","ellipse");gb(Kr,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});fe([Eg],Kr.prototype,"scaleLevel",1);fe([ig],Kr.prototype,
"setScaleLevel",2);var $s=ca(588),vu=class extends ev{constructor(){super(...arguments);gb(this,"ReactComponent",ee(({events:a})=>{const d=this.getBounds(),k=lg(),K=k.selectedShapesArray.some(ja=>k.shapesInGroups([this]).includes(ja)),da=this.ReactIndicator;return(0,$s.jsxs)(Hn,hf(Yd({},a),{className:"tl-group-container",children:[(0,$s.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),K&&(0,$s.jsx)("g",{stroke:"var(--color-selectedFill)",
children:(0,$s.jsx)(da,{})})]}))}));gb(this,"ReactIndicator",ee(()=>{const a=this.getBounds();return(0,$s.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};gb(vu,"id","group");gb(vu,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var wu=ca(588),xu={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Ze=class extends qs{constructor(a={}){super(a);gb(this,"ReactComponent",ee(({events:d,isErasing:k})=>{const {pointsPath:K,
props:{stroke:da,strokeWidth:ja,opacity:qa}}=this;return(0,wu.jsx)(Hn,hf(Yd({},d),{opacity:k?.2:1,children:(0,wu.jsx)("path",{d:K,strokeWidth:16*ja,stroke:qh(da,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:qa})}))}));gb(this,"setScaleLevel",d=>Mh(this,null,function*(){this.update({scaleLevel:d,strokeWidth:xu[null!=d?d:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",ee(()=>{const {pointsPath:d,props:k}=this;return(0,wu.jsx)("path",{d,fill:"none",
strokeDasharray:k.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",d=>{d=dn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});Ue(this)}get pointsPath(){const {points:a}=this.props;return Pw.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:k,opacity:K}}=this;return(0,wu.jsx)("path",{d:a,strokeWidth:16*k,stroke:qh(d,"stroke"),fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:K})}};gb(Ze,"id","highlighter");gb(Ze,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});fe([Eg],Ze.prototype,"pointsPath",1);fe([Eg],Ze.prototype,"scaleLevel",1);fe([ig],Ze.prototype,"setScaleLevel",2);var Hg=Jf(ca(19)),Lr=ca(588),cw={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Ap=class extends em{constructor(){super(...arguments);
gb(this,"canChangeAspectRatio",!0);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"htmlAnchorRef",Hg.createRef());gb(this,"setScaleLevel",a=>Mh(this,null,function*(){var d;const k=be.mul(this.props.size,cw[null!=a?a:"md"]/cw[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield yk();this.update({size:k})}));gb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const k=this.htmlAnchorRef.current.getBoundingClientRect(),[K,da]=be.div([k.width,k.height],null!=(d=
null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(K||400,1400),10),Math.max(Math.min(da||400,1400),10)]})}return this});gb(this,"ReactComponent",ee(({events:a,isErasing:d,isEditing:k})=>{const {props:{html:K,scaleLevel:da}}=this,ja=ks(),qa=lg(),Ha=qa.selectedIds.has(this.id),Ra=ja||Ha&&!k||"select"!==qa.selectedTool.id,$a=Hg.useCallback(jb=>{Ra||jb.stopPropagation()},[Ra]),fb=cw[null!=da?da:"md"];Hg.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:qa.viewport.camera.zoom}),
qa.persist(!0))},[]);return(0,Lr.jsx)(hn,hf(Yd({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Lr.jsx)("div",{onWheelCapture:$a,onPointerDown:$a,onPointerUp:$a,className:"tl-html-container",style:{pointerEvents:ja||!k&&!Ha?"none":"all",overflow:k?"auto":"hidden",width:`calc(100% / ${fb})`,height:`calc(100% / ${fb})`,transform:`scale(${fb})`},children:(0,Lr.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:K.trim()}})})}))}));
gb(this,"ReactIndicator",ee(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,Lr.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return dn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};gb(Ap,"id","html");gb(Ap,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});fe([Eg],
Ap.prototype,"scaleLevel",1);fe([ig],Ap.prototype,"setScaleLevel",2);var Ey=Jf(ca(19)),Mr=ca(588),zq=class extends em{constructor(){super(...arguments);gb(this,"frameRef",Ey.createRef());gb(this,"canEdit",!0);gb(this,"onIFrameSourceChange",a=>{this.update({url:a})});gb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});gb(this,"ReactComponent",ee(({events:a,isErasing:d,isEditing:k})=>{Ey.useRef(null);const K=
lg();return(0,Mr.jsx)(hn,hf(Yd({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Mr.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:k||K.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,Mr.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Mr.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));
gb(this,"ReactIndicator",ee(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,Mr.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}))}};gb(zq,"id","iframe");gb(zq,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});fe([ig],zq.prototype,"onIFrameSourceChange",2);fe([ig],zq.prototype,"reload",2);var UC=Jf(ca(19)),Vh=ca(588),yu=class extends Xw{constructor(){super(...arguments);gb(this,"ReactComponent",ee(({events:a,
isErasing:d,isBinding:k,asset:K})=>{const {props:{opacity:da,objectFit:ja,clipping:qa,size:[Ha,Ra]}}=this,[$a,fb,jb,Kb]=Array.isArray(qa)?qa:[qa,qa,qa,qa],{handlers:Nb}=UC.useContext(ri);return(0,Vh.jsxs)(hn,hf(Yd({},a),{opacity:d?.2:da,children:[k&&(0,Vh.jsx)(Bt,{mode:"html",strokeWidth:4,size:[Ha,Ra]}),(0,Vh.jsx)("div",{"data-asset-loaded":!!K,className:"tl-image-shape-container",children:K?(0,Vh.jsx)("img",{src:Nb?Nb.makeAssetUrl(K.src):K.src,draggable:!1,style:{position:"relative",top:-$a,left:-Kb,
width:Ha+(Kb-fb),height:Ra+($a-jb),objectFit:ja}}):"Asset is missing"})]}))}));gb(this,"ReactIndicator",ee(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,Vh.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,k;const K=this.getBounds(),{assetId:da,clipping:ja}=this.props;if(a=a.find(qa=>qa.id===da)){Array.isArray(ja);const qa=null==(k=null==(d=window.logseq)?void 0:d.api)?void 0:k.make_asset_url;return(0,Vh.jsx)("image",
{width:K.width,height:K.height,href:qa?qa(a.src):a.src})}return super.getShapeSVGJsx({})}};gb(yu,"id","image");gb(yu,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var dw=Jf(ca(19)),ew=Jf(ca(19)),Fy=ca(588),no=ca(588),Gy={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},VC=ew.memo(function({style:a,start:d,end:k,decorationStart:K,decorationEnd:da,scaleLevel:ja}){const qa=be.dist(d,k);if(2>qa)return null;
const {strokeWidth:Ha}=a,Ra=1+Ha*Gy[null!=ja?ja:"md"]/10,$a="M"+be.toFixed(d)+"L"+be.toFixed(k);ja=Math.min(qa/3,Ha*Gy[null!=ja?ja:"md"]);K=K?Ct(d,k,ja):null;da=da?Ct(k,d,ja):null;return(0,no.jsxs)(no.Fragment,{children:[(0,no.jsx)("path",{className:"tl-stroke-hitarea",d:$a}),(0,no.jsx)("path",{d:$a,strokeWidth:Ra,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),K&&(0,no.jsx)(Nu,{left:K.left,middle:d,right:K.right,
stroke:a.stroke,strokeWidth:Ra}),da&&(0,no.jsx)(Nu,{left:da.left,middle:k,right:da.right,stroke:a.stroke,strokeWidth:Ra})]})}),oo=ca(588),zm=ca(588),WC={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},on=class extends Nt{constructor(){super(...arguments);gb(this,"hideSelection",!0);gb(this,"canEdit",!0);gb(this,"ReactComponent",ee(({events:a,isErasing:d,isEditing:k,onEditingEnd:K})=>{const {stroke:da,handles:{start:ja,end:qa},opacity:Ha,label:Ra,italic:$a,fontWeight:fb,fontSize:jb,id:Kb}=this.props,Nb=Ra||
k?Li(Ra||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:jb,lineHeight:1,fontWeight:fb},6):[0,0],Hb=be.med(ja.point,qa.point);var fc=be.dist(ja.point,qa.point);fc=Math.max(.5,Math.min(1,Math.max(fc/(Nb[1]+128),fc/(Nb[0]+128))));const qc=this.getBounds(),Wb=dw.useMemo(()=>be.sub(Hb,be.toFixed([qc.width/2,qc.height/2])),[qc,fc,Hb]),kc=dw.useCallback(hc=>{var Fc;null==(Fc=this.update)?void 0:Fc.call(this,{label:hc})},[Ra]);return(0,zm.jsxs)("div",hf(Yd({},a),{style:{width:"100%",height:"100%",
overflow:"hidden"},className:"tl-line-container",children:[(0,zm.jsx)(gm,{font:"20px / 1 var(--ls-font-family)",text:Ra,fontSize:jb,color:qh(da,"text"),offsetX:Wb[0],offsetY:Wb[1],scale:fc,isEditing:k,onChange:kc,onBlur:K,fontStyle:$a?"italic":"normal",fontWeight:fb,pointerEvents:!!Ra}),(0,zm.jsxs)(Hn,{opacity:d?.2:Ha,id:Kb+"_svg",children:[(0,zm.jsx)(Dt,{id:Kb,bounds:qc,labelSize:Nb,offset:Wb,scale:fc}),(0,zm.jsx)("g",{pointerEvents:"none",mask:Ra||k?`url(#${Kb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));
gb(this,"setScaleLevel",a=>Mh(this,null,function*(){this.update({scaleLevel:a,fontSize:WC[null!=a?a:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",ee(({isEditing:a})=>{const {id:d,decorations:k,label:K,strokeWidth:da,fontSize:ja,fontWeight:qa,handles:{start:Ha,end:Ra},isLocked:$a}=this.props,fb=this.getBounds(),jb=K||a?Li(K,{fontFamily:"var(--ls-font-family)",fontSize:ja,lineHeight:1,fontWeight:qa},6):[0,0],Kb=be.med(Ha.point,Ra.point);var Nb=be.dist(Ha.point,Ra.point);Nb=Math.max(.5,Math.min(1,
Math.max(Nb/(jb[1]+128),Nb/(jb[0]+128))));const Hb=dw.useMemo(()=>be.sub(Kb,be.toFixed([fb.width/2,fb.height/2])),[fb,Nb,Kb]);return(0,zm.jsxs)("g",{children:[(0,zm.jsx)("path",{mask:K?`url(#${d}_clip)`:"",d:Dw({strokeWidth:da},Ha.point,Ra.point,null==k?void 0:k.start,null==k?void 0:k.end),strokeDasharray:$a?"8 2":"undefined"}),K&&!a&&(0,zm.jsx)("rect",{x:fb.width/2-jb[0]/2*Nb+Hb[0],y:fb.height/2-jb[1]/2*Nb+Hb[1],width:jb[0]*Nb,height:jb[1]*Nb,rx:4*Nb,ry:4*Nb,fill:"transparent"})]})}));gb(this,"validateProps",
a=>dn(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,fill:k,strokeWidth:K,strokeType:da,decorations:ja,label:qa,scaleLevel:Ha,handles:{start:Ra,end:$a}}=this.props,fb=be.med(Ra.point,$a.point);return(0,zm.jsxs)(zm.Fragment,{children:[(0,zm.jsx)(VC,{style:{stroke:qh(d,"text"),fill:k,strokeWidth:K,strokeType:da},scaleLevel:Ha,start:Ra.point,end:$a.point,decorationStart:null==ja?void 0:ja.start,decorationEnd:null==ja?void 0:ja.end}),
a&&(0,zm.jsx)(zm.Fragment,{children:(0,zm.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${fb[0]}, ${fb[1]})`,textAnchor:"middle",fill:qh(d,"text"),stroke:qh(d,"text"),children:qa})})]})}};gb(on,"id","line");gb(on,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",
strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});fe([Eg],on.prototype,"scaleLevel",1);fe([ig],on.prototype,"setScaleLevel",2);var Hk=Jf(ca(19)),si=ca(588),Aq={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},at=ee(({type:a,fill:d,opacity:k,children:K})=>{const da="var(--ls-secondary-background-color)"!==d?qh(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?Fi(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,si.jsxs)("div",
{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,si.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:k,background:"P"===a?da:`linear-gradient(0deg, ${d}, ${da})`}}),(0,si.jsx)("div",{className:"relative",children:K})]})}),jk=class extends em{constructor(a={}){var d;super(a);gb(this,"hideRotateHandle",!0);gb(this,"canChangeAspectRatio",!0);gb(this,"canFlip",!0);gb(this,"canEdit",!0);gb(this,"persist",null);gb(this,
"initialHeightCalculated",!0);gb(this,"getInnerHeight",null);gb(this,"setCollapsed",k=>Mh(this,null,function*(){var K;if("B"===this.props.blockType){if(this.update({compact:k}),this.canResize[1]=!k,!k)this.onResetBounds()}else{const da=this.props.size[1];this.canResize[1]=!k;this.update({isAutoResizing:!k,collapsed:k,size:[this.props.size[0],k?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:k?da:this.props.collapsedHeight})}null==(K=this.persist)?void 0:K.call(this)}));gb(this,
"setScaleLevel",k=>Mh(this,null,function*(){var K;const da=be.mul(this.props.size,Aq[null!=k?k:"md"]/Aq[null!=(K=this.props.scaleLevel)?K:"md"]);this.update({scaleLevel:k});yield yk();this.update({size:da})}));gb(this,"onResetBounds",k=>{k=this.getAutoResizeHeight();null!==k&&1<Math.abs(k-this.props.size[1])&&(this.update({size:[this.props.size[0],k]}),this.initialHeightCalculated=!0);return this});gb(this,"onResize",(k,K)=>{var da;const {bounds:ja,rotation:qa,scale:[Ha,Ra]}=K;k=[...this.scale];0>
Ha&&(k[0]*=-1);0>Ra&&(k[1]*=-1);K=ja.height;this.props.isAutoResizing&&(K=null!=(da=this.getAutoResizeHeight())?da:K);return this.update({point:[ja.minX,ja.minY],size:[Math.max(1,ja.width),Math.max(1,K)],scale:k,rotation:qa})});gb(this,"PortalComponent",ee(({})=>{const {props:{pageId:k,fill:K,opacity:da}}=this,{renderers:ja}=Hk.useContext(ri),qa=lg(),Ha=Hk.useRef(null),[,Ra]=this.useComponentSize(Ha,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");
if(null==ja||!ja.Page)return null;const {Page:$a,Block:fb}=ja,[jb,Kb]=Hk.useState(!1);Hk.useEffect(()=>{var Nb,Hb;if(this.props.isAutoResizing){const fc=(null!=(Hb=null==(Nb=this.getInnerHeight)?void 0:Nb.call(this))?Hb:Ra)+this.getHeaderHeight();Ra&&1<Math.abs(fc-this.props.size[1])&&(this.update({size:[this.props.size[0],fc]}),jb&&qa.persist(!0))}},[Ra,this.props.isAutoResizing]);Hk.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();qa.persist(!0)})},[this.initialHeightCalculated]);
Hk.useEffect(()=>{setTimeout(function(){Kb(!0)})},[]);return(0,si.jsxs)(si.Fragment,{children:[(0,si.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>qa.viewport.camera.zoom?"optimizeSpeed":"auto",background:K&&"var(--ls-secondary-background-color)"!==K?Fi(K)?`var(--ls-highlight-color-${K})`:K:"var(--ls-secondary-background-color)",opacity:da}}),(0,si.jsx)("div",{ref:Ha,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?
"visible":"auto"},children:(jb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,si.jsx)(fb,{blockId:k}):(0,si.jsx)($a,{pageName:k}))})]})}));gb(this,"ReactComponent",ee(k=>{var K;const {events:da,isErasing:ja,isEditing:qa,isBinding:Ha}=k,{props:{opacity:Ra,pageId:$a,fill:fb,scaleLevel:jb,strokeWidth:Kb,size:Nb}}=this,Hb=lg(),{renderers:fc,handlers:qc}=Hk.useContext(ri);this.persist=()=>Hb.persist();const Wb=ks(),kc=Hb.selectedIds.has(this.id)&&1===Hb.selectedIds.size,
hc=Hb.isIn("logseq-portal.creating")&&!$a,Fc=(Wb||kc&&!qa||"select"!==Hb.selectedTool.id)&&!hc,Mc=Hk.useCallback(nd=>{Fc||nd.stopPropagation()},[Fc]),ud=1===Hb.selectedShapesArray.length&&Hb.selectedShapesArray.some(nd=>"logseq-portal"===nd.type&&nd.props.id!==this.props.id&&$a&&nd.props.pageId===$a),Jd=Aq[null!=jb?jb:"md"];Hk.useEffect(()=>this.props.collapsed&&qa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):
()=>{},[qa,this.props.collapsed]);Hk.useEffect(()=>{if(hc){const nd=[Hb.viewport.bounds.width,Hb.viewport.bounds.height],Ad=Hb.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(Ad[0]>nd[0]-400||Ad[1]>nd[1]-240||1.5<Hb.viewport.camera.zoom||.5>Hb.viewport.camera.zoom)&&Hb.viewport.zoomToBounds(hf(Yd({},this.bounds),{minY:this.bounds.maxY+25}))}},[Hb.viewport.bounds.height.toFixed(2)]);const Qe=Hk.useCallback(nd=>{this.initialHeightCalculated=!1;const Ad=Aj(nd)?"B":"P";this.update({pageId:nd,
size:[400,320],blockType:Ad,compact:"B"===Ad});Hb.selectTool("select");Hb.history.resume();Hb.history.persist()},[]),Zd=this.PortalComponent;var Ee=Hk.useMemo(()=>{var nd;if($a&&"B"===this.props.blockType)return null==(nd=null==qc?void 0:qc.queryBlockByUUID($a))?void 0:nd.content},[null==qc?void 0:qc.queryBlockByUUID,$a]);Ee="B"===this.props.blockType&&"string"!==typeof Ee;const gf=(!this.props.collapsed||qa)&&!Ee;if(null==fc||!fc.Page)return null;const {Breadcrumb:Re,PageName:cf}=fc,Gd={width:`calc(100% / ${Jd})`,
height:`calc(100% / ${Jd})`,opacity:ja?.2:1};1!==Jd&&(Gd.transform=`scale(${Jd})`);return(0,si.jsxs)(hn,hf(Yd({style:{pointerEvents:"all"}},da),{children:[Ha&&(0,si.jsx)(Bt,{mode:"html",strokeWidth:Kb,size:Nb}),(0,si.jsx)("div",{"data-inner-events":!Fc,onWheelCapture:Mc,onPointerDown:Mc,onPointerUp:Mc,style:{width:"100%",height:"100%",pointerEvents:Wb||!qa&&!kc?"none":"all"},children:hc?(0,si.jsx)(Au,{onChange:Qe,onAddBlock:nd=>{setTimeout(()=>{var Ad,id,Dd;Hb.api.editShape(this);null==(Dd=null==
(id=null==(Ad=window.logseq)?void 0:Ad.api)?void 0:id.edit_block)?void 0:Dd.call(id,nd)})},placeholder:"Create or search your graph..."}):(0,si.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":$a,"data-portal-selected":ud,"data-editing":qa,style:Gd,children:[!this.props.compact&&!Ee&&(0,si.jsx)(at,{type:null!=(K=this.props.blockType)?K:"P",fill:fb,opacity:Ra,children:"P"===this.props.blockType?(0,si.jsx)(cf,{pageName:$a}):(0,si.jsx)(Re,{blockId:$a})}),
Ee&&(0,si.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),gf&&(0,si.jsx)(Zd,Yd({},k))]})})]}))}));gb(this,"ReactIndicator",ee(()=>{const k=this.getBounds();return(0,si.jsx)("rect",{width:k.width,height:k.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",k=>{var K;if(void 0!==k.size){const da=Aq[null!=(K=this.props.scaleLevel)?K:"md"];k.size[0]=Math.max(k.size[0],60*da);k.size[1]=Math.max(k.size[1],40*da)}return dn(this,
k)});Ue(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [k,K]=Hk.useState([0,0]),da=lg();Hk.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const ja=
d?a.current.querySelector(d):a.current;if(ja){const qa=()=>{const {width:Ra,height:$a}=ja.getBoundingClientRect(),fb=be.div([Ra,$a],da.viewport.camera.zoom);K(fb);return fb};qa();this.getInnerHeight=()=>qa()[1];const Ha=new ResizeObserver(()=>{qa()});Ha.observe(ja);return()=>{Ha.disconnect()}}}return()=>{}},10)},[a,d]);return k}getHeaderHeight(){var a;const d=Aq[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+
this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,k;const K=this.getBounds();return(0,si.jsxs)(si.Fragment,{children:[(0,si.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Fi(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:qh(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:K.width,rx:8,ry:8,
height:K.height}),!this.props.compact&&(0,si.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?qh(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(k=this.props.opacity)?k:.2,x:1,y:1,width:K.width-2,height:38,rx:8,ry:8}),(0,si.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${K.width/2}, ${10+K.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",
stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};gb(jk,"id","logseq-portal");gb(jk,"defaultSearchQuery","");gb(jk,"defaultSearchFilter",null);gb(jk,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});fe([Eg],jk.prototype,"collapsed",
1);fe([ig],jk.prototype,"setCollapsed",2);fe([Eg],jk.prototype,"scaleLevel",1);fe([ig],jk.prototype,"setScaleLevel",2);var {min:Uo,PI:Hy}=Math,Am=Hy+1E-4,Bp=ca(588),Iy={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},ug={easing:a=>Math.sin(a*Math.PI/2),simulatePressure:!0},fw={easing:a=>a*a,simulatePressure:!1},Cp=class extends qs{constructor(a={}){super(a);gb(this,"ReactComponent",ee(({events:d,isErasing:k})=>{const {props:{opacity:K}}=this;return(0,Bp.jsx)(Hn,hf(Yd({},d),{opacity:k?.2:K,children:this.getShapeSVGJsx()}))}));
gb(this,"setScaleLevel",d=>Mh(this,null,function*(){this.update({scaleLevel:d,strokeWidth:Iy[null!=d?d:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",ee(()=>{const {pointsPath:d}=this;return(0,Bp.jsx)("path",{d,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",d=>{d=dn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});Ue(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=hf(Yd({size:1+1.5*a.strokeWidth,
thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?ug:fw),{last:a.isComplete}),a=Iw(a.points,d),d=Pw.getSvgPathFromStroke(Hw(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:k,strokeType:K}}=this;return(0,Bp.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:k/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:qh(d,"text"),fill:qh(d,"text"),strokeDasharray:"dashed"===K?"12 4":void 0})}};
gb(Cp,"id","pencil");gb(Cp,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});fe([Eg],Cp.prototype,"pointsPath",1);fe([Eg],Cp.prototype,"scaleLevel",1);fe([ig],Cp.prototype,"setScaleLevel",2);var Dp=Jf(ca(19)),Bl=ca(588),gw={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},hm=class extends aq{constructor(){super(...arguments);gb(this,"canEdit",!0);gb(this,"ReactComponent",ee(({events:a,isErasing:d,
isSelected:k,isEditing:K,onEditingEnd:da})=>{const {offset:[ja,qa],props:{stroke:Ha,fill:Ra,noFill:$a,strokeWidth:fb,opacity:jb,strokeType:Kb,label:Nb,italic:Hb,fontWeight:fc,fontSize:qc}}=this,Wb=this.getVertices(fb/2).join();var kc=Nb||K?Li(Nb,{fontFamily:"var(--ls-font-family)",fontSize:qc,lineHeight:1,fontWeight:fc},4):[0,0];const hc=[this.props.size[0]/2,2*this.props.size[1]/3];kc=Math.max(.5,Math.min(1,this.props.size[0]/(2*kc[0]),this.props.size[1]/(2*kc[1])));const Fc=this.getBounds(),Mc=
Dp.useMemo(()=>be.sub(hc,be.toFixed([Fc.width/2,Fc.height/2])),[Fc,kc,hc]),ud=Dp.useCallback(Jd=>{var Qe;null==(Qe=this.update)?void 0:Qe.call(this,{label:Jd})},[Nb]);return(0,Bl.jsxs)("div",hf(Yd({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Bl.jsx)(gm,{font:"20px / 1 var(--ls-font-family)",text:Nb,fontSize:qc,color:qh(Ha,"text"),offsetX:Mc[0],offsetY:Mc[1]/kc,scale:kc,isEditing:K,onChange:ud,onBlur:da,fontStyle:Hb?"italic":"normal",fontWeight:fc,pointerEvents:!!Nb}),(0,Bl.jsx)(Hn,
{opacity:d?.2:jb,children:(0,Bl.jsxs)("g",{transform:`translate(${ja}, ${qa})`,children:[(0,Bl.jsx)("polygon",{className:k||!$a?"tl-hitarea-fill":"tl-hitarea-stroke",points:Wb}),(0,Bl.jsx)("polygon",{points:Wb,stroke:qh(Ha,"stroke"),fill:$a?"none":qh(Ra,"background"),strokeWidth:fb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Kb?"8 2":void 0})]})})]}))}));gb(this,"setScaleLevel",a=>Mh(this,null,function*(){this.update({scaleLevel:a,fontSize:gw[null!=a?a:"md"],strokeWidth:gw[null!=a?
a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",ee(()=>{const {offset:[a,d],props:{strokeWidth:k,isLocked:K}}=this;return(0,Bl.jsx)("g",{children:(0,Bl.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(k/2).join(),strokeDasharray:K?"8 2":"undefined"})})}));gb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return dn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,k],props:{stroke:K,
fill:da,noFill:ja,strokeWidth:qa,opacity:Ha,strokeType:Ra}}=this;a=this.getVertices(qa/2).join();return(0,Bl.jsxs)("g",{transform:`translate(${d}, ${k})`,opacity:Ha,children:[(0,Bl.jsx)("polygon",{className:ja?"tl-hitarea-stroke":"tl-hitarea-fill",points:a}),(0,Bl.jsx)("polygon",{points:a,stroke:qh(K,"stroke"),fill:ja?"none":qh(da,"background"),strokeWidth:qa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Ra?"8 2":void 0})]})}};gb(hm,"id","polygon");gb(hm,"defaultProps",{id:"polygon",
parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});fe([Eg],hm.prototype,"scaleLevel",1);fe([ig],hm.prototype,"setScaleLevel",2);var po=Jf(ca(19)),ml=ca(588),bt={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Bq=class extends Yw{constructor(){super(...arguments);gb(this,"ReactComponent",ee(({events:a,isErasing:d,isEditing:k,onEditingEnd:K})=>{const {props:{opacity:da,
fontFamily:ja,fontSize:qa,fontWeight:Ha,italic:Ra,lineHeight:$a,text:fb,stroke:jb,padding:Kb}}=this,Nb=po.useRef(null),Hb=po.useRef(!1),fc=po.useRef(null),qc=po.useCallback(Mc=>{const {isSizeLocked:ud}=this.props;Mc=xs.normalizeText(Mc.currentTarget.value);ud?this.update({text:Mc,size:this.getAutoSizedBoundingBox({text:Mc})}):this.update({text:Mc})},[]),Wb=po.useCallback(Mc=>{if("Escape"!==Mc.key)if("Tab"===Mc.key&&0===fb.length)Mc.preventDefault();else{if("Meta"!==Mc.key&&!Mc.metaKey)Mc.stopPropagation();
else if("z"===Mc.key&&Mc.metaKey){Mc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Mc.stopPropagation();Mc.preventDefault();return}"Tab"===Mc.key&&(Mc.preventDefault(),Mc.shiftKey?ym.unindent(Mc.currentTarget):ym.indent(Mc.currentTarget),this.update({text:xs.normalizeText(Mc.currentTarget.value)}))}},[]),kc=po.useCallback(Mc=>{k&&(null==K?void 0:K())},[K]),hc=po.useCallback(Mc=>{k&&Hb.current&&document.activeElement===Mc.currentTarget&&Mc.currentTarget.select()},[k]),Fc=
po.useCallback(Mc=>{k&&Mc.stopPropagation()},[k]);po.useEffect(()=>{k&&requestAnimationFrame(()=>{Hb.current=!0;const Mc=Nb.current;Mc&&(Mc.focus(),Mc.select())})},[k,K]);po.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,ml.jsx)(hn,hf(Yd({},a),{opacity:d?.2:da,children:(0,ml.jsx)("div",{ref:fc,className:"tl-text-shape-wrapper","data-hastext":!!fb,"data-isediting":k,style:{fontFamily:ja,fontStyle:Ra?"italic":"normal",fontSize:qa,fontWeight:Ha,
padding:Kb,lineHeight:$a,color:qh(jb,"text")},children:k?(0,ml.jsx)("textarea",{ref:Nb,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:fb,onFocus:hc,onChange:qc,onKeyDown:Wb,onBlur:kc,onPointerDown:Fc}):(0,ml.jsxs)(ml.Fragment,{children:[fb,""]})})}))}));gb(this,"setScaleLevel",a=>Mh(this,null,function*(){this.update({scaleLevel:a,
fontSize:bt[null!=a?a:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",ee(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:k},bounds:K}=this;return a?null:(0,ml.jsx)("rect",{width:K.width,height:K.height,rx:d,ry:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}));gb(this,"validateProps",a=>dn(this,a));gb(this,"getBounds",()=>{const [a,d]=this.props.point,[k,K]=this.props.size;return{minX:a,minY:d,maxX:a+k,maxY:d+K,width:k,height:K}});gb(this,"onResizeStart",({isSingle:a})=>
{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});gb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:k=this.props.fontFamily,fontSize:K=this.props.fontSize,fontWeight:da=this.props.fontWeight,lineHeight:ja=this.props.lineHeight,padding:qa=
this.props.padding}=a,[Ha,Ra]=Li(d,{fontFamily:k,fontSize:K,lineHeight:ja,fontWeight:da},qa);return[Ha,Ra]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:d,stroke:k,fontSize:K,fontFamily:da}}=this;a=this.getBounds();return(0,ml.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,ml.jsx)("div",{style:{color:qh(k,"text"),fontSize:K,fontFamily:da,display:"contents"},children:d})})}};
gb(Bq,"id","text");gb(Bq,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});fe([Eg],Bq.prototype,"scaleLevel",1);fe([ig],Bq.prototype,"setScaleLevel",2);var ct=Jf(ca(19)),dt=ca(588),Nr=class extends em{constructor(){super(...arguments);gb(this,"canFlip",!1);gb(this,"canEdit",
!0);gb(this,"canChangeAspectRatio",!1);gb(this,"ReactComponent",ee(({events:a,isErasing:d,asset:k,isEditing:K})=>{const {props:{opacity:da}}=this,ja=ks();var qa=lg();const Ha=qa.selectedIds.has(this.id),Ra=ja||Ha&&!K||"select"!==qa.selectedTool.id;qa=ct.useCallback(fb=>{Ra||fb.stopPropagation()},[Ra]);const {handlers:$a}=ct.useContext(ri);return(0,dt.jsx)(hn,hf(Yd({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:da}},a),{children:(0,dt.jsx)("div",{onWheelCapture:qa,onPointerDown:qa,onPointerUp:qa,
className:"tl-video-container",style:{pointerEvents:ja||!K&&!Ha?"none":"all",overflow:K?"auto":"hidden"},children:k&&(0,dt.jsx)("video",{controls:!0,src:$a?$a.makeAssetUrl(k.src):k.src})})}))}));gb(this,"ReactIndicator",ee(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,dt.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}))}};gb(Nr,"id","video");gb(Nr,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",
clipping:0,isAspectRatioLocked:!0});var Yk=ca(588),hw=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,iw=class extends em{constructor(){super(...arguments);gb(this,"aspectRatio",480/853);gb(this,"canChangeAspectRatio",!1);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:iw.defaultProps.size})});gb(this,"ReactComponent",ee(({events:a,isErasing:d,isEditing:k})=>{const K=lg();return(0,Yk.jsx)(hn,
hf(Yd({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Yk.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:k||K.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,Yk.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Yk.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",
width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,Yk.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,Yk.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,Yk.jsxs)("g",
{children:[(0,Yk.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,Yk.jsx)("g",{children:(0,Yk.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,Yk.jsxs)("g",{fill:"#fff",children:[(0,Yk.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,Yk.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));gb(this,"ReactIndicator",ee(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,Yk.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return dn(this,a)})}get embedId(){var a,d;const k=this.props.url,
K=k.match(hw);return null!=(d=null!=(a=null==K?void 0:K[1])?a:k)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,Yk.jsxs)("g",{children:[(0,Yk.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,Yk.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Yk.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Cq=iw;gb(Cq,"id","youtube");gb(Cq,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});fe([Eg],Cq.prototype,"embedId",1);fe([ig],Cq.prototype,"onYoutubeLinkChange",2);var Dq=Jf(ca(19)),Vo=ca(588),Jy=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,Ky=class extends em{constructor(){super(...arguments);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"initialHeightCalculated",
!0);gb(this,"getInnerHeight",null);gb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:Ky.defaultProps.size})});gb(this,"ReactComponent",ee(({events:a,isErasing:d,isEditing:k})=>{const {renderers:{Tweet:K}}=Dq.useContext(ri),da=lg(),ja=Dq.useRef(null),[,qa]=this.useComponentSize(ja);Dq.useEffect(()=>{var Ha,Ra;const $a=null!=(Ra=null==(Ha=this.getInnerHeight)?void 0:Ha.call(this))?Ra:qa;qa&&1<Math.abs($a-this.props.size[1])&&(this.update({size:[this.props.size[0],$a]}),da.persist(!0))},[qa]);
Dq.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();da.persist(!0)})},[this.initialHeightCalculated]);return(0,Vo.jsx)(hn,hf(Yd({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Vo.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:k||da.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,Vo.jsx)("div",{ref:ja,children:(0,Vo.jsx)(K,{tweetId:this.embedId})}):null})}))}));
gb(this,"ReactIndicator",ee(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,Vo.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}));gb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});gb(this,"onResize",(a,d)=>{var k;const {bounds:K,rotation:da,scale:[ja,qa]}=d;a=[...this.scale];0>ja&&(a[0]*=-1);0>qa&&(a[1]*=
-1);d=null!=(k=this.getAutoResizeHeight())?k:K.height;return this.update({point:[K.minX,K.minY],size:[Math.max(1,K.width),Math.max(1,d)],scale:a,rotation:da})});gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return dn(this,a)})}get embedId(){var a,d;const k=this.props.url,K=k.match(Jy);return null!=(d=null!=(a=null==K?void 0:K[1])?a:k)?d:""}useComponentSize(a,d=""){const [k,K]=Dq.useState([0,0]),da=lg();Dq.useEffect(()=>
{if(null==a?0:a.current){const ja=d?a.current.querySelector(d):a.current;if(ja){const qa=()=>{const {width:Ra,height:$a}=ja.getBoundingClientRect(),fb=be.div([Ra,$a],da.viewport.camera.zoom);K(fb);return fb};qa();this.getInnerHeight=()=>qa()[1];const Ha=new ResizeObserver(()=>{qa()});Ha.observe(ja);return()=>{Ha.disconnect()}}}return()=>{}},[a,d]);return k}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,Vo.jsxs)("g",
{children:[(0,Vo.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,Vo.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Vo.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Eq=Ky;gb(Eq,"id","tweet");gb(Eq,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});fe([Eg],Eq.prototype,"embedId",1);fe([ig],Eq.prototype,"onTwitterLinkChange",2);var Ep=Jf(ca(19)),zu=ca(588),Zk=class extends em{constructor(){super(...arguments);gb(this,"frameRef",Ep.createRef());gb(this,"canChangeAspectRatio",!0);gb(this,"canFlip",!0);gb(this,"canEdit",!0);gb(this,"ReactComponent",
ee(({events:a,asset:d,isErasing:k,isEditing:K})=>{Ep.useRef(null);const {handlers:da}=Ep.useContext(ri);lg();const ja=ks();return(0,zu.jsx)(hn,hf(Yd({style:{overflow:"hidden",pointerEvents:"all",opacity:k?.2:1}},a),{children:d?(0,zu.jsx)("embed",{src:da?da.inflateAsset(d.src).url:d.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!ja&&K?"all":"none"}}):null}))}));gb(this,"ReactIndicator",ee(()=>{const {props:{size:[a,
d],isLocked:k}}=this;return(0,zu.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}))}};gb(Zk,"id","pdf");gb(Zk,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});ca(588);var et=[yq,Kr,Ze,yu,Nr,on,Cp,hm,Bq,Cq,Eq,zq,Ap,Zk,jk,vu],Ql=class extends lp{constructor(){super(...arguments);gb(this,"Shape",yq)}};gb(Ql,"id","box");gb(Ql,"shortcut","whiteboard/rectangle");var Ly=class extends lp{constructor(){super(...arguments);
gb(this,"Shape",Kr)}};gb(Ly,"id","ellipse");gb(Ly,"shortcut","whiteboard/ellipse");var Cl=class extends fv{};gb(Cl,"id","erase");gb(Cl,"shortcut","whiteboard/eraser");var Rn=class extends Ot{constructor(){super(...arguments);gb(this,"Shape",Ze);gb(this,"simplify",!0);gb(this,"simplifyTolerance",.618)}};gb(Rn,"id","highlighter");gb(Rn,"shortcut","whiteboard/highlighter");var jw=class extends gv{constructor(){super(...arguments);gb(this,"Shape",on)}};gb(jw,"id","line");gb(jw,"shortcut","whiteboard/connector");
var My=class extends Ot{constructor(){super(...arguments);gb(this,"Shape",Cp);gb(this,"simplify",!1)}};gb(My,"id","pencil");gb(My,"shortcut","whiteboard/pencil");var XC=class extends lp{constructor(){super(...arguments);gb(this,"Shape",hm)}};gb(XC,"id","polygon");var kk=class extends hv{constructor(){super(...arguments);gb(this,"Shape",Bq)}};gb(kk,"id","text");gb(kk,"shortcut","whiteboard/text");var Fp=class extends lp{constructor(){super(...arguments);gb(this,"Shape",Cq)}};gb(Fp,"id","youtube");
var pn=class extends Yh{constructor(){super(...arguments);gb(this,"creatingShape");gb(this,"offset",[0,0]);gb(this,"onEnter",()=>{this.app.history.pause();Gc(()=>{var a=be.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(a=be.snap(a,8));this.creatingShape=a=new jk({id:tk(),parentId:this.app.currentPage.id,point:a,size:jk.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});
gb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});gb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};gb(pn,"id","creating");var kw=class extends Yh{constructor(){super(...arguments);
gb(this,"cursor","crosshair");gb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};gb(kw,"id","idle");var gh=class extends bq{constructor(){super(...arguments);gb(this,"Shape",jk);gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};gb(gh,"id","logseq-portal");gb(gh,"shortcut","whiteboard/portal");gb(gh,"states",[kw,pn]);gb(gh,"initial","idle");var YC=class extends lp{constructor(){super(...arguments);gb(this,"Shape",Ap)}};gb(YC,"id","youtube");var ZC=class extends lp{constructor(){super(...arguments);
gb(this,"Shape",zq)}};gb(ZC,"id","iframe");var $C=Jf(ca(591)),Rg=ca(588),ft=new Map(et.map(a=>[a.id,a])),Sn=class{constructor(a){gb(this,"shapes");gb(this,"pageId");gb(this,"assets");a&&this.load(a)}load(a){var d;const k=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==k?void 0:k.id;this.assets=a.assets;this.shapes=null==k?void 0:k.shapes.map(K=>{var da=K.type;if(!da)throw Error("No shape type provided.");const ja=ft.get(da);if(!ja)throw Error(`Could not find shape class for ${da}`);
return new ja(K)}).filter(K=>"group"!==K.type)}generatePreviewJsx(a,d){var k,K;const da=[...(null!=(k=this.shapes)?k:[]).map($a=>$a.getRotatedBounds())];(k=null==a?void 0:a.currentView)&&da.push(k);let ja=tf.getCommonBounds(da);if(!ja)return null;ja=tf.expandBounds(ja,16);ja=d?tf.ensureRatio(ja,d):ja;const qa=$a=>[($a[0]-ja.minX).toFixed(2),($a[1]-ja.minY).toFixed(2)],[Ha,Ra]=k?qa([k.minX,k.minY]):[0,0];return ja&&(0,Rg.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ja.minX.toFixed(2),
"data-common-bound-y":ja.minY.toFixed(2),"data-common-bound-width":ja.width.toFixed(2),"data-common-bound-height":ja.height.toFixed(2),viewBox:[0,0,ja.width,ja.height].join(" "),children:[(0,Rg.jsx)("defs",{children:k&&(0,Rg.jsxs)(Rg.Fragment,{children:[(0,Rg.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Ha}, ${Ra})`,width:k.width,height:k.height}),(0,Rg.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,Rg.jsx)("rect",{width:ja.width,height:ja.height,fill:"white"}),(0,Rg.jsx)("use",
{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,Rg.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(K=this.shapes)?void 0:K.map($a=>{var fb,jb;const {bounds:Kb,props:{rotation:Nb}}=$a,[Hb,fc]=qa([Kb.minX,Kb.minY]),qc=+(180*((null!=Nb?Nb:0)+(null!=(fb=Kb.rotation)?fb:0))/Math.PI).toFixed(2),[Wb,kc]=[(Kb.width/2).toFixed(2),(Kb.height/2).toFixed(2)];return(0,Rg.jsx)("g",{transform:[`translate(${Hb}, ${fc})`,`rotate(${qc}, ${Wb}, ${kc})`].join(" "),children:$a.getShapeSVGJsx({assets:null!=
(jb=this.assets)?jb:[]})},$a.id)})}),(0,Rg.jsx)("rect",{mask:k?`url(#${this.pageId}-camera-mask)`:"",width:ja.width,height:ja.height,fill:"transparent"}),k&&(0,Rg.jsx)("use",{id:"minimap-camera-rect","data-x":Ha,"data-y":Ra,"data-width":k.width,"data-height":k.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?$C.default.renderToString(a):""}},Fq=Jf(ca(19)),gt=ca(588),Or=Fq.forwardRef((a,
d)=>{var {value:k,className:K}=a;a=zf(a,["autoResize","value","className"]);return(0,gt.jsx)("div",{className:"tl-input"+(K?" "+K:""),children:(0,gt.jsxs)("div",{className:"tl-input-sizer",children:[(0,gt.jsx)("div",{className:"tl-input-hidden",children:k}),(0,gt.jsx)("input",Yd({ref:d,value:k,className:"tl-text-input",type:"text"},a))]})})}),Fh=ca(588),Gq=({type:a,active:d})=>(0,Fh.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,Fh.jsx)("i",{className:`tie tie-${({B:"block",P:"page",
WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),Pr=(a,d)=>(0,Fh.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((k,K)=>1===K%2?(0,Fh.jsx)("mark",{className:"tl-highlighted",children:k}):k).map((k,K)=>(0,Fh.jsx)(kl.default.Fragment,{children:k},K))}),qn=(a,d)=>{const {handlers:k}=kl.default.useContext(ri),[K,da]=kl.default.useState(null),ja=ye(a,200);kl.default.useEffect(()=>{let qa=
!1;if(0<ja.length){const Ha={"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?Ha["pages?"]=!1:"P"===d&&(Ha["blocks?"]=!1);k.search(ja,Ha).then(Ra=>{qa||da(Ra)})}else da(null);return()=>{qa=!0}},[ja,null==k?void 0:k.search]);return K},Au=ee(({className:a,style:d,placeholder:k,onChange:K,onBlur:da,onAddBlock:ja})=>{const [qa,Ha]=kl.default.useState(jk.defaultSearchQuery),[Ra,$a]=kl.default.useState(jk.defaultSearchFilter),fb=kl.default.useRef(null),{handlers:jb,renderers:Kb}=kl.default.useContext(ri),
Nb=jb.t,Hb=kl.default.useCallback(Zd=>{var Ee;setTimeout(()=>K(Zd));null==(Ee=fb.current)?void 0:Ee.blur();Zd&&(jk.defaultSearchQuery="",jk.defaultSearchFilter=null)},[]),fc=kl.default.useCallback(Zd=>{if(Zd=null==jb?void 0:jb.addNewBlock(Zd))Hb(Zd),null==ja?void 0:ja(Zd);return Zd},[ja]),qc=kl.default.useRef(null),[Wb,kc]=kl.default.useState(0),hc=qn(qa,Ra),[Fc,Mc]=kl.default.useState("circle-plus"),[ud,Jd]=kl.default.useState(!1);kl.default.useEffect(()=>{setTimeout(()=>{var Zd;null==(Zd=fb.current)?
void 0:Zd.focus()})},[Ra]);kl.default.useEffect(()=>{jk.defaultSearchQuery=qa;jk.defaultSearchFilter=Ra},[qa,Ra]);const Qe=kl.default.useMemo(()=>{var Zd;const Ee=[],gf=null==Kb?void 0:Kb.Breadcrumb;if(!gf||!jb)return[];ja&&Ee.push({actionIcon:"circle-plus",onChosen:()=>!!fc(qa),element:(0,Fh.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Fh.jsx)(Gq,{active:!0,type:"BA"}),0<qa.length?(0,Fh.jsxs)(Fh.Fragment,{children:[(0,Fh.jsx)("strong",{children:Nb("whiteboard/new-block")}),qa]}):
(0,Fh.jsx)("strong",{children:Nb("whiteboard/new-block-no-colon")})]})});(null==(Zd=null==hc?void 0:hc.pages)?0:Zd.some(Re=>Re.toLowerCase()===qa.toLowerCase()))||!qa||Ee.push({actionIcon:"circle-plus",onChosen:()=>{Hb(qa);return!0},element:(0,Fh.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Fh.jsx)(Gq,{active:!0,type:"PA"}),(0,Fh.jsx)("strong",{children:Nb("whiteboard/new-page")}),qa]})},{actionIcon:"circle-plus",onChosen:()=>{null==jb?void 0:jb.addNewWhiteboard(qa);Hb(qa);return!0},
element:(0,Fh.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Fh.jsx)(Gq,{active:!0,type:"WA"}),(0,Fh.jsx)("strong",{children:Nb("whiteboard/new-whiteboard")}),qa]})});0===qa.length&&null===Ra&&Ee.push({actionIcon:"search",onChosen:()=>{$a("B");return!0},element:(0,Fh.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Fh.jsx)(Gq,{type:"BS"}),Nb("whiteboard/search-only-blocks")]})},{actionIcon:"search",onChosen:()=>{$a("P");return!0},element:(0,Fh.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,Fh.jsx)(Gq,{type:"PS"}),Nb("whiteboard/search-only-pages")]})});Ra&&"P"!==Ra||!hc||!hc.pages||Ee.push(...hc.pages.map(Re=>({actionIcon:"search",onChosen:()=>{Hb(Re);return!0},element:(0,Fh.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Fh.jsx)(Gq,{type:jb.isWhiteboardPage(Re)?"WP":"P"}),Pr(Re,qa)]})})));Ra&&"B"!==Ra||!hc||!hc.blocks||Ee.push(...hc.blocks.filter(Re=>Re.content&&Re.uuid).map(({content:Re,uuid:cf})=>{const Gd=jb.queryBlockByUUID(cf);return{actionIcon:"search",
onChosen:()=>{var nd,Ad,id;return Gd?(Hb(cf),null==(id=null==(Ad=null==(nd=window.logseq)?void 0:nd.api)?void 0:Ad.set_blocks_id)?void 0:id.call(Ad,[cf]),!0):!1},element:Gd?(0,Fh.jsxs)(Fh.Fragment,{children:[(0,Fh.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Fh.jsx)(Gq,{type:"B"}),(0,Fh.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,Fh.jsx)(gf,{blockId:cf})})]}),(0,Fh.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Fh.jsx)("div",{className:"tl-quick-search-option-placeholder"}),
Pr(Re,qa)]})]}):(0,Fh.jsx)("div",{className:"tl-quick-search-option-row",children:Nb("whiteboard/cache-outdated")})}}));return Ee},[qa,Ra,hc,null==Kb?void 0:Kb.Breadcrumb,jb]);kl.default.useEffect(()=>{const Zd=Ee=>{var gf,Re;let cf=Wb;"ArrowDown"===Ee.key?cf=Math.min(Qe.length-1,Wb+1):"ArrowUp"===Ee.key?cf=Math.max(0,Wb-1):"Enter"===Ee.key?(null==(gf=Qe[Wb])?void 0:gf.onChosen(),Ee.stopPropagation(),Ee.preventDefault()):"Backspace"===Ee.key&&0===qa.length?$a(null):"Escape"===Ee.key&&Hb("");cf!==
Wb&&(gf=Qe[cf],kc(cf),Mc(gf.actionIcon),Ee.stopPropagation(),Ee.preventDefault(),(Ee=null==(Re=qc.current)?void 0:Re.querySelector(".tl-quick-search-option:nth-child("+(cf+1)+")"))&&(null==Ee?void 0:Ee.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",Zd,!0);return()=>{document.removeEventListener("keydown",Zd,!0)}},[Qe,Wb,qa]);return(0,Fh.jsxs)("div",{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,Fh.jsx)(bH,{icon:Fc,onClick:()=>{var Zd;null==(Zd=Qe[Wb])?void 0:
Zd.onChosen()}}),(0,Fh.jsxs)("div",{className:"tl-quick-search-input-container",children:[Ra&&(0,Fh.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,Fh.jsx)(Gq,{type:Ra}),"B"===Ra?"Search blocks":"Search pages",(0,Fh.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>$a(null),children:(0,Fh.jsx)(bh,{name:"x"})})]}),(0,Fh.jsx)(Or,{ref:fb,type:"text",value:qa,className:"tl-quick-search-input",placeholder:null!=k?k:"Create or search your graph...",onChange:Zd=>
Ha(Zd.target.value),onKeyDown:Zd=>{"Enter"===Zd.key&&Hb(qa);Zd.stopPropagation()},onFocus:()=>{Jd(!0)},onBlur:()=>{Jd(!1);null==da?void 0:da()}})]}),0<Qe.length&&(0,Fh.jsx)("div",{onWheelCapture:Zd=>Zd.stopPropagation(),className:"tl-quick-search-options",ref:qc,style:{visibility:ud?"visible":"hidden",pointerEvents:ud?"all":"none"},children:(0,Fh.jsx)(So,{style:{height:40*Math.min(Math.max(1,Qe.length),12)},totalCount:Qe.length,itemContent:Zd=>{const {actionIcon:Ee,onChosen:gf,element:Re}=Qe[Zd];
return(0,Fh.jsx)("div",{"data-focused":Zd===Wb,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Mc(Ee);kc(Zd)},onPointerDownCapture:cf=>{gf()&&(cf.stopPropagation(),cf.preventDefault())},children:Re},Zd)}})})]})}),dj=ca(588),lw=ee(function(a){var {pageId:d,portalType:k,refs:K,side:da,onRefsChange:ja}=a;a=zf(a,"pageId portalType shapeType refs side onRefsChange".split(" "));const {handlers:{t:qa}}=ly.default.useContext(ri),Ha=K.length+(d?1:0),Ra=0===K.length,$a=jb=>{jb&&!K.includes(jb)&&
Ra&&ja([...K,jb])},fb=!(!d||!k);return(0,dj.jsx)(mq,hf(Yd({},a),{side:da,align:"start",alignOffset:-6,label:(0,dj.jsx)(ce,{content:qa("whiteboard/link"),sideOffset:14,children:(0,dj.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,dj.jsx)(bh,{name:0<Ha?"link":"add-link"}),0<Ha&&(0,dj.jsx)("div",{className:"tl-shape-links-count",children:Ha})]})}),children:(0,dj.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":fb,children:[fb&&(0,dj.jsxs)("div",
{className:"tl-shape-links-reference-panel",children:[(0,dj.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,dj.jsx)(bh,{className:"opacity-50",name:"internal-link"}),qa("whiteboard/references")]}),(0,dj.jsx)(Su,{type:k,id:d})]}),(0,dj.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,dj.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,dj.jsx)(bh,{className:"opacity-50",name:"add-link"}),qa("whiteboard/link-to-any-page-or-block")]}),
Ra&&(0,dj.jsx)(Au,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:qa("whiteboard/start-typing-to-search"),onChange:$a}),0<K.length&&(0,dj.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:K.map((jb,Kb)=>(0,dj.jsx)(Su,{id:jb,type:Aj(jb)?"B":"P",onRemove:()=>{ja(K.filter((Nb,Hb)=>Kb!==Hb))},showContent:!0},jb))})]})]})}))}),ij=Jf(ca(19)),[Ny]=Bh("ToggleGroup",[vv]),Oy=vv(),Wo=ij.default.forwardRef((a,d)=>{const {type:k}=a;a=zf(a,["type"]);if("single"===k)return ij.default.createElement(JH,
Ge({},a,{ref:d}));if("multiple"===k)return ij.default.createElement(cD,Ge({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[aD,bD]=Ny("ToggleGroup"),JH=ij.default.forwardRef((a,d)=>{const {value:k,defaultValue:K,onValueChange:da=()=>{}}=a,ja=zf(a,["value","defaultValue","onValueChange"]),[qa,Ha]=Dc({prop:k,defaultProp:K,onChange:da});return ij.default.createElement(aD,{scope:a.__scopeToggleGroup,type:"single",value:qa?[qa]:[],onItemActivate:Ha,onItemDeactivate:ij.default.useCallback(()=>
Ha(""),[Ha])},ij.default.createElement(dD,Ge({},ja,{ref:d})))}),cD=ij.default.forwardRef((a,d)=>{const {value:k,defaultValue:K,onValueChange:da=()=>{}}=a,ja=zf(a,["value","defaultValue","onValueChange"]),[qa=[],Ha]=Dc({prop:k,defaultProp:K,onChange:da}),Ra=ij.default.useCallback(fb=>Ha((jb=[])=>[...jb,fb]),[Ha]),$a=ij.default.useCallback(fb=>Ha((jb=[])=>jb.filter(Kb=>Kb!==fb)),[Ha]);return ij.default.createElement(aD,{scope:a.__scopeToggleGroup,type:"multiple",value:qa,onItemActivate:Ra,onItemDeactivate:$a},
ij.default.createElement(dD,Ge({},ja,{ref:d})))}),[KH,Bu]=Ny("ToggleGroup"),dD=ij.default.forwardRef((a,d)=>{const {__scopeToggleGroup:k,disabled:K=!1,rovingFocus:da=!0,orientation:ja,dir:qa,loop:Ha=!0}=a;var Ra=zf(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=Oy(k);const $a=ng(qa);Ra=Yd({role:"group",dir:$a},Ra);return ij.default.createElement(KH,{scope:k,rovingFocus:da,disabled:K},da?ij.default.createElement(OB,Ge({asChild:!0},a,{orientation:ja,dir:$a,loop:Ha}),
ij.default.createElement(Rj.div,Ge({},Ra,{ref:d}))):ij.default.createElement(Rj.div,Ge({},Ra,{ref:d})))}),LH=ij.default.forwardRef((a,d)=>{var k=bD("ToggleGroupItem",a.__scopeToggleGroup);const K=Bu("ToggleGroupItem",a.__scopeToggleGroup),da=Oy(a.__scopeToggleGroup);k=k.value.includes(a.value);const ja=K.disabled||a.disabled;a=hf(Yd({},a),{pressed:k,disabled:ja});const qa=ij.default.useRef(null);return K.rovingFocus?ij.default.createElement(PB,Ge({asChild:!0},da,{focusable:!ja,active:k,ref:qa}),ij.default.createElement(eD,
Ge({},a,{ref:d}))):ij.default.createElement(eD,Ge({},a,{ref:d}))}),eD=ij.default.forwardRef((a,d)=>{const {__scopeToggleGroup:k,value:K}=a,da=zf(a,["__scopeToggleGroup","value"]),ja=bD("ToggleGroupItem",k);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return ij.default.createElement(IB,Ge({},"single"===ja.type?a:void 0,da,{ref:d,onPressedChange:qa=>{if(qa)ja.onItemActivate(K);else ja.onItemDeactivate(K)}}))}),Py=Wo,qo=LH,ro=ca(588),ki=ca(588),fD="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),
MH=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],Bm=new Map,Qy={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),
line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},NH=Object.entries(Qy).filter(([,a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),OH=ee(()=>{const a=lg(),{handlers:{t:d}}=Wk.default.useContext(ri),k=Za("AutoResizing"),K=k.every(da=>
da.props.isAutoResizing);return(0,ki.jsx)(Me,{tooltip:d("whiteboard/auto-resize"),toggle:k.every(da=>"logseq-portal"===da.props.type),className:"tl-button",pressed:K,onPressedChange:da=>{k.forEach(ja=>{if("logseq-portal"===ja.props.type)ja.update({isAutoResizing:da});else ja.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},children:(0,ki.jsx)(bh,{name:"dimensions"})})}),PH=ee(()=>{const a=lg();var {handlers:{t:d}}=Wk.default.useContext(ri);const k=Za("LogseqPortalViewMode"),K=k.every(da=>
da.collapsed);if(!K&&!k.every(da=>!da.collapsed))return null;d=(0,ki.jsxs)("div",{className:"flex",children:[K?d("whiteboard/expand"):d("whiteboard/collapse"),(0,ki.jsx)(fk,{action:K?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,ki.jsx)(Me,{tooltip:d,toggle:k.every(da=>"logseq-portal"===da.props.type),className:"tl-button",pressed:K,onPressedChange:()=>a.api.setCollapsed(!K),children:(0,ki.jsx)(bh,{name:K?"object-expanded":"object-compact"})})}),Xo=ee(()=>{const {handlers:{isMobile:a}}=
Wk.default.useContext(ri);var d=Za("ScaleLevel");d=1<(new Set(d.map(k=>k.scaleLevel))).size?"":d[0].scaleLevel;return(0,ki.jsx)(Tr,{scaleLevel:d,compact:a()})}),QH=ee(()=>{const a=lg(),{handlers:{t:d}}=Wk.default.useContext(ri),k=Za("IFrameSource")[0],K=Wk.default.useCallback(ja=>{k.onIFrameSourceChange(ja.target.value.trim().toLowerCase());a.persist()},[]),da=Wk.default.useCallback(()=>{k.reload()},[]);return(0,ki.jsxs)("span",{className:"flex gap-3",children:[(0,ki.jsx)(Xd,{tooltip:d("whiteboard/reload"),
type:"button",onClick:da,children:(0,ki.jsx)(bh,{name:"refresh"})}),(0,ki.jsx)(Or,{title:d("whiteboard/website-url"),className:"tl-iframe-src",value:`${k.props.url}`,onChange:K}),(0,ki.jsx)(Xd,{tooltip:d("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(k.props.url),children:(0,ki.jsx)(bh,{name:"external-link"})})]})}),RH=ee(()=>{const a=lg(),{handlers:{t:d}}=Wk.default.useContext(ri),k=Za("YoutubeLink")[0],K=Wk.default.useCallback(da=>{k.onYoutubeLinkChange(da.target.value);a.persist()},
[]);return(0,ki.jsxs)("span",{className:"flex gap-3",children:[(0,ki.jsx)(Or,{title:d("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${k.props.url}`,onChange:K}),(0,ki.jsx)(Xd,{tooltip:d("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var da,ja,qa;return null==(qa=null==(ja=null==(da=window.logseq)?void 0:da.api)?void 0:ja.open_external_link)?void 0:qa.call(ja,k.props.url)},children:(0,ki.jsx)(bh,{name:"external-link"})})]})}),SH=ee(()=>{const a=lg(),{handlers:{t:d}}=Wk.default.useContext(ri),
k=Za("TwitterLink")[0],K=Wk.default.useCallback(da=>{k.onTwitterLinkChange(da.target.value);a.persist()},[]);return(0,ki.jsxs)("span",{className:"flex gap-3",children:[(0,ki.jsx)(Or,{title:d("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${k.props.url}`,onChange:K}),(0,ki.jsx)(Xd,{tooltip:d("whiteboard/open-twitter-url"),type:"button",onClick:()=>{var da,ja,qa;return null==(qa=null==(ja=null==(da=window.logseq)?void 0:da.api)?void 0:ja.open_external_link)?void 0:qa.call(ja,k.props.url)},
children:(0,ki.jsx)(bh,{name:"external-link"})})]})}),TH=ee(()=>{const a=lg(),{handlers:{t:d,setCurrentPdf:k}}=Wk.default.useContext(ri),K=a.selectedShapesArray[0];return(0,ki.jsx)(Xd,{tooltip:d("whiteboard/edit-pdf"),type:"button",onClick:()=>k(a.assets[K.props.assetId].src),children:(0,ki.jsx)(bh,{name:"edit"})})}),UH=ee(()=>{const a=lg(),{handlers:{t:d}}=Wk.default.useContext(ri);var k=Za("NoFill");const K=Wk.default.useCallback(da=>{a.selectedShapesArray.forEach(ja=>ja.update({noFill:da}));a.persist()},
[]);k=k.every(da=>da.props.noFill);return(0,ki.jsx)(Me,{tooltip:d("whiteboard/fill"),className:"tl-button",pressed:k,onPressedChange:K,children:(0,ki.jsx)(bh,{name:k?"droplet-off":"droplet"})})}),VH=ee(()=>{const a=lg(),d=Za("Swatch"),k=Wk.default.useCallback(da=>{a.selectedShapesArray.forEach(ja=>{ja.update({fill:da,stroke:da})});a.persist()},[]),K=Wk.default.useCallback(da=>{a.selectedShapesArray.forEach(ja=>{ja.update({opacity:da})});a.persist()},[]);return(0,ki.jsx)(lm,{popoverSide:"top",color:d[0].props.noFill?
d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:K,setColor:k})}),gD=ee(()=>{const a=lg(),d=Wk.default.useCallback(k=>{a.api.convertShapes(k.currentTarget.dataset.tool)},[]);return(0,ki.jsx)($x,{popoverSide:"top",chevron:!1,setGeometry:d})}),WH=ee(()=>{const a=lg(),{handlers:{t:d}}=Wk.default.useContext(ri),k=Za("StrokeType"),K=k.every(da=>"dashed"===da.props.strokeType)?"dashed":k.every(da=>"line"===da.props.strokeType)?"line":"mixed";return(0,ki.jsx)(ha,{title:d("whiteboard/stroke-type"),
options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:K,onValueChange:da=>{k.forEach(ja=>{ja.update({strokeType:da})});a.persist()}})}),XH=ee(()=>{const a=lg(),{handlers:{t:d}}=Wk.default.useContext(ri),k=Za("ArrowMode");var K=k.every(ja=>{var qa;return"arrow"===(null==(qa=ja.props.decorations)?void 0:qa.start)});const da=k.every(ja=>{var qa;return"arrow"===(null==(qa=ja.props.decorations)?void 0:qa.end)});K=[K?"start":null,da?"end":null].filter(bg);
return(0,ki.jsx)(Aa,{title:d("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:K,onValueChange:ja=>{k.forEach(qa=>{var Ha=qa.update;var Ra={start:ja.includes("start")?"arrow":null,end:ja.includes("end")?"arrow":null};Ha.call(qa,{decorations:Ra})});a.persist()}})}),YH=ee(()=>{const a=lg(),{handlers:{t:d}}=Wk.default.useContext(ri),k=Za("TextStyle"),K=k.every(ja=>500<ja.props.fontWeight),da=k.every(ja=>ja.props.italic);return(0,ki.jsxs)("span",
{className:"flex gap-1",children:[(0,ki.jsx)(Me,{tooltip:d("whiteboard/bold"),className:"tl-button",pressed:K,onPressedChange:ja=>{k.forEach(qa=>{qa.update({fontWeight:ja?700:400});qa.onResetBounds()});a.persist()},children:(0,ki.jsx)(bh,{name:"bold"})}),(0,ki.jsx)(Me,{tooltip:d("whiteboard/italic"),className:"tl-button",pressed:da,onPressedChange:ja=>{k.forEach(qa=>{qa.update({italic:ja});qa.onResetBounds()});a.persist()},children:(0,ki.jsx)(bh,{name:"italic"})})]})}),hD=ee(()=>{var a;const d=lg(),
k=d.selectedShapesArray[0];return(0,ki.jsx)(lw,{onRefsChange:K=>{k.update({refs:K});d.persist()},refs:null!=(a=k.props.refs)?a:[],shapeType:k.props.type,side:"right",pageId:"logseq-portal"===k.props.type?k.props.pageId:void 0,portalType:"logseq-portal"===k.props.type?k.props.blockType:void 0})});Bm.set("Geometry",gD);Bm.set("AutoResizing",OH);Bm.set("LogseqPortalViewMode",PH);Bm.set("ScaleLevel",Xo);Bm.set("YoutubeLink",RH);Bm.set("TwitterLink",SH);Bm.set("IFrameSource",QH);Bm.set("NoFill",UH);Bm.set("Swatch",
VH);Bm.set("StrokeType",WH);Bm.set("ArrowMode",XH);Bm.set("TextStyle",YH);Bm.set("Links",hD);Bm.set("EditPdf",TH);var iD=a=>{var d;return(null!=(d=Qy[a])?d:[]).filter(bg)},ZH=a=>{const d=a.map(K=>K.props.type),k=new Set(0<a.length?iD(d[0]):[]);for(let K=1;K<d.length&&0<k.size;K++){const da=iD(d[K]);k.forEach(ja=>{da.includes(ja)||k.delete(ja)})}1<a.length&&MH.forEach(K=>{k.has(K)&&k.delete(K)});return Array.from(k).sort((K,da)=>fD.indexOf(K)-fD.indexOf(da)).map(K=>Bm.get(K))},ht=ca(588),$H=ee(({shapes:a,
offsets:d,hidden:k})=>{const K=lg(),da=Vs.useRef(null),ja=Vs.useRef(null);Vs.useLayoutEffect(()=>{setTimeout(()=>{const Ha=ja.current;if(Ha){var {offsetWidth:Ra,offsetHeight:$a}=Ha;da.current=[Ra,$a]}})});Vs.useLayoutEffect(()=>{var Ha;const Ra=ja.current;if(Ra){var $a=null!=(Ha=da.current)?Ha:[0,0];Ha=0;if(116>d.top){var fb=d.height/2+40;140>d.bottom&&(fb+=d.bottom-140)}else fb=-(d.height/2+40);16>d.left+d.width/2-$a[0]/2?Ha+=-(d.left+d.width/2-$a[0]/2-16):16>d.right+d.width/2-$a[0]/2&&(Ha+=d.right+
d.width/2-$a[0]/2-16);var [jb,Kb]=[Ha,fb];Ra.style.transform=`translateX(${jb}px) translateY(${Kb}px)`}},[d]);if(!K)return null;const qa=ZH(a);return(0,ht.jsx)(hn,{centered:!0,children:0<qa.length&&(0,ht.jsx)("div",{ref:ja,className:"tl-toolbar tl-context-bar",style:{visibility:k?"hidden":"visible",pointerEvents:k?"none":"all"},children:qa.map((Ha,Ra)=>(0,ht.jsxs)(Vs.Fragment,{children:[(0,ht.jsx)(Ha,{}),Ra<qa.length-1&&(0,ht.jsx)(lq,{className:"tl-toolbar-separator",orientation:"vertical"})]},Ra))})})}),
Ry=Jf(ca(19)),lk=ca(19),[jD]=Bh("ContextMenu",[Fs]),Gp=Fs(),[Cu,mw]=jD("ContextMenu"),Sy=(0,lk.forwardRef)((a,d)=>{const {__scopeContextMenu:k,disabled:K=!1}=a,da=zf(a,["__scopeContextMenu","disabled"]),ja=mw("ContextMenuTrigger",k),qa=Gp(k),Ha=(0,lk.useRef)({x:0,y:0}),Ra=(0,lk.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(Yd({width:0,height:0},Ha.current))}),$a=(0,lk.useRef)(0),fb=(0,lk.useCallback)(()=>window.clearTimeout($a.current),[]);(0,lk.useEffect)(()=>fb,[fb]);(0,lk.useEffect)(()=>
void(K&&fb()),[K,fb]);return(0,lk.createElement)(lk.Fragment,null,(0,lk.createElement)(kq,Ge({},qa,{virtualRef:Ra})),(0,lk.createElement)(Rj.span,Ge({"data-state":ja.open?"open":"closed","data-disabled":K?"":void 0},da,{ref:d,style:Yd({WebkitTouchCallout:"none"},a.style),onContextMenu:K?a.onContextMenu:Sf(a.onContextMenu,jb=>{fb();Ha.current={x:jb.clientX,y:jb.clientY};ja.onOpenChange(!0);jb.preventDefault()}),onPointerDown:K?a.onPointerDown:Sf(a.onPointerDown,Rb(jb=>{fb();$a.current=window.setTimeout(()=>
{Ha.current={x:jb.clientX,y:jb.clientY};ja.onOpenChange(!0)},700)})),onPointerMove:K?a.onPointerMove:Sf(a.onPointerMove,Rb(fb)),onPointerCancel:K?a.onPointerCancel:Sf(a.onPointerCancel,Rb(fb)),onPointerUp:K?a.onPointerUp:Sf(a.onPointerUp,Rb(fb))})))}),kD=(0,lk.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;const K=zf(a,["__scopeContextMenu"]),da=mw("ContextMenuContent",k);k=Gp(k);const ja=(0,lk.useRef)(!1);return(0,lk.createElement)(Cv,Ge({},k,K,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:qa=>
{var Ha;null===(Ha=a.onCloseAutoFocus)||void 0===Ha||Ha.call(a,qa);!qa.defaultPrevented&&ja.current&&qa.preventDefault();ja.current=!1},onInteractOutside:qa=>{var Ha;null===(Ha=a.onInteractOutside)||void 0===Ha||Ha.call(a,qa);qa.defaultPrevented||da.modal||(ja.current=!0)},style:hf(Yd({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),$k=(0,lk.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;a=zf(a,["__scopeContextMenu"]);k=Gp(k);return(0,lk.createElement)(Ux,
Ge({},k,a,{ref:d}))}),Hp=(0,lk.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;a=zf(a,["__scopeContextMenu"]);k=Gp(k);return(0,lk.createElement)(rH,Ge({},k,a,{ref:d}))}),Hq=a=>{const {__scopeContextMenu:d,children:k,onOpenChange:K,dir:da,modal:ja=!0}=a,[qa,Ha]=(0,lk.useState)(!1);a=Gp(d);const Ra=Ii(K),$a=(0,lk.useCallback)(fb=>{Ha(fb);Ra(fb)},[Ra]);return(0,lk.createElement)(Cu,{scope:d,open:qa,onOpenChange:$a,modal:ja},(0,lk.createElement)(ur,Ge({},a,{dir:da,open:qa,onOpenChange:$a,modal:ja}),
k))},nf=ca(588),lD=ee(function({children:a,collisionRef:d}){var k,K,da,ja,qa,Ha,Ra,$a,fb,jb,Kb,Nb,Hb,fc,qc,Wb,kc;const hc=lg(),{handlers:Fc}=Ry.useContext(ri),Mc=Fc.t,ud=Ry.useRef(null),Jd=Zd=>{Zd();hc.transition("select")},Qe=Ry.useMemo(()=>wf(),[]);return(0,nf.jsxs)(Hq,{onOpenChange:Zd=>{Zd&&!hc.isIn("select.contextMenu")?hc.transition("select").selectedTool.transition("contextMenu"):!Zd&&hc.isIn("select.contextMenu")&&hc.selectedTool.transition("idle")},children:[(0,nf.jsx)(Sy,{disabled:hc.editingShape&&
0!==Object.keys(hc.editingShape).length,children:a}),(0,nf.jsx)(kD,{className:"tl-menu tl-context-menu",ref:ud,onEscapeKeyDown:()=>hc.transition("select"),collisionBoundary:d.current,asChild:!0,tabIndex:-1,children:(0,nf.jsxs)("div",{children:[1<(null==(k=hc.selectedShapes)?void 0:k.size)&&!hc.readOnly&&(null==(K=hc.selectedShapesArray)?void 0:K.some(Zd=>!Zd.props.isLocked))&&(0,nf.jsxs)(nf.Fragment,{children:[(0,nf.jsxs)($k,{children:[(0,nf.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,nf.jsx)(Xd,
{tooltip:Mc("whiteboard/align-left"),onClick:()=>Jd(()=>hc.align("left")),children:(0,nf.jsx)(bh,{name:"layout-align-left"})}),(0,nf.jsx)(Xd,{tooltip:Mc("whiteboard/align-center-horizontally"),onClick:()=>Jd(()=>hc.align("centerHorizontal")),children:(0,nf.jsx)(bh,{name:"layout-align-center"})}),(0,nf.jsx)(Xd,{tooltip:Mc("whiteboard/align-right"),onClick:()=>Jd(()=>hc.align("right")),children:(0,nf.jsx)(bh,{name:"layout-align-right"})}),(0,nf.jsx)(lq,{className:"tl-toolbar-separator",orientation:"vertical"}),
(0,nf.jsx)(Xd,{tooltip:Mc("whiteboard/distribute-horizontally"),onClick:()=>Jd(()=>hc.distribute("horizontal")),children:(0,nf.jsx)(bh,{name:"layout-distribute-vertical"})})]}),(0,nf.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,nf.jsx)(Xd,{tooltip:Mc("whiteboard/align-top"),onClick:()=>Jd(()=>hc.align("top")),children:(0,nf.jsx)(bh,{name:"layout-align-top"})}),(0,nf.jsx)(Xd,{tooltip:Mc("whiteboard/align-center-vertically"),onClick:()=>Jd(()=>hc.align("centerVertical")),children:(0,nf.jsx)(bh,
{name:"layout-align-middle"})}),(0,nf.jsx)(Xd,{tooltip:Mc("whiteboard/align-bottom"),onClick:()=>Jd(()=>hc.align("bottom")),children:(0,nf.jsx)(bh,{name:"layout-align-bottom"})}),(0,nf.jsx)(lq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,nf.jsx)(Xd,{tooltip:Mc("whiteboard/distribute-vertically"),onClick:()=>Jd(()=>hc.distribute("vertical")),children:(0,nf.jsx)(bh,{name:"layout-distribute-horizontal"})})]})]}),(0,nf.jsx)(Hp,{className:"menu-separator"}),(0,nf.jsxs)($k,{className:"tl-menu-item",
onClick:()=>Jd(hc.packIntoRectangle),children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"layout-grid"}),Mc("whiteboard/pack-into-rectangle")]}),(0,nf.jsx)(Hp,{className:"menu-separator"})]}),0<(null==(da=hc.selectedShapes)?void 0:da.size)&&(0,nf.jsxs)(nf.Fragment,{children:[(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(hc.api.zoomToSelection),children:[Mc("whiteboard/zoom-to-fit"),(0,nf.jsx)(fk,{action:"whiteboard/zoom-to-fit"})]}),(0,nf.jsx)(Hp,{className:"menu-separator"})]}),(hc.selectedShapesArray.some(Zd=>
"group"===Zd.type||hc.getParentGroup(Zd))||1<hc.selectedShapesArray.length)&&(null==(ja=hc.selectedShapesArray)?void 0:ja.some(Zd=>!Zd.props.isLocked))&&!hc.readOnly&&(0,nf.jsxs)(nf.Fragment,{children:[hc.selectedShapesArray.some(Zd=>"group"===Zd.type||hc.getParentGroup(Zd))&&(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(hc.api.unGroup),children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"ungroup"}),Mc("whiteboard/ungroup"),(0,nf.jsx)(fk,{action:"whiteboard/ungroup"})]}),1<hc.selectedShapesArray.length&&
(null==(qa=hc.selectedShapesArray)?void 0:qa.some(Zd=>!Zd.props.isLocked))&&(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(hc.api.doGroup),children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"group"}),Mc("whiteboard/group"),(0,nf.jsx)(fk,{action:"whiteboard/group"})]}),(0,nf.jsx)(Hp,{className:"menu-separator"})]}),0<(null==(Ha=hc.selectedShapes)?void 0:Ha.size)&&(null==(Ra=hc.selectedShapesArray)?void 0:Ra.some(Zd=>!Zd.props.isLocked))&&(0,nf.jsxs)(nf.Fragment,{children:[!hc.readOnly&&
(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(hc.cut),children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"cut"}),Mc("whiteboard/cut")]}),(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(hc.copy),children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"copy"}),Mc("whiteboard/copy"),(0,nf.jsx)(fk,{action:"editor/copy"})]})]}),!hc.readOnly&&(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(hc.paste),children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"clipboard"}),Mc("whiteboard/paste"),
(0,nf.jsx)("div",{className:"tl-menu-right-slot",children:(0,nf.jsx)("span",{className:"keyboard-shortcut",children:(0,nf.jsxs)("code",{children:[sA,"+v"]})})})]}),1===(null==($a=hc.selectedShapes)?void 0:$a.size)&&!hc.readOnly&&(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(()=>hc.paste(void 0,!0)),children:[Mc("whiteboard/paste-as-link"),(0,nf.jsx)("div",{className:"tl-menu-right-slot",children:(0,nf.jsx)("span",{className:"keyboard-shortcut",children:(0,nf.jsxs)("code",{children:[sA,"++v"]})})})]}),
0<(null==(fb=hc.selectedShapes)?void 0:fb.size)&&(0,nf.jsxs)(nf.Fragment,{children:[(0,nf.jsx)(Hp,{className:"menu-separator"}),(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(()=>{var Zd,Ee;return Fc.exportToImage(hc.currentPageId,{x:hc.selectionBounds.minX+hc.viewport.camera.point[0]-8,y:hc.selectionBounds.minY+hc.viewport.camera.point[1]-8,width:(null==(Zd=hc.selectionBounds)?void 0:Zd.width)+16,height:(null==(Ee=hc.selectionBounds)?void 0:Ee.height)+16,zoom:hc.viewport.camera.zoom})}),
children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"file-export"}),Mc("whiteboard/export"),(0,nf.jsx)("div",{className:"tl-menu-right-slot",children:(0,nf.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,nf.jsx)(Hp,{className:"menu-separator"}),(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(hc.api.selectAll),children:[Mc("whiteboard/select-all"),(0,nf.jsx)(fk,{action:"editor/select-parent"})]}),1<(null==(jb=hc.selectedShapes)?void 0:jb.size)&&(0,nf.jsx)($k,{className:"tl-menu-item",
onClick:()=>Jd(hc.api.deselectAll),children:Mc("whiteboard/deselect-all")}),!hc.readOnly&&0<(null==(Kb=hc.selectedShapes)?void 0:Kb.size)&&(null==(Nb=hc.selectedShapesArray)?void 0:Nb.some(Zd=>!Zd.props.isLocked))&&(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(()=>hc.setLocked(!0)),children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"lock"}),Mc("whiteboard/lock"),(0,nf.jsx)(fk,{action:"whiteboard/lock"})]}),!hc.readOnly&&0<(null==(Hb=hc.selectedShapes)?void 0:Hb.size)&&(null==(fc=hc.selectedShapesArray)?
void 0:fc.some(Zd=>Zd.props.isLocked))&&(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(()=>hc.setLocked(!1)),children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"lock-open"}),Mc("whiteboard/unlock"),(0,nf.jsx)(fk,{action:"whiteboard/unlock"})]}),0<(null==(qc=hc.selectedShapes)?void 0:qc.size)&&!hc.readOnly&&(null==(Wb=hc.selectedShapesArray)?void 0:Wb.some(Zd=>!Zd.props.isLocked))&&(0,nf.jsxs)(nf.Fragment,{children:[(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(hc.api.deleteShapes),
children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"backspace"}),Mc("whiteboard/delete"),(0,nf.jsx)(fk,{action:"editor/delete"})]}),1<(null==(kc=hc.selectedShapes)?void 0:kc.size)&&!hc.readOnly&&(0,nf.jsxs)(nf.Fragment,{children:[(0,nf.jsx)(Hp,{className:"menu-separator"}),(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(hc.flipHorizontal),children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"flip-horizontal"}),Mc("whiteboard/flip-horizontally")]}),(0,nf.jsxs)($k,{className:"tl-menu-item",
onClick:()=>Jd(hc.flipVertical),children:[(0,nf.jsx)(bh,{className:"tl-menu-icon",name:"flip-vertical"}),Mc("whiteboard/flip-vertically")]})]}),!hc.readOnly&&(0,nf.jsxs)(nf.Fragment,{children:[(0,nf.jsx)(Hp,{className:"menu-separator"}),(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(hc.bringToFront),children:[Mc("whiteboard/move-to-front"),(0,nf.jsx)(fk,{action:"whiteboard/bring-to-front"})]}),(0,nf.jsxs)($k,{className:"tl-menu-item",onClick:()=>Jd(hc.sendToBack),children:[Mc("whiteboard/move-to-back"),
(0,nf.jsx)(fk,{action:"whiteboard/send-to-back"})]})]}),Qe&&(0,nf.jsx)($k,{className:"tl-menu-item",onClick:()=>{1===hc.selectedShapesArray.length?console.log(jc(hc.selectedShapesArray[0].serialized)):console.log(hc.selectedShapesArray.map(Zd=>jc(Zd.serialized)))},children:Mc("whiteboard/dev-print-shape-props")})]})]})})]})}),Ty=Jf(ca(19)),Uy=ca(588),aI=ee(({shape:a})=>{const d=lg(),{handlers:k}=Ty.default.useContext(ri),K=k.t,da=Ty.default.useMemo(()=>{var ja;const qa=[...(null!=(ja=a.props.refs)?
ja:[])].map(Ha=>[Ha,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&qa.unshift([a.props.pageId,!1]);return qa.filter(Ha=>Ha[0].toLowerCase()!==d.currentPage.name&&k.getBlockPageName(Ha[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===da.length?null:(0,Uy.jsx)("div",{className:"tl-quick-links",title:K("whiteboard/shape-quick-links"),children:da.map(([ja,qa])=>(0,Uy.jsx)("div",{className:"tl-quick-links-row",children:(0,Uy.jsx)(my,{id:ja,showReferenceContent:qa})},
ja))})}),Ip=Jf(ca(19)),Vy=Jf(ca(19)),Wy={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},nw=(a,d,k)=>Mh(void 0,[a,d,k],function*(K,{point:da,shiftKey:ja,dataTransfer:qa,fromDrop:Ha},Ra){function $a(id,Dd){return Mh(this,null,function*(){const De=Object.values(K.assets).find(Ye=>Ye.src===id);return De?De:{id:tk(),type:Dd,src:id,size:yield kj(Ra.makeAssetUrl(id),Dd)}})}function fb(id){return Mh(this,null,function*(){const Dd=id.filter(De=>"unknown"!==tc(De.name)).map(De=>
Mh(this,null,function*(){try{const Ye=yield Ra.saveAsset(De);return yield $a(Ye,tc(De.name))}catch(Ye){console.error(Ye)}return null}));return(yield Promise.all(Dd)).filter(bg)})}function jb(id){return[hf(Yd({},Ap.defaultProps),{html:id,point:[da[0],da[1]]})]}function Kb(id){return Mh(this,null,function*(){return Kc(Hb,fc,kc,Wb,hc,qc,Qe)(id)})}function Nb(){return Mh(this,null,function*(){const id=yield navigator.clipboard.read(),Dd=Kc(hc,qc,Qe);return(yield Promise.all(id.map(De=>Dd(De)))).flat().filter(bg)})}
function Hb(id){return Mh(this,null,function*(){var Dd=id.getData("file");if(!Dd)return null;const De=yield $a(Dd,"pdf");K.addAssets([De]);Dd=hf(Yd({},Zk.defaultProps),{id:tk(),assetId:De.id,url:Dd,opacity:1});De.size&&Object.assign(Dd,{point:[da[0]-De.size[0]/4+16,da[1]-De.size[1]/4+16],size:be.div(De.size,2)});return[Dd]})}function fc(id){return Mh(this,null,function*(){var Dd=Array.from(id.files);return 0<Dd.length?(gf=Dd=yield fb(Dd),Dd.map((De,Ye)=>{switch(De.type){case "video":var Rf=Nr.defaultProps;
break;case "image":Rf=yu.defaultProps;break;case "pdf":Rf=Zk.defaultProps;break;default:return null}Rf=hf(Yd({},Rf),{id:tk(),assetId:De.id,opacity:1});De.size&&Object.assign(Rf,{point:[da[0]-De.size[0]/4+16*Ye,da[1]-De.size[1]/4+16*Ye],size:be.div(De.size,2)});return Rf})):null})}function qc(id){return Mh(this,null,function*(){if(id.types.includes("text/plain")&&(ja||Ha))return null;const Dd=yield xd(id,"text/html");return Dd?Kc(Fc,jb)(Dd):null})}function Wb(id){return Mh(this,null,function*(){var Dd,
De,Ye,Rf,eg,df,Ag=id.getData("block-uuid");if(Ag){Ag=Ag.trim();const Bf=null==(Ye=null==(De=null==(Dd=window.logseq)?void 0:Dd.api)?void 0:De.get_selected_blocks)?void 0:Ye.call(De);Dd=Bf&&1<(null==Bf?void 0:Bf.length)?Bf.map(Og=>Og.uuid):[Ag];null==(df=null==(eg=null==(Rf=window.logseq)?void 0:Rf.api)?void 0:eg.set_blocks_id)?void 0:df.call(eg,Dd);Rf=Dd.map(Og=>Jd(`((${Og}))`));return(yield Promise.all(Rf)).flat().filter(bg).map((Og,Yg)=>hf(Yd({},Og),{point:[da[0]+(jk.defaultProps.size[0]+16)*Yg,
da[1]]}))}return null})}function kc(id){return Mh(this,null,function*(){var Dd=id.getData("page-name");return Dd?(Dd=Dd.trim(),Jd(`[[${Dd}]]`)):null})}function hc(id){return Mh(this,null,function*(){var Dd=yield xd(id,"text/plain");return Dd?(Dd=Dd.trim(),Kc(Mc,ud)(Dd)):null})}function Fc(id){if(id=K.api.getClonedShapesFromTldrString(decodeURIComponent(id),da)){const {shapes:Dd,assets:De,bindings:Ye}=id;Re.push(...De);cf.push(...Ye);return Dd}return null}function Mc(id){return Mh(this,null,function*(){try{const De=
new URL(id);var Dd=De.host&&["http:","https:"].includes(De.protocol)}catch(De){Dd=!1}return Dd&&!ja?hw.test(id)?[hf(Yd({},Cq.defaultProps),{url:id,point:[da[0],da[1]]})]:Jy.test(id)?[hf(Yd({},Eq.defaultProps),{url:id,point:[da[0],da[1]]})]:[hf(Yd({},zq.defaultProps),{url:id,point:[da[0],da[1]]})]:null})}function ud(id){return id.startsWith("\x3ciframe")?[hf(Yd({},Ap.defaultProps),{html:id,point:[da[0],da[1]]})]:null}function Jd(id){return Mh(this,null,function*(){if(/^\(\(.*\)\)$/.test(id)&&40===
id.length){var Dd=id.slice(2,-2);if(Aj(Dd))return[hf(Yd({},jk.defaultProps),{point:[da[0],da[1]],size:[400,0],pageId:Dd,fill:K.settings.color,stroke:K.settings.color,scaleLevel:K.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(id))return Dd=id.slice(2,-2),[hf(Yd({},jk.defaultProps),{point:[da[0],da[1]],size:[400,0],pageId:Dd,fill:K.settings.color,stroke:K.settings.color,scaleLevel:K.settings.scaleLevel,blockType:"P"})];return null})}function Qe(id){return Mh(this,null,function*(){var Dd=
yield xd(id,"text/plain");return Dd&&(Dd=Dd.trim(),Dd=null==Ra?void 0:Ra.addNewBlock(Dd))?[hf(Yd({},jk.defaultProps),{size:[400,0],point:[da[0],da[1]],pageId:Dd,fill:K.settings.color,stroke:K.settings.color,scaleLevel:K.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var Zd,Ee;let gf=[],Re=[];const cf=[];K.cursors.setCursor("progress");let Gd=[];try{qa?Gd.push(...(null!=(Zd=yield Kb(qa))?Zd:[])):Gd.push(...(null!=(Ee=yield Nb())?Ee:[]))}catch(id){console.error(id)}const nd=Gd.map(id=>hf(Yd({},
id),{parentId:K.currentPageId,isLocked:!1,id:Aj(id.id)?id.id:tk()})),Ad=null==qa?void 0:qa.types.every(id=>"Files"===id);K.wrapUpdate(()=>{var id=[...gf,...Re];0<id.length&&K.createAssets(id);0<nd.length&&K.createShapes(nd);K.currentPage.updateBindings(Object.fromEntries(cf.map(Dd=>[Dd.id,Dd])));if(1===K.selectedShapesArray.length&&1===nd.length&&Ha){id=K.selectedShapesArray[0];const Dd=K.getShapeById(nd[0].id);K.createNewLineBinding(id,Dd)}K.setSelectedShapes(nd.map(Dd=>Dd.id));K.selectedTool.transition("idle");
K.cursors.setCursor("default");(Ha||Ad)&&K.packIntoRectangle()})}),ow=Jf(ca(19)),mD=Jf(ca(19)),Yo=ca(588),nD=[Ql,Ly,XC,Cl,Rn,jw,My,kk,Fp,ZC,YC,gh],oD=a=>{const {renderers:d}=As.useContext(ri);return(0,Yo.jsx)(d.BacklinksCount,hf(Yd({},a),{options:{"portal?":!1}}))},pD=()=>{const a=As.useRef(null),d=lg(),k=As.useMemo(()=>({ContextBar:$H,BacklinksCount:oD,QuickLinks:aI}),[]);return(0,Yo.jsx)(lD,{collisionRef:a,children:(0,Yo.jsx)("div",{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":d.uuid,
children:(0,Yo.jsx)(iG,{components:k,children:(0,Yo.jsx)(yC,{})})})})},qD=a=>{var {onPersist:d,readOnly:k,model:K}=a;a=zf(a,["onPersist","readOnly","model"]);const da=de(),ja=Md(),qa=Be(),Ha=k?null:Xe(),Ra=As.useCallback(($a,fb)=>{null==d?void 0:d($a,fb)},[K]);return(0,Yo.jsx)(eG,hf(Yd({Shapes:et,Tools:nD,onDrop:da,onPaste:ja,onCopy:qa,readOnly:k,onCanvasDBClick:Ha,onPersist:Ra,model:K},a),{children:(0,Yo.jsx)(pD,{})}))},rD=function(a){var {renderers:d,handlers:k}=a;a=zf(a,["renderers","handlers"]);
const K={renderers:As.useMemo(()=>Object.fromEntries(Object.entries(d).map(([da,ja])=>[da,As.memo(ja)])),[]),handlers:k};return(0,Yo.jsx)(ri.Provider,{value:K,children:(0,Yo.jsx)(qD,Yd({},a))})}};
'use strict';var yCd=function(a){return a},zCd=function(a,b){return $APP.Vh.j(function(c){var d=$APP.Kf(c);c=$APP.G.j(d,$APP.RA);d=$APP.G.j(d,$APP.zD);return new $APP.l(null,2,[$APP.Hl,$APP.t.A(c),$APP.uPb,$APP.jx.j(d,new $APP.N(null,2,5,$APP.O,[$APP.eC,$APP.uPb],null))],null)},$APP.qg.j(function(c){return $APP.eC.A($APP.zD.A(c))},$APP.AN.C(a,b,new $APP.l(null,1,[$APP.Bs,new $APP.N(null,2,5,$APP.O,[$APP.RA,$APP.zD],null)],null))))},ACd=function(a){return $APP.bq.F(a,$APP.F([$APP.cq,!0]))},BCd=function(a,
b,c,d){var e=$APP.rE(a);b=new $APP.l(null,2,[$APP.fC,$APP.zqb,$APP.hC,new $APP.l(null,6,[$APP.Hl,$APP.qa(b,"id"),$APP.Gp,$APP.qa(b,"name"),$APP.eF,ACd($APP.qa(b,"bindings")),$APP.uPb,$APP.qa(b,"nonce"),$APP.vPb,ACd(c),$APP.rPb,d],null)],null);c=$APP.Hv();e=$APP.HE.A(e);e=$APP.m(e)?e:$APP.Hv();return new $APP.l(null,5,[$APP.Jq,a,$APP.XD,"whiteboard",$APP.zD,b,$APP.IE,c,$APP.HE,e],null)},CCd=function(a,b,c,d,e,f){a=ACd(a.getCleanUpAssets());var g=b.shapes,h=$APP.Vh.j(function(E){return $APP.qa(E,"id")},
g),n=$APP.Ch(h,$APP.Pj.A(g.length));g=$APP.zh($APP.Vh.j(function(E){E=$APP.Kf(E);E=$APP.G.j(E,$APP.Hl);return $APP.P.C(ACd(b.getShapeById(E).serialized),$APP.uw,$APP.G.j(n,E))},$APP.Jy.j(c,d)));d=$APP.zh($APP.Vh.j($APP.Hl,d));var p=$APP.zh($APP.Vh.j($APP.Hl,c)),q=$APP.zh($APP.Km.j($APP.nk,$APP.Jy.j(p,d)));c=$APP.zh($APP.qg.j(function(E){E=$APP.Hl.A(E);return q.A?q.A(E):q.call(null,E)},g));var r=$APP.Km.j($APP.nk,$APP.Jy.j(d,p)),v=$APP.Sz();d=$APP.x(r)?$APP.Vh.j(function(E){return $APP.jx.j(E,new $APP.N(null,
2,5,$APP.O,[$APP.zD,$APP.eC],null))},function(){var E=new $APP.N(null,1,5,$APP.O,[$APP.Jx],null),H=$APP.Oj.j(function(K){return new $APP.N(null,2,5,$APP.O,[$APP.RA,$APP.yi(K)],null)},r);return $APP.HC?$APP.HC(v,E,H):$APP.IC.call(null,v,E,H)}()):null;p=$APP.Oj.j(function(E){return new $APP.N(null,2,5,$APP.O,[$APP.aCb,new $APP.N(null,2,5,$APP.O,[$APP.RA,$APP.yi(E)],null)],null)},r);var y=$APP.Jy.j(g,c),A=$APP.x(y)?function(){var E=new $APP.N(null,1,5,$APP.O,[$APP.Jx],null),H=$APP.Oj.j(function(K){return new $APP.N(null,
2,5,$APP.O,[$APP.RA,$APP.yi($APP.Hl.A(K))],null)},y);return $APP.HC?$APP.HC(v,E,H):$APP.IC.call(null,v,E,H)}():null;return new $APP.l(null,4,[$APP.BEc,BCd(e,b,a,h),$APP.JUc,$APP.Vh.j(function(E){return $APP.me(q,$APP.t.A($APP.RA.A(E)))?$APP.P.C(E,$APP.IE,$APP.Hv()):$APP.$Bb(E)},$APP.Vh.j(function(E){E=new $APP.l(null,2,[$APP.fC,$APP.xJ,$APP.eC,E],null);E=new $APP.l(null,3,[$APP.GC,new $APP.l(null,1,[$APP.Jq,$APP.Iq.A?$APP.Iq.A(e):$APP.Iq.call(null,e)],null),$APP.QC,new $APP.l(null,1,[$APP.Jq,e],null),
$APP.zD,E],null);var H=$APP.Fqb(E,e);return $APP.$l.F($APP.F([E,H]))},g)),$APP.cD,p,$APP.p6b,new $APP.l(null,3,[$APP.eMb,$APP.xb(f),$APP.mBb,f,$APP.Yu,new $APP.l(null,5,[$APP.zJ,e,$APP.LPb,d,$APP.MPb,c,$APP.NPb,y,$APP.OPb,A],null)],null)],null)},DCd=function(a,b,c){var d=$APP.Wc($APP.z(b.pages)),e=d.shapes,f=$APP.rE(a);f=$APP.jx.j(f,new $APP.N(null,3,5,$APP.O,[$APP.zD,$APP.hC,$APP.rPb],null));var g=$APP.Ch(f,$APP.Pj.A($APP.Pc(f)));e=$APP.zh($APP.Jn.j(function(q,r){var v=r.id;return new $APP.l(null,
2,[$APP.Hl,v,$APP.uPb,$APP.B.j(q,$APP.G.j(g,v))?r.nonce:Date.now()],null)},e));var h=$APP.Sz();f=function(){var q=$APP.jx.j($APP.u($APP.Emd),new $APP.N(null,2,5,$APP.O,[h,a],null));return $APP.m(q)?q:$APP.zh($APP.Vh.j(function(r){return $APP.Sq.C(r,$APP.Hl,$APP.t)},zCd(h,a)))}();b=CCd(b,d,e,f,a,c);f=$APP.Kf(b);d=$APP.G.j(f,$APP.BEc);b=$APP.G.j(f,$APP.JUc);c=$APP.G.j(f,$APP.cD);f=$APP.G.j(f,$APP.p6b);d=$APP.gl.F(c,new $APP.N(null,1,5,$APP.O,[d],null),$APP.F([b]));var n=$APP.jx.j(f,new $APP.N(null,
2,5,$APP.O,[$APP.Yu,$APP.MPb],null)),p=$APP.jx.j(f,new $APP.N(null,2,5,$APP.O,[$APP.Yu,$APP.LPb],null));n=$APP.m($APP.Xf(function(q){return $APP.B.j("group",$APP.Mm.A(q))},n))?$APP.P.C(f,$APP.PPb,$APP.Qu):$APP.m(function(){var q=$APP.Mf(p);return $APP.m(q)?$APP.Wf(function(r){return $APP.B.j("group",$APP.Mm.A(r))},p):q}())?$APP.P.C(f,$APP.PPb,$APP.KFc):$APP.m($APP.Xf(function(q){return $APP.B.j("line",$APP.Mm.A(q))&&$APP.B.j("arrow ",$APP.yo.A($APP.sDc.A(q)))},n))?$APP.P.C(f,$APP.PPb,$APP.JQc):f;
b=$APP.x($APP.gl.j(b,c))?n:$APP.P.C(f,$APP.J1a,!0);$APP.ji.J($APP.Emd,$APP.wu,new $APP.N(null,2,5,$APP.O,[h,a],null),e);if($APP.me(new $APP.th(null,new $APP.l(null,1,[$APP.JQc,null],null),null),$APP.PPb.A(b)))return $APP.Tz($APP.c7c,new $APP.l(null,2,[$APP.bx,d,$APP.p6b,b],null));e=$APP.c7c.A($APP.u($APP.Pz));$APP.gl.j($APP.bx.A(e),d);$APP.$l.F($APP.F([b,$APP.p6b.A(e)]));$APP.Tz($APP.c7c,$APP.If);return null},ECd=function(a){a=$APP.AN.A(a);return $APP.Km.j($APP.xqb,a)},FCd=function(a){var b=$APP.ex.A($APP.rE(a));
a=ECd(a);a=$APP.qg.j(function(d){return $APP.B.j(b,$APP.ex.A($APP.QC.A(d)))},a);var c=$APP.zh($APP.Km.j($APP.ub,$APP.Vh.j(function(d){return $APP.jx.C(d,new $APP.N(null,2,5,$APP.O,[$APP.RC,$APP.ex],null),null)},a)));a=$APP.Km.j(function(d){d=$APP.ex.A(d);return c.A?c.A(d):c.call(null,d)},a);return $APP.x(a)?$APP.z(a):null},GCd=function(){return $APP.nm(null,function(){return $APP.nm(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.nm(a.text(),function(b){return $APP.nm($APP.Pq($APP.If,
b),function(c){return $APP.hm(c)})})})})},HCd=function(a){var b=$APP.E5a();return($APP.ud(b)||$APP.B.j(1,$APP.Pc(b))&&$APP.B.j(a,$APP.Jq.A($APP.z(b))))&&$APP.xb($APP.jx.j($APP.u($APP.Pz),new $APP.N(null,1,5,$APP.O,[$APP.vYa],null)))},ICd=function(a){return null!=a?$APP.qm($APP.nm(null,function(){return $APP.nm(GCd(),function(b){var c=$APP.Kf(b);b=$APP.G.j(c,$APP.FE);c=$APP.G.j(c,$APP.Ev);var d=$APP.z(b);b=$APP.sPb(d,c);d=$APP.wqb(d);c=$APP.vPb.A(d);d=$APP.eF.A(d);a.cloneShapesIntoCurrentPage($APP.hj(new $APP.l(null,
3,[$APP.DPb,b,$APP.vPb,c,$APP.eF,d],null)));b=$APP.xYa();return $APP.hm(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},JCd=function(a){a.cleanup($APP.Vh.j(function(b){return b.id},a.shapes))},MCd=function(a,b){b=$APP.bq.F(b,$APP.F([new $APP.l(null,1,[$APP.cq,!0],null)]));b=$APP.Kf(b);var c=$APP.G.j(b,KCd),d=$APP.G.j(b,$APP.xG),e=$APP.G.j(b,LCd),f=$APP.Sz();return $APP.nm(null,function(){return $APP.nm($APP.m(d)?$APP.Ujb(f,a,new $APP.l(null,1,[$APP.cw,
100],null)):null,function(g){return $APP.nm($APP.m(c)?$APP.Zjb(a):null,function(h){return $APP.nm($APP.m(e)?$APP.akb(a,100):null,function(n){return $APP.hm($APP.hj(new $APP.l(null,3,[$APP.FE,h,$APP.Ev,g,$APP.eH,n],null)))})})})})},NCd=function(a){return $APP.mm($APP.iJb($APP.Sz(),new $APP.N(null,1,5,$APP.O,[$APP.bq.A(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.z(b):c;return $APP.m(c)?(b=$APP.C.C(c,0,null),$APP.C.C(c,1,null),c=$APP.C.C(c,2,null),$APP.kJb($APP.m(c)?c:b)):null})},OCd=function(){return $APP.iMb(null)},
PCd=function(){return $APP.kMb(null)},fDd=function(a){return $APP.fh([QCd,RCd,SCd,TCd,UCd,VCd,WCd,XCd,$APP.jB,YCd,ZCd,$Cd,aDd,$APP.MX,bDd,cDd,dDd,eDd],[function(b){if($APP.lv(b))var c=$APP.Jq.A($APP.N3a($APP.Sz(),$APP.aj(b)));else c=$APP.Jq.A,b=new $APP.N(null,2,5,$APP.O,[$APP.Jq,$APP.Iq.A?$APP.Iq.A(b):$APP.Iq.call(null,b)],null),b=$APP.PC.A?$APP.PC.A(b):$APP.PC.call(null,b),c=c.call($APP.Jq,b);return c},function(b){return $APP.hj($APP.C3b(b))},function(b){return $APP.sE(b,!1)},function(b){return $APP.GYa($APP.m(b)?
$APP.C3b(b):null)},function(b){return $APP.wPb(b)},$APP.Zv,function(b){return $APP.hIb(b,new $APP.l(null,1,[$APP.JN,!1],null))},$APP.EE,MCd,NCd,yCd,function(b,c){return $APP.iKa(b,$APP.F([$APP.Dv,c]))},function(b){var c=$APP.t,d=c.A,e=$APP.fz?$APP.fz():$APP.gz.call(null),f=$APP.rE(a),g=FCd(a);b=new $APP.l(null,6,[$APP.RC,$APP.sh($APP.m(g)?g:f,new $APP.N(null,1,5,$APP.O,[$APP.ex],null)),$APP.RA,e,$APP.OA,$APP.m(b)?b:"",$APP.hD,$APP.Kq,$APP.GC,new $APP.l(null,2,[$APP.Jq,$APP.Iq.A?$APP.Iq.A(a):$APP.Iq.call(null,
a),$APP.Lv,a],null),$APP.QC,new $APP.l(null,1,[$APP.Jq,a],null)],null);$APP.JC(new $APP.N(null,1,5,$APP.O,[b],null));return d.call(c,e)},function(b){return $APP.EH.F($APP.F([$APP.Wh.A(b)]))},function(b,c){return $APP.fB(function(){return(0,$APP.P0b)(b,$APP.$l.F($APP.F([$APP.bq.F(c,$APP.F([$APP.cq,!0])),new $APP.l(null,1,[$APP.KN,!0],null)])))})},function(b,c){return $APP.MA($APP.Sz(),$APP.ex.A($APP.rE(b)),$APP.Wh.A(c))},function(b){var c=$APP.lv(b)?$APP.Jq.A($APP.N3a($APP.Sz(),$APP.aj(b))):null;c=
$APP.m(c)?c:b;var d=$APP.mE(c),e=$APP.EE(c);return $APP.m(d)?$APP.m(e)?$APP.Nnb(c,new $APP.l(null,1,[$APP.TI,b],null)):$APP.SI($APP.sE(b,!1)):null},function(b){return $APP.hj($APP.H2a($APP.aj(b)))}])},eDd=new $APP.M(null,"queryBlockByUUID","queryBlockByUUID",2091812895),bDd=new $APP.M(null,"exportToImage","exportToImage",-154356643),aDd=new $APP.M(null,"addNewBlock","addNewBlock",1426762680),gDd=new $APP.M(null,"KeyboardShortcut","KeyboardShortcut",1250004264),LCd=new $APP.M(null,"files?","files?",
-1267491104),QCd=new $APP.M(null,"getBlockPageName","getBlockPageName",-1656908032),hDd=new $APP.M(null,"renderers","renderers",-1460292282),iDd=new $APP.M(null,"model","model",331153215),SCd=new $APP.M(null,"getRedirectPageName","getRedirectPageName",-1858136925),VCd=new $APP.M(null,"isMobile","isMobile",-2043133877),TCd=new $APP.M(null,"setCurrentPdf","setCurrentPdf",-63289336),jDd=new $APP.M(null,"onMount","onMount",-876858467),WCd=new $APP.M(null,"insertFirstPageBlock","insertFirstPageBlock",
-1676658548),ZCd=new $APP.M(null,"makeAssetUrl","makeAssetUrl",217779988),kDd=new $APP.M(null,"onPersist","onPersist",-1848738852),lDd=new $APP.M(null,"Breadcrumb","Breadcrumb",-1351298906),$Cd=new $APP.M(null,"copyToClipboard","copyToClipboard",1092115063),dDd=new $APP.M(null,"redirectToPage","redirectToPage",87147838),UCd=new $APP.M(null,"addNewWhiteboard","addNewWhiteboard",554297706),YCd=new $APP.M(null,"saveAsset","saveAsset",-668047853),mDd=new $APP.M(null,"BacklinksCount","BacklinksCount",
364670631),nDd=new $APP.M(null,"Block","Block",-1959785792),cDd=new $APP.M(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),oDd=new $APP.M(null,"Page","Page",-1267059506),KCd=new $APP.M(null,"pages?","pages?",-2065014049),pDd=new $APP.M(null,"PageName","PageName",-164991013),qDd=new $APP.M(null,"Tweet","Tweet",-452258680),XCd=new $APP.M(null,"isWhiteboardPage","isWhiteboardPage",-134150579),rDd=new $APP.M(null,"BlockReference","BlockReference",-120254741),RCd=new $APP.M(null,"inflateAsset","inflateAsset",
-1449040639);$APP.kda("tldraw");var sDd=$APP.xm(592);var tDd,uDd;$APP.Zsd={};tDd=$APP.gO($APP.qa(sDd,"App"));$APP.btd=$APP.qa(sDd,"generateJSXFromModel");
uDd=new $APP.l(null,8,[oDd,$APP.ir($APP.mr,function(a){return(0,$APP.Frd)(new $APP.l(null,2,[$APP.zJ,$APP.sE($APP.qa(a,"pageName"),!1),$APP.KN,!0],null))},null,"frontend.extensions.tldraw/page-cp"),nDd,$APP.ir($APP.mr,function(a){a=$APP.yi($APP.qa(a,"blockId"));var b=$APP.JXa($APP.Iic);a=b.A?b.A(a):b.call(null,a);return $APP.Xq(a)},null,"frontend.extensions.tldraw/block-cp"),lDd,$APP.ir($APP.mr,function(a){return $APP.Xq($APP.IQ(new $APP.l(null,1,[$APP.pV,!0],null),$APP.Sz(),$APP.yi($APP.qa(a,"blockId")),
new $APP.l(null,2,[$APP.k8b,$APP.qa(a,"endSeparator"),$APP.l8b,$APP.qa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),qDd,$APP.ir($APP.mr,function(a){return(0,$APP.a7b)($APP.qa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),pDd,$APP.ir($APP.mr,function(a){return(0,$APP.vQ)(new $APP.l(null,1,[$APP.pV,!0],null),new $APP.l(null,1,[$APP.Jq,$APP.qa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),mDd,function(a){return $APP.Zf.j($APP.etd,$APP.Vh.j(function(b){return $APP.bq.F($APP.qa(a,
b),$APP.F([new $APP.l(null,1,[$APP.cq,!0],null)]))},new $APP.N(null,3,5,$APP.O,["id","className","options"],null)))},rDd,$APP.ir($APP.mr,function(a){return(0,$APP.m6b)($APP.If,$APP.qa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),gDd,$APP.ir($APP.mr,function(a){a=$APP.sO($APP.Wh.A($APP.qa(a,"action")));return"string"===typeof a?$APP.Xq($APP.nR(a)):$APP.Xq($APP.dp.j(" | ",$APP.Vh.j($APP.nR,a)))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);
$APP.$sd=$APP.ir($APP.mr,function(a,b){function c(n){if($APP.m(n)){n.appUndo=OCd;n.appRedo=PCd;var p=$APP.qa(n,"api");return $APP.m(p)?$APP.mm(d?ICd(p):null,function(){JCd(n.currentPage);$APP.HYa(n,b);return h.A?h.A(n):h.call(null,n)}):null}return null}var d=HCd(a),e=$APP.EPb(a),f=$APP.sr(null),g=$APP.C.C(f,0,null),h=$APP.C.C(f,1,null);$APP.tr(function(){$APP.m($APP.m(g)?b:g)&&$APP.HYa(g,b);return function(){return $APP.vc}},new $APP.N(null,2,5,$APP.O,[b,g],null));return $APP.m(e)?$APP.W("div",{style:{overscrollBehavior:"none"},
onBlur:function(n){n=$APP.qa(n,"target").tagName;var p=new $APP.th(null,new $APP.l(null,2,["INPUT",null,"TEXTAREA",null],null),null);n=p.A?p.A(n):p.call(null,n);return $APP.m(n)?$APP.QA():null},onWheel:$APP.xv,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.xb(g)?$APP.W("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.Xq($APP.xO("Loading onboarding whiteboard ..."))]):null,$APP.Xq(function(){var n=new $APP.l(null,6,[hDd,uDd,$APP.GSa,
fDd(a),jDd,c,$APP.oWc,!0,kDd,function(p,q){$APP.Tz(new $APP.N(null,2,5,$APP.O,[$APP.tYc,$APP.Sz()],null),$APP.Hv());return $APP.m(!1)?(console.time("tldraw persist"),p=DCd(a,p,q.replace),console.timeEnd("tldraw persist"),p):DCd(a,p,q.replace)},iDd,e],null);return tDd.A?tDd.A(n):tDd.call(null,n)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Ra.aj();
}).call(this);