(function(){
shadow$provide[600]=function(za,ca,Za,L){function y(w,A,D){var F,P={},g=null,h=null;void 0!==D&&(g=""+D);void 0!==A.key&&(g=""+A.key);void 0!==A.ref&&(h=A.ref);for(F in A)r.call(A,F)&&!c.hasOwnProperty(F)&&(P[F]=A[F]);if(w&&w.defaultProps)for(F in A=w.defaultProps,A)void 0===P[F]&&(P[F]=A[F]);return{$$typeof:X,type:w,key:g,ref:h,props:P,_owner:C.current}}ca(159);za=ca(22);var X=60103;L.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(ca=Symbol.for,X=ca("react.element"),L.Fragment=ca("react.fragment"));
var C=za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};L.jsx=y;L.jsxs=y};
shadow$provide[602]=function(za,ca,Za,L){Za.exports=ca(600)};
shadow$provide[603]=function(za,ca,Za,L){function y(Va){for(var Ab="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+Va,sb=1;sb<arguments.length;sb++)Ab+="\x26args[]\x3d"+encodeURIComponent(arguments[sb]);return"Minified React error #"+Va+"; visit "+Ab+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function X(Va){if(null==Va)return null;if("function"===typeof Va)return Va.displayName||Va.name||null;if("string"===typeof Va)return Va;
switch(Va){case u:return"Fragment";case U:return"Portal";case I:return"Profiler";case J:return"StrictMode";case ia:return"Suspense";case W:return"SuspenseList"}if("object"===typeof Va)switch(Va.$$typeof){case O:return(Va.displayName||"Context")+".Consumer";case Q:return(Va._context.displayName||"Context")+".Provider";case M:var Ab=Va.render;Ab=Ab.displayName||Ab.name||"";return Va.displayName||(""!==Ab?"ForwardRef("+Ab+")":"ForwardRef");case aa:return X(Va.type);case Y:return X(Va._render);case ba:Ab=
Va._payload;Va=Va._init;try{return X(Va(Ab))}catch(sb){}}return null}function C(Va,Ab){for(var sb=Va._threadCount|0;sb<=Ab;sb++)Va[sb]=Va._currentValue2,Va._threadCount=sb+1}function r(Va,Ab,sb,$b){if($b&&($b=Va.contextType,"object"===typeof $b&&null!==$b))return C($b,sb),$b[sb];if(Va=Va.contextTypes){sb={};for(var gc in Va)sb[gc]=Ab[gc];Ab=sb}else Ab=wa;return Ab}function c(Va){if(Ia.call(eb,Va))return!0;if(Ia.call(Ja,Va))return!1;if(xa.test(Va))return eb[Va]=!0;Ja[Va]=!0;return!1}function w(Va,
Ab,sb,$b){if(null!==sb&&0===sb.type)return!1;switch(typeof Ab){case "function":case "symbol":return!0;case "boolean":if($b)return!1;if(null!==sb)return!sb.acceptsBooleans;Va=Va.toLowerCase().slice(0,5);return"data-"!==Va&&"aria-"!==Va;default:return!1}}function A(Va,Ab,sb,$b){if(null===Ab||"undefined"===typeof Ab||w(Va,Ab,sb,$b))return!0;if($b)return!1;if(null!==sb)switch(sb.type){case 3:return!Ab;case 4:return!1===Ab;case 5:return isNaN(Ab);case 6:return isNaN(Ab)||1>Ab}return!1}function D(Va,Ab,
sb,$b,gc,Bb,Ob){this.acceptsBooleans=2===Ab||3===Ab||4===Ab;this.attributeName=$b;this.attributeNamespace=gc;this.mustUseProperty=sb;this.propertyName=Va;this.type=Ab;this.sanitizeURL=Bb;this.removeEmptyString=Ob}function F(Va){return Va[1].toUpperCase()}function P(Va){if("boolean"===typeof Va||"number"===typeof Va)return""+Va;Va=""+Va;var Ab=Ba.exec(Va);if(Ab){var sb="",$b,gc=0;for($b=Ab.index;$b<Va.length;$b++){switch(Va.charCodeAt($b)){case 34:Ab="\x26quot;";break;case 38:Ab="\x26amp;";break;case 39:Ab=
"\x26#x27;";break;case 60:Ab="\x26lt;";break;case 62:Ab="\x26gt;";break;default:continue}gc!==$b&&(sb+=Va.substring(gc,$b));gc=$b+1;sb+=Ab}Va=gc!==$b?sb+Va.substring(gc,$b):sb}return Va}function g(Va,Ab){var sb=Fa.hasOwnProperty(Va)?Fa[Va]:null,$b;if($b="style"!==Va)$b=null!==sb?0===sb.type:!(2<Va.length)||"o"!==Va[0]&&"O"!==Va[0]||"n"!==Va[1]&&"N"!==Va[1]?!1:!0;if($b||A(Va,Ab,sb,!1))return"";if(null!==sb){Va=sb.attributeName;$b=sb.type;if(3===$b||4===$b&&!0===Ab)return Va+'\x3d""';sb.sanitizeURL&&
(Ab=""+Ab);return Va+'\x3d"'+(P(Ab)+'"')}return c(Va)?Va+'\x3d"'+(P(Ab)+'"'):""}function h(Va,Ab){return Va===Ab&&(0!==Va||1/Va===1/Ab)||Va!==Va&&Ab!==Ab}function b(){if(null===la)throw Error(y(321));return la}function k(){if(0<Ta)throw Error(y(312));return{memoizedState:null,queue:null,next:null}}function l(){null===oa?null===va?(pa=!1,va=oa=k()):(pa=!0,oa=va):null===oa.next?(pa=!1,oa=oa.next=k()):(pa=!0,oa=oa.next);return oa}function m(Va,Ab,sb,$b){for(;Oa;)Oa=!1,Ta+=1,oa=null,sb=Va(Ab,$b);E();
return sb}function E(){la=null;Oa=!1;va=null;Ta=0;oa=Sa=null}function x(Va,Ab){return"function"===typeof Ab?Ab(Va):Ab}function t(Va,Ab,sb){la=b();oa=l();if(pa){var $b=oa.queue;Ab=$b.dispatch;if(null!==Sa&&(sb=Sa.get($b),void 0!==sb)){Sa.delete($b);$b=oa.memoizedState;do $b=Va($b,sb.action),sb=sb.next;while(null!==sb);oa.memoizedState=$b;return[$b,Ab]}return[oa.memoizedState,Ab]}Va=Va===x?"function"===typeof Ab?Ab():Ab:void 0!==sb?sb(Ab):Ab;oa.memoizedState=Va;Va=oa.queue={last:null,dispatch:null};
Va=Va.dispatch=f.bind(null,la,Va);return[oa.memoizedState,Va]}function p(Va,Ab){la=b();oa=l();Ab=void 0===Ab?null:Ab;if(null!==oa){var sb=oa.memoizedState;if(null!==sb&&null!==Ab){var $b=sb[1];a:if(null===$b)$b=!1;else{for(var gc=0;gc<$b.length&&gc<Ab.length;gc++)if(!ma(Ab[gc],$b[gc])){$b=!1;break a}$b=!0}if($b)return sb[0]}}Va=Va();oa.memoizedState=[Va,Ab];return Va}function f(Va,Ab,sb){if(!(25>Ta))throw Error(y(301));if(Va===la)if(Oa=!0,Va={action:sb,next:null},null===Sa&&(Sa=new Map),sb=Sa.get(Ab),
void 0===sb)Sa.set(Ab,Va);else{for(Ab=sb;null!==Ab.next;)Ab=Ab.next;Ab.next=Va}}function G(){}function z(Va){switch(Va){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K(Va){if(void 0===Va||null===Va)return Va;var Ab="";N.Children.forEach(Va,function(sb){null!=sb&&(Ab+=sb)});return Ab}function V(Va,Ab){if(void 0===Va)throw Error(y(152,X(Ab)||"Component"));}function H(Va,Ab,sb){function $b(Ob,
Eb){var jb=Eb.prototype&&Eb.prototype.isReactComponent,wb=r(Eb,Ab,sb,jb),xb=[],fb=!1,rb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===xb)return null},enqueueReplaceState:function(Qc,rd){fb=!0;xb=[rd]},enqueueSetState:function(Qc,rd){if(null===xb)return null;xb.push(rd)}};if(jb){if(jb=new Eb(Ob.props,wb,rb),"function"===typeof Eb.getDerivedStateFromProps){var Ib=Eb.getDerivedStateFromProps.call(null,Ob.props,jb.state);null!=Ib&&(jb.state=S({},jb.state,Ib))}}else if(la={},
jb=Eb(Ob.props,wb,rb),jb=m(Eb,Ob.props,jb,wb),null==jb||null==jb.render){Va=jb;V(Va,Eb);return}jb.props=Ob.props;jb.context=wb;jb.updater=rb;rb=jb.state;void 0===rb&&(jb.state=rb=null);if("function"===typeof jb.UNSAFE_componentWillMount||"function"===typeof jb.componentWillMount)if("function"===typeof jb.componentWillMount&&"function"!==typeof Eb.getDerivedStateFromProps&&jb.componentWillMount(),"function"===typeof jb.UNSAFE_componentWillMount&&"function"!==typeof Eb.getDerivedStateFromProps&&jb.UNSAFE_componentWillMount(),
xb.length){rb=xb;var jc=fb;xb=null;fb=!1;if(jc&&1===rb.length)jb.state=rb[0];else{Ib=jc?rb[0]:jb.state;var Cc=!0;for(jc=jc?1:0;jc<rb.length;jc++){var Gc=rb[jc];Gc="function"===typeof Gc?Gc.call(jb,Ib,Ob.props,wb):Gc;null!=Gc&&(Cc?(Cc=!1,Ib=S({},Ib,Gc)):S(Ib,Gc))}jb.state=Ib}}else xb=null;Va=jb.render();V(Va,Eb);if("function"===typeof jb.getChildContext&&(Ob=Eb.childContextTypes,"object"===typeof Ob)){var mc=jb.getChildContext(),Sc;for(Sc in mc)if(!(Sc in Ob))throw Error(y(108,X(Eb)||"Unknown",Sc));
}mc&&(Ab=S({},Ab,mc))}for(;N.isValidElement(Va);){var gc=Va,Bb=gc.type;if("function"!==typeof Bb)break;$b(gc,Bb)}return{child:Va,context:Ab}}var S=ca(159),N=ca(22),U=60106,u=60107,J=60108,I=60114,Q=60109,O=60110,M=60112,ia=60113,W=60120,aa=60115,ba=60116,Y=60121,ha=60117,Z=60119,fa=60129,qa=60131;"function"===typeof Symbol&&Symbol.for&&(za=Symbol.for,U=za("react.portal"),u=za("react.fragment"),J=za("react.strict_mode"),I=za("react.profiler"),Q=za("react.provider"),O=za("react.context"),M=za("react.forward_ref"),
ia=za("react.suspense"),W=za("react.suspense_list"),aa=za("react.memo"),ba=za("react.lazy"),Y=za("react.block"),ha=za("react.fundamental"),Z=za("react.scope"),fa=za("react.debug_trace_mode"),qa=za("react.legacy_hidden"));za=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var wa={},sa=new Uint16Array(16);for(ca=0;15>ca;ca++)sa[ca]=ca+1;sa[15]=0;var xa=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ia=Object.prototype.hasOwnProperty,Ja={},eb={},Fa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Va){Fa[Va]=new D(Va,0,!1,Va,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Va){var Ab=Va[0];Fa[Ab]=new D(Ab,1,!1,Va[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Va){Fa[Va]=
new D(Va,2,!1,Va.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Va){Fa[Va]=new D(Va,2,!1,Va,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Va){Fa[Va]=new D(Va,3,!1,Va.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(Va){Fa[Va]=new D(Va,3,!0,Va,null,!1,!1)});["capture","download"].forEach(function(Va){Fa[Va]=new D(Va,4,!1,Va,null,!1,!1)});["cols","rows","size","span"].forEach(function(Va){Fa[Va]=new D(Va,6,!1,Va,null,!1,!1)});["rowSpan","start"].forEach(function(Va){Fa[Va]=new D(Va,5,!1,Va.toLowerCase(),null,!1,!1)});var Ma=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Va){var Ab=
Va.replace(Ma,F);Fa[Ab]=new D(Ab,1,!1,Va,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Va){var Ab=Va.replace(Ma,F);Fa[Ab]=new D(Ab,1,!1,Va,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Va){var Ab=Va.replace(Ma,F);Fa[Ab]=new D(Ab,1,!1,Va,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Va){Fa[Va]=new D(Va,1,!1,Va.toLowerCase(),null,!1,!1)});
Fa.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Va){Fa[Va]=new D(Va,1,!1,Va.toLowerCase(),null,!0,!0)});var Ba=/["'&<>]/,ma="function"===typeof Object.is?Object.is:h,la=null,va=null,oa=null,pa=!1,Oa=!1,Sa=null,Ta=0,Na=null,Ya={readContext:function(Va){var Ab=Na.threadID;C(Va,Ab);return Va[Ab]},useContext:function(Va){b();var Ab=Na.threadID;C(Va,Ab);return Va[Ab]},useMemo:p,useReducer:t,useRef:function(Va){la=
b();oa=l();var Ab=oa.memoizedState;return null===Ab?(Va={current:Va},oa.memoizedState=Va):Ab},useState:function(Va){return t(x,Va)},useLayoutEffect:function(){},useCallback:function(Va,Ab){return p(function(){return Va},Ab)},useImperativeHandle:G,useEffect:G,useDebugValue:G,useDeferredValue:function(Va){b();return Va},useTransition:function(){b();return[function(Va){Va()},!1]},useOpaqueIdentifier:function(){return(Na.identifierPrefix||"")+"R:"+(Na.uniqueID++).toString(36)},useMutableSource:function(Va,
Ab){b();return Ab(Va._source)}},kb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Mb=S({menuitem:!0},kb),Hb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ca=["Webkit","ms","Moz","O"];Object.keys(Hb).forEach(function(Va){Ca.forEach(function(Ab){Ab=Ab+Va.charAt(0).toUpperCase()+Va.substring(1);Hb[Ab]=Hb[Va]})});var pb=/([A-Z])/g,hb=/^ms-/,Wa=N.Children.toArray,
ib=za.ReactCurrentDispatcher,Xa={listing:!0,pre:!0,textarea:!0},cc=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Yc={},Wc={},Kc=Object.prototype.hasOwnProperty,Mc={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Ua=function(){function Va(sb,$b,gc){N.isValidElement(sb)?sb.type!==u?sb=[sb]:(sb=sb.props.children,sb=N.isValidElement(sb)?[sb]:Wa(sb)):sb=Wa(sb);sb={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:sb,childIndex:0,context:wa,footer:""};
var Bb=sa[0];if(0===Bb){var Ob=sa;Bb=Ob.length;var Eb=2*Bb;if(!(65536>=Eb))throw Error(y(304));var jb=new Uint16Array(Eb);jb.set(Ob);sa=jb;sa[0]=Bb+1;for(Ob=Bb;Ob<Eb-1;Ob++)sa[Ob]=Ob+1;sa[Eb-1]=0}else sa[0]=sa[Bb];this.threadID=Bb;this.stack=[sb];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=$b;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=gc&&gc.identifierPrefix||""}
var Ab=Va.prototype;Ab.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var sb=this.threadID;sa[sb]=sa[0];sa[0]=sb}};Ab.pushProvider=function(sb){var $b=++this.contextIndex,gc=sb.type._context,Bb=this.threadID;C(gc,Bb);var Ob=gc[Bb];this.contextStack[$b]=gc;this.contextValueStack[$b]=Ob;gc[Bb]=sb.props.value};Ab.popProvider=function(){var sb=this.contextIndex,$b=this.contextStack[sb],gc=this.contextValueStack[sb];this.contextStack[sb]=null;this.contextValueStack[sb]=
null;this.contextIndex--;$b[this.threadID]=gc};Ab.clearProviders=function(){for(var sb=this.contextIndex;0<=sb;sb--)this.contextStack[sb][this.threadID]=this.contextValueStack[sb]};Ab.read=function(sb){if(this.exhausted)return null;var $b=Na;Na=this;var gc=ib.current;ib.current=Ya;try{for(var Bb=[""],Ob=!1;Bb[0].length<sb;){if(0===this.stack.length){this.exhausted=!0;var Eb=this.threadID;sa[Eb]=sa[0];sa[0]=Eb;break}var jb=this.stack[this.stack.length-1];if(Ob||jb.childIndex>=jb.children.length){var wb=
jb.footer;""!==wb&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===jb.type)this.currentSelectValue=null;else if(null!=jb.type&&null!=jb.type.type&&jb.type.type.$$typeof===Q)this.popProvider(jb.type);else if(jb.type===ia){this.suspenseDepth--;var xb=Bb.pop();if(Ob){Ob=!1;var fb=jb.fallbackFrame;if(!fb)throw Error(y(303));this.stack.push(fb);Bb[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Bb[this.suspenseDepth]+=xb}Bb[this.suspenseDepth]+=wb}else{var rb=jb.children[jb.childIndex++],
Ib="";try{Ib+=this.render(rb,jb.context,jb.domNamespace)}catch(jc){if(null!=jc&&"function"===typeof jc.then)throw Error(y(294));throw jc;}finally{}Bb.length<=this.suspenseDepth&&Bb.push("");Bb[this.suspenseDepth]+=Ib}}return Bb[0]}finally{ib.current=gc,Na=$b,E()}};Ab.render=function(sb,$b,gc){if("string"===typeof sb||"number"===typeof sb){gc=""+sb;if(""===gc)return"";if(this.makeStaticMarkup)return P(gc);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+P(gc);this.previousWasTextNode=!0;return P(gc)}$b=
H(sb,$b,this.threadID);sb=$b.child;$b=$b.context;if(null===sb||!1===sb)return"";if(!N.isValidElement(sb)){if(null!=sb&&null!=sb.$$typeof){gc=sb.$$typeof;if(gc===U)throw Error(y(257));throw Error(y(258,gc.toString()));}sb=Wa(sb);this.stack.push({type:null,domNamespace:gc,children:sb,childIndex:0,context:$b,footer:""});return""}var Bb=sb.type;if("string"===typeof Bb)return this.renderDOM(sb,$b,gc);switch(Bb){case qa:case fa:case J:case I:case W:case u:return sb=Wa(sb.props.children),this.stack.push({type:null,
domNamespace:gc,children:sb,childIndex:0,context:$b,footer:""}),"";case ia:throw Error(y(294));case Z:throw Error(y(343));}if("object"===typeof Bb&&null!==Bb)switch(Bb.$$typeof){case M:la={};var Ob=Bb.render(sb.props,sb.ref);Ob=m(Bb.render,sb.props,Ob,sb.ref);Ob=Wa(Ob);this.stack.push({type:null,domNamespace:gc,children:Ob,childIndex:0,context:$b,footer:""});return"";case aa:return sb=[N.createElement(Bb.type,S({ref:sb.ref},sb.props))],this.stack.push({type:null,domNamespace:gc,children:sb,childIndex:0,
context:$b,footer:""}),"";case Q:return Bb=Wa(sb.props.children),gc={type:sb,domNamespace:gc,children:Bb,childIndex:0,context:$b,footer:""},this.pushProvider(sb),this.stack.push(gc),"";case O:Bb=sb.type;Ob=sb.props;var Eb=this.threadID;C(Bb,Eb);Bb=Wa(Ob.children(Bb[Eb]));this.stack.push({type:sb,domNamespace:gc,children:Bb,childIndex:0,context:$b,footer:""});return"";case ha:throw Error(y(338));case ba:return Bb=sb.type,Ob=Bb._init,Bb=Ob(Bb._payload),sb=[N.createElement(Bb,S({ref:sb.ref},sb.props))],
this.stack.push({type:null,domNamespace:gc,children:sb,childIndex:0,context:$b,footer:""}),""}throw Error(y(130,null==Bb?Bb:typeof Bb,""));};Ab.renderDOM=function(sb,$b,gc){var Bb=sb.type.toLowerCase();"http://www.w3.org/1999/xhtml"===gc&&z(Bb);if(!Yc.hasOwnProperty(Bb)){if(!cc.test(Bb))throw Error(y(65,Bb));Yc[Bb]=!0}var Ob=sb.props;if("input"===Bb)Ob=S({type:void 0},Ob,{defaultChecked:void 0,defaultValue:void 0,value:null!=Ob.value?Ob.value:Ob.defaultValue,checked:null!=Ob.checked?Ob.checked:Ob.defaultChecked});
else if("textarea"===Bb){var Eb=Ob.value;if(null==Eb){Eb=Ob.defaultValue;var jb=Ob.children;if(null!=jb){if(null!=Eb)throw Error(y(92));if(Array.isArray(jb)){if(!(1>=jb.length))throw Error(y(93));jb=jb[0]}Eb=""+jb}null==Eb&&(Eb="")}Ob=S({},Ob,{value:void 0,children:""+Eb})}else if("select"===Bb)this.currentSelectValue=null!=Ob.value?Ob.value:Ob.defaultValue,Ob=S({},Ob,{value:void 0});else if("option"===Bb){jb=this.currentSelectValue;var wb=K(Ob.children);if(null!=jb){var xb=null!=Ob.value?Ob.value+
"":wb;Eb=!1;if(Array.isArray(jb))for(var fb=0;fb<jb.length;fb++){if(""+jb[fb]===xb){Eb=!0;break}}else Eb=""+jb===xb;Ob=S({selected:void 0,children:void 0},Ob,{selected:Eb,children:wb})}}if(Eb=Ob){if(Mb[Bb]&&(null!=Eb.children||null!=Eb.dangerouslySetInnerHTML))throw Error(y(137,Bb));if(null!=Eb.dangerouslySetInnerHTML){if(null!=Eb.children)throw Error(y(60));if(!("object"===typeof Eb.dangerouslySetInnerHTML&&"__html"in Eb.dangerouslySetInnerHTML))throw Error(y(61));}if(null!=Eb.style&&"object"!==
typeof Eb.style)throw Error(y(62));}Eb=Ob;jb=this.makeStaticMarkup;wb=1===this.stack.length;xb="\x3c"+sb.type;a:if(-1===Bb.indexOf("-"))fb="string"===typeof Eb.is;else switch(Bb){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":fb=!1;break a;default:fb=!0}for(rd in Eb)if(Kc.call(Eb,rd)){var rb=Eb[rd];if(null!=rb){if("style"===rd){var Ib=void 0,jc="",Cc="";for(Ib in rb)if(rb.hasOwnProperty(Ib)){var Gc=
0===Ib.indexOf("--"),mc=rb[Ib];if(null!=mc){if(Gc)var Sc=Ib;else if(Sc=Ib,Wc.hasOwnProperty(Sc))Sc=Wc[Sc];else{var Qc=Sc.replace(pb,"-$1").toLowerCase().replace(hb,"-ms-");Sc=Wc[Sc]=Qc}jc+=Cc+Sc+":";Cc=Ib;Gc=null==mc||"boolean"===typeof mc||""===mc?"":Gc||"number"!==typeof mc||0===mc||Hb.hasOwnProperty(Cc)&&Hb[Cc]?(""+mc).trim():mc+"px";jc+=Gc;Cc=";"}}rb=jc||null}Ib=null;fb?Mc.hasOwnProperty(rd)||(Ib=rd,Ib=c(Ib)&&null!=rb?Ib+'\x3d"'+(P(rb)+'"'):""):Ib=g(rd,rb);Ib&&(xb+=" "+Ib)}}jb||wb&&(xb+=' data-reactroot\x3d""');
var rd=xb;Eb="";kb.hasOwnProperty(Bb)?rd+="/\x3e":(rd+="\x3e",Eb="\x3c/"+sb.type+"\x3e");a:{jb=Ob.dangerouslySetInnerHTML;if(null!=jb){if(null!=jb.__html){jb=jb.__html;break a}}else if(jb=Ob.children,"string"===typeof jb||"number"===typeof jb){jb=P(jb);break a}jb=null}null!=jb?(Ob=[],Xa.hasOwnProperty(Bb)&&"\n"===jb.charAt(0)&&(rd+="\n"),rd+=jb):Ob=Wa(Ob.children);sb=sb.type;gc=null==gc||"http://www.w3.org/1999/xhtml"===gc?z(sb):"http://www.w3.org/2000/svg"===gc&&"foreignObject"===sb?"http://www.w3.org/1999/xhtml":
gc;this.stack.push({domNamespace:gc,type:Bb,children:Ob,childIndex:0,context:$b,footer:Eb});this.previousWasTextNode=!1;return rd};return Va}();L.renderToNodeStream=function(){throw Error(y(207));};L.renderToStaticMarkup=function(Va,Ab){Va=new Ua(Va,!0,Ab);try{return Va.read(Infinity)}finally{Va.destroy()}};L.renderToStaticNodeStream=function(){throw Error(y(208));};L.renderToString=function(Va,Ab){Va=new Ua(Va,!1,Ab);try{return Va.read(Infinity)}finally{Va.destroy()}};L.version="17.0.2"};
shadow$provide[605]=function(za,ca,Za,L){Za.exports=ca(603)};
shadow$provide[606]=function(za,ca,Za,L){function y(){if(!Uu&&(Uu="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Uu))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Uu(TD)}function X(a,d=0){return(Ol[a[d+0]]+Ol[a[d+1]]+Ol[a[d+2]]+Ol[a[d+3]]+"-"+Ol[a[d+4]]+Ol[a[d+5]]+"-"+Ol[a[d+6]]+Ol[a[d+7]]+"-"+Ol[a[d+8]]+Ol[a[d+9]]+"-"+Ol[a[d+10]]+Ol[a[d+11]]+Ol[a[d+12]]+Ol[a[d+13]]+Ol[a[d+14]]+
Ol[a[d+15]]).toLowerCase()}function C(a){let d=0;var n=0;for(var R of a)d+=R.w*R.h,n=Math.max(n,R.w);a.sort((ta,Ka)=>Ka.h-ta.h);n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),n),h:Infinity}];let ea=R=0;for(const ta of a)for(a=n.length-1;0<=a;a--){var ka=n[a];if(!(ta.w>ka.w||ta.h>ka.h)){ta.x=ka.x;ta.y=ka.y;ea=Math.max(ea,ta.y+ta.h);R=Math.max(R,ta.x+ta.w);ta.w===ka.w&&ta.h===ka.h?(ka=n.pop(),a<n.length&&(n[a]=ka)):ta.h===ka.h?(ka.x+=ta.w,ka.w-=ta.w):(ta.w!==ka.w&&n.push({x:ka.x+ta.w,y:ka.y,w:ka.w-
ta.w,h:ta.h}),ka.y+=ta.h,ka.h-=ta.h);break}}return{w:R,h:ea,fill:d/(R*ea)||0}}function r(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function c(a,d,n=0){const R=[a[0]+d[0]/2,a[1]+d[1]/2],ea=Xd.rotWith(a,R,n),ka=Xd.rotWith(Xd.add(a,[d[0],0]),R,n),ta=Xd.rotWith(Xd.add(a,d),R,n);a=Xd.rotWith(Xd.add(a,[0,d[1]]),R,n);return[["top",[ea,ka]],["right",[ka,ta]],["bottom",[ta,a]],["left",[a,ea]]]}function w(a,d,n,R){const [ea,ka]=a,[ta,Ka]=d,[$a,mb]=n,[ub,zb]=R;return Ka/ta!==(zb-mb)/(ub-$a)&&
(d=ta*(zb-mb)-Ka*(ub-$a),0!==d&&(a=((ka-mb)*(ub-$a)-(ea-$a)*(zb-mb))/d,d=((ka-mb)*ta-(ea-$a)*Ka)/d,0<=a&&0<=d&&1>=d))?r("intersection",[ea+a*ta,ka+a*Ka]):r("no intersection")}function A(a,d,n,R,ea=0){return b(n,R,ea,a,d)}function D(a,d,n,R=0){const {minX:ea,minY:ka,width:ta,height:Ka}=n;return A(a,d,[ea,ka],[ta,Ka],R)}function F(a,d,n,R){var ea=Xd.sub(a,n);n=Xd.sub(R,n);d=Xd.sub(d,a);R=n[0]*ea[1]-n[1]*ea[0];ea=d[0]*ea[1]-d[1]*ea[0];n=n[1]*d[0]-n[0]*d[1];return 0===R||0===ea?r("coincident"):0===n?
r("parallel"):0!==n&&(R/=n,ea/=n,0<=R&&1>=R&&0<=ea&&1>=ea)?r("intersection",Xd.add(a,Xd.mul(d,R))):r("no intersection")}function P(a,d,n,R){var ea=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),ka=2*((d[0]-a[0])*(a[0]-n[0])+(d[1]-a[1])*(a[1]-n[1]));n=ka*ka-4*ea*(n[0]*n[0]+n[1]*n[1]+a[0]*a[0]+a[1]*a[1]-2*(n[0]*a[0]+n[1]*a[1])-R*R);if(0>n)return r("outside");if(0===n)return r("tangent");R=Math.sqrt(n);n=(-ka+R)/(2*ea);ea=(-ka-R)/(2*ea);if((0>n||1<n)&&(0>ea||1<ea))return 0>n&&0>ea||1<n&&1<ea?r("outside"):
r("inside");ka=[];0<=n&&1>=n&&ka.push(Xd.lrp(a,d,n));0<=ea&&1>=ea&&ka.push(Xd.lrp(a,d,ea));return r("intersection",...ka)}function g(a,d,n,R,ea,ka=0){if(0===R||0===ea||Xd.isEqual(a,d))return r("no intersection");R=0>R?R:-R;ea=0>ea?ea:-ea;a=Xd.sub(Xd.rotWith(a,n,-ka),n);d=Xd.sub(Xd.rotWith(d,n,-ka),n);var ta=Xd.sub(d,a),Ka=ta[0]*ta[0]/R/R+ta[1]*ta[1]/ea/ea;ta=2*a[0]*ta[0]/R/R+2*a[1]*ta[1]/ea/ea;const $a=[];R=ta*ta-4*Ka*(a[0]*a[0]/R/R+a[1]*a[1]/ea/ea-1);0===R?$a.push(-ta/2/Ka):0<R&&(R=Math.sqrt(R),
$a.push((-ta+R)/2/Ka),$a.push((-ta-R)/2/Ka));Ka=$a.filter(mb=>0<=mb&&1>=mb).map(mb=>Xd.add(n,Xd.add(a,Xd.mul(Xd.sub(d,a),mb)))).map(mb=>Xd.rotWith(mb,n,ka));return r("intersection",...Ka)}function h(a,d,n){const R=[];for(let ea=1;ea<n.length;ea++){const ka=F(a,d,n[ea-1],n[ea]);ka&&R.push(...ka.points)}return 0===R.length?r("no intersection"):r("intersection",...n)}function b(a,d,n,R,ea){return c(a,d,n).reduce((ka,[ta,[Ka,$a]])=>{(Ka=w(R,ea,Ka,$a))&&ka.push(r(ta,...Ka.points));return ka},[]).filter(ka=>
ka.didIntersect)}function k(a,d,n,R){return c(a,d).reduce((ea,[ka,[ta,Ka]])=>{(ta=F(n,R,ta,Ka))&&ea.push(r(ka,...ta.points));return ea},[]).filter(ea=>ea.didIntersect)}function l(a,d,n,R){return c(a,d).reduce((ea,[ka,[ta,Ka]])=>{(ta=P(ta,Ka,n,R))&&ea.push(Mf(we({},ta),{message:ka}));return ea},[]).filter(ea=>ea.didIntersect)}function m(a,d,n,R,ea,ka=0){return c(a,d).reduce((ta,[Ka,[$a,mb]])=>{($a=g($a,mb,n,R,ea,ka))&&ta.push(Mf(we({},$a),{message:Ka}));return ta},[]).filter(ta=>ta.didIntersect)}function E(a,
d,n){return c(a,d).reduce((R,[ea,[ka,ta]])=>{ka=h(ka,ta,n);ka.didIntersect&&R.push(r(ea,...ka.points));return R},[]).filter(R=>R.didIntersect)}function x(a,d,n){return c(a,d).reduce((R,[ea,[ka,ta]])=>{{const Ka=[];for(let $a=1;$a<n.length+1;$a++){const mb=F(ka,ta,n[$a-1],n[$a%n.length]);mb&&Ka.push(...mb.points)}ka=0===Ka.length?r("no intersection"):r("intersection",...n)}ka.didIntersect&&R.push(r(ea,...ka.points));return R},[]).filter(R=>R.didIntersect)}function t(a,d,n,R=0,ea,ka){return d===n?l(ea,
ka,a,d):m(ea,ka,a,d,n,R)}function p(a,d,n){const {minX:R,minY:ea,width:ka,height:ta}=a;return k([R,ea],[ka,ta],d,n)}function f(a){for(var d=arguments.length,n=Array(1<d?d-1:0),R=1;R<d;R++)n[R-1]=arguments[R];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function G(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?
window:"undefined"!==typeof za?za:"undefined"!==typeof self?self:VD}function z(){XD||f("Proxy not available")}function K(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function V(a){return"function"===typeof a}function H(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function S(a){return null!==a&&"object"===typeof a}function N(a){if(!S(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&
a.constructor;return"function"===typeof a&&a.toString()===YD}function U(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function u(a,d,n){mp(a,d,{enumerable:!1,writable:!0,configurable:!0,value:n})}function J(a,d,n){mp(a,d,{enumerable:!1,writable:!1,configurable:!0,value:n})}function I(a,d){var n="isMobX"+a;d.prototype[n]=!0;return function(R){return S(R)&&!0===R[n]}}function Q(a){return a instanceof Map}function O(a){return a instanceof
Set}function M(a){var d=Object.keys(a);if(!kz)return d;var n=Object.getOwnPropertySymbols(a);return n.length?[].concat(d,n.filter(function(R){return Ft.propertyIsEnumerable.call(a,R)})):d}function ia(a){return null===a?null:"object"===typeof a?""+a:a}function W(a,d){return Ft.hasOwnProperty.call(a,d)}function aa(a,d){for(var n=0;n<d.length;n++){var R=d[n];R.enumerable=R.enumerable||!1;R.configurable=!0;"value"in R&&(R.writable=!0);Object.defineProperty(a,R.key,R)}}function ba(a,d,n){d&&aa(a.prototype,
d);n&&aa(a,n);Object.defineProperty(a,"prototype",{writable:!1});return a}function Y(){Y=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var n=arguments[d],R;for(R in n)Object.prototype.hasOwnProperty.call(n,R)&&(a[R]=n[R])}return a};return Y.apply(this,arguments)}function ha(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;Z(a,d)}function Z(a,d){Z=Object.setPrototypeOf||function(n,R){n.__proto__=R;return n};return Z(a,d)}function fa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function qa(a,d){if(a){if("string"===typeof a)return wa(a,d);var n=Object.prototype.toString.call(a).slice(8,-1);"Object"===n&&a.constructor&&(n=a.constructor.name);if("Map"===n||"Set"===n)return Array.from(a);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wa(a,d)}}function wa(a,d){if(null==d||d>a.length)d=a.length;for(var n=0,R=Array(d);n<d;n++)R[n]=a[n];return R}function sa(a,d){var n="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(n)return(n=
n.call(a)).next.bind(n);if(Array.isArray(a)||(n=qa(a))||d&&a&&"number"===typeof a.length){n&&(a=n);var R=0;return function(){return R>=a.length?{done:!0}:{done:!1,value:a[R++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function xa(a){return Object.assign(function(d,n){Ia(d,n,a)},a)}function Ia(a,d,n){W(a,ko)||u(a,ko,Y({},a[ko]));n.annotationType_!==$D&&(a[ko][d]=n)}function Ja(a){W(a,
ko)||u(a,ko,Y({},a[ko]));return a[ko]}function eb(a,d,n){void 0===d&&(d=os);void 0===n&&(n=os);a=new Gt(a);d!==os&&Vc(pE,a,d,void 0);n!==os&&td(a,n);return a}function Fa(a,d,n){return yc(a)?a:Array.isArray(a)?jh.array(a,{name:n}):N(a)?jh.object(a,void 0,{name:n}):Q(a)?jh.map(a,{name:n}):O(a)?jh.set(a,{name:n}):"function"!==typeof a||Gc(a)||Nc(a)?a:U(a)?Lt(a):Kt(n,a)}function Ma(a){return a}function Ba(a,d){return{annotationType_:a,options_:d,make_:ma,extend_:la}}function ma(a,d,n,R){var ea;if(null!=
(ea=this.options_)&&ea.bound)return null===this.extend_(a,d,n,!1)?0:1;if(R===a.target_)return null===this.extend_(a,d,n,!1)?0:2;if(Gc(n.value))return 1;a=va(a,this,d,n,!1);mp(R,d,a);return 2}function la(a,d,n,R){n=va(a,this,d,n);return a.defineProperty_(d,n,R)}function va(a,d,n,R,ea){var ka,ta,Ka,$a,mb,ub,zb;void 0===ea&&(ea=ig.safeDescriptors);R=R.value;if(null!=(ka=d.options_)&&ka.bound){var ec;R=R.bind(null!=(ec=a.proxy_)?ec:a.target_)}return{value:Xa(null!=(ta=null==(Ka=d.options_)?void 0:Ka.name)?
ta:n.toString(),R,null!=($a=null==(mb=d.options_)?void 0:mb.autoAction)?$a:!1,null!=(ub=d.options_)&&ub.bound?null!=(zb=a.proxy_)?zb:a.target_:void 0),configurable:ea?a.isPlainObject_:!0,enumerable:!1,writable:ea?!1:!0}}function oa(a,d){return{annotationType_:a,options_:d,make_:pa,extend_:Oa}}function pa(a,d,n,R){var ea;if(R===a.target_)return null===this.extend_(a,d,n,!1)?0:2;if(null!=(ea=this.options_)&&ea.bound&&(!W(a.target_,d)||!Nc(a.target_[d]))&&null===this.extend_(a,d,n,!1))return 0;if(Nc(n.value))return 1;
a=Sa(a,this,d,n,!1,!1);mp(R,d,a);return 2}function Oa(a,d,n,R){var ea;n=Sa(a,this,d,n,null==(ea=this.options_)?void 0:ea.bound);return a.defineProperty_(d,n,R)}function Sa(a,d,n,R,ea,ka){void 0===ka&&(ka=ig.safeDescriptors);d=R.value;Nc(d)||(d=Lt(d));if(ea){var ta;d=d.bind(null!=(ta=a.proxy_)?ta:a.target_);d.isMobXFlow=!0}return{value:d,configurable:ka?a.isPlainObject_:!0,enumerable:!1,writable:ka?!1:!0}}function Ta(a,d){return{annotationType_:a,options_:d,make_:Na,extend_:Ya}}function Na(a,d,n){return null===
this.extend_(a,d,n,!1)?0:1}function Ya(a,d,n,R){return a.defineComputedProperty_(d,Y({},this.options_,{get:n.get,set:n.set}),R)}function kb(a,d){return{annotationType_:a,options_:d,make_:Mb,extend_:Hb}}function Mb(a,d,n){return null===this.extend_(a,d,n,!1)?0:1}function Hb(a,d,n,R){var ea,ka;return a.defineObservableProperty_(d,n.value,null!=(ea=null==(ka=this.options_)?void 0:ka.enhancer)?ea:Fa,R)}function Ca(a){return{annotationType_:"true",options_:a,make_:pb,extend_:hb}}function pb(a,d,n,R){var ea,
ka;if(n.get)return ph.make_(a,d,n,R);if(n.set){n=Xa(d.toString(),n.set);if(R===a.target_)return null===a.defineProperty_(d,{configurable:ig.safeDescriptors?a.isPlainObject_:!0,set:n})?0:2;mp(R,d,{configurable:!0,set:n});return 2}if(R!==a.target_&&"function"===typeof n.value){var ta;if(U(n.value)){var Ka;return(null!=(Ka=this.options_)&&Ka.autoBind?Lt.bound:Lt).make_(a,d,n,R)}return(null!=(ta=this.options_)&&ta.autoBind?Kt.bound:Kt).make_(a,d,n,R)}ta=!1===(null==(ea=this.options_)?void 0:ea.deep)?
jh.ref:jh;if("function"===typeof n.value&&null!=(ka=this.options_)&&ka.autoBind){var $a;n.value=n.value.bind(null!=($a=a.proxy_)?$a:a.target_)}return ta.make_(a,d,n,R)}function hb(a,d,n,R){var ea,ka;if(n.get)return ph.extend_(a,d,n,R);if(n.set)return a.defineProperty_(d,{configurable:ig.safeDescriptors?a.isPlainObject_:!0,set:Xa(d.toString(),n.set)},R);if("function"===typeof n.value&&null!=(ea=this.options_)&&ea.autoBind){var ta;n.value=n.value.bind(null!=(ta=a.proxy_)?ta:a.target_)}return(!1===(null==
(ka=this.options_)?void 0:ka.deep)?jh.ref:jh).extend_(a,d,n,R)}function Wa(a){if(!0===a.deep)var d=Fa;else{if(!1===a.deep)a=Ma;else{a=a.defaultDecorator;var n;a=a?null!=(d=null==(n=a.options_)?void 0:n.enhancer)?d:Fa:Fa}d=a}return d}function ib(a,d,n){if(H(d))Ia(a,d,lz);else return yc(a)?a:N(a)?jh.object(a,d,n):Array.isArray(a)?jh.array(a,d):Q(a)?jh.map(a,d):O(a)?jh.set(a,d):"object"===typeof a&&null!==a?a:jh.box(a,d)}function Xa(a,d,n,R){function ea(){a:{var ka=R||this,ta=arguments,Ka=ig.trackingDerivation,
$a=!n||!Ka;Ob();var mb=ig.allowStateChanges;$a&&(Va(),mb=Yc(!0));var ub=Ab(!0),zb=gE++,ec=Zu;Zu=zb;try{var ic=d.apply(ka,ta);break a}catch(Lc){var bc=Lc;throw Lc;}finally{Zu!==zb&&f(30),Zu=ec,void 0!==bc&&(ig.suppressReactionErrors=!0),ig.allowStateChanges=mb,ig.allowStateReads=ub,Eb(),$a&&(ig.trackingDerivation=Ka),ig.suppressReactionErrors=!1}ic=void 0}return ic}void 0===n&&(n=!1);ea.isMobxAction=!0;hE&&(qz.value=a,Object.defineProperty(ea,"name",qz));return ea}function cc(a,d){a=Yc(a);try{return d()}finally{ig.allowStateChanges=
a}}function Yc(a){var d=ig.allowStateChanges;ig.allowStateChanges=a;return d}function Wc(a){switch(a.dependenciesState_){case uj.UP_TO_DATE_:return!1;case uj.NOT_TRACKING_:case uj.STALE_:return!0;case uj.POSSIBLY_STALE_:for(var d=Ab(!0),n=Va(),R=a.observing_,ea=R.length,ka=0;ka<ea;ka++){var ta=R[ka];if(Jt(ta)){if(ig.disableErrorBoundaries)ta.get();else try{ta.get()}catch(Ka){return ig.trackingDerivation=n,ig.allowStateReads=d,!0}if(a.dependenciesState_===uj.STALE_)return ig.trackingDerivation=n,ig.allowStateReads=
d,!0}}sb(a);ig.trackingDerivation=n;ig.allowStateReads=d;return!1}}function Kc(a,d,n){var R=Ab(!0);sb(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++ig.runId;var ea=ig.trackingDerivation;ig.trackingDerivation=a;ig.inBatch++;if(!0===ig.disableErrorBoundaries)var ka=d.call(n);else try{ka=d.call(n)}catch(ub){ka=new pr(ub)}ig.inBatch--;ig.trackingDerivation=ea;var ta=a.observing_;d=a.observing_=a.newObserving_;n=uj.UP_TO_DATE_;ea=0;for(var Ka=a.unboundDepsCount_,$a=
0;$a<Ka;$a++){var mb=d[$a];0===mb.diffValue_&&(mb.diffValue_=1,ea!==$a&&(d[ea]=mb),ea++);mb.dependenciesState_>n&&(n=mb.dependenciesState_)}d.length=ea;a.newObserving_=null;for(Ka=ta.length;Ka--;)$a=ta[Ka],0===$a.diffValue_&&gc($a,a),$a.diffValue_=0;for(;ea--;)ta=d[ea],1===ta.diffValue_&&(ta.diffValue_=0,Ka=a,ta.observers_.add(Ka),ta.lowestObserverState_>Ka.dependenciesState_&&(ta.lowestObserverState_=Ka.dependenciesState_));n!==uj.UP_TO_DATE_&&(a.dependenciesState_=n,a.onBecomeStale_());ig.allowStateReads=
R;return ka}function Mc(a){var d=a.observing_;a.observing_=[];for(var n=d.length;n--;)gc(d[n],a);a.dependenciesState_=uj.NOT_TRACKING_}function Ua(a){var d=Va();try{return a()}finally{ig.trackingDerivation=d}}function Va(){var a=ig.trackingDerivation;ig.trackingDerivation=null;return a}function Ab(a){var d=ig.allowStateReads;ig.allowStateReads=a;return d}function sb(a){if(a.dependenciesState_!==uj.UP_TO_DATE_){a.dependenciesState_=uj.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
uj.UP_TO_DATE_}}function $b(){(ig.pendingReactions.length||ig.inBatch||ig.isRunningReactions)&&f(36);rz=!0;if(av){var a=G();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);ig=new $u}}function gc(a,d){a.observers_["delete"](d);0===a.observers_.size&&Bb(a)}function Bb(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,ig.pendingUnobservations.push(a))}function Ob(){ig.inBatch++}function Eb(){if(0===--ig.inBatch){0<ig.inBatch||ig.isRunningReactions||bv(rb);for(var a=ig.pendingUnobservations,
d=0;d<a.length;d++){var n=a[d];n.isPendingUnobservation_=!1;0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof It&&n.suspend_())}ig.pendingUnobservations=[]}}function jb(a){var d=ig.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&ig.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<ig.inBatch&&Bb(a);return!1}
function wb(a){a.lowestObserverState_!==uj.STALE_&&(a.lowestObserverState_=uj.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===uj.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=uj.STALE_}))}function xb(a){a.lowestObserverState_!==uj.STALE_&&(a.lowestObserverState_=uj.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===uj.POSSIBLY_STALE_?d.dependenciesState_=uj.STALE_:d.dependenciesState_===uj.UP_TO_DATE_&&(a.lowestObserverState_=uj.UP_TO_DATE_)}))}function fb(a){a.lowestObserverState_===
uj.UP_TO_DATE_&&(a.lowestObserverState_=uj.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===uj.UP_TO_DATE_&&(d.dependenciesState_=uj.POSSIBLY_STALE_,d.onBecomeStale_())}))}function rb(){ig.isRunningReactions=!0;for(var a=ig.pendingReactions,d=0;0<a.length;){++d===lE&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var n=a.splice(0),R=0,ea=n.length;R<ea;R++)n[R].runReaction_()}ig.isRunningReactions=!1}function Ib(a){var d=bv;bv=function(n){return a(function(){return d(n)})}}
function jc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Cc(a){return function(d,n){if(V(d))return Xa(d.name||"\x3cunnamed action\x3e",d,a);if(V(n))return Xa(d,n,a);if(H(n))return Ia(d,n,a?uz:tz);if(H(d))return xa(Ba(a?"autoAction":sz,{name:d,autoAction:a}))}}function Gc(a){return V(a)&&!0===a.isMobxAction}function mc(a,d){function n(){a($a)}var R,ea;void 0===d&&(d=Ow);var ka=null!=(R=null==(ea=d)?void 0:ea.name)?R:"Autorun";if(d.scheduler||d.delay){var ta=
Sc(d),Ka=!1;var $a=new rs(ka,function(){Ka||(Ka=!0,ta(function(){Ka=!1;$a.isDisposed_||$a.track(n)}))},d.onError,d.requiresObservable)}else $a=new rs(ka,function(){this.track(n)},d.onError,d.requiresObservable);$a.schedule_();return $a.getDisposer_()}function Sc(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:oE}function Qc(a,d,n){function R(){ub=!1;if(!bc.isDisposed_){var Lc=!1;bc.track(function(){var $c=cc(!1,function(){return a(bc)});Lc=mb||!ic(zb,$c);ec=zb;
zb=$c});mb&&n.fireImmediately?ta(zb,ec,bc):!mb&&Lc&&ta(zb,ec,bc);mb=!1}}var ea;void 0===n&&(n=Ow);var ka=null!=(ea=n.name)?ea:"Reaction",ta=Og(ka,n.onError?rd(n.onError,d):d),Ka=!n.scheduler&&!n.delay,$a=Sc(n),mb=!0,ub=!1,zb,ec,ic=n.compareStructural?ps.structural:n.equals||ps["default"],bc=new rs(ka,function(){mb||Ka?R():ub||(ub=!0,$a(R))},n.onError,n.requiresObservable);bc.schedule_();return bc.getDisposer_()}function rd(a,d){return function(){try{return d.apply(this,arguments)}catch(n){a.call(this,
n)}}}function td(a,d,n){return Vc(qE,a,d,n)}function Vc(a,d,n,R){var ea="function"===typeof R?rc(d,n):rc(d),ka=V(R)?R:n,ta=a+"L";ea[ta]?ea[ta].add(ka):ea[ta]=new Set([ka]);return function(){var Ka=ea[ta];Ka&&(Ka["delete"](ka),0===Ka.size&&delete ea[ta])}}function qb(a){!0===a.isolateGlobalState&&$b();var d=a.useProxies,n=a.enforceActions;void 0!==d&&(ig.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(ig.verifyProxies=!0);void 0!==n&&(d="always"===n?"always":
"observed"===n,ig.enforceActions=d,ig.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(R){R in a&&(ig[R]=!!a[R])});ig.allowStateReads=!ig.observableRequiresReaction;a.reactionScheduler&&Ib(a.reactionScheduler)}function uc(a,d,n,R){var ea=ZD(d),ka=pd(a,R)[Uh];Ob();try{Yu(ea).forEach(function(ta){ka.extend_(ta,ea[ta],n?ta in n?n[ta]:!0:!0)})}finally{Eb()}return a}
function Yb(a){var d={name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(Yb));return d}function Fc(){this.message="FLOW_CANCELLED"}function Nc(a){return!0===(null==a?void 0:a.isMobXFlow)}function yc(a,d){return a?void 0!==d?Vd(a)?a[Uh].values_.has(d):!1:Vd(a)||!!a[Uh]||Pw(a)||cv(a)||Jt(a):!1}function hc(a){if(Vd(a))return a[Uh].ownKeys_();f(38)}function lc(a,d,n){a.set(d,n);return n}function pc(a,d){if(null==a||"object"!==typeof a||a instanceof
Date||!yc(a))return a;if(jE(a)||Jt(a))return pc(a.get(),d);if(d.has(a))return d.get(a);if(Pc(a)){var n=lc(d,a,Array(a.length));a.forEach(function(ta,Ka){n[Ka]=pc(ta,d)});return n}if(qr(a)){var R=lc(d,a,new Set);a.forEach(function(ta){R.add(pc(ta,d))});return R}if(iq(a)){var ea=lc(d,a,new Map);a.forEach(function(ta,Ka){ea.set(Ka,pc(ta,d))});return ea}var ka=lc(d,a,{});hc(a).forEach(function(ta){Ft.propertyIsEnumerable.call(a,ta)&&(ka[ta]=pc(a[ta],d))});return ka}function Gb(a,d){return pc(a,new Map)}
function wc(){f("trace() is not available in production builds");for(var a=!1,d=arguments.length,n=Array(d),R=0;R<d;R++)n[R]=arguments[R];"boolean"===typeof n[n.length-1]&&(a=n.pop());a:{switch(n.length){case 0:d=ig.trackingDerivation;break a;case 1:d=rc(n[0]);break a;case 2:d=rc(n[0],n[1]);break a}d=void 0}if(!d)return f("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===qs.NONE&&console.log("[mobx.trace] '"+
d.name_+"' tracing enabled");d.isTracing_=a?qs.BREAK:qs.LOG}function Vb(a,d){void 0===d&&(d=void 0);Ob();try{return a.apply(d)}finally{Eb()}}function lb(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function tb(a,d){var n=a.interceptors_||(a.interceptors_=[]);n.push(d);return K(function(){var R=n.indexOf(d);-1!==R&&n.splice(R,1)})}function Pa(a,d){var n=Va();try{var R=[].concat(a.interceptors_||[]);a=0;for(var ea=R.length;a<ea&&((d=R[a](d))&&!d.type&&f(14),d);a++);return d}finally{ig.trackingDerivation=
n}}function Db(a){return void 0!==a.changeListeners_&&0<a.changeListeners_.length}function Fb(a,d){var n=a.changeListeners_||(a.changeListeners_=[]);n.push(d);return K(function(){var R=n.indexOf(d);-1!==R&&n.splice(R,1)})}function Wb(a,d){var n=Va();if(a=a.changeListeners_){a=a.slice();for(var R=0,ea=a.length;R<ea;R++)a[R](d);ig.trackingDerivation=n}}function Dc(a,d,n){var R=pd(a,n)[Uh];Ob();try{var ea;null!=(ea=d)?ea:d=Ja(a);Yu(d).forEach(function(ka){return R.make_(ka,d[ka])})}finally{Eb()}return a}
function ab(a,d,n,R){void 0===n&&(n="ObservableArray");void 0===R&&(R=!1);z();d=new Qw(n,d,R,!1);J(d.values_,Uh,d);n=new Proxy(d.values_,uE);d.proxy_=n;a&&a.length&&(R=Yc(!0),d.spliceWithArray_(0,0,a),ig.allowStateChanges=R);return n}function cb(a,d){"function"===typeof Array.prototype[a]&&(dv[a]=d(a))}function Ra(a){return function(){var d=this[Uh];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function ob(a){return function(d,n){var R=this,ea=this[Uh];ea.atom_.reportObserved();
return ea.dehanceValues_(ea.values_)[a](function(ka,ta){return d.call(n,ka,ta,R)})}}function Cb(a){return function(){var d=this,n=this[Uh];n.atom_.reportObserved();n=n.dehanceValues_(n.values_);var R=arguments[0];arguments[0]=function(ea,ka,ta){return R(ea,ka,ta,d)};return n[a].apply(n,arguments)}}function Pc(a){return S(a)&&vE(a[Uh])}function hd(a){if(Q(a)||iq(a))return a;if(Array.isArray(a))return new Map(a);if(N(a)){var d=new Map,n;for(n in a)d.set(n,a[n]);return d}return f(21,a)}function pd(a,
d){var n;if(W(a,Uh))return a;var R=null!=(n=null==d?void 0:d.name)?n:"ObservableObject";n=zz;var ea=new Map;R=String(R);var ka;var ta=d?null!=(ka=d.defaultDecorator)?ka:Ca(d):void 0;d=new n(a,ea,R,ta);u(a,Uh,d);return a}function Id(a){return yz[a]||(yz[a]={get:function(){return this[Uh].getObservablePropValue_(a)},set:function(d){return this[Uh].setObservablePropValue_(a,d)}})}function Vd(a){return S(a)?CE(a[Uh]):!1}function Td(a){return{enumerable:!1,configurable:!0,get:function(){return this[Uh].get_(a)},
set:function(d){this[Uh].set_(a,d)}}}function yd(a){if(a>Rw){for(var d=Rw;d<a+100;d++)mp(Sw.prototype,""+d,Td(d));Rw=a}}function Qb(a,d,n){return new Sw(a,d,n)}function rc(a,d){if("object"===typeof a&&null!==a){if(Pc(a))return void 0!==d&&f(23),a[Uh].atom_;if(qr(a))return a[Uh];if(iq(a)){if(void 0===d)return a.keysAtom_;var n=a.data_.get(d)||a.hasMap_.get(d);n||f(25,d,db(a));return n}if(Vd(a)){if(!d)return f(26);(n=a[Uh].values_.get(d))||f(27,d,db(a));return n}if(Pw(a)||Jt(a)||cv(a))return a}else if(V(a)&&
cv(a[Uh]))return a[Uh];f(28)}function Rc(a,d){a||f(29);if(void 0!==d)return Rc(rc(a,d));if(Pw(a)||Jt(a)||cv(a)||iq(a)||qr(a))return a;if(a[Uh])return a[Uh];f(24,a)}function db(a,d){if(void 0!==d)a=rc(a,d);else{if(Gc(a))return a.name;a=Vd(a)||iq(a)||qr(a)?Rc(a):rc(a)}return a.name_}function ua(a,d,n){void 0===n&&(n=-1);return ra(a,d,n)}function ra(a,d,n,R,ea){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var ka=typeof a;if("function"!==ka&&"object"!==ka&&"object"!=
typeof d)return!1;ka=Bz.call(a);if(ka!==Bz.call(d))return!1;switch(ka){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=n&&n++}a=Ga(a);d=Ga(d);ka="[object Array]"===ka;if(!ka){if("object"!=typeof a||"object"!=
typeof d)return!1;var ta=a.constructor,Ka=d.constructor;if(ta!==Ka&&!(V(ta)&&ta instanceof ta&&V(Ka)&&Ka instanceof Ka)&&"constructor"in a&&"constructor"in d)return!1}if(0===n)return!1;0>n&&(n=-1);R=R||[];ea=ea||[];for(ta=R.length;ta--;)if(R[ta]===a)return ea[ta]===d;R.push(a);ea.push(d);if(ka){ta=a.length;if(ta!==d.length)return!1;for(;ta--;)if(!ra(a[ta],d[ta],n-1,R,ea))return!1}else{ka=Object.keys(a);ta=ka.length;if(Object.keys(d).length!==ta)return!1;for(;ta--;)if(Ka=ka[ta],!W(d,Ka)||!ra(a[Ka],
d[Ka],n-1,R,ea))return!1}R.pop();ea.pop();return!0}function Ga(a){return Pc(a)?a.slice():Q(a)||iq(a)||O(a)||qr(a)?Array.from(a.entries()):a}function bb(a){a[Symbol.iterator]=Pb;return a}function Pb(){return this}function xc(a,d){const n=new Set(d),R=Object.values(a),ea=new Set(R.filter(ka=>n.has(ka.toId)||n.has(ka.fromId)));a=ea.size;for(d=-1;0!==d;)ea.forEach(ka=>{ka=ka.fromId;for(const ta of R)ta.fromId===ka&&ea.add(ta),ta.toId===ka&&ea.add(ta)}),d=ea.size-a,a=ea.size;return Array.from(ea.values())}
function ed(a,d,n,R,ea,ka,ta,Ka){if(ea=d.getBindingPoint(ea,ka,ta,Ka))return{id:R,type:"line",fromId:a.id,toId:d.id,handleId:n,point:ye.toFixed(ea.point),distance:ea.distance}}function wd(a,d){const n=a.getCenter(),R=d.getCenter();var ea=Ck();ea=Mf(we({},Mt.defaultProps),{id:ea,type:Mt.id,parentId:a.props.parentId,point:n});a=ed(ea,a,"start",Ck(),n,n,ye.uni(ye.sub(R,n)),!1);d=ed(ea,d,"end",Ck(),R,R,ye.uni(ye.sub(n,R)),!1);return a&&d?(ea.handles.start.point=[0,0],ea.handles.end.point=ye.sub(R,n),
ea.handles.start.bindingId=a.id,ea.handles.end.bindingId=d.id,[ea,[a,d]]):null}function ke(){return new LE}function re(){return new WeakMap}function Ee(a){if(!a)return $w(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:$w(a);if(~JE.call(d).indexOf("[native code]"))try{return new d}catch(n){}return $w(a)}function Gf(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function of(a){return a.flags}function Lf(a){a=
KE.call(a);return a.substring(8,a.length-1)}function qf(a){return a[Symbol.toStringTag]||Lf(a)}function dg(a){return nA(a).concat(ax(a))}function ah(a,d,n){for(var R=SE(a),ea=0,ka=R.length,ta,Ka;ea<ka;++ea)if(ta=R[ea],"callee"!==ta&&"caller"!==ta)if(Ka=QE(a,ta)){Ka.get||Ka.set||(Ka.value=n.copier(Ka.value,n));try{PE(d,ta,Ka)}catch($a){d[ta]=Ka.value}}else d[ta]=n.copier(a[ta],n);return d}function Vg(a,d){var n=new d.Constructor;d.cache.set(a,n);a.forEach(function(R,ea){n.set(ea,d.copier(R,d))});return n}
function eg(a,d){var n=Ee(d.prototype);d.cache.set(a,n);for(var R in a)pA.call(a,R)&&(n[R]=d.copier(a[R],d));return n}function Wg(a,d){var n=Ee(d.prototype);d.cache.set(a,n);for(var R in a)pA.call(a,R)&&(n[R]=d.copier(a[R],d));R=ax(a);for(var ea=0,ka=R.length,ta;ea<ka;++ea)ta=R[ea],RE.call(a,ta)&&(n[ta]=d.copier(a[ta],d));return n}function Th(a,d){return new d.Constructor(a.valueOf())}function Fh(a,d){return a}function ui(a,d){var n=new d.Constructor;d.cache.set(a,n);a.forEach(function(R){n.add(d.copier(R,
d))});return n}function Ri(a){function d(ka,ta){ta.prototype=ta.Constructor=void 0;if(!ka||"object"!==typeof ka)return ka;if(ta.cache.has(ka))return ta.cache.get(ka);ta.prototype=ka.__proto__||UE(ka);ta.Constructor=ta.prototype&&ta.prototype.constructor;if(!ta.Constructor||ta.Constructor===Object)return ea(ka,ta);if(TE(ka))return R(ka,ta);var Ka=n[OE(ka)];return Ka?Ka(ka,ta):"function"===typeof ka.then?ka:ea(ka,ta)}a=bx({},rA,a);var n={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,
Boolean:Th,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,Int32Array:a.arrayBuffer,Map:a.map,Number:Th,Object:a.object,Promise:Fh,RegExp:a.regExp,Set:a.set,String:Th,WeakMap:Fh,WeakSet:Fh,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},R=n.Array,ea=n.Object;return function(ka){return d(ka,{Constructor:void 0,cache:ME(),
copier:d,prototype:void 0})}}function vj(a,d){return(0,YE.default)(a,d,{arrayMerge:(n,R,ea)=>R})}function Si(a,d,n,R=!1){const [ea,ka]=d,[ta,Ka]=n;a=ta+(a-ea)/(ka-ea)*(Ka-ta);return R?ta<Ka?Math.max(Math.min(a,Ka),ta):Math.max(Math.min(a,ta),Ka):a}function Ki(a,d){return new Promise((n,R)=>{if("video"===d){const ea=document.createElement("video");ea.addEventListener("loadedmetadata",function(){n([this.videoWidth,this.videoHeight])},!1);ea.src=a}else if("image"===d){const ea=new Image;ea.onload=()=>
n([ea.width,ea.height]);ea.src=a;ea.onerror=ka=>R(ka)}else"pdf"===d&&n([595,842])})}function Bf(a){return Object.values(Iw).includes(a)}function Cf(a,d){return Bf(a)||null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:a}function tg(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",
padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);return a}function Ig(a,d,n=0){var R,ea,ka;if(!a)return[16,32];let ta;ta="string"===typeof d?d:`${null!=(R=d.fontStyle)?R:"normal"} ${null!=(ea=d.fontVariant)?ea:"normal"} ${null!=(ka=d.fontWeight)?ka:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!cx.has(`${a}-${ta}-${n}`)){if(!mq)return[10,
10];mq.parentNode||document.body.appendChild(mq);mq.innerHTML=`${a}&#8203;`;mq.style.font=ta;mq.style.padding=n+"px";d=mq.getBoundingClientRect();cx.set(`${a}-${ta}-${n}`,[Math.ceil(d.width||1),Math.ceil(d.height||1)])}return cx.get(`${a}-${ta}-${n}`)}function Eg(a){try{if("string"!==typeof a||!UD.test(a))throw TypeError("Invalid UUID");let d;const n=new Uint8Array(16);n[0]=(d=parseInt(a.slice(0,8),16))>>>24;n[1]=d>>>16&255;n[2]=d>>>8&255;n[3]=d&255;n[4]=(d=parseInt(a.slice(9,13),16))>>>8;n[5]=d&
255;n[6]=(d=parseInt(a.slice(14,18),16))>>>8;n[7]=d&255;n[8]=(d=parseInt(a.slice(19,23),16))>>>8;n[9]=d&255;n[10]=(d=parseInt(a.slice(24,36),16))/1099511627776&255;n[11]=d/4294967296&255;n[12]=d>>>24&255;n[13]=d>>>16&255;n[14]=d>>>8&255;n[15]=d&255;return!0}catch(d){return!1}}function yg(a,d=0,n){let R;return function(...ea){null==n?void 0:n(...ea);clearTimeout(R);R=setTimeout(()=>a.apply(ea),d)}}function Tb(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function dc(){var a,d,n;return(null==
(n=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:n.call(d,"ui/developer-mode?"))||!1}function Ic(a){return!!a}function Ec(a=0){return new Promise(d=>setTimeout(d,a))}function dd(a="noid"){dx[a]||(dx[a]=uA.createContext({}));return dx[a]}function qd(a="noid"){return uA.useContext(dd(a))}function Rd(a){const {callbacks:d}=qd(),n=tA.useRef(-1);return tA.useMemo(()=>{const R=ea=>{var ka,ta;const {order:Ka=0}=ea;if(!Ka){var $a=ea.target;$a.removeEventListener("pointerup",
R);$a.releasePointerCapture(ea.pointerId);null==(ka=d.onPointerUp)?void 0:ka.call(d,{type:"selection",handle:a,order:Ka},ea);ka=Date.now();$a=ka-n.current;300<$a?n.current=ka:300>=$a&&(null==(ta=d.onDoubleClick)?void 0:ta.call(d,{type:"selection",handle:a,order:Ka},ea),n.current=-1);ea.order=Ka+1}};return{onPointerDown:ea=>{var ka;const {order:ta=0}=ea;if(!ta){var Ka=ce(ea.currentTarget);Ka.setPointerCapture(ea.pointerId);Ka.addEventListener("pointerup",R);null==(ka=d.onPointerDown)?void 0:ka.call(d,
{type:"selection",handle:a,order:ta},ea);ea.order=ta+1}},onPointerMove:ea=>{var ka;const {order:ta=0}=ea;ta||(null==(ka=d.onPointerMove)?void 0:ka.call(d,{type:"selection",handle:a,order:ta},ea),ea.order=ta+1)},onPointerEnter:ea=>{var ka;const {order:ta=0}=ea;ta||(null==(ka=d.onPointerEnter)?void 0:ka.call(d,{type:"selection",handle:a,order:ta},ea),ea.order=ta+1)},onPointerLeave:ea=>{var ka;const {order:ta=0}=ea;ta||(null==(ka=d.onPointerLeave)?void 0:ka.call(d,{type:"selection",handle:a,order:ta},
ea),ea.order=ta+1)},onKeyDown:ea=>{var ka;null==(ka=d.onKeyDown)?void 0:ka.call(d,{type:"selection",handle:a,order:-1},ea)},onKeyUp:ea=>{var ka;null==(ka=d.onKeyUp)?void 0:ka.call(d,{type:"selection",handle:a,order:-1},ea)}}},[d])}function ce(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return ce(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function le(a,d,n){const R=Ot.useRef(!1),ea=Ot.useCallback(()=>{var ka;if(R.current){const ta=
null==(ka=a.current)?void 0:ka.getBoundingClientRect();ta&&(ka={minX:ta.left,maxX:ta.left+ta.width,minY:ta.top,maxY:ta.top+ta.height,width:ta.width,height:ta.height},d.updateBounds(ka),null==n?void 0:n(ka))}else R.current=!0},[a,n]);Ot.useEffect(()=>{const ka=a.current?aF(a.current):document,ta=yg(ea,100);ka.addEventListener("scroll",ta);window.addEventListener("resize",ta);return()=>{ka.removeEventListener("scroll",ta);window.removeEventListener("resize",ta)}},[]);Ot.useLayoutEffect(()=>{const ka=
new ResizeObserver(ta=>{ta[0].contentRect&&ea()});a.current&&ka.observe(a.current);return()=>{ka.disconnect()}},[a]);Ot.useEffect(()=>{ea();setTimeout(()=>{var ka,ta;null==(ta=null==(ka=a.current)?void 0:ka.querySelector(".tl-canvas"))?void 0:ta.focus()})},[a])}function Qe(a,d){return Object.keys(d).reduce((n,R)=>{const ea=d[R];return ea?n+`${`--${a}-${R}`}: ${ea};
`:n},"")}function Md(a,d,n=".logseq-tldraw"){ex.useLayoutEffect(()=>{const R=document.createElement("style"),ea=Qe(a,d);R.setAttribute("id",`${a}-theme`);R.setAttribute("data-selector",n);R.innerHTML=`
        ${n} {
          ${ea}
        }
      `;document.head.appendChild(R);return()=>{R&&document.head.contains(R)&&document.head.removeChild(R)}},[a,d,n])}function Xe(a,d){ex.useLayoutEffect(()=>{if(fx.get(a))return()=>{};const n=document.createElement("style");n.innerHTML=d;n.setAttribute("id",a);document.head.appendChild(n);fx.set(a,n);return()=>{n&&document.head.contains(n)&&(document.head.removeChild(n),fx.delete(a))}},[a,d])}function He(a,d){const n=ex.useMemo(()=>we(we({},bF),a),[a]);Md("tl",n,d);Xe("tl-canvas",cF)}function Ke(a=
"noid"){gx[a]||(gx[a]=wA.createContext({}));return gx[a]}function Re(a="noid"){return wA.useContext(Ke(a))}function Ye(){const a=Re(),{callbacks:d}=qd(),n=vA.useRef(-1);return vA.useMemo(()=>({onPointerDown:R=>{var ea,ka,ta;if(!a.settings.penMode||"pen"===R.pointerType&&R.isPrimary){var {order:Ka=0}=R;Ka||(null==(ea=R.currentTarget)?void 0:ea.setPointerCapture(R.pointerId));R.isPrimary&&(null==(ka=d.onPointerDown)?void 0:ka.call(d,{type:"canvas",order:Ka},R),ea=Date.now(),ka=ea-n.current,300<ka?n.current=
ea:300>=ka&&(null==(ta=d.onDoubleClick)?void 0:ta.call(d,{type:"canvas",order:Ka},R),n.current=-1))}},onPointerMove:R=>{var ea;if(!a.settings.penMode||"pen"===R.pointerType&&R.isPrimary){var {order:ka=0}=R;null==(ea=d.onPointerMove)?void 0:ea.call(d,{type:"canvas",order:ka},R)}},onPointerUp:R=>{var ea,ka;if(!a.settings.penMode||"pen"===R.pointerType&&R.isPrimary){var {order:ta=0}=R;ta||(null==(ea=R.currentTarget)?void 0:ea.releasePointerCapture(R.pointerId));null==(ka=d.onPointerUp)?void 0:ka.call(d,
{type:"canvas",order:ta},R)}},onPointerEnter:R=>{var ea;if(!a.settings.penMode||"pen"===R.pointerType&&R.isPrimary){var {order:ka=0}=R;null==(ea=d.onPointerEnter)?void 0:ea.call(d,{type:"canvas",order:ka},R)}},onPointerLeave:R=>{var ea;if(!a.settings.penMode||"pen"===R.pointerType&&R.isPrimary){var {order:ka=0}=R;null==(ea=d.onPointerLeave)?void 0:ea.call(d,{type:"canvas",order:ka},R)}},onDrop:R=>ti(this,null,function*(){R.preventDefault();"clientX"in R&&a.drop(R.dataTransfer,[R.clientX,R.clientY])}),
onDragOver:R=>{R.preventDefault()},onTouchEnd:R=>{let ea=a.selectedTool.id;"pencil"!==ea&&"highlighter"!==ea||R.preventDefault()}}),[d])}function se(a,d,n){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*n):a*d*n/(d+n*a)}function $f(a,d,n,R=.15){return 0===R?Math.max(d,Math.min(a,n)):a<d?-se(d-a,n-d,R)+d:a>n?+se(a-n,n-d,R)+n:a}function Nf(a,[d,n],[R,ea]){const [[ka,ta],[Ka,$a]]=a;return[$f(d,ka,ta,R),$f(n,Ka,$a,ea)]}function fg(a,d,n){d in a?Object.defineProperty(a,d,{value:n,enumerable:!0,configurable:!0,
writable:!0}):a[d]=n;return a}function Yg(a,d){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(a);d&&(R=R.filter(function(ea){return Object.getOwnPropertyDescriptor(a,ea).enumerable}));n.push.apply(n,R)}return n}function Ff(a){for(var d=1;d<arguments.length;d++){var n=null!=arguments[d]?arguments[d]:{};d%2?Yg(Object(n),!0).forEach(function(R){fg(a,R,n[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):Yg(Object(n)).forEach(function(R){Object.defineProperty(a,
R,Object.getOwnPropertyDescriptor(n,R))})}return a}function Jg(a){return a?a[0].toUpperCase()+a.slice(1):""}function ai(a=!1,d){return a&&!dF.includes(d)}function Ng(a,d="",n=!1){const R=xA[a];d=R?R[d]||d:d;return"on"+Jg(a)+Jg(d)+(ai(n,d)?"Capture":"")}function Wf(a){a=a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var n=eF.includes(a)?"capturecapture":"capture";(n=!!~a.indexOf(n))&&(a=a.replace("capture",""));return{device:a,capture:n,passive:d}}function Vh(a,
d=""){const n=xA[a];return a+(n?n[d]||d:d)}function Zg(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function wi(a){return Array.from(a.touches).filter(d=>{var n,R;return d.target===a.currentTarget||(null===(n=a.currentTarget)||void 0===n?void 0:null===(R=n.contains)||void 0===R?void 0:R.call(n,d.target))})}function Ch(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function yf(a,d){const n=d.clientX-a.clientX,R=d.clientY-
a.clientY;return{angle:-(180*Math.atan2(n,R))/Math.PI,distance:Math.hypot(n,R),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function hf(a){return wi(a).map(d=>d.identifier)}function zf(a,d){const [n,R]=Array.from(a.touches).filter(ea=>d.includes(ea.identifier));return yf(n,R)}function Rg(a){const d=Ch(a);return"touches"in a?d.identifier:d.pointerId}function kg(a){a=Ch(a);return[a.clientX,a.clientY]}function xi(a){let {deltaX:d,deltaY:n,deltaMode:R}=a;1===R?(d*=40,n*=40):2===R&&(d*=800,
n*=800);return[d,n]}function Sg(a,...d){return"function"===typeof a?a(...d):a}function Mh(){}function Nh(...a){return 0===a.length?Mh:1===a.length?a[0]:function(){let d;for(const n of a)d=n.apply(this,arguments)||d;return d}}function Ti([a,d],n){a=Math.abs(a);d=Math.abs(d);if(a>d&&a>n)return"x";if(d>a&&d>n)return"y"}function nk(a){const [d,n]=a.overflow,[R,ea]=a._delta,[ka,ta]=a._direction;if(0>d&&0<R&&0>ka||0<d&&0>R&&0<ka)a._movement[0]=a._movementBound[0];if(0>n&&0<ea&&0>ta||0<n&&0>ea&&0<ta)a._movement[1]=
a._movementBound[1]}function qi(a){hx.set(a.key,a.engine);ix.set(a.key,a.resolver)}function xk(a={},d){const n={};for(const [R,ea]of Object.entries(d))switch(typeof ea){case "function":n[R]=ea.call(n,a[R],R,a);break;case "object":n[R]=xk(a[R],ea);break;case "boolean":ea&&(n[R]=a[R])}return n}function Li(a,d,n={}){const {target:R,eventOptions:ea,window:ka,enabled:ta,transform:Ka}=a;var $a=BF;if(null==a)a={};else{if(null==a)var mb={};else{mb={};var ub=Object.keys(a),zb;for(zb=0;zb<ub.length;zb++){var ec=
ub[zb];0<=$a.indexOf(ec)||(mb[ec]=a[ec])}}if(Object.getOwnPropertySymbols)for(zb=Object.getOwnPropertySymbols(a),ec=0;ec<zb.length;ec++)ub=zb[ec],0<=$a.indexOf(ub)||Object.prototype.propertyIsEnumerable.call(a,ub)&&(mb[ub]=a[ub]);a=mb}n.shared=xk({target:R,eventOptions:ea,window:ka,enabled:ta,transform:Ka},AF);if(d){var ic=ix.get(d);n[d]=xk(Ff({shared:n.shared},a),ic)}else for(ic in a)(d=ix.get(ic))&&(n[ic]=xk(Ff({shared:n.shared},a[ic]),d));return n}function Ai(a,d){a.gestures.add(d);a.gestureEventStores[d]=
new FA(a,d);a.gestureTimeoutStores[d]=new CF}function Nj(a,d,n,R,ea,ka){if(a.has(n)&&hx.has(R)){var ta=n+"Start",Ka=n+"End";ea[R]=$a=>{let mb=void 0;if($a.first&&ta in d)d[ta]($a);n in d&&(mb=d[n]($a));if($a.last&&Ka in d)d[Ka]($a);return mb};ka[R]=ka[R]||{}}}function Pe(a,d={},n,R){const ea=jx.default.useMemo(()=>new DF(a),[]);ea.applyHandlers(a,R);ea.applyConfig(d,n);jx.default.useEffect(ea.effect.bind(ea));jx.default.useEffect(()=>ea.clean.bind(ea),[]);if(void 0===d.target)return ea.bind.bind(ea)}
function sh(a){a.forEach(qi);return function(d,n){n=n||{};const R={},ea={},ka=new Set;for(let ec in d)EF.test(ec)?(ka.add(RegExp.lastMatch),ea[ec]=d[ec]):R[ec]=d[ec];const [ta,Ka,$a]=[ea,R,ka];d={};Nj($a,ta,"onDrag","drag",d,n);Nj($a,ta,"onWheel","wheel",d,n);Nj($a,ta,"onScroll","scroll",d,n);Nj($a,ta,"onPinch","pinch",d,n);Nj($a,ta,"onMove","move",d,n);Nj($a,ta,"onHover","hover",d,n);const {handlers:mb,nativeHandlers:ub,config:zb}={handlers:d,config:n,nativeHandlers:Ka};return Pe(mb,zb,void 0,ub)}}
function li(a,d){return sh([uF,xF,yF,zF,wF,vF])(a,d||{})}function qj(a){const {viewport:d,inputs:n,callbacks:R}=qd(),ea=iv.useRef(void 0),ka=iv.useRef([0,0]),ta=iv.useRef(0),Ka=iv.useMemo(()=>({onWheel:$a=>{var mb;({event:$a}=$a);$a.preventDefault();const {deltaY:ub,deltaX:zb}=$a;var ec=0;if($a.ctrlKey||$a.metaKey){ec=Math.sign($a.deltaY);let $c=ub;10<Math.abs($a.deltaY)&&($c=10*ec);ec=$c}const [ic,bc,Lc]=[zb,ub,ec];"pinching"===n.state||ta.current>=$a.timeStamp||(ta.current=$a.timeStamp,($a.altKey||
$a.ctrlKey||$a.metaKey)&&0===$a.buttons?(ec=d.bounds,$a=null!=(mb=n.currentScreenPoint)?mb:[ec.width/2,ec.height/2],mb=d.camera.zoom,d.onZoom($a,mb-Lc/100*mb)):(mb=ye.mul($a.shiftKey&&!Tb()?[bc,0]:[ic,bc],.8),ye.isEqual(mb,[0,0])||d.panCamera(mb)))},onPinchStart:({event:$a,delta:mb,offset:ub,origin:zb})=>{var ec;const ic=a.current;$a instanceof WheelEvent||!($a.target===ic||null!=ic&&ic.contains($a.target))||(null==(ec=R.onPinchStart)?void 0:ec.call(R,{type:"canvas",order:0,delta:[...mb,ub[0]],offset:ub,
point:ye.sub(zb,n.containerOffset)},$a),ea.current=zb,ka.current=[0,0])},onPinchEnd:({event:$a,offset:mb,origin:ub})=>{var zb;const ec=a.current;$a instanceof WheelEvent||!($a.target===ec||null!=ec&&ec.contains($a.target))||"pinching"!==n.state||(null==(zb=R.onPinchEnd)?void 0:zb.call(R,{type:"canvas",order:0,delta:[0,0,mb[0]],offset:mb,point:ye.sub(ub,n.containerOffset)},$a),ka.current=[0,0])},onPinch:({event:$a,offset:mb,origin:ub})=>{var zb,ec=a.current;if(!($a instanceof WheelEvent)&&($a.target===
ec||null!=ec&&ec.contains($a.target))){ea.current||(ea.current=ub);ec=ye.sub(ea.current,ub);var ic=ye.sub(ec,ka.current);null==(zb=R.onPinch)?void 0:zb.call(R,{type:"canvas",order:0,delta:[...ic,mb[0]],offset:mb,point:ye.sub(ub,n.containerOffset)},$a);ka.current=ec}}}),[R]);li(Ka,{target:a,eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:Ln.maxZoom,min:Ln.minZoom})}})}function Lb(a,d,n,R){kx.useLayoutEffect(()=>{a.current.style.transform=
`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,n,d.rotation]);kx.useLayoutEffect(()=>{const ea=a.current;ea.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;ea.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);kx.useLayoutEffect(()=>{const ea=a.current;void 0!==R&&(ea.style.zIndex=R.toString())},[R])}function Xc(a,d){const {onPersist:n,onError:R,onMount:ea,onCreateAssets:ka,onCreateShapes:ta,onDeleteAssets:Ka,onDeleteShapes:$a,onDrop:mb,
onPaste:ub,onCopy:zb,onCanvasDBClick:ec}=d;HA.useLayoutEffect(()=>{const ic=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,ea&&ea(a,null),()=>{ic.forEach(bc=>bc());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);HA.useLayoutEffect(()=>{const ic=[];n&&ic.push(a.subscribe("persist",n));R&&ic.push(a.subscribe("error",R));ta&&ic.push(a.subscribe("create-shapes",ta));ka&&ic.push(a.subscribe("create-assets",ka));$a&&ic.push(a.subscribe("delete-shapes",$a));Ka&&ic.push(a.subscribe("delete-assets",
Ka));mb&&ic.push(a.subscribe("drop",mb));ub&&ic.push(a.subscribe("paste",ub));zb&&ic.push(a.subscribe("copy",zb));ec&&ic.push(a.subscribe("canvas-dbclick",ec));return()=>ic.forEach(bc=>bc())},[a,n,R])}function fd(a){if("app"in a)return a.app;const [d]=IA.useState(()=>new ZE(a.model,a.Shapes,a.Tools,a.readOnly));IA.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function ud(a,d){FF.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function Ad(a){const d=qd(),{viewport:{bounds:n}}=
d;GF.useEffect(()=>{const R=ta=>{ta.preventDefault()},ea=ta=>{if(0!==ta.touches.length){var Ka=ta.touches[0].pageX,$a=ta.touches[0].radiusX||0;(10>Ka-$a||Ka+$a>n.width-10)&&ta.preventDefault()}},ka=a.current;if(!ka)return()=>{};ka.addEventListener("touchstart",R,{passive:!0});ka.addEventListener("gestureend",R,{passive:!0});ka.addEventListener("gesturechange",R,{passive:!0});ka.addEventListener("gesturestart",R,{passive:!0});ka.addEventListener("touchstart",ea,{passive:!0});return()=>{ka&&(ka.removeEventListener("touchstart",
R),ka.removeEventListener("gestureend",R),ka.removeEventListener("gesturechange",R),ka.removeEventListener("gesturestart",R),ka.removeEventListener("touchstart",ea))}},[a,n.width])}function Jd(a,d){const {inputs:n,callbacks:R}=qd();return HF.useMemo(()=>({onPointerDown:ea=>{var ka,ta;const {order:Ka=0}=ea;Ka||(null==(ka=ea.currentTarget)?void 0:ka.setPointerCapture(ea.pointerId));ka=a.props.handles[d];null==(ta=R.onPointerDown)?void 0:ta.call(R,{type:"handle",shape:a,handle:ka,id:d,order:Ka},ea);
ea.order=Ka+1},onPointerMove:ea=>{var ka;const {order:ta=0}=ea,Ka=a.props.handles[d];null==(ka=R.onPointerMove)?void 0:ka.call(R,{type:"handle",shape:a,handle:Ka,id:d,order:ta},ea);ea.order=ta+1},onPointerUp:ea=>{var ka,ta;const {order:Ka=0}=ea;Ka||(null==(ka=ea.currentTarget)?void 0:ka.releasePointerCapture(ea.pointerId));ka=a.props.handles[d];null==(ta=R.onPointerUp)?void 0:ta.call(R,{type:"handle",shape:a,handle:ka,id:d,order:Ka},ea);ea.order=Ka+1},onPointerEnter:ea=>{var ka;const {order:ta=0}=
ea,Ka=a.props.handles[d];null==(ka=R.onPointerEnter)?void 0:ka.call(R,{type:"handle",shape:a,handle:Ka,id:d,order:ta},ea);ea.order=ta+1},onPointerLeave:ea=>{var ka;const {order:ta=0}=ea,Ka=a.props.handles[d];null==(ka=R.onPointerLeave)?void 0:ka.call(R,{type:"handle",shape:a,handle:Ka,id:d,order:ta},ea);ea.order=ta+1},onKeyUp:ea=>{var ka;const ta=a.props.handles[d];null==(ka=R.onKeyUp)?void 0:ka.call(R,{type:"handle",shape:a,handle:ta,id:d,order:-1},ea)},onKeyDown:ea=>{var ka;const ta=a.props.handles[d];
null==(ka=R.onKeyDown)?void 0:ka.call(R,{type:"handle",shape:a,handle:ta,id:d,order:-1},ea)}}),[a.id,n,R])}function be(a,d,n=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${n?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function ue(a,d,n=0){IF.useEffect(()=>{const R=a.current;R&&(R.style.cursor=
JF[d](Pl.radiansToDegrees(n)))},[d,n])}function Me(a){const {viewport:d}=qd(),n=Re();KF.useLayoutEffect(()=>mc(()=>{const R=yg(()=>{var ea;null==(ea=a.current)?void 0:ea.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==n.inputs.state&&null!=d.camera.zoom&&R()}),[])}function Te(a,d=0){const [n,R]=(0,JA.useState)(a);(0,JA.useEffect)(()=>{let ea=!1;const ka=setTimeout(()=>{ea||R(a)},d);return()=>{ea=!0;clearTimeout(ka)}},[a,d]);return n}function Ge(){const a=Re();KA.useEffect(()=>
{Qc(()=>we({},a.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);KA.useEffect(()=>{var d;const n=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");n?a.viewport.update(n):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function Ne(a){a()}function jf(a){return Yb(rc(a,void 0))}function tf(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,
cleanAt:Date.now()+MF}}function me(a){var d=new Map,n=1,R=new a(function(ea){var ka=d.get(ea);ka&&(ka.reaction.dispose(),d.delete(ea))});return{addReactionToTrack:function(ea,ka,ta){var Ka=n++;R.register(ta,Ka,ea);ea.current=tf(ka);ea.current.finalizationRegistryCleanupToken=Ka;d.set(Ka,ea.current);return ea.current},recordReactionAsCommitted:function(ea){R.unregister(ea);ea.current&&ea.current.finalizationRegistryCleanupToken&&d.delete(ea.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function kf(){function a(){void 0===R&&(R=setTimeout(d,1E4))}function d(){R=void 0;var ea=Date.now();n.forEach(function(ka){var ta=ka.current;ta&&ea>=ta.cleanAt&&(ta.reaction.dispose(),ka.current=null,n.delete(ka))});0<n.size&&a()}var n=new Set,R;return{addReactionToTrack:function(ea,ka,ta){ea.current=tf(ka);n.add(ea);a();return ea.current},recordReactionAsCommitted:function(ea){n.delete(ea)},forceCleanupTimerToRunNowForTests:function(){R&&(clearTimeout(R),
d())},resetCleanupScheduleForTests:function(){var ea;if(0<n.size){try{for(var ka=NF(n),ta=ka.next();!ta.done;ta=ka.next()){var Ka=ta.value,$a=Ka.current;$a&&($a.reaction.dispose(),Ka.current=null)}}catch(ub){var mb={error:ub}}finally{try{ta&&!ta.done&&(ea=ka.return)&&ea.call(ka)}finally{if(mb)throw mb.error;}}n.clear()}R&&(clearTimeout(R),R=void 0)}}}function Le(){return new QF}function vg(a,d){void 0===d&&(d="observed");var n=NA(Rt.default.useState(Le),1)[0],R=NA(Rt.default.useState(),2)[1],ea=Rt.default.useRef(null);
if(!ea.current)var ka=new rs("observer".concat(d),function(){ta.mounted?R([]):ta.changedBeforeMount=!0}),ta=OF(ea,ka,n);n=ea.current.reaction;Rt.default.useDebugValue(n,jf);Rt.default.useEffect(function(){PF(ea);ea.current?(ea.current.mounted=!0,ea.current.changedBeforeMount&&(ea.current.changedBeforeMount=!1,R([]))):(ea.current={reaction:new rs("observer".concat(d),function(){R([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},R([]));return function(){ea.current.reaction.dispose();ea.current=
null}},[]);var Ka,$a;n.track(function(){try{Ka=a()}catch(mb){$a=mb}});if($a)throw $a;return Ka}function Ce(a,d){var n;if(QA&&a.$$typeof===QA)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(n=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==n?n:!1;var R=a,ea=a.displayName||a.name;if(PA&&a.$$typeof===PA&&(d=!0,R=a.render,"function"!==typeof R))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
n=function(ka,ta){return vg(function(){return R(ka,ta)},ea)};""!==ea&&(n.displayName=ea);a.contextTypes&&(n.contextTypes=a.contextTypes);d&&(n=(0,As.forwardRef)(n));n=(0,As.memo)(n);pf(a,n);return n}function pf(a,d){Object.keys(a).forEach(function(n){RF[n]||Object.defineProperty(d,n,Object.getOwnPropertyDescriptor(a,n))})}function Yf(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:vg(a)}function $g(a){const d=Re(),{callbacks:n}=qd(),R=RA.useRef(!1);RA.useEffect(()=>{const ea=$a=>
{var mb,ub;if(null==(mb=a.current)?0:mb.contains(document.activeElement))null==(ub=n.onKeyDown)?void 0:ub.call(n,{type:"canvas",order:-1},$a),R.current=$a.shiftKey},ka=$a=>{var mb,ub;if(null==(mb=a.current)?0:mb.contains(document.activeElement))null==(ub=n.onKeyUp)?void 0:ub.call(n,{type:"canvas",order:-1},$a),R.current=$a.shiftKey},ta=$a=>{var mb,ub,zb;!d.editingShape&&(null==(mb=a.current)?0:mb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(zb=null==(ub=document.activeElement)?
void 0:ub.tagName)?zb:"")&&($a.preventDefault(),d.paste($a,R.current))},Ka=$a=>{var mb,ub,zb;!d.editingShape&&0<d.selectedShapes.size&&(null==(mb=a.current)?0:mb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(zb=null==(ub=document.activeElement)?void 0:ub.tagName)?zb:"")&&($a.preventDefault(),d.copy())};window.addEventListener("keydown",ea);window.addEventListener("keyup",ka);document.addEventListener("paste",ta);document.addEventListener("copy",Ka);return()=>{window.removeEventListener("keydown",
ea);window.removeEventListener("keyup",ka);document.removeEventListener("paste",ta);document.removeEventListener("copy",Ka)}},[])}function uh(a){const d=Re(),{inputs:n,callbacks:R}=qd(),ea=WA.useRef(-1);return WA.useMemo(()=>({onPointerDown:ka=>{var ta,Ka;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:$a=0}=ka;$a||(null==(ta=ka.currentTarget)?void 0:ta.setPointerCapture(ka.pointerId));null==(Ka=R.onPointerDown)?void 0:Ka.call(R,{type:"shape",shape:a,order:$a},ka);ka.order=
$a+1}},onPointerMove:ka=>{var ta;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:Ka=0}=ka;null==(ta=R.onPointerMove)?void 0:ta.call(R,{type:"shape",shape:a,order:Ka},ka);ka.order=Ka+1}},onPointerUp:ka=>{var ta,Ka,$a;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:mb=0}=ka;mb||(null==(ta=ka.currentTarget)?void 0:ta.releasePointerCapture(ka.pointerId));null==(Ka=R.onPointerUp)?void 0:Ka.call(R,{type:"shape",shape:a,order:mb},ka);ta=Date.now();Ka=ta-
ea.current;300<Ka?ea.current=ta:300>=Ka&&(null==($a=R.onDoubleClick)?void 0:$a.call(R,{type:"shape",shape:a,order:mb},ka),ea.current=-1);ka.order=mb+1}},onPointerEnter:ka=>{var ta;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:Ka=0}=ka;null==(ta=R.onPointerEnter)?void 0:ta.call(R,{type:"shape",shape:a,order:Ka},ka);ka.order=Ka+1}},onPointerLeave:ka=>{var ta;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:Ka=0}=ka;null==(ta=R.onPointerLeave)?void 0:
ta.call(R,{type:"shape",shape:a,order:Ka},ka);ka.order=Ka+1}},onKeyUp:ka=>{var ta;null==(ta=R.onKeyUp)?void 0:ta.call(R,{type:"shape",shape:a,order:-1},ka)},onKeyDown:ka=>{var ta;null==(ta=R.onKeyDown)?void 0:ta.call(R,{type:"shape",shape:a,order:-1},ka)}}),[a.id,n,R])}function xh(a){var {viewport:d,inputs:n,callbacks:R,components:ea}=a;a=hg(a,["viewport","inputs","callbacks","components"]);return(0,nB.jsx)(kG,{id:a.id,viewport:d,inputs:n,callbacks:R,components:ea,meta:a.meta,children:(0,nB.jsx)(gG,
we({},a))})}function af(){af=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var n=arguments[d],R;for(R in n)Object.prototype.hasOwnProperty.call(n,R)&&(a[R]=n[R])}return a};return af.apply(this,arguments)}function xg(a,d,{checkForDefaultPrevented:n=!0}={}){return function(R){null===a||void 0===a||a(R);if(!1===n||!R.defaultPrevented)return null===d||void 0===d?void 0:d(R)}}function dh(...a){return d=>a.forEach(n=>{"function"===typeof n?n(d):null!==n&&void 0!==n&&
(n.current=d)})}function Kh(...a){return(0,pG.useCallback)(dh(...a),a)}function ki(a,d=[]){let n=[];const R=()=>{const ea=n.map(ka=>(0,vr.createContext)(ka));return function(ka){const ta=(null===ka||void 0===ka?void 0:ka[a])||ea;return(0,vr.useMemo)(()=>({[`__scope${a}`]:Mf(we({},ka),{[a]:ta})}),[ka,ta])}};R.scopeName=a;return[function(ea,ka){function ta(mb){const {scope:ub,children:zb}=mb,ec=hg(mb,["scope","children"]);mb=(null===ub||void 0===ub?void 0:ub[a][$a])||Ka;const ic=(0,vr.useMemo)(()=>
ec,Object.values(ec));return(0,vr.createElement)(mb.Provider,{value:ic},zb)}const Ka=(0,vr.createContext)(ka),$a=n.length;n=[...n,ka];ta.displayName=ea+"Provider";return[ta,function(mb,ub){if(ub=(0,vr.useContext)((null===ub||void 0===ub?void 0:ub[a][$a])||Ka))return ub;if(void 0!==ka)return ka;throw Error(`\`${mb}\` must be used within \`${ea}\``);}]},al(R,...d)]}function al(...a){const d=a[0];if(1===a.length)return d;const n=()=>{const R=a.map(ea=>({useScope:ea(),scopeName:ea.scopeName}));return function(ea){const ka=
R.reduce((ta,{useScope:Ka,scopeName:$a})=>{Ka=Ka(ea)[`__scope${$a}`];return we(we({},ta),Ka)},{});return(0,vr.useMemo)(()=>({[`__scope${d.scopeName}`]:ka}),[ka])}};n.scopeName=d.scopeName;return n}function ch(a){return(0,Ql.isValidElement)(a)&&a.type===oB}function am(a,d){const n=we({},d);for(const R in d){const ea=a[R],ka=d[R];/^on[A-Z]/.test(R)?ea&&ka?n[R]=(...ta)=>{ka(...ta);ea(...ta)}:ea&&(n[R]=ea):"style"===R?n[R]=we(we({},ea),ka):"className"===R&&(n[R]=[ea,ka].filter(Boolean).join(" "))}return we(we({},
a),n)}function xl(a,d){a&&(0,qG.flushSync)(()=>a.dispatchEvent(d))}function mj(a){const d=(0,wx.useRef)(a);(0,wx.useEffect)(()=>{d.current=a});return(0,wx.useMemo)(()=>(...n)=>{var R;return null===(R=d.current)||void 0===R?void 0:R.call(d,...n)},[])}function yl(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=mj(a);(0,rG.useEffect)(()=>{const R=ea=>{"Escape"===ea.key&&n(ea)};d.addEventListener("keydown",R);return()=>d.removeEventListener("keydown",R)},[n,d])}function Ll(a,
d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=mj(a),R=(0,Sm.useRef)(!1),ea=(0,Sm.useRef)(()=>{});(0,Sm.useEffect)(()=>{const ka=Ka=>{if(Ka.target&&!R.current){let $a=function(){ik("dismissableLayer.pointerDownOutside",n,mb,{discrete:!0})};const mb={originalEvent:Ka};"touch"===Ka.pointerType?(d.removeEventListener("click",ea.current),ea.current=$a,d.addEventListener("click",ea.current,{once:!0})):$a()}R.current=!1},ta=window.setTimeout(()=>{d.addEventListener("pointerdown",
ka)},0);return()=>{window.clearTimeout(ta);d.removeEventListener("pointerdown",ka);d.removeEventListener("click",ea.current)}},[d,n]);return{onPointerDownCapture:()=>R.current=!0}}function zl(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=mj(a),R=(0,Sm.useRef)(!1);(0,Sm.useEffect)(()=>{const ea=ka=>{ka.target&&!R.current&&ik("dismissableLayer.focusOutside",n,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",ea);return()=>d.removeEventListener("focusin",
ea)},[d,n]);return{onFocusCapture:()=>R.current=!0,onBlurCapture:()=>R.current=!1}}function In(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function ik(a,d,n,{discrete:R}){const ea=n.originalEvent.target;n=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:n});d&&ea.addEventListener(a,d,{once:!0});R?xl(ea,n):ea.dispatchEvent(n)}function hj(a){const [d,n]=qB.useState(uG());Cl(()=>{a||n(R=>null!==R&&void 0!==R?R:String(vG++))},[a]);return a||(d?`radix-${d}`:"")}function ri(a){return a.split("-")[0]}
function ml(a){return["top","bottom"].includes(ri(a))?"x":"y"}function bm(a){return"y"===a?"height":"width"}function Mk(a,d,n){let {reference:R,floating:ea}=a;var ka=R.x+R.width/2-ea.width/2;const ta=R.y+R.height/2-ea.height/2;a=ml(d);var Ka=bm(a);Ka=R[Ka]/2-ea[Ka]/2;const $a="x"===a;switch(ri(d)){case "top":ka={x:ka,y:R.y-ea.height};break;case "bottom":ka={x:ka,y:R.y+R.height};break;case "right":ka={x:R.x+R.width,y:ta};break;case "left":ka={x:R.x-ea.width,y:ta};break;default:ka={x:R.x,y:R.y}}switch(d.split("-")[1]){case "start":ka[a]-=
Ka*(n&&$a?-1:1);break;case "end":ka[a]+=Ka*(n&&$a?-1:1)}return ka}function sm(a){return"number"!=typeof a?we({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function cm(a){return Mf(we({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function Ml(a,d){return ti(this,null,function*(){var n;void 0===d&&(d={});const {x:R,y:ea,platform:ka,rects:ta,elements:Ka,strategy:$a}=a,{boundary:mb="clippingAncestors",rootBoundary:ub="viewport",elementContext:zb="floating",altBoundary:ec=
!1,padding:ic=0}=d,bc=sm(ic),Lc=Ka[ec?"floating"===zb?"reference":"floating":zb],$c=cm(yield ka.getClippingRect({element:null==(n=yield null==ka.isElement?void 0:ka.isElement(Lc))||n?Lc:Lc.contextElement||(yield null==ka.getDocumentElement?void 0:ka.getDocumentElement(Ka.floating)),boundary:mb,rootBoundary:ub,strategy:$a}));n=cm(ka.convertOffsetParentRelativeRectToViewportRelativeRect?yield ka.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===zb?Mf(we({},ta.floating),{x:R,y:ea}):
ta.reference,offsetParent:yield null==ka.getOffsetParent?void 0:ka.getOffsetParent(Ka.floating),strategy:$a}):ta[zb]);return{top:$c.top-n.top+bc.top,bottom:n.bottom-$c.bottom+bc.bottom,left:$c.left-n.left+bc.left,right:n.right-$c.right+bc.right}})}function nl(a){return a.replace(/left|right|bottom|top/g,d=>xG[d])}function Al(a,d,n){void 0===n&&(n=!1);const R=a.split("-")[1],ea=ml(a);a=bm(ea);n="x"===ea?R===(n?"end":"start")?"right":"left":"start"===R?"bottom":"top";return d.reference[a]>d.floating[a]&&
(n=nl(n)),{main:n,cross:nl(n)}}function bj(a){return a.replace(/start|end/g,d=>yG[d])}function rk(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function sk(a){return sB.some(d=>0<=a[d])}function Bk(a){return null==a?window:a&&a.document&&a.location&&a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function sj(a){return Bk(a).getComputedStyle(a)}function gj(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||
"").toLowerCase():""}function pj(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function Pj(a){return a instanceof Bk(a).HTMLElement}function Jk(a){return a instanceof Bk(a).Element}function Lj(a){return"undefined"==typeof ShadowRoot?!1:a instanceof Bk(a).ShadowRoot||a instanceof ShadowRoot}function nj(a){const {overflow:d,overflowX:n,overflowY:R}=sj(a);return/auto|scroll|overlay|hidden/.test(d+R+n)}function Xk(a){const d=
/firefox/i.test(pj());a=sj(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function Yk(){return!/^((?!chrome|android).)*safari/i.test(pj())}function wk(a,d,n){var R,ea,ka,ta;void 0===d&&(d=!1);void 0===n&&(n=!1);var Ka=a.getBoundingClientRect();let $a=1,mb=1;d&&Pj(a)&&($a=0<a.offsetWidth&&rv(Ka.width)/a.offsetWidth||1,mb=0<a.offsetHeight&&rv(Ka.height)/a.offsetHeight||
1);a=Jk(a)?Bk(a):window;d=!Yk()&&n;n=(Ka.left+(d&&null!=(R=null==(ea=a.visualViewport)?void 0:ea.offsetLeft)?R:0))/$a;R=(Ka.top+(d&&null!=(ka=null==(ta=a.visualViewport)?void 0:ta.offsetTop)?ka:0))/mb;ka=Ka.width/$a;Ka=Ka.height/mb;return{width:ka,height:Ka,top:R,right:n+ka,bottom:R+Ka,left:n,x:n,y:R}}function Xj(a){return(d=a,(d instanceof Bk(d).Node?a.ownerDocument:a.document)||window.document).documentElement;var d}function dm(a){return Jk(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,
scrollTop:a.pageYOffset}}function xn(a){return wk(Xj(a)).left+dm(a).scrollLeft}function Kk(a){return"html"===gj(a)?a:a.assignedSlot||a.parentNode||(Lj(a)?a.host:null)||Xj(a)}function Dj(a){return Pj(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}function Bj(a){for(var d=Bk(a),n=Dj(a);n&&["table","td","th"].includes(gj(n))&&"static"===getComputedStyle(n).position;)n=Dj(n);if(!n||"html"!==gj(n)&&("body"!==gj(n)||"static"!==getComputedStyle(n).position||Xk(n))){if(!n)a:{a=Kk(a);for(Lj(a)&&
(a=a.host);Pj(a)&&!["html","body"].includes(gj(a));){if(Xk(a)){n=a;break a}a=a.parentNode}n=null}d=n||d}return d}function Yl(a){if(Pj(a))return{width:a.offsetWidth,height:a.offsetHeight};a=wk(a);return{width:a.width,height:a.height}}function tm(a){const d=Kk(a);return["html","body","#document"].includes(gj(d))?a.ownerDocument.body:Pj(d)&&nj(d)?d:tm(d)}function Om(a,d){var n;void 0===d&&(d=[]);var R=tm(a);a=R===(null==(n=a.ownerDocument)?void 0:n.body);n=Bk(R);R=a?[n].concat(n.visualViewport||[],nj(R)?
R:[]):R;d=d.concat(R);return a?d:d.concat(Om(R))}function bo(a,d,n){return"viewport"===d?cm(function(R,ea){var ka=Bk(R),ta=Xj(R);ka=ka.visualViewport;R=ta.clientWidth;ta=ta.clientHeight;let Ka=0,$a=0;if(ka){R=ka.width;ta=ka.height;const mb=Yk();(mb||!mb&&"fixed"===ea)&&(Ka=ka.offsetLeft,$a=ka.offsetTop)}return{width:R,height:ta,x:Ka,y:$a}}(a,n)):Jk(d)?function(R,ea){var ka=wk(R,!1,"fixed"===ea);ea=ka.top+R.clientTop;ka=ka.left+R.clientLeft;return{top:ea,left:ka,x:ka,y:ea,right:ka+R.clientWidth,bottom:ea+
R.clientHeight,width:R.clientWidth,height:R.clientHeight}}(d,n):cm(function(R){var ea;const ka=Xj(R);var ta=dm(R);const Ka=null==(ea=R.ownerDocument)?void 0:ea.body;ea=Tt(ka.scrollWidth,ka.clientWidth,Ka?Ka.scrollWidth:0,Ka?Ka.clientWidth:0);const $a=Tt(ka.scrollHeight,ka.clientHeight,Ka?Ka.scrollHeight:0,Ka?Ka.clientHeight:0);R=-ta.scrollLeft+xn(R);ta=-ta.scrollTop;return"rtl"===sj(Ka||ka).direction&&(R+=Tt(ka.clientWidth,Ka?Ka.clientWidth:0)-ea),{width:ea,height:$a,x:R,y:ta}}(Xj(a)))}function jp(a){const d=
Om(a),n=["absolute","fixed"].includes(sj(a).position)&&Pj(a)?Bj(a):a;return Jk(n)?d.filter(R=>{var ea;if(ea=Jk(R))a:if(ea=null==n.getRootNode?void 0:n.getRootNode(),R.contains(n))ea=!0;else{if(ea&&Lj(ea)){ea=n;do{if(ea&&R===ea){ea=!0;break a}ea=ea.parentNode||ea.host}while(ea)}ea=!1}return ea&&"body"!==gj(R)}):[]}function qc(a,d,n,R){void 0===R&&(R={});const {ancestorScroll:ea=!0,ancestorResize:ka=!0,elementResize:ta=!0,animationFrame:Ka=!1}=R,$a=ea&&!Ka,mb=ka&&!Ka,ub=$a||mb?[...(Jk(a)?Om(a):[]),
...Om(d)]:[];ub.forEach(bc=>{$a&&bc.addEventListener("scroll",n,{passive:!0});mb&&bc.addEventListener("resize",n)});let zb,ec=null;if(ta){let bc=!0;ec=new ResizeObserver(()=>{bc||n();bc=!1});Jk(a)&&!Ka&&ec.observe(a);ec.observe(d)}let ic=Ka?wk(a):null;return Ka&&function Lc(){const $c=wk(a);!ic||$c.x===ic.x&&$c.y===ic.y&&$c.width===ic.width&&$c.height===ic.height||n();ic=$c;zb=requestAnimationFrame(Lc)}(),n(),()=>{var Lc;ub.forEach($c=>{$a&&$c.removeEventListener("scroll",n);mb&&$c.removeEventListener("resize",
n)});null==(Lc=ec)||Lc.disconnect();ec=null;Ka&&cancelAnimationFrame(zb)}}function Ha(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let n,R;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var ea=a.length;if(ea!=d.length)return!1;for(n=ea;0!==n--;)if(!Ha(a[n],d[n]))return!1;return!0}R=Object.keys(a);ea=R.length;if(ea!==Object.keys(d).length)return!1;for(n=ea;0!==n--;)if(!Object.prototype.hasOwnProperty.call(d,R[n]))return!1;
for(n=ea;0!==n--;)if(ea=R[n],!("_owner"===ea&&a.$$typeof||Ha(a[ea],d[ea])))return!1;return!0}return a!==a&&d!==d}function Bc(a){const d=nn.useRef(a);zx(()=>{d.current=a});return d}function vc(a){let {middleware:d,placement:n="bottom",strategy:R="absolute",whileElementsMounted:ea}=void 0===a?{}:a;const ka=nn.useRef(null),ta=nn.useRef(null),Ka=Bc(ea),$a=nn.useRef(null),[mb,ub]=nn.useState({x:null,y:null,strategy:R,placement:n,middlewareData:{}}),[zb,ec]=nn.useState(d);Ha(null==zb?void 0:zb.map(Oc=>
{({options:Oc}=Oc);return Oc}),null==d?void 0:d.map(Oc=>{({options:Oc}=Oc);return Oc}))||ec(d);const ic=nn.useCallback(()=>{ka.current&&ta.current&&BG(ka.current,ta.current,{middleware:zb,placement:n,strategy:R}).then(Oc=>{bc.current&&CG.flushSync(()=>{ub(Oc)})})},[zb,n,R]);zx(()=>{bc.current&&ic()},[ic]);const bc=nn.useRef(!1);zx(()=>{bc.current=!0;return()=>{bc.current=!1}},[]);const Lc=nn.useCallback(()=>{"function"===typeof $a.current&&($a.current(),$a.current=null);if(ka.current&&ta.current)if(Ka.current){const Oc=
Ka.current(ka.current,ta.current,ic);$a.current=Oc}else ic()},[ic,Ka]),$c=nn.useCallback(Oc=>{ka.current=Oc;Lc()},[Lc]),tc=nn.useCallback(Oc=>{ta.current=Oc;Lc()},[Lc]),Tc=nn.useMemo(()=>({reference:ka,floating:ta}),[]);return nn.useMemo(()=>Mf(we({},mb),{update:ic,refs:Tc,reference:$c,floating:tc}),[mb,ic,Tc,$c,tc])}function Rb(a){const [d,n]=(0,EG.useState)(void 0);Cl(()=>{if(a){n({width:a.offsetWidth,height:a.offsetHeight});const R=new ResizeObserver(ea=>{if(Array.isArray(ea)&&ea.length){ea=ea[0];
if("borderBoxSize"in ea){ea=ea.borderBoxSize;var ka=Array.isArray(ea)?ea[0]:ea;ea=ka.inlineSize;ka=ka.blockSize}else ea=a.offsetWidth,ka=a.offsetHeight;n({width:ea,height:ka})}});R.observe(a,{box:"border-box"});return()=>R.unobserve(a)}n(void 0)},[a]);return d}function Jc(a){return void 0!==a}function nc(a){return null!==a}function Ub(a){const [d,n="center"]=a.split("-");return[d,n]}function Sb(a,d){return(0,pp.useReducer)((n,R)=>{R=d[n][R];return null!==R&&void 0!==R?R:n},a)}function Ac(a){const [d,
n]=(0,pp.useState)(),R=(0,pp.useRef)({}),ea=(0,pp.useRef)(a),ka=(0,pp.useRef)("none"),[ta,Ka]=Sb(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,pp.useEffect)(()=>{const $a=ad(R.current);ka.current="mounted"===ta?$a:"none"},[ta]);Cl(()=>{const $a=R.current,mb=ea.current;if(mb!==a){const ub=ka.current,zb=ad($a);a?Ka("MOUNT"):"none"===zb||"none"===(null===$a||void 0===
$a?void 0:$a.display)?Ka("UNMOUNT"):mb&&ub!==zb?Ka("ANIMATION_OUT"):Ka("UNMOUNT");ea.current=a}},[a,Ka]);Cl(()=>{if(d){const $a=ub=>{const zb=ad(R.current).includes(ub.animationName);ub.target===d&&zb&&(0,OG.flushSync)(()=>Ka("ANIMATION_END"))},mb=ub=>{ub.target===d&&(ka.current=ad(R.current))};d.addEventListener("animationstart",mb);d.addEventListener("animationcancel",$a);d.addEventListener("animationend",$a);return()=>{d.removeEventListener("animationstart",mb);d.removeEventListener("animationcancel",
$a);d.removeEventListener("animationend",$a)}}Ka("ANIMATION_END")},[d,Ka]);return{isPresent:["mounted","unmountSuspended"].includes(ta),ref:(0,pp.useCallback)($a=>{$a&&(R.current=getComputedStyle($a));n($a)},[])}}function ad(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}function jd({prop:a,defaultProp:d,onChange:n=()=>{}}){const [R,ea]=zd({defaultProp:d,onChange:n}),ka=void 0!==a;d=ka?a:R;const ta=mj(n);n=(0,sv.useCallback)(Ka=>{ka?(Ka="function"===typeof Ka?Ka(a):Ka,Ka!==a&&ta(Ka)):
ea(Ka)},[ka,a,ea,ta]);return[d,n]}function zd({defaultProp:a,onChange:d}){a=(0,sv.useState)(a);const [n]=a,R=(0,sv.useRef)(n),ea=mj(d);(0,sv.useEffect)(()=>{R.current!==n&&(ea(n),R.current=n)},[n,R,ea]);return a}function Gd(a,d){const n=Math.abs(d.top-a.y),R=Math.abs(d.bottom-a.y),ea=Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(n,R,ea,a)){case a:return"left";case ea:return"right";case n:return"top";case R:return"bottom";default:return null}}function Ld(a){a=a.slice();a.sort((d,n)=>
d.x<n.x?-1:d.x>n.x?1:d.y<n.y?-1:d.y>n.y?1:0);return qe(a)}function qe(a){if(1>=a.length)return a.slice();const d=[];for(var n=0;n<a.length;n++){for(var R=a[n];2<=d.length;){var ea=d[d.length-1],ka=d[d.length-2];if((ea.x-ka.x)*(R.y-ka.y)>=(ea.y-ka.y)*(R.x-ka.x))d.pop();else break}d.push(R)}d.pop();n=[];for(R=a.length-1;0<=R;R--){for(ea=a[R];2<=n.length;){ka=n[n.length-1];const ta=n[n.length-2];if((ka.x-ta.x)*(ea.y-ta.y)>=(ka.y-ta.y)*(ea.x-ta.x))n.pop();else break}n.push(ea)}n.pop();return 1===d.length&&
1===n.length&&d[0].x===n[0].x&&d[0].y===n[0].y?d:d.concat(n)}function ze(a){var {side:d,content:n,sideOffset:R=10}=a;a=hg(a,["side","content","sideOffset"]);return n?(0,pq.jsx)($G,{delayDuration:300,children:(0,pq.jsxs)(aH,{children:[(0,pq.jsx)(bH,{asChild:!0,children:a.children}),(0,pq.jsx)(cH,{children:(0,pq.jsxs)(dH,Mf(we({className:"tl-tooltip-content",sideOffset:R,side:d},a),{children:[n,(0,pq.jsx)(eH,{className:"tl-tooltip-arrow"})]}))})]})}):(0,pq.jsx)(pq.Fragment,{children:a.children})}function ve(a){var {className:d,
tooltip:n,tooltipSide:R}=a;a=hg(a,["className","tooltip","tooltipSide"]);return(0,GB.jsx)(ze,{content:n,side:R,children:(0,GB.jsx)("button",we({className:"tl-button "+(null!=d?d:"")},a))})}function lf(a){var {toggle:d=!0,pressed:n,onPressedChange:R,className:ea,tooltip:ka}=a;a=hg(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,Hx.jsx)(ze,{content:ka,children:(0,Hx.jsx)("div",{className:"inline-block",children:(0,Hx.jsx)(gH,Mf(we({},a),{"data-toggle":d,className:"tl-toggle-input"+
(ea?" "+ea:""),pressed:n,onPressedChange:R}))})})}function Hg(a){var d=a+"CollectionProvider";const [n,R]=ki(d),[ea,ka]=n(d,{collectionRef:{current:null},itemMap:new Map}),ta=ub=>{const {scope:zb,children:ec}=ub;ub=Po.default.useRef(null);const ic=Po.default.useRef(new Map).current;return Po.default.createElement(ea,{scope:zb,itemMap:ic,collectionRef:ub},ec)};Object.assign(ta,{displayName:d});const Ka=a+"CollectionSlot";d=Po.default.forwardRef((ub,zb)=>{const {scope:ec,children:ic}=ub;ub=ka(Ka,ec);
zb=Kh(zb,ub.collectionRef);return Po.default.createElement(Oo,{ref:zb},ic)});Object.assign(d,{displayName:Ka});const $a=a+"CollectionItemSlot",mb=Po.default.forwardRef((ub,zb)=>{const {scope:ec,children:ic}=ub,bc=hg(ub,["scope","children"]),Lc=Po.default.useRef(null);ub=Kh(zb,Lc);const $c=ka($a,ec);Po.default.useEffect(()=>{$c.itemMap.set(Lc,we({ref:Lc},bc));return()=>void $c.itemMap.delete(Lc)});return Po.default.createElement(Oo,{["data-radix-collection-item"]:"",ref:ub},ic)});Object.assign(mb,
{displayName:$a});return[{Provider:ta,Slot:d,ItemSlot:mb},function(ub){const zb=ka(a+"CollectionConsumer",ub);return Po.default.useCallback(()=>{const ec=zb.collectionRef.current;if(!ec)return[];const ic=Array.from(ec.querySelectorAll("[data-radix-collection-item]"));return Array.from(zb.itemMap.values()).sort((bc,Lc)=>ic.indexOf(bc.ref.current)-ic.indexOf(Lc.ref.current))},[zb.collectionRef,zb.itemMap])},R]}function Tg(a){const d=(0,JB.useContext)(hH);return a||d||"ltr"}function mg(){(0,iH.useEffect)(()=>
{var a,d;const n=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=n[0])&&void 0!==a?a:Ag());document.body.insertAdjacentElement("beforeend",null!==(d=n[1])&&void 0!==d?d:Ag());Ix++;return()=>{1===Ix&&document.querySelectorAll("[data-radix-focus-guard]").forEach(R=>R.remove());Ix--}},[])}function Ag(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";
return a}function Vf(a,{select:d=!1}={}){const n=document.activeElement;for(const R of a)if(Pf(R,{select:d}),document.activeElement!==n)break}function If(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const R="INPUT"===n.tagName&&"hidden"===n.type;return n.disabled||n.hidden||R?NodeFilter.FILTER_SKIP:0<=n.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function ih(a,d){for(const n of a)if(!Qg(n,{upTo:d}))return n}
function Qg(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Pf(a,{select:d=!1}={}){if(a&&a.focus){const n=document.activeElement;a.focus({preventScroll:!0});a!==n&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function bi(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function gi(a){return a.filter(d=>"A"!==d.tagName)}function zi(a,d,n){a=
a.key;n="rtl"!==n?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(n))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(n))return pH[n]}function rh(a){const d=document.activeElement;for(const n of a){if(n===d)break;n.focus();if(document.activeElement!==d)break}}function bh(a,d){return a.map((n,R)=>a[(d+R)%a.length])}function pi(a,d){var n=(0,sH.useState)(function(){return{value:a,callback:d,facade:{get current(){return n.value},
set current(R){var ea=n.value;ea!==R&&(n.value=R,n.callback(R,ea))}}}})[0];n.callback=d;return n.facade}function Yj(a,d){return pi(d||null,function(n){return a.forEach(function(R){"function"===typeof R?R(n):R&&(R.current=n);return R})})}function yn(a){return a}function Zl(a,d){void 0===d&&(d=yn);var n=[],R=!1;return{read:function(){if(R)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:a},useMedium:function(ea){var ka=
d(ea,R);n.push(ka);return function(){n=n.filter(function(ta){return ta!==ka})}},assignSyncMedium:function(ea){for(R=!0;n.length;){var ka=n;n=[];ka.forEach(ea)}n={push:function(ta){return ea(ta)},filter:function(){return n}}},assignMedium:function(ea){R=!0;var ka=[];if(n.length){var ta=n;n=[];ta.forEach(ea);ka=n}var Ka=function(){var $a=ka;ka=[];$a.forEach(ea)};Promise.resolve().then(Ka);n={push:function($a){ka.push($a);Promise.resolve().then(Ka)},filter:function($a){ka=ka.filter($a);return n}}}}}
function xo(a){const d=document.activeElement;for(const n of a){if(n===d)break;n.focus();if(document.activeElement!==d)break}}function Il(a,d){return a.map((n,R)=>a[(d+R)%a.length])}function Mj(a,d,n){const R=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,ea=n?a.indexOf(n):-1;a=Il(a,Math.max(ea,0));1===R.length&&(a=a.filter(ka=>ka!==n));a=a.find(ka=>ka.toLowerCase().startsWith(R.toLowerCase()));return a!==n?a:void 0}function yo(a){return d=>"mouse"===d.pointerType?a(d):void 0}function cp(a,
[d,n]){return Math.min(n,Math.max(d,a))}function Xn(a){const d=(0,$x.useRef)({value:a,previous:a});return(0,$x.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function an(a=[],d,n){a=[...a];a[n]=d;return a.sort((R,ea)=>R-ea)}function aj(a,d,n){return 100/(n-d)*(a-d)}function vl(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function mt(a,d){if(1===a.length)return 0;a=a.map(R=>Math.abs(R-d));
const n=Math.min(...a);return a.indexOf(n)}function $l(a,d,n){a/=2;const R=en([0,50],[0,a]);return(a-R(d)*n)*n}function fn(a){return a.slice(0,-1).map((d,n)=>a[n+1]-d)}function en(a,d){return n=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(n-a[0])}function Ho(a,d){d=Math.pow(10,d);return Math.round(a*d)/d}function qm(a){function d(mb){return mb?(0,gl.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:mb},children:(0,gl.jsx)("div",{className:`w-full h-full bg-${mb}-500`})}):
(0,gl.jsx)("div",{className:"tl-color-bg",children:(0,gl.jsx)(Qh,{name:"color-swatch"})})}var {color:n,opacity:R,popoverSide:ea,setColor:ka,setOpacity:ta}=a;a=hg(a,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:Ka}}=uq.default.useContext(fj),$a=uq.default.useMemo(()=>{let mb="";return yg(ub=>{ka(mb)},100,ub=>{mb=ub.target.value})},[]);return(0,gl.jsx)(df,Mf(we({},a),{border:!0,arrow:!0,side:ea,label:(0,gl.jsx)(ze,{content:Ka("whiteboard/color"),side:ea,sideOffset:14,
children:d(n)}),children:(0,gl.jsxs)("div",{className:"p-1",children:[(0,gl.jsx)("div",{className:"tl-color-palette",children:Object.values(Iw).map(mb=>(0,gl.jsx)("button",{className:`tl-color-drip m-1${mb===n?" active":""}`,onClick:()=>ka(mb),children:d(mb)},mb))}),(0,gl.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,gl.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${Bf(n)?"":"active"}`,children:(0,gl.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,gl.jsx)("input",
we({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(n)?n:"#000000",onChange:$a,style:{opacity:Bf(n)?0:1}},a))})}),(0,gl.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:Ka("whiteboard/select-custom-color")})]}),ta&&(0,gl.jsx)("div",{className:"mx-1 my-2",children:(0,gl.jsxs)(fu,{defaultValue:[null!=R?R:0],onValueCommit:mb=>ta(mb[0]),max:1,step:.1,"aria-label":Ka("whiteboard/opacity"),className:"tl-slider-root",
children:[(0,gl.jsx)(Tj,{className:"tl-slider-track",children:(0,gl.jsx)(Uo,{className:"tl-slider-range"})}),(0,gl.jsx)(nf,{className:"tl-slider-thumb"})]})})]})}))}function Oi(a,d){a&&(0,vq.flushSync)(()=>a.dispatchEvent(d))}function gp(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=mj(a),R=(0,km.useRef)(!1),ea=(0,km.useRef)(()=>{});(0,km.useEffect)(()=>{const ka=Ka=>{if(Ka.target&&!R.current){let $a=function(){pm("dismissableLayer.pointerDownOutside",n,mb,{discrete:!0})};
const mb={originalEvent:Ka};"touch"===Ka.pointerType?(d.removeEventListener("click",ea.current),ea.current=$a,d.addEventListener("click",ea.current,{once:!0})):$a()}R.current=!1},ta=window.setTimeout(()=>{d.addEventListener("pointerdown",ka)},0);return()=>{window.clearTimeout(ta);d.removeEventListener("pointerdown",ka);d.removeEventListener("click",ea.current)}},[d,n]);return{onPointerDownCapture:()=>R.current=!0}}function bn(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=
mj(a),R=(0,km.useRef)(!1);(0,km.useEffect)(()=>{const ea=ka=>{ka.target&&!R.current&&pm("dismissableLayer.focusOutside",n,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",ea);return()=>d.removeEventListener("focusin",ea)},[d,n]);return{onFocusCapture:()=>R.current=!0,onBlurCapture:()=>R.current=!1}}function An(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function pm(a,d,n,{discrete:R}){const ea=n.originalEvent.target;n=new CustomEvent(a,{bubbles:!1,
cancelable:!0,detail:n});d&&ea.addEventListener(a,d,{once:!0});R?Oi(ea,n):ea.dispatchEvent(n)}function br(a,{select:d=!1}={}){const n=document.activeElement;for(const R of a)if(Lm(R,{select:d}),document.activeElement!==n)break}function Fo(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const R="INPUT"===n.tagName&&"hidden"===n.type;return n.disabled||n.hidden||R?NodeFilter.FILTER_SKIP:0<=n.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);
return d}function Gn(a,d){for(const n of a)if(!zn(n,{upTo:d}))return n}function zn(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Lm(a,{select:d=!1}={}){if(a&&a.focus){const n=document.activeElement;a.focus({preventScroll:!0});a!==n&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function Yn(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function Tp(a){return a.filter(d=>
"A"!==d.tagName)}function dp(a){return void 0!==a}function zh(a){return null!==a}function hp(a){const [d,n="center"]=a.split("-");return[d,n]}function ip(a){const d=mj(a),n=(0,Rf.useRef)(""),R=(0,Rf.useRef)(0);a=(0,Rf.useCallback)(ka=>{ka=n.current+ka;d(ka);(function $a(Ka){n.current=Ka;window.clearTimeout(R.current);""!==Ka&&(R.current=window.setTimeout(()=>$a(""),1E3))})(ka)},[d]);const ea=(0,Rf.useCallback)(()=>{n.current="";window.clearTimeout(R.current)},[]);(0,Rf.useEffect)(()=>()=>window.clearTimeout(R.current),
[]);return[n,a,ea]}function Hn(a,d,n){const R=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,ea=n?a.indexOf(n):-1;a=dn(a,Math.max(ea,0));1===R.length&&(a=a.filter(ka=>ka!==n));a=a.find(ka=>ka.textValue.toLowerCase().startsWith(R.toLowerCase()));return a!==n?a:void 0}function dn(a,d){return a.map((n,R)=>a[(d+R)%a.length])}function cq(a){var {options:d,tooltip:n,popoverSide:R,chevron:ea=!0,value:ka,onValueChange:ta}=a;a=hg(a,"options tooltip popoverSide chevron value onValueChange".split(" "));
const [Ka,$a]=ey.useState(!1);return(0,mm.jsx)("div",Mf(we({},a),{className:"tl-select-input",children:(0,mm.jsxs)(wC,{open:Ka,onOpenChange:$a,value:ka,onValueChange:ta,children:[(0,mm.jsx)(ze,{content:n,side:R,children:(0,mm.jsxs)(yC,{className:"tl-select-input-trigger",children:[(0,mm.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,mm.jsx)(zC,{})}),ea&&(0,mm.jsx)(Dl,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,mm.jsx)(Qh,{name:Ka?"chevron-up":"chevron-down"})})]})}),
(0,mm.jsx)(ly,{className:"tl-select-input-portal",children:(0,mm.jsxs)(xC,{className:"tl-select-input-content",side:R,position:"popper",sideOffset:14,align:"center",onKeyDown:mb=>mb.stopPropagation(),children:[(0,mm.jsx)(ji,{}),(0,mm.jsx)(Wm,{className:"tl-select-input-viewport",children:d.map(mb=>(0,mm.jsx)(Yd,{className:"tl-select-input-select-item",value:mb.value,children:(0,mm.jsx)(AC,{children:mb.label})},mb.value))}),(0,mm.jsx)(ni,{})]})})]})}))}function Wr(a){var {scaleLevel:d,compact:n,popoverSide:R}=
a;hg(a,["scaleLevel","compact","popoverSide"]);const ea=Re();({handlers:{t:a}}=lu.default.useContext(fj));const ka=[{label:n?"XS":a("whiteboard/extra-small"),value:"xs"},{label:n?"SM":a("whiteboard/small"),value:"sm"},{label:n?"MD":a("whiteboard/medium"),value:"md"},{label:n?"LG":a("whiteboard/large"),value:"lg"},{label:n?"XL":a("whiteboard/extra-large"),value:"xl"},{label:n?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,Kv.jsx)(cq,{tooltip:a("whiteboard/scale-level"),options:ka,value:d,popoverSide:R,
chevron:!n,onValueChange:ta=>{ea.api.setScaleLevel(ta)}})}function ao(a,d){return function(n){return a(d(n))}}function Nq(a,d){return d(a)}function Km(a,d){return function(n){return a(d,n)}}function Jm(a,d){return function(){return a(d)}}function wj(a,d){d(a);return a}function tj(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];return d}function rm(a){a()}function ir(a){return function(){return a}}function hs(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];
return function(){d.map(rm)}}function Pi(){}function Sh(a,d){return a(1,d)}function gs(a,d){a(0,d)}function rt(a){a(2)}function co(a){return a(4)}function vh(a,d){return Sh(a,Km(d,0))}function Mm(a,d){var n=a(1,function(R){n();d(R)});return n}function oh(){var a=[];return function(d,n){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(n),function(){var R=a.indexOf(n);-1<R&&a.splice(R,1)};case 0:a.slice().forEach(function(R){R(n)});break;default:throw Error("unrecognized action "+d);
}}}function wg(a){var d=a,n=oh();return function(R,ea){switch(R){case 1:ea(d);break;case 0:d=ea;break;case 4:return d}return n(R,ea)}}function Nm(a){var d,n;return function(R,ea){switch(R){case 1:if(ea){if(n===ea)break;d&&d();n=ea;return d=a(1,ea)}d&&d();return Pi;case 2:d&&d();n=null;break;default:throw Error("unrecognized action "+R);}}}function Ak(a){return wj(oh(),function(d){return vh(a,d)})}function jk(a,d){return wj(wg(d),function(n){return vh(a,n)})}function eo(){for(var a=arguments.length,
d=Array(a),n=0;n<a;n++)d[n]=arguments[n];return function(R){return d.reduceRight(Nq,R)}}function gg(a){for(var d=arguments.length,n=Array(1<d?d-1:0),R=1;R<d;R++)n[R-1]=arguments[R];var ea=eo.apply(void 0,n);return function(ka,ta){switch(ka){case 1:return Sh(a,ea(ta));case 2:a(2);break;default:throw Error("unrecognized action "+ka);}}}function Pm(a,d){return a===d}function Ci(a){void 0===a&&(a=Pm);var d;return function(n){return function(R){a(d,R)||(d=R,n(R))}}}function Pg(a){return function(d){return function(n){a(n)&&
d(n)}}}function Ug(a){return function(d){return ao(d,a)}}function gn(a){return function(d){return function(){return d(a)}}}function tk(a,d){return function(n){return function(R){return n(d=a(d,R))}}}function em(a){return function(d){return function(n){0<a?a--:d(n)}}}function fo(a){var d,n;return function(R){return function(ea){d=ea;n||=setTimeout(function(){n=void 0;R(d)},a)}}}function bk(a){var d,n;return function(R){return function(ea){d=ea;n&&clearTimeout(n);n=setTimeout(function(){R(d)},a)}}}
function di(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];var R=Array(d.length),ea=0,ka=null,ta=Math.pow(2,d.length)-1;d.forEach(function(Ka,$a){var mb=Math.pow(2,$a);Sh(Ka,function(ub){var zb=ea;ea|=mb;R[$a]=ub;zb!==ta&&ea===ta&&ka&&(ka(),ka=null)})});return function(Ka){return function($a){var mb=function(){return Ka([$a].concat(R))};ea===ta?mb():ka=mb}}}function dq(){for(var a=arguments.length,d=Array(a),n=0;n<a;n++)d[n]=arguments[n];return function(R,ea){switch(R){case 1:return hs.apply(void 0,
d.map(function(ka){return ka(1,ea)}));case 2:break;default:throw Error("unrecognized action "+R);}}}function Wh(a,d){void 0===d&&(d=Pm);return gg(a,Ci(d))}function Qj(){for(var a=oh(),d=arguments.length,n=Array(d),R=0;R<d;R++)n[R]=arguments[R];var ea=Array(n.length),ka=0,ta=Math.pow(2,n.length)-1;n.forEach(function(Ka,$a){var mb=Math.pow(2,$a);Sh(Ka,function(ub){ea[$a]=ub;ka|=mb;ka===ta&&a(0,ea)})});return function(Ka,$a){switch(Ka){case 1:return ka===ta&&$a(ea),a(1,$a);case 2:a(2);break;default:throw Error("unrecognized action "+
Ka);}}}function Gi(a,d,n){void 0===d&&(d=[]);n=(void 0===n?{singleton:!0}:n).singleton;return{id:Symbol(),constructor:a,dependencies:d,singleton:n}}function kp(a){var d=new Map;return function ea(R){var ka=R.id,ta=R.constructor,Ka=R.dependencies;if((R=R.singleton)&&d.has(ka))return d.get(ka);ta=ta(Ka.map(function($a){return ea($a)}));R&&d.set(ka,ta);return ta}(a)}function Io(a,d){if(null==a)return{};var n={},R=Object.keys(a),ea;for(ea=0;ea<R.length;ea++){var ka=R[ea];0<=d.indexOf(ka)||(n[ka]=a[ka])}return n}
function lp(a,d){if(a){if("string"===typeof a)return eq(a,d);var n=Object.prototype.toString.call(a).slice(8,-1);"Object"===n&&a.constructor&&(n=a.constructor.name);if("Map"===n||"Set"===n)return Array.from(a);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eq(a,d)}}function eq(a,d){if(null==d||d>a.length)d=a.length;for(var n=0,R=Array(d);n<d;n++)R[n]=a[n];return R}function go(a,d){var n="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(n)return(n=n.call(a)).next.bind(n);
if(Array.isArray(a)||(n=lp(a))||d&&a&&"number"===typeof a.length){n&&(a=n);var R=0;return function(){return R>=a.length?{done:!0}:{done:!1,value:a[R++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function fq(a,d){for(var n={},R={},ea=0,ka=a.length;ea<ka;)R[a[ea]]=1,ea+=1;for(var ta in d)R.hasOwnProperty(ta)||(n[ta]=d[ta]);return n}function Rj(a,d,n){function R(zb,ec){zb.propsReady&&
(0,zb.propsReady)(0,!1);for(var ic=go(ta),bc;!(bc=ic()).done;)bc=bc.value,(0,zb[d.required[bc]])(0,ec[bc]);for(ic=go(Ka);!(bc=ic()).done;)if(bc=bc.value,bc in ec)(0,zb[d.optional[bc]])(0,ec[bc]);zb.propsReady&&(0,zb.propsReady)(0,!0)}function ea(zb){return $a.reduce(function(ec,ic){ec[ic]=function(bc){(0,zb[d.methods[ic]])(0,bc)};return ec},{})}function ka(zb){return mb.reduce(function(ec,ic){ec[ic]=Nm(zb[d.events[ic]]);return ec},{})}var ta=Object.keys(d.required||{}),Ka=Object.keys(d.optional||
{}),$a=Object.keys(d.methods||{}),mb=Object.keys(d.events||{}),ub=(0,zm.createContext)({});return{Component:(0,zm.forwardRef)(function(zb,ec){var ic=zb.children,bc=Io(zb,ny),Lc=(0,zm.useState)(function(){return wj(kp(a),function(tc){return R(tc,bc)})})[0],$c=(0,zm.useState)(Jm(ka,Lc))[0];Lv(function(){for(var tc=go(mb),Tc;!(Tc=tc()).done;)if(Tc=Tc.value,Tc in bc)(0,$c[Tc])(1,bc[Tc]);return function(){Object.values($c).map(rt)}},[bc,$c,Lc]);Lv(function(){R(Lc,bc)});(0,zm.useImperativeHandle)(ec,ir(ea(Lc)));
return(0,zm.createElement)(ub.Provider,{value:Lc},n?(0,zm.createElement)(n,fq([].concat(ta,Ka,mb),bc),ic):ic)}),usePublisher:function(zb){return(0,zm.useCallback)(Km(gs,(0,zm.useContext)(ub)[zb]),[zb])},useEmitterValue:function(zb){var ec=(0,zm.useContext)(ub)[zb];zb=(0,zm.useState)(Jm(co,ec));var ic=zb[0],bc=zb[1];Lv(function(){return Sh(ec,function(Lc){Lc!==ic&&bc(ir(Lc))})},[ec,ic]);return ic},useEmitter:function(zb,ec){var ic=(0,zm.useContext)(ub)[zb];Lv(function(){return ic(1,ec)},[ec,ic])}}}
function Ph(){return Ph=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var n=arguments[d],R;for(R in n)Object.prototype.hasOwnProperty.call(n,R)&&(a[R]=n[R])}return a},Ph.apply(this,arguments)}function fm(a,d){if(null==a)return{};var n,R,ea={},ka=Object.keys(a);for(R=0;R<ka.length;R++)0<=d.indexOf(n=ka[R])||(ea[n]=a[n]);return ea}function ho(a,d){(null==d||d>a.length)&&(d=a.length);for(var n=0,R=Array(d);n<d;n++)R[n]=a[n];return R}function gm(a,d){var n="undefined"!=typeof Symbol&&
a[Symbol.iterator]||a["@@iterator"];if(n)return(n=n.call(a)).next.bind(n);if(Array.isArray(a)||(n=function(ea,ka){if(ea){if("string"==typeof ea)return ho(ea,ka);var ta=Object.prototype.toString.call(ea).slice(8,-1);return"Object"===ta&&ea.constructor&&(ta=ea.constructor.name),"Map"===ta||"Set"===ta?Array.from(ea):"Arguments"===ta||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ta)?ho(ea,ka):void 0}}(a))||d&&a&&"number"==typeof a.length){n&&(a=n);var R=0;return function(){return R>=a.length?{done:!0}:
{done:!1,value:a[R++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Jo(a,d){void 0===d&&(d=!0);var n=(0,oi.useRef)(null),R=function(ka){};if("undefined"!=typeof ResizeObserver){var ea=new ResizeObserver(function(ka){ka=ka[0].target;null!==ka.offsetParent&&a(ka)});R=function(ka){ka&&d?(ea.observe(ka),n.current=ka):(n.current&&ea.unobserve(n.current),n.current=null)}}return{ref:n,
callbackRef:R}}function Hj(a,d){return void 0===d&&(d=!0),Jo(a,d).callbackRef}function Wi(a,d,n,R,ea,ka,ta){return Jo(function(Ka){for(var $a=function(zb,ec,ic,bc){ic=zb.length;if(0===ic)return null;for(var Lc=[],$c=0;$c<ic;$c++){var tc=zb.item($c);if(tc&&void 0!==tc.dataset.index){var Tc=parseInt(tc.dataset.index),Oc=parseFloat(tc.dataset.knownSize),ld=ec(tc,"offsetHeight");if(0===ld&&bc("Zero-sized element, this should not happen",{child:tc},tl.ERROR),ld!==Oc)tc=Lc[Lc.length-1],0===Lc.length||tc.size!==
ld||tc.endIndex!==Tc-1?Lc.push({startIndex:Tc,endIndex:Tc,size:ld}):Lc[Lc.length-1].endIndex++}}return Lc}(Ka.children,d,0,ea),mb=Ka.parentElement;!mb.dataset.virtuosoScroller;)mb=mb.parentElement;var ub="window"===mb.firstElementChild.dataset.viewportType;R({scrollTop:Math.max(ta?ta.scrollTop:ub?window.pageYOffset||document.documentElement.scrollTop:mb.scrollTop,0),scrollHeight:ta?ta.scrollHeight:ub?document.documentElement.scrollHeight:mb.scrollHeight,viewportHeight:ta?ta.offsetHeight:ub?window.innerHeight:
mb.offsetHeight});null==ka||ka(function(zb,ec,ic){return"normal"===ec||null!=ec&&ec.endsWith("px")||ic("row-gap was not resolved to pixel value correctly",ec,tl.WARN),"normal"===ec?0:parseInt(null!=ec?ec:"0",10)}(0,getComputedStyle(Ka).rowGap,ea));null!==$a&&a($a)},n)}function Ui(a,d){return Math.round(a.getBoundingClientRect()[d])}function is(a,d,n,R,ea){void 0===R&&(R=Pi);var ka=(0,oi.useRef)(null),ta=(0,oi.useRef)(null),Ka=(0,oi.useRef)(null),$a=(0,oi.useRef)(!1),mb=(0,oi.useCallback)(function(ub){ub=
ub.target;var zb=ub===window||ub===document,ec=zb?window.pageYOffset||document.documentElement.scrollTop:ub.scrollTop,ic=zb?document.documentElement.scrollHeight:ub.scrollHeight,bc=zb?window.innerHeight:ub.offsetHeight;ub=function(){a({scrollTop:Math.max(ec,0),scrollHeight:ic,viewportHeight:bc})};$a.current?(0,AH.flushSync)(ub):ub();$a.current=!1;null!==ta.current&&(ec===ta.current||0>=ec||ec===ic-bc)&&(ta.current=null,d(!0),Ka.current&&(clearTimeout(Ka.current),Ka.current=null))},[a,d]);return(0,oi.useEffect)(function(){var ub=
ea||ka.current;return R(ea||ka.current),mb({target:ub}),ub.addEventListener("scroll",mb,{passive:!0}),function(){R(null);ub.removeEventListener("scroll",mb)}},[ka,mb,n,R,ea]),{scrollerRef:ka,scrollByCallback:function(ub){$a.current=!0;ka.current.scrollBy(ub)},scrollToCallback:function(ub){var zb=ka.current;if(zb&&!("offsetHeight"in zb&&0===zb.offsetHeight)){var ec,ic,bc,Lc="smooth"===ub.behavior;if(zb===window?(ic=Math.max(Ui(document.documentElement,"height"),document.documentElement.scrollHeight),
ec=window.innerHeight,bc=document.documentElement.scrollTop):(ic=zb.scrollHeight,ec=Ui(zb,"height"),bc=zb.scrollTop),ub.top=Math.ceil(Math.max(Math.min(ic-ec,ub.top),0)),1.01>Math.abs(ec-ic)||ub.top===bc)return a({scrollTop:bc,scrollHeight:ic,viewportHeight:ec}),void(Lc&&d(!0));Lc?(ta.current=ub.top,Ka.current&&clearTimeout(Ka.current),Ka.current=setTimeout(function(){Ka.current=null;ta.current=null;d(!0)},1E3)):ta.current=null;zb.scrollTo(ub)}}}}function Ko(a,d,n,R,ea){return void 0===R&&(R=Vi),
void 0===ea&&(ea=Vi),{k:a,v:d,lvl:n,l:R,r:ea}}function B(a,d){if(a===Vi)return Vi;var n=a.k,R=a.l,ea=a.r;if(d===n){if(R===Vi)return ea;if(ea===Vi)return R;d=nb(R);return gd(Nb(a,{k:d[0],v:d[1],l:Kb(R)}))}return gd(Nb(a,d<n?{l:B(R,d)}:{r:B(ea,d)}))}function da(a,d,n){return(void 0===n&&(n="k"),a===Vi)?[-Infinity,void 0]:a[n]===d?[a.k,a.v]:a[n]<d?(d=da(a.r,d,n),-Infinity===d[0]?[a.k,a.v]:d):da(a.l,d,n)}function Aa(a,d,n){return a===Vi?Ko(d,n,1):d===a.k?Nb(a,{k:d,v:n}):Zd(fe(Nb(a,d<a.k?{l:Aa(a.l,d,n)}:
{r:Aa(a.r,d,n)})))}function ya(a,d,n){if(a===Vi)return[];var R=a.k,ea=a.v,ka=a.r,ta=[];return R>d&&(ta=ta.concat(ya(a.l,d,n))),R>=d&&R<=n&&ta.push({k:R,v:ea}),R<=n&&(ta=ta.concat(ya(ka,d,n))),ta}function La(a){return a===Vi?[]:[].concat(La(a.l),[{k:a.k,v:a.v}],La(a.r))}function nb(a){return a.r===Vi?[a.k,a.v]:nb(a.r)}function Kb(a){return a.r===Vi?a.l:gd(Nb(a,{r:Kb(a.r)}))}function Nb(a,d){return Ko(void 0!==d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==
d.r?d.r:a.r)}function sc(a){return a===Vi||a.lvl>a.r.lvl}function gd(a){var d=a.l,n=a.r,R=a.lvl;if(n.lvl>=R-1&&d.lvl>=R-1)return a;if(R>n.lvl+1){if(sc(d))return fe(Nb(a,{lvl:R-1}));if(d===Vi||d.r===Vi)throw Error("Unexpected empty nodes");return Nb(d.r,{l:Nb(d,{r:d.r.l}),r:Nb(a,{l:d.r.r,lvl:R-1}),lvl:R})}if(sc(a))return Zd(Nb(a,{lvl:R-1}));if(n===Vi||n.l===Vi)throw Error("Unexpected empty nodes");d=n.l;var ea=sc(d)?n.lvl-1:n.lvl;return Nb(d,{l:Nb(a,{r:d.l,lvl:R-1}),r:Zd(Nb(n,{l:d.r,lvl:ea})),lvl:d.lvl+
1})}function sd(a,d,n){return a===Vi?[]:Ud(ya(a,da(a,d)[0],n),function(R){return{index:R.k,value:R.v}})}function Ud(a,d){var n=a.length;if(0===n)return[];var R=d(a[0]),ea=R.index;R=R.value;for(var ka=[],ta=1;ta<n;ta++){var Ka=d(a[ta]),$a=Ka.index;Ka=Ka.value;ka.push({start:ea,end:$a-1,value:R});ea=$a;R=Ka}return ka.push({start:ea,end:Infinity,value:R}),ka}function Zd(a){var d=a.r,n=a.lvl;return d===Vi||d.r===Vi||d.lvl!==n||d.r.lvl!==n?a:Nb(d,{l:Nb(a,{r:d.l}),lvl:n+1})}function fe(a){var d=a.l;return d===
Vi||d.lvl!==a.lvl?a:Nb(d,{r:Nb(a,{l:d.r})})}function Ze(a,d,n,R){void 0===R&&(R=0);for(var ea=a.length-1;R<=ea;){var ka=Math.floor((R+ea)/2),ta=n(a[ka],d);if(0===ta)return ka;if(-1===ta){if(2>ea-R)return ka-1;ea=ka-1}else{if(ea===R)return ka;R=ka+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);}function rg(a){var d=a.size,n=a.startIndex,R=a.endIndex;return function(ea){return ea.start===n&&(ea.end===R||Infinity===ea.end)&&ea.value===d}}function Ah(a,d){a=
a.index;return d===a?0:d<a?-1:1}function kk(a,d){a=a.offset;return d===a?0:d<a?-1:1}function lh(a){return{index:a.index,value:a}}function cj(a,d,n,R){var ea=0,ka=0,ta=0,Ka;0!==d?(ta=a[Ka=Ze(a,d-1,Ah)].offset,ka=da(n,d-1),ea=ka[0],ka=ka[1],a.length&&a[Ka].size===da(n,d)[1]&&--Ka,a=a.slice(0,Ka+1)):a=[];for(d=gm(sd(n,d,Infinity));!(n=d()).done;)Ka=n.value,n=Ka.start,Ka=Ka.value,ea=n-ea,ta=ea*ka+ta+ea*R,a.push({offset:ta,size:Ka,index:n}),ea=n,ka=Ka;return{offsetTree:a,lastIndex:ea,lastOffset:ta,lastSize:ka}}
function Xi(a,d){var n=d[0],R=d[1],ea=d[3];0<n.length&&(0,d[2])("received item sizes",n,tl.DEBUG);var ka=a.sizeTree;d=ka;var ta=0;if(0<R.length&&ka===Vi&&2===n.length){var Ka=n[0].size,$a=n[1].size;d=R.reduce(function(ub,zb){return Aa(Aa(ub,zb,Ka),zb+1,$a)},d)}else n=function(ub,zb){var ec,ic=ub===Vi?0:Infinity;for(zb=gm(zb);!(ec=zb()).done;){var bc=ec.value;ec=bc.size;var Lc=bc.startIndex,$c=bc.endIndex;if(ic=Math.min(ic,Lc),ub===Vi)ub=Aa(ub,0,ec);else{var tc=sd(ub,Lc-1,$c+1);if(!tc.some(rg(bc))){var Tc,
Oc=bc=!1;for(tc=gm(tc);!(Tc=tc()).done;){var ld=Tc.value;Tc=ld.start;var od=ld.end;ld=ld.value;bc?($c>=Tc||ec===ld)&&(ub=B(ub,Tc)):(Oc=ld!==ec,bc=!0);od>$c&&$c>=Tc&&ld!==ec&&(ub=Aa(ub,$c+1,ld))}Oc&&(ub=Aa(ub,Lc,ec))}}}return[ub,ic]}(d,n),d=n[0],ta=n[1];if(d===ka)return a;a=cj(a.offsetTree,ta,d,ea);var mb=a.offsetTree;return{sizeTree:d,offsetTree:mb,lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:R.reduce(function(ub,zb){return Aa(ub,zb,Di(zb,mb,ea))},Vi),groupIndices:R}}
function Di(a,d,n){if(0===d.length)return 0;d=d[Ze(d,a,Ah)];a-=d.index;a=d.size*a+(a-1)*n+d.offset;return 0<a?a+n:a}function dj(a,d,n){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+1;a=ii("LAST"===a.index?n:a.index,d);return Math.max(0,a,Math.min(n,a))}function ii(a,d){if(d.groupOffsetTree===Vi)return a;for(var n=0;d.groupIndices[n]<=a+n;)n++;return a+n}function Ei(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&CH||(a.behavior="auto"),a.offset||(a.offset=
0),a}function Hi(a){return!!a&&("smooth"===a?"smooth":"auto")}function Yi(a){return a.reduce(function(d,n){return d.groupIndices.push(d.totalCount),d.totalCount+=n+1,d},{totalCount:0,groupIndices:[]})}function Sj(a,d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function Nk(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function Bl(a,d,n){return"number"==typeof a?"up"===n&&"top"===d||"down"===n&&"bottom"===d?a:0:"up"===n?"top"===d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function Jn(a,
d,n){if(0===a.length)return[];if(d.groupOffsetTree===Vi)return a.map(function($a){return Ph({},$a,{index:$a.index+n,originalIndex:$a.index})});var R,ea=[],ka=sd(d.groupOffsetTree,a[0].index,a[a.length-1].index),ta=void 0,Ka=0;for(a=gm(a);!(R=a()).done;)R=R.value,(!ta||ta.end<R.index)&&(ta=ka.shift(),Ka=d.groupIndices.indexOf(ta.start)),ea.push(Ph({},R.index===ta.start?{type:"group",index:Ka}:{index:R.index-(Ka+1)+n,groupIndex:Ka},{size:R.size,offset:R.offset,originalIndex:R.index,data:R.data}));return ea}
function Qm(a,d,n,R,ea,ka){var ta=0,Ka=0;0<a.length&&(ta=a[0].offset,Ka=a[a.length-1],Ka=Ka.offset+Ka.size);var $a=n-ea.lastIndex,mb=ta;R=ea.lastOffset+$a*ea.lastSize+($a-1)*R-Ka;return{items:Jn(a,ea,ka),topItems:Jn(d,ea,ka),topListHeight:d.reduce(function(ub,zb){return zb.size+ub},0),offsetTop:ta,offsetBottom:R,top:mb,bottom:Ka,totalCount:n,firstItemIndex:ka}}function Rm(a){var d,n=!1;return function(){return n||(n=!0,d=a()),d}}function Yh(a,d){var n=(0,oi.useRef)(null),R=(0,oi.useCallback)(function($a){if(null!==
$a&&$a.offsetParent){var mb=$a.getBoundingClientRect();$a=mb.width;if(d){var ub=d.getBoundingClientRect();mb=mb.top-ub.top;ub=ub.height-Math.max(0,mb);mb+=d.scrollTop}else ub=window.innerHeight-Math.max(0,mb.top),mb=mb.top+window.pageYOffset;n.current={offsetTop:mb,visibleHeight:ub,visibleWidth:$a};a(n.current)}},[a,d]),ea=Jo(R),ka=ea.callbackRef,ta=ea.ref,Ka=(0,oi.useCallback)(function(){R(ta.current)},[R,ta]);return(0,oi.useEffect)(function(){if(d){d.addEventListener("scroll",Ka);var $a=new ResizeObserver(Ka);
return $a.observe(d),function(){d.removeEventListener("scroll",Ka);$a.unobserve(d)}}return window.addEventListener("scroll",Ka),window.addEventListener("resize",Ka),function(){window.removeEventListener("scroll",Ka);window.removeEventListener("resize",Ka)}},[Ka,d]),ka}function st(a){return a}function um(a,d){var n=oh();return Sh(n,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),vh(n,a),n}function uk(a,d){if("string"!=
typeof a)return{context:d}}function js(a){var d=a.usePublisher,n=a.useEmitter,R=a.useEmitterValue;return wh.memo(function(ea){var ka=ea.style,ta=ea.children;ea=fm(ea,LC);var Ka=d("scrollContainerState"),$a=R("ScrollerComponent"),mb=d("smoothScrollTargetReached"),ub=R("scrollerRef"),zb=R("context");Ka=is(Ka,mb,$a,ub);mb=Ka.scrollerRef;ub=Ka.scrollByCallback;return n("scrollTo",Ka.scrollToCallback),n("scrollBy",ub),(0,oi.createElement)($a,Ph({ref:mb,style:Ph({},FH,ka),"data-test-id":"virtuoso-scroller",
"data-virtuoso-scroller":!0,tabIndex:0},ea,uk($a,zb)),ta)})}function jr(a){var d=a.usePublisher,n=a.useEmitter,R=a.useEmitterValue;return wh.memo(function(ea){var ka=ea.style,ta=ea.children;ea=fm(ea,MC);var Ka=d("windowScrollContainerState"),$a=R("ScrollerComponent"),mb=d("smoothScrollTargetReached"),ub=R("totalListHeight"),zb=R("deviation"),ec=R("customScrollParent"),ic=R("context");mb=is(Ka,mb,$a,Pi,ec);var bc=mb.scrollerRef;Ka=mb.scrollByCallback;mb=mb.scrollToCallback;return DC(function(){return bc.current=
ec||window,function(){bc.current=null}},[bc,ec]),n("windowScrollTo",mb),n("scrollBy",Ka),(0,oi.createElement)($a,Ph({style:Ph({position:"relative"},ka,0!==ub?{height:ub+zb}:{}),"data-virtuoso-scroller":!0},ea,uk($a,ic)),ta)})}function ks(a,d,n){return Array.from({length:d-a+1}).map(function(R,ea){return{index:ea+a,data:null==n?void 0:n[ea+a]}})}function gq(a,d){return a&&a.column===d.column&&a.row===d.row}function Ku(a,d,n,R){var ea=n.height;return void 0===ea||0===R.length?{top:0,bottom:0}:{top:tt(a,
d,n,R[0].index),bottom:tt(a,d,n,R[R.length-1].index)+ea}}function tt(a,d,n,R){var ea=d.column;a=qo(1,Uv((a.width+ea)/(n.width+ea)));R=Uv(R/a);n=R*n.height+qo(0,R-1)*d.row;return 0<n?n+d.row:n}function Lu(a,d,n){return"normal"===d||null!=d&&d.endsWith("px")||n(a+" was not resolved to pixel value correctly",d,tl.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function hq(a,d){hq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,R){n.__proto__=R;return n};return hq(a,d)}function ls(a,d){a.prototype=
Object.create(d.prototype);a.prototype.constructor=a;hq(a,d)}function ut(a){ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return ut(a)}function ww(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function vt(a,d,n){vt=ww()?Reflect.construct.bind():function(R,
ea,ka){var ta=[null];ta.push.apply(ta,ea);R=new (Function.bind.apply(R,ta));ka&&hq(R,ka.prototype);return R};return vt.apply(null,arguments)}function wt(a){var d="function"===typeof Map?new Map:void 0;wt=function(n){function R(){return vt(n,arguments,ut(this).constructor)}if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!==typeof n)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof d){if(d.has(n))return d.get(n);
d.set(n,R)}R.prototype=Object.create(n.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}});return hq(R,n)};return wt(a)}function xw(a,d,n){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*n)}function kr(a,d,n,R){void 0===R&&(R=xw);if(0===d)return R(n,n,n);a=(a%360+360)%360/60;var ea=(1-Math.abs(2*n-1))*d,ka=ea*(1-Math.abs(a%2-1)),ta=d=0,Ka=0;0<=a&&1>a?(d=ea,ta=ka):1<=a&&2>a?(d=ka,ta=ea):2<=a&&3>a?(ta=ea,Ka=ka):3<=a&&4>a?(ta=ka,Ka=ea):4<=a&&5>a?(d=ka,Ka=ea):
5<=a&&6>a&&(d=ea,Ka=ka);n-=ea/2;return R(d+n,ta+n,Ka+n)}function yw(a){if("string"!==typeof a)throw new Sn(3);if("string"===typeof a){var d=a.toLowerCase();a=Dy[d]?"#"+Dy[d]:a}if(a.match(YC))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(Ey))return d=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};if(a.match(rn))return{red:parseInt(""+
a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(tu))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d};if(d=Sk.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)};if(d=Zv.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:1<parseFloat(""+
d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var n=uu.exec(a);if(n){d=parseInt(""+n[1],10);var R=parseInt(""+n[2],10)/100;n=parseInt(""+n[3],10)/100;d="rgb("+kr(d,R,n)+")";R=Sk.exec(d);if(!R)throw new Sn(4,a,d);return{red:parseInt(""+R[1],10),green:parseInt(""+R[2],10),blue:parseInt(""+R[3],10)}}if(d=Tn.exec(a.substring(0,50))){R=parseInt(""+d[1],10);n=parseInt(""+d[2],10)/100;var ea=parseInt(""+d[3],10)/100;R="rgb("+kr(R,n,ea)+")";n=Sk.exec(R);if(!n)throw new Sn(4,a,R);return{red:parseInt(""+
n[1],10),green:parseInt(""+n[2],10),blue:parseInt(""+n[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new Sn(5);}function io(a){a=a.toString(16);return 1===a.length?"0"+a:a}function xt(a,d,n){return jj("#"+io(Math.round(255*a))+io(Math.round(255*d))+io(Math.round(255*n)))}function Mu(a,d,n){if("number"===typeof a&&"number"===typeof d&&"number"===typeof n)return jj("#"+io(a)+io(d)+io(n));if("object"===typeof a&&void 0===d&&void 0===n)return jj("#"+io(a.red)+io(a.green)+
io(a.blue));throw new Sn(6);}function zw(a){if("object"!==typeof a)throw new Sn(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?Mu(a.red,a.green,a.blue):"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new Sn(7);return a}if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return Mu(a);if("number"===
typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?kr(a.hue,a.saturation,a.lightness,xt):"rgba("+kr(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new Sn(2);return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=kr(a.hue,a.saturation,a.lightness,xt);else throw new Sn(1);
return a}throw new Sn(8);}function yt(a,d,n){return function(){var R=n.concat(Array.prototype.slice.call(arguments));return R.length>=d?a.apply(this,R):yt(a,d,R)}}function zt(a,d){if("transparent"===d)return d;d=yw(d);var n=d.red/255,R=d.green/255,ea=d.blue/255,ka=Math.max(n,R,ea),ta=Math.min(n,R,ea),Ka=(ka+ta)/2;if(ka===ta)d=void 0!==d.alpha?{hue:0,saturation:0,lightness:Ka,alpha:d.alpha}:{hue:0,saturation:0,lightness:Ka};else{var $a=ka-ta;ta=.5<Ka?$a/(2-ka-ta):$a/(ka+ta);switch(ka){case n:n=(R-
ea)/$a+(R<ea?6:0);break;case R:n=(ea-n)/$a+2;break;default:n=(n-R)/$a+4}n*=60;d=void 0!==d.alpha?{hue:n,saturation:ta,lightness:Ka,alpha:d.alpha}:{hue:n,saturation:ta,lightness:Ka}}Ka=af;a=d.lightness-parseFloat(a);return zw(Ka({},d,{lightness:Math.max(0,Math.min(1,a))}))}function hn(a,d){var n;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let R=null!=(n=d.fill)?n:a.props.fill;void 0===R||Bf(R)||"var(--ls-secondary-background-color)"===
R||d.noFill||!OH.includes(a.props.type)||(a=vu(.3,R),d.stroke=a);return d}function At({strokeWidth:a,size:d,mode:n}){return"svg"===n?(0,Hp.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,d[1]-2*a),strokeWidth:4*a}):(0,Hp.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function ms(){const a=Re();return"panning"===a.inputs.state||
"pinching"===a.inputs.state}function Nu({left:a,middle:d,right:n,stroke:R,strokeWidth:ea}){return(0,at.jsxs)("g",{children:[(0,at.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${n}`}),(0,at.jsx)("path",{d:`M ${a} L ${d} ${n}`,fill:"none",stroke:R,strokeWidth:ea,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Bt(a,d,n){d=P(a,d,a,n).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(n=d[0])?ye.rotWith(n,
a,Math.PI/6):a;a=n?ye.rotWith(n,a,-Math.PI/6):a;return{left:d,right:a}}function Ou(a,d,n){const {left:R,right:ea}=Bt(a,d,n);return`M ${R} L ${a} ${ea}`}function Aw(a,d,n,R,ea){a=a.strokeWidth;var ka=ye.dist(d,n);a=Math.min(ka/3,16*a);ka=[];ka.push(`M ${d} L ${n}`);R&&ka.push(Ou(d,n,a));ea&&ka.push(Ou(n,d,a));return ka.join(" ")}function Ct({id:a,bounds:d,labelSize:n,offset:R,scale:ea=1}){return(0,xu.jsx)("defs",{children:(0,xu.jsxs)("mask",{id:a+"_clip",children:[(0,xu.jsx)("rect",{x:-100,y:-100,
width:d.width+200,height:d.height+200,fill:"white"}),(0,xu.jsx)("rect",{x:d.width/2-n[0]/2*ea+((null==R?void 0:R[0])||0),y:d.height/2-n[1]/2*ea+((null==R?void 0:R[1])||0),width:n[0]*ea,height:n[1]*ea,rx:4*ea,ry:4*ea,fill:"black"})]})})}function Dt(a,d,n,R=ea=>ea){return a*R(.5-d*(.5-n))}function Bw(a){return[-a[0],-a[1]]}function jn(a,d){return[a[0]+d[0],a[1]+d[1]]}function vm(a,d){return[a[0]-d[0],a[1]-d[1]]}function kn(a,d){return[a[0]*d,a[1]*d]}function lr(a){return[a[1],-a[0]]}function Cw(a,d){return a[0]===
d[0]&&a[1]===d[1]}function Pu(a){return a[0]*a[0]+a[1]*a[1]}function Qu(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function Dw(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function mr(a,d,n){let R=Math.sin(n);n=Math.cos(n);let ea=a[0]-d[0];a=a[1]-d[1];return[ea*n-a*R+d[0],ea*R+a*n+d[1]]}function Et(a,d,n){return jn(a,kn(vm(d,a),n))}function Ru(a,d,n){return jn(a,kn(d,n))}function Ew(a,d={}){let {size:n=16,smoothing:R=.5,thinning:ea=.5,simulatePressure:ka=!0,easing:ta=$d=>$d,start:Ka={},end:$a=
{},last:mb=!1}=d,{cap:ub=!0,easing:zb=$d=>$d*(2-$d)}=Ka,{cap:ec=!0,easing:ic=$d=>--$d*$d*$d+1}=$a;if(0===a.length||0>=n)return[];var bc=a[a.length-1].runningLength;let Lc=!1===Ka.taper?0:!0===Ka.taper?Math.max(n,bc):Ka.taper,$c=!1===$a.taper?0:!0===$a.taper?Math.max(n,bc):$a.taper;var tc=Math.pow(n*R,2);d=[];let Tc=[];var Oc=a.slice(0,10).reduce(($d,Fd)=>{var ae=Fd.pressure;ka&&(Fd=Lr(1,Fd.distance/n),ae=Lr(1,1-Fd),ae=Lr(1,$d+.275*(ae-$d)*Fd));return($d+ae)/2},a[0].pressure),ld=Dt(n,ea,a[a.length-
1].pressure,ta),od;let Qd=a[0].vector;var ge=a[0].point;let uf=ge;var Be=ge;let We=uf;var Tf=!1;for(var ff=0;ff<a.length;ff++){var {pressure:Jf}=a[ff];let {point:$d,vector:Fd,distance:ae,runningLength:gf}=a[ff];if(ff<a.length-1&&3>bc-gf)continue;ea?(ka&&(ld=Lr(1,ae/n),Jf=Lr(1,1-ld),Jf=Lr(1,Oc+.275*(Jf-Oc)*ld)),ld=Dt(n,ea,Jf,ta)):ld=n/2;void 0===od&&(od=ld);var ee=gf<Lc?zb(gf/Lc):1,Nd=bc-gf<$c?ic((bc-gf)/$c):1;ld=Math.max(.01,ld*Math.min(ee,Nd));Nd=(ff<a.length-1?a[ff+1]:a[ff]).vector;let wf=ff<a.length-
1?Fd[0]*Nd[0]+Fd[1]*Nd[1]:1;ee=null!==wf&&0>wf;if(0>Fd[0]*Qd[0]+Fd[1]*Qd[1]&&!Tf||ee){ge=kn(lr(Qd),ld);for(let og=1/13,Xg=0;1>=Xg;Xg+=og)Be=mr(vm($d,ge),$d,Mr*Xg),d.push(Be),We=mr(jn($d,ge),$d,Mr*-Xg),Tc.push(We);ge=Be;uf=We;ee&&(Tf=!0)}else(Tf=!1,ff===a.length-1)?(Jf=kn(lr(Fd),ld),d.push(vm($d,Jf)),Tc.push(jn($d,Jf))):(Oc=kn(lr(Et(Nd,Fd,wf)),ld),Be=vm($d,Oc),(1>=ff||Pu(vm(ge,Be))>tc)&&(d.push(Be),ge=Be),We=jn($d,Oc),(1>=ff||Pu(vm(uf,We))>tc)&&(Tc.push(We),uf=We),Oc=Jf,Qd=Fd)}bc=a[0].point.slice(0,
2);tc=1<a.length?a[a.length-1].point.slice(0,2):jn(a[0].point,[1,1]);Be=[];Tf=[];if(1===a.length){if(!Lc&&!$c||mb){a=Ru(bc,Qu(lr(vm(bc,tc))),-(od||ld));d=[];for(let $d=1/13,Fd=$d;1>=Fd;Fd+=$d)d.push(mr(a,bc,2*Mr*Fd));return d}}else{if(!(Lc||$c&&1===a.length))if(ub)for(let $d=1/13,Fd=$d;1>=Fd;Fd+=$d)od=mr(Tc[0],bc,Mr*Fd),Be.push(od);else ff=vm(d[0],Tc[0]),od=kn(ff,.5),ff=kn(ff,.51),Be.push(vm(bc,od),vm(bc,ff),jn(bc,ff),jn(bc,od));od=lr(Bw(a[a.length-1].vector));if($c||Lc&&1===a.length)Tf.push(tc);
else if(ec){a=Ru(tc,od,ld);for(let $d=1/29,Fd=$d;1>Fd;Fd+=$d)Tf.push(mr(a,tc,3*Mr*Fd))}else Tf.push(jn(tc,kn(od,ld)),jn(tc,kn(od,.99*ld)),vm(tc,kn(od,.99*ld)),vm(tc,kn(od,ld)))}return d.concat(Tf,Tc.reverse(),Be)}function Fw(a,d={}){var n;let {streamline:R=.5,size:ea=16,last:ka=!1}=d;if(0===a.length)return[];d=.15+.85*(1-R);a=Array.isArray(a[0])?a:a.map(({x:zb,y:ec,pressure:ic=.5})=>[zb,ec,ic]);if(2===a.length){var ta=a[1];a=a.slice(0,-1);for(var Ka=1;5>Ka;Ka++)a.push(Et(a[0],ta,Ka/4))}1===a.length&&
(a=[...a,[...jn(a[0],[1,1]),...a[0].slice(2)]]);ta=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ka=!1;let $a=0,mb=ta[0],ub=a.length-1;for(let zb=1;zb<a.length;zb++){let ec=ka&&zb===ub?a[zb].slice(0,2):Et(mb.point,a[zb],d);if(Cw(mb.point,ec))continue;let ic=Dw(ec,mb.point);if($a+=ic,zb<ub&&!Ka){if($a<ea)continue;Ka=!0}mb={point:ec,pressure:0<=a[zb][2]?a[zb][2]:.5,vector:Qu(vm(mb.point,ec)),distance:ic,runningLength:$a};ta.push(mb)}return ta[0].vector=
(null==(n=ta[1])?void 0:n.vector)||[0,0],ta}function Gw(a,d=4/3){return(new Gq(a)).exportAsSVG(d)}function Hw(a,d=4/3){return(new Gq(a)).generatePreviewJsx(void 0,d)}function Su({id:a,type:d,onRemove:n,showContent:R}){const ea=Re(),{handlers:ka}=my.default.useContext(fj),ta=ka.t;return(0,zj.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,zj.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,zj.jsx)(Bp,{id:a,showReferenceContent:R})}),
(0,zj.jsx)("div",{className:"flex-1"}),ka.getBlockPageName(a)!==ea.currentPage.name&&(0,zj.jsx)(ve,{tooltip:ta("whiteboard/open-page"),type:"button",onClick:()=>null==ka?void 0:ka.redirectToPage(a),children:(0,zj.jsx)(Qh,{name:"open-as-page"})}),(0,zj.jsx)(ve,{tooltip:ta("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==ka?void 0:ka.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,zj.jsx)(Qh,{name:"move-to-sidebar-right"})}),n&&(0,zj.jsx)(ve,{className:"tl-shape-links-panel-item-remove-button",
tooltip:ta("whiteboard/remove-link"),type:"button",onClick:n,children:(0,zj.jsx)(Qh,{name:"x",className:"!translate-y-0"})})]})}function ja({options:a,value:d,onValueChange:n}){return(0,Xl.jsx)(kD,{className:"tl-toggle-group-input",type:"single",value:d,onValueChange:n,children:a.map(R=>(0,Xl.jsx)(ze,{content:R.tooltip,children:(0,Xl.jsx)("div",{className:"inline-block",children:(0,Xl.jsx)(Oy,{className:"tl-toggle-group-input-button",value:R.value,disabled:R.value===d,children:(0,Xl.jsx)(Qh,{name:R.icon})})})},
R.value))})}function Da({options:a,value:d,onValueChange:n}){return(0,Xl.jsx)(kD,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:n,children:a.map(R=>(0,Xl.jsx)(Oy,{className:"tl-toggle-group-input-button",value:R.value,children:(0,Xl.jsx)(Qh,{name:R.icon})},R.value))})}function gb(a){return Re().selectedShapesArray.filter(d=>!d.props.isLocked).filter(d=>{var n;return null==(n=Qy[d.props.type])?void 0:n.includes(a)})}function oc(a){return d=>"mouse"!==d.pointerType?a(d):void 0}
function bd(a){var d;a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";const n=a[0].toLowerCase();[a]=null!=(d=Object.entries(pD).find(([,R])=>R.includes(n)))?d:["unknown",null];return a}function nd(...a){return(...d)=>ti(this,null,function*(){for(const n of a){const R=yield n(...d);if(R&&0<R.length)return R}return null})}function Wd(a,d){return ti(this,null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():null})}function je(){const {handlers:a}=
Zo.useContext(fj);return Zo.useCallback((d,n)=>ti(this,null,function*(){if(n.shiftKey&&1===d.selectedShapesArray.length){var R=yield navigator.clipboard.read();let ea;0<R.length&&(R=(yield(yield R[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(R)&&40===R.length?(R=R.slice(2,-2),Eg(R)&&(ea=R)):/^\[\[.*\]\]$/.test(R)&&(ea=R.slice(2,-2)));if(ea){d.selectedShapesArray[0].update({refs:[ea]});d.persist();return}}Wy(d,n,a)}),[])}function Ae(){const a=je();return cI.useCallback((d,n)=>ti(this,
[d,n],function*(R,{dataTransfer:ea,point:ka}){a(R,{point:ka,shiftKey:!1,dataTransfer:ea,fromDrop:!0})}),[])}function Ve(){const {handlers:a}=Du.useContext(fj);return Du.useCallback((d,{text:n,html:R})=>{a.copyToClipboard(n,R)},[])}function Af(){return Xy.default.useCallback(a=>ti(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var sg=Object.create,Bg=Object.defineProperty,Zh=Object.defineProperties,si=Object.getOwnPropertyDescriptor,
bl=Object.getOwnPropertyDescriptors,jo=Object.getOwnPropertyNames,Nl=Object.getOwnPropertySymbols,Fi=Object.getPrototypeOf,vk=Object.prototype.hasOwnProperty,hm=Object.prototype.propertyIsEnumerable,Lo=(a,d,n)=>d in a?Bg(a,d,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[d]=n,we=(a,d)=>{for(var n in d||={})vk.call(d,n)&&Lo(a,n,d[n]);if(Nl)for(n of Nl(d))hm.call(d,n)&&Lo(a,n,d[n]);return a},Mf=(a,d)=>Zh(a,bl(d)),hg=(a,d)=>{var n={},R;for(R in a)vk.call(a,R)&&0>d.indexOf(R)&&(n[R]=a[R]);if(null!=
a&&Nl)for(R of Nl(a))0>d.indexOf(R)&&hm.call(a,R)&&(n[R]=a[R]);return n},Tu=(a,d)=>function(){return d||(0,a[jo(a)[0]])((d={exports:{}}).exports,d),d.exports},hz=(a,d,n,R)=>{if(d&&"object"===typeof d||"function"===typeof d)for(let ea of jo(d))vk.call(a,ea)||ea===n||Bg(a,ea,{get:()=>d[ea],enumerable:!(R=si(d,ea))||R.enumerable});return a},pg=(a,d,n)=>(n=null!=a?sg(Fi(a)):{},hz(!d&&a&&a.__esModule?n:Bg(n,"default",{value:a,enumerable:!0}),a)),De=(a,d,n,R)=>{for(var ea=1<R?void 0:R?si(d,n):d,ka=a.length-
1,ta;0<=ka;ka--)if(ta=a[ka])ea=(R?ta(d,n,ea):ta(ea))||ea;R&&ea&&Bg(d,n,ea);return ea},yb=(a,d,n)=>{Lo(a,"symbol"!==typeof d?d+"":d,n);return n},ti=(a,d,n)=>new Promise((R,ea)=>{var ka=$a=>{try{Ka(n.next($a))}catch(mb){ea(mb)}},ta=$a=>{try{Ka(n.throw($a))}catch(mb){ea(mb)}},Ka=$a=>$a.done?R($a.value):Promise.resolve($a.value).then(ka,ta);Ka((n=n.apply(a,d)).next())}),PD=Tu({["../../node_modules/rbush/rbush.min.js"](a,d){!function(n,R){"object"==typeof a&&"undefined"!=typeof d?d.exports=R():"function"==
typeof define&&define.amd?define(R):(n=n||self).RBush=R()}(a,function(){function n(tc,Tc,Oc,ld,od){!function ff(ge,uf,Be,We,Tf){for(;We>Be;){if(600<We-Be){var Jf=We-Be+1,ee=uf-Be+1,Nd=Math.log(Jf),$d=.5*Math.exp(2*Nd/3);Nd=.5*Math.sqrt(Nd*$d*(Jf-$d)/Jf)*(0>ee-Jf/2?-1:1);ff(ge,uf,Math.max(Be,Math.floor(uf-ee*$d/Jf+Nd)),Math.min(We,Math.floor(uf+(Jf-ee)*$d/Jf+Nd)),Tf)}Jf=ge[uf];ee=Be;$d=We;R(ge,Be,uf);for(0<Tf(ge[We],Jf)&&R(ge,Be,We);ee<$d;){R(ge,ee,$d);ee++;for($d--;0>Tf(ge[ee],Jf);)ee++;for(;0<Tf(ge[$d],
Jf);)$d--}0===Tf(ge[Be],Jf)?R(ge,Be,$d):R(ge,++$d,We);$d<=uf&&(Be=$d+1);uf<=$d&&(We=$d-1)}}(tc,Tc,Oc||0,ld||tc.length-1,od||ea)}function R(tc,Tc,Oc){var ld=tc[Tc];tc[Tc]=tc[Oc];tc[Oc]=ld}function ea(tc,Tc){return tc<Tc?-1:tc>Tc?1:0}function ka(tc,Tc){ta(tc,0,tc.children.length,Tc,tc)}function ta(tc,Tc,Oc,ld,od){od||=bc(null);od.minX=1/0;od.minY=1/0;od.maxX=-1/0;for(od.maxY=-1/0;Tc<Oc;Tc++){var Qd=tc.children[Tc];Ka(od,tc.leaf?ld(Qd):Qd)}return od}function Ka(tc,Tc){return tc.minX=Math.min(tc.minX,
Tc.minX),tc.minY=Math.min(tc.minY,Tc.minY),tc.maxX=Math.max(tc.maxX,Tc.maxX),tc.maxY=Math.max(tc.maxY,Tc.maxY),tc}function $a(tc,Tc){return tc.minX-Tc.minX}function mb(tc,Tc){return tc.minY-Tc.minY}function ub(tc){return(tc.maxX-tc.minX)*(tc.maxY-tc.minY)}function zb(tc){return tc.maxX-tc.minX+(tc.maxY-tc.minY)}function ec(tc,Tc){return tc.minX<=Tc.minX&&tc.minY<=Tc.minY&&Tc.maxX<=tc.maxX&&Tc.maxY<=tc.maxY}function ic(tc,Tc){return Tc.minX<=tc.maxX&&Tc.minY<=tc.maxY&&Tc.maxX>=tc.minX&&Tc.maxY>=tc.minY}
function bc(tc){return{children:tc,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Lc(tc,Tc,Oc,ld,od){for(var Qd=[Tc,Oc];Qd.length;)if(!((Oc=Qd.pop())-(Tc=Qd.pop())<=ld)){var ge=Tc+Math.ceil((Oc-Tc)/ld/2)*ld;n(tc,ge,Tc,Oc,od);Qd.push(Tc,ge,ge,Oc)}}var $c=function(tc){void 0===tc&&(tc=9);this._maxEntries=Math.max(4,tc);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return $c.prototype.all=function(){return this._all(this.data,[])},$c.prototype.search=function(tc){var Tc=
this.data,Oc=[];if(!ic(tc,Tc))return Oc;for(var ld=this.toBBox,od=[];Tc;){for(var Qd=0;Qd<Tc.children.length;Qd++){var ge=Tc.children[Qd],uf=Tc.leaf?ld(ge):ge;ic(tc,uf)&&(Tc.leaf?Oc.push(ge):ec(tc,uf)?this._all(ge,Oc):od.push(ge))}Tc=od.pop()}return Oc},$c.prototype.collides=function(tc){var Tc=this.data;if(!ic(tc,Tc))return!1;for(var Oc=[];Tc;){for(var ld=0;ld<Tc.children.length;ld++){var od=Tc.children[ld],Qd=Tc.leaf?this.toBBox(od):od;if(ic(tc,Qd)){if(Tc.leaf||ec(tc,Qd))return!0;Oc.push(od)}}Tc=
Oc.pop()}return!1},$c.prototype.load=function(tc){if(!tc||!tc.length)return this;if(tc.length<this._minEntries){for(var Tc=0;Tc<tc.length;Tc++)this.insert(tc[Tc]);return this}tc=this._build(tc.slice(),0,tc.length-1,0);this.data.children.length?this.data.height===tc.height?this._splitRoot(this.data,tc):(this.data.height<tc.height&&(Tc=this.data,this.data=tc,tc=Tc),this._insert(tc,this.data.height-tc.height-1,!0)):this.data=tc;return this},$c.prototype.insert=function(tc){return tc&&this._insert(tc,
this.data.height-1),this},$c.prototype.clear=function(){return this.data=bc([]),this},$c.prototype.remove=function(tc,Tc){if(!tc)return this;for(var Oc,ld,od,Qd=this.data,ge=this.toBBox(tc),uf=[],Be=[];Qd||uf.length;){if(Qd||(Qd=uf.pop(),ld=uf[uf.length-1],Oc=Be.pop(),od=!0),Qd.leaf){a:{var We=tc;var Tf=Qd.children,ff=Tc;if(ff){for(var Jf=0;Jf<Tf.length;Jf++)if(ff(We,Tf[Jf])){We=Jf;break a}We=-1}else We=Tf.indexOf(We)}if(-1!==We)return Qd.children.splice(We,1),uf.push(Qd),this._condense(uf),this}od||
Qd.leaf||!ec(Qd,ge)?ld?(Oc++,Qd=ld.children[Oc],od=!1):Qd=null:(uf.push(Qd),Be.push(Oc),Oc=0,ld=Qd,Qd=Qd.children[0])}return this},$c.prototype.toBBox=function(tc){return tc},$c.prototype.compareMinX=function(tc,Tc){return tc.minX-Tc.minX},$c.prototype.compareMinY=function(tc,Tc){return tc.minY-Tc.minY},$c.prototype.toJSON=function(){return this.data},$c.prototype.fromJSON=function(tc){return this.data=tc,this},$c.prototype._all=function(tc,Tc){for(var Oc=[];tc;)tc.leaf?Tc.push.apply(Tc,tc.children):
Oc.push.apply(Oc,tc.children),tc=Oc.pop();return Tc},$c.prototype._build=function(tc,Tc,Oc,ld){var od,Qd=Oc-Tc+1,ge=this._maxEntries;if(Qd<=ge)return ka(od=bc(tc.slice(Tc,Oc+1)),this.toBBox),od;ld||(ld=Math.ceil(Math.log(Qd)/Math.log(ge)),ge=Math.ceil(Qd/Math.pow(ge,ld-1)));(od=bc([])).leaf=!1;od.height=ld;Qd=Math.ceil(Qd/ge);ge=Qd*Math.ceil(Math.sqrt(ge));for(Lc(tc,Tc,Oc,ge,this.compareMinX);Tc<=Oc;Tc+=ge){var uf=Math.min(Tc+ge-1,Oc);Lc(tc,Tc,uf,Qd,this.compareMinY);for(var Be=Tc;Be<=uf;Be+=Qd)od.children.push(this._build(tc,
Be,Math.min(Be+Qd-1,uf),ld-1))}return ka(od,this.toBBox),od},$c.prototype._chooseSubtree=function(tc,Tc,Oc,ld){for(;ld.push(Tc),!Tc.leaf&&ld.length-1!==Oc;){for(var od=1/0,Qd=1/0,ge=void 0,uf=0;uf<Tc.children.length;uf++){var Be=Tc.children[uf],We=ub(Be),Tf=(ff=tc,Jf=Be,(Math.max(Jf.maxX,ff.maxX)-Math.min(Jf.minX,ff.minX))*(Math.max(Jf.maxY,ff.maxY)-Math.min(Jf.minY,ff.minY))-We);Tf<Qd?(Qd=Tf,od=We<od?We:od,ge=Be):Tf===Qd&&We<od&&(od=We,ge=Be)}Tc=ge||Tc.children[0]}var ff,Jf;return Tc},$c.prototype._insert=
function(tc,Tc,Oc){Oc=Oc?tc:this.toBBox(tc);var ld=[],od=this._chooseSubtree(Oc,this.data,Tc,ld);od.children.push(tc);for(Ka(od,Oc);0<=Tc&&ld[Tc].children.length>this._maxEntries;)this._split(ld,Tc),Tc--;this._adjustParentBBoxes(Oc,ld,Tc)},$c.prototype._split=function(tc,Tc){var Oc=tc[Tc],ld=Oc.children.length,od=this._minEntries;this._chooseSplitAxis(Oc,od,ld);ld=this._chooseSplitIndex(Oc,od,ld);ld=bc(Oc.children.splice(ld,Oc.children.length-ld));ld.height=Oc.height;ld.leaf=Oc.leaf;ka(Oc,this.toBBox);
ka(ld,this.toBBox);Tc?tc[Tc-1].children.push(ld):this._splitRoot(Oc,ld)},$c.prototype._splitRoot=function(tc,Tc){this.data=bc([tc,Tc]);this.data.height=tc.height+1;this.data.leaf=!1;ka(this.data,this.toBBox)},$c.prototype._chooseSplitIndex=function(tc,Tc,Oc){for(var ld,od,Qd,ge,uf,Be,We,Tf=1/0,ff=1/0,Jf=Tc;Jf<=Oc-Tc;Jf++){var ee=ta(tc,0,Jf,this.toBBox),Nd=ta(tc,Jf,Oc,this.toBBox),$d=(od=ee,Qd=Nd,ge=void 0,uf=void 0,Be=void 0,We=void 0,ge=Math.max(od.minX,Qd.minX),uf=Math.max(od.minY,Qd.minY),Be=Math.min(od.maxX,
Qd.maxX),We=Math.min(od.maxY,Qd.maxY),Math.max(0,Be-ge)*Math.max(0,We-uf));ee=ub(ee)+ub(Nd);$d<Tf?(Tf=$d,ld=Jf,ff=ee<ff?ee:ff):$d===Tf&&ee<ff&&(ff=ee,ld=Jf)}return ld||Oc-Tc},$c.prototype._chooseSplitAxis=function(tc,Tc,Oc){var ld=tc.leaf?this.compareMinX:$a,od=tc.leaf?this.compareMinY:mb;this._allDistMargin(tc,Tc,Oc,ld)<this._allDistMargin(tc,Tc,Oc,od)&&tc.children.sort(ld)},$c.prototype._allDistMargin=function(tc,Tc,Oc,ld){tc.children.sort(ld);ld=this.toBBox;for(var od=ta(tc,0,Tc,ld),Qd=ta(tc,Oc-
Tc,Oc,ld),ge=zb(od)+zb(Qd),uf=Tc;uf<Oc-Tc;uf++){var Be=tc.children[uf];Ka(od,tc.leaf?ld(Be):Be);ge+=zb(od)}for(Oc=Oc-Tc-1;Oc>=Tc;Oc--)od=tc.children[Oc],Ka(Qd,tc.leaf?ld(od):od),ge+=zb(Qd);return ge},$c.prototype._adjustParentBBoxes=function(tc,Tc,Oc){for(;0<=Oc;Oc--)Ka(Tc[Oc],tc)},$c.prototype._condense=function(tc){for(var Tc=tc.length-1,Oc=void 0;0<=Tc;Tc--)0===tc[Tc].children.length?0<Tc?(Oc=tc[Tc-1].children).splice(Oc.indexOf(tc[Tc]),1):this.clear():ka(tc[Tc],this.toBBox)},$c})}}),QD=Tu({["../../node_modules/fast-deep-equal/index.js"](a,
d){d.exports=function ka(R,ea){if(R===ea)return!0;if(R&&ea&&"object"==typeof R&&"object"==typeof ea){if(R.constructor!==ea.constructor)return!1;var ta;if(Array.isArray(R)){var Ka=R.length;if(Ka!=ea.length)return!1;for(ta=Ka;0!==ta--;)if(!ka(R[ta],ea[ta]))return!1;return!0}if(R.constructor===RegExp)return R.source===ea.source&&R.flags===ea.flags;if(R.valueOf!==Object.prototype.valueOf)return R.valueOf()===ea.valueOf();if(R.toString!==Object.prototype.toString)return R.toString()===ea.toString();var $a=
Object.keys(R);Ka=$a.length;if(Ka!==Object.keys(ea).length)return!1;for(ta=Ka;0!==ta--;)if(!Object.prototype.hasOwnProperty.call(ea,$a[ta]))return!1;for(ta=Ka;0!==ta--;)if(Ka=$a[ta],!ka(R[Ka],ea[Ka]))return!1;return!0}return R!==R&&ea!==ea}}}),RD=Tu({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function n(zb,ec){return!1!==ec.clone&&ec.isMergeableObject(zb)?$a(Array.isArray(zb)?[]:{},zb,ec):zb}function R(zb,ec,ic){return zb.concat(ec).map(function(bc){return n(bc,ic)})}function ea(zb){return Object.getOwnPropertySymbols?
Object.getOwnPropertySymbols(zb).filter(function(ec){return Object.propertyIsEnumerable.call(zb,ec)}):[]}function ka(zb){return Object.keys(zb).concat(ea(zb))}function ta(zb,ec){try{return ec in zb}catch(ic){return!1}}function Ka(zb,ec,ic){var bc={};ic.isMergeableObject(zb)&&ka(zb).forEach(function(Lc){bc[Lc]=n(zb[Lc],ic)});ka(ec).forEach(function(Lc){if(!ta(zb,Lc)||Object.hasOwnProperty.call(zb,Lc)&&Object.propertyIsEnumerable.call(zb,Lc))if(ta(zb,Lc)&&ic.isMergeableObject(ec[Lc])){if(ic.customMerge){var $c=
ic.customMerge(Lc);$c="function"===typeof $c?$c:$a}else $c=$a;bc[Lc]=$c(zb[Lc],ec[Lc],ic)}else bc[Lc]=n(ec[Lc],ic)});return bc}function $a(zb,ec,ic){ic=ic||{};ic.arrayMerge=ic.arrayMerge||R;ic.isMergeableObject=ic.isMergeableObject||mb;ic.cloneUnlessOtherwiseSpecified=n;var bc=Array.isArray(ec),Lc=Array.isArray(zb);return bc!==Lc?n(ec,ic):bc?ic.arrayMerge(zb,ec,ic):Ka(zb,ec,ic)}var mb=function(zb){var ec;if(ec=!!zb&&"object"===typeof zb)ec=Object.prototype.toString.call(zb),ec=!("[object RegExp]"===
ec||"[object Date]"===ec||zb.$$typeof===ub);return ec},ub="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;$a.all=function(zb,ec){if(!Array.isArray(zb))throw Error("first argument should be an array");return zb.reduce(function(ic,bc){return $a(ic,bc,ec)},{})};d.exports=$a}}),SD=Tu({["../../node_modules/tslib/tslib.js"](a,d){var n,R,ea,ka,ta,Ka,$a,mb,ub,zb,ec,ic,bc,Lc,$c,tc,Tc,Oc,ld,od,Qd,ge,uf,Be,We;(function(Tf){function ff(ee,Nd){ee!==Jf&&("function"===typeof Object.create?
Object.defineProperty(ee,"__esModule",{value:!0}):ee.__esModule=!0);return function($d,Fd){return ee[$d]=Nd?Nd($d,Fd):Fd}}var Jf="object"===typeof za?za:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(ee){Tf(ff(Jf,ff(ee)))}):"object"===typeof d&&"object"===typeof d.exports?Tf(ff(Jf,ff(d.exports))):Tf(ff(Jf))})(function(Tf){var ff=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,Nd){ee.__proto__=
Nd}||function(ee,Nd){for(var $d in Nd)Object.prototype.hasOwnProperty.call(Nd,$d)&&(ee[$d]=Nd[$d])};n=function(ee,Nd){function $d(){this.constructor=ee}if("function"!==typeof Nd&&null!==Nd)throw new TypeError("Class extends value "+String(Nd)+" is not a constructor or null");ff(ee,Nd);ee.prototype=null===Nd?Object.create(Nd):($d.prototype=Nd.prototype,new $d)};R=Object.assign||function(ee){for(var Nd,$d=1,Fd=arguments.length;$d<Fd;$d++){Nd=arguments[$d];for(var ae in Nd)Object.prototype.hasOwnProperty.call(Nd,
ae)&&(ee[ae]=Nd[ae])}return ee};ea=function(ee,Nd){var $d={},Fd;for(Fd in ee)Object.prototype.hasOwnProperty.call(ee,Fd)&&0>Nd.indexOf(Fd)&&($d[Fd]=ee[Fd]);if(null!=ee&&"function"===typeof Object.getOwnPropertySymbols){var ae=0;for(Fd=Object.getOwnPropertySymbols(ee);ae<Fd.length;ae++)0>Nd.indexOf(Fd[ae])&&Object.prototype.propertyIsEnumerable.call(ee,Fd[ae])&&($d[Fd[ae]]=ee[Fd[ae]])}return $d};ka=function(ee,Nd,$d,Fd){var ae=arguments.length,gf=3>ae?Nd:null===Fd?Fd=Object.getOwnPropertyDescriptor(Nd,
$d):Fd,wf;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)gf=Reflect.decorate(ee,Nd,$d,Fd);else for(var og=ee.length-1;0<=og;og--)if(wf=ee[og])gf=(3>ae?wf(gf):3<ae?wf(Nd,$d,gf):wf(Nd,$d))||gf;return 3<ae&&gf&&Object.defineProperty(Nd,$d,gf),gf};ta=function(ee,Nd){return function($d,Fd){Nd($d,Fd,ee)}};Ka=function(ee,Nd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(ee,Nd)};$a=function(ee,Nd,$d,Fd){function ae(gf){return gf instanceof $d?
gf:new $d(function(wf){wf(gf)})}return new ($d||=Promise)(function(gf,wf){function og(mh){try{Ef(Fd.next(mh))}catch(bg){wf(bg)}}function Xg(mh){try{Ef(Fd["throw"](mh))}catch(bg){wf(bg)}}function Ef(mh){mh.done?gf(mh.value):ae(mh.value).then(og,Xg)}Ef((Fd=Fd.apply(ee,Nd||[])).next())})};mb=function(ee,Nd){function $d(Ef){return function(mh){return Fd([Ef,mh])}}function Fd(Ef){if(gf)throw new TypeError("Generator is already executing.");for(;ae;)try{if(gf=1,wf&&(og=Ef[0]&2?wf["return"]:Ef[0]?wf["throw"]||
((og=wf["return"])&&og.call(wf),0):wf.next)&&!(og=og.call(wf,Ef[1])).done)return og;if(wf=0,og)Ef=[Ef[0]&2,og.value];switch(Ef[0]){case 0:case 1:og=Ef;break;case 4:return ae.label++,{value:Ef[1],done:!1};case 5:ae.label++;wf=Ef[1];Ef=[0];continue;case 7:Ef=ae.ops.pop();ae.trys.pop();continue;default:if(!(og=ae.trys,og=0<og.length&&og[og.length-1])&&(6===Ef[0]||2===Ef[0])){ae=0;continue}if(3===Ef[0]&&(!og||Ef[1]>og[0]&&Ef[1]<og[3]))ae.label=Ef[1];else if(6===Ef[0]&&ae.label<og[1])ae.label=og[1],og=
Ef;else if(og&&ae.label<og[2])ae.label=og[2],ae.ops.push(Ef);else{og[2]&&ae.ops.pop();ae.trys.pop();continue}}Ef=Nd.call(ee,ae)}catch(mh){Ef=[6,mh],wf=0}finally{gf=og=0}if(Ef[0]&5)throw Ef[1];return{value:Ef[0]?Ef[1]:void 0,done:!0}}var ae={label:0,sent:function(){if(og[0]&1)throw og[1];return og[1]},trys:[],ops:[]},gf,wf,og,Xg;return Xg={next:$d(0),"throw":$d(1),"return":$d(2)},"function"===typeof Symbol&&(Xg[Symbol.iterator]=function(){return this}),Xg};ub=function(ee,Nd){for(var $d in ee)"default"===
$d||Object.prototype.hasOwnProperty.call(Nd,$d)||We(Nd,ee,$d)};We=Object.create?function(ee,Nd,$d,Fd){void 0===Fd&&(Fd=$d);var ae=Object.getOwnPropertyDescriptor(Nd,$d);if(!ae||("get"in ae?!Nd.__esModule:ae.writable||ae.configurable))ae={enumerable:!0,get:function(){return Nd[$d]}};Object.defineProperty(ee,Fd,ae)}:function(ee,Nd,$d,Fd){void 0===Fd&&(Fd=$d);ee[Fd]=Nd[$d]};zb=function(ee){var Nd="function"===typeof Symbol&&Symbol.iterator,$d=Nd&&ee[Nd],Fd=0;if($d)return $d.call(ee);if(ee&&"number"===
typeof ee.length)return{next:function(){ee&&Fd>=ee.length&&(ee=void 0);return{value:ee&&ee[Fd++],done:!ee}}};throw new TypeError(Nd?"Object is not iterable.":"Symbol.iterator is not defined.");};ec=function(ee,Nd){var $d="function"===typeof Symbol&&ee[Symbol.iterator];if(!$d)return ee;ee=$d.call(ee);var Fd,ae=[];try{for(;(void 0===Nd||0<Nd--)&&!(Fd=ee.next()).done;)ae.push(Fd.value)}catch(wf){var gf={error:wf}}finally{try{Fd&&!Fd.done&&($d=ee["return"])&&$d.call(ee)}finally{if(gf)throw gf.error;}}return ae};
ic=function(){for(var ee=[],Nd=0;Nd<arguments.length;Nd++)ee=ee.concat(ec(arguments[Nd]));return ee};bc=function(){for(var ee=0,Nd=0,$d=arguments.length;Nd<$d;Nd++)ee+=arguments[Nd].length;ee=Array(ee);var Fd=0;for(Nd=0;Nd<$d;Nd++)for(var ae=arguments[Nd],gf=0,wf=ae.length;gf<wf;gf++,Fd++)ee[Fd]=ae[gf];return ee};Lc=function(ee,Nd,$d){if($d||2===arguments.length)for(var Fd=0,ae=Nd.length,gf;Fd<ae;Fd++)!gf&&Fd in Nd||(gf||=Array.prototype.slice.call(Nd,0,Fd),gf[Fd]=Nd[Fd]);return ee.concat(gf||Array.prototype.slice.call(Nd))};
$c=function(ee){return this instanceof $c?(this.v=ee,this):new $c(ee)};tc=function(ee,Nd,$d){function Fd(bg){Xg[bg]&&(Ef[bg]=function(Bh){return new Promise(function(Lh,$i){1<mh.push([bg,Bh,Lh,$i])||ae(bg,Bh)})})}function ae(bg,Bh){try{var Lh=Xg[bg](Bh);Lh.value instanceof $c?Promise.resolve(Lh.value.v).then(gf,wf):og(mh[0][2],Lh)}catch($i){og(mh[0][3],$i)}}function gf(bg){ae("next",bg)}function wf(bg){ae("throw",bg)}function og(bg,Bh){(bg(Bh),mh.shift(),mh.length)&&ae(mh[0][0],mh[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var Xg=$d.apply(ee,Nd||[]),Ef,mh=[];return Ef={},Fd("next"),Fd("throw"),Fd("return"),Ef[Symbol.asyncIterator]=function(){return this},Ef};Tc=function(ee){function Nd(ae,gf){$d[ae]=ee[ae]?function(wf){return(Fd=!Fd)?{value:$c(ee[ae](wf)),done:"return"===ae}:gf?gf(wf):wf}:gf}var $d,Fd;return $d={},Nd("next"),Nd("throw",function(ae){throw ae;}),Nd("return"),$d[Symbol.iterator]=function(){return this},$d};Oc=function(ee){function Nd(gf){ae[gf]=ee[gf]&&function(wf){return new Promise(function(og,Xg){wf=
ee[gf](wf);$d(og,Xg,wf.done,wf.value)})}}function $d(gf,wf,og,Xg){Promise.resolve(Xg).then(function(Ef){gf({value:Ef,done:og})},wf)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fd=ee[Symbol.asyncIterator],ae;return Fd?Fd.call(ee):(ee="function"===typeof zb?zb(ee):ee[Symbol.iterator](),ae={},Nd("next"),Nd("throw"),Nd("return"),ae[Symbol.asyncIterator]=function(){return this},ae)};ld=function(ee,Nd){Object.defineProperty?Object.defineProperty(ee,"raw",{value:Nd}):
ee.raw=Nd;return ee};var Jf=Object.create?function(ee,Nd){Object.defineProperty(ee,"default",{enumerable:!0,value:Nd})}:function(ee,Nd){ee["default"]=Nd};od=function(ee){if(ee&&ee.__esModule)return ee;var Nd={};if(null!=ee)for(var $d in ee)"default"!==$d&&Object.prototype.hasOwnProperty.call(ee,$d)&&We(Nd,ee,$d);Jf(Nd,ee);return Nd};Qd=function(ee){return ee&&ee.__esModule?ee:{"default":ee}};ge=function(ee,Nd,$d,Fd){if("a"===$d&&!Fd)throw new TypeError("Private accessor was defined without a getter");
if("function"===typeof Nd?ee!==Nd||!Fd:!Nd.has(ee))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===$d?Fd:"a"===$d?Fd.call(ee):Fd?Fd.value:Nd.get(ee)};uf=function(ee,Nd,$d,Fd,ae){if("m"===Fd)throw new TypeError("Private method is not writable");if("a"===Fd&&!ae)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof Nd?ee!==Nd||!ae:!Nd.has(ee))throw new TypeError("Cannot write private member to an object whose class did not declare it");
return"a"===Fd?ae.call(ee,$d):ae?ae.value=$d:Nd.set(ee,$d),$d};Be=function(ee,Nd){if(null===Nd||"object"!==typeof Nd&&"function"!==typeof Nd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof ee?Nd===ee:ee.has(Nd)};Tf("__extends",n);Tf("__assign",R);Tf("__rest",ea);Tf("__decorate",ka);Tf("__param",ta);Tf("__metadata",Ka);Tf("__awaiter",$a);Tf("__generator",mb);Tf("__exportStar",ub);Tf("__createBinding",We);Tf("__values",zb);Tf("__read",ec);Tf("__spread",ic);Tf("__spreadArrays",
bc);Tf("__spreadArray",Lc);Tf("__await",$c);Tf("__asyncGenerator",tc);Tf("__asyncDelegator",Tc);Tf("__asyncValues",Oc);Tf("__makeTemplateObject",ld);Tf("__importStar",od);Tf("__importDefault",Qd);Tf("__classPrivateFieldGet",ge);Tf("__classPrivateFieldSet",uf);Tf("__classPrivateFieldIn",Be)})}}),iz={};((a,d)=>{for(var n in d)Bg(a,n,{get:d[n],enumerable:!0})})(iz,{App:()=>uD,PreviewManager:()=>Gq,generateJSXFromModel:()=>Hw,generateSVGFromModel:()=>Gw});Za.exports=(a=>hz(Bg({},"__esModule",{value:!0}),
a))(iz);var Iw=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";a.Gray="gray";a.Default="";return a})(Iw||{}),ns=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(ns||{}),Uu,TD=new Uint8Array(16),UD=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ol=[];for(let a=0;256>a;++a)Ol.push((a+256).toString(16).slice(1));var jz,Jw,Kw=0,Lw=0,Ck=function(a,d,n){n=d&&n||0;const R=
d||Array(16);a=a||{};let ea=a.node||jz;var ka=void 0!==a.clockseq?a.clockseq:Jw;if(null==ea||null==ka){var ta=a.random||(a.rng||y)();null==ea&&(ea=jz=[ta[0]|1,ta[1],ta[2],ta[3],ta[4],ta[5]]);null==ka&&(ka=Jw=(ta[6]<<8|ta[7])&16383)}ta=void 0!==a.msecs?a.msecs:Date.now();let Ka=void 0!==a.nsecs?a.nsecs:Lw+1;const $a=ta-Kw+(Ka-Lw)/1E4;0>$a&&void 0===a.clockseq&&(ka=ka+1&16383);(0>$a||ta>Kw)&&void 0===a.nsecs&&(Ka=0);if(1E4<=Ka)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Kw=ta;Lw=
Ka;Jw=ka;ta+=122192928E5;a=(1E4*(ta&268435455)+Ka)%4294967296;R[n++]=a>>>24&255;R[n++]=a>>>16&255;R[n++]=a>>>8&255;R[n++]=a&255;a=ta/4294967296*1E4&268435455;R[n++]=a>>>8&255;R[n++]=a&255;R[n++]=a>>>24&15|16;R[n++]=a>>>16&255;R[n++]=ka>>>8|128;R[n++]=ka&255;for(ka=0;6>ka;++ka)R[n+ka]=ea[ka];return d||X(R)},Xh=class{static clamp(a,d,n){return Math.max(d,"undefined"!==typeof n?Math.min(a,n):a)}static clampV(a,d,n){return a.map(R=>n?Xh.clamp(R,d,n):Xh.clamp(R,d))}static cross(a,d,n){return(d[0]-a[0])*
(n[1]-a[1])-(n[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},Xd=Xh;Xd.neg=a=>[-a[0],-a[1]];Xd.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];Xd.addScalar=(a,d)=>[a[0]+d,a[1]+d];Xd.sub=(a,d)=>[a[0]-d[0],a[1]-d[1]];Xd.subScalar=(a,d)=>[a[0]-d,a[1]-d];Xd.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];Xd.mul=(a,d)=>[a[0]*d,a[1]*d];Xd.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];Xd.div=(a,d)=>[a[0]/d,a[1]/d];Xd.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];Xd.per=a=>[a[1],-a[0]];Xd.dpr=(a,d)=>a[0]*d[0]+a[1]*
d[1];Xd.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];Xd.len2=a=>a[0]*a[0]+a[1]*a[1];Xd.len=a=>Math.hypot(a[0],a[1]);Xd.pry=(a,d)=>Xh.dpr(a,d)/Xh.len(d);Xd.uni=a=>Xh.div(a,Xh.len(a));Xd.normalize=a=>Xh.uni(a);Xd.tangent=(a,d)=>Xh.uni(Xh.sub(a,d));Xd.dist2=(a,d)=>Xh.len2(Xh.sub(a,d));Xd.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);Xd.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let n=1/Math.max(d[0],d[1]);n*=1.29289-(d[0]+d[1])*n*.29289;return[a[0]*n,a[1]*n]};Xd.ang=(a,d)=>Math.atan2(Xh.cpr(a,
d),Xh.dpr(a,d));Xd.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);Xd.med=(a,d)=>Xh.mul(Xh.add(a,d),.5);Xd.rot=(a,d=0)=>[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];Xd.rotWith=(a,d,n=0)=>{if(0===n)return a;const R=Math.sin(n);n=Math.cos(n);const ea=a[0]-d[0];a=a[1]-d[1];return[ea*n-a*R+d[0],ea*R+a*n+d[1]]};Xd.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];Xd.lrp=(a,d,n)=>Xh.add(a,Xh.mul(Xh.sub(d,a),n));Xd.int=(a,d,n,R,ea=1)=>{n=(Xh.clamp(n,R)-n)/(R-n);return Xh.add(Xh.mul(a,1-n),Xh.mul(d,
ea))};Xd.ang3=(a,d,n)=>{a=Xh.vec(d,a);d=Xh.vec(d,n);return Xh.ang(a,d)};Xd.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];Xd.rescale=(a,d)=>{const n=Xh.len(a);return[d*a[0]/n,d*a[1]/n]};Xd.isLeft=(a,d,n)=>(d[0]-a[0])*(n[1]-a[1])-(n[0]-a[0])*(d[1]-a[1]);Xd.clockwise=(a,d,n)=>0<Xh.isLeft(a,d,n);Xd.toFixed=a=>a.map(d=>Math.round(100*d)/100);Xd.nearestPointOnLineThroughPoint=(a,d,n)=>Xh.add(a,Xh.mul(d,Xh.pry(Xh.sub(n,a),d)));Xd.distanceToLineThroughPoint=(a,d,n)=>Xh.dist(n,Xh.nearestPointOnLineThroughPoint(a,
d,n));Xd.nearestPointOnLineSegment=(a,d,n,R=!0)=>{const ea=Xh.uni(Xh.sub(d,a));n=Xh.add(a,Xh.mul(ea,Xh.pry(Xh.sub(n,a),ea)));if(R){if(n[0]<Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(n[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(n[1]<Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(n[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return n};Xd.distanceToLineSegment=(a,d,n,R=!0)=>Xh.dist(n,Xh.nearestPointOnLineSegment(a,d,n,R));Xd.nudge=(a,d,n)=>Xh.isEqual(a,d)?a:Xh.add(a,Xh.mul(Xh.uni(Xh.sub(d,a)),n));
Xd.nudgeAtAngle=(a,d,n)=>[Math.cos(d)*n+a[0],Math.sin(d)*n+a[1]];Xd.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];Xd.pointsBetween=(a,d,n=6)=>Array.from(Array(n)).map((R,ea)=>{R=ea/(n-1);ea=Math.min(1,.5+Math.abs(.5-R));return[...Xh.lrp(a,d,R),ea]});Xd.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);Xd.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};Xd.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];Xd.min=(...a)=>[Math.min(...a.map(d=>d[0])),
Math.min(...a.map(d=>d[1]))];var ye=Xd,Zf=class{static getRectangleSides(a,d,n=0){const R=[a[0]+d[0]/2,a[1]+d[1]/2],ea=Xd.rotWith(a,R,n),ka=Xd.rotWith(Xd.add(a,[d[0],0]),R,n),ta=Xd.rotWith(Xd.add(a,d),R,n);a=Xd.rotWith(Xd.add(a,[0,d[1]]),R,n);return[["top",[ea,ka]],["right",[ka,ta]],["bottom",[ta,a]],["left",[a,ea]]]}static getBoundsSides(a){return Zf.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+
2*d,height:a.height+2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return Zf.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let n=Infinity,R=Infinity,ea=
-Infinity,ka=-Infinity;if(2>a.length)R=n=0,ka=ea=1;else for(const ta of a)n=Math.min(ta[0],n),R=Math.min(ta[1],R),ea=Math.max(ta[0],ea),ka=Math.max(ta[1],ka);return 0!==d?Zf.getBoundsFromPoints(a.map(ta=>Xd.rotWith(ta,[(n+ea)/2,(R+ka)/2],d))):{minX:n,minY:R,maxX:ea,maxY:ka,width:Math.max(1,ea-n),height:Math.max(1,ka-R)}}static centerBounds(a,d){const n=Zf.getBoundsCenter(a);return Zf.translateBounds(a,[d[0]-n[0],d[1]-n[1]])}static snapBoundsToGrid(a,d){const n=Math.round(a.minX/d)*d,R=Math.round(a.minY/
d)*d,ea=Math.round(a.maxX/d)*d;a=Math.round(a.maxY/d)*d;return{minX:n,minY:R,maxX:ea,maxY:a,width:Math.max(1,ea-n),height:Math.max(1,a-R)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+d[1],maxX:a.maxX+d[0],maxY:a.maxY+d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const n=Zf.getBoundsCenter(a);return Zf.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[n[0]*d,n[1]*d])}static divideBounds(a,d){const n=Zf.getBoundsCenter(a);
return Zf.centerBounds({minX:a.minX/d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[n[0]/d,n[1]/d])}static getRotatedBounds(a,d=0){a=Zf.getRotatedCorners(a,d);let n=d=Infinity,R=-Infinity,ea=-Infinity;for(const ka of a)d=Math.min(ka[0],d),n=Math.min(ka[1],n),R=Math.max(ka[0],R),ea=Math.max(ka[1],ea);return{minX:d,minY:n,maxX:R,maxY:ea,width:Math.max(1,R-d),height:Math.max(1,ea-n),rotation:0}}static getRotatedEllipseBounds(a,d,n,R,ea=0){var ka=Math.cos(ea);const ta=
Math.sin(ea);ea=Math.hypot(n*ka,R*ta);ka=Math.hypot(n*ta,R*ka);return{minX:a+n-ea,minY:d+R-ka,maxX:a+n+ea,maxY:d+R+ka,width:2*ea,height:2*ka}}static getExpandedBounds(a,d){const n=Math.min(a.minX,d.minX),R=Math.min(a.minY,d.minY),ea=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:n,minY:R,maxX:ea,maxY:a,width:Math.abs(ea-n),height:Math.abs(a-R)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let n=1;n<a.length;n++)d=Zf.getExpandedBounds(d,a[n]);return d}static getRotatedCorners(a,
d=0){const n=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(R=>Xd.rotWith(R,n,d)):a}static getTransformedBoundingBox(a,d,n,R=0,ea=!1){const [ka,ta]=[a.minX,a.minY],[Ka,$a]=[a.maxX,a.maxY];let [mb,ub]=[a.minX,a.minY],[zb,ec]=[a.maxX,a.maxY];if("center"===d)return{minX:mb+n[0],minY:ub+n[1],maxX:zb+n[0],maxY:ec+n[1],width:zb-mb,height:ec-ub,scaleX:1,scaleY:1};const [ic,bc]=Xd.rot(n,-R);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":ub+=
bc;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":ec+=bc}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":mb+=ic;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":zb+=ic}var Lc=Ka-ka;const $c=$a-ta;var tc=(zb-mb)/Lc,Tc=(ec-ub)/$c;a=0>tc;n=0>Tc;var Oc=Math.abs(zb-mb),ld=Math.abs(ec-ub);if(ea)switch(ea=Lc/$c,Lc=ea<Oc/ld,Tc=1/ea*(0>Tc?1:-1)*Oc,tc=ld*(0>tc?1:-1)*ea,d){case "top_left_corner":Lc?ub=ec+Tc:mb=zb+tc;break;case "top_right_corner":Lc?
ub=ec+Tc:zb=mb-tc;break;case "bottom_right_corner":Lc?ec=ub-Tc:zb=mb-tc;break;case "bottom_left_corner":Lc?ec=ub-Tc:mb=zb+tc;break;case "bottom_edge":case "top_edge":Oc=(mb+zb)/2;ld*=ea;mb=Oc-ld/2;zb=Oc+ld/2;break;case "left_edge":case "right_edge":ld=(ub+ec)/2,Oc/=ea,ub=ld-Oc/2,ec=ld+Oc/2}if(0!==R%(2*Math.PI)){Oc=[0,0];ld=Xd.med([ka,ta],[Ka,$a]);tc=Xd.med([mb,ub],[zb,ec]);switch(d){case "top_left_corner":Oc=Xd.sub(Xd.rotWith([zb,ec],tc,R),Xd.rotWith([Ka,$a],ld,R));break;case "top_right_corner":Oc=
Xd.sub(Xd.rotWith([mb,ec],tc,R),Xd.rotWith([ka,$a],ld,R));break;case "bottom_right_corner":Oc=Xd.sub(Xd.rotWith([mb,ub],tc,R),Xd.rotWith([ka,ta],ld,R));break;case "bottom_left_corner":Oc=Xd.sub(Xd.rotWith([zb,ub],tc,R),Xd.rotWith([Ka,ta],ld,R));break;case "top_edge":Oc=Xd.sub(Xd.rotWith(Xd.med([mb,ec],[zb,ec]),tc,R),Xd.rotWith(Xd.med([ka,$a],[Ka,$a]),ld,R));break;case "left_edge":Oc=Xd.sub(Xd.rotWith(Xd.med([zb,ub],[zb,ec]),tc,R),Xd.rotWith(Xd.med([Ka,ta],[Ka,$a]),ld,R));break;case "bottom_edge":Oc=
Xd.sub(Xd.rotWith(Xd.med([mb,ub],[zb,ub]),tc,R),Xd.rotWith(Xd.med([ka,ta],[Ka,ta]),ld,R));break;case "right_edge":Oc=Xd.sub(Xd.rotWith(Xd.med([mb,ub],[mb,ec]),tc,R),Xd.rotWith(Xd.med([ka,ta],[ka,$a]),ld,R))}[mb,ub]=Xd.sub([mb,ub],Oc);[zb,ec]=Xd.sub([zb,ec],Oc)}zb<mb&&([zb,mb]=[mb,zb]);ec<ub&&([ec,ub]=[ub,ec]);return{minX:mb,minY:ub,maxX:zb,maxY:ec,width:zb-mb,height:ec-ub,scaleX:(zb-mb)/(Ka-ka||1)*(a?-1:1),scaleY:(ec-ub)/($a-ta||1)*(n?-1:1)}}static getTransformAnchor(a,d,n){let R=a;switch(a){case "top_left_corner":R=
d&&n?"bottom_right_corner":d?"top_right_corner":n?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":R=d&&n?"bottom_left_corner":d?"top_left_corner":n?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":R=d&&n?"top_left_corner":d?"bottom_left_corner":n?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":R=d&&n?"top_right_corner":d?"bottom_right_corner":n?"top_left_corner":"top_right_corner"}return R}static getRelativeTransformedBoundingBox(a,
d,n,R,ea){R=a.minX+(R?d.maxX-n.maxX:n.minX-d.minX)/d.width*a.width;ea=a.minY+(ea?d.maxY-n.maxY:n.minY-d.minY)/d.height*a.height;const ka=n.width/d.width*a.width;a=n.height/d.height*a.height;return{minX:R,minY:ea,maxX:R+ka,maxY:ea+a,width:ka,height:a}}static getRotatedSize(a,d){const n=Xd.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(R=>Xd.rotWith(R,n,d));a=Zf.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=
Zf.getBoundsCenter(a);return Mf(we({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=[Infinity,Infinity];a.forEach(n=>{d[0]=Math.min(d[0],n[0]);d[1]=Math.min(d[1],n[1])});return d}static getTLSnapPoints(a,d,n){const R=we({},a);a=[0,0];const ea=[],ka={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},ta=["midX","minX","maxX"],Ka=["midY","minY","maxY"];d=d.map(ec=>
{const ic=ta.flatMap((Lc,$c)=>ta.map((tc,Tc)=>{const Oc=R[Lc]-ec[tc];return{f:Lc,t:tc,gap:Oc,distance:Math.abs(Oc),isCareful:0===$c||3===$c+Tc}})),bc=Ka.flatMap((Lc,$c)=>Ka.map((tc,Tc)=>{const Oc=R[Lc]-ec[tc];return{f:Lc,t:tc,gap:Oc,distance:Math.abs(Oc),isCareful:0===$c||3===$c+Tc}}));return[ec,ic,bc]});let $a=Infinity,mb=Infinity,ub=Infinity,zb=Infinity;d.forEach(([,ec,ic])=>{ec.forEach(bc=>{bc.distance<n&&bc.distance<ub&&(ub=bc.distance,$a=bc.gap)});ic.forEach(bc=>{bc.distance<n&&bc.distance<zb&&
(zb=bc.distance,mb=bc.gap)})});d.forEach(([ec,ic,bc])=>{Infinity!==$a&&ic.forEach(Lc=>{2>Math.abs(Lc.gap-$a)&&(ka[Lc.f]=Mf(we({},ka[Lc.f]),{isSnapped:!0,to:ec[Lc.t],B:ec,distance:Lc.distance}))});Infinity!==mb&&bc.forEach(Lc=>{2>Math.abs(Lc.gap-mb)&&(ka[Lc.f]=Mf(we({},ka[Lc.f]),{isSnapped:!0,to:ec[Lc.t],B:ec,distance:Lc.distance}))})});a[0]=Infinity===$a?0:$a;a[1]=Infinity===mb?0:mb;R.minX-=a[0];R.midX-=a[0];R.maxX-=a[0];R.minY-=a[1];R.midY-=a[1];R.maxY-=a[1];ta.forEach(ec=>{ec=ka[ec];if(ec.isSnapped){var {id:ic,
B:bc}=ec;ec=R[ic];ea.push("minX"===ic?[[ec,R.midY],[ec,bc.minY],[ec,bc.maxY]]:[[ec,R.minY],[ec,R.maxY],[ec,bc.minY],[ec,bc.maxY]])}});Ka.forEach(ec=>{ec=ka[ec];if(ec.isSnapped){var {id:ic,B:bc}=ec;ec=R[ic];ea.push("midY"===ic?[[R.midX,ec],[bc.minX,ec],[bc.maxX,ec]]:[[R.minX,ec],[R.maxX,ec],[bc.minX,ec],[bc.maxX,ec]])}});return{offset:a,snapLines:ea}}static ensureRatio(a,d){const {width:n,height:R}=a,ea=we({},a);n/R<d?(ea.width=R*d,ea.maxX+=n-a.width):(ea.height=n/d,ea.maxY+=R-a.height);return ea}static getDistributions(a,
d){var n=a.map(ka=>{const ta=ka.getBounds();return{id:ka.id,point:[ta.minX,ta.minY],bounds:ta,center:ka.getCenter()}});a=n.length;var R=Zf.getCommonBounds(n.map(({bounds:ka})=>ka));const ea=[];switch(d){case "horizontal":d=n.reduce((ka,ta)=>ka+ta.bounds.width,0);if(d>R.width){const ka=n.sort((mb,ub)=>mb.bounds.minX-ub.bounds.minX)[0],ta=n.sort((mb,ub)=>ub.bounds.maxX-mb.bounds.maxX)[0];R=n.filter(mb=>mb!==ka&&mb!==ta).sort((mb,ub)=>mb.center[0]-ub.center[0]);const Ka=(ta.center[0]-ka.center[0])/(a-
1),$a=ka.center[0]+Ka;R.forEach(({id:mb,point:ub,bounds:zb},ec)=>{ea.push({id:mb,prev:ub,next:[$a+Ka*ec-zb.width/2,zb.minY]})})}else{n=n.sort((Ka,$a)=>Ka.center[0]-$a.center[0]);let ka=R.minX;const ta=(R.width-d)/(a-1);n.forEach(({id:Ka,point:$a,bounds:mb})=>{ea.push({id:Ka,prev:$a,next:[ka,mb.minY]});ka+=mb.width+ta})}break;case "vertical":if(d=n.reduce((ka,ta)=>ka+ta.bounds.height,0),d>R.height){const ka=n.sort((mb,ub)=>mb.bounds.minY-ub.bounds.minY)[0],ta=n.sort((mb,ub)=>ub.bounds.maxY-mb.bounds.maxY)[0];
R=n.filter(mb=>mb!==ka&&mb!==ta).sort((mb,ub)=>mb.center[1]-ub.center[1]);const Ka=(ta.center[1]-ka.center[1])/(a-1),$a=ka.center[1]+Ka;R.forEach(({id:mb,point:ub,bounds:zb},ec)=>{ea.push({id:mb,prev:ub,next:[zb.minX,$a+Ka*ec-zb.height/2]})})}else{n=n.sort((Ka,$a)=>Ka.center[1]-$a.center[1]);let ka=R.minY;const ta=(R.height-d)/(a-1);n.forEach(({id:Ka,point:$a,bounds:mb})=>{ea.push({id:Ka,prev:$a,next:[mb.minX,ka]});ka+=mb.height+ta})}}return ea}static getPackedDistributions(a){const d=Zf.getCommonBounds(a.map(({bounds:ea})=>
ea)),n=[d.minX,d.minY],R=Object.fromEntries(a.map(ea=>[ea.id,[ea.bounds.minX,ea.bounds.minY]]));a=a.filter(ea=>{var ka,ta,Ka,$a;return!((null==(ta=null==(ka=ea.props.handles)?void 0:ka.start)?0:ta.bindingId)||(null==($a=null==(Ka=ea.props.handles)?void 0:Ka.end)?0:$a.bindingId))}).map(ea=>{const ka=ea.getBounds();return{id:ea.id,w:ka.width+16,h:ka.height+16,x:ka.minX,y:ka.minY}});C(a);return a.map(({id:ea,x:ka,y:ta})=>({id:ea,prev:R[ea],next:[ka+n[0],ta+n[1]]}))}},nr=class{static pointInCircle(a,
d,n){return Xd.dist(a,d)<=n}static pointInEllipse(a,d,n,R,ea=0){ea=ea||0;var ka=Math.cos(ea);ea=Math.sin(ea);d=Xd.sub(a,d);a=ka*d[0]+ea*d[1];ka=ea*d[0]-ka*d[1];return 1>=a*a/(n*n)+ka*ka/(R*R)}static pointInRect(a,d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let n=0;d.forEach((R,ea)=>{ea=d[(ea+1)%d.length];R[1]<=a[1]?ea[1]>a[1]&&0<Xd.cross(R,ea,a)&&(n+=1):ea[1]<=a[1]&&0>Xd.cross(R,ea,a)&&--n});return 0!==n}static pointInBounds(a,d){return!(a[0]<d.minX||
a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,n=3){for(let R=1;R<d.length;R++)if(Xd.distanceToLineSegment(d[R-1],d[R],a)<n)return!0;return!1}static _getSqSegDist(a,d,n){let R=d[0];d=d[1];let ea=n[0]-R,ka=n[1]-d;if(0!==ea||0!==ka){const ta=((a[0]-R)*ea+(a[1]-d)*ka)/(ea*ea+ka*ka);1<ta?(R=n[0],d=n[1]):0<ta&&(R+=ea*ta,d+=ka*ta)}ea=a[0]-R;ka=a[1]-d;return ea*ea+ka*ka}static _simplifyStep(a,d,n,R,ea){let ka=R,ta=-1;for(let Ka=d+1;Ka<n;Ka++){const $a=nr._getSqSegDist(a[Ka],a[d],a[n]);
$a>ka&&(ta=Ka,ka=$a)}-1<ta&&ka>R&&(1<ta-d&&nr._simplifyStep(a,d,ta,R,ea),ea.push(a[ta]),1<n-ta&&nr._simplifyStep(a,ta,n,R,ea))}static simplify2(a,d=1){if(2>=a.length)return a;d*=d;var n=a[0],R=a[1];const ea=[n];for(let ka=1,ta=a.length;ka<ta;ka++)R=a[ka],(R[0]-n[0])*(R[0]-n[0])+(R[1]-n[1])*(R[1]-n[1])>d&&(ea.push(R),n=R);n!==R&&ea.push(R);n=ea.length-1;R=[ea[0]];nr._simplifyStep(ea,0,n,d,R);R.push(ea[n],a[a.length-1]);return R}static pointNearToPolyline(a,d,n=8){const R=d.length;for(let ea=1;ea<R;ea++)if(Xd.distanceToLineSegment(d[ea-
1],d[ea],a)<n)return!0;return!1}},Ok=nr;yb(Ok,"simplify",(a,d=1)=>{var n=a.length;const R=a[0],ea=a[n-1],[ka,ta]=R,[Ka,$a]=ea;if(2<n){let mb=0,ub=0;const zb=Xd.len2([$a-ta,Ka-ka]);for(let ec=1;ec<n-1;ec++){const [ic,bc]=a[ec],Lc=Math.pow(ic*($a-ta)+ka*(bc-$a)+Ka*(ta-bc),2)/zb;mb>Lc||(mb=Lc,ub=ec)}if(mb>d)return n=nr.simplify(a.slice(0,ub+1),d),a=nr.simplify(a.slice(ub+1),d),n.concat(a.slice(1))}return[R,ea]});var Kn=Math.PI,Mo=Kn/2,ol=2*Kn,Vu={},Wu={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",
right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Pl=class{static circleFromThreePoints(a,d,n){const [R,ea]=a,[ka,ta]=d,[Ka,$a]=n;d=R*(ta-$a)-ea*(ka-Ka)+ka*$a-Ka*ta;a=-((R*R+ea*ea)*($a-ta)+(ka*ka+
ta*ta)*(ea-$a)+(Ka*Ka+$a*$a)*(ta-ea))/(2*d);d=-((R*R+ea*ea)*(ka-Ka)+(ka*ka+ta*ta)*(Ka-R)+(Ka*Ka+$a*$a)*(R-ka))/(2*d);return[a,d,Math.hypot(a-R,d-ea)]}static perimeterOfEllipse(a,d){const n=Math.pow(a-d,2)/Math.pow(a+d,2);return Kn*(a+d)*(1+3*n/(10+Math.sqrt(4-3*n)))}static shortAngleDist(a,d){a=(d-a)%ol;return 2*a%ol-a}static longAngleDist(a,d){return ol-Pl.shortAngleDist(a,d)}static lerpAngles(a,d,n){return a+Pl.shortAngleDist(a,d)*n}static angleDelta(a,d){return Pl.shortAngleDist(a,d)}static getSweep(a,
d,n){return Pl.angleDelta(ye.angle(a,d),ye.angle(a,n))}static clampRadians(a){return(ol+a)%ol}static snapAngleToSegments(a,d){d=ol/d;a=Math.floor((Pl.clampRadians(a)+d/2)/d)*d%ol;a<Kn&&(a+=ol);a>Kn&&(a-=ol);return a}static isAngleBetween(a,d,n){if(n===a||n===d)return!0;d=(d-a+Mo)%Mo;return d<=Kn!==(n-a+Mo)%Mo>d}static degreesToRadians(a){return a*Kn/180}static radiansToDegrees(a){return 180*a/Kn}static getArcLength(a,d,n,R){a=Pl.getSweep(a,n,R);return a/ol*ol*d}static getSweepFlag(a,d,n){n=ye.angle(a,
n);return 0<(ye.angle(a,d)-n+3*Kn)%ol-Kn?0:1}static getLargeArcFlag(a,d,n){a=ye.angle(n,a);d=(ye.angle(n,d)-a+3*Kn)%ol-Kn;return Math.abs(d)>Mo?0:1}static getArcDashOffset(a,d,n,R,ea){const ka=Pl.getSweepFlag(a,n,R);d=Pl.getArcLength(a,d,n,R);return-(0>ka?d:ol*a[2]-d)/2+ea}static getEllipseDashOffset(a,d){return-(ol*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},cl=class{static getPolygonCentroid(a){var d=
a.map(n=>n[0]);a=a.map(n=>n[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+Math.max(...a);return[d?d/2:0,a?a/2:0]}};yb(cl,"getEdges",a=>{const d=a.length;return a.map((n,R)=>[n,a[(R+1)%d]])});yb(cl,"getEdgeOutwardNormal",(a,d)=>ye.per(ye.uni(ye.sub(d,a))));yb(cl,"getEdgeInwardNormal",(a,d)=>ye.neg(cl.getEdgeOutwardNormal(a,d)));yb(cl,"getOffsetEdge",(a,d,n)=>{n=ye.mul(ye.per(ye.uni(ye.sub(d,a))),n);return[ye.add(a,n),ye.add(d,n)]});yb(cl,"getOffsetEdges",(a,d)=>a.map(([n,R])=>cl.getOffsetEdge(n,
R,d)));yb(cl,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[ye.add(a,[-d,-d]),ye.add(a,[d,-d]),ye.add(a,[d,d]),ye.add(a,[-d,d])];if(2===a.length){const [n,R]=a;return[...cl.getOffsetEdge(n,R,d),...cl.getOffsetEdge(R,n,d)]}return cl.getOffsetEdges(cl.getEdges(a),d).flatMap((n,R,ea)=>{{R=ea[(R+1)%ea.length];const ka=Xd.slope(n[0],n[1]);ea=Xd.slope(R[0],R[1]);ka!==ea?Number.isNaN(ka)&&!Number.isNaN(ea)?n=[n[0][0],(n[0][0]-R[0][0])*
ea+R[0][1]]:Number.isNaN(ea)&&!Number.isNaN(ka)?n=[R[0][0],(R[0][0]-n[0][0])*ka+n[0][1]]:(n=(ka*n[0][0]-ea*R[0][0]+R[0][1]-n[0][1])/(ka-ea),n=[n,ea*(n-R[0][0])+R[0][1]]):n=void 0}if(void 0===n)throw Error("Expected an intersection");return n})});yb(cl,"getPolygonVertices",(a,d,n=0,R=1)=>{a=ye.div(a,2);const [ea,ka]=[Math.max(1,a[0]-n),Math.max(1,a[1]-n)];n=[];for(let mb=0,ub=ol/d;mb<d;mb++){var ta=(-Mo+mb*ub)%ol,Ka=(-Mo+(mb+1)*ub)%ol;ta=ye.add(a,[ea*Math.cos(ta),ka*Math.sin(ta)]);Ka=ye.add(a,[ea*
Math.cos(Ka),ka*Math.sin(Ka)]);var $a=ye.med(ta,Ka);$a=ye.nudge($a,a,ye.dist(a,$a)*(1-R));n.push(ta,$a,Ka)}return n});yb(cl,"getTriangleVertices",(a,d=0,n=1)=>{const [R,ea]=a;var ka=1-n;a=[R/2,d/2];n=[R-d,ea-d];d=[d/2,ea-d];const ta=cl.getPolygonCentroid([a,n,d]),Ka=ye.med(a,n),$a=ye.med(n,d),mb=ye.med(d,a),ub=ye.dist(Ka,ta)*ka,zb=ye.dist($a,ta)*ka;ka*=ye.dist(mb,ta);return[a,ub?ye.nudge(Ka,ta,ub):Ka,n,zb?ye.nudge($a,ta,zb):$a,d,ka?ye.nudge(mb,ta,ka):mb]});yb(cl,"getStarVertices",(a,d,n,R=1)=>{const ea=
ye.div(d,2),ka=ye.mul(ea,R/2),ta=ol/n/2;return Array.from(Array(2*n)).map((Ka,$a)=>{Ka=-Mo+$a*ta;const [mb,ub]=$a%2?ka:ea;return ye.add(a,[mb*Math.cos(Ka),ub*Math.sin(Ka)])})});var Mw=class{static getCurvedPathForPolygon(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],n=a.length;for(let R=1;R<n;R++){const [ea,ka]=a[R],[ta,Ka]=a[(R+1)%n];d.push(ea,ka,(ea+ta)/2,(ka+Ka)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>
a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],n=a.length;for(let R=1;R<n-1;R++){const [ea,ka]=a[R],[ta,Ka]=a[R+1];d.push(ea,ka,(ea+ta)/2,(ka+Ka)/2)}return d.join(" ")}static getSvgPathFromStroke(a,d=!0){const n=a.length;if(4>n)return"";let R=a[0],ea=a[1];var ka=a[2];ka=`M${R[0].toFixed(2)},${R[1].toFixed(2)} Q${ea[0].toFixed(2)},${ea[1].toFixed(2)} ${((ea[0]+ka[0])/2).toFixed(2)},${((ea[1]+ka[1])/2).toFixed(2)} T`;for(let ta=2,Ka=n-1;ta<
Ka;ta++)R=a[ta],ea=a[ta+1],ka+=`${((R[0]+ea[0])/2).toFixed(2)},${((R[1]+ea[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}static getSvgPathFromStrokePoints(a,d=!1){const n=a.length;if(4>n)return"";let R=a[0].point,ea=a[1].point;var ka=a[2].point;ka=`M${R[0].toFixed(2)},${R[1].toFixed(2)} Q${ea[0].toFixed(2)},${ea[1].toFixed(2)} ${((ea[0]+ka[0])/2).toFixed(2)},${((ea[1]+ka[1])/2).toFixed(2)} T`;for(let ta=2,Ka=n-1;ta<Ka;ta++)R=a[ta].point,ea=a[ta+1].point,ka+=`${((R[0]+ea[0])/2).toFixed(2)},${((R[1]+
ea[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}};yb(Mw,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var VD={},WD=Object.assign,Xu=Object.getOwnPropertyDescriptor,mp=Object.defineProperty,Ft=Object.prototype,Nw=[];Object.freeze(Nw);var Ow={};Object.freeze(Ow);var XD="undefined"!==typeof Proxy,YD=Object.toString(),os=function(){},kz="undefined"!==typeof Object.getOwnPropertySymbols,Yu="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:kz?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:
Object.getOwnPropertyNames,ZD=Object.getOwnPropertyDescriptors||function(a){var d={};Yu(a).forEach(function(n){d[n]=Xu(a,n)});return d},ko=Symbol("mobx-stored-annotations"),Uh=Symbol("mobx administration"),Gt=function(){function a(n){void 0===n&&(n="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=uj.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=n}var d=a.prototype;d.onBO=
function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};d.reportObserved=function(){return jb(this)};d.reportChanged=function(){Ob();wb(this);Eb()};d.toString=function(){return this.name_};return a}(),Pw=I("Atom",Gt),ps={identity:function(a,d){return a===d},structural:function(a,d){return ua(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,
d){return ua(a,d,1)}},$D="override",aE=Ca(),Ht={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Ht);var lz=kb("observable"),bE=kb("observable.ref",{enhancer:Ma}),cE=kb("observable.shallow",{enhancer:function(a,d,n){if(void 0===a||null===a||Vd(a)||Pc(a)||iq(a)||qr(a))return a;if(Array.isArray(a))return jh.array(a,{name:n,deep:!1});if(N(a))return jh.object(a,void 0,{name:n,deep:!1});if(Q(a))return jh.map(a,{name:n,deep:!1});if(O(a))return jh.set(a,{name:n,deep:!1})}}),dE=kb("observable.struct",
{enhancer:function(a,d){return ua(a,d)?d:a}}),mz=xa(lz);Object.assign(ib,mz);var eE={box:function(a,d){d=d||Ht;return new or(a,Wa(d),d.name,!0,d.equals)},array:function(a,d){d=d||Ht;return(!1===ig.useProxies||!1===d.proxy?Qb:ab)(a,Wa(d),d.name)},map:function(a,d){d=d||Ht;return new wz(a,Wa(d),d.name)},set:function(a,d){d=d||Ht;return new xz(a,Wa(d),d.name)},object:function(a,d,n){if(!1===ig.useProxies||!1===(null==n?void 0:n.proxy))n=pd({},n);else{var R={},ea,ka;z();R=pd(R,n);n=null!=(ka=(ea=R[Uh]).proxy_)?
ka:ea.proxy_=new Proxy(R,tE)}return uc(n,a,d)},ref:xa(bE),shallow:xa(cE),deep:mz,struct:xa(dE)},jh=WD(ib,eE),nz=Ta("computed"),fE=Ta("computed.struct",{equals:ps.structural}),ph=function(a,d){if(H(d))return Ia(a,d,nz);if(N(a))return xa(Ta("computed",a));d=N(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new It(d)};Object.assign(ph,nz);ph.struct=xa(fE);var oz,pz,Zu=0,gE=1,hE=null!=(oz=null==(pz=Xu(function(){},"name"))?void 0:pz.configurable)?oz:!1,qz={value:"action",configurable:!0,writable:!1,
enumerable:!1};var iE=Symbol.toPrimitive;var or=function(a){function d(R,ea,ka,ta,Ka){void 0===ka&&(ka="ObservableValue");void 0===Ka&&(Ka=ps["default"]);ta=a.call(this,ka)||this;ta.enhancer=void 0;ta.hasUnreportedChange_=!1;ta.interceptors_=void 0;ta.changeListeners_=void 0;ta.value_=void 0;ta.dehancer=void 0;ta.enhancer=ea;ta.name_=ka;ta.equals=Ka;ta.value_=ea(R,void 0,ka);return ta}ha(d,a);var n=d.prototype;n.dehanceValue=function(R){return void 0!==this.dehancer?this.dehancer(R):R};n.set=function(R){R=
this.prepareNewValue_(R);R!==ig.UNCHANGED&&this.setNewValue_(R)};n.prepareNewValue_=function(R){if(lb(this)){R=Pa(this,{object:this,type:No,newValue:R});if(!R)return ig.UNCHANGED;R=R.newValue}R=this.enhancer(R,this.value_,this.name_);return this.equals(this.value_,R)?ig.UNCHANGED:R};n.setNewValue_=function(R){var ea=this.value_;this.value_=R;this.reportChanged();Db(this)&&Wb(this,{type:No,object:this,newValue:R,oldValue:ea})};n.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};
n.intercept_=function(R){return tb(this,R)};n.observe_=function(R,ea){ea&&R({observableKind:"value",debugObjectName:this.name_,object:this,type:No,newValue:this.value_,oldValue:void 0});return Fb(this,R)};n.raw=function(){return this.value_};n.toJSON=function(){return this.get()};n.toString=function(){return this.name_+"["+this.value_+"]"};n.valueOf=function(){return ia(this.get())};n[iE]=function(){return this.valueOf()};return d}(Gt),jE=I("ObservableValue",or);var kE=Symbol.toPrimitive;var It=function(){function a(n){this.dependenciesState_=
uj.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=uj.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new pr(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=qs.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=
void 0;n.get||f(31);this.derivation=n.get;this.name_=n.name||"ComputedValue";n.set&&(this.setter_=Xa("ComputedValue-setter",n.set));this.equals_=n.equals||(n.compareStructural||n.struct?ps.structural:ps["default"]);this.scope_=n.context;this.requiresReaction_=n.requiresReaction;this.keepAlive_=!!n.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){fb(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};
d.get=function(){this.isComputing_&&f(32,this.name_,this.derivation);if(0!==ig.inBatch||0!==this.observers_.size||this.keepAlive_){if(jb(this),Wc(this)){var n=ig.trackingContext;this.keepAlive_&&!n&&(ig.trackingContext=this);this.trackAndCompute()&&xb(this);ig.trackingContext=n}}else Wc(this)&&(this.warnAboutUntrackedRead_(),Ob(),this.value_=this.computeValue_(!1),Eb());n=this.value_;if(n instanceof pr)throw n.cause;return n};d.set=function(n){if(this.setter_){this.isRunningSetter_&&f(33,this.name_);
this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else f(34,this.name_)};d.trackAndCompute=function(){var n=this.value_,R=this.dependenciesState_===uj.NOT_TRACKING_,ea=this.computeValue_(!0);if(n=R||n instanceof pr||ea instanceof pr||!this.equals_(n,ea))this.value_=ea;return n};d.computeValue_=function(n){this.isComputing_=!0;var R=Yc(!1);if(n)var ea=Kc(this,this.derivation,this.scope_);else if(!0===ig.disableErrorBoundaries)ea=this.derivation.call(this.scope_);
else try{ea=this.derivation.call(this.scope_)}catch(ka){ea=new pr(ka)}ig.allowStateChanges=R;this.isComputing_=!1;return ea};d.suspend_=function(){this.keepAlive_||(Mc(this),this.value_=void 0)};d.observe_=function(n,R){var ea=this,ka=!0,ta=void 0;return mc(function(){var Ka=ea.get();if(!ka||R){var $a=Va();n({observableKind:"computed",debugObjectName:ea.name_,type:No,object:ea,newValue:Ka,oldValue:ta});ig.trackingDerivation=$a}ka=!1;ta=Ka})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+
"["+this.derivation.toString()+"]"};d.valueOf=function(){return ia(this.get())};d[kE]=function(){return this.valueOf()};return a}(),Jt=I("ComputedValue",It),uj;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(uj||={});var qs;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(qs||={});var pr=function(a){this.cause=void 0;this.cause=a},$u=function(){this.version=6;this.UNCHANGED=
{};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=
!0},av=!0,rz=!1,ig=function(){var a=G();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&(av=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new $u).version&&(av=!1);if(av){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED={}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new $u}setTimeout(function(){rz||f(35)},1);return new $u}(),rs=function(){function a(n,R,ea,ka){void 0===n&&(n="Reaction");this.requiresObservable_=this.errorHandler_=
this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=uj.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=qs.NONE;this.name_=n;this.onInvalidate_=R;this.errorHandler_=ea;this.requiresObservable_=ka}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ig.pendingReactions.push(this),
0<ig.inBatch||ig.isRunningReactions||bv(rb))};d.isScheduled=function(){return this.isScheduled_};d.runReaction_=function(){if(!this.isDisposed_){Ob();this.isScheduled_=!1;var n=ig.trackingContext;ig.trackingContext=this;if(Wc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(R){this.reportExceptionInDerivation_(R)}}ig.trackingContext=n;Eb()}};d.track=function(n){if(!this.isDisposed_){Ob();this.isRunning_=!0;var R=ig.trackingContext;ig.trackingContext=this;n=Kc(this,n,void 0);ig.trackingContext=
R;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Mc(this);n instanceof pr&&this.reportExceptionInDerivation_(n.cause);Eb()}};d.reportExceptionInDerivation_=function(n){var R=this;if(this.errorHandler_)this.errorHandler_(n,this);else{if(ig.disableErrorBoundaries)throw n;ig.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",n);ig.globalReactionErrorHandlers.forEach(function(ea){return ea(n,R)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||
(Ob(),Mc(this),Eb()))};d.getDisposer_=function(){var n=this.dispose.bind(this);n[Uh]=this;return n};d.toString=function(){return"Reaction["+this.name_+"]"};d.trace=function(n){void 0===n&&(n=!1);wc(this,n)};return a}(),lE=100,bv=function(a){return a()},cv=I("Reaction",rs),sz="action",tz=Ba(sz),mE=Ba("action.bound",{bound:!0}),uz=Ba("autoAction",{autoAction:!0}),nE=Ba("autoAction.bound",{autoAction:!0,bound:!0}),Og=Cc(!1);Object.assign(Og,tz);var Kt=Cc(!0);Object.assign(Kt,uz);Og.bound=xa(mE);Kt.bound=
xa(nE);var oE=function(a){return a()},pE="onBO",qE="onBUO",rE=0;Fc.prototype=Object.create(Error.prototype);var vz=oa("flow"),sE=oa("flow.bound",{bound:!0}),Lt=Object.assign(function(a,d){if(H(d))return Ia(a,d,vz);var n=a.name||"\x3cunnamed flow\x3e";d=function(){var R=arguments,ea=++rE,ka=Og(n+" - runid: "+ea+" - init",a).apply(this,R),ta,Ka=void 0;R=new Promise(function($a,mb){function ub(bc){Ka=void 0;try{var Lc=Og(n+" - runid: "+ea+" - yield "+ic++,ka.next).call(ka,bc)}catch($c){return mb($c)}ec(Lc)}
function zb(bc){Ka=void 0;try{var Lc=Og(n+" - runid: "+ea+" - yield "+ic++,ka["throw"]).call(ka,bc)}catch($c){return mb($c)}ec(Lc)}function ec(bc){if(V(null==bc?void 0:bc.then))bc.then(ec,mb);else{if(bc.done)return $a(bc.value);Ka=Promise.resolve(bc.value);return Ka.then(ub,zb)}}var ic=0;ta=mb;ub(void 0)});R.cancel=Og(n+" - runid: "+ea+" - cancel",function(){try{if(Ka){var $a=Ka;V($a.cancel)&&$a.cancel()}var mb=ka["return"](void 0),ub=Promise.resolve(mb.value);ub.then(os,os);V(ub.cancel)&&ub.cancel();
ta(new Fc)}catch(zb){ta(zb)}});return R};d.isMobXFlow=!0;return d},vz);Lt.bound=xa(sE);var tE={has:function(a,d){return a[Uh].has_(d)},get:function(a,d){return a[Uh].get_(d)},set:function(a,d,n){var R;return H(d)?null!=(R=a[Uh].set_(d,n,!0))?R:!0:!1},deleteProperty:function(a,d){var n;return H(d)?null!=(n=a[Uh].delete_(d,!0))?n:!0:!1},defineProperty:function(a,d,n){var R;return null!=(R=a[Uh].defineProperty_(d,n))?R:!0},ownKeys:function(a){return a[Uh].ownKeys_()},preventExtensions:function(a){f(13)}},
No="update",uE={get:function(a,d){var n=a[Uh];return d===Uh?n:"length"===d?n.getArrayLength_():"string"!==typeof d||isNaN(d)?W(dv,d)?dv[d]:a[d]:n.get_(parseInt(d))},set:function(a,d,n){var R=a[Uh];"length"===d&&R.setArrayLength_(n);"symbol"===typeof d||isNaN(d)?a[d]=n:R.set_(parseInt(d),n);return!0},preventExtensions:function(){f(15)}},Qw=function(){function a(n,R,ea,ka){void 0===n&&(n="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=
this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=ea;this.legacyMode_=ka;this.atom_=new Gt(n);this.enhancer_=function(ta,Ka){return R(ta,Ka,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};d.dehanceValues_=function(n){return void 0!==this.dehancer&&0<n.length?n.map(this.dehancer):n};d.intercept_=function(n){return tb(this,n)};d.observe_=function(n,R){void 0===R&&(R=!1);R&&n({observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Fb(this,n)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(n){("number"!==typeof n||isNaN(n)||0>n)&&f("Out of range: "+n);var R=this.values_.length;if(n!==R)if(n>R){for(var ea=Array(n-R),ka=0;ka<n-R;ka++)ea[ka]=void 0;this.spliceWithArray_(R,0,ea)}else this.spliceWithArray_(n,
R-n)};d.updateArrayLength_=function(n,R){n!==this.lastKnownLength_&&f(16);this.lastKnownLength_+=R;this.legacyMode_&&0<R&&yd(n+R+1)};d.spliceWithArray_=function(n,R,ea){var ka=this,ta=this.values_.length;void 0===n?n=0:n>ta?n=ta:0>n&&(n=Math.max(0,ta+n));R=1===arguments.length?ta-n:void 0===R||null===R?0:Math.max(0,Math.min(R,ta-n));void 0===ea&&(ea=Nw);if(lb(this)){var Ka=Pa(this,{object:this.proxy_,type:"splice",index:n,removedCount:R,added:ea});if(!Ka)return Nw;R=Ka.removedCount;ea=Ka.added}ea=
0===ea.length?ea:ea.map(function($a){return ka.enhancer_($a,void 0)});this.legacyMode_&&this.updateArrayLength_(ta,ea.length-R);ta=this.spliceItemsIntoValues_(n,R,ea);0===R&&0===ea.length||this.notifyArraySplice_(n,ea,ta);return this.dehanceValues_(ta)};d.spliceItemsIntoValues_=function(n,R,ea){if(1E4>ea.length){var ka;return(ka=this.values_).splice.apply(ka,[n,R].concat(ea))}ka=this.values_.slice(n,n+R);var ta=this.values_.slice(n+R);this.values_.length+=ea.length-R;for(R=0;R<ea.length;R++)this.values_[n+
R]=ea[R];for(R=0;R<ta.length;R++)this.values_[n+ea.length+R]=ta[R];return ka};d.notifyArrayChildUpdate_=function(n,R,ea){var ka=!this.owned_&&!1,ta=Db(this);n=ta||ka?{observableKind:"array",object:this.proxy_,type:No,debugObjectName:this.atom_.name_,index:n,newValue:R,oldValue:ea}:null;this.atom_.reportChanged();ta&&Wb(this,n)};d.notifyArraySplice_=function(n,R,ea){var ka=!this.owned_&&!1,ta=Db(this);n=ta||ka?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",
index:n,removed:ea,added:R,removedCount:ea.length,addedCount:R.length}:null;this.atom_.reportChanged();ta&&Wb(this,n)};d.get_=function(n){if(this.legacyMode_&&n>=this.values_.length)console.warn("[mobx] Out of bounds read: "+n);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])};d.set_=function(n,R){var ea=this.values_;this.legacyMode_&&n>ea.length&&f(17,n,ea.length);if(n<ea.length){var ka=ea[n];if(lb(this)){R=Pa(this,{type:No,object:this.proxy_,index:n,newValue:R});if(!R)return;
R=R.newValue}R=this.enhancer_(R,ka);R!==ka&&(ea[n]=R,this.notifyArrayChildUpdate_(n,R,ka))}else{n=Array(n+1-ea.length);for(ka=0;ka<n.length-1;ka++)n[ka]=void 0;n[n.length-1]=R;this.spliceWithArray_(ea.length,0,n)}};return a}(),dv={clear:function(){return this.splice(0)},replace:function(a){var d=this[Uh];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},splice:function(a,d){for(var n=arguments.length,R=Array(2<n?n-2:0),ea=2;ea<n;ea++)R[ea-2]=arguments[ea];n=this[Uh];
switch(arguments.length){case 0:return[];case 1:return n.spliceWithArray_(a);case 2:return n.spliceWithArray_(a,d)}return n.spliceWithArray_(a,d,R)},spliceWithArray:function(a,d,n){return this[Uh].spliceWithArray_(a,d,n)},push:function(){for(var a=this[Uh],d=arguments.length,n=Array(d),R=0;R<d;R++)n[R]=arguments[R];a.spliceWithArray_(a.values_.length,0,n);return a.values_.length},pop:function(){return this.splice(Math.max(this[Uh].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},
unshift:function(){for(var a=this[Uh],d=arguments.length,n=Array(d),R=0;R<d;R++)n[R]=arguments[R];a.spliceWithArray_(0,0,n);return a.values_.length},reverse:function(){ig.trackingDerivation&&f(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){ig.trackingDerivation&&f(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[Uh];a=d.dehanceValues_(d.values_).indexOf(a);return-1<a?(this.splice(a,1),!0):!1}};cb("concat",
Ra);cb("flat",Ra);cb("includes",Ra);cb("indexOf",Ra);cb("join",Ra);cb("lastIndexOf",Ra);cb("slice",Ra);cb("toString",Ra);cb("toLocaleString",Ra);cb("every",ob);cb("filter",ob);cb("find",ob);cb("findIndex",ob);cb("flatMap",ob);cb("forEach",ob);cb("map",ob);cb("some",ob);cb("reduce",Cb);cb("reduceRight",Cb);var vE=I("ObservableArrayAdministration",Qw),wE={};var xE=Symbol.iterator;var yE=Symbol.toStringTag;var wz=function(){function a(n,R,ea){var ka=this;void 0===R&&(R=Fa);void 0===ea&&(ea="ObservableMap");
this.name_=this.enhancer_=void 0;this[Uh]=wE;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=R;this.name_=ea;V(Map)||f(18);this.keysAtom_=eb("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;cc(!0,function(){ka.merge(n)})}var d=a.prototype;d.has_=function(n){return this.data_.has(n)};d.has=function(n){var R=this;if(!ig.trackingDerivation)return this.has_(n);var ea=this.hasMap_.get(n);if(!ea){var ka=ea=new or(this.has_(n),
Ma,"ObservableMap.key?",!1);this.hasMap_.set(n,ka);td(ka,function(){return R.hasMap_["delete"](n)})}return ea.get()};d.set=function(n,R){var ea=this.has_(n);if(lb(this)){R=Pa(this,{type:ea?No:"add",object:this,newValue:R,name:n});if(!R)return this;R=R.newValue}ea?this.updateValue_(n,R):this.addValue_(n,R);return this};d["delete"]=function(n){var R=this;if(lb(this)&&!Pa(this,{type:"delete",object:this,name:n}))return!1;if(this.has_(n)){var ea=Db(this),ka=ea?{observableKind:"map",debugObjectName:this.name_,
type:"delete",object:this,oldValue:this.data_.get(n).value_,name:n}:null;Vb(function(){var ta;R.keysAtom_.reportChanged();null==(ta=R.hasMap_.get(n))?void 0:ta.setNewValue_(!1);R.data_.get(n).setNewValue_(void 0);R.data_["delete"](n)});ea&&Wb(this,ka);return!0}return!1};d.updateValue_=function(n,R){var ea=this.data_.get(n);R=ea.prepareNewValue_(R);if(R!==ig.UNCHANGED){var ka=Db(this);n=ka?{observableKind:"map",debugObjectName:this.name_,type:No,object:this,oldValue:ea.value_,name:n,newValue:R}:null;
ea.setNewValue_(R);ka&&Wb(this,n)}};d.addValue_=function(n,R){var ea=this;Vb(function(){var Ka,$a=new or(R,ea.enhancer_,"ObservableMap.key",!1);ea.data_.set(n,$a);R=$a.value_;null==(Ka=ea.hasMap_.get(n))?void 0:Ka.setNewValue_(!0);ea.keysAtom_.reportChanged()});var ka=Db(this),ta=ka?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:n,newValue:R}:null;ka&&Wb(this,ta)};d.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)};
d.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var n=this,R=this.keys();return bb({next:function(){var ea=R.next(),ka=ea.done;ea=ea.value;return{done:ka,value:ka?void 0:n.get(ea)}}})};d.entries=function(){var n=this,R=this.keys();return bb({next:function(){var ea=R.next(),ka=ea.done;ea=ea.value;return{done:ka,value:ka?void 0:[ea,n.get(ea)]}}})};d[xE]=function(){return this.entries()};
d.forEach=function(n,R){for(var ea=sa(this),ka;!(ka=ea()).done;)ka=ka.value,n.call(R,ka[1],ka[0],this)};d.merge=function(n){var R=this;iq(n)&&(n=new Map(n));Vb(function(){N(n)?M(n).forEach(function(ea){return R.set(ea,n[ea])}):Array.isArray(n)?n.forEach(function(ea){return R.set(ea[0],ea[1])}):Q(n)?(n.constructor!==Map&&f(19,n),n.forEach(function(ea,ka){return R.set(ka,ea)})):null!==n&&void 0!==n&&f(20,n)});return this};d.clear=function(){var n=this;Vb(function(){Ua(function(){for(var R=sa(n.keys()),
ea;!(ea=R()).done;)n["delete"](ea.value)})})};d.replace=function(n){var R=this;Vb(function(){for(var ea=hd(n),ka=new Map,ta=!1,Ka=sa(R.data_.keys()),$a;!($a=Ka()).done;)if($a=$a.value,!ea.has($a))if(R["delete"]($a))ta=!0;else{var mb=R.data_.get($a);ka.set($a,mb)}for(ea=sa(ea.entries());!(Ka=ea()).done;)$a=Ka.value,Ka=$a[0],mb=$a[1],$a=R.data_.has(Ka),R.set(Ka,mb),R.data_.has(Ka)&&(mb=R.data_.get(Ka),ka.set(Ka,mb),$a||(ta=!0));if(!ta)if(R.data_.size!==ka.size)R.keysAtom_.reportChanged();else for(ta=
R.data_.keys(),ea=ka.keys(),Ka=ta.next(),$a=ea.next();!Ka.done;){if(Ka.value!==$a.value){R.keysAtom_.reportChanged();break}Ka=ta.next();$a=ea.next()}R.data_=ka});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(n,R){return Fb(this,n)};d.intercept_=function(n){return tb(this,n)};ba(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:yE,get:function(){return"Map"}}]);return a}(),
iq=I("ObservableMap",wz),zE={};var AE=Symbol.iterator;var BE=Symbol.toStringTag;var xz=function(){function a(n,R,ea){void 0===R&&(R=Fa);void 0===ea&&(ea="ObservableSet");this.name_=void 0;this[Uh]=zE;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=ea;V(Set)||f(22);this.atom_=eb(this.name_);this.enhancer_=function(ka,ta){return R(ka,ta,ea)};n&&this.replace(n)}var d=a.prototype;d.dehanceValue_=function(n){return void 0!==this.dehancer?
this.dehancer(n):n};d.clear=function(){var n=this;Vb(function(){Ua(function(){for(var R=sa(n.data_.values()),ea;!(ea=R()).done;)n["delete"](ea.value)})})};d.forEach=function(n,R){for(var ea=sa(this),ka;!(ka=ea()).done;)ka=ka.value,n.call(R,ka,ka,this)};d.add=function(n){var R=this;if(lb(this)&&!Pa(this,{type:"add",object:this,newValue:n}))return this;if(!this.has(n)){Vb(function(){R.data_.add(R.enhancer_(n,void 0));R.atom_.reportChanged()});var ea=Db(this),ka=ea?{observableKind:"set",debugObjectName:this.name_,
type:"add",object:this,newValue:n}:null;ea&&Wb(this,ka)}return this};d["delete"]=function(n){var R=this;if(lb(this)&&!Pa(this,{type:"delete",object:this,oldValue:n}))return!1;if(this.has(n)){var ea=Db(this),ka=ea?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:n}:null;Vb(function(){R.atom_.reportChanged();R.data_["delete"](n)});ea&&Wb(this,ka);return!0}return!1};d.has=function(n){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(n))};d.entries=
function(){var n=0,R=Array.from(this.keys()),ea=Array.from(this.values());return bb({next:function(){var ka=n;n+=1;return ka<ea.length?{value:[R[ka],ea[ka]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var n=this,R=0,ea=Array.from(this.data_.values());return bb({next:function(){return R<ea.length?{value:n.dehanceValue_(ea[R++]),done:!1}:{done:!0}}})};d.replace=function(n){var R=this;qr(n)&&(n=new Set(n));Vb(function(){Array.isArray(n)?
(R.clear(),n.forEach(function(ea){return R.add(ea)})):O(n)?(R.clear(),n.forEach(function(ea){return R.add(ea)})):null!==n&&void 0!==n&&f("Cannot initialize set from "+n)});return this};d.observe_=function(n,R){return Fb(this,n)};d.intercept_=function(n){return tb(this,n)};d.toJSON=function(){return Array.from(this)};d.toString=function(){return"[object ObservableSet]"};d[AE]=function(){return this.values()};ba(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:BE,
get:function(){return"Set"}}]);return a}(),qr=I("ObservableSet",xz),yz=Object.create(null),zz=function(){function a(n,R,ea,ka){void 0===R&&(R=new Map);void 0===ka&&(ka=aE);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=n;this.values_=R;this.name_=ea;this.defaultAnnotation_=ka;this.keysAtom_=new Gt("ObservableObject.keys");this.isPlainObject_=N(this.target_)}
var d=a.prototype;d.getObservablePropValue_=function(n){return this.values_.get(n).get()};d.setObservablePropValue_=function(n,R){var ea=this.values_.get(n);if(ea instanceof It)return ea.set(R),!0;if(lb(this)){R=Pa(this,{type:No,object:this.proxy_||this.target_,name:n,newValue:R});if(!R)return null;R=R.newValue}R=ea.prepareNewValue_(R);if(R!==ig.UNCHANGED){var ka=Db(this);n=ka?{type:No,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:ea.value_,name:n,newValue:R}:
null;ea.setNewValue_(R);ka&&Wb(this,n)}return!0};d.get_=function(n){ig.trackingDerivation&&!W(this.target_,n)&&this.has_(n);return this.target_[n]};d.set_=function(n,R,ea){void 0===ea&&(ea=!1);if(W(this.target_,n)){if(this.values_.has(n))return this.setObservablePropValue_(n,R);if(ea)return Reflect.set(this.target_,n,R);this.target_[n]=R;return!0}return this.extend_(n,{value:R,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,ea)};d.has_=function(n){if(!ig.trackingDerivation)return n in
this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var R=this.pendingKeys_.get(n);R||(R=new or(n in this.target_,Ma,"ObservableObject.key?",!1),this.pendingKeys_.set(n,R));return R.get()};d.make_=function(n,R){!0===R&&(R=this.defaultAnnotation_);if(!1!==R){if(!(n in this.target_)){var ea;if(null!=(ea=this.target_[ko])&&ea[n])return;f(1,R.annotationType_,this.name_+"."+n.toString())}for(ea=this.target_;ea&&ea!==Ft;){var ka=Xu(ea,n);if(ka){ka=R.make_(this,n,ka,ea);if(0===ka)return;if(1===ka)break}ea=
Object.getPrototypeOf(ea)}var ta;null==(ta=this.target_[ko])?!0:delete ta[n]}};d.extend_=function(n,R,ea,ka){void 0===ka&&(ka=!1);!0===ea&&(ea=this.defaultAnnotation_);if(!1===ea)return this.defineProperty_(n,R,ka);if(R=ea.extend_(this,n,R,ka)){var ta;null==(ta=this.target_[ko])?!0:delete ta[n]}return R};d.defineProperty_=function(n,R,ea){void 0===ea&&(ea=!1);try{Ob();var ka=this.delete_(n);if(!ka)return ka;if(lb(this)){var ta=Pa(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:R.value});
if(!ta)return null;var Ka=ta.newValue;R.value!==Ka&&(R=Y({},R,{value:Ka}))}if(ea){if(!Reflect.defineProperty(this.target_,n,R))return!1}else mp(this.target_,n,R);this.notifyPropertyAddition_(n,R.value)}finally{Eb()}return!0};d.defineObservableProperty_=function(n,R,ea,ka){void 0===ka&&(ka=!1);try{Ob();var ta=this.delete_(n);if(!ta)return ta;if(lb(this)){var Ka=Pa(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:R});if(!Ka)return null;R=Ka.newValue}var $a=Id(n),mb={configurable:ig.safeDescriptors?
this.isPlainObject_:!0,enumerable:!0,get:$a.get,set:$a.set};if(ka){if(!Reflect.defineProperty(this.target_,n,mb))return!1}else mp(this.target_,n,mb);var ub=new or(R,ea,"ObservableObject.key",!1);this.values_.set(n,ub);this.notifyPropertyAddition_(n,ub.value_)}finally{Eb()}return!0};d.defineComputedProperty_=function(n,R,ea){void 0===ea&&(ea=!1);try{Ob();var ka=this.delete_(n);if(!ka)return ka;if(lb(this)&&!Pa(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:void 0}))return null;R.name||
(R.name="ObservableObject.key");R.context=this.proxy_||this.target_;var ta=Id(n),Ka={configurable:ig.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:ta.get,set:ta.set};if(ea){if(!Reflect.defineProperty(this.target_,n,Ka))return!1}else mp(this.target_,n,Ka);this.values_.set(n,new It(R));this.notifyPropertyAddition_(n,void 0)}finally{Eb()}return!0};d.delete_=function(n,R){void 0===R&&(R=!1);if(!W(this.target_,n))return!0;if(lb(this)&&!Pa(this,{object:this.proxy_||this.target_,name:n,type:"remove"}))return null;
try{var ea,ka;Ob();var ta=Db(this),Ka=this.values_.get(n),$a=void 0;if(!Ka&&ta){var mb;$a=null==(mb=Xu(this.target_,n))?void 0:mb.value}if(R){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];Ka&&(this.values_["delete"](n),Ka instanceof or&&($a=Ka.value_),wb(Ka));this.keysAtom_.reportChanged();null==(ea=this.pendingKeys_)?void 0:null==(ka=ea.get(n))?void 0:ka.set(n in this.target_);if(ta){var ub={type:"remove",observableKind:"object",object:this.proxy_||this.target_,
debugObjectName:this.name_,oldValue:$a,name:n};ta&&Wb(this,ub)}}finally{Eb()}return!0};d.observe_=function(n,R){return Fb(this,n)};d.intercept_=function(n){return tb(this,n)};d.notifyPropertyAddition_=function(n,R){var ea,ka,ta=Db(this);ta&&(R=ta?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:R}:null,ta&&Wb(this,R));null==(ea=this.pendingKeys_)?void 0:null==(ka=ea.get(n))?void 0:ka.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=
function(){this.keysAtom_.reportObserved();return Yu(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return a}(),CE=I("ObservableObjectAdministration",zz),DE=Td(0),Rw=0,Az=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,d):void 0!==a.prototype.__proto__?a.prototype.__proto__=d:a.prototype=d})(Az,Array.prototype);var Sw=function(a,d,n){function R(ka,ta,Ka,$a){void 0===Ka&&(Ka="ObservableArray");void 0===$a&&($a=
!1);var mb=a.call(this)||this;ta=new Qw(Ka,ta,$a,!0);ta.proxy_=fa(mb);J(fa(mb),Uh,ta);ka&&ka.length&&(ta=Yc(!0),mb.spliceWithArray(0,0,ka),ig.allowStateChanges=ta);Object.defineProperty(fa(mb),"0",DE);return mb}ha(R,a);var ea=R.prototype;ea.concat=function(){this[Uh].atom_.reportObserved();for(var ka=arguments.length,ta=Array(ka),Ka=0;Ka<ka;Ka++)ta[Ka]=arguments[Ka];return Array.prototype.concat.apply(this.slice(),ta.map(function($a){return Pc($a)?$a.slice():$a}))};ea[n]=function(){var ka=this,ta=
0;return bb({next:function(){return ta<ka.length?{value:ka[ta++],done:!1}:{done:!0,value:void 0}}})};ba(R,[{key:"length",get:function(){return this[Uh].getArrayLength_()},set:function(ka){this[Uh].setArrayLength_(ka)}},{key:d,get:function(){return"Array"}}]);return R}(Az,Symbol.toStringTag,Symbol.iterator);Object.entries(dv).forEach(function(a){var d=a[0];a=a[1];"concat"!==d&&u(Sw.prototype,d,a)});yd(1E3);var Bz=Ft.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof G()[a]&&f("MobX requires global '"+
a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:jc,extras:{getDebugName:db},$mobx:Uh});var EE=ca(602),pl=class{constructor(a){yb(this,"props");yb(this,"aspectRatio");yb(this,"type");yb(this,"hideCloneHandles",!1);yb(this,"hideResizeHandles",!1);yb(this,"hideRotateHandle",!1);yb(this,"hideContextBar",!1);yb(this,"hideSelectionDetail",!1);yb(this,"hideSelection",!1);yb(this,"canChangeAspectRatio",!0);yb(this,"canUnmount",
!0);yb(this,"canResize",[!0,!0]);yb(this,"canScale",!0);yb(this,"canFlip",!0);yb(this,"canEdit",!1);yb(this,"canBind",!1);yb(this,"nonce");yb(this,"bindingDistance",4);yb(this,"isDirty",!1);yb(this,"lastSerialized");yb(this,"getCenter",()=>Zf.getBoundsCenter(this.bounds));yb(this,"getRotatedBounds",()=>{const {bounds:ka,props:{rotation:ta}}=this;return ta?Zf.getBoundsFromPoints(Zf.getRotatedCorners(ka,ta)):ka});yb(this,"hitTestPoint",ka=>{var ta=this.rotatedBounds;if(!this.props.rotation)return Ok.pointInBounds(ka,
ta);ta=Zf.getRotatedCorners(ta,this.props.rotation);return Ok.pointInPolygon(ka,ta)});yb(this,"hitTestLineSegment",(ka,ta)=>{const Ka=Zf.getBoundsFromPoints([ka,ta]),{rotatedBounds:$a,props:{rotation:mb=0}}=this;return Zf.boundsContain($a,Ka)||mb?h(ka,ta,Zf.getRotatedCorners(this.bounds)).didIntersect:0<p($a,ka,ta).length});yb(this,"hitTestBounds",ka=>{const {rotatedBounds:ta,props:{rotation:Ka=0}}=this,$a=Zf.getRotatedCorners(this.bounds,Ka);return Zf.boundsContain(ka,ta)||0<x([ka.minX,ka.minY],
[ka.width,ka.height],$a).length});yb(this,"getExpandedBounds",()=>Zf.expandBounds(this.getBounds(),this.bindingDistance));yb(this,"getBindingPoint",(ka,ta,Ka,$a)=>{var mb=this.getBounds(),ub=this.getExpandedBounds();if(Ok.pointInBounds(ka,ub)){var zb=D(ta,Ka,ub).filter(ec=>ec.didIntersect).map(ec=>ec.points[0]);if(zb.length)return Ka=this.getCenter(),zb=zb.sort((ec,ic)=>ye.dist(ic,ta)-ye.dist(ec,ta))[0],zb=ye.med(ka,zb),$a?($a=2>ye.dist(ka,Ka)?Ka:ka,mb=0):($a=2>ye.distanceToLineSegment(ka,zb,Ka)?
Ka:zb,mb=Ok.pointInBounds(ka,mb)?this.bindingDistance:Math.max(this.bindingDistance,Zf.getBoundsSides(mb).map(ec=>ye.distanceToLineSegment(ec[1][0],ec[1][1],ka)).sort((ec,ic)=>ec-ic)[0])),ub=ye.divV(ye.sub($a,[ub.minX,ub.minY]),[ub.width,ub.height]),{point:ye.clampV(ub,0,1),distance:mb}}});yb(this,"getSerialized",()=>Gb(Mf(we({},this.props),{type:this.type,nonce:this.nonce})));yb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Vb(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});
if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});yb(this,"validateProps",ka=>ka);yb(this,"update",(ka,ta=!1,Ka=!1)=>{ta||this.isDirty||this.setIsDirty(!0);ta||Ka||this.incNonce();Object.assign(this.props,this.validateProps(ka));return this});yb(this,"clone",()=>new this.constructor(this.serialized));yb(this,"onResetBounds",ka=>this);yb(this,"scale",[1,1]);yb(this,"onResizeStart",ka=>{var ta;this.scale=[...(null!=(ta=this.props.scale)?
ta:[1,1])];return this});yb(this,"onResize",(ka,ta)=>{const {bounds:Ka,rotation:$a,scale:[mb,ub]}=ta;ka=[...this.scale];0>mb&&(ka[0]*=-1);0>ub&&(ka[1]*=-1);this.update({point:[Ka.minX,Ka.minY],scale:ka,rotation:$a});return this});yb(this,"onHandleChange",(ka,{id:ta,delta:Ka})=>{if(void 0!==ka.handles){var $a=sr(ka.handles);$a[ta]=Mf(we({},$a[ta]),{point:ye.add(Ka,ka.handles[ta].point)});var mb=Zf.getCommonTopLeft(Object.values($a).map(ub=>ub.point));Object.values($a).forEach(ub=>{ub.point=ye.sub(ub.point,
mb)});this.update({point:ye.add(ka.point,mb),handles:$a})}});var d,n;const R=this.constructor.id,ea=null!=(d=this.constructor.defaultProps)?d:{};this.type=R;this.props=we(we({scale:[1,1]},ea),a);this.nonce=null!=(n=a.nonce)?n:Date.now();Dc(this)}get id(){return this.props.id}setNonce(a){this.nonce=a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=
this.getBounds();const {stroke:d,strokeWidth:n,strokeType:R,opacity:ea,fill:ka,noFill:ta,borderRadius:Ka}=this.props;return(0,EE.jsx)("rect",{fill:ta?"none":Cf(ka,"background"),stroke:Cf(d,"stroke"),strokeWidth:null!=n?n:2,strokeDasharray:"dashed"===R?"8 2":void 0,fillOpacity:null!=ea?ea:.2,width:a.width,height:a.height,rx:Ka,ry:Ka})}};yb(pl,"type");De([jh],pl.prototype,"props",2);De([jh],pl.prototype,"canResize",2);De([jh],pl.prototype,"nonce",2);De([jh],pl.prototype,"isDirty",2);De([jh],pl.prototype,
"lastSerialized",2);De([ph],pl.prototype,"id",1);De([Og],pl.prototype,"setNonce",1);De([Og],pl.prototype,"incNonce",1);De([Og],pl.prototype,"setIsDirty",1);De([Og],pl.prototype,"setLastSerialized",1);De([ph],pl.prototype,"center",1);De([ph],pl.prototype,"bounds",1);De([ph],pl.prototype,"rotatedBounds",1);De([ph],pl.prototype,"serialized",1);De([Og],pl.prototype,"update",2);var im=class extends pl{constructor(a={}){super(a);yb(this,"canBind",!0);yb(this,"getBounds",()=>{const [d,n]=this.props.point,
[R,ea]=this.props.size;return{minX:d,minY:n,maxX:d+R,maxY:n+ea,width:R,height:ea}});yb(this,"getRotatedBounds",()=>Zf.getBoundsFromPoints(Zf.getRotatedCorners(this.bounds,this.props.rotation)));yb(this,"onResize",(d,n)=>{const {bounds:R,rotation:ea,scale:[ka,ta]}=n;d=[...this.scale];0>ka&&(d[0]*=-1);0>ta&&(d[1]*=-1);this.update({point:[R.minX,R.minY],scale:d,rotation:ea});return this.update({rotation:ea,point:[R.minX,R.minY],size:[Math.max(1,R.width),Math.max(1,R.height)],scale:d})});yb(this,"validateProps",
d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return d});Dc(this)}};yb(im,"id","box");yb(im,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var ss=class extends pl{constructor(a={}){super(a);yb(this,"getBounds",()=>{const {pointBounds:d,props:{point:n}}=this;return Zf.translateBounds(d,n)});yb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:n},bounds:R,rotatedPoints:ea}=this;return d?Zf.translateBounds(Zf.getBoundsFromPoints(ea),
n):R});yb(this,"normalizedPoints",[]);yb(this,"isResizeFlippedX",!1);yb(this,"isResizeFlippedY",!1);yb(this,"onResizeStart",()=>{var d;const {bounds:n,props:{points:R}}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const ea=[n.width,n.height];this.normalizedPoints=R.map(ka=>Xd.divV(ka,ea));return this});yb(this,"onResize",(d,n)=>{const {bounds:R,scale:[ea,ka]}=n,ta=[R.width,R.height];d=[...this.scale];0>ea&&(d[0]*=-1);0>ka&&(d[1]*=-1);return this.update(ea||ka?{point:[R.minX,R.minY],points:this.normalizedPoints.map(Ka=>
Xd.mulV(Ka,ta).concat(Ka[2])),scale:d}:{point:[R.minX,R.minY],points:this.normalizedPoints.map(Ka=>Xd.mulV(Ka,ta).concat(Ka[2]))})});yb(this,"hitTestPoint",d=>{const {props:{points:n,point:R}}=this;return Ok.pointNearToPolyline(Xd.sub(d,R),n)});yb(this,"hitTestLineSegment",(d,n)=>{const {bounds:R,props:{points:ea,point:ka}}=this;if(Ok.pointInBounds(d,R)||Ok.pointInBounds(n,R)||0<p(R,d,n).length){const ta=Xd.sub(d,ka),Ka=Xd.sub(n,ka);return h(ta,Ka,ea).didIntersect||!!ea.find($a=>5>Xd.dist(ta,$a)||
5>Xd.dist(Ka,$a))}return!1});yb(this,"hitTestBounds",d=>{const {rotatedBounds:n,props:{points:R,point:ea}}=this,ka=Zf.translateBounds(d,Xd.neg(ea));return Zf.boundsContain(d,n)||R.every(ta=>Ok.pointInBounds(ta,ka))||Zf.boundsCollide(d,n)&&0<E([ka.minX,ka.minY],[ka.width,ka.height],R).length});Dc(this)}get pointBounds(){const {props:{points:a}}=this;return Zf.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:n},center:R}=this;if(!n)return d;const ea=Xd.sub(R,a);return d.map(ka=>
Xd.rotWith(ka,ea,n))}};yb(ss,"id","draw");yb(ss,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});De([ph],ss.prototype,"pointBounds",1);De([ph],ss.prototype,"rotatedPoints",1);var Tw=class extends im{constructor(a={}){super(a);yb(this,"getBounds",()=>{const {props:{point:[d,n],size:[R,ea]}}=this;return Zf.getRotatedEllipseBounds(d,n,R/2,ea/2,0)});yb(this,"getRotatedBounds",()=>{const {props:{point:[d,n],size:[R,ea],rotation:ka}}=this;return Zf.getRotatedEllipseBounds(d,
n,R/2,ea/2,ka)});yb(this,"hitTestPoint",d=>{const {props:{size:n,rotation:R},center:ea}=this;return Ok.pointInEllipse(d,ea,n[0],n[1],R||0)});yb(this,"hitTestLineSegment",(d,n)=>{const {props:{size:[R,ea],rotation:ka=0},center:ta}=this;return g(d,n,ta,R,ea,ka).didIntersect});yb(this,"hitTestBounds",d=>{const {props:{size:[n,R],rotation:ea=0},rotatedBounds:ka}=this;var ta;if(!(ta=Zf.boundsContain(d,ka))){const {minX:Ka,minY:$a,width:mb,height:ub}=d;ta=0<t(this.center,n/2,R/2,ea,[Ka,$a],[mb,ub]).length}return ta});
Dc(this)}};yb(Tw,"id","ellipse");yb(Tw,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var Uw=class extends im{constructor(a={}){super(a);yb(this,"onResetBounds",d=>{const {clipping:n,size:R,point:ea}=this.props;if(n){const [ka,ta,Ka,$a]=Array.isArray(n)?n:[n,n,n,n];return this.update({clipping:0,point:[ea[0]-$a,ea[1]-ka],size:[R[0]+($a-ta),R[1]+(ka-Ka)]})}if(d.asset){const {size:[ka,ta]}=d.asset;this.update({clipping:0,point:[ea[0]+R[0]/2-ka/2,ea[1]+R[1]/
2-ta/2],size:[ka,ta]})}return this});yb(this,"onResize",(d,n)=>{const {bounds:R,clip:ea,scale:ka}=n;({clipping:n}=this.props);const {clipping:ta}=d;if(ea){const {point:[Ka,$a],size:[mb,ub]}=d,[zb,ec,ic,bc]=ta?Array.isArray(ta)?ta:[ta,ta,ta,ta]:[0,0,0,0];n=[zb+(R.minY-$a),ec+(R.maxX-(Ka+mb)),ic+(R.maxY-($a+ub)),bc+(R.minX-Ka)]}else void 0!==ta&&(n=Array.isArray(ta)?ta:[ta,ta,ta,ta],n=[n[0]*ka[1],n[1]*ka[0],n[2]*ka[1],n[3]*ka[0]]);if(n&&Array.isArray(n)){const Ka=n;Ka.every(($a,mb)=>0===mb||$a===Ka[mb-
1])&&(n=Ka[0])}return this.update({point:[R.minX,R.minY],size:[Math.max(1,R.width),Math.max(1,R.height)],clipping:n})});Dc(this)}};yb(Uw,"id","ellipse");yb(Uw,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Cz=class extends pl{constructor(a={}){super(a);yb(this,"getBounds",()=>{const {points:d,props:{point:n}}=this;return Zf.translateBounds(Zf.getBoundsFromPoints(d),n)});yb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,
props:{point:n}}=this;return Zf.translateBounds(Zf.getBoundsFromPoints(d),n)});yb(this,"normalizedHandles",[]);yb(this,"onResizeStart",()=>{var d;const {props:{handles:n},bounds:R}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const ea=[R.width,R.height];this.normalizedHandles=Object.values(n).map(ka=>Xd.divV(ka.point,ea));return this});yb(this,"onResize",(d,n)=>{const {bounds:R,scale:[ea,ka]}=n,{props:{handles:ta},normalizedHandles:Ka}=this,$a=[R.width,R.height];d=[...this.scale];0>ea&&
(d[0]*=-1);0>ka&&(d[1]*=-1);return this.update({point:[R.minX,R.minY],handles:Object.values(ta).map((mb,ub)=>Mf(we({},mb),{point:Xd.mulV(Ka[ub],$a)})),scale:d})});yb(this,"hitTestPoint",d=>{const {points:n}=this;return Ok.pointNearToPolyline(Xd.sub(d,this.props.point),n)});yb(this,"hitTestLineSegment",(d,n)=>{const {bounds:R,points:ea,props:{point:ka}}=this;if(Ok.pointInBounds(d,R)||Ok.pointInBounds(n,R)||0<p(R,d,n).length){const ta=Xd.sub(d,ka),Ka=Xd.sub(n,ka);return h(ta,Ka,ea).didIntersect||!!ea.find($a=>
5>Xd.dist(ta,$a)||5>Xd.dist(Ka,$a))}return!1});yb(this,"hitTestBounds",d=>{const {rotatedBounds:n,points:R,props:{point:ea}}=this,ka=Zf.translateBounds(d,Xd.neg(ea));return Zf.boundsContain(d,n)||R.every(ta=>Ok.pointInBounds(ta,ka))||Zf.boundsCollide(d,n)&&0<E([ka.minX,ka.minY],[ka.width,ka.height],R).length});yb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Cz.defaultProps.handles);return d});Dc(this)}get points(){return Object.values(this.props.handles).map(a=>
a.point)}get centroid(){const {points:a}=this;return cl.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,rotation:n}}=this;return n?Object.values(d).map(R=>Xd.rotWith(R.point,a,n)):this.points}},ts=Cz;yb(ts,"id","polyline");yb(ts,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});De([ph],ts.prototype,"points",1);De([ph],ts.prototype,"centroid",1);De([ph],ts.prototype,"rotatedPoints",1);var Dz=class extends ts{constructor(a={}){super(a);
yb(this,"hideResizeHandles",!0);yb(this,"hideRotateHandle",!0);yb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Dz.defaultProps.handles);return d});yb(this,"getHandlesChange",(d,n)=>{var R=vj(d.handles,n);R=vj(R,{start:{point:ye.toFixed(R.start.point)},end:{point:ye.toFixed(R.end.point)}});if(!ye.isEqual(R.start.point,R.end.point)){n={point:d.point,handles:sr(R)};d=d.point;R=Zf.translateBounds(Zf.getBoundsFromPoints(Object.values(R).map(ka=>
ka.point)),n.point);var ea=ye.sub([R.minX,R.minY],d);ye.isEqual(ea,[0,0])||(Object.values(n.handles).forEach(ka=>{ka.point=ye.toFixed(ye.sub(ka.point,ea))}),n.point=ye.toFixed(ye.add(n.point,ea)));return n}});Dc(this)}},Mt=Dz;yb(Mt,"id","line");yb(Mt,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var jq=class extends im{constructor(a={}){super(a);yb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,
props:{point:n},offset:R}=this;return Zf.translateBounds(Zf.getBoundsFromPoints(d),Xd.add(n,R))});yb(this,"hitTestPoint",d=>{const {vertices:n}=this;return Ok.pointInPolygon(Xd.add(d,this.props.point),n)});yb(this,"hitTestLineSegment",(d,n)=>{const {vertices:R,props:{point:ea}}=this;return h(Xd.sub(d,ea),Xd.sub(n,ea),R).didIntersect});yb(this,"hitTestBounds",d=>{const {rotatedBounds:n,offset:R,rotatedVertices:ea,props:{point:ka}}=this,ta=Zf.translateBounds(d,Xd.neg(Xd.add(ka,R)));return Zf.boundsContain(d,
n)||ea.every(Ka=>Ok.pointInBounds(Ka,ta))||0<x([ta.minX,ta.minY],[ta.width,ta.height],ea).length});yb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});Dc(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},vertices:d}=this;return d.map(n=>Xd.add(n,a))}get centroid(){const {vertices:a}=this;return cl.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:n}}=this;return n?a.map(R=>
Xd.rotWith(R,d,n)):a}get offset(){const {props:{size:[a,d]}}=this,n=Zf.getBoundsCenter(Zf.getBoundsFromPoints(this.vertices));return Xd.sub(Xd.div([a,d],2),n)}getVertices(a=0){const {ratio:d,sides:n,size:R}=this.props;return 3===n?cl.getTriangleVertices(R,a,d):cl.getPolygonVertices(R,n,a,d)}};yb(jq,"id","polygon");yb(jq,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});De([ph],jq.prototype,"vertices",1);De([ph],jq.prototype,"pageVertices",
1);De([ph],jq.prototype,"centroid",1);De([ph],jq.prototype,"rotatedVertices",1);De([ph],jq.prototype,"offset",1);var Vw=class extends im{constructor(a={}){super(a);yb(this,"canEdit",!0);yb(this,"canFlip",!1);Dc(this)}};yb(Vw,"id","text");yb(Vw,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var ev=class extends im{constructor(a={}){super(a);yb(this,"canEdit",!1);yb(this,"canFlip",!1);yb(this,"getBounds",()=>0===this.shapes.length?(Re().deleteShapes([this.id]),
{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):Zf.getCommonBounds(this.shapes.map(d=>d.getBounds())));Dc(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};yb(ev,"id","group");yb(ev,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});De([ph],ev.prototype,"shapes",1);var us=class{constructor(){yb(this,"_id");yb(this,"_initial");yb(this,"_states");yb(this,"_isActive",!1);yb(this,"cursor");
yb(this,"_disposables",[]);yb(this,"children",new Map([]));yb(this,"registerStates",n=>{n.forEach(R=>this.children.set(R.id,new R(this,this)));return this});yb(this,"deregisterStates",n=>{n.forEach(R=>{var ea;null==(ea=this.children.get(R.id))?void 0:ea.dispose();this.children.delete(R.id)});return this});yb(this,"currentState",{});yb(this,"transition",(n,R={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${n}.`);const ea=this.children.get(n),ka=this.currentState;
if(!ea)throw Error(`Could not find a state named ${n}.`);Vb(()=>{this.currentState?(ka._events.onExit(Mf(we({},R),{toId:n})),ka.dispose(),this.setCurrentState(ea),this._events.onTransition(Mf(we({},R),{fromId:ka.id,toId:n})),ea._events.onEnter(Mf(we({},R),{fromId:ka.id}))):(this.currentState=ea,ea._events.onEnter(Mf(we({},R),{fromId:""})))});return this});yb(this,"isIn",n=>{n=n.split(".").reverse();let R=this;for(;0<n.length;){const ea=n.pop();if(!ea)return!0;if(R.currentState.id===ea){if(0===n.length)return!0;
R=R.currentState}else break}return!1});yb(this,"isInAny",(...n)=>n.some(this.isIn));yb(this,"forwardEvent",(n,...R)=>{var ea,ka;(null==(ka=null==(ea=this.currentState)?void 0:ea._events)?0:ka[n])&&Vb(()=>{var ta;return null==(ta=this.currentState._events)?void 0:ta[n](...R)})});yb(this,"_events",{onTransition:n=>{var R;null==(R=this.onTransition)?void 0:R.call(this,n)},onEnter:n=>{var R;this._isActive=!0;this.initial&&this.transition(this.initial,n);null==(R=this.onEnter)?void 0:R.call(this,n)},onExit:n=>
{var R,ea,ka;this._isActive=!1;null==(ea=null==(R=this.currentState)?void 0:R.onExit)?void 0:ea.call(R,{toId:"parent"});null==(ka=this.onExit)?void 0:ka.call(this,n)},onPointerDown:(n,R)=>{var ea;null==(ea=this.onPointerDown)?void 0:ea.call(this,n,R);this.forwardEvent("onPointerDown",n,R)},onPointerUp:(n,R)=>{var ea;null==(ea=this.onPointerUp)?void 0:ea.call(this,n,R);this.forwardEvent("onPointerUp",n,R)},onPointerMove:(n,R)=>{var ea;null==(ea=this.onPointerMove)?void 0:ea.call(this,n,R);this.forwardEvent("onPointerMove",
n,R)},onPointerEnter:(n,R)=>{var ea;null==(ea=this.onPointerEnter)?void 0:ea.call(this,n,R);this.forwardEvent("onPointerEnter",n,R)},onPointerLeave:(n,R)=>{var ea;null==(ea=this.onPointerLeave)?void 0:ea.call(this,n,R);this.forwardEvent("onPointerLeave",n,R)},onDoubleClick:(n,R)=>{var ea;null==(ea=this.onDoubleClick)?void 0:ea.call(this,n,R);this.forwardEvent("onDoubleClick",n,R)},onKeyDown:(n,R)=>{var ea;this._events.onModifierKey(n,R);null==(ea=this.onKeyDown)?void 0:ea.call(this,n,R);this.forwardEvent("onKeyDown",
n,R)},onKeyUp:(n,R)=>{var ea;this._events.onModifierKey(n,R);null==(ea=this.onKeyUp)?void 0:ea.call(this,n,R);this.forwardEvent("onKeyUp",n,R)},onPinchStart:(n,R)=>{var ea;null==(ea=this.onPinchStart)?void 0:ea.call(this,n,R);this.forwardEvent("onPinchStart",n,R)},onPinch:(n,R)=>{var ea;null==(ea=this.onPinch)?void 0:ea.call(this,n,R);this.forwardEvent("onPinch",n,R)},onPinchEnd:(n,R)=>{var ea;null==(ea=this.onPinchEnd)?void 0:ea.call(this,n,R);this.forwardEvent("onPinchEnd",n,R)},onModifierKey:(n,
R)=>{switch(R.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(n,R)}}});yb(this,"onEnter");yb(this,"onExit");yb(this,"onTransition");yb(this,"onPointerDown");yb(this,"onPointerUp");yb(this,"onPointerMove");yb(this,"onPointerEnter");yb(this,"onPointerLeave");yb(this,"onDoubleClick");yb(this,"onKeyDown");yb(this,"onKeyUp");yb(this,"onPinchStart");yb(this,"onPinch");yb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;
this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=a}};yb(us,"id");yb(us,"shortcuts");De([jh],us.prototype,"currentState",2);De([Og],us.prototype,"setCurrentState",
1);var Ww=class extends us{constructor(a,d){var n,R;super();yb(this,"_root");yb(this,"_parent");yb(this,"children",new Map([]));yb(this,"registerStates",ea=>{ea.forEach(ka=>this.children.set(ka.id,new ka(this,this._root)));return this});yb(this,"deregisterStates",ea=>{ea.forEach(ka=>{var ta;null==(ta=this.children.get(ka.id))?void 0:ta.dispose();this.children.delete(ka.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(n=this.initial)?
n:this.states[0].id,n=this.children.get(a))&&(this.setCurrentState(n),null==(R=this.currentState)?void 0:R._events.onEnter({fromId:"initial"}));Dc(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};yb(Ww,"cursor");var kq=class extends Ww{constructor(){super(...arguments);yb(this,"isLocked",!1);yb(this,"previous");yb(this,"onEnter",({fromId:a})=>{this.previous=
a;this.cursor&&this.app.cursors.setCursor(this.cursor)});yb(this,"onTransition",a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Ii=class extends Ww{get app(){return this.root}get tool(){return this.parent}},Ez=class extends Ii{constructor(){super(...arguments);yb(this,"cursor","crosshair");yb(this,"creatingShape");yb(this,"aspectRatio");yb(this,"initialBounds",
{});yb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:n}}=this.app;var {Shape:R}=this.tool;R=new R({id:Ck(),type:R.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:ye.abs(ye.sub(n,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};R.canChangeAspectRatio||(R.aspectRatio?(this.aspectRatio=R.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=
1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=R;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(R);this.app.setSelectedShapes([R])});yb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:d}=this,{currentPoint:n,originPoint:R,shiftKey:ea}=this.app.inputs;a=ea||this.creatingShape.props.isAspectRatioLocked||
!this.creatingShape.canChangeAspectRatio;d=Zf.getTransformedBoundingBox(d,"bottom_right_corner",ye.sub(n,R),0,a);this.app.settings.snapToGrid&&!a&&(d=Zf.snapBoundsToGrid(d,8));this.creatingShape.update({point:[d.minX,d.minY],size:[d.width,d.height]})}});yb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});yb(this,"onKeyDown",(a,d)=>
{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};yb(Ez,"id","creating");var Fz=class extends Ii{constructor(){super(...arguments);yb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});yb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});
yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};yb(Fz,"id","idle");var Gz=class extends Ii{constructor(){super(...arguments);yb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Xd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});yb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};yb(Gz,"id","pointing");var np=class extends kq{constructor(){super(...arguments);
yb(this,"cursor","crosshair")}};yb(np,"id","box");yb(np,"states",[Fz,Gz,Ez]);yb(np,"initial","idle");var Hz=class extends Ii{constructor(){super(...arguments);yb(this,"shape",{});yb(this,"points",[[0,0,.5]]);yb(this,"persistDebounced",yg(this.app.persist,200));yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});yb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:n}=this.tool;var {originPoint:R}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
n){this.shape=n;var {shape:ea}=this;var ka=ea.props.points[ea.props.points.length-1];const Ka=Xd.sub(R,ea.props.point).concat(null!=(a=R[2])?a:.5);this.points=[...ea.props.points,ka,ka];const $a=Math.ceil(Xd.dist(ka,R)/16);for(let mb=0,ub=mb/($a-1);mb<$a;mb++){a=this.points;R=a.push;ea=Xd.lrp(ka,Ka,ub);var ta=ka[2];R.call(a,ea.concat.call(ea,ta+(Ka[2]-ta)*ub))}this.addNextPoint(Ka)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ka=R[2])?ka:.5]],this.shape=new d({id:Ck(),type:d.id,parentId:this.app.currentPage.id,
point:R.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});yb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:n}=this.app.inputs;Xd.isEqual(n,d)||this.addNextPoint(Xd.sub(d,a.props.point).concat(d[2]))});yb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,
points:this.tool.simplify?Ok.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,n=Xd.min(a,
[0,0]);this.points.push(a);0>n[0]||0>n[1]?(this.points=this.points.map(R=>Xd.sub(R,n).concat(R[2])),d.update({point:Xd.add(d.props.point,n),points:this.points})):d.update({points:this.points})}};yb(Hz,"id","creating");var Iz=class extends Ii{constructor(){super(...arguments);yb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};
yb(Iz,"id","idle");var Jz=class extends Ii{constructor(){super(...arguments);yb(this,"origin",[0,0]);yb(this,"prevDelta",[0,0]);yb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});yb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});yb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};yb(Jz,"id","pinching");var Nt=class extends kq{constructor(){super(...arguments);yb(this,"cursor","crosshair");yb(this,"simplify",!0);yb(this,"simplifyTolerance",
1);yb(this,"previousShape");yb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};yb(Nt,"id","draw");yb(Nt,"states",[Iz,Hz,Jz]);yb(Nt,"initial","idle");var Kz=class extends Ii{constructor(){super(...arguments);yb(this,"points",[[0,0,.5]]);yb(this,"hitShapes",new Set);yb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});yb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;Xd.isEqual(d,a)||(this.points.push(a),
this.app.shapesInViewport.filter(n=>n.hitTestLineSegment(d,a)).forEach(n=>this.hitShapes.add(n)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});yb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};yb(Kz,"id","erasing");var Lz=class extends Ii{constructor(){super(...arguments);yb(this,"onPointerDown",
(a,d)=>{a.order||this.tool.transition("pointing")});yb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};yb(Lz,"id","idle");var Mz=class extends Ii{constructor(){super(...arguments);yb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>
d.hitTestPoint(a)))});yb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Xd.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});yb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};yb(Mz,"id","pointing");var fv=class extends kq{constructor(){super(...arguments);yb(this,"cursor","crosshair")}};yb(fv,"id","erase");yb(fv,"states",[Lz,Mz,Kz]);yb(fv,
"initial","idle");var Xw=class extends Ii{constructor(){super(...arguments);yb(this,"handle",{});yb(this,"handleId","end");yb(this,"currentShape",{});yb(this,"initialShape",{});yb(this,"bindableShapeIds",[]);yb(this,"startBindingShapeId");yb(this,"newStartBindingId","");yb(this,"draggedBindingId","");yb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:n,currentPoint:R,modKey:ea,altKey:ka},settings:{snapToGrid:ta}}=this.app;var Ka=this.app.getShapeById(this.initialShape.id),
{handles:$a}=this.initialShape,mb=this.handleId,ub="start"===this.handleId?"end":"start";if(!ye.isEqual(d,R)){var zb=ye.sub(R,n);if(a){var ec=$a[ub].point,ic=ye.add($a[mb].point,zb),bc=ye.angle(ec,ic);ec=ye.rotWith(ic,ec,Pl.snapAngleToSegments(bc,24)-bc);zb=ye.add(zb,ye.sub(ec,ic))}zb=ye.add($a[mb].point,zb);$a={[mb]:Mf(we({},$a[mb]),{point:ta?ye.snap(zb,8):ye.toFixed(zb),bindingId:void 0})};var Lc=this.currentShape.getHandlesChange(this.initialShape,$a);if(Lc){$a=vj(Ka.props,Lc);var $c={},tc;mb=
$a.handles[mb];ub=$a.handles[ub];if(this.startBindingShapeId){var Tc;if(zb=this.app.getShapeById(this.startBindingShapeId)){ic=zb.getCenter();ec=$a.handles.end;var Oc=ye.add($a.handles.start.point,$a.point);ye.isEqual(Oc,ic)&&Oc[1]++;bc=zb.hitTestPoint(R);Oc=ye.uni(ye.sub(Oc,ic));const ld=void 0!==this.app.currentPage.bindings[this.newStartBindingId];ea||zb.hitTestPoint(ye.add($a.point,ec.point))||(Tc=ed(Ka.props,zb,"start",this.newStartBindingId,ic,ic,Oc,bc));Tc&&!ld?($c[this.newStartBindingId]=
Tc,$a.handles.start.bindingId=Tc.id):!Tc&&ld&&(console.log("removing start binding"),delete $c[this.newStartBindingId],$a.handles.start.bindingId=void 0)}}if(!ea){Tc=ye.add(ub.point,$a.point);ub=ye.add(mb.point,$a.point);mb=ye.uni(ye.sub(ub,Tc));const ld=ye.add($a.point,$a.handles.start.point),od=ye.add($a.point,$a.handles.end.point);zb=this.bindableShapeIds.map(Qd=>this.app.getShapeById(Qd)).sort((Qd,ge)=>ge.nonce-Qd.nonce).filter(Qd=>![ld,od].every(ge=>Qd.hitTestPoint(ge)));for(const Qd of zb)if(tc=
ed(Ka.props,Qd,this.handleId,this.draggedBindingId,ub,Tc,mb,ka))break}tc?($c[this.draggedBindingId]=tc,$a=vj($a,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(Ka=Ka.props.handles[this.handleId].bindingId,void 0!==Ka&&(delete $c[Ka],$a=vj($a,{handles:{[this.handleId]:{bindingId:void 0}}})));Lc=this.currentShape.getHandlesChange($a,$a.handles);Vb(()=>{var ld;if(Lc){this.currentShape.update(Lc);this.app.currentPage.updateBindings($c);const od=Object.values(null!=(ld=Lc.handles)?ld:
{}).map(Qd=>Qd.bindingId).map(Qd=>this.app.currentPage.bindings[Qd]).filter(Boolean).flatMap(Qd=>[Qd.toId,Qd.fromId].filter(Boolean));this.app.setBindingShapes(od)}})}}});yb(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});yb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),
this.tool.transition("idle")}})}};yb(Xw,"id","creating");var Nz=class extends Xw{constructor(){super(...arguments);yb(this,"onEnter",()=>{var a;this.app.history.pause();this.newStartBindingId=Ck();this.draggedBindingId=Ck();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:n}=this.app.inputs;d=new d(Mf(we({},d.defaultProps),{id:Ck(),type:d.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?ye.snap(n,8):n,fill:this.app.settings.color,
stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=Gb(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);this.app.setSelectedShapes([d]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(R=>this.app.getShapeById(R)).filter(R=>Ok.pointInBounds(n,R.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};yb(Nz,"id","creating");
var Oz=class extends Ii{constructor(){super(...arguments);yb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});yb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});yb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);
break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});yb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};yb(Oz,"id","idle");var Pz=class extends Ii{constructor(){super(...arguments);yb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Xd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};
yb(Pz,"id","pointing");var gv=class extends kq{constructor(){super(...arguments);yb(this,"cursor","crosshair")}};yb(gv,"id","line");yb(gv,"states",[Oz,Pz,Nz]);yb(gv,"initial","idle");var Qz=class extends Ii{constructor(){super(...arguments);yb(this,"cursor","crosshair");yb(this,"creatingShape");yb(this,"aspectRatio");yb(this,"initialBounds",{});yb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:n}=this.tool,R=new n({id:Ck(),type:n.id,parentId:a.id,point:[...d],text:"",
size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=R;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);Vb(()=>{this.app.currentPage.addShapes(R);const ea=this.app.settings.snapToGrid?ye.snap([...d],8):d,{bounds:ka}=R;R.update({point:ye.sub(ea,[ka.width/2,ka.height/2])});this.app.transition("select");this.app.setSelectedShapes([R]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};
yb(Qz,"id","creating");var Rz=class extends Ii{constructor(){super(...arguments);yb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});yb(this,"onPinchStart",(...a)=>{var d,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(d=this.app._events).onPinchStart)?void 0:n.call(d,...a)});yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};yb(Rz,"id","idle");var hv=class extends kq{constructor(){super(...arguments);
yb(this,"cursor","crosshair")}};yb(hv,"id","box");yb(hv,"states",[Rz,Qz]);yb(hv,"initial","idle");var FE=pg(PD()),GE=class extends FE.default{constructor(){super(...arguments);yb(this,"toBBox",a=>a.rotatedBounds)}},Sz=class extends Ii{constructor(){super(...arguments);yb(this,"initialSelectedIds",[]);yb(this,"initialSelectedShapes",[]);yb(this,"tree",new GE);yb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:n}=this.app;this.initialSelectedIds=Array.from(n.values());this.initialSelectedShapes=
Array.from(a.values());this.tree.load(d.shapes)});yb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});yb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:n,currentPoint:R}}=this.app,ea=Zf.getBoundsFromPoints([R,n],0);this.app.setBrush(ea);const ka=[...(new Set(this.tree.search(ea).filter(ta=>d?Zf.boundsContain(ea,ta.rotatedBounds):ta.hitTestBounds(ea)).filter(ta=>"group"!==ta.type).map(ta=>{var Ka;return null!=(Ka=this.app.getParentGroup(ta))?
Ka:ta})))];a?ka.every(ta=>this.initialSelectedShapes.includes(ta))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(ta=>!ka.includes(ta))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...ka]))]):this.app.setSelectedShapes(ka);this.app.viewport.panToPointWhenNearBounds(R)});yb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});yb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),
this.tool.transition("idle")}})}};yb(Sz,"id","brushing");var Tz=class extends Ii{constructor(){super(...arguments);yb(this,"onEnter",a=>{var d;const {selectedIds:n,inputs:{shiftKey:R}}=this.app;if("shape"===a.type&&!n.has(a.shape.id)){const ea=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;R?this.app.setSelectedShapes([...Array.from(n.values()),ea.id]):this.app.setSelectedShapes([ea])}});yb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};yb(Tz,"id","contextMenu");var Uz=class extends Ii{constructor(){super(...arguments);
yb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});yb(this,"onExit",()=>{});yb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});yb(this,"onPointerDown",(a,d)=>{const {selectedShapes:n,inputs:{ctrlKey:R}}=this.app;
if(2===d.button)this.tool.transition("contextMenu",a);else if(R)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(n.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:ea,inputs:ka}=this.app;
ea&&Ok.pointInBounds(ka.currentPoint,ea)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",a);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",we(we({},d),a))}});yb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})});yb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});yb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&
!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};yb(Uz,"id","idle");var Vz=class extends Ii{constructor(){super(...arguments);yb(this,"onEnter",a=>{var d;const {selectedIds:n,inputs:{shiftKey:R}}=this.app,ea=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;R?this.app.setSelectedShapes([...Array.from(n.values()),ea.id]):this.app.setSelectedShapes([ea])});yb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<Xd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});yb(this,"onPointerUp",()=>{this.tool.transition("idle")});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};yb(Vz,"id","pointingShape");var Wz=class extends Ii{constructor(){super(...arguments);yb(this,"cursor","move");yb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Xd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
yb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};yb(Wz,"id","pointingBoundsBackground");var Xz=class extends Ii{constructor(){super(...arguments);yb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});yb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<Xd.dist(a,d)&&this.tool.transition("brushing")});yb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});yb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};yb(Xz,"id","pointingCanvas");var Yz=class extends Ii{constructor(){super(...arguments);yb(this,"cursor","move");yb(this,
"isCloning",!1);yb(this,"didClone",!1);yb(this,"initialPoints",{});yb(this,"initialShapePoints",{});yb(this,"initialClonePoints",{});yb(this,"clones",[]);yb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,inputs:n}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(d.map(({id:R,props:{point:ea}})=>[R,ea.slice()]));document.querySelectorAll("input,textarea").forEach(R=>R.blur());null==(a=document.getSelection())?void 0:a.empty();n.altKey?this.startCloning():
this.moveSelectedShapesToPointer()});yb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});yb(this,"onPointerMove",()=>{const {inputs:{currentPoint:a}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});yb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});yb(this,"onPointerUp",()=>{this.app.history.resume();
this.app.persist();this.tool.transition("idle")});yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(n=>{n.update({point:this.initialPoints[n.id]})}),this.tool.transition("idle")}});yb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:n,allSelectedShapes:R}=this.app;n.removeShapes(...R);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));
this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:n}}=this.app,{initialPoints:R}=this,ea=Xd.sub(n,d);a&&(Math.abs(ea[0])<Math.abs(ea[1])?ea[0]=0:ea[1]=0);Vb(()=>{this.app.allSelectedShapesArray.filter(ka=>!ka.props.isLocked).forEach(ka=>{let ta=Xd.add(R[ka.id],ea);this.app.settings.snapToGrid&&(ta=Xd.snap(ta,8));ka.update({point:ta})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>
{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d(Mf(we({},a.serialized),{id:Ck(),type:a.type,point:this.initialPoints[a.id],rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);
this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};yb(Yz,"id","translating");var Zz=class extends Ii{constructor(){super(...arguments);yb(this,"pointedSelectedShape");yb(this,"onEnter",a=>{this.pointedSelectedShape=a.shape});yb(this,"onExit",()=>{this.pointedSelectedShape=void 0});yb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Xd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
yb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:n}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:n}=this.app),n=Array.from(n.values()),n.splice(n.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(n);else{if(1===n.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof im&&Ok.pointInBounds(d,
this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};yb(Zz,"id","pointingSelectedShape");var $z=class extends Ii{constructor(){super(...arguments);yb(this,"info",{});yb(this,"onEnter",a=>{this.info=a;this.updateCursor()});yb(this,"onExit",()=>{this.app.cursors.reset()});
yb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Xd.dist(a,d)&&this.tool.transition("resizing",this.info)});yb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(Wu[this.info.handle],this.app.selectionBounds.rotation)}};yb($z,"id","pointingResizeHandle");var aA=class extends Ii{constructor(){super(...arguments);
yb(this,"isSingle",!1);yb(this,"handle","bottom_right_corner");yb(this,"snapshots",{});yb(this,"initialCommonBounds",{});yb(this,"selectionRotation",0);yb(this,"resizeType","corner");yb(this,"onEnter",a=>{var d,n;const {history:R,selectedShapesArray:ea,selectionBounds:ka}=this.app;if(!ka)throw Error("Expected a selected bounds.");this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";
this.app.cursors.setCursor(aA.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);R.pause();const ta=Zf.getBoundsFromPoints(ea.map(Ka=>Zf.getBoundsCenter(Ka.bounds)));this.selectionRotation=(this.isSingle=1===ea.length)?null!=(n=ea[0].props.rotation)?n:0:0;this.initialCommonBounds=we({},ka);this.snapshots=Object.fromEntries(ea.map(Ka=>{const $a=we({},Ka.bounds),[mb,ub]=Zf.getBoundsCenter($a);return[Ka.id,{props:Ka.serialized,bounds:$a,transformOrigin:[(mb-this.initialCommonBounds.minX)/
this.initialCommonBounds.width,(ub-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(mb-ta.minX)/ta.width,(ub-ta.minY)/ta.height],isAspectRatioLocked:Ka.props.isAspectRatioLocked||!(Ka.canChangeAspectRatio&&!Ka.props.rotation)}]}));ea.forEach(Ka=>{var $a;null==($a=Ka.onResizeStart)?void 0:$a.call(Ka,{isSingle:this.isSingle})})});yb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});
yb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:n,originPoint:R,currentPoint:ea}}=this.app,{handle:ka,snapshots:ta,initialCommonBounds:Ka}=this;let $a=Xd.sub(ea,R);a&&($a=Xd.mul($a,2));const mb=this.app.selectedShapes.values().next().value;let ub=Zf.getTransformedBoundingBox(Ka,ka,$a,this.selectionRotation,d||this.isSingle&&(n?!("clipping"in mb.props):!mb.canChangeAspectRatio||mb.props.isAspectRatioLocked));a&&(ub=we(we({},ub),Zf.centerBounds(ub,Zf.getBoundsCenter(Ka))));const {scaleX:zb,
scaleY:ec}=ub;this.app.selectedShapes.forEach(ic=>{var bc,Lc;const {isAspectRatioLocked:$c,props:tc,bounds:Tc,transformOrigin:Oc}=ta[ic.id];let ld=Zf.getRelativeTransformedBoundingBox(ub,Ka,Tc,0>zb,0>ec);if(ic.canResize.some(ge=>ge)||ic.props.isSizeLocked||!this.isSingle){var od=[zb,ec],Qd=null!=(bc=tc.rotation)?bc:0;bc=Zf.getBoundsCenter(ld);ic.canFlip||(od=Xd.abs(od));ic.canScale||(od=null!=(Lc=tc.scale)?Lc:[1,1]);if(Qd&&0>zb&&0<=ec||0>ec&&0<=zb)Qd*=-1;this.app.settings.snapToGrid&&!$c&&(ld=Zf.snapBoundsToGrid(ld,
8));ic.onResize(tc,{center:bc,rotation:Qd,scale:od,bounds:ld,type:ka,clip:n,transformOrigin:Oc})}});this.updateCursor(zb,ec);this.app.viewport.panToPointWhenNearBounds(ea)});yb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(we({},this.snapshots[n.id].props))}),this.tool.transition("idle")}})}updateCursor(a,d){var n,R,ea,ka;const ta=0>a&&0<=d;a=0>
d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":ta||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(n=this.app.selectionBounds)?void 0:n.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(R=this.app.selectionBounds)?void 0:R.rotation);break;case "top_right_corner":case "bottom_left_corner":ta||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==
(ea=this.app.selectionBounds)?void 0:ea.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ka=this.app.selectionBounds)?void 0:ka.rotation)}}},Yw=aA;yb(Yw,"id","resizing");yb(Yw,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var bA=class extends Ii{constructor(){super(...arguments);
yb(this,"cursor","rotate");yb(this,"handle","");yb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});yb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Xd.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});yb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(Wu[this.handle],
this.app.selectionRotation)}};yb(bA,"id","pointingRotateHandle");var cA=class extends Ii{constructor(){super(...arguments);yb(this,"info",{});yb(this,"onEnter",a=>{this.info=a});yb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Xd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});yb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};yb(cA,"id","pointingShapeBehindBounds");var Zw=class extends Ii{constructor(){super(...arguments);yb(this,"cursor","rotate");yb(this,"snapshot",{});yb(this,"initialCommonCenter",[0,0]);yb(this,"initialCommonBounds",{});yb(this,"initialAngle",0);yb(this,"initialSelectionRotation",0);yb(this,"handle","");yb(this,"onEnter",a=>{const {history:d,selectedShapesArray:n,selectionBounds:R}=this.app;
if(!R)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=we({},R);this.initialCommonCenter=Zf.getBoundsCenter(R);this.initialAngle=Xd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(n.map(ea=>[ea.id,{point:[...ea.props.point],center:[...ea.center],rotation:ea.props.rotation,handles:"handles"in ea?sr(ea.handles):void 0}]));this.updateCursor()});yb(this,
"onExit",()=>{this.app.history.resume();this.snapshot={}});yb(this,"onPointerMove",()=>{const {selectedShapes:a,inputs:{shiftKey:d,currentPoint:n}}=this.app,{snapshot:R,initialCommonCenter:ea,initialAngle:ka,initialSelectionRotation:ta}=this;let Ka=Xd.angle(ea,n)-ka;d&&(Ka=Pl.snapAngleToSegments(Ka,24));a.forEach(mb=>{var ub=R[mb.id];let zb=0;if(d){var {rotation:ec=0}=ub;zb=Pl.snapAngleToSegments(ec,24)-ec}const ic=Xd.sub(ub.center,ub.point);ec=Xd.rotWith(ub.center,ea,Ka);if("handles"in mb){ub=ub.handles;
const bc=ub.map($c=>Xd.rotWith($c.point,ic,Ka)),Lc=Zf.getCommonTopLeft(bc);mb.update({point:Xd.add(Lc,Xd.sub(ec,ic)),handles:ub.map(($c,tc)=>Mf(we({},$c),{point:Xd.sub(bc[tc],Lc)}))})}else mb.update({point:Xd.sub(ec,ic),rotation:Pl.clampRadians((ub.rotation||0)+Ka+zb)})});const $a=Pl.clampRadians(ta+Ka);this.app.setSelectionRotation(d?Pl.snapAngleToSegments($a,24):$a);this.updateCursor()});yb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});yb(this,
"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(this.snapshot[n.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(Wu[this.handle],this.app.selectionRotation)}};yb(Zw,"id","rotating");var dA=class extends Ii{constructor(){super(...arguments);yb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});yb(this,"onPinchEnd",()=>{this.tool.transition("idle")});yb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
yb(dA,"id","pinching");var eA=class extends Xw{constructor(){super(...arguments);yb(this,"cursor","grabbing");yb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=Ck();this.draggedBindingId=Ck();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=Gb(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};yb(eA,"id","translatingHandle");var fA=class extends Ii{constructor(){super(...arguments);
yb(this,"cursor","grabbing");yb(this,"info",{});yb(this,"onEnter",a=>{this.info=a});yb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Xd.dist(a,d)&&this.tool.transition("translatingHandle",this.info)});yb(this,"onPointerUp",()=>{this.tool.transition("idle")});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};yb(fA,"id","pointingHandle");var gA=class extends Ii{constructor(){super(...arguments);yb(this,"handle");yb(this,"onEnter",
a=>{var d;this.app.cursors.setCursor(Wu[a.handle],null!=(d=this.app.selectionBounds.rotation)?d:0);this.handle=a.handle});yb(this,"onExit",()=>{this.app.cursors.reset()});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});yb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
a);break;default:this.tool.transition("pointingResizeHandle",a)}}});yb(this,"onPointerLeave",()=>{this.tool.transition("idle")});yb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var n=this.app.selectedShapes.values().next().value;if(!n.canEdit||this.app.readOnly||n.props.isLocked)n.onResetBounds({asset:n.props.assetId?this.app.assets[n.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":null==(d=n.onResetBounds)?void 0:d.call(n,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:n})}}})}};yb(gA,"id","hoveringSelectionHandle");var hA=class extends Ii{constructor(){super(...arguments);yb(this,"editingShape",{});yb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});yb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=
this.editingShape.props.text.trim();""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});yb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",
a);break;case "canvas":a.order||this.tool.transition("idle",a)}});yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":Vb(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};yb(hA,"id","editingShape");var iA=class extends Ii{constructor(){super(...arguments);yb(this,"minimapZoom",1);yb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});yb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");
var n=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(d&&n){const R=d.getBoundingClientRect();this.minimapRect.height=R.height;this.minimapRect.width=R.width;this.minimapRect.minX=R.left;this.minimapRect.minY=R.top;this.minimapRect.maxX=R.right;this.minimapRect.maxY=R.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=Xd.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);n=n.getBoundingClientRect();n=Xd.mul(Xd.sub(a,[n.left+n.width/2,n.top+n.height/
2]),this.minimapZoom);return Xd.sub(this.app.viewport.camera.point,n)}});yb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});yb(this,"onPointerMove",(a,d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});yb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};yb(iA,"id","pointingMinimap");var vs=class extends kq{constructor(){super(...arguments);yb(this,"returnTo",
"");yb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};yb(vs,"id","select");yb(vs,"initial","idle");yb(vs,"shortcut","whiteboard/select");yb(vs,"states",[Uz,Sz,Tz,Xz,Vz,cA,Zz,Wz,gA,$z,bA,iA,fA,eA,Yz,Yw,Zw,Zw,dA,hA]);var jA=class extends Ii{constructor(){super(...arguments);yb(this,"cursor","grabbing");yb(this,"originalScreenPoint",[]);yb(this,"originalCameraPoint",[]);yb(this,"prevState","idle");yb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=
this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});yb(this,"onPointerMove",(a,d)=>{a=ye.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:ye.sub(this.originalCameraPoint,ye.div(a,this.app.viewport.camera.zoom))})});yb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};yb(jA,"id","panning");var kA=class extends Ii{constructor(){super(...arguments);yb(this,"onEnter",a=>{this.parent.prevTool&&
a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});yb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};yb(kA,"id","idle");var lA=class extends Ii{constructor(){super(...arguments);yb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});yb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};yb(lA,
"id","idleHold");var mA=class extends Ii{constructor(){super(...arguments);yb(this,"origin",[0,0]);yb(this,"prevDelta",[0,0]);yb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});yb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});yb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};yb(mA,"id","pinching");var ws=class extends kq{constructor(){super(...arguments);yb(this,"cursor","grab");yb(this,"prevTool",null);yb(this,"onEnter",a=>{this.prevTool=
null==a?void 0:a.prevTool});yb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});yb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};yb(ws,"id","move");yb(ws,"shortcut","whiteboard/pan");yb(ws,"states",[kA,lA,jA,mA]);yb(ws,"initial","idle");var ql=class{constructor(a,d={}){yb(this,"lastShapesNounces",null);yb(this,"app");yb(this,"id");yb(this,"name");yb(this,"shapes",[]);yb(this,"bindings",{});yb(this,"nonce",0);yb(this,"bringForward",
(Ka,$a)=>{const mb=this.parseShapesArg(Ka);mb.sort((ub,zb)=>this.shapes.indexOf(zb)-this.shapes.indexOf(ub)).map(ub=>this.shapes.indexOf(ub)).forEach(ub=>{if(ub!==this.shapes.length-1&&!mb.includes(this.shapes[ub+1])){var zb=this.shapes[ub];this.shapes[ub]=this.shapes[ub+1];this.shapes[ub+1]=zb}});$a||this.app.persist();return this});yb(this,"sendBackward",Ka=>{const $a=this.parseShapesArg(Ka);$a.sort((mb,ub)=>this.shapes.indexOf(mb)-this.shapes.indexOf(ub)).map(mb=>this.shapes.indexOf(mb)).forEach(mb=>
{if(0!==mb&&!$a.includes(this.shapes[mb-1])){var ub=this.shapes[mb];this.shapes[mb]=this.shapes[mb-1];this.shapes[mb-1]=ub}});this.app.persist();return this});yb(this,"bringToFront",Ka=>{const $a=this.parseShapesArg(Ka);this.shapes=this.shapes.filter(mb=>!$a.includes(mb)).concat($a);this.app.persist();return this});yb(this,"sendToBack",Ka=>{const $a=this.parseShapesArg(Ka);this.shapes=$a.concat(this.shapes.filter(mb=>!$a.includes(mb)));this.app.persist();return this});yb(this,"flip",(Ka,$a)=>{Ka=
this.parseShapesArg(Ka);const mb=Zf.getCommonBounds(Ka.map(ub=>ub.bounds));Ka.forEach(ub=>{var zb;const ec=Zf.getRelativeTransformedBoundingBox(mb,mb,ub.bounds,"horizontal"===$a,"vertical"===$a);if(ub.serialized)ub.onResize(ub.serialized,{bounds:ec,center:Zf.getBoundsCenter(ec),rotation:null!=(zb=ub.props.rotation)?zb:-0,type:"top_left_corner",scale:ub.canFlip&&ub.props.scale?"horizontal"===$a?[-ub.props.scale[0],1]:[1,-ub.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();
return this});yb(this,"getShapeById",Ka=>this.shapes.find($a=>$a.id===Ka));yb(this,"cleanup",Ka=>{Ka=xc(this.bindings,Ka);const $a=new Set;let mb=!1;const ub=sr(this.bindings);Ka.forEach(zb=>{var ec;if(this.bindings[zb.id]){var ic=this.getShapeById(zb.toId),bc=this.getShapeById(zb.fromId);ic&&bc?$a.has(bc.id)||(zb=this.updateArrowBindings(bc),$a.add(bc.id),zb&&(ic=we(we({},bc.props),zb),null==(ec=this.getShapeById(ic.id))?void 0:ec.update(ic,!1,(0,XE.default)(null==zb?void 0:zb.handles,null==bc?void 0:
bc.props.handles)))):(delete ub[zb.id],mb=!0)}});Object.keys(ub).forEach(zb=>{const ec=this.bindings[zb];0===this.shapes.filter(ic=>ic.id===ec.fromId||ic.id===ec.toId).length&&(delete ub[zb],mb=!0)});mb&&this.update({bindings:ub})});yb(this,"updateArrowBindings",Ka=>{var $a,mb,ub,zb={start:sr(Ka.props.handles.start),end:sr(Ka.props.handles.end)},ec={isBound:!1,handle:Ka.props.handles.start,point:ye.add(Ka.props.handles.start.point,Ka.props.point)},ic={isBound:!1,handle:Ka.props.handles.end,point:ye.add(Ka.props.handles.end.point,
Ka.props.point)};if(Ka.props.handles.start.bindingId){var bc=void 0!==(null==($a=Ka.props.decorations)?void 0:$a.start);$a=Ka.props.handles.start;var Lc=this.bindings[Ka.props.handles.start.bindingId],$c=this.getShapeById(null==Lc?void 0:Lc.toId);if($c){ec=$c.getBounds();var tc=$c.getExpandedBounds(),Tc=Zf.expandBounds(ec,bc?Lc.distance:1);const {minX:Oc,minY:ld,width:od,height:Qd}=tc,ge=ye.add([Oc,ld],ye.mulV([od,Qd],ye.rotWith(Lc.point,[.5,.5],$c.props.rotation||0)));ec={isBound:!0,hasDecoration:bc,
binding:Lc,handle:$a,point:ge,target:$c,bounds:ec,expandedBounds:tc,intersectBounds:Tc,center:$c.getCenter()}}}if(Ka.props.handles.end.bindingId&&(bc=void 0!==(null==(mb=Ka.props.decorations)?void 0:mb.end),mb=Ka.props.handles.end,$a=this.bindings[Ka.props.handles.end.bindingId],Lc=this.getShapeById(null==$a?void 0:$a.toId))){ic=Lc.getBounds();$c=Lc.getExpandedBounds();tc=bc?Zf.expandBounds(ic,$a.distance):ic;const {minX:Oc,minY:ld,width:od,height:Qd}=$c;Tc=ye.add([Oc,ld],ye.mulV([od,Qd],ye.rotWith($a.point,
[.5,.5],Lc.props.rotation||0)));ic={isBound:!0,hasDecoration:bc,binding:$a,handle:mb,point:Tc,target:Lc,bounds:ic,expandedBounds:$c,intersectBounds:tc,center:Lc.getCenter()}}for(const Oc of["end","start"]){mb="start"===Oc?ec:ic;const ld="start"===Oc?ic:ec;if(mb.isBound)if(mb.binding.distance){if(bc=ye.uni(ye.sub(mb.point,ld.point)),$a=D(ld.point,bc,mb.intersectBounds,mb.target.props.rotation).filter(od=>od.didIntersect).map(od=>od.points[0]).sort((od,Qd)=>ye.dist(od,ld.point)-ye.dist(Qd,ld.point)),
$a[0])if(Lc=void 0,ld.isBound&&(Lc=D(ld.point,bc,ld.intersectBounds,ld.target.props.rotation).filter(od=>od.didIntersect).map(od=>od.points[0]).sort((od,Qd)=>ye.dist(od,ld.point)-ye.dist(Qd,ld.point))[0]),ld.isBound&&(2>$a.length||Lc&&$a[0]&&10>Math.ceil(ye.dist($a[0],Lc))||Zf.boundsContain(mb.expandedBounds,ld.expandedBounds)||Zf.boundsCollide(mb.expandedBounds,ld.expandedBounds)))bc=ye.uni(ye.sub(ld.point,mb.point)),$a=D(mb.point,bc,mb.bounds,mb.target.props.rotation).filter(od=>od.didIntersect).map(od=>
od.points[0]),$a[0]&&(zb[Oc].point=ye.toFixed(ye.sub($a[0],Ka.props.point)),zb["start"===Oc?"end":"start"].point=ye.toFixed(ye.add(ye.sub($a[0],Ka.props.point),ye.mul(bc,Math.min(ye.dist($a[0],ld.point),10*(Zf.boundsContain(ld.bounds,mb.intersectBounds)?-1:1))))));else{if(!ld.isBound&&($a[0]&&10>ye.dist($a[0],ld.point)||Ok.pointInBounds(ld.point,mb.intersectBounds)))return zb=ye.uni(ye.sub(mb.center,ld.point)),null==(ub=Ka.getHandlesChange)?void 0:ub.call(Ka,Ka.props,{[Oc]:Mf(we({},Ka.props.handles[Oc]),
{point:ye.toFixed(ye.add(ye.sub(ld.point,Ka.props.point),ye.mul(zb,10)))})});$a[0]&&(zb[Oc].point=ye.toFixed(ye.sub($a[0],Ka.props.point)))}}else zb[Oc].point=ye.sub(mb.point,Ka.props.point)}return Ka.getHandlesChange(Ka.props,zb)});const {id:n,name:R,shapes:ea=[],bindings:ka={},nonce:ta}=d;this.id=n;this.name=R;this.bindings=Object.assign({},ka);this.app=a;this.nonce=ta||0;this.addShapes(...ea);Dc(this);mc(()=>{const Ka=0<this.shapes.length?Object.fromEntries(this.shapes.map($a=>[$a.id,$a.nonce])):
null;if(this.lastShapesNounces&&Ka){const $a=this.lastShapesNounces,mb=[...(new Set([...Object.keys(Ka),...Object.keys($a)]))].filter(ub=>$a[ub]!==Ka[ub]);requestAnimationFrame(()=>{this.cleanup(mb)})}Ka&&(this.lastShapesNounces=Ka)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>Gb(a)),bindings:sr(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,
a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,n)=>a.indexOf(d.id)-a.indexOf(n.id));return this}addShapes(...a){if(0!==a.length)return a="getBounds"in a[0]?a:a.map(d=>new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(n=>!d.includes(n));return d}getBindableShapes(){return this.shapes.filter(a=>
a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};De([jh],ql.prototype,"id",2);De([jh],ql.prototype,"name",2);De([jh],ql.prototype,"shapes",2);De([jh],ql.prototype,"bindings",2);De([ph],ql.prototype,"serialized",1);De([ph],ql.prototype,"shapesById",1);De([jh],ql.prototype,"nonce",2);De([Og],ql.prototype,"update",1);De([Og],ql.prototype,"updateBindings",1);De([Og],ql.prototype,"updateShapesIndex",1);De([Og],ql.prototype,"addShapes",1);De([Og],ql.prototype,"removeShapes",1);De([Og],ql.prototype,
"bringForward",2);De([Og],ql.prototype,"sendBackward",2);De([Og],ql.prototype,"bringToFront",2);De([Og],ql.prototype,"sendToBack",2);De([Og],ql.prototype,"cleanup",2);var ck=class{constructor(){yb(this,"shiftKey",!1);yb(this,"ctrlKey",!1);yb(this,"modKey",!1);yb(this,"altKey",!1);yb(this,"spaceKey",!1);yb(this,"isPinching",!1);yb(this,"currentScreenPoint",[0,0]);yb(this,"currentPoint",[0,0]);yb(this,"previousScreenPoint",[0,0]);yb(this,"previousPoint",[0,0]);yb(this,"originScreenPoint",[0,0]);yb(this,
"originPoint",[0,0]);yb(this,"pointerIds",new Set);yb(this,"state","idle");yb(this,"containerOffset",[0,0]);yb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);this.updateModifiers(d);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});yb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});yb(this,"onPointerUp",(a,d)=>
{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});yb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});yb(this,"onKeyUp",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});yb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});yb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});yb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});
Dc(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=ye.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=Tb()?a.metaKey:a.ctrlKey))}};De([jh],ck.prototype,"shiftKey",2);De([jh],ck.prototype,"ctrlKey",2);De([jh],ck.prototype,"modKey",2);De([jh],ck.prototype,"altKey",
2);De([jh],ck.prototype,"spaceKey",2);De([jh],ck.prototype,"isPinching",2);De([jh],ck.prototype,"currentScreenPoint",2);De([jh],ck.prototype,"currentPoint",2);De([jh],ck.prototype,"previousScreenPoint",2);De([jh],ck.prototype,"previousPoint",2);De([jh],ck.prototype,"originScreenPoint",2);De([jh],ck.prototype,"originPoint",2);De([jh],ck.prototype,"state",2);De([jh],ck.prototype,"containerOffset",2);De([Og],ck.prototype,"updateContainerOffset",1);De([Og],ck.prototype,"updateModifiers",1);De([Og],ck.prototype,
"onPointerDown",2);De([Og],ck.prototype,"onPointerMove",2);De([Og],ck.prototype,"onPointerUp",2);De([Og],ck.prototype,"onKeyDown",2);De([Og],ck.prototype,"onKeyUp",2);De([Og],ck.prototype,"onPinchStart",2);De([Og],ck.prototype,"onPinch",2);De([Og],ck.prototype,"onPinchEnd",2);var HE=(a,d=100)=>-(Math.cos(Math.PI*Xd.clamp(a/d,0,1))-1)/2,rr=class{constructor(){yb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});yb(this,"camera",{point:[0,0],zoom:1});yb(this,"updateBounds",a=>
{this.bounds=a;return this});yb(this,"panCamera",a=>this.update({point:Xd.sub(this.camera.point,Xd.div(a,this.camera.zoom))}));yb(this,"panToPointWhenNearBounds",a=>{const d=Xd.div([rr.panThreshold,rr.panThreshold],this.camera.zoom),n=Xd.sub([this.currentView.maxX,this.currentView.maxY],Xd.add(a,d));a=Xd.sub([this.currentView.minX,this.currentView.minY],Xd.sub(a,d));this.panCamera(Xd.mul([0>n[0]?n[0]:0<a[0]?a[0]:0,0>n[1]?n[1]:0<a[1]?a[1]:0],-rr.panMultiplier*this.camera.zoom))});yb(this,"update",
({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});yb(this,"getPagePoint",a=>{const {camera:d,bounds:n}=this;return Xd.sub(Xd.div(Xd.sub(a,[n.minX,n.minY]),d.zoom),d.point)});yb(this,"getScreenPoint",a=>{const {camera:d}=this;return Xd.mul(Xd.add(a,d.point),d.zoom)});yb(this,"onZoom",(a,d,n=!1)=>this.pinchZoom(a,[0,0],d,n));yb(this,"pinchZoom",(a,d,n,R=!1)=>{var {camera:ea}=this;d=Xd.sub(ea.point,
Xd.div(d,ea.zoom));n=Xd.clamp(n,rr.minZoom,rr.maxZoom);ea=Xd.div(a,ea.zoom);a=Xd.div(a,n);a=Xd.toFixed(Xd.add(d,Xd.sub(a,ea)));R?this.animateCamera({point:a,zoom:n}):this.update({point:a,zoom:n});return this});yb(this,"setZoom",(a,d=!1)=>{const {bounds:n}=this;this.onZoom([n.width/2,n.height/2],a,d)});yb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});yb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});yb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});
yb(this,"animateCamera",({point:a,zoom:d})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/d}));yb(this,"animateToViewport",a=>{const d=performance.now(),n=we({},this.currentView),R=()=>{var ea=performance.now()-d;ea=HE(ea);var ka=n.minX+(a.minX-n.minX)*ea;this.update({point:[-ka,-(n.minY+(a.minY-n.minY)*ea)],zoom:this.bounds.width/(n.maxX+(a.maxX-n.maxX)*ea-ka)});1>ea&&requestAnimationFrame(R)};
R()});yb(this,"zoomToBounds",({width:a,height:d,minX:n,minY:R})=>{const {bounds:ea,camera:ka}=this;let ta=Math.min((ea.width-100)/a,(ea.height-100)/d);ta=Math.min(1,Math.max(rr.minZoom,ka.zoom===ta||1>ka.zoom?Math.min(1,ta):ta));a=Xd.add([-n,-R],[(ea.width-a*ta)/2/ta,(ea.height-d*ta)/2/ta]);this.animateCamera({point:a,zoom:ta})});Dc(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:n}}=this,R=a.width/n,ea=a.height/n;return{minX:-d[0],minY:-d[1],maxX:R-d[0],maxY:ea-d[1],width:R,height:ea}}},
Ln=rr;yb(Ln,"minZoom",.1);yb(Ln,"maxZoom",4);yb(Ln,"panMultiplier",.05);yb(Ln,"panThreshold",100);De([jh],Ln.prototype,"bounds",2);De([jh],Ln.prototype,"camera",2);De([Og],Ln.prototype,"updateBounds",2);De([Og],Ln.prototype,"update",2);De([ph],Ln.prototype,"currentView",1);var IE=class{constructor(a){yb(this,"app");yb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});yb(this,"hoverShape",d=>{this.app.setHoveredShape(d);
return this});yb(this,"createShapes",(...d)=>{this.app.createShapes(d);return this});yb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);return this});yb(this,"deleteShapes",(...d)=>{this.app.deleteShapes(d.length?d:this.app.selectedShapesArray);return this});yb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});yb(this,"deselectShapes",(...d)=>{const n="string"===typeof d[0]?d:d.map(R=>R.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(R=>!n.includes(R.id)));
return this});yb(this,"flipHorizontal",(...d)=>{this.app.flipHorizontal(d);return this});yb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);return this});yb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>!this.app.shapesInGroups().includes(d)));return this});yb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});yb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});yb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});
yb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});yb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Zf.getCommonBounds(d.map(n=>n.bounds));this.app.viewport.zoomToBounds(d);return this});yb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Zf.getCommonBounds(d.map(n=>n.bounds));this.app.viewport.update({point:ye.add(ye.neg(Zf.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/
2])});return this});yb(this,"zoomToSelection",()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);return this});yb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:ye.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});yb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});yb(this,"toggleSnapToGrid",()=>{const {settings:d}=this.app;d.update({snapToGrid:!d.snapToGrid});
return this});yb(this,"togglePenMode",()=>{const {settings:d}=this.app;d.update({penMode:!d.penMode});return this});yb(this,"setColor",d=>{const {settings:n}=this.app;n.update({color:d});this.app.selectedShapesArray.forEach(R=>{R.props.isLocked||R.update({fill:d,stroke:d})});this.app.persist();return this});yb(this,"setScaleLevel",d=>{const {settings:n}=this.app;n.update({scaleLevel:d});this.app.selectedShapes.forEach(R=>{R.props.isLocked||R.setScaleLevel(d)});this.app.persist();return this});yb(this,
"undo",()=>{this.app.undo();return this});yb(this,"redo",()=>{this.app.redo();return this});yb(this,"persist",()=>{this.app.persist();return this});yb(this,"createNewLineBinding",(d,n)=>this.app.createNewLineBinding(d,n));yb(this,"clone",d=>{if(!this.app.readOnly&&1===this.app.selectedShapesArray.length&&Object.values(ns).some(ec=>ec===this.app.selectedShapesArray[0].type)){var n=this.app.allSelectedShapesArray[0],R=this.app.getShapeClass(n.type),{minX:ea,minY:ka,maxX:ta,maxY:Ka,width:$a,height:mb}=
n.bounds,ub=[0,0];switch(d){case "down":ub=[ea,Ka+100];break;case "up":ub=[ea,ka-100-mb];break;case "left":ub=[ea-100-$a,ka];break;case "right":ub=[ta+100,ka]}var zb=new R(Mf(we({},n.serialized),{id:Ck(),nonce:Date.now(),refs:[],label:"",point:ub}));this.app.history.pause();this.app.currentPage.addShapes(zb);this.app.createNewLineBinding(n,zb);this.app.history.resume();this.app.persist();setTimeout(()=>this.editShape(zb))}});yb(this,"cloneShapes",({shapes:d,assets:n,bindings:R,point:ea=[0,0]})=>{const ka=
Zf.getCommonBounds(d.filter($a=>"group"!==$a.type).map($a=>{var mb,ub,zb,ec,ic,bc,Lc,$c,tc,Tc,Oc,ld,od,Qd,ge,uf;return{minX:null!=(ub=null==(mb=$a.point)?void 0:mb[0])?ub:ea[0],minY:null!=(ec=null==(zb=$a.point)?void 0:zb[1])?ec:ea[1],width:null!=(bc=null==(ic=$a.size)?void 0:ic[0])?bc:4,height:null!=($c=null==(Lc=$a.size)?void 0:Lc[1])?$c:4,maxX:(null!=(Tc=null==(tc=$a.point)?void 0:tc[0])?Tc:ea[0])+(null!=(ld=null==(Oc=$a.size)?void 0:Oc[0])?ld:4),maxY:(null!=(Qd=null==(od=$a.point)?void 0:od[1])?
Qd:ea[1])+(null!=(uf=null==(ge=$a.size)?void 0:ge[1])?uf:4)}})),ta=d.map($a=>Mf(we({},$a),{id:Ck(),point:[ea[0]+$a.point[0]-ka.minX,ea[1]+$a.point[1]-ka.minY]}));ta.forEach($a=>{var mb;$a.children&&0<(null==(mb=$a.children)?void 0:mb.length)&&($a.children=$a.children.map(ub=>{var zb;return null==(zb=ta[d.findIndex(ec=>ec.id===ub)])?void 0:zb.id}).filter(Ic))});const Ka=[];ta.flatMap($a=>{var mb;return Object.values(null!=(mb=$a.handles)?mb:{})}).forEach($a=>{if($a.bindingId){var mb=R[$a.bindingId];
if(mb){var ub=d.findIndex(ec=>ec.id===mb.fromId);const zb=d.findIndex(ec=>ec.id===mb.toId);mb&&-1!==ub&&-1!==zb?(ub=Mf(we({},mb),{id:Ck(),fromId:ta[ub].id,toId:ta[zb].id}),Ka.push(ub),$a.bindingId=ub.id):$a.bindingId=void 0}else console.warn("binding not found",$a.bindingId)}});n=n.filter($a=>ta.some(mb=>mb.assetId===$a.id));return{shapes:ta,assets:n,bindings:Ka}});yb(this,"getClonedShapesFromTldrString",(d,n)=>{try{{var R;const mb=null==(R=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:
R[1];if(mb){try{var ea=JSON.parse(mb)}catch(ub){ea=null}var ka=ea}else ka=void 0}d=ka;if(!d)return null;const {shapes:ta,bindings:Ka,assets:$a}=d;return this.cloneShapes({shapes:ta,bindings:Ka,assets:$a,point:n})}catch(ta){console.log(ta)}return null});yb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});yb(this,"addClonedShapes",d=>{const {shapes:n,assets:R,bindings:ea}=d;0<R.length&&this.app.createAssets(R);0<n.length&&this.app.createShapes(n);
this.app.currentPage.updateBindings(Object.fromEntries(ea.map(ka=>[ka.id,ka])));this.app.selectedTool.transition("idle");return this});yb(this,"addClonedShapesFromTldrString",(d,n)=>{(d=this.getClonedShapesFromTldrString(d,n))&&this.addClonedShapes(d);return this});yb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var n=[...d.filter(R=>"group"===R.type),...d.map(R=>this.app.getParentGroup(R))].filter(Ic);this.app.currentPage.removeShapes(...n);d=d.filter(R=>"group"!==
R.type);1<d.length&&(n=this.app.getShapeClass("group"),n=new n({id:Ck(),type:n.id,parentId:this.app.currentPage.id,children:d.map(R=>R.id)}),this.app.currentPage.addShapes(n),this.app.setSelectedShapes([n]),this.app.bringForward(d,!0));this.app.persist()}});yb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(R=>"group"===R.type),...d.map(R=>this.app.getParentGroup(R))].filter(Ic);var n=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),
this.app.persist(),this.app.setSelectedShapes(n))}});yb(this,"convertShapes",(d,n=this.app.allSelectedShapesArray)=>{const R=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...n);n=n.map(ea=>new R(Mf(we({},ea.serialized),{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...n);this.app.persist();this.app.setSelectedShapes(n)});yb(this,"setCollapsed",(d,n=this.app.allSelectedShapesArray)=>{n.forEach(R=>{"logseq-portal"===R.props.type&&R.setCollapsed(d)});this.app.persist()});this.app=
a}},xs=class{constructor(){yb(this,"cursor","default");yb(this,"rotation",0);yb(this,"reset",()=>{this.cursor="default"});yb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});yb(this,"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});Dc(this)}};De([jh],xs.prototype,"cursor",2);De([jh],xs.prototype,"rotation",2);De([Og],xs.prototype,"reset",2);De([Og],xs.prototype,"setCursor",2);De([Og],xs.prototype,"setRotation",2);var ys=class{constructor(a){yb(this,
"app");yb(this,"stack",[]);yb(this,"isPaused",!0);yb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});yb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});yb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:d})});yb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});yb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});
yb(this,"instantiateShape",d=>new (this.app.getShapeClass(d.type))(d));yb(this,"deserialize",d=>{Vb(()=>{var n,{pages:R}=d;const ea=this.isPaused;this.pause();const ka=[...this.app.selectedIds];try{const ta=new Map(this.app.pages),Ka=[];for(const $a of R){const mb=ta.get($a.id);if(void 0!==mb){const ub=new Map(mb.shapes.map(zb=>[zb.props.id,zb]));R=[];for(const zb of $a.shapes){const ec=ub.get(zb.id);void 0!==ec?(ec.nonce!==zb.nonce&&(ec.update(zb,!0),ec.nonce=zb.nonce,ec.setLastSerialized(zb)),ub.delete(zb.id)):
R.push(this.instantiateShape(zb))}0<ub.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&mb.removeShapes(...ub.values());0<R.length&&mb.addShapes(...R);ta.delete($a.id);mb.updateBindings($a.bindings);mb.nonce=null!=(n=$a.nonce)?n:0}else{const {id:ub,name:zb,shapes:ec,bindings:ic,nonce:bc}=$a;Ka.push(new ql(this.app,{id:ub,name:zb,nonce:bc,bindings:ic,shapes:ec.map(Lc=>this.instantiateShape(Lc))}))}}0<Ka.length&&this.app.addPages(Ka);0<ta.size&&this.app.removePages(Array.from(ta.values()));
this.app.setSelectedShapes(ka).setErasingShapes([])}catch(ta){console.warn(ta)}ea||this.resume()})});this.app=a;Dc(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};De([jh],ys.prototype,"stack",2);De([Og],ys.prototype,"persist",2);De([Og],ys.prototype,"undo",2);De([Og],ys.prototype,"redo",2);De([Og],ys.prototype,"deserialize",2);var lq=class{constructor(){yb(this,"mode","light");yb(this,"showGrid",!0);yb(this,"snapToGrid",!0);yb(this,"penMode",!1);yb(this,"scaleLevel",
"md");yb(this,"color","");Dc(this)}update(a){Object.assign(this,a)}};De([jh],lq.prototype,"mode",2);De([jh],lq.prototype,"showGrid",2);De([jh],lq.prototype,"snapToGrid",2);De([jh],lq.prototype,"penMode",2);De([jh],lq.prototype,"scaleLevel",2);De([jh],lq.prototype,"color",2);De([Og],lq.prototype,"update",1);var Hh=class extends us{constructor(a,d,n,R){var ea,ka;super();yb(this,"uuid",Ck());yb(this,"readOnly");yb(this,"api");yb(this,"inputs",new ck);yb(this,"cursors",new xs);yb(this,"viewport",new Ln);
yb(this,"settings",new lq);yb(this,"Tools",[]);yb(this,"history",new ys(this));yb(this,"persist",this.history.persist);yb(this,"undo",this.history.undo);yb(this,"redo",this.history.redo);yb(this,"saving",!1);yb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});yb(this,"load",()=>{this.notify("load",null);return this});yb(this,"save",()=>{this.notify("save",null);return this});yb(this,"pages",new Map([["page",new ql(this,
{id:"page",name:"page",shapes:[],bindings:{}})]]));yb(this,"getPageById",ta=>{const Ka=this.pages.get(ta);if(!Ka)throw Error(`Could not find a page named ${ta}.`);return Ka});yb(this,"getShapeById",(ta,Ka=this.currentPage.id)=>{var $a;return null==($a=this.getPageById(Ka))?void 0:$a.shapesById[ta]});yb(this,"createShapes",ta=>{if(this.readOnly)return this;(ta=this.currentPage.addShapes(...ta))&&this.notify("create-shapes",ta);this.persist();return this});yb(this,"updateShapes",ta=>{if(this.readOnly)return this;
ta.forEach(Ka=>{const $a=this.getShapeById(Ka.id);null==$a?void 0:$a.update(Ka);Ka.type!==(null==$a?void 0:$a.type)&&this.api.convertShapes(Ka.type,[$a])});this.persist();return this});yb(this,"deleteShapes",ta=>{if(0===ta.length||this.readOnly)return this;ta=ta.map(ub=>"string"===typeof ub?this.getShapeById(ub):ub).filter(Ic).filter(ub=>!ub.props.isLocked);const Ka=this.shapesInGroups(ta);ta.forEach(ub=>{this.getParentGroup(ub)&&Ka.push(ub)});let $a=new Set([...ta,...Ka].map(ub=>ub.id));Ka.forEach(ub=>
{var zb;const ec=this.getParentGroup(ub);if(ec){const ic=null==(zb=ec.props.children)?void 0:zb.filter(bc=>bc!==ub.id);!ic||1>=(null==ic?void 0:ic.length)?$a.add(ec.id):ec.update({children:ic})}});const mb=(ub,zb)=>{var ec;[...$a].includes(ub)&&"line"===(null==(ec=this.getShapeById(zb))?void 0:ec.type)&&$a.add(zb)};this.currentPage.shapes.filter(ub=>!ub.props.isLocked).flatMap(ub=>{var zb;return Object.values(null!=(zb=ub.props.handles)?zb:{})}).flatMap(ub=>ub.bindingId).filter(Ic).map(ub=>{var zb,
ec;const ic=null==(zb=this.currentPage.bindings[ub])?void 0:zb.toId;ub=null==(ec=this.currentPage.bindings[ub])?void 0:ec.fromId;ic&&ub&&(mb(ic,ub),mb(ub,ic))});ta=[...$a].map(ub=>this.getShapeById(ub));this.setSelectedShapes(this.selectedShapesArray.filter(ub=>!$a.has(ub.id)));(ta=this.currentPage.removeShapes(...ta))&&this.notify("delete-shapes",ta);this.persist();return this});yb(this,"bringForward",(ta=this.selectedShapesArray,Ka)=>{0<ta.length&&!this.readOnly&&this.currentPage.bringForward(ta,
Ka);return this});yb(this,"sendBackward",(ta=this.selectedShapesArray)=>{0<ta.length&&!this.readOnly&&this.currentPage.sendBackward(ta);return this});yb(this,"sendToBack",(ta=this.selectedShapesArray)=>{0<ta.length&&!this.readOnly&&this.currentPage.sendToBack(ta);return this});yb(this,"bringToFront",(ta=this.selectedShapesArray)=>{0<ta.length&&!this.readOnly&&this.currentPage.bringToFront(ta);return this});yb(this,"flipHorizontal",(ta=this.selectedShapesArray)=>{this.currentPage.flip(ta,"horizontal");
return this});yb(this,"flipVertical",(ta=this.selectedShapesArray)=>{this.currentPage.flip(ta,"vertical");return this});yb(this,"align",(ta,Ka=this.selectedShapesArray)=>{if(2>Ka.length||this.readOnly)return this;const $a=Ka.map(ic=>{const bc=ic.getBounds();return{id:ic.id,point:[bc.minX,bc.minY],bounds:bc}}),mb=Zf.getCommonBounds($a.map(({bounds:ic})=>ic)),ub=mb.minX+mb.width/2,zb=mb.minY+mb.height/2,ec=Object.fromEntries($a.map(({id:ic,point:bc,bounds:Lc})=>[ic,{prev:bc,next:{top:[bc[0],mb.minY],
centerVertical:[bc[0],zb-Lc.height/2],bottom:[bc[0],mb.maxY-Lc.height],left:[mb.minX,bc[1]],centerHorizontal:[ub-Lc.width/2,bc[1]],right:[mb.maxX-Lc.width,bc[1]]}[ta]}]));Ka.forEach(ic=>{ec[ic.id]&&ic.update({point:ec[ic.id].next})});this.persist();return this});yb(this,"distribute",(ta,Ka=this.selectedShapesArray)=>{if(2>Ka.length||this.readOnly)return this;const $a=Object.fromEntries(Zf.getDistributions(Ka,ta).map(mb=>[mb.id,mb]));Ka.forEach(mb=>{$a[mb.id]&&mb.update({point:$a[mb.id].next})});this.persist();
return this});yb(this,"packIntoRectangle",(ta=this.selectedShapesArray)=>{if(2>ta.length||this.readOnly)return this;const Ka=Object.fromEntries(Zf.getPackedDistributions(ta).map($a=>[$a.id,$a]));ta.forEach($a=>{Ka[$a.id]&&$a.update({point:Ka[$a.id].next})});this.persist();return this});yb(this,"setLocked",ta=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(Ka=>{Ka.update({isLocked:ta})});this.persist();return this});yb(this,"assets",{});yb(this,
"removeUnusedAssets",()=>{const ta=this.getCleanUpAssets();Object.keys(this.assets).forEach(Ka=>{ta.some($a=>$a.id===Ka)||delete this.assets[Ka]});this.persist();return this});yb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const Ka=this.allSelectedShapesArray;var ta=JSON.stringify({shapes:Ka.map(mb=>mb.serialized),assets:this.getCleanUpAssets().filter(mb=>Ka.some(ub=>ub.props.assetId===mb.id)),bindings:Gb(this.currentPage.bindings)});ta=encodeURIComponent(`<whiteboard-tldr>${ta}</whiteboard-tldr>`);
const $a=this.selectedShapesArray.map(mb=>`((${mb.props.id}))`).join(" ");this.notify("copy",{text:$a,html:ta})}});yb(this,"paste",(ta,Ka)=>{var $a;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!Ka,dataTransfer:null!=($a=null==ta?void 0:ta.clipboardData)?$a:void 0})});yb(this,"cut",()=>{this.copy();this.api.deleteShapes()});yb(this,"drop",(ta,Ka)=>{this.notify("drop",{dataTransfer:ta,point:Ka?this.viewport.getPagePoint(Ka):Zf.getBoundsCenter(this.viewport.currentView)})});
yb(this,"selectTool",(ta,Ka={})=>{this.readOnly&&!["select","move"].includes(ta)||this.transition(ta,Ka)});yb(this,"editingId");yb(this,"setEditingShape",ta=>{this.editingId="string"===typeof ta?ta:null==ta?void 0:ta.id;return this});yb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});yb(this,"hoveredId");yb(this,"setHoveredShape",ta=>{this.hoveredId="string"===typeof ta?ta:null==ta?void 0:ta.id;return this});yb(this,"selectedIds",new Set);yb(this,
"selectedShapes",new Set);yb(this,"selectionRotation",0);yb(this,"setSelectedShapes",ta=>{var Ka;const {selectedIds:$a,selectedShapes:mb}=this;$a.clear();mb.clear();ta[0]&&"string"===typeof ta[0]?ta.forEach(zb=>$a.add(zb)):ta.forEach(zb=>$a.add(zb.id));const ub=this.currentPage.shapes.filter(zb=>$a.has(zb.id));ub.forEach(zb=>mb.add(zb));this.selectionRotation=1===ub.length?null!=(Ka=ub[0].props.rotation)?Ka:0:0;0===ta.length&&this.setEditingShape();return this});yb(this,"erasingIds",new Set);yb(this,
"erasingShapes",new Set);yb(this,"setErasingShapes",ta=>{const {erasingIds:Ka,erasingShapes:$a}=this;Ka.clear();$a.clear();ta[0]&&"string"===typeof ta[0]?ta.forEach(mb=>Ka.add(mb)):ta.forEach(mb=>Ka.add(mb.id));this.currentPage.shapes.filter(mb=>Ka.has(mb.id)).forEach(mb=>$a.add(mb));return this});yb(this,"bindingIds");yb(this,"setBindingShapes",ta=>{this.bindingIds=ta;return this});yb(this,"clearBindingShape",()=>this.setBindingShapes());yb(this,"createNewLineBinding",(ta,Ka)=>{ta="string"===typeof ta?
this.getShapeById(ta):ta;Ka="string"===typeof Ka?this.getShapeById(Ka):Ka;if((null==ta?0:ta.canBind)&&(null==Ka?0:Ka.canBind)&&(Ka=wd(ta,Ka))){const [$a,mb]=Ka;this.createShapes([$a]);this.currentPage.updateBindings(Object.fromEntries(mb.map(ub=>[ub.id,ub])));this.persist();return!0}return!1});yb(this,"brush");yb(this,"setBrush",ta=>{this.brush=ta;return this});yb(this,"setCamera",(ta,Ka)=>{this.viewport.update({point:ta,zoom:Ka});return this});yb(this,"getPagePoint",ta=>{const {camera:Ka}=this.viewport;
return Xd.sub(Xd.div(ta,Ka.zoom),Ka.point)});yb(this,"getScreenPoint",ta=>{const {camera:Ka}=this.viewport;return Xd.mul(Xd.add(ta,Ka.point),Ka.zoom)});yb(this,"Shapes",new Map);yb(this,"registerShapes",ta=>{ta.forEach(Ka=>{if("group"===Ka.id){const $a=this;Ka.prototype.getShapes=function(){var mb,ub;return null!=(ub=null==(mb=this.props.children)?void 0:mb.map(zb=>$a.getShapeById(zb)).filter(Boolean))?ub:[]}}return this.Shapes.set(Ka.id,Ka)})});yb(this,"deregisterShapes",ta=>{ta.forEach(Ka=>this.Shapes.delete(Ka.id))});
yb(this,"getShapeClass",ta=>{if(!ta)throw Error("No shape type provided.");const Ka=this.Shapes.get(ta);if(!Ka)throw Error(`Could not find shape class for ${ta}`);return Ka});yb(this,"wrapUpdate",ta=>{Vb(()=>{const Ka=!this.history.isPaused;Ka&&this.history.pause();ta();Ka&&(this.history.resume(),this.persist())})});yb(this,"subscriptions",new Set([]));yb(this,"subscribe",(ta,Ka)=>{if(void 0===Ka)throw Error("Callback is required.");const $a={event:ta,callback:Ka};this.subscriptions.add($a);return()=>
this.unsubscribe($a)});yb(this,"unsubscribe",ta=>{this.subscriptions.delete(ta);return this});yb(this,"notify",(ta,Ka)=>{this.subscriptions.forEach($a=>{$a.event===ta&&$a.callback(this,Ka)});return this});yb(this,"onTransition",()=>{});yb(this,"onPointerDown",(ta,Ka)=>{if(!this.editingShape&&1===Ka.button&&!this.isIn("move"))this.temporaryTransitionToMove(Ka);else if(2===Ka.button&&!this.editingShape)Ka.preventDefault(),this.transition("select");else if("clientX"in Ka)this.inputs.onPointerDown([...this.viewport.getPagePoint([Ka.clientX,
Ka.clientY]),Ka.pressure],Ka)});yb(this,"onPointerUp",(ta,Ka)=>{if(!this.editingShape&&1===Ka.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ka.stopPropagation(),Ka.preventDefault();else if("clientX"in Ka)this.inputs.onPointerUp([...this.viewport.getPagePoint([Ka.clientX,Ka.clientY]),Ka.pressure],Ka)});yb(this,"onPointerMove",(ta,Ka)=>{if("clientX"in Ka)this.inputs.onPointerMove([...this.viewport.getPagePoint([Ka.clientX,Ka.clientY]),Ka.pressure],Ka)});yb(this,"onKeyDown",
(ta,Ka)=>{if(this.editingShape||" "!==Ka.key||this.isIn("move"))this.inputs.onKeyDown(Ka);else this.temporaryTransitionToMove(Ka)});yb(this,"onKeyUp",(ta,Ka)=>{if(!this.editingShape&&" "===Ka.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ka.stopPropagation(),Ka.preventDefault();else this.inputs.onKeyUp(Ka)});yb(this,"onPinchStart",(ta,Ka)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(ta.point),.5],Ka)});yb(this,"onPinch",(ta,Ka)=>{this.inputs.onPinch([...this.viewport.getPagePoint(ta.point),
.5],Ka)});yb(this,"onPinchEnd",(ta,Ka)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(ta.point),.5],Ka)});this._states=[vs,ws];this.readOnly=R;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),R=null!=(ea=this.initial)?ea:this.states[0].id,ea=this.children.get(R))&&(this.currentState=ea,null==(ka=this.currentState)?void 0:ka._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);n&&this.registerTools(n);this.history.resume();a&&this.history.deserialize(a);
this.api=new IE(this);Dc(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>
d.props.children).filter(Ic).map(d=>this.getShapeById(d)).filter(Ic)}getParentGroup(a){return this.shapes.find(d=>{var n;return null==(n=d.props.children)?void 0:n.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):a.forEach(d=>delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(n=>{n.props.assetId&&this.assets[n.props.assetId]&&
a.add(this.assets[n.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=this;return a?d.shapes.find(n=>n.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(n=>n.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=
this;return a?this.shapes.find(d=>{var n;return"group"===d.type&&(null==(n=d.props.children)?void 0:n.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;
const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(R=>{var ea;return Object.values(null!=(ea=R.props.handles)?ea:{})}).flatMap(R=>R.bindingId).filter(Ic).flatMap(R=>{var ea,ka;return[null==(ea=this.currentPage.bindings[R])?void 0:ea.fromId,null==(ka=this.currentPage.bindings[R])?void 0:ka.toId]}).filter(Ic):[],n=[...(null!=(a=this.bindingIds)?a:[]),...d];return n?this.currentPage.shapes.filter(R=>null==n?void 0:n.includes(R.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;
return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:d,viewport:{currentView:n}}=this;return d.shapes.filter(R=>!R.canUnmount||a.has(R)||Zf.boundsContain(n,R.rotatedBounds)||Zf.boundsCollide(n,R.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!Zf.boundsContain(d,a)&&!Zf.boundsCollide(d,a)){var n=Zf.getBoundsCenter(a);return Xd.clampV([(n[0]-
d.minX-d.width/2)/d.width,(n[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?Mf(we({},a[0].bounds),{rotation:a[0].props.rotation}):Zf.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}get showCloneHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape")&&1===a.length&&Object.values(ns).some(d=>d===this.selectedShapesArray[0].type)&&!this.readOnly}temporaryTransitionToMove(a){a.stopPropagation();a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};yb(Hh,"id","app");yb(Hh,"initial","select");De([ph],Hh.prototype,"serialized",1);De([jh],Hh.prototype,"pages",2);De([ph],
Hh.prototype,"currentPageId",1);De([ph],Hh.prototype,"currentPage",1);De([Og],Hh.prototype,"addPages",1);De([Og],Hh.prototype,"removePages",1);De([Og],Hh.prototype,"createShapes",2);De([Og],Hh.prototype,"updateShapes",2);De([Og],Hh.prototype,"deleteShapes",2);De([jh],Hh.prototype,"assets",2);De([Og],Hh.prototype,"addAssets",1);De([Og],Hh.prototype,"removeAssets",1);De([Og],Hh.prototype,"removeUnusedAssets",2);De([ph],Hh.prototype,"selectedTool",1);De([jh],Hh.prototype,"editingId",2);De([ph],Hh.prototype,
"editingShape",1);De([Og],Hh.prototype,"setEditingShape",2);De([jh],Hh.prototype,"hoveredId",2);De([ph],Hh.prototype,"hoveredShape",1);De([ph],Hh.prototype,"hoveredGroup",1);De([Og],Hh.prototype,"setHoveredShape",2);De([jh],Hh.prototype,"selectedIds",2);De([jh],Hh.prototype,"selectedShapes",2);De([jh],Hh.prototype,"selectionRotation",2);De([ph],Hh.prototype,"selectedShapesArray",1);De([ph],Hh.prototype,"allSelectedShapes",1);De([ph],Hh.prototype,"allSelectedShapesArray",1);De([Og],Hh.prototype,"setSelectedShapes",
2);De([Og],Hh.prototype,"setSelectionRotation",1);De([jh],Hh.prototype,"erasingIds",2);De([jh],Hh.prototype,"erasingShapes",2);De([ph],Hh.prototype,"erasingShapesArray",1);De([Og],Hh.prototype,"setErasingShapes",2);De([jh],Hh.prototype,"bindingIds",2);De([ph],Hh.prototype,"bindingShapes",1);De([Og],Hh.prototype,"setBindingShapes",2);De([Og],Hh.prototype,"createNewLineBinding",2);De([jh],Hh.prototype,"brush",2);De([Og],Hh.prototype,"setBrush",2);De([Og],Hh.prototype,"setCamera",2);De([ph],Hh.prototype,
"currentGrid",1);De([ph],Hh.prototype,"shapes",1);De([ph],Hh.prototype,"shapesInViewport",1);De([ph],Hh.prototype,"selectionDirectionHint",1);De([ph],Hh.prototype,"selectionBounds",1);De([ph],Hh.prototype,"showSelection",1);De([ph],Hh.prototype,"showSelectionDetail",1);De([ph],Hh.prototype,"showSelectionRotation",1);De([ph],Hh.prototype,"showContextBar",1);De([ph],Hh.prototype,"showRotateHandles",1);De([ph],Hh.prototype,"showResizeHandles",1);De([ph],Hh.prototype,"showCloneHandles",1);var JE=Function.prototype.toString,
$w=Object.create,KE=Object.prototype.toString,LE=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,n){this._keys.push(d);this._values.push(n)};return a}(),ME="undefined"!==typeof WeakMap?re:ke,NE="g"===/test/g.flags?of:Gf,OE="undefined"!==typeof Symbol?qf:Lf,PE=Object.defineProperty,QE=Object.getOwnPropertyDescriptor,nA=Object.getOwnPropertyNames,
ax=Object.getOwnPropertySymbols,oA=Object.prototype,pA=oA.hasOwnProperty,RE=oA.propertyIsEnumerable,qA="function"===typeof ax,SE=qA?dg:nA,TE=Array.isArray,bx=Object.assign,UE=Object.getPrototypeOf,rA={array:function(a,d){var n=new d.Constructor;d.cache.set(a,n);for(var R=0,ea=a.length;R<ea;++R)n[R]=d.copier(a[R],d);return n},arrayBuffer:function(a,d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,
d){return new d.Constructor(a.getTime())},error:Fh,map:Vg,object:qA?Wg:eg,regExp:function(a,d){d=new d.Constructor(a.source,NE(a));d.lastIndex=a.lastIndex;return d},set:ui},VE=bx({},rA,{array:function(a,d){var n=new d.Constructor;d.cache.set(a,n);return ah(a,n,d)},map:function(a,d){return ah(a,Vg(a,d),d)},object:function(a,d){var n=Ee(d.prototype);d.cache.set(a,n);return ah(a,n,d)},set:function(a,d){return ah(a,ui(a,d),d)}});Ri(bx({},VE,{}));var WE=Ri({}),XE=pg(QD()),YE=pg(RD()),sr=WE,ln=class{static insertTextFirefox(a,
d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const n=a.ownerDocument,R=n.activeElement;R!==a&&a.focus();n.execCommand("insertText",!1,d)||ln.insertTextFirefox(a,d);R===n.body?a.blur():R instanceof HTMLElement&&R!==a&&R.focus()}static set(a,d){a.select();ln.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:n}=a;return a.value.slice(d?d:void 0,n?n:void 0)}static wrapSelection(a,
d,n){const {selectionStart:R,selectionEnd:ea}=a,ka=ln.getSelection(a);ln.insert(a,d+ka+(null!=n?n:d));a.selectionStart=(R||0)+d.length;a.selectionEnd=(ea||0)+d.length}static replace(a,d,n){let R=0;a.value.replace(d,(...ea)=>{const ka=R+ea[ea.length-2],ta=ea[0].length;a.selectionStart=ka;a.selectionEnd=ka+ta;ea="string"===typeof n?n:n(...ea);ln.insert(a,ea);a.selectionStart=ka;R+=ea.length-ta;return ea})}static findLineEnd(a,d){const n=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(n)?d:n+1}static indent(a){var d;
const {selectionStart:n,selectionEnd:R,value:ea}=a;var ka=ea.slice(n,R);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=ea.lastIndexOf("\n",n-1)+1;var ta=a.value.slice(d,R-1);ka=ta.replace(/^|\n/g,`$&${ln.INDENT}`);ta=ka.length-ta.length;a.setSelectionRange(d,R-1);ln.insert(a,ka);a.setSelectionRange(n+1,R+ta)}else ln.insert(a,ln.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:n,value:R}=a;var ea=R.lastIndexOf("\n",d-1)+1;const ka=ln.findLineEnd(R,n);var ta=a.value.slice(ea,
ka);const Ka=ta.replace(/(^|\n)(\t| {1,2})/g,"$1");ta=ta.length-Ka.length;a.setSelectionRange(ea,ka);ln.insert(a,Ka);ea=(ea=/\t| {1,2}/.exec(R.slice(ea,d)))?ea[0].length:0;a.setSelectionRange(d-ea,Math.max(d-ea,n-ta))}static normalizeText(a){return a.replace(ln.fixNewLines,"\n")}},zs=ln;yb(zs,"fixNewLines",/\r?\n|\r/g);yb(zs,"INDENT","  ");var mq;"undefined"!==typeof window&&(mq=tg());var cx=new Map,sA=Tb()?"⌘":"ctrl",ZE=class extends Hh{},tA=pg(ca(22)),$E=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var uA=pg(ca(22)),dx={},Ot=pg(ca(22)),aF=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},ex=pg(ca(22)),fx=new Map,bF={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",
binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},cF=((a,...d)=>a.reduce((n,R,ea)=>n+R+(ea<d.length?d[ea]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: calc(64px / var(--tl-zoom));;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle:hover {
    fill: var(--tl-selectStroke);
    cursor: pointer; 
  }

  .tl-clone-handle:hover line {
    stroke: var(--tl-background);
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,vA=pg(ca(22)),wA=pg(ca(22)),gx={},dk={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},xA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},dF=["enter","leave"],eF=["gotpointercapture","lostpointercapture"],
yA=class{constructor(a,d,n){this.ctrl=a;this.args=d;this.key=n;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:n,args:R}=this;d[n]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=R;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,n=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=n.from?Sg(n.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:n,shared:R}=this;d.args=this.args;var ea=0;if(a){d.event=a;n.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;R.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;R.locked=!!document.pointerLockElement;ea=Object;var ka=ea.assign,ta={};"buttons"in a&&(ta.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:ld,altKey:od,metaKey:Qd,ctrlKey:ge}=a;Object.assign(ta,{shiftKey:ld,altKey:od,metaKey:Qd,ctrlKey:ge})}ka.call(ea,R,ta);R.down=R.pressed=1===R.buttons%2||0<R.touches;ea=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(ka=d._delta.map(Math.abs),dk.addTo(d._distance,ka));this.axisIntent&&
this.axisIntent(a);const [Ka,$a]=d._movement,[mb,ub]=n.threshold,{_step:zb,values:ec}=d;n.hasCustomTransform?(!1===zb[0]&&(zb[0]=Math.abs(Ka)>=mb&&ec[0]),!1===zb[1]&&(zb[1]=Math.abs($a)>=ub&&ec[1])):(!1===zb[0]&&(zb[0]=Math.abs(Ka)>=mb&&Math.sign(Ka)*mb),!1===zb[1]&&(zb[1]=Math.abs($a)>=ub&&Math.sign($a)*ub));d.intentional=!1!==zb[0]||!1!==zb[1];if(d.intentional){ka=[0,0];if(n.hasCustomTransform){const [ld,od]=ec;ka[0]=!1!==zb[0]?ld-zb[0]:0;ka[1]=!1!==zb[1]?od-zb[1]:0}else ka[0]=!1!==zb[0]?Ka-zb[0]:
0,ka[1]=!1!==zb[1]?$a-zb[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(ka);ta=d.offset;var ic=d._active&&!d._blocked||d.active;ic&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=R[this.ingKey]=d._active,a&&(d.first&&("bounds"in n&&(d._bounds=Sg(n.bounds,d)),this.setup&&this.setup()),d.movement=ka,this.computeOffset()));var [bc,Lc]=d.offset,[[$c,tc],[Tc,Oc]]=d._bounds;d.overflow=[bc<$c?-1:bc>tc?1:0,Lc<Tc?-1:Lc>Oc?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?
d._movement[0]:d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=Nf(d._bounds,d.offset,d._active?n.rubberband||[0,0]:[0,0]);d.delta=dk.sub(d.offset,ta);this.computeMovement();ic&&(!d.last||32<ea)&&(d.delta=dk.sub(d.offset,ta),a=d.delta.map(Math.abs),dk.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<ea&&(d.velocity=[a[0]/ea,a[1]/ea]))}}emit(){const a=this.state;var d=
this.shared;const n=this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||n.triggerAllEvents)d=this.handler(Ff(Ff(Ff({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Pt=class extends yA{constructor(...a){super(...a);fg(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=dk.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=dk.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,n=this.config;!d.axis&&a&&(a="object"===typeof n.axisThreshold?n.axisThreshold[Zg(a)]:n.axisThreshold,d.axis=Ti(d._movement,a));d._blocked=(n.lockDirection||!!n.axis)&&!d.axis||!!n.axis&&n.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},fF=a=>a,zA={enabled(a=!0){return a},
eventOptions(a,d,n){return Ff(Ff({},n.shared.eventOptions),a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return dk.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return dk.toVector(a)},transform(a,d,n){a=a||n.shared.transform;this.hasCustomTransform=!!a;return a||fF},threshold(a){return dk.toVector(a,0)}},tr=Ff(Ff({},zA),{},{axis(a,d,{axis:n}){this.lockDirection="lock"===n;if(!this.lockDirection)return n},
axisThreshold(a=0){return a},bounds(a={}){if("function"===typeof a)return ka=>tr.bounds(a(ka));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:n=Infinity,top:R=-Infinity,bottom:ea=Infinity}=a;return[[d,n],[R,ea]]}}),AA={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},gF=class extends Pt{constructor(...a){super(...a);fg(this,"ingKey","dragging")}reset(){super.reset();
const a=this.state;a._pointerId=void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),n=a.currentTarget.getBoundingClientRect();a._bounds=tr.bounds({left:d.left-n.left+a.offset[0],right:d.right-n.right+a.offset[0],top:d.top-n.top+a.offset[1],bottom:d.bottom-n.bottom+a.offset[1]})}}cancel(){const a=
this.state;a.canceled||(a.canceled=!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,n=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var R=this.ctrl.setEventIds(a);
d.pointerCapture&&a.target.setPointerCapture(a.pointerId);R&&1<R.size&&n._pointerActive||(this.start(a),this.setupPointer(a),n._pointerId=Rg(a),n._pointerActive=!0,this.computeValues(kg(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==Zg(a)?(n._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);
this.emit()}pointerMove(a){const d=this.state,n=this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var R=Rg(a);if(void 0===d._pointerId||R===d._pointerId)R=kg(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=dk.sub(R,d._values),this.computeValues(R)),dk.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):n.preventScrollAxis&&!d._preventScroll?
d.axis&&(d.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(ta){}const d=this.state,n=this.config;if(d._active&&d._pointerActive){var R=Rg(a);if(void 0===d._pointerId||R===d._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(a);var [ea,ka]=d._distance;d.tap=ea<=n.tapsThreshold&&ka<=n.tapsThreshold;if(d.tap&&n.filterTaps)d._force=!0;else{const [ta,Ka]=d.direction,[$a,mb]=d.velocity,[ub,zb]=d.movement,[ec,ic]=n.swipe.velocity,[bc,Lc]=n.swipe.distance;d.elapsedTime<n.swipe.duration&&(Math.abs($a)>ec&&Math.abs(ub)>bc&&(d.swipe[0]=ta),Math.abs(mb)>ic&&Math.abs(zb)>Lc&&(d.swipe[1]=Ka))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,
n=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&
a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=AA[a.key];if(d){const n=this.state,R=a.shiftKey?10:a.altKey?.1:1;this.start(a);n._delta=d(R);n._keyboardActive=!0;dk.addTo(n._movement,n._delta);this.compute(a);this.emit()}}keyUp(a){a.key in AA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},ur="undefined"!==typeof window&&window.document&&window.document.createElement;try{var BA="constructor"in GestureEvent}catch(a){BA=!1}var hF=
BA,Qt=ur&&"ontouchstart"in window||ur&&1<window.navigator.maxTouchPoints,CA=ur&&"ontouchstart"in window||ur&&1<window.navigator.maxTouchPoints,DA=ur&&"onpointerdown"in window,iF=ur&&"exitPointerLock"in window.document,EA={mouse:0,touch:0,pen:8},jF=Ff(Ff({},tr),{},{device(a,d,{pointer:{touch:n=!1,lock:R=!1,mouse:ea=!1}={}}){this.pointerLock=R&&iF;return Qt&&n?"touch":this.pointerLock?"mouse":DA&&!ea?"pointer":Qt?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:n}){this.preventScrollDelay="number"===
typeof n?n:n||void 0===n&&a?250:void 0;if(CA&&!1!==n)return a?a:void 0!==n?"y":void 0},pointerCapture(a,d,{pointer:{capture:n=!0,buttons:R=1,keys:ea=!0}={}}){this.pointerButtons=R;this.keys=ea;return!this.pointerLock&&"pointer"===this.device&&n},threshold(a,d,{filterTaps:n=!1,tapsThreshold:R=3,axis:ea}){a=dk.toVector(a,n?R:ea?1:0);this.filterTaps=n;this.tapsThreshold=R;return a},swipe({velocity:a=.5,distance:d=50,duration:n=250}={}){return{velocity:this.transform(dk.toVector(a)),distance:this.transform(dk.toVector(d)),
duration:n}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;default:return a}},axisThreshold(a){return a?Ff(Ff({},EA),a):EA}}),kF=class extends yA{constructor(...a){super(...a);fg(this,"ingKey","pinching");fg(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:n}=
this.state;this.state.offset="wheel"===a?dk.add(d,n):[(1+d[0])*n[0],d[1]+n[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,n]=a._movement;if(!a.axis){const R=30*Math.abs(d)-Math.abs(n);0>R?a.axis="angle":0<R&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=
!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);var d=this.state;const n=this.ctrl.touchIds;d._active&&d._touchIds.every(R=>n.has(R))||2>n.size||(this.start(a),d._touchIds=Array.from(n).slice(0,2),d=zf(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,n=d._pointerEvents,R=this.ctrl.pointerIds;d._active&&Array.from(n.keys()).every(ea=>R.has(ea))||
(2>n.size&&n.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=yf(...Array.from(n.values())),this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=zf(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=yf(...Array.from(d.values())),this.pinchMove(a,
d))}pinchMove(a,d){const n=this.state,R=d.angle-n._values[1];let ea=0;270<Math.abs(R)&&(ea+=Math.sign(R));this.computeValues([d.distance,d.angle-360*ea]);n.origin=d.origin;n.turns=ea;n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);
try{a.target.releasePointerCapture(a.pointerId)}catch(n){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,
a.rotation]);d.origin=[a.clientX,a.clientY];var n=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=dk.sub(d._movement,n);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();
const d=this.state;d._delta=[-xi(a)[1]/100*d.offset[0],0];dk.addTo(d._movement,d._delta);nk(d);this.state.origin=[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),
{passive:!1})}},lF=Ff(Ff({},zA),{},{device(a,d,{shared:n,pointer:{touch:R=!1}={}}){if(n.target&&!Qt&&hF)return"gesture";if(Qt&&R)return"touch";if(CA){if(DA)return"pointer";if(Qt)return"touch"}},bounds(a,d,{scaleBounds:n={},angleBounds:R={}}){const ea=ta=>{ta=Sg(n,ta);ta=Object.assign({},{min:-Infinity,max:Infinity},ta||{});return[ta.min,ta.max]},ka=ta=>{ta=Sg(R,ta);ta=Object.assign({},{min:-Infinity,max:Infinity},ta||{});return[ta.min,ta.max]};return"function"!==typeof n&&"function"!==typeof R?[ea(),
ka()]:ta=>[ea(ta),ka(ta)]},threshold(a,d,n){this.lockDirection="lock"===n.axis;return dk.toVector(a,this.lockDirection?[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),mF=class extends Pt{constructor(...a){super(...a);fg(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(kg(a));
this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=kg(a),n=this.state;n._delta=dk.sub(d,n._values);dk.addTo(n._movement,n._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},nF=Ff(Ff({},tr),{},{mouseOnly:(a=!0)=>a}),oF=class extends Pt{constructor(...a){super(...a);fg(this,
"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var n,R;const {scrollX:ea,scrollY:ka,scrollLeft:ta,scrollTop:Ka}=a.currentTarget;var $a=[null!==(n=null!==ea&&void 0!==ea?ea:ta)&&void 0!==n?n:0,null!==(R=null!==ka&&void 0!==ka?ka:Ka)&&void 0!==R?R:0];d._delta=dk.sub($a,d._values);dk.addTo(d._movement,d._delta);this.computeValues($a);
this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll","",this.scroll.bind(this))}},pF=tr,qF=class extends Pt{constructor(...a){super(...a);fg(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=xi(a);dk.addTo(d._movement,d._delta);nk(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&
(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},rF=tr,sF=class extends Pt{constructor(...a){super(...a);fg(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(kg(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var n=kg(a);d._movement=d._delta=dk.sub(n,d._values);this.computeValues(n);this.compute(a);
d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},tF=Ff(Ff({},tr),{},{mouseOnly:(a=!0)=>a}),hx=new Map,ix=new Map,uF={key:"drag",engine:gF,resolver:jF},vF={key:"hover",engine:sF,resolver:tF},wF={key:"move",engine:mF,resolver:nF},xF={key:"pinch",engine:kF,resolver:lF},yF={key:"scroll",engine:oF,resolver:pF},zF={key:"wheel",engine:qF,resolver:rF},jx=pg(ca(22)),AF={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=
!0){return a},window(a=ur?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},BF=["target","eventOptions","window","enabled","transform"],FA=class{constructor(a,d){fg(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,n,R,ea){const ka=this._listeners,ta=Vh(d,n),Ka=Ff(Ff({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),ea);a.addEventListener(ta,R,Ka);const $a=()=>{a.removeEventListener(ta,
R,Ka);ka.delete($a)};ka.add($a);return $a}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},CF=class{constructor(){fg(this,"_timeouts",new Map)}add(a,d,n=140,...R){this.remove(a);this._timeouts.set(a,window.setTimeout(d,n,...R))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},DF=class{constructor(a){fg(this,"gestures",new Set);fg(this,"_targetEventStore",new FA(this));fg(this,"gestureEventStores",
{});fg(this,"gestureTimeoutStores",{});fg(this,"handlers",{});fg(this,"config",{});fg(this,"pointerIds",new Set);fg(this,"touchIds",new Set);fg(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&Ai(this,"drag");a.wheel&&Ai(this,"wheel");a.scroll&&Ai(this,"scroll");a.move&&Ai(this,"move");a.pinch&&Ai(this,"pinch");a.hover&&Ai(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(hf(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?
this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=d}applyConfig(a,d){this.config=Li(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const n={};let R;if(d.target&&
(R=d.target(),!R))return;if(d.enabled){for(const ea of this.gestures){const ka=this.config[ea],ta=GA(n,ka.eventOptions,!!R);ka.enabled&&(new (hx.get(ea))(this,a,ea)).bind(ta)}d=GA(n,d.eventOptions,!!R);for(const ea in this.nativeHandlers)d(ea,"",ka=>this.nativeHandlers[ea](Ff(Ff({},this.state.shared),{},{event:ka,args:a})),void 0,!0)}for(const ea in n)n[ea]=Nh(...n[ea]);if(!R)return n;for(const ea in n){const {device:ka,capture:ta,passive:Ka}=Wf(ea);this._targetEventStore.add(R,ka,"",n[ea],{capture:ta,
passive:Ka})}}},GA=(a,d,n)=>(R,ea,ka,ta={},Ka=!1)=>{var $a,mb;const ub=null!==($a=ta.capture)&&void 0!==$a?$a:d.capture;ta=null!==(mb=ta.passive)&&void 0!==mb?mb:d.passive;R=Ka?R:Ng(R,ea,ub);n&&ta&&(R+="Passive");a[R]=a[R]||[];a[R].push(ka)},EF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,iv=pg(ca(22)),kx=pg(ca(22)),HA=pg(ca(22)),IA=pg(ca(22)),FF=pg(ca(22)),GF=pg(ca(22)),HF=pg(ca(22)),IF=pg(ca(22)),JF={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",
move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>be('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>be("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>be("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>be("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>be("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>be("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>be("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>be("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>be("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>be('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>be('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>be('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>be('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>be('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},KF=pg(ca(22));pg(ca(22));var JA=ca(22),KA=pg(ca(22));if(!ca(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!Dc)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var LF=ca(23),Rt=pg(ca(22)),LA="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,MF=1E4,NF=function(a){var d="function"===typeof Symbol&&Symbol.iterator,n=d&&a[d],R=0;if(n)return n.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&
R>=a.length&&(a=void 0);return{value:a&&a[R++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},MA=LA?me(LA):kf(),OF=MA.addReactionToTrack,PF=MA.recordReactionAsCommitted,NA=function(a,d){var n="function"===typeof Symbol&&a[Symbol.iterator];if(!n)return a;a=n.call(a);var R,ea=[];try{for(;(void 0===d||0<d--)&&!(R=a.next()).done;)ea.push(R.value)}catch(ta){var ka={error:ta}}finally{try{R&&!R.done&&(n=a["return"])&&n.call(a)}finally{if(ka)throw ka.error;
}}return ea},QF=function(){return function(){}}(),As=ca(22),OA="function"===typeof Symbol&&Symbol.for,PA=OA?Symbol.for("react.forward_ref"):"function"===typeof As.forwardRef&&(0,As.forwardRef)(function(a){return null}).$$typeof,QA=OA?Symbol.for("react.memo"):"function"===typeof As.memo&&(0,As.memo)(function(a){return null}).$$typeof,RF={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Yf.displayName="Observer";ca(22);ca(22);ca(22);(function(a){a||=Ne;qb({reactionScheduler:a})})(LF.unstable_batchedUpdates);
var SF=pg(ca(22)),lx=ca(602),mn=SF.forwardRef(function(a,d){var {children:n,opacity:R,centered:ea,className:ka=""}=a,ta=hg(a,["children","opacity","centered","className"]);return(0,lx.jsx)(Yf,{children:()=>(0,lx.jsx)("div",{ref:d,className:`tl-positioned-div ${ka}`,style:R?{opacity:R}:void 0,draggable:!1,children:(0,lx.jsx)("div",Mf(we({className:`tl-positioned-inner ${ea?"tl-centered":""}`},ta),{children:n}))})})}),TF=pg(ca(22)),mx=ca(602),Mn=TF.forwardRef(function(a,d){var {id:n,className:R="",
style:ea,children:ka}=a,ta=hg(a,["id","className","style","children"]);return(0,mx.jsx)(Yf,{children:()=>(0,mx.jsx)("svg",{ref:d,style:ea,className:`tl-positioned-svg ${R}`,children:(0,mx.jsx)("g",Mf(we({id:n,className:"tl-centered-g"},ta),{children:ka}))})})}),St=pg(ca(22)),RA=pg(ca(22)),jv=pg(ca(22)),UF=ca(602),nq=Ce(function(a){var {id:d,bounds:n,zIndex:R,rotation:ea=0,className:ka="",children:ta}=a;a=hg(a,"id bounds zIndex rotation className children".split(" "));const Ka=jv.useRef(null);jv.useLayoutEffect(()=>
{Ka.current.style.transform=`translate(
        calc(${n.minX}px - var(--tl-padding)),
        calc(${n.minY}px - var(--tl-padding)))
        rotate(${ea+(n.rotation||0)}rad)`},[n.minX,n.minY,ea,n.rotation]);jv.useLayoutEffect(()=>{const $a=Ka.current;$a.style.width=`calc(${Math.floor(n.width)}px + (var(--tl-padding) * 2))`;$a.style.height=`calc(${Math.floor(n.height)}px + (var(--tl-padding) * 2))`},[n.width,n.height]);jv.useLayoutEffect(()=>{const $a=Ka.current;void 0!==R&&($a.style.zIndex=R.toString())},[R]);return(0,UF.jsx)("div",Mf(we({id:d,ref:Ka,className:`tl-positioned ${ka}`,"aria-label":"container"},a),{children:ta}))}),
VF=pg(ca(22)),SA=ca(602),WF=Ce(function({shapes:a,hidden:d,bounds:n,rotation:R=0}){const {components:{ContextBar:ea},viewport:{bounds:ka,camera:{point:[ta,Ka],zoom:$a}}}=qd(),mb=VF.useRef(null);var ub=Zf.getRotatedBounds(n,R);ub=Zf.multiplyBounds(ub,$a);Lb(mb,n,R,10005);if(!ea)throw Error("Expected a ContextBar component.");const zb=Zf.translateBounds(ub,[ta*$a,Ka*$a]);return(0,SA.jsx)("div",{ref:mb,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,SA.jsx)(ea,{hidden:d,shapes:a,bounds:n,offsets:{left:zb.minX,right:ka.width-zb.maxX,top:zb.minY,bottom:ka.height-zb.maxY,width:zb.width,height:zb.height},scaledBounds:ub,rotation:R})})}),TA=pg(ca(22)),XF=ca(602),UA=Ce(function({children:a}){const d=TA.useRef(null),{viewport:n}=qd(),R=d.current,{zoom:ea,point:ka}=n.camera;TA.useEffect(()=>{R&&(R.style.transform=`scale(${ea}) translate3d(${ka[0]}px, ${ka[1]}px, 0)`)},[ea,ka,R]);return(0,XF.jsx)("div",{ref:d,className:"tl-absolute tl-layer",
children:a})}),kv=ca(602),VA=Ce(function({shape:a,isHovered:d=!1,isSelected:n=!1,isBinding:R=!1,isEditing:ea=!1,isLocked:ka=!1,meta:ta}){const {bounds:Ka,props:{scale:$a,rotation:mb=0},ReactIndicator:ub}=a;return(0,kv.jsx)(nq,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:Ka,rotation:mb,scale:$a,zIndex:ea?1E3:1E4,children:(0,kv.jsx)(Mn,{children:(0,kv.jsx)("g",{className:`tl-indicator-container ${n?"tl-selected":"tl-hovered"} ${ka?"tl-locked":""}`,children:(0,kv.jsx)(ub,{isEditing:ea,
isBinding:R,isHovered:d,isLocked:ka,isSelected:n,isErasing:!1,meta:ta})})})})}),WA=pg(ca(22)),lv=ca(602),YF=Ce(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:n}},components:{QuickLinks:R}}=qd();var ea=Re();const ka=uh(d);if(!R)throw Error("Expected a QuickLinks component.");ea=50>a.height*n||!ea.selectedShapesArray.includes(d);return(0,lv.jsx)(nq,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,lv.jsx)(mn,{children:(0,lv.jsx)("span",Mf(we({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},ka),{onPointerDown:ta=>ta.stopPropagation(),children:(0,lv.jsx)(R,{className:"tl-backlinks-count "+(ea?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})}),mv=ca(602),ZF=Ce(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:n}},components:{BacklinksCount:R}}=qd();var ea=Re();if(!R)throw Error("Expected a BacklinksCount component.");const ka=ta=>ta.stopPropagation();
ea=50>a.height*n||!ea.selectedShapesArray.includes(d)||d.hideSelection;return(0,mv.jsx)(nq,{bounds:a,className:"tl-backlinks-count-container",children:(0,mv.jsx)(mn,{children:(0,mv.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:ka,onWheelCapture:ka,onKeyDown:ka,title:"Shape Backlinks",children:(0,mv.jsx)(R,{className:"tl-backlinks-count "+(ea?"tl-backlinks-count-rounded":""),id:d.id,
shape:d})})})})}),$F=pg(ca(22)),XA=ca(602),aG=Ce(function({bounds:a,hidden:d,shapes:n,rotation:R=0,detail:ea="size"}){const {components:{SelectionDetail:ka},viewport:{camera:{zoom:ta}}}=qd(),Ka=$F.useRef(null),$a=Zf.multiplyBounds(a,ta);Lb(Ka,a,R,10003);if(!ka)throw Error("Expected a SelectionDetail component.");return(0,XA.jsx)("div",{ref:Ka,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,XA.jsx)(ka,
{shapes:n,bounds:a,scaledBounds:$a,zoom:ta,rotation:R,detail:ea})})}),YA=ca(602),bG=Ce(function({shape:a,isHovered:d=!1,isSelected:n=!1,isBinding:R=!1,isErasing:ea=!1,isEditing:ka=!1,onEditingEnd:ta,asset:Ka,meta:$a,zIndex:mb}){const {bounds:ub,props:{rotation:zb,scale:ec},ReactComponent:ic}=a,bc=Re(),Lc=uh(a);var $c=bc.getParentGroup(a);$c=bc.selectedIds.has(null==$c?void 0:$c.id);return(0,YA.jsx)(nq,{"data-shape-id":a.id,"data-html2canvas-ignore":!n&&!$c&&0!==bc.selectedShapes.size||null,zIndex:mb,
"data-type":"Shape",bounds:ub,rotation:zb,scale:ec,children:(0,YA.jsx)(ic,{meta:$a,isEditing:ka,isBinding:R,isHovered:d,isSelected:n,isErasing:ea,events:Lc,asset:Ka,onEditingEnd:ta})})}),Bs=ca(602),ZA=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],cG=Ce(function({size:a}){const {viewport:{camera:{point:d,zoom:n}}}=qd();return(0,Bs.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,Bs.jsx)("defs",{children:ZA.map(([R,ea,
ka],ta)=>{ka=ka*a*n;var Ka=d[0]*n,$a=d[1]*n;Ka=0<Ka?Ka%ka:ka+Ka%ka;$a=0<$a?$a%ka:ka+$a%ka;R=Si(n,[R,ea],[0,1]);return(0,Bs.jsx)("pattern",{id:`grid-${ta}`,width:ka,height:ka,patternUnits:"userSpaceOnUse",children:!(2<R||.1>R)&&(0,Bs.jsx)("circle",{className:"tl-grid-dot",cx:Ka,cy:$a,r:1.5,opacity:Math.max(0,Math.min(R,1))})},`grid-pattern-${ta}`)})}),ZA.map((R,ea)=>(0,Bs.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${ea})`},`grid-rect-${ea}`))]})}),$A=Ce(function({size:a}){return(0,Bs.jsx)(cG,
{size:a})}),aB=ca(602),bB=Ce(function({bounds:a}){const d=Rd("background");return(0,aB.jsx)(Mn,Mf(we({"data-html2canvas-ignore":"true"},d),{children:(0,aB.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});ca(22);var cB=ca(602),dB=Ce(function({scaledBounds:a,shapes:d,detail:n="size",rotation:R=0}){var ea;const ka=1===d.length?R:null!=(ea=a.rotation)?ea:0;return(0,cB.jsx)(mn,{centered:!0,children:(0,cB.jsx)("div",{className:"tl-bounds-detail",
style:{transform:ka<Mo||ka>3*Mo?`rotate(${ka}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+ka}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${ye.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===n?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${Pl.radiansToDegrees(Pl.clampRadians(R)).toFixed()}\xB0`})})}),nx=ca(602),dG={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},nv=Ce(function({cx:a,cy:d,size:n,targetSize:R,corner:ea,isHidden:ka}){const ta=Rd(ea);return(0,nx.jsxs)("g",Mf(we({opacity:ka?0:1},ta),{children:[(0,nx.jsx)("rect",{className:"tl-transparent "+(ka?"":dG[ea]),"aria-label":`${ea} target`,x:a-1.25*R,y:d-1.25*R,width:2.5*R,height:2.5*R,pointerEvents:ka?"none":"all"}),(0,nx.jsx)("rect",{className:"tl-corner-handle","aria-label":`${ea} handle`,x:a-n/2,y:d-n/2,width:n,height:n,pointerEvents:"none"})]}))}),
ov=ca(602),ox=Ce(function({cx:a,cy:d,size:n,direction:R,isHidden:ea}){const ka=Re();return(0,ov.jsxs)("g",{className:"tl-clone-handle",opacity:ea?0:1,children:[(0,ov.jsx)("circle",{"aria-label":`${R} handle`,pointerEvents:"all",onPointerDown:ta=>ka.api.clone(R),cx:a,cy:d,r:n}),(0,ov.jsx)("line",{x1:a-n/2,y1:d,x2:a+n/2,y2:d}),(0,ov.jsx)("line",{x1:a,y1:d-n/2,x2:a,y2:d+n/2})]})}),eG=ca(602),fG={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},pv=
Ce(function({x:a,y:d,width:n,height:R,targetSize:ea,edge:ka,disabled:ta,isHidden:Ka}){const $a=Rd(ka);return(0,eG.jsx)("rect",we({pointerEvents:Ka||ta?"none":"all",className:"tl-transparent tl-edge-handle "+(Ka?"":fG[ka]),"aria-label":`${ka} target`,opacity:Ka?0:1,x:a-ea,y:d-ea,width:Math.max(1,n+2*ea),height:Math.max(1,R+2*ea)},$a))}),px=ca(602);Ce(function({cx:a,cy:d,size:n,targetSize:R,isHidden:ea}){const ka=Rd("rotate");return(0,px.jsxs)("g",Mf(we({opacity:ea?0:1},ka),{children:[(0,px.jsx)("circle",
{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:R,pointerEvents:ea?"none":"all"}),(0,px.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:n/2,pointerEvents:"none"})]}))});ca(22);var eB=ca(602),qv=Ce(function({cx:a,cy:d,targetSize:n,corner:R,isHidden:ea}){const ka=Rd(R);return(0,eB.jsx)("g",Mf(we({opacity:ea?0:1},ka),{children:(0,eB.jsx)("rect",{className:"tl-transparent","aria-label":`${R} target`,x:a-2.5*n,y:d-2.5*n,width:3*n,height:3*n,pointerEvents:ea?
"none":"all"})}))}),Pk=ca(602),fB=Ce(function({bounds:a,showResizeHandles:d,showRotateHandles:n,showCloneHandles:R,shapes:ea}){var ka,ta;const Ka=Re();let {width:$a,height:mb}=a;var ub=Ka.viewport.camera.zoom;a=8/ub;const zb=6/ub;ub=30/ub;const ec=2*a,ic=1===ea.length?ea[0].canResize:[!0,!0],bc=null!=(ta=null==(ka=Ka.editingShape)?void 0:ka.props.borderRadius)?ta:0;return(0,Pk.jsx)(Pk.Fragment,{children:0<ea.length&&(0,Pk.jsxs)(Mn,{children:[!Ka.editingShape&&(0,Pk.jsx)("rect",{className:"tl-bounds-fg",
width:Math.max($a,1),height:Math.max(mb,1),rx:bc,ry:bc,pointerEvents:"none"}),(0,Pk.jsx)(pv,{x:2*zb,y:0,width:$a-4*zb,height:0,targetSize:zb,edge:"top_edge",disabled:!ic[1],isHidden:!d}),(0,Pk.jsx)(pv,{x:$a,y:2*zb,width:0,height:mb-4*zb,targetSize:zb,edge:"right_edge",disabled:!ic[0],isHidden:!d}),(0,Pk.jsx)(pv,{x:2*zb,y:mb,width:$a-4*zb,height:0,targetSize:zb,edge:"bottom_edge",disabled:!ic[1],isHidden:!d}),(0,Pk.jsx)(pv,{x:0,y:2*zb,width:0,height:mb-4*zb,targetSize:zb,edge:"left_edge",disabled:!ic[0],
isHidden:!d}),(0,Pk.jsx)(qv,{cx:0,cy:0,targetSize:zb,corner:"top_left_resize_corner",isHidden:!n}),(0,Pk.jsx)(qv,{cx:$a+2*zb,cy:0,targetSize:zb,corner:"top_right_resize_corner",isHidden:!n}),(0,Pk.jsx)(qv,{cx:$a+2*zb,cy:mb+2*zb,targetSize:zb,corner:"bottom_right_resize_corner",isHidden:!n}),(0,Pk.jsx)(qv,{cx:0,cy:mb+2*zb,targetSize:zb,corner:"bottom_left_resize_corner",isHidden:!n}),(0,Pk.jsx)(ox,{cx:-ub,cy:mb/2,size:ec,direction:"left",isHidden:!R}),(0,Pk.jsx)(ox,{cx:$a+ub,cy:mb/2,size:ec,direction:"right",
isHidden:!R}),(0,Pk.jsx)(ox,{cx:$a/2,cy:mb+ub,size:ec,direction:"down",isHidden:!R}),(null==ic?void 0:ic.every(Lc=>Lc))&&(0,Pk.jsxs)(Pk.Fragment,{children:[(0,Pk.jsx)(nv,{cx:0,cy:0,size:a,targetSize:zb,corner:"top_left_corner",isHidden:!d}),(0,Pk.jsx)(nv,{cx:$a,cy:0,size:a,targetSize:zb,corner:"top_right_corner",isHidden:!d}),(0,Pk.jsx)(nv,{cx:$a,cy:mb,size:a,targetSize:zb,corner:"bottom_right_corner",isHidden:!d}),(0,Pk.jsx)(nv,{cx:0,cy:mb,size:a,targetSize:zb,corner:"bottom_left_corner",isHidden:!d})]})]})})}),
qx=ca(602),gB=Ce(function({bounds:a}){return(0,qx.jsx)(nq,{bounds:a,zIndex:10001,children:(0,qx.jsx)(Mn,{children:(0,qx.jsx)("rect",{className:"tl-brush",x:0,y:0,width:a.width,height:a.height})})})}),hB=ca(602);Ce(function(){return(0,hB.jsx)(hB.Fragment,{})});var rx=ca(602),iB=Ce(function({shape:a,handle:d,id:n}){a=Jd(a,n);const [R,ea]=d.point;return(0,rx.jsxs)("g",Mf(we({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${R}, ${ea})`,children:[(0,rx.jsx)("circle",{className:"tl-handle-bg",
pointerEvents:"all"}),(0,rx.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),jB=pg(ca(22)),sx=ca(602),tx=Ce(function({direction:a}){const {viewport:{bounds:d}}=qd(),n=jB.useRef(null);jB.useLayoutEffect(()=>{const R=n.current;if(R){var ea=[d.width/2,d.height/2],ka=Zf.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[ta,Ka]]of ka)ka=w(ea,a,ta,Ka),ka.didIntersect&&(ka=ka.points[0],R.style.transform=`translate(${ka[0]-6}px,${ka[1]-6}px) rotate(${ye.toAngle(a)}rad)`)}},
[a,d]);return(0,sx.jsx)("div",{ref:n,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,sx.jsx)("svg",{height:12,width:12,children:(0,sx.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),ek=ca(602),gG=Ce(function({id:a,className:d,brush:n,shapes:R,assets:ea,bindingShapes:ka,editingShape:ta,hoveredShape:Ka,hoveredGroup:$a,selectionBounds:mb,selectedShapes:ub,erasingShapes:zb,selectionDirectionHint:ec,cursor:ic="default",cursorRotation:bc=0,selectionRotation:Lc=0,showSelection:$c=
!0,showHandles:tc=!0,showSelectionRotation:Tc=!1,showResizeHandles:Oc=!0,showRotateHandles:ld=!0,showCloneHandles:od=!0,showSelectionDetail:Qd=!0,showContextBar:ge=!0,showGrid:uf=!0,gridSize:Be=8,onEditingEnd:We=$E,theme:Tf=Vu,children:ff}){var Jf;const ee=St.useRef(null),{viewport:Nd,components:$d,meta:Fd}=qd(),ae=Re(),gf=St.useCallback(Ef=>{ae.inputs.updateContainerOffset([Ef.minX,Ef.minY])},[]);He(Tf,a);Ad(ee);le(ee,Nd,gf);qj(ee);Ge();ue(ee,ic,bc);Me(ee);$g(ee);a=Ye();const wf=(ic=1===(null==ub?
void 0:ub.length)&&ub[0])&&"handles"in ic.props?null==ub?void 0:ub[0]:void 0,og=St.useMemo(()=>new Set(ub||[]),[ub]),Xg=St.useMemo(()=>new Set(zb||[]),[zb]);ic=1===(null==ub?void 0:ub.length)?ub[0]:void 0;$a=[...(new Set([$a,Ka]))].filter(Ic);return(0,ek.jsxs)("div",{ref:ee,className:`tl-container ${null!=d?d:""}`,children:[(0,ek.jsxs)("div",Mf(we({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[uf&&$d.Grid&&(0,ek.jsx)($d.Grid,{size:Be}),(0,ek.jsxs)(UA,{children:[$d.SelectionBackground&&
ub&&mb&&$c&&(0,ek.jsx)(nq,{"data-type":"SelectionBackground",bounds:mb,zIndex:2,"data-html2canvas-ignore":"true",children:(0,ek.jsx)($d.SelectionBackground,{shapes:ub,bounds:mb,showResizeHandles:Oc,showRotateHandles:ld})}),R&&R.map((Ef,mh)=>(0,ek.jsx)(bG,{shape:Ef,asset:ea&&Ef.props.assetId?ea[Ef.props.assetId]:void 0,isEditing:Ef===ta,isHovered:Ef===Ka,isBinding:null==ka?void 0:ka.includes(Ef),isSelected:og.has(Ef),isErasing:Xg.has(Ef),meta:Fd,zIndex:1E3+mh,onEditingEnd:We},"shape_"+Ef.id)),!ae.isIn("select.pinching")&&
(null==ub?void 0:ub.map(Ef=>(0,ek.jsx)(VA,{shape:Ef,isEditing:Ef===ta,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:Ef.props.isLocked},"selected_indicator_"+Ef.id))),$a.map(Ef=>Ef!==ta&&(0,ek.jsx)(VA,{shape:Ef},"hovered_indicator_"+Ef.id)),ic&&$d.BacklinksCount&&(0,ek.jsx)(ZF,{hidden:!1,bounds:ic.bounds,shape:ic}),Ka&&Ka!==ic&&$d.QuickLinks&&(0,ek.jsx)(YF,{hidden:!1,bounds:Ka.bounds,shape:Ka}),n&&$d.Brush&&(0,ek.jsx)($d.Brush,{bounds:n}),ub&&mb&&(0,ek.jsxs)(ek.Fragment,{children:[$c&&$d.SelectionForeground&&
(0,ek.jsx)(nq,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:mb,zIndex:ta&&ub.includes(ta)?1002:10002,children:(0,ek.jsx)($d.SelectionForeground,{shapes:ub.filter(Ef=>!Ef.props.isLocked),bounds:mb,showResizeHandles:Oc,showRotateHandles:ld,showCloneHandles:od})}),tc&&wf&&$d.Handle&&(0,ek.jsx)(nq,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:mb,zIndex:10003,children:(0,ek.jsx)(Mn,{children:Object.entries(null!=(Jf=wf.props.handles)?Jf:
{}).map(([Ef,mh])=>St.createElement($d.Handle,{key:`${mh.id}_handle_${mh.id}`,shape:wf,handle:mh,id:Ef}))})}),ub&&$d.SelectionDetail&&(0,ek.jsx)(aG,{"data-html2canvas-ignore":"true",shapes:ub,bounds:mb,detail:Tc?"rotation":"size",hidden:!Qd,rotation:Lc},"detail"+ub.map(Ef=>Ef.id).join(""))]})]}),ec&&mb&&ub&&(0,ek.jsx)(tx,{direction:ec,bounds:mb,shapes:ub}),(0,ek.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,ek.jsx)(UA,{children:ub&&mb&&(0,ek.jsx)(ek.Fragment,
{children:ub&&$d.ContextBar&&(0,ek.jsx)(WF,{shapes:ub.filter(Ef=>!Ef.props.isLocked),hidden:!ge,bounds:ic?ic.bounds:mb,rotation:ic?ic.props.rotation:0},"context"+ub.map(Ef=>Ef.id).join(""))})}),ff]})}),kB=pg(ca(22)),lB=pg(ca(22)),mB=ca(602);Ce(function({children:a}){const d=lB.useRef(null),{viewport:n}=qd();lB.useEffect(()=>mc(()=>{const R=d.current;if(R){var {zoom:ea,point:ka}=n.camera;R.style.transform=`scale(${ea}) translateX(${ka[0]}px) translateY(${ka[1]}px)`}}),[]);return(0,mB.jsx)("svg",{className:"tl-absolute tl-overlay",
pointerEvents:"none",children:(0,mB.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});var hG=ca(602),iG=Ce(function(a){const d=fd(a),n=Ke(a.id);ud(d,a);Xc(d,a);return(0,hG.jsx)(n.Provider,{value:d,children:a.children})}),jG=ca(602),kG=Ce(function({id:a="noid",viewport:d,inputs:n,callbacks:R=Vu,meta:ea=Vu,components:ka=Vu,children:ta}){const [Ka,$a]=kB.useState(()=>{const {Brush:ub,ContextBar:zb,DirectionIndicator:ec,Grid:ic,Handle:bc,SelectionBackground:Lc,SelectionDetail:$c,SelectionForeground:tc}=
ka,Tc=hg(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:a,viewport:d,inputs:n,callbacks:R,meta:ea,components:Mf(we({},Tc),{Brush:null===ub?void 0:gB,ContextBar:zb,DirectionIndicator:null===ec?void 0:tx,Grid:null===ic?void 0:$A,Handle:null===bc?void 0:iB,SelectionBackground:null===Lc?void 0:bB,SelectionDetail:null===$c?void 0:dB,SelectionForeground:null===tc?void 0:fB})}});kB.useLayoutEffect(()=>{const {Brush:ub,ContextBar:zb,
DirectionIndicator:ec,Grid:ic,Handle:bc,SelectionBackground:Lc,SelectionDetail:$c,SelectionForeground:tc}=ka,Tc=hg(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return mc(()=>{$a({id:a,viewport:d,inputs:n,callbacks:R,meta:ea,components:Mf(we({},Tc),{Brush:null===ub?void 0:gB,ContextBar:zb,DirectionIndicator:null===ec?void 0:tx,Grid:null===ic?void 0:$A,Handle:null===bc?void 0:iB,SelectionBackground:null===Lc?void 0:bB,SelectionDetail:null===
$c?void 0:dB,SelectionForeground:null===tc?void 0:fB})})})},[]);const mb=dd(a);return(0,jG.jsx)(mb.Provider,{value:Ka,children:ta})}),nB=ca(602),lG=ca(602),mG=Ce(function(a){const d=Re();return(0,lG.jsx)(xh,we({viewport:d.viewport,inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,
erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,penMode:d.settings.penMode,showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,showCloneHandles:d.showCloneHandles,showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},
a))});ca(602);var Cs=pg(ca(22)),oq=pg(ca(22)),nG=ca(602),oG="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),Qh=a=>{var {name:d,className:n}=a;a=hg(a,["name","className"]);const R=oG.includes(d)?"tie tie-":"ti ti-";return(0,nG.jsx)("i",we({className:[R+d,n].join(" ")},
a))},Jh=ca(22),pG=ca(22),vr=ca(22),Sm=ca(22),ux=ca(22),qG=ca(23),Ql=ca(22),Oo=(0,Ql.forwardRef)((a,d)=>{var {children:n}=a;a=hg(a,["children"]);const R=Ql.Children.toArray(n),ea=R.find(ch);if(ea){const ka=ea.props.children;n=R.map(ta=>ta===ea?1<Ql.Children.count(ka)?Ql.Children.only(null):(0,Ql.isValidElement)(ka)?ka.props.children:null:ta);return(0,Ql.createElement)(vx,af({},a,{ref:d}),(0,Ql.isValidElement)(ka)?(0,Ql.cloneElement)(ka,void 0,n):null)}return(0,Ql.createElement)(vx,af({},a,{ref:d}),
n)});Oo.displayName="Slot";var vx=(0,Ql.forwardRef)((a,d)=>{const {children:n}=a;a=hg(a,["children"]);return(0,Ql.isValidElement)(n)?(0,Ql.cloneElement)(n,Mf(we({},am(a,n.props)),{ref:dh(d,n.ref)})):1<Ql.Children.count(n)?Ql.Children.only(null):null});vx.displayName="SlotClone";var oB=({children:a})=>(0,Ql.createElement)(Ql.Fragment,null,a),lk="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const n=(0,ux.forwardRef)((R,ea)=>{var {asChild:ka}=R;R=hg(R,["asChild"]);
ka=ka?Oo:d;(0,ux.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,ux.createElement)(ka,af({},R,{ref:ea}))});n.displayName=`Primitive.${d}`;return Mf(we({},a),{[d]:n})},{}),wx=ca(22),rG=ca(22),pB,sG=(0,Sm.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xx=(0,Sm.forwardRef)((a,d)=>{var n;const {disableOutsidePointerEvents:R=!1,onEscapeKeyDown:ea,onPointerDownOutside:ka,onFocusOutside:ta,onInteractOutside:Ka,onDismiss:$a}=a,mb=hg(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),
ub=(0,Sm.useContext)(sG),[zb,ec]=(0,Sm.useState)(null),ic=null!==(n=null===zb||void 0===zb?void 0:zb.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,bc]=(0,Sm.useState)({});d=Kh(d,Oc=>ec(Oc));n=Array.from(ub.layers);var [Lc]=[...ub.layersWithOutsidePointerEventsDisabled].slice(-1);Lc=n.indexOf(Lc);const $c=zb?n.indexOf(zb):-1;n=0<ub.layersWithOutsidePointerEventsDisabled.size;const tc=$c>=Lc;Lc=Ll(Oc=>{const ld=Oc.target,od=[...ub.branches].some(Qd=>
Qd.contains(ld));tc&&!od&&(null===ka||void 0===ka||ka(Oc),null===Ka||void 0===Ka||Ka(Oc),Oc.defaultPrevented||null===$a||void 0===$a||$a())},ic);const Tc=zl(Oc=>{const ld=Oc.target;[...ub.branches].some(od=>od.contains(ld))||(null===ta||void 0===ta||ta(Oc),null===Ka||void 0===Ka||Ka(Oc),Oc.defaultPrevented||null===$a||void 0===$a||$a())},ic);yl(Oc=>{$c===ub.layers.size-1&&(null===ea||void 0===ea||ea(Oc),!Oc.defaultPrevented&&$a&&(Oc.preventDefault(),$a()))},ic);(0,Sm.useEffect)(()=>{if(zb)return R&&
(0===ub.layersWithOutsidePointerEventsDisabled.size&&(pB=ic.body.style.pointerEvents,ic.body.style.pointerEvents="none"),ub.layersWithOutsidePointerEventsDisabled.add(zb)),ub.layers.add(zb),In(),()=>{R&&1===ub.layersWithOutsidePointerEventsDisabled.size&&(ic.body.style.pointerEvents=pB)}},[zb,ic,R,ub]);(0,Sm.useEffect)(()=>()=>{zb&&(ub.layers.delete(zb),ub.layersWithOutsidePointerEventsDisabled.delete(zb),In())},[zb,ub]);(0,Sm.useEffect)(()=>{const Oc=()=>bc({});document.addEventListener("dismissableLayer.update",
Oc);return()=>document.removeEventListener("dismissableLayer.update",Oc)},[]);return(0,Sm.createElement)(lk.div,af({},mb,{ref:d,style:we({pointerEvents:n?tc?"auto":"none":void 0},a.style),onFocusCapture:xg(a.onFocusCapture,Tc.onFocusCapture),onBlurCapture:xg(a.onBlurCapture,Tc.onBlurCapture),onPointerDownCapture:xg(a.onPointerDownCapture,Lc.onPointerDownCapture)}))}),qB=pg(ca(22)),tG=ca(22),Cl=(null===globalThis||void 0===globalThis?0:globalThis.document)?tG.useLayoutEffect:()=>{},uG=qB["useId".toString()]||
(()=>{}),vG=0,dl=ca(22),wG=(a,d,n)=>ti(void 0,null,function*(){const {placement:R="bottom",strategy:ea="absolute",middleware:ka=[],platform:ta}=n,Ka=yield null==ta.isRTL?void 0:ta.isRTL(d);let $a=yield ta.getElementRects({reference:a,floating:d,strategy:ea}),{x:mb,y:ub}=Mk($a,R,Ka),zb=R,ec={},ic=0;for(let bc=0;bc<ka.length;bc++){const {name:Lc,fn:$c}=ka[bc],{x:tc,y:Tc,data:Oc,reset:ld}=yield $c({x:mb,y:ub,initialPlacement:R,placement:zb,strategy:ea,middlewareData:ec,rects:$a,platform:ta,elements:{reference:a,
floating:d}});mb=null!=tc?tc:mb;ub=null!=Tc?Tc:ub;ec=Mf(we({},ec),{[Lc]:we(we({},ec[Lc]),Oc)});ld&&50>=ic&&(ic++,"object"==typeof ld&&(ld.placement&&(zb=ld.placement),ld.rects&&($a=!0===ld.rects?yield ta.getElementRects({reference:a,floating:d,strategy:ea}):ld.rects),{x:mb,y:ub}=Mk($a,zb,Ka)),bc=-1)}return{x:mb,y:ub,placement:zb,strategy:ea,middlewareData:ec}}),yx=Math.min,op=Math.max,rB=a=>({name:"arrow",options:a,fn(d){return ti(this,null,function*(){const {element:n,padding:R=0}=null!=a?a:{},{x:ea,
y:ka,placement:ta,rects:Ka,platform:$a}=d;if(null==n)return{};const mb=sm(R),ub={x:ea,y:ka},zb=ml(ta),ec=ta.split("-")[1],ic=bm(zb);var bc=yield $a.getDimensions(n);const Lc="y"===zb?"top":"left",$c="y"===zb?"bottom":"right";var tc=Ka.reference[ic]+Ka.reference[zb]-ub[zb]-Ka.floating[ic];const Tc=ub[zb]-Ka.reference[zb];var Oc=yield null==$a.getOffsetParent?void 0:$a.getOffsetParent(n);let ld=Oc?"y"===zb?Oc.clientHeight||0:Oc.clientWidth||0:0;0===ld&&(ld=Ka.floating[ic]);Oc=mb[Lc];const od=ld-bc[ic]-
mb[$c];bc=ld/2-bc[ic]/2+(tc/2-Tc/2);tc=op(Oc,yx(bc,od));return{[zb]:ub[zb]-(0<("start"===ec?mb[Lc]:mb[$c])&&bc!==tc&&Ka.reference[ic]<=Ka.floating[ic]?bc<Oc?Oc-bc:od-bc:0),data:{[zb]:tc,centerOffset:bc-tc}}})}}),xG={left:"right",right:"left",bottom:"top",top:"bottom"},yG={start:"end",end:"start"},sB=["top","right","bottom","left"];sB.reduce((a,d)=>a.concat(d,d+"-start",d+"-end"),[]);var tB=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return ti(this,null,function*(){var n;const {placement:R,
middlewareData:ea,rects:ka,initialPlacement:ta,platform:Ka,elements:$a}=d;var mb=a;const {mainAxis:ub=!0,crossAxis:zb=!0,fallbackPlacements:ec,fallbackStrategy:ic="bestFit",flipAlignment:bc=!0}=mb;mb=hg(mb,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const Lc=ri(R);var $c=ec||(Lc!==ta&&bc?function(Qd){const ge=nl(Qd);return[bj(Qd),ge,bj(ge)]}(ta):[nl(ta)]);$c=[ta,...$c];const tc=yield Ml(d,mb),Tc=[];mb=(null==(n=ea.flip)?void 0:n.overflows)||[];if(ub&&Tc.push(tc[Lc]),
zb){const {main:Qd,cross:ge}=Al(R,ka,yield null==Ka.isRTL?void 0:Ka.isRTL($a.floating));Tc.push(tc[Qd],tc[ge])}if(mb=[...mb,{placement:R,overflows:Tc}],!Tc.every(Qd=>0>=Qd)){var Oc,ld;n=(null!=(Oc=null==(ld=ea.flip)?void 0:ld.index)?Oc:0)+1;if(Oc=$c[n])return{data:{index:n,overflows:mb},reset:{placement:Oc}};Oc="bottom";switch(ic){case "bestFit":var od;(ld=null==(od=mb.map(Qd=>[Qd,Qd.overflows.filter(ge=>0<ge).reduce((ge,uf)=>ge+uf,0)]).sort((Qd,ge)=>Qd[1]-ge[1])[0])?void 0:od[0].placement)&&(Oc=
ld);break;case "initialPlacement":Oc=ta}if(R!==Oc)return{reset:{placement:Oc}}}return{}})}}},uB=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,n=hg(a,["strategy"]);return{name:"hide",fn(R){return ti(this,null,function*(){var {rects:ea}=R;switch(d){case "referenceHidden":return ea=rk(yield Ml(R,Mf(we({},n),{elementContext:"reference"})),ea.reference),{data:{referenceHiddenOffsets:ea,referenceHidden:sk(ea)}};case "escaped":return ea=rk(yield Ml(R,Mf(we({},n),{altBoundary:!0})),ea.floating),
{data:{escapedOffsets:ea,escaped:sk(ea)}};default:return{}}})}}},vB=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return ti(this,null,function*(){const {x:n,y:R}=d,ea=yield function(ka,ta){return ti(this,null,function*(){const {placement:Ka,platform:$a,elements:mb}=ka;var ub=yield null==$a.isRTL?void 0:$a.isRTL(mb.floating),zb=ri(Ka);const ec=Ka.split("-")[1],ic="x"===ml(Ka);zb=["left","top"].includes(zb)?-1:1;ub=ub&&ic?-1:1;const bc="function"==typeof ta?ta(ka):ta;let {mainAxis:Lc,
crossAxis:$c,alignmentAxis:tc}="number"==typeof bc?{mainAxis:bc,crossAxis:0,alignmentAxis:null}:we({mainAxis:0,crossAxis:0,alignmentAxis:null},bc);return ec&&"number"==typeof tc&&($c="end"===ec?-1*tc:tc),ic?{x:$c*ub,y:Lc*zb}:{x:Lc*zb,y:$c*ub}})}(d,a);return{x:n+ea.x,y:R+ea.y,data:ea}})}}},wB=function(a){return void 0===a&&(a={}),{name:"shift",options:a,fn(d){return ti(this,null,function*(){const {x:n,y:R,placement:ea}=d;var ka=a;const {mainAxis:ta=!0,crossAxis:Ka=!1,limiter:$a={fn:ic=>{let {x:bc,
y:Lc}=ic;return{x:bc,y:Lc}}}}=ka;var mb=hg(ka,["mainAxis","crossAxis","limiter"]);ka={x:n,y:R};mb=yield Ml(d,mb);const ub=ml(ri(ea)),zb="x"===ub?"y":"x";let ec=ka[ub];ka=ka[zb];ta&&(ec=op(ec+mb["y"===ub?"top":"left"],yx(ec,ec-mb["y"===ub?"bottom":"right"])));Ka&&(ka=op(ka+mb["y"===zb?"top":"left"],yx(ka,ka-mb["y"===zb?"bottom":"right"])));ka=$a.fn(Mf(we({},d),{[ub]:ec,[zb]:ka}));return Mf(we({},ka),{data:{x:ka.x-n,y:ka.y-R}})})}}},xB=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:n,
y:R,placement:ea,rects:ka,middlewareData:ta}=d,{offset:Ka=0,mainAxis:$a=!0,crossAxis:mb=!0}=a;var ub={x:n,y:R};d=ml(ea);const zb="x"===d?"y":"x";let ec=ub[d];ub=ub[zb];var ic="function"==typeof Ka?Ka(Mf(we({},ka),{placement:ea})):Ka;ic="number"==typeof ic?{mainAxis:ic,crossAxis:0}:we({mainAxis:0,crossAxis:0},ic);if($a){var bc="y"===d?"height":"width",Lc=ka.reference[d]-ka.floating[bc]+ic.mainAxis;bc=ka.reference[d]+ka.reference[bc]-ic.mainAxis;ec<Lc?ec=Lc:ec>bc&&(ec=bc)}if(mb){var $c,tc,Tc,Oc;const ld=
"y"===d?"width":"height";Lc=["top","left"].includes(ri(ea));bc=ka.reference[zb]-ka.floating[ld]+(Lc&&null!=($c=null==(tc=ta.offset)?void 0:tc[zb])?$c:0)+(Lc?0:ic.crossAxis);$c=ka.reference[zb]+ka.reference[ld]+(Lc?0:null!=(Tc=null==(Oc=ta.offset)?void 0:Oc[zb])?Tc:0)-(Lc?ic.crossAxis:0);ub<bc?ub=bc:ub>$c&&(ub=$c)}return{[d]:ec,[zb]:ub}}}},zG=function(a){return void 0===a&&(a={}),{name:"size",options:a,fn(d){return ti(this,null,function*(){const {placement:n,rects:R,platform:ea,elements:ka}=d;var ta=
a,{apply:Ka}=ta;ta=hg(ta,["apply"]);ta=yield Ml(d,ta);var $a=ri(n),mb=n.split("-")[1],ub,zb;"top"===$a||"bottom"===$a?(ub=$a,zb=mb===((yield null==ea.isRTL?void 0:ea.isRTL(ka.floating))?"start":"end")?"left":"right"):(zb=$a,ub="end"===mb?"top":"bottom");$a=op(ta.left,0);mb=op(ta.right,0);const ec=op(ta.top,0),ic=op(ta.bottom,0);zb={availableHeight:R.floating.height-(["left","right"].includes(n)?2*(0!==ec||0!==ic?ec+ic:op(ta.top,ta.bottom)):ta[ub]),availableWidth:R.floating.width-(["top","bottom"].includes(n)?
2*(0!==$a||0!==mb?$a+mb:op(ta.left,ta.right)):ta[zb])};ub=yield ea.getDimensions(ka.floating);null==Ka||Ka(we(we({},d),zb));Ka=yield ea.getDimensions(ka.floating);return ub.width!==Ka.width||ub.height!==Ka.height?{reset:{rects:!0}}:{}})}}},yB=Math.min,Tt=Math.max,rv=Math.round,AG={getClippingRect:function(a){let {element:d,boundary:n,rootBoundary:R,strategy:ea}=a;a=[...("clippingAncestors"===n?jp(d):[].concat(n)),R];a=a.reduce((ka,ta)=>{ta=bo(d,ta,ea);return ka.top=Tt(ta.top,ka.top),ka.right=yB(ta.right,
ka.right),ka.bottom=yB(ta.bottom,ka.bottom),ka.left=Tt(ta.left,ka.left),ka},bo(d,a[0],ea));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,offsetParent:n,strategy:R}=a;var ea=Pj(n);const ka=Xj(n);if(n===ka)return d;a={scrollLeft:0,scrollTop:0};var ta=0,Ka=0;(ea||!ea&&"fixed"!==R)&&(("body"!==gj(n)||nj(ka))&&(a=dm(n)),Pj(n))&&(ea=wk(n,!0),ta=ea.x+n.clientLeft,Ka=ea.y+n.clientTop);return Mf(we({},d),{x:d.x-
a.scrollLeft+ta,y:d.y-a.scrollTop+Ka})},isElement:Jk,getDimensions:Yl,getOffsetParent:Bj,getDocumentElement:Xj,getElementRects:a=>{let {reference:d,floating:n,strategy:R}=a;a=Bj(n);var ea=Pj(a);const ka=Xj(a);var ta;if(ta=ea)ta=wk(a),ta=rv(ta.width)!==a.offsetWidth||rv(ta.height)!==a.offsetHeight;ta=wk(d,ta,"fixed"===R);let Ka={scrollLeft:0,scrollTop:0};var $a=0,mb=0;if(ea||!ea&&"fixed"!==R)(("body"!==gj(a)||nj(ka))&&(Ka=dm(a)),Pj(a))?(ea=wk(a,!0),$a=ea.x+a.clientLeft,mb=ea.y+a.clientTop):ka&&($a=
xn(ka));return{reference:{x:ta.left+Ka.scrollLeft-$a,y:ta.top+Ka.scrollTop-mb,width:ta.width,height:ta.height},floating:Mf(we({},Yl(n)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===sj(a).direction},BG=(a,d,n)=>wG(a,d,we({platform:AG},n)),nn=pg(ca(22),1),zB=ca(22),CG=pg(ca(23),1),zx="undefined"!==typeof document?zB.useLayoutEffect:zB.useEffect,AB=a=>{const {element:d,padding:n}=a;return{name:"arrow",options:a,fn(R){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=
d.current)return rB({element:d.current,padding:n}).fn(R)}else if(d)return rB({element:d,padding:n}).fn(R);return{}}}},Ax=ca(22),DG=(0,Ax.forwardRef)((a,d)=>{const {children:n,width:R=10,height:ea=5}=a,ka=hg(a,["children","width","height"]);return(0,Ax.createElement)(lk.svg,af({},ka,{ref:d,width:R,height:ea,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?n:(0,Ax.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),EG=ca(22),[Bx,Ds]=ki("Popper"),[FG,BB]=Bx("Popper"),Cx=(0,dl.forwardRef)((a,
d)=>{const {__scopePopper:n,virtualRef:R}=a;a=hg(a,["__scopePopper","virtualRef"]);const ea=BB("PopperAnchor",n),ka=(0,dl.useRef)(null);d=Kh(d,ka);(0,dl.useEffect)(()=>{ea.onAnchorChange((null===R||void 0===R?void 0:R.current)||ka.current)});return R?null:(0,dl.createElement)(lk.div,af({},a,{ref:d}))}),[GG,HG]=Bx("PopperContent"),[IG,JG]=Bx("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Dx=(0,dl.forwardRef)((a,d)=>{var n,R,ea,ka,ta,Ka,$a,mb;const {__scopePopper:ub,side:zb="bottom",sideOffset:ec=
0,align:ic="center",alignOffset:bc=0,arrowPadding:Lc=0,collisionBoundary:$c=[],collisionPadding:tc=0,sticky:Tc="partial",hideWhenDetached:Oc=!1,avoidCollisions:ld=!0}=a;a=hg(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const od=BB("PopperContent",ub),[Qd,ge]=(0,dl.useState)(null);d=Kh(d,hk=>ge(hk));const [uf,Be]=(0,dl.useState)(null);var We=Rb(uf),Tf=null!==(n=null===We||void 0===We?void 0:We.width)&&
void 0!==n?n:0;n=null!==(R=null===We||void 0===We?void 0:We.height)&&void 0!==R?R:0;R=zb+("center"!==ic?"-"+ic:"");We="number"===typeof tc?tc:we({top:0,right:0,bottom:0,left:0},tc);const ff=Array.isArray($c)?$c:[$c],Jf=0<ff.length;We={padding:We,boundary:ff.filter(nc),altBoundary:Jf};const {reference:ee,floating:Nd,strategy:$d,x:Fd,y:ae,placement:gf,middlewareData:wf,update:og}=vc({strategy:"fixed",placement:R,whileElementsMounted:qc,middleware:[vB({mainAxis:ec+n,alignmentAxis:bc}),ld?wB(we({mainAxis:!0,
crossAxis:!1,limiter:"partial"===Tc?xB():void 0},We)):void 0,uf?AB({element:uf,padding:Lc}):void 0,ld?tB(we({},We)):void 0,LG({arrowWidth:Tf,arrowHeight:n}),Oc?uB({strategy:"referenceHidden"}):void 0].filter(Jc)});Cl(()=>{ee(od.anchor)},[ee,od.anchor]);const Xg=null!==Fd&&null!==ae,[Ef,mh]=Ub(gf);Tf=null===(ea=wf.arrow)||void 0===ea?void 0:ea.x;ea=null===(ka=wf.arrow)||void 0===ka?void 0:ka.y;ka=0!==(null===(ta=wf.arrow)||void 0===ta?void 0:ta.centerOffset);const [bg,Bh]=(0,dl.useState)();Cl(()=>
{Qd&&Bh(window.getComputedStyle(Qd).zIndex)},[Qd]);const {hasParent:Lh,positionUpdateFns:$i}=JG("PopperContent",ub),gk=!Lh;(0,dl.useLayoutEffect)(()=>{if(!gk)return $i.add(og),()=>{$i.delete(og)}},[gk,$i,og]);(0,dl.useLayoutEffect)(()=>{gk&&Xg&&Array.from($i).reverse().forEach(hk=>requestAnimationFrame(hk))},[gk,Xg,$i]);ta=Mf(we({"data-side":Ef,"data-align":mh},a),{ref:d,style:Mf(we({},a.style),{animation:Xg?void 0:"none",opacity:null!==(Ka=wf.hide)&&void 0!==Ka&&Ka.referenceHidden?0:void 0})});return(0,dl.createElement)("div",
{ref:Nd,"data-radix-popper-content-wrapper":"",style:{position:$d,left:0,top:0,transform:Xg?`translate3d(${Math.round(Fd)}px, ${Math.round(ae)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:bg,["--radix-popper-transform-origin"]:[null===($a=wf.transformOrigin)||void 0===$a?void 0:$a.x,null===(mb=wf.transformOrigin)||void 0===mb?void 0:mb.y].join(" ")}},(0,dl.createElement)(GG,{scope:ub,placedSide:Ef,onArrowChange:Be,arrowX:Tf,arrowY:ea,shouldHideArrow:ka},gk?(0,dl.createElement)(IG,
{scope:ub,hasParent:!0,positionUpdateFns:$i},(0,dl.createElement)(lk.div,ta)):(0,dl.createElement)(lk.div,ta)))}),KG={top:"bottom",right:"left",bottom:"top",left:"right"},CB=(0,dl.forwardRef)(function(a,d){var {__scopePopper:n}=a;a=hg(a,["__scopePopper"]);n=HG("PopperArrow",n);return(0,dl.createElement)("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[KG[n.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",
right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0}},(0,dl.createElement)(DG,af({},a,{ref:d,style:Mf(we({},a.style),{display:"block"})})))}),LG=a=>({name:"transformOrigin",options:a,fn(d){var n,R,ea,ka,ta;const {placement:Ka,rects:$a,middlewareData:mb}=d,ub=(d=0!==(null===(n=mb.arrow)||void 0===n?void 0:n.centerOffset))?0:a.arrowWidth;n=d?0:a.arrowHeight;const [zb,
ec]=Ub(Ka),ic={start:"0%",center:"50%",end:"100%"}[ec],bc=(null!==(R=null===(ea=mb.arrow)||void 0===ea?void 0:ea.x)&&void 0!==R?R:0)+ub/2;R=(null!==(ka=null===(ta=mb.arrow)||void 0===ta?void 0:ta.y)&&void 0!==ka?ka:0)+n/2;ta=ka="";"bottom"===zb?(ka=d?ic:`${bc}px`,ta=`${-n}px`):"top"===zb?(ka=d?ic:`${bc}px`,ta=`${$a.floating.height+n}px`):"right"===zb?(ka=`${-n}px`,ta=d?ic:`${R}px`):"left"===zb&&(ka=`${$a.floating.width+n}px`,ta=d?ic:`${R}px`);return{data:{x:ka,y:ta}}}}),Ex=a=>{const {__scopePopper:d,
children:n}=a,[R,ea]=(0,dl.useState)(null);return(0,dl.createElement)(FG,{scope:d,anchor:R,onAnchorChange:ea},n)},DB=ca(22),MG=pg(ca(23)),NG=(0,DB.forwardRef)((a,d)=>{var n;const {container:R=null===globalThis||void 0===globalThis?void 0:null===(n=globalThis.document)||void 0===n?void 0:n.body}=a;a=hg(a,["container"]);return R?MG.default.createPortal((0,DB.createElement)(lk.div,af({},a,{ref:d})),R):null}),pp=ca(22),OG=ca(23),Ut=a=>{const {present:d,children:n}=a;a=Ac(d);const R="function"===typeof n?
n({present:a.isPresent}):pp.Children.only(n),ea=Kh(a.ref,R.ref);return"function"===typeof n||a.isPresent?(0,pp.cloneElement)(R,{ref:ea}):null};Ut.displayName="Presence";var sv=ca(22),EB=ca(22),PG=(0,EB.forwardRef)((a,d)=>(0,EB.createElement)(lk.span,af({},a,{ref:d,style:we({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[tv]=ki("Tooltip",[Ds]),uv=Ds(),[QG,Fx]=tv("TooltipProvider"),[RG,
Vt]=tv("Tooltip"),SG=(0,Jh.forwardRef)((a,d)=>{var {__scopeTooltip:n}=a;const R=hg(a,["__scopeTooltip"]),ea=Vt("TooltipTrigger",n),ka=Fx("TooltipTrigger",n);n=uv(n);const ta=(0,Jh.useRef)(null);d=Kh(d,ta,ea.onTriggerChange);const Ka=(0,Jh.useRef)(!1),$a=(0,Jh.useRef)(!1),mb=(0,Jh.useCallback)(()=>Ka.current=!1,[]);(0,Jh.useEffect)(()=>()=>document.removeEventListener("pointerup",mb),[mb]);return(0,Jh.createElement)(Cx,af({asChild:!0},n),(0,Jh.createElement)(lk.button,af({"aria-describedby":ea.open?
ea.contentId:void 0,"data-state":ea.stateAttribute},R,{ref:d,onPointerMove:xg(a.onPointerMove,ub=>{"touch"===ub.pointerType||$a.current||ka.isPointerInTransitRef.current||(ea.onTriggerEnter(),$a.current=!0)}),onPointerLeave:xg(a.onPointerLeave,()=>{ea.onTriggerLeave();$a.current=!1}),onPointerDown:xg(a.onPointerDown,()=>{Ka.current=!0;document.addEventListener("pointerup",mb,{once:!0})}),onFocus:xg(a.onFocus,()=>{if(!Ka.current)ea.onOpen()}),onBlur:xg(a.onBlur,ea.onClose),onClick:xg(a.onClick,ea.onClose)})))}),
[TG,UG]=tv("TooltipPortal",{forceMount:void 0}),VG=(0,Jh.forwardRef)((a,d)=>{var n=UG("TooltipContent",a.__scopeTooltip);const {forceMount:R=n.forceMount,side:ea="top"}=a;n=hg(a,["forceMount","side"]);a=Vt("TooltipContent",a.__scopeTooltip);return(0,Jh.createElement)(Ut,{present:R||a.open},a.disableHoverableContent?(0,Jh.createElement)(FB,af({side:ea},n,{ref:d})):(0,Jh.createElement)(WG,af({side:ea},n,{ref:d})))}),WG=(0,Jh.forwardRef)((a,d)=>{const n=Vt("TooltipContent",a.__scopeTooltip),R=Fx("TooltipContent",
a.__scopeTooltip),ea=(0,Jh.useRef)(null);d=Kh(d,ea);const [ka,ta]=(0,Jh.useState)(null),{trigger:Ka,onClose:$a}=n,mb=ea.current,{onPointerInTransitChange:ub}=R,zb=(0,Jh.useCallback)(()=>{ta(null);ub(!1)},[ub]),ec=(0,Jh.useCallback)((ic,bc)=>{const Lc=Gd({x:ic.clientX,y:ic.clientY},ic.currentTarget.getBoundingClientRect()),$c="right"===Lc||"bottom"===Lc?-5:5;ic="right"===Lc||"left"===Lc?{x:ic.clientX+$c,y:ic.clientY}:{x:ic.clientX,y:ic.clientY+$c};bc=bc.getBoundingClientRect();const {top:tc,right:Tc,
bottom:Oc,left:ld}=bc;bc=Ld([ic,{x:ld,y:tc},{x:Tc,y:tc},{x:Tc,y:Oc},{x:ld,y:Oc}]);ta(bc);ub(!0)},[ub]);(0,Jh.useEffect)(()=>()=>zb(),[zb]);(0,Jh.useEffect)(()=>{if(Ka&&mb){const ic=Lc=>ec(Lc,mb),bc=Lc=>ec(Lc,Ka);Ka.addEventListener("pointerleave",ic);mb.addEventListener("pointerleave",bc);return()=>{Ka.removeEventListener("pointerleave",ic);mb.removeEventListener("pointerleave",bc)}}},[Ka,mb,ec,zb]);(0,Jh.useEffect)(()=>{if(ka){const ic=bc=>{var Lc=bc.target;bc={x:bc.clientX,y:bc.clientY};Lc=(null===
Ka||void 0===Ka?void 0:Ka.contains(Lc))||(null===mb||void 0===mb?void 0:mb.contains(Lc));const {x:$c,y:tc}=bc;bc=!1;for(let Tc=0,Oc=ka.length-1;Tc<ka.length;Oc=Tc++){const ld=ka[Tc].x,od=ka[Tc].y,Qd=ka[Oc].x,ge=ka[Oc].y;od>tc!==ge>tc&&$c<(Qd-ld)*(tc-od)/(ge-od)+ld&&(bc=!bc)}bc=!bc;Lc?zb():bc&&(zb(),$a())};document.addEventListener("pointermove",ic);return()=>document.removeEventListener("pointermove",ic)}},[Ka,mb,ka,$a,zb]);return(0,Jh.createElement)(FB,af({},a,{ref:d}))}),[XG,YG]=tv("Tooltip",{isInside:!1}),
FB=(0,Jh.forwardRef)((a,d)=>{const {__scopeTooltip:n,children:R,"aria-label":ea,onEscapeKeyDown:ka,onPointerDownOutside:ta}=a;a=hg(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Ka=Vt("TooltipContent",n),$a=uv(n),{onClose:mb}=Ka;(0,Jh.useEffect)(()=>{document.addEventListener("tooltip.open",mb);return()=>document.removeEventListener("tooltip.open",mb)},[mb]);(0,Jh.useEffect)(()=>{if(Ka.trigger){const ub=zb=>{zb=zb.target;null!==zb&&void 0!==zb&&zb.contains(Ka.trigger)&&
mb()};window.addEventListener("scroll",ub,{capture:!0});return()=>window.removeEventListener("scroll",ub,{capture:!0})}},[Ka.trigger,mb]);return(0,Jh.createElement)(xx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ka,onPointerDownOutside:ta,onFocusOutside:ub=>ub.preventDefault(),onDismiss:mb},(0,Jh.createElement)(Dx,af({"data-state":Ka.stateAttribute},$a,a,{ref:d,style:Mf(we({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,Jh.createElement)(oB,
null,R),(0,Jh.createElement)(XG,{scope:n,isInside:!0},(0,Jh.createElement)(PG,{id:Ka.contentId,role:"tooltip"},ea||R))))}),ZG=(0,Jh.forwardRef)((a,d)=>{const {__scopeTooltip:n}=a;a=hg(a,["__scopeTooltip"]);const R=uv(n);return YG("TooltipArrow",n).isInside?null:(0,Jh.createElement)(CB,af({},R,a,{ref:d}))}),$G=a=>{const {__scopeTooltip:d,delayDuration:n=700,skipDelayDuration:R=300,disableHoverableContent:ea=!1,children:ka}=a,[ta,Ka]=(0,Jh.useState)(!0),$a=(0,Jh.useRef)(!1),mb=(0,Jh.useRef)(0);(0,Jh.useEffect)(()=>
{const ub=mb.current;return()=>window.clearTimeout(ub)},[]);return(0,Jh.createElement)(QG,{scope:d,isOpenDelayed:ta,delayDuration:n,onOpen:(0,Jh.useCallback)(()=>{window.clearTimeout(mb.current);Ka(!1)},[]),onClose:(0,Jh.useCallback)(()=>{window.clearTimeout(mb.current);mb.current=window.setTimeout(()=>Ka(!0),R)},[R]),isPointerInTransitRef:$a,onPointerInTransitChange:(0,Jh.useCallback)(ub=>{$a.current=ub},[]),disableHoverableContent:ea},ka)},aH=a=>{const {__scopeTooltip:d,children:n,open:R,defaultOpen:ea=
!1,onOpenChange:ka,disableHoverableContent:ta,delayDuration:Ka}=a,$a=Fx("Tooltip",a.__scopeTooltip);a=uv(d);const [mb,ub]=(0,Jh.useState)(null),zb=hj(),ec=(0,Jh.useRef)(0),ic=null!==ta&&void 0!==ta?ta:$a.disableHoverableContent,bc=null!==Ka&&void 0!==Ka?Ka:$a.delayDuration,Lc=(0,Jh.useRef)(!1),[$c=!1,tc]=jd({prop:R,defaultProp:ea,onChange:Qd=>{if(Qd)$a.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else $a.onClose();null===ka||void 0===ka||ka(Qd)}}),Tc=(0,Jh.useMemo)(()=>$c?Lc.current?
"delayed-open":"instant-open":"closed",[$c]),Oc=(0,Jh.useCallback)(()=>{window.clearTimeout(ec.current);Lc.current=!1;tc(!0)},[tc]),ld=(0,Jh.useCallback)(()=>{window.clearTimeout(ec.current);tc(!1)},[tc]),od=(0,Jh.useCallback)(()=>{window.clearTimeout(ec.current);ec.current=window.setTimeout(()=>{Lc.current=!0;tc(!0)},bc)},[bc,tc]);(0,Jh.useEffect)(()=>()=>window.clearTimeout(ec.current),[]);return(0,Jh.createElement)(Ex,a,(0,Jh.createElement)(RG,{scope:d,contentId:zb,open:$c,stateAttribute:Tc,trigger:mb,
onTriggerChange:ub,onTriggerEnter:(0,Jh.useCallback)(()=>{$a.isOpenDelayed?od():Oc()},[$a.isOpenDelayed,od,Oc]),onTriggerLeave:(0,Jh.useCallback)(()=>{ic?ld():window.clearTimeout(ec.current)},[ld,ic]),onOpen:Oc,onClose:ld,disableHoverableContent:ic},n))},bH=SG,cH=a=>{const {__scopeTooltip:d,forceMount:n,children:R,container:ea}=a;a=Vt("TooltipPortal",d);return(0,Jh.createElement)(TG,{scope:d,forceMount:n},(0,Jh.createElement)(Ut,{present:n||a.open},(0,Jh.createElement)(NG,{asChild:!0,container:ea},
R)))},dH=VG,eH=ZG,pq=ca(602),GB=ca(602),Gx=ca(602),fH=({style:a,icon:d,onClick:n})=>(0,Gx.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:n,children:(0,Gx.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,Gx.jsx)(Qh,{name:d})})}),HB=ca(22),IB=(0,HB.forwardRef)((a,d)=>{const {pressed:n,defaultPressed:R=!1,onPressedChange:ea}=a,ka=hg(a,["pressed","defaultPressed","onPressedChange"]),[ta=!1,Ka]=jd({prop:n,onChange:ea,defaultProp:R});
return(0,HB.createElement)(lk.button,af({type:"button","aria-pressed":ta,"data-state":ta?"on":"off","data-disabled":a.disabled?"":void 0},ka,{ref:d,onClick:xg(a.onClick,()=>{a.disabled||Ka(!ta)})}))}),gH=IB,Hx=ca(602),Nn=ca(22),Dh=ca(22),Po=pg(ca(22)),JB=ca(22),hH=(0,JB.createContext)(void 0),iH=ca(22),Ix=0,qq=ca(22),KB={bubbles:!1,cancelable:!0},LB=(0,qq.forwardRef)((a,d)=>{const {loop:n=!1,trapped:R=!1,onMountAutoFocus:ea,onUnmountAutoFocus:ka}=a;a=hg(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);
const [ta,Ka]=(0,qq.useState)(null),$a=mj(ea),mb=mj(ka),ub=(0,qq.useRef)(null);d=Kh(d,ic=>Ka(ic));const zb=(0,qq.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,qq.useEffect)(()=>{if(R){let ic=function(Lc){!zb.paused&&ta&&(Lc=Lc.target,ta.contains(Lc)?ub.current=Lc:Pf(ub.current,{select:!0}))},bc=function(Lc){!zb.paused&&ta&&(ta.contains(Lc.relatedTarget)||Pf(ub.current,{select:!0}))};document.addEventListener("focusin",ic);document.addEventListener("focusout",bc);
return()=>{document.removeEventListener("focusin",ic);document.removeEventListener("focusout",bc)}}},[R,ta,zb.paused]);(0,qq.useEffect)(()=>{if(ta){MB.add(zb);const ic=document.activeElement;if(!ta.contains(ic)){const bc=new CustomEvent("focusScope.autoFocusOnMount",KB);ta.addEventListener("focusScope.autoFocusOnMount",$a);ta.dispatchEvent(bc);bc.defaultPrevented||(Vf(gi(If(ta)),{select:!0}),document.activeElement===ic&&Pf(ta))}return()=>{ta.removeEventListener("focusScope.autoFocusOnMount",$a);setTimeout(()=>
{const bc=new CustomEvent("focusScope.autoFocusOnUnmount",KB);ta.addEventListener("focusScope.autoFocusOnUnmount",mb);ta.dispatchEvent(bc);bc.defaultPrevented||Pf(null!==ic&&void 0!==ic?ic:document.body,{select:!0});ta.removeEventListener("focusScope.autoFocusOnUnmount",mb);MB.remove(zb)},0)}}},[ta,$a,mb,zb]);const ec=(0,qq.useCallback)(ic=>{if((n||R)&&!zb.paused){var bc=document.activeElement;if("Tab"===ic.key&&!ic.altKey&&!ic.ctrlKey&&!ic.metaKey&&bc){const $c=ic.currentTarget;var Lc=$c;const tc=
If(Lc),Tc=ih(tc,Lc);Lc=ih(tc.reverse(),Lc);const [Oc,ld]=[Tc,Lc];Oc&&ld?ic.shiftKey||bc!==ld?ic.shiftKey&&bc===Oc&&(ic.preventDefault(),n&&Pf(ld,{select:!0})):(ic.preventDefault(),n&&Pf(Oc,{select:!0})):bc===$c&&ic.preventDefault()}}},[n,R,zb.paused]);return(0,qq.createElement)(lk.div,af({tabIndex:-1},a,{ref:d,onKeyDown:ec}))}),MB=function(){let a=[];return{add(d){const n=a[0];d===n||null!==n&&void 0!==n&&n.pause();a=bi(a,d);a.unshift(d)},remove(d){var n;a=bi(a,d);null===(n=a[0])||void 0===n||n.resume()}}}(),
el=ca(22),jH={bubbles:!1,cancelable:!0},[Jx,NB,kH]=Hg("RovingFocusGroup"),[lH,vv]=ki("RovingFocusGroup",[kH]),[mH,nH]=lH("RovingFocusGroup"),OB=(0,el.forwardRef)((a,d)=>(0,el.createElement)(Jx.Provider,{scope:a.__scopeRovingFocusGroup},(0,el.createElement)(Jx.Slot,{scope:a.__scopeRovingFocusGroup},(0,el.createElement)(oH,af({},a,{ref:d}))))),oH=(0,el.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:n,orientation:R,loop:ea=!1,dir:ka,currentTabStopId:ta,defaultCurrentTabStopId:Ka,onCurrentTabStopIdChange:$a,
onEntryFocus:mb}=a,ub=hg(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),zb=(0,el.useRef)(null);d=Kh(d,zb);const ec=Tg(ka),[ic=null,bc]=jd({prop:ta,defaultProp:Ka,onChange:$a}),[Lc,$c]=(0,el.useState)(!1),tc=mj(mb),Tc=NB(n),Oc=(0,el.useRef)(!1),[ld,od]=(0,el.useState)(0);(0,el.useEffect)(()=>{const Qd=zb.current;if(Qd)return Qd.addEventListener("rovingFocusGroup.onEntryFocus",tc),()=>Qd.removeEventListener("rovingFocusGroup.onEntryFocus",
tc)},[tc]);return(0,el.createElement)(mH,{scope:n,orientation:R,dir:ec,loop:ea,currentTabStopId:ic,onItemFocus:(0,el.useCallback)(Qd=>bc(Qd),[bc]),onItemShiftTab:(0,el.useCallback)(()=>$c(!0),[]),onFocusableItemAdd:(0,el.useCallback)(()=>od(Qd=>Qd+1),[]),onFocusableItemRemove:(0,el.useCallback)(()=>od(Qd=>Qd-1),[])},(0,el.createElement)(lk.div,af({tabIndex:Lc||0===ld?-1:0,"data-orientation":R},ub,{ref:d,style:we({outline:"none"},a.style),onMouseDown:xg(a.onMouseDown,()=>{Oc.current=!0}),onFocus:xg(a.onFocus,
Qd=>{var ge=!Oc.current;if(Qd.target===Qd.currentTarget&&ge&&!Lc&&(ge=new CustomEvent("rovingFocusGroup.onEntryFocus",jH),Qd.currentTarget.dispatchEvent(ge),!ge.defaultPrevented)){Qd=Tc().filter(Be=>Be.focusable);ge=Qd.find(Be=>Be.active);const uf=Qd.find(Be=>Be.id===ic);Qd=[ge,uf,...Qd].filter(Boolean).map(Be=>Be.ref.current);rh(Qd)}Oc.current=!1}),onBlur:xg(a.onBlur,()=>$c(!1))})))}),PB=(0,el.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:n,focusable:R=!0,active:ea=!1}=a,ka=hg(a,["__scopeRovingFocusGroup",
"focusable","active"]),ta=hj(),Ka=nH("RovingFocusGroupItem",n),$a=Ka.currentTabStopId===ta,mb=NB(n),{onFocusableItemAdd:ub,onFocusableItemRemove:zb}=Ka;(0,el.useEffect)(()=>{if(R)return ub(),()=>zb()},[R,ub,zb]);return(0,el.createElement)(Jx.ItemSlot,{scope:n,id:ta,focusable:R,active:ea},(0,el.createElement)(lk.span,af({tabIndex:$a?0:-1,"data-orientation":Ka.orientation},ka,{ref:d,onMouseDown:xg(a.onMouseDown,ec=>{if(R)Ka.onItemFocus(ta);else ec.preventDefault()}),onFocus:xg(a.onFocus,()=>Ka.onItemFocus(ta)),
onKeyDown:xg(a.onKeyDown,ec=>{if("Tab"===ec.key&&ec.shiftKey)Ka.onItemShiftTab();else if(ec.target===ec.currentTarget){var ic=zi(ec,Ka.orientation,Ka.dir);if(void 0!==ic){ec.preventDefault();let bc=mb().filter(Lc=>Lc.focusable).map(Lc=>Lc.ref.current);if("last"===ic)bc.reverse();else if("prev"===ic||"next"===ic)"prev"===ic&&bc.reverse(),ec=bc.indexOf(ec.currentTarget),bc=Ka.loop?bh(bc,ec+1):bc.slice(ec+1);setTimeout(()=>rh(bc))}}})})))}),pH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",
PageUp:"first",Home:"first",PageDown:"last",End:"last"},qH=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},Es=new WeakMap,wv=new WeakMap,xv={},Kx=0,Lx=function(a,d,n){void 0===d&&(d=qH(a));void 0===n&&(n="data-aria-hidden");var R=Array.isArray(a)?a:[a];xv[n]||(xv[n]=new WeakMap);var ea=xv[n],ka=[],ta=new Set,Ka=function(mb){mb&&!ta.has(mb)&&(ta.add(mb),Ka(mb.parentNode))};R.forEach(Ka);var $a=function(mb){!mb||0<=R.indexOf(mb)||Array.prototype.forEach.call(mb.children,
function(ub){if(ta.has(ub))$a(ub);else{var zb=ub.getAttribute("aria-hidden");zb=null!==zb&&"false"!==zb;var ec=(Es.get(ub)||0)+1,ic=(ea.get(ub)||0)+1;Es.set(ub,ec);ea.set(ub,ic);ka.push(ub);1===ec&&zb&&wv.set(ub,!0);1===ic&&ub.setAttribute(n,"true");zb||ub.setAttribute("aria-hidden","true")}})};$a(d);ta.clear();Kx++;return function(){ka.forEach(function(mb){var ub=Es.get(mb)-1,zb=ea.get(mb)-1;Es.set(mb,ub);ea.set(mb,zb);ub||(wv.has(mb)||mb.removeAttribute("aria-hidden"),wv.delete(mb));zb||mb.removeAttribute(n)});
Kx--;Kx||(Es=new WeakMap,Es=new WeakMap,wv=new WeakMap,xv={})}},rH=pg(SD(),1),{__assign:rq,__rest:QB,__spreadArray:lo}=rH.default,RB=pg(ca(22)),qp=pg(ca(22)),sH=ca(22),SB=pg(ca(22)),Hl=function(a){var d=a.sideCar;a=QB(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");d=d.read();if(!d)throw Error("Sidecar medium not found");return SB.createElement(d,rq({},a))};Hl.isSideCarExport=!0;var Tm=function(a){void 0===a&&(a={});var d=Zl(null);d.options=rq({async:!0,
ssr:!1},a);return d}(),lt=function(){},Ju=qp.forwardRef(function(a,d){var n=qp.useRef(null),R=qp.useState({onScrollCapture:lt,onWheelCapture:lt,onTouchMoveCapture:lt}),ea=R[0];R=R[1];var ka=a.forwardProps,ta=a.children,Ka=a.className,$a=a.removeScrollBar,mb=a.enabled,ub=a.shards,zb=a.sideCar,ec=a.noIsolation,ic=a.inert,bc=a.allowPinchZoom,Lc=a.as;Lc=void 0===Lc?"div":Lc;a=QB(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));
d=Yj([n,d]);ea=rq(rq({},a),ea);return qp.createElement(qp.Fragment,null,mb&&qp.createElement(zb,{sideCar:Tm,removeScrollBar:$a,shards:ub,noIsolation:ec,inert:ic,setCallbacks:R,allowPinchZoom:!!bc,lockRef:n}),ka?qp.cloneElement(qp.Children.only(ta),rq(rq({},ea),{ref:d})):qp.createElement(Lc,rq({},ea,{className:Ka,ref:d}),ta))});Ju.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ju.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var ll=pg(ca(22)),sw=pg(ca(22)),
OD=pg(ca(22)),Ur=function(){var a=0,d=null;return{add:function(n){if(0==a){if(document){var R=document.createElement("style");R.type="text/css";var ea="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;ea&&R.setAttribute("nonce",ea)}else R=null;if(d=R)R=d,R.styleSheet?R.styleSheet.cssText=n:R.appendChild(document.createTextNode(n)),n=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),
d=null)}}},tw=function(){var a=Ur();return function(d,n){OD.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&n])}},TB=function(){var a=tw();return function(d){a(d.styles,d.dynamic);return null}},UB={left:0,top:0,right:0,gap:0},VB=TB(),WB=function(a,d,n,R){var ea=a.left,ka=a.top,ta=a.right;a=a.gap;void 0===n&&(n="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(R,";\n   padding-right: ").concat(a,"px ").concat(R,";\n  }\n  body {\n    overflow: hidden ").concat(R,
";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(R,";"),"margin"===n&&"\n    padding-left: ".concat(ea,"px;\n    padding-top: ").concat(ka,"px;\n    padding-right: ").concat(ta,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(R,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(R,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(R,
";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(R,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(R,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(R,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},XB=function(a){var d=a.noRelative,n=a.noImportant;
a=a.gapMode;var R=void 0===a?"margin":a;a=sw.useMemo(function(){var ea=R;void 0===ea&&(ea="margin");if("undefined"===typeof window)ea=UB;else{var ka=window.getComputedStyle(document.body),ta=ka["padding"===ea?"paddingTop":"marginTop"],Ka=ka["padding"===ea?"paddingRight":"marginRight"];ea=[parseInt(ka["padding"===ea?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(ta||"",10)||0,parseInt(Ka||"",10)||0];ea={left:ea[0],top:ea[1],right:ea[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+
ea[2]-ea[0])}}return ea},[R]);return sw.createElement(VB,{styles:WB(a,!d,R,n?"":"!important")})},uw=!1;if("undefined"!==typeof window)try{var gr=Object.defineProperty({},"passive",{get:function(){return uw=!0}});window.addEventListener("test",gr,gr);window.removeEventListener("test",gr,gr)}catch(a){uw=!1}var hr=uw?{passive:!1}:!1,vw=function(a,d){var n=window.getComputedStyle(a);return"hidden"!==n[d]&&!(n.overflowY===n.overflowX&&"TEXTAREA"!==a.tagName&&"visible"===n[d])},YB=function(a,d){do{"undefined"!==
typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(ZB(a,d)){var n=$B(a,d);if(n[1]>n[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},ZB=function(a,d){return"v"===a?vw(d,"overflowY"):vw(d,"overflowX")},$B=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},Wt=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},yv=function(a){return a&&"current"in a?a.current:a},
fk=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},mo=0,Ij=[];Tm.useMedium(function(a){var d=ll.useRef([]),n=ll.useRef([0,0]),R=ll.useRef(),ea=ll.useState(mo++)[0],ka=ll.useState(function(){return TB()})[0],ta=ll.useRef(a);ll.useEffect(function(){ta.current=a},[a]);ll.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(ea));var bc=lo([a.lockRef.current],(a.shards||
[]).map(yv),!0).filter(Boolean);bc.forEach(function(Lc){return Lc.classList.add("allow-interactivity-".concat(ea))});return function(){document.body.classList.remove("block-interactivity-".concat(ea));bc.forEach(function(Lc){return Lc.classList.remove("allow-interactivity-".concat(ea))})}}},[a.inert,a.lockRef.current,a.shards]);var Ka=ll.useCallback(function(bc,Lc){if("touches"in bc&&2===bc.touches.length)return!ta.current.allowPinchZoom;var $c=Wt(bc),tc=n.current,Tc="deltaX"in bc?bc.deltaX:tc[0]-
$c[0];tc="deltaY"in bc?bc.deltaY:tc[1]-$c[1];var Oc=bc.target,ld=Math.abs(Tc)>Math.abs(tc)?"h":"v";if("touches"in bc&&"h"===ld&&"range"===Oc.type)return!1;var od=YB(ld,Oc);if(!od)return!0;od?$c=ld:($c="v"===ld?"h":"v",od=YB(ld,Oc));if(!od)return!1;!R.current&&"changedTouches"in bc&&(Tc||tc)&&(R.current=$c);if(!$c)return!0;$c=R.current||$c;tc="h"===$c?Tc:tc;Tc=window.getComputedStyle(Lc).direction;Tc="h"===$c&&"rtl"===Tc?-1:1;ld=Tc*tc;bc=bc.target;tc=Lc.contains(bc);Oc=!1;ld=0<ld;var Qd=od=0;do{var ge=
$B($c,bc),uf=ge[0];ge=ge[1]-ge[2]-Tc*uf;(uf||ge)&&ZB($c,bc)&&(od+=ge,Qd+=uf);bc=bc.parentNode}while(!tc&&bc!==document.body||tc&&(Lc.contains(bc)||Lc===bc));ld&&0===od?Oc=!0:ld||0!==Qd||(Oc=!0);return Oc},[]),$a=ll.useCallback(function(bc){if(Ij.length&&Ij[Ij.length-1]===ka){var Lc="deltaY"in bc?[bc.deltaX,bc.deltaY]:Wt(bc),$c=d.current.filter(function(tc){var Tc;if(Tc=tc.name===bc.type&&tc.target===bc.target)tc=tc.delta,Tc=tc[0]===Lc[0]&&tc[1]===Lc[1];return Tc})[0];$c&&$c.should?bc.cancelable&&
bc.preventDefault():$c||($c=(ta.current.shards||[]).map(yv).filter(Boolean).filter(function(tc){return tc.contains(bc.target)}),(0<$c.length?Ka(bc,$c[0]):!ta.current.noIsolation)&&bc.cancelable&&bc.preventDefault())}},[]),mb=ll.useCallback(function(bc,Lc,$c,tc){var Tc={name:bc,delta:Lc,target:$c,should:tc};d.current.push(Tc);setTimeout(function(){d.current=d.current.filter(function(Oc){return Oc!==Tc})},1)},[]),ub=ll.useCallback(function(bc){n.current=Wt(bc);R.current=void 0},[]),zb=ll.useCallback(function(bc){mb(bc.type,
[bc.deltaX,bc.deltaY],bc.target,Ka(bc,a.lockRef.current))},[]),ec=ll.useCallback(function(bc){mb(bc.type,Wt(bc),bc.target,Ka(bc,a.lockRef.current))},[]);ll.useEffect(function(){Ij.push(ka);a.setCallbacks({onScrollCapture:zb,onWheelCapture:zb,onTouchMoveCapture:ec});document.addEventListener("wheel",$a,hr);document.addEventListener("touchmove",$a,hr);document.addEventListener("touchstart",ub,hr);return function(){Ij=Ij.filter(function(bc){return bc!==ka});document.removeEventListener("wheel",$a,hr);
document.removeEventListener("touchmove",$a,hr);document.removeEventListener("touchstart",ub,hr)}},[]);var ic=a.removeScrollBar;return ll.createElement(ll.Fragment,null,a.inert?ll.createElement(ka,{styles:fk(ea)}):null,ic?ll.createElement(XB,{gapMode:"margin"}):null)});var Qo=RB.forwardRef(function(a,d){return RB.createElement(Ju,rq({},a,{ref:d,sideCar:Hl}))});Qo.classNames=Ju.classNames;var fl=["Enter"," "],Um=["ArrowUp","PageDown","End"],ej=["ArrowDown","PageUp","Home",...Um];[...fl];[...fl];var [zv,
Av,Bv]=Hg("Menu"),[rp,Xt]=ki("Menu",[Bv,Ds,vv]),Yt=Ds(),Zi=vv(),[Mx,Fs]=rp("Menu"),[Nx,sq]=rp("Menu"),Ox=(0,Dh.forwardRef)((a,d)=>{var {__scopeMenu:n}=a;a=hg(a,["__scopeMenu"]);n=Yt(n);return(0,Dh.createElement)(Cx,af({},n,a,{ref:d}))}),[,wr]=rp("MenuPortal",{forceMount:void 0}),[tH,Zt]=rp("MenuContent"),$t=(0,Dh.forwardRef)((a,d)=>{var n=wr("MenuContent",a.__scopeMenu);({forceMount:n=n.forceMount}=a);const R=hg(a,["forceMount"]),ea=Fs("MenuContent",a.__scopeMenu),ka=sq("MenuContent",a.__scopeMenu);
return(0,Dh.createElement)(zv.Provider,{scope:a.__scopeMenu},(0,Dh.createElement)(Ut,{present:n||ea.open},(0,Dh.createElement)(zv.Slot,{scope:a.__scopeMenu},ka.modal?(0,Dh.createElement)(Px,af({},R,{ref:d})):(0,Dh.createElement)(au,af({},R,{ref:d})))))}),Px=(0,Dh.forwardRef)((a,d)=>{const n=Fs("MenuContent",a.__scopeMenu),R=(0,Dh.useRef)(null);d=Kh(d,R);(0,Dh.useEffect)(()=>{const ea=R.current;if(ea)return Lx(ea)},[]);return(0,Dh.createElement)(Cv,af({},a,{ref:d,trapFocus:n.open,disableOutsidePointerEvents:n.open,
disableOutsideScroll:!0,onFocusOutside:xg(a.onFocusOutside,ea=>ea.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),au=(0,Dh.forwardRef)((a,d)=>{const n=Fs("MenuContent",a.__scopeMenu);return(0,Dh.createElement)(Cv,af({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),Cv=(0,Dh.forwardRef)((a,d)=>{const {__scopeMenu:n,loop:R=!1,trapFocus:ea,onOpenAutoFocus:ka,onCloseAutoFocus:ta,disableOutsidePointerEvents:Ka,
onEscapeKeyDown:$a,onPointerDownOutside:mb,onFocusOutside:ub,onInteractOutside:zb,onDismiss:ec,disableOutsideScroll:ic}=a,bc=hg(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),Lc=Fs("MenuContent",n),$c=sq("MenuContent",n),tc=Yt(n),Tc=Zi(n),Oc=Av(n),[ld,od]=(0,Dh.useState)(null),Qd=(0,Dh.useRef)(null);d=Kh(d,Qd,Lc.onContentChange);const ge=(0,Dh.useRef)(0),
uf=(0,Dh.useRef)(""),Be=(0,Dh.useRef)(0),We=(0,Dh.useRef)(null),Tf=(0,Dh.useRef)("right"),ff=(0,Dh.useRef)(0),Jf=ic?Qo:Dh.Fragment,ee=ic?{as:Oo,allowPinchZoom:!0}:void 0,Nd=Fd=>{var ae,gf;Fd=uf.current+Fd;const wf=Oc().filter(bg=>!bg.disabled),og=document.activeElement,Xg=null===(ae=wf.find(bg=>bg.ref.current===og))||void 0===ae?void 0:ae.textValue;ae=wf.map(bg=>bg.textValue);const Ef=Mj(ae,Fd,Xg),mh=null===(gf=wf.find(bg=>bg.textValue===Ef))||void 0===gf?void 0:gf.ref.current;(function Lh(Bh){uf.current=
Bh;window.clearTimeout(ge.current);""!==Bh&&(ge.current=window.setTimeout(()=>Lh(""),1E3))})(Fd);mh&&setTimeout(()=>mh.focus())};(0,Dh.useEffect)(()=>()=>window.clearTimeout(ge.current),[]);mg();const $d=(0,Dh.useCallback)(Fd=>{var ae,gf,wf;if(wf=Tf.current===(null===(ae=We.current)||void 0===ae?void 0:ae.side)){if(ae=null===(gf=We.current)||void 0===gf?void 0:gf.area){const {x:og,y:Xg}={x:Fd.clientX,y:Fd.clientY};Fd=!1;for(let Ef=0,mh=ae.length-1;Ef<ae.length;mh=Ef++){gf=ae[Ef].x;wf=ae[Ef].y;const bg=
ae[mh].x,Bh=ae[mh].y;wf>Xg!==Bh>Xg&&og<(bg-gf)*(Xg-wf)/(Bh-wf)+gf&&(Fd=!Fd)}ae=Fd}else ae=!1;wf=ae}return wf},[]);return(0,Dh.createElement)(tH,{scope:n,searchRef:uf,onItemEnter:(0,Dh.useCallback)(Fd=>{$d(Fd)&&Fd.preventDefault()},[$d]),onItemLeave:(0,Dh.useCallback)(Fd=>{var ae;$d(Fd)||(null===(ae=Qd.current)||void 0===ae||ae.focus(),od(null))},[$d]),onTriggerLeave:(0,Dh.useCallback)(Fd=>{$d(Fd)&&Fd.preventDefault()},[$d]),pointerGraceTimerRef:Be,onPointerGraceIntentChange:(0,Dh.useCallback)(Fd=>
{We.current=Fd},[])},(0,Dh.createElement)(Jf,ee,(0,Dh.createElement)(LB,{asChild:!0,trapped:ea,onMountAutoFocus:xg(ka,Fd=>{var ae;Fd.preventDefault();null===(ae=Qd.current)||void 0===ae||ae.focus()}),onUnmountAutoFocus:ta},(0,Dh.createElement)(xx,{asChild:!0,disableOutsidePointerEvents:Ka,onEscapeKeyDown:$a,onPointerDownOutside:mb,onFocusOutside:ub,onInteractOutside:zb,onDismiss:ec},(0,Dh.createElement)(OB,af({asChild:!0},Tc,{dir:$c.dir,orientation:"vertical",loop:R,currentTabStopId:ld,onCurrentTabStopIdChange:od,
onEntryFocus:Fd=>{$c.isUsingKeyboardRef.current||Fd.preventDefault()}}),(0,Dh.createElement)(Dx,af({role:"menu","aria-orientation":"vertical","data-state":Lc.open?"open":"closed","data-radix-menu-content":"",dir:$c.dir},tc,bc,{ref:d,style:we({outline:"none"},bc.style),onKeyDown:xg(bc.onKeyDown,Fd=>{var ae=Fd.target.closest("[data-radix-menu-content]")===Fd.currentTarget;const gf=Fd.ctrlKey||Fd.altKey||Fd.metaKey,wf=1===Fd.key.length;ae&&("Tab"===Fd.key&&Fd.preventDefault(),!gf&&wf&&Nd(Fd.key));Fd.target===
Qd.current&&ej.includes(Fd.key)&&(Fd.preventDefault(),ae=Oc().filter(og=>!og.disabled).map(og=>og.ref.current),Um.includes(Fd.key)&&ae.reverse(),xo(ae))}),onBlur:xg(a.onBlur,Fd=>{Fd.currentTarget.contains(Fd.target)||(window.clearTimeout(ge.current),uf.current="")}),onPointerMove:xg(a.onPointerMove,yo(Fd=>{const ae=ff.current!==Fd.clientX;Fd.currentTarget.contains(Fd.target)&&ae&&(Tf.current=Fd.clientX>ff.current?"right":"left",ff.current=Fd.clientX)}))})))))))}),Gs=(0,Dh.forwardRef)((a,d)=>{const {disabled:n=
!1,onSelect:R}=a,ea=hg(a,["disabled","onSelect"]),ka=(0,Dh.useRef)(null),ta=sq("MenuItem",a.__scopeMenu),Ka=Zt("MenuItem",a.__scopeMenu);d=Kh(d,ka);const $a=(0,Dh.useRef)(!1);return(0,Dh.createElement)(aC,af({},ea,{ref:d,disabled:n,onClick:xg(a.onClick,()=>{const mb=ka.current;if(!n&&mb){const ub=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});mb.addEventListener("menu.itemSelect",zb=>null===R||void 0===R?void 0:R(zb),{once:!0});xl(mb,ub);if(ub.defaultPrevented)$a.current=!1;else ta.onClose()}}),
onPointerDown:mb=>{var ub;null===(ub=a.onPointerDown)||void 0===ub||ub.call(a,mb);$a.current=!0},onPointerUp:xg(a.onPointerUp,mb=>{var ub;$a.current||null===(ub=mb.currentTarget)||void 0===ub||ub.click()}),onKeyDown:xg(a.onKeyDown,mb=>{const ub=""!==Ka.searchRef.current;n||ub&&" "===mb.key||!fl.includes(mb.key)||(mb.currentTarget.click(),mb.preventDefault())})}))}),aC=(0,Dh.forwardRef)((a,d)=>{const {__scopeMenu:n,disabled:R=!1,textValue:ea}=a,ka=hg(a,["__scopeMenu","disabled","textValue"]),ta=Zt("MenuItem",
n),Ka=Zi(n),$a=(0,Dh.useRef)(null);d=Kh(d,$a);const [mb,ub]=(0,Dh.useState)(!1),[zb,ec]=(0,Dh.useState)("");(0,Dh.useEffect)(()=>{const ic=$a.current;if(ic){var bc;ec((null!==(bc=ic.textContent)&&void 0!==bc?bc:"").trim())}},[ka.children]);return(0,Dh.createElement)(zv.ItemSlot,{scope:n,disabled:R,textValue:null!==ea&&void 0!==ea?ea:zb},(0,Dh.createElement)(PB,af({asChild:!0},Ka,{focusable:!R}),(0,Dh.createElement)(lk.div,af({role:"menuitem","data-highlighted":mb?"":void 0,"aria-disabled":R||void 0,
"data-disabled":R?"":void 0},ka,{ref:d,onPointerMove:xg(a.onPointerMove,yo(ic=>{if(R)ta.onItemLeave(ic);else ta.onItemEnter(ic),ic.defaultPrevented||ic.currentTarget.focus()})),onPointerLeave:xg(a.onPointerLeave,yo(ic=>ta.onItemLeave(ic))),onFocus:xg(a.onFocus,()=>ub(!0)),onBlur:xg(a.onBlur,()=>ub(!1))}))))});rp("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});rp("MenuItemIndicator",{checked:!1});var bC=(0,Dh.forwardRef)((a,d)=>{a=hg(a,["__scopeMenu"]);return(0,Dh.createElement)(lk.div,af({role:"separator",
"aria-orientation":"horizontal"},a,{ref:d}))});rp("MenuSub");var cC=a=>{const {__scopeMenu:d,open:n=!1,children:R,dir:ea,onOpenChange:ka,modal:ta=!0}=a;a=Yt(d);const [Ka,$a]=(0,Dh.useState)(null),mb=(0,Dh.useRef)(!1),ub=mj(ka),zb=Tg(ea);(0,Dh.useEffect)(()=>{const ec=()=>{mb.current=!0;document.addEventListener("pointerdown",ic,{capture:!0,once:!0});document.addEventListener("pointermove",ic,{capture:!0,once:!0})},ic=()=>mb.current=!1;document.addEventListener("keydown",ec,{capture:!0});return()=>
{document.removeEventListener("keydown",ec,{capture:!0});document.removeEventListener("pointerdown",ic,{capture:!0});document.removeEventListener("pointermove",ic,{capture:!0})}},[]);return(0,Dh.createElement)(Ex,a,(0,Dh.createElement)(Mx,{scope:d,open:n,onOpenChange:ub,content:Ka,onContentChange:$a},(0,Dh.createElement)(Nx,{scope:d,onClose:(0,Dh.useCallback)(()=>ub(!1),[ub]),isUsingKeyboardRef:mb,dir:zb,modal:ta},R)))},[Hs]=ki("DropdownMenu",[Xt]),tq=Xt(),[Dv,bu]=Hs("DropdownMenu"),dC=(0,Nn.forwardRef)((a,
d)=>{const {__scopeDropdownMenu:n,disabled:R=!1}=a,ea=hg(a,["__scopeDropdownMenu","disabled"]),ka=bu("DropdownMenuTrigger",n),ta=tq(n);return(0,Nn.createElement)(Ox,af({asChild:!0},ta),(0,Nn.createElement)(lk.button,af({type:"button",id:ka.triggerId,"aria-haspopup":"menu","aria-expanded":ka.open,"aria-controls":ka.open?ka.contentId:void 0,"data-state":ka.open?"open":"closed","data-disabled":R?"":void 0,disabled:R},ea,{ref:dh(d,ka.triggerRef),onPointerDown:xg(a.onPointerDown,Ka=>{R||0!==Ka.button||
!1!==Ka.ctrlKey||(ka.onOpenToggle(),ka.open||Ka.preventDefault())}),onKeyDown:xg(a.onKeyDown,Ka=>{if(!R){if(["Enter"," "].includes(Ka.key))ka.onOpenToggle();if("ArrowDown"===Ka.key)ka.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Ka.key)&&Ka.preventDefault()}})})))}),Ev=(0,Nn.forwardRef)((a,d)=>{var {__scopeDropdownMenu:n}=a;const R=hg(a,["__scopeDropdownMenu"]),ea=bu("DropdownMenuContent",n);n=tq(n);const ka=(0,Nn.useRef)(!1);return(0,Nn.createElement)($t,af({id:ea.contentId,"aria-labelledby":ea.triggerId},
n,R,{ref:d,onCloseAutoFocus:xg(a.onCloseAutoFocus,ta=>{var Ka;ka.current||null===(Ka=ea.triggerRef.current)||void 0===Ka||Ka.focus();ka.current=!1;ta.preventDefault()}),onInteractOutside:xg(a.onInteractOutside,ta=>{ta=ta.detail.originalEvent;const Ka=0===ta.button&&!0===ta.ctrlKey;ta=2===ta.button||Ka;if(!ea.modal||ta)ka.current=!0}),style:Mf(we({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),cu=(0,Nn.forwardRef)((a,d)=>{var {__scopeDropdownMenu:n}=
a;a=hg(a,["__scopeDropdownMenu"]);n=tq(n);return(0,Nn.createElement)(Gs,af({},n,a,{ref:d}))}),Qx=a=>{const {__scopeDropdownMenu:d,children:n,dir:R,open:ea,defaultOpen:ka,onOpenChange:ta,modal:Ka=!0}=a;a=tq(d);const $a=(0,Nn.useRef)(null),[mb=!1,ub]=jd({prop:ea,defaultProp:ka,onChange:ta});return(0,Nn.createElement)(Dv,{scope:d,triggerId:hj(),triggerRef:$a,contentId:hj(),open:mb,onOpenChange:ub,onOpenToggle:(0,Nn.useCallback)(()=>ub(zb=>!zb),[ub]),modal:Ka},(0,Nn.createElement)(cC,af({},a,{open:mb,
onOpenChange:ub,dir:R,modal:Ka}),n))},fj=pg(ca(22)).default.createContext({}),eC=pg(ca(22)),fC=ca(602),Qk=a=>{var {action:d}=a;a=hg(a,["action"]);var {renderers:n}=eC.useContext(fj);n=null==n?void 0:n.KeyboardShortcut;return(0,fC.jsx)("div",Mf(we({className:"tl-menu-right-slot"},a),{children:(0,fC.jsx)(n,{action:d})}))};ca(22);var rl=ca(602),gC=Ce(function(){const a=Re(),d=n=>{n.preventDefault()};return(0,rl.jsxs)(Qx,{children:[(0,rl.jsx)(dC,{className:"tl-button text-sm px-2 important",id:"tl-zoom",
children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,rl.jsxs)(Ev,{onCloseAutoFocus:n=>n.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,rl.jsxs)(cu,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,rl.jsx)(Qk,{action:"whiteboard/zoom-to-fit"})]}),(0,rl.jsxs)(cu,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,children:["Zoom to fit selection",(0,rl.jsx)(Qk,{action:"whiteboard/zoom-to-selection"})]}),
(0,rl.jsxs)(cu,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomIn,children:["Zoom in",(0,rl.jsx)(Qk,{action:"whiteboard/zoom-in"})]}),(0,rl.jsxs)(cu,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,rl.jsx)(Qk,{action:"whiteboard/zoom-out"})]}),(0,rl.jsxs)(cu,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,rl.jsx)(Qk,{action:"whiteboard/reset-zoom"})]})]})]})}),Fv=ca(22),Rx=["horizontal","vertical"],Ro=(0,Fv.forwardRef)((a,
d)=>{const {decorative:n,orientation:R="horizontal"}=a;a=hg(a,["decorative","orientation"]);const ea=Rx.includes(R)?R:"horizontal";return(0,Fv.createElement)(lk.div,af({"data-orientation":ea},n?{role:"none"}:{"aria-orientation":"vertical"===ea?ea:void 0,role:"separator"},a,{ref:d}))});Ro.propTypes={orientation(a,d,n){a=a[d];d=String(a);return a&&!Rx.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${n}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var Dk=ca(602),Tx=Ce(function(){const a=Re(),{handlers:{t:d}}=oq.useContext(fj),n=oq.useCallback(()=>{a.api.undo()},[a]),R=oq.useCallback(()=>{a.api.redo()},[a]),ea=oq.useCallback(()=>{a.api.zoomIn()},[a]),ka=oq.useCallback(()=>{a.api.zoomOut()},[a]),ta=oq.useCallback(()=>{a.api.toggleGrid()},[a]),Ka=oq.useCallback(()=>{a.api.toggleSnapToGrid()},[a]),$a=oq.useCallback(()=>{a.api.togglePenMode()},[a]);return(0,Dk.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",
children:[!a.readOnly&&(0,Dk.jsxs)("div",{className:"tl-toolbar tl-history-bar mr-2 mb-2",children:[(0,Dk.jsx)(ve,{tooltip:d("whiteboard/undo"),onClick:n,children:(0,Dk.jsx)(Qh,{name:"arrow-back-up"})}),(0,Dk.jsx)(ve,{tooltip:d("whiteboard/redo"),onClick:R,children:(0,Dk.jsx)(Qh,{name:"arrow-forward-up"})})]}),(0,Dk.jsxs)("div",{className:"tl-toolbar tl-zoom-bar mr-2 mb-2",children:[(0,Dk.jsx)(ve,{tooltip:d("whiteboard/zoom-in"),onClick:ea,id:"tl-zoom-in",children:(0,Dk.jsx)(Qh,{name:"plus"})}),(0,Dk.jsx)(ve,
{tooltip:d("whiteboard/zoom-out"),onClick:ka,id:"tl-zoom-out",children:(0,Dk.jsx)(Qh,{name:"minus"})}),(0,Dk.jsx)(Ro,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Dk.jsx)(gC,{})]}),(0,Dk.jsxs)("div",{className:"tl-toolbar tl-grid-bar mr-2 mb-2",children:[(0,Dk.jsx)(lf,{tooltip:d("whiteboard/toggle-grid"),className:"tl-button",pressed:a.settings.showGrid,id:"tl-show-grid",onPressedChange:ta,children:(0,Dk.jsx)(Qh,{name:"grid-dots"})}),!a.readOnly&&(0,Dk.jsx)(lf,{tooltip:d("whiteboard/snap-to-grid"),
className:"tl-button",pressed:a.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:Ka,children:(0,Dk.jsx)(Qh,{name:a.settings.snapToGrid?"magnet":"magnet-off"})})]}),!a.readOnly&&(0,Dk.jsx)("div",{className:"tl-toolbar tl-pen-mode-bar mb-2",children:(0,Dk.jsx)(lf,{tooltip:d("whiteboard/toggle-pen-mode"),className:"tl-button",pressed:a.settings.penMode,id:"tl-toggle-pen-mode",onPressedChange:$a,children:(0,Dk.jsx)(Qh,{name:a.settings.penMode?"pencil":"pencil-off"})})})]})}),Is=pg(ca(22)),Sx=
pg(ca(23)),Gv=ca(602),jm=a=>`[${a.map(d=>{var n;return null!=(n=null==d?void 0:d.toFixed(2))?n:"-"}).join(", ")}]`,wm=Ce(()=>{var a;const {viewport:{bounds:d,camera:{point:n,zoom:R}},inputs:ea}=qd(),ka=Is.default.useRef();Is.default.useEffect(()=>{const Ka=document.getElementById("tl-statusbar-anchor");ka.current=Ka},[]);const ta=[["Z",null!=(a=null==R?void 0:R.toFixed(2))?a:"null"],["MP",jm(ea.currentPoint)],["MS",jm(ea.currentScreenPoint)],["VP",jm(n)],["VBR",jm([d.maxX,d.maxY])]].map(Ka=>Ka.join("")).join("|");
a=ka.current?Sx.default.createPortal((0,Gv.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:ta}),ka.current):null;return(0,Gv.jsx)(Gv.Fragment,{children:a})}),Vm=pg(ca(22)),du=ca(602),no=Ce(a=>{var {id:d,icon:n,tooltip:R,tooltipSide:ea="left",handleClick:ka}=a;a=hg(a,["id","icon","tooltip","tooltipSide","handleClick"]);var ta;const Ka=Re(),$a=null==(ta=[...Ka.Tools,vs,ws])?void 0:ta.find(mb=>mb.id===d);ta=(ta=null==$a?void 0:$a.shortcut)&&R?(0,du.jsxs)("div",{className:"flex",
children:[R,(0,du.jsx)(Qk,{action:ta})]}):R;return(0,du.jsx)(ve,Mf(we({},a),{tooltipSide:ea,tooltip:ta,"data-tool":d,"data-selected":d===Ka.selectedTool.id,onClick:ka,children:"string"===typeof n?(0,du.jsx)(Qh,{name:n}):n}))}),xj=ca(22),[Ux]=ki("Popover",[Ds]),Js=Ds(),[Vx,xr]=Ux("Popover"),Wx=(0,xj.forwardRef)((a,d)=>{var {__scopePopover:n}=a;const R=hg(a,["__scopePopover"]),ea=xr("PopoverTrigger",n);n=Js(n);d=Kh(d,ea.triggerRef);a=(0,xj.createElement)(lk.button,af({type:"button","aria-haspopup":"dialog",
"aria-expanded":ea.open,"aria-controls":ea.contentId,"data-state":ea.open?"open":"closed"},R,{ref:d,onClick:xg(a.onClick,ea.onOpenToggle)}));return ea.hasCustomAnchor?a:(0,xj.createElement)(Cx,af({asChild:!0},n),a)}),[,Xx]=Ux("PopoverPortal",{forceMount:void 0}),Yx=(0,xj.forwardRef)((a,d)=>{var n=Xx("PopoverContent",a.__scopePopover);({forceMount:n=n.forceMount}=a);const R=hg(a,["forceMount"]);a=xr("PopoverContent",a.__scopePopover);return(0,xj.createElement)(Ut,{present:n||a.open},a.modal?(0,xj.createElement)(Ks,
af({},R,{ref:d})):(0,xj.createElement)(hC,af({},R,{ref:d})))}),Ks=(0,xj.forwardRef)((a,d)=>{const n=xr("PopoverContent",a.__scopePopover),R=(0,xj.useRef)(null);d=Kh(d,R);const ea=(0,xj.useRef)(!1);(0,xj.useEffect)(()=>{const ka=R.current;if(ka)return Lx(ka)},[]);return(0,xj.createElement)(Qo,{as:Oo,allowPinchZoom:!0},(0,xj.createElement)(iC,af({},a,{ref:d,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xg(a.onCloseAutoFocus,ka=>{var ta;ka.preventDefault();ea.current||null===(ta=n.triggerRef.current)||
void 0===ta||ta.focus()}),onPointerDownOutside:xg(a.onPointerDownOutside,ka=>{ka=ka.detail.originalEvent;const ta=0===ka.button&&!0===ka.ctrlKey;ea.current=2===ka.button||ta},{checkForDefaultPrevented:!1}),onFocusOutside:xg(a.onFocusOutside,ka=>ka.preventDefault(),{checkForDefaultPrevented:!1})})))}),hC=(0,xj.forwardRef)((a,d)=>{const n=xr("PopoverContent",a.__scopePopover),R=(0,xj.useRef)(!1);return(0,xj.createElement)(iC,af({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:ea=>
{var ka;null===(ka=a.onCloseAutoFocus)||void 0===ka||ka.call(a,ea);if(!ea.defaultPrevented){var ta;R.current||null===(ta=n.triggerRef.current)||void 0===ta||ta.focus();ea.preventDefault()}R.current=!1},onInteractOutside:ea=>{var ka,ta;null===(ka=a.onInteractOutside)||void 0===ka||ka.call(a,ea);ea.defaultPrevented||(R.current=!0);ka=ea.target;(null===(ta=n.triggerRef.current)||void 0===ta?0:ta.contains(ka))&&ea.preventDefault()}}))}),iC=(0,xj.forwardRef)((a,d)=>{const {__scopePopover:n,trapFocus:R,
onOpenAutoFocus:ea,onCloseAutoFocus:ka,disableOutsidePointerEvents:ta,onEscapeKeyDown:Ka,onPointerDownOutside:$a,onFocusOutside:mb,onInteractOutside:ub}=a;a=hg(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const zb=xr("PopoverContent",n),ec=Js(n);mg();return(0,xj.createElement)(LB,{asChild:!0,loop:!0,trapped:R,onMountAutoFocus:ea,onUnmountAutoFocus:ka},(0,xj.createElement)(xx,
{asChild:!0,disableOutsidePointerEvents:ta,onInteractOutside:ub,onEscapeKeyDown:Ka,onPointerDownOutside:$a,onFocusOutside:mb,onDismiss:()=>zb.onOpenChange(!1)},(0,xj.createElement)(Dx,af({"data-state":zb.open?"open":"closed",role:"dialog",id:zb.contentId},ec,a,{ref:d,style:Mf(we({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),yr=(0,xj.forwardRef)((a,d)=>{var {__scopePopover:n}=a;a=hg(a,["__scopePopover"]);n=Js(n);return(0,xj.createElement)(CB,
af({},n,a,{ref:d}))}),Hv=a=>{const {__scopePopover:d,children:n,open:R,defaultOpen:ea,onOpenChange:ka,modal:ta=!1}=a;a=Js(d);const Ka=(0,xj.useRef)(null),[$a,mb]=(0,xj.useState)(!1),[ub=!1,zb]=jd({prop:R,defaultProp:ea,onChange:ka});return(0,xj.createElement)(Ex,a,(0,xj.createElement)(Vx,{scope:d,contentId:hj(),triggerRef:Ka,open:ub,onOpenChange:zb,onOpenToggle:(0,xj.useCallback)(()=>zb(ec=>!ec),[zb]),hasCustomAnchor:$a,onCustomAnchorAdd:(0,xj.useCallback)(()=>mb(!0),[]),onCustomAnchorRemove:(0,xj.useCallback)(()=>
mb(!1),[]),modal:ta},n))},jC=pg(ca(22)),So=ca(602),Zx=Ce(function(a){var {popoverSide:d="left",setGeometry:n,activeGeometry:R,chevron:ea=!0}=a;a=hg(a,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:ka}}=jC.default.useContext(fj);const ta=[{id:"box",icon:"square",tooltip:ka("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:ka("whiteboard/circle")},{id:"polygon",icon:"triangle",tooltip:ka("whiteboard/triangle")}];ka={id:"shapes",icon:"triangle-square-circle",tooltip:ka("whiteboard/shape")};
ka=R?ta.find(Ka=>Ka.id===R):ka;return(0,So.jsxs)(Hv,{children:[(0,So.jsx)(Wx,{asChild:!0,children:(0,So.jsxs)("div",Mf(we({},a),{className:"tl-geometry-tools-pane-anchor",children:[(0,So.jsx)(no,Mf(we({},ka),{tooltipSide:d})),ea&&(0,So.jsx)(Qh,{"data-selected":R,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,So.jsxs)(Yx,{className:"tl-popover-content",side:d,sideOffset:15,children:[(0,So.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":
"flex-row"}`,children:ta.map(Ka=>(0,So.jsx)(no,{id:Ka.id,icon:Ka.icon,tooltip:R?Ka.tooltip:"",handleClick:n,tooltipSide:d},Ka.id))}),(0,So.jsx)(yr,{className:"tl-popover-arrow"})]})]})}),vi=ca(22),$x=ca(22),ay=["PageUp","PageDown"],eu=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],by={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},
[cy,uH,kC]=Hg("Slider"),[To]=ki("Slider",[kC]),[sp,tp]=To("Slider"),zr=(0,vi.forwardRef)((a,d)=>{function n(ff){const Jf=mt(Be,ff);ka(ff,Jf)}function R(ff){ka(ff,Qd.current)}function ea(){Be[Qd.current]!==Tf.current[Qd.current]&&$c(Be)}function ka(ff,Jf,{commit:ee}={commit:!1}){const Nd=(String(mb).split(".")[1]||"").length;ff=Ho(Math.round((ff-Ka)/mb)*mb+Ka,Nd);const $d=cp(ff,[Ka,$a]);We((Fd=[])=>{const ae=an(Fd,$d,Jf);var gf=ec*mb;if(0<gf){const wf=fn(ae);gf=Math.min(...wf)>=gf}else gf=!0;return gf?
(Qd.current=ae.indexOf($d),(gf=String(ae)!==String(Fd))&&ee&&$c(ae),gf?ae:Fd):Fd})}const {name:ta,min:Ka=0,max:$a=100,step:mb=1,orientation:ub="horizontal",disabled:zb=!1,minStepsBetweenThumbs:ec=0,defaultValue:ic=[Ka],value:bc,onValueChange:Lc=()=>{},onValueCommit:$c=()=>{},inverted:tc=!1}=a,Tc=hg(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[Oc,ld]=(0,vi.useState)(null);d=Kh(d,ff=>ld(ff));const od=(0,vi.useRef)(new Set),
Qd=(0,vi.useRef)(0);var ge="horizontal"===ub;const uf=Oc?!!Oc.closest("form"):!0;ge=ge?vH:mC;const [Be=[],We]=jd({prop:bc,defaultProp:ic,onChange:ff=>{var Jf;null===(Jf=[...od.current][Qd.current])||void 0===Jf||Jf.focus();Lc(ff)}}),Tf=(0,vi.useRef)(Be);return(0,vi.createElement)(sp,{scope:a.__scopeSlider,disabled:zb,min:Ka,max:$a,valueIndexToChangeRef:Qd,thumbs:od.current,values:Be,orientation:ub},(0,vi.createElement)(cy.Provider,{scope:a.__scopeSlider},(0,vi.createElement)(cy.Slot,{scope:a.__scopeSlider},
(0,vi.createElement)(ge,af({"aria-disabled":zb,"data-disabled":zb?"":void 0},Tc,{ref:d,onPointerDown:xg(Tc.onPointerDown,()=>{zb||(Tf.current=Be)}),min:Ka,max:$a,inverted:tc,onSlideStart:zb?void 0:n,onSlideMove:zb?void 0:R,onSlideEnd:zb?void 0:ea,onHomeKeyDown:()=>!zb&&ka(Ka,0,{commit:!0}),onEndKeyDown:()=>!zb&&ka($a,Be.length-1,{commit:!0}),onStepKeyDown:({event:ff,direction:Jf})=>{if(!zb){ff=ay.includes(ff.key)||ff.shiftKey&&eu.includes(ff.key);const ee=Qd.current;ka(Be[ee]+mb*(ff?10:1)*Jf,ee,{commit:!0})}}})))),
uf&&Be.map((ff,Jf)=>(0,vi.createElement)(Ek,{key:Jf,name:ta?ta+(1<Be.length?"[]":""):void 0,value:ff})))}),[dy,lC]=To("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),vH=(0,vi.forwardRef)((a,d)=>{function n(Tc){const Oc=bc.current||ec.getBoundingClientRect(),ld=en([0,Oc.width],tc?[R,ea]:[ea,R]);bc.current=Oc;return ld(Tc-Oc.left)}const {min:R,max:ea,dir:ka,inverted:ta,onSlideStart:Ka,onSlideMove:$a,onSlideEnd:mb,onStepKeyDown:ub}=a,zb=hg(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
[ec,ic]=(0,vi.useState)(null);d=Kh(d,Tc=>ic(Tc));const bc=(0,vi.useRef)(),Lc=Tg(ka),$c="ltr"===Lc,tc=$c&&!ta||!$c&&ta;return(0,vi.createElement)(dy,{scope:a.__scopeSlider,startEdge:tc?"left":"right",endEdge:tc?"right":"left",direction:tc?1:-1,size:"width"},(0,vi.createElement)(vf,af({dir:Lc,"data-orientation":"horizontal"},zb,{ref:d,style:Mf(we({},zb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:Tc=>{Tc=n(Tc.clientX);null===Ka||void 0===Ka||Ka(Tc)},onSlideMove:Tc=>{Tc=
n(Tc.clientX);null===$a||void 0===$a||$a(Tc)},onSlideEnd:()=>{bc.current=void 0;null===mb||void 0===mb||mb()},onStepKeyDown:Tc=>{const Oc=by[tc?"from-left":"from-right"].includes(Tc.key);null===ub||void 0===ub||ub({event:Tc,direction:Oc?-1:1})}})))}),mC=(0,vi.forwardRef)((a,d)=>{function n(bc){const Lc=ec.current||zb.current.getBoundingClientRect(),$c=en([0,Lc.height],ic?[ea,R]:[R,ea]);ec.current=Lc;return $c(bc-Lc.top)}const {min:R,max:ea,inverted:ka,onSlideStart:ta,onSlideMove:Ka,onSlideEnd:$a,
onStepKeyDown:mb}=a,ub=hg(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),zb=(0,vi.useRef)(null);d=Kh(d,zb);const ec=(0,vi.useRef)(),ic=!ka;return(0,vi.createElement)(dy,{scope:a.__scopeSlider,startEdge:ic?"bottom":"top",endEdge:ic?"top":"bottom",size:"height",direction:ic?1:-1},(0,vi.createElement)(vf,af({"data-orientation":"vertical"},ub,{ref:d,style:Mf(we({},ub.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:bc=>{bc=n(bc.clientY);null===
ta||void 0===ta||ta(bc)},onSlideMove:bc=>{bc=n(bc.clientY);null===Ka||void 0===Ka||Ka(bc)},onSlideEnd:()=>{ec.current=void 0;null===$a||void 0===$a||$a()},onStepKeyDown:bc=>{const Lc=by[ic?"from-bottom":"from-top"].includes(bc.key);null===mb||void 0===mb||mb({event:bc,direction:Lc?-1:1})}})))}),vf=(0,vi.forwardRef)((a,d)=>{const {__scopeSlider:n,onSlideStart:R,onSlideMove:ea,onSlideEnd:ka,onHomeKeyDown:ta,onEndKeyDown:Ka,onStepKeyDown:$a}=a,mb=hg(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
ub=tp("Slider",n);return(0,vi.createElement)(lk.span,af({},mb,{ref:d,onKeyDown:xg(a.onKeyDown,zb=>{"Home"===zb.key?(ta(zb),zb.preventDefault()):"End"===zb.key?(Ka(zb),zb.preventDefault()):ay.concat(eu).includes(zb.key)&&($a(zb),zb.preventDefault())}),onPointerDown:xg(a.onPointerDown,zb=>{const ec=zb.target;ec.setPointerCapture(zb.pointerId);zb.preventDefault();ub.thumbs.has(ec)?ec.focus():R(zb)}),onPointerMove:xg(a.onPointerMove,zb=>{zb.target.hasPointerCapture(zb.pointerId)&&ea(zb)}),onPointerUp:xg(a.onPointerUp,
zb=>{const ec=zb.target;ec.hasPointerCapture(zb.pointerId)&&(ec.releasePointerCapture(zb.pointerId),ka(zb))})}))}),Dg=(0,vi.forwardRef)((a,d)=>{var {__scopeSlider:n}=a;a=hg(a,["__scopeSlider"]);n=tp("SliderTrack",n);return(0,vi.createElement)(lk.span,af({"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation},a,{ref:d}))}),Df=(0,vi.forwardRef)((a,d)=>{var {__scopeSlider:n}=a;const R=hg(a,["__scopeSlider"]),ea=tp("SliderRange",n);n=lC("SliderRange",n);var ka=(0,vi.useRef)(null);d=Kh(d,
ka);var ta=ea.values.length;ka=ea.values.map(Ka=>aj(Ka,ea.min,ea.max));ta=1<ta?Math.min(...ka):0;ka=100-Math.max(...ka);return(0,vi.createElement)(lk.span,af({"data-orientation":ea.orientation,"data-disabled":ea.disabled?"":void 0},R,{ref:d,style:Mf(we({},a.style),{[n.startEdge]:ta+"%",[n.endEdge]:ka+"%"})}))}),ng=(0,vi.forwardRef)((a,d)=>{const n=uH(a.__scopeSlider),[R,ea]=(0,vi.useState)(null);d=Kh(d,ta=>ea(ta));const ka=(0,vi.useMemo)(()=>R?n().findIndex(ta=>ta.ref.current===R):-1,[n,R]);return(0,vi.createElement)(on,
af({},a,{ref:d,index:ka}))}),on=(0,vi.forwardRef)((a,d)=>{const {__scopeSlider:n,index:R}=a,ea=hg(a,["__scopeSlider","index"]),ka=tp("SliderThumb",n),ta=lC("SliderThumb",n),[Ka,$a]=(0,vi.useState)(null);d=Kh(d,ic=>$a(ic));var mb=Rb(Ka);const ub=ka.values[R],zb=void 0===ub?0:aj(ub,ka.min,ka.max),ec=vl(R,ka.values.length);mb=(mb=null===mb||void 0===mb?void 0:mb[ta.size])?$l(mb,zb,ta.direction):0;(0,vi.useEffect)(()=>{if(Ka)return ka.thumbs.add(Ka),()=>{ka.thumbs.delete(Ka)}},[Ka,ka.thumbs]);return(0,vi.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[ta.startEdge]:`calc(${zb}% + ${mb}px)`}},(0,vi.createElement)(cy.ItemSlot,{scope:a.__scopeSlider},(0,vi.createElement)(lk.span,af({role:"slider","aria-label":a["aria-label"]||ec,"aria-valuemin":ka.min,"aria-valuenow":ub,"aria-valuemax":ka.max,"aria-orientation":ka.orientation,"data-orientation":ka.orientation,"data-disabled":ka.disabled?"":void 0,tabIndex:ka.disabled?void 0:0},ea,{ref:d,style:void 0===ub?{display:"none"}:
a.style,onFocus:xg(a.onFocus,()=>{ka.valueIndexToChangeRef.current=R})}))))}),Ek=a=>{const {value:d}=a;a=hg(a,["value"]);const n=(0,vi.useRef)(null),R=Xn(d);(0,vi.useEffect)(()=>{const ea=n.current,ka=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(R!==d&&ka){const ta=new Event("input",{bubbles:!0});ka.call(ea,d);ea.dispatchEvent(ta)}},[R,d]);return(0,vi.createElement)("input",af({style:{display:"none"}},a,{ref:n,defaultValue:d}))},fu=zr,Tj=Dg,Uo=Df,nf=ng,qg=pg(ca(22)),
Rl=ca(602),df=Ce(a=>{var {side:d,align:n,alignOffset:R,label:ea,arrow:ka,children:ta,border:Ka}=a;a=hg(a,"side align alignOffset label arrow children border".split(" "));const $a=qg.useRef(null),[mb,ub]=qg.useState(!1),{viewport:{bounds:zb,camera:{point:ec,zoom:ic}}}=Re(),[bc,Lc]=qg.useState(0);qg.useEffect(()=>{if($a.current&&mb){var $c=$a.current.getBoundingClientRect();Zf.boundsContain(zb,{minX:$c.x,minY:$c.y,maxX:$c.right,maxY:$c.bottom,width:$c.width,height:$c.height})||Lc(tc=>tc+1)}},[ec[0],
ec[1],ic,mb]);return(0,Rl.jsxs)(Hv,{onOpenChange:$c=>ub($c),children:[(0,Rl.jsx)(Wx,Mf(we({},a),{"data-border":Ka,className:"tl-button tl-popover-trigger-button",children:ea})),(0,Rl.jsxs)(Yx,{ref:$a,className:"tl-popover-content",align:n,alignOffset:R,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[ta,ka&&(0,Rl.jsx)(yr,{className:"tl-popover-arrow"})]},"popover-content-"+bc)]})}),uq=pg(ca(22)),gl=ca(602),ey=pg(ca(22)),Rf=ca(22),xm=ca(23),Sl=pg(ca(22)),km=
ca(22),Tl=ca(22),vq=ca(23),Fk="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const n=(0,Tl.forwardRef)((R,ea)=>{var {asChild:ka}=R;R=hg(R,["asChild"]);ka=ka?Oo:d;(0,Tl.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Tl.createElement)(ka,af({},R,{ref:ea}))});n.displayName=`Primitive.${d}`;return Mf(we({},a),{[d]:n})},{}),On,kh=(0,km.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ym=(0,km.forwardRef)((a,
d)=>{var n;const {disableOutsidePointerEvents:R=!1,onEscapeKeyDown:ea,onPointerDownOutside:ka,onFocusOutside:ta,onInteractOutside:Ka,onDismiss:$a}=a,mb=hg(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),ub=(0,km.useContext)(kh),[zb,ec]=(0,km.useState)(null),ic=null!==(n=null===zb||void 0===zb?void 0:zb.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,bc]=(0,km.useState)({});
d=Kh(d,Oc=>ec(Oc));n=Array.from(ub.layers);var [Lc]=[...ub.layersWithOutsidePointerEventsDisabled].slice(-1);Lc=n.indexOf(Lc);const $c=zb?n.indexOf(zb):-1;n=0<ub.layersWithOutsidePointerEventsDisabled.size;const tc=$c>=Lc;Lc=gp(Oc=>{const ld=Oc.target,od=[...ub.branches].some(Qd=>Qd.contains(ld));tc&&!od&&(null===ka||void 0===ka||ka(Oc),null===Ka||void 0===Ka||Ka(Oc),Oc.defaultPrevented||null===$a||void 0===$a||$a())},ic);const Tc=bn(Oc=>{const ld=Oc.target;[...ub.branches].some(od=>od.contains(ld))||
(null===ta||void 0===ta||ta(Oc),null===Ka||void 0===Ka||Ka(Oc),Oc.defaultPrevented||null===$a||void 0===$a||$a())},ic);yl(Oc=>{$c===ub.layers.size-1&&(null===ea||void 0===ea||ea(Oc),!Oc.defaultPrevented&&$a&&(Oc.preventDefault(),$a()))},ic);(0,km.useEffect)(()=>{if(zb)return R&&(0===ub.layersWithOutsidePointerEventsDisabled.size&&(On=ic.body.style.pointerEvents,ic.body.style.pointerEvents="none"),ub.layersWithOutsidePointerEventsDisabled.add(zb)),ub.layers.add(zb),An(),()=>{R&&1===ub.layersWithOutsidePointerEventsDisabled.size&&
(ic.body.style.pointerEvents=On)}},[zb,ic,R,ub]);(0,km.useEffect)(()=>()=>{zb&&(ub.layers.delete(zb),ub.layersWithOutsidePointerEventsDisabled.delete(zb),An())},[zb,ub]);(0,km.useEffect)(()=>{const Oc=()=>bc({});document.addEventListener("dismissableLayer.update",Oc);return()=>document.removeEventListener("dismissableLayer.update",Oc)},[]);return(0,km.createElement)(Fk.div,af({},mb,{ref:d,style:we({pointerEvents:n?tc?"auto":"none":void 0},a.style),onFocusCapture:xg(a.onFocusCapture,Tc.onFocusCapture),
onBlurCapture:xg(a.onBlurCapture,Tc.onBlurCapture),onPointerDownCapture:xg(a.onPointerDownCapture,Lc.onPointerDownCapture)}))}),lm=ca(22),fy={bubbles:!1,cancelable:!0},Ar=(0,lm.forwardRef)((a,d)=>{const {loop:n=!1,trapped:R=!1,onMountAutoFocus:ea,onUnmountAutoFocus:ka}=a;a=hg(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [ta,Ka]=(0,lm.useState)(null),$a=mj(ea),mb=mj(ka),ub=(0,lm.useRef)(null);d=Kh(d,ic=>Ka(ic));const zb=(0,lm.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,lm.useEffect)(()=>{if(R){let ic=function(Lc){!zb.paused&&ta&&(Lc=Lc.target,ta.contains(Lc)?ub.current=Lc:Lm(ub.current,{select:!0}))},bc=function(Lc){!zb.paused&&ta&&(ta.contains(Lc.relatedTarget)||Lm(ub.current,{select:!0}))};document.addEventListener("focusin",ic);document.addEventListener("focusout",bc);return()=>{document.removeEventListener("focusin",ic);document.removeEventListener("focusout",bc)}}},[R,ta,zb.paused]);(0,lm.useEffect)(()=>{if(ta){gh.add(zb);const ic=document.activeElement;
if(!ta.contains(ic)){const bc=new CustomEvent("focusScope.autoFocusOnMount",fy);ta.addEventListener("focusScope.autoFocusOnMount",$a);ta.dispatchEvent(bc);bc.defaultPrevented||(br(Tp(Fo(ta)),{select:!0}),document.activeElement===ic&&Lm(ta))}return()=>{ta.removeEventListener("focusScope.autoFocusOnMount",$a);setTimeout(()=>{const bc=new CustomEvent("focusScope.autoFocusOnUnmount",fy);ta.addEventListener("focusScope.autoFocusOnUnmount",mb);ta.dispatchEvent(bc);bc.defaultPrevented||Lm(null!==ic&&void 0!==
ic?ic:document.body,{select:!0});ta.removeEventListener("focusScope.autoFocusOnUnmount",mb);gh.remove(zb)},0)}}},[ta,$a,mb,zb]);const ec=(0,lm.useCallback)(ic=>{if((n||R)&&!zb.paused){var bc=document.activeElement;if("Tab"===ic.key&&!ic.altKey&&!ic.ctrlKey&&!ic.metaKey&&bc){const $c=ic.currentTarget;var Lc=$c;const tc=Fo(Lc),Tc=Gn(tc,Lc);Lc=Gn(tc.reverse(),Lc);const [Oc,ld]=[Tc,Lc];Oc&&ld?ic.shiftKey||bc!==ld?ic.shiftKey&&bc===Oc&&(ic.preventDefault(),n&&Lm(ld,{select:!0})):(ic.preventDefault(),n&&
Lm(Oc,{select:!0})):bc===$c&&ic.preventDefault()}}},[n,R,zb.paused]);return(0,lm.createElement)(Fk.div,af({tabIndex:-1},a,{ref:d,onKeyDown:ec}))}),gh=function(){let a=[];return{add(d){const n=a[0];d===n||null!==n&&void 0!==n&&n.pause();a=Yn(a,d);a.unshift(d)},remove(d){var n;a=Yn(a,d);null===(n=a[0])||void 0===n||n.resume()}}}(),Ul=ca(22),[oo,th]=ki("Popper"),[gu,Ej]=oo("Popper"),Gk=(0,Ul.forwardRef)((a,d)=>{const {__scopePopper:n,virtualRef:R}=a;a=hg(a,["__scopePopper","virtualRef"]);const ea=Ej("PopperAnchor",
n),ka=(0,Ul.useRef)(null);d=Kh(d,ka);(0,Ul.useEffect)(()=>{ea.onAnchorChange((null===R||void 0===R?void 0:R.current)||ka.current)});return R?null:(0,Ul.createElement)(Fk.div,af({},a,{ref:d}))}),[Ls]=oo("PopperContent"),[hu,gy]=oo("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Ms=(0,Ul.forwardRef)((a,d)=>{var n,R,ea,ka,ta,Ka,$a,mb;const {__scopePopper:ub,side:zb="bottom",sideOffset:ec=0,align:ic="center",alignOffset:bc=0,arrowPadding:Lc=0,collisionBoundary:$c=[],collisionPadding:tc=0,sticky:Tc=
"partial",hideWhenDetached:Oc=!1,avoidCollisions:ld=!0,onPlaced:od}=a,Qd=hg(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),ge=Ej("PopperContent",ub),[uf,Be]=(0,Ul.useState)(null);d=Kh(d,Hm=>Be(Hm));const [We,Tf]=(0,Ul.useState)(null);var ff=Rb(We),Jf=null!==(n=null===ff||void 0===ff?void 0:ff.width)&&void 0!==n?n:0;n=null!==(R=null===ff||void 0===ff?void 0:ff.height)&&void 0!==R?R:0;R=
zb+("center"!==ic?"-"+ic:"");ff="number"===typeof tc?tc:we({top:0,right:0,bottom:0,left:0},tc);const ee=Array.isArray($c)?$c:[$c],Nd=0<ee.length;ff={padding:ff,boundary:ee.filter(zh),altBoundary:Nd};const {reference:$d,floating:Fd,strategy:ae,x:gf,y:wf,placement:og,middlewareData:Xg,update:Ef}=vc({strategy:"fixed",placement:R,whileElementsMounted:qc,middleware:[hl(),vB({mainAxis:ec+n,alignmentAxis:bc}),ld?wB(we({mainAxis:!0,crossAxis:!1,limiter:"partial"===Tc?xB():void 0},ff)):void 0,We?AB({element:We,
padding:Lc}):void 0,ld?tB(we({},ff)):void 0,zG(Mf(we({},ff),{apply:({elements:Hm,availableWidth:vD,availableHeight:it})=>{Hm.floating.style.setProperty("--radix-popper-available-width",`${vD}px`);Hm.floating.style.setProperty("--radix-popper-available-height",`${it}px`)}})),nC({arrowWidth:Jf,arrowHeight:n}),Oc?uB({strategy:"referenceHidden"}):void 0].filter(dp)});Cl(()=>{$d(ge.anchor)},[$d,ge.anchor]);const mh=null!==gf&&null!==wf,[bg,Bh]=hp(og),Lh=mj(od);Cl(()=>{mh&&(null===Lh||void 0===Lh||Lh())},
[mh,Lh]);Jf=null===(ea=Xg.arrow)||void 0===ea?void 0:ea.x;ea=null===(ka=Xg.arrow)||void 0===ka?void 0:ka.y;ka=0!==(null===(ta=Xg.arrow)||void 0===ta?void 0:ta.centerOffset);const [$i,gk]=(0,Ul.useState)();Cl(()=>{uf&&gk(window.getComputedStyle(uf).zIndex)},[uf]);const {hasParent:hk,positionUpdateFns:ap}=gy("PopperContent",ub),Rp=!hk;(0,Ul.useLayoutEffect)(()=>{if(!Rp)return ap.add(Ef),()=>{ap.delete(Ef)}},[Rp,ap,Ef]);Cl(()=>{Rp&&mh&&Array.from(ap).reverse().forEach(Hm=>requestAnimationFrame(Hm))},
[Rp,mh,ap]);ta=Mf(we({"data-side":bg,"data-align":Bh},Qd),{ref:d,style:Mf(we({},Qd.style),{animation:mh?void 0:"none",opacity:null!==(Ka=Xg.hide)&&void 0!==Ka&&Ka.referenceHidden?0:void 0})});return(0,Ul.createElement)("div",{ref:Fd,"data-radix-popper-content-wrapper":"",style:{position:ae,left:0,top:0,transform:mh?`translate3d(${Math.round(gf)}px, ${Math.round(wf)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:$i,["--radix-popper-transform-origin"]:[null===($a=Xg.transformOrigin)||
void 0===$a?void 0:$a.x,null===(mb=Xg.transformOrigin)||void 0===mb?void 0:mb.y].join(" ")},dir:a.dir},(0,Ul.createElement)(Ls,{scope:ub,placedSide:bg,onArrowChange:Tf,arrowX:Jf,arrowY:ea,shouldHideArrow:ka},Rp?(0,Ul.createElement)(hu,{scope:ub,hasParent:!0,positionUpdateFns:ap},(0,Ul.createElement)(Fk.div,ta)):(0,Ul.createElement)(Fk.div,ta)))}),hl=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:n}=a,{width:R,height:ea}=d.reference;n.floating.style.setProperty("--radix-popper-anchor-width",
`${R}px`);n.floating.style.setProperty("--radix-popper-anchor-height",`${ea}px`);return{}}}),nC=a=>({name:"transformOrigin",options:a,fn(d){var n,R,ea,ka,ta;const {placement:Ka,rects:$a,middlewareData:mb}=d,ub=(d=0!==(null===(n=mb.arrow)||void 0===n?void 0:n.centerOffset))?0:a.arrowWidth;n=d?0:a.arrowHeight;const [zb,ec]=hp(Ka),ic={start:"0%",center:"50%",end:"100%"}[ec],bc=(null!==(R=null===(ea=mb.arrow)||void 0===ea?void 0:ea.x)&&void 0!==R?R:0)+ub/2;R=(null!==(ka=null===(ta=mb.arrow)||void 0===
ta?void 0:ta.y)&&void 0!==ka?ka:0)+n/2;ta=ka="";"bottom"===zb?(ka=d?ic:`${bc}px`,ta=`${-n}px`):"top"===zb?(ka=d?ic:`${bc}px`,ta=`${$a.floating.height+n}px`):"right"===zb?(ka=`${-n}px`,ta=d?ic:`${R}px`):"left"===zb&&(ka=`${$a.floating.width+n}px`,ta=d?ic:`${R}px`);return{data:{x:ka,y:ta}}}}),wH=a=>{const {__scopePopper:d,children:n}=a,[R,ea]=(0,Ul.useState)(null);return(0,Ul.createElement)(gu,{scope:d,anchor:R,onAnchorChange:ea},n)},oC=ca(22),xH=pg(ca(23)),wq=(0,oC.forwardRef)((a,d)=>{var n;const {container:R=
null===globalThis||void 0===globalThis?void 0:null===(n=globalThis.document)||void 0===n?void 0:n.body}=a;a=hg(a,["container"]);return R?xH.default.createPortal((0,oC.createElement)(Fk.div,af({},a,{ref:d})),R):null}),up=ca(22),Fj=(0,up.forwardRef)((a,d)=>(0,up.createElement)(Fk.span,af({},a,{ref:d,style:we({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),pC=[" ","Enter","ArrowUp","ArrowDown"],
hy=[" ","Enter"],[Iv,po,yH]=function(a){var d=a+"CollectionProvider";const [n,R]=ki(d),[ea,ka]=n(d,{collectionRef:{current:null},itemMap:new Map}),ta=ub=>{const {scope:zb,children:ec}=ub;ub=Sl.default.useRef(null);const ic=Sl.default.useRef(new Map).current;return Sl.default.createElement(ea,{scope:zb,itemMap:ic,collectionRef:ub},ec)};Object.assign(ta,{displayName:d});const Ka=a+"CollectionSlot";d=Sl.default.forwardRef((ub,zb)=>{const {scope:ec,children:ic}=ub;ub=ka(Ka,ec);zb=Kh(zb,ub.collectionRef);
return Sl.default.createElement(Oo,{ref:zb},ic)});Object.assign(d,{displayName:Ka});const $a=a+"CollectionItemSlot",mb=Sl.default.forwardRef((ub,zb)=>{const {scope:ec,children:ic}=ub,bc=hg(ub,["scope","children"]),Lc=Sl.default.useRef(null);ub=Kh(zb,Lc);const $c=ka($a,ec);Sl.default.useEffect(()=>{$c.itemMap.set(Lc,we({ref:Lc},bc));return()=>void $c.itemMap.delete(Lc)});return Sl.default.createElement(Oo,{["data-radix-collection-item"]:"",ref:ub},ic)});Object.assign(mb,{displayName:$a});return[{Provider:ta,
Slot:d,ItemSlot:mb},function(ub){const zb=ka(a+"CollectionConsumer",ub);return Sl.default.useCallback(()=>{const ec=zb.collectionRef.current;if(!ec)return[];const ic=Array.from(ec.querySelectorAll("[data-radix-collection-item]"));return Array.from(zb.itemMap.values()).sort((bc,Lc)=>ic.indexOf(bc.ref.current)-ic.indexOf(Lc.ref.current))},[zb.collectionRef,zb.itemMap])},R]}("Select"),[vp]=ki("Select",[yH,th]),iy=th(),[Jv,wp]=vp("Select"),[jy,ky]=vp("Select"),qC=(0,Rf.forwardRef)((a,d)=>{const {__scopeSelect:n,
disabled:R=!1}=a;a=hg(a,["__scopeSelect","disabled"]);const ea=iy(n),ka=wp("SelectTrigger",n),ta=ka.disabled||R;d=Kh(d,ka.onTriggerChange);const Ka=po(n),[$a,mb,ub]=ip(zb=>{const ec=Ka().filter(bc=>!bc.disabled),ic=ec.find(bc=>bc.value===ka.value);zb=Hn(ec,zb,ic);if(void 0!==zb)ka.onValueChange(zb.value)});return(0,Rf.createElement)(Gk,af({asChild:!0},ea),(0,Rf.createElement)(Fk.button,af({type:"button",role:"combobox","aria-controls":ka.contentId,"aria-expanded":ka.open,"aria-required":ka.required,
"aria-autocomplete":"none",dir:ka.dir,"data-state":ka.open?"open":"closed",disabled:ta,"data-disabled":ta?"":void 0,"data-placeholder":void 0===ka.value?"":void 0},a,{ref:d,onClick:xg(a.onClick,zb=>{zb.currentTarget.focus()}),onPointerDown:xg(a.onPointerDown,zb=>{const ec=zb.target;ec.hasPointerCapture(zb.pointerId)&&ec.releasePointerCapture(zb.pointerId);0===zb.button&&!1===zb.ctrlKey&&(ta||(ka.onOpenChange(!0),ub()),ka.triggerPointerDownPosRef.current={x:Math.round(zb.pageX),y:Math.round(zb.pageY)},
zb.preventDefault())}),onKeyDown:xg(a.onKeyDown,zb=>{const ec=""!==$a.current;zb.ctrlKey||zb.altKey||zb.metaKey||1!==zb.key.length||mb(zb.key);ec&&" "===zb.key||!pC.includes(zb.key)||(ta||(ka.onOpenChange(!0),ub()),zb.preventDefault())})})))}),rC=(0,Rf.forwardRef)((a,d)=>{const {__scopeSelect:n,children:R,placeholder:ea}=a;a=hg(a,["__scopeSelect","className","style","children","placeholder"]);const ka=wp("SelectValue",n),{onValueNodeHasChildrenChange:ta}=ka,Ka=void 0!==R;d=Kh(d,ka.onValueNodeChange);
Cl(()=>{ta(Ka)},[ta,Ka]);return(0,Rf.createElement)(Fk.span,af({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===ka.value&&void 0!==ea?ea:R)}),sC=(0,Rf.forwardRef)((a,d)=>{const {children:n}=a;a=hg(a,["__scopeSelect","children"]);return(0,Rf.createElement)(Fk.span,af({"aria-hidden":!0},a,{ref:d}),n||"▼")}),Br=(0,Rf.forwardRef)((a,d)=>{const n=wp("SelectContent",a.__scopeSelect),[R,ea]=(0,Rf.useState)();Cl(()=>{ea(new DocumentFragment)},[]);return n.open?(0,Rf.createElement)(tC,af({},a,{ref:d})):
R?(0,xm.createPortal)((0,Rf.createElement)(xq,{scope:a.__scopeSelect},(0,Rf.createElement)(Iv.Slot,{scope:a.__scopeSelect},(0,Rf.createElement)("div",null,a.children))),R):null}),[xq,xp]=vp("SelectContent"),tC=(0,Rf.forwardRef)((a,d)=>{const {__scopeSelect:n,position:R="item-aligned",onCloseAutoFocus:ea,onEscapeKeyDown:ka,onPointerDownOutside:ta,side:Ka,sideOffset:$a,align:mb,alignOffset:ub,arrowPadding:zb,collisionBoundary:ec,collisionPadding:ic,sticky:bc,hideWhenDetached:Lc,avoidCollisions:$c}=
a;a=hg(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const tc=wp("SelectContent",n),[Tc,Oc]=(0,Rf.useState)(null),[ld,od]=(0,Rf.useState)(null);d=Kh(d,bg=>Oc(bg));const [Qd,ge]=(0,Rf.useState)(null),[uf,Be]=(0,Rf.useState)(null),We=po(n),[Tf,ff]=(0,Rf.useState)(!1),Jf=(0,Rf.useRef)(!1);(0,Rf.useEffect)(()=>{if(Tc)return Lx(Tc)},[Tc]);
mg();const ee=(0,Rf.useCallback)(bg=>{const [Bh,...Lh]=We().map(hk=>hk.ref.current),[$i]=Lh.slice(-1),gk=document.activeElement;for(const hk of bg){if(hk===gk)break;null===hk||void 0===hk||hk.scrollIntoView({block:"nearest"});hk===Bh&&ld&&(ld.scrollTop=0);hk===$i&&ld&&(ld.scrollTop=ld.scrollHeight);null===hk||void 0===hk||hk.focus();if(document.activeElement!==gk)break}},[We,ld]),Nd=(0,Rf.useCallback)(()=>ee([Qd,Tc]),[ee,Qd,Tc]);(0,Rf.useEffect)(()=>{Tf&&Nd()},[Tf,Nd]);const {onOpenChange:$d,triggerPointerDownPosRef:Fd}=
tc;(0,Rf.useEffect)(()=>{if(Tc){var bg=0,Bh=0;const Lh=gk=>{var hk,ap,Rp,Hm;bg=Math.abs(Math.round(gk.pageX)-(null!==(hk=null===(ap=Fd.current)||void 0===ap?void 0:ap.x)&&void 0!==hk?hk:0));Bh=Math.abs(Math.round(gk.pageY)-(null!==(Rp=null===(Hm=Fd.current)||void 0===Hm?void 0:Hm.y)&&void 0!==Rp?Rp:0))},$i=gk=>{10>=bg&&10>=Bh?gk.preventDefault():Tc.contains(gk.target)||$d(!1);document.removeEventListener("pointermove",Lh);Fd.current=null};null!==Fd.current&&(document.addEventListener("pointermove",
Lh),document.addEventListener("pointerup",$i,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Lh);document.removeEventListener("pointerup",$i,{capture:!0})}}},[Tc,$d,Fd]);(0,Rf.useEffect)(()=>{const bg=()=>$d(!1);window.addEventListener("blur",bg);window.addEventListener("resize",bg);return()=>{window.removeEventListener("blur",bg);window.removeEventListener("resize",bg)}},[$d]);const [ae,gf]=ip(bg=>{const Bh=We().filter(gk=>!gk.disabled),Lh=Bh.find(gk=>gk.ref.current===
document.activeElement),$i=Hn(Bh,bg,Lh);$i&&setTimeout(()=>$i.ref.current.focus())}),wf=(0,Rf.useCallback)((bg,Bh,Lh)=>{Lh=!Jf.current&&!Lh;if(void 0!==tc.value&&tc.value===Bh||Lh)ge(bg),Lh&&(Jf.current=!0)},[tc.value]),og=(0,Rf.useCallback)(()=>null===Tc||void 0===Tc?void 0:Tc.focus(),[Tc]),Xg=(0,Rf.useCallback)((bg,Bh,Lh)=>{Lh=!Jf.current&&!Lh;(void 0!==tc.value&&tc.value===Bh||Lh)&&Be(bg)},[tc.value]),Ef="popper"===R?Cr:uC,mh=Ef===Cr?{side:Ka,sideOffset:$a,align:mb,alignOffset:ub,arrowPadding:zb,
collisionBoundary:ec,collisionPadding:ic,sticky:bc,hideWhenDetached:Lc,avoidCollisions:$c}:{};return(0,Rf.createElement)(xq,{scope:n,content:Tc,viewport:ld,onViewportChange:od,itemRefCallback:wf,selectedItem:Qd,onItemLeave:og,itemTextRefCallback:Xg,focusSelectedItem:Nd,selectedItemText:uf,position:R,isPositioned:Tf,searchRef:ae},(0,Rf.createElement)(Qo,{as:Oo,allowPinchZoom:!0},(0,Rf.createElement)(Ar,{asChild:!0,trapped:tc.open,onMountAutoFocus:bg=>{bg.preventDefault()},onUnmountAutoFocus:xg(ea,
bg=>{var Bh;null===(Bh=tc.trigger)||void 0===Bh||Bh.focus({preventScroll:!0});bg.preventDefault()})},(0,Rf.createElement)(ym,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:ka,onPointerDownOutside:ta,onFocusOutside:bg=>bg.preventDefault(),onDismiss:()=>tc.onOpenChange(!1)},(0,Rf.createElement)(Ef,af({role:"listbox",id:tc.contentId,"data-state":tc.open?"open":"closed",dir:tc.dir,onContextMenu:bg=>bg.preventDefault()},a,mh,{onPlaced:()=>ff(!0),ref:d,style:we({display:"flex",flexDirection:"column",
outline:"none"},a.style),onKeyDown:xg(a.onKeyDown,bg=>{var Bh=bg.ctrlKey||bg.altKey||bg.metaKey;"Tab"===bg.key&&bg.preventDefault();Bh||1!==bg.key.length||gf(bg.key);if(["ArrowUp","ArrowDown","Home","End"].includes(bg.key)){let Lh=We().filter($i=>!$i.disabled).map($i=>$i.ref.current);["ArrowUp","End"].includes(bg.key)&&(Lh=Lh.slice().reverse());["ArrowUp","ArrowDown"].includes(bg.key)&&(Bh=Lh.indexOf(bg.target),Lh=Lh.slice(Bh+1));setTimeout(()=>ee(Lh));bg.preventDefault()}})}))))))}),uC=(0,Rf.forwardRef)((a,
d)=>{const {__scopeSelect:n,onPlaced:R}=a;a=hg(a,["__scopeSelect","onPlaced"]);const ea=wp("SelectContent",n);var ka=xp("SelectContent",n);const [ta,Ka]=(0,Rf.useState)(null),[$a,mb]=(0,Rf.useState)(null);d=Kh(d,ld=>mb(ld));const ub=po(n),zb=(0,Rf.useRef)(!1),ec=(0,Rf.useRef)(!0),{viewport:ic,selectedItem:bc,selectedItemText:Lc,focusSelectedItem:$c}=ka,tc=(0,Rf.useCallback)(()=>{if(ea.trigger&&ea.valueNode&&ta&&$a&&ic&&bc&&Lc){var ld=ea.trigger.getBoundingClientRect(),od=$a.getBoundingClientRect(),
Qd=ea.valueNode.getBoundingClientRect(),ge=Lc.getBoundingClientRect();"rtl"!==ea.dir?(ge=Qd.left-(ge.left-od.left),Qd=ld.width+(ld.left-ge),od=cp(ge,[10,window.innerWidth-10-Math.max(Qd,od.width)]),ta.style.minWidth=Qd+"px",ta.style.left=od+"px"):(ge=window.innerWidth-Qd.right-(od.right-ge.right),Qd=ld.width+(window.innerWidth-ld.right-ge),od=cp(ge,[10,window.innerWidth-10-Math.max(Qd,od.width)]),ta.style.minWidth=Qd+"px",ta.style.right=od+"px");const Jf=ub();od=window.innerHeight-20;var uf=ic.scrollHeight,
Be=window.getComputedStyle($a);Qd=parseInt(Be.borderTopWidth,10);var We=parseInt(Be.paddingTop,10);ge=parseInt(Be.borderBottomWidth,10);Be=parseInt(Be.paddingBottom,10);var Tf=Qd+We+uf+Be+ge;uf=Math.min(5*bc.offsetHeight,Tf);var ff=window.getComputedStyle(ic);Be=parseInt(ff.paddingTop,10);ff=parseInt(ff.paddingBottom,10);const ee=ld.top+ld.height/2-10,Nd=od-ee;ld=bc.offsetHeight/2;We=Qd+We+(bc.offsetTop+ld);Tf-=We;We<=ee?(Qd=bc===Jf[Jf.length-1].ref.current,ta.style.bottom="0px",ta.style.height=We+
Math.max(Nd,ld+(Qd?ff:0)+($a.clientHeight-ic.offsetTop-ic.offsetHeight)+ge)+"px"):(ge=bc===Jf[0].ref.current,ta.style.top="0px",ta.style.height=Math.max(ee,Qd+ic.offsetTop+(ge?Be:0)+ld)+Tf+"px",ic.scrollTop=We-ee+ic.offsetTop);ta.style.margin="10px 0";ta.style.minHeight=uf+"px";ta.style.maxHeight=od+"px";null===R||void 0===R||R();requestAnimationFrame(()=>zb.current=!0)}},[ub,ea.trigger,ea.valueNode,ta,$a,ic,bc,Lc,ea.dir,R]);Cl(()=>tc(),[tc]);const [Tc,Oc]=(0,Rf.useState)();Cl(()=>{$a&&Oc(window.getComputedStyle($a).zIndex)},
[$a]);ka=(0,Rf.useCallback)(ld=>{ld&&!0===ec.current&&(tc(),null===$c||void 0===$c||$c(),ec.current=!1)},[tc,$c]);return(0,Rf.createElement)(Ns,{scope:n,contentWrapper:ta,shouldExpandOnScrollRef:zb,onScrollButtonChange:ka},(0,Rf.createElement)("div",{ref:Ka,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Tc}},(0,Rf.createElement)(Fk.div,af({},a,{ref:d,style:we({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),Cr=(0,Rf.forwardRef)((a,d)=>{const {__scopeSelect:n,align:R=
"start",collisionPadding:ea=10}=a;a=hg(a,["__scopeSelect","align","collisionPadding"]);const ka=iy(n);return(0,Rf.createElement)(Ms,af({},ka,a,{ref:d,align:R,collisionPadding:ea,style:Mf(we({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)",
"--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[Ns,Dr]=vp("SelectContent",{}),iu=(0,Rf.forwardRef)((a,d)=>{const {__scopeSelect:n}=a;a=hg(a,["__scopeSelect"]);const R=xp("SelectViewport",n),ea=Dr("SelectViewport",n);d=Kh(d,R.onViewportChange);const ka=(0,Rf.useRef)(0);return(0,Rf.createElement)(Rf.Fragment,null,(0,Rf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,Rf.createElement)(Iv.Slot,{scope:n},(0,Rf.createElement)(Fk.div,af({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:we({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:xg(a.onScroll,ta=>{ta=ta.currentTarget;const {contentWrapper:Ka,shouldExpandOnScrollRef:$a}=ea;if(null!==$a&&void 0!==$a&&$a.current&&Ka){var mb=Math.abs(ka.current-ta.scrollTop);if(0<mb){var ub=window.innerHeight-20,zb=parseFloat(Ka.style.minHeight);const ec=parseFloat(Ka.style.height);zb=Math.max(zb,
ec);zb<ub&&(mb=zb+mb,ub=Math.min(ub,mb),mb-=ub,Ka.style.height=ub+"px","0px"===Ka.style.bottom&&(ta.scrollTop=0<mb?mb:0,Ka.style.justifyContent="flex-end"))}}ka.current=ta.scrollTop})}))))});vp("SelectGroup");var [ju,yq]=vp("SelectItem"),Pn=(0,Rf.forwardRef)((a,d)=>{const {__scopeSelect:n,value:R,disabled:ea=!1,textValue:ka}=a;a=hg(a,["__scopeSelect","value","disabled","textValue"]);const ta=wp("SelectItem",n),Ka=xp("SelectItem",n),$a=ta.value===R,[mb,ub]=(0,Rf.useState)(null!==ka&&void 0!==ka?ka:
""),[zb,ec]=(0,Rf.useState)(!1);d=Kh(d,Lc=>{var $c;return null===($c=Ka.itemRefCallback)||void 0===$c?void 0:$c.call(Ka,Lc,R,ea)});const ic=hj(),bc=()=>{ea||(ta.onValueChange(R),ta.onOpenChange(!1))};return(0,Rf.createElement)(ju,{scope:n,value:R,disabled:ea,textId:ic,isSelected:$a,onItemTextChange:(0,Rf.useCallback)(Lc=>{ub($c=>{var tc;return $c||(null!==(tc=null===Lc||void 0===Lc?void 0:Lc.textContent)&&void 0!==tc?tc:"").trim()})},[])},(0,Rf.createElement)(Iv.ItemSlot,{scope:n,value:R,disabled:ea,
textValue:mb},(0,Rf.createElement)(Fk.div,af({role:"option","aria-labelledby":ic,"data-highlighted":zb?"":void 0,"aria-selected":$a&&zb,"data-state":$a?"checked":"unchecked","aria-disabled":ea||void 0,"data-disabled":ea?"":void 0,tabIndex:ea?void 0:-1},a,{ref:d,onFocus:xg(a.onFocus,()=>ec(!0)),onBlur:xg(a.onBlur,()=>ec(!1)),onPointerUp:xg(a.onPointerUp,bc),onPointerMove:xg(a.onPointerMove,Lc=>{if(ea){var $c;null===($c=Ka.onItemLeave)||void 0===$c||$c.call(Ka)}else Lc.currentTarget.focus({preventScroll:!0})}),
onPointerLeave:xg(a.onPointerLeave,Lc=>{if(Lc.currentTarget===document.activeElement){var $c;null===($c=Ka.onItemLeave)||void 0===$c||$c.call(Ka)}}),onKeyDown:xg(a.onKeyDown,Lc=>{var $c;if(""===(null===($c=Ka.searchRef)||void 0===$c?void 0:$c.current)||" "!==Lc.key)hy.includes(Lc.key)&&bc()," "===Lc.key&&Lc.preventDefault()})}))))}),vC=(0,Rf.forwardRef)((a,d)=>{var {__scopeSelect:n}=a;a=hg(a,["__scopeSelect","className","style"]);const R=wp("SelectItemText",n),ea=xp("SelectItemText",n),ka=yq("SelectItemText",
n);n=ky("SelectItemText",n);const [ta,Ka]=(0,Rf.useState)(null);d=Kh(d,ec=>Ka(ec),ka.onItemTextChange,ec=>{var ic;return null===(ic=ea.itemTextRefCallback)||void 0===ic?void 0:ic.call(ea,ec,ka.value,ka.disabled)});const $a=null===ta||void 0===ta?void 0:ta.textContent,mb=(0,Rf.useMemo)(()=>(0,Rf.createElement)("option",{key:ka.value,value:ka.value,disabled:ka.disabled},$a),[ka.disabled,ka.value,$a]),{onNativeOptionAdd:ub,onNativeOptionRemove:zb}=n;Cl(()=>{ub(mb);return()=>zb(mb)},[ub,zb,mb]);return(0,Rf.createElement)(Rf.Fragment,
null,(0,Rf.createElement)(Fk.span,af({id:ka.textId},a,{ref:d})),ka.isSelected&&R.valueNode&&!R.valueNodeHasChildren?(0,xm.createPortal)(a.children,R.valueNode):null)}),pn=(0,Rf.forwardRef)((a,d)=>{const n=xp("SelectScrollUpButton",a.__scopeSelect),R=Dr("SelectScrollUpButton",a.__scopeSelect),[ea,ka]=(0,Rf.useState)(!1);d=Kh(d,R.onScrollButtonChange);Cl(()=>{if(n.viewport&&n.isPositioned){let ta=function(){ka(0<Ka.scrollTop)};const Ka=n.viewport;ta();Ka.addEventListener("scroll",ta);return()=>Ka.removeEventListener("scroll",
ta)}},[n.viewport,n.isPositioned]);return ea?(0,Rf.createElement)(ku,af({},a,{ref:d,onAutoScroll:()=>{const {viewport:ta,selectedItem:Ka}=n;ta&&Ka&&(ta.scrollTop-=Ka.offsetHeight)}})):null}),Os=(0,Rf.forwardRef)((a,d)=>{const n=xp("SelectScrollDownButton",a.__scopeSelect),R=Dr("SelectScrollDownButton",a.__scopeSelect),[ea,ka]=(0,Rf.useState)(!1);d=Kh(d,R.onScrollButtonChange);Cl(()=>{if(n.viewport&&n.isPositioned){let ta=function(){ka(Math.ceil(Ka.scrollTop)<Ka.scrollHeight-Ka.clientHeight)};const Ka=
n.viewport;ta();Ka.addEventListener("scroll",ta);return()=>Ka.removeEventListener("scroll",ta)}},[n.viewport,n.isPositioned]);return ea?(0,Rf.createElement)(ku,af({},a,{ref:d,onAutoScroll:()=>{const {viewport:ta,selectedItem:Ka}=n;ta&&Ka&&(ta.scrollTop+=Ka.offsetHeight)}})):null}),ku=(0,Rf.forwardRef)((a,d)=>{const {__scopeSelect:n,onAutoScroll:R}=a;a=hg(a,["__scopeSelect","onAutoScroll"]);const ea=xp("SelectScrollButton",n),ka=(0,Rf.useRef)(null),ta=po(n),Ka=(0,Rf.useCallback)(()=>{null!==ka.current&&
(window.clearInterval(ka.current),ka.current=null)},[]);(0,Rf.useEffect)(()=>()=>Ka(),[Ka]);Cl(()=>{var $a;const mb=ta().find(ub=>ub.ref.current===document.activeElement);null===mb||void 0===mb||null===($a=mb.ref.current)||void 0===$a||$a.scrollIntoView({block:"nearest"})},[ta]);return(0,Rf.createElement)(Fk.div,af({"aria-hidden":!0},a,{ref:d,style:we({flexShrink:0},a.style),onPointerMove:xg(a.onPointerMove,()=>{var $a;null===($a=ea.onItemLeave)||void 0===$a||$a.call(ea);null===ka.current&&(ka.current=
window.setInterval(R,50))}),onPointerLeave:xg(a.onPointerLeave,()=>{Ka()})}))}),yp=(0,Rf.forwardRef)((a,d)=>{const {value:n}=a;a=hg(a,["value"]);const R=(0,Rf.useRef)(null);d=Kh(d,R);const ea=Xn(n);(0,Rf.useEffect)(()=>{const ka=R.current,ta=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(ea!==n&&ta){const Ka=new Event("change",{bubbles:!0});ta.call(ka,n);ka.dispatchEvent(Ka)}},[ea,n]);return(0,Rf.createElement)(Fj,{asChild:!0},(0,Rf.createElement)("select",af({},
a,{ref:d,defaultValue:n})))});yp.displayName="BubbleSelect";var wC=a=>{const {__scopeSelect:d,children:n,open:R,defaultOpen:ea,onOpenChange:ka,value:ta,defaultValue:Ka,onValueChange:$a,dir:mb,name:ub,autoComplete:zb,disabled:ec,required:ic}=a,bc=iy(d),[Lc,$c]=(0,Rf.useState)(null),[tc,Tc]=(0,Rf.useState)(null),[Oc,ld]=(0,Rf.useState)(!1),od=Tg(mb),[Qd=!1,ge]=jd({prop:R,defaultProp:ea,onChange:ka}),[uf,Be]=jd({prop:ta,defaultProp:Ka,onChange:$a}),We=(0,Rf.useRef)(null),Tf=Lc?!!Lc.closest("form"):!0,
[ff,Jf]=(0,Rf.useState)(new Set),ee=Array.from(ff).map(Nd=>Nd.props.value).join(";");return(0,Rf.createElement)(wH,bc,(0,Rf.createElement)(Jv,{required:ic,scope:d,trigger:Lc,onTriggerChange:$c,valueNode:tc,onValueNodeChange:Tc,valueNodeHasChildren:Oc,onValueNodeHasChildrenChange:ld,contentId:hj(),value:uf,onValueChange:Be,open:Qd,onOpenChange:ge,dir:od,triggerPointerDownPosRef:We,disabled:ec},(0,Rf.createElement)(Iv.Provider,{scope:d},(0,Rf.createElement)(jy,{scope:a.__scopeSelect,onNativeOptionAdd:(0,Rf.useCallback)(Nd=>
{Jf($d=>(new Set($d)).add(Nd))},[]),onNativeOptionRemove:(0,Rf.useCallback)(Nd=>{Jf($d=>{$d=new Set($d);$d.delete(Nd);return $d})},[])},n)),Tf?(0,Rf.createElement)(yp,{key:ee,"aria-hidden":!0,required:ic,tabIndex:-1,name:ub,autoComplete:zb,value:uf,onChange:Nd=>Be(Nd.target.value),disabled:ec},void 0===uf?(0,Rf.createElement)("option",{value:""}):null,Array.from(ff)):null))},yC=qC,zC=rC,Dl=sC,ly=a=>(0,Rf.createElement)(wq,af({asChild:!0},a)),xC=Br,Wm=iu,Yd=Pn,AC=vC,ji=pn,ni=Os,mm=ca(602),lu=pg(ca(22)),
Kv=ca(602),nm=ca(602),zH=Ce(function(){const a=Re(),{handlers:{t:d}}=Vm.useContext(fj),n=Vm.useCallback(ta=>{a.api.setColor(ta)},[]),R=Vm.useCallback(ta=>{(ta=ta.currentTarget.dataset.tool)&&a.selectTool(ta)},[]),[ea,ka]=Vm.useState(()=>{var ta;return null!=(ta=Object.values(ns).find(Ka=>Ka===a.selectedTool.id))?ta:Object.values(ns)[0]});Vm.useEffect(()=>{ka(ta=>{var Ka;return null!=(Ka=Object.values(ns).find($a=>$a===a.selectedTool.id))?Ka:ta})},[a.selectedTool.id]);return(0,nm.jsx)("div",{className:"tl-primary-tools",
"data-html2canvas-ignore":"true",children:(0,nm.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,nm.jsx)(no,{handleClick:()=>a.selectTool("select"),tooltip:d("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,nm.jsx)(no,{handleClick:()=>a.selectTool("move"),tooltip:d("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,nm.jsx)(Ro,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,nm.jsx)(no,{handleClick:()=>a.selectTool("logseq-portal"),
tooltip:d("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,nm.jsx)(no,{handleClick:()=>a.selectTool("pencil"),tooltip:d("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,nm.jsx)(no,{handleClick:()=>a.selectTool("highlighter"),tooltip:d("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,nm.jsx)(no,{handleClick:()=>a.selectTool("erase"),tooltip:d("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,nm.jsx)(no,{handleClick:()=>a.selectTool("line"),tooltip:d("whiteboard/connector"),
id:"line",icon:"connector"}),(0,nm.jsx)(no,{handleClick:()=>a.selectTool("text"),tooltip:d("whiteboard/text"),id:"text",icon:"text"}),(0,nm.jsx)(Zx,{activeGeometry:ea,setGeometry:R}),(0,nm.jsx)(Ro,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,nm.jsx)(qm,{popoverSide:"left",color:a.settings.color,setColor:n}),(0,nm.jsx)(Wr,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),Ps=ca(602),BC=Ce(function(){const a=Re();return(0,Ps.jsxs)("div",
{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,Ps.jsx)("div",{style:{flex:1}}),(0,Ps.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),Er=ca(602),zp=Ce(function(){const a=Re();return(0,Er.jsxs)(Er.Fragment,{children:[dc()&&(0,Er.jsx)(BC,{}),dc()&&(0,Er.jsx)(wm,{}),!a.readOnly&&(0,Er.jsx)(zH,{}),(0,Er.jsx)(Tx,{})]})}),Qs=pg(ca(22)),il=pg(ca(22)),my=pg(ca(22)),CC=pg(ca(22)),Ap=ca(602),Bp=({id:a,showReferenceContent:d=
!1})=>{var n;const {handlers:{isWhiteboardPage:R,redirectToPage:ea,sidebarAddBlock:ka,queryBlockByUUID:ta},renderers:{Breadcrumb:Ka,PageName:$a}}=CC.default.useContext(fj);var mb="";let ub=Eg(a)?"B":"P",zb="";if(Eg(a)){mb=ta(a);if(!mb)return(0,Ap.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});zb=mb.content;mb="whiteboard-shape"===(null==(n=mb.properties)?void 0:n["ls-type"])?"link-to-whiteboard":"link-to-block"}else mb=R(a)?"link-to-whiteboard":"link-to-page";n=zb&&
23<zb.length?zb.slice(0,20)+"...":zb;return(0,Ap.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:ec=>{ec.stopPropagation();ec.shiftKey?ka(a,"B"===ub?"block":"page"):ea(a)},children:[(0,Ap.jsx)(Qh,{name:mb}),(0,Ap.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===ub?(0,Ap.jsx)($a,{pageName:a}):(0,Ap.jsxs)(Ap.Fragment,{children:[(0,Ap.jsx)(Ka,{levelLimit:1,blockId:a,endSeparator:d}),d&&n]})})]})},sl=pg(ca(22)),zm=ca(22),ny=["children"],
Lv="undefined"!==typeof document?zm.useLayoutEffect:zm.useEffect,wh=pg(ca(22)),oi=ca(22),AH=ca(23),Fr,tl,DC="undefined"!=typeof document?oi.useLayoutEffect:oi.useEffect;!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(tl||={});var EC=((Fr={})[tl.DEBUG]="debug",Fr[tl.INFO]="log",Fr[tl.WARN]="warn",Fr[tl.ERROR]="error",Fr),Cp=Gi(function(){var a=wg(tl.ERROR);return{log:wg(function(d,n,R){var ea;void 0===R&&(R=tl.INFO);R>=(null!=(ea=("undefined"==typeof globalThis?
window:globalThis).VIRTUOSO_LOG_LEVEL)?ea:a(4))&&console[EC[R]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",d,n)}),logLevel:a}},[],{singleton:!0}),Am=Gi(function(){var a=oh(),d=oh(),n=wg(0),R=oh(),ea=wg(0),ka=oh(),ta=oh(),Ka=wg(0),$a=wg(0),mb=wg(0),ub=wg(0),zb=oh(),ec=oh(),ic=wg(!1),bc=wg(!1);return vh(gg(a,Ug(function(Lc){return Lc.scrollTop})),d),vh(gg(a,Ug(function(Lc){return Lc.scrollHeight})),ta),vh(d,ea),{scrollContainerState:a,scrollTop:d,viewportHeight:ka,
headerHeight:Ka,fixedHeaderHeight:$a,fixedFooterHeight:mb,footerHeight:ub,scrollHeight:ta,smoothScrollTargetReached:R,react18ConcurrentRendering:bc,scrollTo:zb,scrollBy:ec,statefulScrollTop:ea,deviation:n,scrollingInProgress:ic}},[],{singleton:!0}),Vi={lvl:0},oy=Gi(function(){return{recalcInProgress:wg(!1)}},[],{singleton:!0}),BH={offsetHeight:"height",offsetWidth:"width"},Dp=Gi(function(a){var d=a[0].log,n=a[1].recalcInProgress;a=oh();var R=oh(),ea=jk(R,0),ka=oh(),ta=oh(),Ka=wg(0),$a=wg([]),mb=wg(void 0),
ub=wg(void 0),zb=wg(function(Tc,Oc){return Ui(Tc,BH[Oc])}),ec=wg(void 0),ic=wg(0),bc={offsetTree:[],sizeTree:Vi,groupOffsetTree:Vi,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},Lc=jk(gg(a,di($a,d,ic),tk(Xi,bc),Ci()),bc);vh(gg($a,Pg(function(Tc){return 0<Tc.length}),di(Lc,ic),Ug(function(Tc){var Oc=Tc[0],ld=Tc[1],od=Tc[2];Tc=Oc.reduce(function(Qd,ge,uf){return Aa(Qd,ge,Di(ge,ld.offsetTree,od)||uf)},Vi);return Ph({},ld,{groupIndices:Oc,groupOffsetTree:Tc})})),Lc);vh(gg(R,di(Lc),Pg(function(Tc){return Tc[0]<
Tc[1].lastIndex}),Ug(function(Tc){var Oc=Tc[1];return[{startIndex:Tc[0],endIndex:Oc.lastIndex,size:Oc.lastSize}]})),a);vh(mb,ub);var $c=jk(gg(mb,Ug(function(Tc){return void 0===Tc})),!0);vh(gg(ub,Pg(function(Tc){return void 0!==Tc&&Lc(4).sizeTree===Vi}),Ug(function(Tc){return[{startIndex:0,endIndex:0,size:Tc}]})),a);bc=Ak(gg(a,di(Lc),tk(function(Tc,Oc){Oc=Oc[1];return{changed:Oc!==Tc.sizes,sizes:Oc}},{changed:!1,sizes:bc}),Ug(function(Tc){return Tc.changed})));Sh(gg(Ka,tk(function(Tc,Oc){return{diff:Tc.prev-
Oc,prev:Oc}},{diff:0,prev:0}),Ug(function(Tc){return Tc.diff})),function(Tc){0<Tc?(n(0,!0),ka(0,Tc)):0>Tc&&ta(0,Tc)});Sh(gg(Ka,di(d)),function(Tc){0>Tc[0]&&(0,Tc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:Ka},tl.ERROR)});d=Ak(ka);vh(gg(ka,di(Lc),Ug(function(Tc){var Oc=Tc[0];Tc=Tc[1];if(0<Tc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return La(Tc.sizeTree).reduce(function(ld,
od){var Qd=od.k;od=od.v;return{ranges:[].concat(ld.ranges,[{startIndex:ld.prevIndex,endIndex:Qd+Oc-1,size:ld.prevSize}]),prevIndex:Qd+Oc,prevSize:od}},{ranges:[],prevIndex:0,prevSize:Tc.lastSize}).ranges})),a);var tc=Ak(gg(ta,di(Lc,ic),Ug(function(Tc){return Di(-Tc[0],Tc[1].offsetTree,Tc[2])})));return vh(gg(ta,di(Lc,ic),Ug(function(Tc){var Oc=Tc[0],ld=Tc[1];Tc=Tc[2];if(0<ld.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var od=La(ld.sizeTree).reduce(function(Qd,
ge){return Aa(Qd,Math.max(0,ge.k+Oc),ge.v)},Vi);return Ph({},ld,{sizeTree:od},cj(ld.offsetTree,0,od,Tc))})),Lc),{data:ec,totalCount:R,sizeRanges:a,groupIndices:$a,defaultItemSize:ub,fixedItemSize:mb,unshiftWith:ka,shiftWith:ta,shiftWithOffset:tc,beforeUnshiftWith:d,firstItemIndex:Ka,gap:ic,sizes:Lc,listRefresh:bc,statefulTotalCount:ea,trackItemSizes:$c,itemSize:zb}},tj(Cp,oy),{singleton:!0}),CH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,mu=Gi(function(a){function d(){$c&&
($c(),$c=null);Tc&&(Tc(),Tc=null);tc&&(clearTimeout(tc),tc=null);Ka(0,!1)}var n=a[0],R=n.sizes,ea=n.totalCount,ka=n.listRefresh;n=n.gap;var ta=a[1],Ka=ta.scrollingInProgress,$a=ta.viewportHeight,mb=ta.scrollTo,ub=ta.smoothScrollTargetReached,zb=ta.headerHeight,ec=ta.footerHeight,ic=ta.fixedHeaderHeight;ta=ta.fixedFooterHeight;a=a[2].log;var bc=oh(),Lc=wg(0),$c=null,tc=null,Tc=null;return vh(gg(bc,di(R,$a,ea,Lc,zb,ec,a),di(n,ic,ta),Ug(function(Oc){var ld=Oc[0],od=ld[0],Qd=ld[1],ge=ld[2],uf=ld[3],Be=
ld[4],We=ld[5],Tf=ld[6],ff=ld[7],Jf=Oc[1];ld=Oc[2];Oc=Oc[3];var ee=Ei(od),Nd=ee.align,$d=ee.behavior,Fd=ee.offset;--uf;ee=dj(ee,Qd,uf);We=Di(ee,Qd.offsetTree,Jf)+We;"end"===Nd?(We+=ld+da(Qd.sizeTree,ee)[1]-ge+Oc,ee===uf&&(We+=Tf)):"center"===Nd?We+=(ld+da(Qd.sizeTree,ee)[1]-ge+Oc)/2:We-=Be;Fd&&(We+=Fd);var ae=function(wf){d();wf?(ff("retrying to scroll to",{location:od},tl.DEBUG),bc(0,od)):ff("list did not change, scroll successful",{},tl.DEBUG)};if(d(),"smooth"===$d){var gf=!1;Tc=Sh(ka,function(wf){gf=
gf||wf});$c=Mm(ub,function(){ae(gf)})}else $c=Mm(gg(ka,function(wf){var og=setTimeout(function(){wf(!1)},150);return function(Xg){Xg&&(wf(!0),clearTimeout(og))}}),ae);tc=setTimeout(function(){d()},1200);Ka(0,!0);return ff("scrolling from index to",{index:ee,top:We,behavior:$d},tl.DEBUG),{top:We,behavior:$d}})),mb),{scrollToIndex:bc,topListHeight:Lc}},tj(Dp,Am,Cp),{singleton:!0}),DH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},
nu=Gi(function(a){var d=a[0],n=d.scrollContainerState;a=d.scrollTop;var R=d.viewportHeight,ea=d.headerHeight,ka=d.footerHeight,ta=d.scrollBy;d=wg(!1);var Ka=wg(!0),$a=oh(),mb=oh(),ub=wg(4),zb=wg(0),ec=jk(gg(dq(gg(Wh(a),em(1),gn(!0)),gg(Wh(a),em(1),gn(!1),bk(100))),Ci()),!1),ic=jk(gg(dq(gg(ta,gn(!0)),gg(ta,gn(!1),bk(200))),Ci()),!1);vh(gg(Qj(Wh(a),Wh(zb)),Ug(function(bc){return bc[0]<=bc[1]}),Ci()),Ka);vh(gg(Ka,fo(50)),mb);R=Ak(gg(Qj(n,Wh(R),Wh(ea),Wh(ka),Wh(ub)),tk(function(bc,Lc){var $c,tc,Tc=Lc[0],
Oc=Tc.scrollTop;Tc=Tc.scrollHeight;var ld=Lc[1],od={viewportHeight:ld,scrollTop:Oc,scrollHeight:Tc};return Oc+ld-Tc>-Lc[4]?(Oc>bc.state.scrollTop?($c="SCROLLED_DOWN",tc=bc.state.scrollTop-Oc):($c="SIZE_DECREASED",tc=bc.state.scrollTop-Oc||bc.scrollTopDelta),{atBottom:!0,state:od,atBottomBecause:$c,scrollTopDelta:tc}):{atBottom:!1,notAtBottomBecause:od.scrollHeight>bc.state.scrollHeight?"SIZE_INCREASED":ld<bc.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Oc<bc.state.scrollTop?"SCROLLING_UPWARDS":
"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:od}},DH),Ci(function(bc,Lc){return bc&&bc.atBottom===Lc.atBottom})));ea=jk(gg(n,tk(function(bc,Lc){var $c=Lc.scrollTop,tc=Lc.scrollHeight;Lc=Lc.viewportHeight;return 1.01>Math.abs(bc.scrollHeight-tc)?{scrollTop:$c,scrollHeight:tc,jump:0,changed:!1}:bc.scrollTop!==$c&&1>tc-($c+Lc)?{scrollHeight:tc,scrollTop:$c,jump:bc.scrollTop-$c,changed:!0}:{scrollHeight:tc,scrollTop:$c,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Pg(function(bc){return bc.changed}),
Ug(function(bc){return bc.jump})),0);vh(gg(R,Ug(function(bc){return bc.atBottom})),d);vh(gg(d,fo(50)),$a);ka=wg("down");vh(gg(n,Ug(function(bc){return bc.scrollTop}),Ci(),tk(function(bc,Lc){return ic(4)?{direction:bc.direction,prevScrollTop:Lc}:{direction:Lc<bc.prevScrollTop?"up":"down",prevScrollTop:Lc}},{direction:"down",prevScrollTop:0}),Ug(function(bc){return bc.direction})),ka);vh(gg(n,fo(50),gn("none")),ka);n=wg(0);return vh(gg(ec,Pg(function(bc){return!bc}),gn(0)),n),vh(gg(a,fo(100),di(ec),
Pg(function(bc){return!!bc[1]}),tk(function(bc,Lc){return[bc[1],Lc[0]]},[0,0]),Ug(function(bc){return bc[1]-bc[0]})),n),{isScrolling:ec,isAtTop:Ka,isAtBottom:d,atBottomState:R,atTopStateChange:mb,atBottomStateChange:$a,scrollDirection:ka,atBottomThreshold:ub,atTopThreshold:zb,scrollVelocity:n,lastJumpDueToItemResize:ea}},tj(Am)),zq=Gi(function(a){var d=a[0].log;a=wg(!1);var n=Ak(gg(a,Pg(function(R){return R}),Ci()));return Sh(a,function(R){R&&d(4)("props updated",{},tl.DEBUG)}),{propsReady:a,didMount:n}},
tj(Cp),{singleton:!0}),Mv=Gi(function(a){var d=a[0],n=d.sizes,R=d.listRefresh;d=d.defaultItemSize;var ea=a[1].scrollTop,ka=a[2].scrollToIndex;a=a[3].didMount;var ta=wg(!0),Ka=wg(0);return vh(gg(a,di(Ka),Pg(function($a){return!!$a[1]}),gn(!1)),ta),Sh(gg(Qj(R,a),di(ta,n,d),Pg(function($a){var mb=$a[1],ub=$a[3];return $a[0][1]&&($a[2].sizeTree!==Vi||void 0!==ub)&&!mb}),di(Ka)),function($a){var mb=$a[1];setTimeout(function(){Mm(ea,function(){ta(0,!0)});ka(0,mb)})}),{scrolledToInitialItem:ta,initialTopMostItemIndex:Ka}},
tj(Dp,Am,mu,zq),{singleton:!0}),FC=Gi(function(a){function d(Lc){$a(0,{index:"LAST",align:"end",behavior:Lc})}function n(Lc){var $c=Mm(Ka,function(tc){!Lc||tc.atBottom||"SIZE_INCREASED"!==tc.notAtBottomBecause||bc||(zb(4)("scrolling to bottom due to increased size",{},tl.DEBUG),d("auto"))});setTimeout($c,100)}var R=a[0],ea=R.totalCount,ka=R.listRefresh,ta=a[1];R=ta.isAtBottom;var Ka=ta.atBottomState,$a=a[2].scrollToIndex;ta=a[3].scrolledToInitialItem;var mb=a[4],ub=mb.propsReady;mb=mb.didMount;var zb=
a[5].log;a=a[6].scrollingInProgress;var ec=wg(!1),ic=oh(),bc=null;return Sh(gg(Qj(gg(Wh(ea),em(1)),mb),di(Wh(ec),R,ta,a),Ug(function(Lc){var $c=Lc[0],tc=$c[0];$c=$c[1]&&Lc[3];var Tc="auto";$c&&(Tc=Lc[1],Lc=Lc[2]||Lc[4],Tc="function"==typeof Tc?Hi(Tc(Lc)):Lc&&Hi(Tc),$c=$c&&!!Tc);return{totalCount:tc,shouldFollow:$c,followOutputBehavior:Tc}}),Pg(function(Lc){return Lc.shouldFollow})),function(Lc){var $c=Lc.totalCount,tc=Lc.followOutputBehavior;bc&&(bc(),bc=null);bc=Mm(ka,function(){zb(4)("following output to ",
{totalCount:$c},tl.DEBUG);d(tc);bc=null})}),Sh(gg(Qj(Wh(ec),ea,ub),Pg(function(Lc){return Lc[0]&&Lc[2]}),tk(function(Lc,$c){$c=$c[1];return{refreshed:Lc.value===$c,value:$c}},{refreshed:!1,value:0}),Pg(function(Lc){return Lc.refreshed}),di(ec,ea)),function(Lc){n(!1!==Lc[1])}),Sh(ic,function(){n(!1!==ec(4))}),Sh(Qj(Wh(ec),Ka),function(Lc){var $c=Lc[1];Lc[0]&&!$c.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===$c.notAtBottomBecause&&d("auto")}),{followOutput:ec,autoscrollToBottom:ic}},tj(Dp,nu,mu,Mv,zq,Cp,
Am)),GC=Gi(function(a){var d=a[0],n=d.totalCount,R=d.groupIndices;d=d.sizes;var ea=a[1];a=ea.scrollTop;ea=ea.headerHeight;var ka=oh(),ta=oh(),Ka=Ak(gg(ka,Ug(Yi)));return vh(gg(Ka,Ug(function($a){return $a.totalCount})),n),vh(gg(Ka,Ug(function($a){return $a.groupIndices})),R),vh(gg(Qj(a,d,ea),Pg(function($a){return $a[1].groupOffsetTree!==Vi}),Ug(function($a){return da($a[1].groupOffsetTree,Math.max($a[0]-$a[2],0),"v")[0]}),Ci(),Ug(function($a){return[$a]})),ta),{groupCounts:ka,topItemsIndexes:ta}},
tj(Dp,Am)),py=Gi(function(a){var d=a[0];a=d.scrollTop;var n=d.viewportHeight,R=d.deviation,ea=d.headerHeight,ka=d.fixedHeaderHeight;d=oh();var ta=wg(0),Ka=wg(0),$a=wg(0);a=jk(gg(Qj(Wh(a),Wh(n),Wh(ea),Wh(d,Sj),Wh($a),Wh(ta),Wh(ka),Wh(R),Wh(Ka)),Ug(function(mb){var ub=mb[0],zb=mb[1],ec=mb[2],ic=mb[3],bc=ic[0];ic=ic[1];var Lc=mb[4],$c=mb[6],tc=mb[7],Tc=mb[8],Oc=ub-tc;mb=mb[5]+$c;var ld=Math.max(ec-Oc,0),od="none",Qd="number"==typeof Tc?Tc:Tc.top||0;Tc="number"==typeof Tc?Tc:Tc.bottom||0;return bc-=tc,
ic+=ec+$c,bc+(ec+$c)>ub+mb-Qd&&(od="up"),ic-tc<ub-ld+zb+Tc&&(od="down"),"none"!==od?[Math.max(Oc-ec-Bl(Lc,"top",od)-Qd,0),Oc-ld-$c+zb+Bl(Lc,"bottom",od)+Tc]:null}),Pg(function(mb){return null!=mb}),Ci(Sj)),[0,0]);return{listBoundary:d,overscan:$a,topListHeight:ta,increaseViewportBy:Ka,visibleRange:a}},tj(Am),{singleton:!0}),HC={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},Rs=Gi(function(a){var d=a[0],n=d.sizes,R=d.totalCount,ea=d.data,
ka=d.firstItemIndex,ta=d.gap,Ka=a[1],$a=a[2],mb=$a.visibleRange;d=$a.listBoundary;$a=$a.topListHeight;var ub=a[3],zb=ub.scrolledToInitialItem,ec=ub.initialTopMostItemIndex;ub=a[4].topListHeight;var ic=a[5],bc=a[6].didMount,Lc=a[7].recalcInProgress;a=wg([]);var $c=oh();vh(Ka.topItemsIndexes,a);n=jk(gg(Qj(bc,Lc,Wh(mb,Sj),Wh(R),Wh(n),Wh(ec),zb,Wh(a),Wh(ka),Wh(ta),ea),Pg(function(tc){return tc[0]&&!tc[1]}),Ug(function(tc){var Tc=tc[2],Oc=Tc[0],ld=Tc[1];Tc=tc[3];var od=tc[5],Qd=tc[6],ge=tc[7],uf=tc[8],
Be=tc[9],We=tc[10];tc=tc[4];var Tf=tc.sizeTree,ff=tc.offsetTree;if(0===Tc||0===Oc&&0===ld)return Ph({},HC,{totalCount:Tc});if(Tf===Vi)return Qm(function(Xg,Ef,mh){return Ef.groupOffsetTree!==Vi?(Xg=ii(Xg,Ef),[{index:da(Ef.groupOffsetTree,Xg)[0],size:0,offset:0},{index:Xg,size:0,offset:0,data:mh&&mh[0]}]):[{index:Xg,size:0,offset:0,data:mh&&mh[0]}]}("number"==typeof od?od:"LAST"===od.index?Tc-1:od.index,tc,We),[],Tc,Be,tc,uf);od=[];if(0<ge.length){var Jf,ee=ge[0],Nd=ge[ge.length-1],$d=0;for(Tf=gm(sd(Tf,
ee,Nd));!(Jf=Tf()).done;){var Fd=Jf.value;Jf=Fd.value;var ae=Math.min(Fd.end,Nd);for(Fd=Math.max(Fd.start,ee);Fd<=ae;Fd++)od.push({index:Fd,size:Jf,offset:$d,data:We&&We[Fd]}),$d+=Jf}}if(!Qd)return Qm([],od,Tc,Be,tc,uf);var gf=0<ge.length?ge[ge.length-1]+1:0,wf=function(Xg,Ef,mh,bg){return void 0===bg&&(bg=0),0<bg&&(Ef=Math.max(Ef,Xg[Ze(Xg,bg,Ah)].offset)),Ud((Lh=mh,gk=Ze(Bh=Xg,Ef,$i=kk),hk=Ze(Bh,Lh,$i,gk),Bh.slice(gk,hk+1)),lh);var Bh,Lh,$i,gk,hk}(ff,Oc,ld,gf);if(0===wf.length)return null;var og=
Tc-1;return Qm(wj([],function(Xg){for(var Ef,mh=gm(wf);!(Ef=mh()).done;){var bg=Ef.value,Bh=bg.value;Ef=Bh.offset;var Lh=bg.start,$i=Bh.size;Bh.offset<Oc&&(Bh=(Lh+=Math.floor((Oc-Bh.offset+Be)/($i+Be)))-bg.start,Ef+=Bh*$i+Bh*Be);Lh<gf&&(Ef+=(gf-Lh)*$i,Lh=gf);for(bg=Math.min(bg.end,og);Lh<=bg&&!(Ef>=ld);Lh++)Xg.push({index:Lh,size:$i,offset:Ef,data:We&&We[Lh]}),Ef+=$i+Be}}),od,Tc,Be,tc,uf)}),Pg(function(tc){return null!==tc}),Ci()),HC);return vh(gg(ea,Pg(function(tc){return void 0!==tc}),Ug(function(tc){return tc.length})),
R),vh(gg(n,Ug(function(tc){return tc.topListHeight})),ub),vh(ub,$a),vh(gg(n,Ug(function(tc){return[tc.top,tc.bottom]})),d),vh(gg(n,Ug(function(tc){return tc.items})),$c),Ph({listState:n,topItemsIndexes:a,endReached:Ak(gg(n,Pg(function(tc){return 0<tc.items.length}),di(R,ea),Pg(function(tc){var Tc=tc[0].items;return Tc[Tc.length-1].originalIndex===tc[1]-1}),Ug(function(tc){return[tc[1]-1,tc[2]]}),Ci(Sj),Ug(function(tc){return tc[0]}))),startReached:Ak(gg(n,fo(200),Pg(function(tc){var Tc=tc.items;return 0<
Tc.length&&Tc[0].originalIndex===tc.topItems.length}),Ug(function(tc){return tc.items[0].index}),Ci())),rangeChanged:Ak(gg(n,Pg(function(tc){return 0<tc.items.length}),Ug(function(tc){tc=tc.items;for(var Tc=0,Oc=tc.length-1;"group"===tc[Tc].type&&Tc<Oc;)Tc++;for(;"group"===tc[Oc].type&&Oc>Tc;)Oc--;return{startIndex:tc[Tc].index,endIndex:tc[Oc].index}}),Ci(Nk))),itemsRendered:$c},ic)},tj(Dp,GC,py,Mv,mu,nu,zq,oy),{singleton:!0}),Ep=Gi(function(a){var d=a[0],n=d.sizes,R=d.firstItemIndex,ea=d.data;d=
d.gap;var ka=a[1].listState;a=a[2].didMount;var ta=wg(0);return vh(gg(a,di(ta),Pg(function(Ka){return 0!==Ka[1]}),di(n,R,d,ea),Ug(function(Ka){var $a=Ka[0][1],mb=Ka[1],ub=Ka[2],zb=Ka[3];Ka=Ka[4];var ec=void 0===Ka?[]:Ka;Ka=0;if(0<mb.groupIndices.length)for(var ic,bc=gm(mb.groupIndices);!((ic=bc()).done||ic.value-Ka>=$a);)Ka++;$a+=Ka;return Qm(Array.from({length:$a}).map(function(Lc,$c){return{index:$c,size:0,offset:0,data:ec[$c]}}),[],$a,zb,mb,ub)})),ka),{initialItemCount:ta}},tj(Dp,Rs,zq),{singleton:!0}),
Nv=Gi(function(a){a=a[0].scrollVelocity;var d=wg(!1),n=oh(),R=wg(!1);return vh(gg(a,di(R,d,n),Pg(function(ea){return!!ea[1]}),Ug(function(ea){var ka=ea[0],ta=ea[1],Ka=ea[2];ea=ea[3];var $a=ta.enter;if(Ka){if((0,ta.exit)(ka,ea))return!1}else if($a(ka,ea))return!0;return Ka}),Ci()),d),Sh(gg(Qj(d,a,n),di(R)),function(ea){var ka=ea[0];ea=ea[1];return ka[0]&&ea&&ea.change&&ea.change(ka[1],ka[2])}),{isSeeking:d,scrollSeekConfiguration:R,scrollVelocity:a,scrollSeekRangeChanged:n}},tj(nu),{singleton:!0}),
Ov=Gi(function(a){a=a[0].topItemsIndexes;var d=wg(0);return vh(gg(d,Pg(function(n){return 0<n}),Ug(function(n){return Array.from({length:n}).map(function(R,ea){return ea})})),a),{topItemCount:d}},tj(Rs)),Ss=Gi(function(a){var d=a[0],n=d.footerHeight,R=d.headerHeight,ea=d.fixedHeaderHeight;d=d.fixedFooterHeight;var ka=a[1].listState;a=oh();n=jk(gg(Qj(n,d,R,ea,ka),Ug(function(ta){var Ka=ta[4];return ta[0]+ta[1]+ta[2]+ta[3]+Ka.offsetBottom+Ka.bottom})),0);return vh(Wh(n),a),{totalListHeight:n,totalListHeightChanged:a}},
tj(Am,Rs),{singleton:!0}),qy=Rm(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),IC=Gi(function(a){function d($c){0<$c?(R(0,{top:-$c,behavior:"auto"}),ka(0,0)):(ka(0,0),R(0,{top:-$c,behavior:"auto"}))}var n=a[0],R=n.scrollBy,ea=n.scrollTop,ka=n.deviation,ta=n.scrollingInProgress,Ka=a[1];n=Ka.isScrolling;var $a=Ka.isAtBottom,mb=Ka.scrollDirection,ub=a[3],zb=ub.beforeUnshiftWith,ec=ub.shiftWithOffset,ic=ub.sizes;ub=ub.gap;var bc=a[4].log,Lc=a[5].recalcInProgress;
a=Ak(gg(a[2].listState,di(Ka.lastJumpDueToItemResize),tk(function($c,tc){var Tc=$c[1],Oc=tc[0],ld=Oc.items,od=Oc.totalCount;Oc=Oc.bottom+Oc.offsetBottom;var Qd=0;return $c[2]===od&&0<Tc.length&&0<ld.length&&(0===ld[0].originalIndex&&0===Tc[0].originalIndex||0!=(Qd=Oc-$c[3])&&(Qd+=tc[1])),[Qd,ld,od,Oc]},[0,[],0,0]),Pg(function($c){return 0!==$c[0]}),di(ea,mb,ta,$a,bc),Pg(function($c){return!$c[3]&&0!==$c[1]&&"up"===$c[2]}),Ug(function($c){var tc=$c[0][0];return(0,$c[5])("Upward scrolling compensation",
{amount:tc},tl.DEBUG),tc})));return Sh(gg(a,di(ka,n)),function($c){var tc=$c[0],Tc=$c[1];$c[2]&&qy()?ka(0,Tc-tc):d(-tc)}),Sh(gg(Qj(jk(n,!1),ka,Lc),Pg(function($c){return!$c[0]&&!$c[2]&&0!==$c[1]}),Ug(function($c){return $c[1]}),fo(1)),d),vh(gg(ec,Ug(function($c){return{top:-$c}})),R),Sh(gg(zb,di(ic,ub),Ug(function($c){var tc=$c[0];return tc*$c[1].lastSize+tc*$c[2]})),function($c){ka(0,$c);requestAnimationFrame(function(){gs(R,{top:$c});requestAnimationFrame(function(){ka(0,0);Lc(0,!1)})})}),{deviation:ka}},
tj(Am,nu,Rs,Dp,Cp,oy)),ry=Gi(function(a){var d=a[0].totalListHeight,n=a[1].didMount,R=a[2].scrollTo;a=wg(0);return Sh(gg(n,di(a),Pg(function(ea){return 0!==ea[1]}),Ug(function(ea){return{top:ea[1]}})),function(ea){Mm(gg(d,Pg(function(ka){return 0!==ka})),function(){setTimeout(function(){R(0,ea)})})}),{initialScrollTop:a}},tj(Ss,zq,Am),{singleton:!0}),sy=Gi(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var n=wg(!1);return{alignToBottom:n,paddingTopAddition:jk(gg(Qj(n,d,a),Pg(function(R){return R[0]}),
Ug(function(R){return Math.max(0,R[1]-R[2])}),Ci()),0)}},tj(Am,Ss),{singleton:!0}),Aq=Gi(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var n=oh(),R=oh(),ea=oh(),ka=wg(!1),ta=wg(void 0);return vh(gg(Qj(n,R),Ug(function(Ka){var $a=Ka[0];return{scrollTop:Math.max(0,$a.scrollTop-Ka[1].offsetTop),scrollHeight:$a.scrollHeight,viewportHeight:$a.viewportHeight}})),d),vh(gg(a,di(R),Ug(function(Ka){var $a=Ka[0];return Ph({},$a,{top:$a.top+Ka[1].offsetTop})})),ea),{useWindowScroll:ka,customScrollParent:ta,
windowScrollContainerState:n,windowViewportRect:R,windowScrollTo:ea}},tj(Am)),Bq=["done","behavior","align"],ty=Gi(function(a){var d=a[0],n=d.sizes,R=d.totalCount;d=d.gap;var ea=a[1],ka=ea.scrollTop,ta=ea.viewportHeight,Ka=ea.headerHeight,$a=ea.fixedHeaderHeight,mb=ea.fixedFooterHeight,ub=ea.scrollingInProgress;a=a[2].scrollToIndex;ea=oh();return vh(gg(ea,di(n,ta,R,Ka,$a,mb,ka),di(d),Ug(function(zb){var ec=zb[0],ic=ec[0],bc=ec[1],Lc=ec[2],$c=ec[3],tc=ec[4],Tc=ec[5],Oc=ec[6];ec=ec[7];var ld=zb[1];
zb=ic.done;var od=ic.behavior,Qd=ic.align,ge=fm(ic,Bq),uf=null;ic=dj(ic,bc,$c-1);tc=Di(ic,bc.offsetTree,ld)+tc+Tc;return tc<ec+Tc?uf=Ph({},ge,{behavior:od,align:null!=Qd?Qd:"start"}):tc+da(bc.sizeTree,ic)[1]>ec+Lc-Oc&&(uf=Ph({},ge,{behavior:od,align:null!=Qd?Qd:"end"})),uf?zb&&Mm(gg(ub,em(1),Pg(function(Be){return!1===Be})),zb):zb&&zb(),uf}),Pg(function(zb){return null!==zb})),a),{scrollIntoView:ea}},tj(Dp,Am,mu,Rs,Cp),{singleton:!0}),JC=["listState","topItemsIndexes"],ou=Gi(function(a){return Ph({},
a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},tj(py,Ep,zq,Nv,Ss,ry,sy,Aq,ty)),KC=Gi(function(a){var d=a[0],n=d.totalCount,R=d.sizeRanges,ea=d.fixedItemSize,ka=d.defaultItemSize,ta=d.trackItemSizes,Ka=d.itemSize,$a=d.data,mb=d.firstItemIndex,ub=d.groupIndices,zb=d.statefulTotalCount;d=d.gap;var ec=a[1],ic=ec.initialTopMostItemIndex;ec=ec.scrolledToInitialItem;var bc=a[2],Lc=a[3],$c=a[4],tc=$c.listState,Tc=$c.topItemsIndexes;$c=fm($c,JC);var Oc=a[5].scrollToIndex,ld=a[7].topItemCount,od=a[8].groupCounts,
Qd=a[9];a=a[10];return vh($c.rangeChanged,Qd.scrollSeekRangeChanged),vh(gg(Qd.windowViewportRect,Ug(function(ge){return ge.visibleHeight})),bc.viewportHeight),Ph({totalCount:n,data:$a,firstItemIndex:mb,sizeRanges:R,initialTopMostItemIndex:ic,scrolledToInitialItem:ec,topItemsIndexes:Tc,topItemCount:ld,groupCounts:od,fixedItemHeight:ea,defaultItemHeight:ka,gap:d},Lc,{statefulTotalCount:zb,listState:tc,scrollToIndex:Oc,trackItemSizes:ta,itemSize:Ka,groupIndices:ub},$c,Qd,bc,a)},tj(Dp,Mv,Am,FC,Rs,mu,
IC,Ov,GC,ou,Cp)),uy=Rm(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),qn=wh.createContext(void 0),vy=wh.createContext(void 0),wy=["placeholder"],LC=["style","children"],MC=["style","children"],Pv=Gi(function(){var a=wg(function($a){return"Item "+$a}),d=wg(null),n=wg(function($a){return"Group "+$a}),R=wg({}),ea=wg(st),ka=wg("div"),ta=wg(Pi),Ka=function($a,
mb){return void 0===mb&&(mb=null),jk(gg(R,Ug(function(ub){return ub[$a]}),Ci()),mb)};return{context:d,itemContent:a,groupContent:n,components:R,computeItemKey:ea,headerFooterTag:ka,scrollerRef:ta,FooterComponent:Ka("Footer"),HeaderComponent:Ka("Header"),TopItemListComponent:Ka("TopItemList"),ListComponent:Ka("List","div"),ItemComponent:Ka("Item","div"),GroupComponent:Ka("Group","div"),ScrollerComponent:Ka("Scroller","div"),EmptyPlaceholder:Ka("EmptyPlaceholder"),ScrollSeekPlaceholder:Ka("ScrollSeekPlaceholder")}}),
NC=Gi(function(a){function d(ea,ka,ta){vh(gg(ea,di(R.components),Ug(function(Ka){var $a,mb=Ka[0];Ka=Ka[1];return console.warn("react-virtuoso: "+ta+" property is deprecated. Pass components."+ka+" instead."),Ph({},Ka,(($a={})[ka]=mb,$a))})),R.components)}var n=a[0],R=a[1];a={item:um(R.itemContent,"Rename the %citem%c prop to %citemContent."),group:um(R.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:um(n.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:um(n.fixedItemHeight,
"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:um(n.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:oh(),maxHeightCacheSize:oh(),footer:oh(),header:oh(),HeaderContainer:oh(),FooterContainer:oh(),ItemContainer:oh(),ScrollContainer:oh(),GroupContainer:oh(),ListContainer:oh(),emptyComponent:oh(),scrollSeek:oh()};return Sh(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.",
"color: red;","color: inherit;","color: blue;")}),Sh(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),Sh(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),Sh(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),
Sh(a.scrollSeek,function(ea){var ka=ea.placeholder;ea=fm(ea,wy);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=Ph({},(0,R.components)(4),{ScrollSeekPlaceholder:ka});(0,R.components)(0,ka);(0,n.scrollSeekConfiguration)(0,ea)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,
"Scroller","ScrollContainer"),d(a.emptyComponent,"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),Ph({},n,R,a)},tj(KC,Pv)),Bm=function(a){return wh.createElement("div",{style:{height:a.height}})},EH={position:uy(),zIndex:1,overflowAnchor:"none"},pu={overflowAnchor:"none"},OC=wh.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=hh("listState"),n=Rk("sizeRanges"),R=hh("useWindowScroll"),ea=hh("customScrollParent"),ka=Rk("windowScrollContainerState"),ta=Rk("scrollContainerState");
R=ea||R?ka:ta;var Ka=hh("itemContent"),$a=hh("context"),mb=hh("groupContent");ka=hh("trackItemSizes");ta=hh("itemSize");var ub=hh("log"),zb=Rk("gap");n=Wi(n,ta,ka,a?Pi:R,ub,zb,ea).callbackRef;ea=wh.useState(0);var ec=ea[0],ic=ea[1];Vo("deviation",function(ld){ec!==ld&&ic(ld)});ea=hh("EmptyPlaceholder");var bc=hh("ScrollSeekPlaceholder")||Bm;R=hh("ListComponent");var Lc=hh("ItemComponent"),$c=hh("GroupComponent"),tc=hh("computeItemKey"),Tc=hh("isSeeking"),Oc=0<hh("groupIndices").length;ka=hh("paddingTopAddition");
ka=a?{}:{boxSizing:"border-box",paddingTop:d.offsetTop+ka,paddingBottom:d.offsetBottom,marginTop:ec};return!a&&0===d.totalCount&&ea?(0,oi.createElement)(ea,uk(ea,$a)):(0,oi.createElement)(R,Ph({},uk(R,$a),{ref:n,style:ka,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function(ld){var od=ld.originalIndex,Qd=tc(od+d.firstItemIndex,ld.data,$a);return Tc?(0,oi.createElement)(bc,Ph({},uk(bc,$a),{key:Qd,index:ld.index,height:ld.size,type:ld.type||"item"},"group"===
ld.type?{}:{groupIndex:ld.groupIndex})):"group"===ld.type?(0,oi.createElement)($c,Ph({},uk($c,$a),{key:Qd,"data-index":od,"data-known-size":ld.size,"data-item-index":ld.index,style:EH}),mb(ld.index)):(0,oi.createElement)(Lc,Ph({},uk(Lc,$a),{key:Qd,"data-index":od,"data-known-size":ld.size,"data-item-index":ld.index,"data-item-group-index":ld.groupIndex,style:pu}),Oc?Ka(ld.index,ld.groupIndex,ld.data,$a):Ka(ld.index,ld.data,$a))}))}),FH={height:"100%",outline:"none",overflowY:"auto",position:"relative",
WebkitOverflowScrolling:"touch"},Gr={width:"100%",height:"100%",position:"absolute",top:0},Qv={width:"100%",position:uy(),top:0},Rv=wh.memo(function(){var a=hh("HeaderComponent"),d=Rk("headerHeight"),n=hh("headerFooterTag"),R=Hj(function(ka){return d(Ui(ka,"height"))}),ea=hh("context");return a?(0,oi.createElement)(n,{ref:R},(0,oi.createElement)(a,uk(a,ea))):null}),GH=wh.memo(function(){var a=hh("FooterComponent"),d=Rk("footerHeight"),n=hh("headerFooterTag"),R=Hj(function(ka){return d(Ui(ka,"height"))}),
ea=hh("context");return a?(0,oi.createElement)(n,{ref:R},(0,oi.createElement)(a,uk(a,ea))):null}),PC=function(a){a=a.children;var d=(0,oi.useContext)(qn),n=Rk("viewportHeight"),R=Rk("fixedItemHeight"),ea=Hj(ao(n,function(ka){return Ui(ka,"height")}));return wh.useEffect(function(){d&&(n(d.viewportHeight),R(d.itemHeight))},[d,n,R]),wh.createElement("div",{style:Gr,ref:ea,"data-viewport-type":"element"},a)},QC=function(a){a=a.children;var d=(0,oi.useContext)(qn),n=Rk("windowViewportRect"),R=Rk("fixedItemHeight"),
ea=hh("customScrollParent");ea=Yh(n,ea);return wh.useEffect(function(){d&&(R(d.itemHeight),n({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,n,R]),wh.createElement("div",{ref:ea,style:Gr,"data-viewport-type":"window"},a)},RC=function(a){a=a.children;var d=hh("TopItemListComponent"),n=hh("headerHeight");n=Ph({},Qv,{marginTop:n+"px"});var R=hh("context");return(0,oi.createElement)(d||"div",{style:n,context:R},a)},Ts=Rj(NC,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},wh.memo(function(a){var d=hh("useWindowScroll"),n=0<hh("topItemsIndexes").length,R=hh("customScrollParent"),ea=R||d?QC:PC;return wh.createElement(R||d?Sv:qu,Ph({},a),wh.createElement(ea,null,wh.createElement(Rv,null),wh.createElement(OC,null),wh.createElement(GH,
null)),n&&wh.createElement(RC,null,wh.createElement(OC,{showTopList:!0})))})),xy=Ts.Component,Rk=Ts.usePublisher,hh=Ts.useEmitterValue,Vo=Ts.useEmitter,qu=js({usePublisher:Rk,useEmitterValue:hh,useEmitter:Vo}),Sv=jr({usePublisher:Rk,useEmitterValue:hh,useEmitter:Vo}),Cm={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},SC={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Tv=Math.round,yy=Math.ceil,Uv=Math.floor,ij=Math.min,qo=Math.max,
ru=Gi(function(a){var d=a[0],n=d.overscan,R=d.visibleRange,ea=d.listBoundary,ka=a[1];d=ka.scrollTop;var ta=ka.viewportHeight,Ka=ka.scrollBy,$a=ka.scrollTo,mb=ka.smoothScrollTargetReached,ub=ka.scrollContainerState,zb=ka.footerHeight;ka=ka.headerHeight;var ec=a[2],ic=a[3],bc=a[4],Lc=bc.propsReady,$c=bc.didMount,tc=a[5];bc=tc.windowViewportRect;var Tc=tc.windowScrollTo,Oc=tc.useWindowScroll,ld=tc.customScrollParent;tc=tc.windowScrollContainerState;a=a[6];var od=wg(0),Qd=wg(0),ge=wg(Cm),uf=wg({height:0,
width:0}),Be=wg({height:0,width:0}),We=oh(),Tf=oh(),ff=wg(0),Jf=wg(void 0),ee=wg({row:0,column:0});vh(gg(Qj($c,Qd,Jf),Pg(function(Nd){return 0!==Nd[1]}),Ug(function(Nd){return{items:ks(0,Nd[1]-1,Nd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),ge);vh(gg(Qj(Wh(od),R,Wh(ee,gq),Wh(Be,function(Nd,$d){return Nd&&Nd.width===$d.width&&Nd.height===$d.height}),Jf),di(uf),Ug(function(Nd){var $d=Nd[0],Fd=$d[0],ae=$d[1],gf=ae[0],wf=ae[1],og=$d[2],Xg=$d[3],Ef=$d[4],mh=Nd[1];Nd=og.row;
var bg=og.column;$d=Xg.height;ae=Xg.width;var Bh=mh.width;if(0===Fd||0===Bh)return Cm;if(0===ae)return Ph({},SC,{items:ks(0,0,Ef)});bg=qo(1,Uv((Bh+bg)/(ae+bg)));gf=bg*Uv((gf+Nd)/($d+Nd));wf=bg*yy((wf+Nd)/($d+Nd))-1;wf=ij(Fd-1,qo(wf,bg-1));gf=ks(ij(wf,qo(0,gf)),wf,Ef);Xg=Ku(mh,og,Xg,gf);og=Xg.top;Xg=Xg.bottom;Fd=yy(Fd/bg);return{items:gf,offsetTop:og,offsetBottom:Fd*$d+(Fd-1)*Nd-Xg,top:og,bottom:Xg,itemHeight:$d,itemWidth:ae}})),ge);vh(gg(Jf,Pg(function(Nd){return void 0!==Nd}),Ug(function(Nd){return Nd.length})),
od);vh(gg(uf,Ug(function(Nd){return Nd.height})),ta);vh(gg(Qj(uf,Be,ge,ee),Ug(function(Nd){Nd=Ku(Nd[0],Nd[3],Nd[1],Nd[2].items);return[Nd.top,Nd.bottom]}),Ci(Sj)),ea);R=Ak(gg(Wh(ge),Pg(function(Nd){return 0<Nd.items.length}),di(od),Pg(function(Nd){var $d=Nd[0].items;return $d[$d.length-1].index===Nd[1]-1}),Ug(function(Nd){return Nd[1]-1}),Ci()));ea=Ak(gg(Wh(ge),Pg(function(Nd){Nd=Nd.items;return 0<Nd.length&&0===Nd[0].index}),gn(0),Ci()));ta=Ak(gg(Wh(ge),Pg(function(Nd){return 0<Nd.items.length}),
Ug(function(Nd){Nd=Nd.items;return{startIndex:Nd[0].index,endIndex:Nd[Nd.length-1].index}}),Ci(Nk)));vh(ta,ic.scrollSeekRangeChanged);vh(gg(We,di(uf,Be,od,ee),Ug(function(Nd){var $d=Nd[1],Fd=Nd[2],ae=Nd[3],gf=Nd[4],wf=Ei(Nd[0]);Nd=wf.align;var og=wf.behavior,Xg=wf.offset;wf=wf.index;"LAST"===wf&&(wf=ae-1);ae=tt($d,gf,Fd,qo(0,wf,ij(ae-1,wf)));return"end"===Nd?ae=Tv(ae-$d.height+Fd.height):"center"===Nd&&(ae=Tv(ae-$d.height/2+Fd.height/2)),Xg&&(ae+=Xg),{top:ae,behavior:og}})),$a);$c=jk(gg(ge,Ug(function(Nd){return Nd.offsetBottom+
Nd.bottom})),0);return vh(gg(bc,Ug(function(Nd){return{width:Nd.visibleWidth,height:Nd.visibleHeight}})),uf),Ph({data:Jf,totalCount:od,viewportDimensions:uf,itemDimensions:Be,scrollTop:d,scrollHeight:Tf,overscan:n,scrollBy:Ka,scrollTo:$a,scrollToIndex:We,smoothScrollTargetReached:mb,windowViewportRect:bc,windowScrollTo:Tc,useWindowScroll:Oc,customScrollParent:ld,windowScrollContainerState:tc,deviation:ff,scrollContainerState:ub,footerHeight:zb,headerHeight:ka,initialItemCount:Qd,gap:ee},ic,{gridState:ge,
totalListHeight:$c},ec,{startReached:ea,endReached:R,rangeChanged:ta,propsReady:Lc},a)},tj(py,Am,nu,Nv,zq,Aq,Cp)),HH=["placeholder"],Uj=Gi(function(){var a=wg(function(mb){return"Item "+mb}),d=wg({}),n=wg(null),R=wg("virtuoso-grid-item"),ea=wg("virtuoso-grid-list"),ka=wg(st),ta=wg("div"),Ka=wg(Pi),$a=function(mb,ub){return void 0===ub&&(ub=null),jk(gg(d,Ug(function(zb){return zb[mb]}),Ci()),ub)};return{context:n,itemContent:a,components:d,computeItemKey:ka,itemClassName:R,listClassName:ea,headerFooterTag:ta,
scrollerRef:Ka,FooterComponent:$a("Footer"),HeaderComponent:$a("Header"),ListComponent:$a("List","div"),ItemComponent:$a("Item","div"),ScrollerComponent:$a("Scroller","div"),ScrollSeekPlaceholder:$a("ScrollSeekPlaceholder","div")}}),Hr=Gi(function(a){function d(ea,ka,ta){vh(gg(ea,di(R.components),Ug(function(Ka){var $a,mb=Ka[0];Ka=Ka[1];return console.warn("react-virtuoso: "+ta+" property is deprecated. Pass components."+ka+" instead."),Ph({},Ka,(($a={})[ka]=mb,$a))})),R.components)}var n=a[0],R=
a[1];a={item:um(R.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:oh(),ScrollContainer:oh(),ListContainer:oh(),emptyComponent:oh(),scrollSeek:oh()};return Sh(a.scrollSeek,function(ea){var ka=ea.placeholder;ea=fm(ea,HH);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=Ph({},(0,R.components)(4),{ScrollSeekPlaceholder:ka});(0,R.components)(0,ka);(0,n.scrollSeekConfiguration)(0,
ea)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),Ph({},n,R,a)},tj(ru,Uj)),TC=wh.memo(function(){var a=mk("gridState"),d=mk("listClassName"),n=mk("itemClassName"),R=mk("itemContent"),ea=mk("computeItemKey"),ka=mk("isSeeking"),ta=Dm("scrollHeight"),Ka=mk("ItemComponent"),$a=mk("ListComponent"),mb=mk("ScrollSeekPlaceholder"),ub=mk("context"),zb=Dm("itemDimensions"),ec=Dm("gap"),ic=mk("log"),bc=Hj(function(Lc){ta(Lc.parentElement.parentElement.scrollHeight);
var $c=Lc.firstChild;$c&&zb($c.getBoundingClientRect());ec({row:Lu("row-gap",getComputedStyle(Lc).rowGap,ic),column:Lu("column-gap",getComputedStyle(Lc).columnGap,ic)})});return(0,oi.createElement)($a,Ph({ref:bc,className:d},uk($a,ub),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(Lc){var $c=ea(Lc.index,Lc.data,ub);return ka?(0,oi.createElement)(mb,Ph({key:$c},uk(mb,ub),{index:Lc.index,height:a.itemHeight,width:a.itemWidth})):(0,oi.createElement)(Ka,Ph({},uk(Ka,
ub),{className:n,"data-index":Lc.index,key:$c}),R(Lc.index,Lc.data,ub))}))}),UC=wh.memo(function(){var a=mk("HeaderComponent"),d=Dm("headerHeight"),n=mk("headerFooterTag"),R=Hj(function(ka){return d(Ui(ka,"height"))}),ea=mk("context");return a?(0,oi.createElement)(n,{ref:R},(0,oi.createElement)(a,uk(a,ea))):null}),Eh=wh.memo(function(){var a=mk("FooterComponent"),d=Dm("footerHeight"),n=mk("headerFooterTag"),R=Hj(function(ka){return d(Ui(ka,"height"))}),ea=mk("context");return a?(0,oi.createElement)(n,
{ref:R},(0,oi.createElement)(a,uk(a,ea))):null}),Vv=function(a){a=a.children;var d=(0,oi.useContext)(vy),n=Dm("itemDimensions"),R=Dm("viewportDimensions"),ea=Hj(function(ka){R(ka.getBoundingClientRect())});return wh.useEffect(function(){d&&(R({height:d.viewportHeight,width:d.viewportWidth}),n({height:d.itemHeight,width:d.itemWidth}))},[d,R,n]),wh.createElement("div",{style:Gr,ref:ea},a)},Qn=function(a){a=a.children;var d=(0,oi.useContext)(vy),n=Dm("windowViewportRect"),R=Dm("itemDimensions"),ea=mk("customScrollParent");
ea=Yh(n,ea);return wh.useEffect(function(){d&&(R({height:d.itemHeight,width:d.itemWidth}),n({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,n,R]),wh.createElement("div",{ref:ea,style:Gr},a)},Fp=Rj(Hr,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},wh.memo(function(a){a=Ph({},a);var d=mk("useWindowScroll"),n=mk("customScrollParent"),R=n||d?Qn:Vv;return wh.createElement(n||d?Wv:Us,Ph({},a),wh.createElement(R,null,wh.createElement(UC,null),wh.createElement(TC,null),wh.createElement(Eh,null)))})),Dm=Fp.usePublisher,mk=Fp.useEmitterValue,zy=Fp.useEmitter,Us=js({usePublisher:Dm,useEmitterValue:mk,useEmitter:zy}),Wv=jr({usePublisher:Dm,useEmitterValue:mk,useEmitter:zy}),Vs=Gi(function(){var a=wg(function($a){return wh.createElement("td",
null,"Item $",$a)}),d=wg(null),n=wg(null),R=wg(null),ea=wg({}),ka=wg(st),ta=wg(Pi),Ka=function($a,mb){return void 0===mb&&(mb=null),jk(gg(ea,Ug(function(ub){return ub[$a]}),Ci()),mb)};return{context:d,itemContent:a,fixedHeaderContent:n,fixedFooterContent:R,components:ea,computeItemKey:ka,scrollerRef:ta,TableComponent:Ka("Table","table"),TableHeadComponent:Ka("TableHead","thead"),TableFooterComponent:Ka("TableFoot","tfoot"),TableBodyComponent:Ka("TableBody","tbody"),TableRowComponent:Ka("TableRow",
"tr"),ScrollerComponent:Ka("Scroller","div"),EmptyPlaceholder:Ka("EmptyPlaceholder"),ScrollSeekPlaceholder:Ka("ScrollSeekPlaceholder"),FillerRow:Ka("FillerRow")}}),VC=Gi(function(a){return Ph({},a[0],a[1])},tj(KC,Vs)),WC=function(a){return wh.createElement("tr",null,wh.createElement("td",{style:{height:a.height}}))},Em=function(a){return wh.createElement("tr",null,wh.createElement("td",{style:{height:a.height,padding:0,border:0}}))},Xv=wh.memo(function(){var a=yj("listState"),d=Rn("sizeRanges"),n=
yj("useWindowScroll"),R=yj("customScrollParent"),ea=Rn("windowScrollContainerState"),ka=Rn("scrollContainerState");n=R||n?ea:ka;var ta=yj("itemContent");ea=yj("trackItemSizes");R=Wi(d,yj("itemSize"),ea,n,yj("log"),void 0,R);d=R.callbackRef;var Ka=R.ref;R=wh.useState(0);var $a=R[0],mb=R[1];Cy("deviation",function(tc){$a!==tc&&(Ka.current.style.marginTop=tc+"px",mb(tc))});ea=yj("EmptyPlaceholder");var ub=yj("ScrollSeekPlaceholder")||WC;n=yj("FillerRow")||Em;R=yj("TableBodyComponent");var zb=yj("TableRowComponent"),
ec=yj("computeItemKey"),ic=yj("isSeeking");ka=yj("paddingTopAddition");var bc=yj("firstItemIndex"),Lc=yj("statefulTotalCount"),$c=yj("context");if(0===Lc&&ea)return(0,oi.createElement)(ea,uk(ea,$c));ea=a.offsetTop+ka+$a;ka=a.offsetBottom;ea=0<ea?wh.createElement(n,{height:ea,key:"padding-top"}):null;n=0<ka?wh.createElement(n,{height:ka,key:"padding-bottom"}):null;a=a.items.map(function(tc){var Tc=tc.originalIndex,Oc=ec(Tc+bc,tc.data,$c);return ic?(0,oi.createElement)(ub,Ph({},uk(ub,$c),{key:Oc,index:tc.index,
height:tc.size,type:tc.type||"item"})):(0,oi.createElement)(zb,Ph({},uk(zb,$c),{key:Oc,"data-index":Tc,"data-known-size":tc.size,"data-item-index":tc.index,style:{overflowAnchor:"none"}}),ta(tc.index,tc.data,$c))});return(0,oi.createElement)(R,Ph({ref:d,"data-test-id":"virtuoso-item-list"},uk(R,$c)),[ea].concat(a,[n]))}),Ay=function(a){a=a.children;var d=(0,oi.useContext)(qn),n=Rn("viewportHeight"),R=Rn("fixedItemHeight"),ea=Hj(ao(n,function(ka){return Ui(ka,"height")}));return wh.useEffect(function(){d&&
(n(d.viewportHeight),R(d.itemHeight))},[d,n,R]),wh.createElement("div",{style:Gr,ref:ea,"data-viewport-type":"element"},a)},By=function(a){a=a.children;var d=(0,oi.useContext)(qn),n=Rn("windowViewportRect"),R=Rn("fixedItemHeight"),ea=yj("customScrollParent");ea=Yh(n,ea);return wh.useEffect(function(){d&&(R(d.itemHeight),n({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,n,R]),wh.createElement("div",{ref:ea,style:Gr,"data-viewport-type":"window"},a)},Yv=Rj(VC,{required:{},optional:{context:"context",
followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",
fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},
events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},wh.memo(function(a){var d=yj("useWindowScroll"),n=yj("customScrollParent"),R=Rn("fixedHeaderHeight"),ea=Rn("fixedFooterHeight"),ka=yj("fixedHeaderContent"),ta=yj("fixedFooterContent"),Ka=yj("context");
R=Hj(ao(R,function(zb){return Ui(zb,"height")}));var $a=Hj(ao(ea,function(zb){return Ui(zb,"height")}));ea=n||d?su:XC;d=n||d?By:Ay;n=yj("TableComponent");var mb=yj("TableHeadComponent"),ub=yj("TableFooterComponent");ka=ka?wh.createElement(mb,Ph({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:R},uk(mb,Ka)),ka()):null;ta=ta?wh.createElement(ub,Ph({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:$a},uk(ub,Ka)),ta()):null;return wh.createElement(ea,Ph({},a),wh.createElement(d,
null,wh.createElement(n,Ph({style:{borderSpacing:0}},uk(n,Ka)),[ka,wh.createElement(Xv,{key:"TableBody"}),ta])))})),Rn=Yv.usePublisher,yj=Yv.useEmitterValue,Cy=Yv.useEmitter,XC=js({usePublisher:Rn,useEmitterValue:yj,useEmitter:Cy}),su=jr({usePublisher:Rn,useEmitterValue:yj,useEmitter:Cy}),Gp=pg(ca(22)),Sn=function(a){function d(n){n=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+n+" for more information.")||this;if(void 0===
n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}ls(d,a);return d}(wt(Error)),Dy={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",
floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",
lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",
mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",
sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},YC=/^#[a-fA-F0-9]{6}$/,Ey=/^#[a-fA-F0-9]{8}$/,rn=/^#[a-fA-F0-9]{3}$/,tu=/^#[a-fA-F0-9]{4}$/,Sk=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,
Zv=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,uu=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,Tn=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,jj=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},vu=yt(zt,zt.length,[]),Hp=
ca(602),Un=pg(ca(22)),Xm=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const n=a.ownerDocument,R=n.activeElement;R!==a&&a.focus();n.execCommand("insertText",!1,d)||Xm.insertTextFirefox(a,d);R===n.body?a.blur():R instanceof HTMLElement&&R!==a&&R.focus()}static set(a,d){a.select();Xm.insert(a,d)}static getSelection(a){const {selectionStart:d,
selectionEnd:n}=a;return a.value.slice(d?d:void 0,n?n:void 0)}static wrapSelection(a,d,n){const {selectionStart:R,selectionEnd:ea}=a,ka=Xm.getSelection(a);Xm.insert(a,d+ka+(null!=n?n:d));a.selectionStart=(R||0)+d.length;a.selectionEnd=(ea||0)+d.length}static replace(a,d,n){let R=0;a.value.replace(d,(...ea)=>{const ka=R+ea[ea.length-2],ta=ea[0].length;a.selectionStart=ka;a.selectionEnd=ka+ta;ea="string"===typeof n?n:n(...ea);Xm.insert(a,ea);a.selectionStart=ka;R+=ea.length-ta;return ea})}static findLineEnd(a,
d){const n=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(n)?d:n+1}static indent(a){var d;const {selectionStart:n,selectionEnd:R,value:ea}=a;var ka=ea.slice(n,R);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=ea.lastIndexOf("\n",n-1)+1;var ta=a.value.slice(d,R-1);ka=ta.replace(/^|\n/g,"$\x26  ");ta=ka.length-ta.length;a.setSelectionRange(d,R-1);Xm.insert(a,ka);a.setSelectionRange(n+1,R+ta)}else Xm.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:n,value:R}=a;var ea=
R.lastIndexOf("\n",d-1)+1;const ka=Xm.findLineEnd(R,n);var ta=a.value.slice(ea,ka);const Ka=ta.replace(/(^|\n)(\t| {1,2})/g,"$1");ta=ta.length-Ka.length;a.setSelectionRange(ea,ka);Xm.insert(a,Ka);ea=(ea=/\t| {1,2}/.exec(R.slice(ea,d)))?ea[0].length:0;a.setSelectionRange(d-ea,Math.max(d-ea,n-ta))}},wu=ca(602),Ws=a=>a.stopPropagation(),Cq=Un.memo(function({font:a,text:d,color:n,fontStyle:R,fontSize:ea,fontWeight:ka,offsetX:ta=0,offsetY:Ka=0,scale:$a=1,isEditing:mb=!1,pointerEvents:ub=!1,onBlur:zb,onChange:ec}){const ic=
Un.useRef(null),bc=Un.useRef(!1),Lc=Un.useCallback(od=>{ec(zs.normalizeText(od.currentTarget.value))},[ec]),$c=Un.useCallback(od=>{if("Escape"!==od.key)if("Tab"===od.key&&0===d.length)od.preventDefault();else{if("Meta"!==od.key&&!od.metaKey)od.stopPropagation();else if("z"===od.key&&od.metaKey){document.execCommand(od.shiftKey?"redo":"undo",!1);od.stopPropagation();od.preventDefault();return}"Tab"===od.key&&(od.preventDefault(),od.shiftKey?Xm.unindent(od.currentTarget):Xm.indent(od.currentTarget),
null==ec?void 0:ec(zs.normalizeText(od.currentTarget.value)))}},[ec]),tc=Un.useCallback(od=>{mb&&(od.currentTarget.setSelectionRange(0,0),null==zb?void 0:zb())},[zb]),Tc=Un.useCallback(od=>{mb&&bc.current&&document.activeElement===od.currentTarget&&od.currentTarget.select()},[mb]),Oc=Un.useCallback(od=>{mb&&od.stopPropagation()},[mb]);Un.useEffect(()=>{mb&&requestAnimationFrame(()=>{bc.current=!0;const od=ic.current;od&&(od.focus(),od.select())})},[mb,zb]);const ld=Un.useRef(null);Un.useLayoutEffect(()=>
{const od=ld.current;if(od){var Qd=Ig(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:ea,lineHeight:1,fontWeight:ka},4);od.style.transform=`scale(${$a}, ${$a}) translate(${ta}px, ${Ka}px)`;od.style.width=Qd[0]+1+"px";od.style.height=Qd[1]+1+"px"}},[d,ka,ea,Ka,ta,$a]);return(0,wu.jsx)("div",{className:"tl-text-label-wrapper",children:(0,wu.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:ld,style:{font:a,fontStyle:R,fontSize:ea,fontWeight:ka,color:n,pointerEvents:ub?"all":"none",
userSelect:mb?"text":"none"},children:[mb?(0,wu.jsx)("textarea",{ref:ic,style:{font:a,color:n,fontStyle:R,fontSize:ea,fontWeight:ka},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:n,onFocus:Tc,onChange:Lc,onKeyDown:$c,onBlur:tc,onPointerDown:Oc,onContextMenu:Ws,onCopy:Ws,onPaste:Ws,onCut:Ws}):
d,"​"]})})}),jl=ca(602),ro={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Dq=class extends im{constructor(){super(...arguments);yb(this,"canEdit",!0);yb(this,"ReactComponent",Ce(({events:a,isErasing:d,isBinding:n,isSelected:R,isEditing:ea,onEditingEnd:ka})=>{const {props:{size:[ta,Ka],stroke:$a,fill:mb,noFill:ub,strokeWidth:zb,strokeType:ec,borderRadius:ic,opacity:bc,label:Lc,italic:$c,fontWeight:tc,fontSize:Tc}}=this;var Oc=Lc||ea?Ig(Lc,{fontFamily:"var(--ls-font-family)",fontSize:Tc,lineHeight:1,fontWeight:tc},
4):[0,0];const ld=ye.mul(this.props.size,.5);Oc=Math.max(.5,Math.min(1,ta/Oc[0],Ka/Oc[1]));const od=this.getBounds(),Qd=Gp.useMemo(()=>ye.sub(ld,ye.toFixed([od.width/2,od.height/2])),[od,Oc,ld]),ge=Gp.useCallback(uf=>{var Be;null==(Be=this.update)?void 0:Be.call(this,{label:uf})},[Lc]);return(0,jl.jsxs)("div",Mf(we({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,jl.jsx)(Cq,{font:"20px / 1 var(--ls-font-family)",text:Lc,color:Cf($a,"text"),offsetX:Qd[0],
offsetY:Qd[1],fontSize:Tc,scale:Oc,isEditing:ea,onChange:ge,onBlur:ka,fontStyle:$c?"italic":"normal",fontWeight:tc,pointerEvents:!!Lc}),(0,jl.jsxs)(Mn,{opacity:d?.2:bc,children:[n&&(0,jl.jsx)(At,{mode:"svg",strokeWidth:zb,size:[ta,Ka]}),(0,jl.jsx)("rect",{className:R||!ub?"tl-hitarea-fill":"tl-hitarea-stroke",x:zb/2,y:zb/2,rx:ic,ry:ic,width:Math.max(.01,ta-zb),height:Math.max(.01,Ka-zb),pointerEvents:"all"}),(0,jl.jsx)("rect",{x:zb/2,y:zb/2,rx:ic,ry:ic,width:Math.max(.01,ta-zb),height:Math.max(.01,
Ka-zb),strokeWidth:zb,stroke:Cf($a,"stroke"),strokeDasharray:"dashed"===ec?"8 2":void 0,fill:ub?"none":Cf(mb,"background")})]})]}))}));yb(this,"setScaleLevel",a=>ti(this,null,function*(){this.update({scaleLevel:a,fontSize:ro[null!=a?a:"md"],strokeWidth:ro[null!=a?a:"md"]/10});this.onResetBounds()}));yb(this,"ReactIndicator",Ce(()=>{const {props:{size:[a,d],borderRadius:n,isLocked:R}}=this;return(0,jl.jsx)("g",{children:(0,jl.jsx)("rect",{width:a,height:d,rx:n,ry:n,fill:"transparent",strokeDasharray:R?
"8 2":void 0})})}));yb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return hn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};yb(Dq,"id","box");yb(Dq,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,
opacity:1,label:""});De([ph],Dq.prototype,"scaleLevel",1);De([Og],Dq.prototype,"setScaleLevel",2);var $v=pg(ca(22)),sn=ca(602),Fy={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Ip=class extends Tw{constructor(){super(...arguments);yb(this,"canEdit",!0);yb(this,"ReactComponent",Ce(({isSelected:a,isErasing:d,events:n,isEditing:R,onEditingEnd:ea})=>{const {size:[ka,ta],stroke:Ka,fill:$a,noFill:mb,strokeWidth:ub,strokeType:zb,opacity:ec,label:ic,italic:bc,fontWeight:Lc,fontSize:$c}=this.props;var tc=ic||R?Ig(ic,
{fontFamily:"var(--ls-font-family)",fontSize:$c,lineHeight:1,fontWeight:Lc},4):[0,0];const Tc=ye.mul(this.props.size,.5);tc=Math.max(.5,Math.min(1,ka/tc[0],ta/tc[1]));const Oc=this.getBounds(),ld=$v.useMemo(()=>ye.sub(Tc,ye.toFixed([Oc.width/2,Oc.height/2])),[Oc,tc,Tc]),od=$v.useCallback(Qd=>{var ge;null==(ge=this.update)?void 0:ge.call(this,{label:Qd})},[ic]);return(0,sn.jsxs)("div",Mf(we({},n),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,sn.jsx)(Cq,
{font:"18px / 1 var(--ls-font-family)",text:ic,color:Cf(Ka,"text"),offsetX:ld[0],offsetY:ld[1],scale:tc,isEditing:R,onChange:od,onBlur:ea,fontStyle:bc?"italic":"normal",fontSize:$c,fontWeight:Lc,pointerEvents:!!ic}),(0,sn.jsxs)(Mn,Mf(we({},n),{opacity:d?.2:ec,children:[(0,sn.jsx)("ellipse",{className:a||!mb?"tl-hitarea-fill":"tl-hitarea-stroke",cx:ka/2,cy:ta/2,rx:Math.max(.01,(ka-ub)/2),ry:Math.max(.01,(ta-ub)/2)}),(0,sn.jsx)("ellipse",{cx:ka/2,cy:ta/2,rx:Math.max(.01,(ka-ub)/2),ry:Math.max(.01,(ta-
ub)/2),strokeWidth:ub,stroke:Cf(Ka,"stroke"),strokeDasharray:"dashed"===zb?"8 2":void 0,fill:mb?"none":Cf($a,"background")})]}))]}))}));yb(this,"setScaleLevel",a=>ti(this,null,function*(){this.update({scaleLevel:a,fontSize:Fy[null!=a?a:"md"],strokeWidth:Fy[null!=a?a:"md"]/10});this.onResetBounds()}));yb(this,"ReactIndicator",Ce(()=>{const {size:[a,d],isLocked:n}=this.props;return(0,sn.jsx)("g",{children:(0,sn.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:n?
"8 2":"undefined"})})}));yb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return hn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,n],stroke:R,fill:ea,noFill:ka,strokeWidth:ta,strokeType:Ka,opacity:$a}=this.props;return(0,sn.jsxs)("g",{opacity:$a,children:[(0,sn.jsx)("ellipse",{className:ka?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:n/2,rx:Math.max(.01,(d-ta)/2),ry:Math.max(.01,
(n-ta)/2)}),(0,sn.jsx)("ellipse",{cx:d/2,cy:n/2,rx:Math.max(.01,(d-ta)/2),ry:Math.max(.01,(n-ta)/2),strokeWidth:ta,stroke:Cf(R,"stroke"),strokeDasharray:"dashed"===Ka?"8 2":void 0,fill:ka?"none":Cf(ea,"background")})]})}};yb(Ip,"id","ellipse");yb(Ip,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});De([ph],Ip.prototype,"scaleLevel",1);De([Og],Ip.prototype,
"setScaleLevel",2);var Xs=ca(602),aw=class extends ev{constructor(){super(...arguments);yb(this,"ReactComponent",Ce(({events:a})=>{const d=this.getBounds(),n=Re(),R=n.selectedShapesArray.some(ka=>n.shapesInGroups([this]).includes(ka)),ea=this.ReactIndicator;return(0,Xs.jsxs)(Mn,Mf(we({},a),{className:"tl-group-container",children:[(0,Xs.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),R&&(0,Xs.jsx)("g",{stroke:"var(--color-selectedFill)",
children:(0,Xs.jsx)(ea,{})})]}))}));yb(this,"ReactIndicator",Ce(()=>{const a=this.getBounds();return(0,Xs.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};yb(aw,"id","group");yb(aw,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var Ys=ca(602),ZC={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},so=class extends ss{constructor(a={}){super(a);yb(this,"ReactComponent",Ce(({events:d,isErasing:n})=>{const {pointsPath:R,
props:{stroke:ea,strokeWidth:ka,opacity:ta}}=this;return(0,Ys.jsx)(Mn,Mf(we({},d),{opacity:n?.2:1,children:(0,Ys.jsx)("path",{d:R,strokeWidth:16*ka,stroke:Cf(ea,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:ta})}))}));yb(this,"setScaleLevel",d=>ti(this,null,function*(){this.update({scaleLevel:d,strokeWidth:ZC[null!=d?d:"md"]});this.onResetBounds()}));yb(this,"ReactIndicator",Ce(()=>{const {pointsPath:d,props:n}=this;return(0,Ys.jsx)("path",{d,fill:"none",
strokeDasharray:n.isLocked?"8 2":"undefined"})}));yb(this,"validateProps",d=>{d=hn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});Dc(this)}get pointsPath(){const {points:a}=this.props;return Mw.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:n,opacity:R}}=this;return(0,Ys.jsx)("path",{d:a,strokeWidth:16*n,stroke:Cf(d,"stroke"),fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:R})}};yb(so,"id","highlighter");yb(so,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});De([ph],so.prototype,"pointsPath",1);De([ph],so.prototype,"scaleLevel",1);De([Og],so.prototype,"setScaleLevel",2);var Kf=pg(ca(22)),qh=ca(602),Zs={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Jp=class extends im{constructor(){super(...arguments);
yb(this,"canChangeAspectRatio",!0);yb(this,"canFlip",!1);yb(this,"canEdit",!0);yb(this,"htmlAnchorRef",Kf.createRef());yb(this,"setScaleLevel",a=>ti(this,null,function*(){var d;const n=ye.mul(this.props.size,Zs[null!=a?a:"md"]/Zs[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield Ec();this.update({size:n})}));yb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const n=this.htmlAnchorRef.current.getBoundingClientRect(),[R,ea]=ye.div([n.width,n.height],null!=(d=
null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(R||400,1400),10),Math.max(Math.min(ea||400,1400),10)]})}return this});yb(this,"ReactComponent",Ce(({events:a,isErasing:d,isEditing:n})=>{const {props:{html:R,scaleLevel:ea}}=this,ka=ms(),ta=Re(),Ka=ta.selectedIds.has(this.id),$a=ka||Ka&&!n||"select"!==ta.selectedTool.id,mb=Kf.useCallback(zb=>{$a||zb.stopPropagation()},[$a]),ub=Zs[null!=ea?ea:"md"];Kf.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:ta.viewport.camera.zoom}),
ta.persist(!0))},[]);return(0,qh.jsx)(mn,Mf(we({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,qh.jsx)("div",{onWheelCapture:mb,onPointerDown:mb,onPointerUp:mb,className:"tl-html-container",style:{pointerEvents:ka||!n&&!Ka?"none":"all",overflow:n?"auto":"hidden",width:`calc(100% / ${ub})`,height:`calc(100% / ${ub})`,transform:`scale(${ub})`},children:(0,qh.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:R.trim()}})})}))}));
yb(this,"ReactIndicator",Ce(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,qh.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}));yb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return hn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};yb(Jp,"id","html");yb(Jp,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});De([ph],
Jp.prototype,"scaleLevel",1);De([Og],Jp.prototype,"setScaleLevel",2);var Gy=pg(ca(22)),$s=ca(602),Kp=class extends im{constructor(){super(...arguments);yb(this,"frameRef",Gy.createRef());yb(this,"canEdit",!0);yb(this,"onIFrameSourceChange",a=>{this.update({url:a})});yb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});yb(this,"ReactComponent",Ce(({events:a,isErasing:d,isEditing:n})=>{Gy.useRef(null);const R=
Re();return(0,$s.jsx)(mn,Mf(we({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,$s.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:n||R.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,$s.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,$s.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));
yb(this,"ReactIndicator",Ce(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,$s.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}))}};yb(Kp,"id","iframe");yb(Kp,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});De([Og],Kp.prototype,"onIFrameSourceChange",2);De([Og],Kp.prototype,"reload",2);var $C=pg(ca(22)),Ir=ca(602),Qi=class extends Uw{constructor(){super(...arguments);yb(this,"ReactComponent",Ce(({events:a,
isErasing:d,isBinding:n,asset:R})=>{const {props:{opacity:ea,objectFit:ka,clipping:ta,size:[Ka,$a]}}=this,[mb,ub,zb,ec]=Array.isArray(ta)?ta:[ta,ta,ta,ta],{handlers:ic}=$C.useContext(fj);return(0,Ir.jsxs)(mn,Mf(we({},a),{opacity:d?.2:ea,children:[n&&(0,Ir.jsx)(At,{mode:"html",strokeWidth:4,size:[Ka,$a]}),(0,Ir.jsx)("div",{"data-asset-loaded":!!R,className:"tl-image-shape-container",children:R?(0,Ir.jsx)("img",{src:ic?ic.makeAssetUrl(R.src):R.src,draggable:!1,style:{position:"relative",top:-mb,left:-ec,
width:Ka+(ec-ub),height:$a+(mb-zb),objectFit:ka}}):"Asset is missing"})]}))}));yb(this,"ReactIndicator",Ce(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,Ir.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,n;const R=this.getBounds(),{assetId:ea,clipping:ka}=this.props;if(a=a.find(ta=>ta.id===ea)){Array.isArray(ka);const ta=null==(n=null==(d=window.logseq)?void 0:d.api)?void 0:n.make_asset_url;return(0,Ir.jsx)("image",
{width:R.width,height:R.height,href:ta?ta(a.src):a.src})}return super.getShapeSVGJsx({})}};yb(Qi,"id","image");yb(Qi,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var bw=pg(ca(22)),aD=pg(ca(22)),at=ca(602),bt=ca(602),Jr={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},bD=aD.memo(function({style:a,start:d,end:n,decorationStart:R,decorationEnd:ea,scaleLevel:ka}){const ta=ye.dist(d,n);if(2>ta)return null;
const {strokeWidth:Ka}=a,$a=1+Ka*Jr[null!=ka?ka:"md"]/10,mb="M"+ye.toFixed(d)+"L"+ye.toFixed(n);ka=Math.min(ta/3,Ka*Jr[null!=ka?ka:"md"]);R=R?Bt(d,n,ka):null;ea=ea?Bt(n,d,ka):null;return(0,bt.jsxs)(bt.Fragment,{children:[(0,bt.jsx)("path",{className:"tl-stroke-hitarea",d:mb}),(0,bt.jsx)("path",{d:mb,strokeWidth:$a,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),R&&(0,bt.jsx)(Nu,{left:R.left,middle:d,right:R.right,
stroke:a.stroke,strokeWidth:$a}),ea&&(0,bt.jsx)(Nu,{left:ea.left,middle:n,right:ea.right,stroke:a.stroke,strokeWidth:$a})]})}),xu=ca(602),Tk=ca(602),cD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Kr=class extends Mt{constructor(){super(...arguments);yb(this,"hideSelection",!0);yb(this,"canEdit",!0);yb(this,"ReactComponent",Ce(({events:a,isErasing:d,isEditing:n,onEditingEnd:R})=>{const {stroke:ea,handles:{start:ka,end:ta},opacity:Ka,label:$a,italic:mb,fontWeight:ub,fontSize:zb,id:ec}=this.props,ic=$a||
n?Ig($a||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:zb,lineHeight:1,fontWeight:ub},6):[0,0],bc=ye.med(ka.point,ta.point);var Lc=ye.dist(ka.point,ta.point);Lc=Math.max(.5,Math.min(1,Math.max(Lc/(ic[1]+128),Lc/(ic[0]+128))));const $c=this.getBounds(),tc=bw.useMemo(()=>ye.sub(bc,ye.toFixed([$c.width/2,$c.height/2])),[$c,Lc,bc]),Tc=bw.useCallback(Oc=>{var ld;null==(ld=this.update)?void 0:ld.call(this,{label:Oc})},[$a]);return(0,Tk.jsxs)("div",Mf(we({},a),{style:{width:"100%",height:"100%",
overflow:"hidden"},className:"tl-line-container",children:[(0,Tk.jsx)(Cq,{font:"20px / 1 var(--ls-font-family)",text:$a,fontSize:zb,color:Cf(ea,"text"),offsetX:tc[0],offsetY:tc[1],scale:Lc,isEditing:n,onChange:Tc,onBlur:R,fontStyle:mb?"italic":"normal",fontWeight:ub,pointerEvents:!!$a}),(0,Tk.jsxs)(Mn,{opacity:d?.2:Ka,id:ec+"_svg",children:[(0,Tk.jsx)(Ct,{id:ec,bounds:$c,labelSize:ic,offset:tc,scale:Lc}),(0,Tk.jsx)("g",{pointerEvents:"none",mask:$a||n?`url(#${ec}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));
yb(this,"setScaleLevel",a=>ti(this,null,function*(){this.update({scaleLevel:a,fontSize:cD[null!=a?a:"md"]});this.onResetBounds()}));yb(this,"ReactIndicator",Ce(({isEditing:a})=>{const {id:d,decorations:n,label:R,strokeWidth:ea,fontSize:ka,fontWeight:ta,handles:{start:Ka,end:$a},isLocked:mb}=this.props,ub=this.getBounds(),zb=R||a?Ig(R,{fontFamily:"var(--ls-font-family)",fontSize:ka,lineHeight:1,fontWeight:ta},6):[0,0],ec=ye.med(Ka.point,$a.point);var ic=ye.dist(Ka.point,$a.point);ic=Math.max(.5,Math.min(1,
Math.max(ic/(zb[1]+128),ic/(zb[0]+128))));const bc=bw.useMemo(()=>ye.sub(ec,ye.toFixed([ub.width/2,ub.height/2])),[ub,ic,ec]);return(0,Tk.jsxs)("g",{children:[(0,Tk.jsx)("path",{mask:R?`url(#${d}_clip)`:"",d:Aw({strokeWidth:ea},Ka.point,$a.point,null==n?void 0:n.start,null==n?void 0:n.end),strokeDasharray:mb?"8 2":"undefined"}),R&&!a&&(0,Tk.jsx)("rect",{x:ub.width/2-zb[0]/2*ic+bc[0],y:ub.height/2-zb[1]/2*ic+bc[1],width:zb[0]*ic,height:zb[1]*ic,rx:4*ic,ry:4*ic,fill:"transparent"})]})}));yb(this,"validateProps",
a=>hn(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,fill:n,strokeWidth:R,strokeType:ea,decorations:ka,label:ta,scaleLevel:Ka,handles:{start:$a,end:mb}}=this.props,ub=ye.med($a.point,mb.point);return(0,Tk.jsxs)(Tk.Fragment,{children:[(0,Tk.jsx)(bD,{style:{stroke:Cf(d,"text"),fill:n,strokeWidth:R,strokeType:ea},scaleLevel:Ka,start:$a.point,end:mb.point,decorationStart:null==ka?void 0:ka.start,decorationEnd:null==ka?void 0:ka.end}),
a&&(0,Tk.jsx)(Tk.Fragment,{children:(0,Tk.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${ub[0]}, ${ub[1]})`,textAnchor:"middle",fill:Cf(d,"text"),stroke:Cf(d,"text"),children:ta})})]})}};yb(Kr,"id","line");yb(Kr,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",
strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});De([ph],Kr.prototype,"scaleLevel",1);De([Og],Kr.prototype,"setScaleLevel",2);var Uk=pg(ca(22)),oj=ca(602),Fm={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},cw=Ce(({type:a,fill:d,opacity:n,children:R})=>{const ea="var(--ls-secondary-background-color)"!==d?Cf(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?Bf(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,oj.jsxs)("div",
{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,oj.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:n,background:"P"===a?ea:`linear-gradient(0deg, ${d}, ${ea})`}}),(0,oj.jsx)("div",{className:"relative",children:R})]})}),Jj=class extends im{constructor(a={}){var d;super(a);yb(this,"hideRotateHandle",!0);yb(this,"canChangeAspectRatio",!0);yb(this,"canFlip",!0);yb(this,"canEdit",!0);yb(this,"persist",null);yb(this,
"initialHeightCalculated",!0);yb(this,"getInnerHeight",null);yb(this,"setCollapsed",n=>ti(this,null,function*(){var R;if("B"===this.props.blockType){if(this.update({compact:n}),this.canResize[1]=!n,!n)this.onResetBounds()}else{const ea=this.props.size[1];this.canResize[1]=!n;this.update({isAutoResizing:!n,collapsed:n,size:[this.props.size[0],n?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:n?ea:this.props.collapsedHeight})}null==(R=this.persist)?void 0:R.call(this)}));yb(this,
"setScaleLevel",n=>ti(this,null,function*(){var R;const ea=ye.mul(this.props.size,Fm[null!=n?n:"md"]/Fm[null!=(R=this.props.scaleLevel)?R:"md"]);this.update({scaleLevel:n});yield Ec();this.update({size:ea})}));yb(this,"onResetBounds",n=>{n=this.getAutoResizeHeight();null!==n&&1<Math.abs(n-this.props.size[1])&&(this.update({size:[this.props.size[0],n]}),this.initialHeightCalculated=!0);return this});yb(this,"onResize",(n,R)=>{var ea;const {bounds:ka,rotation:ta,scale:[Ka,$a]}=R;n=[...this.scale];0>
Ka&&(n[0]*=-1);0>$a&&(n[1]*=-1);R=ka.height;this.props.isAutoResizing&&(R=null!=(ea=this.getAutoResizeHeight())?ea:R);return this.update({point:[ka.minX,ka.minY],size:[Math.max(1,ka.width),Math.max(1,R)],scale:n,rotation:ta})});yb(this,"PortalComponent",Ce(({})=>{const {props:{pageId:n,fill:R,opacity:ea}}=this,{renderers:ka}=Uk.useContext(fj),ta=Re(),Ka=Uk.useRef(null),[,$a]=this.useComponentSize(Ka,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");
if(null==ka||!ka.Page)return null;const {Page:mb,Block:ub}=ka,[zb,ec]=Uk.useState(!1);Uk.useEffect(()=>{var ic,bc;if(this.props.isAutoResizing){const Lc=(null!=(bc=null==(ic=this.getInnerHeight)?void 0:ic.call(this))?bc:$a)+this.getHeaderHeight();$a&&1<Math.abs(Lc-this.props.size[1])&&(this.update({size:[this.props.size[0],Lc]}),zb&&ta.persist(!0))}},[$a,this.props.isAutoResizing]);Uk.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ta.persist(!0)})},[this.initialHeightCalculated]);
Uk.useEffect(()=>{setTimeout(function(){ec(!0)})},[]);return(0,oj.jsxs)(oj.Fragment,{children:[(0,oj.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>ta.viewport.camera.zoom?"optimizeSpeed":"auto",background:R&&"var(--ls-secondary-background-color)"!==R?Bf(R)?`var(--ls-highlight-color-${R})`:R:"var(--ls-secondary-background-color)",opacity:ea}}),(0,oj.jsx)("div",{ref:Ka,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?
"visible":"auto"},children:(zb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,oj.jsx)(ub,{blockId:n}):(0,oj.jsx)(mb,{pageName:n}))})]})}));yb(this,"ReactComponent",Ce(n=>{var R;const {events:ea,isErasing:ka,isEditing:ta,isBinding:Ka}=n,{props:{opacity:$a,pageId:mb,fill:ub,scaleLevel:zb,strokeWidth:ec,size:ic}}=this,bc=Re(),{renderers:Lc,handlers:$c}=Uk.useContext(fj);this.persist=()=>bc.persist();const tc=ms(),Tc=bc.selectedIds.has(this.id)&&1===bc.selectedIds.size,
Oc=bc.isIn("logseq-portal.creating")&&!mb,ld=(tc||Tc&&!ta||"select"!==bc.selectedTool.id)&&!Oc,od=Uk.useCallback(Nd=>{ld||Nd.stopPropagation()},[ld]),Qd=1===bc.selectedShapesArray.length&&bc.selectedShapesArray.some(Nd=>"logseq-portal"===Nd.type&&Nd.props.id!==this.props.id&&mb&&Nd.props.pageId===mb),ge=Fm[null!=zb?zb:"md"];Uk.useEffect(()=>this.props.collapsed&&ta?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):
()=>{},[ta,this.props.collapsed]);Uk.useEffect(()=>{if(Oc){const Nd=[bc.viewport.bounds.width,bc.viewport.bounds.height],$d=bc.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);($d[0]>Nd[0]-400||$d[1]>Nd[1]-240||1.5<bc.viewport.camera.zoom||.5>bc.viewport.camera.zoom)&&bc.viewport.zoomToBounds(Mf(we({},this.bounds),{minY:this.bounds.maxY+25}))}},[bc.viewport.bounds.height.toFixed(2)]);const uf=Uk.useCallback(Nd=>{this.initialHeightCalculated=!1;const $d=Eg(Nd)?"B":"P";this.update({pageId:Nd,
size:[400,320],blockType:$d,compact:"B"===$d});bc.selectTool("select");bc.history.resume();bc.history.persist()},[]),Be=this.PortalComponent;var We=Uk.useMemo(()=>{var Nd;if(mb&&"B"===this.props.blockType)return null==(Nd=null==$c?void 0:$c.queryBlockByUUID(mb))?void 0:Nd.content},[null==$c?void 0:$c.queryBlockByUUID,mb]);We="B"===this.props.blockType&&"string"!==typeof We;const Tf=(!this.props.collapsed||ta)&&!We;if(null==Lc||!Lc.Page)return null;const {Breadcrumb:ff,PageName:Jf}=Lc,ee={width:`calc(100% / ${ge})`,
height:`calc(100% / ${ge})`,opacity:ka?.2:1};1!==ge&&(ee.transform=`scale(${ge})`);return(0,oj.jsxs)(mn,Mf(we({style:{pointerEvents:"all"}},ea),{children:[Ka&&(0,oj.jsx)(At,{mode:"html",strokeWidth:ec,size:ic}),(0,oj.jsx)("div",{"data-inner-events":!ld,onWheelCapture:od,onPointerDown:od,onPointerUp:od,style:{width:"100%",height:"100%",pointerEvents:tc||!ta&&!Tc?"none":"all"},children:Oc?(0,oj.jsx)(Ym,{onChange:uf,onAddBlock:Nd=>{setTimeout(()=>{var $d,Fd,ae;bc.api.editShape(this);null==(ae=null==
(Fd=null==($d=window.logseq)?void 0:$d.api)?void 0:Fd.edit_block)?void 0:ae.call(Fd,Nd)})},placeholder:"Create or search your graph..."}):(0,oj.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":mb,"data-portal-selected":Qd,"data-editing":ta,style:ee,children:[!this.props.compact&&!We&&(0,oj.jsx)(cw,{type:null!=(R=this.props.blockType)?R:"P",fill:ub,opacity:$a,children:"P"===this.props.blockType?(0,oj.jsx)(Jf,{pageName:mb}):(0,oj.jsx)(ff,{blockId:mb})}),
We&&(0,oj.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),Tf&&(0,oj.jsx)(Be,we({},n))]})})]}))}));yb(this,"ReactIndicator",Ce(()=>{const n=this.getBounds();return(0,oj.jsx)("rect",{width:n.width,height:n.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));yb(this,"validateProps",n=>{var R;if(void 0!==n.size){const ea=Fm[null!=(R=this.props.scaleLevel)?R:"md"];n.size[0]=Math.max(n.size[0],60*ea);n.size[1]=Math.max(n.size[1],40*ea)}return hn(this,
n)});Dc(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [n,R]=Uk.useState([0,0]),ea=Re();Uk.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const ka=
d?a.current.querySelector(d):a.current;if(ka){const ta=()=>{const {width:$a,height:mb}=ka.getBoundingClientRect(),ub=ye.div([$a,mb],ea.viewport.camera.zoom);R(ub);return ub};ta();this.getInnerHeight=()=>ta()[1];const Ka=new ResizeObserver(()=>{ta()});Ka.observe(ka);return()=>{Ka.disconnect()}}}return()=>{}},10)},[a,d]);return n}getHeaderHeight(){var a;const d=Fm[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+
this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,n;const R=this.getBounds();return(0,oj.jsxs)(oj.Fragment,{children:[(0,oj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Bf(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:Cf(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:R.width,rx:8,ry:8,
height:R.height}),!this.props.compact&&(0,oj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Cf(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(n=this.props.opacity)?n:.2,x:1,y:1,width:R.width-2,height:38,rx:8,ry:8}),(0,oj.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${R.width/2}, ${10+R.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",
stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};yb(Jj,"id","logseq-portal");yb(Jj,"defaultSearchQuery","");yb(Jj,"defaultSearchFilter",null);yb(Jj,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});De([ph],Jj.prototype,"collapsed",
1);De([Og],Jj.prototype,"setCollapsed",2);De([ph],Jj.prototype,"scaleLevel",1);De([Og],Jj.prototype,"setScaleLevel",2);var {min:Lr,PI:yu}=Math,Mr=yu+1E-4,tn=ca(602),Nr={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Hy={easing:a=>Math.sin(a*Math.PI/2),simulatePressure:!0},eh={easing:a=>a*a,simulatePressure:!1},Wo=class extends ss{constructor(a={}){super(a);yb(this,"ReactComponent",Ce(({events:d,isErasing:n})=>{const {props:{opacity:R}}=this;return(0,tn.jsx)(Mn,Mf(we({},d),{opacity:n?.2:R,children:this.getShapeSVGJsx()}))}));
yb(this,"setScaleLevel",d=>ti(this,null,function*(){this.update({scaleLevel:d,strokeWidth:Nr[null!=d?d:"md"]});this.onResetBounds()}));yb(this,"ReactIndicator",Ce(()=>{const {pointsPath:d}=this;return(0,tn.jsx)("path",{d,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));yb(this,"validateProps",d=>{d=hn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});Dc(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=Mf(we({size:1+1.5*a.strokeWidth,
thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?Hy:eh),{last:a.isComplete}),a=Fw(a.points,d),d=Mw.getSvgPathFromStroke(Ew(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:n,strokeType:R}}=this;return(0,tn.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:n/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:Cf(d,"text"),fill:Cf(d,"text"),strokeDasharray:"dashed"===R?"12 4":void 0})}};
yb(Wo,"id","pencil");yb(Wo,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});De([ph],Wo.prototype,"pointsPath",1);De([ph],Wo.prototype,"scaleLevel",1);De([Og],Wo.prototype,"setScaleLevel",2);var dw=pg(ca(22)),El=ca(602),Lp={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Eq=class extends jq{constructor(){super(...arguments);yb(this,"canEdit",!0);yb(this,"ReactComponent",Ce(({events:a,isErasing:d,
isSelected:n,isEditing:R,onEditingEnd:ea})=>{const {offset:[ka,ta],props:{stroke:Ka,fill:$a,noFill:mb,strokeWidth:ub,opacity:zb,strokeType:ec,label:ic,italic:bc,fontWeight:Lc,fontSize:$c}}=this,tc=this.getVertices(ub/2).join();var Tc=ic||R?Ig(ic,{fontFamily:"var(--ls-font-family)",fontSize:$c,lineHeight:1,fontWeight:Lc},4):[0,0];const Oc=[this.props.size[0]/2,2*this.props.size[1]/3];Tc=Math.max(.5,Math.min(1,this.props.size[0]/(2*Tc[0]),this.props.size[1]/(2*Tc[1])));const ld=this.getBounds(),od=
dw.useMemo(()=>ye.sub(Oc,ye.toFixed([ld.width/2,ld.height/2])),[ld,Tc,Oc]),Qd=dw.useCallback(ge=>{var uf;null==(uf=this.update)?void 0:uf.call(this,{label:ge})},[ic]);return(0,El.jsxs)("div",Mf(we({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,El.jsx)(Cq,{font:"20px / 1 var(--ls-font-family)",text:ic,fontSize:$c,color:Cf(Ka,"text"),offsetX:od[0],offsetY:od[1]/Tc,scale:Tc,isEditing:R,onChange:Qd,onBlur:ea,fontStyle:bc?"italic":"normal",fontWeight:Lc,pointerEvents:!!ic}),(0,El.jsx)(Mn,
{opacity:d?.2:zb,children:(0,El.jsxs)("g",{transform:`translate(${ka}, ${ta})`,children:[(0,El.jsx)("polygon",{className:n||!mb?"tl-hitarea-fill":"tl-hitarea-stroke",points:tc}),(0,El.jsx)("polygon",{points:tc,stroke:Cf(Ka,"stroke"),fill:mb?"none":Cf($a,"background"),strokeWidth:ub,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===ec?"8 2":void 0})]})})]}))}));yb(this,"setScaleLevel",a=>ti(this,null,function*(){this.update({scaleLevel:a,fontSize:Lp[null!=a?a:"md"],strokeWidth:Lp[null!=a?
a:"md"]/10});this.onResetBounds()}));yb(this,"ReactIndicator",Ce(()=>{const {offset:[a,d],props:{strokeWidth:n,isLocked:R}}=this;return(0,El.jsx)("g",{children:(0,El.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(n/2).join(),strokeDasharray:R?"8 2":"undefined"})})}));yb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return hn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,n],props:{stroke:R,
fill:ea,noFill:ka,strokeWidth:ta,opacity:Ka,strokeType:$a}}=this;a=this.getVertices(ta/2).join();return(0,El.jsxs)("g",{transform:`translate(${d}, ${n})`,opacity:Ka,children:[(0,El.jsx)("polygon",{className:ka?"tl-hitarea-stroke":"tl-hitarea-fill",points:a}),(0,El.jsx)("polygon",{points:a,stroke:Cf(R,"stroke"),fill:ka?"none":Cf(ea,"background"),strokeWidth:ta,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===$a?"8 2":void 0})]})}};yb(Eq,"id","polygon");yb(Eq,"defaultProps",{id:"polygon",
parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});De([ph],Eq.prototype,"scaleLevel",1);De([Og],Eq.prototype,"setScaleLevel",2);var kl=pg(ca(22)),Mp=ca(602),Vn={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},to=class extends Vw{constructor(){super(...arguments);yb(this,"ReactComponent",Ce(({events:a,isErasing:d,isEditing:n,onEditingEnd:R})=>{const {props:{opacity:ea,
fontFamily:ka,fontSize:ta,fontWeight:Ka,italic:$a,lineHeight:mb,text:ub,stroke:zb,padding:ec}}=this,ic=kl.useRef(null),bc=kl.useRef(!1),Lc=kl.useRef(null),$c=kl.useCallback(od=>{const {isSizeLocked:Qd}=this.props;od=zs.normalizeText(od.currentTarget.value);Qd?this.update({text:od,size:this.getAutoSizedBoundingBox({text:od})}):this.update({text:od})},[]),tc=kl.useCallback(od=>{if("Escape"!==od.key)if("Tab"===od.key&&0===ub.length)od.preventDefault();else{if("Meta"!==od.key&&!od.metaKey)od.stopPropagation();
else if("z"===od.key&&od.metaKey){od.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);od.stopPropagation();od.preventDefault();return}"Tab"===od.key&&(od.preventDefault(),od.shiftKey?Xm.unindent(od.currentTarget):Xm.indent(od.currentTarget),this.update({text:zs.normalizeText(od.currentTarget.value)}))}},[]),Tc=kl.useCallback(od=>{n&&(null==R?void 0:R())},[R]),Oc=kl.useCallback(od=>{n&&bc.current&&document.activeElement===od.currentTarget&&od.currentTarget.select()},[n]),ld=
kl.useCallback(od=>{n&&od.stopPropagation()},[n]);kl.useEffect(()=>{n&&requestAnimationFrame(()=>{bc.current=!0;const od=ic.current;od&&(od.focus(),od.select())})},[n,R]);kl.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,Mp.jsx)(mn,Mf(we({},a),{opacity:d?.2:ea,children:(0,Mp.jsx)("div",{ref:Lc,className:"tl-text-shape-wrapper","data-hastext":!!ub,"data-isediting":n,style:{fontFamily:ka,fontStyle:$a?"italic":"normal",fontSize:ta,fontWeight:Ka,
padding:ec,lineHeight:mb,color:Cf(zb,"text")},children:n?(0,Mp.jsx)("textarea",{ref:ic,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:ub,onFocus:Oc,onChange:$c,onKeyDown:tc,onBlur:Tc,onPointerDown:ld}):(0,Mp.jsxs)(Mp.Fragment,{children:[ub,"​"]})})}))}));yb(this,"setScaleLevel",a=>ti(this,null,function*(){this.update({scaleLevel:a,
fontSize:Vn[null!=a?a:"md"]});this.onResetBounds()}));yb(this,"ReactIndicator",Ce(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:n},bounds:R}=this;return a?null:(0,Mp.jsx)("rect",{width:R.width,height:R.height,rx:d,ry:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}));yb(this,"validateProps",a=>hn(this,a));yb(this,"getBounds",()=>{const [a,d]=this.props.point,[n,R]=this.props.size;return{minX:a,minY:d,maxX:a+n,maxY:d+R,width:n,height:R}});yb(this,"onResizeStart",({isSingle:a})=>
{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});yb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:n=this.props.fontFamily,fontSize:R=this.props.fontSize,fontWeight:ea=this.props.fontWeight,lineHeight:ka=this.props.lineHeight,padding:ta=
this.props.padding}=a,[Ka,$a]=Ig(d,{fontFamily:n,fontSize:R,lineHeight:ka,fontWeight:ea},ta);return[Ka,$a]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:d,stroke:n,fontSize:R,fontFamily:ea}}=this;a=this.getBounds();return(0,Mp.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,Mp.jsx)("div",{style:{color:Cf(n,"text"),fontSize:R,fontFamily:ea,display:"contents"},children:d})})}};
yb(to,"id","text");yb(to,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});De([ph],to.prototype,"scaleLevel",1);De([Og],to.prototype,"setScaleLevel",2);var ew=pg(ca(22)),Fq=ca(602),ct=class extends im{constructor(){super(...arguments);yb(this,"canFlip",!1);yb(this,"canEdit",
!0);yb(this,"canChangeAspectRatio",!1);yb(this,"ReactComponent",Ce(({events:a,isErasing:d,asset:n,isEditing:R})=>{const {props:{opacity:ea}}=this,ka=ms();var ta=Re();const Ka=ta.selectedIds.has(this.id),$a=ka||Ka&&!R||"select"!==ta.selectedTool.id;ta=ew.useCallback(ub=>{$a||ub.stopPropagation()},[$a]);const {handlers:mb}=ew.useContext(fj);return(0,Fq.jsx)(mn,Mf(we({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:ea}},a),{children:(0,Fq.jsx)("div",{onWheelCapture:ta,onPointerDown:ta,onPointerUp:ta,
className:"tl-video-container",style:{pointerEvents:ka||!R&&!Ka?"none":"all",overflow:R?"auto":"hidden"},children:n&&(0,Fq.jsx)("video",{controls:!0,src:mb?mb.makeAssetUrl(n.src):n.src})})}))}));yb(this,"ReactIndicator",Ce(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,Fq.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:n?"8 2":"undefined"})}))}};yb(ct,"id","video");yb(ct,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",
clipping:0,isAspectRatioLocked:!0});var Vk=ca(602),fw=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,gw=class extends im{constructor(){super(...arguments);yb(this,"aspectRatio",480/853);yb(this,"canChangeAspectRatio",!1);yb(this,"canFlip",!1);yb(this,"canEdit",!0);yb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:gw.defaultProps.size})});yb(this,"ReactComponent",Ce(({events:a,isErasing:d,isEditing:n})=>{const R=Re();return(0,Vk.jsx)(mn,
Mf(we({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Vk.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:n||R.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,Vk.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Vk.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",
width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,Vk.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,Vk.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,Vk.jsxs)("g",
{children:[(0,Vk.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,Vk.jsx)("g",{children:(0,Vk.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,Vk.jsxs)("g",{fill:"#fff",children:[(0,Vk.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,Vk.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));yb(this,"ReactIndicator",Ce(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,Vk.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}));yb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return hn(this,a)})}get embedId(){var a,d;const n=this.props.url,
R=n.match(fw);return null!=(d=null!=(a=null==R?void 0:R[1])?a:n)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,Vk.jsxs)("g",{children:[(0,Vk.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,Vk.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Vk.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Np=gw;yb(Np,"id","youtube");yb(Np,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});De([ph],Np.prototype,"embedId",1);De([Og],Np.prototype,"onYoutubeLinkChange",2);var Or=pg(ca(22)),uo=ca(602),Iy=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,Jy=class extends im{constructor(){super(...arguments);yb(this,"canFlip",!1);yb(this,"canEdit",!0);yb(this,"initialHeightCalculated",
!0);yb(this,"getInnerHeight",null);yb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:Jy.defaultProps.size})});yb(this,"ReactComponent",Ce(({events:a,isErasing:d,isEditing:n})=>{const {renderers:{Tweet:R}}=Or.useContext(fj),ea=Re(),ka=Or.useRef(null),[,ta]=this.useComponentSize(ka);Or.useEffect(()=>{var Ka,$a;const mb=null!=($a=null==(Ka=this.getInnerHeight)?void 0:Ka.call(this))?$a:ta;ta&&1<Math.abs(mb-this.props.size[1])&&(this.update({size:[this.props.size[0],mb]}),ea.persist(!0))},[ta]);
Or.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ea.persist(!0)})},[this.initialHeightCalculated]);return(0,uo.jsx)(mn,Mf(we({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,uo.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:n||ea.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,uo.jsx)("div",{ref:ka,children:(0,uo.jsx)(R,{tweetId:this.embedId})}):null})}))}));
yb(this,"ReactIndicator",Ce(()=>{const {props:{size:[a,d],isLocked:n}}=this;return(0,uo.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}));yb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});yb(this,"onResize",(a,d)=>{var n;const {bounds:R,rotation:ea,scale:[ka,ta]}=d;a=[...this.scale];0>ka&&(a[0]*=-1);0>ta&&(a[1]*=
-1);d=null!=(n=this.getAutoResizeHeight())?n:R.height;return this.update({point:[R.minX,R.minY],size:[Math.max(1,R.width),Math.max(1,d)],scale:a,rotation:ea})});yb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return hn(this,a)})}get embedId(){var a,d;const n=this.props.url,R=n.match(Iy);return null!=(d=null!=(a=null==R?void 0:R[1])?a:n)?d:""}useComponentSize(a,d=""){const [n,R]=Or.useState([0,0]),ea=Re();Or.useEffect(()=>
{if(null==a?0:a.current){const ka=d?a.current.querySelector(d):a.current;if(ka){const ta=()=>{const {width:$a,height:mb}=ka.getBoundingClientRect(),ub=ye.div([$a,mb],ea.viewport.camera.zoom);R(ub);return ub};ta();this.getInnerHeight=()=>ta()[1];const Ka=new ResizeObserver(()=>{ta()});Ka.observe(ka);return()=>{Ka.disconnect()}}}return()=>{}},[a,d]);return n}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,uo.jsxs)("g",
{children:[(0,uo.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,uo.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,uo.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Pr=Jy;yb(Pr,"id","tweet");yb(Pr,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});De([ph],Pr.prototype,"embedId",1);De([Og],Pr.prototype,"onTwitterLinkChange",2);var zu=pg(ca(22)),Op=ca(602),Qr=class extends im{constructor(){super(...arguments);yb(this,"frameRef",zu.createRef());yb(this,"canChangeAspectRatio",!0);yb(this,"canFlip",!0);yb(this,"canEdit",!0);yb(this,"ReactComponent",
Ce(({events:a,asset:d,isErasing:n,isEditing:R})=>{zu.useRef(null);const {handlers:ea}=zu.useContext(fj);Re();const ka=ms();return(0,Op.jsx)(mn,Mf(we({style:{overflow:"hidden",pointerEvents:"all",opacity:n?.2:1}},a),{children:d?(0,Op.jsx)("embed",{src:ea?ea.inflateAsset(d.src).url:d.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!ka&&R?"all":"none"}}):null}))}));yb(this,"ReactIndicator",Ce(()=>{const {props:{size:[a,
d],isLocked:n}}=this;return(0,Op.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:n?"8 2":"undefined"})}))}};yb(Qr,"id","pdf");yb(Qr,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});ca(602);var Vl=[Dq,Ip,so,Qi,ct,Kr,Wo,Eq,to,Np,Pr,Kp,Jp,Qr,Jj,aw],Rr=class extends np{constructor(){super(...arguments);yb(this,"Shape",Dq)}};yb(Rr,"id","box");yb(Rr,"shortcut","whiteboard/rectangle");var Wl=class extends np{constructor(){super(...arguments);
yb(this,"Shape",Ip)}};yb(Wl,"id","ellipse");yb(Wl,"shortcut","whiteboard/ellipse");var Ky=class extends fv{};yb(Ky,"id","erase");yb(Ky,"shortcut","whiteboard/eraser");var Fl=class extends Nt{constructor(){super(...arguments);yb(this,"Shape",so);yb(this,"simplify",!0);yb(this,"simplifyTolerance",.618)}};yb(Fl,"id","highlighter");yb(Fl,"shortcut","whiteboard/highlighter");var Wn=class extends gv{constructor(){super(...arguments);yb(this,"Shape",Kr)}};yb(Wn,"id","line");yb(Wn,"shortcut","whiteboard/connector");
var hw=class extends Nt{constructor(){super(...arguments);yb(this,"Shape",Wo);yb(this,"simplify",!1)}};yb(hw,"id","pencil");yb(hw,"shortcut","whiteboard/pencil");var dD=class extends np{constructor(){super(...arguments);yb(this,"Shape",Eq)}};yb(dD,"id","polygon");var Ly=class extends hv{constructor(){super(...arguments);yb(this,"Shape",to)}};yb(Ly,"id","text");yb(Ly,"shortcut","whiteboard/text");var Hk=class extends np{constructor(){super(...arguments);yb(this,"Shape",Np)}};yb(Hk,"id","youtube");
var Pp=class extends Ii{constructor(){super(...arguments);yb(this,"creatingShape");yb(this,"offset",[0,0]);yb(this,"onEnter",()=>{this.app.history.pause();Vb(()=>{var a=ye.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(a=ye.snap(a,8));this.creatingShape=a=new Jj({id:Ck(),parentId:this.app.currentPage.id,point:a,size:Jj.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});
yb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});yb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};yb(Pp,"id","creating");var un=class extends Ii{constructor(){super(...arguments);
yb(this,"cursor","crosshair");yb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};yb(un,"id","idle");var Sr=class extends kq{constructor(){super(...arguments);yb(this,"Shape",Jj);yb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};yb(Sr,"id","logseq-portal");yb(Sr,"shortcut","whiteboard/portal");yb(Sr,"states",[un,Pp]);yb(Sr,"initial","idle");var $h=class extends np{constructor(){super(...arguments);yb(this,"Shape",Jp)}};yb($h,"id","youtube");var eD=class extends np{constructor(){super(...arguments);
yb(this,"Shape",Kp)}};yb(eD,"id","iframe");var IH=pg(ca(605)),vn=ca(602),ei=new Map(Vl.map(a=>[a.id,a])),Gq=class{constructor(a){yb(this,"shapes");yb(this,"pageId");yb(this,"assets");a&&this.load(a)}load(a){var d;const n=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==n?void 0:n.id;this.assets=a.assets;this.shapes=null==n?void 0:n.shapes.map(R=>{var ea=R.type;if(!ea)throw Error("No shape type provided.");const ka=ei.get(ea);if(!ka)throw Error(`Could not find shape class for ${ea}`);
return new ka(R)}).filter(R=>"group"!==R.type)}generatePreviewJsx(a,d){var n,R;const ea=[...(null!=(n=this.shapes)?n:[]).map(mb=>mb.getRotatedBounds())];(n=null==a?void 0:a.currentView)&&ea.push(n);let ka=Zf.getCommonBounds(ea);if(!ka)return null;ka=Zf.expandBounds(ka,16);ka=d?Zf.ensureRatio(ka,d):ka;const ta=mb=>[(mb[0]-ka.minX).toFixed(2),(mb[1]-ka.minY).toFixed(2)],[Ka,$a]=n?ta([n.minX,n.minY]):[0,0];return ka&&(0,vn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ka.minX.toFixed(2),
"data-common-bound-y":ka.minY.toFixed(2),"data-common-bound-width":ka.width.toFixed(2),"data-common-bound-height":ka.height.toFixed(2),viewBox:[0,0,ka.width,ka.height].join(" "),children:[(0,vn.jsx)("defs",{children:n&&(0,vn.jsxs)(vn.Fragment,{children:[(0,vn.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Ka}, ${$a})`,width:n.width,height:n.height}),(0,vn.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,vn.jsx)("rect",{width:ka.width,height:ka.height,fill:"white"}),(0,vn.jsx)("use",
{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,vn.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(R=this.shapes)?void 0:R.map(mb=>{var ub,zb;const {bounds:ec,props:{rotation:ic}}=mb,[bc,Lc]=ta([ec.minX,ec.minY]),$c=+(180*((null!=ic?ic:0)+(null!=(ub=ec.rotation)?ub:0))/Math.PI).toFixed(2),[tc,Tc]=[(ec.width/2).toFixed(2),(ec.height/2).toFixed(2)];return(0,vn.jsx)("g",{transform:[`translate(${bc}, ${Lc})`,`rotate(${$c}, ${tc}, ${Tc})`].join(" "),children:mb.getShapeSVGJsx({assets:null!=
(zb=this.assets)?zb:[]})},mb.id)})}),(0,vn.jsx)("rect",{mask:n?`url(#${this.pageId}-camera-mask)`:"",width:ka.width,height:ka.height,fill:"transparent"}),n&&(0,vn.jsx)("use",{id:"minimap-camera-rect","data-x":Ka,"data-y":$a,"data-width":n.width,"data-height":n.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?IH.default.renderToString(a):""}},Xo=pg(ca(22)),vo=ca(602),dt=Xo.forwardRef((a,
d)=>{var {value:n,className:R}=a;a=hg(a,["autoResize","value","className"]);return(0,vo.jsx)("div",{className:"tl-input"+(R?" "+R:""),children:(0,vo.jsxs)("div",{className:"tl-input-sizer",children:[(0,vo.jsx)("div",{className:"tl-input-hidden",children:n}),(0,vo.jsx)("input",we({ref:d,value:n,className:"tl-text-input",type:"text"},a))]})})}),fi=ca(602),Hq=({type:a,active:d})=>(0,fi.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,fi.jsx)("i",{className:`tie tie-${({B:"block",P:"page",
WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),fD=(a,d)=>(0,fi.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((n,R)=>1===R%2?(0,fi.jsx)("mark",{className:"tl-highlighted",children:n}):n).map((n,R)=>(0,fi.jsx)(sl.default.Fragment,{children:n},R))}),et=(a,d)=>{const {handlers:n}=sl.default.useContext(fj),[R,ea]=sl.default.useState(null),ka=Te(a,200);sl.default.useEffect(()=>{let ta=
!1;if(0<ka.length){const Ka={"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?Ka["pages?"]=!1:"P"===d&&(Ka["blocks?"]=!1);n.search(ka,Ka).then($a=>{ta||ea($a)})}else ea(null);return()=>{ta=!0}},[ka,null==n?void 0:n.search]);return R},Ym=Ce(({className:a,style:d,placeholder:n,onChange:R,onBlur:ea,onAddBlock:ka})=>{const [ta,Ka]=sl.default.useState(Jj.defaultSearchQuery),[$a,mb]=sl.default.useState(Jj.defaultSearchFilter),ub=sl.default.useRef(null),{handlers:zb,renderers:ec}=sl.default.useContext(fj),
ic=zb.t,bc=sl.default.useCallback(Be=>{var We;setTimeout(()=>R(Be));null==(We=ub.current)?void 0:We.blur();Be&&(Jj.defaultSearchQuery="",Jj.defaultSearchFilter=null)},[]),Lc=sl.default.useCallback(Be=>ti(void 0,null,function*(){const We=yield null==zb?void 0:zb.addNewBlock(Be);We&&(bc(We),null==ka?void 0:ka(We));return We}),[ka]),$c=sl.default.useRef(null),[tc,Tc]=sl.default.useState(0),Oc=et(ta,$a),[ld,od]=sl.default.useState("circle-plus"),[Qd,ge]=sl.default.useState(!1);sl.default.useEffect(()=>
{setTimeout(()=>{var Be;null==(Be=ub.current)?void 0:Be.focus()})},[$a]);sl.default.useEffect(()=>{Jj.defaultSearchQuery=ta;Jj.defaultSearchFilter=$a},[ta,$a]);const uf=sl.default.useMemo(()=>{var Be;const We=[],Tf=null==ec?void 0:ec.Breadcrumb;if(!Tf||!zb)return[];ka&&We.push({actionIcon:"circle-plus",onChosen:()=>!!Lc(ta),element:(0,fi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,fi.jsx)(Hq,{active:!0,type:"BA"}),0<ta.length?(0,fi.jsxs)(fi.Fragment,{children:[(0,fi.jsx)("strong",
{children:ic("whiteboard/new-block")}),ta]}):(0,fi.jsx)("strong",{children:ic("whiteboard/new-block-no-colon")})]})});(null==(Be=null==Oc?void 0:Oc.pages)?0:Be.some(ff=>ff.toLowerCase()===ta.toLowerCase()))||!ta||We.push({actionIcon:"circle-plus",onChosen:()=>{bc(ta);return!0},element:(0,fi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,fi.jsx)(Hq,{active:!0,type:"PA"}),(0,fi.jsx)("strong",{children:ic("whiteboard/new-page")}),ta]})},{actionIcon:"circle-plus",onChosen:()=>ti(void 0,
null,function*(){yield null==zb?void 0:zb.addNewWhiteboard(ta);bc(ta);return!0}),element:(0,fi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,fi.jsx)(Hq,{active:!0,type:"WA"}),(0,fi.jsx)("strong",{children:ic("whiteboard/new-whiteboard")}),ta]})});0===ta.length&&null===$a&&We.push({actionIcon:"search",onChosen:()=>{mb("B");return!0},element:(0,fi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,fi.jsx)(Hq,{type:"BS"}),ic("whiteboard/search-only-blocks")]})},{actionIcon:"search",
onChosen:()=>{mb("P");return!0},element:(0,fi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,fi.jsx)(Hq,{type:"PS"}),ic("whiteboard/search-only-pages")]})});$a&&"P"!==$a||!Oc||!Oc.pages||We.push(...Oc.pages.map(ff=>({actionIcon:"search",onChosen:()=>{bc(ff);return!0},element:(0,fi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,fi.jsx)(Hq,{type:zb.isWhiteboardPage(ff)?"WP":"P"}),fD(ff,ta)]})})));$a&&"B"!==$a||!Oc||!Oc.blocks||We.push(...Oc.blocks.filter(ff=>ff.content&&
ff.uuid).map(({content:ff,uuid:Jf})=>{const ee=zb.queryBlockByUUID(Jf);return{actionIcon:"search",onChosen:()=>{var Nd,$d,Fd;return ee?(bc(Jf),null==(Fd=null==($d=null==(Nd=window.logseq)?void 0:Nd.api)?void 0:$d.set_blocks_id)?void 0:Fd.call($d,[Jf]),!0):!1},element:ee?(0,fi.jsxs)(fi.Fragment,{children:[(0,fi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,fi.jsx)(Hq,{type:"B"}),(0,fi.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,fi.jsx)(Tf,{blockId:Jf})})]}),
(0,fi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,fi.jsx)("div",{className:"tl-quick-search-option-placeholder"}),fD(ff,ta)]})]}):(0,fi.jsx)("div",{className:"tl-quick-search-option-row",children:ic("whiteboard/cache-outdated")})}}));return We},[ta,$a,Oc,null==ec?void 0:ec.Breadcrumb,zb]);sl.default.useEffect(()=>{const Be=We=>{var Tf,ff;let Jf=tc;"ArrowDown"===We.key?Jf=Math.min(uf.length-1,tc+1):"ArrowUp"===We.key?Jf=Math.max(0,tc-1):"Enter"===We.key?(null==(Tf=uf[tc])?void 0:
Tf.onChosen(),We.stopPropagation(),We.preventDefault()):"Backspace"===We.key&&0===ta.length?mb(null):"Escape"===We.key&&bc("");Jf!==tc&&(Tf=uf[Jf],Tc(Jf),od(Tf.actionIcon),We.stopPropagation(),We.preventDefault(),(We=null==(ff=$c.current)?void 0:ff.querySelector(".tl-quick-search-option:nth-child("+(Jf+1)+")"))&&(null==We?void 0:We.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",Be,!0);return()=>{document.removeEventListener("keydown",Be,!0)}},[uf,tc,ta]);return(0,fi.jsxs)("div",
{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,fi.jsx)(fH,{icon:ld,onClick:()=>{var Be;null==(Be=uf[tc])?void 0:Be.onChosen()}}),(0,fi.jsxs)("div",{className:"tl-quick-search-input-container",children:[$a&&(0,fi.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,fi.jsx)(Hq,{type:$a}),"B"===$a?"Search blocks":"Search pages",(0,fi.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>mb(null),children:(0,fi.jsx)(Qh,{name:"x"})})]}),(0,fi.jsx)(dt,
{ref:ub,type:"text",value:ta,className:"tl-quick-search-input",placeholder:null!=n?n:"Create or search your graph...",onChange:Be=>Ka(Be.target.value),onKeyDown:Be=>{"Enter"===Be.key&&bc(ta);Be.stopPropagation()},onFocus:()=>{ge(!0)},onBlur:()=>{ge(!1);null==ea?void 0:ea()}})]}),0<uf.length&&(0,fi.jsx)("div",{onWheelCapture:Be=>Be.stopPropagation(),className:"tl-quick-search-options",ref:$c,style:{visibility:Qd?"visible":"hidden",pointerEvents:Qd?"all":"none"},children:(0,fi.jsx)(xy,{style:{height:40*
Math.min(Math.max(1,uf.length),12)},totalCount:uf.length,itemContent:Be=>{const {actionIcon:We,onChosen:Tf,element:ff}=uf[Be];return(0,fi.jsx)("div",{"data-focused":Be===tc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{od(We);Tc(Be)},onPointerDownCapture:Jf=>{Tf()&&(Jf.stopPropagation(),Jf.preventDefault())},children:ff},Be)}})})]})}),zj=ca(602),My=Ce(function(a){var {pageId:d,portalType:n,refs:R,side:ea,onRefsChange:ka}=a;a=hg(a,"pageId portalType shapeType refs side onRefsChange".split(" "));
const {handlers:{t:ta}}=my.default.useContext(fj),Ka=R.length+(d?1:0),$a=0===R.length,mb=zb=>{zb&&!R.includes(zb)&&$a&&ka([...R,zb])},ub=!(!d||!n);return(0,zj.jsx)(df,Mf(we({},a),{side:ea,align:"start",alignOffset:-6,label:(0,zj.jsx)(ze,{content:ta("whiteboard/link"),sideOffset:14,children:(0,zj.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,zj.jsx)(Qh,{name:0<Ka?"link":"add-link"}),0<Ka&&(0,zj.jsx)("div",{className:"tl-shape-links-count",children:Ka})]})}),
children:(0,zj.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":ub,children:[ub&&(0,zj.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,zj.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,zj.jsx)(Qh,{className:"opacity-50",name:"internal-link"}),ta("whiteboard/references")]}),(0,zj.jsx)(Su,{type:n,id:d})]}),(0,zj.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,zj.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",
children:[(0,zj.jsx)(Qh,{className:"opacity-50",name:"add-link"}),ta("whiteboard/link-to-any-page-or-block")]}),$a&&(0,zj.jsx)(Ym,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:ta("whiteboard/start-typing-to-search"),onChange:mb}),0<R.length&&(0,zj.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:R.map((zb,ec)=>(0,zj.jsx)(Su,{id:zb,type:Eg(zb)?"B":"P",onRemove:()=>{ka(R.filter((ic,bc)=>ec!==bc))},showContent:!0},zb))})]})]})}))}),Kj=pg(ca(22)),[Au]=ki("ToggleGroup",
[vv]),Ny=vv(),gD=Kj.default.forwardRef((a,d)=>{const {type:n}=a;a=hg(a,["type"]);if("single"===n)return Kj.default.createElement(JH,af({},a,{ref:d}));if("multiple"===n)return Kj.default.createElement(KH,af({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[wo,hD]=Au("ToggleGroup"),JH=Kj.default.forwardRef((a,d)=>{const {value:n,defaultValue:R,onValueChange:ea=()=>{}}=a,ka=hg(a,["value","defaultValue","onValueChange"]),[ta,Ka]=jd({prop:n,defaultProp:R,onChange:ea});return Kj.default.createElement(wo,
{scope:a.__scopeToggleGroup,type:"single",value:ta?[ta]:[],onItemActivate:Ka,onItemDeactivate:Kj.default.useCallback(()=>Ka(""),[Ka])},Kj.default.createElement(ft,af({},ka,{ref:d})))}),KH=Kj.default.forwardRef((a,d)=>{const {value:n,defaultValue:R,onValueChange:ea=()=>{}}=a,ka=hg(a,["value","defaultValue","onValueChange"]),[ta=[],Ka]=jd({prop:n,defaultProp:R,onChange:ea}),$a=Kj.default.useCallback(ub=>Ka((zb=[])=>[...zb,ub]),[Ka]),mb=Kj.default.useCallback(ub=>Ka((zb=[])=>zb.filter(ec=>ec!==ub)),
[Ka]);return Kj.default.createElement(wo,{scope:a.__scopeToggleGroup,type:"multiple",value:ta,onItemActivate:$a,onItemDeactivate:mb},Kj.default.createElement(ft,af({},ka,{ref:d})))}),[iD,LH]=Au("ToggleGroup"),ft=Kj.default.forwardRef((a,d)=>{const {__scopeToggleGroup:n,disabled:R=!1,rovingFocus:ea=!0,orientation:ka,dir:ta,loop:Ka=!0}=a;var $a=hg(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=Ny(n);const mb=Tg(ta);$a=we({role:"group",dir:mb},$a);return Kj.default.createElement(iD,
{scope:n,rovingFocus:ea,disabled:R},ea?Kj.default.createElement(OB,af({asChild:!0},a,{orientation:ka,dir:mb,loop:Ka}),Kj.default.createElement(lk.div,af({},$a,{ref:d}))):Kj.default.createElement(lk.div,af({},$a,{ref:d})))}),MH=Kj.default.forwardRef((a,d)=>{var n=hD("ToggleGroupItem",a.__scopeToggleGroup);const R=LH("ToggleGroupItem",a.__scopeToggleGroup),ea=Ny(a.__scopeToggleGroup);n=n.value.includes(a.value);const ka=R.disabled||a.disabled;a=Mf(we({},a),{pressed:n,disabled:ka});const ta=Kj.default.useRef(null);
return R.rovingFocus?Kj.default.createElement(PB,af({asChild:!0},ea,{focusable:!ka,active:n,ref:ta}),Kj.default.createElement(jD,af({},a,{ref:d}))):Kj.default.createElement(jD,af({},a,{ref:d}))}),jD=Kj.default.forwardRef((a,d)=>{const {__scopeToggleGroup:n,value:R}=a,ea=hg(a,["__scopeToggleGroup","value"]),ka=hD("ToggleGroupItem",n);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return Kj.default.createElement(IB,af({},"single"===ka.type?a:void 0,ea,{ref:d,onPressedChange:ta=>{if(ta)ka.onItemActivate(R);
else ka.onItemDeactivate(R)}}))}),kD=gD,Oy=MH,Xl=ca(602),Ji=ca(602),Py="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),NH=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],Gm=new Map,Qy={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),
ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},OH=Object.entries(Qy).filter(([,
a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),PH=Ce(()=>{const a=Re(),{handlers:{t:d}}=il.default.useContext(fj),n=gb("AutoResizing"),R=n.every(ea=>ea.props.isAutoResizing);return(0,Ji.jsx)(lf,{tooltip:d("whiteboard/auto-resize"),toggle:n.every(ea=>"logseq-portal"===ea.props.type),className:"tl-button",pressed:R,onPressedChange:ea=>{n.forEach(ka=>{if("logseq-portal"===ka.props.type)ka.update({isAutoResizing:ea});else ka.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},
children:(0,Ji.jsx)(Qh,{name:"dimensions"})})}),QH=Ce(()=>{const a=Re();var {handlers:{t:d}}=il.default.useContext(fj);const n=gb("LogseqPortalViewMode"),R=n.every(ea=>ea.collapsed);if(!R&&!n.every(ea=>!ea.collapsed))return null;d=(0,Ji.jsxs)("div",{className:"flex",children:[R?d("whiteboard/expand"):d("whiteboard/collapse"),(0,Ji.jsx)(Qk,{action:R?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,Ji.jsx)(lf,{tooltip:d,toggle:n.every(ea=>"logseq-portal"===ea.props.type),
className:"tl-button",pressed:R,onPressedChange:()=>a.api.setCollapsed(!R),children:(0,Ji.jsx)(Qh,{name:R?"object-expanded":"object-compact"})})}),RH=Ce(()=>{const {handlers:{isMobile:a}}=il.default.useContext(fj);var d=gb("ScaleLevel");d=1<(new Set(d.map(n=>n.scaleLevel))).size?"":d[0].scaleLevel;return(0,Ji.jsx)(Wr,{scaleLevel:d,compact:a()})}),Yo=Ce(()=>{const a=Re(),{handlers:{t:d}}=il.default.useContext(fj),n=gb("IFrameSource")[0],R=il.default.useCallback(ka=>{n.onIFrameSourceChange(ka.target.value.trim().toLowerCase());
a.persist()},[]),ea=il.default.useCallback(()=>{n.reload()},[]);return(0,Ji.jsxs)("span",{className:"flex gap-3",children:[(0,Ji.jsx)(ve,{tooltip:d("whiteboard/reload"),type:"button",onClick:ea,children:(0,Ji.jsx)(Qh,{name:"refresh"})}),(0,Ji.jsx)(dt,{title:d("whiteboard/website-url"),className:"tl-iframe-src",value:`${n.props.url}`,onChange:R}),(0,Ji.jsx)(ve,{tooltip:d("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(n.props.url),children:(0,Ji.jsx)(Qh,{name:"external-link"})})]})}),
SH=Ce(()=>{const a=Re(),{handlers:{t:d}}=il.default.useContext(fj),n=gb("YoutubeLink")[0],R=il.default.useCallback(ea=>{n.onYoutubeLinkChange(ea.target.value);a.persist()},[]);return(0,Ji.jsxs)("span",{className:"flex gap-3",children:[(0,Ji.jsx)(dt,{title:d("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${n.props.url}`,onChange:R}),(0,Ji.jsx)(ve,{tooltip:d("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var ea,ka,ta;return null==(ta=null==(ka=null==(ea=window.logseq)?void 0:
ea.api)?void 0:ka.open_external_link)?void 0:ta.call(ka,n.props.url)},children:(0,Ji.jsx)(Qh,{name:"external-link"})})]})}),TH=Ce(()=>{const a=Re(),{handlers:{t:d}}=il.default.useContext(fj),n=gb("TwitterLink")[0],R=il.default.useCallback(ea=>{n.onTwitterLinkChange(ea.target.value);a.persist()},[]);return(0,Ji.jsxs)("span",{className:"flex gap-3",children:[(0,Ji.jsx)(dt,{title:d("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${n.props.url}`,onChange:R}),(0,Ji.jsx)(ve,{tooltip:d("whiteboard/open-twitter-url"),
type:"button",onClick:()=>{var ea,ka,ta;return null==(ta=null==(ka=null==(ea=window.logseq)?void 0:ea.api)?void 0:ka.open_external_link)?void 0:ta.call(ka,n.props.url)},children:(0,Ji.jsx)(Qh,{name:"external-link"})})]})}),UH=Ce(()=>{const a=Re(),{handlers:{t:d,setCurrentPdf:n}}=il.default.useContext(fj),R=a.selectedShapesArray[0];return(0,Ji.jsx)(ve,{tooltip:d("whiteboard/edit-pdf"),type:"button",onClick:()=>n(a.assets[R.props.assetId].src),children:(0,Ji.jsx)(Qh,{name:"edit"})})}),VH=Ce(()=>{const a=
Re(),{handlers:{t:d}}=il.default.useContext(fj);var n=gb("NoFill");const R=il.default.useCallback(ea=>{a.selectedShapesArray.forEach(ka=>ka.update({noFill:ea}));a.persist()},[]);n=n.every(ea=>ea.props.noFill);return(0,Ji.jsx)(lf,{tooltip:d("whiteboard/fill"),className:"tl-button",pressed:n,onPressedChange:R,children:(0,Ji.jsx)(Qh,{name:n?"droplet-off":"droplet"})})}),WH=Ce(()=>{const a=Re(),d=gb("Swatch"),n=il.default.useCallback(ea=>{a.selectedShapesArray.forEach(ka=>{ka.update({fill:ea,stroke:ea})});
a.persist()},[]),R=il.default.useCallback(ea=>{a.selectedShapesArray.forEach(ka=>{ka.update({opacity:ea})});a.persist()},[]);return(0,Ji.jsx)(qm,{popoverSide:"top",color:d[0].props.noFill?d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:R,setColor:n})}),XH=Ce(()=>{const a=Re(),d=il.default.useCallback(n=>{a.api.convertShapes(n.currentTarget.dataset.tool)},[]);return(0,Ji.jsx)(Zx,{popoverSide:"top",chevron:!1,setGeometry:d})}),lD=Ce(()=>{const a=Re(),{handlers:{t:d}}=il.default.useContext(fj),
n=gb("StrokeType"),R=n.every(ea=>"dashed"===ea.props.strokeType)?"dashed":n.every(ea=>"line"===ea.props.strokeType)?"line":"mixed";return(0,Ji.jsx)(ja,{title:d("whiteboard/stroke-type"),options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:R,onValueChange:ea=>{n.forEach(ka=>{ka.update({strokeType:ea})});a.persist()}})}),YH=Ce(()=>{const a=Re(),{handlers:{t:d}}=il.default.useContext(fj),n=gb("ArrowMode");var R=n.every(ka=>{var ta;return"arrow"===
(null==(ta=ka.props.decorations)?void 0:ta.start)});const ea=n.every(ka=>{var ta;return"arrow"===(null==(ta=ka.props.decorations)?void 0:ta.end)});R=[R?"start":null,ea?"end":null].filter(Ic);return(0,Ji.jsx)(Da,{title:d("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:R,onValueChange:ka=>{n.forEach(ta=>{var Ka=ta.update;var $a={start:ka.includes("start")?"arrow":null,end:ka.includes("end")?"arrow":null};Ka.call(ta,{decorations:$a})});
a.persist()}})}),ZH=Ce(()=>{const a=Re(),{handlers:{t:d}}=il.default.useContext(fj),n=gb("TextStyle"),R=n.every(ka=>500<ka.props.fontWeight),ea=n.every(ka=>ka.props.italic);return(0,Ji.jsxs)("span",{className:"flex gap-1",children:[(0,Ji.jsx)(lf,{tooltip:d("whiteboard/bold"),className:"tl-button",pressed:R,onPressedChange:ka=>{n.forEach(ta=>{ta.update({fontWeight:ka?700:400});ta.onResetBounds()});a.persist()},children:(0,Ji.jsx)(Qh,{name:"bold"})}),(0,Ji.jsx)(lf,{tooltip:d("whiteboard/italic"),className:"tl-button",
pressed:ea,onPressedChange:ka=>{n.forEach(ta=>{ta.update({italic:ka});ta.onResetBounds()});a.persist()},children:(0,Ji.jsx)(Qh,{name:"italic"})})]})}),$H=Ce(()=>{var a;const d=Re(),n=d.selectedShapesArray[0];return(0,Ji.jsx)(My,{onRefsChange:R=>{n.update({refs:R});d.persist()},refs:null!=(a=n.props.refs)?a:[],shapeType:n.props.type,side:"right",pageId:"logseq-portal"===n.props.type?n.props.pageId:void 0,portalType:"logseq-portal"===n.props.type?n.props.blockType:void 0})});Gm.set("Geometry",XH);Gm.set("AutoResizing",
PH);Gm.set("LogseqPortalViewMode",QH);Gm.set("ScaleLevel",RH);Gm.set("YoutubeLink",SH);Gm.set("TwitterLink",TH);Gm.set("IFrameSource",Yo);Gm.set("NoFill",VH);Gm.set("Swatch",WH);Gm.set("StrokeType",lD);Gm.set("ArrowMode",YH);Gm.set("TextStyle",ZH);Gm.set("Links",$H);Gm.set("EditPdf",UH);var Ry=a=>{var d;return(null!=(d=Qy[a])?d:[]).filter(Ic)},aI=a=>{const d=a.map(R=>R.props.type),n=new Set(0<a.length?Ry(d[0]):[]);for(let R=1;R<d.length&&0<n.size;R++){const ea=Ry(d[R]);n.forEach(ka=>{ea.includes(ka)||
n.delete(ka)})}1<a.length&&NH.forEach(R=>{n.has(R)&&n.delete(R)});return Array.from(n).sort((R,ea)=>Py.indexOf(R)-Py.indexOf(ea)).map(R=>Gm.get(R))},Bu=ca(602),mD=Ce(({shapes:a,offsets:d,hidden:n})=>{const R=Re(),ea=Qs.useRef(null),ka=Qs.useRef(null);Qs.useLayoutEffect(()=>{setTimeout(()=>{const Ka=ka.current;if(Ka){var {offsetWidth:$a,offsetHeight:mb}=Ka;ea.current=[$a,mb]}})});Qs.useLayoutEffect(()=>{var Ka;const $a=ka.current;if($a){var mb=null!=(Ka=ea.current)?Ka:[0,0];Ka=0;if(116>d.top){var ub=
d.height/2+40;140>d.bottom&&(ub+=d.bottom-140)}else ub=-(d.height/2+40);16>d.left+d.width/2-mb[0]/2?Ka+=-(d.left+d.width/2-mb[0]/2-16):16>d.right+d.width/2-mb[0]/2&&(Ka+=d.right+d.width/2-mb[0]/2-16);var [zb,ec]=[Ka,ub];$a.style.transform=`translateX(${zb}px) translateY(${ec}px)`}},[d]);if(!R)return null;const ta=aI(a);return(0,Bu.jsx)(mn,{centered:!0,children:0<ta.length&&(0,Bu.jsx)("div",{ref:ka,className:"tl-toolbar tl-context-bar",style:{visibility:n?"hidden":"visible",pointerEvents:n?"none":
"all"},children:ta.map((Ka,$a)=>(0,Bu.jsxs)(Qs.Fragment,{children:[(0,Bu.jsx)(Ka,{}),$a<ta.length-1&&(0,Bu.jsx)(Ro,{className:"tl-toolbar-separator",orientation:"vertical"})]},$a))})})}),Sy=pg(ca(22)),Ik=ca(22),[nD]=ki("ContextMenu",[Xt]),gt=Xt(),[Cu,ht]=nD("ContextMenu"),Ty=(0,Ik.forwardRef)((a,d)=>{const {__scopeContextMenu:n,disabled:R=!1}=a,ea=hg(a,["__scopeContextMenu","disabled"]),ka=ht("ContextMenuTrigger",n),ta=gt(n),Ka=(0,Ik.useRef)({x:0,y:0}),$a=(0,Ik.useRef)({getBoundingClientRect:()=>
DOMRect.fromRect(we({width:0,height:0},Ka.current))}),mb=(0,Ik.useRef)(0),ub=(0,Ik.useCallback)(()=>window.clearTimeout(mb.current),[]);(0,Ik.useEffect)(()=>ub,[ub]);(0,Ik.useEffect)(()=>void(R&&ub()),[R,ub]);return(0,Ik.createElement)(Ik.Fragment,null,(0,Ik.createElement)(Ox,af({},ta,{virtualRef:$a})),(0,Ik.createElement)(lk.span,af({"data-state":ka.open?"open":"closed","data-disabled":R?"":void 0},ea,{ref:d,style:we({WebkitTouchCallout:"none"},a.style),onContextMenu:R?a.onContextMenu:xg(a.onContextMenu,
zb=>{ub();Ka.current={x:zb.clientX,y:zb.clientY};ka.onOpenChange(!0);zb.preventDefault()}),onPointerDown:R?a.onPointerDown:xg(a.onPointerDown,oc(zb=>{ub();mb.current=window.setTimeout(()=>{Ka.current={x:zb.clientX,y:zb.clientY};ka.onOpenChange(!0)},700)})),onPointerMove:R?a.onPointerMove:xg(a.onPointerMove,oc(ub)),onPointerCancel:R?a.onPointerCancel:xg(a.onPointerCancel,oc(ub)),onPointerUp:R?a.onPointerUp:xg(a.onPointerUp,oc(ub))})))}),Uy=(0,Ik.forwardRef)((a,d)=>{var {__scopeContextMenu:n}=a;const R=
hg(a,["__scopeContextMenu"]),ea=ht("ContextMenuContent",n);n=gt(n);const ka=(0,Ik.useRef)(!1);return(0,Ik.createElement)($t,af({},n,R,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:ta=>{var Ka;null===(Ka=a.onCloseAutoFocus)||void 0===Ka||Ka.call(a,ta);!ta.defaultPrevented&&ka.current&&ta.preventDefault();ka.current=!1},onInteractOutside:ta=>{var Ka;null===(Ka=a.onInteractOutside)||void 0===Ka||Ka.call(a,ta);ta.defaultPrevented||ea.modal||(ka.current=!0)},style:Mf(we({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Wk=(0,Ik.forwardRef)((a,d)=>{var {__scopeContextMenu:n}=a;a=hg(a,["__scopeContextMenu"]);n=gt(n);return(0,Ik.createElement)(Gs,af({},n,a,{ref:d}))}),Iq=(0,Ik.forwardRef)((a,d)=>{var {__scopeContextMenu:n}=a;a=hg(a,["__scopeContextMenu"]);n=gt(n);return(0,Ik.createElement)(bC,af({},n,a,{ref:d}))}),oD=a=>{const {__scopeContextMenu:d,children:n,onOpenChange:R,dir:ea,modal:ka=!0}=a,[ta,Ka]=(0,Ik.useState)(!1);a=gt(d);const $a=mj(R),mb=(0,Ik.useCallback)(ub=>{Ka(ub);$a(ub)},[$a]);return(0,Ik.createElement)(Cu,
{scope:d,open:ta,onOpenChange:mb,modal:ka},(0,Ik.createElement)(cC,af({},a,{dir:ea,open:ta,onOpenChange:mb,modal:ka}),n))},Uf=ca(602),Qp=Ce(function({children:a,collisionRef:d}){var n,R,ea,ka,ta,Ka,$a,mb,ub,zb,ec,ic,bc,Lc,$c,tc,Tc;const Oc=Re(),{handlers:ld}=Sy.useContext(fj),od=ld.t,Qd=Sy.useRef(null),ge=Be=>{Be();Oc.transition("select")},uf=Sy.useMemo(()=>dc(),[]);return(0,Uf.jsxs)(oD,{onOpenChange:Be=>{Be&&!Oc.isIn("select.contextMenu")?Oc.transition("select").selectedTool.transition("contextMenu"):
!Be&&Oc.isIn("select.contextMenu")&&Oc.selectedTool.transition("idle")},children:[(0,Uf.jsx)(Ty,{disabled:Oc.editingShape&&0!==Object.keys(Oc.editingShape).length,children:a}),(0,Uf.jsx)(Uy,{className:"tl-menu tl-context-menu",ref:Qd,onEscapeKeyDown:()=>Oc.transition("select"),collisionBoundary:d.current,asChild:!0,tabIndex:-1,children:(0,Uf.jsxs)("div",{children:[1<(null==(n=Oc.selectedShapes)?void 0:n.size)&&!Oc.readOnly&&(null==(R=Oc.selectedShapesArray)?void 0:R.some(Be=>!Be.props.isLocked))&&
(0,Uf.jsxs)(Uf.Fragment,{children:[(0,Uf.jsxs)(Wk,{children:[(0,Uf.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,Uf.jsx)(ve,{tooltip:od("whiteboard/align-left"),onClick:()=>ge(()=>Oc.align("left")),children:(0,Uf.jsx)(Qh,{name:"layout-align-left"})}),(0,Uf.jsx)(ve,{tooltip:od("whiteboard/align-center-horizontally"),onClick:()=>ge(()=>Oc.align("centerHorizontal")),children:(0,Uf.jsx)(Qh,{name:"layout-align-center"})}),(0,Uf.jsx)(ve,{tooltip:od("whiteboard/align-right"),onClick:()=>
ge(()=>Oc.align("right")),children:(0,Uf.jsx)(Qh,{name:"layout-align-right"})}),(0,Uf.jsx)(Ro,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Uf.jsx)(ve,{tooltip:od("whiteboard/distribute-horizontally"),onClick:()=>ge(()=>Oc.distribute("horizontal")),children:(0,Uf.jsx)(Qh,{name:"layout-distribute-vertical"})})]}),(0,Uf.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,Uf.jsx)(ve,{tooltip:od("whiteboard/align-top"),onClick:()=>ge(()=>Oc.align("top")),children:(0,Uf.jsx)(Qh,
{name:"layout-align-top"})}),(0,Uf.jsx)(ve,{tooltip:od("whiteboard/align-center-vertically"),onClick:()=>ge(()=>Oc.align("centerVertical")),children:(0,Uf.jsx)(Qh,{name:"layout-align-middle"})}),(0,Uf.jsx)(ve,{tooltip:od("whiteboard/align-bottom"),onClick:()=>ge(()=>Oc.align("bottom")),children:(0,Uf.jsx)(Qh,{name:"layout-align-bottom"})}),(0,Uf.jsx)(Ro,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Uf.jsx)(ve,{tooltip:od("whiteboard/distribute-vertically"),onClick:()=>ge(()=>Oc.distribute("vertical")),
children:(0,Uf.jsx)(Qh,{name:"layout-distribute-horizontal"})})]})]}),(0,Uf.jsx)(Iq,{className:"menu-separator"}),(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.packIntoRectangle),children:[(0,Uf.jsx)(Qh,{className:"tl-menu-icon",name:"layout-grid"}),od("whiteboard/pack-into-rectangle")]}),(0,Uf.jsx)(Iq,{className:"menu-separator"})]}),0<(null==(ea=Oc.selectedShapes)?void 0:ea.size)&&(0,Uf.jsxs)(Uf.Fragment,{children:[(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.api.zoomToSelection),
children:[od("whiteboard/zoom-to-fit"),(0,Uf.jsx)(Qk,{action:"whiteboard/zoom-to-fit"})]}),(0,Uf.jsx)(Iq,{className:"menu-separator"})]}),(Oc.selectedShapesArray.some(Be=>"group"===Be.type||Oc.getParentGroup(Be))||1<Oc.selectedShapesArray.length)&&(null==(ka=Oc.selectedShapesArray)?void 0:ka.some(Be=>!Be.props.isLocked))&&!Oc.readOnly&&(0,Uf.jsxs)(Uf.Fragment,{children:[Oc.selectedShapesArray.some(Be=>"group"===Be.type||Oc.getParentGroup(Be))&&(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>
ge(Oc.api.unGroup),children:[(0,Uf.jsx)(Qh,{className:"tl-menu-icon",name:"ungroup"}),od("whiteboard/ungroup"),(0,Uf.jsx)(Qk,{action:"whiteboard/ungroup"})]}),1<Oc.selectedShapesArray.length&&(null==(ta=Oc.selectedShapesArray)?void 0:ta.some(Be=>!Be.props.isLocked))&&(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.api.doGroup),children:[(0,Uf.jsx)(Qh,{className:"tl-menu-icon",name:"group"}),od("whiteboard/group"),(0,Uf.jsx)(Qk,{action:"whiteboard/group"})]}),(0,Uf.jsx)(Iq,{className:"menu-separator"})]}),
0<(null==(Ka=Oc.selectedShapes)?void 0:Ka.size)&&(null==($a=Oc.selectedShapesArray)?void 0:$a.some(Be=>!Be.props.isLocked))&&(0,Uf.jsxs)(Uf.Fragment,{children:[!Oc.readOnly&&(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.cut),children:[(0,Uf.jsx)(Qh,{className:"tl-menu-icon",name:"cut"}),od("whiteboard/cut")]}),(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.copy),children:[(0,Uf.jsx)(Qh,{className:"tl-menu-icon",name:"copy"}),od("whiteboard/copy"),(0,Uf.jsx)(Qk,{action:"editor/copy"})]})]}),
!Oc.readOnly&&(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.paste),children:[(0,Uf.jsx)(Qh,{className:"tl-menu-icon",name:"clipboard"}),od("whiteboard/paste"),(0,Uf.jsx)("div",{className:"tl-menu-right-slot",children:(0,Uf.jsx)("span",{className:"keyboard-shortcut",children:(0,Uf.jsxs)("code",{children:[sA,"+v"]})})})]}),1===(null==(mb=Oc.selectedShapes)?void 0:mb.size)&&!Oc.readOnly&&(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(()=>Oc.paste(void 0,!0)),children:[od("whiteboard/paste-as-link"),
(0,Uf.jsx)("div",{className:"tl-menu-right-slot",children:(0,Uf.jsx)("span",{className:"keyboard-shortcut",children:(0,Uf.jsxs)("code",{children:[sA,"+⇧+v"]})})})]}),0<(null==(ub=Oc.selectedShapes)?void 0:ub.size)&&(0,Uf.jsxs)(Uf.Fragment,{children:[(0,Uf.jsx)(Iq,{className:"menu-separator"}),(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(()=>{var Be,We;return ld.exportToImage(Oc.currentPageId,{x:Oc.selectionBounds.minX+Oc.viewport.camera.point[0]-8,y:Oc.selectionBounds.minY+Oc.viewport.camera.point[1]-
8,width:(null==(Be=Oc.selectionBounds)?void 0:Be.width)+16,height:(null==(We=Oc.selectionBounds)?void 0:We.height)+16,zoom:Oc.viewport.camera.zoom})}),children:[(0,Uf.jsx)(Qh,{className:"tl-menu-icon",name:"file-export"}),od("whiteboard/export"),(0,Uf.jsx)("div",{className:"tl-menu-right-slot",children:(0,Uf.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,Uf.jsx)(Iq,{className:"menu-separator"}),(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.api.selectAll),children:[od("whiteboard/select-all"),
(0,Uf.jsx)(Qk,{action:"editor/select-parent"})]}),1<(null==(zb=Oc.selectedShapes)?void 0:zb.size)&&(0,Uf.jsx)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.api.deselectAll),children:od("whiteboard/deselect-all")}),!Oc.readOnly&&0<(null==(ec=Oc.selectedShapes)?void 0:ec.size)&&(null==(ic=Oc.selectedShapesArray)?void 0:ic.some(Be=>!Be.props.isLocked))&&(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(()=>Oc.setLocked(!0)),children:[(0,Uf.jsx)(Qh,{className:"tl-menu-icon",name:"lock"}),od("whiteboard/lock"),
(0,Uf.jsx)(Qk,{action:"whiteboard/lock"})]}),!Oc.readOnly&&0<(null==(bc=Oc.selectedShapes)?void 0:bc.size)&&(null==(Lc=Oc.selectedShapesArray)?void 0:Lc.some(Be=>Be.props.isLocked))&&(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(()=>Oc.setLocked(!1)),children:[(0,Uf.jsx)(Qh,{className:"tl-menu-icon",name:"lock-open"}),od("whiteboard/unlock"),(0,Uf.jsx)(Qk,{action:"whiteboard/unlock"})]}),0<(null==($c=Oc.selectedShapes)?void 0:$c.size)&&!Oc.readOnly&&(null==(tc=Oc.selectedShapesArray)?void 0:
tc.some(Be=>!Be.props.isLocked))&&(0,Uf.jsxs)(Uf.Fragment,{children:[(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.api.deleteShapes),children:[(0,Uf.jsx)(Qh,{className:"tl-menu-icon",name:"backspace"}),od("whiteboard/delete"),(0,Uf.jsx)(Qk,{action:"editor/delete"})]}),1<(null==(Tc=Oc.selectedShapes)?void 0:Tc.size)&&!Oc.readOnly&&(0,Uf.jsxs)(Uf.Fragment,{children:[(0,Uf.jsx)(Iq,{className:"menu-separator"}),(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.flipHorizontal),children:[(0,Uf.jsx)(Qh,
{className:"tl-menu-icon",name:"flip-horizontal"}),od("whiteboard/flip-horizontally")]}),(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.flipVertical),children:[(0,Uf.jsx)(Qh,{className:"tl-menu-icon",name:"flip-vertical"}),od("whiteboard/flip-vertically")]})]}),!Oc.readOnly&&(0,Uf.jsxs)(Uf.Fragment,{children:[(0,Uf.jsx)(Iq,{className:"menu-separator"}),(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.bringToFront),children:[od("whiteboard/move-to-front"),(0,Uf.jsx)(Qk,{action:"whiteboard/bring-to-front"})]}),
(0,Uf.jsxs)(Wk,{className:"tl-menu-item",onClick:()=>ge(Oc.sendToBack),children:[od("whiteboard/move-to-back"),(0,Uf.jsx)(Qk,{action:"whiteboard/send-to-back"})]})]}),uf&&(0,Uf.jsx)(Wk,{className:"tl-menu-item",onClick:()=>{1===Oc.selectedShapesArray.length?console.log(Gb(Oc.selectedShapesArray[0].serialized)):console.log(Oc.selectedShapesArray.map(Be=>Gb(Be.serialized)))},children:od("whiteboard/dev-print-shape-props")})]})]})})]})}),Vy=pg(ca(22)),iw=ca(602),bI=Ce(({shape:a})=>{const d=Re(),{handlers:n}=
Vy.default.useContext(fj),R=n.t,ea=Vy.default.useMemo(()=>{var ka;const ta=[...(null!=(ka=a.props.refs)?ka:[])].map(Ka=>[Ka,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&ta.unshift([a.props.pageId,!1]);return ta.filter(Ka=>Ka[0].toLowerCase()!==d.currentPage.name&&n.getBlockPageName(Ka[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===ea.length?null:(0,iw.jsx)("div",{className:"tl-quick-links",title:R("whiteboard/shape-quick-links"),children:ea.map(([ka,
ta])=>(0,iw.jsx)("div",{className:"tl-quick-links-row",children:(0,iw.jsx)(Bp,{id:ka,showReferenceContent:ta})},ka))})}),cI=pg(ca(22)),Zo=pg(ca(22)),pD={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},Wy=(a,d,n)=>ti(void 0,[a,d,n],function*(R,{point:ea,shiftKey:ka,dataTransfer:ta,fromDrop:Ka},$a){function mb(Fd,ae){return ti(this,null,function*(){const gf=Object.values(R.assets).find(wf=>wf.src===Fd);return gf?gf:{id:Ck(),type:ae,src:Fd,size:yield Ki($a.makeAssetUrl(Fd),
ae)}})}function ub(Fd){return ti(this,null,function*(){const ae=Fd.filter(gf=>"unknown"!==bd(gf.name)).map(gf=>ti(this,null,function*(){try{const wf=yield $a.saveAsset(gf);return yield mb(wf,bd(gf.name))}catch(wf){console.error(wf)}return null}));return(yield Promise.all(ae)).filter(Ic)})}function zb(Fd){return[Mf(we({},Jp.defaultProps),{html:Fd,point:[ea[0],ea[1]]})]}function ec(Fd){return ti(this,null,function*(){return nd(bc,Lc,Tc,tc,Oc,$c,uf)(Fd)})}function ic(){return ti(this,null,function*(){const Fd=
yield navigator.clipboard.read(),ae=nd(Oc,$c,uf);return(yield Promise.all(Fd.map(gf=>ae(gf)))).flat().filter(Ic)})}function bc(Fd){return ti(this,null,function*(){var ae=Fd.getData("file");if(!ae)return null;const gf=yield mb(ae,"pdf");R.addAssets([gf]);ae=Mf(we({},Qr.defaultProps),{id:Ck(),assetId:gf.id,url:ae,opacity:1});gf.size&&Object.assign(ae,{point:[ea[0]-gf.size[0]/4+16,ea[1]-gf.size[1]/4+16],size:ye.div(gf.size,2)});return[ae]})}function Lc(Fd){return ti(this,null,function*(){var ae=Array.from(Fd.files);
return 0<ae.length?(Tf=ae=yield ub(ae),ae.map((gf,wf)=>{switch(gf.type){case "video":var og=ct.defaultProps;break;case "image":og=Qi.defaultProps;break;case "pdf":og=Qr.defaultProps;break;default:return null}og=Mf(we({},og),{id:Ck(),assetId:gf.id,opacity:1});gf.size&&Object.assign(og,{point:[ea[0]-gf.size[0]/4+16*wf,ea[1]-gf.size[1]/4+16*wf],size:ye.div(gf.size,2)});return og})):null})}function $c(Fd){return ti(this,null,function*(){if(Fd.types.includes("text/plain")&&(ka||Ka))return null;const ae=
yield Wd(Fd,"text/html");return ae?nd(ld,zb)(ae):null})}function tc(Fd){return ti(this,null,function*(){var ae,gf,wf,og,Xg,Ef,mh=Fd.getData("block-uuid");if(mh){mh=mh.trim();const bg=null==(wf=null==(gf=null==(ae=window.logseq)?void 0:ae.api)?void 0:gf.get_selected_blocks)?void 0:wf.call(gf);ae=bg&&1<(null==bg?void 0:bg.length)?bg.map(Bh=>Bh.uuid):[mh];null==(Ef=null==(Xg=null==(og=window.logseq)?void 0:og.api)?void 0:Xg.set_blocks_id)?void 0:Ef.call(Xg,ae);og=ae.map(Bh=>ge(`((${Bh}))`));return(yield Promise.all(og)).flat().filter(Ic).map((Bh,
Lh)=>Mf(we({},Bh),{point:[ea[0]+(Jj.defaultProps.size[0]+16)*Lh,ea[1]]}))}return null})}function Tc(Fd){return ti(this,null,function*(){var ae=Fd.getData("page-name");return ae?(ae=ae.trim(),ge(`[[${ae}]]`)):null})}function Oc(Fd){return ti(this,null,function*(){var ae=yield Wd(Fd,"text/plain");return ae?(ae=ae.trim(),nd(od,Qd)(ae)):null})}function ld(Fd){if(Fd=R.api.getClonedShapesFromTldrString(decodeURIComponent(Fd),ea)){const {shapes:ae,assets:gf,bindings:wf}=Fd;ff.push(...gf);Jf.push(...wf);
return ae}return null}function od(Fd){return ti(this,null,function*(){try{const gf=new URL(Fd);var ae=gf.host&&["http:","https:"].includes(gf.protocol)}catch(gf){ae=!1}return ae&&!ka?fw.test(Fd)?[Mf(we({},Np.defaultProps),{url:Fd,point:[ea[0],ea[1]]})]:Iy.test(Fd)?[Mf(we({},Pr.defaultProps),{url:Fd,point:[ea[0],ea[1]]})]:[Mf(we({},Kp.defaultProps),{url:Fd,point:[ea[0],ea[1]]})]:null})}function Qd(Fd){return Fd.startsWith("\x3ciframe")?[Mf(we({},Jp.defaultProps),{html:Fd,point:[ea[0],ea[1]]})]:null}
function ge(Fd){return ti(this,null,function*(){if(/^\(\(.*\)\)$/.test(Fd)&&40===Fd.length){var ae=Fd.slice(2,-2);if(Eg(ae))return[Mf(we({},Jj.defaultProps),{point:[ea[0],ea[1]],size:[400,0],pageId:ae,fill:R.settings.color,stroke:R.settings.color,scaleLevel:R.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(Fd))return ae=Fd.slice(2,-2),[Mf(we({},Jj.defaultProps),{point:[ea[0],ea[1]],size:[400,0],pageId:ae,fill:R.settings.color,stroke:R.settings.color,scaleLevel:R.settings.scaleLevel,
blockType:"P"})];return null})}function uf(Fd){return ti(this,null,function*(){var ae=yield Wd(Fd,"text/plain");return ae&&(ae=ae.trim(),ae=yield null==$a?void 0:$a.addNewBlock(ae))?[Mf(we({},Jj.defaultProps),{size:[400,0],point:[ea[0],ea[1]],pageId:ae,fill:R.settings.color,stroke:R.settings.color,scaleLevel:R.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var Be,We;let Tf=[],ff=[];const Jf=[];R.cursors.setCursor("progress");let ee=[];try{ta?ee.push(...(null!=(Be=yield ec(ta))?Be:[])):ee.push(...(null!=
(We=yield ic())?We:[]))}catch(Fd){console.error(Fd)}const Nd=ee.map(Fd=>Mf(we({},Fd),{parentId:R.currentPageId,isLocked:!1,id:Eg(Fd.id)?Fd.id:Ck()})),$d=null==ta?void 0:ta.types.every(Fd=>"Files"===Fd);R.wrapUpdate(()=>{var Fd=[...Tf,...ff];0<Fd.length&&R.createAssets(Fd);0<Nd.length&&R.createShapes(Nd);R.currentPage.updateBindings(Object.fromEntries(Jf.map(ae=>[ae.id,ae])));if(1===R.selectedShapesArray.length&&1===Nd.length&&Ka){Fd=R.selectedShapesArray[0];const ae=R.getShapeById(Nd[0].id);R.createNewLineBinding(Fd,
ae)}R.setSelectedShapes(Nd.map(ae=>ae.id));R.selectedTool.transition("idle");R.cursors.setCursor("default");(Ka||$d)&&R.packIntoRectangle()})}),Du=pg(ca(22)),Xy=pg(ca(22)),$o=ca(602),qD=[Rr,Wl,dD,Ky,Fl,Wn,hw,Ly,Hk,eD,$h,Sr],rD=a=>{const {renderers:d}=Cs.useContext(fj);return(0,$o.jsx)(d.BacklinksCount,Mf(we({},a),{options:{"portal?":!1}}))},sD=()=>{const a=Cs.useRef(null),d=Re(),n=Cs.useMemo(()=>({ContextBar:mD,BacklinksCount:rD,QuickLinks:bI}),[]);return(0,$o.jsx)(Qp,{collisionRef:a,children:(0,$o.jsx)("div",
{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":d.uuid,children:(0,$o.jsx)(mG,{components:n,children:(0,$o.jsx)(zp,{})})})})},tD=a=>{var {onPersist:d,readOnly:n,model:R}=a;a=hg(a,["onPersist","readOnly","model"]);const ea=Ae(),ka=je(),ta=Ve(),Ka=n?null:Af(),$a=Cs.useCallback((mb,ub)=>{null==d?void 0:d(mb,ub)},[R]);return(0,$o.jsx)(iG,Mf(we({Shapes:Vl,Tools:qD,onDrop:ea,onPaste:ka,onCopy:ta,readOnly:n,onCanvasDBClick:Ka,onPersist:$a,model:R},a),{children:(0,$o.jsx)(sD,{})}))},uD=
function(a){var {renderers:d,handlers:n}=a;a=hg(a,["renderers","handlers"]);const R={renderers:Cs.useMemo(()=>Object.fromEntries(Object.entries(d).map(([ea,ka])=>[ea,Cs.memo(ka)])),[]),handlers:n};return(0,$o.jsx)(fj.Provider,{value:R,children:(0,$o.jsx)(tD,we({},a))})}};
'use strict';var kNd=function(a,b){var c=$APP.$H(a)?$APP.Lw.C($APP.rI.C(new $APP.O(null,2,5,$APP.Q,[$APP.Kw,"logseq.tldraw.shape"],null))):$APP.Bw;a=$APP.rI.C(new $APP.O(null,2,5,$APP.Q,[$APP.Kw,$APP.Ro.C?$APP.Ro.C(b):$APP.Ro.call(null,b)],null));return $APP.xk.A(function(d){var e=$APP.mf(d);d=$APP.H.A(e,$APP.Lw);e=$APP.H.A(e,$APP.ox);e=$APP.H.A(e,c);return $APP.n(e)?new $APP.m(null,2,[$APP.Ek,$APP.t.C(d),$APP.VZc,$APP.VZc.C(e)],null):null},$APP.ILa.C(a))},lNd=function(a){return $APP.Po.G(a,$APP.G([$APP.Qo,
!0]))},mNd=function(a,b,c,d,e){var f=$APP.Ro.C?$APP.Ro.C(b):$APP.Ro.call(null,b);c=$APP.jf([$APP.DK($APP.Cw),$APP.sVa,$APP.DK($APP.Ew),new $APP.m(null,6,[$APP.Ek,$APP.pa(c,"id"),$APP.Xn,$APP.pa(c,"name"),$APP.sB,lNd($APP.pa(c,"bindings")),$APP.VZc,$APP.pa(c,"nonce"),$APP.y5b,lNd(d),$APP.r5b,e],null)]);d=$APP.Wo.I?$APP.Wo.I():$APP.Wo.call(null);a=$APP.cw.C(a);a=$APP.n(a)?a:$APP.Wo.I?$APP.Wo.I():$APP.Wo.call(null);return new $APP.m(null,6,[$APP.Mw,b,$APP.Kw,f,$APP.Yw,"whiteboard",$APP.ox,c,$APP.bw,
d,$APP.cw,a],null)},nNd=function(a,b,c,d,e,f){a=lNd(a.getCleanUpAssets());var g=b.shapes,h=$APP.mh.A(function(z){return $APP.pa(z,"id")},g),k=$APP.Ug(h,$APP.ij.C(g.length));g=$APP.Rg($APP.mh.A(function(z){z=$APP.mf(z);z=$APP.H.A(z,$APP.Ek);return $APP.T.F(lNd(b.getShapeById(z).serialized),$APP.Gs,$APP.H.A(k,z))},$APP.gs.A(c,d)));d=$APP.Rg($APP.mh.A($APP.Ek,d));var p=$APP.Rg($APP.mh.A($APP.Ek,c)),q=$APP.Rg($APP.zl.A($APP.Fj,$APP.gs.A(p,d)));c=$APP.Rg($APP.Qf.A(function(z){z=$APP.Ek.C(z);return q.C?
q.C(z):q.call(null,z)},g));var r=$APP.zl.A($APP.Fj,$APP.gs.A(d,p)),u=$APP.mG();d=$APP.y(r)?$APP.zl.A($APP.jb,$APP.hj.A(function(z){return $APP.CK(z,$APP.Bw)},function(){var z=new $APP.O(null,1,5,$APP.Q,[$APP.Yt],null),D=$APP.hj.A(function(F){return new $APP.O(null,2,5,$APP.Q,[$APP.Lw,$APP.Rh(F)],null)},r);return $APP.mI?$APP.mI(u,z,D):$APP.Bmb.call(null,u,z,D)}())):null;p=$APP.hj.A(function(z){return new $APP.O(null,2,5,$APP.Q,[$APP.uNa,new $APP.O(null,2,5,$APP.Q,[$APP.Lw,$APP.Rh(z)],null)],null)},
r);g=$APP.zl.A(function(z){var D=$APP.B,F=D.A,J=$APP.VZc.C;var I=new $APP.O(null,2,5,$APP.Q,[$APP.Lw,$APP.Lw.C(z)],null);I=$APP.rI.C?$APP.rI.C(I):$APP.rI.call(null,I);return F.call(D,J.call($APP.VZc,$APP.CK(I,$APP.Bw)),$APP.VZc.C($APP.CK(z,$APP.Bw)))},$APP.mh.A(function(z){var D=$APP.mG(),F=$APP.fI?$APP.fI(D):$APP.hI.call(null,D);return $APP.PMa(D,F,z,e)},g));var x=$APP.UI(e);a=mNd(x,e,b,a,h);return $APP.y(g)||$APP.y(p)||$APP.Lg.A($APP.ox.C(a),$APP.ox.C(x))?new $APP.m(null,6,[$APP.PSc,a,$APP.S6c,
$APP.mh.A($APP.dw,g),$APP.Kx,p,$APP.Lad,d,$APP.ICc,c,$APP.BSa,new $APP.m(null,2,[$APP.xXa,!0,$APP.OSa,f],null)],null):null},oNd=function(a,b,c){var d=$APP.Ec($APP.A(b.pages)),e=d.shapes,f=$APP.UI(a);f=$APP.CK(f,$APP.Ew);f=$APP.r5b.C(f);var g=$APP.Ug(f,$APP.ij.C($APP.xc(f)));e=$APP.Rg($APP.$l.A(function(r,u){var x=u.id;return new $APP.m(null,2,[$APP.Ek,x,$APP.VZc,$APP.B.A(r,$APP.H.A(g,x))?u.nonce:Date.now()],null)},e));var h=$APP.mG();f=function(){var r=$APP.wt.A($APP.v($APP.cwd),new $APP.O(null,2,
5,$APP.Q,[h,a],null));return $APP.n(r)?r:$APP.Rg($APP.mh.A(function(u){return $APP.Zr.F(u,$APP.Ek,$APP.t)},kNd(h,a)))}();b=nNd(b,d,e,f,a,c);d=$APP.mf(b);f=$APP.H.A(d,$APP.PSc);b=$APP.H.A(d,$APP.ICc);var k=$APP.H.A(d,$APP.Lad),p=$APP.H.A(d,$APP.S6c),q=$APP.H.A(d,$APP.Kx);c=$APP.H.A(d,$APP.BSa);if($APP.y(d)){d=$APP.lk.G(q,new $APP.O(null,1,5,$APP.Q,[f],null),$APP.G([p]));b=$APP.n($APP.vf(function(r){return $APP.B.A("group",$APP.Bl.C(r))},b))?$APP.T.F(c,$APP.mHc,$APP.iF):$APP.n(function(){var r=$APP.of(k);
return $APP.n(r)?$APP.uf(function(u){return $APP.B.A("group",$APP.Bl.C(u))},k):r}())?$APP.T.F(c,$APP.mHc,$APP.XTc):$APP.n($APP.vf(function(r){return $APP.B.A("line",$APP.Bl.C(r))&&$APP.B.A("arrow ",$APP.Mm.C($APP.LRc.C(r)))},b))?$APP.T.F(c,$APP.mHc,$APP.o3c):c;$APP.Bh.K($APP.cwd,$APP.Yr,new $APP.O(null,2,5,$APP.Q,[h,a],null),e);if($APP.Pd(new $APP.Ng(null,new $APP.m(null,1,[$APP.o3c,null],null),null),$APP.mHc.C(b)))return $APP.oG($APP.pid,new $APP.m(null,2,[$APP.ot,d,$APP.BSa,b],null));e=$APP.pid.C($APP.v($APP.kG));
c=$APP.lk.A($APP.ot.C(e),d);e=$APP.On.G($APP.G([b,$APP.BSa.C(e)]));$APP.oG($APP.pid,$APP.kf);return $APP.pI?$APP.pI(h,c,e):$APP.qI.call(null,h,c,e)}return null},pNd=function(a){return $APP.gl(null,function(){return $APP.gl(function(){var b=$APP.n(a)?$APP.ni(a):a;return $APP.n(b)?b:$APP.mu?$APP.mu():$APP.nu.call(null)}(),function(b){return $APP.gl($APP.n(a)?a:$APP.t.C(b),function(c){return $APP.gl($APP.mG(),function(d){return $APP.gl(function(){var e=$APP.jf([$APP.DK($APP.Cw),$APP.sVa,$APP.DK($APP.Ew),
new $APP.m(null,6,[$APP.Ek,$APP.t.C(b),$APP.Xn,c,$APP.Cw,$APP.sVa,$APP.sB,$APP.kf,$APP.VZc,1,$APP.y5b,$APP.Uf],null)]);e=new $APP.O(null,1,5,$APP.Q,[$APP.Ag([$APP.Lw,$APP.ox,$APP.hx,$APP.bw,$APP.cw,$APP.Jx,$APP.Yw,$APP.Kw,$APP.Mw],[b,e,!1,$APP.Wo.I?$APP.Wo.I():$APP.Wo.call(null),$APP.Wo.I?$APP.Wo.I():$APP.Wo.call(null),$APP.Yv,"whiteboard",$APP.Ro.C?$APP.Ro.C(c):$APP.Ro.call(null,c),c])],null);return $APP.nI?$APP.nI(e):$APP.qI.call(null,e)}(),function(){return $APP.Zk(function(){$APP.yG(new $APP.O(null,
2,5,$APP.Q,[d,$APP.jlb],null),function(e){return $APP.Fe.A($APP.Rg(e),$APP.Ro.C?$APP.Ro.C(c):$APP.Ro.call(null,c))});return c}())})})})})})},qNd=function(a,b){return $APP.gl(null,function(){return $APP.gl($APP.mG(),function(c){return $APP.gl($APP.lx.I?$APP.lx.I():$APP.lx.call(null),function(d){return $APP.gl($APP.UI(a),function(e){return $APP.gl($APP.dw(new $APP.m(null,5,[$APP.Lw,d,$APP.Nw,$APP.n(b)?b:"",$APP.Jx,$APP.Yv,$APP.ax,new $APP.m(null,2,[$APP.Kw,$APP.Ro.C?$APP.Ro.C(a):$APP.Ro.call(null,a),
$APP.Mw,a],null),$APP.bx,$APP.rt.C(e)],null)),function(f){return $APP.gl(function(){var g=new $APP.O(null,1,5,$APP.Q,[f],null),h=new $APP.m(null,1,[$APP.xXa,!0],null);return $APP.pI?$APP.pI(c,g,h):$APP.qI.call(null,c,g,h)}(),function(){return $APP.Zk(d)})})})})})})},rNd=function(){return $APP.gl(null,function(){return $APP.gl(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.gl(a.text(),function(b){return $APP.gl($APP.fE($APP.kf,b),function(c){return $APP.Zk(c)})})})})},sNd=function(a){var b=
$APP.ypb();return($APP.Zc(b)||$APP.B.A(1,$APP.xc(b))&&$APP.B.A(a,$APP.Kw.C($APP.A(b))))&&$APP.nb($APP.wt.A($APP.v($APP.kG),new $APP.O(null,1,5,$APP.Q,[$APP.Skb],null)))},tNd=function(a){var b=$APP.AH();$APP.n(b)&&$APP.yf.A(b.api.updateShapes,$APP.yi(a))},uNd=function(a){var b=$APP.AH();$APP.n(b)&&(b=$APP.Ec($APP.A(b.pages)),$APP.n(b)&&(a=new $APP.O(null,2,5,$APP.Q,[$APP.Kw,a],null),a=$APP.rI.C?$APP.rI.C(a):$APP.rI.call(null,a),$APP.n(a)&&(a=$APP.CK(a,$APP.Ew),a=$APP.r5b.C(a),$APP.y(a)&&b.updateShapesIndex($APP.yi(a)))))},
vNd=function(a){return null!=a?$APP.hl($APP.gl(null,function(){return $APP.gl(rNd(),function(b){var c=$APP.mf(b);b=$APP.H.A(c,$APP.fx);c=$APP.H.A(c,$APP.qy);var d=$APP.A(b);b=$APP.s5b(d,c);d=$APP.CK(d,$APP.Ew);c=$APP.y5b.C(d);d=$APP.sB.C(d);a.cloneShapesIntoCurrentPage($APP.xi(new $APP.m(null,3,[$APP.B5b,b,$APP.y5b,c,$APP.sB,d],null)));b=$APP.Ukb();return $APP.Zk(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},wNd=function(a){a.cleanup($APP.mh.A(function(b){return b.id},
a.shapes))},zNd=function(a,b){b=$APP.Po.G(b,$APP.G([new $APP.m(null,1,[$APP.Qo,!0],null)]));b=$APP.mf(b);var c=$APP.H.A(b,xNd),d=$APP.H.A(b,$APP.AK),e=$APP.H.A(b,yNd),f=$APP.mG();return $APP.gl(null,function(){return $APP.gl($APP.n(d)?$APP.DNb(f,a,new $APP.m(null,1,[$APP.Ft,100],null)):null,function(g){return $APP.gl($APP.mh.A(function(h){return $APP.Zr.F(h,$APP.Lw,$APP.t)},g),function(h){return $APP.gl($APP.n(c)?$APP.ENb(a):null,function(k){return $APP.gl($APP.n(e)?$APP.FNb(a,100):null,function(p){return $APP.Zk($APP.xi(new $APP.m(null,
3,[$APP.fx,k,$APP.qy,h,$APP.mA,p],null)))})})})})})},ANd=function(a){return $APP.fl($APP.YZb($APP.mG(),new $APP.O(null,1,5,$APP.Q,[$APP.Po.C(a)],null)),function(b){var c=(c=$APP.y(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.C.F(c,0,null),$APP.C.F(c,1,null),c=$APP.C.F(c,2,null),$APP.a_b($APP.n(c)?c:b)):null})},BNd=function(){return $APP.t2b(null)},CNd=function(){return $APP.u2b(null)},TNd=function(a){return $APP.Ag([DNd,ENd,FNd,GNd,HNd,INd,JNd,KNd,$APP.tC,LNd,MNd,NNd,ONd,$APP.dA,PNd,QNd,RNd,SNd],[function(b){if($APP.n($APP.Uo.C?
$APP.Uo.C(b):$APP.Uo.call(null,b)))var c=$APP.Kw.C($APP.lob($APP.mG(),$APP.ni(b)));else c=$APP.Kw.C,b=new $APP.O(null,2,5,$APP.Q,[$APP.Kw,$APP.Ro.C?$APP.Ro.C(b):$APP.Ro.call(null,b)],null),b=$APP.rI.C?$APP.rI.C(b):$APP.rI.call(null,b),c=c.call($APP.Kw,b);return c},function(b){return $APP.xi($APP.Vic(b))},function(b){return $APP.VI(b,!1)},function(b){return $APP.clb($APP.n(b)?$APP.Vic(b):null)},function(b){return pNd(b)},$APP.VF,function(b){return $APP.ZYb(b,new $APP.m(null,1,[$APP.eQ,!1],null))},
$APP.$I,zNd,ANd,$APP.$Zb,function(b,c){return $APP.ifb(b,$APP.G([$APP.Rz,c]))},function(b){return $APP.gl(null,function(){return $APP.gl(qNd(a,b),function(c){return $APP.Zk($APP.t.C(c))})})},function(b){return $APP.TK.G($APP.G([$APP.nh.C(b)]))},function(b,c){return $APP.vH(function(){return(0,$APP.tfc)(b,$APP.On.G($APP.G([$APP.Po.G(c,$APP.G([$APP.Qo,!0])),new $APP.m(null,1,[$APP.Gy,!0],null)])))})},function(b,c){return $APP.dH($APP.mG(),$APP.rt.C($APP.UI(b)),$APP.nh.C(c))},function(b){var c=$APP.n($APP.Uo.C?
$APP.Uo.C(b):$APP.Uo.call(null,b))?$APP.Kw.C($APP.lob($APP.mG(),$APP.ni(b))):null;c=$APP.n(c)?c:b;var d=$APP.RI(c),e=$APP.$I(c);return $APP.n(d)?$APP.n(e)?$APP.HOb(c,new $APP.m(null,1,[$APP.mO,b],null)):$APP.lO($APP.VI(b,!1)):null},function(b){return $APP.xi($APP.Knb(b))}])},VNd=function(a,b,c){return $APP.hl($APP.gl(null,function(){return $APP.gl($APP.v(UNd),function(){return $APP.gl($APP.gl(null,function(){return $APP.gl($APP.oG(new $APP.O(null,2,5,$APP.Q,[$APP.s$c,$APP.mG()],null),$APP.Wo.I?$APP.Wo.I():
$APP.Wo.call(null)),function(){return $APP.Zk(oNd(a,b,c.replace))})}),function(d){return $APP.Zk($APP.Df(UNd,d))})})}),function(d){console.error(d);return $APP.BD.C(new $APP.O(null,2,5,$APP.Q,[$APP.$B,["Save whiteboard failed, error:",$APP.t.C(d.cause)].join("")],null))})},SNd=new $APP.M(null,"queryBlockByUUID","queryBlockByUUID",2091812895),PNd=new $APP.M(null,"exportToImage","exportToImage",-154356643),ONd=new $APP.M(null,"addNewBlock","addNewBlock",1426762680),WNd=new $APP.M(null,"KeyboardShortcut",
"KeyboardShortcut",1250004264),yNd=new $APP.M(null,"files?","files?",-1267491104),DNd=new $APP.M(null,"getBlockPageName","getBlockPageName",-1656908032),XNd=new $APP.M(null,"renderers","renderers",-1460292282),YNd=new $APP.M(null,"model","model",331153215),FNd=new $APP.M(null,"getRedirectPageName","getRedirectPageName",-1858136925),INd=new $APP.M(null,"isMobile","isMobile",-2043133877),GNd=new $APP.M(null,"setCurrentPdf","setCurrentPdf",-63289336),ZNd=new $APP.M(null,"onMount","onMount",-876858467),
JNd=new $APP.M(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),MNd=new $APP.M(null,"makeAssetUrl","makeAssetUrl",217779988),$Nd=new $APP.M(null,"onPersist","onPersist",-1848738852),aOd=new $APP.M(null,"Breadcrumb","Breadcrumb",-1351298906),NNd=new $APP.M(null,"copyToClipboard","copyToClipboard",1092115063),RNd=new $APP.M(null,"redirectToPage","redirectToPage",87147838),HNd=new $APP.M(null,"addNewWhiteboard","addNewWhiteboard",554297706),LNd=new $APP.M(null,"saveAsset","saveAsset",
-668047853),bOd=new $APP.M(null,"BacklinksCount","BacklinksCount",364670631),cOd=new $APP.M(null,"Block","Block",-1959785792),QNd=new $APP.M(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),dOd=new $APP.M(null,"Page","Page",-1267059506),xNd=new $APP.M(null,"pages?","pages?",-2065014049),eOd=new $APP.M(null,"PageName","PageName",-164991013),fOd=new $APP.M(null,"Tweet","Tweet",-452258680),KNd=new $APP.M(null,"isWhiteboardPage","isWhiteboardPage",-134150579),gOd=new $APP.M(null,"BlockReference",
"BlockReference",-120254741),ENd=new $APP.M(null,"inflateAsset","inflateAsset",-1449040639);$APP.c5a("tldraw");var hOd=$APP.ll(606);var iOd,jOd,UNd,kOd,lOd;$APP.tDd={};iOd=$APP.GQ($APP.pa(hOd,"App"));$APP.wDd=$APP.pa(hOd,"generateJSXFromModel");
jOd=new $APP.m(null,8,[dOd,$APP.GE($APP.KE,function(a){return(0,$APP.szc)(new $APP.m(null,2,[$APP.iA,$APP.VI($APP.pa(a,"pageName"),!1),$APP.Gy,!0],null))},null,"frontend.extensions.tldraw/page-cp"),cOd,$APP.GE($APP.KE,function(a){a=$APP.Rh($APP.pa(a,"blockId"));var b=$APP.dkb($APP.xzc);a=b.C?b.C(a):b.call(null,a);return $APP.wE(a)},null,"frontend.extensions.tldraw/block-cp"),aOd,$APP.GE($APP.KE,function(a){return $APP.wE($APP.iT(new $APP.m(null,1,[$APP.mX,!0],null),$APP.mG(),$APP.Rh($APP.pa(a,"blockId")),
new $APP.m(null,2,[$APP.Cnc,$APP.pa(a,"endSeparator"),$APP.Dnc,$APP.pa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),fOd,$APP.GE($APP.KE,function(a){return(0,$APP.wmc)($APP.pa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),eOd,$APP.GE($APP.KE,function(a){return(0,$APP.VS)(new $APP.m(null,1,[$APP.mX,!0],null),new $APP.m(null,1,[$APP.Kw,$APP.pa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),bOd,function(a){return $APP.yf.A($APP.zDd,$APP.mh.A(function(b){return $APP.Po.G($APP.pa(a,
b),$APP.G([new $APP.m(null,1,[$APP.Qo,!0],null)]))},new $APP.O(null,3,5,$APP.Q,["id","className","options"],null)))},gOd,$APP.GE($APP.KE,function(a){return(0,$APP.Jlc)($APP.kf,$APP.pa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),WNd,$APP.GE($APP.KE,function(a){a=$APP.TQ($APP.nh.C($APP.pa(a,"action")));return"string"===typeof a?$APP.wE($APP.IT(a)):$APP.wE($APP.sn.A(" | ",$APP.mh.A($APP.IT,a)))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);UNd=$APP.xh.C(null);
kOd=$APP.GE($APP.KE,function(a,b,c,d,e){return $APP.Y("div",{style:{overscrollBehavior:"none"},onBlur:function(f){f=$APP.pa(f,"target").tagName;var g=new $APP.Ng(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);f=g.C?g.C(f):g.call(null,f);return $APP.n(f)?$APP.fH():null},onWheel:$APP.FF,className:"draw tldraw whiteboard relative w-full h-full"},[$APP.n($APP.n(c)?$APP.nb(d):c)?$APP.Y("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.wE($APP.YQ("Loading onboarding whiteboard ..."))]):
null,$APP.wE(function(){var f=new $APP.m(null,6,[XNd,jOd,$APP.AIa,TNd(a),ZNd,e,$APP.w8c,!0,$Nd,function(g,h){return VNd(a,g,h)},YNd,b],null);return iOd.C?iOd.C(f):iOd.call(null,f)}())])},new $APP.O(null,2,5,$APP.Q,[$APP.JE,new $APP.m(null,1,[$APP.mbb,function(a,b){var c=$APP.A($APP.IE.C(a)),d=$APP.C.A($APP.IE.C(a),1),e=$APP.C.A($APP.IE.C(b),1),f=function(){var g=function(){var h=$APP.pa(d,"pages");h=null==h?null:$APP.A(h);return null==h?null:$APP.pa(h,"shapes")}();return $APP.Ug($APP.mh.A(function(h){return $APP.pa(h,
"id")},g),g)}();a=function(){var g=$APP.pa(e,"pages");g=null==g?null:$APP.A(g);return null==g?null:$APP.pa(g,"shapes")}();a=$APP.Qf.A(function(g){var h=$APP.H.A(f,$APP.pa(g,"id"));return $APP.n(h)?$APP.Lg.A($APP.pa(g,"type"),$APP.pa(h,"type")):null},a);$APP.y(a)&&tNd(a);uNd(c);return b}],null)],null),"frontend.extensions.tldraw/tldraw-inner");
lOd=$APP.GE($APP.KE,function(a,b,c,d){function e(h){if($APP.n(h)){h.appUndo=BNd;h.appRedo=CNd;var k=$APP.pa(h,"api");return $APP.n(k)?$APP.fl(f?vNd(k):null,function(){wNd(h.currentPage);$APP.dlb(h,b);return d.C?d.C(h):d.call(null,h)}):null}return null}var f=sNd(a),g=$APP.C5b(a);return $APP.n(g)?kOd(a,g,f,c,e):null},new $APP.O(null,1,5,$APP.Q,[$APP.p8],null),"frontend.extensions.tldraw/tldraw-app-inner");
$APP.uDd=$APP.GE($APP.KE,function(a,b){var c=$APP.RE(null),d=$APP.C.F(c,0,null);c=$APP.C.F(c,1,null);$APP.SE(function(){$APP.n($APP.n(d)?b:d)&&$APP.dlb(d,b);return function(){return $APP.ec}},new $APP.O(null,2,5,$APP.Q,[b,d],null));return lOd(a,b,d,c)},null,"frontend.extensions.tldraw/tldraw-app");$APP.iz.ii();
}).call(this);