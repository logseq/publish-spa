(function(){
shadow$provide[585]=function(wa,W,Sa,E){function q(w,B,C){var a,H={},p=null,h=null;void 0!==C&&(p=""+C);void 0!==B.key&&(p=""+B.key);void 0!==B.ref&&(h=B.ref);for(a in B)r.call(B,a)&&!d.hasOwnProperty(a)&&(H[a]=B[a]);if(w&&w.defaultProps)for(a in B=w.defaultProps,B)void 0===H[a]&&(H[a]=B[a]);return{$$typeof:S,type:w,key:p,ref:h,props:H,_owner:A.current}}W(19);wa=W(22);var S=60103;E.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(W=Symbol.for,S=W("react.element"),E.Fragment=W("react.fragment"));
var A=wa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r=Object.prototype.hasOwnProperty,d={key:!0,ref:!0,__self:!0,__source:!0};E.jsx=q;E.jsxs=q};
shadow$provide[587]=function(wa,W,Sa,E){Sa.exports=W(585)};
shadow$provide[588]=function(wa,W,Sa,E){function q(qc){for(var Fd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+qc,xd=1;xd<arguments.length;xd++)Fd+="\x26args[]\x3d"+encodeURIComponent(arguments[xd]);return"Minified React error #"+qc+"; visit "+Fd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(qc){if(null==qc)return null;if("function"===typeof qc)return qc.displayName||qc.name||null;if("string"===typeof qc)return qc;
switch(qc){case M:return"Fragment";case aa:return"Portal";case D:return"Profiler";case Q:return"StrictMode";case X:return"Suspense";case F:return"SuspenseList"}if("object"===typeof qc)switch(qc.$$typeof){case P:return(qc.displayName||"Context")+".Consumer";case N:return(qc._context.displayName||"Context")+".Provider";case ba:var Fd=qc.render;Fd=Fd.displayName||Fd.name||"";return qc.displayName||(""!==Fd?"ForwardRef("+Fd+")":"ForwardRef");case ha:return S(qc.type);case Z:return S(qc._render);case K:Fd=
qc._payload;qc=qc._init;try{return S(qc(Fd))}catch(xd){}}return null}function A(qc,Fd){for(var xd=qc._threadCount|0;xd<=Fd;xd++)qc[xd]=qc._currentValue2,qc._threadCount=xd+1}function r(qc,Fd,xd,ae){if(ae&&(ae=qc.contextType,"object"===typeof ae&&null!==ae))return A(ae,xd),ae[xd];if(qc=qc.contextTypes){xd={};for(var wd in qc)xd[wd]=Fd[wd];Fd=xd}else Fd=ya;return Fd}function d(qc){if(Ea.call(Ya,qc))return!0;if(Ea.call(Oa,qc))return!1;if(Ua.test(qc))return Ya[qc]=!0;Oa[qc]=!0;return!1}function w(qc,
Fd,xd,ae){if(null!==xd&&0===xd.type)return!1;switch(typeof Fd){case "function":case "symbol":return!0;case "boolean":if(ae)return!1;if(null!==xd)return!xd.acceptsBooleans;qc=qc.toLowerCase().slice(0,5);return"data-"!==qc&&"aria-"!==qc;default:return!1}}function B(qc,Fd,xd,ae){if(null===Fd||"undefined"===typeof Fd||w(qc,Fd,xd,ae))return!0;if(ae)return!1;if(null!==xd)switch(xd.type){case 3:return!Fd;case 4:return!1===Fd;case 5:return isNaN(Fd);case 6:return isNaN(Fd)||1>Fd}return!1}function C(qc,Fd,
xd,ae,wd,Qd,qd){this.acceptsBooleans=2===Fd||3===Fd||4===Fd;this.attributeName=ae;this.attributeNamespace=wd;this.mustUseProperty=xd;this.propertyName=qc;this.type=Fd;this.sanitizeURL=Qd;this.removeEmptyString=qd}function a(qc){return qc[1].toUpperCase()}function H(qc){if("boolean"===typeof qc||"number"===typeof qc)return""+qc;qc=""+qc;var Fd=eb.exec(qc);if(Fd){var xd="",ae,wd=0;for(ae=Fd.index;ae<qc.length;ae++){switch(qc.charCodeAt(ae)){case 34:Fd="\x26quot;";break;case 38:Fd="\x26amp;";break;case 39:Fd=
"\x26#x27;";break;case 60:Fd="\x26lt;";break;case 62:Fd="\x26gt;";break;default:continue}wd!==ae&&(xd+=qc.substring(wd,ae));wd=ae+1;xd+=Fd}qc=wd!==ae?xd+qc.substring(wd,ae):xd}return qc}function p(qc,Fd){var xd=Ma.hasOwnProperty(qc)?Ma[qc]:null,ae;if(ae="style"!==qc)ae=null!==xd?0===xd.type:!(2<qc.length)||"o"!==qc[0]&&"O"!==qc[0]||"n"!==qc[1]&&"N"!==qc[1]?!1:!0;if(ae||B(qc,Fd,xd,!1))return"";if(null!==xd){qc=xd.attributeName;ae=xd.type;if(3===ae||4===ae&&!0===Fd)return qc+'\x3d""';xd.sanitizeURL&&
(Fd=""+Fd);return qc+'\x3d"'+(H(Fd)+'"')}return d(qc)?qc+'\x3d"'+(H(Fd)+'"'):""}function h(qc,Fd){return qc===Fd&&(0!==qc||1/qc===1/Fd)||qc!==qc&&Fd!==Fd}function k(){if(null===oa)throw Error(q(321));return oa}function f(){if(0<Ab)throw Error(q(312));return{memoizedState:null,queue:null,next:null}}function v(){null===sa?null===Ca?(Aa=!1,Ca=sa=f()):(Aa=!0,sa=Ca):null===sa.next?(Aa=!1,sa=sa.next=f()):(Aa=!0,sa=sa.next);return sa}function x(qc,Fd,xd,ae){for(;Ja;)Ja=!1,Ab+=1,sa=null,xd=qc(Fd,ae);J();
return xd}function J(){oa=null;Ja=!1;Ca=null;Ab=0;sa=Ra=null}function z(qc,Fd){return"function"===typeof Fd?Fd(qc):Fd}function u(qc,Fd,xd){oa=k();sa=v();if(Aa){var ae=sa.queue;Fd=ae.dispatch;if(null!==Ra&&(xd=Ra.get(ae),void 0!==xd)){Ra.delete(ae);ae=sa.memoizedState;do ae=qc(ae,xd.action),xd=xd.next;while(null!==xd);sa.memoizedState=ae;return[ae,Fd]}return[sa.memoizedState,Fd]}qc=qc===z?"function"===typeof Fd?Fd():Fd:void 0!==xd?xd(Fd):Fd;sa.memoizedState=qc;qc=sa.queue={last:null,dispatch:null};
qc=qc.dispatch=n.bind(null,oa,qc);return[sa.memoizedState,qc]}function t(qc,Fd){oa=k();sa=v();Fd=void 0===Fd?null:Fd;if(null!==sa){var xd=sa.memoizedState;if(null!==xd&&null!==Fd){var ae=xd[1];a:if(null===ae)ae=!1;else{for(var wd=0;wd<ae.length&&wd<Fd.length;wd++)if(!Na(Fd[wd],ae[wd])){ae=!1;break a}ae=!0}if(ae)return xd[0]}}qc=qc();sa.memoizedState=[qc,Fd];return qc}function n(qc,Fd,xd){if(!(25>Ab))throw Error(q(301));if(qc===oa)if(Ja=!0,qc={action:xd,next:null},null===Ra&&(Ra=new Map),xd=Ra.get(Fd),
void 0===xd)Ra.set(Fd,qc);else{for(Fd=xd;null!==Fd.next;)Fd=Fd.next;Fd.next=qc}}function R(){}function ja(qc){switch(qc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L(qc){if(void 0===qc||null===qc)return qc;var Fd="";I.Children.forEach(qc,function(xd){null!=xd&&(Fd+=xd)});return Fd}function ma(qc,Fd){if(void 0===qc)throw Error(q(152,S(Fd)||"Component"));}function Y(qc,Fd,xd){function ae(qd,
Td){var Nb=Td.prototype&&Td.prototype.isReactComponent,fc=r(Td,Fd,xd,Nb),Xb=[],rb=!1,nb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Xb)return null},enqueueReplaceState:function(se,vd){rb=!0;Xb=[vd]},enqueueSetState:function(se,vd){if(null===Xb)return null;Xb.push(vd)}};if(Nb){if(Nb=new Td(qd.props,fc,nb),"function"===typeof Td.getDerivedStateFromProps){var bc=Td.getDerivedStateFromProps.call(null,qd.props,Nb.state);null!=bc&&(Nb.state=fa({},Nb.state,bc))}}else if(oa={},
Nb=Td(qd.props,fc,nb),Nb=x(Td,qd.props,Nb,fc),null==Nb||null==Nb.render){qc=Nb;ma(qc,Td);return}Nb.props=qd.props;Nb.context=fc;Nb.updater=nb;nb=Nb.state;void 0===nb&&(Nb.state=nb=null);if("function"===typeof Nb.UNSAFE_componentWillMount||"function"===typeof Nb.componentWillMount)if("function"===typeof Nb.componentWillMount&&"function"!==typeof Td.getDerivedStateFromProps&&Nb.componentWillMount(),"function"===typeof Nb.UNSAFE_componentWillMount&&"function"!==typeof Td.getDerivedStateFromProps&&Nb.UNSAFE_componentWillMount(),
Xb.length){nb=Xb;var vc=rb;Xb=null;rb=!1;if(vc&&1===nb.length)Nb.state=nb[0];else{bc=vc?nb[0]:Nb.state;var Vc=!0;for(vc=vc?1:0;vc<nb.length;vc++){var ed=nb[vc];ed="function"===typeof ed?ed.call(Nb,bc,qd.props,fc):ed;null!=ed&&(Vc?(Vc=!1,bc=fa({},bc,ed)):fa(bc,ed))}Nb.state=bc}}else Xb=null;qc=Nb.render();ma(qc,Td);if("function"===typeof Nb.getChildContext&&(qd=Td.childContextTypes,"object"===typeof qd)){var Od=Nb.getChildContext(),de;for(de in Od)if(!(de in qd))throw Error(q(108,S(Td)||"Unknown",
de));}Od&&(Fd=fa({},Fd,Od))}for(;I.isValidElement(qc);){var wd=qc,Qd=wd.type;if("function"!==typeof Qd)break;ae(wd,Qd)}return{child:qc,context:Fd}}var fa=W(19),I=W(22),aa=60106,M=60107,Q=60108,D=60114,N=60109,P=60110,ba=60112,X=60113,F=60120,ha=60115,K=60116,Z=60121,ea=60117,da=60119,pa=60129,za=60131;"function"===typeof Symbol&&Symbol.for&&(wa=Symbol.for,aa=wa("react.portal"),M=wa("react.fragment"),Q=wa("react.strict_mode"),D=wa("react.profiler"),N=wa("react.provider"),P=wa("react.context"),ba=wa("react.forward_ref"),
X=wa("react.suspense"),F=wa("react.suspense_list"),ha=wa("react.memo"),K=wa("react.lazy"),Z=wa("react.block"),ea=wa("react.fundamental"),da=wa("react.scope"),pa=wa("react.debug_trace_mode"),za=wa("react.legacy_hidden"));wa=I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var ya={},Ga=new Uint16Array(16);for(W=0;15>W;W++)Ga[W]=W+1;Ga[15]=0;var Ua=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ea=Object.prototype.hasOwnProperty,Oa={},Ya={},Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(qc){Ma[qc]=new C(qc,0,!1,qc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(qc){var Fd=qc[0];Ma[Fd]=new C(Fd,1,!1,qc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(qc){Ma[qc]=
new C(qc,2,!1,qc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(qc){Ma[qc]=new C(qc,2,!1,qc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(qc){Ma[qc]=new C(qc,3,!1,qc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(qc){Ma[qc]=new C(qc,3,!0,qc,null,!1,!1)});["capture","download"].forEach(function(qc){Ma[qc]=new C(qc,4,!1,qc,null,!1,!1)});["cols","rows","size","span"].forEach(function(qc){Ma[qc]=new C(qc,6,!1,qc,null,!1,!1)});["rowSpan","start"].forEach(function(qc){Ma[qc]=new C(qc,5,!1,qc.toLowerCase(),null,!1,!1)});var fb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(qc){var Fd=
qc.replace(fb,a);Ma[Fd]=new C(Fd,1,!1,qc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(qc){var Fd=qc.replace(fb,a);Ma[Fd]=new C(Fd,1,!1,qc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(qc){var Fd=qc.replace(fb,a);Ma[Fd]=new C(Fd,1,!1,qc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(qc){Ma[qc]=new C(qc,1,!1,qc.toLowerCase(),null,!1,!1)});
Ma.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(qc){Ma[qc]=new C(qc,1,!1,qc.toLowerCase(),null,!0,!0)});var eb=/["'&<>]/,Na="function"===typeof Object.is?Object.is:h,oa=null,Ca=null,sa=null,Aa=!1,Ja=!1,Ra=null,Ab=0,jb=null,Ob={readContext:function(qc){var Fd=jb.threadID;A(qc,Fd);return qc[Fd]},useContext:function(qc){k();var Fd=jb.threadID;A(qc,Fd);return qc[Fd]},useMemo:t,useReducer:u,useRef:function(qc){oa=
k();sa=v();var Fd=sa.memoizedState;return null===Fd?(qc={current:qc},sa.memoizedState=qc):Fd},useState:function(qc){return u(z,qc)},useLayoutEffect:function(){},useCallback:function(qc,Fd){return t(function(){return qc},Fd)},useImperativeHandle:R,useEffect:R,useDebugValue:R,useDeferredValue:function(qc){k();return qc},useTransition:function(){k();return[function(qc){qc()},!1]},useOpaqueIdentifier:function(){return(jb.identifierPrefix||"")+"R:"+(jb.uniqueID++).toString(36)},useMutableSource:function(qc,
Fd){k();return Fd(qc._source)}},Wb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},hc=fa({menuitem:!0},Wb),Pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ob=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(qc){ob.forEach(function(Fd){Fd=Fd+qc.charAt(0).toUpperCase()+qc.substring(1);Pa[Fd]=Pa[qc]})});var qb=/([A-Z])/g,Yb=/^ms-/,Kc=I.Children.toArray,
cd=wa.ReactCurrentDispatcher,Qc={listing:!0,pre:!0,textarea:!0},Fb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,yc={},Yc={},kd=Object.prototype.hasOwnProperty,Md={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Kd=function(){function qc(xd,ae,wd){I.isValidElement(xd)?xd.type!==M?xd=[xd]:(xd=xd.props.children,xd=I.isValidElement(xd)?[xd]:Kc(xd)):xd=Kc(xd);xd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:xd,childIndex:0,context:ya,footer:""};
var Qd=Ga[0];if(0===Qd){var qd=Ga;Qd=qd.length;var Td=2*Qd;if(!(65536>=Td))throw Error(q(304));var Nb=new Uint16Array(Td);Nb.set(qd);Ga=Nb;Ga[0]=Qd+1;for(qd=Qd;qd<Td-1;qd++)Ga[qd]=qd+1;Ga[Td-1]=0}else Ga[0]=Ga[Qd];this.threadID=Qd;this.stack=[xd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=ae;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=wd&&wd.identifierPrefix||""}
var Fd=qc.prototype;Fd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var xd=this.threadID;Ga[xd]=Ga[0];Ga[0]=xd}};Fd.pushProvider=function(xd){var ae=++this.contextIndex,wd=xd.type._context,Qd=this.threadID;A(wd,Qd);var qd=wd[Qd];this.contextStack[ae]=wd;this.contextValueStack[ae]=qd;wd[Qd]=xd.props.value};Fd.popProvider=function(){var xd=this.contextIndex,ae=this.contextStack[xd],wd=this.contextValueStack[xd];this.contextStack[xd]=null;this.contextValueStack[xd]=
null;this.contextIndex--;ae[this.threadID]=wd};Fd.clearProviders=function(){for(var xd=this.contextIndex;0<=xd;xd--)this.contextStack[xd][this.threadID]=this.contextValueStack[xd]};Fd.read=function(xd){if(this.exhausted)return null;var ae=jb;jb=this;var wd=cd.current;cd.current=Ob;try{for(var Qd=[""],qd=!1;Qd[0].length<xd;){if(0===this.stack.length){this.exhausted=!0;var Td=this.threadID;Ga[Td]=Ga[0];Ga[0]=Td;break}var Nb=this.stack[this.stack.length-1];if(qd||Nb.childIndex>=Nb.children.length){var fc=
Nb.footer;""!==fc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Nb.type)this.currentSelectValue=null;else if(null!=Nb.type&&null!=Nb.type.type&&Nb.type.type.$$typeof===N)this.popProvider(Nb.type);else if(Nb.type===X){this.suspenseDepth--;var Xb=Qd.pop();if(qd){qd=!1;var rb=Nb.fallbackFrame;if(!rb)throw Error(q(303));this.stack.push(rb);Qd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Qd[this.suspenseDepth]+=Xb}Qd[this.suspenseDepth]+=fc}else{var nb=Nb.children[Nb.childIndex++],
bc="";try{bc+=this.render(nb,Nb.context,Nb.domNamespace)}catch(vc){if(null!=vc&&"function"===typeof vc.then)throw Error(q(294));throw vc;}finally{}Qd.length<=this.suspenseDepth&&Qd.push("");Qd[this.suspenseDepth]+=bc}}return Qd[0]}finally{cd.current=wd,jb=ae,J()}};Fd.render=function(xd,ae,wd){if("string"===typeof xd||"number"===typeof xd){wd=""+xd;if(""===wd)return"";if(this.makeStaticMarkup)return H(wd);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+H(wd);this.previousWasTextNode=!0;return H(wd)}ae=
Y(xd,ae,this.threadID);xd=ae.child;ae=ae.context;if(null===xd||!1===xd)return"";if(!I.isValidElement(xd)){if(null!=xd&&null!=xd.$$typeof){wd=xd.$$typeof;if(wd===aa)throw Error(q(257));throw Error(q(258,wd.toString()));}xd=Kc(xd);this.stack.push({type:null,domNamespace:wd,children:xd,childIndex:0,context:ae,footer:""});return""}var Qd=xd.type;if("string"===typeof Qd)return this.renderDOM(xd,ae,wd);switch(Qd){case za:case pa:case Q:case D:case F:case M:return xd=Kc(xd.props.children),this.stack.push({type:null,
domNamespace:wd,children:xd,childIndex:0,context:ae,footer:""}),"";case X:throw Error(q(294));case da:throw Error(q(343));}if("object"===typeof Qd&&null!==Qd)switch(Qd.$$typeof){case ba:oa={};var qd=Qd.render(xd.props,xd.ref);qd=x(Qd.render,xd.props,qd,xd.ref);qd=Kc(qd);this.stack.push({type:null,domNamespace:wd,children:qd,childIndex:0,context:ae,footer:""});return"";case ha:return xd=[I.createElement(Qd.type,fa({ref:xd.ref},xd.props))],this.stack.push({type:null,domNamespace:wd,children:xd,childIndex:0,
context:ae,footer:""}),"";case N:return Qd=Kc(xd.props.children),wd={type:xd,domNamespace:wd,children:Qd,childIndex:0,context:ae,footer:""},this.pushProvider(xd),this.stack.push(wd),"";case P:Qd=xd.type;qd=xd.props;var Td=this.threadID;A(Qd,Td);Qd=Kc(qd.children(Qd[Td]));this.stack.push({type:xd,domNamespace:wd,children:Qd,childIndex:0,context:ae,footer:""});return"";case ea:throw Error(q(338));case K:return Qd=xd.type,qd=Qd._init,Qd=qd(Qd._payload),xd=[I.createElement(Qd,fa({ref:xd.ref},xd.props))],
this.stack.push({type:null,domNamespace:wd,children:xd,childIndex:0,context:ae,footer:""}),""}throw Error(q(130,null==Qd?Qd:typeof Qd,""));};Fd.renderDOM=function(xd,ae,wd){var Qd=xd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===wd&&ja(Qd);if(!yc.hasOwnProperty(Qd)){if(!Fb.test(Qd))throw Error(q(65,Qd));yc[Qd]=!0}var qd=xd.props;if("input"===Qd)qd=fa({type:void 0},qd,{defaultChecked:void 0,defaultValue:void 0,value:null!=qd.value?qd.value:qd.defaultValue,checked:null!=qd.checked?qd.checked:
qd.defaultChecked});else if("textarea"===Qd){var Td=qd.value;if(null==Td){Td=qd.defaultValue;var Nb=qd.children;if(null!=Nb){if(null!=Td)throw Error(q(92));if(Array.isArray(Nb)){if(!(1>=Nb.length))throw Error(q(93));Nb=Nb[0]}Td=""+Nb}null==Td&&(Td="")}qd=fa({},qd,{value:void 0,children:""+Td})}else if("select"===Qd)this.currentSelectValue=null!=qd.value?qd.value:qd.defaultValue,qd=fa({},qd,{value:void 0});else if("option"===Qd){Nb=this.currentSelectValue;var fc=L(qd.children);if(null!=Nb){var Xb=
null!=qd.value?qd.value+"":fc;Td=!1;if(Array.isArray(Nb))for(var rb=0;rb<Nb.length;rb++){if(""+Nb[rb]===Xb){Td=!0;break}}else Td=""+Nb===Xb;qd=fa({selected:void 0,children:void 0},qd,{selected:Td,children:fc})}}if(Td=qd){if(hc[Qd]&&(null!=Td.children||null!=Td.dangerouslySetInnerHTML))throw Error(q(137,Qd));if(null!=Td.dangerouslySetInnerHTML){if(null!=Td.children)throw Error(q(60));if(!("object"===typeof Td.dangerouslySetInnerHTML&&"__html"in Td.dangerouslySetInnerHTML))throw Error(q(61));}if(null!=
Td.style&&"object"!==typeof Td.style)throw Error(q(62));}Td=qd;Nb=this.makeStaticMarkup;fc=1===this.stack.length;Xb="\x3c"+xd.type;a:if(-1===Qd.indexOf("-"))rb="string"===typeof Td.is;else switch(Qd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":rb=!1;break a;default:rb=!0}for(vd in Td)if(kd.call(Td,vd)){var nb=Td[vd];if(null!=nb){if("style"===vd){var bc=void 0,vc="",Vc="";for(bc in nb)if(nb.hasOwnProperty(bc)){var ed=
0===bc.indexOf("--"),Od=nb[bc];if(null!=Od){if(ed)var de=bc;else if(de=bc,Yc.hasOwnProperty(de))de=Yc[de];else{var se=de.replace(qb,"-$1").toLowerCase().replace(Yb,"-ms-");de=Yc[de]=se}vc+=Vc+de+":";Vc=bc;ed=null==Od||"boolean"===typeof Od||""===Od?"":ed||"number"!==typeof Od||0===Od||Pa.hasOwnProperty(Vc)&&Pa[Vc]?(""+Od).trim():Od+"px";vc+=ed;Vc=";"}}nb=vc||null}bc=null;rb?Md.hasOwnProperty(vd)||(bc=vd,bc=d(bc)&&null!=nb?bc+'\x3d"'+(H(nb)+'"'):""):bc=p(vd,nb);bc&&(Xb+=" "+bc)}}Nb||fc&&(Xb+=' data-reactroot\x3d""');
var vd=Xb;Td="";Wb.hasOwnProperty(Qd)?vd+="/\x3e":(vd+="\x3e",Td="\x3c/"+xd.type+"\x3e");a:{Nb=qd.dangerouslySetInnerHTML;if(null!=Nb){if(null!=Nb.__html){Nb=Nb.__html;break a}}else if(Nb=qd.children,"string"===typeof Nb||"number"===typeof Nb){Nb=H(Nb);break a}Nb=null}null!=Nb?(qd=[],Qc.hasOwnProperty(Qd)&&"\n"===Nb.charAt(0)&&(vd+="\n"),vd+=Nb):qd=Kc(qd.children);xd=xd.type;wd=null==wd||"http://www.w3.org/1999/xhtml"===wd?ja(xd):"http://www.w3.org/2000/svg"===wd&&"foreignObject"===xd?"http://www.w3.org/1999/xhtml":
wd;this.stack.push({domNamespace:wd,type:Qd,children:qd,childIndex:0,context:ae,footer:Td});this.previousWasTextNode=!1;return vd};return qc}();E.renderToNodeStream=function(){throw Error(q(207));};E.renderToStaticMarkup=function(qc,Fd){qc=new Kd(qc,!0,Fd);try{return qc.read(Infinity)}finally{qc.destroy()}};E.renderToStaticNodeStream=function(){throw Error(q(208));};E.renderToString=function(qc,Fd){qc=new Kd(qc,!1,Fd);try{return qc.read(Infinity)}finally{qc.destroy()}};E.version="17.0.2"};
shadow$provide[590]=function(wa,W,Sa,E){Sa.exports=W(588)};
shadow$provide[591]=function(wa,W,Sa,E){function q(){if(!Zo&&(Zo="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zo))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zo(Hp)}function S(b,g=0){return(Bg[b[g+0]]+Bg[b[g+1]]+Bg[b[g+2]]+Bg[b[g+3]]+"-"+Bg[b[g+4]]+Bg[b[g+5]]+"-"+Bg[b[g+6]]+Bg[b[g+7]]+"-"+Bg[b[g+8]]+Bg[b[g+9]]+"-"+Bg[b[g+10]]+Bg[b[g+11]]+Bg[b[g+12]]+Bg[b[g+13]]+Bg[b[g+14]]+
Bg[b[g+15]]).toLowerCase()}function A(b){let g=0;var m=0;for(var G of b)g+=G.w*G.h,m=Math.max(m,G.w);b.sort((qa,Ia)=>Ia.h-qa.h);m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),m),h:Infinity}];let V=G=0;for(const qa of b)for(b=m.length-1;0<=b;b--){var ka=m[b];if(!(qa.w>ka.w||qa.h>ka.h)){qa.x=ka.x;qa.y=ka.y;V=Math.max(V,qa.y+qa.h);G=Math.max(G,qa.x+qa.w);qa.w===ka.w&&qa.h===ka.h?(ka=m.pop(),b<m.length&&(m[b]=ka)):qa.h===ka.h?(ka.x+=qa.w,ka.w-=qa.w):(qa.w!==ka.w&&m.push({x:ka.x+qa.w,y:ka.y,w:ka.w-
qa.w,h:qa.h}),ka.y+=qa.h,ka.h-=qa.h);break}}return{w:G,h:V,fill:g/(G*V)||0}}function r(b,...g){return{didIntersect:0<g.length,message:b,points:g}}function d(b,g,m=0){const G=[b[0]+g[0]/2,b[1]+g[1]/2],V=Jd.rotWith(b,G,m),ka=Jd.rotWith(Jd.add(b,[g[0],0]),G,m),qa=Jd.rotWith(Jd.add(b,g),G,m);b=Jd.rotWith(Jd.add(b,[0,g[1]]),G,m);return[["top",[V,ka]],["right",[ka,qa]],["bottom",[qa,b]],["left",[b,V]]]}function w(b,g,m,G){const [V,ka]=b,[qa,Ia]=g,[Ta,Xa]=m,[ib,vb]=G;return Ia/qa!==(vb-Xa)/(ib-Ta)&&(g=qa*
(vb-Xa)-Ia*(ib-Ta),0!==g&&(b=((ka-Xa)*(ib-Ta)-(V-Ta)*(vb-Xa))/g,g=((ka-Xa)*qa-(V-Ta)*Ia)/g,0<=b&&0<=g&&1>=g))?r("intersection",[V+b*qa,ka+b*Ia]):r("no intersection")}function B(b,g,m,G,V=0){return k(m,G,V,b,g)}function C(b,g,m,G=0){const {minX:V,minY:ka,width:qa,height:Ia}=m;return B(b,g,[V,ka],[qa,Ia],G)}function a(b,g,m,G){var V=Jd.sub(b,m);m=Jd.sub(G,m);g=Jd.sub(g,b);G=m[0]*V[1]-m[1]*V[0];V=g[0]*V[1]-g[1]*V[0];m=m[1]*g[0]-m[0]*g[1];return 0===G||0===V?r("coincident"):0===m?r("parallel"):0!==m&&
(G/=m,V/=m,0<=G&&1>=G&&0<=V&&1>=V)?r("intersection",Jd.add(b,Jd.mul(g,G))):r("no intersection")}function H(b,g,m,G){var V=(g[0]-b[0])*(g[0]-b[0])+(g[1]-b[1])*(g[1]-b[1]),ka=2*((g[0]-b[0])*(b[0]-m[0])+(g[1]-b[1])*(b[1]-m[1]));m=ka*ka-4*V*(m[0]*m[0]+m[1]*m[1]+b[0]*b[0]+b[1]*b[1]-2*(m[0]*b[0]+m[1]*b[1])-G*G);if(0>m)return r("outside");if(0===m)return r("tangent");G=Math.sqrt(m);m=(-ka+G)/(2*V);V=(-ka-G)/(2*V);if((0>m||1<m)&&(0>V||1<V))return 0>m&&0>V||1<m&&1<V?r("outside"):r("inside");ka=[];0<=m&&1>=
m&&ka.push(Jd.lrp(b,g,m));0<=V&&1>=V&&ka.push(Jd.lrp(b,g,V));return r("intersection",...ka)}function p(b,g,m,G,V,ka=0){if(0===G||0===V||Jd.isEqual(b,g))return r("no intersection");G=0>G?G:-G;V=0>V?V:-V;b=Jd.sub(Jd.rotWith(b,m,-ka),m);g=Jd.sub(Jd.rotWith(g,m,-ka),m);var qa=Jd.sub(g,b),Ia=qa[0]*qa[0]/G/G+qa[1]*qa[1]/V/V;qa=2*b[0]*qa[0]/G/G+2*b[1]*qa[1]/V/V;const Ta=[];G=qa*qa-4*Ia*(b[0]*b[0]/G/G+b[1]*b[1]/V/V-1);0===G?Ta.push(-qa/2/Ia):0<G&&(G=Math.sqrt(G),Ta.push((-qa+G)/2/Ia),Ta.push((-qa-G)/2/Ia));
Ia=Ta.filter(Xa=>0<=Xa&&1>=Xa).map(Xa=>Jd.add(m,Jd.add(b,Jd.mul(Jd.sub(g,b),Xa)))).map(Xa=>Jd.rotWith(Xa,m,ka));return r("intersection",...Ia)}function h(b,g,m){const G=[];for(let V=1;V<m.length;V++){const ka=a(b,g,m[V-1],m[V]);ka&&G.push(...ka.points)}return 0===G.length?r("no intersection"):r("intersection",...m)}function k(b,g,m,G,V){return d(b,g,m).reduce((ka,[qa,[Ia,Ta]])=>{(Ia=w(G,V,Ia,Ta))&&ka.push(r(qa,...Ia.points));return ka},[]).filter(ka=>ka.didIntersect)}function f(b,g,m,G){return d(b,
g).reduce((V,[ka,[qa,Ia]])=>{(qa=a(m,G,qa,Ia))&&V.push(r(ka,...qa.points));return V},[]).filter(V=>V.didIntersect)}function v(b,g,m,G){return d(b,g).reduce((V,[ka,[qa,Ia]])=>{(qa=H(qa,Ia,m,G))&&V.push(Jc(oc({},qa),{message:ka}));return V},[]).filter(V=>V.didIntersect)}function x(b,g,m,G,V,ka=0){return d(b,g).reduce((qa,[Ia,[Ta,Xa]])=>{(Ta=p(Ta,Xa,m,G,V,ka))&&qa.push(Jc(oc({},Ta),{message:Ia}));return qa},[]).filter(qa=>qa.didIntersect)}function J(b,g,m){return d(b,g).reduce((G,[V,[ka,qa]])=>{ka=h(ka,
qa,m);ka.didIntersect&&G.push(r(V,...ka.points));return G},[]).filter(G=>G.didIntersect)}function z(b,g,m){return d(b,g).reduce((G,[V,[ka,qa]])=>{{const Ia=[];for(let Ta=1;Ta<m.length+1;Ta++){const Xa=a(ka,qa,m[Ta-1],m[Ta%m.length]);Xa&&Ia.push(...Xa.points)}ka=0===Ia.length?r("no intersection"):r("intersection",...m)}ka.didIntersect&&G.push(r(V,...ka.points));return G},[]).filter(G=>G.didIntersect)}function u(b,g,m,G=0,V,ka){return g===m?v(V,ka,b,g):x(V,ka,b,g,m,G)}function t(b,g,m){const {minX:G,
minY:V,width:ka,height:qa}=b;return f([G,V],[ka,qa],g,m)}function n(b){for(var g=arguments.length,m=Array(1<g?g-1:0),G=1;G<g;G++)m[G-1]=arguments[G];throw Error("number"===typeof b?"[MobX] minified error nr: "+b+(m.length?" "+m.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+b);}function R(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof wa?wa:"undefined"!==
typeof self?self:ys}function ja(){Aq||n("Proxy not available")}function L(b){var g=!1;return function(){if(!g)return g=!0,b.apply(this,arguments)}}function ma(b){return"function"===typeof b}function Y(b){switch(typeof b){case "string":case "symbol":case "number":return!0}return!1}function fa(b){return null!==b&&"object"===typeof b}function I(b){if(!fa(b))return!1;b=Object.getPrototypeOf(b);if(null==b)return!0;b=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;return"function"===typeof b&&
b.toString()===nr}function aa(b){return(b=null==b?void 0:b.constructor)?"GeneratorFunction"===b.name||"GeneratorFunction"===b.displayName?!0:!1:!1}function M(b,g,m){Pn(b,g,{enumerable:!1,writable:!0,configurable:!0,value:m})}function Q(b,g,m){Pn(b,g,{enumerable:!1,writable:!1,configurable:!0,value:m})}function D(b,g){var m="isMobX"+b;g.prototype[m]=!0;return function(G){return fa(G)&&!0===G[m]}}function N(b){return b instanceof Map}function P(b){return b instanceof Set}function ba(b){var g=Object.keys(b);
if(!It)return g;var m=Object.getOwnPropertySymbols(b);return m.length?[].concat(g,m.filter(function(G){return Vo.propertyIsEnumerable.call(b,G)})):g}function X(b){return null===b?null:"object"===typeof b?""+b:b}function F(b,g){return Vo.hasOwnProperty.call(b,g)}function ha(b,g){for(var m=0;m<g.length;m++){var G=g[m];G.enumerable=G.enumerable||!1;G.configurable=!0;"value"in G&&(G.writable=!0);Object.defineProperty(b,G.key,G)}}function K(b,g,m){g&&ha(b.prototype,g);m&&ha(b,m);Object.defineProperty(b,
"prototype",{writable:!1});return b}function Z(){Z=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],G;for(G in m)Object.prototype.hasOwnProperty.call(m,G)&&(b[G]=m[G])}return b};return Z.apply(this,arguments)}function ea(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;da(b,g)}function da(b,g){da=Object.setPrototypeOf||function(m,G){m.__proto__=G;return m};return da(b,g)}function pa(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return b}function za(b,g){if(b){if("string"===typeof b)return ya(b,g);var m=Object.prototype.toString.call(b).slice(8,-1);"Object"===m&&b.constructor&&(m=b.constructor.name);if("Map"===m||"Set"===m)return Array.from(b);if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return ya(b,g)}}function ya(b,g){if(null==g||g>b.length)g=b.length;for(var m=0,G=Array(g);m<g;m++)G[m]=b[m];return G}function Ga(b,g){var m="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=
m.call(b)).next.bind(m);if(Array.isArray(b)||(m=za(b))||g&&b&&"number"===typeof b.length){m&&(b=m);var G=0;return function(){return G>=b.length?{done:!0}:{done:!1,value:b[G++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ua(b){return Object.assign(function(g,m){Ea(g,m,b)},b)}function Ea(b,g,m){F(b,Ln)||M(b,Ln,Z({},b[Ln]));m.annotationType_!==T&&(b[Ln][g]=m)}function Oa(b){F(b,
Ln)||M(b,Ln,Z({},b[Ln]));return b[Ln]}function Ya(b,g,m){void 0===g&&(g=Jp);void 0===m&&(m=Jp);b=new zo(b);g!==Jp&&Oc(KC,b,g,void 0);m!==Jp&&wc(b,m);return b}function Ma(b,g,m){return Ub(b)?b:Array.isArray(b)?Yd.array(b,{name:m}):I(b)?Yd.object(b,void 0,{name:m}):N(b)?Yd.map(b,{name:m}):P(b)?Yd.set(b,{name:m}):"function"!==typeof b||ed(b)||Nc(b)?b:aa(b)?Ns(b):Ms(m,b)}function fb(b){return b}function eb(b,g){return{annotationType_:b,options_:g,make_:Na,extend_:oa}}function Na(b,g,m,G){var V;if(null!=
(V=this.options_)&&V.bound)return null===this.extend_(b,g,m,!1)?0:1;if(G===b.target_)return null===this.extend_(b,g,m,!1)?0:2;if(ed(m.value))return 1;b=Ca(b,this,g,m,!1);Pn(G,g,b);return 2}function oa(b,g,m,G){m=Ca(b,this,g,m);return b.defineProperty_(g,m,G)}function Ca(b,g,m,G,V){var ka,qa,Ia,Ta,Xa,ib,vb;void 0===V&&(V=yf.safeDescriptors);G=G.value;if(null!=(ka=g.options_)&&ka.bound){var Lb;G=G.bind(null!=(Lb=b.proxy_)?Lb:b.target_)}return{value:Qc(null!=(qa=null==(Ia=g.options_)?void 0:Ia.name)?
qa:m.toString(),G,null!=(Ta=null==(Xa=g.options_)?void 0:Xa.autoAction)?Ta:!1,null!=(ib=g.options_)&&ib.bound?null!=(vb=b.proxy_)?vb:b.target_:void 0),configurable:V?b.isPlainObject_:!0,enumerable:!1,writable:V?!1:!0}}function sa(b,g){return{annotationType_:b,options_:g,make_:Aa,extend_:Ja}}function Aa(b,g,m,G){var V;if(G===b.target_)return null===this.extend_(b,g,m,!1)?0:2;if(null!=(V=this.options_)&&V.bound&&(!F(b.target_,g)||!Nc(b.target_[g]))&&null===this.extend_(b,g,m,!1))return 0;if(Nc(m.value))return 1;
b=Ra(b,this,g,m,!1,!1);Pn(G,g,b);return 2}function Ja(b,g,m,G){var V;m=Ra(b,this,g,m,null==(V=this.options_)?void 0:V.bound);return b.defineProperty_(g,m,G)}function Ra(b,g,m,G,V,ka){void 0===ka&&(ka=yf.safeDescriptors);g=G.value;Nc(g)||(g=Ns(g));if(V){var qa;g=g.bind(null!=(qa=b.proxy_)?qa:b.target_);g.isMobXFlow=!0}return{value:g,configurable:ka?b.isPlainObject_:!0,enumerable:!1,writable:ka?!1:!0}}function Ab(b,g){return{annotationType_:b,options_:g,make_:jb,extend_:Ob}}function jb(b,g,m){return null===
this.extend_(b,g,m,!1)?0:1}function Ob(b,g,m,G){return b.defineComputedProperty_(g,Z({},this.options_,{get:m.get,set:m.set}),G)}function Wb(b,g){return{annotationType_:b,options_:g,make_:hc,extend_:Pa}}function hc(b,g,m){return null===this.extend_(b,g,m,!1)?0:1}function Pa(b,g,m,G){var V,ka;return b.defineObservableProperty_(g,m.value,null!=(V=null==(ka=this.options_)?void 0:ka.enhancer)?V:Ma,G)}function ob(b){return{annotationType_:"true",options_:b,make_:qb,extend_:Yb}}function qb(b,g,m,G){var V,
ka;if(m.get)return pe.make_(b,g,m,G);if(m.set){m=Qc(g.toString(),m.set);if(G===b.target_)return null===b.defineProperty_(g,{configurable:yf.safeDescriptors?b.isPlainObject_:!0,set:m})?0:2;Pn(G,g,{configurable:!0,set:m});return 2}if(G!==b.target_&&"function"===typeof m.value){var qa;if(aa(m.value)){var Ia;return(null!=(Ia=this.options_)&&Ia.autoBind?Ns.bound:Ns).make_(b,g,m,G)}return(null!=(qa=this.options_)&&qa.autoBind?Ms.bound:Ms).make_(b,g,m,G)}qa=!1===(null==(V=this.options_)?void 0:V.deep)?Yd.ref:
Yd;if("function"===typeof m.value&&null!=(ka=this.options_)&&ka.autoBind){var Ta;m.value=m.value.bind(null!=(Ta=b.proxy_)?Ta:b.target_)}return qa.make_(b,g,m,G)}function Yb(b,g,m,G){var V,ka;if(m.get)return pe.extend_(b,g,m,G);if(m.set)return b.defineProperty_(g,{configurable:yf.safeDescriptors?b.isPlainObject_:!0,set:Qc(g.toString(),m.set)},G);if("function"===typeof m.value&&null!=(V=this.options_)&&V.autoBind){var qa;m.value=m.value.bind(null!=(qa=b.proxy_)?qa:b.target_)}return(!1===(null==(ka=
this.options_)?void 0:ka.deep)?Yd.ref:Yd).extend_(b,g,m,G)}function Kc(b){if(!0===b.deep)var g=Ma;else{if(!1===b.deep)b=fb;else{b=b.defaultDecorator;var m;b=b?null!=(g=null==(m=b.options_)?void 0:m.enhancer)?g:Ma:Ma}g=b}return g}function cd(b,g,m){if(Y(g))Ea(b,g,gb);else return Ub(b)?b:I(b)?Yd.object(b,g,m):Array.isArray(b)?Yd.array(b,g):N(b)?Yd.map(b,g):P(b)?Yd.set(b,g):"object"===typeof b&&null!==b?b:Yd.box(b,g)}function Qc(b,g,m,G){function V(){a:{var ka=G||this,qa=arguments,Ia=yf.trackingDerivation,
Ta=!m||!Ia;qd();var Xa=yf.allowStateChanges;Ta&&(qc(),Xa=yc(!0));var ib=Fd(!0),vb=qe++,Lb=ah;ah=vb;try{var cc=g.apply(ka,qa);break a}catch(kc){var Tb=kc;throw kc;}finally{ah!==vb&&n(30),ah=Lb,void 0!==Tb&&(yf.suppressReactionErrors=!0),yf.allowStateChanges=Xa,yf.allowStateReads=ib,Td(),Ta&&(yf.trackingDerivation=Ia),yf.suppressReactionErrors=!1}cc=void 0}return cc}void 0===m&&(m=!1);V.isMobxAction=!0;Zd&&(oe.value=b,Object.defineProperty(V,"name",oe));return V}function Fb(b,g){b=yc(b);try{return g()}finally{yf.allowStateChanges=
b}}function yc(b){var g=yf.allowStateChanges;yf.allowStateChanges=b;return g}function Yc(b){switch(b.dependenciesState_){case gg.UP_TO_DATE_:return!1;case gg.NOT_TRACKING_:case gg.STALE_:return!0;case gg.POSSIBLY_STALE_:for(var g=Fd(!0),m=qc(),G=b.observing_,V=G.length,ka=0;ka<V;ka++){var qa=G[ka];if(Th(qa)){if(yf.disableErrorBoundaries)qa.get();else try{qa.get()}catch(Ia){return yf.trackingDerivation=m,yf.allowStateReads=g,!0}if(b.dependenciesState_===gg.STALE_)return yf.trackingDerivation=m,yf.allowStateReads=
g,!0}}xd(b);yf.trackingDerivation=m;yf.allowStateReads=g;return!1}}function kd(b,g,m){var G=Fd(!0);xd(b);b.newObserving_=Array(b.observing_.length+100);b.unboundDepsCount_=0;b.runId_=++yf.runId;var V=yf.trackingDerivation;yf.trackingDerivation=b;yf.inBatch++;if(!0===yf.disableErrorBoundaries)var ka=g.call(m);else try{ka=g.call(m)}catch(ib){ka=new jp(ib)}yf.inBatch--;yf.trackingDerivation=V;var qa=b.observing_;g=b.observing_=b.newObserving_;m=gg.UP_TO_DATE_;V=0;for(var Ia=b.unboundDepsCount_,Ta=0;Ta<
Ia;Ta++){var Xa=g[Ta];0===Xa.diffValue_&&(Xa.diffValue_=1,V!==Ta&&(g[V]=Xa),V++);Xa.dependenciesState_>m&&(m=Xa.dependenciesState_)}g.length=V;b.newObserving_=null;for(Ia=qa.length;Ia--;)Ta=qa[Ia],0===Ta.diffValue_&&wd(Ta,b),Ta.diffValue_=0;for(;V--;)qa=g[V],1===qa.diffValue_&&(qa.diffValue_=0,Ia=b,qa.observers_.add(Ia),qa.lowestObserverState_>Ia.dependenciesState_&&(qa.lowestObserverState_=Ia.dependenciesState_));m!==gg.UP_TO_DATE_&&(b.dependenciesState_=m,b.onBecomeStale_());yf.allowStateReads=
G;return ka}function Md(b){var g=b.observing_;b.observing_=[];for(var m=g.length;m--;)wd(g[m],b);b.dependenciesState_=gg.NOT_TRACKING_}function Kd(b){var g=qc();try{return b()}finally{yf.trackingDerivation=g}}function qc(){var b=yf.trackingDerivation;yf.trackingDerivation=null;return b}function Fd(b){var g=yf.allowStateReads;yf.allowStateReads=b;return g}function xd(b){if(b.dependenciesState_!==gg.UP_TO_DATE_){b.dependenciesState_=gg.UP_TO_DATE_;b=b.observing_;for(var g=b.length;g--;)b[g].lowestObserverState_=
gg.UP_TO_DATE_}}function ae(){(yf.pendingReactions.length||yf.inBatch||yf.isRunningReactions)&&n(36);my=!0;if(St){var b=R();0===--b.__mobxInstanceCount&&(b.__mobxGlobals=void 0);yf=new Rt}}function wd(b,g){b.observers_["delete"](g);0===b.observers_.size&&Qd(b)}function Qd(b){!1===b.isPendingUnobservation_&&(b.isPendingUnobservation_=!0,yf.pendingUnobservations.push(b))}function qd(){yf.inBatch++}function Td(){if(0===--yf.inBatch){0<yf.inBatch||yf.isRunningReactions||Pt(nb);for(var b=yf.pendingUnobservations,
g=0;g<b.length;g++){var m=b[g];m.isPendingUnobservation_=!1;0===m.observers_.size&&(m.isBeingObserved_&&(m.isBeingObserved_=!1,m.onBUO()),m instanceof qh&&m.suspend_())}yf.pendingUnobservations=[]}}function Nb(b){var g=yf.trackingDerivation;if(null!==g)return g.runId_!==b.lastAccessedBy_&&(b.lastAccessedBy_=g.runId_,g.newObserving_[g.unboundDepsCount_++]=b,!b.isBeingObserved_&&yf.trackingContext&&(b.isBeingObserved_=!0,b.onBO())),b.isBeingObserved_;0===b.observers_.size&&0<yf.inBatch&&Qd(b);return!1}
function fc(b){b.lowestObserverState_!==gg.STALE_&&(b.lowestObserverState_=gg.STALE_,b.observers_.forEach(function(g){if(g.dependenciesState_===gg.UP_TO_DATE_)g.onBecomeStale_();g.dependenciesState_=gg.STALE_}))}function Xb(b){b.lowestObserverState_!==gg.STALE_&&(b.lowestObserverState_=gg.STALE_,b.observers_.forEach(function(g){g.dependenciesState_===gg.POSSIBLY_STALE_?g.dependenciesState_=gg.STALE_:g.dependenciesState_===gg.UP_TO_DATE_&&(b.lowestObserverState_=gg.UP_TO_DATE_)}))}function rb(b){b.lowestObserverState_===
gg.UP_TO_DATE_&&(b.lowestObserverState_=gg.POSSIBLY_STALE_,b.observers_.forEach(function(g){g.dependenciesState_===gg.UP_TO_DATE_&&(g.dependenciesState_=gg.POSSIBLY_STALE_,g.onBecomeStale_())}))}function nb(){yf.isRunningReactions=!0;for(var b=yf.pendingReactions,g=0;0<b.length;){++g===FC&&(console.error("[mobx] cycle in reaction: "+b[0]),b.splice(0));for(var m=b.splice(0),G=0,V=m.length;G<V;G++)m[G].runReaction_()}yf.isRunningReactions=!1}function bc(b){var g=Pt;Pt=function(m){return b(function(){return g(m)})}}
function vc(b){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Vc(b){return function(g,m){if(ma(g))return Qc(g.name||"\x3cunnamed action\x3e",g,b);if(ma(m))return Qc(g,m,b);if(Y(m))return Ea(g,m,b?ry:qy);if(Y(g))return Ua(eb(b?"autoAction":oy,{name:g,autoAction:b}))}}function ed(b){return ma(b)&&!0===b.isMobxAction}function Od(b,g){function m(){b(Ta)}var G,V;void 0===g&&(g=Gp);var ka=null!=(G=null==(V=g)?void 0:V.name)?G:"Autorun";if(g.scheduler||g.delay){var qa=
de(g),Ia=!1;var Ta=new sr(ka,function(){Ia||(Ia=!0,qa(function(){Ia=!1;Ta.isDisposed_||Ta.track(m)}))},g.onError,g.requiresObservable)}else Ta=new sr(ka,function(){this.track(m)},g.onError,g.requiresObservable);Ta.schedule_();return Ta.getDisposer_()}function de(b){return b.scheduler?b.scheduler:b.delay?function(g){return setTimeout(g,b.delay)}:JC}function se(b,g,m){function G(){ib=!1;if(!Tb.isDisposed_){var kc=!1;Tb.track(function(){var mc=Fb(!1,function(){return b(Tb)});kc=Xa||!cc(vb,mc);Lb=vb;
vb=mc});Xa&&m.fireImmediately?qa(vb,Lb,Tb):!Xa&&kc&&qa(vb,Lb,Tb);Xa=!1}}var V;void 0===m&&(m=Gp);var ka=null!=(V=m.name)?V:"Reaction",qa=hg(ka,m.onError?vd(m.onError,g):g),Ia=!m.scheduler&&!m.delay,Ta=de(m),Xa=!0,ib=!1,vb,Lb,cc=m.compareStructural?Ao.structural:m.equals||Ao["default"],Tb=new sr(ka,function(){Xa||Ia?G():ib||(ib=!0,Ta(G))},m.onError,m.requiresObservable);Tb.schedule_();return Tb.getDisposer_()}function vd(b,g){return function(){try{return g.apply(this,arguments)}catch(m){b.call(this,
m)}}}function wc(b,g,m){return Oc(LC,b,g,m)}function Oc(b,g,m,G){var V="function"===typeof G?xg(g,m):xg(g),ka=ma(G)?G:m,qa=b+"L";V[qa]?V[qa].add(ka):V[qa]=new Set([ka]);return function(){var Ia=V[qa];Ia&&(Ia["delete"](ka),0===Ia.size&&delete V[qa])}}function Me(b){!0===b.isolateGlobalState&&ae();var g=b.useProxies,m=b.enforceActions;void 0!==g&&(yf.useProxies="always"===g?!0:"never"===g?!1:"undefined"!==typeof Proxy);"ifavailable"===g&&(yf.verifyProxies=!0);void 0!==m&&(g="always"===m?"always":"observed"===
m,yf.enforceActions=g,yf.allowStateChanges=!0===g||"always"===g?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(G){G in b&&(yf[G]=!!b[G])});yf.allowStateReads=!yf.observableRequiresReaction;b.reactionScheduler&&bc(b.reactionScheduler)}function rc(b,g,m,G){var V=pv(g),ka=Ed(b,G)[nh];qd();try{zq(V).forEach(function(qa){ka.extend_(qa,V[qa],m?qa in m?m[qa]:!0:!0)})}finally{Td()}return b}function Le(b){var g=
{name:b.name_};b.observing_&&0<b.observing_.length&&(g.dependencies=Array.from(new Set(b.observing_)).map(Le));return g}function Rb(){this.message="FLOW_CANCELLED"}function Nc(b){return!0===(null==b?void 0:b.isMobXFlow)}function Ub(b,g){return b?void 0!==g?$d(b)?b[nh].values_.has(g):!1:$d(b)||!!b[nh]||zs(b)||Qt(b)||Th(b):!1}function fd(b){if($d(b))return b[nh].ownKeys_();n(38)}function te(b,g,m){b.set(g,m);return m}function ne(b,g){if(null==b||"object"!==typeof b||b instanceof Date||!Ub(b))return b;
if(Kh(b)||Th(b))return ne(b.get(),g);if(g.has(b))return g.get(b);if(kb(b)){var m=te(g,b,Array(b.length));b.forEach(function(qa,Ia){m[Ia]=ne(qa,g)});return m}if(Gq(b)){var G=te(g,b,new Set);b.forEach(function(qa){G.add(ne(qa,g))});return G}if(Mp(b)){var V=te(g,b,new Map);b.forEach(function(qa,Ia){V.set(Ia,ne(qa,g))});return V}var ka=te(g,b,{});fd(b).forEach(function(qa){Vo.propertyIsEnumerable.call(b,qa)&&(ka[qa]=ne(b[qa],g))});return ka}function Ec(b,g){return ne(b,new Map)}function Bb(){n("trace() is not available in production builds");
for(var b=!1,g=arguments.length,m=Array(g),G=0;G<g;G++)m[G]=arguments[G];"boolean"===typeof m[m.length-1]&&(b=m.pop());a:{switch(m.length){case 0:g=yf.trackingDerivation;break a;case 1:g=xg(m[0]);break a;case 2:g=xg(m[0],m[1]);break a}g=void 0}if(!g)return n("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");g.isTracing_===gn.NONE&&console.log("[mobx.trace] '"+g.name_+"' tracing enabled");g.isTracing_=b?
gn.BREAK:gn.LOG}function Id(b,g){void 0===g&&(g=void 0);qd();try{return b.apply(g)}finally{Td()}}function ee(b){return void 0!==b.interceptors_&&0<b.interceptors_.length}function td(b,g){var m=b.interceptors_||(b.interceptors_=[]);m.push(g);return L(function(){var G=m.indexOf(g);-1!==G&&m.splice(G,1)})}function nc(b,g){var m=qc();try{var G=[].concat(b.interceptors_||[]);b=0;for(var V=G.length;b<V&&((g=G[b](g))&&!g.type&&n(14),g);b++);return g}finally{yf.trackingDerivation=m}}function Ne(b){return void 0!==
b.changeListeners_&&0<b.changeListeners_.length}function Yf(b,g){var m=b.changeListeners_||(b.changeListeners_=[]);m.push(g);return L(function(){var G=m.indexOf(g);-1!==G&&m.splice(G,1)})}function cf(b,g){var m=qc();if(b=b.changeListeners_){b=b.slice();for(var G=0,V=b.length;G<V;G++)b[G](g);yf.trackingDerivation=m}}function sg(b,g,m){var G=Ed(b,m)[nh];qd();try{var V;null!=(V=g)?V:g=Oa(b);zq(g).forEach(function(ka){return G.make_(ka,g[ka])})}finally{Td()}return b}function $a(b,g,m,G){void 0===m&&(m=
"ObservableArray");void 0===G&&(G=!1);ja();g=new yv(m,g,G,!1);Q(g.values_,nh,g);m=new Proxy(g.values_,GC);g.proxy_=m;b&&b.length&&(G=yc(!0),g.spliceWithArray_(0,0,b),yf.allowStateChanges=G);return m}function Cb(b,g){"function"===typeof Array.prototype[b]&&(Ot[b]=g(b))}function db(b){return function(){var g=this[nh];g.atom_.reportObserved();g=g.dehanceValues_(g.values_);return g[b].apply(g,arguments)}}function Db(b){return function(g,m){var G=this,V=this[nh];V.atom_.reportObserved();return V.dehanceValues_(V.values_)[b](function(ka,
qa){return g.call(m,ka,qa,G)})}}function gc(b){return function(){var g=this,m=this[nh];m.atom_.reportObserved();m=m.dehanceValues_(m.values_);var G=arguments[0];arguments[0]=function(V,ka,qa){return G(V,ka,qa,g)};return m[b].apply(m,arguments)}}function kb(b){return fa(b)&&yC(b[nh])}function jd(b){if(N(b)||Mp(b))return b;if(Array.isArray(b))return new Map(b);if(I(b)){var g=new Map,m;for(m in b)g.set(m,b[m]);return g}return n(21,b)}function Ed(b,g){var m;if(F(b,nh))return b;var G=null!=(m=null==g?
void 0:g.name)?m:"ObservableObject";m=ky;var V=new Map;G=String(G);var ka;var qa=g?null!=(ka=g.defaultDecorator)?ka:ob(g):void 0;g=new m(b,V,G,qa);M(b,nh,g);return b}function le(b){return py[b]||(py[b]={get:function(){return this[nh].getObservablePropValue_(b)},set:function(g){return this[nh].setObservablePropValue_(b,g)}})}function $d(b){return fa(b)?xC(b[nh]):!1}function Xe(b){return{enumerable:!1,configurable:!0,get:function(){return this[nh].get_(b)},set:function(g){this[nh].set_(b,g)}}}function ue(b){if(b>
zv){for(var g=zv;g<b+100;g++)Pn(xv.prototype,""+g,Xe(g));zv=b}}function hf(b,g,m){return new xv(b,g,m)}function xg(b,g){if("object"===typeof b&&null!==b){if(kb(b))return void 0!==g&&n(23),b[nh].atom_;if(Gq(b))return b[nh];if(Mp(b)){if(void 0===g)return b.keysAtom_;var m=b.data_.get(g)||b.hasMap_.get(g);m||n(25,g,zb(b));return m}if($d(b)){if(!g)return n(26);(m=b[nh].values_.get(g))||n(27,g,zb(b));return m}if(zs(b)||Th(b)||Qt(b))return b}else if(ma(b)&&Qt(b[nh]))return b[nh];n(28)}function rf(b,g){b||
n(29);if(void 0!==g)return rf(xg(b,g));if(zs(b)||Th(b)||Qt(b)||Mp(b)||Gq(b))return b;if(b[nh])return b[nh];n(24,b)}function zb(b,g){if(void 0!==g)b=xg(b,g);else{if(ed(b))return b.name;b=$d(b)||Mp(b)||Gq(b)?rf(b):xg(b)}return b.name_}function ta(b,g,m){void 0===m&&(m=-1);return ra(b,g,m)}function ra(b,g,m,G,V){if(b===g)return 0!==b||1/b===1/g;if(null==b||null==g)return!1;if(b!==b)return g!==g;var ka=typeof b;if("function"!==ka&&"object"!==ka&&"object"!=typeof g)return!1;ka=iy.call(b);if(ka!==iy.call(g))return!1;
switch(ka){case "[object RegExp]":case "[object String]":return""+b===""+g;case "[object Number]":return+b!==+b?+g!==+g:0===+b?1/+b===1/g:+b===+g;case "[object Date]":case "[object Boolean]":return+b===+g;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(b)===Symbol.valueOf.call(g);case "[object Map]":case "[object Set]":0<=m&&m++}b=Ha(b);g=Ha(g);ka="[object Array]"===ka;if(!ka){if("object"!=typeof b||"object"!=typeof g)return!1;var qa=b.constructor,Ia=g.constructor;if(qa!==
Ia&&!(ma(qa)&&qa instanceof qa&&ma(Ia)&&Ia instanceof Ia)&&"constructor"in b&&"constructor"in g)return!1}if(0===m)return!1;0>m&&(m=-1);G=G||[];V=V||[];for(qa=G.length;qa--;)if(G[qa]===b)return V[qa]===g;G.push(b);V.push(g);if(ka){qa=b.length;if(qa!==g.length)return!1;for(;qa--;)if(!ra(b[qa],g[qa],m-1,G,V))return!1}else{ka=Object.keys(b);qa=ka.length;if(Object.keys(g).length!==qa)return!1;for(;qa--;)if(Ia=ka[qa],!F(g,Ia)||!ra(b[Ia],g[Ia],m-1,G,V))return!1}G.pop();V.pop();return!0}function Ha(b){return kb(b)?
b.slice():N(b)||Mp(b)||P(b)||Gq(b)?Array.from(b.entries()):b}function bb(b){b[Symbol.iterator]=Ib;return b}function Ib(){return this}function lc(b,g){const m=new Set(g),G=Object.values(b),V=new Set(G.filter(ka=>m.has(ka.toId)||m.has(ka.fromId)));b=V.size;for(g=-1;0!==g;)V.forEach(ka=>{ka=ka.fromId;for(const qa of G)qa.fromId===ka&&V.add(qa),qa.toId===ka&&V.add(qa)}),g=V.size-b,b=V.size;return Array.from(V.values())}function Tc(b,g,m,G,V,ka,qa,Ia){if(V=g.getBindingPoint(V,ka,qa,Ia))return{id:G,type:"line",
fromId:b.id,toId:g.id,handleId:m,point:me.toFixed(V.point),distance:V.distance}}function pd(b,g){const m=b.getCenter(),G=g.getCenter();var V=Zk();V=Jc(oc({},Bs.defaultProps),{id:V,type:Bs.id,parentId:b.props.parentId,point:m});b=Tc(V,b,"start",Zk(),m,m,me.uni(me.sub(G,m)),!1);g=Tc(V,g,"end",Zk(),G,G,me.uni(me.sub(m,G)),!1);return b&&g?(V.handles.start.point=[0,0],V.handles.end.point=me.sub(G,m),V.handles.start.bindingId=b.id,V.handles.end.bindingId=g.id,[V,[b,g]]):null}function we(){return new QC}
function We(){return new WeakMap}function Hf(b){if(!b)return Av(null);var g=b.constructor;if(g===Object)return b===Object.prototype?{}:Av(b);if(~UC.call(g).indexOf("[native code]"))try{return new g}catch(m){}return Av(b)}function bg(b){var g="";b.global&&(g+="g");b.ignoreCase&&(g+="i");b.multiline&&(g+="m");b.unicode&&(g+="u");b.sticky&&(g+="y");return g}function Df(b){return b.flags}function wf(b){b=PC.call(b);return b.substring(8,b.length-1)}function Rf(b){return b[Symbol.toStringTag]||wf(b)}function Pg(b){return bz(b).concat(Hv(b))}
function ji(b,g,m){for(var G=dD(b),V=0,ka=G.length,qa,Ia;V<ka;++V)if(qa=G[V],"callee"!==qa&&"caller"!==qa)if(Ia=QD(b,qa)){Ia.get||Ia.set||(Ia.value=m.copier(Ia.value,m));try{VC(g,qa,Ia)}catch(Ta){g[qa]=Ia.value}}else g[qa]=m.copier(b[qa],m);return g}function uh(b,g){var m=new g.Constructor;g.cache.set(b,m);b.forEach(function(G,V){m.set(V,g.copier(G,g))});return m}function ni(b,g){var m=Hf(g.prototype);g.cache.set(b,m);for(var G in b)wy.call(b,G)&&(m[G]=g.copier(b[G],g));return m}function di(b,g){var m=
Hf(g.prototype);g.cache.set(b,m);for(var G in b)wy.call(b,G)&&(m[G]=g.copier(b[G],g));G=Hv(b);for(var V=0,ka=G.length,qa;V<ka;++V)qa=G[V],cD.call(b,qa)&&(m[qa]=g.copier(b[qa],g));return m}function tg(b,g){return new g.Constructor(b.valueOf())}function Uh(b,g){return b}function gf(b,g){var m=new g.Constructor;g.cache.set(b,m);b.forEach(function(G){m.add(g.copier(G,g))});return m}function Vh(b){function g(ka,qa){qa.prototype=qa.Constructor=void 0;if(!ka||"object"!==typeof ka)return ka;if(qa.cache.has(ka))return qa.cache.get(ka);
qa.prototype=ka.__proto__||bD(ka);qa.Constructor=qa.prototype&&qa.prototype.constructor;if(!qa.Constructor||qa.Constructor===Object)return V(ka,qa);if(aD(ka))return G(ka,qa);var Ia=m[WC(ka)];return Ia?Ia(ka,qa):"function"===typeof ka.then?ka:V(ka,qa)}b=Bv({},xy,b);var m={Arguments:b.object,Array:b.array,ArrayBuffer:b.arrayBuffer,Blob:b.blob,Boolean:tg,DataView:b.dataView,Date:b.date,Error:b.error,Float32Array:b.arrayBuffer,Float64Array:b.arrayBuffer,Int8Array:b.arrayBuffer,Int16Array:b.arrayBuffer,
Int32Array:b.arrayBuffer,Map:b.map,Number:tg,Object:b.object,Promise:Uh,RegExp:b.regExp,Set:b.set,String:tg,WeakMap:Uh,WeakSet:Uh,Uint8Array:b.arrayBuffer,Uint8ClampedArray:b.arrayBuffer,Uint16Array:b.arrayBuffer,Uint32Array:b.arrayBuffer,Uint64Array:b.arrayBuffer},G=m.Array,V=m.Object;return function(ka){return g(ka,{Constructor:void 0,cache:PD(),copier:g,prototype:void 0})}}function Ci(b,g){return(0,YC.default)(b,g,{arrayMerge:(m,G,V)=>G})}function Kl(b,g,m,G=!1){const [V,ka]=g,[qa,Ia]=m;b=qa+(b-
V)/(ka-V)*(Ia-qa);return G?qa<Ia?Math.max(Math.min(b,Ia),qa):Math.max(Math.min(b,qa),Ia):b}function Aj(b,g){return new Promise((m,G)=>{if(g){const V=document.createElement("video");V.addEventListener("loadedmetadata",function(){m([this.videoWidth,this.videoHeight])},!1);V.src=b}else{const V=new Image;V.onload=()=>m([V.width,V.height]);V.src=b;V.onerror=ka=>G(ka)}})}function ag(b){return Object.values(ln).includes(b)}function Ug(b,g){return ag(b)||null==b?`var(--ls-wb-${g}-color-${b?b:"default"})`:
b}function Bk(){var b;null==(b=document.getElementById("__textLabelMeasure"))?void 0:b.remove();b=document.createElement("pre");b.id="__textLabelMeasure";Object.assign(b.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});b.tabIndex=-1;document.body.appendChild(b);
return b}function ai(b,g,m=0){var G,V,ka;if(!b)return[16,32];let qa;qa="string"===typeof g?g:`${null!=(G=g.fontStyle)?G:"normal"} ${null!=(V=g.fontVariant)?V:"normal"} ${null!=(ka=g.fontWeight)?ka:"normal"} ${g.fontSize}px/${g.fontSize*g.lineHeight}px ${g.fontFamily}`;if(!Iv.has(`${b}-${qa}-${m}`)){if(!Wp)return[10,10];Wp.parentNode||document.body.appendChild(Wp);Wp.innerHTML=`${b}&#8203;`;Wp.style.font=qa;Wp.style.padding=m+"px";g=Wp.getBoundingClientRect();Iv.set(`${b}-${qa}-${m}`,[Math.ceil(g.width||
1),Math.ceil(g.height||1)])}return Iv.get(`${b}-${qa}-${m}`)}function Xj(b){try{if("string"!==typeof b||!Ip.test(b))throw TypeError("Invalid UUID");let g;const m=new Uint8Array(16);m[0]=(g=parseInt(b.slice(0,8),16))>>>24;m[1]=g>>>16&255;m[2]=g>>>8&255;m[3]=g&255;m[4]=(g=parseInt(b.slice(9,13),16))>>>8;m[5]=g&255;m[6]=(g=parseInt(b.slice(14,18),16))>>>8;m[7]=g&255;m[8]=(g=parseInt(b.slice(19,23),16))>>>8;m[9]=g&255;m[10]=(g=parseInt(b.slice(24,36),16))/1099511627776&255;m[11]=g/4294967296&255;m[12]=
g>>>24&255;m[13]=g>>>16&255;m[14]=g>>>8&255;m[15]=g&255;return!0}catch(g){return!1}}function Yj(b,g=0,m){let G;return function(...V){null==m?void 0:m(...V);clearTimeout(G);G=setTimeout(()=>b.apply(V),g)}}function Ck(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function vh(){var b,g,m;return(null==(m=null==(g=null==(b=null==window?void 0:window.logseq)?void 0:b.api)?void 0:g.get_state_from_store)?void 0:m.call(g,"ui/developer-mode?"))||!1}function oi(b){return!!b}function Ej(b=0){return new Promise(g=>
setTimeout(g,b))}function im(b="noid"){Dv[b]||(Dv[b]=Jy.createContext({}));return Dv[b]}function si(b="noid"){return Jy.useContext(im(b))}function Bj(b){const {callbacks:g}=si(),m=Iy.useRef(-1);return Iy.useMemo(()=>{const G=V=>{var ka,qa;const {order:Ia=0}=V;if(!Ia){var Ta=V.target;Ta.removeEventListener("pointerup",G);Ta.releasePointerCapture(V.pointerId);null==(ka=g.onPointerUp)?void 0:ka.call(g,{type:"selection",handle:b,order:Ia},V);ka=Date.now();Ta=ka-m.current;300<Ta?m.current=ka:300>=Ta&&
(null==(qa=g.onDoubleClick)?void 0:qa.call(g,{type:"selection",handle:b,order:Ia},V),m.current=-1);V.order=Ia+1}};return{onPointerDown:V=>{var ka;const {order:qa=0}=V;if(!qa){var Ia=Fj(V.currentTarget);Ia.setPointerCapture(V.pointerId);Ia.addEventListener("pointerup",G);null==(ka=g.onPointerDown)?void 0:ka.call(g,{type:"selection",handle:b,order:qa},V);V.order=qa+1}},onPointerMove:V=>{var ka;const {order:qa=0}=V;qa||(null==(ka=g.onPointerMove)?void 0:ka.call(g,{type:"selection",handle:b,order:qa},
V),V.order=qa+1)},onPointerEnter:V=>{var ka;const {order:qa=0}=V;qa||(null==(ka=g.onPointerEnter)?void 0:ka.call(g,{type:"selection",handle:b,order:qa},V),V.order=qa+1)},onPointerLeave:V=>{var ka;const {order:qa=0}=V;qa||(null==(ka=g.onPointerLeave)?void 0:ka.call(g,{type:"selection",handle:b,order:qa},V),V.order=qa+1)},onKeyDown:V=>{var ka;null==(ka=g.onKeyDown)?void 0:ka.call(g,{type:"selection",handle:b,order:-1},V)},onKeyUp:V=>{var ka;null==(ka=g.onKeyUp)?void 0:ka.call(g,{type:"selection",handle:b,
order:-1},V)}}},[g])}function Fj(b){var g;if(null==(g=b.namespaceURI)?0:g.endsWith("svg")){if(b.parentElement)return Fj(b.parentElement);throw Error("Could not find a parent element of an HTML type!");}return b}function wl(b,g,m){const G=Ts.useRef(!1),V=Ts.useCallback(()=>{var ka;if(G.current){const qa=null==(ka=b.current)?void 0:ka.getBoundingClientRect();qa&&(ka={minX:qa.left,maxX:qa.left+qa.width,minY:qa.top,maxY:qa.top+qa.height,width:qa.width,height:qa.height},g.updateBounds(ka),null==m?void 0:
m(ka))}else G.current=!0},[b,m]);Ts.useEffect(()=>{const ka=b.current?sD(b.current):document,qa=Yj(V,100);ka.addEventListener("scroll",qa);window.addEventListener("resize",qa);return()=>{ka.removeEventListener("scroll",qa);window.removeEventListener("resize",qa)}},[]);Ts.useLayoutEffect(()=>{const ka=new ResizeObserver(qa=>{qa[0].contentRect&&V()});b.current&&ka.observe(b.current);return()=>{ka.disconnect()}},[b]);Ts.useEffect(()=>{V();setTimeout(()=>{var ka,qa;null==(qa=null==(ka=b.current)?void 0:
ka.querySelector(".tl-canvas"))?void 0:qa.focus()})},[b])}function fl(b,g){return Object.keys(g).reduce((m,G)=>{const V=g[G];return V?m+`${`--${b}-${G}`}: ${V};
`:m},"")}function Ll(b,g,m=".logseq-tldraw"){Ev.useLayoutEffect(()=>{const G=document.createElement("style"),V=fl(b,g);G.setAttribute("id",`${b}-theme`);G.setAttribute("data-selector",m);G.innerHTML=`
        ${m} {
          ${V}
        }
      `;document.head.appendChild(G);return()=>{G&&document.head.contains(G)&&document.head.removeChild(G)}},[b,g,m])}function ak(b,g){Ev.useLayoutEffect(()=>{if(Fv.get(b))return()=>{};const m=document.createElement("style");m.innerHTML=g;m.setAttribute("id",b);document.head.appendChild(m);Fv.set(b,m);return()=>{m&&document.head.contains(m)&&(document.head.removeChild(m),Fv.delete(b))}},[b,g])}function bk(b,g){const m=Ev.useMemo(()=>oc(oc({},tD),b),[b]);Ll("tl",m,g);ak("tl-canvas",uD)}function qk(b=
"noid"){Cv[b]||(Cv[b]=Ky.createContext({}));return Cv[b]}function $e(b="noid"){return Ky.useContext(qk(b))}function og(){const b=$e(),{callbacks:g}=si(),m=Ly.useRef(-1);return Ly.useMemo(()=>({onPointerDown:G=>{var V,ka,qa;const {order:Ia=0}=G;Ia||(null==(V=G.currentTarget)?void 0:V.setPointerCapture(G.pointerId));G.isPrimary&&(null==(ka=g.onPointerDown)?void 0:ka.call(g,{type:"canvas",order:Ia},G),V=Date.now(),ka=V-m.current,300<ka?m.current=V:300>=ka&&(null==(qa=g.onDoubleClick)?void 0:qa.call(g,
{type:"canvas",order:Ia},G),m.current=-1))},onPointerMove:G=>{var V;const {order:ka=0}=G;null==(V=g.onPointerMove)?void 0:V.call(g,{type:"canvas",order:ka},G)},onPointerUp:G=>{var V,ka;const {order:qa=0}=G;qa||(null==(V=G.currentTarget)?void 0:V.releasePointerCapture(G.pointerId));null==(ka=g.onPointerUp)?void 0:ka.call(g,{type:"canvas",order:qa},G)},onPointerEnter:G=>{var V;const {order:ka=0}=G;null==(V=g.onPointerEnter)?void 0:V.call(g,{type:"canvas",order:ka},G)},onPointerLeave:G=>{var V;const {order:ka=
0}=G;null==(V=g.onPointerLeave)?void 0:V.call(g,{type:"canvas",order:ka},G)},onDrop:G=>xf(this,null,function*(){G.preventDefault();"clientX"in G&&b.drop(G.dataTransfer,[G.clientX,G.clientY])}),onDragOver:G=>{G.preventDefault()},onTouchEnd:G=>{let V=b.selectedTool.id;"pencil"!==V&&"highlighter"!==V||G.preventDefault()}}),[g])}function lj(b,g,m){return 0===g||Infinity===Math.abs(g)?Math.pow(b,5*m):b*g*m/(g+m*b)}function Ch(b,g,m,G=.15){return 0===G?Math.max(g,Math.min(b,m)):b<g?-lj(g-b,m-g,G)+g:b>m?
+lj(b-m,m-g,G)+m:b}function Di(b,[g,m],[G,V]){const [[ka,qa],[Ia,Ta]]=b;return[Ch(g,ka,qa,G),Ch(m,Ia,Ta,V)]}function Mh(b,g,m){g in b?Object.defineProperty(b,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):b[g]=m;return b}function ei(b,g){var m=Object.keys(b);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(b);g&&(G=G.filter(function(V){return Object.getOwnPropertyDescriptor(b,V).enumerable}));m.push.apply(m,G)}return m}function Ag(b){for(var g=1;g<arguments.length;g++){var m=
null!=arguments[g]?arguments[g]:{};g%2?ei(Object(m),!0).forEach(function(G){Mh(b,G,m[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(m)):ei(Object(m)).forEach(function(G){Object.defineProperty(b,G,Object.getOwnPropertyDescriptor(m,G))})}return b}function ck(b){return b?b[0].toUpperCase()+b.slice(1):""}function Dk(b=!1,g){return b&&!oD.includes(g)}function Nh(b,g="",m=!1){const G=Hy[b];g=G?G[g]||g:g;return"on"+ck(b)+ck(g)+(Dk(m,g)?"Capture":"")}function Ji(b){b=
b.substring(2).toLowerCase();const g=!!~b.indexOf("passive");g&&(b=b.replace("passive",""));var m=pD.includes(b)?"capturecapture":"capture";(m=!!~b.indexOf(m))&&(b=b.replace("capture",""));return{device:b,capture:m,passive:g}}function Xh(b,g=""){const m=Hy[b];return b+(m?m[g]||g:g)}function Vk(b){return"touches"in b?"touch":"pointerType"in b?b.pointerType:"mouse"}function rk(b){return Array.from(b.touches).filter(g=>{var m,G;return g.target===b.currentTarget||(null===(m=b.currentTarget)||void 0===
m?void 0:null===(G=m.contains)||void 0===G?void 0:G.call(m,g.target))})}function Gj(b){return"touches"in b?("touchend"===b.type||"touchcancel"===b.type?b.changedTouches:b.targetTouches)[0]:b}function gl(b,g){const m=g.clientX-b.clientX,G=g.clientY-b.clientY;return{angle:-(180*Math.atan2(m,G))/Math.PI,distance:Math.hypot(m,G),origin:[(g.clientX+b.clientX)/2,(g.clientY+b.clientY)/2]}}function Um(b){return rk(b).map(g=>g.identifier)}function dk(b,g){const [m,G]=Array.from(b.touches).filter(V=>g.includes(V.identifier));
return gl(m,G)}function zi(b){const g=Gj(b);return"touches"in b?g.identifier:g.pointerId}function mj(b){b=Gj(b);return[b.clientX,b.clientY]}function bi(b){let {deltaX:g,deltaY:m,deltaMode:G}=b;1===G?(g*=40,m*=40):2===G&&(g*=800,m*=800);return[g,m]}function Pi(b,...g){return"function"===typeof b?b(...g):b}function Oh(){}function bj(...b){return 0===b.length?Oh:1===b.length?b[0]:function(){let g;for(const m of b)g=m.apply(this,arguments)||g;return g}}function ti([b,g],m){b=Math.abs(b);g=Math.abs(g);
if(b>g&&b>m)return"x";if(g>b&&g>m)return"y"}function Wk(b){const [g,m]=b.overflow,[G,V]=b._delta,[ka,qa]=b._direction;if(0>g&&0<G&&0>ka||0<g&&0>G&&0<ka)b._movement[0]=b._movementBound[0];if(0>m&&0<V&&0>qa||0<m&&0>V&&0<qa)b._movement[1]=b._movementBound[1]}function Xk(b){Ss.set(b.key,b.engine);Gr.set(b.key,b.resolver)}function Qi(b={},g){const m={};for(const [G,V]of Object.entries(g))switch(typeof V){case "function":m[G]=V.call(m,b[G],G,b);break;case "object":m[G]=Qi(b[G],V);break;case "boolean":V&&
(m[G]=b[G])}return m}function Kg(b,g,m={}){const {target:G,eventOptions:V,window:ka,enabled:qa,transform:Ia}=b;var Ta=YD;if(null==b)b={};else{if(null==b)var Xa={};else{Xa={};var ib=Object.keys(b),vb;for(vb=0;vb<ib.length;vb++){var Lb=ib[vb];0<=Ta.indexOf(Lb)||(Xa[Lb]=b[Lb])}}if(Object.getOwnPropertySymbols)for(vb=Object.getOwnPropertySymbols(b),Lb=0;Lb<vb.length;Lb++)ib=vb[Lb],0<=Ta.indexOf(ib)||Object.prototype.propertyIsEnumerable.call(b,ib)&&(Xa[ib]=b[ib]);b=Xa}m.shared=Qi({target:G,eventOptions:V,
window:ka,enabled:qa,transform:Ia},XD);if(g){var cc=Gr.get(g);m[g]=Qi(Ag({shared:m.shared},b),cc)}else for(cc in b)(g=Gr.get(cc))&&(m[cc]=Qi(Ag({shared:m.shared},b[cc]),g));return m}function Ki(b,g){b.gestures.add(g);b.gestureEventStores[g]=new cz(b,g);b.gestureTimeoutStores[g]=new ZD}function Ph(b,g,m,G,V,ka){if(b.has(m)&&Ss.has(G)){var qa=m+"Start",Ia=m+"End";V[G]=Ta=>{let Xa=void 0;if(Ta.first&&qa in g)g[qa](Ta);m in g&&(Xa=g[m](Ta));if(Ta.last&&Ia in g)g[Ia](Ta);return Xa};ka[G]=ka[G]||{}}}function Ij(b,
g={},m,G){const V=Jv.default.useMemo(()=>new $D(b),[]);V.applyHandlers(b,G);V.applyConfig(g,m);Jv.default.useEffect(V.effect.bind(V));Jv.default.useEffect(()=>V.clean.bind(V),[]);if(void 0===g.target)return V.bind.bind(V)}function Ih(b){b.forEach(Xk);return function(g,m){m=m||{};const G={},V={},ka=new Set;for(let Lb in g)aE.test(Lb)?(ka.add(RegExp.lastMatch),V[Lb]=g[Lb]):G[Lb]=g[Lb];const [qa,Ia,Ta]=[V,G,ka];g={};Ph(Ta,qa,"onDrag","drag",g,m);Ph(Ta,qa,"onWheel","wheel",g,m);Ph(Ta,qa,"onScroll","scroll",
g,m);Ph(Ta,qa,"onPinch","pinch",g,m);Ph(Ta,qa,"onMove","move",g,m);Ph(Ta,qa,"onHover","hover",g,m);const {handlers:Xa,nativeHandlers:ib,config:vb}={handlers:g,config:m,nativeHandlers:Ia};return Ij(Xa,vb,void 0,ib)}}function Ei(b,g){return Ih([wD,UD,VD,WD,HD,TD])(b,g||{})}function Fk(b){const {viewport:g,inputs:m,callbacks:G}=si(),V=Wt.useRef(void 0),ka=Wt.useRef([0,0]),qa=Wt.useRef(0),Ia=Wt.useMemo(()=>({onWheel:Ta=>{var Xa;({event:Ta}=Ta);Ta.preventDefault();const {deltaY:ib,deltaX:vb}=Ta;var Lb=
0;if(Ta.ctrlKey||Ta.metaKey){Lb=Math.sign(Ta.deltaY);let mc=ib;10<Math.abs(Ta.deltaY)&&(mc=10*Lb);Lb=mc}const [cc,Tb,kc]=[vb,ib,Lb];"pinching"===m.state||qa.current>=Ta.timeStamp||(qa.current=Ta.timeStamp,(Ta.altKey||Ta.ctrlKey||Ta.metaKey)&&0===Ta.buttons?(Lb=g.bounds,Ta=null!=(Xa=m.currentScreenPoint)?Xa:[Lb.width/2,Lb.height/2],Xa=g.camera.zoom,g.onZoom(Ta,Xa-kc/100*Xa)):(Xa=me.mul(Ta.shiftKey&&!Ck()?[Tb,0]:[cc,Tb],.8),me.isEqual(Xa,[0,0])||g.panCamera(Xa)))},onPinchStart:({event:Ta,delta:Xa,offset:ib,
origin:vb})=>{var Lb;const cc=b.current;Ta instanceof WheelEvent||!(Ta.target===cc||null!=cc&&cc.contains(Ta.target))||(null==(Lb=G.onPinchStart)?void 0:Lb.call(G,{type:"canvas",order:0,delta:[...Xa,ib[0]],offset:ib,point:me.sub(vb,m.containerOffset)},Ta),V.current=vb,ka.current=[0,0])},onPinchEnd:({event:Ta,offset:Xa,origin:ib})=>{var vb;const Lb=b.current;Ta instanceof WheelEvent||!(Ta.target===Lb||null!=Lb&&Lb.contains(Ta.target))||"pinching"!==m.state||(null==(vb=G.onPinchEnd)?void 0:vb.call(G,
{type:"canvas",order:0,delta:[0,0,Xa[0]],offset:Xa,point:me.sub(ib,m.containerOffset)},Ta),ka.current=[0,0])},onPinch:({event:Ta,offset:Xa,origin:ib})=>{var vb,Lb=b.current;if(!(Ta instanceof WheelEvent)&&(Ta.target===Lb||null!=Lb&&Lb.contains(Ta.target))){V.current||(V.current=ib);Lb=me.sub(V.current,ib);var cc=me.sub(Lb,ka.current);null==(vb=G.onPinch)?void 0:vb.call(G,{type:"canvas",order:0,delta:[...cc,Xa[0]],offset:Xa,point:me.sub(ib,m.containerOffset)},Ta);ka.current=Lb}}}),[G]);Ei(Ia,{target:b,
eventOptions:{passive:!1},pinch:{from:[g.camera.zoom,g.camera.zoom],scaleBounds:()=>({from:g.camera.zoom,max:Fo.maxZoom,min:Fo.minZoom})}})}function cj(b,g,m,G){Gv.useLayoutEffect(()=>{b.current.style.transform=`translate(
        calc(${g.minX}px - var(--tl-padding)),
        calc(${g.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[g.minX,g.minY,m,g.rotation]);Gv.useLayoutEffect(()=>{const V=b.current;V.style.width=`calc(${Math.floor(g.width)}px + (var(--tl-padding) * 2))`;V.style.height=`calc(${Math.floor(g.height)}px + (var(--tl-padding) * 2))`},[g.width,g.height]);Gv.useLayoutEffect(()=>{const V=b.current;void 0!==G&&(V.style.zIndex=G.toString())},[G])}function tj(b,g){const {onPersist:m,onSave:G,onSaveAs:V,onError:ka,onMount:qa,onCreateAssets:Ia,onCreateShapes:Ta,onDeleteAssets:Xa,onDeleteShapes:ib,
onDrop:vb,onPaste:Lb,onCopy:cc,onCanvasDBClick:Tb}=g;Ty.useLayoutEffect(()=>{const kc=[];if(b)return window.tlapps=window.tlapps||{},window.tlapps[b.uuid]=b,qa&&qa(b,null),()=>{kc.forEach(mc=>mc());window.tlapps&&delete window.tlapps[b.uuid]}},[b]);Ty.useLayoutEffect(()=>{const kc=[];m&&kc.push(b.subscribe("persist",m));G&&kc.push(b.subscribe("save",G));V&&kc.push(b.subscribe("saveAs",V));ka&&kc.push(b.subscribe("error",ka));Ta&&kc.push(b.subscribe("create-shapes",Ta));Ia&&kc.push(b.subscribe("create-assets",
Ia));ib&&kc.push(b.subscribe("delete-shapes",ib));Xa&&kc.push(b.subscribe("delete-assets",Xa));vb&&kc.push(b.subscribe("drop",vb));Lb&&kc.push(b.subscribe("paste",Lb));cc&&kc.push(b.subscribe("copy",cc));Tb&&kc.push(b.subscribe("canvas-dbclick",Tb));return()=>kc.forEach(mc=>mc())},[b,m,G,V,ka])}function hn(b){if("app"in b)return b.app;const [g]=Sy.useState(()=>new qD(b.model,b.Shapes,b.Tools,b.readOnly));Sy.useLayoutEffect(()=>{g.initKeyboardShortcuts();return()=>{g.dispose()}},[g]);return g}function Gk(b,
g){DD.useEffect(()=>{"model"in g&&g.model&&b.loadDocumentModel(g.model)},[g.model])}function yl(b){const g=si(),{viewport:{bounds:m}}=g;ED.useEffect(()=>{const G=qa=>{qa.preventDefault()},V=qa=>{if(0!==qa.touches.length){var Ia=qa.touches[0].pageX,Ta=qa.touches[0].radiusX||0;(10>Ia-Ta||Ia+Ta>m.width-10)&&qa.preventDefault()}},ka=b.current;if(!ka)return()=>{};ka.addEventListener("touchstart",G,{passive:!0});ka.addEventListener("gestureend",G,{passive:!0});ka.addEventListener("gesturechange",G,{passive:!0});
ka.addEventListener("gesturestart",G,{passive:!0});ka.addEventListener("touchstart",V,{passive:!0});return()=>{ka&&(ka.removeEventListener("touchstart",G),ka.removeEventListener("gestureend",G),ka.removeEventListener("gesturechange",G),ka.removeEventListener("gesturestart",G),ka.removeEventListener("touchstart",V))}},[b,m.width])}function zm(b,g){const {inputs:m,callbacks:G}=si();return FD.useMemo(()=>({onPointerDown:V=>{var ka,qa;const {order:Ia=0}=V;Ia||(null==(ka=V.currentTarget)?void 0:ka.setPointerCapture(V.pointerId));
ka=b.props.handles[g];null==(qa=G.onPointerDown)?void 0:qa.call(G,{type:"handle",shape:b,handle:ka,id:g,order:Ia},V);V.order=Ia+1},onPointerMove:V=>{var ka;const {order:qa=0}=V,Ia=b.props.handles[g];null==(ka=G.onPointerMove)?void 0:ka.call(G,{type:"handle",shape:b,handle:Ia,id:g,order:qa},V);V.order=qa+1},onPointerUp:V=>{var ka,qa;const {order:Ia=0}=V;Ia||(null==(ka=V.currentTarget)?void 0:ka.releasePointerCapture(V.pointerId));ka=b.props.handles[g];null==(qa=G.onPointerUp)?void 0:qa.call(G,{type:"handle",
shape:b,handle:ka,id:g,order:Ia},V);V.order=Ia+1},onPointerEnter:V=>{var ka;const {order:qa=0}=V,Ia=b.props.handles[g];null==(ka=G.onPointerEnter)?void 0:ka.call(G,{type:"handle",shape:b,handle:Ia,id:g,order:qa},V);V.order=qa+1},onPointerLeave:V=>{var ka;const {order:qa=0}=V,Ia=b.props.handles[g];null==(ka=G.onPointerLeave)?void 0:ka.call(G,{type:"handle",shape:b,handle:Ia,id:g,order:qa},V);V.order=qa+1},onKeyUp:V=>{var ka;const qa=b.props.handles[g];null==(ka=G.onKeyUp)?void 0:ka.call(G,{type:"handle",
shape:b,handle:qa,id:g,order:-1},V)},onKeyDown:V=>{var ka;const qa=b.props.handles[g];null==(ka=G.onKeyDown)?void 0:ka.call(G,{type:"handle",shape:b,handle:qa,id:g,order:-1},V)}}),[b.id,m,G])}function dj(b,g,m=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${g})${m?" scale(-1,-1) translate(0, -32)":""}'>`+b.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}
function Am(b,g,m=0){GD.useEffect(()=>{const G=b.current;G&&(G.style.cursor=zD[g](ol.radiansToDegrees(m)))},[g,m])}function Wl(b){const {viewport:g}=si(),m=$e();AD.useLayoutEffect(()=>Od(()=>{const G=Yj(()=>{var V;null==(V=b.current)?void 0:V.style.setProperty("--tl-zoom",g.camera.zoom.toString())},200);"pinching"!==m.inputs.state&&null!=g.camera.zoom&&G()}),[])}function tk(b,g=0){const [m,G]=(0,Py.useState)(b);(0,Py.useEffect)(()=>{let V=!1;const ka=setTimeout(()=>{V||G(b)},g);return()=>{V=!0;clearTimeout(ka)}},
[b,g]);return m}function Qj(){const b=$e();Qy.useEffect(()=>{se(()=>oc({},b.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+b.currentPageId,JSON.stringify(b.viewport.camera))})},[b.viewport.camera]);Qy.useEffect(()=>{var g;const m=JSON.parse(null!=(g=window.sessionStorage.getItem("logseq.tldraw.camera:"+b.currentPageId))?g:"null");m?b.viewport.update(m):b.selectedIds.size?b.api.zoomToSelection():b.api.zoomToFit()},[b])}function Xl(b){b()}function sk(b){return Le(xg(b,void 0))}
function rg(b){return{reaction:b,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+CD}}function jm(b){var g=new Map,m=1,G=new b(function(V){var ka=g.get(V);ka&&(ka.reaction.dispose(),g.delete(V))});return{addReactionToTrack:function(V,ka,qa){var Ia=m++;G.register(qa,Ia,V);V.current=rg(ka);V.current.finalizationRegistryCleanupToken=Ia;g.set(Ia,V.current);return V.current},recordReactionAsCommitted:function(V){G.unregister(V);V.current&&V.current.finalizationRegistryCleanupToken&&g.delete(V.current.finalizationRegistryCleanupToken)},
forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function rh(){function b(){void 0===G&&(G=setTimeout(g,1E4))}function g(){G=void 0;var V=Date.now();m.forEach(function(ka){var qa=ka.current;qa&&V>=qa.cleanAt&&(qa.reaction.dispose(),ka.current=null,m.delete(ka))});0<m.size&&b()}var m=new Set,G;return{addReactionToTrack:function(V,ka,qa){V.current=rg(ka);m.add(V);b();return V.current},recordReactionAsCommitted:function(V){m.delete(V)},forceCleanupTimerToRunNowForTests:function(){G&&
(clearTimeout(G),g())},resetCleanupScheduleForTests:function(){var V;if(0<m.size){try{for(var ka=bE(m),qa=ka.next();!qa.done;qa=ka.next()){var Ia=qa.value,Ta=Ia.current;Ta&&(Ta.reaction.dispose(),Ia.current=null)}}catch(ib){var Xa={error:ib}}finally{try{qa&&!qa.done&&(V=ka.return)&&V.call(ka)}finally{if(Xa)throw Xa.error;}}m.clear()}G&&(clearTimeout(G),G=void 0)}}}function Vi(){return new cE}function Jk(b,g){void 0===g&&(g="observed");var m=fz(Us.default.useState(Vi),1)[0],G=fz(Us.default.useState(),
2)[1],V=Us.default.useRef(null);if(!V.current)var ka=new sr("observer".concat(g),function(){qa.mounted?G([]):qa.changedBeforeMount=!0}),qa=yD(V,ka,m);m=V.current.reaction;Us.default.useDebugValue(m,sk);Us.default.useEffect(function(){xD(V);V.current?(V.current.mounted=!0,V.current.changedBeforeMount&&(V.current.changedBeforeMount=!1,G([]))):(V.current={reaction:new sr("observer".concat(g),function(){G([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},G([]));return function(){V.current.reaction.dispose();
V.current=null}},[]);var Ia,Ta;m.track(function(){try{Ia=b()}catch(Xa){Ta=Xa}});if(Ta)throw Ta;return Ia}function ef(b,g){var m;if(Oy&&b.$$typeof===Oy)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");g=null!==(m=null===g||void 0===g?void 0:g.forwardRef)&&void 0!==m?m:!1;var G=b,V=b.displayName||b.name;if(hz&&b.$$typeof===hz&&(g=!0,G=b.render,"function"!==
typeof G))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");m=function(ka,qa){return Jk(function(){return G(ka,qa)},V)};""!==V&&(m.displayName=V);b.contextTypes&&(m.contextTypes=b.contextTypes);g&&(m=(0,Ir.forwardRef)(m));m=(0,Ir.memo)(m);ej(b,m);return m}function ej(b,g){Object.keys(b).forEach(function(m){dE[m]||Object.defineProperty(g,m,Object.getOwnPropertyDescriptor(b,m))})}function ek(b){var g=b.render;b=b.children||g;return"function"!==typeof b?null:Jk(b)}function vk(b){const g=
$e(),{callbacks:m}=si(),G=iz.useRef(!1);iz.useEffect(()=>{const V=Ta=>{var Xa,ib;if(null==(Xa=b.current)?0:Xa.contains(document.activeElement))null==(ib=m.onKeyDown)?void 0:ib.call(m,{type:"canvas",order:-1},Ta),G.current=Ta.shiftKey},ka=Ta=>{var Xa,ib;if(null==(Xa=b.current)?0:Xa.contains(document.activeElement))null==(ib=m.onKeyUp)?void 0:ib.call(m,{type:"canvas",order:-1},Ta),G.current=Ta.shiftKey},qa=Ta=>{var Xa,ib,vb;!g.editingShape&&(null==(Xa=b.current)?0:Xa.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(vb=null==(ib=document.activeElement)?void 0:ib.tagName)?vb:"")&&(Ta.preventDefault(),g.paste(Ta,G.current))},Ia=Ta=>{var Xa,ib,vb;!g.editingShape&&0<g.selectedShapes.size&&(null==(Xa=b.current)?0:Xa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(vb=null==(ib=document.activeElement)?void 0:ib.tagName)?vb:"")&&(Ta.preventDefault(),g.copy())};window.addEventListener("keydown",V);window.addEventListener("keyup",ka);document.addEventListener("paste",
qa);document.addEventListener("copy",Ia);return()=>{window.removeEventListener("keydown",V);window.removeEventListener("keyup",ka);document.removeEventListener("paste",qa);document.removeEventListener("copy",Ia)}},[])}function Zl(b){const {inputs:g,callbacks:m}=si(),G=az.useRef(-1);return az.useMemo(()=>({onPointerDown:V=>{var ka,qa;const {order:Ia=0}=V;Ia||(null==(ka=V.currentTarget)?void 0:ka.setPointerCapture(V.pointerId));null==(qa=m.onPointerDown)?void 0:qa.call(m,{type:"shape",shape:b,order:Ia},
V);V.order=Ia+1},onPointerMove:V=>{var ka;const {order:qa=0}=V;null==(ka=m.onPointerMove)?void 0:ka.call(m,{type:"shape",shape:b,order:qa},V);V.order=qa+1},onPointerUp:V=>{var ka,qa,Ia;const {order:Ta=0}=V;Ta||(null==(ka=V.currentTarget)?void 0:ka.releasePointerCapture(V.pointerId));null==(qa=m.onPointerUp)?void 0:qa.call(m,{type:"shape",shape:b,order:Ta},V);ka=Date.now();qa=ka-G.current;300<qa?G.current=ka:300>=qa&&(null==(Ia=m.onDoubleClick)?void 0:Ia.call(m,{type:"shape",shape:b,order:Ta},V),G.current=
-1);V.order=Ta+1},onPointerEnter:V=>{var ka;const {order:qa=0}=V;null==(ka=m.onPointerEnter)?void 0:ka.call(m,{type:"shape",shape:b,order:qa},V);V.order=qa+1},onPointerLeave:V=>{var ka;const {order:qa=0}=V;null==(ka=m.onPointerLeave)?void 0:ka.call(m,{type:"shape",shape:b,order:qa},V);V.order=qa+1},onKeyUp:V=>{var ka;null==(ka=m.onKeyUp)?void 0:ka.call(m,{type:"shape",shape:b,order:-1},V)},onKeyDown:V=>{var ka;null==(ka=m.onKeyDown)?void 0:ka.call(m,{type:"shape",shape:b,order:-1},V)}}),[b.id,g,m])}
function jg(b){var {viewport:g,inputs:m,callbacks:G,components:V}=b;b=Wc(b,["viewport","inputs","callbacks","components"]);return(0,mb.jsx)(lE,{id:b.id,viewport:g,inputs:m,callbacks:G,components:V,meta:b.meta,children:(0,mb.jsx)(jE,oc({},b))})}function tf(){tf=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],G;for(G in m)Object.prototype.hasOwnProperty.call(m,G)&&(b[G]=m[G])}return b};return tf.apply(this,arguments)}function Ff(b,g,{checkForDefaultPrevented:m=
!0}={}){return function(G){null===b||void 0===b||b(G);if(!1===m||!G.defaultPrevented)return null===g||void 0===g?void 0:g(G)}}function wk(...b){return g=>b.forEach(m=>{"function"===typeof m?m(g):null!==m&&void 0!==m&&(m.current=g)})}function If(...b){return(0,oE.useCallback)(wk(...b),b)}function Kj(b,g=[]){let m=[];const G=()=>{const V=m.map(ka=>(0,Vq.createContext)(ka));return function(ka){const qa=(null===ka||void 0===ka?void 0:ka[b])||V;return(0,Vq.useMemo)(()=>({[`__scope${b}`]:Jc(oc({},ka),{[b]:qa})}),
[ka,qa])}};G.scopeName=b;return[function(V,ka){function qa(Xa){const {scope:ib,children:vb}=Xa,Lb=Wc(Xa,["scope","children"]);Xa=(null===ib||void 0===ib?void 0:ib[b][Ta])||Ia;const cc=(0,Vq.useMemo)(()=>Lb,Object.values(Lb));return(0,Vq.createElement)(Xa.Provider,{value:cc},vb)}const Ia=(0,Vq.createContext)(ka),Ta=m.length;m=[...m,ka];qa.displayName=V+"Provider";return[qa,function(Xa,ib){if(ib=(0,Vq.useContext)((null===ib||void 0===ib?void 0:ib[b][Ta])||Ia))return ib;if(void 0!==ka)return ka;throw Error(`\`${Xa}\` must be used within \`${V}\``);
}]},Yk(G,...g)]}function Yk(...b){const g=b[0];if(1===b.length)return g;const m=()=>{const G=b.map(V=>({useScope:V(),scopeName:V.scopeName}));return function(V){const ka=G.reduce((qa,{useScope:Ia,scopeName:Ta})=>{Ia=Ia(V)[`__scope${Ta}`];return oc(oc({},qa),Ia)},{});return(0,Vq.useMemo)(()=>({[`__scope${g.scopeName}`]:ka}),[ka])}};m.scopeName=g.scopeName;return m}function lg(b){return(0,Pm.isValidElement)(b)&&b.type===pz}function fj(b,g){const m=oc({},g);for(const G in g){const V=b[G],ka=g[G];/^on[A-Z]/.test(G)?
V&&ka?m[G]=(...qa)=>{ka(...qa);V(...qa)}:V&&(m[G]=V):"style"===G?m[G]=oc(oc({},V),ka):"className"===G&&(m[G]=[V,ka].filter(Boolean).join(" "))}return oc(oc({},b),m)}function il(b,g){b&&(0,pE.flushSync)(()=>b.dispatchEvent(g))}function uf(b){const g=(0,Nv.useRef)(b);(0,Nv.useEffect)(()=>{g.current=b});return(0,Nv.useMemo)(()=>(...m)=>{var G;return null===(G=g.current)||void 0===G?void 0:G.call(g,...m)},[])}function xk(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=uf(b);
(0,qE.useEffect)(()=>{const G=V=>{"Escape"===V.key&&m(V)};g.addEventListener("keydown",G);return()=>g.removeEventListener("keydown",G)},[m,g])}function Hj(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=uf(b),G=(0,Bn.useRef)(!1),V=(0,Bn.useRef)(()=>{});(0,Bn.useEffect)(()=>{const ka=Ia=>{if(Ia.target&&!G.current){let Ta=function(){Jm("dismissableLayer.pointerDownOutside",m,Xa,{discrete:!0})};const Xa={originalEvent:Ia};"touch"===Ia.pointerType?(g.removeEventListener("click",
V.current),V.current=Ta,g.addEventListener("click",V.current,{once:!0})):Ta()}G.current=!1},qa=window.setTimeout(()=>{g.addEventListener("pointerdown",ka)},0);return()=>{window.clearTimeout(qa);g.removeEventListener("pointerdown",ka);g.removeEventListener("click",V.current)}},[g,m]);return{onPointerDownCapture:()=>G.current=!0}}function Ml(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=uf(b),G=(0,Bn.useRef)(!1);(0,Bn.useEffect)(()=>{const V=ka=>{ka.target&&!G.current&&
Jm("dismissableLayer.focusOutside",m,{originalEvent:ka},{discrete:!1})};g.addEventListener("focusin",V);return()=>g.removeEventListener("focusin",V)},[g,m]);return{onFocusCapture:()=>G.current=!0,onBlurCapture:()=>G.current=!1}}function Ek(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}function Jm(b,g,m,{discrete:G}){const V=m.originalEvent.target;m=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:m});g&&V.addEventListener(b,g,{once:!0});G?il(V,m):V.dispatchEvent(m)}
function vi(b){const [g,m]=rz.useState(tE());Cn(()=>{b||m(G=>null!==G&&void 0!==G?G:String(uE++))},[b]);return b||(g?`radix-${g}`:"")}function Wi(b){return b.split("-")[0]}function uk(b){return["top","bottom"].includes(Wi(b))?"x":"y"}function fk(b){return"y"===b?"height":"width"}function ll(b,g,m){let {reference:G,floating:V}=b;var ka=G.x+G.width/2-V.width/2;const qa=G.y+G.height/2-V.height/2;b=uk(g);var Ia=fk(b);Ia=G[Ia]/2-V[Ia]/2;const Ta="x"===b;switch(Wi(g)){case "top":ka={x:ka,y:G.y-V.height};
break;case "bottom":ka={x:ka,y:G.y+G.height};break;case "right":ka={x:G.x+G.width,y:qa};break;case "left":ka={x:G.x-V.width,y:qa};break;default:ka={x:G.x,y:G.y}}switch(g.split("-")[1]){case "start":ka[b]-=Ia*(m&&Ta?-1:1);break;case "end":ka[b]+=Ia*(m&&Ta?-1:1)}return ka}function Vm(b){return"number"!=typeof b?oc({top:0,right:0,bottom:0,left:0},b):{top:b,right:b,bottom:b,left:b}}function Km(b){return Jc(oc({},b),{top:b.y,left:b.x,right:b.x+b.width,bottom:b.y+b.height})}function xl(b,g){return xf(this,
null,function*(){var m;void 0===g&&(g={});const {x:G,y:V,platform:ka,rects:qa,elements:Ia,strategy:Ta}=b,{boundary:Xa="clippingAncestors",rootBoundary:ib="viewport",elementContext:vb="floating",altBoundary:Lb=!1,padding:cc=0}=g,Tb=Vm(cc),kc=Ia[Lb?"floating"===vb?"reference":"floating":vb],mc=Km(yield ka.getClippingRect({element:null==(m=yield null==ka.isElement?void 0:ka.isElement(kc))||m?kc:kc.contextElement||(yield null==ka.getDocumentElement?void 0:ka.getDocumentElement(Ia.floating)),boundary:Xa,
rootBoundary:ib,strategy:Ta}));m=Km(ka.convertOffsetParentRelativeRectToViewportRelativeRect?yield ka.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===vb?Jc(oc({},qa.floating),{x:G,y:V}):qa.reference,offsetParent:yield null==ka.getOffsetParent?void 0:ka.getOffsetParent(Ia.floating),strategy:Ta}):qa[vb]);return{top:mc.top-m.top+Tb.top,bottom:m.bottom-mc.bottom+Tb.bottom,left:mc.left-m.left+Tb.left,right:m.right-mc.right+Tb.right}})}function km(b){return b.replace(/left|right|bottom|top/g,
g=>wE[g])}function jl(b,g,m){void 0===m&&(m=!1);const G=b.split("-")[1],V=uk(b);b=fk(V);m="x"===V?G===(m?"end":"start")?"right":"left":"start"===G?"bottom":"top";return g.reference[b]>g.floating[b]&&(m=km(m)),{main:m,cross:km(m)}}function Lj(b){return b.replace(/start|end/g,g=>xE[g])}function Kk(b,g){return{top:b.top-g.height,right:b.right-g.width,bottom:b.bottom-g.height,left:b.left-g.width}}function gk(b){return tz.some(g=>0<=b[g])}function Tj(b){return null==b?window:b&&b.document&&b.location&&
b.alert&&b.setInterval?b:(b=b.ownerDocument)&&b.defaultView||window}function Mk(b){return Tj(b).getComputedStyle(b)}function vj(b){return b&&b.document&&b.location&&b.alert&&b.setInterval?"":b?(b.nodeName||"").toLowerCase():""}function Nl(){const b=navigator.userAgentData;return null!=b&&b.brands?b.brands.map(g=>g.brand+"/"+g.version).join(" "):navigator.userAgent}function Cj(b){return b instanceof Tj(b).HTMLElement}function uj(b){return b instanceof Tj(b).Element}function Jj(b){return"undefined"==
typeof ShadowRoot?!1:b instanceof Tj(b).ShadowRoot||b instanceof ShadowRoot}function $l(b){const {overflow:g,overflowX:m,overflowY:G}=Mk(b);return/auto|scroll|overlay|hidden/.test(g+G+m)}function am(b){const g=/firefox/i.test(Nl());b=Mk(b);return"none"!==b.transform||"none"!==b.perspective||"paint"===b.contain||["transform","perspective"].includes(b.willChange)||g&&"filter"===b.willChange||g&&!!b.filter&&"none"!==b.filter}function $k(){return!/^((?!chrome|android).)*safari/i.test(Nl())}function nj(b,
g,m){var G,V,ka,qa;void 0===g&&(g=!1);void 0===m&&(m=!1);var Ia=b.getBoundingClientRect();let Ta=1,Xa=1;g&&Cj(b)&&(Ta=0<b.offsetWidth&&cu(Ia.width)/b.offsetWidth||1,Xa=0<b.offsetHeight&&cu(Ia.height)/b.offsetHeight||1);b=uj(b)?Tj(b):window;g=!$k()&&m;m=(Ia.left+(g&&null!=(G=null==(V=b.visualViewport)?void 0:V.offsetLeft)?G:0))/Ta;G=(Ia.top+(g&&null!=(ka=null==(qa=b.visualViewport)?void 0:qa.offsetTop)?ka:0))/Xa;ka=Ia.width/Ta;Ia=Ia.height/Xa;return{width:ka,height:Ia,top:G,right:m+ka,bottom:G+Ia,
left:m,x:m,y:G}}function nl(b){return(g=b,(g instanceof Tj(g).Node?b.ownerDocument:b.document)||window.document).documentElement;var g}function Sj(b){return uj(b)?{scrollLeft:b.scrollLeft,scrollTop:b.scrollTop}:{scrollLeft:b.pageXOffset,scrollTop:b.pageYOffset}}function hk(b){return nj(nl(b)).left+Sj(b).scrollLeft}function Lh(b){return"html"===vj(b)?b:b.assignedSlot||b.parentNode||(Jj(b)?b.host:null)||nl(b)}function sj(b){return Cj(b)&&"fixed"!==getComputedStyle(b).position?b.offsetParent:null}function ik(b){for(var g=
Tj(b),m=sj(b);m&&["table","td","th"].includes(vj(m))&&"static"===getComputedStyle(m).position;)m=sj(m);if(!m||"html"!==vj(m)&&("body"!==vj(m)||"static"!==getComputedStyle(m).position||am(m))){if(!m)a:{b=Lh(b);for(Jj(b)&&(b=b.host);Cj(b)&&!["html","body"].includes(vj(b));){if(am(b)){m=b;break a}b=b.parentNode}m=null}g=m||g}return g}function pk(b){if(Cj(b))return{width:b.offsetWidth,height:b.offsetHeight};b=nj(b);return{width:b.width,height:b.height}}function Ah(b){const g=Lh(b);return["html","body",
"#document"].includes(vj(g))?b.ownerDocument.body:Cj(g)&&$l(g)?g:Ah(g)}function Wg(b,g){var m;void 0===g&&(g=[]);var G=Ah(b);b=G===(null==(m=b.ownerDocument)?void 0:m.body);m=Tj(G);G=b?[m].concat(m.visualViewport||[],$l(G)?G:[]):G;g=g.concat(G);return b?g:g.concat(Wg(G))}function Dg(b,g,m){return"viewport"===g?Km(function(G,V){var ka=Tj(G),qa=nl(G);ka=ka.visualViewport;G=qa.clientWidth;qa=qa.clientHeight;let Ia=0,Ta=0;if(ka){G=ka.width;qa=ka.height;const Xa=$k();(Xa||!Xa&&"fixed"===V)&&(Ia=ka.offsetLeft,
Ta=ka.offsetTop)}return{width:G,height:qa,x:Ia,y:Ta}}(b,m)):uj(g)?function(G,V){var ka=nj(G,!1,"fixed"===V);V=ka.top+G.clientTop;ka=ka.left+G.clientLeft;return{top:V,left:ka,x:ka,y:V,right:ka+G.clientWidth,bottom:V+G.clientHeight,width:G.clientWidth,height:G.clientHeight}}(g,m):Km(function(G){var V;const ka=nl(G);var qa=Sj(G);const Ia=null==(V=G.ownerDocument)?void 0:V.body;V=Ws(ka.scrollWidth,ka.clientWidth,Ia?Ia.scrollWidth:0,Ia?Ia.clientWidth:0);const Ta=Ws(ka.scrollHeight,ka.clientHeight,Ia?Ia.scrollHeight:
0,Ia?Ia.clientHeight:0);G=-qa.scrollLeft+hk(G);qa=-qa.scrollTop;return"rtl"===Mk(Ia||ka).direction&&(G+=Ws(ka.clientWidth,Ia?Ia.clientWidth:0)-V),{width:V,height:Ta,x:G,y:qa}}(nl(b)))}function Zj(b){const g=Wg(b),m=["absolute","fixed"].includes(Mk(b).position)&&Cj(b)?ik(b):b;return uj(m)?g.filter(G=>{var V;if(V=uj(G))a:if(V=null==m.getRootNode?void 0:m.getRootNode(),G.contains(m))V=!0;else{if(V&&Jj(V)){V=m;do{if(V&&G===V){V=!0;break a}V=V.parentNode||V.host}while(V)}V=!1}return V&&"body"!==vj(G)}):
[]}function Wh(b,g,m,G){void 0===G&&(G={});const {ancestorScroll:V=!0,ancestorResize:ka=!0,elementResize:qa=!0,animationFrame:Ia=!1}=G,Ta=V&&!Ia,Xa=ka&&!Ia,ib=Ta||Xa?[...(uj(b)?Wg(b):[]),...Wg(g)]:[];ib.forEach(Tb=>{Ta&&Tb.addEventListener("scroll",m,{passive:!0});Xa&&Tb.addEventListener("resize",m)});let vb,Lb=null;if(qa){let Tb=!0;Lb=new ResizeObserver(()=>{Tb||m();Tb=!1});uj(b)&&!Ia&&Lb.observe(b);Lb.observe(g)}let cc=Ia?nj(b):null;return Ia&&function kc(){const mc=nj(b);!cc||mc.x===cc.x&&mc.y===
cc.y&&mc.width===cc.width&&mc.height===cc.height||m();cc=mc;vb=requestAnimationFrame(kc)}(),m(),()=>{var kc;ib.forEach(mc=>{Ta&&mc.removeEventListener("scroll",m);Xa&&mc.removeEventListener("resize",m)});null==(kc=Lb)||kc.disconnect();Lb=null;Ia&&cancelAnimationFrame(vb)}}function Ri(b,g){if(b===g)return!0;if(typeof b!==typeof g)return!1;if("function"===typeof b&&b.toString()===g.toString())return!0;let m,G;if(b&&g&&"object"==typeof b){if(Array.isArray(b)){var V=b.length;if(V!=g.length)return!1;for(m=
V;0!==m--;)if(!Ri(b[m],g[m]))return!1;return!0}G=Object.keys(b);V=G.length;if(V!==Object.keys(g).length)return!1;for(m=V;0!==m--;)if(!Object.prototype.hasOwnProperty.call(g,G[m]))return!1;for(m=V;0!==m--;)if(V=G[m],!("_owner"===V&&b.$$typeof||Ri(b[V],g[V])))return!1;return!0}return b!==b&&g!==g}function vg(b){const g=Dn.useRef(b);Qv(()=>{g.current=b});return g}function Yi(b){let {middleware:g,placement:m="bottom",strategy:G="absolute",whileElementsMounted:V}=void 0===b?{}:b;const ka=Dn.useRef(null),
qa=Dn.useRef(null),Ia=vg(V),Ta=Dn.useRef(null),[Xa,ib]=Dn.useState({x:null,y:null,strategy:G,placement:m,middlewareData:{}}),[vb,Lb]=Dn.useState(g);Ri(null==vb?void 0:vb.map(Ic=>{({options:Ic}=Ic);return Ic}),null==g?void 0:g.map(Ic=>{({options:Ic}=Ic);return Ic}))||Lb(g);const cc=Dn.useCallback(()=>{ka.current&&qa.current&&wz(ka.current,qa.current,{middleware:vb,placement:m,strategy:G}).then(Ic=>{Tb.current&&DE.flushSync(()=>{ib(Ic)})})},[vb,m,G]);Qv(()=>{Tb.current&&cc()},[cc]);const Tb=Dn.useRef(!1);
Qv(()=>{Tb.current=!0;return()=>{Tb.current=!1}},[]);const kc=Dn.useCallback(()=>{"function"===typeof Ta.current&&(Ta.current(),Ta.current=null);if(ka.current&&qa.current)if(Ia.current){const Ic=Ia.current(ka.current,qa.current,cc);Ta.current=Ic}else cc()},[cc,Ia]),mc=Dn.useCallback(Ic=>{ka.current=Ic;kc()},[kc]),Vb=Dn.useCallback(Ic=>{qa.current=Ic;kc()},[kc]),tc=Dn.useMemo(()=>({reference:ka,floating:qa}),[]);return Dn.useMemo(()=>Jc(oc({},Xa),{update:cc,refs:tc,reference:mc,floating:Vb}),[Xa,cc,
tc,mc,Vb])}function Sf(b){const [g,m]=(0,GE.useState)(void 0);Cn(()=>{if(b){m({width:b.offsetWidth,height:b.offsetHeight});const G=new ResizeObserver(V=>{if(Array.isArray(V)&&V.length){V=V[0];if("borderBoxSize"in V){V=V.borderBoxSize;var ka=Array.isArray(V)?V[0]:V;V=ka.inlineSize;ka=ka.blockSize}else V=b.offsetWidth,ka=b.offsetHeight;m({width:V,height:ka})}});G.observe(b,{box:"border-box"});return()=>G.unobserve(b)}m(void 0)},[b]);return g}function Ig(b){return void 0!==b}function wj(b){return null!==
b}function ki(b){const [g,m="center"]=b.split("-");return[g,m]}function mh(b,g){return(0,tp.useReducer)((m,G)=>{G=g[m][G];return null!==G&&void 0!==G?G:m},b)}function pg(b){const [g,m]=(0,tp.useState)(),G=(0,tp.useRef)({}),V=(0,tp.useRef)(b),ka=(0,tp.useRef)("none"),[qa,Ia]=mh(b?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,tp.useEffect)(()=>{const Ta=jh(G.current);
ka.current="mounted"===qa?Ta:"none"},[qa]);Cn(()=>{const Ta=G.current,Xa=V.current;if(Xa!==b){const ib=ka.current,vb=jh(Ta);b?Ia("MOUNT"):"none"===vb||"none"===(null===Ta||void 0===Ta?void 0:Ta.display)?Ia("UNMOUNT"):Xa&&ib!==vb?Ia("ANIMATION_OUT"):Ia("UNMOUNT");V.current=b}},[b,Ia]);Cn(()=>{if(g){const Ta=ib=>{const vb=jh(G.current).includes(ib.animationName);ib.target===g&&vb&&(0,PE.flushSync)(()=>Ia("ANIMATION_END"))},Xa=ib=>{ib.target===g&&(ka.current=jh(G.current))};g.addEventListener("animationstart",
Xa);g.addEventListener("animationcancel",Ta);g.addEventListener("animationend",Ta);return()=>{g.removeEventListener("animationstart",Xa);g.removeEventListener("animationcancel",Ta);g.removeEventListener("animationend",Ta)}}Ia("ANIMATION_END")},[g,Ia]);return{isPresent:["mounted","unmountSuspended"].includes(qa),ref:(0,tp.useCallback)(Ta=>{Ta&&(G.current=getComputedStyle(Ta));m(Ta)},[])}}function jh(b){return(null===b||void 0===b?void 0:b.animationName)||"none"}function Dj({prop:b,defaultProp:g,onChange:m=
()=>{}}){const [G,V]=Fi({defaultProp:g,onChange:m}),ka=void 0!==b;g=ka?b:G;const qa=uf(m);m=(0,du.useCallback)(Ia=>{ka?(Ia="function"===typeof Ia?Ia(b):Ia,Ia!==b&&qa(Ia)):V(Ia)},[ka,b,V,qa]);return[g,m]}function Fi({defaultProp:b,onChange:g}){b=(0,du.useState)(b);const [m]=b,G=(0,du.useRef)(m),V=uf(g);(0,du.useEffect)(()=>{G.current!==m&&(V(m),G.current=m)},[m,G,V]);return b}function Ti(b,g){const m=Math.abs(g.top-b.y),G=Math.abs(g.bottom-b.y),V=Math.abs(g.right-b.x);b=Math.abs(g.left-b.x);switch(Math.min(m,
G,V,b)){case b:return"left";case V:return"right";case m:return"top";case G:return"bottom";default:return null}}function Qb(b){b=b.slice();b.sort((g,m)=>g.x<m.x?-1:g.x>m.x?1:g.y<m.y?-1:g.y>m.y?1:0);return ec(b)}function ec(b){if(1>=b.length)return b.slice();const g=[];for(var m=0;m<b.length;m++){for(var G=b[m];2<=g.length;){var V=g[g.length-1],ka=g[g.length-2];if((V.x-ka.x)*(G.y-ka.y)>=(V.y-ka.y)*(G.x-ka.x))g.pop();else break}g.push(G)}g.pop();m=[];for(G=b.length-1;0<=G;G--){for(V=b[G];2<=m.length;){ka=
m[m.length-1];const qa=m[m.length-2];if((ka.x-qa.x)*(V.y-qa.y)>=(ka.y-qa.y)*(V.x-qa.x))m.pop();else break}m.push(V)}m.pop();return 1===g.length&&1===m.length&&g[0].x===m[0].x&&g[0].y===m[0].y?g:g.concat(m)}function dc(b){var {side:g,content:m,sideOffset:G=10}=b;b=Wc(b,["side","content","sideOffset"]);return m?(0,mb.jsx)($E,{delayDuration:300,children:(0,mb.jsxs)(aF,{children:[(0,mb.jsx)(bF,{asChild:!0,children:b.children}),(0,mb.jsx)(cF,{children:(0,mb.jsxs)(dF,Jc(oc({className:"tl-tooltip-content",
sideOffset:G,side:g},b),{children:[m,(0,mb.jsx)(eF,{className:"tl-tooltip-arrow"})]}))})]})}):(0,mb.jsx)(mb.Fragment,{children:b.children})}function ia(b){var {className:g,tooltip:m,tooltipSide:G}=b;b=Wc(b,["className","tooltip","tooltipSide"]);return(0,mb.jsx)(dc,{content:m,side:G,children:(0,mb.jsx)("button",oc({className:"tl-button "+(null!=g?g:"")},b))})}function Eb(b){var g=b+"CollectionProvider";const [m,G]=Kj(g),[V,ka]=m(g,{collectionRef:{current:null},itemMap:new Map}),qa=ib=>{const {scope:vb,
children:Lb}=ib;ib=dp.default.useRef(null);const cc=dp.default.useRef(new Map).current;return dp.default.createElement(V,{scope:vb,itemMap:cc,collectionRef:ib},Lb)};Object.assign(qa,{displayName:g});const Ia=b+"CollectionSlot";g=dp.default.forwardRef((ib,vb)=>{const {scope:Lb,children:cc}=ib;ib=ka(Ia,Lb);vb=If(vb,ib.collectionRef);return dp.default.createElement(Wq,{ref:vb},cc)});Object.assign(g,{displayName:Ia});const Ta=b+"CollectionItemSlot",Xa=dp.default.forwardRef((ib,vb)=>{const {scope:Lb,children:cc}=
ib,Tb=Wc(ib,["scope","children"]),kc=dp.default.useRef(null);ib=If(vb,kc);const mc=ka(Ta,Lb);dp.default.useEffect(()=>{mc.itemMap.set(kc,oc({ref:kc},Tb));return()=>void mc.itemMap.delete(kc)});return dp.default.createElement(Wq,{["data-radix-collection-item"]:"",ref:ib},cc)});Object.assign(Xa,{displayName:Ta});return[{Provider:qa,Slot:g,ItemSlot:Xa},function(ib){const vb=ka(b+"CollectionConsumer",ib);return dp.default.useCallback(()=>{const Lb=vb.collectionRef.current;if(!Lb)return[];const cc=Array.from(Lb.querySelectorAll("[data-radix-collection-item]"));
return Array.from(vb.itemMap.values()).sort((Tb,kc)=>cc.indexOf(Tb.ref.current)-cc.indexOf(kc.ref.current))},[vb.collectionRef,vb.itemMap])},G]}function Sb(b){const g=(0,Hz.useContext)(fF);return b||g||"ltr"}function ub(){(0,gF.useEffect)(()=>{var b,g;const m=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(b=m[0])&&void 0!==b?b:yb());document.body.insertAdjacentElement("beforeend",null!==(g=m[1])&&void 0!==g?g:yb());Xv++;return()=>{1===
Xv&&document.querySelectorAll("[data-radix-focus-guard]").forEach(G=>G.remove());Xv--}},[])}function yb(){const b=document.createElement("span");b.setAttribute("data-radix-focus-guard","");b.tabIndex=0;b.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return b}function Pb(b,{select:g=!1}={}){const m=document.activeElement;for(const G of b)if(Bc(G,{select:g}),document.activeElement!==m)break}function sb(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,
{acceptNode:m=>{const G="INPUT"===m.tagName&&"hidden"===m.type;return m.disabled||m.hidden||G?NodeFilter.FILTER_SKIP:0<=m.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function Mb(b,g){for(const m of b)if(!$b(m,{upTo:g}))return m}function $b(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function Bc(b,{select:g=!1}=
{}){if(b&&b.focus){const m=document.activeElement;b.focus({preventScroll:!0});b!==m&&b instanceof HTMLInputElement&&"select"in b&&g&&b.select()}}function Pc(b,g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function Uc(b){return b.filter(g=>"A"!==g.tagName)}function yd(b,g,m){b=b.key;m="rtl"!==m?b:"ArrowLeft"===b?"ArrowRight":"ArrowRight"===b?"ArrowLeft":b;if("vertical"!==g||!["ArrowLeft","ArrowRight"].includes(m))if("horizontal"!==g||!["ArrowUp","ArrowDown"].includes(m))return nF[m]}function Sd(b){const g=
document.activeElement;for(const m of b){if(m===g)break;m.focus();if(document.activeElement!==g)break}}function Gd(b,g){return b.map((m,G)=>b[(g+G)%b.length])}function Dd(b,g){var m=(0,rF.useState)(function(){return{value:b,callback:g,facade:{get current(){return m.value},set current(G){var V=m.value;V!==G&&(m.value=G,m.callback(G,V))}}}})[0];m.callback=g;return m.facade}function Hd(b,g){return Dd(g||null,function(m){return b.forEach(function(G){"function"===typeof G?G(m):G&&(G.current=m);return G})})}
function ze(b){return b}function Uf(b,g){void 0===g&&(g=ze);var m=[],G=!1;return{read:function(){if(G)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return m.length?m[m.length-1]:b},useMedium:function(V){var ka=g(V,G);m.push(ka);return function(){m=m.filter(function(qa){return qa!==ka})}},assignSyncMedium:function(V){for(G=!0;m.length;){var ka=m;m=[];ka.forEach(V)}m={push:function(qa){return V(qa)},filter:function(){return m}}},assignMedium:function(V){G=
!0;var ka=[];if(m.length){var qa=m;m=[];qa.forEach(V);ka=m}var Ia=function(){var Ta=ka;ka=[];Ta.forEach(V)};Promise.resolve().then(Ia);m={push:function(Ta){ka.push(Ta);Promise.resolve().then(Ia)},filter:function(Ta){ka=ka.filter(Ta);return m}}}}}function ve(b){const g=document.activeElement;for(const m of b){if(m===g)break;m.focus();if(document.activeElement!==g)break}}function Ze(b,g){return b.map((m,G)=>b[(g+G)%b.length])}function Qe(b,g,m){const G=1<g.length&&Array.from(g).every(ka=>ka===g[0])?
g[0]:g,V=m?b.indexOf(m):-1;b=Ze(b,Math.max(V,0));1===G.length&&(b=b.filter(ka=>ka!==m));b=b.find(ka=>ka.toLowerCase().startsWith(G.toLowerCase()));return b!==m?b:void 0}function Se(b){return g=>"mouse"===g.pointerType?b(g):void 0}function mg(b,[g,m]){return Math.min(m,Math.max(g,b))}function Of(b){const g=(0,pA.useRef)({value:b,previous:b});return(0,pA.useMemo)(()=>{g.current.value!==b&&(g.current.previous=g.current.value,g.current.value=b);return g.current.previous},[b])}function Xi(b=[],g,m){b=
[...b];b[m]=g;return b.sort((G,V)=>G-V)}function Nf(b,g,m){return 100/(m-g)*(b-g)}function eg(b,g){if(2<g)return`Value ${b+1} of ${g}`;if(2===g)return["Minimum","Maximum"][b]}function lh(b,g){if(1===b.length)return 0;b=b.map(G=>Math.abs(G-g));const m=Math.min(...b);return b.indexOf(m)}function Mg(b,g,m){b/=2;const G=bh([0,50],[0,b]);return(b-G(g)*m)*m}function Qg(b){return b.slice(0,-1).map((g,m)=>b[m+1]-g)}function bh(b,g){return m=>b[0]===b[1]||g[0]===g[1]?g[0]:g[0]+(g[1]-g[0])/(b[1]-b[0])*(m-b[0])}
function wg(b,g){g=Math.pow(10,g);return Math.round(b*g)/g}function fg(b){function g(Ta){return Ta?(0,mb.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Ta},children:(0,mb.jsx)("div",{className:`w-full h-full bg-${Ta}-500`})}):(0,mb.jsx)("div",{className:"tl-color-bg",children:(0,mb.jsx)(Eh,{name:"color-swatch"})})}var {color:m,opacity:G,popoverSide:V,setColor:ka,setOpacity:qa}=b;b=Wc(b,["color","opacity","popoverSide","setColor","setOpacity"]);const Ia=qG.default.useMemo(()=>{let Ta="";
return Yj(Xa=>{ka(Ta)},100,Xa=>{Ta=Xa.target.value})},[]);return(0,mb.jsx)(xA,Jc(oc({},b),{border:!0,arrow:!0,side:V,label:(0,mb.jsx)(dc,{content:"Color",side:V,sideOffset:14,children:g(m)}),children:(0,mb.jsxs)("div",{className:"p-1",children:[(0,mb.jsx)("div",{className:"tl-color-palette",children:Object.values(ln).map(Ta=>(0,mb.jsx)("button",{className:`tl-color-drip m-1${Ta===m?" active":""}`,onClick:()=>ka(Ta),children:g(Ta)},Ta))}),(0,mb.jsxs)("div",{className:"flex items-center tl-custom-color",
children:[(0,mb.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${ag(m)?"":"active"}`,children:(0,mb.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,mb.jsx)("input",oc({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:m,onChange:Ia,style:{opacity:ag(m)?0:1}},b))})}),(0,mb.jsx)("label",{for:"tl-custom-color-input",className:"cursor-pointer",children:"Select custom color"})]}),qa&&(0,mb.jsx)("div",{className:"mx-1 my-2",children:(0,mb.jsxs)(mG,{defaultValue:[null!=
G?G:0],onValueCommit:Ta=>qa(Ta[0]),max:1,step:.1,"aria-label":"Opacity",className:"tl-slider-root",children:[(0,mb.jsx)(nG,{className:"tl-slider-track",children:(0,mb.jsx)(oG,{className:"tl-slider-range"})}),(0,mb.jsx)(pG,{className:"tl-slider-thumb"})]})})]})}))}function Xg(b){const g=uf(b),m=(0,zf.useRef)(""),G=(0,zf.useRef)(0);b=(0,zf.useCallback)(ka=>{ka=m.current+ka;g(ka);(function Ta(Ia){m.current=Ia;window.clearTimeout(G.current);""!==Ia&&(G.current=window.setTimeout(()=>Ta(""),1E3))})(ka)},
[g]);const V=(0,zf.useCallback)(()=>{m.current="";window.clearTimeout(G.current)},[]);(0,zf.useEffect)(()=>()=>window.clearTimeout(G.current),[]);return[m,b,V]}function Lf(b,g,m){const G=1<g.length&&Array.from(g).every(ka=>ka===g[0])?g[0]:g,V=m?b.indexOf(m):-1;b=Ui(b,Math.max(V,0));1===G.length&&(b=b.filter(ka=>ka!==m));b=b.find(ka=>ka.textValue.toLowerCase().startsWith(G.toLowerCase()));return b!==m?b:void 0}function Ui(b,g){return b.map((m,G)=>b[(g+G)%b.length])}function xh(b){var {options:g,tooltip:m,
value:G,onValueChange:V}=b;b=Wc(b,["options","tooltip","value","onValueChange"]);const [ka,qa]=uG.useState(!1);return(0,mb.jsx)("div",Jc(oc({},b),{className:"tl-select-input",children:(0,mb.jsxs)(NG,{open:ka,onOpenChange:qa,value:G,onValueChange:V,children:[(0,mb.jsx)(dc,{content:m,children:(0,mb.jsxs)(OG,{className:"tl-select-input-trigger",children:[(0,mb.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,mb.jsx)(PG,{})}),(0,mb.jsx)(QG,{style:{lineHeight:1},children:(0,mb.jsx)(Eh,
{name:ka?"chevron-up":"chevron-down"})})]})}),(0,mb.jsx)(RG,{className:"tl-select-input-portal",children:(0,mb.jsxs)(SG,{className:"tl-select-input-content",children:[(0,mb.jsx)(WG,{}),(0,mb.jsx)(TG,{className:"tl-select-input-viewport",children:g.map(Ia=>(0,mb.jsx)(UG,{className:"tl-select-input-select-item",value:Ia.value,children:(0,mb.jsx)(VG,{children:Ia.label})},Ia.value))}),(0,mb.jsx)(XG,{})]})})]})}))}function Rh(b,g){return function(m){return b(g(m))}}function Uj(b,g){return g(b)}function wi(b,
g){return function(m){return b(g,m)}}function ok(b,g){return function(){return b(g)}}function Tk(b,g){g(b);return b}function kh(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return g}function tm(b){b()}function um(b){return function(){return b}}function ng(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(){g.map(tm)}}function sl(){}function mi(b,g){return b(1,g)}function Ul(b,g){b(0,g)}function el(b){b(2)}function Pj(b){return b(4)}function Vf(b,
g){return mi(b,wi(g,0))}function oh(b,g){var m=b(1,function(G){m();g(G)});return m}function Qf(){var b=[];return function(g,m){switch(g){case 2:b.splice(0,b.length);break;case 1:return b.push(m),function(){var G=b.indexOf(m);-1<G&&b.splice(G,1)};case 0:b.slice().forEach(function(G){G(m)});break;default:throw Error("unrecognized action "+g);}}}function Gf(b){var g=b,m=Qf();return function(G,V){switch(G){case 1:V(g);break;case 0:g=V;break;case 4:return g}return m(G,V)}}function vm(b){var g,m;return function(G,
V){switch(G){case 1:if(V){if(m===V)break;g&&g();m=V;return g=b(1,V)}g&&g();return sl;case 2:g&&g();m=null;break;default:throw Error("unrecognized action "+G);}}}function Fh(b){return Tk(Qf(),function(g){return Vf(b,g)})}function Oi(b,g){return Tk(Gf(g),function(m){return Vf(b,m)})}function Ee(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(G){return g.reduceRight(Uj,G)}}function ke(b){for(var g=arguments.length,m=Array(1<g?g-1:0),G=1;G<g;G++)m[G-1]=arguments[G];
var V=Ee.apply(void 0,m);return function(ka,qa){switch(ka){case 1:return mi(b,V(qa));case 2:b(2);break;default:throw Error("unrecognized action "+ka);}}}function Pe(b,g){return b===g}function Je(b){void 0===b&&(b=Pe);var g;return function(m){return function(G){b(g,G)||(g=G,m(G))}}}function ug(b){return function(g){return function(m){b(m)&&g(m)}}}function df(b){return function(g){return Rh(g,b)}}function ri(b){return function(g){return function(){return g(b)}}}function Zg(b,g){return function(m){return function(G){return m(g=
b(g,G))}}}function Nk(b){return function(g){return function(m){0<b?b--:g(m)}}}function Fe(b){var g,m;return function(G){return function(V){g=V;m||=setTimeout(function(){m=void 0;G(g)},b)}}}function Ve(b){var g,m;return function(G){return function(V){g=V;m&&clearTimeout(m);m=setTimeout(function(){G(g)},b)}}}function qg(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];var G=Array(g.length),V=0,ka=null,qa=Math.pow(2,g.length)-1;g.forEach(function(Ia,Ta){var Xa=Math.pow(2,Ta);mi(Ia,
function(ib){var vb=V;V|=Xa;G[Ta]=ib;vb!==qa&&V===qa&&ka&&(ka(),ka=null)})});return function(Ia){return function(Ta){var Xa=function(){return Ia([Ta].concat(G))};V===qa?Xa():ka=Xa}}}function Ae(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(G,V){switch(G){case 1:return ng.apply(void 0,g.map(function(ka){return ka(1,V)}));case 2:break;default:throw Error("unrecognized action "+G);}}}function Vg(b,g){void 0===g&&(g=Pe);return ke(b,Je(g))}function Hi(){for(var b=
Qf(),g=arguments.length,m=Array(g),G=0;G<g;G++)m[G]=arguments[G];var V=Array(m.length),ka=0,qa=Math.pow(2,m.length)-1;m.forEach(function(Ia,Ta){var Xa=Math.pow(2,Ta);mi(Ia,function(ib){V[Ta]=ib;ka|=Xa;ka===qa&&b(0,V)})});return function(Ia,Ta){switch(Ia){case 1:return ka===qa&&Ta(V),b(1,Ta);case 2:b(2);break;default:throw Error("unrecognized action "+Ia);}}}function ph(b,g,m){void 0===g&&(g=[]);m=(void 0===m?{singleton:!0}:m).singleton;return{id:Symbol(),constructor:b,dependencies:g,singleton:m}}
function xi(b){var g=new Map;return function V(G){var ka=G.id,qa=G.constructor,Ia=G.dependencies;if((G=G.singleton)&&g.has(ka))return g.get(ka);qa=qa(Ia.map(function(Ta){return V(Ta)}));G&&g.set(ka,qa);return qa}(b)}function yh(b,g){if(null==b)return{};var m={},G=Object.keys(b),V;for(V=0;V<G.length;V++){var ka=G[V];0<=g.indexOf(ka)||(m[ka]=b[ka])}return m}function Ef(b,g){if(b){if("string"===typeof b)return $g(b,g);var m=Object.prototype.toString.call(b).slice(8,-1);"Object"===m&&b.constructor&&(m=
b.constructor.name);if("Map"===m||"Set"===m)return Array.from(b);if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return $g(b,g)}}function $g(b,g){if(null==g||g>b.length)g=b.length;for(var m=0,G=Array(g);m<g;m++)G[m]=b[m];return G}function Bl(b,g){var m="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=m.call(b)).next.bind(m);if(Array.isArray(b)||(m=Ef(b))||g&&b&&"number"===typeof b.length){m&&(b=m);var G=0;return function(){return G>=b.length?{done:!0}:
{done:!1,value:b[G++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function fm(b,g){for(var m={},G={},V=0,ka=b.length;V<ka;)G[b[V]]=1,V+=1;for(var qa in g)G.hasOwnProperty(qa)||(m[qa]=g[qa]);return m}function Pf(b,g,m){function G(vb,Lb){vb.propsReady&&(0,vb.propsReady)(0,!1);for(var cc=Bl(qa),Tb;!(Tb=cc()).done;)Tb=Tb.value,(0,vb[g.required[Tb]])(0,Lb[Tb]);for(cc=Bl(Ia);!(Tb=cc()).done;)if(Tb=
Tb.value,Tb in Lb)(0,vb[g.optional[Tb]])(0,Lb[Tb]);vb.propsReady&&(0,vb.propsReady)(0,!0)}function V(vb){return Ta.reduce(function(Lb,cc){Lb[cc]=function(Tb){(0,vb[g.methods[cc]])(0,Tb)};return Lb},{})}function ka(vb){return Xa.reduce(function(Lb,cc){Lb[cc]=vm(vb[g.events[cc]]);return Lb},{})}var qa=Object.keys(g.required||{}),Ia=Object.keys(g.optional||{}),Ta=Object.keys(g.methods||{}),Xa=Object.keys(g.events||{}),ib=(0,En.createContext)({});return{Component:(0,En.forwardRef)(function(vb,Lb){var cc=
vb.children,Tb=yh(vb,$G),kc=(0,En.useState)(function(){return Tk(xi(b),function(Vb){return G(Vb,Tb)})})[0],mc=(0,En.useState)(ok(ka,kc))[0];vu(function(){for(var Vb=Bl(Xa),tc;!(tc=Vb()).done;)if(tc=tc.value,tc in Tb)(0,mc[tc])(1,Tb[tc]);return function(){Object.values(mc).map(el)}},[Tb,mc,kc]);vu(function(){G(kc,Tb)});(0,En.useImperativeHandle)(Lb,um(V(kc)));return(0,En.createElement)(ib.Provider,{value:kc},m?(0,En.createElement)(m,fm([].concat(qa,Ia,Xa),Tb),cc):cc)}),usePublisher:function(vb){return(0,En.useCallback)(wi(Ul,
(0,En.useContext)(ib)[vb]),[vb])},useEmitterValue:function(vb){var Lb=(0,En.useContext)(ib)[vb];vb=(0,En.useState)(ok(Pj,Lb));var cc=vb[0],Tb=vb[1];vu(function(){return mi(Lb,function(kc){kc!==cc&&Tb(um(kc))})},[Lb,cc]);return cc},useEmitter:function(vb,Lb){var cc=(0,En.useContext)(ib)[vb];vu(function(){return cc(1,Lb)},[Lb,cc])}}}function Ng(){return Ng=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],G;for(G in m)Object.prototype.hasOwnProperty.call(m,G)&&(b[G]=
m[G])}return b},Ng.apply(this,arguments)}function jk(b,g){if(null==b)return{};var m,G,V={},ka=Object.keys(b);for(G=0;G<ka.length;G++)0<=g.indexOf(m=ka[G])||(V[m]=b[m]);return V}function Jf(b,g){(null==g||g>b.length)&&(g=b.length);for(var m=0,G=Array(g);m<g;m++)G[m]=b[m];return G}function kk(b,g){var m="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=m.call(b)).next.bind(m);if(Array.isArray(b)||(m=function(V,ka){if(V){if("string"==typeof V)return Jf(V,ka);var qa=Object.prototype.toString.call(V).slice(8,
-1);return"Object"===qa&&V.constructor&&(qa=V.constructor.name),"Map"===qa||"Set"===qa?Array.from(V):"Arguments"===qa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qa)?Jf(V,ka):void 0}}(b))||g&&b&&"number"==typeof b.length){m&&(b=m);var G=0;return function(){return G>=b.length?{done:!0}:{done:!1,value:b[G++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Dh(b,g){void 0===g&&
(g=!0);var m=(0,hi.useRef)(null),G=function(ka){};if("undefined"!=typeof ResizeObserver){var V=new ResizeObserver(function(ka){ka=ka[0].target;null!==ka.offsetParent&&b(ka)});G=function(ka){ka&&g?(V.observe(ka),m.current=ka):(m.current&&V.unobserve(m.current),m.current=null)}}return{ref:m,callbackRef:G}}function zh(b,g){return void 0===g&&(g=!0),Dh(b,g).callbackRef}function mn(b,g,m,G,V,ka,qa){return Dh(function(Ia){for(var Ta=function(vb,Lb,cc,Tb){cc=vb.length;if(0===cc)return null;for(var kc=[],
mc=0;mc<cc;mc++){var Vb=vb.item(mc);if(Vb&&void 0!==Vb.dataset.index){var tc=parseInt(Vb.dataset.index),Ic=parseFloat(Vb.dataset.knownSize),Sc=Lb(Vb,"offsetHeight");if(0===Sc&&Tb("Zero-sized element, this should not happen",{child:Vb},qm.ERROR),Sc!==Ic)Vb=kc[kc.length-1],0===kc.length||Vb.size!==Sc||Vb.endIndex!==tc-1?kc.push({startIndex:tc,endIndex:tc,size:Sc}):kc[kc.length-1].endIndex++}}return kc}(Ia.children,g,0,V),Xa=Ia.parentElement;!Xa.dataset.virtuosoScroller;)Xa=Xa.parentElement;var ib="window"===
Xa.firstElementChild.dataset.viewportType;G({scrollTop:Math.max(qa?qa.scrollTop:ib?window.pageYOffset||document.documentElement.scrollTop:Xa.scrollTop,0),scrollHeight:qa?qa.scrollHeight:ib?document.documentElement.scrollHeight:Xa.scrollHeight,viewportHeight:qa?qa.offsetHeight:ib?window.innerHeight:Xa.offsetHeight});null==ka||ka(function(vb,Lb,cc){return"normal"===Lb||null!=Lb&&Lb.endsWith("px")||cc("row-gap was not resolved to pixel value correctly",Lb,qm.WARN),"normal"===Lb?0:parseInt(null!=Lb?Lb:
"0",10)}(0,getComputedStyle(Ia).rowGap,V));null!==Ta&&b(Ta)},m)}function zj(b,g){return Math.round(b.getBoundingClientRect()[g])}function ql(b,g,m,G,V){void 0===G&&(G=sl);var ka=(0,hi.useRef)(null),qa=(0,hi.useRef)(null),Ia=(0,hi.useRef)(null),Ta=(0,hi.useRef)(!1),Xa=(0,hi.useCallback)(function(ib){ib=ib.target;var vb=ib===window||ib===document,Lb=vb?window.pageYOffset||document.documentElement.scrollTop:ib.scrollTop,cc=vb?document.documentElement.scrollHeight:ib.scrollHeight,Tb=vb?window.innerHeight:
ib.offsetHeight;ib=function(){b({scrollTop:Math.max(Lb,0),scrollHeight:cc,viewportHeight:Tb})};Ta.current?(0,aH.flushSync)(ib):ib();Ta.current=!1;null!==qa.current&&(Lb===qa.current||0>=Lb||Lb===cc-Tb)&&(qa.current=null,g(!0),Ia.current&&(clearTimeout(Ia.current),Ia.current=null))},[b,g]);return(0,hi.useEffect)(function(){var ib=V||ka.current;return G(V||ka.current),Xa({target:ib}),ib.addEventListener("scroll",Xa,{passive:!0}),function(){G(null);ib.removeEventListener("scroll",Xa)}},[ka,Xa,m,G,V]),
{scrollerRef:ka,scrollByCallback:function(ib){Ta.current=!0;ka.current.scrollBy(ib)},scrollToCallback:function(ib){var vb=ka.current;if(vb&&!("offsetHeight"in vb&&0===vb.offsetHeight)){var Lb,cc,Tb,kc="smooth"===ib.behavior;if(vb===window?(cc=Math.max(zj(document.documentElement,"height"),document.documentElement.scrollHeight),Lb=window.innerHeight,Tb=document.documentElement.scrollTop):(cc=vb.scrollHeight,Lb=zj(vb,"height"),Tb=vb.scrollTop),ib.top=Math.ceil(Math.max(Math.min(cc-Lb,ib.top),0)),1.01>
Math.abs(Lb-cc)||ib.top===Tb)return b({scrollTop:Tb,scrollHeight:cc,viewportHeight:Lb}),void(kc&&g(!0));kc?(qa.current=ib.top,Ia.current&&clearTimeout(Ia.current),Ia.current=setTimeout(function(){Ia.current=null;qa.current=null;g(!0)},1E3)):qa.current=null;vb.scrollTo(ib)}}}}function Il(b,g,m,G,V){return void 0===G&&(G=Mi),void 0===V&&(V=Mi),{k:b,v:g,lvl:m,l:G,r:V}}function Ol(b,g){if(b===Mi)return Mi;var m=b.k,G=b.l,V=b.r;if(g===m){if(G===Mi)return V;if(V===Mi)return G;g=Sm(G);return Mm(sh(b,{k:g[0],
v:g[1],l:gj(G)}))}return Mm(sh(b,g<m?{l:Ol(G,g)}:{r:Ol(V,g)}))}function yi(b,g,m){return(void 0===m&&(m="k"),b===Mi)?[-Infinity,void 0]:b[m]===g?[b.k,b.v]:b[m]<g?(g=yi(b.r,g,m),-Infinity===g[0]?[b.k,b.v]:g):yi(b.l,g,m)}function Pl(b,g,m){return b===Mi?Il(g,m,1):g===b.k?sh(b,{k:g,v:m}):Ii(nn(sh(b,g<b.k?{l:Pl(b.l,g,m)}:{r:Pl(b.r,g,m)})))}function tl(b,g,m){if(b===Mi)return[];var G=b.k,V=b.v,ka=b.r,qa=[];return G>g&&(qa=qa.concat(tl(b.l,g,m))),G>=g&&G<=m&&qa.push({k:G,v:V}),G<=m&&(qa=qa.concat(tl(ka,
g,m))),qa}function Qh(b){return b===Mi?[]:[].concat(Qh(b.l),[{k:b.k,v:b.v}],Qh(b.r))}function Sm(b){return b.r===Mi?[b.k,b.v]:Sm(b.r)}function gj(b){return b.r===Mi?b.l:Mm(sh(b,{r:gj(b.r)}))}function sh(b,g){return Il(void 0!==g.k?g.k:b.k,void 0!==g.v?g.v:b.v,void 0!==g.lvl?g.lvl:b.lvl,void 0!==g.l?g.l:b.l,void 0!==g.r?g.r:b.r)}function Rm(b){return b===Mi||b.lvl>b.r.lvl}function Mm(b){var g=b.l,m=b.r,G=b.lvl;if(m.lvl>=G-1&&g.lvl>=G-1)return b;if(G>m.lvl+1){if(Rm(g))return nn(sh(b,{lvl:G-1}));if(g===
Mi||g.r===Mi)throw Error("Unexpected empty nodes");return sh(g.r,{l:sh(g,{r:g.r.l}),r:sh(b,{l:g.r.r,lvl:G-1}),lvl:G})}if(Rm(b))return Ii(sh(b,{lvl:G-1}));if(m===Mi||m.l===Mi)throw Error("Unexpected empty nodes");g=m.l;var V=Rm(g)?m.lvl-1:m.lvl;return sh(g,{l:sh(b,{r:g.l,lvl:G-1}),r:Ii(sh(m,{l:g.r,lvl:V})),lvl:g.lvl+1})}function rj(b,g,m){return b===Mi?[]:cg(tl(b,yi(b,g)[0],m),function(G){return{index:G.k,value:G.v}})}function cg(b,g){var m=b.length;if(0===m)return[];var G=g(b[0]),V=G.index;G=G.value;
for(var ka=[],qa=1;qa<m;qa++){var Ia=g(b[qa]),Ta=Ia.index;Ia=Ia.value;ka.push({start:V,end:Ta-1,value:G});V=Ta;G=Ia}return ka.push({start:V,end:Infinity,value:G}),ka}function Ii(b){var g=b.r,m=b.lvl;return g===Mi||g.r===Mi||g.lvl!==m||g.r.lvl!==m?b:sh(g,{l:sh(b,{r:g.l}),lvl:m+1})}function nn(b){var g=b.l;return g===Mi||g.lvl!==b.lvl?b:sh(g,{r:sh(b,{l:g.r})})}function Jl(b,g,m,G){void 0===G&&(G=0);for(var V=b.length-1;G<=V;){var ka=Math.floor((G+V)/2),qa=m(b[ka],g);if(0===qa)return ka;if(-1===qa){if(2>
V-G)return ka-1;V=ka-1}else{if(V===G)return ka;G=ka+1}}throw Error("Failed binary finding record in array - "+b.join(",")+", searched for "+g);}function y(b){var g=b.size,m=b.startIndex,G=b.endIndex;return function(V){return V.start===m&&(V.end===G||Infinity===V.end)&&V.value===g}}function U(b,g){b=b.index;return g===b?0:g<b?-1:1}function xa(b,g){b=b.offset;return g===b?0:g<b?-1:1}function ua(b){return{index:b.index,value:b}}function Fa(b,g,m,G){var V=0,ka=0,qa=0,Ia;0!==g?(qa=b[Ia=Jl(b,g-1,U)].offset,
ka=yi(m,g-1),V=ka[0],ka=ka[1],b.length&&b[Ia].size===yi(m,g)[1]&&--Ia,b=b.slice(0,Ia+1)):b=[];for(g=kk(rj(m,g,Infinity));!(m=g()).done;)Ia=m.value,m=Ia.start,Ia=Ia.value,V=m-V,qa=V*ka+qa+V*G,b.push({offset:qa,size:Ia,index:m}),V=m,ka=Ia;return{offsetTree:b,lastIndex:V,lastOffset:qa,lastSize:ka}}function ab(b,g){var m=g[0],G=g[1],V=g[3];0<m.length&&(0,g[2])("received item sizes",m,qm.DEBUG);var ka=b.sizeTree;g=ka;var qa=0;if(0<G.length&&ka===Mi&&2===m.length){var Ia=m[0].size,Ta=m[1].size;g=G.reduce(function(ib,
vb){return Pl(Pl(ib,vb,Ia),vb+1,Ta)},g)}else m=function(ib,vb){var Lb,cc=ib===Mi?0:Infinity;for(vb=kk(vb);!(Lb=vb()).done;){var Tb=Lb.value;Lb=Tb.size;var kc=Tb.startIndex,mc=Tb.endIndex;if(cc=Math.min(cc,kc),ib===Mi)ib=Pl(ib,0,Lb);else{var Vb=rj(ib,kc-1,mc+1);if(!Vb.some(y(Tb))){var tc,Ic=Tb=!1;for(Vb=kk(Vb);!(tc=Vb()).done;){var Sc=tc.value;tc=Sc.start;var Xc=Sc.end;Sc=Sc.value;Tb?(mc>=tc||Lb===Sc)&&(ib=Ol(ib,tc)):(Ic=Sc!==Lb,Tb=!0);Xc>mc&&mc>=tc&&Sc!==Lb&&(ib=Pl(ib,mc+1,Sc))}Ic&&(ib=Pl(ib,kc,Lb))}}}return[ib,
cc]}(g,m),g=m[0],qa=m[1];if(g===ka)return b;b=Fa(b.offsetTree,qa,g,V);var Xa=b.offsetTree;return{sizeTree:g,offsetTree:Xa,lastIndex:b.lastIndex,lastOffset:b.lastOffset,lastSize:b.lastSize,groupOffsetTree:G.reduce(function(ib,vb){return Pl(ib,vb,pb(vb,Xa,V))},Mi),groupIndices:G}}function pb(b,g,m){if(0===g.length)return 0;g=g[Jl(g,b,U)];b-=g.index;b=g.size*b+(b-1)*m+g.offset;return 0<b?b+m:b}function tb(b,g,m){if(void 0!==b.groupIndex)return g.groupIndices[b.groupIndex]+1;b=Zb("LAST"===b.index?m:b.index,
g);return Math.max(0,b,Math.min(m,b))}function Zb(b,g){if(g.groupOffsetTree===Mi)return b;for(var m=0;g.groupIndices[m]<=b+m;)m++;return b+m}function Cc(b){b="number"==typeof b?{index:b}:b;return b.align||(b.align="start"),b.behavior&&eH||(b.behavior="auto"),b.offset||(b.offset=0),b}function Dc(b){return!!b&&("smooth"===b?"smooth":"auto")}function Ld(b){return b.reduce(function(g,m){return g.groupIndices.push(g.totalCount),g.totalCount+=m+1,g},{totalCount:0,groupIndices:[]})}function Nd(b,g){return!(!b||
b[0]!==g[0]||b[1]!==g[1])}function ud(b,g){return!(!b||b.startIndex!==g.startIndex||b.endIndex!==g.endIndex)}function Ce(b,g,m){return"number"==typeof b?"up"===m&&"top"===g||"down"===m&&"bottom"===g?b:0:"up"===m?"top"===g?b.main:b.reverse:"bottom"===g?b.main:b.reverse}function Af(b,g,m){if(0===b.length)return[];if(g.groupOffsetTree===Mi)return b.map(function(Ta){return Ng({},Ta,{index:Ta.index+m,originalIndex:Ta.index})});var G,V=[],ka=rj(g.groupOffsetTree,b[0].index,b[b.length-1].index),qa=void 0,
Ia=0;for(b=kk(b);!(G=b()).done;)G=G.value,(!qa||qa.end<G.index)&&(qa=ka.shift(),Ia=g.groupIndices.indexOf(qa.start)),V.push(Ng({},G.index===qa.start?{type:"group",index:Ia}:{index:G.index-(Ia+1)+m,groupIndex:Ia},{size:G.size,offset:G.offset,originalIndex:G.index,data:G.data}));return V}function Cg(b,g,m,G,V,ka){var qa=0,Ia=0;0<b.length&&(qa=b[0].offset,Ia=b[b.length-1],Ia=Ia.offset+Ia.size);var Ta=m-V.lastIndex,Xa=qa;G=V.lastOffset+Ta*V.lastSize+(Ta-1)*G-Ia;return{items:Af(b,V,ka),topItems:Af(g,V,
ka),topListHeight:g.reduce(function(ib,vb){return vb.size+ib},0),offsetTop:qa,offsetBottom:G,top:Xa,bottom:Ia,totalCount:m,firstItemIndex:ka}}function xj(b){var g,m=!1;return function(){return m||(m=!0,g=b()),g}}function kg(b,g){var m=(0,hi.useRef)(null),G=(0,hi.useCallback)(function(Ta){if(null!==Ta&&Ta.offsetParent){var Xa=Ta.getBoundingClientRect();Ta=Xa.width;if(g){var ib=g.getBoundingClientRect();Xa=Xa.top-ib.top;ib=ib.height-Math.max(0,Xa);Xa+=g.scrollTop}else ib=window.innerHeight-Math.max(0,
Xa.top),Xa=Xa.top+window.pageYOffset;m.current={offsetTop:Xa,visibleHeight:ib,visibleWidth:Ta};b(m.current)}},[b,g]),V=Dh(G),ka=V.callbackRef,qa=V.ref,Ia=(0,hi.useCallback)(function(){G(qa.current)},[G,qa]);return(0,hi.useEffect)(function(){if(g){g.addEventListener("scroll",Ia);var Ta=new ResizeObserver(Ia);return Ta.observe(g),function(){g.removeEventListener("scroll",Ia);Ta.unobserve(g)}}return window.addEventListener("scroll",Ia),window.addEventListener("resize",Ia),function(){window.removeEventListener("scroll",
Ia);window.removeEventListener("resize",Ia)}},[Ia,g]),ka}function gh(b){return b}function Gh(b,g){var m=Qf();return mi(m,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+g,"color: red;","color: inherit;","color: blue;")}),Vf(m,b),m}function Og(b,g){if("string"!=typeof b)return{context:g}}function Sh(b){var g=b.usePublisher,m=b.useEmitter,G=b.useEmitterValue;return fh.memo(function(V){var ka=V.style,qa=V.children;V=jk(V,sH);var Ia=g("scrollContainerState"),Ta=
G("ScrollerComponent"),Xa=g("smoothScrollTargetReached"),ib=G("scrollerRef"),vb=G("context");Ia=ql(Ia,Xa,Ta,ib);Xa=Ia.scrollerRef;ib=Ia.scrollByCallback;return m("scrollTo",Ia.scrollToCallback),m("scrollBy",ib),(0,hi.createElement)(Ta,Ng({ref:Xa,style:Ng({},zH,ka),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},V,Og(Ta,vb)),qa)})}function $f(b){var g=b.usePublisher,m=b.useEmitter,G=b.useEmitterValue;return fh.memo(function(V){var ka=V.style,qa=V.children;V=jk(V,tH);var Ia=
g("windowScrollContainerState"),Ta=G("ScrollerComponent"),Xa=g("smoothScrollTargetReached"),ib=G("totalListHeight"),vb=G("deviation"),Lb=G("customScrollParent"),cc=G("context");Xa=ql(Ia,Xa,Ta,sl,Lb);var Tb=Xa.scrollerRef;Ia=Xa.scrollByCallback;Xa=Xa.scrollToCallback;return bH(function(){return Tb.current=Lb||window,function(){Tb.current=null}},[Tb,Lb]),m("windowScrollTo",Xa),m("scrollBy",Ia),(0,hi.createElement)(Ta,Ng({style:Ng({position:"relative"},ka,0!==ib?{height:ib+vb}:{}),"data-virtuoso-scroller":!0},
V,Og(Ta,cc)),qa)})}function Mf(b,g,m){return Array.from({length:g-b+1}).map(function(G,V){return{index:V+b,data:null==m?void 0:m[V+b]}})}function Hh(b,g){return b&&b.column===g.column&&b.row===g.row}function hh(b,g,m,G){var V=m.height;return void 0===V||0===G.length?{top:0,bottom:0}:{top:hj(b,g,m,G[0].index),bottom:hj(b,g,m,G[G.length-1].index)+V}}function hj(b,g,m,G){var V=g.column;b=Sr(1,yu((b.width+V)/(m.width+V)));G=yu(G/b);m=G*m.height+Sr(0,G-1)*g.row;return 0<m?m+g.row:m}function Ai(b,g,m){return"normal"===
g||null!=g&&g.endsWith("px")||m(b+" was not resolved to pixel value correctly",g,qm.WARN),"normal"===g?0:parseInt(null!=g?g:"0",10)}function qj(b,g){qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,G){m.__proto__=G;return m};return qj(b,g)}function Vl(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;qj(b,g)}function yk(b){yk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)};return yk(b)}function Lm(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}function wo(b,g,m){wo=Lm()?Reflect.construct.bind():function(G,V,ka){var qa=[null];qa.push.apply(qa,V);G=new (Function.bind.apply(G,qa));ka&&qj(G,ka.prototype);return G};return wo.apply(null,arguments)}function Wm(b){var g="function"===typeof Map?new Map:void 0;Wm=function(m){function G(){return wo(m,
arguments,yk(this).constructor)}if(null===m||-1===Function.toString.call(m).indexOf("[native code]"))return m;if("function"!==typeof m)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof g){if(g.has(m))return g.get(m);g.set(m,G)}G.prototype=Object.create(m.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}});return qj(G,m)};return Wm(b)}function ih(b,g,m){return Math.round(255*b)+","+Math.round(255*g)+","+Math.round(255*m)}function Bm(b,
g,m,G){void 0===G&&(G=ih);if(0===g)return G(m,m,m);b=(b%360+360)%360/60;var V=(1-Math.abs(2*m-1))*g,ka=V*(1-Math.abs(b%2-1)),qa=g=0,Ia=0;0<=b&&1>b?(g=V,qa=ka):1<=b&&2>b?(g=ka,qa=V):2<=b&&3>b?(qa=V,Ia=ka):3<=b&&4>b?(qa=ka,Ia=V):4<=b&&5>b?(g=ka,Ia=V):5<=b&&6>b&&(g=V,Ia=ka);m-=V/2;return G(g+m,qa+m,Ia+m)}function ul(b){if("string"!==typeof b)throw new fp(3);if("string"===typeof b){var g=b.toLowerCase();b=QA[g]?"#"+QA[g]:b}if(b.match(dI))return{red:parseInt(""+b[1]+b[2],16),green:parseInt(""+b[3]+b[4],
16),blue:parseInt(""+b[5]+b[6],16)};if(b.match(eI))return g=parseFloat((parseInt(""+b[7]+b[8],16)/255).toFixed(2)),{red:parseInt(""+b[1]+b[2],16),green:parseInt(""+b[3]+b[4],16),blue:parseInt(""+b[5]+b[6],16),alpha:g};if(b.match(fI))return{red:parseInt(""+b[1]+b[1],16),green:parseInt(""+b[2]+b[2],16),blue:parseInt(""+b[3]+b[3],16)};if(b.match(gI))return g=parseFloat((parseInt(""+b[4]+b[4],16)/255).toFixed(2)),{red:parseInt(""+b[1]+b[1],16),green:parseInt(""+b[2]+b[2],16),blue:parseInt(""+b[3]+b[3],
16),alpha:g};if(g=sw.exec(b))return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10)};if(g=hI.exec(b.substring(0,50)))return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10),alpha:1<parseFloat(""+g[4])?parseFloat(""+g[4])/100:parseFloat(""+g[4])};var m=iI.exec(b);if(m){g=parseInt(""+m[1],10);var G=parseInt(""+m[2],10)/100;m=parseInt(""+m[3],10)/100;g="rgb("+Bm(g,G,m)+")";G=sw.exec(g);if(!G)throw new fp(4,b,g);return{red:parseInt(""+G[1],10),
green:parseInt(""+G[2],10),blue:parseInt(""+G[3],10)}}if(g=jI.exec(b.substring(0,50))){G=parseInt(""+g[1],10);m=parseInt(""+g[2],10)/100;var V=parseInt(""+g[3],10)/100;G="rgb("+Bm(G,m,V)+")";m=sw.exec(G);if(!m)throw new fp(4,b,G);return{red:parseInt(""+m[1],10),green:parseInt(""+m[2],10),blue:parseInt(""+m[3],10),alpha:1<parseFloat(""+g[4])?parseFloat(""+g[4])/100:parseFloat(""+g[4])}}throw new fp(5);}function gm(b){b=b.toString(16);return 1===b.length?"0"+b:b}function en(b,g,m){return tw("#"+gm(Math.round(255*
b))+gm(Math.round(255*g))+gm(Math.round(255*m)))}function ao(b,g,m){if("number"===typeof b&&"number"===typeof g&&"number"===typeof m)return tw("#"+gm(b)+gm(g)+gm(m));if("object"===typeof b&&void 0===g&&void 0===m)return tw("#"+gm(b.red)+gm(b.green)+gm(b.blue));throw new fp(6);}function po(b){if("object"!==typeof b)throw new fp(8);if("number"===typeof b.red&&"number"===typeof b.green&&"number"===typeof b.blue&&"number"===typeof b.alpha){if("object"===typeof b)b=1<=b.alpha?ao(b.red,b.green,b.blue):
"rgba("+b.red+","+b.green+","+b.blue+","+b.alpha+")";else throw new fp(7);return b}if("number"===typeof b.red&&"number"===typeof b.green&&"number"===typeof b.blue&&("number"!==typeof b.alpha||"undefined"===typeof b.alpha))return ao(b);if("number"===typeof b.hue&&"number"===typeof b.saturation&&"number"===typeof b.lightness&&"number"===typeof b.alpha){if("object"===typeof b)b=1<=b.alpha?Bm(b.hue,b.saturation,b.lightness,en):"rgba("+Bm(b.hue,b.saturation,b.lightness)+","+b.alpha+")";else throw new fp(2);
return b}if("number"===typeof b.hue&&"number"===typeof b.saturation&&"number"===typeof b.lightness&&("number"!==typeof b.alpha||"undefined"===typeof b.alpha)){if("object"===typeof b)b=Bm(b.hue,b.saturation,b.lightness,en);else throw new fp(1);return b}throw new fp(8);}function hm(b,g,m){return function(){var G=m.concat(Array.prototype.slice.call(arguments));return G.length>=g?b.apply(this,G):hm(b,g,G)}}function Tm(b,g){if("transparent"===g)return g;g=ul(g);var m=g.red/255,G=g.green/255,V=g.blue/255,
ka=Math.max(m,G,V),qa=Math.min(m,G,V),Ia=(ka+qa)/2;if(ka===qa)g=void 0!==g.alpha?{hue:0,saturation:0,lightness:Ia,alpha:g.alpha}:{hue:0,saturation:0,lightness:Ia};else{var Ta=ka-qa;qa=.5<Ia?Ta/(2-ka-qa):Ta/(ka+qa);switch(ka){case m:m=(G-V)/Ta+(G<V?6:0);break;case G:m=(V-m)/Ta+2;break;default:m=(m-G)/Ta+4}m*=60;g=void 0!==g.alpha?{hue:m,saturation:qa,lightness:Ia,alpha:g.alpha}:{hue:m,saturation:qa,lightness:Ia}}Ia=tf;b=g.lightness-parseFloat(b);return po(Ia({},g,{lightness:Math.max(0,Math.min(1,b))}))}
function aj(b,g){var m;void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));void 0!==g.opacity&&(g.opacity=Math.min(1,Math.max(g.opacity,0)));let G=null!=(m=g.fill)?m:b.props.fill;void 0===G||ag(G)||"var(--ls-secondary-background-color)"===G||g.noFill||!MI.includes(b.props.type)||(b=kI(.3,G),g.stroke=b);return g}function Uk({strokeWidth:b,size:g,mode:m}){return"svg"===m?(0,mb.jsx)("rect",{className:"tl-binding-indicator",x:b,y:b,rx:2,ry:2,width:Math.max(0,g[0]-2*b),height:Math.max(0,
g[1]-2*b),strokeWidth:4*b}):(0,mb.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function Hm(){const b=$e();return"panning"===b.inputs.state||"pinching"===b.inputs.state}function xn({left:b,middle:g,right:m,stroke:G,strokeWidth:V}){return(0,mb.jsxs)("g",{children:[(0,mb.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${b} L ${g} ${m}`}),(0,mb.jsx)("path",{d:`M ${b} L ${g} ${m}`,fill:"none",
stroke:G,strokeWidth:V,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Im(b,g,m){g=H(b,g,b,m).points;if(!g)return console.warn("Could not find an intersection for the arrow head."),{left:b,right:b};g=(m=g[0])?me.rotWith(m,b,Math.PI/6):b;b=m?me.rotWith(m,b,-Math.PI/6):b;return{left:g,right:b}}function So(b,g,m){const {left:G,right:V}=Im(b,g,m);return`M ${G} L ${b} ${V}`}function so(b,g,m,G,V){b=b.strokeWidth;var ka=me.dist(g,m);b=Math.min(ka/3,16*b);ka=[];ka.push(`M ${g} L ${m}`);
G&&ka.push(So(g,m,b));V&&ka.push(So(m,g,b));return ka.join(" ")}function To({id:b,bounds:g,labelSize:m,offset:G,scale:V=1}){return(0,mb.jsx)("defs",{children:(0,mb.jsxs)("mask",{id:b+"_clip",children:[(0,mb.jsx)("rect",{x:-100,y:-100,width:g.width+200,height:g.height+200,fill:"white"}),(0,mb.jsx)("rect",{x:g.width/2-m[0]/2*V+((null==G?void 0:G[0])||0),y:g.height/2-m[1]/2*V+((null==G?void 0:G[1])||0),width:m[0]*V,height:m[1]*V,rx:4*V,ry:4*V,fill:"black"})]})})}function Al(b,g,m,G=V=>V){return b*G(.5-
g*(.5-m))}function kp(b){return[-b[0],-b[1]]}function bm(b,g){return[b[0]+g[0],b[1]+g[1]]}function Vj(b,g){return[b[0]-g[0],b[1]-g[1]]}function vl(b,g){return[b[0]*g,b[1]*g]}function wm(b){return[b[1],-b[0]]}function Ro(b,g){return b[0]===g[0]&&b[1]===g[1]}function qo(b){return b[0]*b[0]+b[1]*b[1]}function ro(b){var g=Math.hypot(b[0],b[1]);return[b[0]/g,b[1]/g]}function Yo(b,g){return Math.hypot(b[1]-g[1],b[0]-g[0])}function pl(b,g,m){let G=Math.sin(m);m=Math.cos(m);let V=b[0]-g[0];b=b[1]-g[1];return[V*
m-b*G+g[0],V*G+b*m+g[1]]}function xm(b,g,m){return bm(b,vl(Vj(g,b),m))}function bo(b,g,m){return bm(b,vl(g,m))}function Uo(b,g={}){let {size:m=16,smoothing:G=.5,thinning:V=.5,simulatePressure:ka=!0,easing:qa=md=>md,start:Ia={},end:Ta={},last:Xa=!1}=g,{cap:ib=!0,easing:vb=md=>md*(2-md)}=Ia,{cap:Lb=!0,easing:cc=md=>--md*md*md+1}=Ta;if(0===b.length||0>=m)return[];var Tb=b[b.length-1].runningLength;let kc=!1===Ia.taper?0:!0===Ia.taper?Math.max(m,Tb):Ia.taper,mc=!1===Ta.taper?0:!0===Ta.taper?Math.max(m,
Tb):Ta.taper;var Vb=Math.pow(m*G,2);g=[];let tc=[];var Ic=b.slice(0,10).reduce((md,od)=>{var Cd=od.pressure;ka&&(od=Wr(1,od.distance/m),Cd=Wr(1,1-od),Cd=Wr(1,md+.275*(Cd-md)*od));return(md+Cd)/2},b[0].pressure),Sc=Al(m,V,b[b.length-1].pressure,qa),Xc;let Xd=b[0].vector;var ce=b[0].point;let De=ce;var Oe=ce;let qf=De;var nf=!1;for(var ff=0;ff<b.length;ff++){var {pressure:He}=b[ff];let {point:md,vector:od,distance:Cd,runningLength:xe}=b[ff];if(ff<b.length-1&&3>Tb-xe)continue;V?(ka&&(Sc=Wr(1,Cd/m),He=
Wr(1,1-Sc),He=Wr(1,Ic+.275*(He-Ic)*Sc)),Sc=Al(m,V,He,qa)):Sc=m/2;void 0===Xc&&(Xc=Sc);var Bd=xe<kc?vb(xe/kc):1,hd=Tb-xe<mc?cc((Tb-xe)/mc):1;Sc=Math.max(.01,Sc*Math.min(Bd,hd));hd=(ff<b.length-1?b[ff+1]:b[ff]).vector;let Ge=ff<b.length-1?od[0]*hd[0]+od[1]*hd[1]:1;Bd=null!==Ge&&0>Ge;if(0>od[0]*Xd[0]+od[1]*Xd[1]&&!nf||Bd){ce=vl(wm(Xd),Sc);for(let of=1/13,kf=0;1>=kf;kf+=of)Oe=pl(Vj(md,ce),md,gt*kf),g.push(Oe),qf=pl(bm(md,ce),md,gt*-kf),tc.push(qf);ce=Oe;De=qf;Bd&&(nf=!0)}else(nf=!1,ff===b.length-1)?(He=
vl(wm(od),Sc),g.push(Vj(md,He)),tc.push(bm(md,He))):(Ic=vl(wm(xm(hd,od,Ge)),Sc),Oe=Vj(md,Ic),(1>=ff||qo(Vj(ce,Oe))>Vb)&&(g.push(Oe),ce=Oe),qf=bm(md,Ic),(1>=ff||qo(Vj(De,qf))>Vb)&&(tc.push(qf),De=qf),Ic=He,Xd=od)}Tb=b[0].point.slice(0,2);Vb=1<b.length?b[b.length-1].point.slice(0,2):bm(b[0].point,[1,1]);Oe=[];nf=[];if(1===b.length){if(!kc&&!mc||Xa){b=bo(Tb,ro(wm(Vj(Tb,Vb))),-(Xc||Sc));g=[];for(let md=1/13,od=md;1>=od;od+=md)g.push(pl(b,Tb,2*gt*od));return g}}else{if(!(kc||mc&&1===b.length))if(ib)for(let md=
1/13,od=md;1>=od;od+=md)Xc=pl(tc[0],Tb,gt*od),Oe.push(Xc);else ff=Vj(g[0],tc[0]),Xc=vl(ff,.5),ff=vl(ff,.51),Oe.push(Vj(Tb,Xc),Vj(Tb,ff),bm(Tb,ff),bm(Tb,Xc));Xc=wm(kp(b[b.length-1].vector));if(mc||kc&&1===b.length)nf.push(Vb);else if(Lb){b=bo(Vb,Xc,Sc);for(let md=1/29,od=md;1>od;od+=md)nf.push(pl(b,Vb,3*gt*od))}else nf.push(bm(Vb,vl(Xc,Sc)),bm(Vb,vl(Xc,.99*Sc)),Vj(Vb,vl(Xc,.99*Sc)),Vj(Vb,vl(Xc,Sc)))}return g.concat(nf,tc.reverse(),Oe)}function yo(b,g={}){var m;let {streamline:G=.5,size:V=16,last:ka=
!1}=g;if(0===b.length)return[];g=.15+.85*(1-G);b=Array.isArray(b[0])?b:b.map(({x:vb,y:Lb,pressure:cc=.5})=>[vb,Lb,cc]);if(2===b.length){var qa=b[1];b=b.slice(0,-1);for(var Ia=1;5>Ia;Ia++)b.push(xm(b[0],qa,Ia/4))}1===b.length&&(b=[...b,[...bm(b[0],[1,1]),...b[0].slice(2)]]);qa=[{point:[b[0][0],b[0][1]],pressure:0<=b[0][2]?b[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ia=!1;let Ta=0,Xa=qa[0],ib=b.length-1;for(let vb=1;vb<b.length;vb++){let Lb=ka&&vb===ib?b[vb].slice(0,2):xm(Xa.point,b[vb],g);
if(Ro(Xa.point,Lb))continue;let cc=Yo(Lb,Xa.point);if(Ta+=cc,vb<ib&&!Ia){if(Ta<V)continue;Ia=!0}Xa={point:Lb,pressure:0<=b[vb][2]?b[vb][2]:.5,vector:ro(Vj(Xa.point,Lb)),distance:cc,runningLength:Ta};qa.push(Xa)}return qa[0].vector=(null==(m=qa[1])?void 0:m.vector)||[0,0],qa}function zl(b,g=4/3){return(new Fw(b)).exportAsSVG(g)}function Wo(b,g=4/3){return(new Fw(b)).generatePreviewJsx(void 0,g)}function co({id:b,type:g,onRemove:m,showContent:G}){const V=$e(),{handlers:ka}=YG.default.useContext(Qm);
return(0,mb.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,mb.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,mb.jsx)(CA,{id:b,showReferenceContent:G})}),(0,mb.jsx)("div",{className:"flex-1"}),ka.getBlockPageName(b)!==V.currentPage.name&&(0,mb.jsx)(ia,{tooltip:"Open Page",type:"button",onClick:()=>null==ka?void 0:ka.redirectToPage(b),children:(0,mb.jsx)(Eh,{name:"open-as-page"})}),(0,mb.jsx)(ia,{tooltip:"Open Page in Right Sidebar",
type:"button",onClick:()=>null==ka?void 0:ka.sidebarAddBlock(b,"B"===g?"block":"page"),children:(0,mb.jsx)(Eh,{name:"move-to-sidebar-right"})}),m&&(0,mb.jsx)(ia,{className:"tl-shape-links-panel-item-remove-button",tooltip:"Remove link",type:"button",onClick:m,children:(0,mb.jsx)(Eh,{name:"x",className:"!translate-y-0"})})]})}function Mn({options:b,value:g,onValueChange:m}){return(0,mb.jsx)(qB,{className:"tl-toggle-group-input",type:"single",value:g,onValueChange:m,children:b.map(G=>(0,mb.jsx)(dc,
{content:G.tooltip,children:(0,mb.jsx)("div",{className:"inline-block",children:(0,mb.jsx)(rB,{className:"tl-toggle-group-input-button",value:G.value,disabled:G.value===g,children:(0,mb.jsx)(Eh,{name:G.icon})})})},G.value))})}function vn({options:b,value:g,onValueChange:m}){return(0,mb.jsx)(qB,{className:"tl-toggle-group-input",type:"multiple",value:g,onValueChange:m,children:b.map(G=>(0,mb.jsx)(rB,{className:"tl-toggle-group-input-button",value:G.value,children:(0,mb.jsx)(Eh,{name:G.icon})},G.value))})}
function fn(b){var {toggle:g=!0,pressed:m,onPressedChange:G,className:V,tooltip:ka}=b;b=Wc(b,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,mb.jsx)(dc,{content:ka,children:(0,mb.jsx)("div",{className:"inline-block",children:(0,mb.jsx)(EI,Jc(oc({},b),{"data-toggle":g,className:"tl-toggle-input"+(V?" "+V:""),pressed:m,onPressedChange:G}))})})}function Wj(b,g){return b.filter(m=>{var G;return null==(G=Gw[m.props.type])?void 0:G.includes(g)})}function uo(b){return g=>"mouse"!==
g.pointerType?b(g):void 0}function to(b){b=b.match(/\.[0-9a-z]+$/i);if(!b)return"unknown";b=b[0].toLowerCase();return jJ.includes(b)?"image":kJ.includes(b)?"video":"unknown"}function Nn(...b){return(...g)=>xf(this,null,function*(){for(const m of b){const G=yield m(...g);if(G&&0<G.length)return G}return null})}function La(b,g){return xf(this,null,function*(){return b.types.includes(g)?b instanceof DataTransfer?b.getData(g):yield(yield b.getType(g)).text():null})}function Za(){const {handlers:b}=wB.useContext(Qm);
return wB.useCallback((g,m)=>xf(this,null,function*(){if(m.shiftKey&&1===g.selectedShapesArray.length){var G=yield navigator.clipboard.read();let V;0<G.length&&(G=(yield(yield G[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(G)&&40===G.length?(G=G.slice(2,-2),Xj(G)&&(V=G)):/^\[\[.*\]\]$/.test(G)&&(V=G.slice(2,-2)));if(V){g.selectedShapesArray[0].update({refs:[V]});g.persist();return}}lJ(g,m,b)}),[])}function Ka(){const b=Za();return iJ.useCallback((g,m)=>xf(this,[g,m],function*(G,
{dataTransfer:V,point:ka}){b(G,{point:ka,shiftKey:!1,dataTransfer:V,fromDrop:!0})}),[])}function hb(){const {handlers:b}=xB.useContext(Qm);return xB.useCallback((g,{text:m,html:G})=>{b.copyToClipboard(m,G)},[])}function Jb(){return mJ.default.useCallback(b=>xf(this,null,function*(){setTimeout(()=>{b.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var uc=Object.create,ad=Object.defineProperty,Pd=Object.defineProperties,ie=Object.getOwnPropertyDescriptor,Ie=Object.getOwnPropertyDescriptors,
ca=Object.getOwnPropertyNames,va=Object.getOwnPropertySymbols,Wa=Object.getPrototypeOf,xb=Object.prototype.hasOwnProperty,ac=Object.prototype.propertyIsEnumerable,xc=(b,g,m)=>g in b?ad(b,g,{enumerable:!0,configurable:!0,writable:!0,value:m}):b[g]=m,oc=(b,g)=>{for(var m in g||={})xb.call(g,m)&&xc(b,m,g[m]);if(va)for(m of va(g))ac.call(g,m)&&xc(b,m,g[m]);return b},Jc=(b,g)=>Pd(b,Ie(g)),Wc=(b,g)=>{var m={},G;for(G in b)xb.call(b,G)&&0>g.indexOf(G)&&(m[G]=b[G]);if(null!=b&&va)for(G of va(b))0>g.indexOf(G)&&
ac.call(b,G)&&(m[G]=b[G]);return m},Rd=(b,g)=>function(){return g||(0,b[ca(b)[0]])((g={exports:{}}).exports,g),g.exports},ye=(b,g,m,G)=>{if(g&&"object"===typeof g||"function"===typeof g)for(let V of ca(g))xb.call(b,V)||V===m||ad(b,V,{get:()=>g[V],enumerable:!(G=ie(g,V))||G.enumerable});return b},Wd=(b,g,m)=>(m=null!=b?uc(Wa(b)):{},ye(!g&&b&&b.__esModule?m:ad(m,"default",{value:b,enumerable:!0}),b)),rd=(b,g,m,G)=>{for(var V=1<G?void 0:G?ie(g,m):g,ka=b.length-1,qa;0<=ka;ka--)if(qa=b[ka])V=(G?qa(g,m,
V):qa(V))||V;G&&V&&ad(g,m,V);return V},cb=(b,g,m)=>{xc(b,"symbol"!==typeof g?g+"":g,m);return m},xf=(b,g,m)=>new Promise((G,V)=>{var ka=Ta=>{try{Ia(m.next(Ta))}catch(Xa){V(Xa)}},qa=Ta=>{try{Ia(m.throw(Ta))}catch(Xa){V(Xa)}},Ia=Ta=>Ta.done?G(Ta.value):Promise.resolve(Ta.value).then(ka,qa);Ia((m=m.apply(b,g)).next())}),ui=Rd({["../../node_modules/mousetrap/mousetrap.js"](b,g){(function(m,G,V){function ka(mc,Vb,tc){mc.addEventListener?mc.addEventListener(Vb,tc,!1):mc.attachEvent("on"+Vb,tc)}function qa(mc){if("keypress"==
mc.type){var Vb=String.fromCharCode(mc.which);mc.shiftKey||(Vb=Vb.toLowerCase());return Vb}return vb[mc.which]?vb[mc.which]:Lb[mc.which]?Lb[mc.which]:String.fromCharCode(mc.which).toLowerCase()}function Ia(mc){return"shift"==mc||"ctrl"==mc||"alt"==mc||"meta"==mc}function Ta(mc,Vb){var tc,Ic=[];"+"===mc?mc=["+"]:(mc=mc.replace(/\+{2}/g,"+plus"),mc=mc.split("+"));for(tc=0;tc<mc.length;++tc){var Sc=mc[tc];Tb[Sc]&&(Sc=Tb[Sc]);Vb&&"keypress"!=Vb&&cc[Sc]&&(Sc=cc[Sc],Ic.push("shift"));Ia(Sc)&&Ic.push(Sc)}mc=
Sc;if(!Vb){if(!kc){kc={};for(var Xc in vb)95<Xc&&112>Xc||vb.hasOwnProperty(Xc)&&(kc[vb[Xc]]=Xc)}Vb=kc[mc]?"keydown":"keypress"}"keypress"==Vb&&Ic.length&&(Vb="keydown");return{key:Sc,modifiers:Ic,action:Vb}}function Xa(mc,Vb){return null===mc||mc===G?!1:mc===Vb?!0:Xa(mc.parentNode,Vb)}function ib(mc){function Vb(He){He=He||{};var Bd=!1,hd;for(hd in De)He[hd]?Bd=!0:De[hd]=0;Bd||(ff=!1)}function tc(He,Bd,hd,md,od,Cd){var xe,Ge=[],of=hd.type;if(!ce._callbacks[He])return[];"keyup"==of&&Ia(He)&&(Bd=[He]);
for(xe=0;xe<ce._callbacks[He].length;++xe){var kf=ce._callbacks[He][xe];if((md||!kf.seq||De[kf.seq]==kf.level)&&of==kf.action){var jf;(jf="keypress"==of&&!hd.metaKey&&!hd.ctrlKey)||(jf=kf.modifiers,jf=Bd.sort().join(",")===jf.sort().join(","));jf&&(jf=md&&kf.seq==md&&kf.level==Cd,(!md&&kf.combo==od||jf)&&ce._callbacks[He].splice(xe,1),Ge.push(kf))}}return Ge}function Ic(He,Bd,hd,md){ce.stopCallback(Bd,Bd.target||Bd.srcElement,hd,md)||!1!==He(Bd,hd)||(Bd.preventDefault?Bd.preventDefault():Bd.returnValue=
!1,Bd.stopPropagation?Bd.stopPropagation():Bd.cancelBubble=!0)}function Sc(He){"number"!==typeof He.which&&(He.which=He.keyCode);var Bd=qa(He);if(Bd)if("keyup"==He.type&&qf===Bd)qf=!1;else{var hd=ce,md=hd.handleKey,od=[];He.shiftKey&&od.push("shift");He.altKey&&od.push("alt");He.ctrlKey&&od.push("ctrl");He.metaKey&&od.push("meta");md.call(hd,Bd,od,He)}}function Xc(He,Bd,hd,md){function od(of){return function(){ff=of;++De[He];clearTimeout(Oe);Oe=setTimeout(Vb,1E3)}}function Cd(of){Ic(hd,of,He);"keyup"!==
md&&(qf=qa(of));setTimeout(Vb,10)}for(var xe=De[He]=0;xe<Bd.length;++xe){var Ge=xe+1===Bd.length?Cd:od(md||Ta(Bd[xe+1]).action);Xd(Bd[xe],Ge,md,He,xe)}}function Xd(He,Bd,hd,md,od){ce._directMap[He+":"+hd]=Bd;He=He.replace(/\s+/g," ");var Cd=He.split(" ");1<Cd.length?Xc(He,Cd,Bd,hd):(hd=Ta(He,hd),ce._callbacks[hd.key]=ce._callbacks[hd.key]||[],tc(hd.key,hd.modifiers,{type:hd.action},md,He,od),ce._callbacks[hd.key][md?"unshift":"push"]({callback:Bd,modifiers:hd.modifiers,action:hd.action,seq:md,level:od,
combo:He}))}var ce=this;mc=mc||G;if(!(ce instanceof ib))return new ib(mc);ce.target=mc;ce._callbacks={};ce._directMap={};var De={},Oe,qf=!1,nf=!1,ff=!1;ce._handleKey=function(He,Bd,hd){var md=tc(He,Bd,hd),od;Bd={};var Cd=0,xe=!1;for(od=0;od<md.length;++od)md[od].seq&&(Cd=Math.max(Cd,md[od].level));for(od=0;od<md.length;++od)md[od].seq?md[od].level==Cd&&(xe=!0,Bd[md[od].seq]=1,Ic(md[od].callback,hd,md[od].combo,md[od].seq)):xe||Ic(md[od].callback,hd,md[od].combo);md="keypress"==hd.type&&nf;hd.type!=
ff||Ia(He)||md||Vb(Bd);nf=xe&&"keydown"==hd.type};ce._bindMultiple=function(He,Bd,hd){for(var md=0;md<He.length;++md)Xd(He[md],Bd,hd)};ka(mc,"keypress",Sc);ka(mc,"keydown",Sc);ka(mc,"keyup",Sc)}if(m){var vb={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},Lb={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"\x3d",
188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},cc={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","\x26":"7","*":"8","(":"9",")":"0",_:"-","+":"\x3d",":":";",'"':"'","\x3c":",","\x3e":".","?":"/","|":"\\"},Tb={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},kc;for(V=1;20>V;++V)vb[111+V]="f"+V;for(V=0;9>=V;++V)vb[V+96]=V.toString();ib.prototype.bind=function(mc,Vb,tc){mc=mc instanceof
Array?mc:[mc];this._bindMultiple.call(this,mc,Vb,tc);return this};ib.prototype.unbind=function(mc,Vb){return this.bind.call(this,mc,function(){},Vb)};ib.prototype.trigger=function(mc,Vb){if(this._directMap[mc+":"+Vb])this._directMap[mc+":"+Vb]({},mc);return this};ib.prototype.reset=function(){this._callbacks={};this._directMap={};return this};ib.prototype.stopCallback=function(mc,Vb){if(-1<(" "+Vb.className+" ").indexOf(" mousetrap ")||Xa(Vb,this.target))return!1;if("composedPath"in mc&&"function"===
typeof mc.composedPath){var tc=mc.composedPath()[0];tc!==mc.target&&(Vb=tc)}return"INPUT"==Vb.tagName||"SELECT"==Vb.tagName||"TEXTAREA"==Vb.tagName||Vb.isContentEditable};ib.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};ib.addKeycodes=function(mc){for(var Vb in mc)mc.hasOwnProperty(Vb)&&(vb[Vb]=mc[Vb]);kc=null};ib.init=function(){var mc=ib(G),Vb;for(Vb in mc)"_"!==Vb.charAt(0)&&(ib[Vb]=function(tc){return function(){return mc[tc].apply(mc,arguments)}}(Vb))};ib.init();
m.Mousetrap=ib;"undefined"!==typeof g&&g.exports&&(g.exports=ib);"function"===typeof define&&define.amd&&define(function(){return ib})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}),Ik=Rd({["../../node_modules/rbush/rbush.min.js"](b,g){!function(m,G){"object"==typeof b&&"undefined"!=typeof g?g.exports=G():"function"==typeof define&&define.amd?define(G):(m=m||self).RBush=G()}(b,function(){function m(Vb,tc,Ic,Sc,Xc){!function ff(ce,De,Oe,qf,nf){for(;qf>Oe;){if(600<
qf-Oe){var He=qf-Oe+1,Bd=De-Oe+1,hd=Math.log(He),md=.5*Math.exp(2*hd/3);hd=.5*Math.sqrt(hd*md*(He-md)/He)*(0>Bd-He/2?-1:1);ff(ce,De,Math.max(Oe,Math.floor(De-Bd*md/He+hd)),Math.min(qf,Math.floor(De+(He-Bd)*md/He+hd)),nf)}He=ce[De];Bd=Oe;md=qf;G(ce,Oe,De);for(0<nf(ce[qf],He)&&G(ce,Oe,qf);Bd<md;){G(ce,Bd,md);Bd++;for(md--;0>nf(ce[Bd],He);)Bd++;for(;0<nf(ce[md],He);)md--}0===nf(ce[Oe],He)?G(ce,Oe,md):G(ce,++md,qf);md<=De&&(Oe=md+1);De<=md&&(qf=md-1)}}(Vb,tc,Ic||0,Sc||Vb.length-1,Xc||V)}function G(Vb,
tc,Ic){var Sc=Vb[tc];Vb[tc]=Vb[Ic];Vb[Ic]=Sc}function V(Vb,tc){return Vb<tc?-1:Vb>tc?1:0}function ka(Vb,tc){qa(Vb,0,Vb.children.length,tc,Vb)}function qa(Vb,tc,Ic,Sc,Xc){Xc||=Tb(null);Xc.minX=1/0;Xc.minY=1/0;Xc.maxX=-1/0;for(Xc.maxY=-1/0;tc<Ic;tc++){var Xd=Vb.children[tc];Ia(Xc,Vb.leaf?Sc(Xd):Xd)}return Xc}function Ia(Vb,tc){return Vb.minX=Math.min(Vb.minX,tc.minX),Vb.minY=Math.min(Vb.minY,tc.minY),Vb.maxX=Math.max(Vb.maxX,tc.maxX),Vb.maxY=Math.max(Vb.maxY,tc.maxY),Vb}function Ta(Vb,tc){return Vb.minX-
tc.minX}function Xa(Vb,tc){return Vb.minY-tc.minY}function ib(Vb){return(Vb.maxX-Vb.minX)*(Vb.maxY-Vb.minY)}function vb(Vb){return Vb.maxX-Vb.minX+(Vb.maxY-Vb.minY)}function Lb(Vb,tc){return Vb.minX<=tc.minX&&Vb.minY<=tc.minY&&tc.maxX<=Vb.maxX&&tc.maxY<=Vb.maxY}function cc(Vb,tc){return tc.minX<=Vb.maxX&&tc.minY<=Vb.maxY&&tc.maxX>=Vb.minX&&tc.maxY>=Vb.minY}function Tb(Vb){return{children:Vb,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function kc(Vb,tc,Ic,Sc,Xc){for(var Xd=[tc,Ic];Xd.length;)if(!((Ic=
Xd.pop())-(tc=Xd.pop())<=Sc)){var ce=tc+Math.ceil((Ic-tc)/Sc/2)*Sc;m(Vb,ce,tc,Ic,Xc);Xd.push(tc,ce,ce,Ic)}}var mc=function(Vb){void 0===Vb&&(Vb=9);this._maxEntries=Math.max(4,Vb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return mc.prototype.all=function(){return this._all(this.data,[])},mc.prototype.search=function(Vb){var tc=this.data,Ic=[];if(!cc(Vb,tc))return Ic;for(var Sc=this.toBBox,Xc=[];tc;){for(var Xd=0;Xd<tc.children.length;Xd++){var ce=tc.children[Xd],De=
tc.leaf?Sc(ce):ce;cc(Vb,De)&&(tc.leaf?Ic.push(ce):Lb(Vb,De)?this._all(ce,Ic):Xc.push(ce))}tc=Xc.pop()}return Ic},mc.prototype.collides=function(Vb){var tc=this.data;if(!cc(Vb,tc))return!1;for(var Ic=[];tc;){for(var Sc=0;Sc<tc.children.length;Sc++){var Xc=tc.children[Sc],Xd=tc.leaf?this.toBBox(Xc):Xc;if(cc(Vb,Xd)){if(tc.leaf||Lb(Vb,Xd))return!0;Ic.push(Xc)}}tc=Ic.pop()}return!1},mc.prototype.load=function(Vb){if(!Vb||!Vb.length)return this;if(Vb.length<this._minEntries){for(var tc=0;tc<Vb.length;tc++)this.insert(Vb[tc]);
return this}Vb=this._build(Vb.slice(),0,Vb.length-1,0);this.data.children.length?this.data.height===Vb.height?this._splitRoot(this.data,Vb):(this.data.height<Vb.height&&(tc=this.data,this.data=Vb,Vb=tc),this._insert(Vb,this.data.height-Vb.height-1,!0)):this.data=Vb;return this},mc.prototype.insert=function(Vb){return Vb&&this._insert(Vb,this.data.height-1),this},mc.prototype.clear=function(){return this.data=Tb([]),this},mc.prototype.remove=function(Vb,tc){if(!Vb)return this;for(var Ic,Sc,Xc,Xd=this.data,
ce=this.toBBox(Vb),De=[],Oe=[];Xd||De.length;){if(Xd||(Xd=De.pop(),Sc=De[De.length-1],Ic=Oe.pop(),Xc=!0),Xd.leaf){a:{var qf=Vb;var nf=Xd.children,ff=tc;if(ff){for(var He=0;He<nf.length;He++)if(ff(qf,nf[He])){qf=He;break a}qf=-1}else qf=nf.indexOf(qf)}if(-1!==qf)return Xd.children.splice(qf,1),De.push(Xd),this._condense(De),this}Xc||Xd.leaf||!Lb(Xd,ce)?Sc?(Ic++,Xd=Sc.children[Ic],Xc=!1):Xd=null:(De.push(Xd),Oe.push(Ic),Ic=0,Sc=Xd,Xd=Xd.children[0])}return this},mc.prototype.toBBox=function(Vb){return Vb},
mc.prototype.compareMinX=function(Vb,tc){return Vb.minX-tc.minX},mc.prototype.compareMinY=function(Vb,tc){return Vb.minY-tc.minY},mc.prototype.toJSON=function(){return this.data},mc.prototype.fromJSON=function(Vb){return this.data=Vb,this},mc.prototype._all=function(Vb,tc){for(var Ic=[];Vb;)Vb.leaf?tc.push.apply(tc,Vb.children):Ic.push.apply(Ic,Vb.children),Vb=Ic.pop();return tc},mc.prototype._build=function(Vb,tc,Ic,Sc){var Xc,Xd=Ic-tc+1,ce=this._maxEntries;if(Xd<=ce)return ka(Xc=Tb(Vb.slice(tc,
Ic+1)),this.toBBox),Xc;Sc||(Sc=Math.ceil(Math.log(Xd)/Math.log(ce)),ce=Math.ceil(Xd/Math.pow(ce,Sc-1)));(Xc=Tb([])).leaf=!1;Xc.height=Sc;Xd=Math.ceil(Xd/ce);ce=Xd*Math.ceil(Math.sqrt(ce));for(kc(Vb,tc,Ic,ce,this.compareMinX);tc<=Ic;tc+=ce){var De=Math.min(tc+ce-1,Ic);kc(Vb,tc,De,Xd,this.compareMinY);for(var Oe=tc;Oe<=De;Oe+=Xd)Xc.children.push(this._build(Vb,Oe,Math.min(Oe+Xd-1,De),Sc-1))}return ka(Xc,this.toBBox),Xc},mc.prototype._chooseSubtree=function(Vb,tc,Ic,Sc){for(;Sc.push(tc),!tc.leaf&&Sc.length-
1!==Ic;){for(var Xc=1/0,Xd=1/0,ce=void 0,De=0;De<tc.children.length;De++){var Oe=tc.children[De],qf=ib(Oe),nf=(ff=Vb,He=Oe,(Math.max(He.maxX,ff.maxX)-Math.min(He.minX,ff.minX))*(Math.max(He.maxY,ff.maxY)-Math.min(He.minY,ff.minY))-qf);nf<Xd?(Xd=nf,Xc=qf<Xc?qf:Xc,ce=Oe):nf===Xd&&qf<Xc&&(Xc=qf,ce=Oe)}tc=ce||tc.children[0]}var ff,He;return tc},mc.prototype._insert=function(Vb,tc,Ic){Ic=Ic?Vb:this.toBBox(Vb);var Sc=[],Xc=this._chooseSubtree(Ic,this.data,tc,Sc);Xc.children.push(Vb);for(Ia(Xc,Ic);0<=tc&&
Sc[tc].children.length>this._maxEntries;)this._split(Sc,tc),tc--;this._adjustParentBBoxes(Ic,Sc,tc)},mc.prototype._split=function(Vb,tc){var Ic=Vb[tc],Sc=Ic.children.length,Xc=this._minEntries;this._chooseSplitAxis(Ic,Xc,Sc);Sc=this._chooseSplitIndex(Ic,Xc,Sc);Sc=Tb(Ic.children.splice(Sc,Ic.children.length-Sc));Sc.height=Ic.height;Sc.leaf=Ic.leaf;ka(Ic,this.toBBox);ka(Sc,this.toBBox);tc?Vb[tc-1].children.push(Sc):this._splitRoot(Ic,Sc)},mc.prototype._splitRoot=function(Vb,tc){this.data=Tb([Vb,tc]);
this.data.height=Vb.height+1;this.data.leaf=!1;ka(this.data,this.toBBox)},mc.prototype._chooseSplitIndex=function(Vb,tc,Ic){for(var Sc,Xc,Xd,ce,De,Oe,qf,nf=1/0,ff=1/0,He=tc;He<=Ic-tc;He++){var Bd=qa(Vb,0,He,this.toBBox),hd=qa(Vb,He,Ic,this.toBBox),md=(Xc=Bd,Xd=hd,ce=void 0,De=void 0,Oe=void 0,qf=void 0,ce=Math.max(Xc.minX,Xd.minX),De=Math.max(Xc.minY,Xd.minY),Oe=Math.min(Xc.maxX,Xd.maxX),qf=Math.min(Xc.maxY,Xd.maxY),Math.max(0,Oe-ce)*Math.max(0,qf-De));Bd=ib(Bd)+ib(hd);md<nf?(nf=md,Sc=He,ff=Bd<ff?
Bd:ff):md===nf&&Bd<ff&&(ff=Bd,Sc=He)}return Sc||Ic-tc},mc.prototype._chooseSplitAxis=function(Vb,tc,Ic){var Sc=Vb.leaf?this.compareMinX:Ta,Xc=Vb.leaf?this.compareMinY:Xa;this._allDistMargin(Vb,tc,Ic,Sc)<this._allDistMargin(Vb,tc,Ic,Xc)&&Vb.children.sort(Sc)},mc.prototype._allDistMargin=function(Vb,tc,Ic,Sc){Vb.children.sort(Sc);Sc=this.toBBox;for(var Xc=qa(Vb,0,tc,Sc),Xd=qa(Vb,Ic-tc,Ic,Sc),ce=vb(Xc)+vb(Xd),De=tc;De<Ic-tc;De++){var Oe=Vb.children[De];Ia(Xc,Vb.leaf?Sc(Oe):Oe);ce+=vb(Xc)}for(Ic=Ic-tc-
1;Ic>=tc;Ic--)Xc=Vb.children[Ic],Ia(Xd,Vb.leaf?Sc(Xc):Xc),ce+=vb(Xd);return ce},mc.prototype._adjustParentBBoxes=function(Vb,tc,Ic){for(;0<=Ic;Ic--)Ia(tc[Ic],Vb)},mc.prototype._condense=function(Vb){for(var tc=Vb.length-1,Ic=void 0;0<=tc;tc--)0===Vb[tc].children.length?0<tc?(Ic=Vb[tc-1].children).splice(Ic.indexOf(Vb[tc]),1):this.clear():ka(Vb[tc],this.toBBox)},mc})}}),Hk=Rd({["../../node_modules/fast-deep-equal/index.js"](b,g){g.exports=function ka(G,V){if(G===V)return!0;if(G&&V&&"object"==typeof G&&
"object"==typeof V){if(G.constructor!==V.constructor)return!1;var qa;if(Array.isArray(G)){var Ia=G.length;if(Ia!=V.length)return!1;for(qa=Ia;0!==qa--;)if(!ka(G[qa],V[qa]))return!1;return!0}if(G.constructor===RegExp)return G.source===V.source&&G.flags===V.flags;if(G.valueOf!==Object.prototype.valueOf)return G.valueOf()===V.valueOf();if(G.toString!==Object.prototype.toString)return G.toString()===V.toString();var Ta=Object.keys(G);Ia=Ta.length;if(Ia!==Object.keys(V).length)return!1;for(qa=Ia;0!==qa--;)if(!Object.prototype.hasOwnProperty.call(V,
Ta[qa]))return!1;for(qa=Ia;0!==qa--;)if(Ia=Ta[qa],!ka(G[Ia],V[Ia]))return!1;return!0}return G!==G&&V!==V}}}),Yh=Rd({["../../../node_modules/deepmerge/dist/cjs.js"](b,g){function m(vb,Lb){return!1!==Lb.clone&&Lb.isMergeableObject(vb)?Ta(Array.isArray(vb)?[]:{},vb,Lb):vb}function G(vb,Lb,cc){return vb.concat(Lb).map(function(Tb){return m(Tb,cc)})}function V(vb){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(vb).filter(function(Lb){return vb.propertyIsEnumerable(Lb)}):[]}function ka(vb){return Object.keys(vb).concat(V(vb))}
function qa(vb,Lb){try{return Lb in vb}catch(cc){return!1}}function Ia(vb,Lb,cc){var Tb={};cc.isMergeableObject(vb)&&ka(vb).forEach(function(kc){Tb[kc]=m(vb[kc],cc)});ka(Lb).forEach(function(kc){if(!qa(vb,kc)||Object.hasOwnProperty.call(vb,kc)&&Object.propertyIsEnumerable.call(vb,kc))if(qa(vb,kc)&&cc.isMergeableObject(Lb[kc])){if(cc.customMerge){var mc=cc.customMerge(kc);mc="function"===typeof mc?mc:Ta}else mc=Ta;Tb[kc]=mc(vb[kc],Lb[kc],cc)}else Tb[kc]=m(Lb[kc],cc)});return Tb}function Ta(vb,Lb,cc){cc=
cc||{};cc.arrayMerge=cc.arrayMerge||G;cc.isMergeableObject=cc.isMergeableObject||Xa;cc.cloneUnlessOtherwiseSpecified=m;var Tb=Array.isArray(Lb),kc=Array.isArray(vb);return Tb!==kc?m(Lb,cc):Tb?cc.arrayMerge(vb,Lb,cc):Ia(vb,Lb,cc)}var Xa=function(vb){var Lb;if(Lb=!!vb&&"object"===typeof vb)Lb=Object.prototype.toString.call(vb),Lb=!("[object RegExp]"===Lb||"[object Date]"===Lb||vb.$$typeof===ib);return Lb},ib="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Ta.all=function(vb,
Lb){if(!Array.isArray(vb))throw Error("first argument should be an array");return vb.reduce(function(cc,Tb){return Ta(cc,Tb,Lb)},{})};g.exports=Ta}}),Rj=Rd({["../../node_modules/tslib/tslib.js"](b,g){var m,G,V,ka,qa,Ia,Ta,Xa,ib,vb,Lb,cc,Tb,kc,mc,Vb,tc,Ic,Sc,Xc,Xd,ce,De,Oe,qf;(function(nf){function ff(Bd,hd){Bd!==He&&("function"===typeof Object.create?Object.defineProperty(Bd,"__esModule",{value:!0}):Bd.__esModule=!0);return function(md,od){return Bd[md]=hd?hd(md,od):od}}var He="object"===typeof wa?
wa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Bd){nf(ff(He,ff(Bd)))}):"object"===typeof g&&"object"===typeof g.exports?nf(ff(He,ff(g.exports))):nf(ff(He))})(function(nf){var ff=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Bd,hd){Bd.__proto__=hd}||function(Bd,hd){for(var md in hd)Object.prototype.hasOwnProperty.call(hd,md)&&(Bd[md]=hd[md])};m=function(Bd,hd){function md(){this.constructor=
Bd}if("function"!==typeof hd&&null!==hd)throw new TypeError("Class extends value "+String(hd)+" is not a constructor or null");ff(Bd,hd);Bd.prototype=null===hd?Object.create(hd):(md.prototype=hd.prototype,new md)};G=Object.assign||function(Bd){for(var hd,md=1,od=arguments.length;md<od;md++){hd=arguments[md];for(var Cd in hd)Object.prototype.hasOwnProperty.call(hd,Cd)&&(Bd[Cd]=hd[Cd])}return Bd};V=function(Bd,hd){var md={},od;for(od in Bd)Object.prototype.hasOwnProperty.call(Bd,od)&&0>hd.indexOf(od)&&
(md[od]=Bd[od]);if(null!=Bd&&"function"===typeof Object.getOwnPropertySymbols){var Cd=0;for(od=Object.getOwnPropertySymbols(Bd);Cd<od.length;Cd++)0>hd.indexOf(od[Cd])&&Object.prototype.propertyIsEnumerable.call(Bd,od[Cd])&&(md[od[Cd]]=Bd[od[Cd]])}return md};ka=function(Bd,hd,md,od){var Cd=arguments.length,xe=3>Cd?hd:null===od?od=Object.getOwnPropertyDescriptor(hd,md):od,Ge;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)xe=Reflect.decorate(Bd,hd,md,od);else for(var of=Bd.length-
1;0<=of;of--)if(Ge=Bd[of])xe=(3>Cd?Ge(xe):3<Cd?Ge(hd,md,xe):Ge(hd,md))||xe;return 3<Cd&&xe&&Object.defineProperty(hd,md,xe),xe};qa=function(Bd,hd){return function(md,od){hd(md,od,Bd)}};Ia=function(Bd,hd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Bd,hd)};Ta=function(Bd,hd,md,od){function Cd(xe){return xe instanceof md?xe:new md(function(Ge){Ge(xe)})}return new (md||=Promise)(function(xe,Ge){function of(Tg){try{jf(od.next(Tg))}catch(Gg){Ge(Gg)}}function kf(Tg){try{jf(od["throw"](Tg))}catch(Gg){Ge(Gg)}}
function jf(Tg){Tg.done?xe(Tg.value):Cd(Tg.value).then(of,kf)}jf((od=od.apply(Bd,hd||[])).next())})};Xa=function(Bd,hd){function md(jf){return function(Tg){return od([jf,Tg])}}function od(jf){if(xe)throw new TypeError("Generator is already executing.");for(;Cd;)try{if(xe=1,Ge&&(of=jf[0]&2?Ge["return"]:jf[0]?Ge["throw"]||((of=Ge["return"])&&of.call(Ge),0):Ge.next)&&!(of=of.call(Ge,jf[1])).done)return of;if(Ge=0,of)jf=[jf[0]&2,of.value];switch(jf[0]){case 0:case 1:of=jf;break;case 4:return Cd.label++,
{value:jf[1],done:!1};case 5:Cd.label++;Ge=jf[1];jf=[0];continue;case 7:jf=Cd.ops.pop();Cd.trys.pop();continue;default:if(!(of=Cd.trys,of=0<of.length&&of[of.length-1])&&(6===jf[0]||2===jf[0])){Cd=0;continue}if(3===jf[0]&&(!of||jf[1]>of[0]&&jf[1]<of[3]))Cd.label=jf[1];else if(6===jf[0]&&Cd.label<of[1])Cd.label=of[1],of=jf;else if(of&&Cd.label<of[2])Cd.label=of[2],Cd.ops.push(jf);else{of[2]&&Cd.ops.pop();Cd.trys.pop();continue}}jf=hd.call(Bd,Cd)}catch(Tg){jf=[6,Tg],Ge=0}finally{xe=of=0}if(jf[0]&5)throw jf[1];
return{value:jf[0]?jf[1]:void 0,done:!0}}var Cd={label:0,sent:function(){if(of[0]&1)throw of[1];return of[1]},trys:[],ops:[]},xe,Ge,of,kf;return kf={next:md(0),"throw":md(1),"return":md(2)},"function"===typeof Symbol&&(kf[Symbol.iterator]=function(){return this}),kf};ib=function(Bd,hd){for(var md in Bd)"default"===md||Object.prototype.hasOwnProperty.call(hd,md)||qf(hd,Bd,md)};qf=Object.create?function(Bd,hd,md,od){void 0===od&&(od=md);var Cd=Object.getOwnPropertyDescriptor(hd,md);if(!Cd||("get"in
Cd?!hd.__esModule:Cd.writable||Cd.configurable))Cd={enumerable:!0,get:function(){return hd[md]}};Object.defineProperty(Bd,od,Cd)}:function(Bd,hd,md,od){void 0===od&&(od=md);Bd[od]=hd[md]};vb=function(Bd){var hd="function"===typeof Symbol&&Symbol.iterator,md=hd&&Bd[hd],od=0;if(md)return md.call(Bd);if(Bd&&"number"===typeof Bd.length)return{next:function(){Bd&&od>=Bd.length&&(Bd=void 0);return{value:Bd&&Bd[od++],done:!Bd}}};throw new TypeError(hd?"Object is not iterable.":"Symbol.iterator is not defined.");
};Lb=function(Bd,hd){var md="function"===typeof Symbol&&Bd[Symbol.iterator];if(!md)return Bd;Bd=md.call(Bd);var od,Cd=[];try{for(;(void 0===hd||0<hd--)&&!(od=Bd.next()).done;)Cd.push(od.value)}catch(Ge){var xe={error:Ge}}finally{try{od&&!od.done&&(md=Bd["return"])&&md.call(Bd)}finally{if(xe)throw xe.error;}}return Cd};cc=function(){for(var Bd=[],hd=0;hd<arguments.length;hd++)Bd=Bd.concat(Lb(arguments[hd]));return Bd};Tb=function(){for(var Bd=0,hd=0,md=arguments.length;hd<md;hd++)Bd+=arguments[hd].length;
Bd=Array(Bd);var od=0;for(hd=0;hd<md;hd++)for(var Cd=arguments[hd],xe=0,Ge=Cd.length;xe<Ge;xe++,od++)Bd[od]=Cd[xe];return Bd};kc=function(Bd,hd,md){if(md||2===arguments.length)for(var od=0,Cd=hd.length,xe;od<Cd;od++)!xe&&od in hd||(xe||=Array.prototype.slice.call(hd,0,od),xe[od]=hd[od]);return Bd.concat(xe||Array.prototype.slice.call(hd))};mc=function(Bd){return this instanceof mc?(this.v=Bd,this):new mc(Bd)};Vb=function(Bd,hd,md){function od(Gg){kf[Gg]&&(jf[Gg]=function(qi){return new Promise(function(Sk,
cl){1<Tg.push([Gg,qi,Sk,cl])||Cd(Gg,qi)})})}function Cd(Gg,qi){try{var Sk=kf[Gg](qi);Sk.value instanceof mc?Promise.resolve(Sk.value.v).then(xe,Ge):of(Tg[0][2],Sk)}catch(cl){of(Tg[0][3],cl)}}function xe(Gg){Cd("next",Gg)}function Ge(Gg){Cd("throw",Gg)}function of(Gg,qi){(Gg(qi),Tg.shift(),Tg.length)&&Cd(Tg[0][0],Tg[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var kf=md.apply(Bd,hd||[]),jf,Tg=[];return jf={},od("next"),od("throw"),od("return"),jf[Symbol.asyncIterator]=
function(){return this},jf};tc=function(Bd){function hd(Cd,xe){md[Cd]=Bd[Cd]?function(Ge){return(od=!od)?{value:mc(Bd[Cd](Ge)),done:"return"===Cd}:xe?xe(Ge):Ge}:xe}var md,od;return md={},hd("next"),hd("throw",function(Cd){throw Cd;}),hd("return"),md[Symbol.iterator]=function(){return this},md};Ic=function(Bd){function hd(xe){Cd[xe]=Bd[xe]&&function(Ge){return new Promise(function(of,kf){Ge=Bd[xe](Ge);md(of,kf,Ge.done,Ge.value)})}}function md(xe,Ge,of,kf){Promise.resolve(kf).then(function(jf){xe({value:jf,
done:of})},Ge)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var od=Bd[Symbol.asyncIterator],Cd;return od?od.call(Bd):(Bd="function"===typeof vb?vb(Bd):Bd[Symbol.iterator](),Cd={},hd("next"),hd("throw"),hd("return"),Cd[Symbol.asyncIterator]=function(){return this},Cd)};Sc=function(Bd,hd){Object.defineProperty?Object.defineProperty(Bd,"raw",{value:hd}):Bd.raw=hd;return Bd};var He=Object.create?function(Bd,hd){Object.defineProperty(Bd,"default",{enumerable:!0,
value:hd})}:function(Bd,hd){Bd["default"]=hd};Xc=function(Bd){if(Bd&&Bd.__esModule)return Bd;var hd={};if(null!=Bd)for(var md in Bd)"default"!==md&&Object.prototype.hasOwnProperty.call(Bd,md)&&qf(hd,Bd,md);He(hd,Bd);return hd};Xd=function(Bd){return Bd&&Bd.__esModule?Bd:{"default":Bd}};ce=function(Bd,hd,md,od){if("a"===md&&!od)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof hd?Bd!==hd||!od:!hd.has(Bd))throw new TypeError("Cannot read private member from an object whose class did not declare it");
return"m"===md?od:"a"===md?od.call(Bd):od?od.value:hd.get(Bd)};De=function(Bd,hd,md,od,Cd){if("m"===od)throw new TypeError("Private method is not writable");if("a"===od&&!Cd)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof hd?Bd!==hd||!Cd:!hd.has(Bd))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===od?Cd.call(Bd,md):Cd?Cd.value=md:hd.set(Bd,md),md};Oe=function(Bd,hd){if(null===hd||"object"!==typeof hd&&
"function"!==typeof hd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Bd?hd===Bd:Bd.has(hd)};nf("__extends",m);nf("__assign",G);nf("__rest",V);nf("__decorate",ka);nf("__param",qa);nf("__metadata",Ia);nf("__awaiter",Ta);nf("__generator",Xa);nf("__exportStar",ib);nf("__createBinding",qf);nf("__values",vb);nf("__read",Lb);nf("__spread",cc);nf("__spreadArrays",Tb);nf("__spreadArray",kc);nf("__await",mc);nf("__asyncGenerator",Vb);nf("__asyncDelegator",tc);nf("__asyncValues",
Ic);nf("__makeTemplateObject",Sc);nf("__importStar",Xc);nf("__importDefault",Xd);nf("__classPrivateFieldGet",ce);nf("__classPrivateFieldSet",De);nf("__classPrivateFieldIn",Oe)})}}),ml={};((b,g)=>{for(var m in g)ad(b,m,{get:g[m],enumerable:!0})})(ml,{App:()=>rJ,PreviewManager:()=>Fw,generateJSXFromModel:()=>Wo,generateSVGFromModel:()=>zl});Sa.exports=(b=>ye(ad({},"__esModule",{value:!0}),b))(ml);var ln=(b=>{b.Yellow="yellow";b.Red="red";b.Pink="pink";b.Green="green";b.Blue="blue";b.Purple="purple";
b.Gray="gray";b.Default="";return b})(ln||{}),Zo,Hp=new Uint8Array(16),Ip=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Bg=[];for(let b=0;256>b;++b)Bg.push((b+256).toString(16).slice(1));var ym,kl,Yl=0,xo=0,Zk=function(b,g,m){m=g&&m||0;const G=g||Array(16);b=b||{};let V=b.node||ym;var ka=void 0!==b.clockseq?b.clockseq:kl;if(null==V||null==ka){var qa=b.random||(b.rng||q)();null==V&&(V=ym=[qa[0]|1,qa[1],qa[2],qa[3],qa[4],qa[5]]);
null==ka&&(ka=kl=(qa[6]<<8|qa[7])&16383)}qa=void 0!==b.msecs?b.msecs:Date.now();let Ia=void 0!==b.nsecs?b.nsecs:xo+1;const Ta=qa-Yl+(Ia-xo)/1E4;0>Ta&&void 0===b.clockseq&&(ka=ka+1&16383);(0>Ta||qa>Yl)&&void 0===b.nsecs&&(Ia=0);if(1E4<=Ia)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Yl=qa;xo=Ia;kl=ka;qa+=122192928E5;b=(1E4*(qa&268435455)+Ia)%4294967296;G[m++]=b>>>24&255;G[m++]=b>>>16&255;G[m++]=b>>>8&255;G[m++]=b&255;b=qa/4294967296*1E4&268435455;G[m++]=b>>>8&255;G[m++]=b&255;G[m++]=
b>>>24&15|16;G[m++]=b>>>16&255;G[m++]=ka>>>8|128;G[m++]=ka&255;for(ka=0;6>ka;++ka)G[m+ka]=V[ka];return g||S(G)},yg=class{static clamp(b,g,m){return Math.max(g,"undefined"!==typeof m?Math.min(b,m):b)}static clampV(b,g,m){return b.map(G=>m?yg.clamp(G,g,m):yg.clamp(G,g))}static cross(b,g,m){return(g[0]-b[0])*(m[1]-b[1])-(m[0]-b[0])*(g[1]-b[1])}static snap(b,g=1){return[Math.round(b[0]/g)*g,Math.round(b[1]/g)*g]}},Jd=yg;Jd.neg=b=>[-b[0],-b[1]];Jd.add=(b,g)=>[b[0]+g[0],b[1]+g[1]];Jd.addScalar=(b,g)=>[b[0]+
g,b[1]+g];Jd.sub=(b,g)=>[b[0]-g[0],b[1]-g[1]];Jd.subScalar=(b,g)=>[b[0]-g,b[1]-g];Jd.vec=(b,g)=>[g[0]-b[0],g[1]-b[1]];Jd.mul=(b,g)=>[b[0]*g,b[1]*g];Jd.mulV=(b,g)=>[b[0]*g[0],b[1]*g[1]];Jd.div=(b,g)=>[b[0]/g,b[1]/g];Jd.divV=(b,g)=>[b[0]/g[0],b[1]/g[1]];Jd.per=b=>[b[1],-b[0]];Jd.dpr=(b,g)=>b[0]*g[0]+b[1]*g[1];Jd.cpr=(b,g)=>b[0]*g[1]-g[0]*b[1];Jd.len2=b=>b[0]*b[0]+b[1]*b[1];Jd.len=b=>Math.hypot(b[0],b[1]);Jd.pry=(b,g)=>yg.dpr(b,g)/yg.len(g);Jd.uni=b=>yg.div(b,yg.len(b));Jd.normalize=b=>yg.uni(b);Jd.tangent=
(b,g)=>yg.uni(yg.sub(b,g));Jd.dist2=(b,g)=>yg.len2(yg.sub(b,g));Jd.dist=(b,g)=>Math.hypot(b[1]-g[1],b[0]-g[0]);Jd.fastDist=(b,g)=>{b=[g[0]-b[0],g[1]-b[1]];g=[Math.abs(b[0]),Math.abs(b[1])];let m=1/Math.max(g[0],g[1]);m*=1.29289-(g[0]+g[1])*m*.29289;return[b[0]*m,b[1]*m]};Jd.ang=(b,g)=>Math.atan2(yg.cpr(b,g),yg.dpr(b,g));Jd.angle=(b,g)=>Math.atan2(g[1]-b[1],g[0]-b[0]);Jd.med=(b,g)=>yg.mul(yg.add(b,g),.5);Jd.rot=(b,g=0)=>[b[0]*Math.cos(g)-b[1]*Math.sin(g),b[0]*Math.sin(g)+b[1]*Math.cos(g)];Jd.rotWith=
(b,g,m=0)=>{if(0===m)return b;const G=Math.sin(m);m=Math.cos(m);const V=b[0]-g[0];b=b[1]-g[1];return[V*m-b*G+g[0],V*G+b*m+g[1]]};Jd.isEqual=(b,g)=>b[0]===g[0]&&b[1]===g[1];Jd.lrp=(b,g,m)=>yg.add(b,yg.mul(yg.sub(g,b),m));Jd.int=(b,g,m,G,V=1)=>{m=(yg.clamp(m,G)-m)/(G-m);return yg.add(yg.mul(b,1-m),yg.mul(g,V))};Jd.ang3=(b,g,m)=>{b=yg.vec(g,b);g=yg.vec(g,m);return yg.ang(b,g)};Jd.abs=b=>[Math.abs(b[0]),Math.abs(b[1])];Jd.rescale=(b,g)=>{const m=yg.len(b);return[g*b[0]/m,g*b[1]/m]};Jd.isLeft=(b,g,m)=>
(g[0]-b[0])*(m[1]-b[1])-(m[0]-b[0])*(g[1]-b[1]);Jd.clockwise=(b,g,m)=>0<yg.isLeft(b,g,m);Jd.toFixed=b=>b.map(g=>Math.round(100*g)/100);Jd.nearestPointOnLineThroughPoint=(b,g,m)=>yg.add(b,yg.mul(g,yg.pry(yg.sub(m,b),g)));Jd.distanceToLineThroughPoint=(b,g,m)=>yg.dist(m,yg.nearestPointOnLineThroughPoint(b,g,m));Jd.nearestPointOnLineSegment=(b,g,m,G=!0)=>{const V=yg.uni(yg.sub(g,b));m=yg.add(b,yg.mul(V,yg.pry(yg.sub(m,b),V)));if(G){if(m[0]<Math.min(b[0],g[0]))return b[0]<g[0]?b:g;if(m[0]>Math.max(b[0],
g[0]))return b[0]>g[0]?b:g;if(m[1]<Math.min(b[1],g[1]))return b[1]<g[1]?b:g;if(m[1]>Math.max(b[1],g[1]))return b[1]>g[1]?b:g}return m};Jd.distanceToLineSegment=(b,g,m,G=!0)=>yg.dist(m,yg.nearestPointOnLineSegment(b,g,m,G));Jd.nudge=(b,g,m)=>yg.isEqual(b,g)?b:yg.add(b,yg.mul(yg.uni(yg.sub(g,b)),m));Jd.nudgeAtAngle=(b,g,m)=>[Math.cos(g)*m+b[0],Math.sin(g)*m+b[1]];Jd.toPrecision=(b,g=4)=>[+b[0].toPrecision(g),+b[1].toPrecision(g)];Jd.pointsBetween=(b,g,m=6)=>Array.from(Array(m)).map((G,V)=>{G=V/(m-1);
V=Math.min(1,.5+Math.abs(.5-G));return[...yg.lrp(b,g,G),V]});Jd.slope=(b,g)=>b[0]===g[0]?NaN:(b[1]-g[1])/(b[0]-g[0]);Jd.toAngle=b=>{b=Math.atan2(b[1],b[0]);return 0>b?b+2*Math.PI:b};Jd.max=(...b)=>[Math.max(...b.map(g=>g[0])),Math.max(...b.map(g=>g[1]))];Jd.min=(...b)=>[Math.min(...b.map(g=>g[0])),Math.min(...b.map(g=>g[1]))];var me=Jd,sf=class{static getRectangleSides(b,g,m=0){const G=[b[0]+g[0]/2,b[1]+g[1]/2],V=Jd.rotWith(b,G,m),ka=Jd.rotWith(Jd.add(b,[g[0],0]),G,m),qa=Jd.rotWith(Jd.add(b,g),G,
m);b=Jd.rotWith(Jd.add(b,[0,g[1]]),G,m);return[["top",[V,ka]],["right",[ka,qa]],["bottom",[qa,b]],["left",[b,V]]]}static getBoundsSides(b){return sf.getRectangleSides([b.minX,b.minY],[b.width,b.height])}static expandBounds(b,g){return{minX:b.minX-g,minY:b.minY-g,maxX:b.maxX+g,maxY:b.maxY+g,width:b.width+2*g,height:b.height+2*g}}static boundsCollide(b,g){return!(b.maxX<g.minX||b.minX>g.maxX||b.maxY<g.minY||b.minY>g.maxY)}static boundsContain(b,g){return Array.isArray(g)?b.minX<g[0]&&b.minY<g[1]&&b.maxY>
g[1]&&b.maxX>g[0]:b.minX<g.minX&&b.minY<g.minY&&b.maxY>g.maxY&&b.maxX>g.maxX}static boundsContained(b,g){return sf.boundsContain(g,b)}static boundsAreEqual(b,g){return!(g.maxX!==b.maxX||g.minX!==b.minX||g.maxY!==b.maxY||g.minY!==b.minY)}static getBoundsFromPoints(b,g=0){let m=Infinity,G=Infinity,V=-Infinity,ka=-Infinity;if(2>b.length)G=m=0,ka=V=1;else for(const qa of b)m=Math.min(qa[0],m),G=Math.min(qa[1],G),V=Math.max(qa[0],V),ka=Math.max(qa[1],ka);return 0!==g?sf.getBoundsFromPoints(b.map(qa=>Jd.rotWith(qa,
[(m+V)/2,(G+ka)/2],g))):{minX:m,minY:G,maxX:V,maxY:ka,width:Math.max(1,V-m),height:Math.max(1,ka-G)}}static centerBounds(b,g){const m=sf.getBoundsCenter(b);return sf.translateBounds(b,[g[0]-m[0],g[1]-m[1]])}static snapBoundsToGrid(b,g){const m=Math.round(b.minX/g)*g,G=Math.round(b.minY/g)*g,V=Math.round(b.maxX/g)*g;b=Math.round(b.maxY/g)*g;return{minX:m,minY:G,maxX:V,maxY:b,width:Math.max(1,V-m),height:Math.max(1,b-G)}}static translateBounds(b,g){return{minX:b.minX+g[0],minY:b.minY+g[1],maxX:b.maxX+
g[0],maxY:b.maxY+g[1],width:b.width,height:b.height}}static multiplyBounds(b,g){const m=sf.getBoundsCenter(b);return sf.centerBounds({minX:b.minX*g,minY:b.minY*g,maxX:b.maxX*g,maxY:b.maxY*g,width:b.width*g,height:b.height*g},[m[0]*g,m[1]*g])}static divideBounds(b,g){const m=sf.getBoundsCenter(b);return sf.centerBounds({minX:b.minX/g,minY:b.minY/g,maxX:b.maxX/g,maxY:b.maxY/g,width:b.width/g,height:b.height/g},[m[0]/g,m[1]/g])}static getRotatedBounds(b,g=0){b=sf.getRotatedCorners(b,g);let m=g=Infinity,
G=-Infinity,V=-Infinity;for(const ka of b)g=Math.min(ka[0],g),m=Math.min(ka[1],m),G=Math.max(ka[0],G),V=Math.max(ka[1],V);return{minX:g,minY:m,maxX:G,maxY:V,width:Math.max(1,G-g),height:Math.max(1,V-m),rotation:0}}static getRotatedEllipseBounds(b,g,m,G,V=0){var ka=Math.cos(V);const qa=Math.sin(V);V=Math.hypot(m*ka,G*qa);ka=Math.hypot(m*qa,G*ka);return{minX:b+m-V,minY:g+G-ka,maxX:b+m+V,maxY:g+G+ka,width:2*V,height:2*ka}}static getExpandedBounds(b,g){const m=Math.min(b.minX,g.minX),G=Math.min(b.minY,
g.minY),V=Math.max(b.maxX,g.maxX);b=Math.max(b.maxY,g.maxY);return{minX:m,minY:G,maxX:V,maxY:b,width:Math.abs(V-m),height:Math.abs(b-G)}}static getCommonBounds(b){if(2>b.length)return b[0];let g=b[0];for(let m=1;m<b.length;m++)g=sf.getExpandedBounds(g,b[m]);return g}static getRotatedCorners(b,g=0){const m=[b.minX+b.width/2,b.minY+b.height/2];b=[[b.minX,b.minY],[b.maxX,b.minY],[b.maxX,b.maxY],[b.minX,b.maxY]];return g?b.map(G=>Jd.rotWith(G,m,g)):b}static getTransformedBoundingBox(b,g,m,G=0,V=!1){const [ka,
qa]=[b.minX,b.minY],[Ia,Ta]=[b.maxX,b.maxY];let [Xa,ib]=[b.minX,b.minY],[vb,Lb]=[b.maxX,b.maxY];if("center"===g)return{minX:Xa+m[0],minY:ib+m[1],maxX:vb+m[0],maxY:Lb+m[1],width:vb-Xa,height:Lb-ib,scaleX:1,scaleY:1};const [cc,Tb]=Jd.rot(m,-G);switch(g){case "top_edge":case "top_left_corner":case "top_right_corner":ib+=Tb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Lb+=Tb}switch(g){case "left_edge":case "top_left_corner":case "bottom_left_corner":Xa+=cc;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":vb+=
cc}var kc=Ia-ka;const mc=Ta-qa;var Vb=(vb-Xa)/kc,tc=(Lb-ib)/mc;b=0>Vb;m=0>tc;var Ic=Math.abs(vb-Xa),Sc=Math.abs(Lb-ib);if(V)switch(V=kc/mc,kc=V<Ic/Sc,tc=1/V*(0>tc?1:-1)*Ic,Vb=Sc*(0>Vb?1:-1)*V,g){case "top_left_corner":kc?ib=Lb+tc:Xa=vb+Vb;break;case "top_right_corner":kc?ib=Lb+tc:vb=Xa-Vb;break;case "bottom_right_corner":kc?Lb=ib-tc:vb=Xa-Vb;break;case "bottom_left_corner":kc?Lb=ib-tc:Xa=vb+Vb;break;case "bottom_edge":case "top_edge":Ic=(Xa+vb)/2;Sc*=V;Xa=Ic-Sc/2;vb=Ic+Sc/2;break;case "left_edge":case "right_edge":Sc=
(ib+Lb)/2,Ic/=V,ib=Sc-Ic/2,Lb=Sc+Ic/2}if(0!==G%(2*Math.PI)){Ic=[0,0];Sc=Jd.med([ka,qa],[Ia,Ta]);Vb=Jd.med([Xa,ib],[vb,Lb]);switch(g){case "top_left_corner":Ic=Jd.sub(Jd.rotWith([vb,Lb],Vb,G),Jd.rotWith([Ia,Ta],Sc,G));break;case "top_right_corner":Ic=Jd.sub(Jd.rotWith([Xa,Lb],Vb,G),Jd.rotWith([ka,Ta],Sc,G));break;case "bottom_right_corner":Ic=Jd.sub(Jd.rotWith([Xa,ib],Vb,G),Jd.rotWith([ka,qa],Sc,G));break;case "bottom_left_corner":Ic=Jd.sub(Jd.rotWith([vb,ib],Vb,G),Jd.rotWith([Ia,qa],Sc,G));break;
case "top_edge":Ic=Jd.sub(Jd.rotWith(Jd.med([Xa,Lb],[vb,Lb]),Vb,G),Jd.rotWith(Jd.med([ka,Ta],[Ia,Ta]),Sc,G));break;case "left_edge":Ic=Jd.sub(Jd.rotWith(Jd.med([vb,ib],[vb,Lb]),Vb,G),Jd.rotWith(Jd.med([Ia,qa],[Ia,Ta]),Sc,G));break;case "bottom_edge":Ic=Jd.sub(Jd.rotWith(Jd.med([Xa,ib],[vb,ib]),Vb,G),Jd.rotWith(Jd.med([ka,qa],[Ia,qa]),Sc,G));break;case "right_edge":Ic=Jd.sub(Jd.rotWith(Jd.med([Xa,ib],[Xa,Lb]),Vb,G),Jd.rotWith(Jd.med([ka,qa],[ka,Ta]),Sc,G))}[Xa,ib]=Jd.sub([Xa,ib],Ic);[vb,Lb]=Jd.sub([vb,
Lb],Ic)}vb<Xa&&([vb,Xa]=[Xa,vb]);Lb<ib&&([Lb,ib]=[ib,Lb]);return{minX:Xa,minY:ib,maxX:vb,maxY:Lb,width:vb-Xa,height:Lb-ib,scaleX:(vb-Xa)/(Ia-ka||1)*(b?-1:1),scaleY:(Lb-ib)/(Ta-qa||1)*(m?-1:1)}}static getTransformAnchor(b,g,m){let G=b;switch(b){case "top_left_corner":G=g&&m?"bottom_right_corner":g?"top_right_corner":m?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":G=g&&m?"bottom_left_corner":g?"top_left_corner":m?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":G=
g&&m?"top_left_corner":g?"bottom_left_corner":m?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":G=g&&m?"top_right_corner":g?"bottom_right_corner":m?"top_left_corner":"top_right_corner"}return G}static getRelativeTransformedBoundingBox(b,g,m,G,V){G=b.minX+(G?g.maxX-m.maxX:m.minX-g.minX)/g.width*b.width;V=b.minY+(V?g.maxY-m.maxY:m.minY-g.minY)/g.height*b.height;const ka=m.width/g.width*b.width;b=m.height/g.height*b.height;return{minX:G,minY:V,maxX:G+ka,maxY:V+b,width:ka,height:b}}static getRotatedSize(b,
g){const m=Jd.div(b,2);b=[[0,0],[b[0],0],b,[0,b[1]]].map(G=>Jd.rotWith(G,m,g));b=sf.getBoundsFromPoints(b);return[b.width,b.height]}static getBoundsCenter(b){return[b.minX+b.width/2,b.minY+b.height/2]}static getBoundsWithCenter(b){const g=sf.getBoundsCenter(b);return Jc(oc({},b),{midX:g[0],midY:g[1]})}static getCommonTopLeft(b){const g=[Infinity,Infinity];b.forEach(m=>{g[0]=Math.min(g[0],m[0]);g[1]=Math.min(g[1],m[1])});return g}static getTLSnapPoints(b,g,m){const G=oc({},b);b=[0,0];const V=[],ka=
{minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},qa=["midX","minX","maxX"],Ia=["midY","minY","maxY"];g=g.map(Lb=>{const cc=qa.flatMap((kc,mc)=>qa.map((Vb,tc)=>{const Ic=G[kc]-Lb[Vb];return{f:kc,t:Vb,gap:Ic,distance:Math.abs(Ic),isCareful:0===mc||3===mc+tc}})),Tb=Ia.flatMap((kc,mc)=>Ia.map((Vb,tc)=>{const Ic=G[kc]-Lb[Vb];return{f:kc,t:Vb,gap:Ic,distance:Math.abs(Ic),
isCareful:0===mc||3===mc+tc}}));return[Lb,cc,Tb]});let Ta=Infinity,Xa=Infinity,ib=Infinity,vb=Infinity;g.forEach(([,Lb,cc])=>{Lb.forEach(Tb=>{Tb.distance<m&&Tb.distance<ib&&(ib=Tb.distance,Ta=Tb.gap)});cc.forEach(Tb=>{Tb.distance<m&&Tb.distance<vb&&(vb=Tb.distance,Xa=Tb.gap)})});g.forEach(([Lb,cc,Tb])=>{Infinity!==Ta&&cc.forEach(kc=>{2>Math.abs(kc.gap-Ta)&&(ka[kc.f]=Jc(oc({},ka[kc.f]),{isSnapped:!0,to:Lb[kc.t],B:Lb,distance:kc.distance}))});Infinity!==Xa&&Tb.forEach(kc=>{2>Math.abs(kc.gap-Xa)&&(ka[kc.f]=
Jc(oc({},ka[kc.f]),{isSnapped:!0,to:Lb[kc.t],B:Lb,distance:kc.distance}))})});b[0]=Infinity===Ta?0:Ta;b[1]=Infinity===Xa?0:Xa;G.minX-=b[0];G.midX-=b[0];G.maxX-=b[0];G.minY-=b[1];G.midY-=b[1];G.maxY-=b[1];qa.forEach(Lb=>{Lb=ka[Lb];if(Lb.isSnapped){var {id:cc,B:Tb}=Lb;Lb=G[cc];V.push("minX"===cc?[[Lb,G.midY],[Lb,Tb.minY],[Lb,Tb.maxY]]:[[Lb,G.minY],[Lb,G.maxY],[Lb,Tb.minY],[Lb,Tb.maxY]])}});Ia.forEach(Lb=>{Lb=ka[Lb];if(Lb.isSnapped){var {id:cc,B:Tb}=Lb;Lb=G[cc];V.push("midY"===cc?[[G.midX,Lb],[Tb.minX,
Lb],[Tb.maxX,Lb]]:[[G.minX,Lb],[G.maxX,Lb],[Tb.minX,Lb],[Tb.maxX,Lb]])}});return{offset:b,snapLines:V}}static ensureRatio(b,g){const {width:m,height:G}=b,V=oc({},b);m/G<g?(V.width=G*g,V.maxX+=m-b.width):(V.height=m/g,V.maxY+=G-b.height);return V}static getDistributions(b,g){var m=b.map(ka=>{const qa=ka.getBounds();return{id:ka.id,point:[qa.minX,qa.minY],bounds:qa,center:ka.getCenter()}});b=m.length;var G=sf.getCommonBounds(m.map(({bounds:ka})=>ka));const V=[];switch(g){case "horizontal":g=m.reduce((ka,
qa)=>ka+qa.bounds.width,0);if(g>G.width){const ka=m.sort((Xa,ib)=>Xa.bounds.minX-ib.bounds.minX)[0],qa=m.sort((Xa,ib)=>ib.bounds.maxX-Xa.bounds.maxX)[0];G=m.filter(Xa=>Xa!==ka&&Xa!==qa).sort((Xa,ib)=>Xa.center[0]-ib.center[0]);const Ia=(qa.center[0]-ka.center[0])/(b-1),Ta=ka.center[0]+Ia;G.forEach(({id:Xa,point:ib,bounds:vb},Lb)=>{V.push({id:Xa,prev:ib,next:[Ta+Ia*Lb-vb.width/2,vb.minY]})})}else{m=m.sort((Ia,Ta)=>Ia.center[0]-Ta.center[0]);let ka=G.minX;const qa=(G.width-g)/(b-1);m.forEach(({id:Ia,
point:Ta,bounds:Xa})=>{V.push({id:Ia,prev:Ta,next:[ka,Xa.minY]});ka+=Xa.width+qa})}break;case "vertical":if(g=m.reduce((ka,qa)=>ka+qa.bounds.height,0),g>G.height){const ka=m.sort((Xa,ib)=>Xa.bounds.minY-ib.bounds.minY)[0],qa=m.sort((Xa,ib)=>ib.bounds.maxY-Xa.bounds.maxY)[0];G=m.filter(Xa=>Xa!==ka&&Xa!==qa).sort((Xa,ib)=>Xa.center[1]-ib.center[1]);const Ia=(qa.center[1]-ka.center[1])/(b-1),Ta=ka.center[1]+Ia;G.forEach(({id:Xa,point:ib,bounds:vb},Lb)=>{V.push({id:Xa,prev:ib,next:[vb.minX,Ta+Ia*Lb-vb.height/
2]})})}else{m=m.sort((Ia,Ta)=>Ia.center[1]-Ta.center[1]);let ka=G.minY;const qa=(G.height-g)/(b-1);m.forEach(({id:Ia,point:Ta,bounds:Xa})=>{V.push({id:Ia,prev:Ta,next:[Xa.minX,ka]});ka+=Xa.height+qa})}}return V}static getPackedDistributions(b){const g=sf.getCommonBounds(b.map(({bounds:V})=>V)),m=[g.minX,g.minY],G=Object.fromEntries(b.map(V=>[V.id,[V.bounds.minX,V.bounds.minY]]));b=b.filter(V=>{var ka,qa,Ia,Ta;return!((null==(qa=null==(ka=V.props.handles)?void 0:ka.start)?0:qa.bindingId)||(null==(Ta=
null==(Ia=V.props.handles)?void 0:Ia.end)?0:Ta.bindingId))}).map(V=>{const ka=V.getBounds();return{id:V.id,w:ka.width+16,h:ka.height+16,x:ka.minX,y:ka.minY}});A(b);return b.map(({id:V,x:ka,y:qa})=>({id:V,prev:G[V],next:[ka+m[0],qa+m[1]]}))}},wn=class{static pointInCircle(b,g,m){return Jd.dist(b,g)<=m}static pointInEllipse(b,g,m,G,V=0){V=V||0;var ka=Math.cos(V);V=Math.sin(V);g=Jd.sub(b,g);b=ka*g[0]+V*g[1];ka=V*g[0]-ka*g[1];return 1>=b*b/(m*m)+ka*ka/(G*G)}static pointInRect(b,g){return!(b[0]<g[0]||
b[0]>b[0]+g[0]||b[1]<g[1]||b[1]>b[1]+g[1])}static pointInPolygon(b,g){let m=0;g.forEach((G,V)=>{V=g[(V+1)%g.length];G[1]<=b[1]?V[1]>b[1]&&0<Jd.cross(G,V,b)&&(m+=1):V[1]<=b[1]&&0>Jd.cross(G,V,b)&&--m});return 0!==m}static pointInBounds(b,g){return!(b[0]<g.minX||b[0]>g.maxX||b[1]<g.minY||b[1]>g.maxY)}static pointInPolyline(b,g,m=3){for(let G=1;G<g.length;G++)if(Jd.distanceToLineSegment(g[G-1],g[G],b)<m)return!0;return!1}static _getSqSegDist(b,g,m){let G=g[0];g=g[1];let V=m[0]-G,ka=m[1]-g;if(0!==V||
0!==ka){const qa=((b[0]-G)*V+(b[1]-g)*ka)/(V*V+ka*ka);1<qa?(G=m[0],g=m[1]):0<qa&&(G+=V*qa,g+=ka*qa)}V=b[0]-G;ka=b[1]-g;return V*V+ka*ka}static _simplifyStep(b,g,m,G,V){let ka=G,qa=-1;for(let Ia=g+1;Ia<m;Ia++){const Ta=wn._getSqSegDist(b[Ia],b[g],b[m]);Ta>ka&&(qa=Ia,ka=Ta)}-1<qa&&ka>G&&(1<qa-g&&wn._simplifyStep(b,g,qa,G,V),V.push(b[qa]),1<m-qa&&wn._simplifyStep(b,qa,m,G,V))}static simplify2(b,g=1){if(2>=b.length)return b;g*=g;var m=b[0],G=b[1];const V=[m];for(let ka=1,qa=b.length;ka<qa;ka++)G=b[ka],
(G[0]-m[0])*(G[0]-m[0])+(G[1]-m[1])*(G[1]-m[1])>g&&(V.push(G),m=G);m!==G&&V.push(G);m=V.length-1;G=[V[0]];wn._simplifyStep(V,0,m,g,G);G.push(V[m],b[b.length-1]);return G}static pointNearToPolyline(b,g,m=8){const G=g.length;for(let V=1;V<G;V++)if(Jd.distanceToLineSegment(g[V-1],g[V],b)<m)return!0;return!1}},Lk=wn;cb(Lk,"simplify",(b,g=1)=>{var m=b.length;const G=b[0],V=b[m-1],[ka,qa]=G,[Ia,Ta]=V;if(2<m){let Xa=0,ib=0;const vb=Jd.len2([Ta-qa,Ia-ka]);for(let Lb=1;Lb<m-1;Lb++){const [cc,Tb]=b[Lb],kc=
Math.pow(cc*(Ta-qa)+ka*(Tb-Ta)+Ia*(qa-Tb),2)/vb;Xa>kc||(Xa=kc,ib=Lb)}if(Xa>g)return m=wn.simplify(b.slice(0,ib+1),g),b=wn.simplify(b.slice(ib+1),g),m.concat(b.slice(1))}return[G,V]});var mr=Wd(ui()),xs=({target:b},g)=>{b=b&&b.tagName;return!!(b&&g&&g.includes(b))},lr=class{static registerShortcut(b,g){mr.default.bind(b,(m,G)=>{var V;m.preventDefault();xs(m,["INPUT","TEXTAREA","SELECT"])||(null==(V=m.target)?0:V.isContentEditable)||g(m,G)},"keydown");return()=>{mr.default.unbind(b,"keydown")}}},Tf=
Math.PI,jn=Tf/2,hl=2*Tf,kn={},Qn={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},ol=class{static circleFromThreePoints(b,g,m){const [G,
V]=b,[ka,qa]=g,[Ia,Ta]=m;g=G*(qa-Ta)-V*(ka-Ia)+ka*Ta-Ia*qa;b=-((G*G+V*V)*(Ta-qa)+(ka*ka+qa*qa)*(V-Ta)+(Ia*Ia+Ta*Ta)*(qa-V))/(2*g);g=-((G*G+V*V)*(ka-Ia)+(ka*ka+qa*qa)*(Ia-G)+(Ia*Ia+Ta*Ta)*(G-ka))/(2*g);return[b,g,Math.hypot(b-G,g-V)]}static perimeterOfEllipse(b,g){const m=Math.pow(b-g,2)/Math.pow(b+g,2);return Tf*(b+g)*(1+3*m/(10+Math.sqrt(4-3*m)))}static shortAngleDist(b,g){b=(g-b)%hl;return 2*b%hl-b}static longAngleDist(b,g){return hl-ol.shortAngleDist(b,g)}static lerpAngles(b,g,m){return b+ol.shortAngleDist(b,
g)*m}static angleDelta(b,g){return ol.shortAngleDist(b,g)}static getSweep(b,g,m){return ol.angleDelta(me.angle(b,g),me.angle(b,m))}static clampRadians(b){return(hl+b)%hl}static snapAngleToSegments(b,g){g=hl/g;b=Math.floor((ol.clampRadians(b)+g/2)/g)*g%hl;b<Tf&&(b+=hl);b>Tf&&(b-=hl);return b}static isAngleBetween(b,g,m){if(m===b||m===g)return!0;g=(g-b+jn)%jn;return g<=Tf!==(m-b+jn)%jn>g}static degreesToRadians(b){return b*Tf/180}static radiansToDegrees(b){return 180*b/Tf}static getArcLength(b,g,m,
G){b=ol.getSweep(b,m,G);return b/hl*hl*g}static getSweepFlag(b,g,m){m=me.angle(b,m);return 0<(me.angle(b,g)-m+3*Tf)%hl-Tf?0:1}static getLargeArcFlag(b,g,m){b=me.angle(m,b);g=(me.angle(m,g)-b+3*Tf)%hl-Tf;return Math.abs(g)>jn?0:1}static getArcDashOffset(b,g,m,G,V){const ka=ol.getSweepFlag(b,m,G);g=ol.getArcLength(b,g,m,G);return-(0>ka?g:hl*b[2]-g)/2+V}static getEllipseDashOffset(b,g){return-(hl*b[2])/2+-g}static radiansToCardinalDirection(b){return b<.25*Math.PI?"north":b<.75*Math.PI?"east":b<1.25*
Math.PI?"south":b<1.75*Math.PI?"west":"north"}},zk=class{static getPolygonCentroid(b){var g=b.map(m=>m[0]);b=b.map(m=>m[1]);g=Math.min(...g)+Math.max(...g);b=Math.min(...b)+Math.max(...b);return[g?g/2:0,b?b/2:0]}};cb(zk,"getEdges",b=>{const g=b.length;return b.map((m,G)=>[m,b[(G+1)%g]])});cb(zk,"getEdgeOutwardNormal",(b,g)=>me.per(me.uni(me.sub(g,b))));cb(zk,"getEdgeInwardNormal",(b,g)=>me.neg(zk.getEdgeOutwardNormal(b,g)));cb(zk,"getOffsetEdge",(b,g,m)=>{m=me.mul(me.per(me.uni(me.sub(g,b))),m);return[me.add(b,
m),me.add(g,m)]});cb(zk,"getOffsetEdges",(b,g)=>b.map(([m,G])=>zk.getOffsetEdge(m,G,g)));cb(zk,"getOffsetPolygon",(b,g)=>{if(1>b.length)throw Error("Expected at least one point.");if(1===b.length)return b=b[0],[me.add(b,[-g,-g]),me.add(b,[g,-g]),me.add(b,[g,g]),me.add(b,[-g,g])];if(2===b.length){const [m,G]=b;return[...zk.getOffsetEdge(m,G,g),...zk.getOffsetEdge(G,m,g)]}return zk.getOffsetEdges(zk.getEdges(b),g).flatMap((m,G,V)=>{{G=V[(G+1)%V.length];const ka=Jd.slope(m[0],m[1]);V=Jd.slope(G[0],G[1]);
ka!==V?Number.isNaN(ka)&&!Number.isNaN(V)?m=[m[0][0],(m[0][0]-G[0][0])*V+G[0][1]]:Number.isNaN(V)&&!Number.isNaN(ka)?m=[G[0][0],(G[0][0]-m[0][0])*ka+m[0][1]]:(m=(ka*m[0][0]-V*G[0][0]+G[0][1]-m[0][1])/(ka-V),m=[m,V*(m-G[0][0])+G[0][1]]):m=void 0}if(void 0===m)throw Error("Expected an intersection");return m})});cb(zk,"getPolygonVertices",(b,g,m=0,G=1)=>{b=me.div(b,2);const [V,ka]=[Math.max(1,b[0]-m),Math.max(1,b[1]-m)];m=[];for(let Xa=0,ib=hl/g;Xa<g;Xa++){var qa=(-jn+Xa*ib)%hl,Ia=(-jn+(Xa+1)*ib)%hl;
qa=me.add(b,[V*Math.cos(qa),ka*Math.sin(qa)]);Ia=me.add(b,[V*Math.cos(Ia),ka*Math.sin(Ia)]);var Ta=me.med(qa,Ia);Ta=me.nudge(Ta,b,me.dist(b,Ta)*(1-G));m.push(qa,Ta,Ia)}return m});cb(zk,"getTriangleVertices",(b,g=0,m=1)=>{const [G,V]=b;var ka=1-m;b=[G/2,g/2];m=[G-g,V-g];g=[g/2,V-g];const qa=zk.getPolygonCentroid([b,m,g]),Ia=me.med(b,m),Ta=me.med(m,g),Xa=me.med(g,b),ib=me.dist(Ia,qa)*ka,vb=me.dist(Ta,qa)*ka;ka*=me.dist(Xa,qa);return[b,ib?me.nudge(Ia,qa,ib):Ia,m,vb?me.nudge(Ta,qa,vb):Ta,g,ka?me.nudge(Xa,
qa,ka):Xa]});cb(zk,"getStarVertices",(b,g,m,G=1)=>{const V=me.div(g,2),ka=me.mul(V,G/2),qa=hl/m/2;return Array.from(Array(2*m)).map((Ia,Ta)=>{Ia=-jn+Ta*qa;const [Xa,ib]=Ta%2?ka:V;return me.add(b,[Xa*Math.cos(Ia),ib*Math.sin(Ia)])})});var Bq=class{static getCurvedPathForPolygon(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],m=b.length;for(let G=1;G<m;G++){const [V,ka]=b[G],[qa,Ia]=b[(G+1)%m];g.push(V,ka,(V+qa)/2,(ka+Ia)/2)}g.push("Z");
return g.join(" ")}static getCurvedPathForPoints(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],m=b.length;for(let G=1;G<m-1;G++){const [V,ka]=b[G],[qa,Ia]=b[G+1];g.push(V,ka,(V+qa)/2,(ka+Ia)/2)}return g.join(" ")}static getSvgPathFromStroke(b,g=!0){const m=b.length;if(4>m)return"";let G=b[0],V=b[1];var ka=b[2];ka=`M${G[0].toFixed(2)},${G[1].toFixed(2)} Q${V[0].toFixed(2)},${V[1].toFixed(2)} ${((V[0]+ka[0])/2).toFixed(2)},${((V[1]+
ka[1])/2).toFixed(2)} T`;for(let qa=2,Ia=m-1;qa<Ia;qa++)G=b[qa],V=b[qa+1],ka+=`${((G[0]+V[0])/2).toFixed(2)},${((G[1]+V[1])/2).toFixed(2)} `;g&&(ka+="Z");return ka}static getSvgPathFromStrokePoints(b,g=!1){const m=b.length;if(4>m)return"";let G=b[0].point,V=b[1].point;var ka=b[2].point;ka=`M${G[0].toFixed(2)},${G[1].toFixed(2)} Q${V[0].toFixed(2)},${V[1].toFixed(2)} ${((V[0]+ka[0])/2).toFixed(2)},${((V[1]+ka[1])/2).toFixed(2)} T`;for(let qa=2,Ia=m-1;qa<Ia;qa++)G=b[qa].point,V=b[qa+1].point,ka+=`${((G[0]+
V[0])/2).toFixed(2)},${((G[1]+V[1])/2).toFixed(2)} `;g&&(ka+="Z");return ka}};cb(Bq,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var ys={},vo=Object.assign,Xo=Object.getOwnPropertyDescriptor,Pn=Object.defineProperty,Vo=Object.prototype,On=[];Object.freeze(On);var Gp={};Object.freeze(Gp);var Aq="undefined"!==typeof Proxy,nr=Object.toString(),Jp=function(){},It="undefined"!==typeof Object.getOwnPropertySymbols,zq="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:It?
function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:Object.getOwnPropertyNames,pv=Object.getOwnPropertyDescriptors||function(b){var g={};zq(b).forEach(function(m){g[m]=Xo(b,m)});return g},Ln=Symbol("mobx-stored-annotations"),nh=Symbol("mobx administration"),zo=function(){function b(m){void 0===m&&(m="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=
gg.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=m}var g=b.prototype;g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(m){return m()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};g.reportObserved=function(){return Nb(this)};g.reportChanged=function(){qd();fc(this);Td()};g.toString=function(){return this.name_};return b}(),zs=D("Atom",zo),Ao={identity:function(b,g){return b===g},structural:function(b,g){return ta(b,g)},"default":function(b,g){return Object.is?
Object.is(b,g):b===g?0!==b||1/b===1/g:b!==b&&g!==g},shallow:function(b,g){return ta(b,g,1)}},T="override",la=ob(),Da={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Da);var gb=Wb("observable"),Hb=Wb("observable.ref",{enhancer:fb}),sc=Wb("observable.shallow",{enhancer:function(b,g,m){if(void 0===b||null===b||$d(b)||kb(b)||Mp(b)||Gq(b))return b;if(Array.isArray(b))return Yd.array(b,{name:m,deep:!1});if(I(b))return Yd.object(b,void 0,{name:m,deep:!1});if(N(b))return Yd.map(b,{name:m,
deep:!1});if(P(b))return Yd.set(b,{name:m,deep:!1})}}),Lc=Wb("observable.struct",{enhancer:function(b,g){return ta(b,g)?g:b}}),id=Ua(gb);Object.assign(cd,id);var Vd={box:function(b,g){g=g||Da;return new bf(b,Kc(g),g.name,!0,g.equals)},array:function(b,g){g=g||Da;return(!1===yf.useProxies||!1===g.proxy?hf:$a)(b,Kc(g),g.name)},map:function(b,g){g=g||Da;return new ny(b,Kc(g),g.name)},set:function(b,g){g=g||Da;return new ly(b,Kc(g),g.name)},object:function(b,g,m){if(!1===yf.useProxies||!1===(null==m?
void 0:m.proxy))m=Ed({},m);else{var G={},V,ka;ja();G=Ed(G,m);m=null!=(ka=(V=G[nh]).proxy_)?ka:V.proxy_=new Proxy(G,OC)}return rc(m,b,g)},ref:Ua(Hb),shallow:Ua(sc),deep:id,struct:Ua(Lc)},Yd=vo(cd,Vd),ig=Ab("computed"),Bh=Ab("computed.struct",{equals:Ao.structural}),pe=function(b,g){if(Y(g))return Ea(b,g,ig);if(I(b))return Ua(Ab("computed",b));g=I(g)?g:{};g.get=b;g.name||(g.name=b.name||"");return new qh(g)};Object.assign(pe,ig);pe.struct=Ua(Bh);var Fg,th,ah=0,qe=1,Zd=null!=(Fg=null==(th=Xo(function(){},
"name"))?void 0:th.configurable)?Fg:!1,oe={value:"action",configurable:!0,writable:!1,enumerable:!1};var af=Symbol.toPrimitive;var bf=function(b){function g(G,V,ka,qa,Ia){void 0===ka&&(ka="ObservableValue");void 0===Ia&&(Ia=Ao["default"]);qa=b.call(this,ka)||this;qa.enhancer=void 0;qa.hasUnreportedChange_=!1;qa.interceptors_=void 0;qa.changeListeners_=void 0;qa.value_=void 0;qa.dehancer=void 0;qa.enhancer=V;qa.name_=ka;qa.equals=Ia;qa.value_=V(G,void 0,ka);return qa}ea(g,b);var m=g.prototype;m.dehanceValue=
function(G){return void 0!==this.dehancer?this.dehancer(G):G};m.set=function(G){G=this.prepareNewValue_(G);G!==yf.UNCHANGED&&this.setNewValue_(G)};m.prepareNewValue_=function(G){if(ee(this)){G=nc(this,{object:this,type:cp,newValue:G});if(!G)return yf.UNCHANGED;G=G.newValue}G=this.enhancer(G,this.value_,this.name_);return this.equals(this.value_,G)?yf.UNCHANGED:G};m.setNewValue_=function(G){var V=this.value_;this.value_=G;this.reportChanged();Ne(this)&&cf(this,{type:cp,object:this,newValue:G,oldValue:V})};
m.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};m.intercept_=function(G){return td(this,G)};m.observe_=function(G,V){V&&G({observableKind:"value",debugObjectName:this.name_,object:this,type:cp,newValue:this.value_,oldValue:void 0});return Yf(this,G)};m.raw=function(){return this.value_};m.toJSON=function(){return this.get()};m.toString=function(){return this.name_+"["+this.value_+"]"};m.valueOf=function(){return X(this.get())};m[af]=function(){return this.valueOf()};
return g}(zo),Kh=D("ObservableValue",bf);var zg=Symbol.toPrimitive;var qh=function(){function b(m){this.dependenciesState_=gg.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=gg.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new jp(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=
void 0;this.isTracing_=gn.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;m.get||n(31);this.derivation=m.get;this.name_=m.name||"ComputedValue";m.set&&(this.setter_=Qc("ComputedValue-setter",m.set));this.equals_=m.equals||(m.compareStructural||m.struct?Ao.structural:Ao["default"]);this.scope_=m.context;this.requiresReaction_=m.requiresReaction;this.keepAlive_=!!m.keepAlive}var g=b.prototype;g.onBecomeStale_=function(){rb(this)};g.onBO=function(){this.onBOL&&
this.onBOL.forEach(function(m){return m()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};g.get=function(){this.isComputing_&&n(32,this.name_,this.derivation);if(0!==yf.inBatch||0!==this.observers_.size||this.keepAlive_){if(Nb(this),Yc(this)){var m=yf.trackingContext;this.keepAlive_&&!m&&(yf.trackingContext=this);this.trackAndCompute()&&Xb(this);yf.trackingContext=m}}else Yc(this)&&(this.warnAboutUntrackedRead_(),qd(),this.value_=this.computeValue_(!1),Td());m=this.value_;
if(m instanceof jp)throw m.cause;return m};g.set=function(m){if(this.setter_){this.isRunningSetter_&&n(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,m)}finally{this.isRunningSetter_=!1}}else n(34,this.name_)};g.trackAndCompute=function(){var m=this.value_,G=this.dependenciesState_===gg.NOT_TRACKING_,V=this.computeValue_(!0);if(m=G||m instanceof jp||V instanceof jp||!this.equals_(m,V))this.value_=V;return m};g.computeValue_=function(m){this.isComputing_=!0;var G=yc(!1);
if(m)var V=kd(this,this.derivation,this.scope_);else if(!0===yf.disableErrorBoundaries)V=this.derivation.call(this.scope_);else try{V=this.derivation.call(this.scope_)}catch(ka){V=new jp(ka)}yf.allowStateChanges=G;this.isComputing_=!1;return V};g.suspend_=function(){this.keepAlive_||(Md(this),this.value_=void 0)};g.observe_=function(m,G){var V=this,ka=!0,qa=void 0;return Od(function(){var Ia=V.get();if(!ka||G){var Ta=qc();m({observableKind:"computed",debugObjectName:V.name_,type:cp,object:V,newValue:Ia,
oldValue:qa});yf.trackingDerivation=Ta}ka=!1;qa=Ia})};g.warnAboutUntrackedRead_=function(){};g.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};g.valueOf=function(){return X(this.get())};g[zg]=function(){return this.valueOf()};return b}(),Th=D("ComputedValue",qh),gg;(function(b){b[b.NOT_TRACKING_=-1]="NOT_TRACKING_";b[b.UP_TO_DATE_=0]="UP_TO_DATE_";b[b.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";b[b.STALE_=2]="STALE_"})(gg||={});var gn;(function(b){b[b.NONE=0]="NONE";b[b.LOG=1]=
"LOG";b[b.BREAK=2]="BREAK"})(gn||={});var jp=function(b){this.cause=void 0;this.cause=b},Rt=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=
this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},St=!0,my=!1,yf=function(){var b=R();0<b.__mobxInstanceCount&&!b.__mobxGlobals&&(St=!1);b.__mobxGlobals&&b.__mobxGlobals.version!==(new Rt).version&&(St=!1);if(St){if(b.__mobxGlobals)return b.__mobxInstanceCount+=1,b.__mobxGlobals.UNCHANGED||(b.__mobxGlobals.UNCHANGED={}),b.__mobxGlobals;b.__mobxInstanceCount=1;return b.__mobxGlobals=new Rt}setTimeout(function(){my||n(35)},
1);return new Rt}(),sr=function(){function b(m,G,V,ka){void 0===m&&(m="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=gg.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=gn.NONE;this.name_=m;this.onInvalidate_=G;this.errorHandler_=V;this.requiresObservable_=ka}var g=b.prototype;g.onBecomeStale_=
function(){this.schedule_()};g.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,yf.pendingReactions.push(this),0<yf.inBatch||yf.isRunningReactions||Pt(nb))};g.isScheduled=function(){return this.isScheduled_};g.runReaction_=function(){if(!this.isDisposed_){qd();this.isScheduled_=!1;var m=yf.trackingContext;yf.trackingContext=this;if(Yc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(G){this.reportExceptionInDerivation_(G)}}yf.trackingContext=m;Td()}};g.track=function(m){if(!this.isDisposed_){qd();
this.isRunning_=!0;var G=yf.trackingContext;yf.trackingContext=this;m=kd(this,m,void 0);yf.trackingContext=G;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Md(this);m instanceof jp&&this.reportExceptionInDerivation_(m.cause);Td()}};g.reportExceptionInDerivation_=function(m){var G=this;if(this.errorHandler_)this.errorHandler_(m,this);else{if(yf.disableErrorBoundaries)throw m;yf.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",m);yf.globalReactionErrorHandlers.forEach(function(V){return V(m,
G)})}};g.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(qd(),Md(this),Td()))};g.getDisposer_=function(){var m=this.dispose.bind(this);m[nh]=this;return m};g.toString=function(){return"Reaction["+this.name_+"]"};g.trace=function(m){void 0===m&&(m=!1);Bb(this,m)};return b}(),FC=100,Pt=function(b){return b()},Qt=D("Reaction",sr),oy="action",qy=eb(oy),HC=eb("action.bound",{bound:!0}),ry=eb("autoAction",{autoAction:!0}),IC=eb("autoAction.bound",{autoAction:!0,bound:!0}),hg=
Vc(!1);Object.assign(hg,qy);var Ms=Vc(!0);Object.assign(Ms,ry);hg.bound=Ua(HC);Ms.bound=Ua(IC);var JC=function(b){return b()},KC="onBO",LC="onBUO",MC=0;Rb.prototype=Object.create(Error.prototype);var sy=sa("flow"),NC=sa("flow.bound",{bound:!0}),Ns=Object.assign(function(b,g){if(Y(g))return Ea(b,g,sy);var m=b.name||"\x3cunnamed flow\x3e";g=function(){var G=arguments,V=++MC,ka=hg(m+" - runid: "+V+" - init",b).apply(this,G),qa,Ia=void 0;G=new Promise(function(Ta,Xa){function ib(Tb){Ia=void 0;try{var kc=
hg(m+" - runid: "+V+" - yield "+cc++,ka.next).call(ka,Tb)}catch(mc){return Xa(mc)}Lb(kc)}function vb(Tb){Ia=void 0;try{var kc=hg(m+" - runid: "+V+" - yield "+cc++,ka["throw"]).call(ka,Tb)}catch(mc){return Xa(mc)}Lb(kc)}function Lb(Tb){if(ma(null==Tb?void 0:Tb.then))Tb.then(Lb,Xa);else{if(Tb.done)return Ta(Tb.value);Ia=Promise.resolve(Tb.value);return Ia.then(ib,vb)}}var cc=0;qa=Xa;ib(void 0)});G.cancel=hg(m+" - runid: "+V+" - cancel",function(){try{if(Ia){var Ta=Ia;ma(Ta.cancel)&&Ta.cancel()}var Xa=
ka["return"](void 0),ib=Promise.resolve(Xa.value);ib.then(Jp,Jp);ma(ib.cancel)&&ib.cancel();qa(new Rb)}catch(vb){qa(vb)}});return G};g.isMobXFlow=!0;return g},sy);Ns.bound=Ua(NC);var OC={has:function(b,g){return b[nh].has_(g)},get:function(b,g){return b[nh].get_(g)},set:function(b,g,m){var G;return Y(g)?null!=(G=b[nh].set_(g,m,!0))?G:!0:!1},deleteProperty:function(b,g){var m;return Y(g)?null!=(m=b[nh].delete_(g,!0))?m:!0:!1},defineProperty:function(b,g,m){var G;return null!=(G=b[nh].defineProperty_(g,
m))?G:!0},ownKeys:function(b){return b[nh].ownKeys_()},preventExtensions:function(b){n(13)}},cp="update",GC={get:function(b,g){var m=b[nh];return g===nh?m:"length"===g?m.getArrayLength_():"string"!==typeof g||isNaN(g)?F(Ot,g)?Ot[g]:b[g]:m.get_(parseInt(g))},set:function(b,g,m){var G=b[nh];"length"===g&&G.setArrayLength_(m);"symbol"===typeof g||isNaN(g)?b[g]=m:G.set_(parseInt(g),m);return!0},preventExtensions:function(){n(15)}},yv=function(){function b(m,G,V,ka){void 0===m&&(m="ObservableArray");this.atom_=
this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=V;this.legacyMode_=ka;this.atom_=new zo(m);this.enhancer_=function(qa,Ia){return G(qa,Ia,"ObservableArray[..]")}}var g=b.prototype;g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};g.dehanceValues_=function(m){return void 0!==this.dehancer&&0<m.length?m.map(this.dehancer):m};g.intercept_=function(m){return td(this,
m)};g.observe_=function(m,G){void 0===G&&(G=!1);G&&m({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Yf(this,m)};g.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};g.setArrayLength_=function(m){("number"!==typeof m||isNaN(m)||0>m)&&n("Out of range: "+m);var G=this.values_.length;if(m!==G)if(m>G){for(var V=Array(m-G),ka=0;ka<
m-G;ka++)V[ka]=void 0;this.spliceWithArray_(G,0,V)}else this.spliceWithArray_(m,G-m)};g.updateArrayLength_=function(m,G){m!==this.lastKnownLength_&&n(16);this.lastKnownLength_+=G;this.legacyMode_&&0<G&&ue(m+G+1)};g.spliceWithArray_=function(m,G,V){var ka=this,qa=this.values_.length;void 0===m?m=0:m>qa?m=qa:0>m&&(m=Math.max(0,qa+m));G=1===arguments.length?qa-m:void 0===G||null===G?0:Math.max(0,Math.min(G,qa-m));void 0===V&&(V=On);if(ee(this)){var Ia=nc(this,{object:this.proxy_,type:"splice",index:m,
removedCount:G,added:V});if(!Ia)return On;G=Ia.removedCount;V=Ia.added}V=0===V.length?V:V.map(function(Ta){return ka.enhancer_(Ta,void 0)});this.legacyMode_&&this.updateArrayLength_(qa,V.length-G);qa=this.spliceItemsIntoValues_(m,G,V);0===G&&0===V.length||this.notifyArraySplice_(m,V,qa);return this.dehanceValues_(qa)};g.spliceItemsIntoValues_=function(m,G,V){if(1E4>V.length){var ka;return(ka=this.values_).splice.apply(ka,[m,G].concat(V))}ka=this.values_.slice(m,m+G);var qa=this.values_.slice(m+G);
this.values_.length+=V.length-G;for(G=0;G<V.length;G++)this.values_[m+G]=V[G];for(G=0;G<qa.length;G++)this.values_[m+V.length+G]=qa[G];return ka};g.notifyArrayChildUpdate_=function(m,G,V){var ka=!this.owned_&&!1,qa=Ne(this);m=qa||ka?{observableKind:"array",object:this.proxy_,type:cp,debugObjectName:this.atom_.name_,index:m,newValue:G,oldValue:V}:null;this.atom_.reportChanged();qa&&cf(this,m)};g.notifyArraySplice_=function(m,G,V){var ka=!this.owned_&&!1,qa=Ne(this);m=qa||ka?{observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:m,removed:V,added:G,removedCount:V.length,addedCount:G.length}:null;this.atom_.reportChanged();qa&&cf(this,m)};g.get_=function(m){if(this.legacyMode_&&m>=this.values_.length)console.warn("[mobx] Out of bounds read: "+m);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[m])};g.set_=function(m,G){var V=this.values_;this.legacyMode_&&m>V.length&&n(17,m,V.length);if(m<V.length){var ka=V[m];if(ee(this)){G=nc(this,
{type:cp,object:this.proxy_,index:m,newValue:G});if(!G)return;G=G.newValue}G=this.enhancer_(G,ka);G!==ka&&(V[m]=G,this.notifyArrayChildUpdate_(m,G,ka))}else{m=Array(m+1-V.length);for(ka=0;ka<m.length-1;ka++)m[ka]=void 0;m[m.length-1]=G;this.spliceWithArray_(V.length,0,m)}};return b}(),Ot={clear:function(){return this.splice(0)},replace:function(b){var g=this[nh];return g.spliceWithArray_(0,g.values_.length,b)},toJSON:function(){return this.slice()},splice:function(b,g){for(var m=arguments.length,
G=Array(2<m?m-2:0),V=2;V<m;V++)G[V-2]=arguments[V];m=this[nh];switch(arguments.length){case 0:return[];case 1:return m.spliceWithArray_(b);case 2:return m.spliceWithArray_(b,g)}return m.spliceWithArray_(b,g,G)},spliceWithArray:function(b,g,m){return this[nh].spliceWithArray_(b,g,m)},push:function(){for(var b=this[nh],g=arguments.length,m=Array(g),G=0;G<g;G++)m[G]=arguments[G];b.spliceWithArray_(b.values_.length,0,m);return b.values_.length},pop:function(){return this.splice(Math.max(this[nh].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var b=this[nh],g=arguments.length,m=Array(g),G=0;G<g;G++)m[G]=arguments[G];b.spliceWithArray_(0,0,m);return b.values_.length},reverse:function(){yf.trackingDerivation&&n(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){yf.trackingDerivation&&n(37,"sort");var b=this.slice();b.sort.apply(b,arguments);this.replace(b);return this},remove:function(b){var g=this[nh];b=g.dehanceValues_(g.values_).indexOf(b);
return-1<b?(this.splice(b,1),!0):!1}};Cb("concat",db);Cb("flat",db);Cb("includes",db);Cb("indexOf",db);Cb("join",db);Cb("lastIndexOf",db);Cb("slice",db);Cb("toString",db);Cb("toLocaleString",db);Cb("every",Db);Cb("filter",Db);Cb("find",Db);Cb("findIndex",Db);Cb("flatMap",Db);Cb("forEach",Db);Cb("map",Db);Cb("some",Db);Cb("reduce",gc);Cb("reduceRight",gc);var yC=D("ObservableArrayAdministration",yv),CC={};var DC=Symbol.iterator;var EC=Symbol.toStringTag;var ny=function(){function b(m,G,V){var ka=this;
void 0===G&&(G=Ma);void 0===V&&(V="ObservableMap");this.name_=this.enhancer_=void 0;this[nh]=CC;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=G;this.name_=V;ma(Map)||n(18);this.keysAtom_=Ya("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Fb(!0,function(){ka.merge(m)})}var g=b.prototype;g.has_=function(m){return this.data_.has(m)};g.has=function(m){var G=this;if(!yf.trackingDerivation)return this.has_(m);var V=this.hasMap_.get(m);
if(!V){var ka=V=new bf(this.has_(m),fb,"ObservableMap.key?",!1);this.hasMap_.set(m,ka);wc(ka,function(){return G.hasMap_["delete"](m)})}return V.get()};g.set=function(m,G){var V=this.has_(m);if(ee(this)){G=nc(this,{type:V?cp:"add",object:this,newValue:G,name:m});if(!G)return this;G=G.newValue}V?this.updateValue_(m,G):this.addValue_(m,G);return this};g["delete"]=function(m){var G=this;if(ee(this)&&!nc(this,{type:"delete",object:this,name:m}))return!1;if(this.has_(m)){var V=Ne(this),ka=V?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(m).value_,name:m}:null;Id(function(){var qa;G.keysAtom_.reportChanged();null==(qa=G.hasMap_.get(m))?void 0:qa.setNewValue_(!1);G.data_.get(m).setNewValue_(void 0);G.data_["delete"](m)});V&&cf(this,ka);return!0}return!1};g.updateValue_=function(m,G){var V=this.data_.get(m);G=V.prepareNewValue_(G);if(G!==yf.UNCHANGED){var ka=Ne(this);m=ka?{observableKind:"map",debugObjectName:this.name_,type:cp,object:this,oldValue:V.value_,
name:m,newValue:G}:null;V.setNewValue_(G);ka&&cf(this,m)}};g.addValue_=function(m,G){var V=this;Id(function(){var Ia,Ta=new bf(G,V.enhancer_,"ObservableMap.key",!1);V.data_.set(m,Ta);G=Ta.value_;null==(Ia=V.hasMap_.get(m))?void 0:Ia.setNewValue_(!0);V.keysAtom_.reportChanged()});var ka=Ne(this),qa=ka?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:m,newValue:G}:null;ka&&cf(this,qa)};g.get=function(m){return this.has(m)?this.dehanceValue_(this.data_.get(m).get()):this.dehanceValue_(void 0)};
g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};g.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};g.values=function(){var m=this,G=this.keys();return bb({next:function(){var V=G.next(),ka=V.done;V=V.value;return{done:ka,value:ka?void 0:m.get(V)}}})};g.entries=function(){var m=this,G=this.keys();return bb({next:function(){var V=G.next(),ka=V.done;V=V.value;return{done:ka,value:ka?void 0:[V,m.get(V)]}}})};g[DC]=function(){return this.entries()};
g.forEach=function(m,G){for(var V=Ga(this),ka;!(ka=V()).done;)ka=ka.value,m.call(G,ka[1],ka[0],this)};g.merge=function(m){var G=this;Mp(m)&&(m=new Map(m));Id(function(){I(m)?ba(m).forEach(function(V){return G.set(V,m[V])}):Array.isArray(m)?m.forEach(function(V){return G.set(V[0],V[1])}):N(m)?(m.constructor!==Map&&n(19,m),m.forEach(function(V,ka){return G.set(ka,V)})):null!==m&&void 0!==m&&n(20,m)});return this};g.clear=function(){var m=this;Id(function(){Kd(function(){for(var G=Ga(m.keys()),V;!(V=
G()).done;)m["delete"](V.value)})})};g.replace=function(m){var G=this;Id(function(){for(var V=jd(m),ka=new Map,qa=!1,Ia=Ga(G.data_.keys()),Ta;!(Ta=Ia()).done;)if(Ta=Ta.value,!V.has(Ta))if(G["delete"](Ta))qa=!0;else{var Xa=G.data_.get(Ta);ka.set(Ta,Xa)}for(V=Ga(V.entries());!(Ia=V()).done;)Ta=Ia.value,Ia=Ta[0],Xa=Ta[1],Ta=G.data_.has(Ia),G.set(Ia,Xa),G.data_.has(Ia)&&(Xa=G.data_.get(Ia),ka.set(Ia,Xa),Ta||(qa=!0));if(!qa)if(G.data_.size!==ka.size)G.keysAtom_.reportChanged();else for(qa=G.data_.keys(),
V=ka.keys(),Ia=qa.next(),Ta=V.next();!Ia.done;){if(Ia.value!==Ta.value){G.keysAtom_.reportChanged();break}Ia=qa.next();Ta=V.next()}G.data_=ka});return this};g.toString=function(){return"[object ObservableMap]"};g.toJSON=function(){return Array.from(this)};g.observe_=function(m,G){return Yf(this,m)};g.intercept_=function(m){return td(this,m)};K(b,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:EC,get:function(){return"Map"}}]);return b}(),Mp=D("ObservableMap",
ny),zC={};var AC=Symbol.iterator;var BC=Symbol.toStringTag;var ly=function(){function b(m,G,V){void 0===G&&(G=Ma);void 0===V&&(V="ObservableSet");this.name_=void 0;this[nh]=zC;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=V;ma(Set)||n(22);this.atom_=Ya(this.name_);this.enhancer_=function(ka,qa){return G(ka,qa,V)};m&&this.replace(m)}var g=b.prototype;g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};
g.clear=function(){var m=this;Id(function(){Kd(function(){for(var G=Ga(m.data_.values()),V;!(V=G()).done;)m["delete"](V.value)})})};g.forEach=function(m,G){for(var V=Ga(this),ka;!(ka=V()).done;)ka=ka.value,m.call(G,ka,ka,this)};g.add=function(m){var G=this;if(ee(this)&&!nc(this,{type:"add",object:this,newValue:m}))return this;if(!this.has(m)){Id(function(){G.data_.add(G.enhancer_(m,void 0));G.atom_.reportChanged()});var V=Ne(this),ka=V?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:m}:null;V&&cf(this,ka)}return this};g["delete"]=function(m){var G=this;if(ee(this)&&!nc(this,{type:"delete",object:this,oldValue:m}))return!1;if(this.has(m)){var V=Ne(this),ka=V?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:m}:null;Id(function(){G.atom_.reportChanged();G.data_["delete"](m)});V&&cf(this,ka);return!0}return!1};g.has=function(m){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(m))};g.entries=function(){var m=0,G=Array.from(this.keys()),
V=Array.from(this.values());return bb({next:function(){var ka=m;m+=1;return ka<V.length?{value:[G[ka],V[ka]],done:!1}:{done:!0}}})};g.keys=function(){return this.values()};g.values=function(){this.atom_.reportObserved();var m=this,G=0,V=Array.from(this.data_.values());return bb({next:function(){return G<V.length?{value:m.dehanceValue_(V[G++]),done:!1}:{done:!0}}})};g.replace=function(m){var G=this;Gq(m)&&(m=new Set(m));Id(function(){Array.isArray(m)?(G.clear(),m.forEach(function(V){return G.add(V)})):
P(m)?(G.clear(),m.forEach(function(V){return G.add(V)})):null!==m&&void 0!==m&&n("Cannot initialize set from "+m)});return this};g.observe_=function(m,G){return Yf(this,m)};g.intercept_=function(m){return td(this,m)};g.toJSON=function(){return Array.from(this)};g.toString=function(){return"[object ObservableSet]"};g[AC]=function(){return this.values()};K(b,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:BC,get:function(){return"Set"}}]);return b}(),Gq=D("ObservableSet",
ly),py=Object.create(null),ky=function(){function b(m,G,V,ka){void 0===G&&(G=new Map);void 0===ka&&(ka=la);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=m;this.values_=G;this.name_=V;this.defaultAnnotation_=ka;this.keysAtom_=new zo("ObservableObject.keys");this.isPlainObject_=I(this.target_)}var g=b.prototype;g.getObservablePropValue_=function(m){return this.values_.get(m).get()};
g.setObservablePropValue_=function(m,G){var V=this.values_.get(m);if(V instanceof qh)return V.set(G),!0;if(ee(this)){G=nc(this,{type:cp,object:this.proxy_||this.target_,name:m,newValue:G});if(!G)return null;G=G.newValue}G=V.prepareNewValue_(G);if(G!==yf.UNCHANGED){var ka=Ne(this);m=ka?{type:cp,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:V.value_,name:m,newValue:G}:null;V.setNewValue_(G);ka&&cf(this,m)}return!0};g.get_=function(m){yf.trackingDerivation&&
!F(this.target_,m)&&this.has_(m);return this.target_[m]};g.set_=function(m,G,V){void 0===V&&(V=!1);if(F(this.target_,m)){if(this.values_.has(m))return this.setObservablePropValue_(m,G);if(V)return Reflect.set(this.target_,m,G);this.target_[m]=G;return!0}return this.extend_(m,{value:G,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,V)};g.has_=function(m){if(!yf.trackingDerivation)return m in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var G=this.pendingKeys_.get(m);
G||(G=new bf(m in this.target_,fb,"ObservableObject.key?",!1),this.pendingKeys_.set(m,G));return G.get()};g.make_=function(m,G){!0===G&&(G=this.defaultAnnotation_);if(!1!==G){if(!(m in this.target_)){var V;if(null!=(V=this.target_[Ln])&&V[m])return;n(1,G.annotationType_,this.name_+"."+m.toString())}for(V=this.target_;V&&V!==Vo;){var ka=Xo(V,m);if(ka){ka=G.make_(this,m,ka,V);if(0===ka)return;if(1===ka)break}V=Object.getPrototypeOf(V)}var qa;null==(qa=this.target_[Ln])?!0:delete qa[m]}};g.extend_=function(m,
G,V,ka){void 0===ka&&(ka=!1);!0===V&&(V=this.defaultAnnotation_);if(!1===V)return this.defineProperty_(m,G,ka);if(G=V.extend_(this,m,G,ka)){var qa;null==(qa=this.target_[Ln])?!0:delete qa[m]}return G};g.defineProperty_=function(m,G,V){void 0===V&&(V=!1);try{qd();var ka=this.delete_(m);if(!ka)return ka;if(ee(this)){var qa=nc(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:G.value});if(!qa)return null;var Ia=qa.newValue;G.value!==Ia&&(G=Z({},G,{value:Ia}))}if(V){if(!Reflect.defineProperty(this.target_,
m,G))return!1}else Pn(this.target_,m,G);this.notifyPropertyAddition_(m,G.value)}finally{Td()}return!0};g.defineObservableProperty_=function(m,G,V,ka){void 0===ka&&(ka=!1);try{qd();var qa=this.delete_(m);if(!qa)return qa;if(ee(this)){var Ia=nc(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:G});if(!Ia)return null;G=Ia.newValue}var Ta=le(m),Xa={configurable:yf.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Ta.get,set:Ta.set};if(ka){if(!Reflect.defineProperty(this.target_,
m,Xa))return!1}else Pn(this.target_,m,Xa);var ib=new bf(G,V,"ObservableObject.key",!1);this.values_.set(m,ib);this.notifyPropertyAddition_(m,ib.value_)}finally{Td()}return!0};g.defineComputedProperty_=function(m,G,V){void 0===V&&(V=!1);try{qd();var ka=this.delete_(m);if(!ka)return ka;if(ee(this)&&!nc(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:void 0}))return null;G.name||(G.name="ObservableObject.key");G.context=this.proxy_||this.target_;var qa=le(m),Ia={configurable:yf.safeDescriptors?
this.isPlainObject_:!0,enumerable:!1,get:qa.get,set:qa.set};if(V){if(!Reflect.defineProperty(this.target_,m,Ia))return!1}else Pn(this.target_,m,Ia);this.values_.set(m,new qh(G));this.notifyPropertyAddition_(m,void 0)}finally{Td()}return!0};g.delete_=function(m,G){void 0===G&&(G=!1);if(!F(this.target_,m))return!0;if(ee(this)&&!nc(this,{object:this.proxy_||this.target_,name:m,type:"remove"}))return null;try{var V,ka;qd();var qa=Ne(this),Ia=this.values_.get(m),Ta=void 0;if(!Ia&&qa){var Xa;Ta=null==(Xa=
Xo(this.target_,m))?void 0:Xa.value}if(G){if(!Reflect.deleteProperty(this.target_,m))return!1}else delete this.target_[m];Ia&&(this.values_["delete"](m),Ia instanceof bf&&(Ta=Ia.value_),fc(Ia));this.keysAtom_.reportChanged();null==(V=this.pendingKeys_)?void 0:null==(ka=V.get(m))?void 0:ka.set(m in this.target_);if(qa){var ib={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Ta,name:m};qa&&cf(this,ib)}}finally{Td()}return!0};g.observe_=function(m,
G){return Yf(this,m)};g.intercept_=function(m){return td(this,m)};g.notifyPropertyAddition_=function(m,G){var V,ka,qa=Ne(this);qa&&(G=qa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:m,newValue:G}:null,qa&&cf(this,G));null==(V=this.pendingKeys_)?void 0:null==(ka=V.get(m))?void 0:ka.set(!0);this.keysAtom_.reportChanged()};g.ownKeys_=function(){this.keysAtom_.reportObserved();return zq(this.target_)};g.keys_=function(){this.keysAtom_.reportObserved();
return Object.keys(this.target_)};return b}(),xC=D("ObservableObjectAdministration",ky),wC=Xe(0),zv=0,jy=function(){};(function(b,g){Object.setPrototypeOf?Object.setPrototypeOf(b.prototype,g):void 0!==b.prototype.__proto__?b.prototype.__proto__=g:b.prototype=g})(jy,Array.prototype);var xv=function(b,g,m){function G(ka,qa,Ia,Ta){void 0===Ia&&(Ia="ObservableArray");void 0===Ta&&(Ta=!1);var Xa=b.call(this)||this;qa=new yv(Ia,qa,Ta,!0);qa.proxy_=pa(Xa);Q(pa(Xa),nh,qa);ka&&ka.length&&(qa=yc(!0),Xa.spliceWithArray(0,
0,ka),yf.allowStateChanges=qa);Object.defineProperty(pa(Xa),"0",wC);return Xa}ea(G,b);var V=G.prototype;V.concat=function(){this[nh].atom_.reportObserved();for(var ka=arguments.length,qa=Array(ka),Ia=0;Ia<ka;Ia++)qa[Ia]=arguments[Ia];return Array.prototype.concat.apply(this.slice(),qa.map(function(Ta){return kb(Ta)?Ta.slice():Ta}))};V[m]=function(){var ka=this,qa=0;return bb({next:function(){return qa<ka.length?{value:ka[qa++],done:!1}:{done:!0,value:void 0}}})};K(G,[{key:"length",get:function(){return this[nh].getArrayLength_()},
set:function(ka){this[nh].setArrayLength_(ka)}},{key:g,get:function(){return"Array"}}]);return G}(jy,Symbol.toStringTag,Symbol.iterator);Object.entries(Ot).forEach(function(b){var g=b[0];b=b[1];"concat"!==g&&M(xv.prototype,g,b)});ue(1E3);var iy=Vo.toString;["Symbol","Map","Set"].forEach(function(b){"undefined"===typeof R()[b]&&n("MobX requires global '"+b+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:vc,extras:{getDebugName:zb},
$mobx:nh});var mb=W(587),lm=class{constructor(b){cb(this,"props");cb(this,"aspectRatio");cb(this,"type");cb(this,"hideCloneHandles",!1);cb(this,"hideResizeHandles",!1);cb(this,"hideRotateHandle",!1);cb(this,"hideContextBar",!1);cb(this,"hideSelectionDetail",!1);cb(this,"hideSelection",!1);cb(this,"canChangeAspectRatio",!0);cb(this,"canUnmount",!0);cb(this,"canResize",[!0,!0]);cb(this,"canScale",!0);cb(this,"canFlip",!0);cb(this,"canEdit",!1);cb(this,"canBind",!1);cb(this,"nonce");cb(this,"bindingDistance",
4);cb(this,"isDirty",!1);cb(this,"lastSerialized");cb(this,"getCenter",()=>sf.getBoundsCenter(this.bounds));cb(this,"getRotatedBounds",()=>{const {bounds:ka,props:{rotation:qa}}=this;return qa?sf.getBoundsFromPoints(sf.getRotatedCorners(ka,qa)):ka});cb(this,"hitTestPoint",ka=>{var qa=this.rotatedBounds;if(!this.props.rotation)return Lk.pointInBounds(ka,qa);qa=sf.getRotatedCorners(qa,this.props.rotation);return Lk.pointInPolygon(ka,qa)});cb(this,"hitTestLineSegment",(ka,qa)=>{const Ia=sf.getBoundsFromPoints([ka,
qa]),{rotatedBounds:Ta,props:{rotation:Xa=0}}=this;return sf.boundsContain(Ta,Ia)||Xa?h(ka,qa,sf.getRotatedCorners(this.bounds)).didIntersect:0<t(Ta,ka,qa).length});cb(this,"hitTestBounds",ka=>{const {rotatedBounds:qa,props:{rotation:Ia=0}}=this,Ta=sf.getRotatedCorners(this.bounds,Ia);return sf.boundsContain(ka,qa)||0<z([ka.minX,ka.minY],[ka.width,ka.height],Ta).length});cb(this,"getExpandedBounds",()=>sf.expandBounds(this.getBounds(),this.bindingDistance));cb(this,"getBindingPoint",(ka,qa,Ia,Ta)=>
{var Xa=this.getBounds(),ib=this.getExpandedBounds();if(Lk.pointInBounds(ka,ib)){var vb=C(qa,Ia,ib).filter(Lb=>Lb.didIntersect).map(Lb=>Lb.points[0]);if(vb.length)return Ia=this.getCenter(),vb=vb.sort((Lb,cc)=>me.dist(cc,qa)-me.dist(Lb,qa))[0],vb=me.med(ka,vb),Ta?(Ta=2>me.dist(ka,Ia)?Ia:ka,Xa=0):(Ta=2>me.distanceToLineSegment(ka,vb,Ia)?Ia:vb,Xa=Lk.pointInBounds(ka,Xa)?this.bindingDistance:Math.max(this.bindingDistance,sf.getBoundsSides(Xa).map(Lb=>me.distanceToLineSegment(Lb[1][0],Lb[1][1],ka)).sort((Lb,
cc)=>Lb-cc)[0])),ib=me.divV(me.sub(Ta,[ib.minX,ib.minY]),[ib.width,ib.height]),{point:me.clampV(ib,0,1),distance:Xa}}});cb(this,"getSerialized",()=>Ec(Jc(oc({},this.props),{type:this.type,nonce:this.nonce})));cb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Id(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});cb(this,"validateProps",ka=>ka);cb(this,
"update",(ka,qa=!1,Ia=!1)=>{qa||this.isDirty||this.setIsDirty(!0);qa||Ia||this.incNonce();Object.assign(this.props,this.validateProps(ka));return this});cb(this,"clone",()=>new this.constructor(this.serialized));cb(this,"onResetBounds",ka=>this);cb(this,"scale",[1,1]);cb(this,"onResizeStart",ka=>{var qa;this.scale=[...(null!=(qa=this.props.scale)?qa:[1,1])];return this});cb(this,"onResize",(ka,qa)=>{const {bounds:Ia,rotation:Ta,scale:[Xa,ib]}=qa;ka=[...this.scale];0>Xa&&(ka[0]*=-1);0>ib&&(ka[1]*=
-1);this.update({point:[Ia.minX,Ia.minY],scale:ka,rotation:Ta});return this});cb(this,"onHandleChange",(ka,{id:qa,delta:Ia})=>{if(void 0!==ka.handles){var Ta=Sq(ka.handles);Ta[qa]=Jc(oc({},Ta[qa]),{point:me.add(Ia,ka.handles[qa].point)});var Xa=sf.getCommonTopLeft(Object.values(Ta).map(ib=>ib.point));Object.values(Ta).forEach(ib=>{ib.point=me.sub(ib.point,Xa)});this.update({point:me.add(ka.point,Xa),handles:Ta})}});var g,m;const G=this.constructor.id,V=null!=(g=this.constructor.defaultProps)?g:{};
this.type=G;this.props=oc(oc({scale:[1,1]},V),b);this.nonce=null!=(m=b.nonce)?m:Date.now();sg(this)}get id(){return this.props.id}setNonce(b){this.nonce=b}incNonce(){this.nonce++}setIsDirty(b){this.isDirty=b}setLastSerialized(b){this.lastSerialized=b}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(b){b=this.getBounds();const {stroke:g,strokeWidth:m,strokeType:G,
opacity:V,fill:ka,noFill:qa,borderRadius:Ia}=this.props;return(0,mb.jsx)("rect",{fill:qa?"none":Ug(ka,"background"),stroke:Ug(g,"stroke"),strokeWidth:null!=m?m:2,strokeDasharray:"dashed"===G?"8 2":void 0,fillOpacity:null!=V?V:.2,width:b.width,height:b.height,rx:Ia,ry:Ia})}};cb(lm,"type");rd([Yd],lm.prototype,"props",2);rd([Yd],lm.prototype,"canResize",2);rd([Yd],lm.prototype,"nonce",2);rd([Yd],lm.prototype,"isDirty",2);rd([Yd],lm.prototype,"lastSerialized",2);rd([pe],lm.prototype,"id",1);rd([hg],
lm.prototype,"setNonce",1);rd([hg],lm.prototype,"incNonce",1);rd([hg],lm.prototype,"setIsDirty",1);rd([hg],lm.prototype,"setLastSerialized",1);rd([pe],lm.prototype,"center",1);rd([pe],lm.prototype,"bounds",1);rd([pe],lm.prototype,"rotatedBounds",1);rd([pe],lm.prototype,"serialized",1);rd([hg],lm.prototype,"update",2);var on=class extends lm{constructor(b={}){super(b);cb(this,"canBind",!0);cb(this,"getBounds",()=>{const [g,m]=this.props.point,[G,V]=this.props.size;return{minX:g,minY:m,maxX:g+G,maxY:m+
V,width:G,height:V}});cb(this,"getRotatedBounds",()=>sf.getBoundsFromPoints(sf.getRotatedCorners(this.bounds,this.props.rotation)));cb(this,"onResize",(g,m)=>{const {bounds:G,rotation:V,scale:[ka,qa]}=m;g=[...this.scale];0>ka&&(g[0]*=-1);0>qa&&(g[1]*=-1);this.update({point:[G.minX,G.minY],scale:g,rotation:V});return this.update({rotation:V,point:[G.minX,G.minY],size:[Math.max(1,G.width),Math.max(1,G.height)],scale:g})});cb(this,"validateProps",g=>{void 0!==g.size&&(g.size[0]=Math.max(g.size[0],1),
g.size[1]=Math.max(g.size[1],1));return g});sg(this)}};cb(on,"id","box");cb(on,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var pr=class extends lm{constructor(b={}){super(b);cb(this,"getBounds",()=>{const {pointBounds:g,props:{point:m}}=this;return sf.translateBounds(g,m)});cb(this,"getRotatedBounds",()=>{const {props:{rotation:g,point:m},bounds:G,rotatedPoints:V}=this;return g?sf.translateBounds(sf.getBoundsFromPoints(V),m):G});cb(this,"normalizedPoints",[]);
cb(this,"isResizeFlippedX",!1);cb(this,"isResizeFlippedY",!1);cb(this,"onResizeStart",()=>{var g;const {bounds:m,props:{points:G}}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const V=[m.width,m.height];this.normalizedPoints=G.map(ka=>Jd.divV(ka,V));return this});cb(this,"onResize",(g,m)=>{const {bounds:G,scale:[V,ka]}=m,qa=[G.width,G.height];g=[...this.scale];0>V&&(g[0]*=-1);0>ka&&(g[1]*=-1);return this.update(V||ka?{point:[G.minX,G.minY],points:this.normalizedPoints.map(Ia=>Jd.mulV(Ia,
qa).concat(Ia[2])),scale:g}:{point:[G.minX,G.minY],points:this.normalizedPoints.map(Ia=>Jd.mulV(Ia,qa).concat(Ia[2]))})});cb(this,"hitTestPoint",g=>{const {props:{points:m,point:G}}=this;return Lk.pointNearToPolyline(Jd.sub(g,G),m)});cb(this,"hitTestLineSegment",(g,m)=>{const {bounds:G,props:{points:V,point:ka}}=this;if(Lk.pointInBounds(g,G)||Lk.pointInBounds(m,G)||0<t(G,g,m).length){const qa=Jd.sub(g,ka),Ia=Jd.sub(m,ka);return h(qa,Ia,V).didIntersect||!!V.find(Ta=>5>Jd.dist(qa,Ta)||5>Jd.dist(Ia,
Ta))}return!1});cb(this,"hitTestBounds",g=>{const {rotatedBounds:m,props:{points:G,point:V}}=this,ka=sf.translateBounds(g,Jd.neg(V));return sf.boundsContain(g,m)||G.every(qa=>Lk.pointInBounds(qa,ka))||sf.boundsCollide(g,m)&&0<J([ka.minX,ka.minY],[ka.width,ka.height],G).length});sg(this)}get pointBounds(){const {props:{points:b}}=this;return sf.getBoundsFromPoints(b)}get rotatedPoints(){const {props:{point:b,points:g,rotation:m},center:G}=this;if(!m)return g;const V=Jd.sub(G,b);return g.map(ka=>Jd.rotWith(ka,
V,m))}};cb(pr,"id","draw");cb(pr,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});rd([pe],pr.prototype,"pointBounds",1);rd([pe],pr.prototype,"rotatedPoints",1);var sv=class extends on{constructor(b={}){super(b);cb(this,"getBounds",()=>{const {props:{point:[g,m],size:[G,V]}}=this;return sf.getRotatedEllipseBounds(g,m,G/2,V/2,0)});cb(this,"getRotatedBounds",()=>{const {props:{point:[g,m],size:[G,V],rotation:ka}}=this;return sf.getRotatedEllipseBounds(g,m,G/
2,V/2,ka)});cb(this,"hitTestPoint",g=>{const {props:{size:m,rotation:G},center:V}=this;return Lk.pointInEllipse(g,V,m[0],m[1],G||0)});cb(this,"hitTestLineSegment",(g,m)=>{const {props:{size:[G,V],rotation:ka=0},center:qa}=this;return p(g,m,qa,G,V,ka).didIntersect});cb(this,"hitTestBounds",g=>{const {props:{size:[m,G],rotation:V=0},rotatedBounds:ka}=this;var qa;if(!(qa=sf.boundsContain(g,ka))){const {minX:Ia,minY:Ta,width:Xa,height:ib}=g;qa=0<u(this.center,m/2,G/2,V,[Ia,Ta],[Xa,ib]).length}return qa});
sg(this)}};cb(sv,"id","ellipse");cb(sv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var tv=class extends on{constructor(b={}){super(b);cb(this,"onResetBounds",g=>{const {clipping:m,size:G,point:V}=this.props;if(m){const [ka,qa,Ia,Ta]=Array.isArray(m)?m:[m,m,m,m];return this.update({clipping:0,point:[V[0]-Ta,V[1]-ka],size:[G[0]+(Ta-qa),G[1]+(ka-Ia)]})}if(g.asset){const {size:[ka,qa]}=g.asset;this.update({clipping:0,point:[V[0]+G[0]/2-ka/2,V[1]+G[1]/2-qa/
2],size:[ka,qa]})}return this});cb(this,"onResize",(g,m)=>{const {bounds:G,clip:V,scale:ka}=m;({clipping:m}=this.props);const {clipping:qa}=g;if(V){const {point:[Ia,Ta],size:[Xa,ib]}=g,[vb,Lb,cc,Tb]=qa?Array.isArray(qa)?qa:[qa,qa,qa,qa]:[0,0,0,0];m=[vb+(G.minY-Ta),Lb+(G.maxX-(Ia+Xa)),cc+(G.maxY-(Ta+ib)),Tb+(G.minX-Ia)]}else void 0!==qa&&(m=Array.isArray(qa)?qa:[qa,qa,qa,qa],m=[m[0]*ka[1],m[1]*ka[0],m[2]*ka[1],m[3]*ka[0]]);if(m&&Array.isArray(m)){const Ia=m;Ia.every((Ta,Xa)=>0===Xa||Ta===Ia[Xa-1])&&
(m=Ia[0])}return this.update({point:[G.minX,G.minY],size:[Math.max(1,G.width),Math.max(1,G.height)],clipping:m})});sg(this)}};cb(tv,"id","ellipse");cb(tv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Zx=class extends lm{constructor(b={}){super(b);cb(this,"getBounds",()=>{const {points:g,props:{point:m}}=this;return sf.translateBounds(sf.getBoundsFromPoints(g),m)});cb(this,"getRotatedBounds",()=>{const {rotatedPoints:g,
props:{point:m}}=this;return sf.translateBounds(sf.getBoundsFromPoints(g),m)});cb(this,"normalizedHandles",[]);cb(this,"onResizeStart",()=>{var g;const {props:{handles:m},bounds:G}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const V=[G.width,G.height];this.normalizedHandles=Object.values(m).map(ka=>Jd.divV(ka.point,V));return this});cb(this,"onResize",(g,m)=>{const {bounds:G,scale:[V,ka]}=m,{props:{handles:qa},normalizedHandles:Ia}=this,Ta=[G.width,G.height];g=[...this.scale];0>V&&(g[0]*=
-1);0>ka&&(g[1]*=-1);return this.update({point:[G.minX,G.minY],handles:Object.values(qa).map((Xa,ib)=>Jc(oc({},Xa),{point:Jd.mulV(Ia[ib],Ta)})),scale:g})});cb(this,"hitTestPoint",g=>{const {points:m}=this;return Lk.pointNearToPolyline(Jd.sub(g,this.props.point),m)});cb(this,"hitTestLineSegment",(g,m)=>{const {bounds:G,points:V,props:{point:ka}}=this;if(Lk.pointInBounds(g,G)||Lk.pointInBounds(m,G)||0<t(G,g,m).length){const qa=Jd.sub(g,ka),Ia=Jd.sub(m,ka);return h(qa,Ia,V).didIntersect||!!V.find(Ta=>
5>Jd.dist(qa,Ta)||5>Jd.dist(Ia,Ta))}return!1});cb(this,"hitTestBounds",g=>{const {rotatedBounds:m,points:G,props:{point:V}}=this,ka=sf.translateBounds(g,Jd.neg(V));return sf.boundsContain(g,m)||G.every(qa=>Lk.pointInBounds(qa,ka))||sf.boundsCollide(g,m)&&0<J([ka.minX,ka.minY],[ka.width,ka.height],G).length});cb(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=Zx.defaultProps.handles);return g});sg(this)}get points(){return Object.values(this.props.handles).map(b=>
b.point)}get centroid(){const {points:b}=this;return zk.getPolygonCentroid(b)}get rotatedPoints(){const {centroid:b,props:{handles:g,rotation:m}}=this;return m?Object.values(g).map(G=>Jd.rotWith(G.point,b,m)):this.points}},qr=Zx;cb(qr,"id","polyline");cb(qr,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});rd([pe],qr.prototype,"points",1);rd([pe],qr.prototype,"centroid",1);rd([pe],qr.prototype,"rotatedPoints",1);var $x=class extends qr{constructor(b={}){super(b);
cb(this,"hideResizeHandles",!0);cb(this,"hideRotateHandle",!0);cb(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=$x.defaultProps.handles);return g});cb(this,"getHandlesChange",(g,m)=>{var G=Ci(g.handles,m);G=Ci(G,{start:{point:me.toFixed(G.start.point)},end:{point:me.toFixed(G.end.point)}});if(!me.isEqual(G.start.point,G.end.point)){m={point:g.point,handles:Sq(G)};g=g.point;G=sf.translateBounds(sf.getBoundsFromPoints(Object.values(G).map(ka=>
ka.point)),m.point);var V=me.sub([G.minX,G.minY],g);me.isEqual(V,[0,0])||(Object.values(m.handles).forEach(ka=>{ka.point=me.toFixed(me.sub(ka.point,V))}),m.point=me.toFixed(me.add(m.point,V)));return m}});sg(this)}},Bs=$x;cb(Bs,"id","line");cb(Bs,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Kp=class extends on{constructor(b={}){super(b);cb(this,"getRotatedBounds",()=>{const {rotatedVertices:g,
props:{point:m},offset:G}=this;return sf.translateBounds(sf.getBoundsFromPoints(g),Jd.add(m,G))});cb(this,"hitTestPoint",g=>{const {vertices:m}=this;return Lk.pointInPolygon(Jd.add(g,this.props.point),m)});cb(this,"hitTestLineSegment",(g,m)=>{const {vertices:G,props:{point:V}}=this;return h(Jd.sub(g,V),Jd.sub(m,V),G).didIntersect});cb(this,"hitTestBounds",g=>{const {rotatedBounds:m,offset:G,rotatedVertices:V,props:{point:ka}}=this,qa=sf.translateBounds(g,Jd.neg(Jd.add(ka,G)));return sf.boundsContain(g,
m)||V.every(Ia=>Lk.pointInBounds(Ia,qa))||0<z([qa.minX,qa.minY],[qa.width,qa.height],V).length});cb(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.sides&&3>g.sides&&(g.sides=3);return g});sg(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:b},vertices:g}=this;return g.map(m=>Jd.add(m,b))}get centroid(){const {vertices:b}=this;return zk.getPolygonCentroid(b)}get rotatedVertices(){const {vertices:b,centroid:g,props:{rotation:m}}=this;return m?b.map(G=>
Jd.rotWith(G,g,m)):b}get offset(){const {props:{size:[b,g]}}=this,m=sf.getBoundsCenter(sf.getBoundsFromPoints(this.vertices));return Jd.sub(Jd.div([b,g],2),m)}getVertices(b=0){const {ratio:g,sides:m,size:G}=this.props;return 3===m?zk.getTriangleVertices(G,b,g):zk.getPolygonVertices(G,m,b,g)}};cb(Kp,"id","polygon");cb(Kp,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});rd([pe],Kp.prototype,"vertices",1);rd([pe],Kp.prototype,"pageVertices",
1);rd([pe],Kp.prototype,"centroid",1);rd([pe],Kp.prototype,"rotatedVertices",1);rd([pe],Kp.prototype,"offset",1);var uv=class extends on{constructor(b={}){super(b);cb(this,"canEdit",!0);cb(this,"canFlip",!1);sg(this)}};cb(uv,"id","text");cb(uv,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Lt=class extends on{constructor(b={}){super(b);cb(this,"canEdit",!1);cb(this,"canFlip",!1);cb(this,"getBounds",()=>sf.getCommonBounds(this.shapes.map(g=>
g.getBounds())));sg(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};cb(Lt,"id","group");cb(Lt,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});rd([pe],Lt.prototype,"shapes",1);var rr=class{constructor(){cb(this,"_id");cb(this,"_initial");cb(this,"_states");cb(this,"_isActive",!1);cb(this,"cursor");cb(this,"_disposables",[]);cb(this,"children",new Map([]));cb(this,"registerStates",
m=>{m.forEach(G=>this.children.set(G.id,new G(this,this)));return this});cb(this,"deregisterStates",m=>{m.forEach(G=>{var V;null==(V=this.children.get(G.id))?void 0:V.dispose();this.children.delete(G.id)});return this});cb(this,"currentState",{});cb(this,"transition",(m,G={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${m}.`);const V=this.children.get(m),ka=this.currentState;if(!V)throw Error(`Could not find a state named ${m}.`);Id(()=>{this.currentState?
(ka._events.onExit(Jc(oc({},G),{toId:m})),ka.dispose(),V.registerKeyboardShortcuts(),this.setCurrentState(V),this._events.onTransition(Jc(oc({},G),{fromId:ka.id,toId:m})),V._events.onEnter(Jc(oc({},G),{fromId:ka.id}))):(this.currentState=V,V._events.onEnter(Jc(oc({},G),{fromId:""})))});return this});cb(this,"isIn",m=>{m=m.split(".").reverse();let G=this;for(;0<m.length;){const V=m.pop();if(!V)return!0;if(G.currentState.id===V){if(0===m.length)return!0;G=G.currentState}else break}return!1});cb(this,
"isInAny",(...m)=>m.some(this.isIn));cb(this,"forwardEvent",(m,...G)=>{var V,ka;(null==(ka=null==(V=this.currentState)?void 0:V._events)?0:ka[m])&&Id(()=>{var qa;return null==(qa=this.currentState._events)?void 0:qa[m](...G)})});cb(this,"_events",{onTransition:m=>{var G;null==(G=this.onTransition)?void 0:G.call(this,m)},onEnter:m=>{var G;this._isActive=!0;this.initial&&this.transition(this.initial,m);null==(G=this.onEnter)?void 0:G.call(this,m)},onExit:m=>{var G,V,ka;this._isActive=!1;null==(V=null==
(G=this.currentState)?void 0:G.onExit)?void 0:V.call(G,{toId:"parent"});null==(ka=this.onExit)?void 0:ka.call(this,m)},onPointerDown:(m,G)=>{var V;null==(V=this.onPointerDown)?void 0:V.call(this,m,G);this.forwardEvent("onPointerDown",m,G)},onPointerUp:(m,G)=>{var V;null==(V=this.onPointerUp)?void 0:V.call(this,m,G);this.forwardEvent("onPointerUp",m,G)},onPointerMove:(m,G)=>{var V;null==(V=this.onPointerMove)?void 0:V.call(this,m,G);this.forwardEvent("onPointerMove",m,G)},onPointerEnter:(m,G)=>{var V;
null==(V=this.onPointerEnter)?void 0:V.call(this,m,G);this.forwardEvent("onPointerEnter",m,G)},onPointerLeave:(m,G)=>{var V;null==(V=this.onPointerLeave)?void 0:V.call(this,m,G);this.forwardEvent("onPointerLeave",m,G)},onDoubleClick:(m,G)=>{var V;null==(V=this.onDoubleClick)?void 0:V.call(this,m,G);this.forwardEvent("onDoubleClick",m,G)},onKeyDown:(m,G)=>{var V;this._events.onModifierKey(m,G);null==(V=this.onKeyDown)?void 0:V.call(this,m,G);this.forwardEvent("onKeyDown",m,G)},onKeyUp:(m,G)=>{var V;
this._events.onModifierKey(m,G);null==(V=this.onKeyUp)?void 0:V.call(this,m,G);this.forwardEvent("onKeyUp",m,G)},onPinchStart:(m,G)=>{var V;null==(V=this.onPinchStart)?void 0:V.call(this,m,G);this.forwardEvent("onPinchStart",m,G)},onPinch:(m,G)=>{var V;null==(V=this.onPinch)?void 0:V.call(this,m,G);this.forwardEvent("onPinch",m,G)},onPinchEnd:(m,G)=>{var V;null==(V=this.onPinchEnd)?void 0:V.call(this,m,G);this.forwardEvent("onPinchEnd",m,G)},onModifierKey:(m,G)=>{switch(G.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(m,
G)}}});cb(this,"onEnter");cb(this,"onExit");cb(this,"onTransition");cb(this,"onPointerDown");cb(this,"onPointerUp");cb(this,"onPointerMove");cb(this,"onPointerEnter");cb(this,"onPointerLeave");cb(this,"onDoubleClick");cb(this,"onKeyDown");cb(this,"onKeyUp");cb(this,"onPinchStart");cb(this,"onPinch");cb(this,"onPinchEnd");const b=this.constructor.initial,g=this.constructor.states;this._id=this.constructor.id;this._initial=b;this._states=g}dispose(){this._disposables.forEach(b=>b());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(b=>[b,...b.descendants])}setCurrentState(b){this.currentState=b}};cb(rr,"id");cb(rr,"shortcuts");rd([Yd],rr.prototype,"currentState",2);rd([hg],rr.prototype,"setCurrentState",1);var vv=class extends rr{constructor(b,g){var m,G;super();cb(this,"registerKeyboardShortcuts",
()=>{var V;null!=(V=this._shortcuts)&&V.length&&this._disposables.push(...this._shortcuts.map(({keys:ka,fn:qa})=>lr.registerShortcut(ka,Ia=>{this.isActive&&qa(this.root,this,Ia)})))});cb(this,"_root");cb(this,"_parent");cb(this,"_shortcuts",[]);cb(this,"children",new Map([]));cb(this,"registerStates",V=>{V.forEach(ka=>this.children.set(ka.id,new ka(this,this._root)));return this});cb(this,"deregisterStates",V=>{V.forEach(ka=>{var qa;null==(qa=this.children.get(ka.id))?void 0:qa.dispose();this.children.delete(ka.id)});
return this});this._parent=b;this._root=g;this.states&&0<this.states.length&&(this.registerStates(this.states),b=null!=(m=this.initial)?m:this.states[0].id,m=this.children.get(b))&&(this.setCurrentState(m),null==(G=this.currentState)?void 0:G._events.onEnter({fromId:"initial"}));this._shortcuts=this.constructor.shortcuts;sg(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,
this]:[this]}};cb(vv,"cursor");var Lp=class extends vv{constructor(){super(...arguments);cb(this,"isLocked",!1);cb(this,"previous");cb(this,"onEnter",({fromId:b})=>{this.previous=b;this.cursor&&this.app.cursors.setCursor(this.cursor)});cb(this,"onTransition",b=>{({toId:b}=b);b=this.children.get(b);this.app.cursors.reset();b.cursor?this.app.cursors.setCursor(b.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Bi=class extends vv{get app(){return this.root}get tool(){return this.parent}},
Qx=class extends Bi{constructor(){super(...arguments);cb(this,"cursor","crosshair");cb(this,"creatingShape");cb(this,"aspectRatio");cb(this,"initialBounds",{});cb(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g,currentPoint:m}}=this.app;var {Shape:G}=this.tool;G=new G({id:Zk(),type:G.id,parentId:b.id,point:[...g],fill:this.app.settings.color,stroke:this.app.settings.color,size:me.abs(me.sub(m,g))});this.initialBounds={minX:g[0],minY:g[1],maxX:g[0]+1,maxY:g[1]+1,width:1,height:1};G.canChangeAspectRatio||
(G.aspectRatio?(this.aspectRatio=G.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=G;this.app.currentPage.addShapes(G);this.app.setSelectedShapes([G])});cb(this,"onPointerMove",b=>{if(!b.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:b}=this);var {currentPoint:g,originPoint:m,shiftKey:G}=
this.app.inputs;b=sf.getTransformedBoundingBox(b,"bottom_right_corner",me.sub(g,m),0,G||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[b.minX,b.minY],size:[b.width,b.height]})}});cb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});cb(this,"onKeyDown",(b,g)=>
{switch(g.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};cb(Qx,"id","creating");var Rx=class extends Bi{constructor(){super(...arguments);cb(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});cb(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});
cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};cb(Rx,"id","idle");var Sx=class extends Bi{constructor(){super(...arguments);cb(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Jd.dist(b,g)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});cb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};cb(Sx,"id","pointing");var lp=class extends Lp{constructor(){super(...arguments);
cb(this,"cursor","crosshair")}};cb(lp,"id","box");cb(lp,"states",[Rx,Sx,Qx]);cb(lp,"initial","idle");var Tx=class extends Bi{constructor(){super(...arguments);cb(this,"shape",{});cb(this,"points",[[0,0,.5]]);cb(this,"persistDebounced",Yj(this.app.persist,200));cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});cb(this,"onEnter",()=>{var b;const {Shape:g,previousShape:m}=this.tool;var {originPoint:G}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
m){this.shape=m;var {shape:V}=this;var ka=V.props.points[V.props.points.length-1];const Ia=Jd.sub(G,V.props.point).concat(null!=(b=G[2])?b:.5);this.points=[...V.props.points,ka,ka];const Ta=Math.ceil(Jd.dist(ka,G)/16);for(let Xa=0,ib=Xa/(Ta-1);Xa<Ta;Xa++){b=this.points;G=b.push;V=Jd.lrp(ka,Ia,ib);var qa=ka[2];G.call(b,V.concat.call(V,qa+(Ia[2]-qa)*ib))}this.addNextPoint(Ia)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ka=G[2])?ka:.5]],this.shape=new g({id:Zk(),type:g.id,parentId:this.app.currentPage.id,
point:G.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.app.currentPage.addShapes(this.shape)});cb(this,"onPointerMove",()=>{const {shape:b}=this,{currentPoint:g,previousPoint:m}=this.app.inputs;Jd.isEqual(m,g)||this.addNextPoint(Jd.sub(g,b.props.point).concat(g[2]))});cb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?
Lk.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let b=this.app.selectedTool.id;"pencil"===b||"highlighter"===b?this.persistDebounced():this.app.persist()});cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(b){const {shape:g}=this,m=Jd.min(b,[0,0]);this.points.push(b);
0>m[0]||0>m[1]?(this.points=this.points.map(G=>Jd.sub(G,m).concat(G[2])),g.update({point:Jd.add(g.props.point,m),points:this.points})):g.update({points:this.points})}};cb(Tx,"id","creating");var Ux=class extends Bi{constructor(){super(...arguments);cb(this,"onPointerDown",(b,g)=>{b.order||this.app.readOnly||this.tool.transition("creating")});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};
cb(Ux,"id","idle");var Vx=class extends Bi{constructor(){super(...arguments);cb(this,"origin",[0,0]);cb(this,"prevDelta",[0,0]);cb(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});cb(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});cb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};cb(Vx,"id","pinching");var As=class extends Lp{constructor(){super(...arguments);cb(this,"cursor","crosshair");cb(this,"simplify",!0);cb(this,"simplifyTolerance",
1);cb(this,"previousShape");cb(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};cb(As,"id","draw");cb(As,"states",[Ux,Tx,Vx]);cb(As,"initial","idle");var Wx=class extends Bi{constructor(){super(...arguments);cb(this,"points",[[0,0,.5]]);cb(this,"hitShapes",new Set);cb(this,"onEnter",()=>{const {originPoint:b}=this.app.inputs;this.points=[b];this.hitShapes.clear()});cb(this,"onPointerMove",()=>{const {currentPoint:b,previousPoint:g}=this.app.inputs;Jd.isEqual(g,b)||(this.points.push(b),
this.app.shapesInViewport.filter(m=>m.hitTestLineSegment(g,b)).forEach(m=>this.hitShapes.add(m)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});cb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};cb(Wx,"id","erasing");var Xx=class extends Bi{constructor(){super(...arguments);cb(this,"onPointerDown",
(b,g)=>{b.order||this.tool.transition("pointing")});cb(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};cb(Xx,"id","idle");var Yx=class extends Bi{constructor(){super(...arguments);cb(this,"onEnter",()=>{const {currentPoint:b}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(g=>
g.hitTestPoint(b)))});cb(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Jd.dist(b,g)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});cb(this,"onPointerUp",()=>{const b=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(b);this.tool.transition("idle")})}};cb(Yx,"id","pointing");var Kt=class extends Lp{constructor(){super(...arguments);cb(this,"cursor","crosshair")}};cb(Kt,"id","erase");cb(Kt,"states",[Xx,Yx,Wx]);cb(Kt,
"initial","idle");var wv=class extends Bi{constructor(){super(...arguments);cb(this,"handle",{});cb(this,"handleId","end");cb(this,"currentShape",{});cb(this,"initialShape",{});cb(this,"bindableShapeIds",[]);cb(this,"startBindingShapeId");cb(this,"newStartBindingId","");cb(this,"draggedBindingId","");cb(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,previousPoint:g,originPoint:m,currentPoint:G,modKey:V,altKey:ka}}=this.app;var qa=this.app.getShapeById(this.initialShape.id),{handles:Ia}=this.initialShape,
Ta=this.handleId,Xa="start"===this.handleId?"end":"start";if(!me.isEqual(g,G)){var ib=me.sub(G,m);if(b){var vb=Ia[Xa].point,Lb=me.add(Ia[Ta].point,ib),cc=me.angle(vb,Lb);vb=me.rotWith(Lb,vb,ol.snapAngleToSegments(cc,24)-cc);ib=me.add(ib,me.sub(vb,Lb))}ib=me.add(Ia[Ta].point,ib);Ia={[Ta]:Jc(oc({},Ia[Ta]),{point:me.toFixed(ib),bindingId:void 0})};var Tb=this.currentShape.getHandlesChange(this.initialShape,Ia);if(Tb){Ia=Ci(qa.props,Tb);var kc={},mc;Ta=Ia.handles[Ta];Xa=Ia.handles[Xa];if(this.startBindingShapeId){var Vb;
if(ib=this.app.getShapeById(this.startBindingShapeId)){Lb=ib.getCenter();vb=Ia.handles.end;var tc=me.add(Ia.handles.start.point,Ia.point);me.isEqual(tc,Lb)&&tc[1]++;cc=ib.hitTestPoint(G);tc=me.uni(me.sub(tc,Lb));const Ic=void 0!==this.app.currentPage.bindings[this.newStartBindingId];V||ib.hitTestPoint(me.add(Ia.point,vb.point))||(Vb=Tc(qa.props,ib,"start",this.newStartBindingId,Lb,Lb,tc,cc));Vb&&!Ic?(kc[this.newStartBindingId]=Vb,Ia.handles.start.bindingId=Vb.id):!Vb&&Ic&&(console.log("removing start binding"),
delete kc[this.newStartBindingId],Ia.handles.start.bindingId=void 0)}}if(!V){Vb=me.add(Xa.point,Ia.point);Xa=me.add(Ta.point,Ia.point);Ta=me.uni(me.sub(Xa,Vb));const Ic=me.add(Ia.point,Ia.handles.start.point),Sc=me.add(Ia.point,Ia.handles.end.point);ib=this.bindableShapeIds.map(Xc=>this.app.getShapeById(Xc)).sort((Xc,Xd)=>Xd.nonce-Xc.nonce).filter(Xc=>![Ic,Sc].every(Xd=>Xc.hitTestPoint(Xd)));for(const Xc of ib)if(mc=Tc(qa.props,Xc,this.handleId,this.draggedBindingId,Xa,Vb,Ta,ka))break}mc?(kc[this.draggedBindingId]=
mc,Ia=Ci(Ia,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(qa=qa.props.handles[this.handleId].bindingId,void 0!==qa&&(delete kc[qa],Ia=Ci(Ia,{handles:{[this.handleId]:{bindingId:void 0}}})));Tb=this.currentShape.getHandlesChange(Ia,Ia.handles);Id(()=>{var Ic;if(Tb){this.currentShape.update(Tb);this.app.currentPage.updateBindings(kc);const Sc=Object.values(null!=(Ic=Tb.handles)?Ic:{}).map(Xc=>Xc.bindingId).map(Xc=>this.app.currentPage.bindings[Xc]).filter(Boolean).flatMap(Xc=>[Xc.toId,
Xc.fromId].filter(Boolean));this.app.setBindingShapes(Sc)}})}}});cb(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});cb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};cb(wv,"id","creating");var ay=class extends wv{constructor(){super(...arguments);
cb(this,"onEnter",()=>{var b;this.app.history.pause();this.newStartBindingId=Zk();this.draggedBindingId=Zk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:g}=this.tool;const {originPoint:m}=this.app.inputs;g=new g(Jc(oc({},g.defaultProps),{id:Zk(),type:g.id,parentId:this.app.currentPage.id,point:m,fill:this.app.settings.color,stroke:this.app.settings.color}));this.initialShape=Ec(g.props);this.currentShape=g;this.app.currentPage.addShapes(g);this.app.setSelectedShapes([g]);
if(this.startBindingShapeId=null==(b=this.bindableShapeIds.map(G=>this.app.getShapeById(G)).filter(G=>Lk.pointInBounds(m,G.bounds))[0])?void 0:b.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};cb(ay,"id","creating");var by=class extends Bi{constructor(){super(...arguments);cb(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});cb(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",
{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});cb(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b)}});cb(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};
cb(by,"id","idle");var cy=class extends Bi{constructor(){super(...arguments);cb(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Jd.dist(b,g)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};cb(cy,"id","pointing");var Mt=class extends Lp{constructor(){super(...arguments);cb(this,"cursor","crosshair")}};cb(Mt,"id","line");cb(Mt,"states",[by,cy,ay]);cb(Mt,"initial","idle");var dy=class extends Bi{constructor(){super(...arguments);
cb(this,"cursor","crosshair");cb(this,"creatingShape");cb(this,"aspectRatio");cb(this,"initialBounds",{});cb(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g}}=this.app,{Shape:m}=this.tool,G=new m({id:Zk(),type:m.id,parentId:b.id,point:[...g],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=G;Id(()=>{this.app.currentPage.addShapes(G);const {bounds:V}=G;G.update({point:me.sub(g,[V.width/2,V.height/2])});this.app.transition("select");
this.app.setSelectedShapes([G]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};cb(dy,"id","creating");var ey=class extends Bi{constructor(){super(...arguments);cb(this,"onPointerDown",(b,g)=>{b.order||this.app.readOnly||this.tool.transition("creating")});cb(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});cb(this,"onKeyDown",
(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};cb(ey,"id","idle");var Nt=class extends Lp{constructor(){super(...arguments);cb(this,"cursor","crosshair")}};cb(Nt,"id","box");cb(Nt,"states",[ey,dy]);cb(Nt,"initial","idle");var uC=Wd(Ik()),vC=class extends uC.default{constructor(){super(...arguments);cb(this,"toBBox",b=>b.rotatedBounds)}},fy=class extends Bi{constructor(){super(...arguments);cb(this,"initialSelectedIds",[]);cb(this,"initialSelectedShapes",[]);cb(this,"tree",
new vC);cb(this,"onEnter",()=>{const {selectedShapes:b,currentPage:g,selectedIds:m}=this.app;this.initialSelectedIds=Array.from(m.values());this.initialSelectedShapes=Array.from(b.values());this.tree.load(g.shapes)});cb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});cb(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,ctrlKey:g,originPoint:m,currentPoint:G}}=this.app,V=sf.getBoundsFromPoints([G,m],0);this.app.setBrush(V);const ka=[...(new Set(this.tree.search(V).filter(qa=>
g?sf.boundsContain(V,qa.rotatedBounds):qa.hitTestBounds(V)).filter(qa=>"group"!==qa.type).map(qa=>{var Ia;return null!=(Ia=this.app.getParentGroup(qa))?Ia:qa})))];b?ka.every(qa=>this.initialSelectedShapes.includes(qa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(qa=>!ka.includes(qa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...ka]))]):this.app.setSelectedShapes(ka);this.app.viewport.panToPointWhenOutOfBounds(G)});cb(this,"onPointerUp",()=>{this.app.setBrush(void 0);
this.tool.transition("idle")});cb(this,"handleModifierKey",(b,g)=>{switch(g.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};cb(fy,"id","brushing");var gy=class extends Bi{constructor(){super(...arguments);cb(this,"onEnter",b=>{var g;const {selectedIds:m,selectedShapes:G,inputs:{shiftKey:V}}=this.app;if("shape"===b.type&&!G.has(b.shape)){const ka=null!=(g=this.app.getParentGroup(b.shape))?g:b.shape;V?this.app.setSelectedShapes([...Array.from(m.values()),
ka.id]):this.app.setSelectedShapes([ka])}});cb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};cb(gy,"id","contextMenu");var hy=class extends Bi{constructor(){super(...arguments);cb(this,"onEnter",b=>{"pinching"===b.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});cb(this,"onExit",()=>{});cb(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&
this.tool.transition("hoveringSelectionHandle",b);break;case "canvas":this.app.setHoveredShape(void 0)}});cb(this,"onPointerDown",(b,g)=>{const {selectedShapes:m,inputs:{ctrlKey:G}}=this.app;if(2===g.button)this.tool.transition("contextMenu",b);else if(G)this.tool.transition("pointingCanvas");else switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;
default:this.tool.transition("pointingResizeHandle",b)}break;case "shape":if(m.has(b.shape))this.tool.transition("pointingSelectedShape",b);else{const {selectionBounds:V,inputs:ka}=this.app;V&&Lk.pointInBounds(ka.currentPoint,V)?this.tool.transition("pointingShapeBehindBounds",b):this.tool.transition("pointingShape",b)}break;case "handle":this.tool.transition("pointingHandle",b);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",
oc(oc({},g),b))}});cb(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});cb(this,"onDoubleClick",b=>{if(!b.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var g=this.app.selectedShapesArray[0];if(g.canEdit)switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",
{type:"shape",target:g})}}});cb(this,"onKeyDown",(b,g)=>{({selectedShapesArray:b}=this.app);switch(g.key){case "Enter":1===b.length&&b[0].canEdit&&!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:b[0],order:0});break;case "Escape":b.length&&this.app.setSelectedShapes([])}})}};cb(hy,"id","idle");var Fx=class extends Bi{constructor(){super(...arguments);cb(this,"onEnter",b=>{var g;const {selectedIds:m,inputs:{shiftKey:G}}=this.app,V=null!=(g=this.app.getParentGroup(b.shape))?
g:b.shape;G?this.app.setSelectedShapes([...Array.from(m.values()),V.id]):this.app.setSelectedShapes([V])});cb(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Jd.dist(b,g)&&!this.app.readOnly&&this.tool.transition("translating")});cb(this,"onPointerUp",()=>{this.tool.transition("idle")});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};cb(Fx,"id","pointingShape");var Gx=class extends Bi{constructor(){super(...arguments);cb(this,"cursor",
"move");cb(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Jd.dist(b,g)&&!this.app.readOnly&&this.tool.transition("translating")});cb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};cb(Gx,"id","pointingBoundsBackground");var Hx=class extends Bi{constructor(){super(...arguments);cb(this,"onEnter",()=>{var b;const {shiftKey:g}=this.app.inputs;g||
(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(b=window.getSelection())?void 0:b.removeAllRanges())});cb(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Jd.dist(b,g)&&this.tool.transition("brushing")});cb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});cb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",
{point:this.app.inputs.originPoint})})}};cb(Hx,"id","pointingCanvas");var Ix=class extends Bi{constructor(){super(...arguments);cb(this,"cursor","move");cb(this,"isCloning",!1);cb(this,"didClone",!1);cb(this,"initialPoints",{});cb(this,"initialShapePoints",{});cb(this,"initialClonePoints",{});cb(this,"clones",[]);cb(this,"onEnter",()=>{var b;this.app.history.pause();const {allSelectedShapesArray:g,inputs:m}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(g.map(({id:G,props:{point:V}})=>
[G,V.slice()]));document.querySelectorAll("input,textarea").forEach(G=>G.blur());null==(b=document.getSelection())?void 0:b.empty();m.altKey?this.startCloning():this.moveSelectedShapesToPointer()});cb(this,"onExit",()=>{this.app.history.resume();this.app.persist();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});cb(this,"onPointerMove",()=>{const {inputs:{currentPoint:b}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenOutOfBounds(b)});
cb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});cb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(m=>{m.update({point:this.initialPoints[m.id]})}),this.tool.transition("idle")}});cb(this,"onKeyUp",(b,g)=>{switch(g.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");
const {currentPage:m,allSelectedShapes:G}=this.app;m.removeShapes(...G);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:b,originPoint:g,currentPoint:m}}=this.app,{initialPoints:G}=this,V=Jd.sub(m,g);b&&(Math.abs(V[0])<Math.abs(V[1])?V[0]=0:V[1]=0);Id(()=>{this.app.allSelectedShapes.forEach(ka=>{ka.update({point:Jd.add(G[ka.id],V)})})})}startCloning(){this.didClone||
(this.clones=this.app.allSelectedShapesArray.map(b=>{const g=this.app.getShapeClass(b.type);if(!g)throw Error("Could not find that shape class.");return new g(Jc(oc({},b.serialized),{id:Zk(),type:b.type,point:this.initialPoints[b.id],rotation:b.props.rotation}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:b,props:{point:g}})=>[b,g.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(b=>{b.update({point:this.initialPoints[b.id]})});this.initialPoints=this.initialClonePoints;
this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};cb(Ix,"id","translating");var Jx=class extends Bi{constructor(){super(...arguments);cb(this,"pointedSelectedShape");cb(this,"onEnter",b=>{this.pointedSelectedShape=b.shape});cb(this,"onExit",()=>{this.pointedSelectedShape=void 0});cb(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Jd.dist(b,g)&&!this.app.readOnly&&
this.tool.transition("translating")});cb(this,"onPointerUp",()=>{const {shiftKey:b,currentPoint:g}=this.app.inputs;var {selectedShapesArray:m}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(b)({selectedIds:m}=this.app),m=Array.from(m.values()),m.splice(m.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(m);else{if(1===m.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&this.pointedSelectedShape instanceof on&&Lk.pointInBounds(g,
this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};cb(Jx,"id","pointingSelectedShape");var Kx=class extends Bi{constructor(){super(...arguments);cb(this,"info",{});cb(this,"onEnter",b=>{this.info=b;this.updateCursor()});cb(this,"onExit",()=>{this.app.cursors.reset()});
cb(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Jd.dist(b,g)&&this.tool.transition("resizing",this.info)});cb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Qn[this.info.handle],this.app.selectionBounds.rotation)}};cb(Kx,"id","pointingResizeHandle");var Lx=class extends Bi{constructor(){super(...arguments);
cb(this,"isSingle",!1);cb(this,"handle","bottom_right_corner");cb(this,"snapshots",{});cb(this,"initialCommonBounds",{});cb(this,"selectionRotation",0);cb(this,"resizeType","corner");cb(this,"onEnter",b=>{var g,m;const {history:G,selectedShapesArray:V,selectionBounds:ka}=this.app;if(!ka)throw Error("Expected a selected bounds.");this.handle=b.handle;this.resizeType="left_edge"===b.handle||"right_edge"===b.handle?"horizontal-edge":"top_edge"===b.handle||"bottom_edge"===b.handle?"vertical-edge":"corner";
this.app.cursors.setCursor(Lx.CURSORS[b.handle],null==(g=this.app.selectionBounds)?void 0:g.rotation);G.pause();const qa=sf.getBoundsFromPoints(V.map(Ia=>sf.getBoundsCenter(Ia.bounds)));this.selectionRotation=(this.isSingle=1===V.length)?null!=(m=V[0].props.rotation)?m:0:0;this.initialCommonBounds=oc({},ka);this.snapshots=Object.fromEntries(V.map(Ia=>{const Ta=oc({},Ia.bounds),[Xa,ib]=sf.getBoundsCenter(Ta);return[Ia.id,{props:Ia.serialized,bounds:Ta,transformOrigin:[(Xa-this.initialCommonBounds.minX)/
this.initialCommonBounds.width,(ib-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(Xa-qa.minX)/qa.width,(ib-qa.minY)/qa.height],isAspectRatioLocked:Ia.props.isAspectRatioLocked||!(Ia.canChangeAspectRatio&&!Ia.props.rotation)}]}));V.forEach(Ia=>{var Ta;null==(Ta=Ia.onResizeStart)?void 0:Ta.call(Ia,{isSingle:this.isSingle})})});cb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});
cb(this,"onPointerMove",()=>{const {inputs:{altKey:b,shiftKey:g,ctrlKey:m,originPoint:G,currentPoint:V}}=this.app,{handle:ka,snapshots:qa,initialCommonBounds:Ia}=this;let Ta=Jd.sub(V,G);b&&(Ta=Jd.mul(Ta,2));const Xa=this.app.selectedShapes.values().next().value;let ib=sf.getTransformedBoundingBox(Ia,ka,Ta,this.selectionRotation,g||this.isSingle&&(m?!("clipping"in Xa.props):!Xa.canChangeAspectRatio||Xa.props.isAspectRatioLocked));b&&(ib=oc(oc({},ib),sf.centerBounds(ib,sf.getBoundsCenter(Ia))));const {scaleX:vb,
scaleY:Lb}=ib;this.app.selectedShapes.forEach(cc=>{var Tb,kc;const {props:mc,bounds:Vb,transformOrigin:tc}=qa[cc.id];let Ic=sf.getRelativeTransformedBoundingBox(ib,Ia,Vb,0>vb,0>Lb);if(cc.canResize.some(Xd=>Xd)||cc.props.isSizeLocked||!this.isSingle){var Sc=[vb,Lb],Xc=null!=(Tb=mc.rotation)?Tb:0;Tb=sf.getBoundsCenter(Ic);cc.canFlip||(Sc=Jd.abs(Sc));cc.canScale||(Sc=null!=(kc=mc.scale)?kc:[1,1]);if(Xc&&0>vb&&0<=Lb||0>Lb&&0<=vb)Xc*=-1;cc.onResize(mc,{center:Tb,rotation:Xc,scale:Sc,bounds:Ic,type:ka,
clip:m,transformOrigin:tc})}});this.updateCursor(vb,Lb);this.app.viewport.panToPointWhenOutOfBounds(V)});cb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(m=>{m.update(oc({},this.snapshots[m.id].props))}),this.tool.transition("idle")}})}updateCursor(b,g){var m,G,V,ka;const qa=0>b&&0<=g;b=0>g&&0<=b;switch(this.handle){case "top_left_corner":case "bottom_right_corner":qa||
b?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(m=this.app.selectionBounds)?void 0:m.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(G=this.app.selectionBounds)?void 0:G.rotation);break;case "top_right_corner":case "bottom_left_corner":qa||b?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(V=this.app.selectionBounds)?void 0:V.rotation):"nwse-resize"===this.app.cursors.cursor&&
this.app.cursors.setCursor("nesw-resize",null==(ka=this.app.selectionBounds)?void 0:ka.rotation)}}},qv=Lx;cb(qv,"id","resizing");cb(qv,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var Mx=class extends Bi{constructor(){super(...arguments);cb(this,"cursor","rotate");cb(this,"handle","");cb(this,"onEnter",b=>{this.app.history.pause();
this.handle=b.handle;this.updateCursor()});cb(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Jd.dist(b,g)&&this.tool.transition("rotating",{handle:this.handle})});cb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Qn[this.handle],this.app.selectionRotation)}};cb(Mx,"id","pointingRotateHandle");
var Nx=class extends Bi{constructor(){super(...arguments);cb(this,"info",{});cb(this,"onEnter",b=>{this.info=b});cb(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Jd.dist(b,g)&&!this.app.readOnly&&this.tool.transition("translating")});cb(this,"onPointerUp",()=>{const {selectedIds:b,inputs:{shiftKey:g}}=this.app;g?this.app.setSelectedShapes([...Array.from(b.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});
cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};cb(Nx,"id","pointingShapeBehindBounds");var rv=class extends Bi{constructor(){super(...arguments);cb(this,"cursor","rotate");cb(this,"snapshot",{});cb(this,"initialCommonCenter",[0,0]);cb(this,"initialCommonBounds",{});cb(this,"initialAngle",0);cb(this,"initialSelectionRotation",0);cb(this,"handle","");cb(this,"onEnter",b=>{const {history:g,selectedShapesArray:m,selectionBounds:G}=this.app;if(!G)throw Error("Expected selected bounds.");
g.pause();this.handle=b.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=oc({},G);this.initialCommonCenter=sf.getBoundsCenter(G);this.initialAngle=Jd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(m.map(V=>[V.id,{point:[...V.props.point],center:[...V.center],rotation:V.props.rotation,handles:"handles"in V?Sq(V.handles):void 0}]));this.updateCursor()});cb(this,"onExit",()=>{this.app.history.resume();this.snapshot=
{}});cb(this,"onPointerMove",()=>{const {selectedShapes:b,inputs:{shiftKey:g,currentPoint:m}}=this.app,{snapshot:G,initialCommonCenter:V,initialAngle:ka,initialSelectionRotation:qa}=this;let Ia=Jd.angle(V,m)-ka;g&&(Ia=ol.snapAngleToSegments(Ia,24));b.forEach(Xa=>{var ib=G[Xa.id];let vb=0;if(g){var {rotation:Lb=0}=ib;vb=ol.snapAngleToSegments(Lb,24)-Lb}const cc=Jd.sub(ib.center,ib.point);Lb=Jd.rotWith(ib.center,V,Ia);if("handles"in Xa){ib=ib.handles;const Tb=ib.map(mc=>Jd.rotWith(mc.point,cc,Ia)),
kc=sf.getCommonTopLeft(Tb);Xa.update({point:Jd.add(kc,Jd.sub(Lb,cc)),handles:ib.map((mc,Vb)=>Jc(oc({},mc),{point:Jd.sub(Tb[Vb],kc)}))})}else Xa.update({point:Jd.sub(Lb,cc),rotation:ol.clampRadians((ib.rotation||0)+Ia+vb)})});const Ta=ol.clampRadians(qa+Ia);this.app.setSelectionRotation(g?ol.snapAngleToSegments(Ta,24):Ta);this.updateCursor()});cb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(m=>
{m.update(this.snapshot[m.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(Qn[this.handle],this.app.selectionRotation)}};cb(rv,"id","rotating");var Ox=class extends Bi{constructor(){super(...arguments);cb(this,"onPinch",(b,g)=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});cb(this,"onPinchEnd",()=>{this.tool.transition("idle")});cb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};cb(Ox,"id","pinching");var Px=class extends wv{constructor(){super(...arguments);
cb(this,"cursor","grabbing");cb(this,"onEnter",b=>{this.app.history.pause();this.newStartBindingId=Zk();this.draggedBindingId=Zk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=b.id;this.currentShape=b.shape;this.initialShape=Ec(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};cb(Px,"id","translatingHandle");var yx=class extends Bi{constructor(){super(...arguments);cb(this,"cursor","grabbing");cb(this,"info",{});cb(this,"onEnter",b=>{this.info=
b});cb(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Jd.dist(b,g)&&this.tool.transition("translatingHandle",this.info)});cb(this,"onPointerUp",()=>{this.tool.transition("idle")});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};cb(yx,"id","pointingHandle");var zx=class extends Bi{constructor(){super(...arguments);cb(this,"handle");cb(this,"onEnter",b=>{var g;this.app.cursors.setCursor(Qn[b.handle],null!=(g=this.app.selectionBounds.rotation)?
g:0);this.handle=b.handle});cb(this,"onExit",()=>{this.app.cursors.reset()});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});cb(this,"onPointerDown",b=>{switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",b);break;default:this.tool.transition("pointingResizeHandle",
b)}}});cb(this,"onPointerLeave",()=>{this.tool.transition("idle")});cb(this,"onDoubleClick",b=>{var g;if(!b.order&&1===this.app.selectedShapes.size){var m=this.app.selectedShapes.values().next().value;if(m.canEdit&&!this.app.readOnly)switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":null==(g=m.onResetBounds)?void 0:g.call(m,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:m})}else m.onResetBounds({asset:m.props.assetId?
this.app.assets[m.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle")}})}};cb(zx,"id","hoveringSelectionHandle");var Ax=class extends Bi{constructor(){super(...arguments);cb(this,"editingShape",{});cb(this,"onEnter",b=>{this.editingShape=b.shape;this.app.setEditingShape(b.shape)});cb(this,"onExit",()=>{var b;if(this.editingShape&&"text"in this.editingShape.props){const g=this.editingShape.props.text.trim();""===g&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):
(this.editingShape.onResetBounds(),this.editingShape.update({text:g}))}this.app.persist();this.app.setEditingShape();null==(b=document.querySelector(".tl-canvas"))?void 0:b.focus()});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});cb(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.editingShape)break;this.tool.transition("idle",b);break;case "canvas":b.order||this.tool.transition("idle",b)}});cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":Id(()=>
{g.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};cb(Ax,"id","editingShape");var Bx=class extends Bi{constructor(){super(...arguments);cb(this,"minimapZoom",1);cb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});cb(this,"getCameraPoint",b=>{const g=document.querySelector(".tl-preview-minimap svg");var m=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(g&&m){const G=g.getBoundingClientRect();this.minimapRect.height=
G.height;this.minimapRect.width=G.width;this.minimapRect.minX=G.left;this.minimapRect.minY=G.top;this.minimapRect.maxX=G.right;this.minimapRect.maxY=G.bottom;this.minimapZoom=+g.dataset.commonBoundWidth/this.minimapRect.width;b=Jd.sub(b,[this.minimapRect.minX,this.minimapRect.minY]);m=m.getBoundingClientRect();m=Jd.mul(Jd.sub(b,[m.left+m.width/2,m.top+m.height/2]),this.minimapZoom);return Jd.sub(this.app.viewport.camera.point,m)}});cb(this,"onEnter",b=>{(b=this.getCameraPoint([b.clientX,b.clientY]))?
this.app.viewport.update({point:b}):this.tool.transition("idle")});cb(this,"onPointerMove",(b,g)=>{"clientX"in g&&(b=this.getCameraPoint([g.clientX,g.clientY]))&&this.app.viewport.update({point:b})});cb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};cb(Bx,"id","pointingMinimap");var or=class extends Lp{constructor(){super(...arguments);cb(this,"returnTo","");cb(this,"onEnter",b=>{this.returnTo=null==b?void 0:b.returnTo})}};cb(or,"id","select");cb(or,"initial","idle");cb(or,"shortcut",["1",
"s"]);cb(or,"states",[hy,fy,gy,Hx,Fx,Nx,Jx,Gx,zx,Kx,Mx,Bx,yx,Px,Ix,qv,rv,rv,Ox,Ax]);var Cx=class extends Bi{constructor(){super(...arguments);cb(this,"cursor","grabbing");cb(this,"originalScreenPoint",[]);cb(this,"originalCameraPoint",[]);cb(this,"prevState","idle");cb(this,"onEnter",b=>{this.prevState=null==b?void 0:b.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});cb(this,"onPointerMove",(b,g)=>{b=me.sub(this.originalScreenPoint,
this.app.inputs.currentScreenPoint);this.app.viewport.update({point:me.sub(this.originalCameraPoint,me.div(b,this.app.viewport.camera.zoom))})});cb(this,"onPointerUp",()=>{var b;this.tool.transition(null!=(b=this.prevState)?b:"idle")})}};cb(Cx,"id","panning");var Dx=class extends Bi{constructor(){super(...arguments);cb(this,"onEnter",b=>{this.parent.prevTool&&b.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});
cb(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning")})}};cb(Dx,"id","idle");var Ex=class extends Bi{constructor(){super(...arguments);cb(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning",{prevState:"idleHold"})});cb(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};cb(Ex,"id","idleHold");var xx=class extends Bi{constructor(){super(...arguments);cb(this,"origin",[0,0]);cb(this,"prevDelta",[0,0]);cb(this,"onEnter",b=>{this.prevDelta=
b.info.delta;this.origin=b.info.point});cb(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});cb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};cb(xx,"id","pinching");var Hr=class extends Lp{constructor(){super(...arguments);cb(this,"cursor","grab");cb(this,"prevTool",null);cb(this,"onEnter",b=>{this.prevTool=null==b?void 0:b.prevTool});cb(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});cb(this,"onPinchStart",(b,g)=>{this.transition("pinching",
{info:b,event:g})})}};cb(Hr,"id","move");cb(Hr,"shortcut",["2","m"]);cb(Hr,"states",[Dx,Ex,Cx,xx]);cb(Hr,"initial","idle");var om=class{constructor(b,g={}){cb(this,"lastShapesNounces",null);cb(this,"app");cb(this,"id");cb(this,"name");cb(this,"shapes",[]);cb(this,"bindings",{});cb(this,"nonce",0);cb(this,"bringForward",Ia=>{const Ta=this.parseShapesArg(Ia);Ta.sort((Xa,ib)=>this.shapes.indexOf(ib)-this.shapes.indexOf(Xa)).map(Xa=>this.shapes.indexOf(Xa)).forEach(Xa=>{if(Xa!==this.shapes.length-1&&
!Ta.includes(this.shapes[Xa+1])){var ib=this.shapes[Xa];this.shapes[Xa]=this.shapes[Xa+1];this.shapes[Xa+1]=ib}});this.app.persist();return this});cb(this,"sendBackward",Ia=>{const Ta=this.parseShapesArg(Ia);Ta.sort((Xa,ib)=>this.shapes.indexOf(Xa)-this.shapes.indexOf(ib)).map(Xa=>this.shapes.indexOf(Xa)).forEach(Xa=>{if(0!==Xa&&!Ta.includes(this.shapes[Xa-1])){var ib=this.shapes[Xa];this.shapes[Xa]=this.shapes[Xa-1];this.shapes[Xa-1]=ib}});this.app.persist();return this});cb(this,"bringToFront",
Ia=>{const Ta=this.parseShapesArg(Ia);this.shapes=this.shapes.filter(Xa=>!Ta.includes(Xa)).concat(Ta);this.app.persist();return this});cb(this,"sendToBack",Ia=>{const Ta=this.parseShapesArg(Ia);this.shapes=Ta.concat(this.shapes.filter(Xa=>!Ta.includes(Xa)));this.app.persist();return this});cb(this,"flip",(Ia,Ta)=>{Ia=this.parseShapesArg(Ia);const Xa=sf.getCommonBounds(Ia.map(ib=>ib.bounds));Ia.forEach(ib=>{var vb;const Lb=sf.getRelativeTransformedBoundingBox(Xa,Xa,ib.bounds,"horizontal"===Ta,"vertical"===
Ta);if(ib.serialized)ib.onResize(ib.serialized,{bounds:Lb,center:sf.getBoundsCenter(Lb),rotation:null!=(vb=ib.props.rotation)?vb:-0,type:"top_left_corner",scale:ib.canFlip&&ib.props.scale?"horizontal"===Ta?[-ib.props.scale[0],1]:[1,-ib.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});cb(this,"getShapeById",Ia=>this.shapes.find(Ta=>Ta.id===Ia));cb(this,"cleanup",Ia=>{Ia=lc(this.bindings,Ia);const Ta=new Set;let Xa=!1,ib=!1;const vb=Sq(this.bindings);Ia.forEach(Lb=>
{var cc;if(this.bindings[Lb.id]){var Tb=this.getShapeById(Lb.toId),kc=this.getShapeById(Lb.fromId);Tb&&kc?Ta.has(kc.id)||(Lb=this.updateArrowBindings(kc),Ta.add(kc.id),Lb&&(kc=oc(oc({},kc.props),Lb),Xa=!0,null==(cc=this.getShapeById(kc.id))?void 0:cc.update(kc,!1,!0))):(delete vb[Lb.id],ib=!0)}});Object.keys(vb).forEach(Lb=>{const cc=this.bindings[Lb];0===this.shapes.filter(Tb=>Tb.id===cc.fromId||Tb.id===cc.toId).length&&(delete vb[Lb],ib=!0)});ib&&this.update({bindings:vb});(Xa||ib)&&this.app.persist(!0)});
cb(this,"updateArrowBindings",Ia=>{var Ta,Xa,ib,vb={start:Sq(Ia.props.handles.start),end:Sq(Ia.props.handles.end)},Lb={isBound:!1,handle:Ia.props.handles.start,point:me.add(Ia.props.handles.start.point,Ia.props.point)},cc={isBound:!1,handle:Ia.props.handles.end,point:me.add(Ia.props.handles.end.point,Ia.props.point)};if(Ia.props.handles.start.bindingId){var Tb=void 0!==(null==(Ta=Ia.props.decorations)?void 0:Ta.start);Ta=Ia.props.handles.start;var kc=this.bindings[Ia.props.handles.start.bindingId],
mc=this.getShapeById(null==kc?void 0:kc.toId);if(mc){Lb=mc.getBounds();var Vb=mc.getExpandedBounds(),tc=sf.expandBounds(Lb,Tb?kc.distance:1);const {minX:Ic,minY:Sc,width:Xc,height:Xd}=Vb,ce=me.add([Ic,Sc],me.mulV([Xc,Xd],me.rotWith(kc.point,[.5,.5],mc.props.rotation||0)));Lb={isBound:!0,hasDecoration:Tb,binding:kc,handle:Ta,point:ce,target:mc,bounds:Lb,expandedBounds:Vb,intersectBounds:tc,center:mc.getCenter()}}}if(Ia.props.handles.end.bindingId&&(Tb=void 0!==(null==(Xa=Ia.props.decorations)?void 0:
Xa.end),Xa=Ia.props.handles.end,Ta=this.bindings[Ia.props.handles.end.bindingId],kc=this.getShapeById(null==Ta?void 0:Ta.toId))){cc=kc.getBounds();mc=kc.getExpandedBounds();Vb=Tb?sf.expandBounds(cc,Ta.distance):cc;const {minX:Ic,minY:Sc,width:Xc,height:Xd}=mc;tc=me.add([Ic,Sc],me.mulV([Xc,Xd],me.rotWith(Ta.point,[.5,.5],kc.props.rotation||0)));cc={isBound:!0,hasDecoration:Tb,binding:Ta,handle:Xa,point:tc,target:kc,bounds:cc,expandedBounds:mc,intersectBounds:Vb,center:kc.getCenter()}}for(const Ic of["end",
"start"]){Xa="start"===Ic?Lb:cc;const Sc="start"===Ic?cc:Lb;if(Xa.isBound)if(Xa.binding.distance){if(Tb=me.uni(me.sub(Xa.point,Sc.point)),Ta=C(Sc.point,Tb,Xa.intersectBounds,Xa.target.props.rotation).filter(Xc=>Xc.didIntersect).map(Xc=>Xc.points[0]).sort((Xc,Xd)=>me.dist(Xc,Sc.point)-me.dist(Xd,Sc.point)),Ta[0])if(kc=void 0,Sc.isBound&&(kc=C(Sc.point,Tb,Sc.intersectBounds,Sc.target.props.rotation).filter(Xc=>Xc.didIntersect).map(Xc=>Xc.points[0]).sort((Xc,Xd)=>me.dist(Xc,Sc.point)-me.dist(Xd,Sc.point))[0]),
Sc.isBound&&(2>Ta.length||kc&&Ta[0]&&10>Math.ceil(me.dist(Ta[0],kc))||sf.boundsContain(Xa.expandedBounds,Sc.expandedBounds)||sf.boundsCollide(Xa.expandedBounds,Sc.expandedBounds)))Tb=me.uni(me.sub(Sc.point,Xa.point)),Ta=C(Xa.point,Tb,Xa.bounds,Xa.target.props.rotation).filter(Xc=>Xc.didIntersect).map(Xc=>Xc.points[0]),Ta[0]&&(vb[Ic].point=me.toFixed(me.sub(Ta[0],Ia.props.point)),vb["start"===Ic?"end":"start"].point=me.toFixed(me.add(me.sub(Ta[0],Ia.props.point),me.mul(Tb,Math.min(me.dist(Ta[0],Sc.point),
10*(sf.boundsContain(Sc.bounds,Xa.intersectBounds)?-1:1))))));else{if(!Sc.isBound&&(Ta[0]&&10>me.dist(Ta[0],Sc.point)||Lk.pointInBounds(Sc.point,Xa.intersectBounds)))return vb=me.uni(me.sub(Xa.center,Sc.point)),null==(ib=Ia.getHandlesChange)?void 0:ib.call(Ia,Ia.props,{[Ic]:Jc(oc({},Ia.props.handles[Ic]),{point:me.toFixed(me.add(me.sub(Sc.point,Ia.props.point),me.mul(vb,10)))})});Ta[0]&&(vb[Ic].point=me.toFixed(me.sub(Ta[0],Ia.props.point)))}}else vb[Ic].point=me.sub(Xa.point,Ia.props.point)}return Ia.getHandlesChange(Ia.props,
vb)});const {id:m,name:G,shapes:V=[],bindings:ka={},nonce:qa}=g;this.id=m;this.name=G;this.bindings=Object.assign({},ka);this.app=b;this.nonce=qa||0;this.addShapes(...V);sg(this);Od(()=>{const Ia=0<this.shapes.length?Object.fromEntries(this.shapes.map(Ta=>[Ta.id,Ta.nonce])):null;if(this.lastShapesNounces&&Ia){const Ta=this.lastShapesNounces,Xa=[...(new Set([...Object.keys(Ia),...Object.keys(Ta)]))].filter(ib=>Ta[ib]!==Ia[ib]);requestAnimationFrame(()=>{this.cleanup(Xa)})}Ia&&(this.lastShapesNounces=
Ia)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(b=>b.serialized).filter(b=>!!b).map(b=>Ec(b)),bindings:Sq(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(b=>[b.id,b]))}update(b){Object.assign(this,b);return this}updateBindings(b){Object.assign(this.bindings,b);return this}updateShapesIndex(b){this.shapes.sort((g,m)=>b.indexOf(g.id)-b.indexOf(m.id));return this}addShapes(...b){if(0!==b.length)return b="getBounds"in b[0]?b:b.map(g=>
new (this.app.getShapeClass(g.type))(g)),this.shapes.push(...b),b}parseShapesArg(b){return"string"===typeof b[0]?this.shapes.filter(g=>b.includes(g.id)):b}removeShapes(...b){const g=this.parseShapesArg(b);this.shapes=this.shapes.filter(m=>!g.includes(m));return g}getBindableShapes(){return this.shapes.filter(b=>b.canBind).sort((b,g)=>g.nonce-b.nonce).map(b=>b.id)}};rd([Yd],om.prototype,"id",2);rd([Yd],om.prototype,"name",2);rd([Yd],om.prototype,"shapes",2);rd([Yd],om.prototype,"bindings",2);rd([pe],
om.prototype,"serialized",1);rd([pe],om.prototype,"shapesById",1);rd([Yd],om.prototype,"nonce",2);rd([hg],om.prototype,"update",1);rd([hg],om.prototype,"updateBindings",1);rd([hg],om.prototype,"updateShapesIndex",1);rd([hg],om.prototype,"addShapes",1);rd([hg],om.prototype,"removeShapes",1);rd([hg],om.prototype,"bringForward",2);rd([hg],om.prototype,"sendBackward",2);rd([hg],om.prototype,"bringToFront",2);rd([hg],om.prototype,"sendToBack",2);rd([hg],om.prototype,"cleanup",2);var Qk=class{constructor(){cb(this,
"shiftKey",!1);cb(this,"ctrlKey",!1);cb(this,"modKey",!1);cb(this,"altKey",!1);cb(this,"spaceKey",!1);cb(this,"isPinching",!1);cb(this,"currentScreenPoint",[0,0]);cb(this,"currentPoint",[0,0]);cb(this,"previousScreenPoint",[0,0]);cb(this,"previousPoint",[0,0]);cb(this,"originScreenPoint",[0,0]);cb(this,"originPoint",[0,0]);cb(this,"pointerIds",new Set);cb(this,"state","idle");cb(this,"containerOffset",[0,0]);cb(this,"onPointerDown",(b,g)=>{this.pointerIds.add(g.pointerId);this.updateModifiers(g);
this.originScreenPoint=this.currentScreenPoint;this.originPoint=b;this.state="pointing"});cb(this,"onPointerMove",(b,g)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(g),this.previousPoint=this.currentPoint,this.currentPoint=b)});cb(this,"onPointerUp",(b,g)=>{this.pointerIds.clear();this.updateModifiers(g);this.state="idle"});cb(this,"onKeyDown",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!0}});cb(this,"onKeyUp",b=>{this.updateModifiers(b);
switch(b.key){case " ":this.spaceKey=!1}});cb(this,"onPinchStart",(b,g)=>{this.updateModifiers(g);this.state="pinching"});cb(this,"onPinch",(b,g)=>{"pinching"===this.state&&this.updateModifiers(g)});cb(this,"onPinchEnd",(b,g)=>{"pinching"===this.state&&(this.updateModifiers(g),this.state="idle")});sg(this)}updateContainerOffset(b){Object.assign(this.containerOffset,b)}updateModifiers(b){b.isPrimary&&("clientX"in b&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=me.sub([b.clientX,
b.clientY],this.containerOffset)),"shiftKey"in b&&(this.shiftKey=b.shiftKey,this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.modKey=Ck()?b.metaKey:b.ctrlKey))}};rd([Yd],Qk.prototype,"shiftKey",2);rd([Yd],Qk.prototype,"ctrlKey",2);rd([Yd],Qk.prototype,"modKey",2);rd([Yd],Qk.prototype,"altKey",2);rd([Yd],Qk.prototype,"spaceKey",2);rd([Yd],Qk.prototype,"isPinching",2);rd([Yd],Qk.prototype,"currentScreenPoint",2);rd([Yd],Qk.prototype,"currentPoint",2);rd([Yd],Qk.prototype,"previousScreenPoint",2);rd([Yd],
Qk.prototype,"previousPoint",2);rd([Yd],Qk.prototype,"originScreenPoint",2);rd([Yd],Qk.prototype,"originPoint",2);rd([Yd],Qk.prototype,"state",2);rd([Yd],Qk.prototype,"containerOffset",2);rd([hg],Qk.prototype,"updateContainerOffset",1);rd([hg],Qk.prototype,"updateModifiers",1);rd([hg],Qk.prototype,"onPointerDown",2);rd([hg],Qk.prototype,"onPointerMove",2);rd([hg],Qk.prototype,"onPointerUp",2);rd([hg],Qk.prototype,"onKeyDown",2);rd([hg],Qk.prototype,"onKeyUp",2);rd([hg],Qk.prototype,"onPinchStart",
2);rd([hg],Qk.prototype,"onPinch",2);rd([hg],Qk.prototype,"onPinchEnd",2);var SC=(b,g=100)=>-(Math.cos(Math.PI*Jd.clamp(b/g,0,1))-1)/2,Os=class{constructor(){cb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});cb(this,"camera",{point:[0,0],zoom:1});cb(this,"updateBounds",b=>{this.bounds=b;return this});cb(this,"panCamera",b=>this.update({point:Jd.sub(this.camera.point,Jd.div(b,this.camera.zoom))}));cb(this,"panToPointWhenOutOfBounds",b=>{const g=Jd.sub([this.currentView.maxX,
this.currentView.maxY],b);b=Jd.sub([this.currentView.minX,this.currentView.minY],b);this.panCamera(Jd.mul([0>g[0]?g[0]:0<b[0]?b[0]:0,0>g[1]?g[1]:0<b[1]?b[1]:0],-Os.panMultiplier))});cb(this,"update",({point:b,zoom:g})=>{void 0===b||isNaN(b[0])||isNaN(b[1])||(this.camera.point=b);void 0===g||isNaN(g)||(this.camera.zoom=Math.min(4,Math.max(.1,g)));return this});cb(this,"getPagePoint",b=>{const {camera:g,bounds:m}=this;return Jd.sub(Jd.div(Jd.sub(b,[m.minX,m.minY]),g.zoom),g.point)});cb(this,"getScreenPoint",
b=>{const {camera:g}=this;return Jd.mul(Jd.add(b,g.point),g.zoom)});cb(this,"onZoom",(b,g,m=!1)=>this.pinchZoom(b,[0,0],g,m));cb(this,"pinchZoom",(b,g,m,G=!1)=>{var {camera:V}=this;g=Jd.sub(V.point,Jd.div(g,V.zoom));m=Jd.clamp(m,Os.minZoom,Os.maxZoom);V=Jd.div(b,V.zoom);b=Jd.div(b,m);b=Jd.toFixed(Jd.add(g,Jd.sub(b,V)));G?this.animateCamera({point:b,zoom:m}):this.update({point:b,zoom:m});return this});cb(this,"setZoom",(b,g=!1)=>{const {bounds:m}=this;this.onZoom([m.width/2,m.height/2],b,g)});cb(this,
"zoomIn",()=>{const {camera:b}=this;this.setZoom(b.zoom/.8,!0)});cb(this,"zoomOut",()=>{const {camera:b}=this;this.setZoom(.8*b.zoom,!0)});cb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});cb(this,"animateCamera",({point:b,zoom:g})=>this.animateToViewport({minX:-b[0],minY:-b[1],maxX:this.bounds.width/g-b[0],maxY:this.bounds.height/g-b[1],width:this.bounds.width/g,height:this.bounds.height/g}));cb(this,"animateToViewport",b=>{const g=performance.now(),m=oc({},this.currentView),G=()=>{var V=
performance.now()-g;V=SC(V);var ka=m.minX+(b.minX-m.minX)*V;this.update({point:[-ka,-(m.minY+(b.minY-m.minY)*V)],zoom:this.bounds.width/(m.maxX+(b.maxX-m.maxX)*V-ka)});1>V&&requestAnimationFrame(G)};G()});cb(this,"zoomToBounds",({width:b,height:g,minX:m,minY:G})=>{const {bounds:V,camera:ka}=this;let qa=Math.min((V.width-100)/b,(V.height-100)/g);qa=Math.min(1,Math.max(Os.minZoom,ka.zoom===qa||1>ka.zoom?Math.min(1,qa):qa));b=Jd.add([-m,-G],[(V.width-b*qa)/2/qa,(V.height-g*qa)/2/qa]);this.animateCamera({point:b,
zoom:qa})});sg(this)}get currentView(){const {bounds:b,camera:{point:g,zoom:m}}=this,G=b.width/m,V=b.height/m;return{minX:-g[0],minY:-g[1],maxX:G-g[0],maxY:V-g[1],width:G,height:V}}},Fo=Os;cb(Fo,"minZoom",.1);cb(Fo,"maxZoom",4);cb(Fo,"panMultiplier",.05);rd([Yd],Fo.prototype,"bounds",2);rd([Yd],Fo.prototype,"camera",2);rd([hg],Fo.prototype,"updateBounds",2);rd([hg],Fo.prototype,"update",2);rd([pe],Fo.prototype,"currentView",1);var TC=class{constructor(b){cb(this,"app");cb(this,"editShape",g=>{this.app.transition("select").selectedTool.transition("editingShape",
{shape:g});return this});cb(this,"hoverShape",g=>{this.app.setHoveredShape(g);return this});cb(this,"createShapes",(...g)=>{this.app.createShapes(g);return this});cb(this,"updateShapes",(...g)=>{this.app.updateShapes(g);return this});cb(this,"deleteShapes",(...g)=>{this.app.deleteShapes(g.length?g:this.app.selectedShapesArray);return this});cb(this,"selectShapes",(...g)=>{this.app.setSelectedShapes(g);return this});cb(this,"deselectShapes",(...g)=>{const m="string"===typeof g[0]?g:g.map(G=>G.id);
this.app.setSelectedShapes(this.app.selectedShapesArray.filter(G=>!m.includes(G.id)));return this});cb(this,"flipHorizontal",(...g)=>{this.app.flipHorizontal(g);return this});cb(this,"flipVertical",(...g)=>{this.app.flipVertical(g);return this});cb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(g=>!this.app.shapesInGroups().includes(g)));return this});cb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});cb(this,"zoomIn",()=>{this.app.viewport.zoomIn();
return this});cb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});cb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});cb(this,"zoomToFit",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=sf.getCommonBounds(g.map(m=>m.bounds));this.app.viewport.zoomToBounds(g);return this});cb(this,"cameraToCenter",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=sf.getCommonBounds(g.map(m=>m.bounds));this.app.viewport.update({point:me.add(me.neg(sf.getBoundsCenter(g)),
[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});cb(this,"zoomToSelection",()=>{const {selectionBounds:g}=this.app;if(!g)return this;this.app.viewport.zoomToBounds(g);return this});cb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:me.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});cb(this,"toggleGrid",()=>{const {settings:g}=this.app;g.update({showGrid:!g.showGrid});return this});cb(this,
"setColor",g=>{const {settings:m}=this.app;m.update({color:g});this.app.selectedShapesArray.forEach(G=>{G.update({fill:g,stroke:g})});this.app.persist();return this});cb(this,"save",()=>{this.app.save();return this});cb(this,"saveAs",()=>{this.app.save();return this});cb(this,"undo",()=>{this.app.undo();return this});cb(this,"redo",()=>{this.app.redo();return this});cb(this,"persist",()=>{this.app.persist();return this});cb(this,"createNewLineBinding",(g,m)=>this.app.createNewLineBinding(g,m));cb(this,
"cloneShapes",({shapes:g,assets:m,bindings:G,point:V=[0,0]})=>{const ka=sf.getCommonBounds(g.filter(Ta=>"group"!==Ta.type).map(Ta=>{var Xa,ib,vb,Lb,cc,Tb,kc,mc,Vb,tc,Ic,Sc,Xc,Xd,ce,De;return{minX:null!=(ib=null==(Xa=Ta.point)?void 0:Xa[0])?ib:V[0],minY:null!=(Lb=null==(vb=Ta.point)?void 0:vb[1])?Lb:V[1],width:null!=(Tb=null==(cc=Ta.size)?void 0:cc[0])?Tb:4,height:null!=(mc=null==(kc=Ta.size)?void 0:kc[1])?mc:4,maxX:(null!=(tc=null==(Vb=Ta.point)?void 0:Vb[0])?tc:V[0])+(null!=(Sc=null==(Ic=Ta.size)?
void 0:Ic[0])?Sc:4),maxY:(null!=(Xd=null==(Xc=Ta.point)?void 0:Xc[1])?Xd:V[1])+(null!=(De=null==(ce=Ta.size)?void 0:ce[1])?De:4)}})),qa=g.map(Ta=>Jc(oc({},Ta),{id:Zk(),point:[V[0]+Ta.point[0]-ka.minX,V[1]+Ta.point[1]-ka.minY]}));qa.forEach(Ta=>{var Xa;Ta.children&&0<(null==(Xa=Ta.children)?void 0:Xa.length)&&(Ta.children=Ta.children.map(ib=>{var vb;return null==(vb=qa[g.findIndex(Lb=>Lb.id===ib)])?void 0:vb.id}).filter(oi))});const Ia=[];qa.flatMap(Ta=>{var Xa;return Object.values(null!=(Xa=Ta.handles)?
Xa:{})}).forEach(Ta=>{if(Ta.bindingId){var Xa=G[Ta.bindingId];if(Xa){var ib=g.findIndex(Lb=>Lb.id===Xa.fromId);const vb=g.findIndex(Lb=>Lb.id===Xa.toId);Xa&&-1!==ib&&-1!==vb?(ib=Jc(oc({},Xa),{id:Zk(),fromId:qa[ib].id,toId:qa[vb].id}),Ia.push(ib),Ta.bindingId=ib.id):Ta.bindingId=void 0}else console.warn("binding not found",Ta.bindingId)}});m=m.filter(Ta=>qa.some(Xa=>Xa.assetId===Ta.id));return{shapes:qa,assets:m,bindings:Ia}});cb(this,"getClonedShapesFromTldrString",(g,m)=>{try{{var G;const Xa=null==
(G=g.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:G[1];if(Xa){try{var V=JSON.parse(Xa)}catch(ib){V=null}var ka=V}else ka=void 0}g=ka;if(!g)return null;const {shapes:qa,bindings:Ia,assets:Ta}=g;return this.cloneShapes({shapes:qa,bindings:Ia,assets:Ta,point:m})}catch(qa){console.log(qa)}return null});cb(this,"cloneShapesIntoCurrentPage",g=>{(g=this.cloneShapes(g))&&this.addClonedShapes(g);return this});cb(this,"addClonedShapes",g=>{const {shapes:m,assets:G,bindings:V}=g;0<G.length&&this.app.createAssets(G);
0<m.length&&this.app.createShapes(m);this.app.currentPage.updateBindings(Object.fromEntries(V.map(ka=>[ka.id,ka])));this.app.selectedTool.transition("idle");return this});cb(this,"addClonedShapesFromTldrString",(g,m)=>{(g=this.getClonedShapesFromTldrString(g,m))&&this.addClonedShapes(g);return this});cb(this,"doGroup",(g=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var m=[...g.filter(G=>"group"===G.type),...g.map(G=>this.app.getParentGroup(G))].filter(oi);this.app.currentPage.removeShapes(...m);
g=g.filter(G=>"group"!==G.type);1<g.length&&(m=this.app.getShapeClass("group"),m=new m({id:Zk(),type:m.id,parentId:this.app.currentPage.id,children:g.map(G=>G.id)}),this.app.currentPage.addShapes(m),this.app.setSelectedShapes([m]),this.app.bringForward(g));this.app.persist()}});cb(this,"unGroup",(g=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){g=[...g.filter(G=>"group"===G.type),...g.map(G=>this.app.getParentGroup(G))].filter(oi);var m=this.app.shapesInGroups(g);0<g.length&&(this.app.currentPage.removeShapes(...g),
this.app.persist(),this.app.setSelectedShapes(m))}});this.app=b}},Er=class{constructor(){cb(this,"cursor","default");cb(this,"rotation",0);cb(this,"reset",()=>{this.cursor="default"});cb(this,"setCursor",(b,g=0)=>{if(b!==this.cursor||g!==this.rotation)this.cursor=b,this.rotation=g});cb(this,"setRotation",b=>{b!==this.rotation&&(this.rotation=b)});sg(this)}};rd([Yd],Er.prototype,"cursor",2);rd([Yd],Er.prototype,"rotation",2);rd([hg],Er.prototype,"reset",2);rd([hg],Er.prototype,"setCursor",2);rd([hg],
Er.prototype,"setRotation",2);var Fr=class{constructor(b){cb(this,"app");cb(this,"stack",[]);cb(this,"isPaused",!0);cb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});cb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});cb(this,"persist",(g=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:g})});cb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});cb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&
this.app.appRedo&&this.app.appRedo()});cb(this,"instantiateShape",g=>new (this.app.getShapeClass(g.type))(g));cb(this,"deserialize",g=>{Id(()=>{var m,{pages:G}=g;const V=this.isPaused;this.pause();const ka=[...this.app.selectedIds];try{const qa=new Map(this.app.pages),Ia=[];for(const Ta of G){const Xa=qa.get(Ta.id);if(void 0!==Xa){const ib=new Map(Xa.shapes.map(vb=>[vb.props.id,vb]));G=[];for(const vb of Ta.shapes){const Lb=ib.get(vb.id);void 0!==Lb?(Lb.nonce!==vb.nonce&&(Lb.update(vb,!0),Lb.nonce=
vb.nonce,Lb.setLastSerialized(vb)),ib.delete(vb.id)):G.push(this.instantiateShape(vb))}0<ib.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&Xa.removeShapes(...ib.values());0<G.length&&Xa.addShapes(...G);qa.delete(Ta.id);Xa.updateBindings(Ta.bindings);Xa.nonce=null!=(m=Ta.nonce)?m:0}else{const {id:ib,name:vb,shapes:Lb,bindings:cc,nonce:Tb}=Ta;Ia.push(new om(this.app,{id:ib,name:vb,nonce:Tb,bindings:cc,shapes:Lb.map(kc=>this.instantiateShape(kc))}))}}0<Ia.length&&this.app.addPages(Ia);
0<qa.size&&this.app.removePages(Array.from(qa.values()));this.app.setSelectedShapes(ka).setErasingShapes([])}catch(qa){console.warn(qa)}V||this.resume()})});this.app=b;sg(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};rd([Yd],Fr.prototype,"stack",2);rd([hg],Fr.prototype,"persist",2);rd([hg],Fr.prototype,"undo",2);rd([hg],Fr.prototype,"redo",2);rd([hg],Fr.prototype,"deserialize",2);var Ps=class{constructor(){cb(this,"mode","light");cb(this,"showGrid",!0);cb(this,"color",
"");sg(this)}update(b){Object.assign(this,b)}};rd([Yd],Ps.prototype,"mode",2);rd([Yd],Ps.prototype,"showGrid",2);rd([Yd],Ps.prototype,"color",2);rd([hg],Ps.prototype,"update",1);var dh=class extends rr{constructor(b,g,m,G){var V,ka;super();cb(this,"keybindingRegistered",!1);cb(this,"uuid",Zk());cb(this,"readOnly");cb(this,"api");cb(this,"inputs",new Qk);cb(this,"cursors",new Er);cb(this,"viewport",new Fo);cb(this,"settings",new Ps);cb(this,"Tools",[]);cb(this,"history",new Fr(this));cb(this,"persist",
this.history.persist);cb(this,"undo",this.history.undo);cb(this,"redo",this.history.redo);cb(this,"saving",!1);cb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});cb(this,"load",()=>{this.notify("load",null);return this});cb(this,"save",()=>{this.notify("save",null);return this});cb(this,"saveAs",()=>{this.notify("saveAs",null);return this});cb(this,"pages",new Map([["page",new om(this,{id:"page",name:"page",
shapes:[],bindings:{}})]]));cb(this,"getPageById",qa=>{const Ia=this.pages.get(qa);if(!Ia)throw Error(`Could not find a page named ${qa}.`);return Ia});cb(this,"getShapeById",(qa,Ia=this.currentPage.id)=>{var Ta;return null==(Ta=this.getPageById(Ia))?void 0:Ta.shapesById[qa]});cb(this,"createShapes",qa=>{if(this.readOnly)return this;(qa=this.currentPage.addShapes(...qa))&&this.notify("create-shapes",qa);this.persist();return this});cb(this,"updateShapes",qa=>{if(this.readOnly)return this;qa.forEach(Ia=>
{var Ta;return null==(Ta=this.getShapeById(Ia.id))?void 0:Ta.update(Ia)});this.persist();return this});cb(this,"deleteShapes",qa=>{if(0===qa.length||this.readOnly)return this;qa=qa.map(ib=>"string"===typeof ib?this.getShapeById(ib):ib).filter(oi);const Ia=this.shapesInGroups(qa);qa.forEach(ib=>{this.getParentGroup(ib)&&Ia.push(ib)});let Ta=new Set([...qa,...Ia].map(ib=>ib.id));Ia.forEach(ib=>{var vb;const Lb=this.getParentGroup(ib);if(Lb){const cc=null==(vb=Lb.props.children)?void 0:vb.filter(Tb=>
Tb!==ib.id);!cc||1>=(null==cc?void 0:cc.length)?Ta.add(Lb.id):Lb.update({children:cc})}});const Xa=(ib,vb)=>{var Lb;[...Ta].includes(ib)&&"line"===(null==(Lb=this.getShapeById(vb))?void 0:Lb.type)&&Ta.add(vb)};this.currentPage.shapes.flatMap(ib=>{var vb;return Object.values(null!=(vb=ib.props.handles)?vb:{})}).flatMap(ib=>ib.bindingId).filter(oi).map(ib=>{var vb,Lb;const cc=null==(vb=this.currentPage.bindings[ib])?void 0:vb.toId;ib=null==(Lb=this.currentPage.bindings[ib])?void 0:Lb.fromId;cc&&ib&&
(Xa(cc,ib),Xa(ib,cc))});qa=[...Ta].map(ib=>this.getShapeById(ib));this.setSelectedShapes(this.selectedShapesArray.filter(ib=>!Ta.has(ib.id)));(qa=this.currentPage.removeShapes(...qa))&&this.notify("delete-shapes",qa);this.persist();return this});cb(this,"bringForward",(qa=this.selectedShapesArray)=>{0<qa.length&&!this.readOnly&&this.currentPage.bringForward(qa);return this});cb(this,"sendBackward",(qa=this.selectedShapesArray)=>{0<qa.length&&!this.readOnly&&this.currentPage.sendBackward(qa);return this});
cb(this,"sendToBack",(qa=this.selectedShapesArray)=>{0<qa.length&&!this.readOnly&&this.currentPage.sendToBack(qa);return this});cb(this,"bringToFront",(qa=this.selectedShapesArray)=>{0<qa.length&&!this.readOnly&&this.currentPage.bringToFront(qa);return this});cb(this,"flipHorizontal",(qa=this.selectedShapesArray)=>{this.currentPage.flip(qa,"horizontal");return this});cb(this,"flipVertical",(qa=this.selectedShapesArray)=>{this.currentPage.flip(qa,"vertical");return this});cb(this,"align",(qa,Ia=this.selectedShapesArray)=>
{if(2>Ia.length||this.readOnly)return this;const Ta=Ia.map(cc=>{const Tb=cc.getBounds();return{id:cc.id,point:[Tb.minX,Tb.minY],bounds:Tb}}),Xa=sf.getCommonBounds(Ta.map(({bounds:cc})=>cc)),ib=Xa.minX+Xa.width/2,vb=Xa.minY+Xa.height/2,Lb=Object.fromEntries(Ta.map(({id:cc,point:Tb,bounds:kc})=>[cc,{prev:Tb,next:{top:[Tb[0],Xa.minY],centerVertical:[Tb[0],vb-kc.height/2],bottom:[Tb[0],Xa.maxY-kc.height],left:[Xa.minX,Tb[1]],centerHorizontal:[ib-kc.width/2,Tb[1]],right:[Xa.maxX-kc.width,Tb[1]]}[qa]}]));
Ia.forEach(cc=>{Lb[cc.id]&&cc.update({point:Lb[cc.id].next})});this.persist();return this});cb(this,"distribute",(qa,Ia=this.selectedShapesArray)=>{if(2>Ia.length||this.readOnly)return this;const Ta=Object.fromEntries(sf.getDistributions(Ia,qa).map(Xa=>[Xa.id,Xa]));Ia.forEach(Xa=>{Ta[Xa.id]&&Xa.update({point:Ta[Xa.id].next})});this.persist();return this});cb(this,"packIntoRectangle",(qa=this.selectedShapesArray)=>{if(2>qa.length||this.readOnly)return this;const Ia=Object.fromEntries(sf.getPackedDistributions(qa).map(Ta=>
[Ta.id,Ta]));qa.forEach(Ta=>{Ia[Ta.id]&&Ta.update({point:Ia[Ta.id].next})});this.persist();return this});cb(this,"assets",{});cb(this,"removeUnusedAssets",()=>{const qa=this.getCleanUpAssets();Object.keys(this.assets).forEach(Ia=>{qa.some(Ta=>Ta.id===Ia)||delete this.assets[Ia]});this.persist();return this});cb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const Ia=this.allSelectedShapesArray;var qa=JSON.stringify({shapes:Ia.map(Xa=>Xa.serialized),assets:this.getCleanUpAssets().filter(Xa=>
Ia.some(ib=>ib.props.assetId===Xa.id)),bindings:Ec(this.currentPage.bindings)});qa=encodeURIComponent(`<whiteboard-tldr>${qa}</whiteboard-tldr>`);const Ta=this.selectedShapesArray.map(Xa=>`((${Xa.props.id}))`).join(" ");this.notify("copy",{text:Ta,html:qa})}});cb(this,"paste",(qa,Ia)=>{var Ta;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!Ia,dataTransfer:null!=(Ta=null==qa?void 0:qa.clipboardData)?Ta:void 0})});cb(this,"cut",()=>{this.copy();this.api.deleteShapes()});
cb(this,"drop",(qa,Ia)=>{this.notify("drop",{dataTransfer:qa,point:Ia?this.viewport.getPagePoint(Ia):sf.getBoundsCenter(this.viewport.currentView)})});cb(this,"selectTool",(qa,Ia={})=>{this.readOnly&&!["select","move"].includes(qa)||this.transition(qa,Ia)});cb(this,"editingId");cb(this,"setEditingShape",qa=>{this.editingId="string"===typeof qa?qa:null==qa?void 0:qa.id;return this});cb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});cb(this,"hoveredId");
cb(this,"setHoveredShape",qa=>{this.hoveredId="string"===typeof qa?qa:null==qa?void 0:qa.id;return this});cb(this,"selectedIds",new Set);cb(this,"selectedShapes",new Set);cb(this,"selectionRotation",0);cb(this,"setSelectedShapes",qa=>{var Ia;const {selectedIds:Ta,selectedShapes:Xa}=this;Ta.clear();Xa.clear();qa[0]&&"string"===typeof qa[0]?qa.forEach(vb=>Ta.add(vb)):qa.forEach(vb=>Ta.add(vb.id));const ib=this.currentPage.shapes.filter(vb=>Ta.has(vb.id));ib.forEach(vb=>Xa.add(vb));this.selectionRotation=
1===ib.length?null!=(Ia=ib[0].props.rotation)?Ia:0:0;0===qa.length&&this.setEditingShape();return this});cb(this,"erasingIds",new Set);cb(this,"erasingShapes",new Set);cb(this,"setErasingShapes",qa=>{const {erasingIds:Ia,erasingShapes:Ta}=this;Ia.clear();Ta.clear();qa[0]&&"string"===typeof qa[0]?qa.forEach(Xa=>Ia.add(Xa)):qa.forEach(Xa=>Ia.add(Xa.id));this.currentPage.shapes.filter(Xa=>Ia.has(Xa.id)).forEach(Xa=>Ta.add(Xa));return this});cb(this,"bindingIds");cb(this,"setBindingShapes",qa=>{this.bindingIds=
qa;return this});cb(this,"clearBindingShape",()=>this.setBindingShapes());cb(this,"createNewLineBinding",(qa,Ia)=>{qa="string"===typeof qa?this.getShapeById(qa):qa;Ia="string"===typeof Ia?this.getShapeById(Ia):Ia;if((null==qa?0:qa.canBind)&&(null==Ia?0:Ia.canBind)&&(Ia=pd(qa,Ia))){const [Ta,Xa]=Ia;this.createShapes([Ta]);this.currentPage.updateBindings(Object.fromEntries(Xa.map(ib=>[ib.id,ib])));this.persist();return!0}return!1});cb(this,"brush");cb(this,"setBrush",qa=>{this.brush=qa;return this});
cb(this,"setCamera",(qa,Ia)=>{this.viewport.update({point:qa,zoom:Ia});return this});cb(this,"getPagePoint",qa=>{const {camera:Ia}=this.viewport;return Jd.sub(Jd.div(qa,Ia.zoom),Ia.point)});cb(this,"getScreenPoint",qa=>{const {camera:Ia}=this.viewport;return Jd.mul(Jd.add(qa,Ia.point),Ia.zoom)});cb(this,"Shapes",new Map);cb(this,"registerShapes",qa=>{qa.forEach(Ia=>{if("group"===Ia.id){const Ta=this;Ia.prototype.getShapes=function(){var Xa,ib;return null!=(ib=null==(Xa=this.props.children)?void 0:
Xa.map(vb=>Ta.getShapeById(vb)).filter(Boolean))?ib:[]}}return this.Shapes.set(Ia.id,Ia)})});cb(this,"deregisterShapes",qa=>{qa.forEach(Ia=>this.Shapes.delete(Ia.id))});cb(this,"getShapeClass",qa=>{if(!qa)throw Error("No shape type provided.");const Ia=this.Shapes.get(qa);if(!Ia)throw Error(`Could not find shape class for ${qa}`);return Ia});cb(this,"wrapUpdate",qa=>{Id(()=>{const Ia=!this.history.isPaused;Ia&&this.history.pause();qa();Ia&&(this.history.resume(),this.persist())})});cb(this,"subscriptions",
new Set([]));cb(this,"subscribe",(qa,Ia)=>{if(void 0===Ia)throw Error("Callback is required.");const Ta={event:qa,callback:Ia};this.subscriptions.add(Ta);return()=>this.unsubscribe(Ta)});cb(this,"unsubscribe",qa=>{this.subscriptions.delete(qa);return this});cb(this,"notify",(qa,Ia)=>{this.subscriptions.forEach(Ta=>{Ta.event===qa&&Ta.callback(this,Ia)});return this});cb(this,"onTransition",()=>{});cb(this,"onPointerDown",(qa,Ia)=>{if(!this.editingShape&&1===Ia.button&&!this.isIn("move"))this.temporaryTransitionToMove(Ia);
else if(2===Ia.button&&!this.editingShape)Ia.preventDefault(),this.transition("select");else if("clientX"in Ia)this.inputs.onPointerDown([...this.viewport.getPagePoint([Ia.clientX,Ia.clientY]),.5],Ia)});cb(this,"onPointerUp",(qa,Ia)=>{if(!this.editingShape&&1===Ia.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ia.stopPropagation(),Ia.preventDefault();else if("clientX"in Ia)this.inputs.onPointerUp([...this.viewport.getPagePoint([Ia.clientX,Ia.clientY]),.5],Ia)});cb(this,"onPointerMove",
(qa,Ia)=>{if("clientX"in Ia)this.inputs.onPointerMove([...this.viewport.getPagePoint([Ia.clientX,Ia.clientY]),.5],Ia)});cb(this,"onKeyDown",(qa,Ia)=>{if(this.editingShape||" "!==Ia.key||this.isIn("move"))this.inputs.onKeyDown(Ia);else this.temporaryTransitionToMove(Ia)});cb(this,"onKeyUp",(qa,Ia)=>{if(!this.editingShape&&" "===Ia.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ia.stopPropagation(),Ia.preventDefault();else this.inputs.onKeyUp(Ia)});cb(this,"onPinchStart",(qa,
Ia)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(qa.point),.5],Ia)});cb(this,"onPinch",(qa,Ia)=>{this.inputs.onPinch([...this.viewport.getPagePoint(qa.point),.5],Ia)});cb(this,"onPinchEnd",(qa,Ia)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(qa.point),.5],Ia)});this._states=[or,Hr];this.readOnly=G;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),G=null!=(V=this.initial)?V:this.states[0].id,V=this.children.get(G))&&(this.currentState=
V,null==(ka=this.currentState)?void 0:ka._events.onEnter({fromId:"initial"}));g&&this.registerShapes(g);m&&this.registerTools(m);this.history.resume();b&&this.history.deserialize(b);this.api=new TC(this);sg(this);this.notify("mount",null)}dispose(){super.dispose();this.keybindingRegistered=!1;return this}initKeyboardShortcuts(){if(!this.keybindingRegistered){var b=this.constructor.shortcuts||[],g=Array.from(this.children.values()).filter(m=>m.constructor.shortcut).map(m=>({keys:m.constructor.shortcut,
fn:(G,V,ka)=>{this.selectTool(m.id)}}));this._disposables.push(...[{keys:"shift+0",fn:()=>this.api.resetZoom()},{keys:"shift+1",fn:()=>this.api.zoomToFit()},{keys:"mod+shift+1",fn:()=>this.api.zoomToSelection()},{keys:"mod+-",fn:()=>this.api.zoomOut()},{keys:"mod+\x3d",fn:()=>this.api.zoomIn()},{keys:"mod+x",fn:()=>this.cut()},{keys:"[",fn:()=>this.sendBackward()},{keys:"shift+[",fn:()=>this.sendToBack()},{keys:"]",fn:()=>this.bringForward()},{keys:"shift+]",fn:()=>this.bringToFront()},{keys:"mod+a",
fn:()=>{const {selectedTool:m}=this;"select"!==m.id&&this.selectTool("select");this.api.selectAll()}},{keys:"mod+shift+s",fn:()=>{this.saveAs();this.notify("saveAs",null)}},{keys:"mod+shift+v",fn:(m,G,V)=>{this.editingShape||(V.preventDefault(),this.paste(void 0,!0))}},{keys:["del","backspace"],fn:()=>{this.editingShape||(this.api.deleteShapes(),this.selectedTool.transition("idle"))}},{keys:"mod+g",fn:()=>{this.api.doGroup()}},{keys:"mod+shift+g",fn:()=>{this.api.unGroup()}},{keys:"shift+g",fn:()=>
{this.api.toggleGrid()}},...b,...g].map(({keys:m,fn:G})=>lr.registerShortcut(m,V=>{G(this,this,V)})));this.keybindingRegistered=!0}}loadDocumentModel(b){this.history.deserialize(b);b.assets&&0<b.assets.length&&this.addAssets(b.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(b){b.forEach(g=>this.pages.set(g.id,g));this.persist();return this}removePages(b){b.forEach(g=>this.pages.delete(g.id));
this.persist();return this}shapesInGroups(b=this.shapes){return b.flatMap(g=>g.props.children).filter(oi).map(g=>this.getShapeById(g)).filter(oi)}getParentGroup(b){return this.shapes.find(g=>{var m;return null==(m=g.props.children)?void 0:m.includes(b.id)})}addAssets(b){b.forEach(g=>this.assets[g.id]=g);this.persist();return this}removeAssets(b){"string"===typeof b[0]?b.forEach(g=>delete this.assets[g]):b.forEach(g=>delete this.assets[g.id]);this.persist();return this}getCleanUpAssets(){const b=new Set;
this.pages.forEach(g=>g.shapes.forEach(m=>{m.props.assetId&&this.assets[m.props.assetId]&&b.add(this.assets[m.props.assetId])}));return Array.from(b)}createAssets(b){this.addAssets(b);this.notify("create-assets",{assets:b});this.persist();return this}get selectedTool(){return this.currentState}registerTools(b){this.Tools=b;return this.registerStates(b)}get editingShape(){const {editingId:b,currentPage:g}=this;return b?g.shapes.find(m=>m.id===b):void 0}get hoveredShape(){const {hoveredId:b,currentPage:g}=
this;return b?g.shapes.find(m=>m.id===b):void 0}get hoveredGroup(){const {hoveredShape:b}=this;return b?this.shapes.find(g=>{var m;return"group"===g.type&&(null==(m=g.props.children)?void 0:m.includes(b.id))}):void 0}get selectedShapesArray(){const {selectedShapes:b,selectedTool:g}=this;return"select"!==g.id?[]:Array.from(b.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:b}=this;return[...(new Set([...b,...this.shapesInGroups(b)]))]}setSelectionRotation(b){this.selectionRotation=
b}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var b;const g=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(G=>{var V;return Object.values(null!=(V=G.props.handles)?V:{})}).flatMap(G=>G.bindingId).filter(oi).flatMap(G=>{var V,ka;return[null==(V=this.currentPage.bindings[G])?void 0:V.fromId,null==(ka=this.currentPage.bindings[G])?void 0:ka.toId]}).filter(oi):[],m=[...(null!=(b=this.bindingIds)?b:[]),...g];return m?this.currentPage.shapes.filter(G=>
null==m?void 0:m.includes(G.id)):void 0}get currentGrid(){const {zoom:b}=this.viewport.camera;return.15>b?128:1>b?32:8}get shapes(){const {currentPage:{shapes:b}}=this;return Array.from(b.values())}get shapesInViewport(){const {selectedShapes:b,currentPage:g,viewport:{currentView:m}}=this;return g.shapes.filter(G=>!G.canUnmount||b.has(G)||sf.boundsContain(m,G.rotatedBounds)||sf.boundsCollide(m,G.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:b,viewport:{currentView:g}}=this;if(b&&
!sf.boundsContain(g,b)&&!sf.boundsCollide(g,b)){var m=sf.getBoundsCenter(b);return Jd.clampV([(m[0]-g.minX-g.width/2)/g.width,(m[1]-g.minY-g.height/2)/g.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:b}=this;if(0!==b.length)return 1===b.length?Jc(oc({},b[0].bounds),{rotation:b[0].props.rotation}):sf.getCommonBounds(this.selectedShapesArray.map(g=>g.rotatedBounds))}get showSelection(){var b;const {selectedShapesArray:g}=this;return this.isIn("select")&&!this.isInAny("select.translating",
"select.pinching","select.rotating")&&(1===g.length&&!(null==(b=g[0])?0:b.hideSelection)||1<g.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(b=>b.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<b.length&&!this.readOnly&&!b.every(g=>g.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<b.length&&!this.readOnly&&!b.some(g=>g.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape",
"select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===b.length&&!this.readOnly&&!b.every(g=>g.hideResizeHandles)}temporaryTransitionToMove(b){b.stopPropagation();b.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};cb(dh,"id","app");cb(dh,"initial","select");rd([pe],dh.prototype,"serialized",1);rd([Yd],dh.prototype,"pages",2);rd([pe],dh.prototype,"currentPageId",1);rd([pe],dh.prototype,"currentPage",
1);rd([hg],dh.prototype,"addPages",1);rd([hg],dh.prototype,"removePages",1);rd([hg],dh.prototype,"createShapes",2);rd([hg],dh.prototype,"updateShapes",2);rd([hg],dh.prototype,"deleteShapes",2);rd([Yd],dh.prototype,"assets",2);rd([hg],dh.prototype,"addAssets",1);rd([hg],dh.prototype,"removeAssets",1);rd([hg],dh.prototype,"removeUnusedAssets",2);rd([pe],dh.prototype,"selectedTool",1);rd([Yd],dh.prototype,"editingId",2);rd([pe],dh.prototype,"editingShape",1);rd([hg],dh.prototype,"setEditingShape",2);
rd([Yd],dh.prototype,"hoveredId",2);rd([pe],dh.prototype,"hoveredShape",1);rd([pe],dh.prototype,"hoveredGroup",1);rd([hg],dh.prototype,"setHoveredShape",2);rd([Yd],dh.prototype,"selectedIds",2);rd([Yd],dh.prototype,"selectedShapes",2);rd([Yd],dh.prototype,"selectionRotation",2);rd([pe],dh.prototype,"selectedShapesArray",1);rd([pe],dh.prototype,"allSelectedShapes",1);rd([pe],dh.prototype,"allSelectedShapesArray",1);rd([hg],dh.prototype,"setSelectedShapes",2);rd([hg],dh.prototype,"setSelectionRotation",
1);rd([Yd],dh.prototype,"erasingIds",2);rd([Yd],dh.prototype,"erasingShapes",2);rd([pe],dh.prototype,"erasingShapesArray",1);rd([hg],dh.prototype,"setErasingShapes",2);rd([Yd],dh.prototype,"bindingIds",2);rd([pe],dh.prototype,"bindingShapes",1);rd([hg],dh.prototype,"setBindingShapes",2);rd([hg],dh.prototype,"createNewLineBinding",2);rd([Yd],dh.prototype,"brush",2);rd([hg],dh.prototype,"setBrush",2);rd([hg],dh.prototype,"setCamera",2);rd([pe],dh.prototype,"currentGrid",1);rd([pe],dh.prototype,"shapes",
1);rd([pe],dh.prototype,"shapesInViewport",1);rd([pe],dh.prototype,"selectionDirectionHint",1);rd([pe],dh.prototype,"selectionBounds",1);rd([pe],dh.prototype,"showSelection",1);rd([pe],dh.prototype,"showSelectionDetail",1);rd([pe],dh.prototype,"showSelectionRotation",1);rd([pe],dh.prototype,"showContextBar",1);rd([pe],dh.prototype,"showRotateHandles",1);rd([pe],dh.prototype,"showResizeHandles",1);var UC=Function.prototype.toString,Av=Object.create,PC=Object.prototype.toString,QC=function(){function b(){this._keys=
[];this._values=[]}b.prototype.has=function(g){return!!~this._keys.indexOf(g)};b.prototype.get=function(g){return this._values[this._keys.indexOf(g)]};b.prototype.set=function(g,m){this._keys.push(g);this._values.push(m)};return b}(),PD="undefined"!==typeof WeakMap?We:we,XC="g"===/test/g.flags?Df:bg,WC="undefined"!==typeof Symbol?Rf:wf,VC=Object.defineProperty,QD=Object.getOwnPropertyDescriptor,bz=Object.getOwnPropertyNames,Hv=Object.getOwnPropertySymbols,vy=Object.prototype,wy=vy.hasOwnProperty,
cD=vy.propertyIsEnumerable,uy="function"===typeof Hv,dD=uy?Pg:bz,aD=Array.isArray,Bv=Object.assign,bD=Object.getPrototypeOf,xy={array:function(b,g){var m=new g.Constructor;g.cache.set(b,m);for(var G=0,V=b.length;G<V;++G)m[G]=g.copier(b[G],g);return m},arrayBuffer:function(b,g){return b.slice(0)},blob:function(b,g){return b.slice(0,b.size,b.type)},dataView:function(b,g){return new g.Constructor(b.buffer.slice(0))},date:function(b,g){return new g.Constructor(b.getTime())},error:Uh,map:uh,object:uy?
di:ni,regExp:function(b,g){g=new g.Constructor(b.source,XC(b));g.lastIndex=b.lastIndex;return g},set:gf},$C=Bv({},xy,{array:function(b,g){var m=new g.Constructor;g.cache.set(b,m);return ji(b,m,g)},map:function(b,g){return ji(b,uh(b,g),g)},object:function(b,g){var m=Hf(g.prototype);g.cache.set(b,m);return ji(b,m,g)},set:function(b,g){return ji(b,gf(b,g),g)}});Vh(Bv({},$C,{}));var ZC=Vh({});Wd(Hk());var YC=Wd(Yh()),Sq=ZC,Un=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||
0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const m=b.ownerDocument,G=m.activeElement;G!==b&&b.focus();m.execCommand("insertText",!1,g)||Un.insertTextFirefox(b,g);G===m.body?b.blur():G instanceof HTMLElement&&G!==b&&G.focus()}static set(b,g){b.select();Un.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:m}=b;return b.value.slice(g?g:void 0,m?m:void 0)}static wrapSelection(b,g,m){const {selectionStart:G,
selectionEnd:V}=b,ka=Un.getSelection(b);Un.insert(b,g+ka+(null!=m?m:g));b.selectionStart=(G||0)+g.length;b.selectionEnd=(V||0)+g.length}static replace(b,g,m){let G=0;b.value.replace(g,(...V)=>{const ka=G+V[V.length-2],qa=V[0].length;b.selectionStart=ka;b.selectionEnd=ka+qa;V="string"===typeof m?m:m(...V);Un.insert(b,V);b.selectionStart=ka;G+=V.length-qa;return V})}static findLineEnd(b,g){const m=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(m)?g:m+1}static indent(b){var g;const {selectionStart:m,
selectionEnd:G,value:V}=b;var ka=V.slice(m,G);if((ka=null==(g=/\n/g.exec(ka))?void 0:g.length)&&0<ka){g=V.lastIndexOf("\n",m-1)+1;var qa=b.value.slice(g,G-1);ka=qa.replace(/^|\n/g,`$&${Un.INDENT}`);qa=ka.length-qa.length;b.setSelectionRange(g,G-1);Un.insert(b,ka);b.setSelectionRange(m+1,G+qa)}else Un.insert(b,Un.INDENT)}static unindent(b){const {selectionStart:g,selectionEnd:m,value:G}=b;var V=G.lastIndexOf("\n",g-1)+1;const ka=Un.findLineEnd(G,m);var qa=b.value.slice(V,ka);const Ia=qa.replace(/(^|\n)(\t| {1,2})/g,
"$1");qa=qa.length-Ia.length;b.setSelectionRange(V,ka);Un.insert(b,Ia);V=(V=/\t| {1,2}/.exec(G.slice(V,g)))?V[0].length:0;b.setSelectionRange(g-V,Math.max(g-V,m-qa))}static normalizeText(b){return b.replace(Un.fixNewLines,"\n")}},Rq=Un;cb(Rq,"fixNewLines",/\r?\n|\r/g);cb(Rq,"INDENT","  ");var Wp;"undefined"!==typeof window&&(Wp=Bk());var Iv=new Map,Ho=Ck()?"":"Ctrl",qD=class extends dh{},Iy=Wd(W(22)),rD=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var Jy=Wd(W(22)),Dv={},Ts=Wd(W(22)),
sD=b=>{for(b=b.parentElement;b&&b!==document.body;){const {overflowY:g}=window.getComputedStyle(b);if(b.scrollHeight>b.clientHeight&&("auto"===g||"scroll"===g||"overlay"===g))return b;b=b.parentElement}return document},Ev=Wd(W(22)),Fv=new Map,tD={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",
background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},uD=((b,...g)=>b.reduce((m,G,V)=>m+G+(V<g.length?g[V]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,Ly=Wd(W(22)),Ky=Wd(W(22)),Cv={},Rk={toVector(b,g){void 0===b&&(b=g);return Array.isArray(b)?b:[b,b]},add(b,g){return[b[0]+g[0],b[1]+g[1]]},sub(b,g){return[b[0]-g[0],b[1]-g[1]]},addTo(b,g){b[0]+=g[0];b[1]+=g[1]},subTo(b,g){b[0]-=g[0];b[1]-=g[1]}},Hy={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},oD=["enter","leave"],pD=["gotpointercapture","lostpointercapture"],
Gy=class{constructor(b,g,m){this.ctrl=b;this.args=g;this.key=m;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(b){this.ctrl.state[this.key]=b}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:b,
shared:g,ingKey:m,args:G}=this;g[m]=b._active=b.active=b._blocked=b._force=!1;b._step=[!1,!1];b.intentional=!1;b._movement=[0,0];b._distance=[0,0];b._direction=[0,0];b._delta=[0,0];b._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];b.args=G;b.axis=void 0;b.memo=void 0;b.elapsedTime=0;b.direction=[0,0];b.distance=[0,0];b.overflow=[0,0];b._movementBound=[!1,!1];b.velocity=[0,0];b.movement=[0,0];b.delta=[0,0];b.timeStamp=0}start(b){const g=this.state,m=this.config;g._active||(this.reset(),this.computeInitial(),
g._active=!0,g.target=b.target,g.currentTarget=b.currentTarget,g.lastOffset=m.from?Pi(m.from,g):g.offset,g.offset=g.lastOffset);g.startTime=g.timeStamp=b.timeStamp}computeValues(b){const g=this.state;g._values=b;g.values=this.config.transform(b)}computeInitial(){const b=this.state;b._initial=b._values;b.initial=b.values}compute(b){const {state:g,config:m,shared:G}=this;g.args=this.args;var V=0;if(b){g.event=b;m.preventDefault&&b.cancelable&&g.event.preventDefault();g.type=b.type;G.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;G.locked=!!document.pointerLockElement;V=Object;var ka=V.assign,qa={};"buttons"in b&&(qa.buttons=b.buttons);if("shiftKey"in b){const {shiftKey:Sc,altKey:Xc,metaKey:Xd,ctrlKey:ce}=b;Object.assign(qa,{shiftKey:Sc,altKey:Xc,metaKey:Xd,ctrlKey:ce})}ka.call(V,G,qa);G.down=G.pressed=1===G.buttons%2||0<G.touches;V=b.timeStamp-g.timeStamp;g.timeStamp=b.timeStamp;g.elapsedTime=g.timeStamp-g.startTime}g._active&&(ka=g._delta.map(Math.abs),Rk.addTo(g._distance,ka));this.axisIntent&&this.axisIntent(b);
const [Ia,Ta]=g._movement,[Xa,ib]=m.threshold,{_step:vb,values:Lb}=g;m.hasCustomTransform?(!1===vb[0]&&(vb[0]=Math.abs(Ia)>=Xa&&Lb[0]),!1===vb[1]&&(vb[1]=Math.abs(Ta)>=ib&&Lb[1])):(!1===vb[0]&&(vb[0]=Math.abs(Ia)>=Xa&&Math.sign(Ia)*Xa),!1===vb[1]&&(vb[1]=Math.abs(Ta)>=ib&&Math.sign(Ta)*ib));g.intentional=!1!==vb[0]||!1!==vb[1];if(g.intentional){ka=[0,0];if(m.hasCustomTransform){const [Sc,Xc]=Lb;ka[0]=!1!==vb[0]?Sc-vb[0]:0;ka[1]=!1!==vb[1]?Xc-vb[1]:0}else ka[0]=!1!==vb[0]?Ia-vb[0]:0,ka[1]=!1!==vb[1]?
Ta-vb[1]:0;this.restrictToAxis&&!g._blocked&&this.restrictToAxis(ka);qa=g.offset;var cc=g._active&&!g._blocked||g.active;cc&&(g.first=g._active&&!g.active,g.last=!g._active&&g.active,g.active=G[this.ingKey]=g._active,b&&(g.first&&("bounds"in m&&(g._bounds=Pi(m.bounds,g)),this.setup&&this.setup()),g.movement=ka,this.computeOffset()));var [Tb,kc]=g.offset,[[mc,Vb],[tc,Ic]]=g._bounds;g.overflow=[Tb<mc?-1:Tb>Vb?1:0,kc<tc?-1:kc>Ic?1:0];g._movementBound[0]=g.overflow[0]?!1===g._movementBound[0]?g._movement[0]:
g._movementBound[0]:!1;g._movementBound[1]=g.overflow[1]?!1===g._movementBound[1]?g._movement[1]:g._movementBound[1]:!1;g.offset=Di(g._bounds,g.offset,g._active?m.rubberband||[0,0]:[0,0]);g.delta=Rk.sub(g.offset,qa);this.computeMovement();cc&&(!g.last||32<V)&&(g.delta=Rk.sub(g.offset,qa),b=g.delta.map(Math.abs),Rk.addTo(g.distance,b),g.direction=g.delta.map(Math.sign),g._direction=g._delta.map(Math.sign),!g.first&&0<V&&(g.velocity=[b[0]/V,b[1]/V]))}}emit(){const b=this.state;var g=this.shared;const m=
this.config;b._active||this.clean();if(!b._blocked&&b.intentional||b._force||m.triggerAllEvents)g=this.handler(Ag(Ag(Ag({},g),b),{},{[this.aliasKey]:b.values})),void 0!==g&&(b.memo=g)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Rs=class extends Gy{constructor(...b){super(...b);Mh(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Rk.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
Rk.sub(this.state.offset,this.state.lastOffset)}axisIntent(b){const g=this.state,m=this.config;!g.axis&&b&&(b="object"===typeof m.axisThreshold?m.axisThreshold[Vk(b)]:m.axisThreshold,g.axis=ti(g._movement,b));g._blocked=(m.lockDirection||!!m.axis)&&!g.axis||!!m.axis&&m.axis!==g.axis}restrictToAxis(b){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":b[1]=0;break;case "y":b[0]=0}}},mD=b=>b,Dy={enabled(b=!0){return b},eventOptions(b,g,m){return Ag(Ag({},m.shared.eventOptions),
b)},preventDefault(b=!1){return b},triggerAllEvents(b=!1){return b},rubberband(b=0){switch(b){case !0:return[.15,.15];case !1:return[0,0];default:return Rk.toVector(b)}},from(b){if("function"===typeof b)return b;if(null!=b)return Rk.toVector(b)},transform(b,g,m){b=b||m.shared.transform;this.hasCustomTransform=!!b;return b||mD},threshold(b){return Rk.toVector(b,0)}},Uq=Ag(Ag({},Dy),{},{axis(b,g,{axis:m}){this.lockDirection="lock"===m;if(!this.lockDirection)return m},axisThreshold(b=0){return b},bounds(b=
{}){if("function"===typeof b)return ka=>Uq.bounds(b(ka));if("current"in b)return()=>b.current;if("function"===typeof HTMLElement&&b instanceof HTMLElement)return b;const {left:g=-Infinity,right:m=Infinity,top:G=-Infinity,bottom:V=Infinity}=b;return[[g,m],[G,V]]}}),Cy={ArrowRight:(b=1)=>[10*b,0],ArrowLeft:(b=1)=>[-10*b,0],ArrowUp:(b=1)=>[0,-10*b],ArrowDown:(b=1)=>[0,10*b]},kD=class extends Rs{constructor(...b){super(...b);Mh(this,"ingKey","dragging")}reset(){super.reset();const b=this.state;b._pointerId=
void 0;b._pointerActive=!1;b._keyboardActive=!1;b._preventScroll=!1;b._delayed=!1;b.swipe=[0,0];b.tap=!1;b.canceled=!1;b.cancel=this.cancel.bind(this)}setup(){const b=this.state;if(b._bounds instanceof HTMLElement){const g=b._bounds.getBoundingClientRect(),m=b.currentTarget.getBoundingClientRect();b._bounds=Uq.bounds({left:g.left-m.left+b.offset[0],right:g.right-m.right+b.offset[0],top:g.top-m.top+b.offset[1],bottom:g.bottom-m.bottom+b.offset[1]})}}cancel(){const b=this.state;b.canceled||(b.canceled=
!0,b._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(b){const g=this.config,m=this.state;if(null==b.buttons||(Array.isArray(g.pointerButtons)?g.pointerButtons.includes(b.buttons):-1===g.pointerButtons||g.pointerButtons===b.buttons)){var G=this.ctrl.setEventIds(b);g.pointerCapture&&b.target.setPointerCapture(b.pointerId);
G&&1<G.size&&m._pointerActive||(this.start(b),this.setupPointer(b),m._pointerId=zi(b),m._pointerActive=!0,this.computeValues(mj(b)),this.computeInitial(),g.preventScrollAxis&&"mouse"!==Vk(b)?(m._active=!1,this.setupScrollPrevention(b)):0<g.delay?(this.setupDelayTrigger(b),g.triggerAllEvents&&(this.compute(b),this.emit())):this.startPointerDrag(b))}}startPointerDrag(b){const g=this.state;g._active=!0;g._preventScroll=!0;g._delayed=!1;this.compute(b);this.emit()}pointerMove(b){const g=this.state,m=
this.config;if(g._pointerActive&&(g.type!==b.type||b.timeStamp!==g.timeStamp)){var G=zi(b);if(void 0===g._pointerId||G===g._pointerId)G=mj(b),document.pointerLockElement===b.target?g._delta=[b.movementX,b.movementY]:(g._delta=Rk.sub(G,g._values),this.computeValues(G)),Rk.addTo(g._movement,g._delta),this.compute(b),g._delayed&&g.intentional?(this.timeoutStore.remove("dragDelay"),g.active=!1,this.startPointerDrag(b)):m.preventScrollAxis&&!g._preventScroll?g.axis&&(g.axis===m.preventScrollAxis||"xy"===
m.preventScrollAxis?(g._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(b))):this.emit()}}pointerUp(b){this.ctrl.setEventIds(b);try{this.config.pointerCapture&&b.target.hasPointerCapture(b.pointerId)&&b.target.releasePointerCapture(b.pointerId)}catch(qa){}const g=this.state,m=this.config;if(g._active&&g._pointerActive){var G=zi(b);if(void 0===g._pointerId||G===g._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(b);var [V,ka]=g._distance;
g.tap=V<=m.tapsThreshold&&ka<=m.tapsThreshold;if(g.tap&&m.filterTaps)g._force=!0;else{const [qa,Ia]=g.direction,[Ta,Xa]=g.velocity,[ib,vb]=g.movement,[Lb,cc]=m.swipe.velocity,[Tb,kc]=m.swipe.distance;g.elapsedTime<m.swipe.duration&&(Math.abs(Ta)>Lb&&Math.abs(ib)>Tb&&(g.swipe[0]=qa),Math.abs(Xa)>cc&&Math.abs(vb)>kc&&(g.swipe[1]=Ia))}this.emit()}}}pointerClick(b){!this.state.tap&&0<b.detail&&(b.preventDefault(),b.stopPropagation())}setupPointer(b){const g=this.config,m=g.device;g.pointerLock&&b.currentTarget.requestPointerLock();
g.pointerCapture||(this.eventStore.add(this.sharedConfig.window,m,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(b){this.state._preventScroll&&b.cancelable&&b.preventDefault()}setupScrollPrevention(b){this.state._preventScroll=
!1;"persist"in b&&"function"===typeof b.persist&&b.persist();const g=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",g);this.eventStore.add(this.sharedConfig.window,"touch","cancel",g);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,b)}setupDelayTrigger(b){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(b)},this.config.delay)}keyDown(b){const g=Cy[b.key];if(g){const m=this.state,G=b.shiftKey?10:b.altKey?.1:1;this.start(b);m._delta=g(G);m._keyboardActive=!0;Rk.addTo(m._movement,m._delta);this.compute(b);this.emit()}}keyUp(b){b.key in Cy&&(this.state._keyboardActive=!1,this.setActive(),this.compute(b),this.emit())}bind(b){const g=this.config.device;b(g,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(b(g,"change",this.pointerMove.bind(this)),b(g,"end",this.pointerUp.bind(this)),
b(g,"cancel",this.pointerUp.bind(this)),b("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(b("key","down",this.keyDown.bind(this)),b("key","up",this.keyUp.bind(this)));this.config.filterTaps&&b("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Tq="undefined"!==typeof window&&window.document&&window.document.createElement;try{var By="constructor"in GestureEvent}catch(b){By=!1}var jD=By,Qs=Tq&&"ontouchstart"in window||Tq&&1<window.navigator.maxTouchPoints,Ay=Tq&&
"ontouchstart"in window||Tq&&1<window.navigator.maxTouchPoints,yy=Tq&&"onpointerdown"in window,iD=Tq&&"exitPointerLock"in window.document,zy={mouse:0,touch:0,pen:8},hD=Ag(Ag({},Uq),{},{device(b,g,{pointer:{touch:m=!1,lock:G=!1,mouse:V=!1}={}}){this.pointerLock=G&&iD;return Qs&&m?"touch":this.pointerLock?"mouse":yy&&!V?"pointer":Qs?"touch":"mouse"},preventScrollAxis(b,g,{preventScroll:m}){this.preventScrollDelay="number"===typeof m?m:m||void 0===m&&b?250:void 0;if(Ay&&!1!==m)return b?b:void 0!==m?
"y":void 0},pointerCapture(b,g,{pointer:{capture:m=!0,buttons:G=1,keys:V=!0}={}}){this.pointerButtons=G;this.keys=V;return!this.pointerLock&&"pointer"===this.device&&m},threshold(b,g,{filterTaps:m=!1,tapsThreshold:G=3,axis:V}){b=Rk.toVector(b,m?G:V?1:0);this.filterTaps=m;this.tapsThreshold=G;return b},swipe({velocity:b=.5,distance:g=50,duration:m=250}={}){return{velocity:this.transform(Rk.toVector(b)),distance:this.transform(Rk.toVector(g)),duration:m}},delay(b=0){switch(b){case !0:return 180;case !1:return 0;
default:return b}},axisThreshold(b){return b?Ag(Ag({},zy),b):zy}}),sp=class extends Gy{constructor(...b){super(...b);Mh(this,"ingKey","pinching");Mh(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const b=this.state;b._touchIds=[];b.canceled=!1;b.cancel=this.cancel.bind(this);b.turns=0}computeOffset(){const {type:b,movement:g,lastOffset:m}=this.state;this.state.offset="wheel"===b?Rk.add(g,m):[(1+g[0])*m[0],g[1]+
m[1]]}computeMovement(){const {offset:b,lastOffset:g}=this.state;this.state.movement=[b[0]/g[0],b[1]-g[1]]}axisIntent(){const b=this.state,[g,m]=b._movement;if(!b.axis){const G=30*Math.abs(g)-Math.abs(m);0>G?b.axis="angle":0<G&&(b.axis="scale")}}restrictToAxis(b){this.config.lockDirection&&("scale"===this.state.axis?b[1]=0:"angle"===this.state.axis&&(b[0]=0))}cancel(){const b=this.state;b.canceled||setTimeout(()=>{b.canceled=!0;b._active=!1;this.compute();this.emit()},0)}touchStart(b){this.ctrl.setEventIds(b);
var g=this.state;const m=this.ctrl.touchIds;g._active&&g._touchIds.every(G=>m.has(G))||2>m.size||(this.start(b),g._touchIds=Array.from(m).slice(0,2),g=dk(b,g._touchIds),this.pinchStart(b,g))}pointerStart(b){if(null==b.buttons||1===b.buttons%2){this.ctrl.setEventIds(b);b.target.setPointerCapture(b.pointerId);var g=this.state,m=g._pointerEvents,G=this.ctrl.pointerIds;g._active&&Array.from(m.keys()).every(V=>G.has(V))||(2>m.size&&m.set(b.pointerId,b),2>g._pointerEvents.size||(this.start(b),g=gl(...Array.from(m.values())),
this.pinchStart(b,g)))}}pinchStart(b,g){this.state.origin=g.origin;this.computeValues([g.distance,g.angle]);this.computeInitial();this.compute(b);this.emit()}touchMove(b){if(this.state._active){var g=dk(b,this.state._touchIds);this.pinchMove(b,g)}}pointerMove(b){var g=this.state._pointerEvents;g.has(b.pointerId)&&g.set(b.pointerId,b);this.state._active&&(g=gl(...Array.from(g.values())),this.pinchMove(b,g))}pinchMove(b,g){const m=this.state,G=g.angle-m._values[1];let V=0;270<Math.abs(G)&&(V+=Math.sign(G));
this.computeValues([g.distance,g.angle-360*V]);m.origin=g.origin;m.turns=V;m._movement=[m._values[0]/m._initial[0]-1,m._values[1]-m._initial[1]];this.compute(b);this.emit()}touchEnd(b){this.ctrl.setEventIds(b);this.state._active&&this.state._touchIds.some(g=>!this.ctrl.touchIds.has(g))&&(this.state._active=!1,this.compute(b),this.emit())}pointerEnd(b){const g=this.state;this.ctrl.setEventIds(b);try{b.target.releasePointerCapture(b.pointerId)}catch(m){}g._pointerEvents.has(b.pointerId)&&g._pointerEvents.delete(b.pointerId);
g._active&&2>g._pointerEvents.size&&(g._active=!1,this.compute(b),this.emit())}gestureStart(b){b.cancelable&&b.preventDefault();const g=this.state;g._active||(this.start(b),this.computeValues([b.scale,b.rotation]),g.origin=[b.clientX,b.clientY],this.compute(b),this.emit())}gestureMove(b){b.cancelable&&b.preventDefault();if(this.state._active){var g=this.state;this.computeValues([b.scale,b.rotation]);g.origin=[b.clientX,b.clientY];var m=g._movement;g._movement=[b.scale-1,b.rotation];g._delta=Rk.sub(g._movement,
m);this.compute(b);this.emit()}}gestureEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}wheel(b){const g=this.config.modifierKey;if(!g||b[g])this.state._active?this.wheelChange(b):this.wheelStart(b),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(b){this.start(b);this.wheelChange(b)}wheelChange(b){"uv"in b||b.cancelable&&b.preventDefault();const g=this.state;g._delta=[-bi(b)[1]/100*g.offset[0],0];Rk.addTo(g._movement,g._delta);Wk(g);this.state.origin=
[b.clientX,b.clientY];this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){const g=this.config.device;g&&(b(g,"start",this[g+"Start"].bind(this)),b(g,"change",this[g+"Move"].bind(this)),b(g,"end",this[g+"End"].bind(this)),b(g,"cancel",this[g+"End"].bind(this)));this.config.pinchOnWheel&&b("wheel","",this.wheel.bind(this),{passive:!1})}},Go=Ag(Ag({},Dy),{},{device(b,g,{shared:m,pointer:{touch:G=!1}={}}){if(m.target&&!Qs&&jD)return"gesture";
if(Qs&&G)return"touch";if(Ay){if(yy)return"pointer";if(Qs)return"touch"}},bounds(b,g,{scaleBounds:m={},angleBounds:G={}}){const V=qa=>{qa=Pi(m,qa);qa=Object.assign({},{min:-Infinity,max:Infinity},qa||{});return[qa.min,qa.max]},ka=qa=>{qa=Pi(G,qa);qa=Object.assign({},{min:-Infinity,max:Infinity},qa||{});return[qa.min,qa.max]};return"function"!==typeof m&&"function"!==typeof G?[V(),ka()]:qa=>[V(qa),ka(qa)]},threshold(b,g,m){this.lockDirection="lock"===m.axis;return Rk.toVector(b,this.lockDirection?
[.1,3]:0)},modifierKey(b){return void 0===b?"ctrlKey":b},pinchOnWheel(b=!0){return b}}),nD=class extends Rs{constructor(...b){super(...b);Mh(this,"ingKey","moving")}move(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.state._active?this.moveChange(b):this.moveStart(b),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(b){this.start(b);this.computeValues(mj(b));this.compute(b);this.computeInitial();this.emit()}moveChange(b){if(this.state._active){var g=mj(b),m=this.state;
m._delta=Rk.sub(g,m._values);Rk.addTo(m._movement,m._delta);this.computeValues(g);this.compute(b);this.emit()}}moveEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}bind(b){b("pointer","change",this.move.bind(this));b("pointer","leave",this.moveEnd.bind(this))}},gD=Ag(Ag({},Uq),{},{mouseOnly:(b=!0)=>b}),fD=class extends Rs{constructor(...b){super(...b);Mh(this,"ingKey","scrolling")}scroll(b){this.state._active||this.start(b);this.scrollChange(b);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(b){b.cancelable&&b.preventDefault();const g=this.state;var m,G;const {scrollX:V,scrollY:ka,scrollLeft:qa,scrollTop:Ia}=b.currentTarget;var Ta=[null!==(m=null!==V&&void 0!==V?V:qa)&&void 0!==m?m:0,null!==(G=null!==ka&&void 0!==ka?ka:Ia)&&void 0!==G?G:0];g._delta=Rk.sub(Ta,g._values);Rk.addTo(g._movement,g._delta);this.computeValues(Ta);this.compute(b);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("scroll",
"",this.scroll.bind(this))}},RD=Uq,SD=class extends Rs{constructor(...b){super(...b);Mh(this,"ingKey","wheeling")}wheel(b){this.state._active||this.start(b);this.wheelChange(b);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(b){const g=this.state;g._delta=bi(b);Rk.addTo(g._movement,g._delta);Wk(g);this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("wheel","",this.wheel.bind(this))}},Ey=Uq,Fy=class extends Rs{constructor(...b){super(...b);
Mh(this,"ingKey","hovering")}enter(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.start(b),this.computeValues(mj(b)),this.compute(b),this.emit())}leave(b){if(!this.config.mouseOnly||"mouse"===b.pointerType){var g=this.state;if(g._active){g._active=!1;var m=mj(b);g._movement=g._delta=Rk.sub(m,g._values);this.computeValues(m);this.compute(b);g.delta=g.movement;this.emit()}}}bind(b){b("pointer","enter",this.enter.bind(this));b("pointer","leave",this.leave.bind(this))}},lD=Ag(Ag({},Uq),{},{mouseOnly:(b=
!0)=>b}),Ss=new Map,Gr=new Map,wD={key:"drag",engine:kD,resolver:hD},TD={key:"hover",engine:Fy,resolver:lD},HD={key:"move",engine:nD,resolver:gD},UD={key:"pinch",engine:sp,resolver:Go},VD={key:"scroll",engine:fD,resolver:RD},WD={key:"wheel",engine:SD,resolver:Ey},Jv=Wd(W(22)),XD={target(b){if(b)return()=>"current"in b?b.current:b},enabled(b=!0){return b},window(b=Tq?window:void 0){return b},eventOptions({passive:b=!0,capture:g=!1}={}){return{passive:b,capture:g}},transform(b){return b}},YD=["target",
"eventOptions","window","enabled","transform"],cz=class{constructor(b,g){Mh(this,"_listeners",new Set);this._ctrl=b;this._gestureKey=g}add(b,g,m,G,V){const ka=this._listeners,qa=Xh(g,m),Ia=Ag(Ag({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),V);b.addEventListener(qa,G,Ia);const Ta=()=>{b.removeEventListener(qa,G,Ia);ka.delete(Ta)};ka.add(Ta);return Ta}clean(){this._listeners.forEach(b=>b());this._listeners.clear()}},ZD=class{constructor(){Mh(this,"_timeouts",new Map)}add(b,
g,m=140,...G){this.remove(b);this._timeouts.set(b,window.setTimeout(g,m,...G))}remove(b){(b=this._timeouts.get(b))&&window.clearTimeout(b)}clean(){this._timeouts.forEach(b=>void window.clearTimeout(b));this._timeouts.clear()}},$D=class{constructor(b){Mh(this,"gestures",new Set);Mh(this,"_targetEventStore",new cz(this));Mh(this,"gestureEventStores",{});Mh(this,"gestureTimeoutStores",{});Mh(this,"handlers",{});Mh(this,"config",{});Mh(this,"pointerIds",new Set);Mh(this,"touchIds",new Set);Mh(this,"state",
{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});b.drag&&Ki(this,"drag");b.wheel&&Ki(this,"wheel");b.scroll&&Ki(this,"scroll");b.move&&Ki(this,"move");b.pinch&&Ki(this,"pinch");b.hover&&Ki(this,"hover")}setEventIds(b){if("touches"in b)return this.touchIds=new Set(Um(b));if("pointerId"in b)return"pointerup"===b.type||"pointercancel"===b.type?this.pointerIds.delete(b.pointerId):"pointerdown"===b.type&&this.pointerIds.add(b.pointerId),this.pointerIds}applyHandlers(b,g){this.handlers=b;this.nativeHandlers=
g}applyConfig(b,g){this.config=Kg(b,g,this.config)}clean(){this._targetEventStore.clean();for(const b of this.gestures)this.gestureEventStores[b].clean(),this.gestureTimeoutStores[b].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...b){var g=this.config.shared;const m={};let G;if(g.target&&(G=g.target(),!G))return;if(g.enabled){for(const V of this.gestures){const ka=this.config[V],qa=dz(m,ka.eventOptions,!!G);ka.enabled&&(new (Ss.get(V))(this,
b,V)).bind(qa)}g=dz(m,g.eventOptions,!!G);for(const V in this.nativeHandlers)g(V,"",ka=>this.nativeHandlers[V](Ag(Ag({},this.state.shared),{},{event:ka,args:b})),void 0,!0)}for(const V in m)m[V]=bj(...m[V]);if(!G)return m;for(const V in m){const {device:ka,capture:qa,passive:Ia}=Ji(V);this._targetEventStore.add(G,ka,"",m[V],{capture:qa,passive:Ia})}}},dz=(b,g,m)=>(G,V,ka,qa={},Ia=!1)=>{var Ta,Xa;const ib=null!==(Ta=qa.capture)&&void 0!==Ta?Ta:g.capture;qa=null!==(Xa=qa.passive)&&void 0!==Xa?Xa:g.passive;
G=Ia?G:Nh(G,V,ib);m&&qa&&(G+="Passive");b[G]=b[G]||[];b[G].push(ka)},aE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,Wt=Wd(W(22)),Gv=Wd(W(22)),Ty=Wd(W(22)),Sy=Wd(W(22)),DD=Wd(W(22)),ED=Wd(W(22)),FD=Wd(W(22)),GD=Wd(W(22)),zD={none:(b,g)=>"none",["default"]:(b,g)=>"default",pointer:(b,g)=>"pointer",crosshair:(b,g)=>"crosshair",move:(b,g)=>"move",wait:(b,g)=>"wait",progress:(b,g)=>"progress",grab:(b,g)=>dj('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
b,g),grabbing:(b,g)=>dj("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
b,g),text:(b,g)=>dj("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
b,g),["resize-edge"]:(b,g)=>dj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["resize-corner"]:(b,g)=>dj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b,g),["ew-resize"]:(b,g)=>dj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["ns-resize"]:(b,g)=>dj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
b+90,g),["nesw-resize"]:(b,g)=>dj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",b,g),["nwse-resize"]:(b,g)=>dj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b+90,g),rotate:(b,g)=>dj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+45,g),["nwse-rotate"]:(b,g)=>dj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b,g),["nesw-rotate"]:(b,g)=>dj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+90,g),["senw-rotate"]:(b,g)=>dj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+180,g),["swne-rotate"]:(b,g)=>dj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+270,g)},AD=Wd(W(22));Wd(W(22));var Py=W(22),Qy=Wd(W(22));if(!W(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!sg)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var BD=W(31),Us=Wd(W(22)),Ry="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,CD=1E4,bE=function(b){var g="function"===typeof Symbol&&Symbol.iterator,m=g&&b[g],G=0;if(m)return m.call(b);if(b&&"number"===typeof b.length)return{next:function(){b&&G>=
b.length&&(b=void 0);return{value:b&&b[G++],done:!b}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.");},ez=Ry?jm(Ry):rh(),yD=ez.addReactionToTrack,xD=ez.recordReactionAsCommitted,fz=function(b,g){var m="function"===typeof Symbol&&b[Symbol.iterator];if(!m)return b;b=m.call(b);var G,V=[];try{for(;(void 0===g||0<g--)&&!(G=b.next()).done;)V.push(G.value)}catch(qa){var ka={error:qa}}finally{try{G&&!G.done&&(m=b["return"])&&m.call(b)}finally{if(ka)throw ka.error;}}return V},
cE=function(){return function(){}}(),Ir=W(22),gz="function"===typeof Symbol&&Symbol.for,hz=gz?Symbol.for("react.forward_ref"):"function"===typeof Ir.forwardRef&&(0,Ir.forwardRef)(function(b){return null}).$$typeof,Oy=gz?Symbol.for("react.memo"):"function"===typeof Ir.memo&&(0,Ir.memo)(function(b){return null}).$$typeof,dE={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};ek.displayName="Observer";W(22);W(22);W(22);(function(b){b||=Xl;Me({reactionScheduler:b})})(BD.unstable_batchedUpdates);
var eE=Wd(W(22));mb=W(587);var io=eE.forwardRef(function(b,g){var {children:m,opacity:G,centered:V,className:ka=""}=b,qa=Wc(b,["children","opacity","centered","className"]);return(0,mb.jsx)(ek,{children:()=>(0,mb.jsx)("div",{ref:g,className:`tl-positioned-div ${ka}`,style:G?{opacity:G}:void 0,draggable:!1,children:(0,mb.jsx)("div",Jc(oc({className:`tl-positioned-inner ${V?"tl-centered":""}`},qa),{children:m}))})})}),fE=Wd(W(22));mb=W(587);var jo=fE.forwardRef(function(b,g){var {id:m,className:G="",
style:V,children:ka}=b,qa=Wc(b,["id","className","style","children"]);return(0,mb.jsx)(ek,{children:()=>(0,mb.jsx)("svg",{ref:g,style:V,className:`tl-positioned-svg ${G}`,children:(0,mb.jsx)("g",Jc(oc({id:m,className:"tl-centered-g"},qa),{children:ka}))})})}),Vs=Wd(W(22)),iz=Wd(W(22)),Xt=Wd(W(22));mb=W(587);var Xp=ef(function(b){var {id:g,bounds:m,zIndex:G,rotation:V=0,className:ka="",children:qa}=b;b=Wc(b,"id bounds zIndex rotation className children".split(" "));const Ia=Xt.useRef(null);Xt.useLayoutEffect(()=>
{Ia.current.style.transform=`translate(
        calc(${m.minX}px - var(--tl-padding)),
        calc(${m.minY}px - var(--tl-padding)))
        rotate(${V+(m.rotation||0)}rad)`},[m.minX,m.minY,V,m.rotation]);Xt.useLayoutEffect(()=>{const Ta=Ia.current;Ta.style.width=`calc(${Math.floor(m.width)}px + (var(--tl-padding) * 2))`;Ta.style.height=`calc(${Math.floor(m.height)}px + (var(--tl-padding) * 2))`},[m.width,m.height]);Xt.useLayoutEffect(()=>{const Ta=Ia.current;void 0!==G&&(Ta.style.zIndex=G.toString())},[G]);return(0,mb.jsx)("div",Jc(oc({id:g,ref:Ia,className:`tl-positioned ${ka}`,"aria-label":"container"},b),{children:qa}))}),
gE=Wd(W(22));mb=W(587);var ID=ef(function({shapes:b,hidden:g,bounds:m,rotation:G=0}){const {components:{ContextBar:V},viewport:{bounds:ka,camera:{point:[qa,Ia],zoom:Ta}}}=si(),Xa=gE.useRef(null);var ib=sf.getRotatedBounds(m,G);ib=sf.multiplyBounds(ib,Ta);cj(Xa,m,G,10005);if(!V)throw Error("Expected a ContextBar component.");const vb=sf.translateBounds(ib,[qa*Ta,Ia*Ta]);return(0,mb.jsx)("div",{ref:Xa,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,mb.jsx)(V,{hidden:g,shapes:b,bounds:m,offsets:{left:vb.minX,right:ka.width-vb.maxX,top:vb.minY,bottom:ka.height-vb.maxY,width:vb.width,height:vb.height},scaledBounds:ib,rotation:G})})}),Uy=Wd(W(22));mb=W(587);var Zy=ef(function({children:b}){const g=Uy.useRef(null),{viewport:m}=si(),G=g.current,{zoom:V,point:ka}=m.camera;Uy.useEffect(()=>{G&&(G.style.transform=`scale(${V}) translate3d(${ka[0]}px, ${ka[1]}px, 0)`)},[V,ka,G]);return(0,mb.jsx)("div",{ref:g,className:"tl-absolute tl-layer",
children:b})});mb=W(587);var $y=ef(function({shape:b,isHovered:g=!1,isSelected:m=!1,isBinding:G=!1,isEditing:V=!1,meta:ka}){const {bounds:qa,props:{scale:Ia,rotation:Ta=0},ReactIndicator:Xa}=b;return(0,mb.jsx)(Xp,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:qa,rotation:Ta,scale:Ia,zIndex:V?1E3:1E4,children:(0,mb.jsx)(jo,{children:(0,mb.jsx)("g",{className:`tl-indicator-container ${m?"tl-selected":"tl-hovered"}`,children:(0,mb.jsx)(Xa,{isEditing:V,isBinding:G,isHovered:g,isSelected:m,
isErasing:!1,meta:ka})})})})}),az=Wd(W(22));mb=W(587);var JD=ef(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:m}},components:{QuickLinks:G}}=si();var V=$e();const ka=Zl(g);if(!G)throw Error("Expected a QuickLinks component.");V=50>b.height*m||!V.selectedShapesArray.includes(g);return(0,mb.jsx)(Xp,{bounds:b,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,mb.jsx)(io,{children:(0,mb.jsx)("span",Jc(oc({style:{position:"absolute",top:"100%",pointerEvents:"all",
transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},ka),{onPointerDown:qa=>qa.stopPropagation(),children:(0,mb.jsx)(G,{className:"tl-backlinks-count "+(V?"tl-backlinks-count-rounded":""),id:g.id,shape:g})}))})})});mb=W(587);var LD=ef(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:m}},components:{BacklinksCount:G}}=si();var V=$e();if(!G)throw Error("Expected a BacklinksCount component.");const ka=qa=>qa.stopPropagation();V=50>b.height*m||!V.selectedShapesArray.includes(g)||
g.hideSelection;return(0,mb.jsx)(Xp,{bounds:b,className:"tl-backlinks-count-container",children:(0,mb.jsx)(io,{children:(0,mb.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:ka,onWheelCapture:ka,onKeyDown:ka,title:"Shape Backlinks",children:(0,mb.jsx)(G,{className:"tl-backlinks-count "+(V?"tl-backlinks-count-rounded":""),id:g.id,shape:g})})})})}),KD=Wd(W(22));mb=W(587);var OD=ef(function({bounds:b,
hidden:g,shapes:m,rotation:G=0,detail:V="size"}){const {components:{SelectionDetail:ka},viewport:{camera:{zoom:qa}}}=si(),Ia=KD.useRef(null),Ta=sf.multiplyBounds(b,qa);cj(Ia,b,G,10003);if(!ka)throw Error("Expected a SelectionDetail component.");return(0,mb.jsx)("div",{ref:Ia,className:`tl-counter-scaled-positioned ${g?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,mb.jsx)(ka,{shapes:m,bounds:b,scaledBounds:Ta,zoom:qa,rotation:G,detail:V})})});
mb=W(587);var ND=ef(function({shape:b,isHovered:g=!1,isSelected:m=!1,isBinding:G=!1,isErasing:V=!1,isEditing:ka=!1,onEditingEnd:qa,asset:Ia,meta:Ta,zIndex:Xa}){const {bounds:ib,props:{rotation:vb,scale:Lb},ReactComponent:cc}=b,Tb=$e(),kc=Zl(b);return(0,mb.jsx)(Xp,{"data-shape-id":b.id,"data-html2canvas-ignore":!m&&0!==Tb.selectedShapes.size||null,zIndex:Xa,"data-type":"Shape",bounds:ib,rotation:vb,scale:Lb,children:(0,mb.jsx)(cc,{meta:Ta,isEditing:ka,isBinding:G,isHovered:g,isSelected:m,isErasing:V,
events:kc,asset:Ia,onEditingEnd:qa})})});mb=W(587);var Yy=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],MD=ef(function({size:b}){const {viewport:{camera:{point:g,zoom:m}}}=si();return(0,mb.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,mb.jsx)("defs",{children:Yy.map(([G,V,ka],qa)=>{ka=ka*b*m;var Ia=g[0]*m,Ta=g[1]*m;Ia=0<Ia?Ia%ka:ka+Ia%ka;Ta=0<Ta?Ta%ka:ka+Ta%ka;G=Kl(m,[G,V],[0,1]);return(0,mb.jsx)("pattern",{id:`grid-${qa}`,
width:ka,height:ka,patternUnits:"userSpaceOnUse",children:!(2<G||.1>G)&&(0,mb.jsx)("circle",{className:"tl-grid-dot",cx:Ia,cy:Ta,r:1.5,opacity:Math.max(0,Math.min(G,1))})},`grid-pattern-${qa}`)})}),Yy.map((G,V)=>(0,mb.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${V})`},`grid-rect-${V}`))]})}),Xy=ef(function({size:b}){return(0,mb.jsx)(MD,{size:b})});mb=W(587);var Wy=ef(function({bounds:b}){const g=Bj("background");return(0,mb.jsx)(jo,Jc(oc({"data-html2canvas-ignore":"true"},g),{children:(0,mb.jsx)("rect",
{className:"tl-bounds-bg",width:Math.max(1,b.width),height:Math.max(1,b.height),pointerEvents:"all",rx:8,ry:8})}))});W(22);mb=W(587);var Vy=ef(function({scaledBounds:b,shapes:g,detail:m="size",rotation:G=0}){var V;const ka=1===g.length?G:null!=(V=b.rotation)?V:0;return(0,mb.jsx)(io,{centered:!0,children:(0,mb.jsx)("div",{className:"tl-bounds-detail",style:{transform:ka<jn||ka>3*jn?`rotate(${ka}rad) translateY(${b.height/2+24}px)`:`rotate(${Math.PI+ka}rad) translateY(${b.height/2+32}px)`,padding:"2px 3px",
borderRadius:"1px"},children:1===g.length&&"line"===g[0].type?`${me.dist(g[0].props.handles.start.point,g[0].props.handles.end.point).toFixed()}`:"size"===m?`${b.width.toFixed()} \xD7 ${b.height.toFixed()}`:`\u2220${ol.radiansToDegrees(ol.clampRadians(G)).toFixed()}\xB0`})})});mb=W(587);var hE={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Yt=ef(function({cx:b,cy:g,size:m,targetSize:G,corner:V,isHidden:ka}){const qa=
Bj(V);return(0,mb.jsxs)("g",Jc(oc({opacity:ka?0:1},qa),{children:[(0,mb.jsx)("rect",{className:"tl-transparent "+(ka?"":hE[V]),"aria-label":`${V} target`,x:b-1.25*G,y:g-1.25*G,width:2.5*G,height:2.5*G,pointerEvents:ka?"none":"all"}),(0,mb.jsx)("rect",{className:"tl-corner-handle","aria-label":`${V} handle`,x:b-m/2,y:g-m/2,width:m,height:m,pointerEvents:"none"})]}))});mb=W(587);var iE={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},Zt=ef(function({x:b,
y:g,width:m,height:G,targetSize:V,edge:ka,disabled:qa,isHidden:Ia}){const Ta=Bj(ka);return(0,mb.jsx)("rect",oc({pointerEvents:Ia||qa?"none":"all",className:"tl-transparent tl-edge-handle "+(Ia?"":iE[ka]),"aria-label":`${ka} target`,opacity:Ia?0:1,x:b-V,y:g-V,width:Math.max(1,m+2*V),height:Math.max(1,G+2*V)},Ta))});W(22);mb=W(587);ef(function({cx:b,cy:g,size:m,targetSize:G,isHidden:V}){const ka=Bj("rotate");return(0,mb.jsxs)("g",Jc(oc({opacity:V?0:1},ka),{children:[(0,mb.jsx)("circle",{className:"tl-transparent ",
"aria-label":"rotate target",cx:b,cy:g,r:G,pointerEvents:V?"none":"all"}),(0,mb.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:b,cy:g,r:m/2,pointerEvents:"none"})]}))});W(22);mb=W(587);var $t=ef(function({cx:b,cy:g,targetSize:m,corner:G,isHidden:V}){const ka=Bj(G);return(0,mb.jsx)("g",Jc(oc({opacity:V?0:1},ka),{children:(0,mb.jsx)("rect",{className:"tl-transparent","aria-label":`${G} target`,x:b-2.5*m,y:g-2.5*m,width:3*m,height:3*m,pointerEvents:V?"none":"all"})}))});
mb=W(587);var jz=ef(function({bounds:b,showResizeHandles:g,showRotateHandles:m,shapes:G}){var V,ka;const qa=$e();let {width:Ia,height:Ta}=b;var Xa=qa.viewport.camera.zoom;b=8/Xa;Xa=6/Xa;G=1===G.length?G[0].canResize:[!0,!0];const ib=null!=(ka=null==(V=qa.editingShape)?void 0:V.props.borderRadius)?ka:0;return(0,mb.jsxs)(jo,{children:[!qa.editingShape&&(0,mb.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ia,1),height:Math.max(Ta,1),rx:ib,ry:ib,pointerEvents:"none"}),(0,mb.jsx)(Zt,{x:2*Xa,y:0,
width:Ia-4*Xa,height:0,targetSize:Xa,edge:"top_edge",disabled:!G[1],isHidden:!g}),(0,mb.jsx)(Zt,{x:Ia,y:2*Xa,width:0,height:Ta-4*Xa,targetSize:Xa,edge:"right_edge",disabled:!G[0],isHidden:!g}),(0,mb.jsx)(Zt,{x:2*Xa,y:Ta,width:Ia-4*Xa,height:0,targetSize:Xa,edge:"bottom_edge",disabled:!G[1],isHidden:!g}),(0,mb.jsx)(Zt,{x:0,y:2*Xa,width:0,height:Ta-4*Xa,targetSize:Xa,edge:"left_edge",disabled:!G[0],isHidden:!g}),(0,mb.jsx)($t,{cx:0,cy:0,targetSize:Xa,corner:"top_left_resize_corner",isHidden:!m}),(0,mb.jsx)($t,
{cx:Ia+2*Xa,cy:0,targetSize:Xa,corner:"top_right_resize_corner",isHidden:!m}),(0,mb.jsx)($t,{cx:Ia+2*Xa,cy:Ta+2*Xa,targetSize:Xa,corner:"bottom_right_resize_corner",isHidden:!m}),(0,mb.jsx)($t,{cx:0,cy:Ta+2*Xa,targetSize:Xa,corner:"bottom_left_resize_corner",isHidden:!m}),(null==G?void 0:G.every(vb=>vb))&&(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsx)(Yt,{cx:0,cy:0,size:b,targetSize:Xa,corner:"top_left_corner",isHidden:!g}),(0,mb.jsx)(Yt,{cx:Ia,cy:0,size:b,targetSize:Xa,corner:"top_right_corner",isHidden:!g}),
(0,mb.jsx)(Yt,{cx:Ia,cy:Ta,size:b,targetSize:Xa,corner:"bottom_right_corner",isHidden:!g}),(0,mb.jsx)(Yt,{cx:0,cy:Ta,size:b,targetSize:Xa,corner:"bottom_left_corner",isHidden:!g})]})]})});mb=W(587);var kz=ef(function({bounds:b}){return(0,mb.jsx)(Xp,{bounds:b,zIndex:10001,children:(0,mb.jsx)(jo,{children:(0,mb.jsx)("rect",{className:"tl-brush",x:0,y:0,width:b.width,height:b.height})})})});mb=W(587);ef(function(){return(0,mb.jsx)(mb.Fragment,{})});mb=W(587);var lz=ef(function({shape:b,handle:g,id:m}){b=
zm(b,m);const [G,V]=g.point;return(0,mb.jsxs)("g",Jc(oc({className:"tl-handle","aria-label":"handle"},b),{transform:`translate(${G}, ${V})`,children:[(0,mb.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,mb.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),mz=Wd(W(22));mb=W(587);var Kv=ef(function({direction:b}){const {viewport:{bounds:g}}=si(),m=mz.useRef(null);mz.useLayoutEffect(()=>{const G=m.current;if(G){var V=[g.width/2,g.height/2],ka=sf.getRectangleSides([12,
12],[g.width-24,g.height-24]);for(const [,[qa,Ia]]of ka)ka=w(V,b,qa,Ia),ka.didIntersect&&(ka=ka.points[0],G.style.transform=`translate(${ka[0]-6}px,${ka[1]-6}px) rotate(${me.toAngle(b)}rad)`)}},[b,g]);return(0,mb.jsx)("div",{ref:m,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,mb.jsx)("svg",{height:12,width:12,children:(0,mb.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});mb=W(587);var jE=ef(function({id:b,className:g,brush:m,shapes:G,assets:V,bindingShapes:ka,editingShape:qa,
hoveredShape:Ia,hoveredGroup:Ta,selectionBounds:Xa,selectedShapes:ib,erasingShapes:vb,selectionDirectionHint:Lb,cursor:cc="default",cursorRotation:Tb=0,selectionRotation:kc=0,showSelection:mc=!0,showHandles:Vb=!0,showSelectionRotation:tc=!1,showResizeHandles:Ic=!0,showRotateHandles:Sc=!0,showSelectionDetail:Xc=!0,showContextBar:Xd=!0,showGrid:ce=!0,gridSize:De=8,onEditingEnd:Oe=rD,theme:qf=kn,children:nf}){var ff;const He=Vs.useRef(null),{viewport:Bd,components:hd,meta:md}=si(),od=$e(),Cd=Vs.useCallback(kf=>
{od.inputs.updateContainerOffset([kf.minX,kf.minY])},[]);bk(qf,b);yl(He);wl(He,Bd,Cd);Fk(He);Qj();Am(He,cc,Tb);Wl(He);vk(He);b=og();const xe=(cc=1===(null==ib?void 0:ib.length)&&ib[0])&&"handles"in cc.props?null==ib?void 0:ib[0]:void 0,Ge=Vs.useMemo(()=>new Set(ib||[]),[ib]),of=Vs.useMemo(()=>new Set(vb||[]),[vb]);cc=1===(null==ib?void 0:ib.length)?ib[0]:void 0;Ta=[...(new Set([Ta,Ia]))].filter(oi);return(0,mb.jsxs)("div",{ref:He,className:`tl-container ${null!=g?g:""}`,children:[(0,mb.jsxs)("div",
Jc(oc({tabIndex:-1,className:"tl-absolute tl-canvas"},b),{children:[ce&&hd.Grid&&(0,mb.jsx)(hd.Grid,{size:De}),(0,mb.jsxs)(Zy,{children:[hd.SelectionBackground&&ib&&Xa&&mc&&(0,mb.jsx)(Xp,{"data-type":"SelectionBackground",bounds:Xa,zIndex:2,"data-html2canvas-ignore":"true",children:(0,mb.jsx)(hd.SelectionBackground,{shapes:ib,bounds:Xa,showResizeHandles:Ic,showRotateHandles:Sc})}),G&&G.map((kf,jf)=>(0,mb.jsx)(ND,{shape:kf,asset:V&&kf.props.assetId?V[kf.props.assetId]:void 0,isEditing:kf===qa,isHovered:kf===
Ia,isBinding:null==ka?void 0:ka.includes(kf),isSelected:Ge.has(kf),isErasing:of.has(kf),meta:md,zIndex:1E3+jf,onEditingEnd:Oe},"shape_"+kf.id)),!od.isIn("select.pinching")&&(null==ib?void 0:ib.map(kf=>(0,mb.jsx)($y,{shape:kf,isEditing:kf===qa,isHovered:!1,isBinding:!1,isSelected:!0},"selected_indicator_"+kf.id))),Ta.map(kf=>kf!==qa&&(0,mb.jsx)($y,{shape:kf},"hovered_indicator_"+kf.id)),cc&&hd.BacklinksCount&&(0,mb.jsx)(LD,{hidden:!1,bounds:cc.bounds,shape:cc}),Ia&&Ia!==cc&&hd.QuickLinks&&(0,mb.jsx)(JD,
{hidden:!1,bounds:Ia.bounds,shape:Ia}),m&&hd.Brush&&(0,mb.jsx)(hd.Brush,{bounds:m}),ib&&Xa&&(0,mb.jsxs)(mb.Fragment,{children:[mc&&hd.SelectionForeground&&(0,mb.jsx)(Xp,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:Xa,zIndex:qa&&ib.includes(qa)?1002:10002,children:(0,mb.jsx)(hd.SelectionForeground,{shapes:ib,bounds:Xa,showResizeHandles:Ic,showRotateHandles:Sc})}),Vb&&xe&&hd.Handle&&(0,mb.jsx)(Xp,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",
bounds:Xa,zIndex:10003,children:(0,mb.jsx)(jo,{children:Object.entries(null!=(ff=xe.props.handles)?ff:{}).map(([kf,jf])=>Vs.createElement(hd.Handle,{key:`${jf.id}_handle_${jf.id}`,shape:xe,handle:jf,id:kf}))})}),ib&&hd.SelectionDetail&&(0,mb.jsx)(OD,{"data-html2canvas-ignore":"true",shapes:ib,bounds:Xa,detail:tc?"rotation":"size",hidden:!Xc,rotation:kc},"detail"+ib.map(kf=>kf.id).join(""))]})]}),Lb&&Xa&&ib&&(0,mb.jsx)(Kv,{direction:Lb,bounds:Xa,shapes:ib}),(0,mb.jsx)("div",{id:"tl-dev-tools-canvas-anchor",
"data-html2canvas-ignore":"true"})]})),(0,mb.jsx)(Zy,{children:ib&&Xa&&(0,mb.jsx)(mb.Fragment,{children:ib&&hd.ContextBar&&(0,mb.jsx)(ID,{shapes:ib,hidden:!Xd,bounds:cc?cc.bounds:Xa,rotation:cc?cc.props.rotation:0},"context"+ib.map(kf=>kf.id).join(""))})}),nf]})}),nz=Wd(W(22)),oz=Wd(W(22));mb=W(587);ef(function({children:b}){const g=oz.useRef(null),{viewport:m}=si();oz.useEffect(()=>Od(()=>{const G=g.current;if(G){var {zoom:V,point:ka}=m.camera;G.style.transform=`scale(${V}) translateX(${ka[0]}px) translateY(${ka[1]}px)`}}),
[]);return(0,mb.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,mb.jsx)("g",{ref:g,pointerEvents:"none",children:b})})});mb=W(587);var kE=ef(function(b){const g=hn(b),m=qk(b.id);Gk(g,b);tj(g,b);return(0,mb.jsx)(m.Provider,{value:g,children:b.children})});mb=W(587);var lE=ef(function({id:b="noid",viewport:g,inputs:m,callbacks:G=kn,meta:V=kn,components:ka=kn,children:qa}){const [Ia,Ta]=nz.useState(()=>{const {Brush:ib,ContextBar:vb,DirectionIndicator:Lb,Grid:cc,Handle:Tb,
SelectionBackground:kc,SelectionDetail:mc,SelectionForeground:Vb}=ka,tc=Wc(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:b,viewport:g,inputs:m,callbacks:G,meta:V,components:Jc(oc({},tc),{Brush:null===ib?void 0:kz,ContextBar:vb,DirectionIndicator:null===Lb?void 0:Kv,Grid:null===cc?void 0:Xy,Handle:null===Tb?void 0:lz,SelectionBackground:null===kc?void 0:Wy,SelectionDetail:null===mc?void 0:Vy,SelectionForeground:null===
Vb?void 0:jz})}});nz.useLayoutEffect(()=>{const {Brush:ib,ContextBar:vb,DirectionIndicator:Lb,Grid:cc,Handle:Tb,SelectionBackground:kc,SelectionDetail:mc,SelectionForeground:Vb}=ka,tc=Wc(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return Od(()=>{Ta({id:b,viewport:g,inputs:m,callbacks:G,meta:V,components:Jc(oc({},tc),{Brush:null===ib?void 0:kz,ContextBar:vb,DirectionIndicator:null===Lb?void 0:Kv,Grid:null===cc?void 0:Xy,Handle:null===
Tb?void 0:lz,SelectionBackground:null===kc?void 0:Wy,SelectionDetail:null===mc?void 0:Vy,SelectionForeground:null===Vb?void 0:jz})})})},[]);const Xa=im(b);return(0,mb.jsx)(Xa.Provider,{value:Ia,children:qa})});mb=W(587);mb=W(587);var mE=ef(function(b){const g=$e();return(0,mb.jsx)(jg,oc({viewport:g.viewport,inputs:g.inputs,callbacks:g._events,brush:g.brush,editingShape:g.editingShape,hoveredShape:g.hoveredShape,hoveredGroup:g.hoveredGroup,bindingShapes:g.bindingShapes,selectionDirectionHint:g.selectionDirectionHint,
selectionBounds:g.selectionBounds,selectedShapes:g.selectedShapesArray,erasingShapes:g.erasingShapesArray,shapes:g.shapes,assets:g.assets,showGrid:g.settings.showGrid,showSelection:g.showSelection,showSelectionRotation:g.showSelectionRotation,showResizeHandles:g.showResizeHandles,showRotateHandles:g.showRotateHandles,showSelectionDetail:g.showSelectionDetail,showContextBar:g.showContextBar,cursor:g.cursors.cursor,cursorRotation:g.cursors.rotation,selectionRotation:g.selectionRotation,onEditingEnd:g.clearEditingState},
b))});mb=W(587);var Jr=Wd(W(22)),au=Wd(W(22));mb=W(587);var nE="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),Eh=b=>{var {name:g,className:m}=b;b=Wc(b,["name","className"]);const G=nE.includes(g)?"tie tie-":"ti ti-";return(0,mb.jsx)("i",oc({className:[G+g,m].join(" ")},
b))},eh=W(22),oE=W(22),Vq=W(22),Bn=W(22),Lv=W(22),pE=W(31),Pm=W(22),Wq=(0,Pm.forwardRef)((b,g)=>{var {children:m}=b;b=Wc(b,["children"]);const G=Pm.Children.toArray(m),V=G.find(lg);if(V){const ka=V.props.children;m=G.map(qa=>qa===V?1<Pm.Children.count(ka)?Pm.Children.only(null):(0,Pm.isValidElement)(ka)?ka.props.children:null:qa);return(0,Pm.createElement)(Mv,tf({},b,{ref:g}),(0,Pm.isValidElement)(ka)?(0,Pm.cloneElement)(ka,void 0,m):null)}return(0,Pm.createElement)(Mv,tf({},b,{ref:g}),m)});Wq.displayName=
"Slot";var Mv=(0,Pm.forwardRef)((b,g)=>{const {children:m}=b;b=Wc(b,["children"]);return(0,Pm.isValidElement)(m)?(0,Pm.cloneElement)(m,Jc(oc({},fj(b,m.props)),{ref:wk(g,m.ref)})):1<Pm.Children.count(m)?Pm.Children.only(null):null});Mv.displayName="SlotClone";var pz=({children:b})=>(0,Pm.createElement)(Pm.Fragment,null,b),yj="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,Lv.forwardRef)((G,V)=>{var {asChild:ka}=G;G=Wc(G,["asChild"]);ka=ka?Wq:g;(0,Lv.useEffect)(()=>
{window[Symbol.for("radix-ui")]=!0},[]);return(0,Lv.createElement)(ka,tf({},G,{ref:V}))});m.displayName=`Primitive.${g}`;return Jc(oc({},b),{[g]:m})},{}),Nv=W(22),qE=W(22),qz,rE=(0,Bn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bu=(0,Bn.forwardRef)((b,g)=>{var m;const {disableOutsidePointerEvents:G=!1,onEscapeKeyDown:V,onPointerDownOutside:ka,onFocusOutside:qa,onInteractOutside:Ia,onDismiss:Ta}=b,Xa=Wc(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),
ib=(0,Bn.useContext)(rE),[vb,Lb]=(0,Bn.useState)(null),cc=null!==(m=null===vb||void 0===vb?void 0:vb.ownerDocument)&&void 0!==m?m:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Tb]=(0,Bn.useState)({});g=If(g,Ic=>Lb(Ic));m=Array.from(ib.layers);var [kc]=[...ib.layersWithOutsidePointerEventsDisabled].slice(-1);kc=m.indexOf(kc);const mc=vb?m.indexOf(vb):-1;m=0<ib.layersWithOutsidePointerEventsDisabled.size;const Vb=mc>=kc;kc=Hj(Ic=>{const Sc=Ic.target,Xc=[...ib.branches].some(Xd=>
Xd.contains(Sc));Vb&&!Xc&&(null===ka||void 0===ka||ka(Ic),null===Ia||void 0===Ia||Ia(Ic),Ic.defaultPrevented||null===Ta||void 0===Ta||Ta())},cc);const tc=Ml(Ic=>{const Sc=Ic.target;[...ib.branches].some(Xc=>Xc.contains(Sc))||(null===qa||void 0===qa||qa(Ic),null===Ia||void 0===Ia||Ia(Ic),Ic.defaultPrevented||null===Ta||void 0===Ta||Ta())},cc);xk(Ic=>{mc===ib.layers.size-1&&(null===V||void 0===V||V(Ic),!Ic.defaultPrevented&&Ta&&(Ic.preventDefault(),Ta()))},cc);(0,Bn.useEffect)(()=>{if(vb)return G&&
(0===ib.layersWithOutsidePointerEventsDisabled.size&&(qz=cc.body.style.pointerEvents,cc.body.style.pointerEvents="none"),ib.layersWithOutsidePointerEventsDisabled.add(vb)),ib.layers.add(vb),Ek(),()=>{G&&1===ib.layersWithOutsidePointerEventsDisabled.size&&(cc.body.style.pointerEvents=qz)}},[vb,cc,G,ib]);(0,Bn.useEffect)(()=>()=>{vb&&(ib.layers.delete(vb),ib.layersWithOutsidePointerEventsDisabled.delete(vb),Ek())},[vb,ib]);(0,Bn.useEffect)(()=>{const Ic=()=>Tb({});document.addEventListener("dismissableLayer.update",
Ic);return()=>document.removeEventListener("dismissableLayer.update",Ic)},[]);return(0,Bn.createElement)(yj.div,tf({},Xa,{ref:g,style:oc({pointerEvents:m?Vb?"auto":"none":void 0},b.style),onFocusCapture:Ff(b.onFocusCapture,tc.onFocusCapture),onBlurCapture:Ff(b.onBlurCapture,tc.onBlurCapture),onPointerDownCapture:Ff(b.onPointerDownCapture,kc.onPointerDownCapture)}))}),rz=Wd(W(22)),sE=W(22),Cn=(null===globalThis||void 0===globalThis?0:globalThis.document)?sE.useLayoutEffect:()=>{},tE=rz["useId".toString()]||
(()=>{}),uE=0,dm=W(22),vE=(b,g,m)=>xf(void 0,null,function*(){const {placement:G="bottom",strategy:V="absolute",middleware:ka=[],platform:qa}=m,Ia=yield null==qa.isRTL?void 0:qa.isRTL(g);let Ta=yield qa.getElementRects({reference:b,floating:g,strategy:V}),{x:Xa,y:ib}=ll(Ta,G,Ia),vb=G,Lb={},cc=0;for(let Tb=0;Tb<ka.length;Tb++){const {name:kc,fn:mc}=ka[Tb],{x:Vb,y:tc,data:Ic,reset:Sc}=yield mc({x:Xa,y:ib,initialPlacement:G,placement:vb,strategy:V,middlewareData:Lb,rects:Ta,platform:qa,elements:{reference:b,
floating:g}});Xa=null!=Vb?Vb:Xa;ib=null!=tc?tc:ib;Lb=Jc(oc({},Lb),{[kc]:oc(oc({},Lb[kc]),Ic)});Sc&&50>=cc&&(cc++,"object"==typeof Sc&&(Sc.placement&&(vb=Sc.placement),Sc.rects&&(Ta=!0===Sc.rects?yield qa.getElementRects({reference:b,floating:g,strategy:V}):Sc.rects),{x:Xa,y:ib}=ll(Ta,vb,Ia)),Tb=-1)}return{x:Xa,y:ib,placement:vb,strategy:V,middlewareData:Lb}}),Ov=Math.min,Pv=Math.max,sz=b=>({name:"arrow",options:b,fn(g){return xf(this,null,function*(){const {element:m,padding:G=0}=null!=b?b:{},{x:V,
y:ka,placement:qa,rects:Ia,platform:Ta}=g;if(null==m)return{};const Xa=Vm(G),ib={x:V,y:ka},vb=uk(qa),Lb=qa.split("-")[1],cc=fk(vb);var Tb=yield Ta.getDimensions(m);const kc="y"===vb?"top":"left",mc="y"===vb?"bottom":"right";var Vb=Ia.reference[cc]+Ia.reference[vb]-ib[vb]-Ia.floating[cc];const tc=ib[vb]-Ia.reference[vb];var Ic=yield null==Ta.getOffsetParent?void 0:Ta.getOffsetParent(m);let Sc=Ic?"y"===vb?Ic.clientHeight||0:Ic.clientWidth||0:0;0===Sc&&(Sc=Ia.floating[cc]);Ic=Xa[kc];const Xc=Sc-Tb[cc]-
Xa[mc];Tb=Sc/2-Tb[cc]/2+(Vb/2-tc/2);Vb=Pv(Ic,Ov(Tb,Xc));return{[vb]:ib[vb]-(0<("start"===Lb?Xa[kc]:Xa[mc])&&Tb!==Vb&&Ia.reference[cc]<=Ia.floating[cc]?Tb<Ic?Ic-Tb:Xc-Tb:0),data:{[vb]:Vb,centerOffset:Tb-Vb}}})}}),wE={left:"right",right:"left",bottom:"top",top:"bottom"},xE={start:"end",end:"start"},tz=["top","right","bottom","left"];tz.reduce((b,g)=>b.concat(g,g+"-start",g+"-end"),[]);var yE=function(b){return void 0===b&&(b={}),{name:"flip",options:b,fn(g){return xf(this,null,function*(){var m;const {placement:G,
middlewareData:V,rects:ka,initialPlacement:qa,platform:Ia,elements:Ta}=g;var Xa=b;const {mainAxis:ib=!0,crossAxis:vb=!0,fallbackPlacements:Lb,fallbackStrategy:cc="bestFit",flipAlignment:Tb=!0}=Xa;Xa=Wc(Xa,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const kc=Wi(G);var mc=Lb||(kc!==qa&&Tb?function(Xd){const ce=km(Xd);return[Lj(Xd),ce,Lj(ce)]}(qa):[km(qa)]);mc=[qa,...mc];const Vb=yield xl(g,Xa),tc=[];Xa=(null==(m=V.flip)?void 0:m.overflows)||[];if(ib&&tc.push(Vb[kc]),
vb){const {main:Xd,cross:ce}=jl(G,ka,yield null==Ia.isRTL?void 0:Ia.isRTL(Ta.floating));tc.push(Vb[Xd],Vb[ce])}if(Xa=[...Xa,{placement:G,overflows:tc}],!tc.every(Xd=>0>=Xd)){var Ic,Sc;m=(null!=(Ic=null==(Sc=V.flip)?void 0:Sc.index)?Ic:0)+1;if(Ic=mc[m])return{data:{index:m,overflows:Xa},reset:{placement:Ic}};Ic="bottom";switch(cc){case "bestFit":var Xc;(Sc=null==(Xc=Xa.map(Xd=>[Xd,Xd.overflows.filter(ce=>0<ce).reduce((ce,De)=>ce+De,0)]).sort((Xd,ce)=>Xd[1]-ce[1])[0])?void 0:Xc[0].placement)&&(Ic=Sc);
break;case "initialPlacement":Ic=qa}if(G!==Ic)return{reset:{placement:Ic}}}return{}})}}},zE=function(b){b=void 0===b?{}:b;let {strategy:g="referenceHidden"}=b,m=Wc(b,["strategy"]);return{name:"hide",fn(G){return xf(this,null,function*(){var {rects:V}=G;switch(g){case "referenceHidden":return V=Kk(yield xl(G,Jc(oc({},m),{elementContext:"reference"})),V.reference),{data:{referenceHiddenOffsets:V,referenceHidden:gk(V)}};case "escaped":return V=Kk(yield xl(G,Jc(oc({},m),{altBoundary:!0})),V.floating),
{data:{escapedOffsets:V,escaped:gk(V)}};default:return{}}})}}},AE=function(b){return void 0===b&&(b=0),{name:"offset",options:b,fn(g){return xf(this,null,function*(){const {x:m,y:G}=g,V=yield function(ka,qa){return xf(this,null,function*(){const {placement:Ia,platform:Ta,elements:Xa}=ka;var ib=yield null==Ta.isRTL?void 0:Ta.isRTL(Xa.floating),vb=Wi(Ia);const Lb=Ia.split("-")[1],cc="x"===uk(Ia);vb=["left","top"].includes(vb)?-1:1;ib=ib&&cc?-1:1;const Tb="function"==typeof qa?qa(ka):qa;let {mainAxis:kc,
crossAxis:mc,alignmentAxis:Vb}="number"==typeof Tb?{mainAxis:Tb,crossAxis:0,alignmentAxis:null}:oc({mainAxis:0,crossAxis:0,alignmentAxis:null},Tb);return Lb&&"number"==typeof Vb&&(mc="end"===Lb?-1*Vb:Vb),cc?{x:mc*ib,y:kc*vb}:{x:kc*vb,y:mc*ib}})}(g,b);return{x:m+V.x,y:G+V.y,data:V}})}}},BE=function(b){return void 0===b&&(b={}),{name:"shift",options:b,fn(g){return xf(this,null,function*(){const {x:m,y:G,placement:V}=g;var ka=b;const {mainAxis:qa=!0,crossAxis:Ia=!1,limiter:Ta={fn:cc=>{let {x:Tb,y:kc}=
cc;return{x:Tb,y:kc}}}}=ka;var Xa=Wc(ka,["mainAxis","crossAxis","limiter"]);ka={x:m,y:G};Xa=yield xl(g,Xa);const ib=uk(Wi(V)),vb="x"===ib?"y":"x";let Lb=ka[ib];ka=ka[vb];qa&&(Lb=Pv(Lb+Xa["y"===ib?"top":"left"],Ov(Lb,Lb-Xa["y"===ib?"bottom":"right"])));Ia&&(ka=Pv(ka+Xa["y"===vb?"top":"left"],Ov(ka,ka-Xa["y"===vb?"bottom":"right"])));ka=Ta.fn(Jc(oc({},g),{[ib]:Lb,[vb]:ka}));return Jc(oc({},ka),{data:{x:ka.x-m,y:ka.y-G}})})}}},CE=function(b){return void 0===b&&(b={}),{options:b,fn(g){const {x:m,y:G,
placement:V,rects:ka,middlewareData:qa}=g,{offset:Ia=0,mainAxis:Ta=!0,crossAxis:Xa=!0}=b;var ib={x:m,y:G};g=uk(V);const vb="x"===g?"y":"x";let Lb=ib[g];ib=ib[vb];var cc="function"==typeof Ia?Ia(Jc(oc({},ka),{placement:V})):Ia;cc="number"==typeof cc?{mainAxis:cc,crossAxis:0}:oc({mainAxis:0,crossAxis:0},cc);if(Ta){var Tb="y"===g?"height":"width",kc=ka.reference[g]-ka.floating[Tb]+cc.mainAxis;Tb=ka.reference[g]+ka.reference[Tb]-cc.mainAxis;Lb<kc?Lb=kc:Lb>Tb&&(Lb=Tb)}if(Xa){var mc,Vb,tc,Ic;const Sc="y"===
g?"width":"height";kc=["top","left"].includes(Wi(V));Tb=ka.reference[vb]-ka.floating[Sc]+(kc&&null!=(mc=null==(Vb=qa.offset)?void 0:Vb[vb])?mc:0)+(kc?0:cc.crossAxis);mc=ka.reference[vb]+ka.reference[Sc]+(kc?0:null!=(tc=null==(Ic=qa.offset)?void 0:Ic[vb])?tc:0)-(kc?cc.crossAxis:0);ib<Tb?ib=Tb:ib>mc&&(ib=mc)}return{[g]:Lb,[vb]:ib}}}},uz=Math.min,Ws=Math.max,cu=Math.round,vz={getClippingRect:function(b){let {element:g,boundary:m,rootBoundary:G,strategy:V}=b;b=[...("clippingAncestors"===m?Zj(g):[].concat(m)),
G];b=b.reduce((ka,qa)=>{qa=Dg(g,qa,V);return ka.top=Ws(qa.top,ka.top),ka.right=uz(qa.right,ka.right),ka.bottom=uz(qa.bottom,ka.bottom),ka.left=Ws(qa.left,ka.left),ka},Dg(g,b[0],V));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(b){let {rect:g,offsetParent:m,strategy:G}=b;var V=Cj(m);const ka=nl(m);if(m===ka)return g;b={scrollLeft:0,scrollTop:0};var qa=0,Ia=0;(V||!V&&"fixed"!==G)&&(("body"!==vj(m)||$l(ka))&&(b=Sj(m)),
Cj(m))&&(V=nj(m,!0),qa=V.x+m.clientLeft,Ia=V.y+m.clientTop);return Jc(oc({},g),{x:g.x-b.scrollLeft+qa,y:g.y-b.scrollTop+Ia})},isElement:uj,getDimensions:pk,getOffsetParent:ik,getDocumentElement:nl,getElementRects:b=>{let {reference:g,floating:m,strategy:G}=b;b=ik(m);var V=Cj(b);const ka=nl(b);var qa;if(qa=V)qa=nj(b),qa=cu(qa.width)!==b.offsetWidth||cu(qa.height)!==b.offsetHeight;qa=nj(g,qa,"fixed"===G);let Ia={scrollLeft:0,scrollTop:0};var Ta=0,Xa=0;if(V||!V&&"fixed"!==G)(("body"!==vj(b)||$l(ka))&&
(Ia=Sj(b)),Cj(b))?(V=nj(b,!0),Ta=V.x+b.clientLeft,Xa=V.y+b.clientTop):ka&&(Ta=hk(ka));return{reference:{x:qa.left+Ia.scrollLeft-Ta,y:qa.top+Ia.scrollTop-Xa,width:qa.width,height:qa.height},floating:Jc(oc({},pk(m)),{x:0,y:0})}},getClientRects:b=>Array.from(b.getClientRects()),isRTL:b=>"rtl"===Mk(b).direction},wz=(b,g,m)=>vE(b,g,oc({platform:vz},m)),Dn=Wd(W(22),1),xz=W(22),DE=Wd(W(31),1),Qv="undefined"!==typeof document?xz.useLayoutEffect:xz.useEffect,EE=b=>{const {element:g,padding:m}=b;return{name:"arrow",
options:b,fn(G){if(Object.prototype.hasOwnProperty.call(g,"current")){if(null!=g.current)return sz({element:g.current,padding:m}).fn(G)}else if(g)return sz({element:g,padding:m}).fn(G);return{}}}},Rv=W(22),FE=(0,Rv.forwardRef)((b,g)=>{const {children:m,width:G=10,height:V=5}=b,ka=Wc(b,["children","width","height"]);return(0,Rv.createElement)(yj.svg,tf({},ka,{ref:g,width:G,height:V,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),b.asChild?m:(0,Rv.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),
GE=W(22),[Sv,Kr]=Kj("Popper"),[HE,yz]=Sv("Popper"),Tv=(0,dm.forwardRef)((b,g)=>{const {__scopePopper:m,virtualRef:G}=b;b=Wc(b,["__scopePopper","virtualRef"]);const V=yz("PopperAnchor",m),ka=(0,dm.useRef)(null);g=If(g,ka);(0,dm.useEffect)(()=>{V.onAnchorChange((null===G||void 0===G?void 0:G.current)||ka.current)});return G?null:(0,dm.createElement)(yj.div,tf({},b,{ref:g}))}),[IE,JE]=Sv("PopperContent"),[KE,LE]=Sv("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Uv=(0,dm.forwardRef)((b,g)=>
{var m,G,V,ka,qa,Ia,Ta,Xa;const {__scopePopper:ib,side:vb="bottom",sideOffset:Lb=0,align:cc="center",alignOffset:Tb=0,arrowPadding:kc=0,collisionBoundary:mc=[],collisionPadding:Vb=0,sticky:tc="partial",hideWhenDetached:Ic=!1,avoidCollisions:Sc=!0}=b;b=Wc(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Xc=yz("PopperContent",ib),[Xd,ce]=(0,dm.useState)(null);g=If(g,as=>ce(as));const [De,Oe]=
(0,dm.useState)(null);var qf=Sf(De),nf=null!==(m=null===qf||void 0===qf?void 0:qf.width)&&void 0!==m?m:0;m=null!==(G=null===qf||void 0===qf?void 0:qf.height)&&void 0!==G?G:0;G=vb+("center"!==cc?"-"+cc:"");qf="number"===typeof Vb?Vb:oc({top:0,right:0,bottom:0,left:0},Vb);const ff=Array.isArray(mc)?mc:[mc],He=0<ff.length;qf={padding:qf,boundary:ff.filter(wj),altBoundary:He};const {reference:Bd,floating:hd,strategy:md,x:od,y:Cd,placement:xe,middlewareData:Ge,update:of}=Yi({strategy:"fixed",placement:G,
whileElementsMounted:Wh,middleware:[AE({mainAxis:Lb+m,alignmentAxis:Tb}),Sc?BE(oc({mainAxis:!0,crossAxis:!1,limiter:"partial"===tc?CE():void 0},qf)):void 0,De?EE({element:De,padding:kc}):void 0,Sc?yE(oc({},qf)):void 0,NE({arrowWidth:nf,arrowHeight:m}),Ic?zE({strategy:"referenceHidden"}):void 0].filter(Ig)});Cn(()=>{Bd(Xc.anchor)},[Bd,Xc.anchor]);const kf=null!==od&&null!==Cd,[jf,Tg]=ki(xe);nf=null===(V=Ge.arrow)||void 0===V?void 0:V.x;V=null===(ka=Ge.arrow)||void 0===ka?void 0:ka.y;ka=0!==(null===
(qa=Ge.arrow)||void 0===qa?void 0:qa.centerOffset);const [Gg,qi]=(0,dm.useState)();Cn(()=>{Xd&&qi(window.getComputedStyle(Xd).zIndex)},[Xd]);const {hasParent:Sk,positionUpdateFns:cl}=LE("PopperContent",ib),Lo=!Sk;(0,dm.useLayoutEffect)(()=>{if(!Lo)return cl.add(of),()=>{cl.delete(of)}},[Lo,cl,of]);(0,dm.useLayoutEffect)(()=>{Lo&&kf&&Array.from(cl).reverse().forEach(as=>requestAnimationFrame(as))},[Lo,kf,cl]);qa=Jc(oc({"data-side":jf,"data-align":Tg},b),{ref:g,style:Jc(oc({},b.style),{animation:kf?
void 0:"none",opacity:null!==(Ia=Ge.hide)&&void 0!==Ia&&Ia.referenceHidden?0:void 0})});return(0,dm.createElement)("div",{ref:hd,"data-radix-popper-content-wrapper":"",style:{position:md,left:0,top:0,transform:kf?`translate3d(${Math.round(od)}px, ${Math.round(Cd)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Gg,["--radix-popper-transform-origin"]:[null===(Ta=Ge.transformOrigin)||void 0===Ta?void 0:Ta.x,null===(Xa=Ge.transformOrigin)||void 0===Xa?void 0:Xa.y].join(" ")}},(0,dm.createElement)(IE,
{scope:ib,placedSide:jf,onArrowChange:Oe,arrowX:nf,arrowY:V,shouldHideArrow:ka},Lo?(0,dm.createElement)(KE,{scope:ib,hasParent:!0,positionUpdateFns:cl},(0,dm.createElement)(yj.div,qa)):(0,dm.createElement)(yj.div,qa)))}),ME={top:"bottom",right:"left",bottom:"top",left:"right"},zz=(0,dm.forwardRef)(function(b,g){var {__scopePopper:m}=b;b=Wc(b,["__scopePopper"]);m=JE("PopperArrow",m);return(0,dm.createElement)("span",{ref:m.onArrowChange,style:{position:"absolute",left:m.arrowX,top:m.arrowY,[ME[m.placedSide]]:0,
transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[m.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[m.placedSide],visibility:m.shouldHideArrow?"hidden":void 0}},(0,dm.createElement)(FE,tf({},b,{ref:g,style:Jc(oc({},b.style),{display:"block"})})))}),NE=b=>({name:"transformOrigin",options:b,fn(g){var m,G,V,ka,qa;const {placement:Ia,rects:Ta,middlewareData:Xa}=
g,ib=(g=0!==(null===(m=Xa.arrow)||void 0===m?void 0:m.centerOffset))?0:b.arrowWidth;m=g?0:b.arrowHeight;const [vb,Lb]=ki(Ia),cc={start:"0%",center:"50%",end:"100%"}[Lb],Tb=(null!==(G=null===(V=Xa.arrow)||void 0===V?void 0:V.x)&&void 0!==G?G:0)+ib/2;G=(null!==(ka=null===(qa=Xa.arrow)||void 0===qa?void 0:qa.y)&&void 0!==ka?ka:0)+m/2;qa=ka="";"bottom"===vb?(ka=g?cc:`${Tb}px`,qa=`${-m}px`):"top"===vb?(ka=g?cc:`${Tb}px`,qa=`${Ta.floating.height+m}px`):"right"===vb?(ka=`${-m}px`,qa=g?cc:`${G}px`):"left"===
vb&&(ka=`${Ta.floating.width+m}px`,qa=g?cc:`${G}px`);return{data:{x:ka,y:qa}}}}),Vv=b=>{const {__scopePopper:g,children:m}=b,[G,V]=(0,dm.useState)(null);return(0,dm.createElement)(HE,{scope:g,anchor:G,onAnchorChange:V},m)},Az=W(22),OE=Wd(W(31)),Bz=(0,Az.forwardRef)((b,g)=>{var m;const {container:G=null===globalThis||void 0===globalThis?void 0:null===(m=globalThis.document)||void 0===m?void 0:m.body}=b;b=Wc(b,["container"]);return G?OE.default.createPortal((0,Az.createElement)(yj.div,tf({},b,{ref:g})),
G):null}),tp=W(22),PE=W(31),Xs=b=>{const {present:g,children:m}=b;b=pg(g);const G="function"===typeof m?m({present:b.isPresent}):tp.Children.only(m),V=If(b.ref,G.ref);return"function"===typeof m||b.isPresent?(0,tp.cloneElement)(G,{ref:V}):null};Xs.displayName="Presence";var du=W(22),Cz=W(22),Dz=(0,Cz.forwardRef)((b,g)=>(0,Cz.createElement)(yj.span,tf({},b,{ref:g,style:oc({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",
wordWrap:"normal"},b.style)}))),[eu]=Kj("Tooltip",[Kr]),fu=Kr(),[QE,Wv]=eu("TooltipProvider"),[RE,Ys]=eu("Tooltip"),SE=(0,eh.forwardRef)((b,g)=>{var {__scopeTooltip:m}=b;const G=Wc(b,["__scopeTooltip"]),V=Ys("TooltipTrigger",m),ka=Wv("TooltipTrigger",m);m=fu(m);const qa=(0,eh.useRef)(null);g=If(g,qa,V.onTriggerChange);const Ia=(0,eh.useRef)(!1),Ta=(0,eh.useRef)(!1),Xa=(0,eh.useCallback)(()=>Ia.current=!1,[]);(0,eh.useEffect)(()=>()=>document.removeEventListener("pointerup",Xa),[Xa]);return(0,eh.createElement)(Tv,
tf({asChild:!0},m),(0,eh.createElement)(yj.button,tf({"aria-describedby":V.open?V.contentId:void 0,"data-state":V.stateAttribute},G,{ref:g,onPointerMove:Ff(b.onPointerMove,ib=>{"touch"===ib.pointerType||Ta.current||ka.isPointerInTransitRef.current||(V.onTriggerEnter(),Ta.current=!0)}),onPointerLeave:Ff(b.onPointerLeave,()=>{V.onTriggerLeave();Ta.current=!1}),onPointerDown:Ff(b.onPointerDown,()=>{Ia.current=!0;document.addEventListener("pointerup",Xa,{once:!0})}),onFocus:Ff(b.onFocus,()=>{if(!Ia.current)V.onOpen()}),
onBlur:Ff(b.onBlur,V.onClose),onClick:Ff(b.onClick,V.onClose)})))}),[TE,UE]=eu("TooltipPortal",{forceMount:void 0}),VE=(0,eh.forwardRef)((b,g)=>{var m=UE("TooltipContent",b.__scopeTooltip);const {forceMount:G=m.forceMount,side:V="top"}=b;m=Wc(b,["forceMount","side"]);b=Ys("TooltipContent",b.__scopeTooltip);return(0,eh.createElement)(Xs,{present:G||b.open},b.disableHoverableContent?(0,eh.createElement)(Ez,tf({side:V},m,{ref:g})):(0,eh.createElement)(WE,tf({side:V},m,{ref:g})))}),WE=(0,eh.forwardRef)((b,
g)=>{const m=Ys("TooltipContent",b.__scopeTooltip),G=Wv("TooltipContent",b.__scopeTooltip),V=(0,eh.useRef)(null);g=If(g,V);const [ka,qa]=(0,eh.useState)(null),{trigger:Ia,onClose:Ta}=m,Xa=V.current,{onPointerInTransitChange:ib}=G,vb=(0,eh.useCallback)(()=>{qa(null);ib(!1)},[ib]),Lb=(0,eh.useCallback)((cc,Tb)=>{const kc=Ti({x:cc.clientX,y:cc.clientY},cc.currentTarget.getBoundingClientRect()),mc="right"===kc||"bottom"===kc?-5:5;cc="right"===kc||"left"===kc?{x:cc.clientX+mc,y:cc.clientY}:{x:cc.clientX,
y:cc.clientY+mc};Tb=Tb.getBoundingClientRect();const {top:Vb,right:tc,bottom:Ic,left:Sc}=Tb;Tb=Qb([cc,{x:Sc,y:Vb},{x:tc,y:Vb},{x:tc,y:Ic},{x:Sc,y:Ic}]);qa(Tb);ib(!0)},[ib]);(0,eh.useEffect)(()=>()=>vb(),[vb]);(0,eh.useEffect)(()=>{if(Ia&&Xa){const cc=kc=>Lb(kc,Xa),Tb=kc=>Lb(kc,Ia);Ia.addEventListener("pointerleave",cc);Xa.addEventListener("pointerleave",Tb);return()=>{Ia.removeEventListener("pointerleave",cc);Xa.removeEventListener("pointerleave",Tb)}}},[Ia,Xa,Lb,vb]);(0,eh.useEffect)(()=>{if(ka){const cc=
Tb=>{var kc=Tb.target;Tb={x:Tb.clientX,y:Tb.clientY};kc=(null===Ia||void 0===Ia?void 0:Ia.contains(kc))||(null===Xa||void 0===Xa?void 0:Xa.contains(kc));const {x:mc,y:Vb}=Tb;Tb=!1;for(let tc=0,Ic=ka.length-1;tc<ka.length;Ic=tc++){const Sc=ka[tc].x,Xc=ka[tc].y,Xd=ka[Ic].x,ce=ka[Ic].y;Xc>Vb!==ce>Vb&&mc<(Xd-Sc)*(Vb-Xc)/(ce-Xc)+Sc&&(Tb=!Tb)}Tb=!Tb;kc?vb():Tb&&(vb(),Ta())};document.addEventListener("pointermove",cc);return()=>document.removeEventListener("pointermove",cc)}},[Ia,Xa,ka,Ta,vb]);return(0,eh.createElement)(Ez,
tf({},b,{ref:g}))}),[XE,YE]=eu("Tooltip",{isInside:!1}),Ez=(0,eh.forwardRef)((b,g)=>{const {__scopeTooltip:m,children:G,"aria-label":V,onEscapeKeyDown:ka,onPointerDownOutside:qa}=b;b=Wc(b,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Ia=Ys("TooltipContent",m),Ta=fu(m),{onClose:Xa}=Ia;(0,eh.useEffect)(()=>{document.addEventListener("tooltip.open",Xa);return()=>document.removeEventListener("tooltip.open",Xa)},[Xa]);(0,eh.useEffect)(()=>{if(Ia.trigger){const ib=
vb=>{vb=vb.target;null!==vb&&void 0!==vb&&vb.contains(Ia.trigger)&&Xa()};window.addEventListener("scroll",ib,{capture:!0});return()=>window.removeEventListener("scroll",ib,{capture:!0})}},[Ia.trigger,Xa]);return(0,eh.createElement)(bu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ka,onPointerDownOutside:qa,onFocusOutside:ib=>ib.preventDefault(),onDismiss:Xa},(0,eh.createElement)(Uv,tf({"data-state":Ia.stateAttribute},Ta,b,{ref:g,style:Jc(oc({},b.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),
(0,eh.createElement)(pz,null,G),(0,eh.createElement)(XE,{scope:m,isInside:!0},(0,eh.createElement)(Dz,{id:Ia.contentId,role:"tooltip"},V||G))))}),ZE=(0,eh.forwardRef)((b,g)=>{const {__scopeTooltip:m}=b;b=Wc(b,["__scopeTooltip"]);const G=fu(m);return YE("TooltipArrow",m).isInside?null:(0,eh.createElement)(zz,tf({},G,b,{ref:g}))}),$E=b=>{const {__scopeTooltip:g,delayDuration:m=700,skipDelayDuration:G=300,disableHoverableContent:V=!1,children:ka}=b,[qa,Ia]=(0,eh.useState)(!0),Ta=(0,eh.useRef)(!1),Xa=
(0,eh.useRef)(0);(0,eh.useEffect)(()=>{const ib=Xa.current;return()=>window.clearTimeout(ib)},[]);return(0,eh.createElement)(QE,{scope:g,isOpenDelayed:qa,delayDuration:m,onOpen:(0,eh.useCallback)(()=>{window.clearTimeout(Xa.current);Ia(!1)},[]),onClose:(0,eh.useCallback)(()=>{window.clearTimeout(Xa.current);Xa.current=window.setTimeout(()=>Ia(!0),G)},[G]),isPointerInTransitRef:Ta,onPointerInTransitChange:(0,eh.useCallback)(ib=>{Ta.current=ib},[]),disableHoverableContent:V},ka)},aF=b=>{const {__scopeTooltip:g,
children:m,open:G,defaultOpen:V=!1,onOpenChange:ka,disableHoverableContent:qa,delayDuration:Ia}=b,Ta=Wv("Tooltip",b.__scopeTooltip);b=fu(g);const [Xa,ib]=(0,eh.useState)(null),vb=vi(),Lb=(0,eh.useRef)(0),cc=null!==qa&&void 0!==qa?qa:Ta.disableHoverableContent,Tb=null!==Ia&&void 0!==Ia?Ia:Ta.delayDuration,kc=(0,eh.useRef)(!1),[mc=!1,Vb]=Dj({prop:G,defaultProp:V,onChange:Xd=>{if(Xd)Ta.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else Ta.onClose();null===ka||void 0===ka||ka(Xd)}}),
tc=(0,eh.useMemo)(()=>mc?kc.current?"delayed-open":"instant-open":"closed",[mc]),Ic=(0,eh.useCallback)(()=>{window.clearTimeout(Lb.current);kc.current=!1;Vb(!0)},[Vb]),Sc=(0,eh.useCallback)(()=>{window.clearTimeout(Lb.current);Vb(!1)},[Vb]),Xc=(0,eh.useCallback)(()=>{window.clearTimeout(Lb.current);Lb.current=window.setTimeout(()=>{kc.current=!0;Vb(!0)},Tb)},[Tb,Vb]);(0,eh.useEffect)(()=>()=>window.clearTimeout(Lb.current),[]);return(0,eh.createElement)(Vv,b,(0,eh.createElement)(RE,{scope:g,contentId:vb,
open:mc,stateAttribute:tc,trigger:Xa,onTriggerChange:ib,onTriggerEnter:(0,eh.useCallback)(()=>{Ta.isOpenDelayed?Xc():Ic()},[Ta.isOpenDelayed,Xc,Ic]),onTriggerLeave:(0,eh.useCallback)(()=>{cc?Sc():window.clearTimeout(Lb.current)},[Sc,cc]),onOpen:Ic,onClose:Sc,disableHoverableContent:cc},m))},bF=SE,cF=b=>{const {__scopeTooltip:g,forceMount:m,children:G,container:V}=b;b=Ys("TooltipPortal",g);return(0,eh.createElement)(TE,{scope:g,forceMount:m},(0,eh.createElement)(Xs,{present:m||b.open},(0,eh.createElement)(Bz,
{asChild:!0,container:V},G)))},dF=VE,eF=ZE;mb=W(587);mb=W(587);var Fz=Wd(W(22));mb=W(587);var Gz=({active:b,style:g,icon:m,otherIcon:G,onClick:V})=>{const [ka,qa]=Fz.default.useState(!1);Fz.default.useEffect(()=>{qa(!0);const Ia=setTimeout(()=>{qa(!1)},500);return()=>clearTimeout(Ia)},[b]);return(0,mb.jsx)("button",{"data-active":b,"data-recently-changed":ka,"data-html2canvas-ignore":"true",style:g,className:"tl-circle-button",onPointerDown:V,children:(0,mb.jsxs)("div",{className:"tl-circle-button-icons-wrapper",
"data-icons-count":G?2:1,children:[G&&(0,mb.jsx)(Eh,{name:G}),(0,mb.jsx)(Eh,{name:m})]})})},ko=W(22),Sg=W(22),dp=Wd(W(22)),Hz=W(22),fF=(0,Hz.createContext)(void 0),gF=W(22),Xv=0,Yp=W(22),Iz={bubbles:!1,cancelable:!0},Yv=(0,Yp.forwardRef)((b,g)=>{const {loop:m=!1,trapped:G=!1,onMountAutoFocus:V,onUnmountAutoFocus:ka}=b;b=Wc(b,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [qa,Ia]=(0,Yp.useState)(null),Ta=uf(V),Xa=uf(ka),ib=(0,Yp.useRef)(null);g=If(g,cc=>Ia(cc));const vb=(0,Yp.useRef)({paused:!1,
pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Yp.useEffect)(()=>{if(G){let cc=function(kc){!vb.paused&&qa&&(kc=kc.target,qa.contains(kc)?ib.current=kc:Bc(ib.current,{select:!0}))},Tb=function(kc){!vb.paused&&qa&&(qa.contains(kc.relatedTarget)||Bc(ib.current,{select:!0}))};document.addEventListener("focusin",cc);document.addEventListener("focusout",Tb);return()=>{document.removeEventListener("focusin",cc);document.removeEventListener("focusout",Tb)}}},[G,qa,vb.paused]);(0,Yp.useEffect)(()=>
{if(qa){Jz.add(vb);const cc=document.activeElement;if(!qa.contains(cc)){const Tb=new CustomEvent("focusScope.autoFocusOnMount",Iz);qa.addEventListener("focusScope.autoFocusOnMount",Ta);qa.dispatchEvent(Tb);Tb.defaultPrevented||(Pb(Uc(sb(qa)),{select:!0}),document.activeElement===cc&&Bc(qa))}return()=>{qa.removeEventListener("focusScope.autoFocusOnMount",Ta);setTimeout(()=>{const Tb=new CustomEvent("focusScope.autoFocusOnUnmount",Iz);qa.addEventListener("focusScope.autoFocusOnUnmount",Xa);qa.dispatchEvent(Tb);
Tb.defaultPrevented||Bc(null!==cc&&void 0!==cc?cc:document.body,{select:!0});qa.removeEventListener("focusScope.autoFocusOnUnmount",Xa);Jz.remove(vb)},0)}}},[qa,Ta,Xa,vb]);const Lb=(0,Yp.useCallback)(cc=>{if((m||G)&&!vb.paused){var Tb=document.activeElement;if("Tab"===cc.key&&!cc.altKey&&!cc.ctrlKey&&!cc.metaKey&&Tb){const mc=cc.currentTarget;var kc=mc;const Vb=sb(kc),tc=Mb(Vb,kc);kc=Mb(Vb.reverse(),kc);const [Ic,Sc]=[tc,kc];Ic&&Sc?cc.shiftKey||Tb!==Sc?cc.shiftKey&&Tb===Ic&&(cc.preventDefault(),m&&
Bc(Sc,{select:!0})):(cc.preventDefault(),m&&Bc(Ic,{select:!0})):Tb===mc&&cc.preventDefault()}}},[m,G,vb.paused]);return(0,Yp.createElement)(yj.div,tf({tabIndex:-1},b,{ref:g,onKeyDown:Lb}))}),Jz=function(){let b=[];return{add(g){const m=b[0];g===m||null!==m&&void 0!==m&&m.pause();b=Pc(b,g);b.unshift(g)},remove(g){var m;b=Pc(b,g);null===(m=b[0])||void 0===m||m.resume()}}}(),em=W(22),hF={bubbles:!1,cancelable:!0},[Zv,Kz,iF]=Eb("RovingFocusGroup"),[jF,gu]=Kj("RovingFocusGroup",[iF]),[kF,lF]=jF("RovingFocusGroup"),
Lz=(0,em.forwardRef)((b,g)=>(0,em.createElement)(Zv.Provider,{scope:b.__scopeRovingFocusGroup},(0,em.createElement)(Zv.Slot,{scope:b.__scopeRovingFocusGroup},(0,em.createElement)(mF,tf({},b,{ref:g}))))),mF=(0,em.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:m,orientation:G,loop:V=!1,dir:ka,currentTabStopId:qa,defaultCurrentTabStopId:Ia,onCurrentTabStopIdChange:Ta,onEntryFocus:Xa}=b,ib=Wc(b,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),
vb=(0,em.useRef)(null);g=If(g,vb);const Lb=Sb(ka),[cc=null,Tb]=Dj({prop:qa,defaultProp:Ia,onChange:Ta}),[kc,mc]=(0,em.useState)(!1),Vb=uf(Xa),tc=Kz(m),Ic=(0,em.useRef)(!1),[Sc,Xc]=(0,em.useState)(0);(0,em.useEffect)(()=>{const Xd=vb.current;if(Xd)return Xd.addEventListener("rovingFocusGroup.onEntryFocus",Vb),()=>Xd.removeEventListener("rovingFocusGroup.onEntryFocus",Vb)},[Vb]);return(0,em.createElement)(kF,{scope:m,orientation:G,dir:Lb,loop:V,currentTabStopId:cc,onItemFocus:(0,em.useCallback)(Xd=>
Tb(Xd),[Tb]),onItemShiftTab:(0,em.useCallback)(()=>mc(!0),[]),onFocusableItemAdd:(0,em.useCallback)(()=>Xc(Xd=>Xd+1),[]),onFocusableItemRemove:(0,em.useCallback)(()=>Xc(Xd=>Xd-1),[])},(0,em.createElement)(yj.div,tf({tabIndex:kc||0===Sc?-1:0,"data-orientation":G},ib,{ref:g,style:oc({outline:"none"},b.style),onMouseDown:Ff(b.onMouseDown,()=>{Ic.current=!0}),onFocus:Ff(b.onFocus,Xd=>{var ce=!Ic.current;if(Xd.target===Xd.currentTarget&&ce&&!kc&&(ce=new CustomEvent("rovingFocusGroup.onEntryFocus",hF),
Xd.currentTarget.dispatchEvent(ce),!ce.defaultPrevented)){Xd=tc().filter(Oe=>Oe.focusable);ce=Xd.find(Oe=>Oe.active);const De=Xd.find(Oe=>Oe.id===cc);Xd=[ce,De,...Xd].filter(Boolean).map(Oe=>Oe.ref.current);Sd(Xd)}Ic.current=!1}),onBlur:Ff(b.onBlur,()=>mc(!1))})))}),Mz=(0,em.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:m,focusable:G=!0,active:V=!1}=b,ka=Wc(b,["__scopeRovingFocusGroup","focusable","active"]),qa=vi(),Ia=lF("RovingFocusGroupItem",m),Ta=Ia.currentTabStopId===qa,Xa=Kz(m),{onFocusableItemAdd:ib,
onFocusableItemRemove:vb}=Ia;(0,em.useEffect)(()=>{if(G)return ib(),()=>vb()},[G,ib,vb]);return(0,em.createElement)(Zv.ItemSlot,{scope:m,id:qa,focusable:G,active:V},(0,em.createElement)(yj.span,tf({tabIndex:Ta?0:-1,"data-orientation":Ia.orientation},ka,{ref:g,onMouseDown:Ff(b.onMouseDown,Lb=>{if(G)Ia.onItemFocus(qa);else Lb.preventDefault()}),onFocus:Ff(b.onFocus,()=>Ia.onItemFocus(qa)),onKeyDown:Ff(b.onKeyDown,Lb=>{if("Tab"===Lb.key&&Lb.shiftKey)Ia.onItemShiftTab();else if(Lb.target===Lb.currentTarget){var cc=
yd(Lb,Ia.orientation,Ia.dir);if(void 0!==cc){Lb.preventDefault();let Tb=Xa().filter(kc=>kc.focusable).map(kc=>kc.ref.current);if("last"===cc)Tb.reverse();else if("prev"===cc||"next"===cc)"prev"===cc&&Tb.reverse(),Lb=Tb.indexOf(Lb.currentTarget),Tb=Ia.loop?Gd(Tb,Lb+1):Tb.slice(Lb+1);setTimeout(()=>Sd(Tb))}}})})))}),nF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},oF=function(b){return"undefined"===typeof document?null:(Array.isArray(b)?
b[0]:b).ownerDocument.body},Lr=new WeakMap,hu=new WeakMap,iu={},$v=0,aw=function(b,g,m){void 0===g&&(g=oF(b));void 0===m&&(m="data-aria-hidden");var G=Array.isArray(b)?b:[b];iu[m]||(iu[m]=new WeakMap);var V=iu[m],ka=[],qa=new Set,Ia=function(Xa){Xa&&!qa.has(Xa)&&(qa.add(Xa),Ia(Xa.parentNode))};G.forEach(Ia);var Ta=function(Xa){!Xa||0<=G.indexOf(Xa)||Array.prototype.forEach.call(Xa.children,function(ib){if(qa.has(ib))Ta(ib);else{var vb=ib.getAttribute("aria-hidden");vb=null!==vb&&"false"!==vb;var Lb=
(Lr.get(ib)||0)+1,cc=(V.get(ib)||0)+1;Lr.set(ib,Lb);V.set(ib,cc);ka.push(ib);1===Lb&&vb&&hu.set(ib,!0);1===cc&&ib.setAttribute(m,"true");vb||ib.setAttribute("aria-hidden","true")}})};Ta(g);qa.clear();$v++;return function(){ka.forEach(function(Xa){var ib=Lr.get(Xa)-1,vb=V.get(Xa)-1;Lr.set(Xa,ib);V.set(Xa,vb);ib||(hu.has(Xa)||Xa.removeAttribute("aria-hidden"),hu.delete(Xa));vb||Xa.removeAttribute(m)});$v--;$v||(Lr=new WeakMap,Lr=new WeakMap,hu=new WeakMap,iu={})}},pF=Wd(Rj(),1),{__assign:Zp,__rest:Nz,
__spreadArray:qF}=pF.default,Oz=Wd(W(22)),up=Wd(W(22)),rF=W(22),sF=Wd(W(22)),Pz=function(b){var g=b.sideCar;b=Nz(b,["sideCar"]);if(!g)throw Error("Sidecar: please provide `sideCar` property to import the right car");g=g.read();if(!g)throw Error("Sidecar medium not found");return sF.createElement(g,Zp({},b))};Pz.isSideCarExport=!0;var Qz=function(b){void 0===b&&(b={});var g=Uf(null);g.options=Zp({async:!0,ssr:!1},b);return g}(),bw=function(){},ju=up.forwardRef(function(b,g){var m=up.useRef(null),G=
up.useState({onScrollCapture:bw,onWheelCapture:bw,onTouchMoveCapture:bw}),V=G[0];G=G[1];var ka=b.forwardProps,qa=b.children,Ia=b.className,Ta=b.removeScrollBar,Xa=b.enabled,ib=b.shards,vb=b.sideCar,Lb=b.noIsolation,cc=b.inert,Tb=b.allowPinchZoom,kc=b.as;kc=void 0===kc?"div":kc;b=Nz(b,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));g=Hd([m,g]);V=Zp(Zp({},b),V);return up.createElement(up.Fragment,null,Xa&&up.createElement(vb,{sideCar:Qz,
removeScrollBar:Ta,shards:ib,noIsolation:Lb,inert:cc,setCallbacks:G,allowPinchZoom:!!Tb,lockRef:m}),ka?up.cloneElement(up.Children.only(qa),Zp(Zp({},V),{ref:g})):up.createElement(kc,Zp({},V,{className:Ia,ref:g}),qa))});ju.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ju.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var pm=Wd(W(22)),Rz=Wd(W(22)),tF=Wd(W(22)),uF=function(){var b=0,g=null;return{add:function(m){if(0==b){if(document){var G=document.createElement("style");
G.type="text/css";var V="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;V&&G.setAttribute("nonce",V)}else G=null;if(g=G)G=g,G.styleSheet?G.styleSheet.cssText=m:G.appendChild(document.createTextNode(m)),m=g,(document.head||document.getElementsByTagName("head")[0]).appendChild(m)}b++},remove:function(){b--;!b&&g&&(g.parentNode&&g.parentNode.removeChild(g),g=null)}}},vF=function(){var b=uF();return function(g,m){tF.useEffect(function(){b.add(g);return function(){b.remove()}},[g&&m])}},
Sz=function(){var b=vF();return function(g){b(g.styles,g.dynamic);return null}},wF={left:0,top:0,right:0,gap:0},xF=Sz(),yF=function(b,g,m,G){var V=b.left,ka=b.top,qa=b.right;b=b.gap;void 0===m&&(m="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(G,";\n   padding-right: ").concat(b,"px ").concat(G,";\n  }\n  body {\n    overflow: hidden ").concat(G,";\n    overscroll-behavior: contain;\n    ").concat([g&&"position: relative ".concat(G,";"),"margin"===m&&"\n    padding-left: ".concat(V,
"px;\n    padding-top: ").concat(ka,"px;\n    padding-right: ").concat(qa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(b,"px ").concat(G,";\n    "),"padding"===m&&"padding-right: ".concat(b,"px ").concat(G,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(b,"px ").concat(G,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(b,"px ").concat(G,";\n  }\n  \n  .").concat("right-scroll-bar-position",
" .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(G,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(G,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(b,"px;\n  }\n")},zF=function(b){var g=b.noRelative,m=b.noImportant;b=b.gapMode;var G=void 0===b?"margin":b;b=Rz.useMemo(function(){var V=G;void 0===V&&(V="margin");if("undefined"===typeof window)V=wF;else{var ka=window.getComputedStyle(document.body),
qa=ka["padding"===V?"paddingTop":"marginTop"],Ia=ka["padding"===V?"paddingRight":"marginRight"];V=[parseInt(ka["padding"===V?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(qa||"",10)||0,parseInt(Ia||"",10)||0];V={left:V[0],top:V[1],right:V[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+V[2]-V[0])}}return V},[G]);return Rz.createElement(xF,{styles:yF(b,!g,G,m?"":"!important")})},cw=!1;if("undefined"!==typeof window)try{var ku=Object.defineProperty({},"passive",{get:function(){return cw=
!0}});window.addEventListener("test",ku,ku);window.removeEventListener("test",ku,ku)}catch(b){cw=!1}var Mr=cw?{passive:!1}:!1,Tz=function(b,g){var m=window.getComputedStyle(b);return"hidden"!==m[g]&&!(m.overflowY===m.overflowX&&"TEXTAREA"!==b.tagName&&"visible"===m[g])},Uz=function(b,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(Vz(b,g)){var m=Wz(b,g);if(m[1]>m[2])return!0}g=g.parentNode}while(g&&g!==document.body);return!1},Vz=function(b,g){return"v"===b?Tz(g,"overflowY"):
Tz(g,"overflowX")},Wz=function(b,g){return"v"===b?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},lu=function(b){return"changedTouches"in b?[b.changedTouches[0].clientX,b.changedTouches[0].clientY]:[0,0]},Xz=function(b){return b&&"current"in b?b.current:b},AF=function(b){return"\n  .block-interactivity-".concat(b," {pointer-events: none;}\n  .allow-interactivity-").concat(b," {pointer-events: all;}\n")},BF=0,Nr=[];Qz.useMedium(function(b){var g=pm.useRef([]),
m=pm.useRef([0,0]),G=pm.useRef(),V=pm.useState(BF++)[0],ka=pm.useState(function(){return Sz()})[0],qa=pm.useRef(b);pm.useEffect(function(){qa.current=b},[b]);pm.useEffect(function(){if(b.inert){document.body.classList.add("block-interactivity-".concat(V));var Tb=qF([b.lockRef.current],(b.shards||[]).map(Xz),!0).filter(Boolean);Tb.forEach(function(kc){return kc.classList.add("allow-interactivity-".concat(V))});return function(){document.body.classList.remove("block-interactivity-".concat(V));Tb.forEach(function(kc){return kc.classList.remove("allow-interactivity-".concat(V))})}}},
[b.inert,b.lockRef.current,b.shards]);var Ia=pm.useCallback(function(Tb,kc){if("touches"in Tb&&2===Tb.touches.length)return!qa.current.allowPinchZoom;var mc=lu(Tb),Vb=m.current,tc="deltaX"in Tb?Tb.deltaX:Vb[0]-mc[0];Vb="deltaY"in Tb?Tb.deltaY:Vb[1]-mc[1];var Ic=Tb.target,Sc=Math.abs(tc)>Math.abs(Vb)?"h":"v";if("touches"in Tb&&"h"===Sc&&"range"===Ic.type)return!1;var Xc=Uz(Sc,Ic);if(!Xc)return!0;Xc?mc=Sc:(mc="v"===Sc?"h":"v",Xc=Uz(Sc,Ic));if(!Xc)return!1;!G.current&&"changedTouches"in Tb&&(tc||Vb)&&
(G.current=mc);if(!mc)return!0;mc=G.current||mc;Vb="h"===mc?tc:Vb;tc=window.getComputedStyle(kc).direction;tc="h"===mc&&"rtl"===tc?-1:1;Sc=tc*Vb;Tb=Tb.target;Vb=kc.contains(Tb);Ic=!1;Sc=0<Sc;var Xd=Xc=0;do{var ce=Wz(mc,Tb),De=ce[0];ce=ce[1]-ce[2]-tc*De;(De||ce)&&Vz(mc,Tb)&&(Xc+=ce,Xd+=De);Tb=Tb.parentNode}while(!Vb&&Tb!==document.body||Vb&&(kc.contains(Tb)||kc===Tb));Sc&&0===Xc?Ic=!0:Sc||0!==Xd||(Ic=!0);return Ic},[]),Ta=pm.useCallback(function(Tb){if(Nr.length&&Nr[Nr.length-1]===ka){var kc="deltaY"in
Tb?[Tb.deltaX,Tb.deltaY]:lu(Tb),mc=g.current.filter(function(Vb){var tc;if(tc=Vb.name===Tb.type&&Vb.target===Tb.target)Vb=Vb.delta,tc=Vb[0]===kc[0]&&Vb[1]===kc[1];return tc})[0];mc&&mc.should?Tb.cancelable&&Tb.preventDefault():mc||(mc=(qa.current.shards||[]).map(Xz).filter(Boolean).filter(function(Vb){return Vb.contains(Tb.target)}),(0<mc.length?Ia(Tb,mc[0]):!qa.current.noIsolation)&&Tb.cancelable&&Tb.preventDefault())}},[]),Xa=pm.useCallback(function(Tb,kc,mc,Vb){var tc={name:Tb,delta:kc,target:mc,
should:Vb};g.current.push(tc);setTimeout(function(){g.current=g.current.filter(function(Ic){return Ic!==tc})},1)},[]),ib=pm.useCallback(function(Tb){m.current=lu(Tb);G.current=void 0},[]),vb=pm.useCallback(function(Tb){Xa(Tb.type,[Tb.deltaX,Tb.deltaY],Tb.target,Ia(Tb,b.lockRef.current))},[]),Lb=pm.useCallback(function(Tb){Xa(Tb.type,lu(Tb),Tb.target,Ia(Tb,b.lockRef.current))},[]);pm.useEffect(function(){Nr.push(ka);b.setCallbacks({onScrollCapture:vb,onWheelCapture:vb,onTouchMoveCapture:Lb});document.addEventListener("wheel",
Ta,Mr);document.addEventListener("touchmove",Ta,Mr);document.addEventListener("touchstart",ib,Mr);return function(){Nr=Nr.filter(function(Tb){return Tb!==ka});document.removeEventListener("wheel",Ta,Mr);document.removeEventListener("touchmove",Ta,Mr);document.removeEventListener("touchstart",ib,Mr)}},[]);var cc=b.removeScrollBar;return pm.createElement(pm.Fragment,null,b.inert?pm.createElement(ka,{styles:AF(V)}):null,cc?pm.createElement(zF,{gapMode:"margin"}):null)});var mu=Oz.forwardRef(function(b,
g){return Oz.createElement(ju,Zp({},b,{ref:g,sideCar:Pz}))});mu.classNames=ju.classNames;var dw=["Enter"," "],Yz=["ArrowUp","PageDown","End"],CF=["ArrowDown","PageUp","Home",...Yz];[...dw];[...dw];var [vp,DF,EF]=Eb("Menu"),[Xq,nu]=Kj("Menu",[EF,Kr,gu]),ew=Kr(),Zz=gu(),[FF,ou]=Xq("Menu"),[GF,fw]=Xq("Menu"),$z=(0,Sg.forwardRef)((b,g)=>{var {__scopeMenu:m}=b;b=Wc(b,["__scopeMenu"]);m=ew(m);return(0,Sg.createElement)(Tv,tf({},m,b,{ref:g}))}),[,HF]=Xq("MenuPortal",{forceMount:void 0}),[IF,aA]=Xq("MenuContent"),
bA=(0,Sg.forwardRef)((b,g)=>{var m=HF("MenuContent",b.__scopeMenu);({forceMount:m=m.forceMount}=b);const G=Wc(b,["forceMount"]),V=ou("MenuContent",b.__scopeMenu),ka=fw("MenuContent",b.__scopeMenu);return(0,Sg.createElement)(vp.Provider,{scope:b.__scopeMenu},(0,Sg.createElement)(Xs,{present:m||V.open},(0,Sg.createElement)(vp.Slot,{scope:b.__scopeMenu},ka.modal?(0,Sg.createElement)(JF,tf({},G,{ref:g})):(0,Sg.createElement)(KF,tf({},G,{ref:g})))))}),JF=(0,Sg.forwardRef)((b,g)=>{const m=ou("MenuContent",
b.__scopeMenu),G=(0,Sg.useRef)(null);g=If(g,G);(0,Sg.useEffect)(()=>{const V=G.current;if(V)return aw(V)},[]);return(0,Sg.createElement)(cA,tf({},b,{ref:g,trapFocus:m.open,disableOutsidePointerEvents:m.open,disableOutsideScroll:!0,onFocusOutside:Ff(b.onFocusOutside,V=>V.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>m.onOpenChange(!1)}))}),KF=(0,Sg.forwardRef)((b,g)=>{const m=ou("MenuContent",b.__scopeMenu);return(0,Sg.createElement)(cA,tf({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,
disableOutsideScroll:!1,onDismiss:()=>m.onOpenChange(!1)}))}),cA=(0,Sg.forwardRef)((b,g)=>{const {__scopeMenu:m,loop:G=!1,trapFocus:V,onOpenAutoFocus:ka,onCloseAutoFocus:qa,disableOutsidePointerEvents:Ia,onEscapeKeyDown:Ta,onPointerDownOutside:Xa,onFocusOutside:ib,onInteractOutside:vb,onDismiss:Lb,disableOutsideScroll:cc}=b,Tb=Wc(b,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),
kc=ou("MenuContent",m),mc=fw("MenuContent",m),Vb=ew(m),tc=Zz(m),Ic=DF(m),[Sc,Xc]=(0,Sg.useState)(null),Xd=(0,Sg.useRef)(null);g=If(g,Xd,kc.onContentChange);const ce=(0,Sg.useRef)(0),De=(0,Sg.useRef)(""),Oe=(0,Sg.useRef)(0),qf=(0,Sg.useRef)(null),nf=(0,Sg.useRef)("right"),ff=(0,Sg.useRef)(0),He=cc?mu:Sg.Fragment,Bd=cc?{as:Wq,allowPinchZoom:!0}:void 0,hd=od=>{var Cd,xe;od=De.current+od;const Ge=Ic().filter(Gg=>!Gg.disabled),of=document.activeElement,kf=null===(Cd=Ge.find(Gg=>Gg.ref.current===of))||
void 0===Cd?void 0:Cd.textValue;Cd=Ge.map(Gg=>Gg.textValue);const jf=Qe(Cd,od,kf),Tg=null===(xe=Ge.find(Gg=>Gg.textValue===jf))||void 0===xe?void 0:xe.ref.current;(function Sk(qi){De.current=qi;window.clearTimeout(ce.current);""!==qi&&(ce.current=window.setTimeout(()=>Sk(""),1E3))})(od);Tg&&setTimeout(()=>Tg.focus())};(0,Sg.useEffect)(()=>()=>window.clearTimeout(ce.current),[]);ub();const md=(0,Sg.useCallback)(od=>{var Cd,xe,Ge;if(Ge=nf.current===(null===(Cd=qf.current)||void 0===Cd?void 0:Cd.side)){if(Cd=
null===(xe=qf.current)||void 0===xe?void 0:xe.area){const {x:of,y:kf}={x:od.clientX,y:od.clientY};od=!1;for(let jf=0,Tg=Cd.length-1;jf<Cd.length;Tg=jf++){xe=Cd[jf].x;Ge=Cd[jf].y;const Gg=Cd[Tg].x,qi=Cd[Tg].y;Ge>kf!==qi>kf&&of<(Gg-xe)*(kf-Ge)/(qi-Ge)+xe&&(od=!od)}Cd=od}else Cd=!1;Ge=Cd}return Ge},[]);return(0,Sg.createElement)(IF,{scope:m,searchRef:De,onItemEnter:(0,Sg.useCallback)(od=>{md(od)&&od.preventDefault()},[md]),onItemLeave:(0,Sg.useCallback)(od=>{var Cd;md(od)||(null===(Cd=Xd.current)||void 0===
Cd||Cd.focus(),Xc(null))},[md]),onTriggerLeave:(0,Sg.useCallback)(od=>{md(od)&&od.preventDefault()},[md]),pointerGraceTimerRef:Oe,onPointerGraceIntentChange:(0,Sg.useCallback)(od=>{qf.current=od},[])},(0,Sg.createElement)(He,Bd,(0,Sg.createElement)(Yv,{asChild:!0,trapped:V,onMountAutoFocus:Ff(ka,od=>{var Cd;od.preventDefault();null===(Cd=Xd.current)||void 0===Cd||Cd.focus()}),onUnmountAutoFocus:qa},(0,Sg.createElement)(bu,{asChild:!0,disableOutsidePointerEvents:Ia,onEscapeKeyDown:Ta,onPointerDownOutside:Xa,
onFocusOutside:ib,onInteractOutside:vb,onDismiss:Lb},(0,Sg.createElement)(Lz,tf({asChild:!0},tc,{dir:mc.dir,orientation:"vertical",loop:G,currentTabStopId:Sc,onCurrentTabStopIdChange:Xc,onEntryFocus:od=>{mc.isUsingKeyboardRef.current||od.preventDefault()}}),(0,Sg.createElement)(Uv,tf({role:"menu","aria-orientation":"vertical","data-state":kc.open?"open":"closed","data-radix-menu-content":"",dir:mc.dir},Vb,Tb,{ref:g,style:oc({outline:"none"},Tb.style),onKeyDown:Ff(Tb.onKeyDown,od=>{var Cd=od.target.closest("[data-radix-menu-content]")===
od.currentTarget;const xe=od.ctrlKey||od.altKey||od.metaKey,Ge=1===od.key.length;Cd&&("Tab"===od.key&&od.preventDefault(),!xe&&Ge&&hd(od.key));od.target===Xd.current&&CF.includes(od.key)&&(od.preventDefault(),Cd=Ic().filter(of=>!of.disabled).map(of=>of.ref.current),Yz.includes(od.key)&&Cd.reverse(),ve(Cd))}),onBlur:Ff(b.onBlur,od=>{od.currentTarget.contains(od.target)||(window.clearTimeout(ce.current),De.current="")}),onPointerMove:Ff(b.onPointerMove,Se(od=>{const Cd=ff.current!==od.clientX;od.currentTarget.contains(od.target)&&
Cd&&(nf.current=od.clientX>ff.current?"right":"left",ff.current=od.clientX)}))})))))))}),dA=(0,Sg.forwardRef)((b,g)=>{const {disabled:m=!1,onSelect:G}=b,V=Wc(b,["disabled","onSelect"]),ka=(0,Sg.useRef)(null),qa=fw("MenuItem",b.__scopeMenu),Ia=aA("MenuItem",b.__scopeMenu);g=If(g,ka);const Ta=(0,Sg.useRef)(!1);return(0,Sg.createElement)(LF,tf({},V,{ref:g,disabled:m,onClick:Ff(b.onClick,()=>{const Xa=ka.current;if(!m&&Xa){const ib=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});Xa.addEventListener("menu.itemSelect",
vb=>null===G||void 0===G?void 0:G(vb),{once:!0});il(Xa,ib);if(ib.defaultPrevented)Ta.current=!1;else qa.onClose()}}),onPointerDown:Xa=>{var ib;null===(ib=b.onPointerDown)||void 0===ib||ib.call(b,Xa);Ta.current=!0},onPointerUp:Ff(b.onPointerUp,Xa=>{var ib;Ta.current||null===(ib=Xa.currentTarget)||void 0===ib||ib.click()}),onKeyDown:Ff(b.onKeyDown,Xa=>{const ib=""!==Ia.searchRef.current;m||ib&&" "===Xa.key||!dw.includes(Xa.key)||(Xa.currentTarget.click(),Xa.preventDefault())})}))}),LF=(0,Sg.forwardRef)((b,
g)=>{const {__scopeMenu:m,disabled:G=!1,textValue:V}=b,ka=Wc(b,["__scopeMenu","disabled","textValue"]),qa=aA("MenuItem",m),Ia=Zz(m),Ta=(0,Sg.useRef)(null);g=If(g,Ta);const [Xa,ib]=(0,Sg.useState)(!1),[vb,Lb]=(0,Sg.useState)("");(0,Sg.useEffect)(()=>{const cc=Ta.current;if(cc){var Tb;Lb((null!==(Tb=cc.textContent)&&void 0!==Tb?Tb:"").trim())}},[ka.children]);return(0,Sg.createElement)(vp.ItemSlot,{scope:m,disabled:G,textValue:null!==V&&void 0!==V?V:vb},(0,Sg.createElement)(Mz,tf({asChild:!0},Ia,{focusable:!G}),
(0,Sg.createElement)(yj.div,tf({role:"menuitem","data-highlighted":Xa?"":void 0,"aria-disabled":G||void 0,"data-disabled":G?"":void 0},ka,{ref:g,onPointerMove:Ff(b.onPointerMove,Se(cc=>{if(G)qa.onItemLeave(cc);else qa.onItemEnter(cc),cc.defaultPrevented||cc.currentTarget.focus()})),onPointerLeave:Ff(b.onPointerLeave,Se(cc=>qa.onItemLeave(cc))),onFocus:Ff(b.onFocus,()=>ib(!0)),onBlur:Ff(b.onBlur,()=>ib(!1))}))))});Xq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Xq("MenuItemIndicator",{checked:!1});
var MF=(0,Sg.forwardRef)((b,g)=>{b=Wc(b,["__scopeMenu"]);return(0,Sg.createElement)(yj.div,tf({role:"separator","aria-orientation":"horizontal"},b,{ref:g}))});Xq("MenuSub");var eA=b=>{const {__scopeMenu:g,open:m=!1,children:G,dir:V,onOpenChange:ka,modal:qa=!0}=b;b=ew(g);const [Ia,Ta]=(0,Sg.useState)(null),Xa=(0,Sg.useRef)(!1),ib=uf(ka),vb=Sb(V);(0,Sg.useEffect)(()=>{const Lb=()=>{Xa.current=!0;document.addEventListener("pointerdown",cc,{capture:!0,once:!0});document.addEventListener("pointermove",
cc,{capture:!0,once:!0})},cc=()=>Xa.current=!1;document.addEventListener("keydown",Lb,{capture:!0});return()=>{document.removeEventListener("keydown",Lb,{capture:!0});document.removeEventListener("pointerdown",cc,{capture:!0});document.removeEventListener("pointermove",cc,{capture:!0})}},[]);return(0,Sg.createElement)(Vv,b,(0,Sg.createElement)(FF,{scope:g,open:m,onOpenChange:ib,content:Ia,onContentChange:Ta},(0,Sg.createElement)(GF,{scope:g,onClose:(0,Sg.useCallback)(()=>ib(!1),[ib]),isUsingKeyboardRef:Xa,
dir:vb,modal:qa},G)))},[NF]=Kj("DropdownMenu",[nu]),pu=nu(),[OF,fA]=NF("DropdownMenu"),PF=(0,ko.forwardRef)((b,g)=>{const {__scopeDropdownMenu:m,disabled:G=!1}=b,V=Wc(b,["__scopeDropdownMenu","disabled"]),ka=fA("DropdownMenuTrigger",m),qa=pu(m);return(0,ko.createElement)($z,tf({asChild:!0},qa),(0,ko.createElement)(yj.button,tf({type:"button",id:ka.triggerId,"aria-haspopup":"menu","aria-expanded":ka.open,"aria-controls":ka.open?ka.contentId:void 0,"data-state":ka.open?"open":"closed","data-disabled":G?
"":void 0,disabled:G},V,{ref:wk(g,ka.triggerRef),onPointerDown:Ff(b.onPointerDown,Ia=>{G||0!==Ia.button||!1!==Ia.ctrlKey||(ka.onOpenToggle(),ka.open||Ia.preventDefault())}),onKeyDown:Ff(b.onKeyDown,Ia=>{if(!G){if(["Enter"," "].includes(Ia.key))ka.onOpenToggle();if("ArrowDown"===Ia.key)ka.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Ia.key)&&Ia.preventDefault()}})})))}),QF=(0,ko.forwardRef)((b,g)=>{var {__scopeDropdownMenu:m}=b;const G=Wc(b,["__scopeDropdownMenu"]),V=fA("DropdownMenuContent",
m);m=pu(m);const ka=(0,ko.useRef)(!1);return(0,ko.createElement)(bA,tf({id:V.contentId,"aria-labelledby":V.triggerId},m,G,{ref:g,onCloseAutoFocus:Ff(b.onCloseAutoFocus,qa=>{var Ia;ka.current||null===(Ia=V.triggerRef.current)||void 0===Ia||Ia.focus();ka.current=!1;qa.preventDefault()}),onInteractOutside:Ff(b.onInteractOutside,qa=>{qa=qa.detail.originalEvent;const Ia=0===qa.button&&!0===qa.ctrlKey;qa=2===qa.button||Ia;if(!V.modal||qa)ka.current=!0}),style:Jc(oc({},b.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Zs=(0,ko.forwardRef)((b,g)=>{var {__scopeDropdownMenu:m}=b;b=Wc(b,["__scopeDropdownMenu"]);m=pu(m);return(0,ko.createElement)(dA,tf({},m,b,{ref:g}))}),RF=b=>{const {__scopeDropdownMenu:g,children:m,dir:G,open:V,defaultOpen:ka,onOpenChange:qa,modal:Ia=!0}=b;b=pu(g);const Ta=(0,ko.useRef)(null),[Xa=!1,ib]=Dj({prop:V,defaultProp:ka,onChange:qa});return(0,ko.createElement)(OF,{scope:g,triggerId:vi(),triggerRef:Ta,contentId:vi(),open:Xa,onOpenChange:ib,onOpenToggle:(0,ko.useCallback)(()=>ib(vb=>!vb),[ib]),
modal:Ia},(0,ko.createElement)(eA,tf({},b,{open:Xa,onOpenChange:ib,dir:G,modal:Ia}),m))};mb=W(587);var SF=ef(function(){const b=$e(),g=m=>{m.preventDefault()};return(0,mb.jsxs)(RF,{children:[(0,mb.jsx)(PF,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*b.viewport.camera.zoom).toFixed(0)+"%"}),(0,mb.jsxs)(QF,{onCloseAutoFocus:m=>m.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,mb.jsxs)(Zs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToFit,
children:["Zoom to drawing",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:""})," ",(0,mb.jsx)("code",{children:"1"})]})})]}),(0,mb.jsxs)(Zs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToSelection,disabled:0===b.selectedShapesArray.length,children:["Zoom to fit selection",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",
{children:Ho})," ",(0,mb.jsx)("code",{children:""})," ",(0,mb.jsx)("code",{children:"1"})]})})]}),(0,mb.jsxs)(Zs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomIn,children:["Zoom in",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:Ho})," ",(0,mb.jsx)("code",{children:"+"})]})})]}),(0,mb.jsxs)(Zs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomOut,children:["Zoom out",(0,mb.jsx)("div",
{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:Ho})," ",(0,mb.jsx)("code",{children:"-"})]})})]}),(0,mb.jsxs)(Zs,{className:"tl-menu-item",onSelect:g,onClick:b.api.resetZoom,children:["Reset zoom",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:""})," ",(0,mb.jsx)("code",{children:"0"})]})})]})]})]})}),gA=W(22),hA=["horizontal",
"vertical"],Yq=(0,gA.forwardRef)((b,g)=>{const {decorative:m,orientation:G="horizontal"}=b;b=Wc(b,["decorative","orientation"]);const V=hA.includes(G)?G:"horizontal";return(0,gA.createElement)(yj.div,tf({"data-orientation":V},m?{role:"none"}:{"aria-orientation":"vertical"===V?V:void 0,role:"separator"},b,{ref:g}))});Yq.propTypes={orientation(b,g,m){b=b[g];g=String(b);return b&&!hA.includes(b)?Error(`Invalid prop \`orientation\` of value \`${g}\` supplied to \`${m}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};mb=W(587);var TF=ef(function(){const b=$e(),g=au.useCallback(()=>{b.api.undo()},[b]),m=au.useCallback(()=>{b.api.redo()},[b]),G=au.useCallback(()=>{b.api.zoomIn()},[b]),V=au.useCallback(()=>{b.api.zoomOut()},[b]);return(0,mb.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",children:[!b.readOnly&&(0,mb.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,mb.jsx)(ia,{tooltip:"Undo",onClick:g,children:(0,mb.jsx)(Eh,{name:"arrow-back-up"})}),
(0,mb.jsx)(ia,{tooltip:"Redo",onClick:m,children:(0,mb.jsx)(Eh,{name:"arrow-forward-up"})})]}),(0,mb.jsxs)("div",{className:`tl-toolbar tl-zoom-bar ${b.readOnly?"":"ml-4"}`,children:[(0,mb.jsx)(ia,{tooltip:"Zoom in",onClick:G,id:"tl-zoom-in",children:(0,mb.jsx)(Eh,{name:"plus"})}),(0,mb.jsx)(ia,{tooltip:"Zoom out",onClick:V,id:"tl-zoom-out",children:(0,mb.jsx)(Eh,{name:"minus"})}),(0,mb.jsx)(Yq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,mb.jsx)(SF,{})]})]})}),Zq=Wd(W(22)),gw=Wd(W(31));
mb=W(587);var qu=b=>`[${b.map(g=>{var m;return null!=(m=null==g?void 0:g.toFixed(2))?m:"-"}).join(", ")}]`;ef(function(){const b=$e(),g=Zq.default.useRef(),[,m]=Zq.default.useState(0);Zq.default.useEffect(()=>{g.current=document.createElement("div");g.current.style.display="contents";document.body.append(g.current);m(G=>G+1);return()=>{var G;null==(G=g.current)?void 0:G.remove()}},[]);Zq.default.useEffect(()=>{requestAnimationFrame(()=>{var G,V;null==(V=null==(G=g.current)?void 0:G.querySelector(`[data-item-index="${b.history.pointer}"]`))?
void 0:V.scrollIntoView()})},[b.history.pointer]);return g.current?gw.default.createPortal((0,mb.jsx)("div",{className:"fixed z-[1000] left-4 max-w-[400px] top-4 overflow-scroll bg-gray-200 flex gap-2 p-2",children:b.history.stack.map((G,V)=>(0,mb.jsx)("div",{"data-item-index":V,style:{background:b.history.pointer===V?"pink":"grey"},onClick:()=>b.history.setPointer(V),className:"flex items-center rounded-lg px-2 h-[32px] whitespace-nowrap",children:G.pages[0].nonce},V))}),g.current):null});var UF=
ef(()=>{var b;const {viewport:{bounds:g,camera:{point:m,zoom:G}},inputs:V}=si(),ka=Zq.default.useRef(),qa=Zq.default.useRef();Zq.default.useEffect(()=>{var Ta=document.getElementById("tl-dev-tools-canvas-anchor");ka.current=Ta;Ta=document.getElementById("tl-statusbar-anchor");qa.current=Ta},[]);var Ia=[["Z",null!=(b=null==G?void 0:G.toFixed(2))?b:"null"],["MP",qu(V.currentPoint)],["MS",qu(V.currentScreenPoint)],["VP",qu(m)],["VBR",qu([g.maxX,g.maxY])]].map(Ta=>Ta.join("")).join("|");b=ka.current?
gw.default.createPortal((0,mb.jsx)("svg",{className:"tl-renderer-dev-tools tl-grid",children:(0,mb.jsx)("circle",{cx:m[0]*G,cy:m[1]*G,r:"4",fill:"red"})}),ka.current):null;Ia=qa.current?gw.default.createPortal((0,mb.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:Ia}),qa.current):null;return(0,mb.jsxs)(mb.Fragment,{children:[b,Ia]})}),VF=Wd(W(22)),WF=Wd(W(22));mb=W(587);var ep=ef(b=>{var {id:g,icon:m,tooltip:G}=b;b=Wc(b,["id","icon","tooltip"]);var V;const ka=$e(),qa=WF.useCallback(Ta=>
{(Ta=Ta.currentTarget.dataset.tool)&&ka.selectTool(Ta)},[ka]),Ia=(null==(V=[...ka.Tools,or,Hr])?void 0:V.find(Ta=>Ta.id===g)).shortcut;V=Ia?(0,mb.jsxs)(mb.Fragment,{children:[G,(0,mb.jsx)("span",{className:"ml-2 keyboard-shortcut",children:Ia.map((Ta,Xa)=>(0,mb.jsx)("code",{children:Ta.toUpperCase()},Xa)).reduce((Ta,Xa)=>[Ta," | ",Xa])})]}):G;return(0,mb.jsx)(ia,Jc(oc({},b),{tooltipSide:"left",tooltip:V,"data-tool":g,"data-selected":g===ka.selectedTool.id,onClick:qa,children:"string"===typeof m?(0,mb.jsx)(Eh,
{name:m}):m}))}),iA=Wd(W(22)),Mj=W(22),[jA]=Kj("Popover",[Kr]),ru=Kr(),[XF,$s]=jA("Popover"),kA=(0,Mj.forwardRef)((b,g)=>{var {__scopePopover:m}=b;const G=Wc(b,["__scopePopover"]),V=$s("PopoverTrigger",m);m=ru(m);g=If(g,V.triggerRef);b=(0,Mj.createElement)(yj.button,tf({type:"button","aria-haspopup":"dialog","aria-expanded":V.open,"aria-controls":V.contentId,"data-state":V.open?"open":"closed"},G,{ref:g,onClick:Ff(b.onClick,V.onOpenToggle)}));return V.hasCustomAnchor?b:(0,Mj.createElement)(Tv,tf({asChild:!0},
m),b)}),[,YF]=jA("PopoverPortal",{forceMount:void 0}),lA=(0,Mj.forwardRef)((b,g)=>{var m=YF("PopoverContent",b.__scopePopover);({forceMount:m=m.forceMount}=b);const G=Wc(b,["forceMount"]);b=$s("PopoverContent",b.__scopePopover);return(0,Mj.createElement)(Xs,{present:m||b.open},b.modal?(0,Mj.createElement)(ZF,tf({},G,{ref:g})):(0,Mj.createElement)($F,tf({},G,{ref:g})))}),ZF=(0,Mj.forwardRef)((b,g)=>{const m=$s("PopoverContent",b.__scopePopover),G=(0,Mj.useRef)(null);g=If(g,G);const V=(0,Mj.useRef)(!1);
(0,Mj.useEffect)(()=>{const ka=G.current;if(ka)return aw(ka)},[]);return(0,Mj.createElement)(mu,{as:Wq,allowPinchZoom:!0},(0,Mj.createElement)(mA,tf({},b,{ref:g,trapFocus:m.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ff(b.onCloseAutoFocus,ka=>{var qa;ka.preventDefault();V.current||null===(qa=m.triggerRef.current)||void 0===qa||qa.focus()}),onPointerDownOutside:Ff(b.onPointerDownOutside,ka=>{ka=ka.detail.originalEvent;const qa=0===ka.button&&!0===ka.ctrlKey;V.current=2===ka.button||qa},{checkForDefaultPrevented:!1}),
onFocusOutside:Ff(b.onFocusOutside,ka=>ka.preventDefault(),{checkForDefaultPrevented:!1})})))}),$F=(0,Mj.forwardRef)((b,g)=>{const m=$s("PopoverContent",b.__scopePopover),G=(0,Mj.useRef)(!1);return(0,Mj.createElement)(mA,tf({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:V=>{var ka;null===(ka=b.onCloseAutoFocus)||void 0===ka||ka.call(b,V);if(!V.defaultPrevented){var qa;G.current||null===(qa=m.triggerRef.current)||void 0===qa||qa.focus();V.preventDefault()}G.current=!1},onInteractOutside:V=>
{var ka,qa;null===(ka=b.onInteractOutside)||void 0===ka||ka.call(b,V);V.defaultPrevented||(G.current=!0);ka=V.target;(null===(qa=m.triggerRef.current)||void 0===qa?0:qa.contains(ka))&&V.preventDefault()}}))}),mA=(0,Mj.forwardRef)((b,g)=>{const {__scopePopover:m,trapFocus:G,onOpenAutoFocus:V,onCloseAutoFocus:ka,disableOutsidePointerEvents:qa,onEscapeKeyDown:Ia,onPointerDownOutside:Ta,onFocusOutside:Xa,onInteractOutside:ib}=b;b=Wc(b,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));
const vb=$s("PopoverContent",m),Lb=ru(m);ub();return(0,Mj.createElement)(Yv,{asChild:!0,loop:!0,trapped:G,onMountAutoFocus:V,onUnmountAutoFocus:ka},(0,Mj.createElement)(bu,{asChild:!0,disableOutsidePointerEvents:qa,onInteractOutside:ib,onEscapeKeyDown:Ia,onPointerDownOutside:Ta,onFocusOutside:Xa,onDismiss:()=>vb.onOpenChange(!1)},(0,Mj.createElement)(Uv,tf({"data-state":vb.open?"open":"closed",role:"dialog",id:vb.contentId},Lb,b,{ref:g,style:Jc(oc({},b.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),
nA=(0,Mj.forwardRef)((b,g)=>{var {__scopePopover:m}=b;b=Wc(b,["__scopePopover"]);m=ru(m);return(0,Mj.createElement)(zz,tf({},m,b,{ref:g}))}),oA=b=>{const {__scopePopover:g,children:m,open:G,defaultOpen:V,onOpenChange:ka,modal:qa=!1}=b;b=ru(g);const Ia=(0,Mj.useRef)(null),[Ta,Xa]=(0,Mj.useState)(!1),[ib=!1,vb]=Dj({prop:G,defaultProp:V,onChange:ka});return(0,Mj.createElement)(Vv,b,(0,Mj.createElement)(XF,{scope:g,contentId:vi(),triggerRef:Ia,open:ib,onOpenChange:vb,onOpenToggle:(0,Mj.useCallback)(()=>
vb(Lb=>!Lb),[vb]),hasCustomAnchor:Ta,onCustomAnchorAdd:(0,Mj.useCallback)(()=>Xa(!0),[]),onCustomAnchorRemove:(0,Mj.useCallback)(()=>Xa(!1),[]),modal:qa},m))};mb=W(587);var aG=ef(function(){const b=[{id:"box",icon:"square",tooltip:"Rectangle"},{id:"ellipse",icon:"circle",tooltip:"Circle"},{id:"polygon",icon:"triangle",tooltip:"Triangle"}],g=$e(),[m,G]=iA.useState(()=>{var V;return(null!=(V=b.find(ka=>ka.id===g.selectedTool.id))?V:b[0]).id});iA.useEffect(()=>{G(V=>{var ka,qa;return null!=(qa=null==
(ka=b.find(Ia=>Ia.id===g.selectedTool.id))?void 0:ka.id)?qa:V})},[g.selectedTool.id]);return(0,mb.jsxs)(oA,{children:[(0,mb.jsx)(kA,{asChild:!0,children:(0,mb.jsxs)("div",{className:"tl-geometry-tools-pane-anchor",children:[(0,mb.jsx)(ep,oc({},b.find(V=>V.id===m))),(0,mb.jsx)(Eh,{"data-selected":b.some(V=>V.id===g.selectedTool.id),className:"tl-popover-indicator",name:"chevron-down-left"})]})}),(0,mb.jsxs)(lA,{className:"tl-popover-content",side:"left",sideOffset:15,children:[(0,mb.jsx)("div",{className:"tl-toolbar tl-geometry-toolbar",
children:b.map(V=>(0,mb.jsx)(ep,oc({},V),V.id))}),(0,mb.jsx)(nA,{className:"tl-popover-arrow"})]})]})}),pi=W(22),pA=W(22),qA=["PageUp","PageDown"],rA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],sA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[hw,bG,cG]=Eb("Slider"),[tA]=Kj("Slider",[cG]),[dG,su]=tA("Slider"),eG=(0,pi.forwardRef)((b,
g)=>{function m(ff){const He=lh(Oe,ff);ka(ff,He)}function G(ff){ka(ff,Xd.current)}function V(){Oe[Xd.current]!==nf.current[Xd.current]&&mc(Oe)}function ka(ff,He,{commit:Bd}={commit:!1}){const hd=(String(Xa).split(".")[1]||"").length;ff=wg(Math.round((ff-Ia)/Xa)*Xa+Ia,hd);const md=mg(ff,[Ia,Ta]);qf((od=[])=>{const Cd=Xi(od,md,He);var xe=Lb*Xa;if(0<xe){const Ge=Qg(Cd);xe=Math.min(...Ge)>=xe}else xe=!0;return xe?(Xd.current=Cd.indexOf(md),(xe=String(Cd)!==String(od))&&Bd&&mc(Cd),xe?Cd:od):od})}const {name:qa,
min:Ia=0,max:Ta=100,step:Xa=1,orientation:ib="horizontal",disabled:vb=!1,minStepsBetweenThumbs:Lb=0,defaultValue:cc=[Ia],value:Tb,onValueChange:kc=()=>{},onValueCommit:mc=()=>{},inverted:Vb=!1}=b,tc=Wc(b,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[Ic,Sc]=(0,pi.useState)(null);g=If(g,ff=>Sc(ff));const Xc=(0,pi.useRef)(new Set),Xd=(0,pi.useRef)(0);var ce="horizontal"===ib;const De=Ic?!!Ic.closest("form"):!0;ce=ce?
fG:gG;const [Oe=[],qf]=Dj({prop:Tb,defaultProp:cc,onChange:ff=>{var He;null===(He=[...Xc.current][Xd.current])||void 0===He||He.focus();kc(ff)}}),nf=(0,pi.useRef)(Oe);return(0,pi.createElement)(dG,{scope:b.__scopeSlider,disabled:vb,min:Ia,max:Ta,valueIndexToChangeRef:Xd,thumbs:Xc.current,values:Oe,orientation:ib},(0,pi.createElement)(hw.Provider,{scope:b.__scopeSlider},(0,pi.createElement)(hw.Slot,{scope:b.__scopeSlider},(0,pi.createElement)(ce,tf({"aria-disabled":vb,"data-disabled":vb?"":void 0},
tc,{ref:g,onPointerDown:Ff(tc.onPointerDown,()=>{vb||(nf.current=Oe)}),min:Ia,max:Ta,inverted:Vb,onSlideStart:vb?void 0:m,onSlideMove:vb?void 0:G,onSlideEnd:vb?void 0:V,onHomeKeyDown:()=>!vb&&ka(Ia,0,{commit:!0}),onEndKeyDown:()=>!vb&&ka(Ta,Oe.length-1,{commit:!0}),onStepKeyDown:({event:ff,direction:He})=>{if(!vb){ff=qA.includes(ff.key)||ff.shiftKey&&rA.includes(ff.key);const Bd=Xd.current;ka(Oe[Bd]+Xa*(ff?10:1)*He,Bd,{commit:!0})}}})))),De&&Oe.map((ff,He)=>(0,pi.createElement)(lG,{key:He,name:qa?
qa+(1<Oe.length?"[]":""):void 0,value:ff})))}),[uA,vA]=tA("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),fG=(0,pi.forwardRef)((b,g)=>{function m(tc){const Ic=Tb.current||Lb.getBoundingClientRect(),Sc=bh([0,Ic.width],Vb?[G,V]:[V,G]);Tb.current=Ic;return Sc(tc-Ic.left)}const {min:G,max:V,dir:ka,inverted:qa,onSlideStart:Ia,onSlideMove:Ta,onSlideEnd:Xa,onStepKeyDown:ib}=b,vb=Wc(b,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Lb,cc]=(0,pi.useState)(null);
g=If(g,tc=>cc(tc));const Tb=(0,pi.useRef)(),kc=Sb(ka),mc="ltr"===kc,Vb=mc&&!qa||!mc&&qa;return(0,pi.createElement)(uA,{scope:b.__scopeSlider,startEdge:Vb?"left":"right",endEdge:Vb?"right":"left",direction:Vb?1:-1,size:"width"},(0,pi.createElement)(wA,tf({dir:kc,"data-orientation":"horizontal"},vb,{ref:g,style:Jc(oc({},vb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:tc=>{tc=m(tc.clientX);null===Ia||void 0===Ia||Ia(tc)},onSlideMove:tc=>{tc=m(tc.clientX);null===Ta||void 0===
Ta||Ta(tc)},onSlideEnd:()=>{Tb.current=void 0;null===Xa||void 0===Xa||Xa()},onStepKeyDown:tc=>{const Ic=sA[Vb?"from-left":"from-right"].includes(tc.key);null===ib||void 0===ib||ib({event:tc,direction:Ic?-1:1})}})))}),gG=(0,pi.forwardRef)((b,g)=>{function m(Tb){const kc=Lb.current||vb.current.getBoundingClientRect(),mc=bh([0,kc.height],cc?[V,G]:[G,V]);Lb.current=kc;return mc(Tb-kc.top)}const {min:G,max:V,inverted:ka,onSlideStart:qa,onSlideMove:Ia,onSlideEnd:Ta,onStepKeyDown:Xa}=b,ib=Wc(b,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
vb=(0,pi.useRef)(null);g=If(g,vb);const Lb=(0,pi.useRef)(),cc=!ka;return(0,pi.createElement)(uA,{scope:b.__scopeSlider,startEdge:cc?"bottom":"top",endEdge:cc?"top":"bottom",size:"height",direction:cc?1:-1},(0,pi.createElement)(wA,tf({"data-orientation":"vertical"},ib,{ref:g,style:Jc(oc({},ib.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Tb=>{Tb=m(Tb.clientY);null===qa||void 0===qa||qa(Tb)},onSlideMove:Tb=>{Tb=m(Tb.clientY);null===Ia||void 0===Ia||Ia(Tb)},onSlideEnd:()=>
{Lb.current=void 0;null===Ta||void 0===Ta||Ta()},onStepKeyDown:Tb=>{const kc=sA[cc?"from-bottom":"from-top"].includes(Tb.key);null===Xa||void 0===Xa||Xa({event:Tb,direction:kc?-1:1})}})))}),wA=(0,pi.forwardRef)((b,g)=>{const {__scopeSlider:m,onSlideStart:G,onSlideMove:V,onSlideEnd:ka,onHomeKeyDown:qa,onEndKeyDown:Ia,onStepKeyDown:Ta}=b,Xa=Wc(b,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),ib=su("Slider",m);return(0,pi.createElement)(yj.span,
tf({},Xa,{ref:g,onKeyDown:Ff(b.onKeyDown,vb=>{"Home"===vb.key?(qa(vb),vb.preventDefault()):"End"===vb.key?(Ia(vb),vb.preventDefault()):qA.concat(rA).includes(vb.key)&&(Ta(vb),vb.preventDefault())}),onPointerDown:Ff(b.onPointerDown,vb=>{const Lb=vb.target;Lb.setPointerCapture(vb.pointerId);vb.preventDefault();ib.thumbs.has(Lb)?Lb.focus():G(vb)}),onPointerMove:Ff(b.onPointerMove,vb=>{vb.target.hasPointerCapture(vb.pointerId)&&V(vb)}),onPointerUp:Ff(b.onPointerUp,vb=>{const Lb=vb.target;Lb.hasPointerCapture(vb.pointerId)&&
(Lb.releasePointerCapture(vb.pointerId),ka(vb))})}))}),hG=(0,pi.forwardRef)((b,g)=>{var {__scopeSlider:m}=b;b=Wc(b,["__scopeSlider"]);m=su("SliderTrack",m);return(0,pi.createElement)(yj.span,tf({"data-disabled":m.disabled?"":void 0,"data-orientation":m.orientation},b,{ref:g}))}),iG=(0,pi.forwardRef)((b,g)=>{var {__scopeSlider:m}=b;const G=Wc(b,["__scopeSlider"]),V=su("SliderRange",m);m=vA("SliderRange",m);var ka=(0,pi.useRef)(null);g=If(g,ka);var qa=V.values.length;ka=V.values.map(Ia=>Nf(Ia,V.min,
V.max));qa=1<qa?Math.min(...ka):0;ka=100-Math.max(...ka);return(0,pi.createElement)(yj.span,tf({"data-orientation":V.orientation,"data-disabled":V.disabled?"":void 0},G,{ref:g,style:Jc(oc({},b.style),{[m.startEdge]:qa+"%",[m.endEdge]:ka+"%"})}))}),jG=(0,pi.forwardRef)((b,g)=>{const m=bG(b.__scopeSlider),[G,V]=(0,pi.useState)(null);g=If(g,qa=>V(qa));const ka=(0,pi.useMemo)(()=>G?m().findIndex(qa=>qa.ref.current===G):-1,[m,G]);return(0,pi.createElement)(kG,tf({},b,{ref:g,index:ka}))}),kG=(0,pi.forwardRef)((b,
g)=>{const {__scopeSlider:m,index:G}=b,V=Wc(b,["__scopeSlider","index"]),ka=su("SliderThumb",m),qa=vA("SliderThumb",m),[Ia,Ta]=(0,pi.useState)(null);g=If(g,cc=>Ta(cc));var Xa=Sf(Ia);const ib=ka.values[G],vb=void 0===ib?0:Nf(ib,ka.min,ka.max),Lb=eg(G,ka.values.length);Xa=(Xa=null===Xa||void 0===Xa?void 0:Xa[qa.size])?Mg(Xa,vb,qa.direction):0;(0,pi.useEffect)(()=>{if(Ia)return ka.thumbs.add(Ia),()=>{ka.thumbs.delete(Ia)}},[Ia,ka.thumbs]);return(0,pi.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",
position:"absolute",[qa.startEdge]:`calc(${vb}% + ${Xa}px)`}},(0,pi.createElement)(hw.ItemSlot,{scope:b.__scopeSlider},(0,pi.createElement)(yj.span,tf({role:"slider","aria-label":b["aria-label"]||Lb,"aria-valuemin":ka.min,"aria-valuenow":ib,"aria-valuemax":ka.max,"aria-orientation":ka.orientation,"data-orientation":ka.orientation,"data-disabled":ka.disabled?"":void 0,tabIndex:ka.disabled?void 0:0},V,{ref:g,style:void 0===ib?{display:"none"}:b.style,onFocus:Ff(b.onFocus,()=>{ka.valueIndexToChangeRef.current=
G})}))))}),lG=b=>{const {value:g}=b;b=Wc(b,["value"]);const m=(0,pi.useRef)(null),G=Of(g);(0,pi.useEffect)(()=>{const V=m.current,ka=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(G!==g&&ka){const qa=new Event("input",{bubbles:!0});ka.call(V,g);V.dispatchEvent(qa)}},[G,g]);return(0,pi.createElement)("input",tf({style:{display:"none"}},b,{ref:m,defaultValue:g}))},mG=eG,nG=hG,oG=iG,pG=jG,tu=Wd(W(22));mb=W(587);var xA=ef(b=>{var {side:g,align:m,alignOffset:G,label:V,
arrow:ka,children:qa,border:Ia}=b;b=Wc(b,"side align alignOffset label arrow children border".split(" "));const Ta=tu.useRef(null),[Xa,ib]=tu.useState(!1),{viewport:{bounds:vb,camera:{point:Lb,zoom:cc}}}=$e(),[Tb,kc]=tu.useState(0);tu.useEffect(()=>{if(Ta.current&&Xa){var mc=Ta.current.getBoundingClientRect();sf.boundsContain(vb,{minX:mc.x,minY:mc.y,maxX:mc.right,maxY:mc.bottom,width:mc.width,height:mc.height})||kc(Vb=>Vb+1)}},[Lb[0],Lb[1],cc,Xa]);return(0,mb.jsxs)(oA,{onOpenChange:mc=>ib(mc),children:[(0,mb.jsx)(kA,
Jc(oc({},b),{"data-border":Ia,className:"tl-button tl-popover-trigger-button",children:V})),(0,mb.jsxs)(lA,{ref:Ta,className:"tl-popover-content",align:m,alignOffset:G,side:g,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[qa,ka&&(0,mb.jsx)(nA,{className:"tl-popover-arrow"})]},"popover-content-"+Tb)]})}),qG=Wd(W(22));mb=W(587);mb=W(587);var rG=ef(function(){const b=$e(),g=VF.useCallback(m=>{b.api.setColor(m)},[]);return(0,mb.jsx)("div",{className:"tl-primary-tools",
"data-html2canvas-ignore":"true",children:(0,mb.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,mb.jsx)(ep,{tooltip:"Select",id:"select",icon:"select-cursor"}),(0,mb.jsx)(ep,{tooltip:"Move",id:"move",icon:b.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,mb.jsx)(Yq,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,mb.jsx)(ep,{tooltip:"Add block or page",id:"logseq-portal",icon:"circle-plus"}),(0,mb.jsx)(ep,{tooltip:"Draw",id:"pencil",icon:"ballpen"}),(0,mb.jsx)(ep,
{tooltip:"Highlight",id:"highlighter",icon:"highlight"}),(0,mb.jsx)(ep,{tooltip:"Eraser",id:"erase",icon:"eraser"}),(0,mb.jsx)(ep,{tooltip:"Connector",id:"line",icon:"connector"}),(0,mb.jsx)(ep,{tooltip:"Text",id:"text",icon:"text"}),(0,mb.jsx)(aG,{}),(0,mb.jsx)(Yq,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,mb.jsx)(fg,{popoverSide:"left",color:b.settings.color,setColor:g})]})})});mb=W(587);var sG=ef(function(){const b=$e();return(0,mb.jsxs)("div",{className:"tl-statusbar",
"data-html2canvas-ignore":"true",children:[b.selectedTool.id," | ",b.selectedTool.currentState.id,(0,mb.jsx)("div",{style:{flex:1}}),(0,mb.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})});mb=W(587);var tG=ef(function(){const b=$e();return(0,mb.jsxs)(mb.Fragment,{children:[vh()&&(0,mb.jsx)(sG,{}),vh()&&(0,mb.jsx)(UF,{}),!b.readOnly&&(0,mb.jsx)(rG,{}),(0,mb.jsx)(TF,{})]})}),at=Wd(W(22)),wp=Wd(W(22)),uG=Wd(W(22)),zf=W(22),yA=W(31),vG=[" ","Enter","ArrowUp","ArrowDown"],wG=[" ","Enter"],
[uu,iw,xG]=Eb("Select"),[bt]=Kj("Select",[xG]),[yG,Or]=bt("Select"),[zG,AG]=bt("Select"),BG=(0,zf.forwardRef)((b,g)=>{const {__scopeSelect:m,disabled:G=!1}=b;b=Wc(b,["__scopeSelect","disabled"]);const V=Or("SelectTrigger",m),ka=V.disabled||G;g=If(g,V.onTriggerChange);const qa=iw(m),[Ia,Ta,Xa]=Xg(ib=>{const vb=qa().filter(cc=>!cc.disabled),Lb=vb.find(cc=>cc.value===V.value);ib=Lf(vb,ib,Lb);if(void 0!==ib)V.onValueChange(ib.value)});return(0,zf.createElement)(yj.button,tf({type:"button",role:"combobox",
"aria-controls":V.contentId,"aria-expanded":V.open,"aria-required":V.required,"aria-autocomplete":"none",dir:V.dir,"data-state":V.open?"open":"closed",disabled:ka,"data-disabled":ka?"":void 0,"data-placeholder":void 0===V.value?"":void 0},b,{ref:g,onClick:Ff(b.onClick,ib=>{ib.currentTarget.focus()}),onPointerDown:Ff(b.onPointerDown,ib=>{const vb=ib.target;vb.hasPointerCapture(ib.pointerId)&&vb.releasePointerCapture(ib.pointerId);0===ib.button&&!1===ib.ctrlKey&&(ka||(V.onOpenChange(!0),Xa()),V.triggerPointerDownPosRef.current=
{x:Math.round(ib.pageX),y:Math.round(ib.pageY)},ib.preventDefault())}),onKeyDown:Ff(b.onKeyDown,ib=>{const vb=""!==Ia.current;ib.ctrlKey||ib.altKey||ib.metaKey||1!==ib.key.length||Ta(ib.key);vb&&" "===ib.key||!vG.includes(ib.key)||(ka||(V.onOpenChange(!0),Xa()),ib.preventDefault())})}))}),CG=(0,zf.forwardRef)((b,g)=>{const {__scopeSelect:m,children:G,placeholder:V}=b;b=Wc(b,["__scopeSelect","className","style","children","placeholder"]);const ka=Or("SelectValue",m),{onValueNodeHasChildrenChange:qa}=
ka,Ia=void 0!==G;g=If(g,ka.onValueNodeChange);Cn(()=>{qa(Ia)},[qa,Ia]);return(0,zf.createElement)(yj.span,tf({},b,{ref:g,style:{pointerEvents:"none"}}),void 0===ka.value&&void 0!==V?V:G)}),DG=(0,zf.forwardRef)((b,g)=>{const {children:m}=b;b=Wc(b,["__scopeSelect","children"]);return(0,zf.createElement)(yj.span,tf({"aria-hidden":!0},b,{ref:g}),m||"")}),EG=(0,zf.forwardRef)((b,g)=>{const m=Or("SelectContent",b.__scopeSelect),[G,V]=(0,zf.useState)();Cn(()=>{V(new DocumentFragment)},[]);return(0,zf.createElement)(zf.Fragment,
null,m.open?(0,zf.createElement)(FG,tf({},b,{ref:g})):G?(0,yA.createPortal)((0,zf.createElement)(zA,{scope:b.__scopeSelect},(0,zf.createElement)(uu.Slot,{scope:b.__scopeSelect},(0,zf.createElement)("div",null,b.children))),G):null)}),[zA,Pr]=bt("SelectContent"),FG=(0,zf.forwardRef)((b,g)=>{const {__scopeSelect:m,onCloseAutoFocus:G}=b;b=Wc(b,["__scopeSelect","onCloseAutoFocus"]);const V=Or("SelectContent",m),[ka,qa]=(0,zf.useState)(null),[Ia,Ta]=(0,zf.useState)(null),[Xa,ib]=(0,zf.useState)(null);
g=If(g,Cd=>Ta(Cd));const [vb,Lb]=(0,zf.useState)(null),[cc,Tb]=(0,zf.useState)(null),kc=iw(m),[mc,Vb]=(0,zf.useState)(!1),tc=(0,zf.useRef)(!0),Ic=(0,zf.useRef)(!1),Sc=(0,zf.useRef)(!1);(0,zf.useEffect)(()=>{if(Ia)return aw(Ia)},[Ia]);ub();const [Xc,Xd]=(0,zf.useState)();Cn(()=>{Ia&&Xd(window.getComputedStyle(Ia).zIndex)},[Ia]);const ce=(0,zf.useCallback)(Cd=>{const [xe,...Ge]=kc().map(jf=>jf.ref.current),[of]=Ge.slice(-1),kf=document.activeElement;for(const jf of Cd){if(jf===kf)break;null===jf||void 0===
jf||jf.scrollIntoView({block:"nearest"});jf===xe&&Xa&&(Xa.scrollTop=0);jf===of&&Xa&&(Xa.scrollTop=Xa.scrollHeight);null===jf||void 0===jf||jf.focus();if(document.activeElement!==kf)break}},[kc,Xa]),De=(0,zf.useCallback)(()=>{if(V.trigger&&V.valueNode&&ka&&Ia&&Xa&&vb&&cc){var Cd=V.trigger.getBoundingClientRect(),xe=Ia.getBoundingClientRect(),Ge=V.valueNode.getBoundingClientRect(),of=cc.getBoundingClientRect();"rtl"!==V.dir?(of=Ge.left-(of.left-xe.left),Ge=Cd.width+(Cd.left-of),xe=mg(of,[10,window.innerWidth-
10-Math.max(Ge,xe.width)]),ka.style.minWidth=Ge+"px",ka.style.left=xe+"px"):(of=window.innerWidth-Ge.right-(xe.right-of.right),Ge=Cd.width+(window.innerWidth-Cd.right-of),xe=mg(of,[10,window.innerWidth-10-Math.max(Ge,xe.width)]),ka.style.minWidth=Ge+"px",ka.style.right=xe+"px");const Sk=kc();xe=window.innerHeight-20;var kf=Xa.scrollHeight,jf=window.getComputedStyle(Ia);Ge=parseInt(jf.borderTopWidth,10);var Tg=parseInt(jf.paddingTop,10);of=parseInt(jf.borderBottomWidth,10);jf=parseInt(jf.paddingBottom,
10);var Gg=Ge+Tg+kf+jf+of;kf=Math.min(5*vb.offsetHeight,Gg);var qi=window.getComputedStyle(Xa);jf=parseInt(qi.paddingTop,10);qi=parseInt(qi.paddingBottom,10);const cl=Cd.top+Cd.height/2-10,Lo=xe-cl;Cd=vb.offsetHeight/2;Tg=Ge+Tg+(vb.offsetTop+Cd);Gg-=Tg;Tg<=cl?(Ge=vb===Sk[Sk.length-1].ref.current,ka.style.bottom="0px",ka.style.height=Tg+Math.max(Lo,Cd+(Ge?qi:0)+(Ia.clientHeight-Xa.offsetTop-Xa.offsetHeight)+of)+"px"):(of=vb===Sk[0].ref.current,ka.style.top="0px",ka.style.height=Math.max(cl,Ge+Xa.offsetTop+
(of?jf:0)+Cd)+Gg+"px",Xa.scrollTop=Tg-cl+Xa.offsetTop);ka.style.margin="10px 0";ka.style.minHeight=kf+"px";ka.style.maxHeight=xe+"px";Vb(!0);requestAnimationFrame(()=>Ic.current=!0)}},[kc,V.trigger,V.valueNode,ka,Ia,Xa,vb,cc,V.dir]);Cn(()=>De(),[De]);const Oe=(0,zf.useCallback)(()=>ce([vb,Ia]),[ce,vb,Ia]);(0,zf.useEffect)(()=>{mc&&Oe()},[mc,Oe]);const qf=(0,zf.useCallback)(Cd=>{Cd&&!0===tc.current&&(De(),Oe(),tc.current=!1)},[De,Oe]),{onOpenChange:nf,triggerPointerDownPosRef:ff}=V;(0,zf.useEffect)(()=>
{if(Ia){var Cd=0,xe=0;const Ge=kf=>{var jf,Tg,Gg,qi;Cd=Math.abs(Math.round(kf.pageX)-(null!==(jf=null===(Tg=ff.current)||void 0===Tg?void 0:Tg.x)&&void 0!==jf?jf:0));xe=Math.abs(Math.round(kf.pageY)-(null!==(Gg=null===(qi=ff.current)||void 0===qi?void 0:qi.y)&&void 0!==Gg?Gg:0))},of=kf=>{10>=Cd&&10>=xe?kf.preventDefault():Ia.contains(kf.target)||nf(!1);document.removeEventListener("pointermove",Ge);ff.current=null};null!==ff.current&&(document.addEventListener("pointermove",Ge),document.addEventListener("pointerup",
of,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Ge);document.removeEventListener("pointerup",of,{capture:!0})}}},[Ia,nf,ff]);(0,zf.useEffect)(()=>{const Cd=()=>nf(!1);window.addEventListener("blur",Cd);window.addEventListener("resize",Cd);return()=>{window.removeEventListener("blur",Cd);window.removeEventListener("resize",Cd)}},[nf]);const [He,Bd]=Xg(Cd=>{const xe=kc().filter(kf=>!kf.disabled),Ge=xe.find(kf=>kf.ref.current===document.activeElement),of=Lf(xe,Cd,Ge);
of&&setTimeout(()=>of.ref.current.focus())}),hd=(0,zf.useCallback)((Cd,xe,Ge)=>{Ge=!Sc.current&&!Ge;if(void 0!==V.value&&V.value===xe||Ge)Lb(Cd),Ge&&(Sc.current=!0)},[V.value]),md=(0,zf.useCallback)(()=>null===Ia||void 0===Ia?void 0:Ia.focus(),[Ia]),od=(0,zf.useCallback)((Cd,xe,Ge)=>{Ge=!Sc.current&&!Ge;(void 0!==V.value&&V.value===xe||Ge)&&Tb(Cd)},[V.value]);return(0,zf.createElement)(zA,{scope:m,contentWrapper:ka,content:Ia,viewport:Xa,onViewportChange:ib,itemRefCallback:hd,selectedItem:vb,onItemLeave:md,
itemTextRefCallback:od,selectedItemText:cc,onScrollButtonChange:qf,isPositioned:mc,shouldExpandOnScrollRef:Ic,searchRef:He},(0,zf.createElement)(mu,{as:Wq,allowPinchZoom:!0},(0,zf.createElement)("div",{ref:qa,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Xc}},(0,zf.createElement)(Yv,{asChild:!0,trapped:V.open,onMountAutoFocus:Cd=>{Cd.preventDefault()},onUnmountAutoFocus:Ff(G,Cd=>{var xe;null===(xe=V.trigger)||void 0===xe||xe.focus({preventScroll:!0});Cd.preventDefault()})},
(0,zf.createElement)(bu,tf({role:"listbox",id:V.contentId,"data-state":V.open?"open":"closed",dir:V.dir,onContextMenu:Cd=>Cd.preventDefault()},b,{ref:g,style:oc({display:"flex",flexDirection:"column",boxSizing:"border-box",maxHeight:"100%",outline:"none"},b.style),disableOutsidePointerEvents:!0,onFocusOutside:Cd=>Cd.preventDefault(),onDismiss:()=>V.onOpenChange(!1),onKeyDown:Ff(b.onKeyDown,Cd=>{var xe=Cd.ctrlKey||Cd.altKey||Cd.metaKey;"Tab"===Cd.key&&Cd.preventDefault();xe||1!==Cd.key.length||Bd(Cd.key);
if(["ArrowUp","ArrowDown","Home","End"].includes(Cd.key)){let Ge=kc().filter(of=>!of.disabled).map(of=>of.ref.current);["ArrowUp","End"].includes(Cd.key)&&(Ge=Ge.slice().reverse());["ArrowUp","ArrowDown"].includes(Cd.key)&&(xe=Ge.indexOf(Cd.target),Ge=Ge.slice(xe+1));setTimeout(()=>ce(Ge));Cd.preventDefault()}})}))))))}),GG=(0,zf.forwardRef)((b,g)=>{const {__scopeSelect:m}=b;b=Wc(b,["__scopeSelect"]);const G=Pr("SelectViewport",m);g=If(g,G.onViewportChange);const V=(0,zf.useRef)(0);return(0,zf.createElement)(zf.Fragment,
null,(0,zf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,zf.createElement)(uu.Slot,{scope:m},(0,zf.createElement)(yj.div,tf({"data-radix-select-viewport":"",role:"presentation"},b,{ref:g,style:oc({position:"relative",flex:1,overflow:"auto"},b.style),onScroll:Ff(b.onScroll,ka=>{ka=ka.currentTarget;const {contentWrapper:qa,
shouldExpandOnScrollRef:Ia}=G;if(null!==Ia&&void 0!==Ia&&Ia.current&&qa){var Ta=Math.abs(V.current-ka.scrollTop);if(0<Ta){var Xa=window.innerHeight-20,ib=parseFloat(qa.style.minHeight);const vb=parseFloat(qa.style.height);ib=Math.max(ib,vb);ib<Xa&&(Ta=ib+Ta,Xa=Math.min(Xa,Ta),Ta-=Xa,qa.style.height=Xa+"px","0px"===qa.style.bottom&&(ka.scrollTop=0<Ta?Ta:0,qa.style.justifyContent="flex-end"))}}V.current=ka.scrollTop})}))))});bt("SelectGroup");var [HG,IG]=bt("SelectItem"),JG=(0,zf.forwardRef)((b,g)=>
{const {__scopeSelect:m,value:G,disabled:V=!1,textValue:ka}=b;b=Wc(b,["__scopeSelect","value","disabled","textValue"]);const qa=Or("SelectItem",m),Ia=Pr("SelectItem",m),Ta=qa.value===G,[Xa,ib]=(0,zf.useState)(null!==ka&&void 0!==ka?ka:""),[vb,Lb]=(0,zf.useState)(!1);g=If(g,kc=>{var mc;return null===(mc=Ia.itemRefCallback)||void 0===mc?void 0:mc.call(Ia,kc,G,V)});const cc=vi(),Tb=()=>{V||(qa.onValueChange(G),qa.onOpenChange(!1))};return(0,zf.createElement)(HG,{scope:m,value:G,disabled:V,textId:cc,
isSelected:Ta,onItemTextChange:(0,zf.useCallback)(kc=>{ib(mc=>{var Vb;return mc||(null!==(Vb=null===kc||void 0===kc?void 0:kc.textContent)&&void 0!==Vb?Vb:"").trim()})},[])},(0,zf.createElement)(uu.ItemSlot,{scope:m,value:G,disabled:V,textValue:Xa},(0,zf.createElement)(yj.div,tf({role:"option","aria-labelledby":cc,"data-highlighted":vb?"":void 0,"aria-selected":Ta&&vb,"data-state":Ta?"checked":"unchecked","aria-disabled":V||void 0,"data-disabled":V?"":void 0,tabIndex:V?void 0:-1},b,{ref:g,onFocus:Ff(b.onFocus,
()=>Lb(!0)),onBlur:Ff(b.onBlur,()=>Lb(!1)),onPointerUp:Ff(b.onPointerUp,Tb),onPointerMove:Ff(b.onPointerMove,kc=>{if(V){var mc;null===(mc=Ia.onItemLeave)||void 0===mc||mc.call(Ia)}else kc.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ff(b.onPointerLeave,kc=>{if(kc.currentTarget===document.activeElement){var mc;null===(mc=Ia.onItemLeave)||void 0===mc||mc.call(Ia)}}),onKeyDown:Ff(b.onKeyDown,kc=>{var mc;if(""===(null===(mc=Ia.searchRef)||void 0===mc?void 0:mc.current)||" "!==kc.key)wG.includes(kc.key)&&
Tb()," "===kc.key&&kc.preventDefault()})}))))}),KG=(0,zf.forwardRef)((b,g)=>{var {__scopeSelect:m}=b;b=Wc(b,["__scopeSelect","className","style"]);const G=Or("SelectItemText",m),V=Pr("SelectItemText",m),ka=IG("SelectItemText",m);m=AG("SelectItemText",m);const [qa,Ia]=(0,zf.useState)(null);g=If(g,Lb=>Ia(Lb),ka.onItemTextChange,Lb=>{var cc;return null===(cc=V.itemTextRefCallback)||void 0===cc?void 0:cc.call(V,Lb,ka.value,ka.disabled)});const Ta=null===qa||void 0===qa?void 0:qa.textContent,Xa=(0,zf.useMemo)(()=>
(0,zf.createElement)("option",{key:ka.value,value:ka.value,disabled:ka.disabled},Ta),[ka.disabled,ka.value,Ta]),{onNativeOptionAdd:ib,onNativeOptionRemove:vb}=m;Cn(()=>{ib(Xa);return()=>vb(Xa)},[ib,vb,Xa]);return(0,zf.createElement)(zf.Fragment,null,(0,zf.createElement)(yj.span,tf({id:ka.textId},b,{ref:g})),ka.isSelected&&G.valueNode&&!G.valueNodeHasChildren?(0,yA.createPortal)(b.children,G.valueNode):null)}),LG=(0,zf.forwardRef)((b,g)=>{const m=Pr("SelectScrollUpButton",b.__scopeSelect),[G,V]=(0,zf.useState)(!1);
g=If(g,m.onScrollButtonChange);Cn(()=>{if(m.viewport&&m.isPositioned){let ka=function(){V(0<qa.scrollTop)};const qa=m.viewport;ka();qa.addEventListener("scroll",ka);return()=>qa.removeEventListener("scroll",ka)}},[m.viewport,m.isPositioned]);return G?(0,zf.createElement)(AA,tf({},b,{ref:g,onAutoScroll:()=>{const {viewport:ka,selectedItem:qa}=m;ka&&qa&&(ka.scrollTop-=qa.offsetHeight)}})):null}),MG=(0,zf.forwardRef)((b,g)=>{const m=Pr("SelectScrollDownButton",b.__scopeSelect),[G,V]=(0,zf.useState)(!1);
g=If(g,m.onScrollButtonChange);Cn(()=>{if(m.viewport&&m.isPositioned){let ka=function(){V(Math.ceil(qa.scrollTop)<qa.scrollHeight-qa.clientHeight)};const qa=m.viewport;ka();qa.addEventListener("scroll",ka);return()=>qa.removeEventListener("scroll",ka)}},[m.viewport,m.isPositioned]);return G?(0,zf.createElement)(AA,tf({},b,{ref:g,onAutoScroll:()=>{const {viewport:ka,selectedItem:qa}=m;ka&&qa&&(ka.scrollTop+=qa.offsetHeight)}})):null}),AA=(0,zf.forwardRef)((b,g)=>{const {__scopeSelect:m,onAutoScroll:G}=
b;b=Wc(b,["__scopeSelect","onAutoScroll"]);const V=Pr("SelectScrollButton",m),ka=(0,zf.useRef)(null),qa=iw(m),Ia=(0,zf.useCallback)(()=>{null!==ka.current&&(window.clearInterval(ka.current),ka.current=null)},[]);(0,zf.useEffect)(()=>()=>Ia(),[Ia]);Cn(()=>{var Ta;const Xa=qa().find(ib=>ib.ref.current===document.activeElement);null===Xa||void 0===Xa||null===(Ta=Xa.ref.current)||void 0===Ta||Ta.scrollIntoView({block:"nearest"})},[qa]);return(0,zf.createElement)(yj.div,tf({"aria-hidden":!0},b,{ref:g,
style:oc({flexShrink:0},b.style),onPointerMove:Ff(b.onPointerMove,()=>{var Ta;null===(Ta=V.onItemLeave)||void 0===Ta||Ta.call(V);null===ka.current&&(ka.current=window.setInterval(G,50))}),onPointerLeave:Ff(b.onPointerLeave,()=>{Ia()})}))}),BA=(0,zf.forwardRef)((b,g)=>{const {value:m}=b;b=Wc(b,["value"]);const G=(0,zf.useRef)(null);g=If(g,G);const V=Of(m);(0,zf.useEffect)(()=>{const ka=G.current,qa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(V!==m&&qa){const Ia=
new Event("change",{bubbles:!0});qa.call(ka,m);ka.dispatchEvent(Ia)}},[V,m]);return(0,zf.createElement)(Dz,{asChild:!0},(0,zf.createElement)("select",tf({},b,{ref:g,defaultValue:m})))});BA.displayName="BubbleSelect";var NG=b=>{const {__scopeSelect:g,children:m,open:G,defaultOpen:V,onOpenChange:ka,value:qa,defaultValue:Ia,onValueChange:Ta,dir:Xa,name:ib,autoComplete:vb,disabled:Lb,required:cc}=b,[Tb,kc]=(0,zf.useState)(null),[mc,Vb]=(0,zf.useState)(null),[tc,Ic]=(0,zf.useState)(!1),Sc=Sb(Xa),[Xc=!1,
Xd]=Dj({prop:G,defaultProp:V,onChange:ka}),[ce,De]=Dj({prop:qa,defaultProp:Ia,onChange:Ta}),Oe=(0,zf.useRef)(null),qf=Tb?!!Tb.closest("form"):!0,[nf,ff]=(0,zf.useState)(new Set),He=Array.from(nf).map(Bd=>Bd.props.value).join(";");return(0,zf.createElement)(yG,{required:cc,scope:g,trigger:Tb,onTriggerChange:kc,valueNode:mc,onValueNodeChange:Vb,valueNodeHasChildren:tc,onValueNodeHasChildrenChange:Ic,contentId:vi(),value:ce,onValueChange:De,open:Xc,onOpenChange:Xd,dir:Sc,triggerPointerDownPosRef:Oe,
disabled:Lb},(0,zf.createElement)(uu.Provider,{scope:g},(0,zf.createElement)(zG,{scope:b.__scopeSelect,onNativeOptionAdd:(0,zf.useCallback)(Bd=>{ff(hd=>(new Set(hd)).add(Bd))},[]),onNativeOptionRemove:(0,zf.useCallback)(Bd=>{ff(hd=>{hd=new Set(hd);hd.delete(Bd);return hd})},[])},m)),qf?(0,zf.createElement)(BA,{key:He,"aria-hidden":!0,required:cc,tabIndex:-1,name:ib,autoComplete:vb,value:ce,onChange:Bd=>De(Bd.target.value),disabled:Lb},void 0===ce?(0,zf.createElement)("option",{value:""}):null,Array.from(nf)):
null)},OG=BG,PG=CG,QG=DG,RG=b=>(0,zf.createElement)(Bz,tf({asChild:!0},b)),SG=EG,TG=GG,UG=JG,VG=KG,WG=LG,XG=MG;mb=W(587);var YG=Wd(W(22)),Qm=Wd(W(22)).default.createContext({}),ZG=Wd(W(22));mb=W(587);var CA=({id:b,showReferenceContent:g=!1})=>{var m;const {handlers:{isWhiteboardPage:G,redirectToPage:V,sidebarAddBlock:ka,queryBlockByUUID:qa},renderers:{Breadcrumb:Ia,PageName:Ta}}=ZG.default.useContext(Qm);var Xa="";let ib=Xj(b)?"B":"P",vb="";if(Xj(b)){Xa=qa(b);if(!Xa)return(0,mb.jsx)("span",{className:"p-2",
children:"Invalid reference. Did you remove it?"});vb=Xa.content;Xa="whiteboard-shape"===(null==(m=Xa.properties)?void 0:m["ls-type"])?"link-to-whiteboard":"link-to-block"}else Xa=G(b)?"link-to-whiteboard":"link-to-page";m=vb&&23<vb.length?vb.slice(0,20)+"...":vb;return(0,mb.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Lb=>{Lb.stopPropagation();Lb.shiftKey?ka(b,"B"===ib?"block":"page"):V(b)},children:[(0,mb.jsx)(Eh,{name:Xa}),(0,mb.jsx)("span",{className:"pointer-events-none block-link-reference-row",
children:"P"===ib?(0,mb.jsx)(Ta,{pageName:b}):(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsx)(Ia,{levelLimit:1,blockId:b,endSeparator:g}),g&&m]})})]})},Em=Wd(W(22)),En=W(22),$G=["children"],vu="undefined"!==typeof document?En.useLayoutEffect:En.useEffect,fh=Wd(W(22)),hi=W(22),aH=W(31),ct,qm,bH="undefined"!=typeof document?hi.useLayoutEffect:hi.useEffect;!function(b){b[b.DEBUG=0]="DEBUG";b[b.INFO=1]="INFO";b[b.WARN=2]="WARN";b[b.ERROR=3]="ERROR"}(qm||={});var cH=((ct={})[qm.DEBUG]="debug",ct[qm.INFO]=
"log",ct[qm.WARN]="warn",ct[qm.ERROR]="error",ct),$p=ph(function(){var b=Gf(qm.ERROR);return{log:Gf(function(g,m,G){var V;void 0===G&&(G=qm.INFO);G>=(null!=(V=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?V:b(4))&&console[cH[G]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",g,m)}),logLevel:b}},[],{singleton:!0}),Fn=ph(function(){var b=Qf(),g=Qf(),m=Gf(0),G=Qf(),V=Gf(0),ka=Qf(),qa=Qf(),Ia=Gf(0),Ta=Gf(0),Xa=Gf(0),ib=Gf(0),vb=Qf(),Lb=Qf(),cc=
Gf(!1),Tb=Gf(!1);return Vf(ke(b,df(function(kc){return kc.scrollTop})),g),Vf(ke(b,df(function(kc){return kc.scrollHeight})),qa),Vf(g,V),{scrollContainerState:b,scrollTop:g,viewportHeight:ka,headerHeight:Ia,fixedHeaderHeight:Ta,fixedFooterHeight:Xa,footerHeight:ib,scrollHeight:qa,smoothScrollTargetReached:G,react18ConcurrentRendering:Tb,scrollTo:vb,scrollBy:Lb,statefulScrollTop:V,deviation:m,scrollingInProgress:cc}},[],{singleton:!0}),Mi={lvl:0},jw=ph(function(){return{recalcInProgress:Gf(!1)}},[],
{singleton:!0}),dH={offsetHeight:"height",offsetWidth:"width"},xp=ph(function(b){var g=b[0].log,m=b[1].recalcInProgress;b=Qf();var G=Qf(),V=Oi(G,0),ka=Qf(),qa=Qf(),Ia=Gf(0),Ta=Gf([]),Xa=Gf(void 0),ib=Gf(void 0),vb=Gf(function(tc,Ic){return zj(tc,dH[Ic])}),Lb=Gf(void 0),cc=Gf(0),Tb={offsetTree:[],sizeTree:Mi,groupOffsetTree:Mi,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},kc=Oi(ke(b,qg(Ta,g,cc),Zg(ab,Tb),Je()),Tb);Vf(ke(Ta,ug(function(tc){return 0<tc.length}),qg(kc,cc),df(function(tc){var Ic=
tc[0],Sc=tc[1],Xc=tc[2];tc=Ic.reduce(function(Xd,ce,De){return Pl(Xd,ce,pb(ce,Sc.offsetTree,Xc)||De)},Mi);return Ng({},Sc,{groupIndices:Ic,groupOffsetTree:tc})})),kc);Vf(ke(G,qg(kc),ug(function(tc){return tc[0]<tc[1].lastIndex}),df(function(tc){var Ic=tc[1];return[{startIndex:tc[0],endIndex:Ic.lastIndex,size:Ic.lastSize}]})),b);Vf(Xa,ib);var mc=Oi(ke(Xa,df(function(tc){return void 0===tc})),!0);Vf(ke(ib,ug(function(tc){return void 0!==tc&&kc(4).sizeTree===Mi}),df(function(tc){return[{startIndex:0,
endIndex:0,size:tc}]})),b);Tb=Fh(ke(b,qg(kc),Zg(function(tc,Ic){Ic=Ic[1];return{changed:Ic!==tc.sizes,sizes:Ic}},{changed:!1,sizes:Tb}),df(function(tc){return tc.changed})));mi(ke(Ia,Zg(function(tc,Ic){return{diff:tc.prev-Ic,prev:Ic}},{diff:0,prev:0}),df(function(tc){return tc.diff})),function(tc){0<tc?(m(0,!0),ka(0,tc)):0>tc&&qa(0,tc)});mi(ke(Ia,qg(g)),function(tc){0>tc[0]&&(0,tc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",
{firstItemIndex:Ia},qm.ERROR)});g=Fh(ka);Vf(ke(ka,qg(kc),df(function(tc){var Ic=tc[0];tc=tc[1];if(0<tc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Qh(tc.sizeTree).reduce(function(Sc,Xc){var Xd=Xc.k;Xc=Xc.v;return{ranges:[].concat(Sc.ranges,[{startIndex:Sc.prevIndex,endIndex:Xd+Ic-1,size:Sc.prevSize}]),prevIndex:Xd+Ic,prevSize:Xc}},{ranges:[],prevIndex:0,prevSize:tc.lastSize}).ranges})),b);var Vb=Fh(ke(qa,qg(kc,cc),df(function(tc){return pb(-tc[0],
tc[1].offsetTree,tc[2])})));return Vf(ke(qa,qg(kc,cc),df(function(tc){var Ic=tc[0],Sc=tc[1];tc=tc[2];if(0<Sc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Xc=Qh(Sc.sizeTree).reduce(function(Xd,ce){return Pl(Xd,Math.max(0,ce.k+Ic),ce.v)},Mi);return Ng({},Sc,{sizeTree:Xc},Fa(Sc.offsetTree,0,Xc,tc))})),kc),{data:Lb,totalCount:G,sizeRanges:b,groupIndices:Ta,defaultItemSize:ib,fixedItemSize:Xa,unshiftWith:ka,shiftWith:qa,shiftWithOffset:Vb,beforeUnshiftWith:g,
firstItemIndex:Ia,gap:cc,sizes:kc,listRefresh:Tb,statefulTotalCount:V,trackItemSizes:mc,itemSize:vb}},kh($p,jw),{singleton:!0}),eH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,dt=ph(function(b){function g(){mc&&(mc(),mc=null);tc&&(tc(),tc=null);Vb&&(clearTimeout(Vb),Vb=null);Ia(0,!1)}var m=b[0],G=m.sizes,V=m.totalCount,ka=m.listRefresh;m=m.gap;var qa=b[1],Ia=qa.scrollingInProgress,Ta=qa.viewportHeight,Xa=qa.scrollTo,ib=qa.smoothScrollTargetReached,vb=qa.headerHeight,
Lb=qa.footerHeight,cc=qa.fixedHeaderHeight;qa=qa.fixedFooterHeight;b=b[2].log;var Tb=Qf(),kc=Gf(0),mc=null,Vb=null,tc=null;return Vf(ke(Tb,qg(G,Ta,V,kc,vb,Lb,b),qg(m,cc,qa),df(function(Ic){var Sc=Ic[0],Xc=Sc[0],Xd=Sc[1],ce=Sc[2],De=Sc[3],Oe=Sc[4],qf=Sc[5],nf=Sc[6],ff=Sc[7],He=Ic[1];Sc=Ic[2];Ic=Ic[3];var Bd=Cc(Xc),hd=Bd.align,md=Bd.behavior,od=Bd.offset;--De;Bd=tb(Bd,Xd,De);qf=pb(Bd,Xd.offsetTree,He)+qf;"end"===hd?(qf+=Sc+yi(Xd.sizeTree,Bd)[1]-ce+Ic,Bd===De&&(qf+=nf)):"center"===hd?qf+=(Sc+yi(Xd.sizeTree,
Bd)[1]-ce+Ic)/2:qf-=Oe;od&&(qf+=od);var Cd=function(Ge){g();Ge?(ff("retrying to scroll to",{location:Xc},qm.DEBUG),Tb(0,Xc)):ff("list did not change, scroll successful",{},qm.DEBUG)};if(g(),"smooth"===md){var xe=!1;tc=mi(ka,function(Ge){xe=xe||Ge});mc=oh(ib,function(){Cd(xe)})}else mc=oh(ke(ka,function(Ge){var of=setTimeout(function(){Ge(!1)},150);return function(kf){kf&&(Ge(!0),clearTimeout(of))}}),Cd);Vb=setTimeout(function(){g()},1200);Ia(0,!0);return ff("scrolling from index to",{index:Bd,top:qf,
behavior:md},qm.DEBUG),{top:qf,behavior:md}})),Xa),{scrollToIndex:Tb,topListHeight:kc}},kh(xp,Fn,$p),{singleton:!0}),fH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},et=ph(function(b){var g=b[0],m=g.scrollContainerState;b=g.scrollTop;var G=g.viewportHeight,V=g.headerHeight,ka=g.footerHeight,qa=g.scrollBy;g=Gf(!1);var Ia=Gf(!0),Ta=Qf(),Xa=Qf(),ib=Gf(4),vb=Gf(0),Lb=Oi(ke(Ae(ke(Vg(b),Nk(1),ri(!0)),ke(Vg(b),Nk(1),ri(!1),Ve(100))),
Je()),!1),cc=Oi(ke(Ae(ke(qa,ri(!0)),ke(qa,ri(!1),Ve(200))),Je()),!1);Vf(ke(Hi(Vg(b),Vg(vb)),df(function(Tb){return Tb[0]<=Tb[1]}),Je()),Ia);Vf(ke(Ia,Fe(50)),Xa);G=Fh(ke(Hi(m,Vg(G),Vg(V),Vg(ka),Vg(ib)),Zg(function(Tb,kc){var mc,Vb,tc=kc[0],Ic=tc.scrollTop;tc=tc.scrollHeight;var Sc=kc[1],Xc={viewportHeight:Sc,scrollTop:Ic,scrollHeight:tc};return Ic+Sc-tc>-kc[4]?(Ic>Tb.state.scrollTop?(mc="SCROLLED_DOWN",Vb=Tb.state.scrollTop-Ic):(mc="SIZE_DECREASED",Vb=Tb.state.scrollTop-Ic||Tb.scrollTopDelta),{atBottom:!0,
state:Xc,atBottomBecause:mc,scrollTopDelta:Vb}):{atBottom:!1,notAtBottomBecause:Xc.scrollHeight>Tb.state.scrollHeight?"SIZE_INCREASED":Sc<Tb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Ic<Tb.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Xc}},fH),Je(function(Tb,kc){return Tb&&Tb.atBottom===kc.atBottom})));V=Oi(ke(m,Zg(function(Tb,kc){var mc=kc.scrollTop,Vb=kc.scrollHeight;kc=kc.viewportHeight;return 1.01>Math.abs(Tb.scrollHeight-Vb)?{scrollTop:mc,scrollHeight:Vb,
jump:0,changed:!1}:Tb.scrollTop!==mc&&1>Vb-(mc+kc)?{scrollHeight:Vb,scrollTop:mc,jump:Tb.scrollTop-mc,changed:!0}:{scrollHeight:Vb,scrollTop:mc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),ug(function(Tb){return Tb.changed}),df(function(Tb){return Tb.jump})),0);Vf(ke(G,df(function(Tb){return Tb.atBottom})),g);Vf(ke(g,Fe(50)),Ta);ka=Gf("down");Vf(ke(m,df(function(Tb){return Tb.scrollTop}),Je(),Zg(function(Tb,kc){return cc(4)?{direction:Tb.direction,prevScrollTop:kc}:{direction:kc<
Tb.prevScrollTop?"up":"down",prevScrollTop:kc}},{direction:"down",prevScrollTop:0}),df(function(Tb){return Tb.direction})),ka);Vf(ke(m,Fe(50),ri("none")),ka);m=Gf(0);return Vf(ke(Lb,ug(function(Tb){return!Tb}),ri(0)),m),Vf(ke(b,Fe(100),qg(Lb),ug(function(Tb){return!!Tb[1]}),Zg(function(Tb,kc){return[Tb[1],kc[0]]},[0,0]),df(function(Tb){return Tb[1]-Tb[0]})),m),{isScrolling:Lb,isAtTop:Ia,isAtBottom:g,atBottomState:G,atTopStateChange:Xa,atBottomStateChange:Ta,scrollDirection:ka,atBottomThreshold:ib,
atTopThreshold:vb,scrollVelocity:m,lastJumpDueToItemResize:V}},kh(Fn)),aq=ph(function(b){var g=b[0].log;b=Gf(!1);var m=Fh(ke(b,ug(function(G){return G}),Je()));return mi(b,function(G){G&&g(4)("props updated",{},qm.DEBUG)}),{propsReady:b,didMount:m}},kh($p),{singleton:!0}),kw=ph(function(b){var g=b[0],m=g.sizes,G=g.listRefresh;g=g.defaultItemSize;var V=b[1].scrollTop,ka=b[2].scrollToIndex;b=b[3].didMount;var qa=Gf(!0),Ia=Gf(0);return Vf(ke(b,qg(Ia),ug(function(Ta){return!!Ta[1]}),ri(!1)),qa),mi(ke(Hi(G,
b),qg(qa,m,g),ug(function(Ta){var Xa=Ta[1],ib=Ta[3];return Ta[0][1]&&(Ta[2].sizeTree!==Mi||void 0!==ib)&&!Xa}),qg(Ia)),function(Ta){var Xa=Ta[1];setTimeout(function(){oh(V,function(){qa(0,!0)});ka(0,Xa)})}),{scrolledToInitialItem:qa,initialTopMostItemIndex:Ia}},kh(xp,Fn,dt,aq),{singleton:!0}),gH=ph(function(b){function g(kc){Ta(0,{index:"LAST",align:"end",behavior:kc})}function m(kc){var mc=oh(Ia,function(Vb){!kc||Vb.atBottom||"SIZE_INCREASED"!==Vb.notAtBottomBecause||Tb||(vb(4)("scrolling to bottom due to increased size",
{},qm.DEBUG),g("auto"))});setTimeout(mc,100)}var G=b[0],V=G.totalCount,ka=G.listRefresh,qa=b[1];G=qa.isAtBottom;var Ia=qa.atBottomState,Ta=b[2].scrollToIndex;qa=b[3].scrolledToInitialItem;var Xa=b[4],ib=Xa.propsReady;Xa=Xa.didMount;var vb=b[5].log;b=b[6].scrollingInProgress;var Lb=Gf(!1),cc=Qf(),Tb=null;return mi(ke(Hi(ke(Vg(V),Nk(1)),Xa),qg(Vg(Lb),G,qa,b),df(function(kc){var mc=kc[0],Vb=mc[0];mc=mc[1]&&kc[3];var tc="auto";mc&&(tc=kc[1],kc=kc[2]||kc[4],tc="function"==typeof tc?Dc(tc(kc)):kc&&Dc(tc),
mc=mc&&!!tc);return{totalCount:Vb,shouldFollow:mc,followOutputBehavior:tc}}),ug(function(kc){return kc.shouldFollow})),function(kc){var mc=kc.totalCount,Vb=kc.followOutputBehavior;Tb&&(Tb(),Tb=null);Tb=oh(ka,function(){vb(4)("following output to ",{totalCount:mc},qm.DEBUG);g(Vb);Tb=null})}),mi(ke(Hi(Vg(Lb),V,ib),ug(function(kc){return kc[0]&&kc[2]}),Zg(function(kc,mc){mc=mc[1];return{refreshed:kc.value===mc,value:mc}},{refreshed:!1,value:0}),ug(function(kc){return kc.refreshed}),qg(Lb,V)),function(kc){m(!1!==
kc[1])}),mi(cc,function(){m(!1!==Lb(4))}),mi(Hi(Vg(Lb),Ia),function(kc){var mc=kc[1];kc[0]&&!mc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===mc.notAtBottomBecause&&g("auto")}),{followOutput:Lb,autoscrollToBottom:cc}},kh(xp,et,dt,kw,aq,$p,Fn)),DA=ph(function(b){var g=b[0],m=g.totalCount,G=g.groupIndices;g=g.sizes;var V=b[1];b=V.scrollTop;V=V.headerHeight;var ka=Qf(),qa=Qf(),Ia=Fh(ke(ka,df(Ld)));return Vf(ke(Ia,df(function(Ta){return Ta.totalCount})),m),Vf(ke(Ia,df(function(Ta){return Ta.groupIndices})),
G),Vf(ke(Hi(b,g,V),ug(function(Ta){return Ta[1].groupOffsetTree!==Mi}),df(function(Ta){return yi(Ta[1].groupOffsetTree,Math.max(Ta[0]-Ta[2],0),"v")[0]}),Je(),df(function(Ta){return[Ta]})),qa),{groupCounts:ka,topItemsIndexes:qa}},kh(xp,Fn)),lw=ph(function(b){var g=b[0];b=g.scrollTop;var m=g.viewportHeight,G=g.deviation,V=g.headerHeight,ka=g.fixedHeaderHeight;g=Qf();var qa=Gf(0),Ia=Gf(0),Ta=Gf(0);b=Oi(ke(Hi(Vg(b),Vg(m),Vg(V),Vg(g,Nd),Vg(Ta),Vg(qa),Vg(ka),Vg(G),Vg(Ia)),df(function(Xa){var ib=Xa[0],vb=
Xa[1],Lb=Xa[2],cc=Xa[3],Tb=cc[0];cc=cc[1];var kc=Xa[4],mc=Xa[6],Vb=Xa[7],tc=Xa[8],Ic=ib-Vb;Xa=Xa[5]+mc;var Sc=Math.max(Lb-Ic,0),Xc="none",Xd="number"==typeof tc?tc:tc.top||0;tc="number"==typeof tc?tc:tc.bottom||0;return Tb-=Vb,cc+=Lb+mc,Tb+(Lb+mc)>ib+Xa-Xd&&(Xc="up"),cc-Vb<ib-Sc+vb+tc&&(Xc="down"),"none"!==Xc?[Math.max(Ic-Lb-Ce(kc,"top",Xc)-Xd,0),Ic-Sc-mc+vb+Ce(kc,"bottom",Xc)+tc]:null}),ug(function(Xa){return null!=Xa}),Je(Nd)),[0,0]);return{listBoundary:g,overscan:Ta,topListHeight:qa,increaseViewportBy:Ia,
visibleRange:b}},kh(Fn),{singleton:!0}),EA={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},Qr=ph(function(b){var g=b[0],m=g.sizes,G=g.totalCount,V=g.data,ka=g.firstItemIndex,qa=g.gap,Ia=b[1],Ta=b[2],Xa=Ta.visibleRange;g=Ta.listBoundary;Ta=Ta.topListHeight;var ib=b[3],vb=ib.scrolledToInitialItem,Lb=ib.initialTopMostItemIndex;ib=b[4].topListHeight;var cc=b[5],Tb=b[6].didMount,kc=b[7].recalcInProgress;b=Gf([]);var mc=Qf();Vf(Ia.topItemsIndexes,
b);m=Oi(ke(Hi(Tb,kc,Vg(Xa,Nd),Vg(G),Vg(m),Vg(Lb),vb,Vg(b),Vg(ka),Vg(qa),V),ug(function(Vb){return Vb[0]&&!Vb[1]}),df(function(Vb){var tc=Vb[2],Ic=tc[0],Sc=tc[1];tc=Vb[3];var Xc=Vb[5],Xd=Vb[6],ce=Vb[7],De=Vb[8],Oe=Vb[9],qf=Vb[10];Vb=Vb[4];var nf=Vb.sizeTree,ff=Vb.offsetTree;if(0===tc||0===Ic&&0===Sc)return Ng({},EA,{totalCount:tc});if(nf===Mi)return Cg(function(kf,jf,Tg){return jf.groupOffsetTree!==Mi?(kf=Zb(kf,jf),[{index:yi(jf.groupOffsetTree,kf)[0],size:0,offset:0},{index:kf,size:0,offset:0,data:Tg&&
Tg[0]}]):[{index:kf,size:0,offset:0,data:Tg&&Tg[0]}]}("number"==typeof Xc?Xc:"LAST"===Xc.index?tc-1:Xc.index,Vb,qf),[],tc,Oe,Vb,De);Xc=[];if(0<ce.length){var He,Bd=ce[0],hd=ce[ce.length-1],md=0;for(nf=kk(rj(nf,Bd,hd));!(He=nf()).done;){var od=He.value;He=od.value;var Cd=Math.min(od.end,hd);for(od=Math.max(od.start,Bd);od<=Cd;od++)Xc.push({index:od,size:He,offset:md,data:qf&&qf[od]}),md+=He}}if(!Xd)return Cg([],Xc,tc,Oe,Vb,De);var xe=0<ce.length?ce[ce.length-1]+1:0,Ge=function(kf,jf,Tg,Gg){return void 0===
Gg&&(Gg=0),0<Gg&&(jf=Math.max(jf,kf[Jl(kf,Gg,U)].offset)),cg((Sk=Tg,Lo=Jl(qi=kf,jf,cl=xa),as=Jl(qi,Sk,cl,Lo),qi.slice(Lo,as+1)),ua);var qi,Sk,cl,Lo,as}(ff,Ic,Sc,xe);if(0===Ge.length)return null;var of=tc-1;return Cg(Tk([],function(kf){for(var jf,Tg=kk(Ge);!(jf=Tg()).done;){var Gg=jf.value,qi=Gg.value;jf=qi.offset;var Sk=Gg.start,cl=qi.size;qi.offset<Ic&&(qi=(Sk+=Math.floor((Ic-qi.offset+Oe)/(cl+Oe)))-Gg.start,jf+=qi*cl+qi*Oe);Sk<xe&&(jf+=(xe-Sk)*cl,Sk=xe);for(Gg=Math.min(Gg.end,of);Sk<=Gg&&!(jf>=
Sc);Sk++)kf.push({index:Sk,size:cl,offset:jf,data:qf&&qf[Sk]}),jf+=cl+Oe}}),Xc,tc,Oe,Vb,De)}),ug(function(Vb){return null!==Vb}),Je()),EA);return Vf(ke(V,ug(function(Vb){return void 0!==Vb}),df(function(Vb){return Vb.length})),G),Vf(ke(m,df(function(Vb){return Vb.topListHeight})),ib),Vf(ib,Ta),Vf(ke(m,df(function(Vb){return[Vb.top,Vb.bottom]})),g),Vf(ke(m,df(function(Vb){return Vb.items})),mc),Ng({listState:m,topItemsIndexes:b,endReached:Fh(ke(m,ug(function(Vb){return 0<Vb.items.length}),qg(G,V),
ug(function(Vb){var tc=Vb[0].items;return tc[tc.length-1].originalIndex===Vb[1]-1}),df(function(Vb){return[Vb[1]-1,Vb[2]]}),Je(Nd),df(function(Vb){return Vb[0]}))),startReached:Fh(ke(m,Fe(200),ug(function(Vb){var tc=Vb.items;return 0<tc.length&&tc[0].originalIndex===Vb.topItems.length}),df(function(Vb){return Vb.items[0].index}),Je())),rangeChanged:Fh(ke(m,ug(function(Vb){return 0<Vb.items.length}),df(function(Vb){Vb=Vb.items;for(var tc=0,Ic=Vb.length-1;"group"===Vb[tc].type&&tc<Ic;)tc++;for(;"group"===
Vb[Ic].type&&Ic>tc;)Ic--;return{startIndex:Vb[tc].index,endIndex:Vb[Ic].index}}),Je(ud))),itemsRendered:mc},cc)},kh(xp,DA,lw,kw,dt,et,aq,jw),{singleton:!0}),hH=ph(function(b){var g=b[0],m=g.sizes,G=g.firstItemIndex,V=g.data;g=g.gap;var ka=b[1].listState;b=b[2].didMount;var qa=Gf(0);return Vf(ke(b,qg(qa),ug(function(Ia){return 0!==Ia[1]}),qg(m,G,g,V),df(function(Ia){var Ta=Ia[0][1],Xa=Ia[1],ib=Ia[2],vb=Ia[3];Ia=Ia[4];var Lb=void 0===Ia?[]:Ia;Ia=0;if(0<Xa.groupIndices.length)for(var cc,Tb=kk(Xa.groupIndices);!((cc=
Tb()).done||cc.value-Ia>=Ta);)Ia++;Ta+=Ia;return Cg(Array.from({length:Ta}).map(function(kc,mc){return{index:mc,size:0,offset:0,data:Lb[mc]}}),[],Ta,vb,Xa,ib)})),ka),{initialItemCount:qa}},kh(xp,Qr,aq),{singleton:!0}),FA=ph(function(b){b=b[0].scrollVelocity;var g=Gf(!1),m=Qf(),G=Gf(!1);return Vf(ke(b,qg(G,g,m),ug(function(V){return!!V[1]}),df(function(V){var ka=V[0],qa=V[1],Ia=V[2];V=V[3];var Ta=qa.enter;if(Ia){if((0,qa.exit)(ka,V))return!1}else if(Ta(ka,V))return!0;return Ia}),Je()),g),mi(ke(Hi(g,
b,m),qg(G)),function(V){var ka=V[0];V=V[1];return ka[0]&&V&&V.change&&V.change(ka[1],ka[2])}),{isSeeking:g,scrollSeekConfiguration:G,scrollVelocity:b,scrollSeekRangeChanged:m}},kh(et),{singleton:!0}),iH=ph(function(b){b=b[0].topItemsIndexes;var g=Gf(0);return Vf(ke(g,ug(function(m){return 0<m}),df(function(m){return Array.from({length:m}).map(function(G,V){return V})})),b),{topItemCount:g}},kh(Qr)),mw=ph(function(b){var g=b[0],m=g.footerHeight,G=g.headerHeight,V=g.fixedHeaderHeight;g=g.fixedFooterHeight;
var ka=b[1].listState;b=Qf();m=Oi(ke(Hi(m,g,G,V,ka),df(function(qa){var Ia=qa[4];return qa[0]+qa[1]+qa[2]+qa[3]+Ia.offsetBottom+Ia.bottom})),0);return Vf(Vg(m),b),{totalListHeight:m,totalListHeightChanged:b}},kh(Fn,Qr),{singleton:!0}),jH=xj(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),kH=ph(function(b){function g(mc){0<mc?(G(0,{top:-mc,behavior:"auto"}),ka(0,0)):(ka(0,0),G(0,{top:-mc,behavior:"auto"}))}var m=b[0],G=m.scrollBy,V=m.scrollTop,ka=m.deviation,
qa=m.scrollingInProgress,Ia=b[1];m=Ia.isScrolling;var Ta=Ia.isAtBottom,Xa=Ia.scrollDirection,ib=b[3],vb=ib.beforeUnshiftWith,Lb=ib.shiftWithOffset,cc=ib.sizes;ib=ib.gap;var Tb=b[4].log,kc=b[5].recalcInProgress;b=Fh(ke(b[2].listState,qg(Ia.lastJumpDueToItemResize),Zg(function(mc,Vb){var tc=mc[1],Ic=Vb[0],Sc=Ic.items,Xc=Ic.totalCount;Ic=Ic.bottom+Ic.offsetBottom;var Xd=0;return mc[2]===Xc&&0<tc.length&&0<Sc.length&&(0===Sc[0].originalIndex&&0===tc[0].originalIndex||0!=(Xd=Ic-mc[3])&&(Xd+=Vb[1])),[Xd,
Sc,Xc,Ic]},[0,[],0,0]),ug(function(mc){return 0!==mc[0]}),qg(V,Xa,qa,Ta,Tb),ug(function(mc){return!mc[3]&&0!==mc[1]&&"up"===mc[2]}),df(function(mc){var Vb=mc[0][0];return(0,mc[5])("Upward scrolling compensation",{amount:Vb},qm.DEBUG),Vb})));return mi(ke(b,qg(ka,m)),function(mc){var Vb=mc[0],tc=mc[1];mc[2]&&jH()?ka(0,tc-Vb):g(-Vb)}),mi(ke(Hi(Oi(m,!1),ka,kc),ug(function(mc){return!mc[0]&&!mc[2]&&0!==mc[1]}),df(function(mc){return mc[1]}),Fe(1)),g),Vf(ke(Lb,df(function(mc){return{top:-mc}})),G),mi(ke(vb,
qg(cc,ib),df(function(mc){var Vb=mc[0];return Vb*mc[1].lastSize+Vb*mc[2]})),function(mc){ka(0,mc);requestAnimationFrame(function(){Ul(G,{top:mc});requestAnimationFrame(function(){ka(0,0);kc(0,!1)})})}),{deviation:ka}},kh(Fn,et,Qr,xp,$p,jw)),lH=ph(function(b){var g=b[0].totalListHeight,m=b[1].didMount,G=b[2].scrollTo;b=Gf(0);return mi(ke(m,qg(b),ug(function(V){return 0!==V[1]}),df(function(V){return{top:V[1]}})),function(V){oh(ke(g,ug(function(ka){return 0!==ka})),function(){setTimeout(function(){G(0,
V)})})}),{initialScrollTop:b}},kh(mw,aq,Fn),{singleton:!0}),mH=ph(function(b){var g=b[0].viewportHeight;b=b[1].totalListHeight;var m=Gf(!1);return{alignToBottom:m,paddingTopAddition:Oi(ke(Hi(m,g,b),ug(function(G){return G[0]}),df(function(G){return Math.max(0,G[1]-G[2])}),Je()),0)}},kh(Fn,mw),{singleton:!0}),GA=ph(function(b){var g=b[0];b=g.scrollTo;g=g.scrollContainerState;var m=Qf(),G=Qf(),V=Qf(),ka=Gf(!1),qa=Gf(void 0);return Vf(ke(Hi(m,G),df(function(Ia){var Ta=Ia[0];return{scrollTop:Math.max(0,
Ta.scrollTop-Ia[1].offsetTop),scrollHeight:Ta.scrollHeight,viewportHeight:Ta.viewportHeight}})),g),Vf(ke(b,qg(G),df(function(Ia){var Ta=Ia[0];return Ng({},Ta,{top:Ta.top+Ia[1].offsetTop})})),V),{useWindowScroll:ka,customScrollParent:qa,windowScrollContainerState:m,windowViewportRect:G,windowScrollTo:V}},kh(Fn)),nH=["done","behavior","align"],oH=ph(function(b){var g=b[0],m=g.sizes,G=g.totalCount;g=g.gap;var V=b[1],ka=V.scrollTop,qa=V.viewportHeight,Ia=V.headerHeight,Ta=V.fixedHeaderHeight,Xa=V.fixedFooterHeight,
ib=V.scrollingInProgress;b=b[2].scrollToIndex;V=Qf();return Vf(ke(V,qg(m,qa,G,Ia,Ta,Xa,ka),qg(g),df(function(vb){var Lb=vb[0],cc=Lb[0],Tb=Lb[1],kc=Lb[2],mc=Lb[3],Vb=Lb[4],tc=Lb[5],Ic=Lb[6];Lb=Lb[7];var Sc=vb[1];vb=cc.done;var Xc=cc.behavior,Xd=cc.align,ce=jk(cc,nH),De=null;cc=tb(cc,Tb,mc-1);Vb=pb(cc,Tb.offsetTree,Sc)+Vb+tc;return Vb<Lb+tc?De=Ng({},ce,{behavior:Xc,align:null!=Xd?Xd:"start"}):Vb+yi(Tb.sizeTree,cc)[1]>Lb+kc-Ic&&(De=Ng({},ce,{behavior:Xc,align:null!=Xd?Xd:"end"})),De?vb&&oh(ke(ib,Nk(1),
ug(function(Oe){return!1===Oe})),vb):vb&&vb(),De}),ug(function(vb){return null!==vb})),b),{scrollIntoView:V}},kh(xp,Fn,dt,Qr,$p),{singleton:!0}),pH=["listState","topItemsIndexes"],qH=ph(function(b){return Ng({},b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},kh(lw,hH,aq,FA,mw,lH,mH,GA,oH)),HA=ph(function(b){var g=b[0],m=g.totalCount,G=g.sizeRanges,V=g.fixedItemSize,ka=g.defaultItemSize,qa=g.trackItemSizes,Ia=g.itemSize,Ta=g.data,Xa=g.firstItemIndex,ib=g.groupIndices,vb=g.statefulTotalCount;g=g.gap;
var Lb=b[1],cc=Lb.initialTopMostItemIndex;Lb=Lb.scrolledToInitialItem;var Tb=b[2],kc=b[3],mc=b[4],Vb=mc.listState,tc=mc.topItemsIndexes;mc=jk(mc,pH);var Ic=b[5].scrollToIndex,Sc=b[7].topItemCount,Xc=b[8].groupCounts,Xd=b[9];b=b[10];return Vf(mc.rangeChanged,Xd.scrollSeekRangeChanged),Vf(ke(Xd.windowViewportRect,df(function(ce){return ce.visibleHeight})),Tb.viewportHeight),Ng({totalCount:m,data:Ta,firstItemIndex:Xa,sizeRanges:G,initialTopMostItemIndex:cc,scrolledToInitialItem:Lb,topItemsIndexes:tc,
topItemCount:Sc,groupCounts:Xc,fixedItemHeight:V,defaultItemHeight:ka,gap:g},kc,{statefulTotalCount:vb,listState:Vb,scrollToIndex:Ic,trackItemSizes:qa,itemSize:Ia,groupIndices:ib},mc,Xd,Tb,b)},kh(xp,kw,Fn,gH,Qr,dt,kH,iH,DA,qH,$p)),IA=xj(function(){if("undefined"==typeof document)return"sticky";var b=document.createElement("div");return b.style.position="-webkit-sticky","-webkit-sticky"===b.style.position?"-webkit-sticky":"sticky"}),wu=fh.createContext(void 0),JA=fh.createContext(void 0),rH=["placeholder"],
sH=["style","children"],tH=["style","children"],uH=ph(function(){var b=Gf(function(Ta){return"Item "+Ta}),g=Gf(null),m=Gf(function(Ta){return"Group "+Ta}),G=Gf({}),V=Gf(gh),ka=Gf("div"),qa=Gf(sl),Ia=function(Ta,Xa){return void 0===Xa&&(Xa=null),Oi(ke(G,df(function(ib){return ib[Ta]}),Je()),Xa)};return{context:g,itemContent:b,groupContent:m,components:G,computeItemKey:V,headerFooterTag:ka,scrollerRef:qa,FooterComponent:Ia("Footer"),HeaderComponent:Ia("Header"),TopItemListComponent:Ia("TopItemList"),
ListComponent:Ia("List","div"),ItemComponent:Ia("Item","div"),GroupComponent:Ia("Group","div"),ScrollerComponent:Ia("Scroller","div"),EmptyPlaceholder:Ia("EmptyPlaceholder"),ScrollSeekPlaceholder:Ia("ScrollSeekPlaceholder")}}),vH=ph(function(b){function g(V,ka,qa){Vf(ke(V,qg(G.components),df(function(Ia){var Ta,Xa=Ia[0];Ia=Ia[1];return console.warn("react-virtuoso: "+qa+" property is deprecated. Pass components."+ka+" instead."),Ng({},Ia,((Ta={})[ka]=Xa,Ta))})),G.components)}var m=b[0],G=b[1];b={item:Gh(G.itemContent,
"Rename the %citem%c prop to %citemContent."),group:Gh(G.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Gh(m.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Gh(m.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Gh(m.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Qf(),maxHeightCacheSize:Qf(),footer:Qf(),header:Qf(),HeaderContainer:Qf(),FooterContainer:Qf(),
ItemContainer:Qf(),ScrollContainer:Qf(),GroupContainer:Qf(),ListContainer:Qf(),emptyComponent:Qf(),scrollSeek:Qf()};return mi(b.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),mi(b.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
mi(b.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),mi(b.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),mi(b.scrollSeek,function(V){var ka=V.placeholder;
V=jk(V,rH);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=Ng({},(0,G.components)(4),{ScrollSeekPlaceholder:ka});(0,G.components)(0,ka);(0,m.scrollSeekConfiguration)(0,V)}),g(b.footer,"Footer","footer"),g(b.header,"Header","header"),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),g(b.emptyComponent,
"EmptyPlaceholder","emptyComponent"),g(b.GroupContainer,"Group","GroupContainer"),Ng({},m,G,b)},kh(HA,uH)),wH=function(b){return fh.createElement("div",{style:{height:b.height}})},xH={position:IA(),zIndex:1,overflowAnchor:"none"},yH={overflowAnchor:"none"},KA=fh.memo(function(b){b=b.showTopList;b=void 0!==b&&b;var g=kj("listState"),m=lo("sizeRanges"),G=kj("useWindowScroll"),V=kj("customScrollParent"),ka=lo("windowScrollContainerState"),qa=lo("scrollContainerState");G=V||G?ka:qa;var Ia=kj("itemContent"),
Ta=kj("context"),Xa=kj("groupContent");ka=kj("trackItemSizes");qa=kj("itemSize");var ib=kj("log"),vb=lo("gap");m=mn(m,qa,ka,b?sl:G,ib,vb,V).callbackRef;V=fh.useState(0);var Lb=V[0],cc=V[1];nw("deviation",function(Sc){Lb!==Sc&&cc(Sc)});V=kj("EmptyPlaceholder");var Tb=kj("ScrollSeekPlaceholder")||wH;G=kj("ListComponent");var kc=kj("ItemComponent"),mc=kj("GroupComponent"),Vb=kj("computeItemKey"),tc=kj("isSeeking"),Ic=0<kj("groupIndices").length;ka=kj("paddingTopAddition");ka=b?{}:{boxSizing:"border-box",
paddingTop:g.offsetTop+ka,paddingBottom:g.offsetBottom,marginTop:Lb};return!b&&0===g.totalCount&&V?(0,hi.createElement)(V,Og(V,Ta)):(0,hi.createElement)(G,Ng({},Og(G,Ta),{ref:m,style:ka,"data-test-id":b?"virtuoso-top-item-list":"virtuoso-item-list"}),(b?g.topItems:g.items).map(function(Sc){var Xc=Sc.originalIndex,Xd=Vb(Xc+g.firstItemIndex,Sc.data,Ta);return tc?(0,hi.createElement)(Tb,Ng({},Og(Tb,Ta),{key:Xd,index:Sc.index,height:Sc.size,type:Sc.type||"item"},"group"===Sc.type?{}:{groupIndex:Sc.groupIndex})):
"group"===Sc.type?(0,hi.createElement)(mc,Ng({},Og(mc,Ta),{key:Xd,"data-index":Xc,"data-known-size":Sc.size,"data-item-index":Sc.index,style:xH}),Xa(Sc.index)):(0,hi.createElement)(kc,Ng({},Og(kc,Ta),{key:Xd,"data-index":Xc,"data-known-size":Sc.size,"data-item-index":Sc.index,"data-item-group-index":Sc.groupIndex,style:yH}),Ic?Ia(Sc.index,Sc.groupIndex,Sc.data,Ta):Ia(Sc.index,Sc.data,Ta))}))}),zH={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Rr=
{width:"100%",height:"100%",position:"absolute",top:0},AH={width:"100%",position:IA(),top:0},BH=fh.memo(function(){var b=kj("HeaderComponent"),g=lo("headerHeight"),m=kj("headerFooterTag"),G=zh(function(ka){return g(zj(ka,"height"))}),V=kj("context");return b?(0,hi.createElement)(m,{ref:G},(0,hi.createElement)(b,Og(b,V))):null}),CH=fh.memo(function(){var b=kj("FooterComponent"),g=lo("footerHeight"),m=kj("headerFooterTag"),G=zh(function(ka){return g(zj(ka,"height"))}),V=kj("context");return b?(0,hi.createElement)(m,
{ref:G},(0,hi.createElement)(b,Og(b,V))):null}),DH=function(b){b=b.children;var g=(0,hi.useContext)(wu),m=lo("viewportHeight"),G=lo("fixedItemHeight"),V=zh(Rh(m,function(ka){return zj(ka,"height")}));return fh.useEffect(function(){g&&(m(g.viewportHeight),G(g.itemHeight))},[g,m,G]),fh.createElement("div",{style:Rr,ref:V,"data-viewport-type":"element"},b)},EH=function(b){b=b.children;var g=(0,hi.useContext)(wu),m=lo("windowViewportRect"),G=lo("fixedItemHeight"),V=kj("customScrollParent");V=kg(m,V);
return fh.useEffect(function(){g&&(G(g.itemHeight),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,m,G]),fh.createElement("div",{ref:V,style:Rr,"data-viewport-type":"window"},b)},FH=function(b){b=b.children;var g=kj("TopItemListComponent"),m=kj("headerHeight");m=Ng({},AH,{marginTop:m+"px"});var G=kj("context");return(0,hi.createElement)(g||"div",{style:m,context:G},b)},xu=Pf(vH,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},fh.memo(function(b){var g=kj("useWindowScroll"),m=0<kj("topItemsIndexes").length,G=kj("customScrollParent"),V=G||g?EH:DH;return fh.createElement(G||g?IH:HH,Ng({},b),fh.createElement(V,null,fh.createElement(BH,null),fh.createElement(KA,null),fh.createElement(CH,
null)),m&&fh.createElement(FH,null,fh.createElement(KA,{showTopList:!0})))})),GH=xu.Component,lo=xu.usePublisher,kj=xu.useEmitterValue,nw=xu.useEmitter,HH=Sh({usePublisher:lo,useEmitterValue:kj,useEmitter:nw}),IH=$f({usePublisher:lo,useEmitterValue:kj,useEmitter:nw}),LA={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},JH={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},MA=Math.round,NA=Math.ceil,yu=Math.floor,ow=Math.min,Sr=Math.max,
KH=ph(function(b){var g=b[0],m=g.overscan,G=g.visibleRange,V=g.listBoundary,ka=b[1];g=ka.scrollTop;var qa=ka.viewportHeight,Ia=ka.scrollBy,Ta=ka.scrollTo,Xa=ka.smoothScrollTargetReached,ib=ka.scrollContainerState,vb=ka.footerHeight;ka=ka.headerHeight;var Lb=b[2],cc=b[3],Tb=b[4],kc=Tb.propsReady,mc=Tb.didMount,Vb=b[5];Tb=Vb.windowViewportRect;var tc=Vb.windowScrollTo,Ic=Vb.useWindowScroll,Sc=Vb.customScrollParent;Vb=Vb.windowScrollContainerState;b=b[6];var Xc=Gf(0),Xd=Gf(0),ce=Gf(LA),De=Gf({height:0,
width:0}),Oe=Gf({height:0,width:0}),qf=Qf(),nf=Qf(),ff=Gf(0),He=Gf(void 0),Bd=Gf({row:0,column:0});Vf(ke(Hi(mc,Xd,He),ug(function(hd){return 0!==hd[1]}),df(function(hd){return{items:Mf(0,hd[1]-1,hd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),ce);Vf(ke(Hi(Vg(Xc),G,Vg(Bd,Hh),Vg(Oe,function(hd,md){return hd&&hd.width===md.width&&hd.height===md.height}),He),qg(De),df(function(hd){var md=hd[0],od=md[0],Cd=md[1],xe=Cd[0],Ge=Cd[1],of=md[2],kf=md[3],jf=md[4],Tg=hd[1];hd=of.row;
var Gg=of.column;md=kf.height;Cd=kf.width;var qi=Tg.width;if(0===od||0===qi)return LA;if(0===Cd)return Ng({},JH,{items:Mf(0,0,jf)});Gg=Sr(1,yu((qi+Gg)/(Cd+Gg)));xe=Gg*yu((xe+hd)/(md+hd));Ge=Gg*NA((Ge+hd)/(md+hd))-1;Ge=ow(od-1,Sr(Ge,Gg-1));xe=Mf(ow(Ge,Sr(0,xe)),Ge,jf);kf=hh(Tg,of,kf,xe);of=kf.top;kf=kf.bottom;od=NA(od/Gg);return{items:xe,offsetTop:of,offsetBottom:od*md+(od-1)*hd-kf,top:of,bottom:kf,itemHeight:md,itemWidth:Cd}})),ce);Vf(ke(He,ug(function(hd){return void 0!==hd}),df(function(hd){return hd.length})),
Xc);Vf(ke(De,df(function(hd){return hd.height})),qa);Vf(ke(Hi(De,Oe,ce,Bd),df(function(hd){hd=hh(hd[0],hd[3],hd[1],hd[2].items);return[hd.top,hd.bottom]}),Je(Nd)),V);G=Fh(ke(Vg(ce),ug(function(hd){return 0<hd.items.length}),qg(Xc),ug(function(hd){var md=hd[0].items;return md[md.length-1].index===hd[1]-1}),df(function(hd){return hd[1]-1}),Je()));V=Fh(ke(Vg(ce),ug(function(hd){hd=hd.items;return 0<hd.length&&0===hd[0].index}),ri(0),Je()));qa=Fh(ke(Vg(ce),ug(function(hd){return 0<hd.items.length}),df(function(hd){hd=
hd.items;return{startIndex:hd[0].index,endIndex:hd[hd.length-1].index}}),Je(ud)));Vf(qa,cc.scrollSeekRangeChanged);Vf(ke(qf,qg(De,Oe,Xc,Bd),df(function(hd){var md=hd[1],od=hd[2],Cd=hd[3],xe=hd[4],Ge=Cc(hd[0]);hd=Ge.align;var of=Ge.behavior,kf=Ge.offset;Ge=Ge.index;"LAST"===Ge&&(Ge=Cd-1);Cd=hj(md,xe,od,Sr(0,Ge,ow(Cd-1,Ge)));return"end"===hd?Cd=MA(Cd-md.height+od.height):"center"===hd&&(Cd=MA(Cd-md.height/2+od.height/2)),kf&&(Cd+=kf),{top:Cd,behavior:of}})),Ta);mc=Oi(ke(ce,df(function(hd){return hd.offsetBottom+
hd.bottom})),0);return Vf(ke(Tb,df(function(hd){return{width:hd.visibleWidth,height:hd.visibleHeight}})),De),Ng({data:He,totalCount:Xc,viewportDimensions:De,itemDimensions:Oe,scrollTop:g,scrollHeight:nf,overscan:m,scrollBy:Ia,scrollTo:Ta,scrollToIndex:qf,smoothScrollTargetReached:Xa,windowViewportRect:Tb,windowScrollTo:tc,useWindowScroll:Ic,customScrollParent:Sc,windowScrollContainerState:Vb,deviation:ff,scrollContainerState:ib,footerHeight:vb,headerHeight:ka,initialItemCount:Xd,gap:Bd},cc,{gridState:ce,
totalListHeight:mc},Lb,{startReached:V,endReached:G,rangeChanged:qa,propsReady:kc},b)},kh(lw,Fn,et,FA,aq,GA,$p)),LH=["placeholder"],MH=ph(function(){var b=Gf(function(Xa){return"Item "+Xa}),g=Gf({}),m=Gf(null),G=Gf("virtuoso-grid-item"),V=Gf("virtuoso-grid-list"),ka=Gf(gh),qa=Gf("div"),Ia=Gf(sl),Ta=function(Xa,ib){return void 0===ib&&(ib=null),Oi(ke(g,df(function(vb){return vb[Xa]}),Je()),ib)};return{context:m,itemContent:b,components:g,computeItemKey:ka,itemClassName:G,listClassName:V,headerFooterTag:qa,
scrollerRef:Ia,FooterComponent:Ta("Footer"),HeaderComponent:Ta("Header"),ListComponent:Ta("List","div"),ItemComponent:Ta("Item","div"),ScrollerComponent:Ta("Scroller","div"),ScrollSeekPlaceholder:Ta("ScrollSeekPlaceholder","div")}}),NH=ph(function(b){function g(V,ka,qa){Vf(ke(V,qg(G.components),df(function(Ia){var Ta,Xa=Ia[0];Ia=Ia[1];return console.warn("react-virtuoso: "+qa+" property is deprecated. Pass components."+ka+" instead."),Ng({},Ia,((Ta={})[ka]=Xa,Ta))})),G.components)}var m=b[0],G=b[1];
b={item:Gh(G.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Qf(),ScrollContainer:Qf(),ListContainer:Qf(),emptyComponent:Qf(),scrollSeek:Qf()};return mi(b.scrollSeek,function(V){var ka=V.placeholder;V=jk(V,LH);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=Ng({},(0,G.components)(4),{ScrollSeekPlaceholder:ka});(0,G.components)(0,ka);(0,m.scrollSeekConfiguration)(0,
V)}),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),Ng({},m,G,b)},kh(KH,MH)),OH=fh.memo(function(){var b=El("gridState"),g=El("listClassName"),m=El("itemClassName"),G=El("itemContent"),V=El("computeItemKey"),ka=El("isSeeking"),qa=Io("scrollHeight"),Ia=El("ItemComponent"),Ta=El("ListComponent"),Xa=El("ScrollSeekPlaceholder"),ib=El("context"),vb=Io("itemDimensions"),Lb=Io("gap"),cc=El("log"),Tb=zh(function(kc){qa(kc.parentElement.parentElement.scrollHeight);
var mc=kc.firstChild;mc&&vb(mc.getBoundingClientRect());Lb({row:Ai("row-gap",getComputedStyle(kc).rowGap,cc),column:Ai("column-gap",getComputedStyle(kc).columnGap,cc)})});return(0,hi.createElement)(Ta,Ng({ref:Tb,className:g},Og(Ta,ib),{style:{paddingTop:b.offsetTop,paddingBottom:b.offsetBottom}}),b.items.map(function(kc){var mc=V(kc.index,kc.data,ib);return ka?(0,hi.createElement)(Xa,Ng({key:mc},Og(Xa,ib),{index:kc.index,height:b.itemHeight,width:b.itemWidth})):(0,hi.createElement)(Ia,Ng({},Og(Ia,
ib),{className:m,"data-index":kc.index,key:mc}),G(kc.index,kc.data,ib))}))}),PH=fh.memo(function(){var b=El("HeaderComponent"),g=Io("headerHeight"),m=El("headerFooterTag"),G=zh(function(ka){return g(zj(ka,"height"))}),V=El("context");return b?(0,hi.createElement)(m,{ref:G},(0,hi.createElement)(b,Og(b,V))):null}),QH=fh.memo(function(){var b=El("FooterComponent"),g=Io("footerHeight"),m=El("headerFooterTag"),G=zh(function(ka){return g(zj(ka,"height"))}),V=El("context");return b?(0,hi.createElement)(m,
{ref:G},(0,hi.createElement)(b,Og(b,V))):null}),RH=function(b){b=b.children;var g=(0,hi.useContext)(JA),m=Io("itemDimensions"),G=Io("viewportDimensions"),V=zh(function(ka){G(ka.getBoundingClientRect())});return fh.useEffect(function(){g&&(G({height:g.viewportHeight,width:g.viewportWidth}),m({height:g.itemHeight,width:g.itemWidth}))},[g,G,m]),fh.createElement("div",{style:Rr,ref:V},b)},SH=function(b){b=b.children;var g=(0,hi.useContext)(JA),m=Io("windowViewportRect"),G=Io("itemDimensions"),V=El("customScrollParent");
V=kg(m,V);return fh.useEffect(function(){g&&(G({height:g.itemHeight,width:g.itemWidth}),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:g.viewportWidth}))},[g,m,G]),fh.createElement("div",{ref:V,style:Rr},b)},pw=Pf(NH,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},fh.memo(function(b){b=Ng({},b);var g=El("useWindowScroll"),m=El("customScrollParent"),G=m||g?SH:RH;return fh.createElement(m||g?UH:TH,Ng({},b),fh.createElement(G,null,fh.createElement(PH,null),fh.createElement(OH,null),fh.createElement(QH,null)))})),Io=pw.usePublisher,El=pw.useEmitterValue,OA=pw.useEmitter,TH=Sh({usePublisher:Io,useEmitterValue:El,useEmitter:OA}),UH=$f({usePublisher:Io,useEmitterValue:El,useEmitter:OA}),VH=ph(function(){var b=Gf(function(Ta){return fh.createElement("td",
null,"Item $",Ta)}),g=Gf(null),m=Gf(null),G=Gf(null),V=Gf({}),ka=Gf(gh),qa=Gf(sl),Ia=function(Ta,Xa){return void 0===Xa&&(Xa=null),Oi(ke(V,df(function(ib){return ib[Ta]}),Je()),Xa)};return{context:g,itemContent:b,fixedHeaderContent:m,fixedFooterContent:G,components:V,computeItemKey:ka,scrollerRef:qa,TableComponent:Ia("Table","table"),TableHeadComponent:Ia("TableHead","thead"),TableFooterComponent:Ia("TableFoot","tfoot"),TableBodyComponent:Ia("TableBody","tbody"),TableRowComponent:Ia("TableRow","tr"),
ScrollerComponent:Ia("Scroller","div"),EmptyPlaceholder:Ia("EmptyPlaceholder"),ScrollSeekPlaceholder:Ia("ScrollSeekPlaceholder"),FillerRow:Ia("FillerRow")}}),WH=ph(function(b){return Ng({},b[0],b[1])},kh(HA,VH)),XH=function(b){return fh.createElement("tr",null,fh.createElement("td",{style:{height:b.height}}))},YH=function(b){return fh.createElement("tr",null,fh.createElement("td",{style:{height:b.height,padding:0,border:0}}))},ZH=fh.memo(function(){var b=Nj("listState"),g=Jo("sizeRanges"),m=Nj("useWindowScroll"),
G=Nj("customScrollParent"),V=Jo("windowScrollContainerState"),ka=Jo("scrollContainerState");m=G||m?V:ka;var qa=Nj("itemContent");V=Nj("trackItemSizes");G=mn(g,Nj("itemSize"),V,m,Nj("log"),void 0,G);g=G.callbackRef;var Ia=G.ref;G=fh.useState(0);var Ta=G[0],Xa=G[1];rw("deviation",function(Vb){Ta!==Vb&&(Ia.current.style.marginTop=Vb+"px",Xa(Vb))});V=Nj("EmptyPlaceholder");var ib=Nj("ScrollSeekPlaceholder")||XH;m=Nj("FillerRow")||YH;G=Nj("TableBodyComponent");var vb=Nj("TableRowComponent"),Lb=Nj("computeItemKey"),
cc=Nj("isSeeking");ka=Nj("paddingTopAddition");var Tb=Nj("firstItemIndex"),kc=Nj("statefulTotalCount"),mc=Nj("context");if(0===kc&&V)return(0,hi.createElement)(V,Og(V,mc));V=b.offsetTop+ka+Ta;ka=b.offsetBottom;V=0<V?fh.createElement(m,{height:V,key:"padding-top"}):null;m=0<ka?fh.createElement(m,{height:ka,key:"padding-bottom"}):null;b=b.items.map(function(Vb){var tc=Vb.originalIndex,Ic=Lb(tc+Tb,Vb.data,mc);return cc?(0,hi.createElement)(ib,Ng({},Og(ib,mc),{key:Ic,index:Vb.index,height:Vb.size,type:Vb.type||
"item"})):(0,hi.createElement)(vb,Ng({},Og(vb,mc),{key:Ic,"data-index":tc,"data-known-size":Vb.size,"data-item-index":Vb.index,style:{overflowAnchor:"none"}}),qa(Vb.index,Vb.data,mc))});return(0,hi.createElement)(G,Ng({ref:g,"data-test-id":"virtuoso-item-list"},Og(G,mc)),[V].concat(b,[m]))}),$H=function(b){b=b.children;var g=(0,hi.useContext)(wu),m=Jo("viewportHeight"),G=Jo("fixedItemHeight"),V=zh(Rh(m,function(ka){return zj(ka,"height")}));return fh.useEffect(function(){g&&(m(g.viewportHeight),G(g.itemHeight))},
[g,m,G]),fh.createElement("div",{style:Rr,ref:V,"data-viewport-type":"element"},b)},aI=function(b){b=b.children;var g=(0,hi.useContext)(wu),m=Jo("windowViewportRect"),G=Jo("fixedItemHeight"),V=Nj("customScrollParent");V=kg(m,V);return fh.useEffect(function(){g&&(G(g.itemHeight),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,m,G]),fh.createElement("div",{ref:V,style:Rr,"data-viewport-type":"window"},b)},qw=Pf(WH,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},fh.memo(function(b){var g=Nj("useWindowScroll"),m=Nj("customScrollParent"),G=Jo("fixedHeaderHeight"),V=Jo("fixedFooterHeight"),ka=Nj("fixedHeaderContent"),qa=Nj("fixedFooterContent"),Ia=Nj("context");G=zh(Rh(G,function(vb){return zj(vb,
"height")}));var Ta=zh(Rh(V,function(vb){return zj(vb,"height")}));V=m||g?cI:bI;g=m||g?aI:$H;m=Nj("TableComponent");var Xa=Nj("TableHeadComponent"),ib=Nj("TableFooterComponent");ka=ka?fh.createElement(Xa,Ng({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:G},Og(Xa,Ia)),ka()):null;qa=qa?fh.createElement(ib,Ng({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Ta},Og(ib,Ia)),qa()):null;return fh.createElement(V,Ng({},b),fh.createElement(g,null,fh.createElement(m,Ng({style:{borderSpacing:0}},
Og(m,Ia)),[ka,fh.createElement(ZH,{key:"TableBody"}),qa])))})),Jo=qw.usePublisher,Nj=qw.useEmitterValue,rw=qw.useEmitter,bI=Sh({usePublisher:Jo,useEmitterValue:Nj,useEmitter:rw}),cI=$f({usePublisher:Jo,useEmitterValue:Nj,useEmitter:rw}),PA=Wd(W(22)),fp=function(b){function g(m){m=b.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+m+" for more information.")||this;if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return m}Vl(g,b);return g}(Wm(Error)),QA={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",
darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",
gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",
olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},dI=/^#[a-fA-F0-9]{6}$/,eI=/^#[a-fA-F0-9]{8}$/,fI=/^#[a-fA-F0-9]{3}$/,gI=/^#[a-fA-F0-9]{4}$/,sw=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,hI=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,
iI=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,jI=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,tw=function(b){return 7===b.length&&b[1]===b[2]&&b[3]===b[4]&&b[5]===b[6]?"#"+b[1]+b[3]+b[5]:b},kI=hm(Tm,Tm.length,[]);mb=W(587);var Ko=Wd(W(22)),Vn=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||
0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const m=b.ownerDocument,G=m.activeElement;G!==b&&b.focus();m.execCommand("insertText",!1,g)||Vn.insertTextFirefox(b,g);G===m.body?b.blur():G instanceof HTMLElement&&G!==b&&G.focus()}static set(b,g){b.select();Vn.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:m}=b;return b.value.slice(g?g:void 0,m?m:void 0)}static wrapSelection(b,g,m){const {selectionStart:G,
selectionEnd:V}=b,ka=Vn.getSelection(b);Vn.insert(b,g+ka+(null!=m?m:g));b.selectionStart=(G||0)+g.length;b.selectionEnd=(V||0)+g.length}static replace(b,g,m){let G=0;b.value.replace(g,(...V)=>{const ka=G+V[V.length-2],qa=V[0].length;b.selectionStart=ka;b.selectionEnd=ka+qa;V="string"===typeof m?m:m(...V);Vn.insert(b,V);b.selectionStart=ka;G+=V.length-qa;return V})}static findLineEnd(b,g){const m=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(m)?g:m+1}static indent(b){var g;const {selectionStart:m,
selectionEnd:G,value:V}=b;var ka=V.slice(m,G);if((ka=null==(g=/\n/g.exec(ka))?void 0:g.length)&&0<ka){g=V.lastIndexOf("\n",m-1)+1;var qa=b.value.slice(g,G-1);ka=qa.replace(/^|\n/g,"$\x26  ");qa=ka.length-qa.length;b.setSelectionRange(g,G-1);Vn.insert(b,ka);b.setSelectionRange(m+1,G+qa)}else Vn.insert(b,"  ")}static unindent(b){const {selectionStart:g,selectionEnd:m,value:G}=b;var V=G.lastIndexOf("\n",g-1)+1;const ka=Vn.findLineEnd(G,m);var qa=b.value.slice(V,ka);const Ia=qa.replace(/(^|\n)(\t| {1,2})/g,
"$1");qa=qa.length-Ia.length;b.setSelectionRange(V,ka);Vn.insert(b,Ia);V=(V=/\t| {1,2}/.exec(G.slice(V,g)))?V[0].length:0;b.setSelectionRange(g-V,Math.max(g-V,m-qa))}};mb=W(587);var zu=b=>b.stopPropagation(),Au=Ko.memo(function({font:b,text:g,color:m,fontStyle:G,fontSize:V,fontWeight:ka,offsetX:qa=0,offsetY:Ia=0,scale:Ta=1,isEditing:Xa=!1,pointerEvents:ib=!1,onBlur:vb,onChange:Lb}){const cc=Ko.useRef(null),Tb=Ko.useRef(!1),kc=Ko.useCallback(Xc=>{Lb(Rq.normalizeText(Xc.currentTarget.value))},[Lb]),
mc=Ko.useCallback(Xc=>{if("Escape"!==Xc.key)if("Tab"===Xc.key&&0===g.length)Xc.preventDefault();else{if("Meta"!==Xc.key&&!Xc.metaKey)Xc.stopPropagation();else if("z"===Xc.key&&Xc.metaKey){document.execCommand(Xc.shiftKey?"redo":"undo",!1);Xc.stopPropagation();Xc.preventDefault();return}"Tab"===Xc.key&&(Xc.preventDefault(),Xc.shiftKey?Vn.unindent(Xc.currentTarget):Vn.indent(Xc.currentTarget),null==Lb?void 0:Lb(Rq.normalizeText(Xc.currentTarget.value)))}},[Lb]),Vb=Ko.useCallback(Xc=>{Xa&&(Xc.currentTarget.setSelectionRange(0,
0),null==vb?void 0:vb())},[vb]),tc=Ko.useCallback(Xc=>{Xa&&Tb.current&&document.activeElement===Xc.currentTarget&&Xc.currentTarget.select()},[Xa]),Ic=Ko.useCallback(Xc=>{Xa&&Xc.stopPropagation()},[Xa]);Ko.useEffect(()=>{Xa&&requestAnimationFrame(()=>{Tb.current=!0;const Xc=cc.current;Xc&&(Xc.focus(),Xc.select())})},[Xa,vb]);const Sc=Ko.useRef(null);Ko.useLayoutEffect(()=>{const Xc=Sc.current;if(Xc){var Xd=ai(g||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:V,lineHeight:1,fontWeight:ka},
4);Xc.style.transform=`scale(${Ta}, ${Ta}) translate(${qa}px, ${Ia}px)`;Xc.style.width=Xd[0]+1+"px";Xc.style.height=Xd[1]+1+"px"}},[g,ka,V,Ia,qa,Ta]);return(0,mb.jsx)("div",{className:"tl-text-label-wrapper",children:(0,mb.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Sc,style:{font:b,fontStyle:G,fontSize:V,fontWeight:ka,color:m,pointerEvents:ib?"all":"none",userSelect:Xa?"text":"none"},children:[Xa?(0,mb.jsx)("textarea",{ref:cc,style:{font:b,color:m,fontStyle:G,fontSize:V,fontWeight:ka},
className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:g,color:m,onFocus:tc,onChange:kc,onKeyDown:mc,onBlur:Vb,onPointerDown:Ic,onContextMenu:zu,onCopy:zu,onPaste:zu,onCut:zu}):g,""]})})});mb=W(587);var lI={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Tr=class extends on{constructor(){super(...arguments);cb(this,
"canEdit",!0);cb(this,"ReactComponent",ef(({events:b,isErasing:g,isBinding:m,isSelected:G,isEditing:V,onEditingEnd:ka})=>{const {props:{size:[qa,Ia],stroke:Ta,fill:Xa,noFill:ib,strokeWidth:vb,strokeType:Lb,borderRadius:cc,opacity:Tb,label:kc,italic:mc,fontWeight:Vb,fontSize:tc}}=this;var Ic=kc||V?ai(kc,{fontFamily:"var(--ls-font-family)",fontSize:tc,lineHeight:1,fontWeight:Vb},4):[0,0];const Sc=me.mul(this.props.size,.5);Ic=Math.max(.5,Math.min(1,qa/Ic[0],Ia/Ic[1]));const Xc=this.getBounds(),Xd=PA.useMemo(()=>
me.sub(Sc,me.toFixed([Xc.width/2,Xc.height/2])),[Xc,Ic,Sc]),ce=PA.useCallback(De=>{var Oe;null==(Oe=this.update)?void 0:Oe.call(this,{label:De})},[kc]);return(0,mb.jsxs)("div",Jc(oc({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,mb.jsx)(Au,{font:"20px / 1 var(--ls-font-family)",text:kc,color:Ug(Ta,"text"),offsetX:Xd[0],offsetY:Xd[1],fontSize:tc,scale:Ic,isEditing:V,onChange:ce,onBlur:ka,fontStyle:mc?"italic":"normal",fontWeight:Vb,pointerEvents:!!kc}),
(0,mb.jsxs)(jo,{opacity:g?.2:Tb,children:[m&&(0,mb.jsx)(Uk,{mode:"svg",strokeWidth:vb,size:[qa,Ia]}),(0,mb.jsx)("rect",{className:G||!ib?"tl-hitarea-fill":"tl-hitarea-stroke",x:vb/2,y:vb/2,rx:cc,ry:cc,width:Math.max(.01,qa-vb),height:Math.max(.01,Ia-vb),pointerEvents:"all"}),(0,mb.jsx)("rect",{x:vb/2,y:vb/2,rx:cc,ry:cc,width:Math.max(.01,qa-vb),height:Math.max(.01,Ia-vb),strokeWidth:vb,stroke:Ug(Ta,"stroke"),strokeDasharray:"dashed"===Lb?"8 2":void 0,fill:ib?"none":Ug(Xa,"background")})]})]}))}));
cb(this,"setScaleLevel",b=>xf(this,null,function*(){this.update({scaleLevel:b,fontSize:lI[null!=b?b:"md"]});this.onResetBounds()}));cb(this,"ReactIndicator",ef(()=>{const {props:{size:[b,g],borderRadius:m}}=this;return(0,mb.jsx)("g",{children:(0,mb.jsx)("rect",{width:b,height:g,rx:m,ry:m,fill:"transparent"})})}));cb(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));void 0!==b.borderRadius&&(b.borderRadius=Math.max(0,b.borderRadius));return aj(this,
b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};cb(Tr,"id","box");cb(Tr,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});rd([pe],Tr.prototype,"scaleLevel",1);rd([hg],Tr.prototype,"setScaleLevel",2);var RA=Wd(W(22));mb=W(587);var mI={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Ur=class extends sv{constructor(){super(...arguments);
cb(this,"canEdit",!0);cb(this,"ReactComponent",ef(({isSelected:b,isErasing:g,events:m,isEditing:G,onEditingEnd:V})=>{const {size:[ka,qa],stroke:Ia,fill:Ta,noFill:Xa,strokeWidth:ib,strokeType:vb,opacity:Lb,label:cc,italic:Tb,fontWeight:kc,fontSize:mc}=this.props;var Vb=cc||G?ai(cc,{fontFamily:"var(--ls-font-family)",fontSize:mc,lineHeight:1,fontWeight:kc},4):[0,0];const tc=me.mul(this.props.size,.5);Vb=Math.max(.5,Math.min(1,ka/Vb[0],qa/Vb[1]));const Ic=this.getBounds(),Sc=RA.useMemo(()=>me.sub(tc,
me.toFixed([Ic.width/2,Ic.height/2])),[Ic,Vb,tc]),Xc=RA.useCallback(Xd=>{var ce;null==(ce=this.update)?void 0:ce.call(this,{label:Xd})},[cc]);return(0,mb.jsxs)("div",Jc(oc({},m),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,mb.jsx)(Au,{font:"18px / 1 var(--ls-font-family)",text:cc,color:Ug(Ia,"text"),offsetX:Sc[0],offsetY:Sc[1],scale:Vb,isEditing:G,onChange:Xc,onBlur:V,fontStyle:Tb?"italic":"normal",fontSize:mc,fontWeight:kc,pointerEvents:!!cc}),(0,mb.jsxs)(jo,Jc(oc({},m),{opacity:g?
.2:Lb,children:[(0,mb.jsx)("ellipse",{className:b||!Xa?"tl-hitarea-fill":"tl-hitarea-stroke",cx:ka/2,cy:qa/2,rx:Math.max(.01,(ka-ib)/2),ry:Math.max(.01,(qa-ib)/2)}),(0,mb.jsx)("ellipse",{cx:ka/2,cy:qa/2,rx:Math.max(.01,(ka-ib)/2),ry:Math.max(.01,(qa-ib)/2),strokeWidth:ib,stroke:Ug(Ia,"stroke"),strokeDasharray:"dashed"===vb?"8 2":void 0,fill:Xa?"none":Ug(Ta,"background")})]}))]}))}));cb(this,"setScaleLevel",b=>xf(this,null,function*(){this.update({scaleLevel:b,fontSize:mI[null!=b?b:"md"]});this.onResetBounds()}));
cb(this,"ReactIndicator",ef(()=>{const {size:[b,g]}=this.props;return(0,mb.jsx)("g",{children:(0,mb.jsx)("ellipse",{cx:b/2,cy:g/2,rx:b/2,ry:g/2,strokeWidth:2,fill:"transparent"})})}));cb(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return aj(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {size:[g,m],stroke:G,fill:V,noFill:ka,strokeWidth:qa,strokeType:Ia,opacity:Ta}=this.props;return(0,mb.jsxs)("g",
{opacity:Ta,children:[(0,mb.jsx)("ellipse",{className:ka?"tl-hitarea-stroke":"tl-hitarea-fill",cx:g/2,cy:m/2,rx:Math.max(.01,(g-qa)/2),ry:Math.max(.01,(m-qa)/2)}),(0,mb.jsx)("ellipse",{cx:g/2,cy:m/2,rx:Math.max(.01,(g-qa)/2),ry:Math.max(.01,(m-qa)/2),strokeWidth:qa,stroke:Ug(G,"stroke"),strokeDasharray:"dashed"===Ia?"8 2":void 0,fill:ka?"none":Ug(V,"background")})]})}};cb(Ur,"id","ellipse");cb(Ur,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",
noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});rd([pe],Ur.prototype,"scaleLevel",1);rd([hg],Ur.prototype,"setScaleLevel",2);mb=W(587);var uw=class extends Lt{constructor(){super(...arguments);cb(this,"ReactComponent",ef(({events:b})=>{const g=this.getBounds(),m=$e(),G=m.selectedShapesArray.some(ka=>m.shapesInGroups([this]).includes(ka)),V=this.ReactIndicator;return(0,mb.jsxs)(jo,Jc(oc({},b),{children:[(0,mb.jsx)("rect",{className:"tl-hitarea-fill",
x:1,y:1,width:Math.max(.01,g.width-2),height:Math.max(.01,g.height-2),pointerEvents:"all"}),G&&(0,mb.jsx)("g",{stroke:"var(--color-selectedFill)",children:(0,mb.jsx)(V,{})})]}))}));cb(this,"ReactIndicator",ef(()=>{const b=this.getBounds();return(0,mb.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:b.width+16,height:b.height+16,fill:"transparent"})}))}};cb(uw,"id","group");cb(uw,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});mb=W(587);var nI=
{xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},$q=class extends pr{constructor(b={}){super(b);cb(this,"ReactComponent",ef(({events:g,isErasing:m})=>{const {pointsPath:G,props:{stroke:V,strokeWidth:ka,opacity:qa}}=this;return(0,mb.jsx)(jo,Jc(oc({},g),{opacity:m?.2:1,children:(0,mb.jsx)("path",{d:G,strokeWidth:16*ka,stroke:Ug(V,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:qa})}))}));cb(this,"setScaleLevel",g=>xf(this,null,function*(){this.update({scaleLevel:g,
strokeWidth:nI[null!=g?g:"md"]});this.onResetBounds()}));cb(this,"ReactIndicator",ef(()=>{const {pointsPath:g}=this;return(0,mb.jsx)("path",{d:g,fill:"none"})}));cb(this,"validateProps",g=>{g=aj(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});sg(this)}get pointsPath(){const {points:b}=this.props;return Bq.getCurvedPathForPoints(b)}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:m,
opacity:G}}=this;return(0,mb.jsx)("path",{d:b,strokeWidth:16*m,stroke:Ug(g,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:G})}};cb($q,"id","highlighter");cb($q,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});rd([pe],$q.prototype,"pointsPath",1);rd([pe],$q.prototype,"scaleLevel",1);rd([hg],$q.prototype,"setScaleLevel",2);var vw=
Wd(W(22));mb=W(587);var ww={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},bq=class extends on{constructor(){super(...arguments);cb(this,"canChangeAspectRatio",!0);cb(this,"canFlip",!1);cb(this,"canEdit",!0);cb(this,"htmlAnchorRef",vw.createRef());cb(this,"setScaleLevel",b=>xf(this,null,function*(){var g;const m=me.mul(this.props.size,ww[null!=b?b:"md"]/ww[null!=(g=this.props.scaleLevel)?g:"md"]);this.update({scaleLevel:b});yield Ej();this.update({size:m})}));cb(this,"onResetBounds",b=>{var g;if(this.htmlAnchorRef.current){const m=
this.htmlAnchorRef.current.getBoundingClientRect(),[G,V]=me.div([m.width,m.height],null!=(g=null==b?void 0:b.zoom)?g:1);this.update({size:[Math.max(Math.min(G||400,1400),10),Math.max(Math.min(V||400,1400),10)]})}return this});cb(this,"ReactComponent",ef(({events:b,isErasing:g,isEditing:m})=>{const {props:{html:G,scaleLevel:V}}=this,ka=Hm(),qa=$e(),Ia=qa.selectedIds.has(this.id),Ta=ka||Ia&&!m||"select"!==qa.selectedTool.id,Xa=vw.useCallback(vb=>{Ta||vb.stopPropagation()},[Ta]),ib=ww[null!=V?V:"md"];
vw.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:qa.viewport.camera.zoom}),qa.persist(!0))},[]);return(0,mb.jsx)(io,Jc(oc({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,mb.jsx)("div",{onWheelCapture:Xa,onPointerDown:Xa,onPointerUp:Xa,className:"tl-html-container",style:{pointerEvents:ka||!m&&!Ia?"none":"all",overflow:m?"auto":"hidden",width:`calc(100% / ${ib})`,height:`calc(100% / ${ib})`,transform:`scale(${ib})`},children:(0,mb.jsx)("div",{ref:this.htmlAnchorRef,
className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:G.trim()}})})}))}));cb(this,"ReactIndicator",ef(()=>{const {props:{size:[b,g]}}=this;return(0,mb.jsx)("rect",{width:b,height:g,fill:"transparent"})}));cb(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return aj(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};cb(bq,"id","html");cb(bq,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],
size:[600,0],html:""});rd([pe],bq.prototype,"scaleLevel",1);rd([hg],bq.prototype,"setScaleLevel",2);var SA=Wd(W(22));mb=W(587);var ar=class extends on{constructor(){super(...arguments);cb(this,"frameRef",SA.createRef());cb(this,"canEdit",!0);cb(this,"onIFrameSourceChange",b=>{this.update({url:b})});cb(this,"reload",()=>{var b,g;this.frameRef.current&&(this.frameRef.current.src=null==(g=null==(b=this.frameRef)?void 0:b.current)?void 0:g.src)});cb(this,"ReactComponent",ef(({events:b,isErasing:g,isEditing:m})=>
{SA.useRef(null);return(0,mb.jsx)(io,Jc(oc({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,mb.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:m?"all":"none",userSelect:"none"},children:this.props.url&&(0,mb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,mb.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin"})})})}))}));
cb(this,"ReactIndicator",ef(()=>{const {props:{size:[b,g]}}=this;return(0,mb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}))}};cb(ar,"id","iframe");cb(ar,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});rd([hg],ar.prototype,"onIFrameSourceChange",2);rd([hg],ar.prototype,"reload",2);var oI=Wd(W(22));mb=W(587);var Bu=class extends tv{constructor(){super(...arguments);cb(this,"ReactComponent",ef(({events:b,isErasing:g,isBinding:m,asset:G})=>
{const {props:{opacity:V,objectFit:ka,clipping:qa,size:[Ia,Ta]}}=this,[Xa,ib,vb,Lb]=Array.isArray(qa)?qa:[qa,qa,qa,qa],{handlers:cc}=oI.useContext(Qm);return(0,mb.jsxs)(io,Jc(oc({},b),{opacity:g?.2:V,children:[m&&(0,mb.jsx)(Uk,{mode:"html",strokeWidth:4,size:[Ia,Ta]}),(0,mb.jsx)("div",{"data-asset-loaded":!!G,className:"tl-image-shape-container",children:G?(0,mb.jsx)("img",{src:cc?cc.makeAssetUrl(G.src):G.src,draggable:!1,style:{position:"relative",top:-Xa,left:-Lb,width:Ia+(Lb-ib),height:Ta+(Xa-
vb),objectFit:ka}}):"Asset is missing"})]}))}));cb(this,"ReactIndicator",ef(()=>{const {props:{size:[b,g]}}=this;return(0,mb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}getShapeSVGJsx({assets:b}){var g,m;const G=this.getBounds(),{assetId:V,clipping:ka}=this.props;if(b=b.find(qa=>qa.id===V)){Array.isArray(ka);const qa=null==(m=null==(g=window.logseq)?void 0:g.api)?void 0:m.make_asset_url;return(0,mb.jsx)("image",{width:G.width,height:G.height,href:qa?qa(b.src):b.src})}return super.getShapeSVGJsx({})}};
cb(Bu,"id","image");cb(Bu,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var xw=Wd(W(22)),pI=Wd(W(22));mb=W(587);mb=W(587);var TA={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},qI=pI.memo(function({style:b,start:g,end:m,decorationStart:G,decorationEnd:V,scaleLevel:ka}){const qa=me.dist(g,m);if(2>qa)return null;const {strokeWidth:Ia}=b,Ta=1+Ia*TA[null!=ka?ka:"md"]/10,Xa="M"+me.toFixed(g)+"L"+me.toFixed(m);
ka=Math.min(qa/3,Ia*TA[null!=ka?ka:"md"]);G=G?Im(g,m,ka):null;V=V?Im(m,g,ka):null;return(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsx)("path",{className:"tl-stroke-hitarea",d:Xa}),(0,mb.jsx)("path",{d:Xa,strokeWidth:Ta,stroke:b.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===b.strokeType?"8 4":void 0,pointerEvents:"stroke"}),G&&(0,mb.jsx)(xn,{left:G.left,middle:g,right:G.right,stroke:b.stroke,strokeWidth:Ta}),V&&(0,mb.jsx)(xn,{left:V.left,middle:m,right:V.right,stroke:b.stroke,
strokeWidth:Ta})]})});mb=W(587);mb=W(587);var rI={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Vr=class extends Bs{constructor(){super(...arguments);cb(this,"hideSelection",!0);cb(this,"canEdit",!0);cb(this,"ReactComponent",ef(({events:b,isErasing:g,isEditing:m,onEditingEnd:G})=>{const {stroke:V,handles:{start:ka,end:qa},opacity:Ia,label:Ta,italic:Xa,fontWeight:ib,fontSize:vb,id:Lb}=this.props,cc=Ta||m?ai(Ta||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:vb,lineHeight:1,fontWeight:ib},6):[0,
0],Tb=me.med(ka.point,qa.point);var kc=me.dist(ka.point,qa.point);kc=Math.max(.5,Math.min(1,Math.max(kc/(cc[1]+128),kc/(cc[0]+128))));const mc=this.getBounds(),Vb=xw.useMemo(()=>me.sub(Tb,me.toFixed([mc.width/2,mc.height/2])),[mc,kc,Tb]),tc=xw.useCallback(Ic=>{var Sc;null==(Sc=this.update)?void 0:Sc.call(this,{label:Ic})},[Ta]);return(0,mb.jsxs)("div",Jc(oc({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-line-container",children:[(0,mb.jsx)(Au,{font:"20px / 1 var(--ls-font-family)",
text:Ta,fontSize:vb,color:Ug(V,"text"),offsetX:Vb[0],offsetY:Vb[1],scale:kc,isEditing:m,onChange:tc,onBlur:G,fontStyle:Xa?"italic":"normal",fontWeight:ib,pointerEvents:!!Ta}),(0,mb.jsxs)(jo,{opacity:g?.2:Ia,id:Lb+"_svg",children:[(0,mb.jsx)(To,{id:Lb,bounds:mc,labelSize:cc,offset:Vb,scale:kc}),(0,mb.jsx)("g",{pointerEvents:"none",mask:Ta||m?`url(#${Lb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));cb(this,"setScaleLevel",b=>xf(this,null,function*(){this.update({scaleLevel:b,fontSize:rI[null!=
b?b:"md"]});this.onResetBounds()}));cb(this,"ReactIndicator",ef(({isEditing:b})=>{const {id:g,decorations:m,label:G,strokeWidth:V,fontSize:ka,fontWeight:qa,handles:{start:Ia,end:Ta}}=this.props,Xa=this.getBounds(),ib=G||b?ai(G,{fontFamily:"var(--ls-font-family)",fontSize:ka,lineHeight:1,fontWeight:qa},6):[0,0],vb=me.med(Ia.point,Ta.point);var Lb=me.dist(Ia.point,Ta.point);Lb=Math.max(.5,Math.min(1,Math.max(Lb/(ib[1]+128),Lb/(ib[0]+128))));const cc=xw.useMemo(()=>me.sub(vb,me.toFixed([Xa.width/2,Xa.height/
2])),[Xa,Lb,vb]);return(0,mb.jsxs)("g",{children:[(0,mb.jsx)("path",{mask:G?`url(#${g}_clip)`:"",d:so({strokeWidth:V},Ia.point,Ta.point,null==m?void 0:m.start,null==m?void 0:m.end)}),G&&!b&&(0,mb.jsx)("rect",{x:Xa.width/2-ib[0]/2*Lb+cc[0],y:Xa.height/2-ib[1]/2*Lb+cc[1],width:ib[0]*Lb,height:ib[1]*Lb,rx:4*Lb,ry:4*Lb,fill:"transparent"})]})}));cb(this,"validateProps",b=>aj(this,b))}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx({preview:b}){const {stroke:g,fill:m,
strokeWidth:G,strokeType:V,decorations:ka,label:qa,scaleLevel:Ia,handles:{start:Ta,end:Xa}}=this.props,ib=me.med(Ta.point,Xa.point);return(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsx)(qI,{style:{stroke:Ug(g,"text"),fill:m,strokeWidth:G,strokeType:V},scaleLevel:Ia,start:Ta.point,end:Xa.point,decorationStart:null==ka?void 0:ka.start,decorationEnd:null==ka?void 0:ka.end}),b&&(0,mb.jsx)(mb.Fragment,{children:(0,mb.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${ib[0]}, ${ib[1]})`,
textAnchor:"middle",fill:Ug(g,"text"),stroke:Ug(g,"text"),children:qa})})]})}};cb(Vr,"id","line");cb(Vr,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});rd([pe],Vr.prototype,"scaleLevel",1);rd([hg],Vr.prototype,"setScaleLevel",2);var Gn=Wd(W(22));mb=
W(587);var ft={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},sI=ef(({type:b,fill:g,opacity:m,children:G})=>{const V="var(--ls-secondary-background-color)"!==g?Ug(g,"background"):"var(--ls-tertiary-background-color)";g=g&&"var(--ls-secondary-background-color)"!==g?ag(g)?`var(--ls-highlight-color-${g})`:g:"var(--ls-secondary-background-color)";return(0,mb.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===b?"page":"block"}`,children:[(0,mb.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",
style:{opacity:m,background:"P"===b?V:`linear-gradient(0deg, ${g}, ${V})`}}),(0,mb.jsx)("div",{className:"relative",children:G})]})}),Fl=class extends on{constructor(b={}){var g;super(b);cb(this,"hideRotateHandle",!0);cb(this,"canChangeAspectRatio",!0);cb(this,"canFlip",!0);cb(this,"canEdit",!0);cb(this,"persist",null);cb(this,"initialHeightCalculated",!0);cb(this,"getInnerHeight",null);cb(this,"toggleCollapsed",()=>xf(this,null,function*(){var m;const G=!this.collapsed;if("B"===this.props.blockType){if(this.update({compact:G}),
this.canResize[1]=!G,!G)this.onResetBounds()}else{const V=this.props.size[1];this.canResize[1]=!G;this.update({isAutoResizing:!G,collapsed:G,size:[this.props.size[0],G?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:G?V:this.props.collapsedHeight})}null==(m=this.persist)?void 0:m.call(this)}));cb(this,"setScaleLevel",m=>xf(this,null,function*(){var G;const V=me.mul(this.props.size,ft[null!=m?m:"md"]/ft[null!=(G=this.props.scaleLevel)?G:"md"]);this.update({scaleLevel:m});yield Ej();
this.update({size:V})}));cb(this,"onResetBounds",m=>{m=this.getAutoResizeHeight();null!==m&&1<Math.abs(m-this.props.size[1])&&(this.update({size:[this.props.size[0],m]}),this.initialHeightCalculated=!0);return this});cb(this,"onResize",(m,G)=>{var V;const {bounds:ka,rotation:qa,scale:[Ia,Ta]}=G;m=[...this.scale];0>Ia&&(m[0]*=-1);0>Ta&&(m[1]*=-1);G=ka.height;this.props.isAutoResizing&&(G=null!=(V=this.getAutoResizeHeight())?V:G);return this.update({point:[ka.minX,ka.minY],size:[Math.max(1,ka.width),
Math.max(1,G)],scale:m,rotation:qa})});cb(this,"PortalComponent",ef(({})=>{const {props:{pageId:m,fill:G,opacity:V}}=this,{renderers:ka}=Gn.useContext(Qm),qa=$e(),Ia=Gn.useRef(null),[,Ta]=this.useComponentSize(Ia,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==ka||!ka.Page)return null;const {Page:Xa,Block:ib}=ka,[vb,Lb]=Gn.useState(!1);Gn.useEffect(()=>{var cc,Tb;if(this.props.isAutoResizing){const kc=(null!=(Tb=null==(cc=this.getInnerHeight)?
void 0:cc.call(this))?Tb:Ta)+this.getHeaderHeight();Ta&&1<Math.abs(kc-this.props.size[1])&&(this.update({size:[this.props.size[0],kc]}),vb&&qa.persist(!0))}},[Ta,this.props.isAutoResizing]);Gn.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();qa.persist(!0)})},[this.initialHeightCalculated]);Gn.useEffect(()=>{setTimeout(function(){Lb(!0)})},[]);return(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>
qa.viewport.camera.zoom?"optimizeSpeed":"auto",background:G&&"var(--ls-secondary-background-color)"!==G?ag(G)?`var(--ls-highlight-color-${G})`:G:"var(--ls-secondary-background-color)",opacity:V}}),(0,mb.jsx)("div",{ref:Ia,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(vb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,mb.jsx)(ib,{blockId:m}):(0,mb.jsx)(Xa,{pageName:m}))})]})}));cb(this,"ReactComponent",
ef(m=>{var G;const {events:V,isErasing:ka,isEditing:qa,isBinding:Ia}=m,{props:{opacity:Ta,pageId:Xa,fill:ib,scaleLevel:vb,strokeWidth:Lb,size:cc}}=this,Tb=$e(),{renderers:kc,handlers:mc}=Gn.useContext(Qm);this.persist=()=>Tb.persist();const Vb=Hm(),tc=Tb.selectedIds.has(this.id)&&1===Tb.selectedIds.size,Ic=Tb.isIn("logseq-portal.creating")&&!Xa,Sc=(Vb||tc&&!qa||"select"!==Tb.selectedTool.id)&&!Ic,Xc=Gn.useCallback(hd=>{Sc||hd.stopPropagation()},[Sc]),Xd=1===Tb.selectedShapesArray.length&&Tb.selectedShapesArray.some(hd=>
"logseq-portal"===hd.type&&hd.props.id!==this.props.id&&Xa&&hd.props.pageId===Xa),ce=ft[null!=vb?vb:"md"];Gn.useEffect(()=>this.props.collapsed&&qa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[qa,this.props.collapsed]);Gn.useEffect(()=>{if(Ic){const hd=[Tb.viewport.bounds.width,Tb.viewport.bounds.height],md=Tb.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(md[0]>hd[0]-400||md[1]>hd[1]-
240||1.5<Tb.viewport.camera.zoom||.5>Tb.viewport.camera.zoom)&&Tb.viewport.zoomToBounds(Jc(oc({},this.bounds),{minY:this.bounds.maxY+25}))}},[Tb.viewport.bounds.height.toFixed(2)]);const De=Gn.useCallback(hd=>{this.initialHeightCalculated=!1;const md=Xj(hd)?"B":"P";this.update({pageId:hd,size:[400,320],blockType:md,compact:"B"===md});Tb.selectTool("select");Tb.history.resume();Tb.history.persist()},[]),Oe=this.PortalComponent;var qf=Gn.useMemo(()=>{var hd;if(Xa&&"B"===this.props.blockType)return null==
(hd=null==mc?void 0:mc.queryBlockByUUID(Xa))?void 0:hd.content},[null==mc?void 0:mc.queryBlockByUUID,Xa]);qf="B"===this.props.blockType&&"string"!==typeof qf;const nf=(!this.props.collapsed||qa)&&!qf;if(null==kc||!kc.Page)return null;const {Breadcrumb:ff,PageName:He}=kc,Bd={width:`calc(100% / ${ce})`,height:`calc(100% / ${ce})`,opacity:ka?.2:1};1!==ce&&(Bd.transform=`scale(${ce})`);return(0,mb.jsxs)(io,Jc(oc({style:{pointerEvents:"all"}},V),{children:[Ia&&(0,mb.jsx)(Uk,{mode:"html",strokeWidth:Lb,
size:cc}),(0,mb.jsx)("div",{"data-inner-events":!Sc,onWheelCapture:Xc,onPointerDown:Xc,onPointerUp:Xc,style:{width:"100%",height:"100%",pointerEvents:Vb||!qa&&!tc?"none":"all"},children:Ic?(0,mb.jsx)(hB,{onChange:De,onAddBlock:hd=>{setTimeout(()=>{var md,od,Cd;Tb.api.editShape(this);null==(Cd=null==(od=null==(md=window.logseq)?void 0:md.api)?void 0:od.edit_block)?void 0:Cd.call(od,hd)})},placeholder:"Create or search your graph..."}):(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsxs)("div",{className:"tl-logseq-portal-container",
"data-collapsed":this.collapsed,"data-page-id":Xa,"data-portal-selected":Xd,"data-editing":qa,style:Bd,children:[!this.props.compact&&!qf&&(0,mb.jsx)(sI,{type:null!=(G=this.props.blockType)?G:"P",fill:ib,opacity:Ta,children:"P"===this.props.blockType?(0,mb.jsx)(He,{pageName:Xa}):(0,mb.jsx)(ff,{blockId:Xa})}),qf&&(0,mb.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),nf&&(0,mb.jsx)(Oe,oc({},m))]}),!Tb.readOnly&&(0,mb.jsx)(Gz,{active:!!this.collapsed,style:{opacity:tc?1:0},
icon:"B"===this.props.blockType?"block":"page",onClick:this.toggleCollapsed,otherIcon:"whiteboard-element"})]})})]}))}));cb(this,"ReactIndicator",ef(()=>{const m=this.getBounds();return(0,mb.jsx)("rect",{width:m.width,height:m.height,fill:"transparent",rx:8,ry:8})}));cb(this,"validateProps",m=>{var G;if(void 0!==m.size){const V=ft[null!=(G=this.props.scaleLevel)?G:"md"];m.size[0]=Math.max(m.size[0],60*V);m.size[1]=Math.max(m.size[1],40*V)}return aj(this,m)});sg(this);b.collapsed&&Object.assign(this.canResize,
[!0,!1]);0===(null==(g=b.size)?void 0:g[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(b){return b?/^\(\(.*\)\)$/.test(b)&&40===b.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}useComponentSize(b,g=""){const [m,G]=Gn.useState([0,0]),V=$e();Gn.useEffect(()=>{if(null==b?0:b.current){const ka=g?b.current.querySelector(g):b.current;if(ka){const qa=()=>{const {width:Ta,
height:Xa}=ka.getBoundingClientRect(),ib=me.div([Ta,Xa],V.viewport.camera.zoom);G(ib);return ib};qa();this.getInnerHeight=()=>qa()[1];const Ia=new ResizeObserver(()=>{qa()});Ia.observe(ka);return()=>{Ia.disconnect()}}}return()=>{}},[b,g]);return m}getHeaderHeight(){var b;const g=ft[null!=(b=this.props.scaleLevel)?b:"md"];return this.props.compact?0:40*g}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var b,g,m;const G=this.getBounds();
return(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?ag(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:Ug(this.props.fill,"background"),strokeWidth:null!=(b=this.props.strokeWidth)?b:2,fillOpacity:null!=(g=this.props.opacity)?g:.2,width:G.width,rx:8,ry:8,height:G.height}),!this.props.compact&&(0,mb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==
this.props.fill?Ug(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(m=this.props.opacity)?m:.2,x:1,y:1,width:G.width-2,height:38,rx:8,ry:8}),(0,mb.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${G.width/2}, ${10+G.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};cb(Fl,
"id","logseq-portal");cb(Fl,"defaultSearchQuery","");cb(Fl,"defaultSearchFilter",null);cb(Fl,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});rd([pe],Fl.prototype,"collapsed",1);rd([hg],Fl.prototype,"toggleCollapsed",2);rd([pe],Fl.prototype,"scaleLevel",1);rd([hg],Fl.prototype,"setScaleLevel",
2);var {min:Wr,PI:tI}=Math,gt=tI+1E-4;mb=W(587);var uI={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},vI={easing:b=>Math.sin(b*Math.PI/2),simulatePressure:!0},wI={easing:b=>b*b,simulatePressure:!1},br=class extends pr{constructor(b={}){super(b);cb(this,"ReactComponent",ef(({events:g,isErasing:m})=>{const {props:{opacity:G}}=this;return(0,mb.jsx)(jo,Jc(oc({},g),{opacity:m?.2:G,children:this.getShapeSVGJsx()}))}));cb(this,"setScaleLevel",g=>xf(this,null,function*(){this.update({scaleLevel:g,strokeWidth:uI[null!=
g?g:"md"]});this.onResetBounds()}));cb(this,"ReactIndicator",ef(()=>{const {pointsPath:g}=this;return(0,mb.jsx)("path",{d:g})}));cb(this,"validateProps",g=>{g=aj(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});sg(this)}get pointsPath(){var b=this.props;if(2>b.points.length)var g="";else g=Jc(oc({size:1+1.5*b.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===b.points[1][2]?vI:wI),{last:b.isComplete}),b=yo(b.points,g),g=Bq.getSvgPathFromStroke(Uo(b,g));
return g}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:m,strokeType:G}}=this;return(0,mb.jsx)("path",{pointerEvents:"all",d:b,strokeWidth:m/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:Ug(g,"text"),fill:Ug(g,"text"),strokeDasharray:"dashed"===G?"12 4":void 0})}};cb(br,"id","pencil");cb(br,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,
strokeType:"line",strokeWidth:2,opacity:1});rd([pe],br.prototype,"pointsPath",1);rd([pe],br.prototype,"scaleLevel",1);rd([hg],br.prototype,"setScaleLevel",2);var UA=Wd(W(22));mb=W(587);var xI={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Xr=class extends Kp{constructor(){super(...arguments);cb(this,"canEdit",!0);cb(this,"ReactComponent",ef(({events:b,isErasing:g,isSelected:m,isEditing:G,onEditingEnd:V})=>{const {offset:[ka,qa],props:{stroke:Ia,fill:Ta,noFill:Xa,strokeWidth:ib,opacity:vb,strokeType:Lb,label:cc,
italic:Tb,fontWeight:kc,fontSize:mc}}=this,Vb=this.getVertices(ib/2).join();var tc=cc||G?ai(cc,{fontFamily:"var(--ls-font-family)",fontSize:mc,lineHeight:1,fontWeight:kc},4):[0,0];const Ic=[this.props.size[0]/2,2*this.props.size[1]/3];tc=Math.max(.5,Math.min(1,this.props.size[0]/(2*tc[0]),this.props.size[1]/(2*tc[1])));const Sc=this.getBounds(),Xc=UA.useMemo(()=>me.sub(Ic,me.toFixed([Sc.width/2,Sc.height/2])),[Sc,tc,Ic]),Xd=UA.useCallback(ce=>{var De;null==(De=this.update)?void 0:De.call(this,{label:ce})},
[cc]);return(0,mb.jsxs)("div",Jc(oc({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,mb.jsx)(Au,{font:"20px / 1 var(--ls-font-family)",text:cc,fontSize:mc,color:Ug(Ia,"text"),offsetX:Xc[0],offsetY:Xc[1]/tc,scale:tc,isEditing:G,onChange:Xd,onBlur:V,fontStyle:Tb?"italic":"normal",fontWeight:kc,pointerEvents:!!cc}),(0,mb.jsx)(jo,{opacity:g?.2:vb,children:(0,mb.jsxs)("g",{transform:`translate(${ka}, ${qa})`,children:[(0,mb.jsx)("polygon",{className:m||!Xa?"tl-hitarea-fill":"tl-hitarea-stroke",
points:Vb}),(0,mb.jsx)("polygon",{points:Vb,stroke:Ug(Ia,"stroke"),fill:Xa?"none":Ug(Ta,"background"),strokeWidth:ib,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Lb?"8 2":void 0})]})})]}))}));cb(this,"setScaleLevel",b=>xf(this,null,function*(){this.update({scaleLevel:b,fontSize:xI[null!=b?b:"md"]});this.onResetBounds()}));cb(this,"ReactIndicator",ef(()=>{const {offset:[b,g],props:{strokeWidth:m}}=this;return(0,mb.jsx)("g",{children:(0,mb.jsx)("polygon",{transform:`translate(${b}, ${g})`,
points:this.getVertices(m/2).join()})})}));cb(this,"validateProps",b=>{void 0!==b.sides&&(b.sides=Math.max(b.sides,3));return aj(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {offset:[g,m],props:{stroke:G,fill:V,noFill:ka,strokeWidth:qa,opacity:Ia,strokeType:Ta}}=this;b=this.getVertices(qa/2).join();return(0,mb.jsxs)("g",{transform:`translate(${g}, ${m})`,opacity:Ia,children:[(0,mb.jsx)("polygon",{className:ka?"tl-hitarea-stroke":"tl-hitarea-fill",
points:b}),(0,mb.jsx)("polygon",{points:b,stroke:Ug(G,"stroke"),fill:ka?"none":Ug(V,"background"),strokeWidth:qa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Ta?"8 2":void 0})]})}};cb(Xr,"id","polygon");cb(Xr,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});rd([pe],Xr.prototype,"scaleLevel",1);rd([hg],
Xr.prototype,"setScaleLevel",2);var gp=Wd(W(22));mb=W(587);var yI={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Yr=class extends uv{constructor(){super(...arguments);cb(this,"ReactComponent",ef(({events:b,isErasing:g,isEditing:m,onEditingEnd:G})=>{const {props:{opacity:V,fontFamily:ka,fontSize:qa,fontWeight:Ia,italic:Ta,lineHeight:Xa,text:ib,stroke:vb,padding:Lb}}=this,cc=gp.useRef(null),Tb=gp.useRef(!1),kc=gp.useRef(null),mc=gp.useCallback(Xc=>{const {isSizeLocked:Xd}=this.props;Xc=Rq.normalizeText(Xc.currentTarget.value);
Xd?this.update({text:Xc,size:this.getAutoSizedBoundingBox({text:Xc})}):this.update({text:Xc})},[]),Vb=gp.useCallback(Xc=>{if("Escape"!==Xc.key)if("Tab"===Xc.key&&0===ib.length)Xc.preventDefault();else{if("Meta"!==Xc.key&&!Xc.metaKey)Xc.stopPropagation();else if("z"===Xc.key&&Xc.metaKey){Xc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Xc.stopPropagation();Xc.preventDefault();return}"Tab"===Xc.key&&(Xc.preventDefault(),Xc.shiftKey?Vn.unindent(Xc.currentTarget):Vn.indent(Xc.currentTarget),
this.update({text:Rq.normalizeText(Xc.currentTarget.value)}))}},[]),tc=gp.useCallback(Xc=>{m&&(Xc.currentTarget.setSelectionRange(0,0),null==G?void 0:G())},[G]),Ic=gp.useCallback(Xc=>{m&&Tb.current&&document.activeElement===Xc.currentTarget&&Xc.currentTarget.select()},[m]),Sc=gp.useCallback(Xc=>{m&&Xc.stopPropagation()},[m]);gp.useEffect(()=>{m?requestAnimationFrame(()=>{Tb.current=!0;const Xc=cc.current;Xc&&(Xc.focus(),Xc.select())}):null==G?void 0:G()},[m,G]);gp.useLayoutEffect(()=>{if(0===this.props.size[0]||
0===this.props.size[1])this.onResetBounds()},[]);return(0,mb.jsx)(io,Jc(oc({},b),{opacity:g?.2:V,children:(0,mb.jsx)("div",{ref:kc,className:"tl-text-shape-wrapper","data-hastext":!!ib,"data-isediting":m,style:{fontFamily:ka,fontStyle:Ta?"italic":"normal",fontSize:qa,fontWeight:Ia,padding:Lb,lineHeight:Xa,color:Ug(vb,"text")},children:m?(0,mb.jsx)("textarea",{ref:cc,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",
placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:ib,onFocus:Ic,onChange:mc,onKeyDown:Vb,onBlur:tc,onPointerDown:Sc}):(0,mb.jsxs)(mb.Fragment,{children:[ib,""]})})}))}));cb(this,"setScaleLevel",b=>xf(this,null,function*(){this.update({scaleLevel:b,fontSize:yI[null!=b?b:"md"]});this.onResetBounds()}));cb(this,"ReactIndicator",ef(({isEditing:b})=>{const {props:{borderRadius:g},bounds:m}=this;return b?null:(0,mb.jsx)("rect",{width:m.width,height:m.height,rx:g,ry:g,
fill:"transparent"})}));cb(this,"validateProps",b=>aj(this,b));cb(this,"getBounds",()=>{const [b,g]=this.props.point,[m,G]=this.props.size;return{minX:b,minY:g,maxX:b+m,maxY:g+G,width:m,height:G}});cb(this,"onResizeStart",({isSingle:b})=>{var g;if(!b)return this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];return this.update({isSizeLocked:!1})});cb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var b;return null!=
(b=this.props.scaleLevel)?b:"md"}getAutoSizedBoundingBox(b={}){const {text:g=this.props.text,fontFamily:m=this.props.fontFamily,fontSize:G=this.props.fontSize,fontWeight:V=this.props.fontWeight,lineHeight:ka=this.props.lineHeight,padding:qa=this.props.padding}=b,[Ia,Ta]=ai(g,{fontFamily:m,fontSize:G,lineHeight:ka,fontWeight:V},qa);return[Ia,Ta]}getShapeSVGJsx(){var b=window.navigator.userAgent.toLowerCase();if(b.includes("webkit")&&!b.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:g,
stroke:m,fontSize:G,fontFamily:V}}=this;b=this.getBounds();return(0,mb.jsx)("foreignObject",{width:b.width,height:b.height,children:(0,mb.jsx)("div",{style:{color:Ug(m,"text"),fontSize:G,fontFamily:V,display:"contents"},children:g})})}};cb(Yr,"id","text");cb(Yr,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,
strokeType:"line",strokeWidth:2,opacity:1});rd([pe],Yr.prototype,"scaleLevel",1);rd([hg],Yr.prototype,"setScaleLevel",2);var VA=Wd(W(22));mb=W(587);var Cu=class extends on{constructor(){super(...arguments);cb(this,"canFlip",!1);cb(this,"canEdit",!0);cb(this,"canChangeAspectRatio",!1);cb(this,"ReactComponent",ef(({events:b,isErasing:g,asset:m,isEditing:G})=>{const {props:{opacity:V}}=this,ka=Hm();var qa=$e();const Ia=qa.selectedIds.has(this.id),Ta=ka||Ia&&!G||"select"!==qa.selectedTool.id;qa=VA.useCallback(ib=>
{Ta||ib.stopPropagation()},[Ta]);const {handlers:Xa}=VA.useContext(Qm);return(0,mb.jsx)(io,Jc(oc({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:V}},b),{children:(0,mb.jsx)("div",{onWheelCapture:qa,onPointerDown:qa,onPointerUp:qa,className:"tl-video-container",style:{pointerEvents:ka||!G&&!Ia?"none":"all",overflow:G?"auto":"hidden"},children:m&&(0,mb.jsx)("video",{controls:!0,src:Xa?Xa.makeAssetUrl(m.src):m.src})})}))}));cb(this,"ReactIndicator",ef(()=>{const {props:{size:[b,g]}}=this;
return(0,mb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}};cb(Cu,"id","video");cb(Cu,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});mb=W(587);var WA=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,XA=class extends on{constructor(){super(...arguments);cb(this,"aspectRatio",480/853);cb(this,"canChangeAspectRatio",!1);cb(this,"canFlip",
!1);cb(this,"canEdit",!0);cb(this,"onYoutubeLinkChange",b=>{this.update({url:b,size:XA.defaultProps.size})});cb(this,"ReactComponent",ef(({events:b,isErasing:g,isEditing:m})=>(0,mb.jsx)(io,Jc(oc({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,mb.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:m?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},
children:this.embedId?(0,mb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,mb.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,mb.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},
children:(0,mb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,mb.jsxs)("g",{children:[(0,mb.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,mb.jsx)("g",{children:(0,mb.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,mb.jsxs)("g",{fill:"#fff",children:[(0,mb.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,mb.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))));cb(this,"ReactIndicator",ef(()=>{const {props:{size:[b,g]}}=this;return(0,mb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));cb(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[0]*this.aspectRatio,1));return aj(this,b)})}get embedId(){var b,g;const m=this.props.url,G=m.match(WA);return null!=(g=null!=(b=null==
G?void 0:G[1])?b:m)?g:""}getShapeSVGJsx(){const b=this.getBounds(),g=this.embedId;return g?(0,mb.jsxs)("g",{children:[(0,mb.jsx)("image",{width:b.width,height:b.height,href:`https://img.youtube.com/vi/${g}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,mb.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,mb.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},cr=XA;cb(cr,"id","youtube");cb(cr,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});rd([pe],cr.prototype,"embedId",1);rd([hg],cr.prototype,"onYoutubeLinkChange",2);var Zr=Wd(W(22));mb=W(587);var YA=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,ZA=class extends on{constructor(){super(...arguments);cb(this,"canFlip",!1);cb(this,"canEdit",!0);cb(this,"initialHeightCalculated",
!0);cb(this,"getInnerHeight",null);cb(this,"onTwitterLinkChange",b=>{this.update({url:b,size:ZA.defaultProps.size})});cb(this,"ReactComponent",ef(({events:b,isErasing:g,isEditing:m})=>{const {renderers:{Tweet:G}}=Zr.useContext(Qm),V=$e(),ka=Zr.useRef(null),[,qa]=this.useComponentSize(ka);Zr.useEffect(()=>{var Ia,Ta;const Xa=null!=(Ta=null==(Ia=this.getInnerHeight)?void 0:Ia.call(this))?Ta:qa;qa&&1<Math.abs(Xa-this.props.size[1])&&(this.update({size:[this.props.size[0],Xa]}),V.persist(!0))},[qa]);
Zr.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();V.persist(!0)})},[this.initialHeightCalculated]);return(0,mb.jsx)(io,Jc(oc({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,mb.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:m?"all":"none",userSelect:"none"},children:this.embedId?(0,mb.jsx)("div",{ref:ka,children:(0,mb.jsx)(G,{tweetId:this.embedId})}):null})}))}));cb(this,"ReactIndicator",
ef(()=>{const {props:{size:[b,g]}}=this;return(0,mb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));cb(this,"onResetBounds",b=>{b=this.getAutoResizeHeight();null!==b&&1<Math.abs(b-this.props.size[1])&&(this.update({size:[this.props.size[0],b]}),this.initialHeightCalculated=!0);return this});cb(this,"onResize",(b,g)=>{var m;const {bounds:G,rotation:V,scale:[ka,qa]}=g;b=[...this.scale];0>ka&&(b[0]*=-1);0>qa&&(b[1]*=-1);g=null!=(m=this.getAutoResizeHeight())?m:G.height;return this.update({point:[G.minX,
G.minY],size:[Math.max(1,G.width),Math.max(1,g)],scale:b,rotation:V})});cb(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.min(Math.max(b.size[0],300),550),b.size[1]=Math.max(b.size[1],1));return aj(this,b)})}get embedId(){var b,g;const m=this.props.url,G=m.match(YA);return null!=(g=null!=(b=null==G?void 0:G[1])?b:m)?g:""}useComponentSize(b,g=""){const [m,G]=Zr.useState([0,0]),V=$e();Zr.useEffect(()=>{if(null==b?0:b.current){const ka=g?b.current.querySelector(g):b.current;if(ka){const qa=
()=>{const {width:Ta,height:Xa}=ka.getBoundingClientRect(),ib=me.div([Ta,Xa],V.viewport.camera.zoom);G(ib);return ib};qa();this.getInnerHeight=()=>qa()[1];const Ia=new ResizeObserver(()=>{qa()});Ia.observe(ka);return()=>{Ia.disconnect()}}}return()=>{}},[b,g]);return m}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const b=this.getBounds();return this.embedId?(0,mb.jsxs)("g",{children:[(0,mb.jsx)("rect",{width:b.width,height:b.height,fill:"#15202b",rx:8,
ry:8}),(0,mb.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,mb.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},$r=ZA;cb($r,"id","tweet");cb($r,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});rd([pe],$r.prototype,"embedId",1);rd([hg],$r.prototype,"onTwitterLinkChange",2);mb=W(587);var $A=[Tr,Ur,$q,Bu,Cu,Vr,br,Xr,Yr,cr,$r,ar,bq,Fl,uw],yw=class extends lp{constructor(){super(...arguments);cb(this,"Shape",Tr)}};cb(yw,"id","box");cb(yw,"shortcut",["9","r"]);var zw=class extends lp{constructor(){super(...arguments);
cb(this,"Shape",Ur)}};cb(zw,"id","ellipse");cb(zw,"shortcut",["o"]);var Aw=class extends Kt{};cb(Aw,"id","erase");cb(Aw,"shortcut",["6","e"]);var Bw=class extends As{constructor(){super(...arguments);cb(this,"Shape",$q);cb(this,"simplify",!0);cb(this,"simplifyTolerance",.618)}};cb(Bw,"id","highlighter");cb(Bw,"shortcut",["5","h"]);var Cw=class extends Mt{constructor(){super(...arguments);cb(this,"Shape",Vr)}};cb(Cw,"id","line");cb(Cw,"shortcut",["7","c"]);var Dw=class extends As{constructor(){super(...arguments);
cb(this,"Shape",br);cb(this,"simplify",!1)}};cb(Dw,"id","pencil");cb(Dw,"shortcut",["4","d"]);var aB=class extends lp{constructor(){super(...arguments);cb(this,"Shape",Xr)}};cb(aB,"id","polygon");var Ew=class extends Nt{constructor(){super(...arguments);cb(this,"Shape",Yr)}};cb(Ew,"id","text");cb(Ew,"shortcut",["8","t"]);var bB=class extends lp{constructor(){super(...arguments);cb(this,"Shape",cr)}};cb(bB,"id","youtube");var cB=class extends Bi{constructor(){super(...arguments);cb(this,"creatingShape");
cb(this,"offset",[0,0]);cb(this,"onEnter",()=>{this.app.history.pause();Id(()=>{const b=new Fl({id:Zk(),parentId:this.app.currentPage.id,point:me.sub(this.app.inputs.originPoint,this.offset),size:Fl.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=b;this.app.currentPage.addShapes(b);this.app.setEditingShape(b);this.app.setSelectedShapes([b])})});cb(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.creatingShape)break;this.app.selectTool("select");
break;case "canvas":b.order||this.app.selectTool("select")}});cb(this,"onExit",()=>{var b;this.creatingShape&&(this.app.history.resume(),(null==(b=this.creatingShape)?0:b.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};cb(cB,"id","creating");var dB=class extends Bi{constructor(){super(...arguments);cb(this,"cursor","crosshair");cb(this,"onPointerDown",b=>{this.tool.transition("creating")})}};
cb(dB,"id","idle");var ht=class extends Lp{constructor(){super(...arguments);cb(this,"Shape",Fl);cb(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])})}};cb(ht,"id","logseq-portal");cb(ht,"shortcut",["3"]);cb(ht,"states",[dB,cB]);cb(ht,"initial","idle");var eB=class extends lp{constructor(){super(...arguments);cb(this,"Shape",bq)}};cb(eB,"id","youtube");var fB=class extends lp{constructor(){super(...arguments);cb(this,"Shape",ar)}};cb(fB,"id","iframe");var zI=Wd(W(590));mb=
W(587);var AI=new Map($A.map(b=>[b.id,b])),Fw=class{constructor(b){cb(this,"shapes");cb(this,"pageId");cb(this,"assets");b&&this.load(b)}load(b){var g;const m=null==(g=null==b?void 0:b.pages)?void 0:g[0];this.pageId=null==m?void 0:m.id;this.assets=b.assets;this.shapes=null==m?void 0:m.shapes.map(G=>{var V=G.type;if(!V)throw Error("No shape type provided.");const ka=AI.get(V);if(!ka)throw Error(`Could not find shape class for ${V}`);return new ka(G)}).filter(G=>"group"!==G.type)}generatePreviewJsx(b,
g){var m,G;const V=[...(null!=(m=this.shapes)?m:[]).map(Xa=>Xa.getRotatedBounds())];(m=null==b?void 0:b.currentView)&&V.push(m);let ka=sf.getCommonBounds(V);if(!ka)return null;ka=sf.expandBounds(ka,16);ka=g?sf.ensureRatio(ka,g):ka;const qa=Xa=>[(Xa[0]-ka.minX).toFixed(2),(Xa[1]-ka.minY).toFixed(2)],[Ia,Ta]=m?qa([m.minX,m.minY]):[0,0];return ka&&(0,mb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ka.minX.toFixed(2),"data-common-bound-y":ka.minY.toFixed(2),"data-common-bound-width":ka.width.toFixed(2),
"data-common-bound-height":ka.height.toFixed(2),viewBox:[0,0,ka.width,ka.height].join(" "),children:[(0,mb.jsx)("defs",{children:m&&(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Ia}, ${Ta})`,width:m.width,height:m.height}),(0,mb.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,mb.jsx)("rect",{width:ka.width,height:ka.height,fill:"white"}),(0,mb.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,mb.jsx)("g",
{id:this.pageId+"-preview-shapes",children:null==(G=this.shapes)?void 0:G.map(Xa=>{var ib,vb;const {bounds:Lb,props:{rotation:cc}}=Xa,[Tb,kc]=qa([Lb.minX,Lb.minY]),mc=+(180*((null!=cc?cc:0)+(null!=(ib=Lb.rotation)?ib:0))/Math.PI).toFixed(2),[Vb,tc]=[(Lb.width/2).toFixed(2),(Lb.height/2).toFixed(2)];return(0,mb.jsx)("g",{transform:[`translate(${Tb}, ${kc})`,`rotate(${mc}, ${Vb}, ${tc})`].join(" "),children:Xa.getShapeSVGJsx({assets:null!=(vb=this.assets)?vb:[]})},Xa.id)})}),(0,mb.jsx)("rect",{mask:m?
`url(#${this.pageId}-camera-mask)`:"",width:ka.width,height:ka.height,fill:"transparent"}),m&&(0,mb.jsx)("use",{id:"minimap-camera-rect","data-x":Ia,"data-y":Ta,"data-width":m.width,"data-height":m.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/b.camera.zoom})]})}exportAsSVG(b){return(b=this.generatePreviewJsx(void 0,b))?zI.default.renderToString(b):""}},BI=Wd(W(22));mb=W(587);var Du=BI.forwardRef((b,g)=>{var {value:m,className:G}=b;b=Wc(b,["autoResize","value",
"className"]);return(0,mb.jsx)("div",{className:"tl-input"+(G?" "+G:""),children:(0,mb.jsxs)("div",{className:"tl-input-sizer",children:[(0,mb.jsx)("div",{className:"tl-input-hidden",children:m}),(0,mb.jsx)("input",oc({ref:g,value:m,className:"tl-text-input",type:"text"},b))]})})});mb=W(587);var cq=({type:b,active:g})=>(0,mb.jsx)("span",{className:"tl-type-tag","data-active":g,children:(0,mb.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",
BS:"block-search",PS:"page-search"})[b]}`})}),gB=(b,g)=>(0,mb.jsx)("span",{children:b.split(new RegExp(`(${g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((m,G)=>1===G%2?(0,mb.jsx)("mark",{className:"tl-highlighted",children:m}):m).map((m,G)=>(0,mb.jsx)(Em.default.Fragment,{children:m},G))}),CI=(b,g)=>{const {handlers:m}=Em.default.useContext(Qm),[G,V]=Em.default.useState(null),ka=tk(b,200);Em.default.useEffect(()=>{let qa=!1;if(0<ka.length){const Ia={"pages?":!0,"blocks?":!0,"files?":!1};
"B"===g?Ia["pages?"]=!1:"P"===g&&(Ia["blocks?"]=!1);m.search(ka,Ia).then(Ta=>{qa||V(Ta)})}else V(null);return()=>{qa=!0}},[ka,null==m?void 0:m.search]);return G},hB=ef(({className:b,style:g,placeholder:m,onChange:G,onBlur:V,onAddBlock:ka})=>{const [qa,Ia]=Em.default.useState(Fl.defaultSearchQuery),[Ta,Xa]=Em.default.useState(Fl.defaultSearchFilter),ib=Em.default.useRef(null),{handlers:vb,renderers:Lb}=Em.default.useContext(Qm),cc=Em.default.useCallback(De=>{var Oe;G(De);null==(Oe=ib.current)?void 0:
Oe.blur();De&&(Fl.defaultSearchQuery="",Fl.defaultSearchFilter=null)},[]),Tb=Em.default.useCallback(De=>{if(De=null==vb?void 0:vb.addNewBlock(De))cc(De),null==ka?void 0:ka(De);return De},[ka]),kc=Em.default.useRef(null),[mc,Vb]=Em.default.useState(0),tc=CI(qa,Ta),[Ic,Sc]=Em.default.useState("circle-plus"),[Xc,Xd]=Em.default.useState(!1);Em.default.useEffect(()=>{setTimeout(()=>{var De;null==(De=ib.current)?void 0:De.focus()})},[Ta]);Em.default.useEffect(()=>{Fl.defaultSearchQuery=qa;Fl.defaultSearchFilter=
Ta},[qa,Ta]);const ce=Em.default.useMemo(()=>{var De;const Oe=[],qf=null==Lb?void 0:Lb.Breadcrumb;if(!qf||!vb)return[];ka&&Oe.push({actionIcon:"circle-plus",onChosen:()=>!!Tb(qa),element:(0,mb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mb.jsx)(cq,{active:!0,type:"BA"}),0<qa.length?(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsx)("strong",{children:"New block:"}),qa]}):(0,mb.jsx)("strong",{children:"New block"})]})});(null==(De=null==tc?void 0:tc.pages)?0:De.some(nf=>nf.toLowerCase()===
qa.toLowerCase()))||!qa||Oe.push({actionIcon:"circle-plus",onChosen:()=>{cc(qa);return!0},element:(0,mb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mb.jsx)(cq,{active:!0,type:"PA"}),(0,mb.jsx)("strong",{children:"New page:"}),qa]})},{actionIcon:"circle-plus",onChosen:()=>{null==vb?void 0:vb.addNewWhiteboard(qa);cc(qa);return!0},element:(0,mb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mb.jsx)(cq,{active:!0,type:"WA"}),(0,mb.jsx)("strong",{children:"New whiteboard:"}),
qa]})});0===qa.length&&null===Ta&&Oe.push({actionIcon:"search",onChosen:()=>{Xa("B");return!0},element:(0,mb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mb.jsx)(cq,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{Xa("P");return!0},element:(0,mb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mb.jsx)(cq,{type:"PS"}),"Search only pages"]})});Ta&&"P"!==Ta||!tc||!tc.pages||Oe.push(...tc.pages.map(nf=>({actionIcon:"search",onChosen:()=>{cc(nf);
return!0},element:(0,mb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mb.jsx)(cq,{type:vb.isWhiteboardPage(nf)?"WP":"P"}),gB(nf,qa)]})})));Ta&&"B"!==Ta||!tc||!tc.blocks||Oe.push(...tc.blocks.filter(nf=>nf.content&&nf.uuid).map(({content:nf,uuid:ff})=>{const He=vb.queryBlockByUUID(ff);return{actionIcon:"search",onChosen:()=>{var Bd,hd,md;return He?(cc(ff),null==(md=null==(hd=null==(Bd=window.logseq)?void 0:Bd.api)?void 0:hd.set_blocks_id)?void 0:md.call(hd,[ff]),!0):!1},element:He?
(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mb.jsx)(cq,{type:"B"}),(0,mb.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,mb.jsx)(qf,{blockId:ff})})]}),(0,mb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mb.jsx)("div",{className:"tl-quick-search-option-placeholder"}),gB(nf,qa)]})]}):(0,mb.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));
return Oe},[qa,Ta,tc,null==Lb?void 0:Lb.Breadcrumb,vb]);Em.default.useEffect(()=>{const De=Oe=>{var qf,nf;let ff=mc;"ArrowDown"===Oe.key?ff=Math.min(ce.length-1,mc+1):"ArrowUp"===Oe.key?ff=Math.max(0,mc-1):"Enter"===Oe.key?(null==(qf=ce[mc])?void 0:qf.onChosen(),Oe.stopPropagation(),Oe.preventDefault()):"Backspace"===Oe.key&&0===qa.length?Xa(null):"Escape"===Oe.key&&cc("");ff!==mc&&(qf=ce[ff],Vb(ff),Sc(qf.actionIcon),Oe.stopPropagation(),Oe.preventDefault(),(Oe=null==(nf=kc.current)?void 0:nf.querySelector(".tl-quick-search-option:nth-child("+
(ff+1)+")"))&&(null==Oe?void 0:Oe.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",De,!0);return()=>{document.removeEventListener("keydown",De,!0)}},[ce,mc,qa]);return(0,mb.jsxs)("div",{className:"tl-quick-search "+(null!=b?b:""),style:g,children:[(0,mb.jsx)(Gz,{icon:Ic,onClick:()=>{var De;null==(De=ce[mc])?void 0:De.onChosen()}}),(0,mb.jsxs)("div",{className:"tl-quick-search-input-container",children:[Ta&&(0,mb.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,mb.jsx)(cq,
{type:Ta}),"B"===Ta?"Search blocks":"Search pages",(0,mb.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>Xa(null),children:(0,mb.jsx)(Eh,{name:"x"})})]}),(0,mb.jsx)(Du,{ref:ib,type:"text",value:qa,className:"tl-quick-search-input",placeholder:null!=m?m:"Create or search your graph...",onChange:De=>Ia(De.target.value),onKeyDown:De=>{"Enter"===De.key&&cc(qa);De.stopPropagation()},onFocus:()=>{Xd(!0)},onBlur:()=>{Xd(!1);null==V?void 0:V()}})]}),0<ce.length&&(0,mb.jsx)("div",{onWheelCapture:De=>
De.stopPropagation(),className:"tl-quick-search-options",ref:kc,style:{visibility:Xc?"visible":"hidden",pointerEvents:Xc?"all":"none"},children:(0,mb.jsx)(GH,{style:{height:40*Math.min(Math.max(1,ce.length),12)},totalCount:ce.length,itemContent:De=>{const {actionIcon:Oe,onChosen:qf,element:nf}=ce[De];return(0,mb.jsx)("div",{"data-focused":De===mc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Sc(Oe);Vb(De)},onPointerDownCapture:ff=>{qf()&&(ff.stopPropagation(),ff.preventDefault())},
children:nf},De)}})})]})});mb=W(587);var DI=ef(function(b){var {pageId:g,portalType:m,refs:G,side:V,onRefsChange:ka}=b;b=Wc(b,"pageId portalType shapeType refs side onRefsChange".split(" "));const qa=G.length+(g?1:0),Ia=0===G.length,Ta=ib=>{ib&&!G.includes(ib)&&Ia&&ka([...G,ib])},Xa=!(!g||!m);return(0,mb.jsx)(xA,Jc(oc({},b),{side:V,align:"start",alignOffset:-6,label:(0,mb.jsx)(dc,{content:"Link",sideOffset:14,children:(0,mb.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",
children:[(0,mb.jsx)(Eh,{name:0<qa?"link":"add-link"}),0<qa&&(0,mb.jsx)("div",{className:"tl-shape-links-count",children:qa})]})}),children:(0,mb.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":Xa,children:[Xa&&(0,mb.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,mb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,mb.jsx)(Eh,{className:"opacity-50",name:"internal-link"}),"References"]}),(0,mb.jsx)(co,{type:m,id:g})]}),
(0,mb.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,mb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,mb.jsx)(Eh,{className:"opacity-50",name:"add-link"}),"Link to any page or block"]}),Ia&&(0,mb.jsx)(hB,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:"Start typing to search...",onChange:Ta}),0<G.length&&(0,mb.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:G.map((ib,vb)=>(0,mb.jsx)(co,{id:ib,type:Xj(ib)?
"B":"P",onRemove:()=>{ka(G.filter((Lb,cc)=>vb!==cc))},showContent:!0},ib))})]})]})}))}),bl=Wd(W(22)),iB=W(22),jB=(0,iB.forwardRef)((b,g)=>{const {pressed:m,defaultPressed:G=!1,onPressedChange:V}=b,ka=Wc(b,["pressed","defaultPressed","onPressedChange"]),[qa=!1,Ia]=Dj({prop:m,onChange:V,defaultProp:G});return(0,iB.createElement)(yj.button,tf({type:"button","aria-pressed":qa,"data-state":qa?"on":"off","data-disabled":b.disabled?"":void 0},ka,{ref:g,onClick:Ff(b.onClick,()=>{b.disabled||Ia(!qa)})}))}),
EI=jB,[kB]=Kj("ToggleGroup",[gu]),lB=gu(),FI=bl.default.forwardRef((b,g)=>{const {type:m}=b;b=Wc(b,["type"]);if("single"===m)return bl.default.createElement(GI,tf({},b,{ref:g}));if("multiple"===m)return bl.default.createElement(HI,tf({},b,{ref:g}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[mB,nB]=kB("ToggleGroup"),GI=bl.default.forwardRef((b,g)=>{const {value:m,defaultValue:G,onValueChange:V=()=>{}}=b,ka=Wc(b,["value","defaultValue","onValueChange"]),[qa,Ia]=Dj({prop:m,defaultProp:G,
onChange:V});return bl.default.createElement(mB,{scope:b.__scopeToggleGroup,type:"single",value:qa?[qa]:[],onItemActivate:Ia,onItemDeactivate:bl.default.useCallback(()=>Ia(""),[Ia])},bl.default.createElement(oB,tf({},ka,{ref:g})))}),HI=bl.default.forwardRef((b,g)=>{const {value:m,defaultValue:G,onValueChange:V=()=>{}}=b,ka=Wc(b,["value","defaultValue","onValueChange"]),[qa=[],Ia]=Dj({prop:m,defaultProp:G,onChange:V}),Ta=bl.default.useCallback(ib=>Ia((vb=[])=>[...vb,ib]),[Ia]),Xa=bl.default.useCallback(ib=>
Ia((vb=[])=>vb.filter(Lb=>Lb!==ib)),[Ia]);return bl.default.createElement(mB,{scope:b.__scopeToggleGroup,type:"multiple",value:qa,onItemActivate:Ta,onItemDeactivate:Xa},bl.default.createElement(oB,tf({},ka,{ref:g})))}),[II,JI]=kB("ToggleGroup"),oB=bl.default.forwardRef((b,g)=>{const {__scopeToggleGroup:m,disabled:G=!1,rovingFocus:V=!0,orientation:ka,dir:qa,loop:Ia=!0}=b;var Ta=Wc(b,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));b=lB(m);const Xa=Sb(qa);Ta=oc({role:"group",
dir:Xa},Ta);return bl.default.createElement(II,{scope:m,rovingFocus:V,disabled:G},V?bl.default.createElement(Lz,tf({asChild:!0},b,{orientation:ka,dir:Xa,loop:Ia}),bl.default.createElement(yj.div,tf({},Ta,{ref:g}))):bl.default.createElement(yj.div,tf({},Ta,{ref:g})))}),KI=bl.default.forwardRef((b,g)=>{var m=nB("ToggleGroupItem",b.__scopeToggleGroup);const G=JI("ToggleGroupItem",b.__scopeToggleGroup),V=lB(b.__scopeToggleGroup);m=m.value.includes(b.value);const ka=G.disabled||b.disabled;b=Jc(oc({},b),
{pressed:m,disabled:ka});const qa=bl.default.useRef(null);return G.rovingFocus?bl.default.createElement(Mz,tf({asChild:!0},V,{focusable:!ka,active:m,ref:qa}),bl.default.createElement(pB,tf({},b,{ref:g}))):bl.default.createElement(pB,tf({},b,{ref:g}))}),pB=bl.default.forwardRef((b,g)=>{const {__scopeToggleGroup:m,value:G}=b,V=Wc(b,["__scopeToggleGroup","value"]),ka=nB("ToggleGroupItem",m);b={role:"radio","aria-checked":b.pressed,"aria-pressed":void 0};return bl.default.createElement(jB,tf({},"single"===
ka.type?b:void 0,V,{ref:g,onPressedChange:qa=>{if(qa)ka.onItemActivate(G);else ka.onItemDeactivate(G)}}))}),qB=FI,rB=KI;mb=W(587);mb=W(587);mb=W(587);var sB="Edit AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource LogseqPortalViewMode ArrowMode Links".split(" "),LI=["Edit","YoutubeLink","TwitterLink","IFrameSource","Links"],Hn=new Map,Gw={"logseq-portal":"Swatch Edit LogseqPortalViewMode ScaleLevel AutoResizing Links".split(" "),youtube:["YoutubeLink",
"Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:"Edit TextStyle Swatch ScaleLevel ArrowMode Links".split(" "),pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:"Edit TextStyle Swatch ScaleLevel AutoResizing Links".split(" "),
html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"]},MI=Object.entries(Gw).filter(([,b])=>b.includes("NoFill")&&b.includes("Swatch")).map(([b])=>b),NI=ef(()=>{const {handlers:{isWhiteboardPage:b,redirectToPage:g,getRedirectPageName:m,insertFirstPageBlock:G}}=wp.default.useContext(Qm),V=$e(),ka=Wj(V.selectedShapesArray,"Edit")[0];return(0,mb.jsx)(ia,{type:"button",tooltip:"Edit",onClick:()=>{var qa,Ia,Ta,Xa,ib,vb,Lb,cc,Tb;V.api.editShape(ka);if("logseq-portal"===ka.props.type){var kc=
ka.props.pageId;if("P"===ka.props.blockType){b(kc)&&g(kc);kc=m(ka.props.pageId);let mc=null==(Ta=null==(Ia=null==(qa=window.logseq)?void 0:qa.api)?void 0:Ia.get_page_blocks_tree)?void 0:Ta.call(Ia,kc);0===(null==mc?void 0:mc.length)&&(G(kc),mc=null==(vb=null==(ib=null==(Xa=window.logseq)?void 0:Xa.api)?void 0:ib.get_page_blocks_tree)?void 0:vb.call(ib,kc));qa=(null==mc?void 0:mc.find(Vb=>!("propertiesOrder"in Vb)))||mc[0];kc=null==qa?void 0:qa.uuid}null==(Tb=null==(cc=null==(Lb=window.logseq)?void 0:
Lb.api)?void 0:cc.edit_block)?void 0:Tb.call(cc,kc)}},children:(0,mb.jsx)(Eh,{name:"label"in ka.props&&ka.props.label||"text"in ka.props&&ka.props.text?"forms":"text"})})}),OI=ef(()=>{const b=$e(),g=Wj(b.selectedShapesArray,"AutoResizing"),m=g.every(G=>G.props.isAutoResizing);return(0,mb.jsx)(fn,{tooltip:"Auto Resize",toggle:g.every(G=>"logseq-portal"===G.props.type),className:"tl-button",pressed:m,onPressedChange:G=>{g.forEach(V=>{if("logseq-portal"===V.props.type)V.update({isAutoResizing:G});else V.onResetBounds({zoom:b.viewport.camera.zoom})});
b.persist()},children:(0,mb.jsx)(Eh,{name:"dimensions"})})}),PI=ef(()=>{const b=$e(),g=Wj(b.selectedShapesArray,"LogseqPortalViewMode"),m=g.every(G=>G.collapsed);return(0,mb.jsx)(Mn,{title:"View Mode",options:[{value:"1",icon:"object-compact",tooltip:"Collapse"},{value:"0",icon:"object-expanded",tooltip:"Expand"}],value:m?"1":"0",onValueChange:G=>{g.forEach(V=>{V.toggleCollapsed()});b.persist()}})}),QI=ef(()=>{var {handlers:{isMobile:b}}=wp.default.useContext(Qm);const g=$e(),m=Wj(g.selectedShapesArray,
"ScaleLevel"),G=1<(new Set(m.map(V=>V.scaleLevel))).size?"":m[0].scaleLevel;b=[{label:b()?"XS":"Extra Small",value:"xs"},{label:b()?"SM":"Small",value:"sm"},{label:b()?"MD":"Medium",value:"md"},{label:b()?"LG":"Large",value:"lg"},{label:b()?"XL":"Extra Large",value:"xl"},{label:b()?"XXL":"Huge",value:"xxl"}];return(0,mb.jsx)(xh,{tooltip:"Scale level",options:b,value:G,onValueChange:V=>{m.forEach(ka=>{ka.setScaleLevel(V)});g.persist()}})}),RI=ef(()=>{const b=$e(),g=Wj(b.selectedShapesArray,"IFrameSource")[0],
m=wp.default.useCallback(V=>{g.onIFrameSourceChange(V.target.value.trim().toLowerCase());b.persist()},[]),G=wp.default.useCallback(()=>{g.reload()},[]);return(0,mb.jsxs)("span",{className:"flex gap-3",children:[(0,mb.jsx)(ia,{tooltip:"Reload",type:"button",onClick:G,children:(0,mb.jsx)(Eh,{name:"refresh"})}),(0,mb.jsx)(Du,{title:"Website Url",className:"tl-iframe-src",value:`${g.props.url}`,onChange:m}),(0,mb.jsx)(ia,{tooltip:"Open website url",type:"button",onClick:()=>window.open(g.props.url),children:(0,mb.jsx)(Eh,
{name:"external-link"})})]})}),SI=ef(()=>{const b=$e(),g=Wj(b.selectedShapesArray,"YoutubeLink")[0],m=wp.default.useCallback(G=>{g.onYoutubeLinkChange(G.target.value);b.persist()},[]);return(0,mb.jsxs)("span",{className:"flex gap-3",children:[(0,mb.jsx)(Du,{title:"YouTube Link",className:"tl-youtube-link",value:`${g.props.url}`,onChange:m}),(0,mb.jsx)(ia,{tooltip:"Open YouTube Link",type:"button",onClick:()=>{var G,V,ka;return null==(ka=null==(V=null==(G=window.logseq)?void 0:G.api)?void 0:V.open_external_link)?
void 0:ka.call(V,g.props.url)},children:(0,mb.jsx)(Eh,{name:"external-link"})})]})}),TI=ef(()=>{const b=$e(),g=Wj(b.selectedShapesArray,"TwitterLink")[0],m=wp.default.useCallback(G=>{g.onTwitterLinkChange(G.target.value);b.persist()},[]);return(0,mb.jsxs)("span",{className:"flex gap-3",children:[(0,mb.jsx)(Du,{title:"Twitter Link",className:"tl-twitter-link",value:`${g.props.url}`,onChange:m}),(0,mb.jsx)(ia,{tooltip:"Open Twitter Link",type:"button",onClick:()=>{var G,V,ka;return null==(ka=null==
(V=null==(G=window.logseq)?void 0:G.api)?void 0:V.open_external_link)?void 0:ka.call(V,g.props.url)},children:(0,mb.jsx)(Eh,{name:"external-link"})})]})}),UI=ef(()=>{const b=$e(),g=Wj(b.selectedShapesArray,"NoFill"),m=wp.default.useCallback(V=>{g.forEach(ka=>ka.update({noFill:V}));b.persist()},[]),G=g.every(V=>V.props.noFill);return(0,mb.jsx)(fn,{tooltip:"Fill",className:"tl-button",pressed:G,onPressedChange:m,children:(0,mb.jsx)(Eh,{name:G?"droplet-off":"droplet"})})}),VI=ef(()=>{const b=$e(),g=
Wj(b.selectedShapesArray,"Swatch"),m=wp.default.useCallback(V=>{g.forEach(ka=>{ka.update({fill:V,stroke:V})});b.persist()},[]),G=wp.default.useCallback(V=>{g.forEach(ka=>{ka.update({opacity:V})});b.persist()},[]);return(0,mb.jsx)(fg,{popoverSide:"top",color:g[0].props.noFill?g[0].props.stroke:g[0].props.fill,opacity:g[0].props.opacity,setOpacity:G,setColor:m})}),WI=ef(()=>{const b=$e(),g=Wj(b.selectedShapesArray,"StrokeType"),m=g.every(G=>"dashed"===G.props.strokeType)?"dashed":g.every(G=>"line"===
G.props.strokeType)?"line":"mixed";return(0,mb.jsx)(Mn,{title:"Stroke Type",options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:m,onValueChange:G=>{g.forEach(V=>{V.update({strokeType:G})});b.persist()}})}),XI=ef(()=>{const b=$e(),g=Wj(b.selectedShapesArray,"ArrowMode");var m=g.every(V=>{var ka;return"arrow"===(null==(ka=V.props.decorations)?void 0:ka.start)});const G=g.every(V=>{var ka;return"arrow"===(null==(ka=V.props.decorations)?
void 0:ka.end)});m=[m?"start":null,G?"end":null].filter(oi);return(0,mb.jsx)(vn,{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:m,onValueChange:V=>{g.forEach(ka=>{var qa=ka.update;var Ia={start:V.includes("start")?"arrow":null,end:V.includes("end")?"arrow":null};qa.call(ka,{decorations:Ia})});b.persist()}})}),YI=ef(()=>{const b=$e(),g=Wj(b.selectedShapesArray,"TextStyle"),m=g.every(V=>500<V.props.fontWeight),G=g.every(V=>V.props.italic);
return(0,mb.jsxs)("span",{className:"flex gap-1",children:[(0,mb.jsx)(fn,{tooltip:"Bold",className:"tl-button",pressed:m,onPressedChange:V=>{g.forEach(ka=>{ka.update({fontWeight:V?700:400});ka.onResetBounds()});b.persist()},children:(0,mb.jsx)(Eh,{name:"bold"})}),(0,mb.jsx)(fn,{tooltip:"Italic",className:"tl-button",pressed:G,onPressedChange:V=>{g.forEach(ka=>{ka.update({italic:V});ka.onResetBounds()});b.persist()},children:(0,mb.jsx)(Eh,{name:"italic"})})]})}),ZI=ef(()=>{var b;const g=$e(),m=g.selectedShapesArray[0];
return(0,mb.jsx)(DI,{onRefsChange:G=>{m.update({refs:G});g.persist()},refs:null!=(b=m.props.refs)?b:[],shapeType:m.props.type,side:"right",pageId:"logseq-portal"===m.props.type?m.props.pageId:void 0,portalType:"logseq-portal"===m.props.type?m.props.blockType:void 0})});Hn.set("Edit",NI);Hn.set("AutoResizing",OI);Hn.set("LogseqPortalViewMode",PI);Hn.set("ScaleLevel",QI);Hn.set("YoutubeLink",SI);Hn.set("TwitterLink",TI);Hn.set("IFrameSource",RI);Hn.set("NoFill",UI);Hn.set("Swatch",VI);Hn.set("StrokeType",
WI);Hn.set("ArrowMode",XI);Hn.set("TextStyle",YI);Hn.set("Links",ZI);var tB=b=>{var g;return(null!=(g=Gw[b])?g:[]).filter(oi)},$I=b=>{const g=b.map(G=>G.props.type),m=new Set(0<b.length?tB(g[0]):[]);for(let G=1;G<g.length&&0<m.size;G++){const V=tB(g[G]);m.forEach(ka=>{V.includes(ka)||m.delete(ka)})}1<b.length&&LI.forEach(G=>{m.has(G)&&m.delete(G)});return Array.from(m).sort((G,V)=>sB.indexOf(G)-sB.indexOf(V)).map(G=>Hn.get(G))};mb=W(587);var aJ=ef(({shapes:b,offsets:g,hidden:m})=>{const G=$e(),V=
at.useRef(null),ka=at.useRef(null);at.useLayoutEffect(()=>{setTimeout(()=>{const Ia=ka.current;if(Ia){var {offsetWidth:Ta,offsetHeight:Xa}=Ia;V.current=[Ta,Xa]}})});at.useLayoutEffect(()=>{var Ia;const Ta=ka.current;if(Ta){var Xa=null!=(Ia=V.current)?Ia:[0,0];Ia=0;if(116>g.top){var ib=g.height/2+40;140>g.bottom&&(ib+=g.bottom-140)}else ib=-(g.height/2+40);16>g.left+g.width/2-Xa[0]/2?Ia+=-(g.left+g.width/2-Xa[0]/2-16):16>g.right+g.width/2-Xa[0]/2&&(Ia+=g.right+g.width/2-Xa[0]/2-16);var [vb,Lb]=[Ia,
ib];Ta.style.transform=`translateX(${vb}px) translateY(${Lb}px)`}},[g]);if(!G)return null;const qa=$I(b);return(0,mb.jsx)(io,{centered:!0,children:0<qa.length&&(0,mb.jsx)("div",{ref:ka,className:"tl-toolbar tl-context-bar",style:{visibility:m?"hidden":"visible",pointerEvents:m?"none":"all"},children:qa.map((Ia,Ta)=>(0,mb.jsxs)(at.Fragment,{children:[(0,mb.jsx)(Ia,{}),Ta<qa.length-1&&(0,mb.jsx)(Yq,{className:"tl-toolbar-separator",orientation:"vertical"})]},Ta))})})}),Hw=Wd(W(22)),Gl=W(22),[bJ]=Kj("ContextMenu",
[nu]),it=nu(),[cJ,uB]=bJ("ContextMenu"),dJ=(0,Gl.forwardRef)((b,g)=>{const {__scopeContextMenu:m,disabled:G=!1}=b,V=Wc(b,["__scopeContextMenu","disabled"]),ka=uB("ContextMenuTrigger",m),qa=it(m),Ia=(0,Gl.useRef)({x:0,y:0}),Ta=(0,Gl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(oc({width:0,height:0},Ia.current))}),Xa=(0,Gl.useRef)(0),ib=(0,Gl.useCallback)(()=>window.clearTimeout(Xa.current),[]);(0,Gl.useEffect)(()=>ib,[ib]);(0,Gl.useEffect)(()=>void(G&&ib()),[G,ib]);return(0,Gl.createElement)(Gl.Fragment,
null,(0,Gl.createElement)($z,tf({},qa,{virtualRef:Ta})),(0,Gl.createElement)(yj.span,tf({"data-state":ka.open?"open":"closed","data-disabled":G?"":void 0},V,{ref:g,style:oc({WebkitTouchCallout:"none"},b.style),onContextMenu:G?b.onContextMenu:Ff(b.onContextMenu,vb=>{ib();Ia.current={x:vb.clientX,y:vb.clientY};ka.onOpenChange(!0);vb.preventDefault()}),onPointerDown:G?b.onPointerDown:Ff(b.onPointerDown,uo(vb=>{ib();Xa.current=window.setTimeout(()=>{Ia.current={x:vb.clientX,y:vb.clientY};ka.onOpenChange(!0)},
700)})),onPointerMove:G?b.onPointerMove:Ff(b.onPointerMove,uo(ib)),onPointerCancel:G?b.onPointerCancel:Ff(b.onPointerCancel,uo(ib)),onPointerUp:G?b.onPointerUp:Ff(b.onPointerUp,uo(ib))})))}),eJ=(0,Gl.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;const G=Wc(b,["__scopeContextMenu"]),V=uB("ContextMenuContent",m);m=it(m);const ka=(0,Gl.useRef)(!1);return(0,Gl.createElement)(bA,tf({},m,G,{ref:g,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:qa=>{var Ia;null===(Ia=b.onCloseAutoFocus)||void 0===
Ia||Ia.call(b,qa);!qa.defaultPrevented&&ka.current&&qa.preventDefault();ka.current=!1},onInteractOutside:qa=>{var Ia;null===(Ia=b.onInteractOutside)||void 0===Ia||Ia.call(b,qa);qa.defaultPrevented||V.modal||(ka.current=!0)},style:Jc(oc({},b.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Fm=(0,Gl.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;b=Wc(b,["__scopeContextMenu"]);m=it(m);return(0,Gl.createElement)(dA,tf({},m,b,{ref:g}))}),dq=(0,Gl.forwardRef)((b,
g)=>{var {__scopeContextMenu:m}=b;b=Wc(b,["__scopeContextMenu"]);m=it(m);return(0,Gl.createElement)(MF,tf({},m,b,{ref:g}))}),fJ=b=>{const {__scopeContextMenu:g,children:m,onOpenChange:G,dir:V,modal:ka=!0}=b,[qa,Ia]=(0,Gl.useState)(!1);b=it(g);const Ta=uf(G),Xa=(0,Gl.useCallback)(ib=>{Ia(ib);Ta(ib)},[Ta]);return(0,Gl.createElement)(cJ,{scope:g,open:qa,onOpenChange:Xa,modal:ka},(0,Gl.createElement)(eA,tf({},b,{dir:V,open:qa,onOpenChange:Xa,modal:ka}),m))};mb=W(587);var gJ=ef(function({children:b,collisionRef:g}){var m,
G,V,ka,qa,Ia,Ta;const Xa=$e(),{handlers:ib}=Hw.useContext(Qm),vb=Hw.useRef(null),Lb=Tb=>{Tb();Xa.transition("select")},cc=Hw.useMemo(()=>vh(),[]);return(0,mb.jsxs)(fJ,{onOpenChange:Tb=>{Tb&&!Xa.isIn("select.contextMenu")?Xa.transition("select").selectedTool.transition("contextMenu"):!Tb&&Xa.isIn("select.contextMenu")&&Xa.selectedTool.transition("idle")},children:[(0,mb.jsx)(dJ,{disabled:Xa.editingShape&&0!==Object.keys(Xa.editingShape).length,children:b}),(0,mb.jsx)(eJ,{className:"tl-menu tl-context-menu",
ref:vb,onEscapeKeyDown:()=>Xa.transition("select"),collisionBoundary:g.current,asChild:!0,tabIndex:-1,children:(0,mb.jsxs)("div",{children:[1<(null==(m=Xa.selectedShapes)?void 0:m.size)&&!Xa.readOnly&&(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsxs)(Fm,{children:[(0,mb.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,mb.jsx)(ia,{tooltip:"Align left",onClick:()=>Lb(()=>Xa.align("left")),children:(0,mb.jsx)(Eh,{name:"layout-align-left"})}),(0,mb.jsx)(ia,{tooltip:"Align center horizontally",
onClick:()=>Lb(()=>Xa.align("centerHorizontal")),children:(0,mb.jsx)(Eh,{name:"layout-align-center"})}),(0,mb.jsx)(ia,{tooltip:"Align right",onClick:()=>Lb(()=>Xa.align("right")),children:(0,mb.jsx)(Eh,{name:"layout-align-right"})}),(0,mb.jsx)(Yq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,mb.jsx)(ia,{tooltip:"Distribute horizontally",onClick:()=>Lb(()=>Xa.distribute("horizontal")),children:(0,mb.jsx)(Eh,{name:"layout-distribute-vertical"})})]}),(0,mb.jsxs)("div",{className:"tl-menu-button-row pt-0",
children:[(0,mb.jsx)(ia,{tooltip:"Align top",onClick:()=>Lb(()=>Xa.align("top")),children:(0,mb.jsx)(Eh,{name:"layout-align-top"})}),(0,mb.jsx)(ia,{tooltip:"Align center vertically",onClick:()=>Lb(()=>Xa.align("centerVertical")),children:(0,mb.jsx)(Eh,{name:"layout-align-middle"})}),(0,mb.jsx)(ia,{tooltip:"Align bottom",onClick:()=>Lb(()=>Xa.align("bottom")),children:(0,mb.jsx)(Eh,{name:"layout-align-bottom"})}),(0,mb.jsx)(Yq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,mb.jsx)(ia,
{tooltip:"Distribute vertically",onClick:()=>Lb(()=>Xa.distribute("vertical")),children:(0,mb.jsx)(Eh,{name:"layout-distribute-horizontal"})})]})]}),(0,mb.jsx)(dq,{className:"menu-separator"}),(0,mb.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Lb(Xa.packIntoRectangle),children:[(0,mb.jsx)(Eh,{className:"tl-menu-icon",name:"layout-grid"}),"Pack into rectangle"]}),(0,mb.jsx)(dq,{className:"menu-separator"})]}),0<(null==(G=Xa.selectedShapes)?void 0:G.size)&&(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsxs)(Fm,
{className:"tl-menu-item",onClick:()=>Lb(Xa.api.zoomToSelection),children:["Zoom to fit",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:Ho})," ",(0,mb.jsx)("code",{children:""})," ",(0,mb.jsx)("code",{children:"1"})]})})]}),(0,mb.jsx)(dq,{className:"menu-separator"})]}),(Xa.selectedShapesArray.some(Tb=>"group"===Tb.type||Xa.getParentGroup(Tb))||1<Xa.selectedShapesArray.length)&&!Xa.readOnly&&(0,mb.jsxs)(mb.Fragment,
{children:[Xa.selectedShapesArray.some(Tb=>"group"===Tb.type||Xa.getParentGroup(Tb))&&(0,mb.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Lb(Xa.api.unGroup),children:[(0,mb.jsx)(Eh,{className:"tl-menu-icon",name:"ungroup"}),"Ungroup",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:Ho})," ",(0,mb.jsx)("code",{children:""})," ",(0,mb.jsx)("code",{children:"G"})]})})]}),1<Xa.selectedShapesArray.length&&
(0,mb.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Lb(Xa.api.doGroup),children:[(0,mb.jsx)(Eh,{className:"tl-menu-icon",name:"group"}),"Group",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:Ho})," ",(0,mb.jsx)("code",{children:"G"})]})})]}),(0,mb.jsx)(dq,{className:"menu-separator"})]}),0<(null==(V=Xa.selectedShapes)?void 0:V.size)&&(0,mb.jsxs)(mb.Fragment,{children:[!Xa.readOnly&&(0,mb.jsxs)(Fm,{className:"tl-menu-item",
onClick:()=>Lb(Xa.cut),children:[(0,mb.jsx)(Eh,{className:"tl-menu-icon",name:"cut"}),"Cut",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:Ho})," ",(0,mb.jsx)("code",{children:"X"})]})})]}),(0,mb.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Lb(Xa.copy),children:[(0,mb.jsx)(Eh,{className:"tl-menu-icon",name:"copy"}),"Copy",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",
{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:Ho})," ",(0,mb.jsx)("code",{children:"C"})]})})]})]}),!Xa.readOnly&&(0,mb.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Lb(Xa.paste),children:[(0,mb.jsx)(Eh,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:Ho})," ",(0,mb.jsx)("code",{children:"V"})]})})]}),1===(null==(ka=Xa.selectedShapes)?
void 0:ka.size)&&!Xa.readOnly&&(0,mb.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Lb(()=>Xa.paste(void 0,!0)),children:["Paste as link",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:Ho})," ",(0,mb.jsx)("code",{children:""})," ",(0,mb.jsx)("code",{children:"V"})]})})]}),(0,mb.jsx)(dq,{className:"menu-separator"}),(0,mb.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Lb(()=>{var Tb,kc;return ib.exportToImage(Xa.currentPageId,
{x:Xa.selectionBounds.minX+Xa.viewport.camera.point[0]-8,y:Xa.selectionBounds.minY+Xa.viewport.camera.point[1]-8,width:(null==(Tb=Xa.selectionBounds)?void 0:Tb.width)+16,height:(null==(kc=Xa.selectionBounds)?void 0:kc.height)+16,zoom:Xa.viewport.camera.zoom})}),children:[(0,mb.jsx)(Eh,{className:"tl-menu-icon",name:"file-export"}),"Export",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsx)("span",{className:"keyboard-shortcut"})})]}),(0,mb.jsx)(dq,{className:"menu-separator"}),(0,mb.jsxs)(Fm,
{className:"tl-menu-item",onClick:()=>Lb(Xa.api.selectAll),children:["Select all",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:Ho})," ",(0,mb.jsx)("code",{children:"A"})]})})]}),1<(null==(qa=Xa.selectedShapes)?void 0:qa.size)&&(0,mb.jsx)(Fm,{className:"tl-menu-item",onClick:()=>Lb(Xa.api.deselectAll),children:"Deselect all"}),0<(null==(Ia=Xa.selectedShapes)?void 0:Ia.size)&&!Xa.readOnly&&(0,mb.jsxs)(mb.Fragment,
{children:[(0,mb.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Lb(Xa.api.deleteShapes),children:[(0,mb.jsx)(Eh,{className:"tl-menu-icon",name:"backspace"}),"Delete",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsx)("span",{className:"keyboard-shortcut",children:(0,mb.jsx)("code",{children:"Del"})})})]}),1<(null==(Ta=Xa.selectedShapes)?void 0:Ta.size)&&!Xa.readOnly&&(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsx)(dq,{className:"menu-separator"}),(0,mb.jsxs)(Fm,{className:"tl-menu-item",
onClick:()=>Lb(Xa.flipHorizontal),children:[(0,mb.jsx)(Eh,{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,mb.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Lb(Xa.flipVertical),children:[(0,mb.jsx)(Eh,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),!Xa.readOnly&&(0,mb.jsxs)(mb.Fragment,{children:[(0,mb.jsx)(dq,{className:"menu-separator"}),(0,mb.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Lb(Xa.bringToFront),children:["Move to front",(0,mb.jsx)("div",
{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:""})," ",(0,mb.jsx)("code",{children:"]"})]})})]}),(0,mb.jsxs)(Fm,{className:"tl-menu-item",onClick:()=>Lb(Xa.sendToBack),children:["Move to back",(0,mb.jsx)("div",{className:"tl-menu-right-slot",children:(0,mb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,mb.jsx)("code",{children:""})," ",(0,mb.jsx)("code",{children:"["})]})})]})]}),cc&&(0,mb.jsx)(Fm,{className:"tl-menu-item",
onClick:()=>{1===Xa.selectedShapesArray.length?console.log(Ec(Xa.selectedShapesArray[0].serialized)):console.log(Xa.selectedShapesArray.map(Tb=>Ec(Tb.serialized)))},children:"(Dev) Print shape props"})]})]})})]})}),vB=Wd(W(22));mb=W(587);var hJ=ef(({shape:b})=>{const g=$e(),{handlers:m}=vB.default.useContext(Qm),G=vB.default.useMemo(()=>{var V;const ka=[...(null!=(V=b.props.refs)?V:[])].map(qa=>[qa,!0]);"logseq-portal"===b.props.type&&b.props.pageId&&ka.unshift([b.props.pageId,!1]);return ka.filter(qa=>
qa[0].toLowerCase()!==g.currentPage.name&&m.getBlockPageName(qa[0])!==g.currentPage.name)},[b.props.type,b.props.parentId,b.props.refs]);return 0===G.length?null:(0,mb.jsx)("div",{className:"tl-quick-links",title:"Shape Quick Links",children:G.map(([V,ka])=>(0,mb.jsx)("div",{className:"tl-quick-links-row",children:(0,mb.jsx)(CA,{id:V,showReferenceContent:ka})},V))})}),iJ=Wd(W(22)),wB=Wd(W(22)),jJ=[".png",".svg",".jpg",".jpeg",".gif"],kJ=[".mp4",".webm",".ogg"],lJ=(b,g,m)=>xf(void 0,[b,g,m],function*(G,
{point:V,shiftKey:ka,dataTransfer:qa,fromDrop:Ia},Ta){function Xa(md,od){return xf(this,null,function*(){const Cd=Object.values(G.assets).find(xe=>xe.src===md);return Cd?Cd:{id:Zk(),type:od?"video":"image",src:md,size:yield Aj(Ta.makeAssetUrl(md),od)}})}function ib(md){return xf(this,null,function*(){const od=md.filter(Cd=>"unknown"!==to(Cd.name)).map(Cd=>xf(this,null,function*(){try{const xe=yield Ta.saveAsset(Cd);return yield Xa(xe,"video"===to(Cd.name))}catch(xe){console.error(xe)}return null}));
return(yield Promise.all(od)).filter(oi)})}function vb(md){return[Jc(oc({},bq.defaultProps),{html:md,point:[V[0],V[1]]})]}function Lb(md){return xf(this,null,function*(){return Nn(Tb,Vb,mc,tc,kc,ce)(md)})}function cc(){return xf(this,null,function*(){const md=yield navigator.clipboard.read(),od=Nn(tc,kc,ce);return(yield Promise.all(md.map(Cd=>od(Cd)))).flat().filter(oi)})}function Tb(md){return xf(this,null,function*(){var od=Array.from(md.files);return 0<od.length?(qf=od=yield ib(od),od.map((Cd,
xe)=>{const Ge=Jc(oc({},"video"===Cd.type?Cu.defaultProps:Bu.defaultProps),{id:Zk(),assetId:Cd.id,opacity:1});Cd.size&&Object.assign(Ge,{point:[V[0]-Cd.size[0]/4+16*xe,V[1]-Cd.size[1]/4+16*xe],size:me.div(Cd.size,2)});return Ge})):null})}function kc(md){return xf(this,null,function*(){if(md.types.includes("text/plain")&&(ka||Ia))return null;const od=yield La(md,"text/html");return od?Nn(Ic,vb)(od):null})}function mc(md){return xf(this,null,function*(){var od,Cd,xe,Ge,of,kf,jf=md.getData("block-uuid");
if(jf){jf=jf.trim();const Tg=null==(xe=null==(Cd=null==(od=window.logseq)?void 0:od.api)?void 0:Cd.get_selected_blocks)?void 0:xe.call(Cd);od=Tg&&1<(null==Tg?void 0:Tg.length)?Tg.map(Gg=>Gg.uuid):[jf];null==(kf=null==(of=null==(Ge=window.logseq)?void 0:Ge.api)?void 0:of.set_blocks_id)?void 0:kf.call(of,od);Ge=od.map(Gg=>Xd(`((${Gg}))`));return(yield Promise.all(Ge)).flat().filter(oi).map((Gg,qi)=>Jc(oc({},Gg),{point:[V[0]+(Fl.defaultProps.size[0]+16)*qi,V[1]]}))}return null})}function Vb(md){return xf(this,
null,function*(){var od=md.getData("page-name");return od?(od=od.trim(),Xd(`[[${od}]]`)):null})}function tc(md){return xf(this,null,function*(){var od=yield La(md,"text/plain");return od?(od=od.trim(),Nn(Sc,Xc)(od)):null})}function Ic(md){if(md=G.api.getClonedShapesFromTldrString(decodeURIComponent(md),V)){const {shapes:od,assets:Cd,bindings:xe}=md;nf.push(...Cd);ff.push(...xe);return od}return null}function Sc(md){return xf(this,null,function*(){try{const Cd=new URL(md);var od=Cd.host&&["http:",
"https:"].includes(Cd.protocol)}catch(Cd){od=!1}return od&&!ka?WA.test(md)?[Jc(oc({},cr.defaultProps),{url:md,point:[V[0],V[1]]})]:YA.test(md)?[Jc(oc({},$r.defaultProps),{url:md,point:[V[0],V[1]]})]:[Jc(oc({},ar.defaultProps),{url:md,point:[V[0],V[1]]})]:null})}function Xc(md){return md.startsWith("\x3ciframe")?[Jc(oc({},bq.defaultProps),{html:md,point:[V[0],V[1]]})]:null}function Xd(md){return xf(this,null,function*(){if(/^\(\(.*\)\)$/.test(md)&&40===md.length){var od=md.slice(2,-2);if(Xj(od))return[Jc(oc({},
Fl.defaultProps),{point:[V[0],V[1]],size:[400,0],pageId:od,fill:G.settings.color,stroke:G.settings.color,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(md))return od=md.slice(2,-2),[Jc(oc({},Fl.defaultProps),{point:[V[0],V[1]],size:[400,0],pageId:od,fill:G.settings.color,stroke:G.settings.color,blockType:"P"})];return null})}function ce(md){return xf(this,null,function*(){var od=yield La(md,"text/plain");return od&&(od=od.trim(),od=null==Ta?void 0:Ta.addNewBlock(od))?[Jc(oc({},Fl.defaultProps),{size:[400,
0],point:[V[0],V[1]],pageId:od,fill:G.settings.color,stroke:G.settings.color,blockType:"B",compact:!0})]:null})}var De,Oe;let qf=[],nf=[];const ff=[];G.cursors.setCursor("progress");let He=[];try{qa?He.push(...(null!=(De=yield Lb(qa))?De:[])):He.push(...(null!=(Oe=yield cc())?Oe:[]))}catch(md){console.error(md)}const Bd=He.map(md=>Jc(oc({},md),{parentId:G.currentPageId,id:Xj(md.id)?md.id:Zk()})),hd=null==qa?void 0:qa.types.every(md=>"Files"===md);G.wrapUpdate(()=>{var md=[...qf,...nf];0<md.length&&
G.createAssets(md);0<Bd.length&&G.createShapes(Bd);G.currentPage.updateBindings(Object.fromEntries(ff.map(od=>[od.id,od])));if(1===G.selectedShapesArray.length&&1===Bd.length&&Ia){md=G.selectedShapesArray[0];const od=G.getShapeById(Bd[0].id);G.createNewLineBinding(md,od)}G.setSelectedShapes(Bd.map(od=>od.id));G.selectedTool.transition("idle");G.cursors.setCursor("default");(Ia||hd)&&G.packIntoRectangle()})}),xB=Wd(W(22)),mJ=Wd(W(22));mb=W(587);var nJ=[yw,zw,aB,Aw,Bw,Cw,Dw,Ew,bB,fB,eB,ht],oJ=b=>{const {renderers:g}=
Jr.useContext(Qm);return(0,mb.jsx)(g.BacklinksCount,Jc(oc({},b),{options:{"portal?":!1}}))},pJ=()=>{const b=Jr.useRef(null),g=$e(),m=Jr.useMemo(()=>({ContextBar:aJ,BacklinksCount:oJ,QuickLinks:hJ}),[]);return(0,mb.jsx)(gJ,{collisionRef:b,children:(0,mb.jsx)("div",{ref:b,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":g.uuid,children:(0,mb.jsx)(mE,{components:m,children:(0,mb.jsx)(tG,{})})})})},qJ=b=>{var {onPersist:g,readOnly:m,model:G}=b;b=Wc(b,["onPersist","readOnly","model"]);const V=
Ka(),ka=Za(),qa=hb(),Ia=m?null:Jb(),Ta=Jr.useCallback((Xa,ib)=>{null==g?void 0:g(Xa,ib)},[G]);return(0,mb.jsx)(kE,Jc(oc({Shapes:$A,Tools:nJ,onDrop:V,onPaste:ka,onCopy:qa,readOnly:m,onCanvasDBClick:Ia,onPersist:Ta,model:G},b),{children:(0,mb.jsx)(pJ,{})}))},rJ=function(b){var {renderers:g,handlers:m}=b;b=Wc(b,["renderers","handlers"]);const G={renderers:Jr.useMemo(()=>Object.fromEntries(Object.entries(g).map(([V,ka])=>[V,Jr.memo(ka)])),[]),handlers:m};return(0,mb.jsx)(Qm.Provider,{value:G,children:(0,mb.jsx)(qJ,
oc({},b))})}};
'use strict';var Cid=function(a){return a},Did=function(a,b){return $APP.xh.j(function(c){var d=$APP.nf(c);c=$APP.G.j(d,$APP.nD);d=$APP.G.j(d,$APP.AG);return new $APP.m(null,2,[$APP.yl,$APP.u.C(c),$APP.kFb,$APP.Hy.j(d,new $APP.O(null,2,5,$APP.Q,[$APP.RE,$APP.kFb],null))],null)},$APP.Sf.j(function(c){return $APP.RE.C($APP.AG.C(c))},$APP.vH(a,b,new $APP.m(null,1,[$APP.ut,new $APP.O(null,2,5,$APP.Q,[$APP.nD,$APP.AG],null)],null))))},Eid=function(a){return $APP.Cq.G(a,$APP.E([$APP.Dq,!0]))},Fid=function(a,
b,c,d){var e=$APP.BH(a);b=new $APP.m(null,2,[$APP.SE,$APP.Jib,$APP.VE,new $APP.m(null,6,[$APP.yl,$APP.ua(b,"id"),$APP.W,$APP.ua(b,"name"),$APP.EI,Eid($APP.ua(b,"bindings")),$APP.kFb,$APP.ua(b,"nonce"),$APP.xT,Eid(c),$APP.hFb,d],null)],null);c=$APP.bx();e=$APP.$H.C(e);e=$APP.n(e)?e:$APP.bx();return new $APP.m(null,5,[$APP.tr,a,$APP.cH,"whiteboard",$APP.AG,b,$APP.aI,c,$APP.$H,e],null)},Gid=function(a,b,c,d,e,f){a=Eid(a.getCleanUpAssets());var g=$APP.xh.j(function(z){return $APP.ua(z,"id")},b.shapes),
h=$APP.ch($APP.xh.j(function(z){z=$APP.nf(z);z=$APP.G.j(z,$APP.yl);return $APP.S.F(Eid(b.getShapeById(z).serialized),$APP.Xx,g.indexOf(z))},$APP.IA.j(c,d)));d=$APP.ch($APP.xh.j($APP.yl,d));var l=$APP.ch($APP.xh.j($APP.yl,c)),p=$APP.ch($APP.Om.j($APP.Tj,$APP.IA.j(l,d)));c=$APP.ch($APP.Sf.j(function(z){z=$APP.yl.C(z);return p.C?p.C(z):p.call(null,z)},h));var q=$APP.Om.j($APP.Tj,$APP.IA.j(d,l)),r=$APP.iC();d=$APP.x(q)?$APP.xh.j(function(z){return $APP.Hy.j(z,new $APP.O(null,2,5,$APP.Q,[$APP.AG,$APP.RE],
null))},function(){var z=new $APP.O(null,1,5,$APP.Q,[$APP.sz],null),F=$APP.sj.j(function(H){return new $APP.O(null,2,5,$APP.Q,[$APP.nD,$APP.bi(H)],null)},q);return $APP.EF?$APP.EF(r,z,F):$APP.FF.call(null,r,z,F)}()):null;l=$APP.sj.j(function(z){return new $APP.O(null,2,5,$APP.Q,[$APP.hLa,new $APP.O(null,2,5,$APP.Q,[$APP.nD,$APP.bi(z)],null)],null)},q);var t=$APP.IA.j(h,c),y=$APP.x(t)?function(){var z=new $APP.O(null,1,5,$APP.Q,[$APP.sz],null),F=$APP.sj.j(function(H){return new $APP.O(null,2,5,$APP.Q,
[$APP.nD,$APP.bi($APP.yl.C(H))],null)},t);return $APP.EF?$APP.EF(r,z,F):$APP.FF.call(null,r,z,F)}():null;return new $APP.m(null,4,[$APP.iqc,Fid(e,b,a,g),$APP.hFc,$APP.xh.j(function(z){return $APP.Yd(p,$APP.u.C($APP.nD.C(z)))?$APP.S.F(z,$APP.aI,$APP.bx()):$APP.atb(z)},$APP.xh.j(function(z){z=new $APP.m(null,2,[$APP.SE,$APP.JN,$APP.RE,z],null);z=new $APP.m(null,3,[$APP.zF,new $APP.m(null,1,[$APP.tr,$APP.sr.C?$APP.sr.C(e):$APP.sr.call(null,e)],null),$APP.OF,new $APP.m(null,1,[$APP.tr,e],null),$APP.AG,
z],null);var F=$APP.Pib(z,e);return $APP.Vl.G($APP.E([z,F]))},h)),$APP.cG,l,$APP.LVb,new $APP.m(null,3,[$APP.Osb,$APP.Gb(f),$APP.qsb,f,$APP.iw,new $APP.m(null,5,[$APP.GN,e,$APP.AFb,d,$APP.BFb,c,$APP.CFb,t,$APP.DFb,y],null)],null)],null)},Hid=function(a,b,c){var d=$APP.ad($APP.A(b.pages)),e=d.shapes,f=$APP.xh.j(function(p){return $APP.ua(p,"id")},e);e=$APP.ch($APP.xh.j(function(p){var q=p.id;return new $APP.m(null,2,[$APP.yl,q,$APP.kFb,$APP.B.j(p.id,f.indexOf(q))?p.nonce:(new Date).getTime()],null)},
e));var g=$APP.iC(),h=function(){var p=$APP.Hy.j($APP.v($APP.R4c),new $APP.O(null,2,5,$APP.Q,[g,a],null));return $APP.n(p)?p:$APP.ch($APP.xh.j(function(q){return $APP.Er.F(q,$APP.yl,$APP.u)},Did(g,a)))}();b=Gid(b,d,e,h,a,c);h=$APP.nf(b);d=$APP.G.j(h,$APP.iqc);b=$APP.G.j(h,$APP.hFc);c=$APP.G.j(h,$APP.cG);h=$APP.G.j(h,$APP.LVb);d=$APP.Yk.G(c,new $APP.O(null,1,5,$APP.Q,[d],null),$APP.E([b]));var l=$APP.Hy.j(h,new $APP.O(null,2,5,$APP.Q,[$APP.iw,$APP.BFb],null));l=$APP.n($APP.xf(function(p){return $APP.B.j("group",
$APP.Qm.C(p))},l))?$APP.S.F(h,$APP.EFb,$APP.Zv):$APP.n($APP.xf(function(p){return $APP.B.j("group",$APP.Qm.C(p))},$APP.Hy.j(h,new $APP.O(null,2,5,$APP.Q,[$APP.iw,$APP.AFb],null))))?$APP.S.F(h,$APP.EFb,$APP.lrc):$APP.n($APP.xf(function(p){return $APP.B.j("line",$APP.Qm.C(p))&&$APP.B.j("arrow ",$APP.Wo.C($APP.hpc.C(p)))},l))?$APP.S.F(h,$APP.EFb,$APP.yBc):h;b=$APP.x($APP.Yk.j(b,c))?l:$APP.S.F(h,$APP.$Xa,!0);$APP.Nh.R($APP.R4c,$APP.yv,new $APP.O(null,2,5,$APP.Q,[g,a],null),e);if($APP.Yd(new $APP.Yg(null,
new $APP.m(null,1,[$APP.yBc,null],null),null),$APP.EFb.C(b)))return $APP.lC($APP.yRc,new $APP.m(null,2,[$APP.Oy,d,$APP.LVb,b],null));e=$APP.yRc.C($APP.v($APP.jC));$APP.Yk.j($APP.Oy.C(e),d);$APP.Vl.G($APP.E([b,$APP.LVb.C(e)]));$APP.lC($APP.yRc,$APP.mf);return null},Iid=function(a){a=$APP.uH(a);return $APP.Om.j($APP.Hib,a)},Jid=function(a){var b=$APP.Py.C($APP.BH(a));a=Iid(a);a=$APP.Sf.j(function(d){return $APP.B.j(b,$APP.Py.C($APP.OF.C(d)))},a);var c=$APP.ch($APP.Om.j($APP.Bb,$APP.xh.j(function(d){return $APP.Hy.F(d,
new $APP.O(null,2,5,$APP.Q,[$APP.PF,$APP.Py],null),null)},a)));a=$APP.Om.j(function(d){d=$APP.Py.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},Kid=function(){return $APP.mm(null,function(){return $APP.mm(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.mm(a.text(),function(b){return $APP.mm($APP.zr($APP.mf,b),function(c){return $APP.fm(c)})})})})},Lid=function(a){var b=$APP.E0a();return($APP.od(b)||$APP.B.j(1,$APP.Wc(b))&&$APP.B.j(a,$APP.tr.C($APP.A(b))))&&
$APP.Gb($APP.Hy.j($APP.v($APP.jC),new $APP.O(null,1,5,$APP.Q,[$APP.icc],null)))},Mid=function(a){return null!=a?$APP.pm($APP.mm(null,function(){return $APP.mm(Kid(),function(b){var c=$APP.nf(b);b=$APP.G.j(c,$APP.YH);c=$APP.G.j(c,$APP.Zw);var d=$APP.A(b);b=$APP.iFb(d,c);d=$APP.Gib(d);c=$APP.xT.C(d);d=$APP.EI.C(d);a.cloneShapesIntoCurrentPage($APP.Mi(new $APP.m(null,3,[$APP.sFb,b,$APP.xT,c,$APP.EI,d],null)));$APP.lC($APP.icc,!0);b=$APP.RB($APP.Igc,!0);return $APP.fm(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",
b)}):null},Pid=function(a,b){b=$APP.Cq.G(b,$APP.E([new $APP.m(null,1,[$APP.Dq,!0],null)]));b=$APP.nf(b);var c=$APP.G.j(b,Nid),d=$APP.G.j(b,$APP.pK),e=$APP.G.j(b,Oid),f=$APP.iC();return $APP.mm(null,function(){return $APP.mm($APP.n(d)?$APP.idb(f,a,new $APP.m(null,1,[$APP.yx,100],null)):null,function(g){return $APP.mm($APP.n(c)?$APP.ndb(a,10):null,function(h){return $APP.mm($APP.n(e)?$APP.odb(a,100):null,function(l){return $APP.fm($APP.Mi(new $APP.m(null,3,[$APP.YH,h,$APP.Zw,g,$APP.bL,l],null)))})})})})},
Qid=function(a){return $APP.lm($APP.Ezb($APP.iC(),new $APP.O(null,1,5,$APP.Q,[$APP.Cq.C(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.D.F(c,0,null),$APP.D.F(c,1,null),c=$APP.D.F(c,2,null),$APP.Gzb($APP.n(c)?c:b)):null})},Rid=function(){return $APP.mCb(null)},Sid=function(){return $APP.pCb(null)},gjd=function(a){return $APP.Mg([Tid,Uid,Vid,Wid,Xid,Yid,$APP.ND,Zid,$id,ajd,bjd,cjd,djd,ejd,fjd],[function(b){return $APP.tr.C($APP.VZa($APP.iC(),$APP.Fi(b)))},function(b){return $APP.CH(b,
!1)},function(b){return $APP.lFb(b)},$APP.ux,function(b){return $APP.Eyb(b,new $APP.m(null,1,[$APP.iT,!1],null))},$APP.WH,Pid,Qid,Cid,function(b,c){return $APP.Ww(b,$APP.E([$APP.Yw,c]))},function(b){var c=$APP.u,d=c.C,e=$APP.oB(),f=$APP.BH(a),g=Jid(a);b=new $APP.m(null,6,[$APP.PF,$APP.Xg($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.Q,[$APP.Py],null)),$APP.nD,e,$APP.kD,$APP.n(b)?b:"",$APP.gG,$APP.ur,$APP.zF,new $APP.m(null,2,[$APP.tr,$APP.sr.C?$APP.sr.C(a):$APP.sr.call(null,a),$APP.fx,a],null),$APP.OF,new $APP.m(null,
1,[$APP.tr,a],null)],null);$APP.GF(new $APP.O(null,1,5,$APP.Q,[b],null));return d.call(c,e)},function(b,c){return $APP.HD(function(){return(0,$APP.NQb)(b,$APP.Vl.G($APP.E([$APP.Cq.G(c,$APP.E([$APP.Dq,!0])),new $APP.m(null,1,[$APP.jT,!0],null)])))})},function(b,c){return $APP.iD($APP.iC(),$APP.Py.C($APP.BH(b)),$APP.zh.C(c))},function(b){var c=$APP.Bw(b)?$APP.tr.C($APP.VZa($APP.iC(),$APP.Fi(b))):null;c=$APP.n(c)?c:b;var d=$APP.wH(c),e=$APP.WH(c);return $APP.n(d)?$APP.n(e)?$APP.hN(c,new $APP.m(null,
1,[$APP.gN,b],null)):$APP.eN($APP.CH(b,!1)):null},function(b){return $APP.Mi($APP.SG($APP.Fi(b)))}])},fjd=new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),cjd=new $APP.N(null,"exportToImage","exportToImage",-154356643),bjd=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),Oid=new $APP.N(null,"files?","files?",-1267491104),Tid=new $APP.N(null,"getBlockPageName","getBlockPageName",-1656908032),hjd=new $APP.N(null,"renderers","renderers",-1460292282),ijd=new $APP.N(null,"model",
"model",331153215),Uid=new $APP.N(null,"getRedirectPageName","getRedirectPageName",-1858136925),Wid=new $APP.N(null,"isMobile","isMobile",-2043133877),jjd=new $APP.N(null,"onMount","onMount",-876858467),Xid=new $APP.N(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),$id=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),kjd=new $APP.N(null,"onPersist","onPersist",-1848738852),ljd=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),ajd=new $APP.N(null,"copyToClipboard","copyToClipboard",
1092115063),ejd=new $APP.N(null,"redirectToPage","redirectToPage",87147838),Vid=new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",554297706),Zid=new $APP.N(null,"saveAsset","saveAsset",-668047853),mjd=new $APP.N(null,"BacklinksCount","BacklinksCount",364670631),njd=new $APP.N(null,"Block","Block",-1959785792),djd=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),ojd=new $APP.N(null,"Page","Page",-1267059506),Nid=new $APP.N(null,"pages?","pages?",-2065014049),pjd=new $APP.N(null,
"PageName","PageName",-164991013),qjd=new $APP.N(null,"Tweet","Tweet",-452258680),Yid=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579),rjd=new $APP.N(null,"BlockReference","BlockReference",-120254741);$APP.bda("tldraw");var sjd=$APP.wm(591);var tjd,ujd;$APP.B$c={};tjd=$APP.NT($APP.ua(sjd,"App"));$APP.E$c=$APP.ua(sjd,"generateJSXFromModel");
ujd=new $APP.m(null,7,[ojd,$APP.Wr($APP.$r,function(a){return(0,$APP.L9c)(new $APP.m(null,2,[$APP.GN,$APP.CH($APP.ua(a,"pageName"),!1),$APP.jT,!0],null))},null,"frontend.extensions.tldraw/page-cp"),njd,$APP.Wr($APP.$r,function(a){a=$APP.bi($APP.ua(a,"blockId"));var b=$APP.HTa($APP.Y6b);a=b.C?b.C(a):b.call(null,a);return $APP.Jr(a)},null,"frontend.extensions.tldraw/block-cp"),ljd,$APP.Wr($APP.$r,function(a){return $APP.Jr($APP.CW(new $APP.m(null,1,[$APP.f_,!0],null),$APP.iC(),$APP.bi($APP.ua(a,"blockId")),
new $APP.m(null,2,[$APP.KXb,$APP.ua(a,"endSeparator"),$APP.LXb,$APP.ua(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),qjd,$APP.Wr($APP.$r,function(a){return(0,$APP.xWb)($APP.ua(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),pjd,$APP.Wr($APP.$r,function(a){return(0,$APP.qW)(new $APP.m(null,1,[$APP.f_,!0],null),new $APP.m(null,1,[$APP.tr,$APP.ua(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),mjd,function(a){return $APP.Cf.j($APP.H$c,$APP.xh.j(function(b){return $APP.Cq.G($APP.ua(a,
b),$APP.E([new $APP.m(null,1,[$APP.Dq,!0],null)]))},new $APP.O(null,3,5,$APP.Q,["id","className","options"],null)))},rjd,$APP.Wr($APP.$r,function(a){return(0,$APP.HVb)($APP.mf,$APP.ua(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference")],null);
$APP.C$c=$APP.Wr($APP.$r,function(a,b){function c(l){if($APP.n(l)){l.appUndo=Rid;l.appRedo=Sid;var p=$APP.ua(l,"api");return $APP.n(p)?$APP.lm(d?Mid(p):null,function(){$APP.BUa(l,b);return h.C?h.C(l):h.call(null,l)}):null}return null}var d=Lid(a),e=$APP.tFb(a),f=$APP.js(null),g=$APP.D.F(f,0,null),h=$APP.D.F(f,1,null);$APP.ks(function(){$APP.n($APP.n(g)?b:g)&&$APP.BUa(g,b);return function(){return $APP.Dc}},new $APP.O(null,2,5,$APP.Q,[b,g],null));return $APP.n(e)?$APP.X("div",{style:{overscrollBehavior:"none"},
onBlur:function(l){l=$APP.ua(l,"target").tagName;var p=new $APP.Yg(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.mD():null},onWheel:$APP.Ow,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.Gb(g)?$APP.X("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.Jr($APP.ZT("Loading onboarding whiteboard ..."))]):null,$APP.Jr(function(){var l=new $APP.m(null,6,[hjd,ujd,$APP.IB,
gjd(a),jjd,c,$APP.EGc,!0,kjd,function(p,q){$APP.lC(new $APP.O(null,2,5,$APP.Q,[$APP.DIc,$APP.iC()],null),$APP.bx());return $APP.n(!1)?(console.time("tldraw persist"),p=Hid(a,p,q.replace),console.timeEnd("tldraw persist"),p):Hid(a,p,q.replace)},ijd,e],null);return tjd.C?tjd.C(l):tjd.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Xa.Xi();
}).call(this);